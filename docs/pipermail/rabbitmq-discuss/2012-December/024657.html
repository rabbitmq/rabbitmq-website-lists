<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20performance%20between%20high%20MHz/low%20core%20vs%0A%20lower%20MHz/high%20core%20servers&In-Reply-To=%3C50D4AE74.3080505%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024629.html">
   <LINK REL="Next"  HREF="024630.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20performance%20between%20high%20MHz/low%20core%20vs%0A%20lower%20MHz/high%20core%20servers&In-Reply-To=%3C50D4AE74.3080505%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Dec 21 18:46:12 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024629.html">[rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers
</A></li>
        <LI>Next message: <A HREF="024630.html">[rabbitmq-discuss] unsubscribe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24657">[ date ]</a>
              <a href="thread.html#24657">[ thread ]</a>
              <a href="subject.html#24657">[ subject ]</a>
              <a href="author.html#24657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris,

On 20/12/12 17:27, Chris Schmidt wrote:
&gt;<i> RHEL 6.2 doesn't seem to have the latest version of Erlang available
</I>&gt;<i> in the repositories. Does anyone have experience with manually
</I>&gt;<i> building Erlang on that platform with success? We're on R14B04 right
</I>&gt;<i> now. There are a huge number of erlang related rpms that get
</I>&gt;<i> installed I'm not certain if a single Erlang version for CentOS
</I>&gt;<i> would work properly or not.
</I>
You may want to give
<A HREF="https://my.vmware.com/web/vmware/details?downloadGroup=VFEL_15B02&amp;productId=267">https://my.vmware.com/web/vmware/details?downloadGroup=VFEL_15B02&amp;productId=267</A>
a try - it's R15B02 (so not quite the latest but close enough) with
&quot;batteries included&quot;, i.e. no dependencies.

&gt;<i> I had +K true -smp enable +native +sbtps plus the other RMQ defaults
</I>
&quot;+K true&quot; is already part of the standard config. So is &quot;-smp auto&quot;,
which enables smp when there is more than one core. &quot;+native&quot; is a
compile-time option and I would not recommend using it. As for +sbtps, I
suggest you leave that out and stick with the default.

As I said in my earlier email, playing with the +swt option may yield
some benefits.

&gt;<i> I also had 15 consumers running against the initial queue that was
</I>&gt;<i> having problems.
</I>
Increasing the number of consumers only helps when the consumers, rather
than the queue, are the bottleneck.

&gt;<i> I also tried sending the data into 2 - 40 exchanges (and updated the
</I>&gt;<i> queue to read from those exchanges) in order to see if I could spread
</I>&gt;<i> the load that way.
</I>
Exchanges are not represented by processes, so you don't gain anything
by spreading the load over them. Increasing the number of producers can 
increase the message ingestion rate, but only if the messages get routed 
to different queues.

&gt;<i> Does a single process manage each queue?
</I>
yes.

&gt;<i> If so I can see that being a potential bottleneck due to the core's
</I>&gt;<i> speed difference.
</I>
Exactly.

&gt;<i> Is there an erlang or rabbitmqctl command that I can run against the
</I>&gt;<i> RMQ server to determine if the queues themselves are the bottleneck?
</I>
If the queues are growing then the bottleneck is on the outbound side 
(rabbit's AMQP encoding, network, consumers).

If the queues stay short/empty then the bottleneck is on the inbound 
side (producer, network, rabbit's AMQP decoding, routing, the queue). If 
connections get blocked due to flow control then the bottleneck is in 
the latter three. Narrowing it down any further is tricky.

Regards,

Matthias.
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024629.html">[rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers
</A></li>
	<LI>Next message: <A HREF="024630.html">[rabbitmq-discuss] unsubscribe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24657">[ date ]</a>
              <a href="thread.html#24657">[ thread ]</a>
              <a href="subject.html#24657">[ subject ]</a>
              <a href="author.html#24657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
