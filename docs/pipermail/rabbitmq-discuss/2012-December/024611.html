<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ sending frames after delivering	connection_close_ok
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20sending%20frames%20after%20delivering%0A%09connection_close_ok&In-Reply-To=%3C5F089143-EDE2-4B46-A492-358B8065490D%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024610.html">
   <LINK REL="Next"  HREF="024614.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ sending frames after delivering	connection_close_ok</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20sending%20frames%20after%20delivering%0A%09connection_close_ok&In-Reply-To=%3C5F089143-EDE2-4B46-A492-358B8065490D%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ sending frames after delivering	connection_close_ok">tim at rabbitmq.com
       </A><BR>
    <I>Thu Dec 20 10:41:46 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024610.html">[rabbitmq-discuss] RabbitMQ sending frames after delivering	connection_close_ok
</A></li>
        <LI>Next message: <A HREF="024614.html">[rabbitmq-discuss] RabbitMQ sending frames after delivering	connection_close_ok
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24611">[ date ]</a>
              <a href="thread.html#24611">[ thread ]</a>
              <a href="subject.html#24611">[ subject ]</a>
              <a href="author.html#24611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Marek! :)

Can you actually see the cancel.ok frame arrive on the network after the close.ok frame? I'm not seeing how that can happen on the broker's side, but I'll continue staring at the code a while to make sure.

Cheers,
Tim

On 20 Dec 2012, at 10:35, Marek Majkowski wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> One of the Puka users found that it is possible to
</I>&gt;<i> crash Puka. It happens as RabbitMQ seems to
</I>&gt;<i> keep on sending frames after connection_close_ok.
</I>&gt;<i> 
</I>&gt;<i> Puka has trouble behaving in such a case.
</I>&gt;<i> 
</I>&gt;<i> Is it a valid AMQP behaviour? Can anything be delivered
</I>&gt;<i> after connection_close_ok had been sent?
</I>&gt;<i> 
</I>&gt;<i> More comments:
</I>&gt;<i>  <A HREF="https://github.com/majek/puka/issues/34">https://github.com/majek/puka/issues/34</A>
</I>&gt;<i> 
</I>&gt;<i> To reproduce run two instances of this code on a
</I>&gt;<i> SMP machine:
</I>&gt;<i>  <A HREF="https://gist.github.com/4344132">https://gist.github.com/4344132</A>
</I>&gt;<i> 
</I>&gt;<i> Tested with RabbitMQ 2.7.1 and probably 2.8.6.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i>    Marek
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024610.html">[rabbitmq-discuss] RabbitMQ sending frames after delivering	connection_close_ok
</A></li>
	<LI>Next message: <A HREF="024614.html">[rabbitmq-discuss] RabbitMQ sending frames after delivering	connection_close_ok
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24611">[ date ]</a>
              <a href="thread.html#24611">[ thread ]</a>
              <a href="subject.html#24611">[ subject ]</a>
              <a href="author.html#24611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
