<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Automating a RabbitMQ 3.0 cluster on EC2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Automating%20a%20RabbitMQ%203.0%20cluster%20on%20EC2&In-Reply-To=%3Cloom.20121229T144749-15%40post.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024692.html">
   <LINK REL="Next"  HREF="024722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Automating a RabbitMQ 3.0 cluster on EC2</H1>
    <B>Francesco Mazzoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Automating%20a%20RabbitMQ%203.0%20cluster%20on%20EC2&In-Reply-To=%3Cloom.20121229T144749-15%40post.gmane.org%3E"
       TITLE="[rabbitmq-discuss] Automating a RabbitMQ 3.0 cluster on EC2">f at mazzo.li
       </A><BR>
    <I>Sat Dec 29 13:51:14 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024692.html">[rabbitmq-discuss] Automating a RabbitMQ 3.0 cluster on EC2
</A></li>
        <LI>Next message: <A HREF="024722.html">[rabbitmq-discuss] Automating a RabbitMQ 3.0 cluster on EC2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24721">[ date ]</a>
              <a href="thread.html#24721">[ thread ]</a>
              <a href="subject.html#24721">[ subject ]</a>
              <a href="author.html#24721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At Fri, 28 Dec 2012 12:26:52 +0100,
Mathias Meyer wrote:
&gt;<i> Regarding changing the host name, I tried that, and from my experiments, that
</I>&gt;<i> didn't seem to work properly. But that might have been related again to the
</I>&gt;<i> hostname temporarily not being resolvable.
</I>
What did you do, and what didn&#8217;t work?  It&#8217;s impossible for us to diagnose a
problem without the symptoms.

&gt;<i> The partitioning was mostly conjecture. It might happen, and it's still
</I>&gt;<i> fixable if it does. The whole mechanism just strikes me as less than ideal
</I>&gt;<i> when it comes to automating a cluster setup.
</I>
This is set of assumptions that comes from a well established theorem:
&lt;<A HREF="https://en.wikipedia.org/wiki/CAP_theorem">https://en.wikipedia.org/wiki/CAP_theorem</A>&gt;.  RabbitMQ clustering sits on the CA
side of things, with some limited support for partitioning.  We provide other
solutions that offer different guarantees, see
&lt;<A HREF="http://www.rabbitmq.com/distributed.html">http://www.rabbitmq.com/distributed.html</A>&gt;.

&gt;<i> They might seem different on the surface, but given how the RabbitMQ package
</I>&gt;<i> installer works, they bot converge into the issue of automating and
</I>&gt;<i> customizing a cluster setup.
</I>
I&#8217;m not sure what you mean here.  What does &#8220;RabbitMQ package&#8221; refers to?  Can
you be more clear on why &#8220;they converge into the same issue&#8221;?

&gt;<i> Are all of them documented? Looking at the documentation, it seems to be
</I>&gt;<i> mostly straight-forward, except for the netsplits. If there are that many
</I>&gt;<i> subtleties, I sure wish they'd be mentioned properly in the documentation.
</I>
Well, here to change clustering behavior you would probably have to force
things a bit, either with &#8220;dangerous&#8221; commands or by `eval'ing Erlang
expressions - so you&#8217;d be delving into clustering internals that, as
implementation details, are not documented.

Note that you can also deploy some gentler measures like &#8220;check that the node
has clustered, try again in 5 minutes if it didn&#8217;t&#8221;, but those would be ad-hoc
measures that we can&#8217;t generalize as default behaviour.

&gt;<i> The cluster is going to run with all nodes in a single available
</I>&gt;<i> zone. Netsplits are unavoidable in any network but are less likely to happen
</I>&gt;<i> in a setup like that.
</I>
Netsplits are tolerated to a certain extent, but currently we don&#8217;t precisely
specify the semantics of the recovery mechanisms.  What&#8217;s surely the case is
that to use `join_cluster' both nodes have to be online - this is not that much
about netsplits but about `join_cluster' being an operation that requires
agreement from 2 parties.

&gt;<i> My biggest question still remains unanswered unfortunately: how do folks go
</I>&gt;<i> about automating a cluster setup, with or without the issues described in my
</I>&gt;<i> original email?
</I>
I&#8217;m still not sure what your problem is exactly.  If the above makes sense,
`join_cluster' should serve your needs.  For what concerns the hostname
problems, I&#8217;m waiting for more details.

Francesco


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024692.html">[rabbitmq-discuss] Automating a RabbitMQ 3.0 cluster on EC2
</A></li>
	<LI>Next message: <A HREF="024722.html">[rabbitmq-discuss] Automating a RabbitMQ 3.0 cluster on EC2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24721">[ date ]</a>
              <a href="thread.html#24721">[ thread ]</a>
              <a href="subject.html#24721">[ subject ]</a>
              <a href="author.html#24721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
