<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Distributing%20Tasks%20to%20Worker%20Queues%20Across%0A%20Federated%20Exchanges&In-Reply-To=%3C50D4B9AA.4020105%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024656.html">
   <LINK REL="Next"  HREF="024667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Distributing%20Tasks%20to%20Worker%20Queues%20Across%0A%20Federated%20Exchanges&In-Reply-To=%3C50D4B9AA.4020105%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Dec 21 19:34:02 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024656.html">[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
</A></li>
        <LI>Next message: <A HREF="024667.html">[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24660">[ date ]</a>
              <a href="thread.html#24660">[ thread ]</a>
              <a href="subject.html#24660">[ subject ]</a>
              <a href="author.html#24660">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris,

On 21/12/12 16:59, Chris wrote:
&gt;<i> Thanks for the reply, Tim.  The nodes may be thousands of miles apart
</I>&gt;<i> and each geographic location will have its own cluster as well.  We're
</I>&gt;<i> trying to find a solution that doesn't require any additional hardware
</I>&gt;<i> and can be configured somewhat easily via a GUI.  A load balancer also
</I>&gt;<i> would not understand how to properly route based on queues/exchanges--
</I>&gt;<i> the key is only to distribute/load-balance over the nodes that actually
</I>&gt;<i> have consumers for the given exchange/queue.
</I>
It is not quite clear what problem you are trying to solve. In your 
original email you said:

&lt;quote&gt;
Broker A: Workers listening on queues with routing keys X &amp; Y
Broker B: Workers listening on queues with routing keys Y &amp; Z

1) Submit job with routing key X from Broker A: Should go to Consumer of 
X on Broker A
2) Submit job with routing key Y from Broker A: Should go ONLY to 
Consumer of Y on Broker A
3) Submit job with routing key Z from Broker A: Should go to Consumer of 
Z on Broker A
&lt;/quote&gt;

Re (3) - there is no consumer of Z on A. I'm guessing you meant B.

Overall, I am guessing what you are trying to say here is that you have 
three types of task - X,Y,Z - and workers that know how to process a 
sub-set of these tasks, and that these workers might be in different 
locations. And each task should be processed by only one worker.

So why not simply have a single broker, in one location, with three 
queues - X, Y, Z? Workers, wherever they are, connect to the broker and 
start consuming from the queues whose tasks they can handle.

One step up from this simple set up would be a federation where the X, 
Y, Z queues reside on different brokers in the federation. The main 
complication that creates is that workers need to know which of the 
federated brokers they need to connect to.

Beware of premature optimisations. I'd stick with the simple setup 
unless you have determined experimentally that it does not perform 
adequately for your use case.

Regards,

Matthias
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024656.html">[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
</A></li>
	<LI>Next message: <A HREF="024667.html">[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24660">[ date ]</a>
              <a href="thread.html#24660">[ thread ]</a>
              <a href="subject.html#24660">[ subject ]</a>
              <a href="author.html#24660">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
