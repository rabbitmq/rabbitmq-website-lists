<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 3.0.0 hangs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.0.0%20hangs&In-Reply-To=%3C1308E5CFD51CA14DA7B024A689B8B1680288BD9825%40LDNPCMMGMB01.INTRANET.BARCAPINT.COM%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024549.html">
   <LINK REL="Next"  HREF="024330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 3.0.0 hangs</H1>
    <B>rui.favas at barclays.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.0.0%20hangs&In-Reply-To=%3C1308E5CFD51CA14DA7B024A689B8B1680288BD9825%40LDNPCMMGMB01.INTRANET.BARCAPINT.COM%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 3.0.0 hangs">rui.favas at barclays.com
       </A><BR>
    <I>Mon Dec 17 12:57:35 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024549.html">[rabbitmq-discuss] RabbitMQ 3.0.0 hangs
</A></li>
        <LI>Next message: <A HREF="024330.html">[rabbitmq-discuss] [SOS] About how to send HTTP request to MQ server using JSON-PRC from mobile devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24550">[ date ]</a>
              <a href="thread.html#24550">[ thread ]</a>
              <a href="subject.html#24550">[ subject ]</a>
              <a href="author.html#24550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Erlang starts fine &#8211; Both work fine for a period of time  (I can acess rabbit and management console fine for an hour or so)

See full log below:-

=INFO REPORT==== 17-Dec-2012::10:00:44 ===
Starting RabbitMQ 3.0.1 on Erlang R15B03

=INFO REPORT==== 17-Dec-2012::10:00:46 ===
Limiting to approx 65436 file handles (58890 sockets)

=INFO REPORT==== 17-Dec-2012::10:00:46 ===
    application: mnesia
    exited: stopped
    type: temporary

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Memory limit set to 9826MB of 24565MB total.

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Disk free limit set to 1000MB

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Management plugin upgraded statistics to coarse.

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 17-Dec-2012::10:00:47 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Adding vhost '/test'

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Creating user 'testadmin'

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Setting user tags for user 'testadmin' to [administrator]

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Setting permissions for 'testadmin' in '/bcfs' to '.*', '.*', '.*'

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Management agent started.

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Management plugin started. Port: 15672

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
Statistics database started.

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
accepting AMQP connection &lt;0.362.0&gt; (10.74.59.91:51986 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
accepting AMQP connection &lt;0.372.0&gt; (10.74.59.91:51985 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
accepting AMQP connection &lt;0.387.0&gt; (10.74.59.91:51988 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:00:47 ===
accepting AMQP connection &lt;0.391.0&gt; (10.74.59.91:51987 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:04:01 ===
accepting AMQP connection &lt;0.549.0&gt; (30.254.43.157:62861 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:04:16 ===
closing AMQP connection &lt;0.549.0&gt; (30.254.43.157:62861 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:04:29 ===
accepting AMQP connection &lt;0.562.0&gt; (30.254.43.157:62865 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:04:33 ===
accepting AMQP connection &lt;0.575.0&gt; (30.254.43.157:62866 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:21:57 ===
closing AMQP connection &lt;0.575.0&gt; (30.254.43.157:62866 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:21:58 ===
closing AMQP connection &lt;0.562.0&gt; (30.254.43.157:62865 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:47:31 ===
accepting AMQP connection &lt;0.1467.0&gt; (30.254.43.157:51530 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:47:38 ===
accepting AMQP connection &lt;0.1480.0&gt; (30.254.43.157:51533 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:47:43 ===
accepting AMQP connection &lt;0.1491.0&gt; (30.254.43.157:51535 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:47:49 ===
accepting AMQP connection &lt;0.1502.0&gt; (30.254.43.157:51536 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:48:00 ===
accepting AMQP connection &lt;0.1513.0&gt; (30.254.43.157:51539 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:48:08 ===
accepting AMQP connection &lt;0.1524.0&gt; (30.254.43.157:51543 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:49:24 ===
accepting AMQP connection &lt;0.1536.0&gt; (30.254.43.157:51565 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:49:31 ===
accepting AMQP connection &lt;0.1547.0&gt; (30.254.43.157:51567 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:53:04 ===
closing AMQP connection &lt;0.1536.0&gt; (30.254.43.157:51565 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:53:06 ===
closing AMQP connection &lt;0.1524.0&gt; (30.254.43.157:51543 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:53:11 ===
closing AMQP connection &lt;0.1502.0&gt; (30.254.43.157:51536 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:53:19 ===
closing AMQP connection &lt;0.1513.0&gt; (30.254.43.157:51539 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:53:20 ===
closing AMQP connection &lt;0.1547.0&gt; (30.254.43.157:51567 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:53:22 ===
closing AMQP connection &lt;0.1491.0&gt; (30.254.43.157:51535 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:53:57 ===
closing AMQP connection &lt;0.1480.0&gt; (30.254.43.157:51533 -&gt; 10.74.59.91:5672)

=INFO REPORT==== 17-Dec-2012::10:54:00 ===
closing AMQP connection &lt;0.1467.0&gt; (30.254.43.157:51530 -&gt; 10.74.59.91:5672)

=ERROR REPORT==== 17-Dec-2012::11:00:00 ===
** Generic server &lt;0.28.0&gt; terminating
** Last message in was {'EXIT',&lt;0.29.0&gt;,einval}
** When Server state == {state,user_sup,undefined,&lt;0.29.0&gt;,
                               {&lt;0.28.0&gt;,user_sup}}
** Reason for termination ==
** einval



From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Tim Watson
Sent: Monday, December 17, 2012 12:01 PM
To: Discussions about RabbitMQ
Cc: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>
Subject: Re: [rabbitmq-discuss] RabbitMQ 3.0.0 hangs

Can you start erlang by itself?

On 17 Dec 2012, at 11:37, &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rui.favas at barclays.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rui.favas at barclays.com</A>&gt;&gt; wrote:
Hi Tim,
The upgrade was simple - We just uninstalled the previous version and delete all the previous files (including the rabbit db) and installed the new version.
We are running:
             RabbitMQ : 3.0.1
            Erlang : 5.9.3
            OS :     Windows Server 2008 64-bit
Here&#8217;s what we get on the logs:-
Rabbit Log
=ERROR REPORT==== 17-Dec-2012::11:00:00 ===
** Generic server &lt;0.28.0&gt; terminating
** Last message in was {'EXIT',&lt;0.29.0&gt;,einval}
** When Server state == {state,user_sup,undefined,&lt;0.29.0&gt;,
                               {&lt;0.28.0&gt;,user_sup}}
** Reason for termination ==
** einval


Rabbit SASL Log


=SUPERVISOR REPORT==== 17-Dec-2012::11:00:00 ===
     Supervisor: {&lt;0.28.0&gt;,user_sup}
     Context:    child_terminated
     Reason:     einval
     Offender:   [{pid,&lt;0.29.0&gt;},{mod,user_sup}]


=CRASH REPORT==== 17-Dec-2012::11:00:00 ===
  crasher:
    initial call: supervisor_bridge:user_sup/1
    pid: &lt;0.28.0&gt;
    registered_name: []
    exception exit: einval
      in function  gen_server:terminate/6 (gen_server.erl, line 747)
    ancestors: [kernel_sup,&lt;0.10.0&gt;]
    messages: []
    links: [&lt;0.11.0&gt;]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 377
    stack_size: 24
    reductions: 337
  neighbours:

=SUPERVISOR REPORT==== 17-Dec-2012::11:00:00 ===
     Supervisor: {local,kernel_sup}
     Context:    child_terminated
     Reason:     einval
     Offender:   [{pid,&lt;0.28.0&gt;},
                  {name,user},
                  {mfargs,{user_sup,start,[]}},
                  {restart_type,temporary},
                  {shutdown,2000},
                  {child_type,supervisor}]



From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>&gt; [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Tim Watson
Sent: Friday, December 14, 2012 7:27 PM
To: Discussions about RabbitMQ
Cc: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&gt;&gt;
Subject: Re: [rabbitmq-discuss] RabbitMQ 3.0.0 hangs

Exactly how are you performing the upgrade. What do the server logs and rabbitmqctl report look like?

On 14 Dec 2012, at 18:35, &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rui.favas at barclays.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rui.favas at barclays.com</A>&gt;&gt; wrote:
I've upgraded to 3.0.1 and still get the problem - Looks like disabling the rabbitmq_management plug-in stops the issue. Any pointers?


From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>&gt; [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Rui
Sent: Tuesday, December 04, 2012 5:51 PM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&gt;
Subject: [rabbitmq-discuss] RabbitMQ 3.0.0 hangs

Rabbit 3.0 is hanging.
We have a number of existing .net applications using Rabbit and when we update the server to 3.0 Rabbit stops responding. Rolling back the server solves the problem.
Do we need to upgrade the client library at the same time?
Any logs I could look at to try to troubleshoot the problem?
_______________________________________________
This e-mail may contain information that is confidential, privileged or otherwise protected from disclosure. If you are not an intended recipient of this e-mail, do not duplicate or redistribute it by any means. Please delete it and any attachments and notify the sender that you have received it in error. Unless specifically indicated, this e-mail is not an offer to buy or sell or a solicitation to buy or sell any securities, investment products or other financial product or service, an official confirmation of any transaction, or an official statement of Barclays. Any views or opinions presented are solely those of the author and do not necessarily represent those of Barclays. This e-mail is subject to terms available at the following link: www.barclays.com/emaildisclaimer&lt;<A HREF="http://www.barclays.com/emaildisclaimer">http://www.barclays.com/emaildisclaimer</A>&gt;. By messaging with Barclays you consent to the foregoing.  Barclays offers premier investment banking products and services to its clients through Barclays Bank PLC, a company registered in England (number 1026167) with its registered office at 1 Churchill Place, London, E14 5HP.  This email may relate to or be sent from other members of the Barclays Group.
_______________________________________________
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121217/6cdd2ed3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121217/6cdd2ed3/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024549.html">[rabbitmq-discuss] RabbitMQ 3.0.0 hangs
</A></li>
	<LI>Next message: <A HREF="024330.html">[rabbitmq-discuss] [SOS] About how to send HTTP request to MQ server using JSON-PRC from mobile devices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24550">[ date ]</a>
              <a href="thread.html#24550">[ thread ]</a>
              <a href="subject.html#24550">[ subject ]</a>
              <a href="author.html#24550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
