<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and network partitions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20network%20partitions&In-Reply-To=%3C50C70E97.3090805%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024408.html">
   <LINK REL="Next"  HREF="024446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and network partitions</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20network%20partitions&In-Reply-To=%3C50C70E97.3090805%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and network partitions">simon at rabbitmq.com
       </A><BR>
    <I>Tue Dec 11 10:44:39 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024408.html">[rabbitmq-discuss] RabbitMQ and network partitions
</A></li>
        <LI>Next message: <A HREF="024446.html">[rabbitmq-discuss] RabbitMQ and network partitions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24444">[ date ]</a>
              <a href="thread.html#24444">[ thread ]</a>
              <a href="subject.html#24444">[ subject ]</a>
              <a href="author.html#24444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/12/12 11:12, Tuure Laurinolli wrote:
&gt;<i> Hi,
</I>
Hi.

&gt;<i> After reading <A HREF="http://www.rabbitmq.com/partitions.html">http://www.rabbitmq.com/partitions.html</A> I'm somewhat
</I>&gt;<i> concerned about behavior of RabbitMQ upon network partitions. It appears
</I>&gt;<i> that the basic issue is that Mnesia itself prefers availability over
</I>&gt;<i> consistency, and allows update operations even when a node is in
</I>&gt;<i> minority and knows it. It seems that others were concerned about this
</I>&gt;<i> too, and Mnesia now includes &quot;majority&quot; option on tables, which disables
</I>&gt;<i> updates in minority partitions.
</I>&gt;<i>
</I>&gt;<i> Are there other problems besides Mnesia that cause RabbitMQ to continue
</I>&gt;<i> to operate even in minority partition? If not, would enabling the
</I>&gt;<i> &quot;majority&quot; option on necessary tables in RabbitMQ cause it to continue
</I>&gt;<i> operations in the majority partition and to fail in the minority
</I>&gt;<i> partition, and to keep members of the previous minority partition down
</I>&gt;<i> when connectivity is restored? Presumably the previous minority nodes
</I>&gt;<i> could then be rejoined to the cluster with similar actions as currently.
</I>
That's something that we're looking at for a future release. I don't 
think we could enable it by default (lots of people have two node 
clusters) but it might be helpful for some people.

The question of what the minority partition should do when Mnesia 
refuses to perform updates is unclear. Probably it should just shut down 
altogether.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024408.html">[rabbitmq-discuss] RabbitMQ and network partitions
</A></li>
	<LI>Next message: <A HREF="024446.html">[rabbitmq-discuss] RabbitMQ and network partitions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24444">[ date ]</a>
              <a href="thread.html#24444">[ thread ]</a>
              <a href="subject.html#24444">[ subject ]</a>
              <a href="author.html#24444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
