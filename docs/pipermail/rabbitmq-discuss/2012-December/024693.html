<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federation and upstream cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20and%20upstream%20cluster&In-Reply-To=%3C50DD886C.4050904%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024691.html">
   <LINK REL="Next"  HREF="024694.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federation and upstream cluster</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20and%20upstream%20cluster&In-Reply-To=%3C50DD886C.4050904%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Federation and upstream cluster">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Dec 28 11:54:20 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024691.html">[rabbitmq-discuss] Federation and upstream cluster
</A></li>
        <LI>Next message: <A HREF="024694.html">[rabbitmq-discuss] Federation and upstream cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24693">[ date ]</a>
              <a href="thread.html#24693">[ thread ]</a>
              <a href="subject.html#24693">[ subject ]</a>
              <a href="author.html#24693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Vladislav,

On 28/12/12 09:32, Vladislav Pernin wrote:
&gt;<i> {{shutdown,{server_initiated_close,404,
</I>&gt;<i>                                     &lt;&lt;&quot;NOT_FOUND - home node
</I>&gt;<i> '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at remote-server1</A>' of durable queue 'federation: upstream-exchange
</I>&gt;<i> -&gt; federation-local:downstream-exchange' in vhost '/' is down or
</I>&gt;<i> inaccessible&quot;&gt;&gt;}},
</I>
That happens because the queue used by federation is durable but not 
mirrored, so when the node on which it was created goes down it is no 
longer accessible.

You said you tried making that queue mirrored, but that resulted in 
message loss. How did you detect the message loss? Does the upstream 
publisher have confirms enabled? If it received a confirmation for a 
message then I certainly would expect the message to eventually make it 
to the downstream. In the absence of such confirmation all bets are off.

Regards,

Matthias.
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024691.html">[rabbitmq-discuss] Federation and upstream cluster
</A></li>
	<LI>Next message: <A HREF="024694.html">[rabbitmq-discuss] Federation and upstream cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24693">[ date ]</a>
              <a href="thread.html#24693">[ thread ]</a>
              <a href="subject.html#24693">[ subject ]</a>
              <a href="author.html#24693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
