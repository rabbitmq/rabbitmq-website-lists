<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Persistence and Transactions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistence%20and%20Transactions&In-Reply-To=%3CB02582F4-F4B9-42AB-8633-96638F8AEAD8%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024677.html">
   <LINK REL="Next"  HREF="024703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Persistence and Transactions</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistence%20and%20Transactions&In-Reply-To=%3CB02582F4-F4B9-42AB-8633-96638F8AEAD8%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Persistence and Transactions">watson.timothy at gmail.com
       </A><BR>
    <I>Thu Dec 27 10:21:17 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024677.html">[rabbitmq-discuss] Persistence and Transactions
</A></li>
        <LI>Next message: <A HREF="024703.html">[rabbitmq-discuss] Persistence and Transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24679">[ date ]</a>
              <a href="thread.html#24679">[ thread ]</a>
              <a href="subject.html#24679">[ subject ]</a>
              <a href="author.html#24679">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27 Dec 2012, at 00:45, CJ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rmqjava1a at yahoo.com</A>&gt; wrote:

&gt;<i> From the examples I have seen, on the Publish side
</I>&gt;<i> 
</I>&gt;<i> 1&gt; You place a PERSISTENT_TEXT_PLAIN in the basicPublish call to perform
</I>&gt;<i> persistence
</I>&gt;<i> 
</I>
Correct - this is a message property that sets deliveryMode = 2 which is what actually marks the message as persistent.

&gt;<i> 2&gt;  You use a channel.txSelect and a channel.txCommit to perform
</I>&gt;<i> transactions
</I>&gt;<i> 
</I>&gt;<i> However, from the examples I have seen, there is no such requirement on the
</I>&gt;<i> consumer side
</I>&gt;<i> 
</I>&gt;<i> 1&gt;  Do I have to perform any special coding for a consumption of a
</I>&gt;<i> persistent message.
</I>&gt;<i> 
</I>
No none at all.

&gt;<i> 2&gt; Do I have to use a txCommit to perform a transaction of the ACKNOLEDGE on
</I>&gt;<i> a consumer (I understand that the consumption is not under a tx basis).
</I>&gt;<i> 
</I>
Not sure I understand the question here. If there is no transaction running then ACKs will just work and you don't need to do anything apart form sending them.

If your consumer starts a transaction o  a channel then the opposite is true. Consumer and producer transactions are completely separate. You cannot have a transaction that spans both clients. If a client is running in a transaction then ACKs it sends will be held uncommitted until the transaction commits. Or if the transaction rolls back, the client can still send the ACK afterwards, outside the transaction context wherein it will be treated like any other non-transactional ack. This is orthogonal to message persistence.

HTH

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Persistence-and-Transactions-tp24204.html">http://rabbitmq.1065348.n5.nabble.com/Persistence-and-Transactions-tp24204.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024677.html">[rabbitmq-discuss] Persistence and Transactions
</A></li>
	<LI>Next message: <A HREF="024703.html">[rabbitmq-discuss] Persistence and Transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24679">[ date ]</a>
              <a href="thread.html#24679">[ thread ]</a>
              <a href="subject.html#24679">[ subject ]</a>
              <a href="author.html#24679">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
