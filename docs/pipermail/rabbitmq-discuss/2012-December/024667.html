<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Distributing%20Tasks%20to%20Worker%20Queues%20Across%0A%20Federated%20Exchanges&In-Reply-To=%3CCAHEpgBDS4Quz5P1Fo_s_oEgR3oApr_qd%3D8eHqvGrRSbOP_NjKw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024660.html">
   <LINK REL="Next"  HREF="024592.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges</H1>
    <B>Chris</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Distributing%20Tasks%20to%20Worker%20Queues%20Across%0A%20Federated%20Exchanges&In-Reply-To=%3CCAHEpgBDS4Quz5P1Fo_s_oEgR3oApr_qd%3D8eHqvGrRSbOP_NjKw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges">stuff at moesel.net
       </A><BR>
    <I>Fri Dec 21 20:08:10 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024660.html">[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
</A></li>
        <LI>Next message: <A HREF="024592.html">[rabbitmq-discuss] Rabbit MQ(2.8.7) Server loses connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24667">[ date ]</a>
              <a href="thread.html#24667">[ thread ]</a>
              <a href="subject.html#24667">[ subject ]</a>
              <a href="author.html#24667">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias,

Thanks for your reply.  I too originally preferred to go with the simpler
setup of having a single broker (or cluster of brokers).  Since the
services and clients will literally be distributed across the world,
however, our product owner did not want all traffic to have to go over the
WAN (in some cases volume may be high).  In addition, each geographic
location needs to be able to continue to operate in a basic fashion if it
becomes disconnected from the WAN (with the understanding that the set of
available services may be smaller during the disconnected period).

You're right about #3 though-- a typo on my part!

Thanks again for the help-- I think I have a basic understanding of my
options now...

-Chris


On Fri, Dec 21, 2012 at 2:34 PM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> Chris,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 21/12/12 16:59, Chris wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Thanks for the reply, Tim.  The nodes may be thousands of miles apart
</I>&gt;&gt;<i> and each geographic location will have its own cluster as well.  We're
</I>&gt;&gt;<i> trying to find a solution that doesn't require any additional hardware
</I>&gt;&gt;<i> and can be configured somewhat easily via a GUI.  A load balancer also
</I>&gt;&gt;<i> would not understand how to properly route based on queues/exchanges--
</I>&gt;&gt;<i> the key is only to distribute/load-balance over the nodes that actually
</I>&gt;&gt;<i> have consumers for the given exchange/queue.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It is not quite clear what problem you are trying to solve. In your
</I>&gt;<i> original email you said:
</I>&gt;<i>
</I>&gt;<i> &lt;quote&gt;
</I>&gt;<i>
</I>&gt;<i> Broker A: Workers listening on queues with routing keys X &amp; Y
</I>&gt;<i> Broker B: Workers listening on queues with routing keys Y &amp; Z
</I>&gt;<i>
</I>&gt;<i> 1) Submit job with routing key X from Broker A: Should go to Consumer of X
</I>&gt;<i> on Broker A
</I>&gt;<i> 2) Submit job with routing key Y from Broker A: Should go ONLY to Consumer
</I>&gt;<i> of Y on Broker A
</I>&gt;<i> 3) Submit job with routing key Z from Broker A: Should go to Consumer of Z
</I>&gt;<i> on Broker A
</I>&gt;<i> &lt;/quote&gt;
</I>&gt;<i>
</I>&gt;<i> Re (3) - there is no consumer of Z on A. I'm guessing you meant B.
</I>&gt;<i>
</I>&gt;<i> Overall, I am guessing what you are trying to say here is that you have
</I>&gt;<i> three types of task - X,Y,Z - and workers that know how to process a
</I>&gt;<i> sub-set of these tasks, and that these workers might be in different
</I>&gt;<i> locations. And each task should be processed by only one worker.
</I>&gt;<i>
</I>&gt;<i> So why not simply have a single broker, in one location, with three queues
</I>&gt;<i> - X, Y, Z? Workers, wherever they are, connect to the broker and start
</I>&gt;<i> consuming from the queues whose tasks they can handle.
</I>&gt;<i>
</I>&gt;<i> One step up from this simple set up would be a federation where the X, Y,
</I>&gt;<i> Z queues reside on different brokers in the federation. The main
</I>&gt;<i> complication that creates is that workers need to know which of the
</I>&gt;<i> federated brokers they need to connect to.
</I>&gt;<i>
</I>&gt;<i> Beware of premature optimisations. I'd stick with the simple setup unless
</I>&gt;<i> you have determined experimentally that it does not perform adequately for
</I>&gt;<i> your use case.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121221/6766e534/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121221/6766e534/attachment.htm</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024660.html">[rabbitmq-discuss] Distributing Tasks to Worker Queues Across Federated Exchanges
</A></li>
	<LI>Next message: <A HREF="024592.html">[rabbitmq-discuss] Rabbit MQ(2.8.7) Server loses connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24667">[ date ]</a>
              <a href="thread.html#24667">[ thread ]</a>
              <a href="subject.html#24667">[ subject ]</a>
              <a href="author.html#24667">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
