<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] custom plugin causing problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20custom%20plugin%20causing%20problems&In-Reply-To=%3C1355817230309-24091.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024574.html">
   <LINK REL="Next"  HREF="024566.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] custom plugin causing problems</H1>
    <B>Prabodh Upreti</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20custom%20plugin%20causing%20problems&In-Reply-To=%3C1355817230309-24091.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] custom plugin causing problems">prabodh.upreti at vce.com
       </A><BR>
    <I>Tue Dec 18 07:53:50 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024574.html">[rabbitmq-discuss] AIX and HPUX
</A></li>
        <LI>Next message: <A HREF="024566.html">[rabbitmq-discuss] custom plugin causing problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24565">[ date ]</a>
              <a href="thread.html#24565">[ thread ]</a>
              <a href="subject.html#24565">[ subject ]</a>
              <a href="author.html#24565">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello

I am not sure what is going on with my system.

I created a custom plugin for authentication which is working fine.  As part
of that setup, I had to delete the guest user to make it secure.  

Now I need to use the rabbitmqadmin command to create an exchange because
the original one was not created as durable=true, hence I disabled my plugin
and enabled rabbitmq_management.  When I execute 

rabbitmqadmin -f long -d 3 list queues

I see

[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at fm11deploy02</A> rabbitmq]# rabbitmqadmin -f long -d 3 list queues
Traceback (most recent call last):
  File &quot;/usr/local/bin/rabbitmqadmin&quot;, line 828, in &lt;module&gt;
    main()
  File &quot;/usr/local/bin/rabbitmqadmin&quot;, line 325, in main
    method()
  File &quot;/usr/local/bin/rabbitmqadmin&quot;, line 456, in invoke_list
    format_list(self.get(uri), cols, self.options)
  File &quot;/usr/local/bin/rabbitmqadmin&quot;, line 348, in get
    return self.http(&quot;GET&quot;, path, &quot;&quot;)
  File &quot;/usr/local/bin/rabbitmqadmin&quot;, line 377, in http
    resp = conn.getresponse()
  File &quot;/usr/lib64/python2.6/httplib.py&quot;, line 990, in getresponse
    response.begin()
  File &quot;/usr/lib64/python2.6/httplib.py&quot;, line 391, in begin
    version, status, reason = self._read_status()
  File &quot;/usr/lib64/python2.6/httplib.py&quot;, line 355, in _read_status
    raise BadStatusLine(line)
httplib.BadStatusLine



In the log file I see

 ASH REPORT==== 18-Dec-2012::08:36:03 ===
  crasher:
    initial call: mochiweb_acceptor:init/3
    pid: &lt;0.3908.0&gt;
    registered_name: []
    exception error: undefined function
rabbitmq_cas_authen:check_user_login/2
      in function  rabbit_access_control:'-check_user_login/2-fun-0-'/4
      in call from lists:foldl/3 (lists.erl, line 1197)
      in call from rabbit_mgmt_app:'-make_loop/0-fun-0-'/4
      in call from mochiweb_http:headers/5
    ancestors: [rabbit_mochiweb_web_mgmt,rabbit_mochiweb_sup,&lt;0.127.0&gt;]
    messages: []
    links: [&lt;0.228.0&gt;,#Port&lt;0.12917&gt;]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 4181
    stack_size: 24
    reductions: 3638
  neighbours:


looks like the management plugin is trying to use my custom plugin
rabbitmq_cas_plugin even though I have disabled it.

part of my custom plugin setup I had something like this in rabbitmq.config
which I took out for management plugin:

        {rabbit,
                [{auth_backends, [rabbitmq_cas_authen,
rabbit_auth_backend_inter
nal]},
                 {vm_memory_high_watermark, 0.1}
                ]
        },


I would appreciate any insight. thank you.



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/custom-plugin-causing-problems-tp24091.html">http://rabbitmq.1065348.n5.nabble.com/custom-plugin-causing-problems-tp24091.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024574.html">[rabbitmq-discuss] AIX and HPUX
</A></li>
	<LI>Next message: <A HREF="024566.html">[rabbitmq-discuss] custom plugin causing problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24565">[ date ]</a>
              <a href="thread.html#24565">[ thread ]</a>
              <a href="subject.html#24565">[ subject ]</a>
              <a href="author.html#24565">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
