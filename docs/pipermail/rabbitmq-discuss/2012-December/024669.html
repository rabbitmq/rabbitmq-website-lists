<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Measuring end-to-end message delivery time
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Measuring%20end-to-end%20message%20delivery%20time&In-Reply-To=%3C50D7E15A.2090409%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024668.html">
   <LINK REL="Next"  HREF="024710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Measuring end-to-end message delivery time</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Measuring%20end-to-end%20message%20delivery%20time&In-Reply-To=%3C50D7E15A.2090409%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Measuring end-to-end message delivery time">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Dec 24 05:00:10 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024668.html">[rabbitmq-discuss] Measuring end-to-end message delivery time
</A></li>
        <LI>Next message: <A HREF="024710.html">[rabbitmq-discuss] Measuring end-to-end message delivery time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24669">[ date ]</a>
              <a href="thread.html#24669">[ thread ]</a>
              <a href="subject.html#24669">[ subject ]</a>
              <a href="author.html#24669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Darrell,

On 23/12/12 04:01, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dburgan at peopleanswers.com</A> wrote:
&gt;<i> My goal is to measure the total time spent, per message, with
</I>&gt;<i> millisecond accuracy, from one end of this pipeline to the other.
</I>&gt;<i> [...]
</I>&gt;<i> I can't just time-stamp the message because the local time on the two
</I>&gt;<i> physical servers cannot be guaranteed to be synchronized to the
</I>&gt;<i> millisecond. We use NTP but it does not keep the two servers that
</I>&gt;<i> closely synchronized.
</I>
NTP is supposedly accurate to within a few milliseconds, and sub-ms if 
the machines are on a local network. Is that really not sufficient for 
your measurements?

&gt;<i> So my question is: does RabbitMQ offer anything I can use that will
</I>&gt;<i> allow me to figure out how long step 4 took for each message I send
</I>&gt;<i> through RabbitMQ, or at least approximate it closely?
</I>
I can't really see how rabbit can help you here. It could measure the 
time a message spends transiting it (*), but in the end that message 
still has to go across the network to the consumer machine, and if, as 
you say, the clock there is too far off the producer's then that hop 
will introduce significant inaccuracy.

Perhaps you could hook up GPS receivers to the producer and consumer 
machines. That should provide a very accurate time signal by which to 
keep the clocks in sync.


Regards,

Matthias.
(*) RabbitMQ doesn't in fact measure this, but provided messages contain 
some unique id, you could quite easily set up network taps to capture 
the time a message was received by rabbit and sent out again, respectively.
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024668.html">[rabbitmq-discuss] Measuring end-to-end message delivery time
</A></li>
	<LI>Next message: <A HREF="024710.html">[rabbitmq-discuss] Measuring end-to-end message delivery time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24669">[ date ]</a>
              <a href="thread.html#24669">[ thread ]</a>
              <a href="subject.html#24669">[ subject ]</a>
              <a href="author.html#24669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
