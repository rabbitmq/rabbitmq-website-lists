<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Checking consumer message delivery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Checking%20consumer%20message%20delivery&In-Reply-To=%3Ce491af10-9994-4a46-a4e4-909b5075be08%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024590.html">
   <LINK REL="Next"  HREF="024593.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Checking consumer message delivery</H1>
    <B>Chris Duncan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Checking%20consumer%20message%20delivery&In-Reply-To=%3Ce491af10-9994-4a46-a4e4-909b5075be08%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Checking consumer message delivery">chris.d at frugalit.co.uk
       </A><BR>
    <I>Wed Dec 19 09:08:14 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024590.html">[rabbitmq-discuss] Can NOT start 2.8.6 (using R15B03),	Can start 3.0
</A></li>
        <LI>Next message: <A HREF="024593.html">[rabbitmq-discuss] Checking consumer message delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24591">[ date ]</a>
              <a href="thread.html#24591">[ thread ]</a>
              <a href="subject.html#24591">[ subject ]</a>
              <a href="author.html#24591">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm doing some testing around consumer behaviour and I'd like to confirm 
that what I'm seeing on the wire is expected RabbitMQ behaviour. My 
environments are running Ubuntu 12.04.1 LTS (32bit and 64bit), Erlang 
R14B04 and RabbitMQ 3.0.1.

In my simple test I publish one message to a queue. Then I register a 
consumer on that queue. What I see coming back from the server (via 
Wireshark) is a frame that contains a consume-ok and a delivery message set 
as follows:

Frame 24: 250 bytes on wire (2000 bits), 250 bytes captured (2000 bits)
Ethernet II, Src: 00:00:00_00:00:00 (00:00:00:00:00:00), Dst: 
00:00:00_00:00:00 (00:00:00:00:00:00)
Internet Protocol Version 4, Src: 127.0.0.1 (127.0.0.1), Dst: 127.0.0.1 
(127.0.0.1)
Transmission Control Protocol, Src Port: amqp (5672), Dst Port: 51578 
(51578), Seq: 444, Ack: 440, Len: 184
Advanced Message Queueing Protocol
Type: Method (1)
Channel: 2
Length: 36
Class: Basic (60)
Method: Consume-Ok (21)
Arguments
Consumer-Tag: amq.ctag-74qvMgHQcikGwClWTdzjFg
Advanced Message Queueing Protocol
Type: Method (1)
Channel: 2
Length: 57
Class: Basic (60)
Method: Deliver (60)
Arguments
Consumer-Tag: amq.ctag-74qvMgHQcikGwClWTdzjFg
Delivery-Tag: 1
.... ...1 = Redelivered: True
Exchange: 
Routing-Key: task_queue
Advanced Message Queueing Protocol
Type: Content header (2)
Channel: 2
Length: 41
Class ID: Basic (60)
Weight: 0
Body size: 18
Property flags: 0x9800
Properties
Content-Type: application/octet-stream
Delivery-Mode: 2
Priority: 0
Advanced Message Queueing Protocol
Type: Content body (3)
Channel: 2
Length: 18
Payload: 4e6f7720776520697320706c6179696e2031

Is this what you would expect to see or should the consume-ok and delivery 
set be returned as separate frames? Any help would be much appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121219/3aa1af0e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121219/3aa1af0e/attachment.htm</A>&gt;
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024590.html">[rabbitmq-discuss] Can NOT start 2.8.6 (using R15B03),	Can start 3.0
</A></li>
	<LI>Next message: <A HREF="024593.html">[rabbitmq-discuss] Checking consumer message delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24591">[ date ]</a>
              <a href="thread.html#24591">[ thread ]</a>
              <a href="subject.html#24591">[ subject ]</a>
              <a href="author.html#24591">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
