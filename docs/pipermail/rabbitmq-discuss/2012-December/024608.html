<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq nodedown error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20nodedown%20error&In-Reply-To=%3CBF6B852F-EA3B-44A0-875A-4EA3A65A5600%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024607.html">
   <LINK REL="Next"  HREF="024383.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq nodedown error</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20nodedown%20error&In-Reply-To=%3CBF6B852F-EA3B-44A0-875A-4EA3A65A5600%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq nodedown error">tim at rabbitmq.com
       </A><BR>
    <I>Thu Dec 20 10:20:53 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024607.html">[rabbitmq-discuss] rabbitmq nodedown error
</A></li>
        <LI>Next message: <A HREF="024383.html">[rabbitmq-discuss] How to setup dead-letter queue in C# ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24608">[ date ]</a>
              <a href="thread.html#24608">[ thread ]</a>
              <a href="subject.html#24608">[ subject ]</a>
              <a href="author.html#24608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Guys,

The erlang.cookie needs to be getting picked up from the same place, so if the account that runs rabbitmqctl is picking up the cookie from a different file (or not at all) then the rabbitmqctl node won't be able to connect to the other node (on which the broker is running).

The cookie is often located in /var/lib/rabbitmq/.erlang.cookie on unix based installs, though that may differ if you've installed via macports which I can see Terry has. Terry I'd suggest looking for the .erlang.cookie file beneath /opt/local - if you look at the broker logs I'm pretty sure you'll see that the home directory is not /Users/terry and erlang will look in $HOME/.erlang.cookie so if you figure out where macports has put this and copy it to your home directory, you should be ok.

Same should go for you pi, though obviously minus the /opt/local prefix.

Cheers,
Tim  

On 20 Dec 2012, at 01:48, Terry Weymouth wrote:

&gt;<i> pi, did you ever get an answer?
</I>&gt;<i> 
</I>&gt;<i> I am having the same problem. Furthermore, I tried to forcibly kill the process (with and without -9), but it keeps coming back.
</I>&gt;<i> Here is what i see:
</I>&gt;<i> 
</I>&gt;<i> terry% sudo cat .erlang.cookie 
</I>&gt;<i> MBFIPNFMCWGYGTVEVPLE
</I>&gt;<i> 
</I>&gt;<i> terry% sudo -u rabbitmq rabbitmqctl stop
</I>&gt;<i> Stopping and halting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry</A> ...
</I>&gt;<i> Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry</A>: nodedown
</I>&gt;<i> 
</I>&gt;<i> DIAGNOSTICS
</I>&gt;<i> ===========
</I>&gt;<i> 
</I>&gt;<i> nodes in question: [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry</A>]
</I>&gt;<i> 
</I>&gt;<i> hosts, their running nodes and ports:
</I>&gt;<i> - terry: [{rabbit,54387},{rabbitmqctl55720,54434}]
</I>&gt;<i> 
</I>&gt;<i> current node details:
</I>&gt;<i> - node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl55720 at terry</A>
</I>&gt;<i> - home dir: /Users/terry
</I>&gt;<i> - cookie hash: qLCaC9zyMZQKKUfgYXz/AA==
</I>&gt;<i> 
</I>&gt;<i> terry% ps aux | grep rabbit
</I>&gt;<i> rabbitmq 55331   0.1  1.0  2500740  40544   ??  S     8:19PM   0:06.25 /opt/local/lib/erlang/erts-5.9/bin/beam.smp -W w -K true -A30 -P 1048576 -- -root /opt/local/lib/erlang -progname erl -- -home /opt/local/var/lib/rabbitmq -- -noshell -noinput -sname <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry</A> -boot /opt/local/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry-plugins-expand</A>/rabbit -kernel inet_default_connect_options [{nodelay,true}] -sasl errlog_type error -sasl sasl_error_logger false -rabbit error_logger {file,&quot;/opt/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry.log</A>&quot;} -rabbit sasl_error_logger {file,&quot;/opt/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry-sasl.log</A>&quot;} -os_mon start_cpu_sup false -os_mon start_disksup false -os_mon start_memsup false -mnesia dir &quot;/opt/local/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at terry</A>&quot;
</I>&gt;<i> rabbitmq 55374   0.0  0.0  2434996    276   ??  S     8:20PM   0:00.00 inet_gethost 4
</I>&gt;<i> rabbitmq 55373   0.0  0.0  2434992    788   ??  Ss    8:20PM   0:00.01 inet_gethost 4
</I>&gt;<i> rabbitmq 55325   0.0  0.0  2435544    684   ??  S     8:19PM   0:00.00 /bin/sh /opt/local/sbin/rabbitmq-server
</I>&gt;<i> rabbitmq 55322   0.0  0.0  2448144   1120   ??  Ss    8:19PM   0:00.01 /opt/local/bin/daemondo --label=rabbitmq-server --start-cmd /opt/local/etc/LaunchDaemons/org.macports.rabbitmq-server/rabbitmq-server.wrapper start ; --stop-cmd /opt/local/etc/LaunchDaemons/org.macports.rabbitmq-server/rabbitmq-server.wrapper stop ; --restart-cmd /opt/local/etc/LaunchDaemons/org.macports.rabbitmq-server/rabbitmq-server.wrapper restart ; --pid=none
</I>&gt;<i> rabbitmq 55192   0.0  0.0  2434996    256   ??  S     8:13PM   0:00.02 /opt/local/lib/erlang/erts-5.9/bin/epmd -daemon
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024607.html">[rabbitmq-discuss] rabbitmq nodedown error
</A></li>
	<LI>Next message: <A HREF="024383.html">[rabbitmq-discuss] How to setup dead-letter queue in C# ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24608">[ date ]</a>
              <a href="thread.html#24608">[ thread ]</a>
              <a href="subject.html#24608">[ subject ]</a>
              <a href="author.html#24608">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
