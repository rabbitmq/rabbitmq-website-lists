<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20performance%20between%20high%20MHz/low%20core%20vs%0A%20lower%20MHz/high%20core%20servers&In-Reply-To=%3C50D345D1.3060102%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024618.html">
   <LINK REL="Next"  HREF="024623.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20performance%20between%20high%20MHz/low%20core%20vs%0A%20lower%20MHz/high%20core%20servers&In-Reply-To=%3C50D345D1.3060102%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RMQ performance between high MHz/low core vs lower MHz/high core servers">matthias at rabbitmq.com
       </A><BR>
    <I>Thu Dec 20 17:07:29 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024618.html">[rabbitmq-discuss] RMQ performance between high MHz/low core vs	lower MHz/high core servers
</A></li>
        <LI>Next message: <A HREF="024623.html">[rabbitmq-discuss] RMQ performance between high MHz/low core vs	lower MHz/high core servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24622">[ date ]</a>
              <a href="thread.html#24622">[ thread ]</a>
              <a href="subject.html#24622">[ subject ]</a>
              <a href="author.html#24622">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris,

On 20/12/12 16:18, Chris Schmidt wrote:
&gt;<i> There are 22 queues
</I> &gt; [...]
&gt;<i> A vendor let us borrow the 40-core machine to see if it would work
</I>&gt;<i> better.  [...] Each core is only 11-15% utilized.
</I>
You may not be able to saturate 40 cores with 22 queues. Depends on how 
many producers and consumers there are.

The other constraint could be scheduling and general Erlang multi-core 
performance. This has improved *considerably* over the last few years. 
So please make sure you are running the latest Erlang/OTP release - R15B03.

You may also want to tweak the various smp/scheduling related settings 
in Erlang. In particular I have seen massive performance differences 
when adjusting the +swt setting.

&gt;<i> I've tried HiPE in the past, but the system % jumped considerably
</I>&gt;<i> and we actually got poorer performance and instability.
</I>
That's odd. Again, please make sure you are runninng the latest Erlang; 
HiPE is another area that has improved considerably recently.

&gt;<i> I know the cores are slower in overall speed, but I would have bet
</I>&gt;<i> money that in  aggregate this machine would outperform our other one.
</I>
Depends on the workload. e.g. if queues are the bottleneck then having 
many more (slow) cores than queues won't help.

Regards,

Matthias.
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024618.html">[rabbitmq-discuss] RMQ performance between high MHz/low core vs	lower MHz/high core servers
</A></li>
	<LI>Next message: <A HREF="024623.html">[rabbitmq-discuss] RMQ performance between high MHz/low core vs	lower MHz/high core servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24622">[ date ]</a>
              <a href="thread.html#24622">[ thread ]</a>
              <a href="subject.html#24622">[ subject ]</a>
              <a href="author.html#24622">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
