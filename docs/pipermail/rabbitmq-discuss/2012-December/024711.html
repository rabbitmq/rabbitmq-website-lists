<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can someone please confirm the clustered durable queue behavior?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20someone%20please%20confirm%20the%20clustered%0A%20durable%20queue%20behavior%3F&In-Reply-To=%3C50DE529F.30701%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024707.html">
   <LINK REL="Next"  HREF="024712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can someone please confirm the clustered durable queue behavior?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20someone%20please%20confirm%20the%20clustered%0A%20durable%20queue%20behavior%3F&In-Reply-To=%3C50DE529F.30701%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Can someone please confirm the clustered durable queue behavior?">matthias at rabbitmq.com
       </A><BR>
    <I>Sat Dec 29 02:17:03 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024707.html">[rabbitmq-discuss] Can someone please confirm the clustered durable	queue behavior?
</A></li>
        <LI>Next message: <A HREF="024712.html">[rabbitmq-discuss] Can someone please confirm the clustered durable queue behavior?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24711">[ date ]</a>
              <a href="thread.html#24711">[ thread ]</a>
              <a href="subject.html#24711">[ subject ]</a>
              <a href="author.html#24711">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Eugene,

On 28/12/12 18:17, Eugene Vasilchenko wrote:
&gt;<i> Let's say I have a cluster of 3 machines running rabbit. All of my
</I>&gt;<i> queues are durable
</I>
...and mirrored, presumably...

&gt;<i> and the node with the master durable queue dies. A new master is
</I>&gt;<i> chosen and life goes on. Well, what happens when this old master
</I>&gt;<i> rejoins the cluster? From what I understand is that it just gets a
</I>&gt;<i> new empty slave copy and just drains the old master queue of messages
</I>&gt;<i> until it's empty? Am I way off base here?
</I>
The mirror that became master when the old master died will continue to 
function as the master. The old, rejoined master becomes a slave, 
initially empty and unsynchronised. Once all the messages that were in 
the master at that point have been dequeued by consumers, have expired, 
or were in any other way removed from the queue permanently, the slave 
becomes synchronised, i.e. it now holds the same messages as the master 
(namely all messages published after it joined and not yet removed).

...all of which is basically re-stating 
<A HREF="http://www.rabbitmq.com/ha.html#unsynchronised-slaves">http://www.rabbitmq.com/ha.html#unsynchronised-slaves</A> ;)

Regards,

Matthias.
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024707.html">[rabbitmq-discuss] Can someone please confirm the clustered durable	queue behavior?
</A></li>
	<LI>Next message: <A HREF="024712.html">[rabbitmq-discuss] Can someone please confirm the clustered durable queue behavior?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24711">[ date ]</a>
              <a href="thread.html#24711">[ thread ]</a>
              <a href="subject.html#24711">[ subject ]</a>
              <a href="author.html#24711">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
