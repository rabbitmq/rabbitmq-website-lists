<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Dangling Connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Dangling%20Connection&In-Reply-To=%3C423A5AE4-574C-45C2-A52D-972ED76A9A50%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024645.html">
   <LINK REL="Next"  HREF="024634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Dangling Connection</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Dangling%20Connection&In-Reply-To=%3C423A5AE4-574C-45C2-A52D-972ED76A9A50%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Dangling Connection">tim at rabbitmq.com
       </A><BR>
    <I>Fri Dec 21 12:18:17 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024645.html">[rabbitmq-discuss] Dangling Connection
</A></li>
        <LI>Next message: <A HREF="024634.html">[rabbitmq-discuss] Enable Heartbeat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24649">[ date ]</a>
              <a href="thread.html#24649">[ thread ]</a>
              <a href="subject.html#24649">[ subject ]</a>
              <a href="author.html#24649">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

On 21 Dec 2012, at 11:37, PSL 88506 wrote:

&gt;<i> I'm very sorry, It is typo - It is not connection , Its connected.
</I>&gt;<i> I apologize , please consider your former comment - &quot;2 client instances running on [the] same server, *connected* to differed RabbitMQ brokers&quot;
</I>&gt;<i> 
</I>&gt;<i> I'm very sorry for confusing.
</I>
No problem, I just wanted to clarify.

&gt;<i> Thank you very much for your reply. This is helping us a lot.
</I>&gt;<i> 
</I>
Good - that's why we have the list! :)

&gt;<i> One more clarification:
</I>&gt;<i> 
</I>&gt;<i> We have connection pool at client side, and If a  graceful shutdown is done for server (RabbitMQ) or server(RabbitMQ) is stopped abruptly -  
</I>&gt;<i> In both scenarios can we ensure that heartbeat with close all connections. 
</I>&gt;<i> 
</I>
Yes that will be fine. If you have a client that is connected and you do a graceful shutdown, the broker will notify the client that it's going away. Sometimes, network interruption can mean that the notification to close the connection takes a long time to get to the client (or gets lost altogether if the link disappears). The other scenario is, as you pointed out, an abrupt shutdown where the broker doesn't even send the connection a close notice. The heartbeat implementation on the client side will notice that the broker is not responding to the heartbeat request and will close the socket (and throw an exception). The pool can then decide what to do about those closed connections (attempting to re-establish them or whatever).

Hope that helps!

Cheers,
Tim
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024645.html">[rabbitmq-discuss] Dangling Connection
</A></li>
	<LI>Next message: <A HREF="024634.html">[rabbitmq-discuss] Enable Heartbeat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24649">[ date ]</a>
              <a href="thread.html#24649">[ thread ]</a>
              <a href="subject.html#24649">[ subject ]</a>
              <a href="author.html#24649">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
