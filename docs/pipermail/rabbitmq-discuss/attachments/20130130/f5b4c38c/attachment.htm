<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello&nbsp;everyone,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;I&nbsp;have&nbsp;five&nbsp;RabbitMQ&nbsp;consumer&nbsp;clients&nbsp;that&nbsp;are&nbsp;written&nbsp;and&nbsp;deployed&nbsp;as&nbsp;Tomcat&nbsp;web&nbsp;applications.&nbsp; My&nbsp;original&nbsp;intention&nbsp;was&nbsp;to&nbsp;consume&nbsp;messages&nbsp;in&nbsp;the&nbsp;typical&nbsp;fashion:&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;while&nbsp;(true)&nbsp;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;QueueingConsumer.Delivery&nbsp;delivery&nbsp;=&nbsp;consumer.nextDelivery();&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;String&nbsp;message&nbsp;=&nbsp;new&nbsp;String(delivery.getBody());&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;System.out.println(&amp;quot;&nbsp;[x]&nbsp;Received&nbsp;&amp;#39;&amp;quot;&nbsp;+&nbsp;message&nbsp;+&nbsp;&amp;quot;&amp;#39;&amp;quot;);&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;However,&nbsp;I&nbsp;was&nbsp;unable&nbsp;to&nbsp;stop&nbsp;the&nbsp;Tomcat&nbsp;application&nbsp;by&nbsp;using&nbsp;the&nbsp;while&nbsp;loop&nbsp;(see&nbsp;my&nbsp;post&nbsp;@&nbsp;&lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/14164517/trouble-stopping-a-tomcat-server-that-is-running-a-web-application-with-a-while&quot;&gt;http://stackoverflow.com/questions/14164517/trouble-stopping-a-tomcat-server-that-is-running-a-web-application-with-a-while&lt;/a&gt;).&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Instead,&nbsp;I&nbsp;now&nbsp;use&nbsp;a&nbsp;Java&nbsp;ScheduledExecutorService&nbsp;which&nbsp;will&nbsp;call&nbsp;a&nbsp;consumer&nbsp;once&nbsp;every&nbsp;&lt;i&gt;x&nbsp;&lt;/i&gt;milliseconds.&nbsp; &lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;scheduler&nbsp;=&nbsp;Executors.newSingleThreadScheduledExecutor();&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;scheduler.scheduleAtFixedRate(new&nbsp;ScheduledConsumer(),&nbsp;0,&nbsp;15000,&nbsp;TimeUnit.MILLISECONDS);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;I&nbsp;modified&nbsp;the&nbsp;consumer&nbsp;to&nbsp;only&nbsp;retrieve&nbsp;one&nbsp;individual&nbsp;message,&nbsp;using Channel.basicGet:&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;span&nbsp;style=&quot;background-color:rgb(204,204,204)&quot;&gt;GetResponse&nbsp;response&nbsp;=&nbsp;channel.basicGet(queueName,&nbsp;autoAck);&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;This&nbsp;workaround&nbsp;has&nbsp;been&nbsp;working&nbsp;for&nbsp;me&nbsp;without&nbsp;any&nbsp;problems.&nbsp; However,&nbsp;I&amp;#39;m&nbsp;starting&nbsp;to&nbsp;wonder&nbsp;if&nbsp;I&nbsp;am&nbsp;going&nbsp;about&nbsp;it&nbsp;all&nbsp;wrong.&nbsp; You&nbsp;see,&nbsp;I&nbsp;now&nbsp;need&nbsp;to&nbsp;set&nbsp;up&nbsp;a&nbsp;work&nbsp;queue&nbsp;model,&nbsp;so&nbsp;that&nbsp;I&nbsp;can&nbsp;scale&nbsp;my&nbsp;resources&nbsp;and&nbsp;deploy&nbsp;additional&nbsp;consumers&nbsp;as&nbsp;the&nbsp;need&nbsp;arises.&nbsp; So&nbsp;I&nbsp;could&nbsp;spin&nbsp;up&nbsp;a&nbsp;new&nbsp;Tomcat&nbsp;server&nbsp;and&nbsp;deploy&nbsp;my&nbsp;consumer&nbsp;.war&nbsp;files,&nbsp;and&nbsp;voila.&nbsp; But&nbsp;it&nbsp;was&nbsp;brought&nbsp;to&nbsp;my&nbsp;attention&nbsp;that&nbsp;by&nbsp;using&nbsp;Channel.basicGet,&nbsp;I&nbsp;am&nbsp;not&nbsp;in&nbsp;fact&nbsp;truly&nbsp;consuming&nbsp;-&nbsp;messages&nbsp;are&nbsp;not&nbsp;being&nbsp;pushed&nbsp;down.&nbsp; I&nbsp;am&nbsp;instead&nbsp;&amp;quot;pulling&amp;quot;&nbsp;messages.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Therefore,&nbsp;I&nbsp;assume&nbsp;that&nbsp;my&nbsp;consumers&nbsp;will&nbsp;not&nbsp;enjoy&nbsp;the&nbsp;luxury&nbsp;of&nbsp;fair,&nbsp;round&nbsp;robin&nbsp;dispatching.&nbsp; Consumer&nbsp;client&nbsp;&amp;quot;A&amp;quot;&nbsp;might&nbsp;retrieve&nbsp;more&nbsp;messages&nbsp;than&nbsp;consumer&nbsp;client&nbsp;&amp;quot;B&amp;quot;,&nbsp;solely&nbsp;because&nbsp;of&nbsp;the&nbsp;fixed&nbsp;rate&nbsp;at&nbsp;which&nbsp;it&nbsp;was&nbsp;set&nbsp;to&nbsp;consume.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;My&nbsp;questions&nbsp;are&nbsp;as&nbsp;follows:&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;ol&nbsp;style&gt;&lt;li&nbsp;style&gt;Is&nbsp;it&nbsp;a&nbsp;bad&nbsp;idea&nbsp;to&nbsp;deploy&nbsp;consumers&nbsp;as&nbsp;Tomcat&nbsp;web&nbsp;applications?&nbsp; Are&nbsp;there&nbsp;any&nbsp;advantages&nbsp;or&nbsp;disadvantages&nbsp;as&nbsp;compared&nbsp;to&nbsp;the&nbsp;alternative&nbsp;of&nbsp;running&nbsp;system&nbsp;level&nbsp;Java&nbsp;clients?&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/li&gt;&lt;li&nbsp;style&gt;In&nbsp;the&nbsp;case&nbsp;of&nbsp;work&nbsp;queues,&nbsp;am&nbsp;I&nbsp;better&nbsp;off&nbsp;retrieving&nbsp;messages&nbsp;that&nbsp;are&nbsp;pushed&nbsp;down&nbsp;to&nbsp;my&nbsp;clients,&nbsp;and&nbsp;setting&nbsp;a&nbsp;prefetchCount&nbsp;(channel.basicQos(1))&nbsp;to&nbsp;ensure&nbsp;that&nbsp;I&nbsp;only&nbsp;receive&nbsp;one&nbsp;message&nbsp;at&nbsp;a&nbsp;time?&lt;/li&gt;<br>
<br>
&lt;/ol&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;I&nbsp;would&nbsp;appreciate&nbsp;any&nbsp;advice&nbsp;or&nbsp;suggestions.&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Thanks!&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:&amp;#39;Courier&nbsp;New&amp;#39;,Courier,monospace;line-height:18px;white-space:nowrap&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
