<tt>
Franck,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Have&nbsp;you&nbsp;checked&nbsp;the&nbsp;timestamps&nbsp;of&nbsp;the&nbsp;involved&nbsp;machines?&nbsp;Sounds&nbsp;like&nbsp;a&nbsp;4min&nbsp;time&nbsp;difference&nbsp;between&nbsp;the&nbsp;two&nbsp;clocks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Pradeep&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://www.masplantiz.com&quot;&gt;www.masplantiz.com&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Feb&nbsp;2,&nbsp;2010&nbsp;at&nbsp;10:18&nbsp;PM,&nbsp;Matthew&nbsp;Sackman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthew@lshift.net&quot;&gt;matthew@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
Hi&nbsp;Frank,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;Feb&nbsp;02,&nbsp;2010&nbsp;at&nbsp;04:26:58PM&nbsp;+0000,&nbsp;Matthew&nbsp;Sackman&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Not&nbsp;really&nbsp;too&nbsp;sure&nbsp;what&nbsp;to&nbsp;suggest,&nbsp;but&nbsp;others&nbsp;on&nbsp;the&nbsp;list&nbsp;have&lt;br&gt;<br>
&amp;gt;&nbsp;reported&nbsp;better&nbsp;throughput&nbsp;when&nbsp;increasing&nbsp;buffers&nbsp;in&nbsp;Rabbit&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Also,&nbsp;you&amp;#39;re&nbsp;using&nbsp;the&nbsp;python&nbsp;client,&nbsp;to&nbsp;do&nbsp;performance&nbsp;testing,&nbsp;which&lt;br&gt;<br>
is&nbsp;a&nbsp;little&nbsp;questionable&nbsp;-&nbsp;in&nbsp;our&nbsp;experience&nbsp;the&nbsp;python&nbsp;clients&nbsp;tend&nbsp;to&lt;br&gt;<br>
perform&nbsp;badly.&nbsp;I&amp;#39;d&nbsp;suggest&nbsp;you&nbsp;test&nbsp;using&nbsp;our&nbsp;Java&nbsp;client&nbsp;which&nbsp;contains&lt;br&gt;<br>
an&nbsp;example&nbsp;program&nbsp;called&nbsp;MulticastMain&nbsp;which&nbsp;is&nbsp;pretty&nbsp;flexible&nbsp;for&lt;br&gt;<br>
testing&nbsp;performance&nbsp;and&nbsp;sustainable&nbsp;throughput.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;From&nbsp;the&nbsp;rabbitmq-java-client&nbsp;directory:&lt;br&gt;<br>
ant&nbsp;clean&nbsp;dist&lt;br&gt;<br>
cd&nbsp;build/dist&lt;br&gt;<br>
sh&nbsp;runjava.sh&nbsp;com/rabbitmq/examples/MulticastMain&nbsp;-s&nbsp;1000000&nbsp;-r&nbsp;25&nbsp;-a&nbsp;-z&nbsp;20&nbsp;-q&nbsp;1&lt;br&gt;<br>
&lt;br&gt;<br>
where&nbsp;the&nbsp;-s&nbsp;parameter&nbsp;specifies&nbsp;the&nbsp;size,&nbsp;in&nbsp;bytes,&nbsp;the&nbsp;-r&nbsp;parameter&lt;br&gt;<br>
specifies&nbsp;the&nbsp;sending&nbsp;rate,&nbsp;-a&nbsp;turns&nbsp;on&nbsp;auto-ack,&nbsp;which&nbsp;you&nbsp;may&nbsp;want&nbsp;for&lt;br&gt;<br>
this,&nbsp;-z&nbsp;says&nbsp;how&nbsp;long&nbsp;to&nbsp;run&nbsp;the&nbsp;test&nbsp;for&nbsp;(in&nbsp;seconds)&nbsp;and&nbsp;-q&nbsp;sets&nbsp;the&lt;br&gt;<br>
qos&nbsp;on&nbsp;the&nbsp;consumer&nbsp;to&nbsp;1.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;will&nbsp;create&nbsp;one&nbsp;producer&nbsp;and&nbsp;one&nbsp;consumer&nbsp;on&nbsp;the&nbsp;same&nbsp;box.&nbsp;You&lt;br&gt;<br>
should&nbsp;vary&nbsp;the&nbsp;rate&nbsp;(-r)&nbsp;until&nbsp;the&nbsp;sending&nbsp;rates&nbsp;and&nbsp;receiving&nbsp;rates&lt;br&gt;<br>
are&nbsp;balanced&nbsp;and&nbsp;sustainable&nbsp;(I&nbsp;tend&nbsp;to&nbsp;watch&nbsp;the&nbsp;reported&nbsp;latencies&nbsp;-&lt;br&gt;<br>
if&nbsp;they&nbsp;keep&nbsp;increasing,&nbsp;then&nbsp;it&amp;#39;s&nbsp;not&nbsp;balanced).&lt;br&gt;<br>
&lt;br&gt;<br>
Other&nbsp;if&nbsp;you&nbsp;just&nbsp;provide&nbsp;-?&nbsp;then&nbsp;it&amp;#39;ll&nbsp;print&nbsp;out&nbsp;all&nbsp;the&nbsp;options.&nbsp;If&lt;br&gt;<br>
you&nbsp;want&nbsp;to&nbsp;use&nbsp;different&nbsp;machines&nbsp;for&nbsp;producer&nbsp;and&nbsp;consumer&nbsp;then&nbsp;you&lt;br&gt;<br>
can&nbsp;use&nbsp;-x&nbsp;0&nbsp;to&nbsp;turn&nbsp;off&nbsp;producers,&nbsp;and&nbsp;-y&nbsp;0&nbsp;to&nbsp;turn&nbsp;off&nbsp;consumers&nbsp;on&lt;br&gt;<br>
each&nbsp;box&nbsp;respectively.&nbsp;If&nbsp;you&nbsp;do&nbsp;do&nbsp;that,&nbsp;then&nbsp;you&amp;#39;ll&nbsp;also&nbsp;need&nbsp;to&lt;br&gt;<br>
specify&nbsp;at&nbsp;least&nbsp;-e&nbsp;to&nbsp;name&nbsp;the&nbsp;exchange,&nbsp;and&nbsp;likely&nbsp;set&nbsp;-t&nbsp;to&nbsp;fanout&lt;br&gt;<br>
otherwise&nbsp;it&amp;#39;ll&nbsp;attempt&nbsp;to&nbsp;use&nbsp;a&nbsp;private&nbsp;queue&nbsp;of&nbsp;the&nbsp;default&nbsp;direct&lt;br&gt;<br>
exchange&nbsp;and&nbsp;thus&nbsp;not&nbsp;route&nbsp;messages&nbsp;to&nbsp;the&nbsp;consumer.&nbsp;Also,&nbsp;start&nbsp;the&lt;br&gt;<br>
consumer&nbsp;first.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;the&nbsp;consumer&nbsp;might&nbsp;look&nbsp;like&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
sh&nbsp;runjava.sh&nbsp;com/rabbitmq/examples/MulticastMain&nbsp;-s&nbsp;10000000&nbsp;-r&nbsp;1&nbsp;-a&nbsp;-z&nbsp;20&nbsp;-q&nbsp;1&nbsp;-x&nbsp;0&nbsp;-e&nbsp;my_exchage&nbsp;-t&nbsp;fanout&lt;br&gt;<br>
&lt;br&gt;<br>
whilst&nbsp;the&nbsp;producer&nbsp;looks&nbsp;like:&lt;br&gt;<br>
&lt;br&gt;<br>
sh&nbsp;runjava.sh&nbsp;com/rabbitmq/examples/MulticastMain&nbsp;-s&nbsp;10000000&nbsp;-r&nbsp;1&nbsp;-a&nbsp;-z&nbsp;20&nbsp;-q&nbsp;1&nbsp;-y&nbsp;0&nbsp;-e&nbsp;my_exchage&nbsp;-t&nbsp;fanout&lt;br&gt;<br>
&lt;br&gt;<br>
These&nbsp;certainly&nbsp;work&nbsp;for&nbsp;me.&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
Matthew&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
