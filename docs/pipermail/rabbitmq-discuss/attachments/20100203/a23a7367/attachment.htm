<tt>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;TITLE&gt;Re:&nbsp;[rabbitmq-discuss]&nbsp;EC2&nbsp;clustering&nbsp;issue&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;&lt;BR&gt;<br>
I&nbsp;found&nbsp;out&nbsp;that&nbsp;the&nbsp;issue&nbsp;came&nbsp;from&nbsp;the&nbsp;fact&nbsp;I&nbsp;cloned&nbsp;the&nbsp;instance&nbsp;to&nbsp;create&nbsp;my&nbsp;second&nbsp;instance&nbsp;and&nbsp;that&nbsp;instance&nbsp;was&nbsp;containing&nbsp;a&nbsp;mnesia&nbsp;db&nbsp;for&nbsp;the&nbsp;first&nbsp;node&nbsp;rabbit1.&nbsp;After&nbsp;deleting&nbsp;the&lt;BR&gt;<br>
Mnesia/rabbitmq&nbsp;folder&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;start&nbsp;the&nbsp;node.&lt;BR&gt;<br>
Though&nbsp;the&nbsp;cluster&nbsp;is&nbsp;not&nbsp;created&nbsp;despite&nbsp;my&nbsp;configuration.&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;tried&nbsp;to&nbsp;create&nbsp;the&nbsp;cluster&nbsp;manually&nbsp;but&nbsp;it&nbsp;did&nbsp;not&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;cluster&nbsp;command&nbsp;returned&nbsp;Done&lt;BR&gt;<br>
&lt;BR&gt;<br>
Sebastien&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;2/3/10&nbsp;10:45&nbsp;AM,&nbsp;&amp;quot;Sebastien&nbsp;Plisson&amp;quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;splisson@veodia.com&quot;&gt;splisson@veodia.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Yes&nbsp;I&nbsp;added&nbsp;the&nbsp;entries&nbsp;in&nbsp;hosts&nbsp;file&nbsp;on&nbsp;both&nbsp;machine.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;2/3/10&nbsp;10:34&nbsp;AM,&nbsp;&amp;quot;Paul&nbsp;Jones&amp;quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;pauljones23@gmail.com&quot;&gt;pauljones23@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Hi&nbsp;Sebastien,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Have&nbsp;you&nbsp;added&nbsp;host&nbsp;file&nbsp;entries&nbsp;to&nbsp;both&nbsp;machines&nbsp;for&nbsp;rabbit1&nbsp;and&nbsp;rabbit2?&nbsp;Unless&nbsp;you&nbsp;do&nbsp;that,&nbsp;I&nbsp;don't&nbsp;believe&nbsp;they&nbsp;are&nbsp;gong&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;find&nbsp;each&nbsp;other.&nbsp;If&nbsp;pinging&nbsp;rabbit1&nbsp;from&nbsp;rabbit2&nbsp;and&nbsp;vice-versa&nbsp;doesn't&nbsp;work,&nbsp;then&nbsp;the&nbsp;clustering&nbsp;won't&nbsp;be&nbsp;able&nbsp;to&nbsp;start.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Paul.&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;Wed,&nbsp;Feb&nbsp;3,&nbsp;2010&nbsp;at&nbsp;6:04&nbsp;PM,&nbsp;Sebastien&nbsp;Plisson&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;splisson@veodia.com&quot;&gt;splisson@veodia.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Hi,&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&amp;#8217;m&nbsp;trying&nbsp;to&nbsp;setup&nbsp;a&nbsp;cluster&nbsp;of&nbsp;rabbit&nbsp;nodes&nbsp;with&nbsp;2&nbsp;ec2&nbsp;instances:&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;installed&nbsp;rabbitmq&nbsp;with&nbsp;apt-get.&lt;BR&gt;<br>
I&nbsp;use&nbsp;the&nbsp;same&nbsp;erlang&nbsp;cookie&nbsp;on&nbsp;both&nbsp;machine,&lt;BR&gt;<br>
I&nbsp;setup&nbsp;the&nbsp;hostname&nbsp;of&nbsp;the&nbsp;instances&nbsp;to&nbsp;be&nbsp;rabbit1&nbsp;and&nbsp;rabbit2.&lt;BR&gt;<br>
I&nbsp;configured&nbsp;the&nbsp;clustering&nbsp;through&nbsp;configuration&nbsp;file&nbsp;/etc/rabbitmq/rabbitmq_cluster.config&nbsp;on&nbsp;both&nbsp;machine&nbsp;containing:&lt;BR&gt;<br>
[rabbit@rabbit1,&nbsp;rabbit@rabbit2].&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;node&nbsp;starts&nbsp;fine&nbsp;on&nbsp;rabbit1&nbsp;but&nbsp;I&nbsp;keep&nbsp;getting&nbsp;timeout&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;start&nbsp;rabbitmqserver&nbsp;on&nbsp;rabbit2&nbsp;:&lt;BR&gt;<br>
Startup_log:&lt;BR&gt;<br>
&lt;BR&gt;<br>
Starting&nbsp;all&nbsp;nodes...&lt;BR&gt;<br>
Starting&nbsp;node&nbsp;rabbit@rabbit2...&lt;BR&gt;<br>
&lt;BR&gt;<br>
+---+&nbsp;&amp;nbsp;&amp;nbsp;+---+&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;+---+&nbsp;&amp;nbsp;&amp;nbsp;+-------+&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
|&nbsp;RabbitMQ&nbsp;&amp;nbsp;+---+&nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;v1.7.1&nbsp;&amp;nbsp;+---+&nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
|&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&lt;BR&gt;<br>
+-------------------+&lt;BR&gt;<br>
AMQP&nbsp;8-0&lt;BR&gt;<br>
Copyright&nbsp;(C)&nbsp;2007-2009&nbsp;LShift&nbsp;Ltd.,&nbsp;Cohesive&nbsp;Financial&nbsp;Technologies&nbsp;LLC.,&nbsp;and&nbsp;Rabbit&nbsp;Technologies&nbsp;Ltd.&lt;BR&gt;<br>
Licensed&nbsp;under&nbsp;the&nbsp;MPL.&nbsp;&amp;nbsp;See&nbsp;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;&lt;U&gt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/&quot;&gt;http://www.rabbitmq.com/&lt;/a&gt;&lt;BR&gt;<br>
&lt;/U&gt;&lt;/FONT&gt;&lt;BR&gt;<br>
node&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&nbsp;rabbit@rabbit2&lt;BR&gt;<br>
app&nbsp;descriptor:&nbsp;/usr/lib/rabbitmq/lib/rabbitmq_server-1.7.1/sbin/../ebin/rabbit.app&lt;BR&gt;<br>
home&nbsp;dir&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&nbsp;/var/lib/rabbitmq&lt;BR&gt;<br>
cookie&nbsp;hash&nbsp;&amp;nbsp;&amp;nbsp;:&nbsp;P3hRIQU6rcvxMCzOSrBi7w==&lt;BR&gt;<br>
log&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&nbsp;/var/log/rabbitmq/rabbit.log&lt;BR&gt;<br>
sasl&nbsp;log&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:&nbsp;/var/log/rabbitmq/rabbit-sasl.log&lt;BR&gt;<br>
database&nbsp;dir&nbsp;&amp;nbsp;:&nbsp;/var/lib/rabbitmq/mnesia/rabbit&lt;BR&gt;<br>
&lt;BR&gt;<br>
starting&nbsp;database&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...timeout&lt;BR&gt;<br>
{&amp;quot;init&nbsp;terminating&nbsp;in&nbsp;do_boot&amp;quot;,{{nocatch,{error,{cannot_start_application,rabbit,{{timeout_waiting_for_tables,[rabbit_user,rabbit_user_permission,rabbit_vhost,rabbit_config,rabbit_listener,rabbit_durable_route,rabbit_route,rabbit_reverse_route,rabbit_durable_exchange,rabbit_exchange,rabbit_durable_queue,rabbit_queue]},{rabbit,start,[normal,[]]}}}}},[{init,start_it,1},{init,start_em,1}]}}&lt;BR&gt;<br>
&lt;BR&gt;<br>
What&amp;#8217;s&nbsp;wrong&nbsp;with&nbsp;this&nbsp;setup&nbsp;?&lt;BR&gt;<br>
&lt;BR&gt;<br>
Thank&nbsp;you&lt;BR&gt;<br>
&lt;BR&gt;<br>
Sebastien&nbsp;Plisson&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
_______________________________________________&lt;BR&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;BR&gt;<br>
&lt;a&nbsp;href=&quot;rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;BR&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/BLOCKQUOTE&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
