<tt>
Hi&nbsp;Benjamin,&lt;br&gt;&lt;br&gt;In&nbsp;the&nbsp;production&nbsp;mode,&nbsp;mochiweb&nbsp;doesn&amp;#39;t&nbsp;really&nbsp;have&nbsp;a&nbsp;docroot&nbsp;setup.&nbsp;/rabbitmq_lib&nbsp;will&nbsp;serve&nbsp;the&nbsp;files&nbsp;in&nbsp;priv/www,&nbsp;but&nbsp;that&nbsp;is&nbsp;as&nbsp;far&nbsp;as&nbsp;it&nbsp;goes.&lt;br&gt;&lt;br&gt;However...&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;serve&nbsp;some&nbsp;other&nbsp;files&nbsp;then&nbsp;you&nbsp;could&nbsp;always&nbsp;use&nbsp;code&nbsp;similar&nbsp;to&nbsp;what&nbsp;the&nbsp;test&nbsp;mode&nbsp;does&nbsp;to&nbsp;make&nbsp;it&nbsp;happen.&nbsp;For&nbsp;example,&nbsp;if&nbsp;you&nbsp;were&nbsp;to&nbsp;add:&lt;br&gt;<br>
&lt;br&gt;Handler&nbsp;=&nbsp;rabbit_mochiweb:static_context_handler(&amp;quot;&amp;quot;,&nbsp;?MODULE,&nbsp;&amp;quot;priv/mydocroot&amp;quot;),&lt;br&gt;ok&nbsp;=&nbsp;rabbit_mochiweb:register_global_handler(Handler),&lt;br&gt;&lt;br&gt;after&nbsp;the&nbsp;line:&lt;br&gt;rabbit_mochiweb:register_static_context(ContextRoot,&nbsp;?MODULE,&nbsp;&amp;quot;priv/www&amp;quot;)&lt;br&gt;<br>
&lt;br&gt;in&nbsp;src/rabbit_jsonrpc_channel_app.erl,&nbsp;then&nbsp;once&nbsp;you&amp;#39;ve&nbsp;installed&nbsp;the&nbsp;plugin&nbsp;into&nbsp;Rabbit,&nbsp;any&nbsp;file&nbsp;put&nbsp;into&nbsp;priv/plugins/rabbitmq-jsonrpc-channel/priv/mydocroot&nbsp;should&nbsp;be&nbsp;served&nbsp;from&nbsp;the&nbsp;root&nbsp;context&nbsp;of&nbsp;mochiweb.&lt;br&gt;<br>
&lt;br&gt;BTW,&nbsp;I&amp;#39;ve&nbsp;just&nbsp;noticed&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;packaging&nbsp;of&nbsp;the&nbsp;jsonrpc-channel&nbsp;plugin&nbsp;such&nbsp;that&nbsp;if&nbsp;you&nbsp;do&nbsp;run&nbsp;that&nbsp;plugin&nbsp;by&nbsp;installing&nbsp;it&nbsp;via&nbsp;a&nbsp;.ez,&nbsp;you&amp;#39;ll&nbsp;need&nbsp;to&nbsp;copy&nbsp;the&nbsp;priv/www&nbsp;directory&nbsp;into&nbsp;priv/plugins/rabbitmq-jsonrpc-channel/priv/www&nbsp;(otherwise&nbsp;libraries&nbsp;such&nbsp;as&nbsp;rabbitmq.js&nbsp;won&amp;#39;t&nbsp;be&nbsp;available).&lt;br&gt;<br>
&lt;br&gt;Thanks,&lt;br&gt;Paul.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Apr&nbsp;17,&nbsp;2010&nbsp;at&nbsp;11:29&nbsp;PM,&nbsp;Benjamin&nbsp;Polidore&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:polidore@gmail.com&quot;&gt;polidore@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hey,&nbsp;paul,&nbsp;I&nbsp;installed&nbsp;all&nbsp;the&nbsp;dependencies&nbsp;to&nbsp;rabbitmq-jsonrpc-channel&nbsp;(see&nbsp;below).&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;see&nbsp;that&nbsp;you&nbsp;add&nbsp;a&nbsp;little&nbsp;context&nbsp;in&nbsp;test&nbsp;mode.&nbsp; Basically,&nbsp;I&nbsp;was&nbsp;hoping&nbsp;to&nbsp;use&nbsp;the&nbsp;plugin&nbsp;to&nbsp;host&nbsp;my&nbsp;HTML&nbsp;and&nbsp;javascript&nbsp;in&nbsp;dev&nbsp;mode&nbsp;so&nbsp;I&nbsp;don&amp;#39;t&nbsp;have&nbsp;to&nbsp;run&nbsp;another&nbsp;webserver&nbsp;on&nbsp;my&nbsp;laptop.&nbsp; I&nbsp;prefer&nbsp;to&nbsp;run&nbsp;rabbitmq&nbsp;in&nbsp;&amp;quot;production&amp;quot;&nbsp;mode&nbsp;on&nbsp;my&nbsp;laptop,&nbsp;and&nbsp;I&nbsp;was&nbsp;curious&nbsp;what&nbsp;mochiweb&nbsp;thinks&nbsp;the&nbsp;docroot&nbsp;is&nbsp;in&nbsp;this&nbsp;mode.&lt;br&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;[{running_applications,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;[{rabbit_jsonrpc_channel,&amp;quot;RabbitMQ&nbsp;JSON-RPC&nbsp;Channels&amp;quot;,&amp;quot;0.01&amp;quot;},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; {rabbit,&amp;quot;RabbitMQ&amp;quot;,&amp;quot;1.7.2&amp;quot;},&lt;/div&gt;&lt;div&gt;<br>
<br>
  &nbsp; &nbsp; {os_mon,&amp;quot;CPO&nbsp; CXC&nbsp;138&nbsp;46&amp;quot;,&amp;quot;2.2.5&amp;quot;},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; {sasl,&amp;quot;SASL&nbsp; CXC&nbsp;138&nbsp;11&amp;quot;,&amp;quot;2.1.9&amp;quot;},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; {rabbit_jsonrpc,&amp;quot;Rabbit&nbsp;JSON-RPC&amp;quot;,&amp;quot;0.01&amp;quot;},&lt;/div&gt;&lt;div&gt;<br>
<br>
  &nbsp; &nbsp; {rfc4627_jsonrpc,&amp;quot;JSON&nbsp;RPC&nbsp;Service&amp;quot;,&amp;quot;0.01&amp;quot;},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; {rabbit_mochiweb,&amp;quot;RabbitMQ&nbsp;Mochiweb&nbsp;Embedding&amp;quot;,&amp;quot;0.01&amp;quot;},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; {mochiweb,&amp;quot;MochiMedia&nbsp;Web&nbsp;Server&amp;quot;,&amp;quot;0.01&amp;quot;},&lt;/div&gt;<br>
<br>
&lt;div&gt;  &nbsp; &nbsp; {mnesia,&amp;quot;MNESIA&nbsp; CXC&nbsp;138&nbsp;12&amp;quot;,&amp;quot;4.4.13&amp;quot;},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; {stdlib,&amp;quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&amp;quot;,&amp;quot;1.16.5&amp;quot;},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; {kernel,&amp;quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&amp;quot;,&amp;quot;2.13.5&amp;quot;}]},&lt;/div&gt;<br>
<br>
&lt;div&gt; {nodes,[rabbit@H5Pro]},&lt;/div&gt;&lt;div&gt; {running_nodes,[rabbit@H5Pro]}]&lt;/div&gt;&lt;div&gt;...done.&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Apr&nbsp;17,&nbsp;2010&nbsp;at&nbsp;4:11&nbsp;PM,&nbsp;Paul&nbsp;Jones&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:pauljones23@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;pauljones23@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Hi&nbsp;Benjamin,&lt;br&gt;&lt;br&gt;Which&nbsp;plugins&nbsp;have&nbsp;you&nbsp;installed&nbsp;into&nbsp;RabbitMQ?&nbsp;The&nbsp;mochiweb&nbsp;plugin&nbsp;alone&nbsp;simply&nbsp;embeds&nbsp;a&nbsp;webserver&nbsp;-&nbsp;you&amp;#39;ll&nbsp;need&nbsp;to&nbsp;install&nbsp;rabbitmq-jsonrpc&nbsp;and&nbsp;rabbitmq-jsonrpc-channel&nbsp;to&nbsp;get&nbsp;the&nbsp;JSON&nbsp;services.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;If&nbsp;you&nbsp;have&nbsp;done&nbsp;this,&nbsp;then&nbsp;you&nbsp;might&nbsp;be&nbsp;hitting&nbsp;the&nbsp;fact&nbsp;that&nbsp;when&nbsp;running&nbsp;under&nbsp;test,&nbsp;an&nbsp;additional&nbsp;context&nbsp;is&nbsp;installed&nbsp;under&nbsp;the&nbsp;root&nbsp;that&nbsp;provides&nbsp;all&nbsp;the&nbsp;various&nbsp;test&nbsp;examples.&nbsp;We&nbsp;don&amp;#39;t&nbsp;activate&nbsp;this&nbsp;in&nbsp;the&nbsp;&amp;quot;production&amp;quot;&nbsp;mode,&nbsp;since&nbsp;we&nbsp;don&amp;#39;t&nbsp;expect&nbsp;you&amp;#39;ll&nbsp;want&nbsp;them&nbsp;in&nbsp;a&nbsp;real&nbsp;deployment.&nbsp;The&nbsp;scripts&nbsp;for&nbsp;doing&nbsp;JSON-RPC&nbsp;are&nbsp;still&nbsp;there&nbsp;though&nbsp;-&nbsp;under&nbsp;/rabbitmq_lib&nbsp;(the&nbsp;scripts&nbsp;that&nbsp;are&nbsp;made&nbsp;available&nbsp;via&nbsp;this&nbsp;can&nbsp;be&nbsp;found&nbsp;on&nbsp;the&nbsp;filesystem&nbsp;in&nbsp;priv/www).&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;I&nbsp;hope&nbsp;this&nbsp;answers&nbsp;your&nbsp;question.&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;Paul&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;Sat,&nbsp;Apr&nbsp;17,&nbsp;2010&nbsp;at&nbsp;8:28&nbsp;PM,&nbsp;Benjamin&nbsp;Polidore&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:polidore@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;polidore@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Consolas,&amp;#39;Lucida&nbsp;Console&amp;#39;,monospace,Verdana,sans-serif,&amp;#39;sans&nbsp;serif&amp;#39;;&nbsp;font-size:&nbsp;13px;&quot;&gt;hi,&nbsp;i&amp;#39;m&nbsp;trying&nbsp;to&nbsp;use&nbsp;the&nbsp;json-channel&nbsp;plugin,&nbsp;and&nbsp;it&nbsp;runs&nbsp;ok&nbsp;when&nbsp;i&nbsp;do&nbsp;make&nbsp;test,&nbsp;but&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;seem&nbsp;to&nbsp;work&nbsp;when&nbsp;i&nbsp;try&nbsp;to&nbsp;start&nbsp;up&nbsp;my&nbsp;broker.&lt;span&gt;  &lt;/span&gt;the&nbsp;port&nbsp;is&nbsp;open,&nbsp;but&nbsp;everything&nbsp;returns&nbsp;404.&nbsp; what&nbsp;is&nbsp;mochiweb&nbsp;using&nbsp;as&nbsp;a&nbsp;docroot&nbsp;when&nbsp;I&nbsp;run&nbsp;it&nbsp;outside&nbsp;make&nbsp;test?&nbsp; sorry&nbsp;if&nbsp;this&nbsp;is&nbsp;obvious,&nbsp;but&nbsp;i&amp;#39;ve&nbsp;been&nbsp;struggling&nbsp;with&nbsp;it&nbsp;for&nbsp;a&nbsp;couple&nbsp;hours. &lt;/span&gt;&lt;div&gt;<br>
<br>
<br>
<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;Consolas,&amp;#39;Lucida&nbsp;Console&amp;#39;,monospace,Verdana,sans-serif,&amp;#39;sans&nbsp;serif&amp;#39;;&nbsp;font-size:&nbsp;13px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Consolas,&amp;#39;Lucida&nbsp;Console&amp;#39;,monospace,Verdana,sans-serif,&amp;#39;sans&nbsp;serif&amp;#39;;&nbsp;font-size:&nbsp;13px;&quot;&gt;thanks,&lt;/span&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Consolas,&amp;#39;Lucida&nbsp;Console&amp;#39;,monospace,Verdana,sans-serif,&amp;#39;sans&nbsp;serif&amp;#39;;&nbsp;font-size:&nbsp;13px;&quot;&gt;bp&lt;/span&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
