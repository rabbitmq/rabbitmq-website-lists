<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello&nbsp;there,&lt;div&gt; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; As&nbsp;a&nbsp;performance&nbsp;optimization&nbsp;on&nbsp;our&nbsp;rabbit&nbsp;mq&nbsp;cluster&nbsp;(of&nbsp;2&nbsp;nodes),&nbsp;I&nbsp;removed&nbsp;following&nbsp;from&nbsp;a&nbsp;high&nbsp;volume&nbsp;non-durable&nbsp;queue&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;AMQP_MANDATORY&nbsp;flag&nbsp;during&nbsp;publish&nbsp;and &lt;/li&gt;<br>
<br>
&lt;li&gt;AMQP_AUTOACK&nbsp;during&nbsp;consume. &lt;/li&gt;&lt;/ol&gt; As&nbsp;a&nbsp;result&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;on&nbsp;that&nbsp;queue&nbsp;went&nbsp;down&nbsp;from&nbsp;150&nbsp;to&nbsp;15&nbsp;which&nbsp;is&nbsp;fantastic&nbsp;and&nbsp;expected.&nbsp;But&nbsp;this&nbsp;also&nbsp;increased&nbsp;overall&nbsp;cpu&nbsp;usage&nbsp;from&nbsp;22%&nbsp;to&nbsp;32%&nbsp;with&nbsp;an&nbsp;increased&nbsp;network&nbsp;traffic&nbsp;from&nbsp;30k&nbsp;packets/sec&nbsp;to&nbsp;40k&nbsp;packets/sec.&nbsp;The&nbsp;ingress&nbsp;&amp;&nbsp;egress&nbsp;rate&nbsp;stayed&nbsp;the&nbsp;same&nbsp;before&nbsp;and&nbsp;after&nbsp;the&nbsp;change&nbsp;i.e.&nbsp;around&nbsp;300&nbsp;msgs/sec. &lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;So,&nbsp;my&nbsp;question&nbsp;is&nbsp;why&nbsp;would&nbsp;network&nbsp;traffic&nbsp;increase&nbsp;when&nbsp;I&nbsp;make&nbsp;all&nbsp;calls&nbsp;asynchronous&nbsp;when&nbsp;the&nbsp;ingress&nbsp;&amp;&nbsp;egress&nbsp;rate&nbsp;is&nbsp;same&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;More&nbsp;info&nbsp;about&nbsp;the&nbsp;cluster:&lt;/div&gt;&lt;div&gt;<br>
&lt;div&gt;<br>
shri@mq1:~$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;status&lt;/div&gt;&lt;div&gt;Status&nbsp;of&nbsp;node&nbsp;rabbit@mq1&nbsp;...&lt;/div&gt;&lt;div&gt;[{pid,11689},&lt;/div&gt;&lt;div&gt; {running_applications,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; [{rabbitmq_management,&quot;RabbitMQ&nbsp;Management&nbsp;Console&quot;,&quot;3.0.2&quot;},&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp;{rabbitmq_management_agent,&quot;RabbitMQ&nbsp;Management&nbsp;Agent&quot;,&quot;3.0.2&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{rabbit,&quot;RabbitMQ&quot;,&quot;3.0.2&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{os_mon,&quot;CPO&nbsp; CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.4&quot;},&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp;{rabbitmq_mochiweb,&quot;RabbitMQ&nbsp;Mochiweb&nbsp;Embedding&quot;,&quot;3.0.2&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{webmachine,&quot;webmachine&quot;,&quot;1.9.1-rmq3.0.2-git52e62bc&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{mochiweb,&quot;MochiMedia&nbsp;Web&nbsp;Server&quot;,&quot;2.3.1-rmq3.0.2-gitd541e9a&quot;},&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp;{mnesia,&quot;MNESIA&nbsp; CXC&nbsp;138&nbsp;12&quot;,&quot;4.4.12&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{amqp_client,&quot;RabbitMQ&nbsp;AMQP&nbsp;Client&quot;,&quot;3.0.2&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{xmerl,&quot;XML&nbsp;parser&quot;,&quot;1.2.3&quot;},&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp;{inets,&quot;INETS&nbsp; CXC&nbsp;138&nbsp;49&quot;,&quot;5.2&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{sasl,&quot;SASL&nbsp; CXC&nbsp;138&nbsp;11&quot;,&quot;2.1.8&quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{stdlib,&quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&quot;,&quot;1.16.4&quot;},&lt;/div&gt;&lt;div&gt;<br>
<br>
 &nbsp; &nbsp; &nbsp;{kernel,&quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&quot;,&quot;2.13.4&quot;}]},&lt;/div&gt;&lt;div&gt; {os,{unix,linux}},&lt;/div&gt;&lt;div&gt; {erlang_version,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &quot;Erlang&nbsp;R13B03&nbsp;(erts-5.7.4)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:12:12]&nbsp;[rq:12]&nbsp;[async-threads:30]&nbsp;[hipe]&nbsp;[kernel-poll:true]\n&quot;},&lt;/div&gt;<br>
<br>
&lt;div&gt; {memory,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; [{total,469535752},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{connection_procs,17995944},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{queue_procs,11675696},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{plugins,230048},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{other_proc,126014264},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{mnesia,18446743803509563784},&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp;{mgmt_db,12530864},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{msg_index,1934440},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{other_ets,-18446743803280937440},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{binary,5524296},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{code,18395964},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{atom,3440321},&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp;{other_system,43167571}]},&lt;/div&gt;&lt;div&gt; {vm_memory_high_watermark,0.4},&lt;/div&gt;&lt;div&gt; {vm_memory_limit,5047128883},&lt;/div&gt;&lt;div&gt; {disk_free_limit,1000000000},&lt;/div&gt;&lt;div&gt; {disk_free,482189381632},&lt;/div&gt;&lt;div&gt; {file_descriptors,&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; [{total_limit,65436},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{total_used,309},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{sockets_limit,58890},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{sockets_used,298}]},&lt;/div&gt;&lt;div&gt; {processes,[{limit,1048576},{used,2992}]},&lt;/div&gt;&lt;div&gt; {run_queue,7},&lt;/div&gt;<br>
<br>
&lt;div&gt; {uptime,23771203}]&lt;/div&gt;&lt;div&gt;...done.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you,&lt;/div&gt;&lt;div&gt;Shri&lt;/div&gt;&lt;/div&gt;<br>

</tt>
