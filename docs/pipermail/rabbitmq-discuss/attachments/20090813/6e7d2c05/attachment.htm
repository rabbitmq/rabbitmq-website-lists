<tt>
Hi&nbsp;Nathan,&lt;br&gt;&lt;br&gt;Would&nbsp;it&nbsp;be&nbsp;possible&nbsp;to&nbsp;detail&nbsp;a&nbsp;bit&nbsp;more&nbsp;about&nbsp;your&nbsp;use&nbsp;case,&nbsp;and&nbsp;thus&nbsp;why&nbsp;you&nbsp;don&amp;#39;t&nbsp;know&nbsp;when&nbsp;exchanges&nbsp;will&nbsp;come&nbsp;and&nbsp;go?&nbsp;In&nbsp;most&nbsp;scenarios,&nbsp;we&amp;#39;d&nbsp;recommend&nbsp;that&nbsp;you&nbsp;just&nbsp;declare&nbsp;the&nbsp;exchanges&nbsp;in&nbsp;a&nbsp;non-passive&nbsp;manner&nbsp;-&nbsp;but&nbsp;I&nbsp;take&nbsp;it&nbsp;that&nbsp;there&nbsp;is&nbsp;something&nbsp;special&nbsp;about&nbsp;your&nbsp;use&nbsp;case&nbsp;that&nbsp;prevents&nbsp;this.&lt;br&gt;<br>
&lt;br&gt;If&nbsp;your&nbsp;requirement&nbsp;definitely&nbsp;does&nbsp;stand,&nbsp;there&nbsp;isn&amp;#39;t&nbsp;really&nbsp;a&nbsp;cleaner&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;from&nbsp;the&nbsp;queue-binding&nbsp;end.&nbsp;Speculating&nbsp;a&nbsp;bit&nbsp;on&nbsp;your&nbsp;use&nbsp;case,&nbsp;if&nbsp;you&amp;#39;re&nbsp;trying&nbsp;to&nbsp;bind&nbsp;every&nbsp;exchange&nbsp;in&nbsp;your&nbsp;system&nbsp;to&nbsp;a&nbsp;single&nbsp;queue,&nbsp;would&nbsp;it&nbsp;be&nbsp;possible&nbsp;to&nbsp;perform&nbsp;the&nbsp;binding&nbsp;at&nbsp;the&nbsp;point&nbsp;of&nbsp;exchange&nbsp;creation&nbsp;(ie,&nbsp;instead&nbsp;of&nbsp;a&nbsp;queue&nbsp;binding&nbsp;to&nbsp;a&nbsp;well-known&nbsp;exchange,&nbsp;bind&nbsp;the&nbsp;exchange&nbsp;to&nbsp;a&nbsp;well-known&nbsp;queue).&lt;br&gt;<br>
&lt;br&gt;Exchange-to-exchange&nbsp;bindings&nbsp;are&nbsp;still&nbsp;just&nbsp;a&nbsp;proposal&nbsp;at&nbsp;the&nbsp;moment&nbsp;I&amp;#39;m&nbsp;afraid.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Paul.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;11,&nbsp;2009&nbsp;at&nbsp;8:20&nbsp;PM,&nbsp;Nathan&nbsp;Gray&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:n8gray@n8gray.org&quot;&gt;n8gray@n8gray.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Hi&nbsp;folks,&lt;br&gt;<br>
&lt;br&gt;<br>
I&amp;#39;m&nbsp;using&nbsp;rabbitmq&nbsp;as&nbsp;an&nbsp;event&nbsp;notification&nbsp;system.&nbsp; In&nbsp;my&nbsp;application&lt;br&gt;<br>
each&nbsp;client&nbsp;will&nbsp;subscribe&nbsp;to&nbsp;a&nbsp;number&nbsp;of&nbsp;exchanges.&nbsp; Exchanges&nbsp;may&lt;br&gt;<br>
come&nbsp;and&nbsp;go.&nbsp; The&nbsp;client&nbsp;cannot&nbsp;be&nbsp;expected&nbsp;to&nbsp;know&nbsp;in&nbsp;advance&nbsp;which&lt;br&gt;<br>
exchanges&nbsp;no&nbsp;longer&nbsp;exist,&nbsp;so&nbsp;they&nbsp;will&nbsp;use&nbsp;exchange.declare(...,&lt;br&gt;<br>
passive=True,...)&nbsp;to&nbsp;find&nbsp;out&nbsp;which&nbsp;ones&nbsp;exist.&nbsp; However,&lt;br&gt;<br>
exchange.declare&nbsp;in&nbsp;passive&nbsp;mode&nbsp;raises&nbsp;a&nbsp;channel&nbsp;exception&nbsp;and&nbsp;kills&lt;br&gt;<br>
the&nbsp;channel&nbsp;if&nbsp;the&nbsp;exchange&nbsp;doesn&amp;#39;t&nbsp;exist.&nbsp; Assuming&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;one&lt;br&gt;<br>
channel&nbsp;per&nbsp;client&nbsp;I&amp;#39;m&nbsp;stuck&nbsp;with&nbsp;ugly,&nbsp;racy&nbsp;code&nbsp;to&nbsp;subscribe&nbsp;to&lt;br&gt;<br>
multiple&nbsp;exchanges.&nbsp; (See&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;post&nbsp;for&nbsp;the&nbsp;python&nbsp;code&nbsp;to&lt;br&gt;<br>
do&nbsp;it.)&nbsp; And&nbsp;if&nbsp;something&nbsp;goes&nbsp;wrong&nbsp;and&nbsp;kills&nbsp;the&nbsp;channel&nbsp;I&nbsp;have&nbsp;to&lt;br&gt;<br>
go&nbsp;through&nbsp;the&nbsp;whole&nbsp;dance&nbsp;again.&nbsp; This&nbsp;seems&nbsp;crazy.&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;question&nbsp;is,&nbsp;what&amp;#39;s&nbsp;the&nbsp;right&nbsp;way&nbsp;for&nbsp;one&nbsp;client&nbsp;to&nbsp;get&nbsp;messages&lt;br&gt;<br>
from&nbsp;multiple&nbsp;exchanges?&nbsp; Can&nbsp;one&nbsp;auto-delete&nbsp;queue&nbsp;be&nbsp;bound&nbsp;in&lt;br&gt;<br>
multiple&nbsp;channels,&nbsp;and&nbsp;if&nbsp;so&nbsp;is&nbsp;that&nbsp;the&nbsp;proper&nbsp;approach?&nbsp; Should&nbsp;I&nbsp;be&lt;br&gt;<br>
making&nbsp;N&nbsp;queues&nbsp;&amp;amp;&nbsp;channels&nbsp;to&nbsp;subscribe&nbsp;to&nbsp;N&nbsp;exchanges?&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;exchange-exchange&nbsp;binding&nbsp;[1]&nbsp;would&nbsp;solve&nbsp;a&nbsp;lot&nbsp;of&nbsp;problems&nbsp;for&lt;br&gt;<br>
me&nbsp;--&nbsp;does&nbsp;it&nbsp;work&nbsp;or&nbsp;is&nbsp;it&nbsp;just&nbsp;a&nbsp;proposal?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
-n8&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://n8gray.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://n8gray.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[1]:&nbsp;&lt;a&nbsp;href=&quot;https://dev.rabbitmq.com/wiki/ExchangeToExchangeBindings&quot;&nbsp;target=&quot;_blank&quot;&gt;https://dev.rabbitmq.com/wiki/ExchangeToExchangeBindings&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
while&nbsp;True:&lt;br&gt;<br>
&nbsp; &nbsp; chan&nbsp;=&nbsp;connection.channel()&lt;br&gt;<br>
&nbsp; &nbsp; found&nbsp;=&nbsp;[]&lt;br&gt;<br>
&nbsp; &nbsp; for&nbsp;xc&nbsp;in&nbsp;exchanges:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; try:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chan.exchange_declare(exchange=xc,&nbsp;passive=True,&nbsp;...)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; found.append(xc)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; except&nbsp;amqp.exceptions.AMQPChannelException,&nbsp;e:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;e.amqp_reply_code&nbsp;==&nbsp;404:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;Channel&nbsp;got&nbsp;closed.&nbsp; Open&nbsp;a&nbsp;new&nbsp;channel.&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chan&nbsp;=&nbsp;connection.channel()&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise&nbsp;e&lt;br&gt;<br>
&nbsp; &nbsp; #&nbsp;Sure&nbsp;hope&nbsp;nothing&nbsp;gets&nbsp;deleted&nbsp;at&nbsp;this&nbsp;point!&lt;br&gt;<br>
&nbsp; &nbsp; qname,&nbsp;_,&nbsp;_&nbsp;=&nbsp;chan.queue_declare(exclusive=True)&lt;br&gt;<br>
&nbsp; &nbsp; try:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; for&nbsp;xc&nbsp;in&nbsp;found:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; chan.queue_bind(queue=qname,&nbsp;exchange=xc)&lt;br&gt;<br>
&nbsp; &nbsp; except&nbsp;amqp.exceptions.AMQPChannelException,&nbsp;e:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;e.amqp_reply_code&nbsp;==&nbsp;404:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;Oops,&nbsp;an&nbsp;exchange&nbsp;got&nbsp;deleted.&nbsp; Start&nbsp;over.&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; else:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise&nbsp;e&lt;br&gt;<br>
&nbsp; &nbsp; #&nbsp;No&nbsp;exception&nbsp;raised,&nbsp;so&nbsp;we&amp;#39;re&nbsp;done&nbsp;(until&nbsp;something&lt;br&gt;<br>
&nbsp; &nbsp; #&nbsp;else&nbsp;goes&nbsp;wrong&nbsp;&amp;amp;&nbsp;kills&nbsp;the&nbsp;channel...)&lt;br&gt;<br>
&nbsp; &nbsp; break&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
