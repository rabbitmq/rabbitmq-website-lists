<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;wanted&nbsp;to&nbsp;upgrade&nbsp;AMQP&nbsp;library&nbsp;[php]&nbsp;0.9&nbsp;to&nbsp;latest.&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;updated&nbsp;that&nbsp;and&nbsp;change&nbsp;my&nbsp;Publisher&nbsp;and&nbsp;consumer&nbsp;code.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;publisher&nbsp;code&nbsp;for&nbsp;0.9&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;$this-&amp;gt;ex&nbsp;=&nbsp;new&nbsp;AMQPExchange($conn);&lt;/div&gt;&lt;div&gt;$this-&amp;gt;ex-&amp;gt;declare($exchange,&nbsp;$type);&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;changed&nbsp;it&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;$this-&amp;gt;ex&nbsp;=&nbsp;new&nbsp;AMQPExchange($ch);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;$this-&amp;gt;ex-&amp;gt;setName($exchange);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;$this-&amp;gt;ex-&amp;gt;setType($type);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;$this-&amp;gt;ex-&amp;gt;setFlags(AMQP_DURABLE&nbsp;|&nbsp;AMQP_AUTODELETE);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;$this-&amp;gt;ex-&amp;gt;declare();&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;i&nbsp;got&nbsp;this&nbsp;error&nbsp;:&nbsp;ncaught&nbsp;exception&nbsp;'AMQPExchangeException'&nbsp;with&nbsp;message&nbsp;'Server&nbsp;channel&nbsp;error:&nbsp;406,&nbsp;message:&nbsp;PRECONDITION_FAILED&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;i&nbsp;commented&nbsp;$this-&amp;gt;ex-&amp;gt;declare();&amp;nbsp;&lt;/div&gt;&lt;div&gt;then&nbsp;works&nbsp;fine,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;found&nbsp;this&nbsp;is&nbsp;redeclare&nbsp;problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Shall&nbsp;i&nbsp;comment&nbsp;:&nbsp;$this-&amp;gt;ex-&amp;gt;declare();&nbsp;or&amp;nbsp;&lt;/div&gt;&lt;div&gt;shall&nbsp;i&nbsp;change&nbsp;some&nbsp;thing?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;do&nbsp;not&nbsp;loose&nbsp;my&nbsp;earlier&nbsp;functionality.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;guide&nbsp;me&nbsp;for&nbsp;same.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot.&lt;/div&gt;&lt;/div&gt;
</tt>
