<tt>
Hi&nbsp;all,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;new&nbsp;to&nbsp;RabbitMQ&nbsp;and&nbsp;I&nbsp;am&nbsp;still&nbsp;trying&nbsp;to&nbsp;put&nbsp;everything&nbsp;together,&nbsp;so&nbsp;please&nbsp;be&nbsp;patient.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;want&nbsp;to&nbsp;achieve&nbsp;is&nbsp;a&nbsp;queue&nbsp;in&nbsp;which&nbsp;all&nbsp;the&nbsp;messages&nbsp;persist&nbsp;until&nbsp;a&nbsp;&amp;quot;consumer&amp;quot;&nbsp;(not&nbsp;sure&nbsp;if&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;consumer&nbsp;actually)&nbsp; do&nbsp;some&nbsp;batch&nbsp;processing&nbsp;on&nbsp;N&nbsp;messages,&nbsp;like&nbsp;updating&nbsp;a&nbsp;separate&nbsp;DB,&nbsp;and,&nbsp;only&nbsp;when&nbsp;everything&nbsp;has&nbsp;completed&nbsp;correctly,&nbsp;send&nbsp;an&nbsp;acknowledge&nbsp;so&nbsp;that&nbsp;the&nbsp;queue&nbsp;can&nbsp;release&nbsp;the&nbsp;last&nbsp;delivered&nbsp;N&nbsp;messages.&lt;/div&gt;<br>
<br>
&lt;div&gt;As&nbsp;per&nbsp;my&nbsp;understanding&nbsp;I&nbsp;can&nbsp;&amp;quot;declare&amp;quot;&nbsp;a&nbsp;queue&nbsp;and&nbsp;then&nbsp;start&nbsp;reading&nbsp;from&nbsp;it&nbsp;using&nbsp;basicGet()&nbsp;API.&nbsp;Then,&nbsp;after&nbsp;processing&nbsp;the&nbsp;desired&nbsp;number&nbsp;of&nbsp;messages,&nbsp;I&nbsp;call&nbsp;basicAck(deliveryTag,&nbsp;true)&nbsp;passing&nbsp;the&nbsp;tag&nbsp;of&nbsp;the&nbsp;last&nbsp;read&nbsp;message.&lt;/div&gt;<br>
<br>
&lt;div&gt;In&nbsp;my&nbsp;case&nbsp;it&nbsp;is&nbsp;both&nbsp;important&nbsp;to&nbsp;keep&nbsp;the&nbsp;message&nbsp;ordering&nbsp;and&nbsp;not&nbsp;to&nbsp;lose&nbsp;any&nbsp;message&nbsp;even&nbsp;if&nbsp;the&nbsp;consumer&nbsp;or&nbsp;the&nbsp;broker&nbsp;crash.&nbsp;In&nbsp;order&nbsp;to&nbsp;achieve&nbsp;that,&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;publish&nbsp;messages&nbsp;&amp;quot;mandatory&amp;quot;&nbsp;and&nbsp;&amp;quot;persistent&amp;quot;&nbsp;and&nbsp;then&nbsp;send&nbsp;an&nbsp;ack&nbsp;in&nbsp;the&nbsp;consumer&nbsp;after&nbsp;successfully&nbsp;securing&nbsp;the&nbsp;data&nbsp;in&nbsp;some&nbsp;other&nbsp;place.&lt;/div&gt;<br>
<br>
&lt;div&gt;What&nbsp;I&nbsp;want&nbsp;to&nbsp;be&nbsp;clear&nbsp;here&nbsp;is:&nbsp;is&nbsp;it&nbsp;correct&nbsp;to&nbsp;say&nbsp;that&nbsp;if&nbsp;the&nbsp;consumer&nbsp;crashes&nbsp;after&nbsp;M&nbsp;basicGet()&nbsp;(but&nbsp;before&nbsp;sending&nbsp;the&nbsp;ack),&nbsp;at&nbsp;restart&nbsp;the&nbsp;same&nbsp;M&nbsp;messages&nbsp;will&nbsp;be&nbsp;returned&nbsp;calling&nbsp;basicGet()?&nbsp;I.e.&nbsp;are&nbsp;the&nbsp;messages&nbsp;removed&nbsp;from&nbsp;the&nbsp;queue&nbsp;only&nbsp;after&nbsp;receiving&nbsp;the&nbsp;acknowledge?&lt;/div&gt;<br>
<br>
&lt;div&gt;If&nbsp;it&nbsp;is&nbsp;not&nbsp;so,&nbsp;do&nbsp;I&nbsp;have&nbsp;to&nbsp;call&nbsp;basicRecover()?&nbsp;Can&nbsp;I&nbsp;do&nbsp;it&nbsp;even&nbsp;if&nbsp;I&nbsp;don&amp;#39;t&nbsp;call&nbsp;basicConsume()?&nbsp;And&nbsp;most&nbsp;importantly,&nbsp;which&nbsp;is&nbsp;the&nbsp;order&nbsp;of&nbsp;the&nbsp;messages&nbsp;when&nbsp;calling&nbsp;basicRecover()&nbsp;after&nbsp;a&nbsp;crash&nbsp;and&nbsp;restart&nbsp;of&nbsp;the&nbsp;consumer&nbsp;node?&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;final&nbsp;question:&nbsp;if&nbsp;a&nbsp;message&nbsp;is&nbsp;flagged&nbsp;as&nbsp;&amp;quot;mandatory&amp;quot;,&nbsp;how&nbsp;long&nbsp;the&nbsp;queue&nbsp;wait&nbsp;for&nbsp;a&nbsp;consumer&nbsp;to&nbsp;be&nbsp;ready&nbsp;before&nbsp;returning&nbsp;the&nbsp;message&nbsp;to&nbsp;the&nbsp;sender?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;and&nbsp;Best&nbsp;Regards,&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Davide&lt;/div&gt;<br>

</tt>
