<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;11,&nbsp;2013&nbsp;at&nbsp;2:08&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
On&nbsp;11/07/13&nbsp;17:38,&nbsp;Kevin&nbsp;Goess&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
Circling&nbsp;back&nbsp;after&nbsp;an&nbsp;earlier&nbsp;question&nbsp;about&nbsp;this&nbsp;problem.&nbsp;We&amp;#39;ve&lt;br&gt;<br>
upgraded&nbsp;to&nbsp;3.1.3-1.&nbsp; We&amp;#39;ve&nbsp;moved&nbsp;the&nbsp;mnesia&nbsp;files&nbsp;to&nbsp;a&nbsp;dedicated&nbsp;10k&lt;br&gt;<br>
sata&nbsp;drive&nbsp;via&nbsp;RABBITMQ_MNESIA_BASE,&nbsp;a&nbsp;new&nbsp;drive&nbsp;that&nbsp;nothing&nbsp;else&nbsp;is&lt;br&gt;<br>
using,&nbsp;on&nbsp;a&nbsp;xen&nbsp;virtual&nbsp;machine&nbsp;that&nbsp;is&nbsp;only&nbsp;running&nbsp;rabbitmq.&nbsp; We&lt;br&gt;<br>
generally&nbsp;deal&nbsp;with&nbsp;about&nbsp;20&nbsp;messages&nbsp;per&nbsp;second.&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;we&amp;#39;re&nbsp;seeing&nbsp;pretty&nbsp;heavy&nbsp;disk&nbsp;activity,&nbsp;with&nbsp;iowait&nbsp;30-40%,&nbsp;and&lt;br&gt;<br>
iostat&nbsp;numbers&nbsp;like&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
Device:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rrqm/s&nbsp; &nbsp;wrqm/s&nbsp; &nbsp; &nbsp;r/s&nbsp; &nbsp; &nbsp;w/s&nbsp; &nbsp;rsec/s&nbsp; &nbsp;wsec/s&lt;br&gt;<br>
avgrq-sz&nbsp;avgqu-sz&nbsp; &nbsp;await&nbsp; svctm&nbsp; %util&lt;br&gt;<br>
xvdbp1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; 60.00&nbsp; &nbsp; 0.00&nbsp; 143.40&nbsp; &nbsp; &nbsp;0.00&nbsp; 1452.80&lt;br&gt;<br>
 &nbsp;10.13&nbsp; &nbsp; &nbsp;0.88&nbsp; &nbsp; &lt;a&nbsp;href=&quot;tel:6.14%20%20%204.22%20%2060.48&quot;&nbsp;value=&quot;+16144226048&quot;&nbsp;target=&quot;_blank&quot;&gt;6.14&nbsp;&nbsp;&nbsp;4.22&nbsp;&nbsp;60.48&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;this&nbsp;expected?&nbsp; That&nbsp;seems&nbsp;excessive,&nbsp;and&nbsp;I&nbsp;worry&nbsp;that&nbsp;the&nbsp;high&lt;br&gt;<br>
iowait&nbsp;could&nbsp;cause&nbsp;us&nbsp;problems&nbsp;as&nbsp;we&nbsp;grow,&nbsp;so&nbsp;I&nbsp;was&nbsp;hoping&nbsp;to&nbsp;get&nbsp;some&lt;br&gt;<br>
pointers&nbsp;to&nbsp;things&nbsp;to&nbsp;look&nbsp;at&nbsp;that&nbsp;to&nbsp;improve&nbsp;that.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
My&nbsp;suspicious&nbsp;is&nbsp;that&nbsp;somehow&nbsp;your&nbsp;usage&nbsp;pattern&nbsp;results&nbsp;in&nbsp;a&nbsp;lot&nbsp;of&nbsp;queue/exchange/binding&nbsp;creation/deletion,&nbsp;which,&nbsp;if&nbsp;the&nbsp;entities&nbsp;involved&nbsp;are&nbsp;durable,&nbsp;require&nbsp;disk&nbsp;writes&nbsp;and&nbsp;fsyncs.&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;test&nbsp;the&nbsp;validity&nbsp;of&nbsp;that&nbsp;theory,&nbsp;please&nbsp;try&nbsp;to&nbsp;find&nbsp;out&nbsp;what&nbsp;files&nbsp;are&nbsp;seeing&nbsp;activity,&nbsp;and&nbsp;report&nbsp;back.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;all&nbsp;the&nbsp;writing&nbsp;that&amp;#39;s&nbsp;gone&nbsp;on&nbsp;in&nbsp;the&nbsp;last&nbsp;ten&nbsp;minutes:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;$&nbsp;find&nbsp;.&nbsp;-newer&nbsp;kg-test-timer&nbsp;-type&nbsp;f&nbsp;-ls&lt;/div&gt;&lt;div&gt;262153&nbsp;10784&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;11036923&nbsp;Jul&nbsp;16&nbsp;12:31&nbsp;./msg_store_persistent/41228.rdq&lt;/div&gt;&lt;div&gt;262155&nbsp;16392&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;16777655&nbsp;Jul&nbsp;16&nbsp;12:21&nbsp;./msg_store_persistent/41227.rdq&lt;/div&gt;<br>
&lt;div&gt;262274&nbsp; 120&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp;116640&nbsp;Jul&nbsp;16&nbsp;12:30&nbsp;./queues/8EP2UVB3Z8SAIWFBFKQ0100K4/journal.jif&lt;/div&gt;&lt;div&gt;262166&nbsp; &nbsp;32&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; 28222&nbsp;Jul&nbsp;16&nbsp;12:28&nbsp;./queues/9K0C0VGF04K4O788HH6ZFMDAG/4747.idx&lt;/div&gt;<br>
&lt;div&gt;262204&nbsp; &nbsp;24&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; 20000&nbsp;Jul&nbsp;16&nbsp;12:30&nbsp;./queues/9K0C0VGF04K4O788HH6ZFMDAG/journal.jif&lt;/div&gt;&lt;div&gt;262228&nbsp; &nbsp; 0&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;Jul&nbsp;16&nbsp;12:27&nbsp;./queues/A6K4C7JLF1P0AHEXXN9633747/journal.jif&lt;/div&gt;<br>
&lt;div&gt;262172&nbsp; &nbsp; 4&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28&nbsp;Jul&nbsp;16&nbsp;12:26&nbsp;./queues/C8NMZYECUT2TCZUNODNUQ122Y/0.idx&lt;/div&gt;&lt;div&gt;262224&nbsp; &nbsp; 0&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;Jul&nbsp;16&nbsp;12:26&nbsp;./queues/C8NMZYECUT2TCZUNODNUQ122Y/journal.jif&lt;/div&gt;<br>
&lt;div&gt;262291&nbsp; 136&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp;134008&nbsp;Jul&nbsp;16&nbsp;12:31&nbsp;./queues/5W6SPLYHNTA4ZH2CONMRXOT90/journal.jif&lt;/div&gt;&lt;div&gt;262161&nbsp; &nbsp;12&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8256&nbsp;Jul&nbsp;16&nbsp;12:30&nbsp;./queues/3GMBIL72D6Q6F4LC6TWTYCPWA/1.idx&lt;/div&gt;<br>
&lt;div&gt;262236&nbsp; &nbsp; 0&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;Jul&nbsp;16&nbsp;12:30&nbsp;./queues/3GMBIL72D6Q6F4LC6TWTYCPWA/journal.jif&lt;/div&gt;&lt;div&gt;262234&nbsp; 424&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp;430024&nbsp;Jul&nbsp;16&nbsp;12:31&nbsp;./queues/ERZ5DFKEUXBK1QJQJLBQN3KFI/journal.jif&lt;/div&gt;<br>
&lt;div&gt;262199&nbsp; 528&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp;536208&nbsp;Jul&nbsp;16&nbsp;12:30&nbsp;./queues/DWEIOI0J2S6CMT74JYWUZXVL8/journal.jif&lt;/div&gt;&lt;div&gt;262282&nbsp; &nbsp;28&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; 21600&nbsp;Jul&nbsp;16&nbsp;12:30&nbsp;./queues/1XAUC81LT5GM7ZI05RROF4KL0/journal.jif&lt;/div&gt;<br>
&lt;div&gt;262297&nbsp; &nbsp; 0&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;Jul&nbsp;16&nbsp;12:19&nbsp;./queues/31J4BX7549NFNZ1Q6XH1Z19MJ/journal.jif&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;that&nbsp;list&nbsp;is&nbsp;almost&nbsp;identical&nbsp;to&nbsp;that&nbsp;for&nbsp;the&nbsp;last&nbsp;*hour*,&nbsp;with&nbsp;the&nbsp;addition&nbsp;of&nbsp;these&nbsp;files&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;262152&nbsp; &nbsp;80&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; 78942&nbsp;Jul&nbsp;16&nbsp;11:53&nbsp;./msg_store_persistent/17778.rdq&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;262321&nbsp; &nbsp; 0&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;Jul&nbsp;16&nbsp;11:36&nbsp;./queues/AVS8NDWHNCZ8X0Y2599HSOVJ0/journal.jif&lt;/div&gt;<br>
&lt;div&gt;262341&nbsp; &nbsp; 0&nbsp;-rw-r--r--&nbsp; &nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;Jul&nbsp;16&nbsp;11:42&nbsp;./queues/U7FN5251IRUUH23XQIPFTBND/journal.jif&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does&nbsp;that&nbsp;mean&nbsp;anything&nbsp;to&nbsp;you?&nbsp; Is&nbsp;there&nbsp;a&nbsp;way&nbsp;we&nbsp;can&nbsp;match&nbsp;those&nbsp;directory&nbsp;names&nbsp;with&nbsp;queues?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
