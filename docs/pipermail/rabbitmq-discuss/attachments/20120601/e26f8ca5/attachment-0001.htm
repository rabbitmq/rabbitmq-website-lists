<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Can&nbsp;you&nbsp;provide&nbsp;a&nbsp;little&nbsp;more&nbsp;context&nbsp;-&nbsp;under&nbsp;what&nbsp;conditions&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;seeing&nbsp;this;&nbsp;what&nbsp;version&nbsp;of&nbsp;spring-rabbit&nbsp;are&nbsp;you&nbsp;using?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Can&nbsp;you&nbsp;provide&nbsp;more&nbsp;log&nbsp;data,&nbsp;before&nbsp;the&nbsp;condition&nbsp;occurs?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Gary&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;06/01/2012&nbsp;09:00&nbsp;AM,&nbsp;Michael&nbsp;Patel&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:da781423-ebf0-4d4c-82f7-f6a1870fc698@googlegroups.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;Hello&nbsp;all,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;I'm&nbsp;getting&nbsp;the&nbsp;a&nbsp;double&nbsp;ack&nbsp;(I&nbsp;believe)&nbsp;error&nbsp;when&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rabbitmq&nbsp;consumer&nbsp;dies&nbsp;and&nbsp;error&nbsp;recovery&nbsp;begins&nbsp;to&nbsp;happen&nbsp;: &lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;12:37:10.625&nbsp;[SimpleAsyncTaskExecutor-1]&nbsp;WARN<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.s.a.r.l.SimpleMessageListenerContainer&nbsp;-&nbsp;Consumer&nbsp;failed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;irretrievably&nbsp;on&nbsp;restart.&nbsp;class<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.amqp.AmqpIOException:&nbsp;java.io.IOException&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Exception&nbsp;in&nbsp;thread&nbsp;&quot;SimpleAsyncTaskExecutor-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.amqp.AmqpIOException:&nbsp;java.io.IOException&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.connection.RabbitUtils.convertRabbitAccessException(RabbitUtils.java:109)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.connection.RabbitUtils.closeMessageConsumer(RabbitUtils.java:136)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.stop(BlockingQueueConsumer.java:210)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.restart(SimpleMessageListenerContainer.java:379)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1300(SimpleMessageListenerContainer.java:56)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:551)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at&nbsp;java.lang.Thread.run(Thread.java:679)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Caused&nbsp;by:&nbsp;java.io.IOException&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:107)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;com.rabbitmq.client.impl.ChannelN.basicCancel(ChannelN.java:840)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at&nbsp;sun.reflect.NativeMethodAccessorImpl.invoke0(Native<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at&nbsp;java.lang.reflect.Method.invoke(Method.java:616)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.connection.CachingConnectionFactory$CachedChannelInvocationHandler.invoke(CachingConnectionFactory.java:298)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at&nbsp;$Proxy125.basicCancel(Unknown&nbsp;Source)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
org.springframework.amqp.rabbit.connection.RabbitUtils.closeMessageConsumer(RabbitUtils.java:123)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;...&nbsp;5&nbsp;more&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Caused&nbsp;by:&nbsp;com.rabbitmq.client.ShutdownSignalException:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel&nbsp;error;&nbsp;reason:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{#method&amp;lt;channel.close&amp;gt;(reply-code=406,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reply-text=PRECONDITION_FAILED&nbsp;-&nbsp;unknown&nbsp;delivery&nbsp;tag&nbsp;1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class-id=60,&nbsp;method-id=80),null,&quot;&quot;}&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:328)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;com.rabbitmq.client.impl.ChannelN.basicCancel(ChannelN.java:837)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;...&nbsp;12&nbsp;more&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Now,&nbsp;i'm&nbsp;not&nbsp;sure&nbsp;what&nbsp;I&nbsp;need&nbsp;to&nbsp;do&nbsp;to&nbsp;ensure&nbsp;that&nbsp;i'm<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acknowledging&nbsp;only&nbsp;once&nbsp;?&nbsp;I'm&nbsp;not&nbsp;extremely&nbsp;familiar&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spring-rabbit&nbsp;though&nbsp;i've&nbsp;looked&nbsp;through&nbsp;the&nbsp;documentation&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;see&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;pointers.&nbsp;Can&nbsp;someone&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;right<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;direction&nbsp;?&nbsp;My&nbsp;spring-rabbit&nbsp;config&nbsp;shown&nbsp;below&nbsp;: &lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;margin-bottom:&nbsp;10px;&nbsp;padding-top:&nbsp;5px;&nbsp;padding-right:&nbsp;5px;&nbsp;padding-bottom:&nbsp;5px;&nbsp;padding-left:&nbsp;5px;&nbsp;font-size:&nbsp;14px;&nbsp;background-image:&nbsp;initial;&nbsp;background-attachment:&nbsp;initial;&nbsp;background-origin:&nbsp;initial;&nbsp;background-clip:&nbsp;initial;&nbsp;background-color:&nbsp;rgb(238,&nbsp;238,&nbsp;238);&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;overflow-x:&nbsp;auto;&nbsp;overflow-y:&nbsp;auto;&nbsp;width:&nbsp;auto;&nbsp;max-height:&nbsp;600px;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;line-height:&nbsp;18px;&nbsp;text-align:&nbsp;left;&nbsp;&quot;&gt;&lt;code&nbsp;style=&quot;background-image:&nbsp;initial;&nbsp;background-attachment:&nbsp;initial;&nbsp;background-origin:&nbsp;initial;&nbsp;background-clip:&nbsp;initial;&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;&quot;&gt;&amp;lt;rabbit:connection-factory&nbsp;id=&quot;connectionFactory&quot;&nbsp;host=&quot;${rabbitmq.host:rserver1}&quot;&nbsp;port=&quot;${rabbitmq.port:5672}&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;username=&quot;guest&quot;&nbsp;password=&quot;guest&quot;&nbsp;/&amp;gt;<br>
<br>
&amp;lt;rabbit:template&nbsp;id=&quot;amqpTemplate&quot;&nbsp;connection-factory=&quot;connectionFactory&quot;&nbsp;/&amp;gt;<br>
<br>
&amp;lt;rabbit:admin&nbsp;connection-factory=&quot;connectionFactory&quot;&nbsp;/&amp;gt;<br>
<br>
&amp;lt;rabbit:queue&nbsp;name=&quot;Q1.${server.name:unknown}&quot;&nbsp;&nbsp;/&amp;gt;<br>
&amp;lt;rabbit:queue&nbsp;name=&quot;Q2.${server.name:unknown}&quot;&nbsp;&nbsp;/&amp;gt;<br>
<br>
&amp;lt;rabbit:listener-container&nbsp;connection-factory=&quot;connectionFactory&quot;&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;rabbit:listener&nbsp;queues=&quot;Q2.${server.name:unknown}&quot;&nbsp;ref=&quot;q1QueueConsumer&quot;&nbsp;/&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;rabbit:listener&nbsp;queues=&quot;Q2.${server.name:unknown}&quot;&nbsp;ref=&quot;q2QueueConsumer&quot;&nbsp;/&amp;gt;<br>
&amp;lt;/rabbit:listener-container&amp;gt;<br>
<br>
<br>
&amp;lt;rabbit:topic-exchange&nbsp;name=&quot;Exchange&quot;&amp;gt;<br>
<br>
&nbsp;&nbsp;&amp;lt;rabbit:bindings&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;rabbit:binding&nbsp;queue=&quot;Q1.${server.name:unknown}&quot;&nbsp;pattern=&quot;#.Q1.#&quot;&nbsp;/&amp;gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;rabbit:binding&nbsp;queue=&quot;Q2.${server.name:unknown}&quot;&nbsp;pattern=&quot;#.Q2.#&quot;&nbsp;/&amp;gt;<br>
&nbsp;&nbsp;&amp;lt;/rabbit:bindings&amp;gt;<br>
&amp;lt;/rabbit:topic-exchange&amp;gt;&lt;/code&gt;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
