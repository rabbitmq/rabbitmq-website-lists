<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;div&gt;&lt;div&gt;I&nbsp;need&nbsp;a&nbsp;second&nbsp;pair&nbsp;of&nbsp;eyes&nbsp;on&nbsp;a&nbsp;small&nbsp;RMQ&nbsp;app&nbsp;I'm&nbsp;working&nbsp;on.&amp;nbsp;&lt;/div&gt;&lt;div&gt;I&nbsp;suspect&nbsp;the&nbsp;issue&nbsp;I'm&nbsp;seeing&nbsp;is&nbsp;related&nbsp;to&nbsp;how&nbsp;I&nbsp;am&nbsp;defining&nbsp;my&nbsp;exchanges&nbsp;and&nbsp;queues.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;connect&nbsp;with&nbsp;two&nbsp;clients,&nbsp;I'll&nbsp;see&nbsp;every&nbsp;other&nbsp;message&nbsp;appear&nbsp;on&nbsp;my&nbsp;client.&nbsp;If&nbsp;I&nbsp;connect&nbsp;with&nbsp;three&nbsp;clients,&nbsp;I&nbsp;see&nbsp;every&nbsp;third&nbsp;message,&nbsp;and&nbsp;so&nbsp;on.&nbsp;In&nbsp;other&nbsp;words,&nbsp;it&nbsp;appears&nbsp;to&nbsp;1)&nbsp;be&nbsp;deleting&nbsp;every&nbsp;message&nbsp;that&nbsp;gets&nbsp;produced&nbsp;on&nbsp;consumption,&nbsp;and&nbsp;2)&nbsp;round&nbsp;robins&nbsp;which&nbsp;consumer&nbsp;gets&nbsp;each&nbsp;message.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;want&nbsp;to&nbsp;see&nbsp;is&nbsp;all&nbsp;clients&nbsp;get&nbsp;the&nbsp;same&nbsp;message&nbsp;each&nbsp;time&nbsp;one&nbsp;is&nbsp;posted.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;a&nbsp;topic&nbsp;approach&nbsp;the&nbsp;best&nbsp;approach&nbsp;for&nbsp;this,&nbsp;or&nbsp;is&nbsp;fanout&nbsp;the&nbsp;better&nbsp;way&nbsp;to&nbsp;handle&nbsp;this?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's&nbsp;the&nbsp;specifics&nbsp;of&nbsp;how&nbsp;my&nbsp;producer&nbsp;and&nbsp;consumer&nbsp;is&nbsp;set&nbsp;up:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;PRODUCER&nbsp;(client=bunny)&lt;/div&gt;&lt;div&gt;=====================&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;@topic_exchange&nbsp;||=&nbsp;client.exchange(&quot;internal.platformalert&quot;,&nbsp;:type&nbsp;=&amp;gt;&nbsp;:topic,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;:durable&nbsp;=&amp;gt;&nbsp;true,&nbsp;:autodelete&nbsp;=&amp;gt;&nbsp;false)&lt;/div&gt;&lt;div&gt;@queue&nbsp;||=&nbsp;client.queue(&quot;internal.platformalert.#&quot;,&nbsp;:durable&nbsp;=&amp;gt;&nbsp;true,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;:autodelete&nbsp;=&amp;gt;&nbsp;false,&nbsp;:arguments&nbsp;=&amp;gt;&nbsp;{'x-ha-policy'&nbsp;=&amp;gt;&nbsp;'all'})&lt;/div&gt;&lt;div&gt;queue.bind(e,&nbsp;:key&nbsp;=&amp;gt;&nbsp;&quot;alert&quot;)&lt;/div&gt;&lt;div&gt;exchange.publish(message,&nbsp;:key&nbsp;=&amp;gt;&nbsp;&quot;alert&quot;,&nbsp;:persistent&nbsp;=&amp;gt;&nbsp;true)&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;CONSUMER&nbsp;(client=ruby-amqp)&lt;/div&gt;&lt;div&gt;=====================&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;exchange&nbsp;=&nbsp;channel.topic(&quot;internal.platformalert&quot;,&nbsp;:durable&nbsp;=&amp;gt;&nbsp;true,&nbsp;:autodelete&nbsp;=&amp;gt;&nbsp;false)&lt;/div&gt;&lt;div&gt;queue&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;=&nbsp;channel.queue(&quot;internal.platformalert.#&quot;,&nbsp;:durable&nbsp;=&amp;gt;&nbsp;true,&nbsp;:autodelete&nbsp;=&amp;gt;&nbsp;false,&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:arguments&nbsp;=&amp;gt;&nbsp;{'x-ha-policy'&nbsp;=&amp;gt;&nbsp;'all'})&lt;/div&gt;&lt;div&gt;queue.bind(exchange,&nbsp;:routing_key&nbsp;=&amp;gt;&nbsp;&quot;alert&quot;)&lt;/div&gt;&lt;div&gt;queue.subscribe(:ack&nbsp;=&amp;gt;&nbsp;false)&nbsp;do&nbsp;|header,&nbsp;body|&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&amp;#8230;&nbsp;do&nbsp;stuff&lt;/div&gt;&lt;div&gt;end&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Many&nbsp;thanks!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Chris&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
