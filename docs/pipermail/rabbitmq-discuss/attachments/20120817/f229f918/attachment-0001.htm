<tt>
(Would&nbsp;publish&nbsp;to&nbsp;a&nbsp;Pika&nbsp;mailing&nbsp;list&nbsp;if&nbsp;there&nbsp;was&nbsp;one,&nbsp;but&nbsp;since&nbsp;there&nbsp;doesn&amp;#39;t&nbsp;seem&nbsp;to&nbsp;be...)&lt;br&gt;&lt;br&gt;After&nbsp;registering&nbsp;a&nbsp;returned&nbsp;message&nbsp;handler&nbsp;in&nbsp;Pika,&nbsp;I&nbsp;noticed&nbsp;that&nbsp;it&nbsp;only&nbsp;gets&nbsp;called&nbsp;once.&nbsp;Digging&nbsp;into&nbsp;the&nbsp;code,&nbsp;I&nbsp;see&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;   &nbsp;def&nbsp;add_on_return_callback(self,&nbsp;callback):&lt;br&gt;       &nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;       &nbsp;Pass&nbsp;a&nbsp;callback&nbsp;function&nbsp;that&nbsp;will&nbsp;be&nbsp;called&nbsp;when&nbsp;basic_publish&nbsp;as&nbsp;sent&lt;br&gt;       &nbsp;a&nbsp;message&nbsp;that&nbsp;has&nbsp;been&nbsp;rejected&nbsp;and&nbsp;returned&nbsp;by&nbsp;the&nbsp;server.&nbsp;The&lt;br&gt;<br>
       &nbsp;callback&nbsp;handler&nbsp;should&nbsp;receive&nbsp;a&nbsp;method,&nbsp;header&nbsp;and&nbsp;body&nbsp;frame.&nbsp;The&lt;br&gt;       &nbsp;base&nbsp;signature&nbsp;for&nbsp;the&nbsp;callback&nbsp;should&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;method&lt;br&gt;       &nbsp;signature&nbsp;one&nbsp;creates&nbsp;for&nbsp;a&nbsp;basic_consume&nbsp;callback.&lt;br&gt;       &nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;<br>
       &lt;b&gt;&nbsp;self.callbacks.add(self.channel_number,&nbsp;&amp;#39;_on_basic_return&amp;#39;,&nbsp;callback)&lt;/b&gt;&lt;br&gt;&lt;br&gt;The&nbsp;CallbackManager.add()&nbsp;method&nbsp;is&nbsp;defined&nbsp;like&nbsp;this:&lt;br&gt;&lt;br&gt;   &nbsp;def&nbsp;add(self,&nbsp;prefix,&nbsp;key,&nbsp;callback,&lt;b&gt;&nbsp;one_shot=True&lt;/b&gt;,&nbsp;only_caller=None):&lt;br&gt;<br>
&lt;br&gt;Since&nbsp;add_on_return_callback&nbsp;doesn&amp;#39;t&nbsp;specify&nbsp;a&nbsp;value&nbsp;for&nbsp;the&nbsp;one_shot&nbsp;keyword&nbsp;arg,&nbsp;it&nbsp;defaults&nbsp;to&nbsp;True,&nbsp;which&nbsp;explains&nbsp;exactly&nbsp;the&nbsp;behavior&nbsp;I&amp;#39;m&nbsp;seeing.&lt;br&gt;&lt;br&gt;Is&nbsp;this&nbsp;the&nbsp;correct&nbsp;behavior&nbsp;or&nbsp;an&nbsp;oversight?&lt;br&gt;&lt;br&gt;<br>
Thanks,&lt;br&gt;&lt;br&gt;Matt&lt;br&gt;<br>

</tt>
