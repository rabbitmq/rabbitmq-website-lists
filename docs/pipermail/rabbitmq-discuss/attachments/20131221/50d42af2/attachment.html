<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/12/21&nbsp;Dennis&nbsp;Jacobfeuerborn&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:djacobfeuerborn@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;djacobfeuerborn@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;technically&nbsp;I&nbsp;need&nbsp;to&nbsp;change&nbsp;the&nbsp;message&nbsp;format&nbsp;to&nbsp;&quot;&lt;publisher&gt;.&lt;key&gt;&nbsp;&lt;value&gt;&quot;&nbsp;so&nbsp;the&nbsp;consumer&nbsp;can&nbsp;know&nbsp;where&nbsp;to&nbsp;store&nbsp;the&nbsp;keys&nbsp;but&nbsp;for&nbsp;security&nbsp;reasons&nbsp;I&nbsp;cannot&nbsp;really&nbsp;rely&nbsp;on&nbsp;the&nbsp;publisher&nbsp;sending&nbsp;the&nbsp;correct&nbsp;data&nbsp;so&nbsp;I&nbsp;really&nbsp;need&nbsp;to&nbsp;insert&nbsp;the&nbsp;&lt;publisher&gt;&nbsp;bit&nbsp;on&nbsp;the&nbsp;broker&nbsp;side&nbsp;based&nbsp;on&nbsp;the&nbsp;username&nbsp;the&nbsp;publisher&nbsp;connects&nbsp;with.&nbsp;For&nbsp;example:&lt;br&gt;<br>
<br>
&lt;br&gt;-&nbsp;Publisher&nbsp;connects&nbsp;with&nbsp;the&nbsp;credentials&nbsp;&quot;publisher1&quot;/(some&nbsp;password)&lt;br&gt;-&nbsp;Publisher&nbsp;sends&nbsp;message&nbsp;&quot;mykey&nbsp;myvalue&quot;&nbsp;to&nbsp;exchange&nbsp;X&lt;br&gt;-&nbsp;Exchange&nbsp;X&nbsp;modifies&nbsp;the&nbsp;message&nbsp;and&nbsp;prepends&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;username&nbsp;resulting&nbsp;in&nbsp;the&nbsp;message&nbsp;&quot;publisher1.mykey&nbsp;myvalue&quot;&lt;br&gt;<br>
<br>
-&nbsp;Consumer&nbsp;receives&nbsp;the&nbsp;message&nbsp;and&nbsp;can&nbsp;store&nbsp;the&nbsp;data&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;place&lt;br&gt;&lt;br&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;accomplish&nbsp;this&nbsp;or&nbsp;something&nbsp;similar&nbsp;with&nbsp;rabbitmq?&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;can&nbsp;be&nbsp;accomplished&nbsp;with&nbsp;a&nbsp;custom&nbsp;exchange&nbsp;(a&nbsp;plugin&nbsp;written&nbsp;in&nbsp;Erlang,&lt;/div&gt;<br>
<br>
&lt;div&gt;which&nbsp;implements&nbsp;an&nbsp;API&nbsp;with&nbsp;about&nbsp;4-6&nbsp;functions)&nbsp;or&nbsp;you&nbsp;could&nbsp;just&nbsp;add&nbsp;an&nbsp;intermediary&nbsp;consumer&lt;/div&gt;&lt;div&gt;that&#39;s&nbsp;written&nbsp;in&nbsp;any&nbsp;that&nbsp;that&nbsp;republishes&nbsp;valid&nbsp;messages&nbsp;to&nbsp;another&nbsp;exchange.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
A&nbsp;couple&nbsp;more&nbsp;things&nbsp;I&#39;d&nbsp;recommend:&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt; *&nbsp;Don&#39;t&nbsp;make&nbsp;routing&nbsp;keys&nbsp;too&nbsp;smart&nbsp;(encode&nbsp;too&nbsp;much&nbsp;information&nbsp;into&nbsp;them)&lt;/div&gt;&lt;div&gt; *&nbsp;Use&nbsp;message&nbsp;headers&nbsp;or&nbsp;payload&nbsp;(serialized&nbsp;as&nbsp;JSON,&nbsp;Protocol&nbsp;Buffers&nbsp;or&nbsp;similar)&nbsp;if&nbsp;you&nbsp;need&nbsp;to&nbsp;pass&nbsp;more&nbsp;info&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTH.&lt;/div&gt;--&nbsp;&lt;br&gt;MK&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://github.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/michaelklishin&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twitter.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
