<tt>
Ben,&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;looking&nbsp;into&nbsp;this.&nbsp;In&nbsp;the&nbsp;&amp;quot;real&amp;quot;&nbsp;code,&nbsp;all&nbsp;the&nbsp;setup&nbsp;is&nbsp;actually&nbsp;done&nbsp;within&nbsp;a&nbsp;single&nbsp;Erlang&nbsp;process,&nbsp;and&nbsp;the&nbsp;only&nbsp;thing&nbsp;the&nbsp;consumers&nbsp;do&nbsp;is&nbsp;handle&nbsp;the&nbsp;basic.deliver,&nbsp;as&nbsp;well&nbsp;as&nbsp;any&nbsp;basic.consume_ok&amp;nbsp;&nbsp;or&nbsp;basic.cancel_ok&nbsp;messages&nbsp;that&nbsp;may&nbsp;arise.&nbsp;In&nbsp;the&nbsp;test&nbsp;code,&nbsp;I&nbsp;rearranged&nbsp;some&nbsp;things&nbsp;specifically&nbsp;to&nbsp;be&nbsp;done&nbsp;concurrently,&nbsp;which&nbsp;I&nbsp;now&nbsp;see&nbsp;was&nbsp;a&nbsp;mistake.&nbsp;However,&nbsp;this&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;test&nbsp;code,&nbsp;not&nbsp;in&nbsp;the&nbsp;production&nbsp;code.&nbsp;I&nbsp;will&nbsp;change&nbsp;the&nbsp;test&nbsp;code&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;no&nbsp;concurrent&nbsp;work&nbsp;being&nbsp;done&nbsp;on&nbsp;a&nbsp;channel&nbsp;other&nbsp;than&nbsp;responding&nbsp;with&nbsp;basic.ack&nbsp;to&nbsp;basic.deliver&nbsp;messages.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;note&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;special&nbsp;version&nbsp;of&nbsp;amqp_channel:send/3,&nbsp;used&nbsp;only&nbsp;for&nbsp;a&nbsp;basic.consume&nbsp;method,&nbsp;with&nbsp;the&nbsp;last&nbsp;argument&nbsp;being&nbsp;the&nbsp;pid&nbsp;of&nbsp;the&nbsp;process&nbsp;subscribing.&nbsp;Am&nbsp;I&nbsp;correct&nbsp;to&nbsp;assume&nbsp;because&nbsp;of&nbsp;this&nbsp;that&nbsp;the&nbsp;basic.consume&nbsp;method&nbsp;can&nbsp;indeed&nbsp;be&nbsp;sent&nbsp;concurrently&nbsp;by&nbsp;different&nbsp;consumers&nbsp;on&nbsp;the&nbsp;same&nbsp;channel?&nbsp;But&nbsp;the&nbsp;basic.cancel&nbsp;operation&nbsp;does&nbsp;not&nbsp;have&nbsp;this&nbsp;property&nbsp;(specifying&nbsp;a&nbsp;PID&nbsp;in&nbsp;the&nbsp;amqp&nbsp;call)&nbsp;,&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;see,&nbsp;which&nbsp;means&nbsp;that&nbsp;a&nbsp;consumer&nbsp;cannot&nbsp;cancel&nbsp;its&nbsp;own&nbsp;subscription&nbsp;without&nbsp;potentially&nbsp;clashing&nbsp;with&nbsp;other&nbsp;consumers&nbsp;that&nbsp;are&nbsp;canceling.&lt;br&gt;<br>
&lt;br&gt;So&nbsp;I&nbsp;will&nbsp;change&nbsp;the&nbsp;code&nbsp;back&nbsp;so&nbsp;that&nbsp;everything&nbsp;OTHER&nbsp;than&nbsp;basic.consume&nbsp;and&nbsp;basic.cancel&nbsp;is&nbsp;done&nbsp;within&nbsp;a&nbsp;single&nbsp;process,&nbsp;and&nbsp;take&nbsp;it&nbsp;from&nbsp;there.&lt;br&gt;&lt;br&gt;I&nbsp;think&nbsp;this&nbsp;has,&nbsp;however,&nbsp;shed&nbsp;some&nbsp;light&nbsp;on&nbsp;what&nbsp;might&nbsp;have&nbsp;happened&nbsp;in&nbsp;the&nbsp;production&nbsp;code.&nbsp;&lt;b&gt;I&nbsp;am&nbsp;using&nbsp;the&nbsp;consumer&nbsp;process&nbsp;to&nbsp;unsubscribe&nbsp;itself.&lt;/b&gt;&nbsp;When&nbsp;there&nbsp;are&nbsp;many&nbsp;consumer&nbsp;processes,&nbsp;this&nbsp;could&nbsp;be&nbsp;a&nbsp;problem&nbsp;because&nbsp;I&nbsp;think&nbsp;basic.cancel&nbsp;does&nbsp;not&nbsp;allow&nbsp;you&nbsp;to&nbsp;specify&nbsp;a&nbsp;return&nbsp;pid&nbsp;and&nbsp;maybe&nbsp;this&nbsp;is&nbsp;causing&nbsp;upset&nbsp;in&nbsp;the&nbsp;channel.&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&amp;#39;basic.consume_ok&amp;#39;{consumer_tag&nbsp;=&nbsp;ConsumerTag}&nbsp;=&nbsp;amqp_channel:call(Channel,&nbsp;BasicConsume,&nbsp;&lt;b&gt;self()&lt;/b&gt;),&nbsp;%%%&nbsp;Notice&nbsp;return&nbsp;pid&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&amp;#39;basic.cancel_ok&amp;#39;{consumer_tag&nbsp;=&nbsp;ConsumerTag}&nbsp;=&nbsp;amqp_channel:call(Channel,&nbsp;BasicCancel),&nbsp;%%%&nbsp;Notice&nbsp;-&nbsp;no&nbsp;return&nbsp;pid&lt;br&gt;<br>
&lt;br&gt;So&nbsp;maybe&nbsp;this&nbsp;should&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;handling&nbsp;of&nbsp;basic.cancel?&nbsp;Why&nbsp;shouldn&amp;#39;t&nbsp;a&nbsp;consumer&nbsp;cancel&nbsp;itself?&nbsp;In&nbsp;fact,&nbsp;why&nbsp;can&amp;#39;t&nbsp;all&nbsp;client&nbsp;channel&nbsp;calls&nbsp;specify&nbsp;which&nbsp;PID&nbsp;is&nbsp;calling?&lt;br&gt;&lt;br&gt;One&nbsp;other&nbsp;source&nbsp;of&nbsp;confusion&nbsp;for&nbsp;me&nbsp;is&nbsp;this:&nbsp;when&nbsp;sending&nbsp;an&nbsp;amqp_channel:basic.consume&nbsp;call,&nbsp;why&nbsp;is&nbsp;there&nbsp;both&nbsp;a&nbsp;synchronous&nbsp;response&nbsp;to&nbsp;the&nbsp;call&nbsp;itself&nbsp;and&nbsp;an&nbsp;asynchronous&nbsp;response&nbsp;on&nbsp;the&nbsp;channel?&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&amp;#39;basic.consume_ok&amp;#39;{consumer_tag&nbsp;=&nbsp;ConsumerTag}&nbsp;=&nbsp;amqp_channel:call(Channel,&nbsp;BasicConsume,&nbsp;self()),&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;receive&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&amp;#39;basic.consume_ok&amp;#39;{consumer_tag&nbsp;=&nbsp;ConsumerTag}&nbsp;-&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;io:format(&amp;quot;[~p]&nbsp;~p&nbsp;got&nbsp;consume_ok~n&amp;quot;,&nbsp;[self(),&nbsp;BasicConsume#&amp;#39;basic.consume&amp;#39;.consumer_tag])&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;end.&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;your&nbsp;help&nbsp;again.&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;Edwin&nbsp;Fine&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;May&nbsp;8,&nbsp;2008&nbsp;at&nbsp;7:39&nbsp;AM,&nbsp;Ben&nbsp;Hood&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&nbsp;style=&quot;&quot;&gt;Ed,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;may&nbsp;want&nbsp;to&nbsp;hang&nbsp;on&nbsp;a&nbsp;second&nbsp;with&nbsp;implementing&nbsp;any&nbsp;of&nbsp;the&nbsp;described&nbsp;workarounds&nbsp;because&nbsp;I&amp;#39;ve&nbsp;had&nbsp;thought&nbsp;of&nbsp;how&nbsp;to&nbsp;solve&nbsp;this&nbsp;in&nbsp;the&nbsp;client,&nbsp;but&nbsp;I&nbsp;want&nbsp;to&nbsp;run&nbsp;it&nbsp;past&nbsp;the&nbsp;Rabbit&nbsp;dev&nbsp;list&nbsp;first.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTH,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ben&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;Begin&nbsp;forwarded&nbsp;message:&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&quot;&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;&lt;b&gt;From:&nbsp;&lt;/b&gt;&lt;/font&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;Ben&nbsp;Hood&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&quot;&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;&lt;b&gt;Date:&nbsp;&lt;/b&gt;&lt;/font&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;8&nbsp;May&nbsp;2008&nbsp;11:07:05&nbsp;BST&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&quot;&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;&lt;b&gt;To:&nbsp;&lt;/b&gt;&lt;/font&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&quot;&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;&lt;b&gt;Cc:&nbsp;&lt;/b&gt;&lt;/font&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;Edwin&nbsp;Fine&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss_efine@usa.net&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss_efine@usa.net&lt;/a&gt;&amp;gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&quot;&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;&lt;b&gt;Subject:&nbsp;&lt;/b&gt;&lt;/font&gt;&lt;font&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;normal;&nbsp;font-size-adjust:&nbsp;none;&nbsp;font-stretch:&nbsp;normal;&quot;&nbsp;face=&quot;Helvetica&quot;&nbsp;size=&quot;3&quot;&gt;&lt;b&gt;Re:&nbsp;[rabbitmq-discuss]&nbsp;Channel&nbsp;crashes&nbsp;after&nbsp;basic.cancel_ok.&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;min-height:&nbsp;14px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;div&nbsp;style=&quot;&quot;&gt;&lt;div&gt;Ed,&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;8&nbsp;May&nbsp;2008,&nbsp;at&nbsp;06:13,&nbsp;Edwin&nbsp;Fine&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;Well,&nbsp;I&nbsp;have&nbsp;put&nbsp;most&nbsp;of&nbsp;the&nbsp;code&nbsp;I&nbsp;am&nbsp;using&nbsp;into&nbsp;a&nbsp;test&nbsp;program&nbsp;(two&nbsp;modules).&nbsp;This&nbsp;code&nbsp;is&nbsp;not&nbsp;for&nbsp;the&nbsp;mailing&nbsp;list&amp;#39;s&nbsp;consumption,&nbsp;if&nbsp;that&amp;#39;s&nbsp;ok&nbsp;with&nbsp;you.&nbsp;The&nbsp;problem&nbsp;is,&nbsp;I&nbsp;can&amp;#39;t&nbsp;even&nbsp;make&nbsp;the&nbsp;code&nbsp;work&nbsp;for&nbsp;more&nbsp;than&nbsp;1&nbsp;consumer&nbsp;and&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;why.&nbsp;I&nbsp;think&nbsp;I&nbsp;am&nbsp;too&nbsp;tired.&nbsp;In&nbsp;any&nbsp;case,&nbsp;the&nbsp;two&nbsp;modules&nbsp;included&nbsp;are:&lt;br&gt;<br>
&nbsp;&lt;ul&gt;&lt;li&gt;rabbit_chan_crash.erl&nbsp;-&nbsp;The&nbsp;actual&nbsp;test&nbsp;program,&nbsp;which&nbsp;contains&nbsp;most&nbsp;of&nbsp;the&nbsp;Rabbit-related&nbsp;working&nbsp;code;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;I&amp;#39;ve&nbsp;run&nbsp;you&nbsp;code.&nbsp;The&nbsp;problem&nbsp;that&nbsp;that&nbsp;you&nbsp;are&nbsp;executing&nbsp;synchronous&nbsp;RPCs&nbsp;on&nbsp;the&nbsp;same&nbsp;channel&nbsp;concurrently,&nbsp;which&nbsp;doesn&amp;#39;t&nbsp;work,&nbsp;because&nbsp;the&nbsp;protocol&nbsp;flow&nbsp;stipulates&nbsp;that&nbsp;a&nbsp;client&nbsp;performs&nbsp;a&nbsp;blocking&nbsp;receive&nbsp;for&nbsp;synchronous&nbsp;commands&nbsp;within&nbsp;a&nbsp;channel.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;By&nbsp;doing&nbsp;this&nbsp;though,&nbsp;you&nbsp;have&nbsp;uncovered&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;synchronous&nbsp;RPC&nbsp;handling&nbsp;code&nbsp;in&nbsp;the&nbsp;client&nbsp;that&nbsp;doesn&amp;#39;t&nbsp;protect&nbsp;against&nbsp;this&nbsp;properly.&nbsp;So&nbsp;I&amp;#39;ve&nbsp;fixed&nbsp;this&nbsp;bug&nbsp;and&nbsp;will&nbsp;send&nbsp;it&nbsp;down&nbsp;to&nbsp;the&nbsp;repository.&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;will&nbsp;not&nbsp;solve&nbsp;your&nbsp;problem,&nbsp;it&nbsp;will&nbsp;just&nbsp;make&nbsp;a&nbsp;clearer&nbsp;indication&nbsp;of&nbsp;what&nbsp;went&nbsp;wrong.&nbsp;When&nbsp;designing&nbsp;the&nbsp;client,&nbsp;we&nbsp;deliberated&nbsp;whether&nbsp;the&nbsp;client&nbsp;channel&nbsp;module&nbsp;should&nbsp;contain&nbsp;the&nbsp;intelligence&nbsp;to&nbsp;queue&nbsp;up&nbsp;pending&nbsp;RPC&nbsp;requests&nbsp;in&nbsp;order&nbsp;to&nbsp;accept&nbsp;concurrent&nbsp;requests&nbsp;from&nbsp;user&nbsp;code&nbsp;and&nbsp;essentially&nbsp;serialize&nbsp;their&nbsp;dispatch&nbsp;to&nbsp;the&nbsp;server.&amp;nbsp;Initially,&nbsp;we&nbsp;decided&nbsp;against&nbsp;this&nbsp;approach&nbsp;because&nbsp;of&nbsp;the&nbsp;complexity&nbsp;it&nbsp;introduces.&nbsp;In&nbsp;general,&nbsp;queue&nbsp;declaration&nbsp;and&nbsp;binding&nbsp;is&nbsp;an&nbsp;operation&nbsp;that&nbsp;you&nbsp;don&amp;#39;t&nbsp;need&nbsp;to&nbsp;perform&nbsp;concurrently&nbsp;per&nbsp;channel.&nbsp;While&nbsp;I&nbsp;think&nbsp;that&nbsp;this&nbsp;view&nbsp;is&nbsp;still&nbsp;valid,&nbsp;your&nbsp;use&nbsp;case&nbsp;may&nbsp;provide&nbsp;some&nbsp;food&nbsp;for&nbsp;thought.&nbsp;Thoughts&nbsp;anyone?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;solve&nbsp;your&nbsp;problem,&nbsp;you&nbsp;can&nbsp;do&nbsp;one&nbsp;of&nbsp;a&nbsp;few&nbsp;things:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;Refactor&nbsp;your&nbsp;code&nbsp;so&nbsp;that&nbsp;synchronous&nbsp;RPCs&nbsp;are&nbsp;not&nbsp;executed&nbsp;in&nbsp;parallel&nbsp;(e.g.&nbsp;QueueDeclare,&nbsp;QueueBind,&nbsp;etc)&nbsp;within&nbsp;one&nbsp;channel&nbsp;process;&lt;/div&gt;<br>
&lt;div&gt;2.&nbsp;Manage&nbsp;by&nbsp;exception&nbsp;-&nbsp;catch&nbsp;an&amp;nbsp;illegal_pending_rpc&nbsp;error&nbsp;(which&nbsp;is&nbsp;the&nbsp;bug&nbsp;fix&nbsp;I&nbsp;just&nbsp;put&nbsp;in)&nbsp;and&nbsp;resend&nbsp;the&nbsp;request;&lt;/div&gt;&lt;div&gt;3.&nbsp;Use&nbsp;more&nbsp;channel&nbsp;processes&nbsp;-&nbsp;this&nbsp;*may*&nbsp;be&nbsp;a&nbsp;bit&nbsp;heavy&nbsp;weight&nbsp;for&nbsp;the&nbsp;TCP&nbsp;client,&nbsp;this&nbsp;is&nbsp;better&nbsp;suited&nbsp;to&nbsp;the&nbsp;direct&nbsp;client.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;want&nbsp;to&nbsp;go&nbsp;down&nbsp;route&nbsp;2,&nbsp;let&nbsp;me&nbsp;know&nbsp;because&nbsp;we&amp;#39;re&nbsp;currently&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;moving&nbsp;the&nbsp;source&nbsp;code&nbsp;from&nbsp;monotone&nbsp;to&nbsp;mercurial.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;BTW,&nbsp;I&nbsp;see&nbsp;that&nbsp;you&amp;#39;ve&nbsp;made&nbsp;a&nbsp;local&nbsp;modification&nbsp;to&nbsp;the&nbsp;amqp_connection&nbsp;module&nbsp;to&nbsp;export&nbsp;the&nbsp;start/4&nbsp;function&nbsp;which&nbsp;allows&nbsp;the&nbsp;caller&nbsp;to&nbsp;specify&nbsp;a&nbsp;virtual&nbsp;host.&nbsp;This&nbsp;is&nbsp;probably&nbsp;a&nbsp;good&nbsp;idea&nbsp;and&nbsp;we&nbsp;may&nbsp;incorporate&nbsp;this&nbsp;into&nbsp;the&nbsp;API.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;span&gt;rbmq_admin.erl&nbsp;-&nbsp;An&nbsp;interface&nbsp;to&nbsp;the&nbsp;admin&nbsp;part&nbsp;of&nbsp;Rabbit&nbsp;that&nbsp;I&nbsp;wrote&nbsp;because&nbsp;I&nbsp;wanted&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;create&nbsp;exchanges,&nbsp;users,&nbsp;etc&nbsp;from&nbsp;within&nbsp;Erlang&nbsp;instead&nbsp;of&nbsp;the&nbsp;command&nbsp;line.&nbsp;Feel&nbsp;free&nbsp;to&nbsp;use&nbsp;this&nbsp;if&nbsp;you&nbsp;think&nbsp;it&amp;#39;s&nbsp;of&nbsp;any&nbsp;use,&nbsp;or&nbsp;improve&nbsp;it&nbsp;-&nbsp;feedback&nbsp;welcome.&nbsp;Actually,&nbsp;at&nbsp;some&nbsp;point&nbsp;I&nbsp;want&nbsp;to&nbsp;write&nbsp;a&nbsp;full&nbsp;Web&nbsp;admin&nbsp;interface&nbsp;for&nbsp;Rabbit.&nbsp;Real&nbsp;Soon&nbsp;Now.&lt;/span&gt;&lt;/li&gt;<br>
&lt;/ul&gt;&lt;/blockquote&gt;&lt;div&gt;Glad&nbsp;you&amp;#39;ve&nbsp;mentioned&nbsp;this&nbsp;topic.&nbsp;I&amp;#39;ve&nbsp;done&nbsp;some&nbsp;initial&nbsp;work&nbsp;of&nbsp;doing&nbsp;some&nbsp;remote&nbsp;management&nbsp;of&nbsp;Rabbit,&nbsp;if&nbsp;and&nbsp;when&nbsp;you&nbsp;actually&nbsp;want&nbsp;to&nbsp;get&nbsp;going,&nbsp;it&nbsp;will&nbsp;probably&nbsp;be&nbsp;a&nbsp;good&nbsp;idea&nbsp;to&nbsp;start&nbsp;a&amp;nbsp;separate&nbsp;discussion&nbsp;thread&nbsp;on&nbsp;this&nbsp;one.&nbsp;There&nbsp;are&nbsp;many&nbsp;design&nbsp;issues&nbsp;that&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;discussed,&nbsp;most&nbsp;importantly&nbsp;dependencies&nbsp;that&nbsp;may&nbsp;arise.&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;To&nbsp;compile&nbsp;you&nbsp;will&nbsp;need&nbsp;all&nbsp;the&nbsp;usual&nbsp;RabbitMQ&nbsp;paths,&nbsp;and&nbsp;the&nbsp;Erlang&nbsp;client&nbsp;of&nbsp;course.&nbsp;You&nbsp;will&nbsp;also&nbsp;need&nbsp;.erlang.cookie&nbsp;or&nbsp;setcookie&nbsp;with&nbsp;your&nbsp;Rabbit&amp;#39;s&nbsp;cookie.&nbsp;I&nbsp;am&nbsp;pretty&nbsp;sure&nbsp;there&nbsp;are&nbsp;no&nbsp;external&nbsp;dependencies&nbsp;other&nbsp;than&nbsp;Rabbit&nbsp;and&nbsp;Erlang.&lt;br&gt;<br>
&nbsp;&lt;br&gt;To&nbsp;run&nbsp;is&nbsp;simple&nbsp;(but&nbsp;please&nbsp;note&nbsp;that&nbsp;the&nbsp;code&nbsp;will&nbsp;try&nbsp;to&nbsp;create&nbsp;a&nbsp;user&nbsp;named&nbsp;emf_test,&nbsp;and&nbsp;an&nbsp;exchange&nbsp;and&nbsp;a&nbsp;bunch&nbsp;of&nbsp;queues).&nbsp;Feel&nbsp;free&nbsp;to&nbsp;hack&nbsp;into&nbsp;shape&nbsp;if&nbsp;you&nbsp;have&nbsp;the&nbsp;time&nbsp;and&nbsp;interest.&nbsp;Tomorrow&nbsp;I&nbsp;will&nbsp;try&nbsp;to&nbsp;run&nbsp;Rabbit&nbsp;and&nbsp;my&nbsp;code&nbsp;co-located.&lt;br&gt;<br>
&nbsp;&lt;br&gt;&amp;gt;rabbit_chan_crash:go(rabbit@mynode,&nbsp;NumConsumers,&nbsp;NumMsgsPerSec).&lt;br&gt;&amp;gt;rabbit_chan_crash:stop().&nbsp;%&nbsp;If&nbsp;you&nbsp;can&nbsp;even&nbsp;read&nbsp;the&nbsp;screen&nbsp;to&nbsp;type&nbsp;this&nbsp;in&nbsp;:)&lt;br&gt;&lt;br&gt;When&nbsp;I&nbsp;use&nbsp;rabbit_chan_crash:go(rabbit@mynode,&nbsp;1,&nbsp;10)&nbsp;it&amp;#39;s&nbsp;all&nbsp;good.&lt;br&gt;<br>
&nbsp;When&nbsp;I&nbsp;use&nbsp;rabbit_chan_crash:go(rabbit@mynode,&nbsp;2,&nbsp;10)&nbsp;it&amp;#39;s&nbsp;all&nbsp;bad.&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong,&nbsp;but&nbsp;my&nbsp;other&nbsp;code&nbsp;works&nbsp;(each&nbsp;consumer&nbsp;is&nbsp;in&nbsp;its&nbsp;own&nbsp;gen_event&nbsp;server,&nbsp;which&nbsp;is&nbsp;probably&nbsp;why.&nbsp;I&nbsp;think&nbsp;I&nbsp;am&nbsp;getting&nbsp;messages&nbsp;in&nbsp;the&nbsp;wrong&nbsp;message&nbsp;queues&nbsp;due&nbsp;to&nbsp;my&nbsp;lack&nbsp;of&nbsp;Erlang&nbsp;experience.&nbsp;And&nbsp;I&nbsp;am&nbsp;tired,&nbsp;too).&lt;br&gt;<br>
&nbsp;&lt;br&gt;Anyway&nbsp;I&nbsp;have&nbsp;included&nbsp;the&nbsp;&amp;quot;bad&amp;quot;&nbsp;output.&lt;br&gt;&lt;br&gt;If&nbsp;you&nbsp;have&nbsp;any&nbsp;luck&nbsp;please&nbsp;let&nbsp;me&nbsp;know.&nbsp;Feedback&nbsp;welcome,&nbsp;too.&lt;br&gt;&lt;br&gt;&nbsp;Regards,&lt;br&gt;&nbsp;Ed&lt;br&gt;&nbsp;&lt;br&gt;(xhg@ender)3&amp;gt;&nbsp;rabbit_chan_crash:go(rabbit@ender,2,10).&lt;br&gt;Setting&nbsp;up&nbsp;channel&nbsp;on&nbsp;realm&nbsp;&amp;lt;&amp;lt;&amp;quot;/data&amp;quot;&amp;gt;&amp;gt;&nbsp;for&nbsp;connection&nbsp;{&amp;lt;0.60.0&amp;gt;,network}&lt;br&gt;<br>
Access&nbsp;granted&nbsp;for&nbsp;channel&nbsp;&amp;lt;0.65.0&amp;gt;&nbsp;on&nbsp;realm&nbsp;&amp;lt;&amp;lt;&amp;quot;/data&amp;quot;&amp;gt;&amp;gt;&nbsp;for&nbsp;connection&nbsp;{&amp;lt;0.60.0&amp;gt;,&lt;br&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;network}&lt;br&gt;Declaring&nbsp;exchange&nbsp;&amp;lt;&amp;lt;&amp;quot;emf_test&amp;quot;&amp;gt;&amp;gt;&nbsp;using&nbsp;ticket&nbsp;101&lt;br&gt;<br>
Declared&nbsp;exchange&nbsp;&amp;lt;&amp;lt;&amp;quot;emf_test&amp;quot;&amp;gt;&amp;gt;&nbsp;using&nbsp;ticket&nbsp;101&lt;br&gt;&nbsp;Declaring&nbsp;queue&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.1&amp;quot;&amp;gt;&amp;gt;&lt;br&gt;Declared&nbsp;queue&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.1&amp;quot;&amp;gt;&amp;gt;,&nbsp;msgc&nbsp;=&nbsp;0,&nbsp;cons_c&nbsp;=&nbsp;0&lt;br&gt;Declaring&nbsp;queue&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;&lt;br&gt;<br>
Declared&nbsp;queue&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;,&nbsp;msgc&nbsp;=&nbsp;0,&nbsp;cons_c&nbsp;=&nbsp;0&lt;br&gt;&nbsp;Environment&nbsp;setup&nbsp;complete,&nbsp;rmq_state&nbsp;=&lt;br&gt;{rmq_state,&amp;quot;guest&amp;quot;,&amp;quot;guest&amp;quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&amp;lt;0.60.0&amp;gt;,network},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;0.65.0&amp;gt;,101,&amp;lt;&amp;lt;&amp;quot;emf_test&amp;quot;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&amp;quot;/data&amp;quot;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&amp;quot;/emf_test&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;<br>
&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;rabbit@ender,2}&lt;br&gt;Consumers&nbsp;started:&nbsp;[&amp;lt;0.69.0&amp;gt;,&amp;lt;0.70.0&amp;gt;]&lt;br&gt;[&amp;lt;0.69.0&amp;gt;]&nbsp;Started&nbsp;consumer&nbsp;tag&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.1&amp;quot;&amp;gt;&amp;gt;&nbsp;for&nbsp;existing&nbsp;channel/ticket/queue&nbsp;&amp;lt;0.65.0&amp;gt;/101/&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.1&amp;quot;&amp;gt;&amp;gt;&lt;br&gt;<br>
&nbsp;[&amp;lt;0.70.0&amp;gt;]&nbsp;Started&nbsp;consumer&nbsp;tag&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;&nbsp;for&nbsp;existing&nbsp;channel/ticket/queue&nbsp;&amp;lt;0.65.0&amp;gt;/101/&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;&lt;br&gt;&amp;lt;0.68.0&amp;gt;&lt;br&gt;Producer&nbsp;started:&nbsp;&amp;lt;0.71.0&amp;gt;&lt;br&gt;<br>
&nbsp;Binding&nbsp;queue&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.1&amp;quot;&amp;gt;&amp;gt;,&nbsp;ticket&nbsp;101,&nbsp;exchange&nbsp;&amp;lt;&amp;lt;&amp;quot;emf_test&amp;quot;&amp;gt;&amp;gt;,&nbsp;routing&nbsp;key&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.1&amp;quot;&amp;gt;&amp;gt;&lt;br&gt;Binding&nbsp;queue&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;,&nbsp;ticket&nbsp;101,&nbsp;exchange&nbsp;&amp;lt;&amp;lt;&amp;quot;emf_test&amp;quot;&amp;gt;&amp;gt;,&nbsp;routing&nbsp;key&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;&lt;br&gt;<br>
&nbsp;Bound&nbsp;queue&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;&nbsp;to&nbsp;exchange&nbsp;&amp;lt;&amp;lt;&amp;quot;emf_test&amp;quot;&amp;gt;&amp;gt;&lt;br&gt;Subscribing&nbsp;consumer&nbsp;&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;&nbsp;to&nbsp;channel&nbsp;&amp;lt;0.65.0&amp;gt;&lt;br&gt;(xhg@ender)4&amp;gt;&nbsp;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;8-May-2008::00:57:23&nbsp;===&lt;br&gt;<br>
&nbsp;**&nbsp;Generic&nbsp;server&nbsp;&amp;lt;0.65.0&amp;gt;&nbsp;terminating&nbsp;&lt;br&gt;**&nbsp;Last&nbsp;message&nbsp;in&nbsp;was&nbsp;{method,{&amp;#39;basic.consume_ok&amp;#39;,&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;},none}&lt;br&gt;**&nbsp;When&nbsp;Server&nbsp;state&nbsp;==&nbsp;{channel_state,1,&amp;lt;0.60.0&amp;gt;,&amp;lt;0.62.0&amp;gt;,&amp;lt;0.66.0&amp;gt;,&lt;br&gt;<br>
&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#Fun&amp;lt;amqp_network_driver.do.2&amp;gt;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#Fun&amp;lt;amqp_network_driver.do.3&amp;gt;,&amp;lt;&amp;lt;&amp;gt;&amp;gt;,&amp;lt;0.70.0&amp;gt;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;false,undefined,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;<br>
&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[]},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[],[]}}}}&lt;br&gt;<br>
&nbsp;**&nbsp;Reason&nbsp;for&nbsp;termination&nbsp;==&nbsp;&lt;br&gt;**&nbsp;{function_clause,[{gen_server,reply,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[&amp;lt;&amp;lt;&amp;gt;&amp;gt;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{&amp;#39;basic.consume_ok&amp;#39;,&amp;lt;&amp;lt;&amp;quot;EMF_TEST_Q.2&amp;quot;&amp;gt;&amp;gt;}]},&lt;br&gt;<br>
&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{amqp_channel,rpc_bottom_half,2},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{amqp_channel,handle_method,2},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{gen_server,handle_msg,5},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{proc_lib,init_p,5}]}&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;8-May-2008::00:57:23&nbsp;===&lt;br&gt;<br>
&nbsp;Error&nbsp;in&nbsp;process&nbsp;&amp;lt;0.70.0&amp;gt;&nbsp;on&nbsp;node&nbsp;&amp;#39;xhg@ender&amp;#39;&nbsp;with&nbsp;exit&nbsp;value:&nbsp;{{badmatch,{&amp;#39;queue.bind_ok&amp;#39;}},[{rabbit_chan_crash,subscribe,2},{rabbit_chan_crash,consumer,5}]}&lt;br&gt;---------&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTH,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ben&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;PS&nbsp;I&amp;#39;m&nbsp;attaching&nbsp;your&nbsp;code&nbsp;to&nbsp;the&nbsp;list&nbsp;for&nbsp;reference.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;div&nbsp;style=&quot;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
