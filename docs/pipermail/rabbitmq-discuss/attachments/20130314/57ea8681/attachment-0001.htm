<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/3/14&nbsp;Chris&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:stuff@moesel.net&quot;&nbsp;target=&quot;_blank&quot;&gt;stuff@moesel.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&gt;First,&nbsp;the&nbsp;non-node-specific&nbsp;question:&nbsp; Does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;pointers&nbsp;on&nbsp;how&nbsp;to&nbsp;debug&nbsp;such&nbsp;an&nbsp;issue?&nbsp; I&amp;#39;ve&nbsp;already&nbsp;looked&nbsp;at&nbsp;logs&nbsp;and&nbsp;found&nbsp;which&nbsp;channel&nbsp;is&nbsp;the&nbsp;problem--&nbsp;but&nbsp;if&nbsp;I&nbsp;comment&nbsp;out&nbsp;the&nbsp;code&nbsp;that&nbsp;creates&nbsp;that&nbsp;channel,&nbsp;then&nbsp;it&nbsp;just&nbsp;fails&nbsp;on&nbsp;a&nbsp;different&nbsp;channel&nbsp;the&nbsp;next&nbsp;time&nbsp;(btw--&nbsp;you&nbsp;don&amp;#39;t&nbsp;explicitly&nbsp;create&nbsp;channels&nbsp;in&nbsp;node-amqp,&nbsp;they&nbsp;are&nbsp;created&nbsp;for&nbsp;you&nbsp;when&nbsp;you&nbsp;subscribe&nbsp;to&nbsp;queues,&nbsp;declare&nbsp;exchanges,&nbsp;etc.).&lt;/div&gt;<br>
<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Using&nbsp;Wireshark&nbsp;or&nbsp;RabbitMQ&nbsp;tracer&nbsp;[1].&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;the&nbsp;more&nbsp;node-specific&nbsp;question:&nbsp; RabbitMQ&nbsp;docs&nbsp;seem&nbsp;to&nbsp;indicate&nbsp;it&nbsp;is&nbsp;usually&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;client&nbsp;(node-amqp&nbsp;in&nbsp;our&nbsp;case),&nbsp;but&nbsp;I&nbsp;wonder&nbsp;if&nbsp;perhaps&nbsp;we&nbsp;are&nbsp;making&nbsp;some&nbsp;newbie&nbsp;node-amqp&nbsp;mistake&nbsp;that&nbsp;might&nbsp;lead&nbsp;to&nbsp;this&nbsp;503&nbsp;error?&nbsp; Is&nbsp;there&nbsp;anyone&nbsp;with&nbsp;node-amqp&nbsp;experience&nbsp;that&nbsp;has&nbsp;been&nbsp;through&nbsp;this&nbsp;before?&lt;/div&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;This&nbsp;issue&nbsp;indicates&nbsp;a&nbsp;race&nbsp;condition&nbsp;when&nbsp;a&nbsp;library&nbsp;assumes&nbsp;it&nbsp;need&nbsp;to&nbsp;automatically&nbsp;open&nbsp;a&nbsp;channel&nbsp;after&nbsp;channel.open&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;has&nbsp;been&nbsp;sent.&nbsp;Or&nbsp;it&nbsp;may&nbsp;be&nbsp;because&nbsp;channel&nbsp;ids&nbsp;are&nbsp;not&nbsp;incremented&nbsp;properly&nbsp;in&nbsp;the&nbsp;client&nbsp;so&nbsp;two&nbsp;channels&nbsp;end&nbsp;up&lt;/div&gt;<br>
<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&nbsp;style&gt;having&nbsp;the&nbsp;same&nbsp;id.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Finally,&nbsp;race&nbsp;conditions&nbsp;can&nbsp;originate&nbsp;in&nbsp;your&nbsp;own&nbsp;code&nbsp;but&nbsp;it&amp;#39;s&nbsp;impossible&nbsp;to&nbsp;tell&nbsp;without&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
<br>
seeing&nbsp;the&nbsp;code.&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&nbsp;style&gt;1.&nbsp;See&nbsp;at&nbsp;the&nbsp;bottom&nbsp;of &lt;a&nbsp;href=&quot;http://www.rabbitmq.com/api-guide.html&quot;&gt;http://www.rabbitmq.com/api-guide.html&lt;/a&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;MK&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://github.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;a&nbsp;href=&quot;http://twitter.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
