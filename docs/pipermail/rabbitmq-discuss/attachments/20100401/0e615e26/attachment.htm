<tt>
&lt;div&gt;Wondering&nbsp;why&nbsp;this&nbsp;crashes&nbsp;when&nbsp;vm_memory_high_watermark&nbsp;is&nbsp;set?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;message&nbsp;&amp;quot;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:935,079,976&nbsp;allowed:858,993,459&amp;quot;&nbsp;is&nbsp;rather&nbsp;intriguing,&nbsp;or&nbsp;am&nbsp;I&nbsp;missing&nbsp;something?&nbsp;(The&nbsp;commas&nbsp;were&nbsp;inserted&nbsp;by&nbsp;me&nbsp;in&nbsp;order&nbsp;to&nbsp;make&nbsp;the&nbsp;number&nbsp;more&nbsp;legible.)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Environment:&lt;/div&gt;&lt;ul&gt;&lt;li&gt;Windows&nbsp;7&nbsp;X64&nbsp;(4GB&nbsp;memory)&lt;/li&gt;&lt;li&gt;RabbitMQ&nbsp;1.7.2&lt;/li&gt;&lt;li&gt;Erlang&nbsp;R13B04&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;rabbitmq.config&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;webkit-indent-blockquote&quot;&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;[&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;  {rabbit,&nbsp;[{vm_memory_high_watermark,&nbsp;0.4}]},&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;  {rabbit,&nbsp;[{memory_alarms,&nbsp;true}]},&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;  {mnesia,&nbsp;[{dump_log_write_threshold,&nbsp;1000}]},&lt;/div&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;div&gt;  {rabbit,&nbsp;[]}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;].&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Running&nbsp;these&nbsp;two&nbsp;clients:&lt;/div&gt;<br>
&lt;div&gt;&lt;ul&gt;&lt;li&gt;MulticastMain&nbsp;-y&nbsp;0&nbsp;-s&nbsp;128&nbsp;-e&nbsp;e&nbsp;-t&nbsp;fanout&nbsp;-r&nbsp;1100&nbsp;-f&nbsp;persistent&lt;/li&gt;&lt;li&gt;MulticastMain&nbsp;-x&nbsp;0&nbsp;-e&nbsp;e&nbsp;-t&nbsp;fanout&nbsp;-y&nbsp;10&nbsp;-n&nbsp;500&nbsp;-q&nbsp;1000&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;The&nbsp;broker&nbsp;crashed&nbsp;with:&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;webkit-indent-blockquote&quot;&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;div&gt;Thu&nbsp;Apr&nbsp;01&nbsp;15:22:19&nbsp;2010&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Slogan:&nbsp;eheap_alloc:&nbsp;Cannot&nbsp;allocate&nbsp;153052320&nbsp;bytes&nbsp;of&nbsp;memory&nbsp;(of&nbsp;type&nbsp;&amp;quot;heap&amp;quot;).&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;System&nbsp;version:&nbsp;Erlang&nbsp;R13B04&nbsp;(erts-5.7.5)&nbsp;[smp:2:2]&nbsp;[rq:2]&nbsp;[async-threads:30]&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Compiled:&nbsp;Mon&nbsp;Feb&nbsp;22&nbsp;20:02:36&nbsp;2010&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---&nbsp;this&nbsp;is&nbsp;the&nbsp;log&nbsp;file&nbsp;---&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:15:04&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;Memory&nbsp;limit&nbsp;set&nbsp;to&nbsp;819MB.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:15:04&nbsp;===&lt;/div&gt;&lt;div&gt;disk_log:&nbsp;repairing&nbsp;&amp;quot;c:/AMQP/RabbitMQ/rabbitmq_server-1.7.2/db/BIGPOOH-mnesia/ra&lt;/div&gt;&lt;div&gt;bbit_persister.LOG&amp;quot;&nbsp;...&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:15:08&nbsp;===&lt;/div&gt;&lt;div&gt;Repaired&nbsp;persister&nbsp;log&nbsp;-&nbsp;501&nbsp;recovered,&nbsp;0&nbsp;bad&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:15:21&nbsp;===&lt;/div&gt;&lt;div&gt;Rolling&nbsp;persister&nbsp;log&nbsp;to&nbsp;&amp;quot;c:/AMQP/RabbitMQ/rabbitmq_server-1.7.2/db/BIGPOOH-mnes&lt;/div&gt;<br>
&lt;div&gt;ia/rabbit_persister.LOG.previous&amp;quot;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:15:22&nbsp;===&lt;/div&gt;&lt;div&gt;started&nbsp;TCP&nbsp;Listener&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:17:50&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37477&quot;&gt;127.0.0.1:37477&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:17:50&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.315.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37477&quot;&gt;127.0.0.1:37477&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:08&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37484&quot;&gt;127.0.0.1:37484&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:08&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.339.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37484&quot;&gt;127.0.0.1:37484&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:08&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37485&quot;&gt;127.0.0.1:37485&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:08&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.345.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37485&quot;&gt;127.0.0.1:37485&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:08&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37488&quot;&gt;127.0.0.1:37488&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:08&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.352.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37488&quot;&gt;127.0.0.1:37488&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:09&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37489&quot;&gt;127.0.0.1:37489&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:09&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.362.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37489&quot;&gt;127.0.0.1:37489&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:10&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37490&quot;&gt;127.0.0.1:37490&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:10&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.371.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37490&quot;&gt;127.0.0.1:37490&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:11&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37491&quot;&gt;127.0.0.1:37491&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:11&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.383.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37491&quot;&gt;127.0.0.1:37491&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:12&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37492&quot;&gt;127.0.0.1:37492&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:12&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.393.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37492&quot;&gt;127.0.0.1:37492&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:13&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37493&quot;&gt;127.0.0.1:37493&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:13&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.404.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37493&quot;&gt;127.0.0.1:37493&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:16&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37494&quot;&gt;127.0.0.1:37494&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:16&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.419.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37494&quot;&gt;127.0.0.1:37494&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:20&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37496&quot;&gt;127.0.0.1:37496&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:20&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.440.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:37496&quot;&gt;127.0.0.1:37496&lt;/a&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:18:37&nbsp;===&lt;/div&gt;&lt;div&gt;Rolling&nbsp;persister&nbsp;log&nbsp;to&nbsp;&amp;quot;c:/AMQP/RabbitMQ/rabbitmq_server-1.7.2/db/BIGPOOH-mnes&lt;/div&gt;<br>
&lt;div&gt;ia/rabbit_persister.LOG.previous&amp;quot;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:20:25&nbsp;===&lt;/div&gt;&lt;div&gt;Rolling&nbsp;persister&nbsp;log&nbsp;to&nbsp;&amp;quot;c:/AMQP/RabbitMQ/rabbitmq_server-1.7.2/db/BIGPOOH-mnes&lt;/div&gt;&lt;div&gt;ia/rabbit_persister.LOG.previous&amp;quot;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:21:38&nbsp;===&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:935079976&nbsp;allowed:858993459&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:21:39&nbsp;===&lt;/div&gt;&lt;div&gt;  &nbsp; alarm_handler:&nbsp;{set,{vm_memory_high_watermark,[]}}&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:21:41&nbsp;===&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:857734144&nbsp;allowed:858993459&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:21:41&nbsp;===&lt;/div&gt;&lt;div&gt;  &nbsp; alarm_handler:&nbsp;{clear,vm_memory_high_watermark}&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:21:54&nbsp;===&lt;/div&gt;&lt;div&gt;Rolling&nbsp;persister&nbsp;log&nbsp;to&nbsp;&amp;quot;c:/AMQP/RabbitMQ/rabbitmq_server-1.7.2/db/BIGPOOH-mnes&lt;/div&gt;&lt;div&gt;ia/rabbit_persister.LOG.previous&amp;quot;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:22:12&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:874137976&nbsp;allowed:858993459&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:22:12&nbsp;===&lt;/div&gt;&lt;div&gt;  &nbsp; alarm_handler:&nbsp;{set,{vm_memory_high_watermark,[]}}&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:22:15&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:829796064&nbsp;allowed:858993459&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:22:15&nbsp;===&lt;/div&gt;&lt;div&gt;  &nbsp; alarm_handler:&nbsp;{clear,vm_memory_high_watermark}&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:22:17&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:861047168&nbsp;allowed:858993459&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;1-Apr-2010::15:22:17&nbsp;===&lt;/div&gt;&lt;div&gt;  &nbsp; alarm_handler:&nbsp;{set,{vm_memory_high_watermark,[]}}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
---&nbsp;end&nbsp;of&nbsp;log&nbsp;file&nbsp;---&lt;/div&gt;&lt;div&gt;---&lt;/div&gt;&lt;/div&gt;John&nbsp;Apps&lt;br&gt;(49)&nbsp;171&nbsp;869&nbsp;1813&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
