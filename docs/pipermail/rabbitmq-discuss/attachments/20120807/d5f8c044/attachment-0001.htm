<tt>
&lt;div&gt;Hi&nbsp;Gavin, &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px&quot;&gt;<br>
&lt;span&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;everyone,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;interested&nbsp;in&nbsp;running&nbsp;pika&amp;#39;s&nbsp;IOLoop&nbsp;in&nbsp;a&nbsp;thread&nbsp;and&nbsp;I&nbsp;came&nbsp;across&nbsp;this&nbsp;code&nbsp;sample&nbsp;: &lt;a&nbsp;href=&quot;http://cms02.phys.ntu.edu.tw/tracs/env/browser/trunk/messaging/pika/mon.py&quot;&nbsp;target=&quot;_blank&quot;&gt;http://cms02.phys.ntu.edu.tw/tracs/env/browser/trunk/messaging/pika/mon.py&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;wondering&nbsp;why&nbsp;and&nbsp;what&nbsp;could&nbsp;be&nbsp;the&nbsp;advantages&nbsp;of&nbsp;wrapping&nbsp;the&nbsp;callbacks&nbsp;in&nbsp;methods&nbsp;(I&nbsp;can&nbsp;understand&nbsp;the on_exchange_declared()&nbsp;method&nbsp;that&nbsp;returns&nbsp;a&nbsp;different&nbsp;callback&nbsp;according&nbsp;to&nbsp;thread&amp;#39;s&nbsp;name)&nbsp;?&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;opposed&nbsp;to&nbsp;doing&nbsp;lambda&amp;#39;s&nbsp;for&nbsp;callbacks?&nbsp;I&amp;#39;m&nbsp;not&nbsp;sure&nbsp;of&nbsp;the&nbsp;context&nbsp;of&nbsp;what&nbsp;you&amp;#39;re&nbsp;comparing&nbsp;callback&nbsp;passing&nbsp;style&nbsp;to.&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;For&nbsp;instance,&nbsp;for&nbsp;this&nbsp;callback:&nbsp;connection.callbacks.add(0,&nbsp;&amp;#39;_on_connection_open&amp;#39;,&nbsp;self._on_connected()&nbsp;,&nbsp;one_shot=True&nbsp;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;on_connected&nbsp;callback&nbsp;function&nbsp;in&nbsp;wrapped&nbsp;in&nbsp;the&nbsp;_on_connected()&nbsp;method&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;div&gt; def&nbsp;_on_connected(self):&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;def&nbsp;on_connected(connection):&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://pika.log.info&quot;&gt;pika.log.info&lt;/a&gt;(&amp;quot;%s:&nbsp;connected&nbsp;:&nbsp;%r&nbsp;&amp;quot;&nbsp;%&nbsp;(&nbsp;self.tag&nbsp;,&nbsp;connection)&nbsp;)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;connection.channel(self._on_channel_open()&nbsp;)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.connection&nbsp;=&nbsp;connection&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;on_connected &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Why&nbsp;not: connection.callbacks.add(0,&nbsp;&amp;#39;_on_connection_open&amp;#39;,&nbsp;self.on_connected&nbsp;,&nbsp;one_shot=True&nbsp;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt; def&nbsp;on_connected(self,&nbsp;connection):&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://pika.log.info&quot;&gt;pika.log.info&lt;/a&gt;(&amp;quot;%s:&nbsp;connected&nbsp;:&nbsp;%r&nbsp;&amp;quot;&nbsp;%&nbsp;(&nbsp;self.tag&nbsp;,&nbsp;connection)&nbsp;)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;connection.channel(self._on_channel_open()&nbsp;)&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.connection&nbsp;=&nbsp;connection &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px&quot;&gt;<br>
&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Another&nbsp;question&nbsp;is&nbsp;why&nbsp;considering&nbsp;multiprocessing&nbsp;over&nbsp;threading&nbsp;in&nbsp;this&nbsp;case&nbsp;?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;IOLoop&nbsp;is&nbsp;a&nbsp;singleton&nbsp;instance&nbsp;and&nbsp;you&nbsp;will&nbsp;run&nbsp;into&nbsp;contention&nbsp;issues&nbsp;and&nbsp;non-thread&nbsp;safe&nbsp;behaviors&nbsp;in&nbsp;use&nbsp;of&nbsp;the&nbsp;IOLoop&nbsp;and&nbsp;event&nbsp;processing. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;not&nbsp;sure&nbsp;what&nbsp;threading&nbsp;buys&nbsp;you&nbsp;in&nbsp;an&nbsp;asynchronous&nbsp;event&nbsp;based&nbsp;model&nbsp;of&nbsp;processing&nbsp;but&nbsp;needless&nbsp;complexity.&lt;/div&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;goal&nbsp;is&nbsp;to&nbsp;have&nbsp;an&nbsp;AMQP&nbsp;transport&nbsp;layer&nbsp;inside&nbsp;my&nbsp;application,&nbsp;running&nbsp;&amp;quot;in&nbsp;background&amp;quot;,&nbsp;that&nbsp;handles&nbsp;incoming&nbsp;messages&nbsp;and&nbsp;put&nbsp;them&nbsp;into&nbsp;a&nbsp;python&nbsp;queue.&nbsp;I&nbsp;also&nbsp;want&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;publish&nbsp;messages&nbsp;from&nbsp;other&nbsp;threads.&lt;/div&gt;<br>
&lt;div&gt;I&amp;#39;ve&nbsp;got&nbsp;it&nbsp;to&nbsp;work&nbsp;with&nbsp;threads&nbsp;and&nbsp;python&nbsp;queues&nbsp;in&nbsp;a&nbsp;thread-safe&nbsp;way.&nbsp;I&nbsp;was&nbsp;wondering&nbsp;what&nbsp;could&nbsp;be&nbsp;the&nbsp;benefits&nbsp;for&nbsp;me&nbsp;to&nbsp;use&nbsp;multiprocessing&nbsp;over&nbsp;threading.&lt;/div&gt;&lt;/div&gt;<br>

</tt>
