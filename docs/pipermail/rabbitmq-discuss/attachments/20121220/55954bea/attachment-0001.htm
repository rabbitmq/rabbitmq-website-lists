<tt>
&lt;p&gt;I&nbsp;need&nbsp;to&nbsp;write&nbsp;an&nbsp;exception&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;a&nbsp;broker&nbsp;shutdown&nbsp;to&nbsp;end&nbsp;my&nbsp;programs&nbsp;gracefully&lt;/p&gt;&lt;p&gt;In&nbsp;the&nbsp;Sender,&nbsp;I&nbsp;used&nbsp;the&nbsp;following&nbsp;code&nbsp;successfully:&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;(&nbsp;numMsgs&nbsp;&amp;lt;&nbsp;maxMsgs&nbsp;)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;try&nbsp;{&nbsp;channel.basicPublish(&nbsp;exchange,&nbsp;queueName,&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;(persistEnabled)&nbsp;?&nbsp;MessageProperties.PERSISTENT_TEXT_PLAIN&nbsp;:&nbsp;null,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;message.getBytes());&nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;catch&nbsp;(Exception&nbsp;ex)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.out.println(&quot;---&nbsp;Connection&nbsp;Broken&nbsp;---&quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&lt;br&gt;This&nbsp;catches&nbsp;the&nbsp;IOException&nbsp;and&nbsp;termiates&nbsp;gracefully&nbsp;on&nbsp;the&nbsp;Sender.&lt;br&gt;I&nbsp;can&nbsp;NOT&nbsp;do&nbsp;this&nbsp;on&nbsp;the&nbsp;consumer,&nbsp;where&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;error&nbsp;once&nbsp;the&nbsp;broker&nbsp;is&nbsp;shut&nbsp;down&lt;br&gt;I&nbsp;do&nbsp;not&nbsp;seem&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;catch&nbsp;the&nbsp;problem&nbsp;of&nbsp;the&nbsp;broker&nbsp;coming&nbsp;down&nbsp;in&nbsp;&lt;br&gt;the&nbsp;consumer.&amp;nbsp;&nbsp;I&nbsp;use&nbsp;the&nbsp;following&nbsp;code&nbsp;on&nbsp;the&nbsp;nextDelivery&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;catch&nbsp;(ShutdownSignalException&nbsp;ex)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.out.println(&quot;---&nbsp;Broker&nbsp;Shut&nbsp;Down&nbsp;---&quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;catch&nbsp;(Exception&nbsp;ex)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;System.out.println(&quot;---&nbsp;Broker&nbsp;Shut&nbsp;Down&nbsp;---&quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&lt;br&gt;But&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;error:&lt;br&gt;&amp;nbsp;&lt;br&gt;Exception&nbsp;in&nbsp;thread&nbsp;&quot;main&quot;&nbsp;com.rabbitmq.client.ShutdownSignalException:&nbsp;connecti&lt;br&gt;on&nbsp;error;&nbsp;reason:&nbsp;{#method&amp;lt;connection.close&amp;gt;(reply-code=320,&nbsp;reply-text=CONNECTI&lt;br&gt;ON_FORCED&nbsp;-&nbsp;broker&nbsp;forced&nbsp;connection&nbsp;closure&nbsp;with&nbsp;reason&nbsp;'shutdown',&nbsp;class-id=0,&lt;br&gt;&amp;nbsp;method-id=0),&nbsp;null,&nbsp;&quot;&quot;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;at&nbsp;com.rabbitmq.client.QueueingConsumer.handle(QueueingConsumer.java:198&lt;br&gt;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;at&nbsp;com.rabbitmq.client.QueueingConsumer.nextDelivery(QueueingConsumer.ja&lt;br&gt;va:227)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;at&nbsp;Recv.main(Recv.java:50)&lt;br&gt;&amp;nbsp;&lt;br&gt;Does&nbsp;Rabbit&nbsp;support&nbsp;catching&nbsp;broken&nbsp;connections&nbsp;in&nbsp;the&nbsp;consumer&nbsp;?&lt;/p&gt;&lt;p&gt;How&nbsp;can&nbsp;I&nbsp;do&nbsp;this&nbsp;?&lt;/p&gt;
</tt>
