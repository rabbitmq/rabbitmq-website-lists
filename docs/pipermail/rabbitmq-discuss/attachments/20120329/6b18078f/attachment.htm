<tt>
I'm&nbsp;trying&nbsp;to&nbsp;wrap&nbsp;my&nbsp;head&nbsp;around&nbsp;exchanges,queues,&nbsp;routing&nbsp;keys.&nbsp;My&nbsp;assumption&nbsp;which&nbsp;code&nbsp;is&nbsp;proving&nbsp;incorrect&nbsp;is:&nbsp;I&nbsp;can&nbsp;create&nbsp;a&nbsp;single&nbsp;exchange,&nbsp;with&nbsp;multiple&nbsp;queues.&nbsp;A&nbsp;consumer&nbsp;can&nbsp;point&nbsp;to&nbsp;a&nbsp;particular&nbsp;queue&nbsp;and&nbsp;get&nbsp;messages&nbsp;just&nbsp;for&nbsp;that&nbsp;queue.&nbsp;Now&nbsp;here&nbsp;is&nbsp;where&nbsp;my&nbsp;brain&nbsp;loses&nbsp;the&nbsp;plot:&nbsp;I&nbsp;had&nbsp;assumed&nbsp;I&nbsp;could&nbsp;use&nbsp;routing&nbsp;keys&nbsp;to&nbsp;have&nbsp;particular&nbsp;consumers&nbsp;just&nbsp;get&nbsp;messages&nbsp;on&nbsp;a&nbsp;queue&nbsp;that&nbsp;match&nbsp;a&nbsp;particular&nbsp;&quot;routing_key'.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;assuming&nbsp;I&nbsp;have&nbsp;a&nbsp;queue&nbsp;FOO&nbsp;and&nbsp;a&nbsp;queue&nbsp;BAR,&nbsp;I'd&nbsp;expect&nbsp;the&nbsp;below&nbsp;senders&nbsp;messages&nbsp;to&nbsp;queue&nbsp;BAR&nbsp;to&nbsp;NOT&nbsp;show&nbsp;up&nbsp;on&nbsp;queue&nbsp;FOO.&nbsp;However,&nbsp;when&nbsp;running&nbsp;the&nbsp;below,&nbsp;the&nbsp;queue&nbsp;FOO&nbsp;receiver&nbsp;receives&nbsp;messages&nbsp;if&nbsp;the&nbsp;routing&nbsp;key&nbsp;matches&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;%&nbsp;python&nbsp;send.py&nbsp;a.b.c&lt;/div&gt;&lt;div&gt;%&nbsp;python&nbsp;recy.py&nbsp;a.b.c&lt;/div&gt;&lt;div&gt;(receives&nbsp;a&nbsp;message&nbsp;on&nbsp;QUEUE&nbsp;FOO&nbsp;since&nbsp;it&nbsp;appears&nbsp;routing&nbsp;key&nbsp;is&nbsp;matching)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Are&nbsp;routing&nbsp;keys&nbsp;global?&nbsp;Ie,&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;key&nbsp;a.b.c&nbsp;any&nbsp;body&nbsp;on&nbsp;any&nbsp;queue&nbsp;will&nbsp;match&nbsp;that?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;achieve&nbsp;is&nbsp;the&nbsp;ability&nbsp;to&nbsp;send&nbsp;certain&nbsp;messages&nbsp;that&nbsp;only&nbsp;a&nbsp;group&nbsp;of&nbsp;consumers&nbsp;on&nbsp;a&nbsp;particular&nbsp;&quot;queue&quot;&nbsp;will&nbsp;process.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Rich&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;#!/usr/bin/env&nbsp;python&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;import&nbsp;pika&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;import&nbsp;sys&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;ex&nbsp;=&nbsp;&quot;dev.test&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;q&nbsp;=&nbsp;&quot;BAR&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;connection&nbsp;=&nbsp;pika.BlockingConnection(pika.ConnectionParameters(&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;host='127.0.0.1'))&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;channel&nbsp;=&nbsp;connection.channel()&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;channel.exchange_declare(exchange=ex,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;type='direct',&nbsp;durable=True)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;result&nbsp;=&nbsp;channel.queue_declare(queue=q,auto_delete=False,&nbsp;durable=True)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;print&nbsp;&quot;queue&nbsp;%s&quot;&nbsp;%&nbsp;result.method.queue&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;channel.queue_bind(exchange=ex,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;queue=q)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;routing_key&nbsp;=&nbsp;sys.argv[1]&nbsp;if&nbsp;len(sys.argv)&nbsp;&amp;gt;&nbsp;1&nbsp;else&nbsp;'anonymous.info'&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;message&nbsp;=&nbsp;&quot;hello&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;for&nbsp;i&nbsp;in&nbsp;range(1,2):&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;channel.basic_publish(exchange=ex,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;routing_key=routing_key,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;body=message,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;properties=pika.BasicProperties(&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;delivery_mode&nbsp;=&nbsp;2,&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;))&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;&nbsp;[x]&nbsp;Sent&nbsp;%r&quot;&nbsp;%&nbsp;(message,)&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;recv:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;#!/usr/bin/env&nbsp;python&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;import&nbsp;pika&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;import&nbsp;sys&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;ex&nbsp;=&nbsp;&quot;dev.test&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;q&nbsp;=&nbsp;&quot;FOO&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;connection&nbsp;=&nbsp;pika.BlockingConnection(pika.ConnectionParameters(&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;host='127.0.0.1'))&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;channel&nbsp;=&nbsp;connection.channel()&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;channel.exchange_declare(exchange=ex,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;type='direct',&nbsp;durable=True)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;result&nbsp;=&nbsp;channel.queue_declare(queue=q,&nbsp;durable=True)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;queue_name&nbsp;=&nbsp;result.method.queue&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;binding_keys&nbsp;=&nbsp;sys.argv[1:]&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;if&nbsp;not&nbsp;binding_keys:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;print&nbsp;&amp;gt;&amp;gt;&nbsp;sys.stderr,&nbsp;&quot;Usage:&nbsp;%s&nbsp;[binding_key]...&quot;&nbsp;%&nbsp;(sys.argv[0],)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;sys.exit(1)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;for&nbsp;binding_key&nbsp;in&nbsp;binding_keys:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;channel.queue_bind(exchange=ex,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;queue=queue_name,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;routing_key=binding_key)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;print&nbsp;'&nbsp;[*]&nbsp;Waiting&nbsp;for&nbsp;logs.&nbsp;To&nbsp;exit&nbsp;press&nbsp;CTRL+C'&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;def&nbsp;callback(ch,&nbsp;method,&nbsp;properties,&nbsp;body):&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;Routing&nbsp;key:&nbsp;%r&quot;&nbsp;%&nbsp;(method.routing_key)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;Body&nbsp;%r&quot;&nbsp;%&nbsp;(body,)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;channel.basic_consume(callback,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;queue=queue_name,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;no_ack=True)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;'courier&nbsp;new',&nbsp;monospace&quot;&gt;channel.start_consuming()&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;
</tt>
