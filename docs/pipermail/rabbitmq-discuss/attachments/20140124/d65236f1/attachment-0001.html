<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hello,&nbsp;Maulik,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;believe,&nbsp;your&nbsp;problem&nbsp;is&nbsp;a&nbsp;different&nbsp;one,&nbsp;because&nbsp;the&nbsp;bug&nbsp;was&nbsp;gone&nbsp;since&nbsp;we&nbsp;had&nbsp;upgraded&nbsp;to&nbsp;2.8.7.&nbsp;The&nbsp;final&nbsp;message&nbsp;from&nbsp;the&nbsp;support&nbsp;service&nbsp;was:&lt;br&gt;&lt;br&gt;&gt;&nbsp;The&nbsp;Erlang/OTP&nbsp;team&nbsp;believe&nbsp;that&nbsp;the&nbsp;problem&nbsp;was&nbsp;due&nbsp;to&nbsp;a&nbsp;bug&nbsp;in&nbsp;their&nbsp;code.&nbsp;A&nbsp;small&nbsp;change&nbsp;introduced&nbsp;in&nbsp;RabbitMQ&nbsp;2.8.7&nbsp;had&nbsp;the&nbsp;coincidental&nbsp;fortunate&nbsp;effect&nbsp;of&nbsp;bypassing&nbsp;the&nbsp;bug,&nbsp;so&nbsp;the&nbsp;problem&nbsp;should&nbsp;not&nbsp;occur&nbsp;in&nbsp;2.8.7&nbsp;or&nbsp;later&nbsp;versions&nbsp;of&nbsp;RabbitMQ.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;Good&nbsp;luck!&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;22&nbsp;January&nbsp;2014&nbsp;17:29,&nbsp;maulik&nbsp;thaker&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:maulik.mihir@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;maulik.mihir@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hi&nbsp;Dmitri&nbsp;Minaev,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;I&nbsp;am&nbsp;facing&nbsp;same&nbsp;problem&nbsp;with&nbsp;rabbitmq&nbsp;3.2.2&nbsp;(&nbsp;I&nbsp;have&nbsp;gone&nbsp;through&nbsp;this&nbsp;thread&nbsp;and&nbsp;already&nbsp;checked&nbsp;memory&nbsp;and&nbsp;number&nbsp;of&nbsp;file-descriptors&nbsp;are&nbsp;not&nbsp;causing&nbsp;the&nbsp;problem).&nbsp;If&nbsp;you&nbsp;have&nbsp;solved&nbsp;that&nbsp;problem&nbsp;then&nbsp;please&nbsp;share&nbsp;the&nbsp;solution.&nbsp; &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Maulik&lt;/div&gt;&lt;br&gt;&lt;br&gt;On&nbsp;Monday,&nbsp;26&nbsp;March&nbsp;2012&nbsp;11:15:45&nbsp;UTC+5:30,&nbsp;Dmitri&nbsp;Minaev&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0;margin-left:0.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;9&nbsp;March&nbsp;2012&nbsp;16:37,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;&lt;a&gt;si...@rabbitmq.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&gt;&nbsp;On&nbsp;09/03/12&nbsp;07:57,&nbsp;Dmitri&nbsp;Minaev&nbsp;wrote:&lt;p&gt;&gt;&gt;&nbsp;If&nbsp;I&nbsp;understand&nbsp;correctly,&nbsp;the&nbsp;number&nbsp;of&nbsp;file&nbsp;descriptors&nbsp;used&nbsp;by&lt;br&gt;<br>
&gt;&gt;&nbsp;RabbitMQ&nbsp;in&nbsp;normal&nbsp;situation&nbsp;is&nbsp;roughly&nbsp;equal&nbsp;to&nbsp;the&nbsp;number&nbsp;of&lt;br&gt;&gt;&gt;&nbsp;`rabbitmqctl&nbsp;list_connections`&nbsp;+&nbsp;some&nbsp;constant&nbsp;(~30)?&nbsp;In&nbsp;case&nbsp;of&nbsp;that&lt;br&gt;&gt;&gt;&nbsp;hanging&nbsp;server,&nbsp;the&nbsp;number&nbsp;of&nbsp;AMQP&nbsp;connections&nbsp;never&nbsp;was&nbsp;close&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;FD&nbsp;limit&nbsp;(ulimit&nbsp;-n&nbsp;is&nbsp;1024,&nbsp;fs.file-max&nbsp;=&nbsp;1605698).&nbsp;The&nbsp;graph&lt;br&gt;&gt;&gt;&nbsp;reflecting&nbsp; the&nbsp;number&nbsp;of&nbsp;open&nbsp;AMQP&nbsp;connections&nbsp;is&nbsp;attached&nbsp;to&nbsp;this&lt;br&gt;&gt;&gt;&nbsp;message.&lt;br&gt;&gt;&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;It&#39;s&nbsp;not&nbsp;really&nbsp;a&nbsp;constant,&nbsp;but&nbsp;to&nbsp;a&nbsp;first&nbsp;approximation,&nbsp;yes.&lt;br&gt;<br>
&gt;&lt;br&gt;&gt;&nbsp;Ultimately,&nbsp;the&nbsp;error&nbsp;I&nbsp;saw&nbsp;being&nbsp;passed&nbsp;up&nbsp;from&nbsp;the&nbsp;OS&nbsp;was&nbsp;ENFILE&nbsp;-&nbsp;that&#39;s&lt;br&gt;&gt;&nbsp;pretty&nbsp;unambiguous&nbsp;:)&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;It&#39;s&nbsp;possible&nbsp;that&nbsp;if&nbsp;you&#39;re&nbsp;churning&nbsp;connections&nbsp;then&nbsp;&quot;closed&quot;&nbsp;connections&lt;br&gt;<br>
&gt;&nbsp;in&nbsp;FIN_WAIT2&nbsp;could&nbsp;account&nbsp;for&nbsp;the&nbsp;majority&nbsp;of&nbsp;the&nbsp;used&nbsp;FDs.&nbsp;In&nbsp;2.8.0&nbsp;we&#39;ll&lt;br&gt;&gt;&nbsp;set&nbsp;SO_LINGER&nbsp;to&nbsp;0&nbsp;to&nbsp;prevent&nbsp;this.&lt;/p&gt;&lt;p&gt;I&nbsp;am&nbsp;still&nbsp;not&nbsp;sure&nbsp;about&nbsp;the&nbsp;role&nbsp;of&nbsp;the&nbsp;file&nbsp;descriptors&nbsp;in&nbsp;this&lt;br&gt;event.&nbsp;Last&nbsp;Friday,&nbsp;our&nbsp;Rabbit&nbsp;died&nbsp;again.&nbsp;Until&nbsp;the&nbsp;very&nbsp;last&nbsp;moment&lt;br&gt;<br>
the&nbsp;number&nbsp;of&nbsp;open&nbsp;file&nbsp;descriptors&nbsp;as&nbsp;reported&nbsp;by&nbsp;the&nbsp;management&lt;br&gt;plugin&nbsp;was&nbsp;143&nbsp;out&nbsp;of&nbsp;the&nbsp;total&nbsp;available&nbsp;number&nbsp;of&nbsp;32765.&nbsp;It&nbsp;was&lt;br&gt;RabbitMQ&nbsp;v.2.7.0.&nbsp;On&nbsp;that&nbsp;same&nbsp;day&nbsp;I&nbsp;have&nbsp;upgraded&nbsp;to&nbsp;2.8.1.&nbsp;Will&lt;br&gt;report&nbsp;on&nbsp;its&nbsp;behaviour&nbsp;later.&lt;/p&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;--&nbsp;&lt;br&gt;With&nbsp;best&nbsp;regards,&lt;br&gt;Dmitri&nbsp;Minaev&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&gt;rabbitmq...@lists.&lt;u&gt;&lt;/u&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;u&gt;&lt;/u&gt;cgi-bin/mailman/listinfo/&lt;u&gt;&lt;/u&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;With&nbsp;best&nbsp;regards,&lt;br&gt;Dimitri&nbsp;Minaev&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
