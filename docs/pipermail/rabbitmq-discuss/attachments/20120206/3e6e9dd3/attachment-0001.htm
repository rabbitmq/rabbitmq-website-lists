<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;div&gt;Here&nbsp;at&nbsp;work,&nbsp;we've&nbsp;been&nbsp;having&nbsp;a&nbsp;spirited&nbsp;debate&nbsp;about&nbsp;the&nbsp;RabbitMQ&nbsp;descriptions&nbsp;on&nbsp;how&nbsp;HA/mirrored&nbsp;durable&nbsp;queues&nbsp;work.&amp;nbsp;I&nbsp;apologize&nbsp;in&nbsp;advance&nbsp;if&nbsp;this&nbsp;seems&nbsp;like&nbsp;I'm&nbsp;splitting&nbsp;hairs&nbsp;below,&nbsp;but&nbsp;our&nbsp;team&nbsp;have&nbsp;some&nbsp;very&nbsp;specific&nbsp;questions&nbsp;regarding&nbsp;the&nbsp;exact&nbsp;wording.&amp;nbsp;While&nbsp;nobody&nbsp;doubts&nbsp;the&nbsp;&amp;nbsp;end&nbsp;result&nbsp;of&nbsp;mirroring,&nbsp;the&nbsp;mechanics&nbsp;of&nbsp;*exactly*&nbsp;how&nbsp;this&nbsp;happen&nbsp;are&nbsp;the&nbsp;subject&nbsp;of&nbsp;debate&nbsp;here.&amp;nbsp;As&nbsp;the&nbsp;designated&nbsp;point&nbsp;person&nbsp;for&nbsp;RabbitMQ&nbsp;in&nbsp;our&nbsp;company,&nbsp;I'm&nbsp;responsible&nbsp;for&nbsp;driving&nbsp;these&nbsp;questions&nbsp;to&nbsp;closure.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;First,&nbsp;I'll&nbsp;mention&nbsp;that&nbsp;we've&nbsp;read&nbsp;and&nbsp;re-read&nbsp;&quot;Highly&nbsp;Available&nbsp;Queues&quot;&nbsp;and&nbsp;&quot;High&nbsp;Availability&nbsp;in&nbsp;RabbitMQ:&nbsp;solving&nbsp;part&nbsp;of&nbsp;the&nbsp;puzzle&quot;&nbsp;multiple&nbsp;times.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/ha.html&quot;&gt;http://www.rabbitmq.com/ha.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/blog/2011/10/25/high-availability-in-rabbitmq-solving-part-of-the-puzzle&quot;&gt;http://www.rabbitmq.com/blog/2011/10/25/high-availability-in-rabbitmq-solving-part-of-the-puzzle&lt;/a&gt;/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;crux&nbsp;of&nbsp;the&nbsp;questions&nbsp;come&nbsp;down&nbsp;to&nbsp;these&nbsp;quotes:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;&quot;The&nbsp;slaves&nbsp;apply&nbsp;the&nbsp;operations&nbsp;that&nbsp;occur<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;master&nbsp;in&nbsp;exactly&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;the&nbsp;master&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thus&nbsp;maintain&nbsp;the&nbsp;same&nbsp;state.&nbsp;All&nbsp;actions&nbsp;other&nbsp;than<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;publishes&nbsp;go&nbsp;only&nbsp;to&nbsp;the&nbsp;master,&nbsp;and&nbsp;the&nbsp;master&nbsp;then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;broadcasts&nbsp;the&nbsp;effect&nbsp;of&nbsp;the&nbsp;actions&nbsp;to&nbsp;the&nbsp;slaves.&nbsp;Thus<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clients&nbsp;consuming&nbsp;from&nbsp;a&nbsp;mirrored&nbsp;queue&nbsp;are&nbsp;in&nbsp;fact<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;consuming&nbsp;from&nbsp;the&nbsp;master.&quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;messages&nbsp;published&nbsp;to&nbsp;a&nbsp;mirrored-queue&nbsp;are&nbsp;always<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;published&nbsp;directly&nbsp;to&nbsp;the&nbsp;master&nbsp;and&nbsp;all&nbsp;slaves.&quot;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;One&nbsp;interpretation&nbsp;of&nbsp;the&nbsp;2nd&nbsp;quote&nbsp;above&nbsp;(&quot;published&nbsp;directly&nbsp;to...&quot;)&nbsp;is&nbsp;that&nbsp;clients&nbsp;are&nbsp;responsible&nbsp;for&nbsp;writing&nbsp;their&nbsp;messages&nbsp;to&nbsp;the&nbsp;master&nbsp;*as&nbsp;well&nbsp;as*&nbsp;to&nbsp;all&nbsp;slaves.&nbsp;Perhaps&nbsp;there's&nbsp;some&nbsp;mechanism&nbsp;where&nbsp;at&nbsp;connect&nbsp;time,&nbsp;the&nbsp;master&nbsp;sends&nbsp;a&nbsp;list&nbsp;of&nbsp;servers&nbsp;to&nbsp;the&nbsp;connecting&nbsp;client,&nbsp;and&nbsp;the&nbsp;client&nbsp;writes&nbsp;to&nbsp;all&nbsp;instances&nbsp;in&nbsp;the&nbsp;list.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Other&nbsp;people&nbsp;have&nbsp;a&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;how&nbsp;this&nbsp;works,&nbsp;which&nbsp;is&nbsp;that&nbsp;publishes&nbsp;to&nbsp;*any*&nbsp;broker&nbsp;instances&nbsp;are&nbsp;forwarded&nbsp;by&nbsp;the&nbsp;receiving&nbsp;slave&nbsp;to&nbsp;the&nbsp;master&nbsp;instance,&nbsp;which&nbsp;in&nbsp;turn&nbsp;pushes&nbsp;the&nbsp;publish&nbsp;requests&nbsp;to&nbsp;all&nbsp;slaves.&nbsp;(Of&nbsp;course,&nbsp;if&nbsp;the&nbsp;master&nbsp;received&nbsp;the&nbsp;message&nbsp;initially,&nbsp;there's&nbsp;no&nbsp;need&nbsp;for&nbsp;forwarding.)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Simple&nbsp;question:&nbsp;Which&nbsp;of&nbsp;the&nbsp;above&nbsp;interpretations&nbsp;is&nbsp;correct?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Follow&nbsp;up&nbsp;question:&nbsp;What&nbsp;is&nbsp;the&nbsp;exact&nbsp;flow&nbsp;for&nbsp;a&nbsp;publish&nbsp;that&nbsp;goes&nbsp;to&nbsp;a&nbsp;slave?&nbsp;Does&nbsp;the&nbsp;slave&nbsp;do&nbsp;anything&nbsp;other&nbsp;than&nbsp;push&nbsp;the&nbsp;message&nbsp;to&nbsp;the&nbsp;master,&nbsp;which&nbsp;in&nbsp;turn&nbsp;handles&nbsp;the&nbsp;message&nbsp;as&nbsp;if&nbsp;it&nbsp;came&nbsp;to&nbsp;the&nbsp;master&nbsp;in&nbsp;the&nbsp;first&nbsp;place?&nbsp;Perhaps&nbsp;it&nbsp;writes&nbsp;the&nbsp;message&nbsp;to&nbsp;the&nbsp;local&nbsp;store&nbsp;first,&nbsp;then&nbsp;pushes&nbsp;it&nbsp;to&nbsp;the&nbsp;master?&nbsp;(Like&nbsp;I&nbsp;said,&nbsp;spirited&nbsp;debate.)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;much&nbsp;for&nbsp;your&nbsp;help,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Matt&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
