<tt>
I&amp;#39;ve&nbsp;ran&nbsp;into&nbsp;something&nbsp;odd.&nbsp;Previously,&nbsp;using&nbsp;RabbitMQ&nbsp;2.8.5&nbsp;and&nbsp;R13B03&nbsp;(the&nbsp;default&nbsp;Erlang&nbsp;for&nbsp;Ubunto&nbsp;10.04)&nbsp;I&nbsp;had&nbsp;three&nbsp;brokers&nbsp;(mq1,&nbsp;mq2,&nbsp;mq3)&nbsp;in&nbsp;a&nbsp;symmetric&nbsp;exchange&nbsp;configuration&nbsp;(e.g,&nbsp;mq1&nbsp;was&nbsp;the&nbsp;upstream&nbsp;for&nbsp;mq2/mq3,&nbsp;and&nbsp;vice-versa.)&lt;br&gt;<br>
&lt;br&gt;Everything&nbsp;worked&nbsp;groovy&nbsp;and&nbsp;I&nbsp;could&nbsp;connect&nbsp;to&nbsp;all&nbsp;the&nbsp;brokers,&nbsp;I&nbsp;could&nbsp;pump&nbsp;messages&nbsp;through&nbsp;my&nbsp;defined &nbsp;topic&nbsp;exchange&nbsp;(&amp;#39;skytap&amp;#39;)&nbsp;between&nbsp;federated&nbsp;brokers,&nbsp;and&nbsp;so&nbsp;forth.&lt;br&gt;&lt;br&gt;After&nbsp;upgrading&nbsp;my&nbsp;Erlang&nbsp;version&nbsp;to&nbsp;R15B01,&nbsp;brokers&nbsp;mq2&nbsp;and&nbsp;mq3&nbsp;start&nbsp;fine,&nbsp;work&nbsp;as&nbsp;expected&nbsp;and&nbsp;I&nbsp;see&nbsp;my&nbsp;&amp;#39;skytap&amp;#39;&nbsp;exchange&nbsp;on&nbsp;them.&nbsp;However,&nbsp;mq1&nbsp;mostly&nbsp;starts&nbsp;up&nbsp;(I&nbsp;see&nbsp;lots&nbsp;of&nbsp;mnesia&nbsp;spew),&nbsp;but&nbsp;it&nbsp;never&nbsp;accepts&nbsp;connections,&nbsp;I&nbsp;can&amp;#39;t&nbsp;log&nbsp;into&nbsp;the&nbsp;management&nbsp;console.&nbsp;The&nbsp;beam.smp&nbsp;process&nbsp;is&nbsp;running&nbsp;on&nbsp;mq3,&nbsp;however.&lt;br&gt;<br>
&lt;br&gt;My&nbsp;config&nbsp;file&nbsp;for&nbsp;mq1&nbsp;looks&nbsp;like&nbsp;this:&lt;br&gt;[&lt;br&gt;   &nbsp;{mnesia,&nbsp;[{debug,&nbsp;trace}&lt;br&gt;            &nbsp;]&lt;br&gt;   &nbsp;},&lt;br&gt;   &nbsp;{rabbitmq_federation,&lt;br&gt;       &nbsp;[&nbsp;{exchanges,&nbsp;[[{exchange,&nbsp;&amp;quot;skytap&amp;quot;},&lt;br&gt;                       &nbsp;{type,&nbsp;&amp;quot;topic&amp;quot;},&lt;br&gt;<br>
                       &nbsp;{upstream_set,&nbsp;&amp;quot;my_upstreams&amp;quot;}]]},&lt;br&gt;&lt;br&gt;         &nbsp;{upstream_sets,&nbsp;[{&amp;quot;my_upstreams&amp;quot;,&nbsp;[[{connection,&nbsp;&amp;quot;upstream-server-mq2&amp;quot;},&lt;br&gt;                                             &nbsp;{exchange,&nbsp;&amp;quot;skytap&amp;quot;}],&lt;br&gt;<br>
                                            &nbsp;[{connection,&nbsp;&amp;quot;upstream-server-mq3&amp;quot;},&lt;br&gt;                                             &nbsp;{exchange,&nbsp;&amp;quot;skytap&amp;quot;}]&lt;br&gt;                                      &nbsp;]}&lt;br&gt;<br>
                    &nbsp;]},&lt;br&gt;         &nbsp;{connections,&nbsp;[{&amp;quot;upstream-server-mq2&amp;quot;,&nbsp;[{host,&nbsp;&amp;quot;mq2&amp;quot;}&lt;br&gt;                                                &nbsp;]&lt;br&gt;                        &nbsp;},&lt;br&gt;                        &nbsp;{&amp;quot;upstream-server-mq3&amp;quot;,&nbsp;[{host,&nbsp;&amp;quot;mq3&amp;quot;}]&lt;br&gt;<br>
                        &nbsp;}&lt;br&gt;                       &nbsp;]&lt;br&gt;         &nbsp;}&lt;br&gt;       &nbsp;]&lt;br&gt;   &nbsp;}&lt;br&gt;].&lt;br&gt;&lt;br&gt;Whereas&nbsp;for&nbsp;both&nbsp;mq2&nbsp;and&nbsp;mq3:&lt;br&gt;&lt;br&gt;[&lt;br&gt;   &nbsp;{mnesia,&nbsp;[{debug,&nbsp;trace}&lt;br&gt;            &nbsp;]&lt;br&gt;   &nbsp;},&lt;br&gt;   &nbsp;{rabbitmq_federation,&lt;br&gt;<br>
       &nbsp;[&nbsp;{exchanges,&nbsp;[[{exchange,&nbsp;&amp;quot;skytap&amp;quot;},&lt;br&gt;                       &nbsp;{type,&nbsp;&amp;quot;topic&amp;quot;},&lt;br&gt;                       &nbsp;{upstream_set,&nbsp;&amp;quot;my_upstreams&amp;quot;}]]},&lt;br&gt;&lt;br&gt;         &nbsp;{upstream_sets,&nbsp;[{&amp;quot;my_upstreams&amp;quot;,&nbsp;[[{connection,&nbsp;&amp;quot;upstream-server&amp;quot;},&lt;br&gt;<br>
                                        &nbsp;{exchange,&nbsp;&amp;quot;skytap&amp;quot;}]&lt;br&gt;                                      &nbsp;]}&lt;br&gt;                    &nbsp;]},&lt;br&gt;         &nbsp;{connections,&nbsp;[{&amp;quot;upstream-server&amp;quot;,&nbsp;[{host,&nbsp;&amp;quot;mq1&amp;quot;}&lt;br&gt;<br>
                                       &nbsp;]}&lt;br&gt;                  &nbsp;]}&lt;br&gt;       &nbsp;]&lt;br&gt;   &nbsp;}&lt;br&gt;].&lt;br&gt;&lt;br&gt;The&nbsp;rabbit@mq1.log&nbsp;file&nbsp;has&nbsp;this:&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;Limiting&nbsp;to&nbsp;approx&nbsp;924&nbsp;file&nbsp;handles&nbsp;(829&nbsp;sockets)&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;Memory&nbsp;limit&nbsp;set&nbsp;to&nbsp;399MB&nbsp;of&nbsp;999MB&nbsp;total.&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;Disk&nbsp;free&nbsp;limit&nbsp;set&nbsp;to&nbsp;953MB&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;<br>
Could&nbsp;not&nbsp;find&nbsp;exchange&nbsp;type&nbsp;x-federation.&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;Could&nbsp;not&nbsp;find&nbsp;exchange&nbsp;type&nbsp;x-federation.&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;msg_store_transient:&nbsp;using&nbsp;rabbit_msg_store_ets_index&nbsp;to&nbsp;provide&nbsp;index&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;msg_store_persistent:&nbsp;using&nbsp;rabbit_msg_store_ets_index&nbsp;to&nbsp;provide&nbsp;index&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;Could&nbsp;not&nbsp;find&nbsp;exchange&nbsp;type&nbsp;x-federation.&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:23&nbsp;===&lt;br&gt;started&nbsp;TCP&nbsp;Listener&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.212.0&amp;gt;&nbsp;(&lt;a&nbsp;href=&quot;http://192.168.78.18:55219&quot;&gt;192.168.78.18:55219&lt;/a&gt;&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://192.168.78.16:5672&quot;&gt;192.168.78.16:5672&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.219.0&amp;gt;&nbsp;(&lt;a&nbsp;href=&quot;http://192.168.78.17:58709&quot;&gt;192.168.78.17:58709&lt;/a&gt;&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://192.168.78.16:5672&quot;&gt;192.168.78.16:5672&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;connection&nbsp;&amp;lt;0.212.0&amp;gt;,&nbsp;channel&nbsp;2&nbsp;-&nbsp;error:&lt;br&gt;{amqp_error,not_found,&lt;br&gt;           &nbsp;&amp;quot;no&nbsp;exchange&nbsp;&amp;#39;federation:&nbsp;skytap&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbit@mq3.mpietrek.internal.illumita.com&quot;&gt;rabbit@mq3.mpietrek.internal.illumita.com&lt;/a&gt;&nbsp;B&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&amp;quot;,&lt;br&gt;<br>
           &nbsp;&amp;#39;exchange.delete&amp;#39;}&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.233.0&amp;gt;&nbsp;(&lt;a&nbsp;href=&quot;http://192.168.78.18:50211&quot;&gt;192.168.78.18:50211&lt;/a&gt;&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://192.168.78.16:5672&quot;&gt;192.168.78.16:5672&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;connection&nbsp;&amp;lt;0.219.0&amp;gt;,&nbsp;channel&nbsp;2&nbsp;-&nbsp;error:&lt;br&gt;{amqp_error,not_found,&lt;br&gt;           &nbsp;&amp;quot;no&nbsp;exchange&nbsp;&amp;#39;federation:&nbsp;skytap&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbit@mq2.mpietrek.internal.illumita.com&quot;&gt;rabbit@mq2.mpietrek.internal.illumita.com&lt;/a&gt;&nbsp;A&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&amp;quot;,&lt;br&gt;<br>
           &nbsp;&amp;#39;exchange.delete&amp;#39;}&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;connection&nbsp;&amp;lt;0.233.0&amp;gt;,&nbsp;channel&nbsp;1&nbsp;-&nbsp;error:&lt;br&gt;{amqp_error,command_invalid,&amp;quot;unknown&nbsp;exchange&nbsp;type&nbsp;&amp;#39;x-federation-upstream&amp;#39;&amp;quot;,&lt;br&gt;<br>
           &nbsp;&amp;#39;exchange.declare&amp;#39;}&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.245.0&amp;gt;&nbsp;(&lt;a&nbsp;href=&quot;http://192.168.78.17:58290&quot;&gt;192.168.78.17:58290&lt;/a&gt;&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://192.168.78.16:5672&quot;&gt;192.168.78.16:5672&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.233.0&amp;gt;&nbsp;(&lt;a&nbsp;href=&quot;http://192.168.78.18:50211&quot;&gt;192.168.78.18:50211&lt;/a&gt;&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://192.168.78.16:5672&quot;&gt;192.168.78.16:5672&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;Could&nbsp;not&nbsp;find&nbsp;exchange&nbsp;type&nbsp;x-federation.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;connection&nbsp;&amp;lt;0.245.0&amp;gt;,&nbsp;channel&nbsp;1&nbsp;-&nbsp;error:&lt;br&gt;{amqp_error,command_invalid,&amp;quot;unknown&nbsp;exchange&nbsp;type&nbsp;&amp;#39;x-federation-upstream&amp;#39;&amp;quot;,&lt;br&gt;<br>
           &nbsp;&amp;#39;exchange.declare&amp;#39;}&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.245.0&amp;gt;&nbsp;(&lt;a&nbsp;href=&quot;http://192.168.78.17:58290&quot;&gt;192.168.78.17:58290&lt;/a&gt;&nbsp;-&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://192.168.78.16:5672&quot;&gt;192.168.78.16:5672&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;Could&nbsp;not&nbsp;find&nbsp;exchange&nbsp;type&nbsp;x-federation.&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;Could&nbsp;not&nbsp;find&nbsp;exchange&nbsp;type&nbsp;x-federation.&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;<br>
Could&nbsp;not&nbsp;find&nbsp;exchange&nbsp;type&nbsp;x-federation.&lt;br&gt;&lt;br&gt;----&lt;br&gt;And&nbsp;rabbit@mq2.log:&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:20&nbsp;===&lt;br&gt;Connection&nbsp;(&amp;lt;0.300.0&amp;gt;)&nbsp;closing:&nbsp;received&nbsp;hard&nbsp;error&nbsp;{&amp;#39;connection.close&amp;#39;,320,&lt;br&gt;<br>
                                                    &nbsp;&amp;lt;&amp;lt;&amp;quot;CONNECTION_FORCED&nbsp;-&nbsp;broker&nbsp;forced&nbsp;connection&nbsp;closure&nbsp;with&nbsp;reason&nbsp;&amp;#39;shutdown&amp;#39;&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;                                                    &nbsp;0,0}&nbsp;from&nbsp;server&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:20&nbsp;===&lt;br&gt;Federation&nbsp;exchange&nbsp;&amp;#39;skytap&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&nbsp;disconnected&nbsp;from&nbsp;mq1:/:skytap&lt;br&gt;{upstream_channel_down,&lt;br&gt;   &nbsp;{connection_closing,&lt;br&gt;       &nbsp;{server_initiated_close,320,&lt;br&gt;<br>
           &nbsp;&amp;lt;&amp;lt;&amp;quot;CONNECTION_FORCED&nbsp;-&nbsp;broker&nbsp;forced&nbsp;connection&nbsp;closure&nbsp;with&nbsp;reason&nbsp;&amp;#39;shutdown&amp;#39;&amp;quot;&amp;gt;&amp;gt;}}}&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:20&nbsp;===&lt;br&gt;**&nbsp;Generic&nbsp;server&nbsp;&amp;lt;0.300.0&amp;gt;&nbsp;terminating&nbsp;&lt;br&gt;<br>
**&nbsp;Last&nbsp;message&nbsp;in&nbsp;was&nbsp;{channel_exit,3,{writer,send_failed,{error,closed}}}&lt;br&gt;**&nbsp;When&nbsp;Server&nbsp;state&nbsp;==&nbsp;{state,amqp_network_connection,&lt;br&gt;                           &nbsp;{state,#Port&amp;lt;0.5842&amp;gt;,0,&amp;lt;0.304.0&amp;gt;,131072,&lt;br&gt;<br>
                               &nbsp;{server_initiated_close,320,&lt;br&gt;                                   &nbsp;&amp;lt;&amp;lt;&amp;quot;CONNECTION_FORCED&nbsp;-&nbsp;broker&nbsp;forced&nbsp;connection&nbsp;closure&nbsp;with&nbsp;reason&nbsp;&amp;#39;shutdown&amp;#39;&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;                               &nbsp;true},&lt;br&gt;<br>
                           &nbsp;&amp;lt;0.299.0&amp;gt;,&amp;lt;0.302.0&amp;gt;,&lt;br&gt;                           &nbsp;{amqp_params_network,&amp;lt;&amp;lt;&amp;quot;guest&amp;quot;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&amp;quot;guest&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;                               &nbsp;&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,&amp;quot;mq1&amp;quot;,5672,0,0,0,infinity,none,&lt;br&gt;<br>
                               &nbsp;[#Fun&amp;lt;amqp_auth_mechanisms.plain.3&amp;gt;,&lt;br&gt;                                &nbsp;#Fun&amp;lt;amqp_auth_mechanisms.amqplain.3&amp;gt;],&lt;br&gt;                               &nbsp;[],[]},&lt;br&gt;                           &nbsp;0,&lt;br&gt;<br>
                           &nbsp;[{&amp;lt;&amp;lt;&amp;quot;capabilities&amp;quot;&amp;gt;&amp;gt;,table,&lt;br&gt;                             &nbsp;[{&amp;lt;&amp;lt;&amp;quot;publisher_confirms&amp;quot;&amp;gt;&amp;gt;,bool,true},&lt;br&gt;                              &nbsp;{&amp;lt;&amp;lt;&amp;quot;exchange_exchange_bindings&amp;quot;&amp;gt;&amp;gt;,bool,true},&lt;br&gt;<br>
                              &nbsp;{&amp;lt;&amp;lt;&amp;quot;basic.nack&amp;quot;&amp;gt;&amp;gt;,bool,true},&lt;br&gt;                              &nbsp;{&amp;lt;&amp;lt;&amp;quot;consumer_cancel_notify&amp;quot;&amp;gt;&amp;gt;,bool,true}]},&lt;br&gt;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;copyright&amp;quot;&amp;gt;&amp;gt;,longstr,&lt;br&gt;<br>
                             &nbsp;&amp;lt;&amp;lt;&amp;quot;Copyright&nbsp;(C)&nbsp;2007-2012&nbsp;VMware,&nbsp;Inc.&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;information&amp;quot;&amp;gt;&amp;gt;,longstr,&lt;br&gt;                             &nbsp;&amp;lt;&amp;lt;&amp;quot;Licensed&nbsp;under&nbsp;the&nbsp;MPL. &nbsp;See&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/&quot;&gt;http://www.rabbitmq.com/&lt;/a&gt;&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;platform&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;Erlang/OTP&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;product&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;RabbitMQ&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;version&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;2.8.5&amp;quot;&amp;gt;&amp;gt;}],&lt;br&gt;                           &nbsp;#Fun&amp;lt;amqp_connection_sup.0.39273983&amp;gt;,&lt;br&gt;                           &nbsp;#Fun&amp;lt;amqp_connection_sup.2.54430129&amp;gt;,&lt;br&gt;<br>
                           &nbsp;{closing,server_initiated_close,&lt;br&gt;                               &nbsp;{&amp;#39;connection.close&amp;#39;,320,&lt;br&gt;                                   &nbsp;&amp;lt;&amp;lt;&amp;quot;CONNECTION_FORCED&nbsp;-&nbsp;broker&nbsp;forced&nbsp;connection&nbsp;closure&nbsp;with&nbsp;reason&nbsp;&amp;#39;shutdown&amp;#39;&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;<br>
                                   &nbsp;0,0},&lt;br&gt;                               &nbsp;none}}&lt;br&gt;**&nbsp;Reason&nbsp;for&nbsp;termination&nbsp;==&nbsp;&lt;br&gt;**&nbsp;{function_clause,&lt;br&gt;      &nbsp;[{amqp_network_connection,handle_message,&lt;br&gt;           &nbsp;[{channel_exit,3,{writer,send_failed,{error,closed}}},&lt;br&gt;<br>
            &nbsp;{state,#Port&amp;lt;0.5842&amp;gt;,0,&amp;lt;0.304.0&amp;gt;,131072,&lt;br&gt;                &nbsp;{server_initiated_close,320,&lt;br&gt;                    &nbsp;&amp;lt;&amp;lt;&amp;quot;CONNECTION_FORCED&nbsp;-&nbsp;broker&nbsp;forced&nbsp;connection&nbsp;closure&nbsp;with&nbsp;reason&nbsp;&amp;#39;shutdown&amp;#39;&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
                &nbsp;true}],&lt;br&gt;           &nbsp;[]},&lt;br&gt;       &nbsp;{amqp_gen_connection,callback,3,[]},&lt;br&gt;       &nbsp;{gen_server,handle_msg,5,[{file,&amp;quot;gen_server.erl&amp;quot;},{line,607}]},&lt;br&gt;       &nbsp;{proc_lib,init_p_do_apply,3,[{file,&amp;quot;proc_lib.erl&amp;quot;},{line,227}]}]}&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:20&nbsp;===&lt;br&gt;**&nbsp;Generic&nbsp;server&nbsp;&amp;lt;0.305.0&amp;gt;&nbsp;terminating&nbsp;&lt;br&gt;**&nbsp;Last&nbsp;message&nbsp;in&nbsp;was&nbsp;{inet_async,#Port&amp;lt;0.5842&amp;gt;,404,&lt;br&gt;                          &nbsp;{ok,&amp;lt;&amp;lt;0,10,0,50,1,64,75,67,79,78,78,69,67,84,73,&lt;br&gt;<br>
                                &nbsp;79,78,95,70,79,82,67,69,68,32,45,32,98,114,&lt;br&gt;                                &nbsp;111,107,101,114,32,102,111,114,99,101,100,&lt;br&gt;                                &nbsp;32,99,111,110,110,101,99,116,105,111,110,32,&lt;br&gt;<br>
                                &nbsp;99,108,111,115,117,114,101,32,119,105,116,&lt;br&gt;                                &nbsp;104,32,114,101,97,115,111,110,32,39,115,104,&lt;br&gt;                                &nbsp;117,116,100,111,119,110,39,0,0,0,0,206&amp;gt;&amp;gt;}}&lt;br&gt;<br>
**&nbsp;When&nbsp;Server&nbsp;state&nbsp;==&nbsp;{state,#Port&amp;lt;0.5842&amp;gt;,&amp;lt;0.300.0&amp;gt;,&amp;lt;0.302.0&amp;gt;,&lt;br&gt;                              &nbsp;{method,rabbit_framing_amqp_0_9_1},&lt;br&gt;                              &nbsp;none}&lt;br&gt;**&nbsp;Reason&nbsp;for&nbsp;termination&nbsp;==&nbsp;&lt;br&gt;<br>
**&nbsp;{socket_error,einval}&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:20&nbsp;===&lt;br&gt;Federation&nbsp;exchange&nbsp;&amp;#39;skytap&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&nbsp;did&nbsp;not&nbsp;connect&nbsp;to&nbsp;mq1:/:skytap&lt;br&gt;{error,econnrefused}&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:22&nbsp;===&lt;br&gt;<br>
Federation&nbsp;exchange&nbsp;&amp;#39;skytap&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&nbsp;did&nbsp;not&nbsp;connect&nbsp;to&nbsp;mq1:/:skytap&lt;br&gt;{error,econnrefused}&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;Connection&nbsp;(&amp;lt;0.412.0&amp;gt;)&nbsp;closing:&nbsp;received&nbsp;hard&nbsp;error&nbsp;{&amp;#39;connection.close&amp;#39;,503,&lt;br&gt;<br>
                                                    &nbsp;&amp;lt;&amp;lt;&amp;quot;COMMAND_INVALID&nbsp;-&nbsp;unknown&nbsp;exchange&nbsp;type&nbsp;&amp;#39;x-federation-upstream&amp;#39;&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;                                                    &nbsp;40,10}&nbsp;from&nbsp;server&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;21-Aug-2012::17:09:24&nbsp;===&lt;br&gt;Federation&nbsp;exchange&nbsp;&amp;#39;skytap&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&nbsp;connected&nbsp;to&nbsp;mq1:/:skytap&lt;br&gt;&lt;br&gt;---&lt;br&gt;The&nbsp;management&nbsp;console&nbsp;for&nbsp;mq2&nbsp;shows&nbsp;this&nbsp;on&nbsp;the&nbsp;Exchanges&nbsp;tab:&lt;br&gt;&lt;table&nbsp;class=&quot;list&quot;&gt;<br>
&lt;tbody&gt;&lt;tr&nbsp;class=&quot;alt1&quot;&gt;&lt;td&gt;&lt;a&nbsp;href=&quot;http://mq2.mpietrek.internal.illumita.com:55672/#/exchanges/%2F/federation%3A%20skytap%20-%3E%20rabbit%40mq1.mpietrek.internal.illumita.com%20A&quot;&gt;federation:&nbsp;skytap&nbsp;-&amp;gt;&nbsp;rabbit@mq1.mpietrek.internal.illumita.com&nbsp;A&lt;/a&gt;&lt;/td&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&lt;td&nbsp;class=&quot;status&nbsp;c&quot;&gt;x-federation-upstream&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;td&nbsp;class=&quot;c&quot;&gt;&lt;acronym&nbsp;title=&quot;durable:&nbsp;true&quot;&gt;D&lt;/acronym&gt;&nbsp;&lt;acronym&nbsp;title=&quot;auto-delete:&nbsp;true&quot;&gt;AD&lt;/acronym&gt;&nbsp;&lt;acronym&nbsp;title=&quot;internal:&nbsp;true&quot;&gt;I&lt;/acronym&gt;&nbsp;&lt;acronym&nbsp;title=&quot;x-max-hops:&nbsp;1&quot;&gt;Args&lt;/acronym&gt;&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;td&nbsp;class=&quot;r&quot;&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br&gt;And&nbsp;mq3&amp;#39;s&nbsp;Exchanges&nbsp;tab&nbsp;shows:&lt;br&gt;&lt;table&nbsp;class=&quot;list&quot;&gt;&lt;tbody&gt;&lt;tr&nbsp;class=&quot;alt1&quot;&gt;&lt;td&gt;&lt;a&nbsp;href=&quot;http://mq3.mpietrek.internal.illumita.com:55672/#/exchanges/%2F/federation%3A%20skytap%20-%3E%20rabbit%40mq1.mpietrek.internal.illumita.com%20B&quot;&gt;federation:&nbsp;skytap&nbsp;-&amp;gt;&nbsp;rabbit@mq1.mpietrek.internal.illumita.com&nbsp;B&lt;/a&gt;&lt;/td&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&lt;td&nbsp;class=&quot;status&nbsp;c&quot;&gt;x-federation-upstream&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;td&nbsp;class=&quot;c&quot;&gt;&lt;acronym&nbsp;title=&quot;durable:&nbsp;true&quot;&gt;D&lt;/acronym&gt;&nbsp;&lt;acronym&nbsp;title=&quot;auto-delete:&nbsp;true&quot;&gt;AD&lt;/acronym&gt;&nbsp;&lt;acronym&nbsp;title=&quot;internal:&nbsp;true&quot;&gt;I&lt;/acronym&gt;&nbsp;&lt;acronym&nbsp;title=&quot;x-max-hops:&nbsp;1&quot;&gt;Args&lt;/acronym&gt;&lt;/td&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;td&nbsp;class=&quot;r&quot;&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br&gt;&lt;br&gt;Ideas&nbsp;on&nbsp;what&nbsp;I&amp;#39;m&nbsp;doing&nbsp;wrong,&nbsp;or&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;known&nbsp;issue?&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;&lt;br&gt;Matt&lt;br&gt;<br>

</tt>
