<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;&lt;div&gt;If&nbsp;you&nbsp;are&nbsp;using&nbsp;the&nbsp;java-client&nbsp;the&nbsp;QueueingConsumer&nbsp;accepts&nbsp;messages&nbsp;from&nbsp;the&nbsp;rabbitmq&nbsp;and&nbsp;buffers&nbsp;them&nbsp;into&nbsp;a&nbsp;BlockingQueue&nbsp;so&nbsp;that&nbsp;when&nbsp;you&nbsp;call&nbsp;nextDelivery&nbsp;you&nbsp;just&nbsp;grab&nbsp;the&nbsp;next&nbsp;one&nbsp;off&nbsp;the&nbsp;queue.&nbsp;You&nbsp;could&nbsp;implement&nbsp;your&nbsp;own&nbsp;Consumer&nbsp;that&nbsp;does&nbsp;the&nbsp;same&nbsp;thing&nbsp;and&nbsp;use&nbsp;something&nbsp;like&lt;/div&gt;<br>
&lt;div&gt;&lt;pre&nbsp;class=&quot;lang-java&nbsp;prettyprint&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0.8em;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;10px;&nbsp;padding-right:&nbsp;10px;&nbsp;padding-bottom:&nbsp;10px;&nbsp;padding-left:&nbsp;10px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;word-wrap:&nbsp;break-word;&nbsp;background-color:&nbsp;rgb(240,&nbsp;240,&nbsp;240);&nbsp;&quot;&gt;<br>
&lt;code&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;background-color:&nbsp;rgb(240,&nbsp;240,&nbsp;240);&nbsp;white-space:&nbsp;normal;&quot;&gt;&lt;span&nbsp;class=&quot;pln&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;list&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;add&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;blockingQueue&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;take&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;());&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;&lt;br&gt;<br>
blockingQueue&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;drainTo&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;list&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font:&nbsp;inherit;&nbsp;vertical-align:&nbsp;baseline;&nbsp;&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;<br>
to&nbsp;drain&nbsp;all&nbsp;the&nbsp;elements&nbsp;in&nbsp;the&nbsp;array&nbsp;blocking&nbsp;queue&nbsp;into&nbsp;a&nbsp;passed&nbsp;in&nbsp;set.&nbsp;Only&nbsp;thing&nbsp;that&nbsp;you&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;then&nbsp;would&nbsp;be&nbsp;dealing&nbsp;with&nbsp;cancel,cancel-ok,shutdown&nbsp;signals&nbsp;without&nbsp;adding&nbsp;them&nbsp;into&nbsp;your&nbsp;passed&nbsp;in&nbsp;set. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Cameron&nbsp;Davison&lt;/div&gt;&lt;div&gt;&lt;br&gt;On&nbsp;Nov&nbsp;10,&nbsp;2011,&nbsp;at&nbsp;3:08&nbsp;AM,&nbsp;Matthias&nbsp;Radestock&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&lt;div&gt;&lt;span&gt;On&nbsp;10/11/11&nbsp;08:51,&nbsp;pavuuu&nbsp;wrote:&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;When&nbsp;using&nbsp;&amp;#39;BasicConsume&amp;#39;&nbsp;without&nbsp;setting&nbsp;BasicQos&nbsp;on&nbsp;channel,&nbsp;it&nbsp;seems&nbsp;it&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;is&nbsp;connecting&nbsp;to&nbsp;RabbitMQ&nbsp;everytime&nbsp;I&nbsp;call&nbsp;&amp;#39;consumer.Queue.Dequeue()&amp;#39;.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;Dequeue&nbsp;*never*&nbsp;triggers&nbsp;an&nbsp;interaction&nbsp;with&nbsp;the&nbsp;server.&nbsp;Messages&nbsp;are&nbsp;sent&nbsp;by&nbsp;the&nbsp;server&nbsp;to&nbsp;the&nbsp;client&nbsp;(and&nbsp;buffered&nbsp;in&nbsp;the&nbsp;consumer.Queue)&nbsp;in&nbsp;the&nbsp;background.&nbsp;Basic.Qos&nbsp;controls&nbsp;the&nbsp;flow&nbsp;of&nbsp;these&nbsp;messages.&nbsp;Without&nbsp;a&nbsp;prefetch&nbsp;limit,&nbsp;the&nbsp;server&nbsp;sends&nbsp;messages&nbsp;to&nbsp;the&nbsp;client&nbsp;as&nbsp;soon&nbsp;as&nbsp;they&nbsp;become&nbsp;available&nbsp;in&nbsp;the&nbsp;queue.&nbsp;With&nbsp;a&nbsp;prefetch&nbsp;limit&nbsp;of&nbsp;N,&nbsp;the&nbsp;server&nbsp;will&nbsp;send&nbsp;at&nbsp;most&nbsp;N&nbsp;message&nbsp;and&nbsp;then&nbsp;send&nbsp;no&nbsp;more&nbsp;until&nbsp;it&nbsp;receives&nbsp;one&nbsp;or&nbsp;more&nbsp;acks.&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Btw,&nbsp;you&nbsp;do&nbsp;realise&nbsp;that&nbsp;the&nbsp;Dequeue()&nbsp;operation&nbsp;is&nbsp;client-side&nbsp;only,&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;<br>
&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;right?&nbsp;i.e.&nbsp;it&nbsp;is&nbsp;simply&nbsp;manipulating&nbsp;a&nbsp;client&nbsp;side&nbsp;buffer&nbsp;which&nbsp;is&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;<br>
&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;filled&nbsp;as&nbsp;and&nbsp;when&nbsp;the&nbsp;client&nbsp;receives&nbsp;a&nbsp;message&nbsp;from&nbsp;the&nbsp;server.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;<br>
&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;yes,&nbsp;I&nbsp;understood&nbsp;that.&nbsp;When&nbsp;I&nbsp;set&nbsp;the&nbsp;prefetch&nbsp;to&nbsp;1000,&nbsp;at&nbsp;client&nbsp;side&nbsp;a&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;buffer&nbsp;is&nbsp;being&nbsp;maintained&nbsp;which&nbsp;will&nbsp;contain&nbsp;a&nbsp;maximum&nbsp;of&nbsp;1000&nbsp;messages.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&lt;span&gt;When&nbsp;I&nbsp;call&nbsp;dequeue,&nbsp;it&nbsp;is&nbsp;giving&nbsp;me&nbsp;the&nbsp;message&nbsp;from&nbsp;this&nbsp;buffer.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;The&nbsp;buffer&nbsp;is&nbsp;there&nbsp;regardless&nbsp;of&nbsp;Basic.Qos.&nbsp;But&nbsp;without&nbsp;Basic.Qos&nbsp;it&nbsp;can&nbsp;grow&nbsp;unbounded&nbsp;if&nbsp;the&nbsp;client&nbsp;app&nbsp;isn&amp;#39;t&nbsp;draining&nbsp;it&nbsp;fast&nbsp;enough.&nbsp;With&nbsp;Basic.Qos&nbsp;the&nbsp;size&nbsp;is&nbsp;bounded&nbsp;to&nbsp;the&nbsp;prefetch&nbsp;size.&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;And&nbsp;if&nbsp;there&nbsp;are&nbsp;less&nbsp;than&nbsp;1000&nbsp;messages&nbsp;in&nbsp;buffer,&nbsp;it&nbsp;refills&nbsp;the&nbsp;buffer&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&lt;span&gt;if&nbsp;there&nbsp;are&nbsp;any&nbsp;messages&nbsp;in&nbsp;the&nbsp;queue&nbsp;bound&nbsp;to&nbsp;it.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;The&nbsp;refilling&nbsp;is&nbsp;triggered&nbsp;by&nbsp;the&nbsp;client&nbsp;ack&amp;#39;ing&nbsp;messages.&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;Matthias.&lt;/span&gt;&lt;br&gt;&lt;span&gt;_______________________________________________&lt;/span&gt;&lt;br&gt;&lt;span&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
