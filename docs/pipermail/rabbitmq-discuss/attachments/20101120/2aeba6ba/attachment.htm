<tt>
This&nbsp;is&nbsp;helpful&nbsp;Mark!&lt;br&gt;&lt;br&gt;Since&nbsp;our&nbsp;8&nbsp;queues&nbsp;are&nbsp;going&nbsp;to&nbsp;handle&nbsp;lot&nbsp;of&nbsp;data,&nbsp;we&nbsp;can&nbsp;cluster&nbsp;8&nbsp;RabbitMQ&nbsp;nodes,&nbsp;each&nbsp;to&nbsp;serve&nbsp;a&nbsp;single&nbsp;queue&nbsp;and&nbsp;its&nbsp;contents.&nbsp;But&nbsp;there&nbsp;are&nbsp;two&nbsp;concerns:&lt;br&gt;&lt;br&gt;1.&nbsp;In&nbsp;the&nbsp;case&nbsp;a&nbsp;node&nbsp;(say,&nbsp;containing&nbsp;queue&nbsp;a)&nbsp;is&nbsp;down,&nbsp;how&nbsp;will&nbsp;the&nbsp;queue&nbsp;a&amp;#39;s&nbsp;consumers&nbsp;will&nbsp;get&nbsp;their&nbsp;messages?&lt;br&gt;<br>
<br>
&lt;br&gt;2.&nbsp;A&nbsp;load&nbsp;balancer&nbsp;like&nbsp;HA&nbsp;Proxy&nbsp;in&nbsp;front&nbsp;of&nbsp;these&nbsp;nodes&nbsp;will&nbsp;not&nbsp;be&nbsp;of&nbsp;any&nbsp;use&nbsp;since&nbsp;nodes&nbsp;are&nbsp;not&nbsp;similar.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;afraid&nbsp;that&nbsp;since&nbsp;we&nbsp;are&nbsp;neither&nbsp;getting&nbsp;&amp;quot;Load&nbsp;balancing&amp;quot;&nbsp;nor&nbsp;&amp;quot;High&nbsp;availability&amp;quot;, &nbsp;we&nbsp;will&nbsp;have&nbsp;to&nbsp;consider&nbsp;another&nbsp;broker.&lt;br&gt;<br>
<br>
&lt;br&gt;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;your&nbsp;thoughts&nbsp;about&nbsp;it.&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;Kshitiz&nbsp;Garg&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Nov&nbsp;19,&nbsp;2010&nbsp;at&nbsp;10:34&nbsp;PM,&nbsp;Marek&nbsp;Majkowski&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Fri,&nbsp;Nov&nbsp;19,&nbsp;2010&nbsp;at&nbsp;16:46,&nbsp;Kshitiz&nbsp;Garg&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:stephanion2002@gmail.com&quot;&gt;stephanion2002@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&amp;gt;&nbsp;Thanks&nbsp;for&nbsp;the&nbsp;reply&nbsp;Mark,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;In&nbsp;our&nbsp;case,&nbsp;we&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;1.&nbsp;Create&nbsp;two&nbsp;exchanges&nbsp;A&nbsp;and&nbsp;B&lt;br&gt;<br>
&amp;gt;&nbsp;2.&nbsp;Create&nbsp;8&nbsp;queues&nbsp;a,b,c,d,e,f,g,h&lt;br&gt;<br>
&amp;gt;&nbsp;3.&nbsp;Bind&nbsp;A,B&nbsp;to&nbsp;these&nbsp;queues.&lt;br&gt;<br>
&amp;gt;&nbsp;4.&nbsp;Consumer&nbsp;is&nbsp;listening&nbsp;to&nbsp;a,b,c,d,e,f,g,h&nbsp;......&lt;br&gt;<br>
&amp;gt;&nbsp;5.&nbsp;For&nbsp;the&nbsp;above&nbsp;operations,&nbsp;we&nbsp;are&nbsp;using&nbsp;two&nbsp;Rabbit&nbsp;MQ&nbsp;nodes&nbsp;in&nbsp;clustered&lt;br&gt;<br>
&amp;gt;&nbsp;mode.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Please&nbsp;let&nbsp;us&nbsp;know&nbsp;the&nbsp;behaviour&nbsp;of&nbsp;clustered&nbsp;RabbitMQs&nbsp;....&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Also,&nbsp;I&nbsp;could&nbsp;not&nbsp;understand&nbsp;the&nbsp;statement&nbsp;&amp;quot;all&nbsp;the&nbsp;traffic&nbsp;to&nbsp;a&nbsp;queue&nbsp;gets&lt;br&gt;<br>
&amp;gt;&nbsp;forwarded&nbsp;to&nbsp;one&nbsp;particular&nbsp;node.&amp;quot; &nbsp;(we&nbsp;send&nbsp;the&nbsp;messages&nbsp;to&nbsp;an&nbsp;exchange&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;not&nbsp;a&nbsp;queue,&nbsp;isn&amp;#39;t&nbsp;it&nbsp;?)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Right.&nbsp;I&nbsp;said&nbsp;it&amp;#39;s&nbsp;complex&nbsp;:)&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;the&nbsp;metadata&nbsp;lives&nbsp;in&nbsp;a&nbsp;replicated&nbsp;Erlang&nbsp;database&nbsp;(mnesia).&nbsp;That&nbsp;includes:&lt;br&gt;<br>
exchanges,&nbsp;bindings,&nbsp;credentials&nbsp;and&nbsp;so&nbsp;on.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;if&nbsp;you&nbsp;update&nbsp;anything&nbsp;of&nbsp;that&nbsp;-&nbsp;it&nbsp;will&nbsp;be&nbsp;immediately&nbsp;visible&lt;br&gt;<br>
in&nbsp;the&nbsp;whole&nbsp;cluster.&nbsp;In&nbsp;other&nbsp;words:&nbsp;when&nbsp;you&nbsp;create&nbsp;an&nbsp;exchange&lt;br&gt;<br>
A&nbsp;on&nbsp;node&nbsp;1,&nbsp;that&nbsp;will&nbsp;automatically&nbsp;create&nbsp;exchange&nbsp;A&nbsp;on&nbsp;node&nbsp;2.&lt;br&gt;<br>
&lt;br&gt;<br>
Now,&nbsp;with&nbsp;queues&nbsp;that&amp;#39;s&nbsp;more&nbsp;complex.&nbsp;When&nbsp;you&nbsp;connect&nbsp;to&nbsp;node&nbsp;1&lt;br&gt;<br>
and&nbsp;do&nbsp;queue_declare(xx),&nbsp;you&nbsp;are&nbsp;actually&nbsp;creating&nbsp;a&nbsp;queue&nbsp;on&lt;br&gt;<br>
that&nbsp;particular&nbsp;node.&nbsp;This&nbsp;information&nbsp;(queue&nbsp;xx&nbsp;is&nbsp;created&nbsp;on&nbsp;node&nbsp;1)&lt;br&gt;<br>
is&nbsp;shared&nbsp;with&nbsp;other&nbsp;nodes.&nbsp;All&nbsp;the&nbsp;nodes&nbsp;know&nbsp;that&nbsp;a&nbsp;location&nbsp;of&lt;br&gt;<br>
queue&nbsp;xx&nbsp;is&nbsp;node1.&lt;br&gt;<br>
&lt;br&gt;<br>
Whenever&nbsp;you&nbsp;publish&nbsp;stuff,&nbsp;to&nbsp;whatever&nbsp;node,&nbsp;the&nbsp;message&lt;br&gt;<br>
is&nbsp;pushed&nbsp;to&nbsp;a&nbsp;local&nbsp;exchange&nbsp;(as&nbsp;mentioned&nbsp;before,&nbsp;exchanges&lt;br&gt;<br>
are&nbsp;&amp;#39;copied&amp;#39;&nbsp;to&nbsp;every&nbsp;node).&nbsp;Next&nbsp;step&nbsp;after&nbsp;the&nbsp;exchange&lt;br&gt;<br>
is&nbsp;the&nbsp;binding.&nbsp;The&nbsp;bindings&nbsp;are&nbsp;also&nbsp;&amp;#39;copied&amp;#39;&nbsp;to&nbsp;all&nbsp;the&nbsp;nodes.&lt;br&gt;<br>
At&nbsp;that&nbsp;point&nbsp;the&nbsp;node&nbsp;knows:&nbsp;this&nbsp;message&nbsp;should&nbsp;go&nbsp;to&nbsp;a&nbsp;queue&nbsp;xx.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;node&nbsp;looks&nbsp;up&nbsp;where&nbsp;the&nbsp;queue&nbsp;lives&nbsp;and&nbsp;pushes&nbsp;a&nbsp;message&nbsp;to&lt;br&gt;<br>
a&nbsp;particular&nbsp;node&nbsp;that&nbsp;holds&nbsp;queue&nbsp;xx.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;once&nbsp;again:&nbsp;exchanges&nbsp;and&nbsp;bindings&nbsp;are&nbsp;replicated,&nbsp;they&lt;br&gt;<br>
are&nbsp;the&nbsp;same&nbsp;for&nbsp;every&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster.&lt;br&gt;<br>
Queue&nbsp;on&nbsp;the&nbsp;other&nbsp;hand&nbsp;lives&nbsp;on&nbsp;a&nbsp;particular&nbsp;node&nbsp;(actually&lt;br&gt;<br>
on&nbsp;the&nbsp;node&nbsp;that&nbsp;&amp;#39;queue_declare&amp;#39;&nbsp;was&nbsp;executed).&lt;br&gt;<br>
&lt;br&gt;<br>
Clustering&nbsp;!=&nbsp;HA&lt;br&gt;<br>
(the&nbsp;messages&nbsp;(queue&nbsp;contents)&nbsp;live&nbsp;on&nbsp;a&nbsp;single&nbsp;node)&lt;br&gt;<br>
&lt;br&gt;<br>
(I&amp;#39;m&nbsp;sure&nbsp;my&nbsp;friends&nbsp;from&nbsp;the&nbsp;team&nbsp;will&nbsp;clarify&nbsp;if&nbsp;I&nbsp;got&nbsp;the&nbsp;details&nbsp;wrong)&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;this&nbsp;description&nbsp;any&nbsp;better?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&nbsp; Marek&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
