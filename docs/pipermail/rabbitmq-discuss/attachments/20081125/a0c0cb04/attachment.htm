<tt>
Hi:&lt;br&gt;&amp;nbsp;&nbsp;I&nbsp;want&nbsp;to&nbsp;ask&nbsp;a&nbsp;question&nbsp;about&nbsp;the&nbsp;rabbitmq&nbsp;best&nbsp;practice.&nbsp;I&nbsp;just&nbsp;want&nbsp;an&nbsp;end&nbsp;to&nbsp;end&nbsp;message&nbsp;queue&nbsp;that&nbsp;assure&nbsp;all&nbsp;the&nbsp;message&nbsp;delivered&nbsp;would&nbsp;be&nbsp;handled&nbsp;by&nbsp;an&nbsp;consumer.&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;declare&nbsp;an&nbsp;exchange&nbsp;on&nbsp;the&nbsp;consumer&nbsp;end&nbsp;with&nbsp;auto_delete&nbsp;off&nbsp;and&nbsp;durable&nbsp;on,&nbsp;bind&nbsp;the&nbsp;exchange&nbsp;with&nbsp;a&nbsp;queue&nbsp;with&nbsp;durable&nbsp;on&nbsp;and&nbsp;auto_delete&nbsp;off.&nbsp;On&nbsp;the&nbsp;publisher&nbsp;end&nbsp;I&nbsp;declare&nbsp;exchange&nbsp;with&nbsp;passive&nbsp;on(&nbsp;prevent&nbsp;exchange&nbsp;name&nbsp;typo).&nbsp;But&nbsp;the&nbsp;question&nbsp;is&nbsp;that&nbsp;if&nbsp;consumer&nbsp;is&nbsp;down,&nbsp;the&nbsp;message&nbsp;delivered&nbsp;by&nbsp;the&nbsp;publisher&nbsp;during&nbsp;the&nbsp;down&nbsp;time&nbsp;can&nbsp;not&nbsp;be&nbsp;fetched&nbsp;by&nbsp;the&nbsp;consumer.&nbsp;And&nbsp;I&nbsp;found&nbsp;in&nbsp;this&nbsp;situation,&nbsp;even&nbsp;with&nbsp;the&nbsp;basic&nbsp;publish&nbsp;function&amp;#39;s&nbsp;mandatory&nbsp;and&nbsp;immediate&nbsp;both&nbsp;on,&nbsp;the&nbsp;java&nbsp;client&nbsp;would&nbsp;keep&nbsp;silent&nbsp;and&nbsp;the&nbsp;python(amqplib)&nbsp;client&nbsp;would&nbsp;throw&nbsp;a&nbsp;exception&nbsp;until&nbsp;the&nbsp;channel&nbsp;close.&nbsp;Does&nbsp;the&nbsp;server&nbsp;receive&nbsp;the&nbsp;message&nbsp;and&nbsp;how&nbsp;should&nbsp;I&nbsp;consume&nbsp;the&nbsp;message&nbsp;after&nbsp;the&nbsp;consumer&nbsp;has&nbsp;restarted?&lt;br&gt;<br>
&amp;nbsp;&nbsp;Any&nbsp;comment&nbsp;or&nbsp;suggustion&nbsp;is&nbsp;welcome!&nbsp;Thanks!&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Yin&nbsp;Chen&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.douban.com/people/subdragon/&quot;&gt;http://www.douban.com/people/subdragon/&lt;/a&gt;&lt;br&gt;<br>

</tt>
