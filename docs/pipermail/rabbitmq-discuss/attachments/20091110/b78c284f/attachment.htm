<tt>
Hi&nbsp;Mathew..&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Nov&nbsp;10,&nbsp;2009&nbsp;at&nbsp;8:46&nbsp;PM,&nbsp;Matthew&nbsp;Sackman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthew@lshift.net&quot;&gt;matthew@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Hi&nbsp;Arun,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;Nov&nbsp;09,&nbsp;2009&nbsp;at&nbsp;07:58:36AM&nbsp;+0530,&nbsp;Arun&nbsp;Suresh&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Can&nbsp;you&nbsp;elaborate&nbsp;on&nbsp;this&nbsp;issue&nbsp;a&nbsp;bit?&nbsp;Is&nbsp;this&nbsp;redirection&nbsp;coming&nbsp;back&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;from&nbsp;the&nbsp;server?&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Yes..&nbsp;I&nbsp;guess&nbsp;its&nbsp;a&nbsp;redirection&nbsp;request&nbsp;coming&nbsp;from&nbsp;the&nbsp;server..&lt;br&gt;<br>
&amp;gt;&nbsp;basicaly..&nbsp;the&nbsp;response&nbsp;to&nbsp;my&nbsp;&amp;#39;connection.open&amp;#39;&nbsp;request&nbsp;is&nbsp;a&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;#39;conncetion.redirect&amp;#39;&nbsp;which&nbsp;on&nbsp;recipt,&nbsp;the&nbsp;client&nbsp;throws&nbsp;an&nbsp;exception&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;exits..&lt;br&gt;<br>
&amp;gt;&nbsp;ive&nbsp;gotten&nbsp;around&nbsp;this&nbsp;issue&nbsp;by&nbsp;setting&nbsp;&amp;#39;insist&nbsp;=&nbsp;true&amp;#39;&nbsp;in&nbsp;the&nbsp;request&lt;br&gt;<br>
&amp;gt;&nbsp;record...&lt;br&gt;<br>
&amp;gt;&nbsp;Maybe&nbsp;ill&nbsp;look&nbsp;at&nbsp;the&nbsp;Java&nbsp;client&nbsp;and&nbsp;see&nbsp;whats&nbsp;done&nbsp;there&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;The&nbsp;redirection&nbsp;stuff&nbsp;has&nbsp;gone&nbsp;from&nbsp;AMQP&nbsp;0.9.1&nbsp;so&nbsp;there&amp;#39;s&nbsp;not&nbsp;a&nbsp;huge&lt;br&gt;<br>
need&nbsp;to&nbsp;worry&nbsp;about&nbsp;it&nbsp;if&nbsp;you&amp;#39;re&nbsp;just&nbsp;experimenting&nbsp;for&nbsp;the&nbsp;time&nbsp;being.&lt;br&gt;<br>
The&nbsp;idea&nbsp;is&nbsp;that&nbsp;in&nbsp;a&nbsp;cluster,&nbsp;a&nbsp;node&nbsp;can&nbsp;request&nbsp;that&nbsp;you&nbsp;change&nbsp;the&lt;br&gt;<br>
connection&nbsp;to&nbsp;a&nbsp;different&nbsp;node,&nbsp;for&nbsp;load&nbsp;balancing&nbsp;reasons.&nbsp;The&nbsp;Java&nbsp;and&lt;br&gt;<br>
.Net&nbsp;clients&nbsp;both&nbsp;detect&nbsp;these&nbsp;errors&nbsp;and&nbsp;attempt&nbsp;to&nbsp;obey&nbsp;the&lt;br&gt;<br>
redirection&nbsp;requests.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Well&nbsp;client@m1&nbsp;died.&nbsp;This&nbsp;means&nbsp;its&nbsp;subscriptions&nbsp;to&nbsp;Q&nbsp;were&nbsp;lost&nbsp;-&nbsp;there&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;is&nbsp;no&nbsp;concept&nbsp;of&nbsp;persisting&nbsp;subscriptions,&nbsp;so&nbsp;when&nbsp;rabbit@m1&nbsp;comes&nbsp;back&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;up,&nbsp;the&nbsp;Q&nbsp;will&nbsp;have&nbsp;no&nbsp;consumers&nbsp;at&nbsp;all.&nbsp;If&nbsp;you&nbsp;restart&nbsp;client@m2&nbsp;then&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;yes,&nbsp;it&amp;#39;ll&nbsp;recreate&nbsp;its&nbsp;subscription&nbsp;to&nbsp;Q,&nbsp;and&nbsp;thus&nbsp;receive&nbsp;all&nbsp;the&nbsp;msgs&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;sent&nbsp;to&nbsp;that&nbsp;Q.&nbsp;If&nbsp;you&nbsp;also&nbsp;restart&nbsp;client@m1&nbsp;then&nbsp;that&nbsp;too&nbsp;will&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;recreate&nbsp;its&nbsp;subscription&nbsp;to&nbsp;Q&nbsp;and&nbsp;share&nbsp;the&nbsp;msgs&nbsp;with&nbsp;client@m2&nbsp;as&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;before.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Confirms&nbsp;what&nbsp;ive&nbsp;been&nbsp;thinking...&nbsp;But&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;for&nbsp;clients&nbsp;to&nbsp;be&lt;br&gt;<br>
&amp;gt;&nbsp;notified&nbsp;of&nbsp;dead&nbsp;subscriptions&nbsp;?&nbsp;That&nbsp;would&nbsp;be&nbsp;helpful,&nbsp;else&nbsp;i&nbsp;would&nbsp;have&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;keep&nbsp;polling&nbsp;something&nbsp;to&nbsp;get&nbsp;that&nbsp;information..&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Well,&nbsp;you&nbsp;could&nbsp;simply&nbsp;check&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;socket&nbsp;is&nbsp;still&nbsp;open.&nbsp;If&nbsp;the&lt;br&gt;<br>
broker&nbsp;goes&nbsp;down&nbsp;then&nbsp;your&nbsp;network&nbsp;socket&nbsp;from&nbsp;the&nbsp;client&nbsp;will&nbsp;also&nbsp;go&lt;br&gt;<br>
down.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;:)&nbsp;thing&nbsp;is..&nbsp;I&nbsp;have&nbsp;clients&nbsp;connected&nbsp;to&nbsp;the&nbsp;RabbitMQ&nbsp;instance&nbsp;that&nbsp;DIDNT&nbsp;go&nbsp;down..&nbsp;but&nbsp;have&nbsp;subscriptions&nbsp;to&nbsp;Queues&nbsp;persisted&nbsp;on&nbsp;the&nbsp;instance&nbsp;that&nbsp;did..&lt;/div&gt;&lt;div&gt;These&nbsp;clients&nbsp;wont&nbsp;know&nbsp;if&nbsp;queue&nbsp;is&nbsp;gone&nbsp;or&nbsp;not... &lt;/div&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Matthew&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;-Arun<br>

</tt>
