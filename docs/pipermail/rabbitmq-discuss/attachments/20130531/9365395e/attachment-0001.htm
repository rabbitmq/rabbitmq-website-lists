<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;thank&nbsp;you&nbsp;very&nbsp;much!&lt;img&nbsp;src=&quot;cid:332@goomoji.gmail&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0.2ex;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.2ex;&nbsp;vertical-align:&nbsp;middle;&nbsp;&quot;&nbsp;goomoji=&quot;332&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/5/30&nbsp;Emile&nbsp;Joubert&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Hi,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;27/05/13&nbsp;16:12,&nbsp;bupt&nbsp;bupt&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;1.&nbsp;Can&nbsp;you&nbsp;give&nbsp;me&nbsp;an&nbsp;example(internet&nbsp;address&nbsp;is&nbsp;ok)&nbsp;about&nbsp;how&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;finish&nbsp;flow&nbsp;control&nbsp;if&nbsp;the&nbsp;length&nbsp;of&nbsp;queue&nbsp;is&nbsp;too&nbsp;big&nbsp;or&nbsp;if&nbsp;the&nbsp;used&lt;br&gt;<br>
&amp;gt;&nbsp;memory&nbsp;and&nbsp;disc&nbsp;near&nbsp;the&nbsp;threshold.&nbsp;Can&nbsp;you&nbsp;give&nbsp;me&nbsp;some&nbsp;client&lt;br&gt;<br>
&amp;gt;&nbsp;code(python&nbsp;or&nbsp;Java)&nbsp;to&nbsp;help&nbsp;me&nbsp;use&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;If&nbsp;I&nbsp;understand&nbsp;correctly&nbsp;you&nbsp;have&nbsp;a&nbsp;broker&nbsp;with&nbsp;disk&nbsp;free&nbsp;space&nbsp;close&lt;br&gt;<br>
to&nbsp;the&nbsp;disk&nbsp;free&nbsp;limit&nbsp;or&nbsp;memory&nbsp;use&nbsp;close&nbsp;to&nbsp;the&nbsp;high&nbsp;watermark,&nbsp;and&lt;br&gt;<br>
you&nbsp;want&nbsp;to&nbsp;disable&nbsp;resource&nbsp;flow&nbsp;control.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;should&nbsp;be&nbsp;aware&nbsp;that&nbsp;disabling&nbsp;resource&nbsp;flow&nbsp;control&nbsp;will&nbsp;make&nbsp;the&lt;br&gt;<br>
broker&nbsp;more&nbsp;likely&nbsp;to&nbsp;run&nbsp;out&nbsp;of&nbsp;resources&nbsp;and&nbsp;crash.&nbsp;A&nbsp;better&nbsp;solution&lt;br&gt;<br>
is&nbsp;to&nbsp;provision&nbsp;the&nbsp;broker&nbsp;with&nbsp;more&nbsp;resources.&nbsp;You&nbsp;should&nbsp;only&nbsp;relax&lt;br&gt;<br>
the&nbsp;resource&nbsp;limits&nbsp;if&nbsp;your&nbsp;application&nbsp;can&nbsp;tolerate&nbsp;the&nbsp;increased&nbsp;risk&lt;br&gt;<br>
of&nbsp;a&nbsp;crashing&nbsp;broker.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;relax&nbsp;memory&nbsp;flow&nbsp;control&nbsp;by&nbsp;increasing&nbsp;the&nbsp;memory&nbsp;high&lt;br&gt;<br>
watermark&nbsp;from&nbsp;40%&nbsp;to&nbsp;50%&nbsp;or&nbsp;higher,&nbsp;e.g.&lt;br&gt;<br>
&lt;br&gt;<br>
 rabbitmqctl&nbsp;set_vm_memory_high_watermark&nbsp;0.5&lt;br&gt;<br>
&lt;br&gt;<br>
Setting&nbsp;it&nbsp;to&nbsp;an&nbsp;infeasibly&nbsp;large&nbsp;ration&nbsp;effectively&nbsp;disables&nbsp;memory&lt;br&gt;<br>
flow&nbsp;control:&lt;br&gt;<br>
&lt;br&gt;<br>
 rabbitmqctl&nbsp;set_vm_memory_high_watermark&nbsp;100.0&lt;br&gt;<br>
&lt;br&gt;<br>
These&nbsp;instructions&nbsp;will&nbsp;change&nbsp;the&nbsp;limits&nbsp;for&nbsp;a&nbsp;running&nbsp;broker.&nbsp;See&nbsp;the&lt;br&gt;<br>
instructions&nbsp;here&nbsp;for&nbsp;how&nbsp;to&nbsp;make&nbsp;the&nbsp;changes&nbsp;permanent&nbsp;by&nbsp;changing&nbsp;the&lt;br&gt;<br>
configuration&nbsp;file:&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/memory.html#memsup&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/memory.html#memsup&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reduce&nbsp;the&nbsp;disk&nbsp;free&nbsp;limit&nbsp;by&nbsp;specifying&nbsp;a&nbsp;lower&nbsp;limit:&lt;br&gt;<br>
&lt;br&gt;<br>
 rabbitmqctl&nbsp;eval&nbsp;&amp;#39;rabbit_disk_monitor:set_disk_free_limit(500000000).&amp;#39;&lt;br&gt;<br>
&lt;br&gt;<br>
or&nbsp;disable&nbsp;it&nbsp;by&nbsp;setting&nbsp;the&nbsp;limit&nbsp;to&nbsp;zero:&lt;br&gt;<br>
&lt;br&gt;<br>
 rabbitmqctl&nbsp;eval&nbsp;&amp;#39;rabbit_disk_monitor:set_disk_free_limit(0).&amp;#39;&lt;br&gt;<br>
&lt;br&gt;<br>
See&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/memory.html#diskfreesup&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/memory.html#diskfreesup&lt;/a&gt;&nbsp;for&nbsp;persisting&nbsp;the&lt;br&gt;<br>
change&nbsp;in&nbsp;the&nbsp;configuration&nbsp;file.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;2.&nbsp;I&nbsp;have&nbsp;read&nbsp;document&nbsp;about&nbsp;how&nbsp;to&nbsp;set&nbsp;up&nbsp;rabbitmq&nbsp;cluster&lt;br&gt;<br>
&amp;gt;&nbsp;by&amp;quot;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/clustering.html&lt;/a&gt;&amp;quot;&nbsp;But&nbsp;who&nbsp;is&nbsp;master&nbsp;and&nbsp;who&nbsp;is&lt;br&gt;<br>
&amp;gt;&nbsp;cluster,&nbsp;It&nbsp; doesn&amp;#39;t&nbsp;tell&nbsp;us.&nbsp;which&nbsp;broker&nbsp;manage&nbsp;all&nbsp;the&nbsp;nodes&nbsp;in&lt;br&gt;<br>
&amp;gt;&nbsp;cluster?&nbsp;I&nbsp;didn&amp;#39;t&nbsp;see&nbsp;any&nbsp;mirror&nbsp;queue&nbsp;in&nbsp;this&nbsp;address,&nbsp;Can&nbsp;this&nbsp;cluster&lt;br&gt;<br>
&amp;gt;&nbsp;still&nbsp;be&nbsp;HA&nbsp;cluster?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;There&nbsp;is&nbsp;no&nbsp;global&nbsp;master.&nbsp;Queues&nbsp;can&nbsp;have&nbsp;different&nbsp;policies,&nbsp;so&nbsp;there&lt;br&gt;<br>
is&nbsp;a&nbsp;master&nbsp;node&nbsp;per&nbsp;queue&nbsp;(assuming&nbsp;the&nbsp;queue&nbsp;is&nbsp;mirrored).&nbsp;See&nbsp;the&lt;br&gt;<br>
&amp;quot;rabbitmqctl&nbsp;list_queues&amp;quot;&nbsp;documentation&nbsp;for&nbsp;querying&nbsp;the&nbsp;master&nbsp;and&lt;br&gt;<br>
slave&nbsp;nodes&nbsp;for&nbsp;queues:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/man/rabbitmqctl.1.man.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/man/rabbitmqctl.1.man.html&lt;/a&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;3.&nbsp;Is&nbsp;every&nbsp;message&nbsp;has&nbsp;length&nbsp;and&nbsp;size&nbsp;limit?&nbsp;what&nbsp;is&nbsp;the&nbsp;maximum&nbsp;size&lt;br&gt;<br>
&amp;gt;&nbsp;of&nbsp;every&nbsp;message?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Messages&nbsp;can&nbsp;be&nbsp;as&nbsp;large&nbsp;as&nbsp;you&nbsp;like,&nbsp;but&nbsp;they&nbsp;should&nbsp;not&nbsp;consume&nbsp;a&lt;br&gt;<br>
significant&nbsp;fraction&nbsp;of&nbsp;total&nbsp;available&nbsp;RAM.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;process&lt;br&gt;<br>
extremely&nbsp;large&nbsp;messages&nbsp;then&nbsp;you&nbsp;need&nbsp;alot&nbsp;of&nbsp;RAM.&lt;br&gt;<br>
&lt;br&gt;<br>
Queue&nbsp;length&nbsp;can&nbsp;be&nbsp;limited&nbsp;with&nbsp;the&nbsp;x-max-length&nbsp;argument.&nbsp;See&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/maxlength.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/maxlength.html&lt;/a&gt;.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
