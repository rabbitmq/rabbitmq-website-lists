[From nobody Thu Apr 22 23:08:25 2010
Return-path: &lt;debbugs@rietz.debian.org&gt;
Envelope-to: jewel@subvert-the-dominant-paradigm.net
Delivery-date: Sun, 29 Nov 2009 04:33:29 +0000
Received: from Debian-exim by subvert-the-dominant-paradigm.net with
	spam-scanned (Exim 4.63) (envelope-from &lt;debbugs@rietz.debian.org&gt;) id
	1NEbTS-0005yb-IZ for jewel@subvert-the-dominant-paradigm.net;
	Sun, 29 Nov 2009 04:33:29 +0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on
	subvert-the-dominant-paradigm.net
X-Spam-Level: 
X-Spam-Status: No, score=-2.7 required=4.9 tests=BAYES_00,RCVD_IN_DNSWL_LOW
	autolearn=ham version=3.2.4
Received: from rietz.debian.org ([140.211.166.43]) by
	subvert-the-dominant-paradigm.net with esmtp (Exim 4.63) (envelope-from
	&lt;debbugs@rietz.debian.org&gt;) id 1NEbTS-0005yX-DA for
	jewel@subvert-the-dominant-paradigm.net; Sun, 29 Nov 2009 04:33:26 +0000
Received: from debbugs by rietz.debian.org with local (Exim 4.63)
	(envelope-from &lt;debbugs@rietz.debian.org&gt;) id 1NEbz6-0002YG-4b;
	Sun, 29 Nov 2009 05:06:08 +0000
X-Loop: owner@bugs.debian.org
Subject: Bug#558462: rabbitmq-server logs in as rabbitmq and hangs on
	pam_mount password prompt
Reply-To: Florin Iucha &lt;florin@iucha.net&gt;, 558462@bugs.debian.org
Resent-From: Florin Iucha &lt;florin@iucha.net&gt;
Resent-To: debian-bugs-dist@lists.debian.org
Resent-CC: John Leuner &lt;jewel@debian.org&gt;
X-Loop: owner@bugs.debian.org
Resent-Date: Sun, 29 Nov 2009 05:06:05 +0000
Resent-Message-ID: &lt;handler.558462.B.12594709168019@bugs.debian.org&gt;
X-Debian-PR-Message: report 558462
X-Debian-PR-Package: rabbitmq-server
X-Debian-PR-Keywords: 
X-Debian-PR-Source: rabbitmq-server
Received: via spool by submit@bugs.debian.org id=B.12594709168019 (code B
	ref -1); Sun, 29 Nov 2009 05:06:05 +0000
Received: (at submit) by bugs.debian.org; 29 Nov 2009 05:01:56 +0000
Received: from iucha.net ([209.98.146.184] helo=mail.iucha.net) by
	rietz.debian.org with esmtp (Exim 4.63) (envelope-from
	&lt;florin@iucha.net&gt;) id 1NEbv1-000254-NF for submit@bugs.debian.org;
	Sun, 29 Nov 2009 05:01:56 +0000
Received: from localhost (iris.iucha.org [127.0.0.1]) by mail.iucha.net
	(Postfix) with ESMTP id A81F941094 for &lt;submit@bugs.debian.org&gt;; Sat, 28
	Nov 2009 22:32:18 -0600 (CST)
X-Virus-Scanned: amavisd-new at iucha.org
Received: from mail.iucha.net ([127.0.0.1]) by localhost (iris.iucha.org
	[127.0.0.1]) (amavisd-new, port 10024) with LMTP id YkD+KpH-DfNq for
	&lt;submit@bugs.debian.org&gt;; Sat, 28 Nov 2009 22:32:17 -0600 (CST)
Received: from iris.iucha.org (iris.iucha.org [127.0.0.1]) (using TLSv1
	with cipher AES128-SHA (128/128 bits)) (No client certificate
	requested)
	(Authenticated sender: florin) by mail.iucha.net (Postfix) with ESMTP
	id
	1B69141093 for &lt;submit@bugs.debian.org&gt;; Sat, 28 Nov 2009 22:32:17 -0600
	(CST)
Date: Sat, 28 Nov 2009 22:32:15 -0600
From: Florin Iucha &lt;florin@iucha.net&gt;
To: Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;
Message-ID: &lt;20091129042756.20561.27378.reportbug@zeus.iucha.org&gt;
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol=&quot;application/pgp-signature&quot;; boundary=&quot;yO52jeZL+8sEiVPY&quot;
Content-Disposition: inline
X-Mailer: reportbug 4.8
User-Agent: Mutt/1.5.17 (2007-11-01)
X-Greylist: delayed 1775 seconds by postgrey-1.27 at rietz; Sun, 29 Nov
	2009 05:01:55 UTC
Delivered-To: submit@bugs.debian.org
Resent-Sender: Debian BTS &lt;debbugs@rietz.debian.org&gt;
Resent-Date: Sun, 29 Nov 2009 05:06:08 +0000


--yO52jeZL+8sEiVPY
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Package: rabbitmq-server
Version: 1.7.0-3
Severity: important


I am trying to install rabbitmq-server on my debian testing/unstable amd64
machine and I am having difficulties.

This is the output from &quot;apt-get install rabbitmq-server&quot;:

The following NEW packages will be installed:
  rabbitmq-server
0 upgraded, 1 newly installed, 0 to remove and 279 not upgraded.
Need to get 0B/469kB of archives.
After this operation, 967kB of additional disk space will be used.
Selecting previously deselected package rabbitmq-server.
(Reading database ... 166501 files and directories currently installed.)
Unpacking rabbitmq-server (from .../rabbitmq-server_1.7.0-3_all.deb) ...
Processing triggers for man-db ...
Setting up rabbitmq-server (1.7.0-3) ...
Adding group `rabbitmq' (GID 121) ...
Done.
Adding system user `rabbitmq' (UID 112) ...
Adding new user `rabbitmq' (UID 112) with group `rabbitmq' ...
Not creating home directory `/var/lib/rabbitmq'.
Starting rabbitmq-server:=20

At this point, dpkg waits forever.

The only thing in /var/log/rabbitmq is:

zeus:~# cd /var/log/rabbitmq/
zeus:/var/log/rabbitmq# ls -la
total 8
drwxr-xr-x  2 rabbitmq rabbitmq   42 2009-11-28 22:16 .
drwxr-xr-x 15 root     root     4096 2009-11-28 22:16 ..
-rw-r--r--  1 root     root       31 2009-11-28 22:16 startup_err
-rw-r--r--  1 root     root        0 2009-11-28 22:16 startup_log
zeus:/var/log/rabbitmq# cat startup_err=20
reenter password for pam_mount:zeus:/var/log/rabbitmq#=20

The home directories on this box are mounted over CIFS, so I'm using
pam-mount and the option is &quot;required&quot;.

Is there something that can be done so rabbitmq doesn't go through PAM
and doesn't get hung up on trying to mount some remote filesystems?

-- System Information:
Debian Release: squeeze/sid
  APT prefers testing
  APT policy: (990, 'testing'), (700, 'unstable')
Architecture: amd64 (x86_64)

Kernel: Linux 2.6.30-2-amd64 (SMP w/2 CPU cores)
Locale: LANG=3Den_US.UTF-8, LC_CTYPE=3Den_US.UTF-8 (charmap=3DUTF-8)
Shell: /bin/sh linked to /bin/bash

Versions of packages rabbitmq-server depends on:
ii  adduser                3.111             add and remove users and groups
ii  erlang-base            1:13.b.2.1-dfsg-1 Erlang/OTP virtual machine and=
 bas
ii  erlang-mnesia          1:13.b.2.1-dfsg-1 Erlang/OTP distributed relatio=
nal/
ii  erlang-os-mon          1:13.b.2.1-dfsg-1 Erlang/OTP operating system mo=
nito
ii  erlang-ssl             1:13.b.2.1-dfsg-1 Erlang/OTP implementation of S=
SL
ii  logrotate              3.7.8-4           Log rotation utility

rabbitmq-server recommends no packages.

rabbitmq-server suggests no packages.

-- no debconf information

--yO52jeZL+8sEiVPY
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQFLEflPND0rFCN2b1sRAnqzAKCnLtxMqSFFwpv0rzCCl8/+mHSAqQCfQBzg
teH+69ncgv0GIS5enQwgcRQ=
=gr0J
-----END PGP SIGNATURE-----

--yO52jeZL+8sEiVPY--


]