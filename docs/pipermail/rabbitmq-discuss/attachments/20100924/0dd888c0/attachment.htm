<tt>
Hi&nbsp;All&lt;br&gt;I&nbsp;have&nbsp;a&nbsp;problem/doubt&nbsp;with&nbsp;a&nbsp;rabbit&nbsp;queue&lt;br&gt;&lt;br&gt;I&nbsp;need&nbsp;that&nbsp;25&nbsp;threads&nbsp;consume&nbsp;one&nbsp;rabbit&nbsp;queue.&nbsp;&lt;br&gt;&lt;br&gt;In&nbsp;this&nbsp;moment,&nbsp;I&nbsp;have&nbsp;an&nbsp;unique&nbsp;channel&nbsp;and&nbsp;consumer&nbsp;in&nbsp;a&nbsp;main&nbsp;thread,&nbsp;it&nbsp;consume&nbsp;the&nbsp;queue&nbsp;and&nbsp;save&nbsp;the&nbsp;content&nbsp;in&nbsp;a&nbsp;normal&nbsp;java&nbsp;queue.&nbsp;&lt;br&gt;<br>
<br>
&lt;br&gt;The&nbsp;sons&nbsp;threads&nbsp;get&nbsp;the&nbsp;tasks&nbsp;from&nbsp;java&nbsp;queue,&nbsp;i&nbsp;want&nbsp;know&nbsp;how&nbsp;can&nbsp;I&nbsp;send&nbsp;one&nbsp;delay&nbsp;ack&nbsp;because&nbsp;my&nbsp;main&nbsp;thread&nbsp;can&nbsp;not&nbsp;follow&nbsp;consuming&nbsp;the&nbsp;rabbit&nbsp;queue&nbsp;if&nbsp;i&nbsp;does&nbsp;not&nbsp;send&nbsp;the&nbsp;ack&nbsp;inmediately.&nbsp;&lt;br&gt;&lt;br&gt;When&nbsp;the&nbsp;task&nbsp;finishs&nbsp;correctly&nbsp;in&nbsp;a&nbsp;son&nbsp;thread,&nbsp;it&nbsp;saves&nbsp;the&nbsp;task&nbsp;in&nbsp;a&nbsp;second&nbsp;queue&nbsp;that&nbsp;main&nbsp;thread&nbsp;read&nbsp;and&nbsp;send&nbsp;the&nbsp;ack&nbsp;for&nbsp;this&nbsp;task&nbsp;to&nbsp;eliminate&nbsp;the&nbsp;task&nbsp;from&nbsp;rabbit&nbsp;queue.&nbsp;&lt;br&gt;<br>
<br>
&lt;br&gt;Is&nbsp;it&nbsp;possible&nbsp;this??&nbsp;or&nbsp;is&nbsp;it&nbsp;better&nbsp;that&nbsp;i&nbsp;have&nbsp;one&nbsp;syncronize&nbsp;channel&nbsp;and&nbsp;one&nbsp;syncronize&nbsp;consumer&nbsp;and&nbsp;that&nbsp;all&nbsp;threads&nbsp;consume&nbsp;the&nbsp;rabbit&nbsp;queue?&lt;br&gt;&lt;br&gt;I&nbsp;show&nbsp;you&nbsp;the&nbsp;code&nbsp;that&nbsp;consume&nbsp;the&nbsp;queues&lt;br&gt;&lt;br&gt;        &nbsp;try{&lt;br&gt;<br>
<br>
               &nbsp;ConnectionFactory&nbsp;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;br&gt;&lt;br&gt;               &nbsp;factory.setUsername(GesAgregaConstant.USER_RABBITMQ);&lt;br&gt;               &nbsp;factory.setPassword(GesAgregaConstant.PASS_RABBITMQ);&lt;br&gt;<br>
<br>
               &nbsp;factory.setVirtualHost(GesAgregaConstant.VIRTUALHOST_RABBITMQ);&lt;br&gt;               &nbsp;factory.setRequestedHeartbeat(0);&lt;br&gt;               &nbsp;factory.setHost(GesAgregaConstant.SERVER_HOST_RABBITMQ);&lt;br&gt;               &nbsp;factory.setPort(GesAgregaConstant.SERVER_PORT_RABBITMQ);&lt;br&gt;<br>
<br>
&lt;br&gt;               &nbsp;Connection&nbsp;conn&nbsp;=&nbsp;factory.newConnection();&lt;br&gt;&lt;br&gt;               &nbsp;channel&nbsp;=&nbsp;conn.createChannel();&lt;br&gt;               &nbsp;String&nbsp;queueName&nbsp;=&nbsp;GesAgregaConstant.QUEUE_TAREAS_RABBITMQ;&lt;br&gt;&lt;br&gt;               &nbsp;channel.basicQos(1);&lt;br&gt;<br>
<br>
               &nbsp;boolean&nbsp;noAck&nbsp;=&nbsp;false;&lt;br&gt;&lt;br&gt;               &nbsp;QueueingConsumer&nbsp;consumer&nbsp;=&nbsp;new&nbsp;QueueingConsumer(channel);&lt;br&gt;&lt;br&gt;               &nbsp;channel.basicConsume(queueName,&nbsp;noAck,&nbsp;consumer);&lt;br&gt;               &nbsp;boolean&nbsp;runInfinite&nbsp;=&nbsp;true;&lt;br&gt;<br>
<br>
&lt;br&gt;               &nbsp;while&nbsp;(runInfinite)&nbsp;{&lt;br&gt;&lt;br&gt;                   &nbsp;QueueingConsumer.Delivery&nbsp;delivery;&lt;br&gt;                   &nbsp;try&nbsp;{&lt;br&gt;&lt;br&gt;                       &nbsp;//TODO&nbsp;poner&nbsp;el&nbsp;ack&nbsp;de&nbsp;todos&nbsp;los&nbsp;elementos&nbsp;de&nbsp;la&nbsp;cola&lt;br&gt;<br>
<br>
                       &nbsp;synchronized&nbsp;(qAck){&lt;br&gt;                           &nbsp;while(qAck.size()&amp;gt;0){&lt;br&gt;                              &nbsp;UrlControl&nbsp;cAck&nbsp;=&nbsp;qAck.remove();&lt;br&gt;                              &nbsp;System.out.println(&amp;quot;Sale&nbsp;DE&nbsp;LA&nbsp;COLA&amp;quot;&nbsp;+&nbsp;cAck.getUrl()&nbsp;+&amp;quot;ACK&nbsp;&amp;quot;&nbsp;+&nbsp;cAck.getDelivery());&lt;br&gt;<br>
<br>
                              &nbsp;channel.basicAck(cAck.getDelivery(),&nbsp;false);&lt;br&gt;                           &nbsp;}&lt;br&gt;                       &nbsp;}&lt;br&gt;                       &nbsp;&lt;br&gt;                       &nbsp;delivery&nbsp;=&nbsp;consumer.nextDelivery();&lt;br&gt;<br>
<br>
&lt;br&gt;                       &nbsp;String&nbsp;url&nbsp;=&nbsp;new&nbsp;String(delivery.getBody());&lt;br&gt;&lt;br&gt;                       &nbsp;System.out.println(&amp;quot;CRAWLING&nbsp;&amp;quot;&nbsp;+&nbsp;url);&lt;br&gt;                       &nbsp;UrlControl&nbsp;cControl&nbsp;=&nbsp;new&nbsp;UrlControl(url,delivery.getEnvelope().getDeliveryTag());&lt;br&gt;<br>
<br>
                       &nbsp;&lt;br&gt;                       &nbsp;q.push(cControl,0);&lt;br&gt;                       &nbsp;//q.push(new&nbsp;URL(url),0);&lt;br&gt;                       &nbsp;tc.startThreads();                   &nbsp;&lt;br&gt;&lt;br&gt;                   &nbsp;}&nbsp;catch&nbsp;(InterruptedException&nbsp;ie)&nbsp;{&lt;br&gt;<br>
<br>
                       &nbsp;continue;&lt;br&gt;                   &nbsp;}&nbsp;/*catch&nbsp;(IOException&nbsp;e)&nbsp;{&lt;br&gt;                       &nbsp;continue;&lt;br&gt;                   &nbsp;}*/catch&nbsp;(Exception&nbsp;e)&nbsp;{&lt;br&gt;                       &nbsp;continue;&lt;br&gt;                   &nbsp;}&lt;br&gt;<br>
<br>
               &nbsp;}&lt;br&gt;&lt;br&gt;               &nbsp;channel.close();&lt;br&gt;               &nbsp;conn.close();&lt;br&gt;&lt;br&gt;           &nbsp;}catch(IOException&nbsp;ioe){&lt;br&gt;               &nbsp;ioe.printStackTrace();&lt;br&gt;           &nbsp;}catch(Exception&nbsp;e){&lt;br&gt;               &nbsp;e.printStackTrace();&lt;br&gt;<br>
<br>
           &nbsp;}&lt;br&gt;&lt;br&gt;&lt;br&gt;Thank&nbsp;you.&nbsp;&lt;span&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;&amp;#39;Times&nbsp;New&nbsp;Roman&amp;#39;;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;word-spacing:&nbsp;0px;&nbsp;font-size:&nbsp;medium;&quot;&gt;&lt;span&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;font-family:&nbsp;Verdana,Arial,Helvetica,sans-serif;&nbsp;font-size:&nbsp;13px;&quot;&gt;&lt;br&gt;<br>
<br>
Regards,&nbsp;&lt;br&gt;Isaias&nbsp;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;
</tt>
