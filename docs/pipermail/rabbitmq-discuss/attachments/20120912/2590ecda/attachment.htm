<tt>
I&amp;#39;m&nbsp;experience&nbsp;a&nbsp;problem&nbsp;where&nbsp;&amp;quot;rabbitmqctl&nbsp;stop&amp;quot;&nbsp;takes&nbsp;a&nbsp;very&nbsp;long&nbsp;time&nbsp;(5+&nbsp;minutes,&nbsp;or&nbsp;never)&nbsp;shuts&nbsp;down.&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;RabbitMQ&nbsp;2.8.6&nbsp;and&nbsp;Erlang&nbsp;R15B01&nbsp;on&nbsp;Ubuntu&nbsp;10.04.&lt;br&gt;&lt;br&gt;The&nbsp;broker&nbsp;is&nbsp;running&nbsp;with&nbsp;the&nbsp;Federation&nbsp;plug-in&nbsp;in&nbsp;use,&nbsp;FWIW.&lt;br&gt;<br>
&lt;br&gt;The&nbsp;last&nbsp;little&nbsp;bits&nbsp;of&nbsp;console&nbsp;output&nbsp;are:&lt;br&gt;&lt;br&gt;--------&lt;br&gt;Mnesia(rabbit@mq1):&nbsp;write&nbsp;performed&nbsp;by&nbsp;{tid,307,&amp;lt;0.151.0&amp;gt;}&nbsp;on&nbsp;record:&lt;br&gt;   &nbsp;{rabbit_durable_route,&lt;br&gt;           &nbsp;{binding,&lt;br&gt;               &nbsp;{resource,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,exchange,&amp;lt;&amp;lt;&amp;quot;skytap&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
               &nbsp;&amp;lt;&amp;lt;&amp;quot;cmcmd.us-west.default&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;               &nbsp;{resource,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,queue,&amp;lt;&amp;lt;&amp;quot;cmcmd&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;               &nbsp;[]},&lt;br&gt;           &nbsp;const}&lt;br&gt;Mnesia(rabbit@mq1):&nbsp;Transaction&nbsp;log&nbsp;dump&nbsp;initiated&nbsp;by&nbsp;time_threshold:&nbsp;{needs_dump,40}&lt;br&gt;<br>
Mnesia(rabbit@mq1):&nbsp;delete_object&nbsp;performed&nbsp;by&nbsp;{dirty,&amp;lt;0.237.0&amp;gt;}&nbsp;on&nbsp;record:&lt;br&gt;   &nbsp;{rabbit_listener,rabbit@mq1,amqp,&amp;quot;&lt;a&nbsp;href=&quot;http://mq1.blah.com&quot;&gt;mq1.blah.com&lt;/a&gt;&amp;quot;,&lt;br&gt;                        &nbsp;{0,0,0,0},&lt;br&gt;<br>
                        &nbsp;5672}&lt;br&gt;Mnesia(rabbit@mq1):&nbsp;Transaction&nbsp;log&nbsp;dump&nbsp;initiated&nbsp;by&nbsp;time_threshold:&nbsp;already_dumped&lt;br&gt;Mnesia(rabbit@mq1):&nbsp;Transaction&nbsp;log&nbsp;dump&nbsp;initiated&nbsp;by&nbsp;time_threshold:&nbsp;already_dumped&lt;br&gt;Mnesia(rabbit@mq1):&nbsp;Transaction&nbsp;log&nbsp;dump&nbsp;initiated&nbsp;by&nbsp;time_threshold:&nbsp;already_dumped&lt;br&gt;<br>
--------&lt;br&gt;&lt;br&gt;The&nbsp;rabbit@mq1.log&nbsp;file:&lt;br&gt;&lt;br&gt;-------&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;Stopping&nbsp;Rabbit&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;   &nbsp;application:&nbsp;rabbitmq_management&lt;br&gt;   &nbsp;exited:&nbsp;stopped&lt;br&gt;<br>
   &nbsp;type:&nbsp;permanent&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;   &nbsp;application:&nbsp;rabbitmq_federation&lt;br&gt;   &nbsp;exited:&nbsp;stopped&lt;br&gt;   &nbsp;type:&nbsp;permanent&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;   &nbsp;application:&nbsp;rabbitmq_management_agent&lt;br&gt;<br>
   &nbsp;exited:&nbsp;stopped&lt;br&gt;   &nbsp;type:&nbsp;permanent&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;stopped&nbsp;TCP&nbsp;Listener&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&gt;0.0.0.0:5672&lt;/a&gt;&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;<br>
Connection&nbsp;(&amp;lt;0.299.0&amp;gt;)&nbsp;closing:&nbsp;internal&nbsp;error&nbsp;in&nbsp;channel&nbsp;(&amp;lt;0.306.0&amp;gt;):&nbsp;shutdown&lt;br&gt;-------&lt;br&gt;&lt;br&gt;And&nbsp;the&nbsp;rabbitm@mq1-sasl&nbsp;log:&lt;br&gt;&lt;br&gt;--------&lt;br&gt;=SUPERVISOR&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;    &nbsp;Supervisor:&nbsp;{&amp;lt;0.304.0&amp;gt;,amqp_channel_sup}&lt;br&gt;<br>
    &nbsp;Context:   &nbsp;child_terminated&lt;br&gt;    &nbsp;Reason:    &nbsp;shutdown&lt;br&gt;    &nbsp;Offender:  &nbsp;[{pid,&amp;lt;0.306.0&amp;gt;},&lt;br&gt;                 &nbsp;{name,channel},&lt;br&gt;                 &nbsp;{mfa,{amqp_channel,start_link,&lt;br&gt;                                    &nbsp;[direct,&amp;lt;0.299.0&amp;gt;,1,&amp;lt;0.305.0&amp;gt;,&lt;br&gt;<br>
                                     &nbsp;#Fun&amp;lt;amqp_channel_sup.0.24953263&amp;gt;]}},&lt;br&gt;                 &nbsp;{restart_type,intrinsic},&lt;br&gt;                 &nbsp;{shutdown,4294967295},&lt;br&gt;                 &nbsp;{child_type,worker}]&lt;br&gt;&lt;br&gt;<br>
&lt;br&gt;=SUPERVISOR&nbsp;REPORT====&nbsp;12-Sep-2012::16:38:14&nbsp;===&lt;br&gt;    &nbsp;Supervisor:&nbsp;{&amp;lt;0.304.0&amp;gt;,amqp_channel_sup}&lt;br&gt;    &nbsp;Context:   &nbsp;shutdown&lt;br&gt;    &nbsp;Reason:    &nbsp;reached_max_restart_intensity&lt;br&gt;    &nbsp;Offender:  &nbsp;[{pid,&amp;lt;0.306.0&amp;gt;},&lt;br&gt;<br>
                 &nbsp;{name,channel},&lt;br&gt;                 &nbsp;{mfa,{amqp_channel,start_link,&lt;br&gt;                                    &nbsp;[direct,&amp;lt;0.299.0&amp;gt;,1,&amp;lt;0.305.0&amp;gt;,&lt;br&gt;                                     &nbsp;#Fun&amp;lt;amqp_channel_sup.0.24953263&amp;gt;]}},&lt;br&gt;<br>
                 &nbsp;{restart_type,intrinsic},&lt;br&gt;                 &nbsp;{shutdown,4294967295},&lt;br&gt;                 &nbsp;{child_type,worker}]&lt;br&gt;--------&lt;br&gt;<br>

</tt>
