<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello,&nbsp;&lt;br&gt;&lt;br&gt;we&nbsp;are&nbsp;currently&nbsp;experiencing&nbsp;some&nbsp;(for&nbsp;us)&nbsp;unexaplainable&nbsp;behaviour&nbsp;with&nbsp;shovel&nbsp;plugin.&nbsp;&lt;br&gt;&lt;br&gt;Before,&nbsp;I&nbsp;enter&nbsp;into&nbsp;the&nbsp;details,&nbsp;let&nbsp;me&nbsp;first&nbsp;outline&nbsp;our&nbsp;setup.&nbsp;&lt;br&gt;&lt;br&gt;We&nbsp;have&nbsp;a&nbsp;set&nbsp;of&nbsp;RabbitMQ&nbsp;Servers&nbsp;hosted&nbsp;in&nbsp;the&nbsp;cloud,&nbsp;where&nbsp;incoming&nbsp;messages&nbsp;are&nbsp;queued.&nbsp;On&nbsp;those&nbsp;servers&nbsp;we&nbsp;then&nbsp;have&nbsp;the&nbsp;shovel&nbsp;plugin&nbsp;running,&nbsp;which&nbsp;distributes&nbsp;the&nbsp;incoming&nbsp;messages&nbsp;to&nbsp;a&nbsp;set&nbsp;of&nbsp;RabbitMQ&nbsp;Servers&nbsp;in&nbsp;our&nbsp;local&nbsp;datacenter.&nbsp;&lt;br&gt;<br>
The&nbsp;configuration&nbsp;of&nbsp;the&nbsp;shovel&nbsp;does&nbsp;not&nbsp;directly&nbsp;specifiy&nbsp;a&nbsp;RabbitMQ&nbsp;Server&nbsp;as&nbsp;its&nbsp;destination,&nbsp;but&nbsp;a&nbsp;load&nbsp;balancer,&nbsp;which&nbsp;then&nbsp;distributes&nbsp;to&nbsp;the&nbsp;servers&nbsp;in&nbsp;our&nbsp;local&nbsp;datacenter.&nbsp;&lt;br&gt;&lt;br&gt;Since&nbsp;a&nbsp;few&nbsp;days&nbsp;we&nbsp;are&nbsp;now&nbsp;encountering&nbsp;the&nbsp;following&nbsp;Problem:&nbsp;&lt;br&gt;<br>
The&nbsp;queues&nbsp;on&nbsp;our&nbsp;cloud&nbsp;servers&nbsp;reach&nbsp;(and&nbsp;pass)&nbsp;the&nbsp;Memory&nbsp;watermarks,&nbsp;because&nbsp;of&nbsp;Unacknowledged&nbsp;Messages.&nbsp;The&nbsp;queue&nbsp;size&nbsp;of&nbsp;ready&nbsp;messages&nbsp;is&nbsp;almost&nbsp;constantly&nbsp;on&nbsp;0&nbsp;(i.e.,&nbsp;messages&nbsp;are&nbsp;delivered&nbsp;as&nbsp;fast&nbsp;as&nbsp;published)&nbsp;however&nbsp;the&nbsp;unacknowledged&nbsp;messages&nbsp;keep&nbsp;growing.&nbsp;&lt;br&gt;<br>
On&nbsp;the&nbsp;other&nbsp;side,&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;the&nbsp;statistics&nbsp;on&nbsp;our&nbsp;local&nbsp;servers&nbsp;show,&nbsp;that&nbsp;messages&nbsp;are&nbsp;confirmed&nbsp;almost&nbsp;as&nbsp;fast&nbsp;as&nbsp;published.&nbsp;&lt;br&gt;&lt;br&gt;This&nbsp;leads&nbsp;to&nbsp;the&nbsp;fact,&nbsp;that&nbsp;we&nbsp;have&nbsp;on&nbsp;the&nbsp;destination&nbsp;servers&nbsp;a&nbsp;total&nbsp;of&nbsp;two&nbsp;hanful&nbsp;of&nbsp;messages&nbsp;that&nbsp;are&nbsp;not&nbsp;yet&nbsp;confirmed,&nbsp;however&nbsp;on&nbsp;the&nbsp;source&nbsp;servers&nbsp;we&nbsp;have&nbsp;millions&nbsp;of&nbsp;messages&nbsp;that&nbsp;are&nbsp;waiting&nbsp;for&nbsp;confirmation&nbsp;(acknowledgement)&lt;br&gt;<br>
&lt;br&gt;We&nbsp;would&nbsp;expect&nbsp;with&nbsp;some&nbsp;threshold&nbsp;that&lt;br&gt;delivery&nbsp;rate&nbsp;on&nbsp;source&nbsp;=&nbsp;publish&nbsp;rate&nbsp;on&nbsp;destination&nbsp;(which&nbsp;is&nbsp;the&nbsp;case)&lt;br&gt;confirm&nbsp;rate&nbsp;on&nbsp;destination&nbsp;=&nbsp;acknowledge&nbsp;rate&nbsp;on&nbsp;source&nbsp;(which&nbsp;shows&nbsp;considerable&nbsp;difference)&lt;br&gt;<br>
&lt;br&gt;Does&nbsp;anyone&nbsp;have&nbsp;an&nbsp;idea&nbsp;or&nbsp;suggestion&nbsp;what&nbsp;could&nbsp;be&nbsp;the&nbsp;reason&nbsp;for&nbsp;this?&nbsp;Is&nbsp;it&nbsp;a&nbsp;bad&nbsp;idea&nbsp;to&nbsp;have&nbsp;load&nbsp;balancer&nbsp;as&nbsp;destination&nbsp;in&nbsp;the&nbsp;shovel,&nbsp;or&nbsp;should&nbsp;that&nbsp;work&nbsp;fine?&nbsp;Network&nbsp;issue?&lt;br&gt;&lt;br&gt;Here&nbsp;some&nbsp;more&nbsp;details&nbsp;on&nbsp;our&nbsp;shovel&nbsp;setup:&nbsp;&lt;br&gt;<br>
ack_mode=on_confirm&lt;br&gt;prefetch_count=0&nbsp;(default)&lt;br&gt;reconnect_delay=5&lt;br&gt;&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;advance&nbsp;for&nbsp;any&nbsp;hint&nbsp;or&nbsp;discussion&nbsp;point,&nbsp;&lt;br&gt;Regards&lt;br&gt;Claire&nbsp;&lt;span&nbsp;style=&quot;color:rgb(34,34,34)&quot;&gt;&lt;span&gt; &nbsp;&lt;span&gt;  &nbsp; &lt;/span&gt; &lt;span&gt;   &nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif&quot;&gt;&lt;font&nbsp;color=&quot;#222222&quot;&gt;  &nbsp; &lt;/font&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34)&quot;&gt;  &nbsp; &lt;span&gt;  &lt;span&gt;  &nbsp; &lt;/span&gt;&nbsp; &lt;span&gt;   &nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(0,137,201)&quot;&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;  &nbsp;   &nbsp;   &nbsp;&lt;span&gt;  &nbsp; &lt;/span&gt;    &nbsp;&lt;/font&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;div&gt;&lt;font&nbsp;style=&quot;color:rgb(80,0,80)&quot;&nbsp;color=&quot;#0089c9&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;span&nbsp;style=&quot;font-size:x-small&quot;&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;  &nbsp;   &nbsp;   &nbsp;   &nbsp;  &lt;/font&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80)&quot;&gt;  &lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80)&quot;&gt; &nbsp; &lt;/span&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;  &nbsp;&lt;/font&gt;&lt;font&nbsp;color=&quot;#000000&quot;&gt;&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;color=&quot;#000000&quot;&gt;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-size:x-small&quot;&gt;&lt;span&gt;  &nbsp; &lt;span&gt;  &nbsp; &lt;span&gt;  &nbsp; &lt;span&gt;  &lt;span&gt; &nbsp; &nbsp;  &lt;/span&gt;&nbsp;&lt;span&gt; &nbsp;  &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;font&nbsp;style=&quot;font-size:x-small&quot;&gt;&nbsp;&lt;/font&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-size:x-small&quot;&gt;  &nbsp; &lt;span&gt;  &nbsp; &lt;span&gt;  &nbsp; &lt;span&gt;  &lt;span&gt;  &nbsp; &lt;/span&gt; &nbsp; &lt;span&gt; &nbsp; &nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
