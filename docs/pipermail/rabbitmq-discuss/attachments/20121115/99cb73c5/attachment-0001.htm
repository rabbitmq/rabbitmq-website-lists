<tt>
&lt;font&nbsp;face=&quot;arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;just&nbsp;my&nbsp;2&nbsp;cents...&nbsp;Rabbit&nbsp;on&nbsp;Android&nbsp;(iOS&nbsp;as&nbsp;well)&nbsp;is&nbsp;very&nbsp;easy&nbsp;to&nbsp;get&nbsp;up&nbsp;and&nbsp;running&nbsp;and&nbsp;is&nbsp;IMHO&nbsp;a&nbsp;very&nbsp;good&nbsp;fit.&nbsp;&amp;nbsp;That&nbsp;said,&nbsp;getting&nbsp;reliable&nbsp;TCP&nbsp;connections&nbsp;over&nbsp;3G&nbsp;can&nbsp;drive&nbsp;you&nbsp;batty...&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;You&nbsp;will&nbsp;need&nbsp;to&nbsp;implement&nbsp;heartbeat&nbsp;-&nbsp;very&nbsp;simple&nbsp;-&nbsp;to&nbsp;verify&nbsp;if&nbsp;the&nbsp;connection&nbsp;is&nbsp;alive&nbsp;as&nbsp;in&nbsp;our&nbsp;experience&nbsp;it&nbsp;is&nbsp;very&nbsp;difficult&nbsp;to&nbsp;maintain&nbsp;a&nbsp;connection&nbsp;over&nbsp;3G.&nbsp;&amp;nbsp;Pay&nbsp;close&nbsp;attention&nbsp;to&nbsp;error&nbsp;handling&nbsp;&amp;nbsp;-&nbsp;specifically&nbsp;ShutdownSignalException.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;-----Original&nbsp;Message-----&lt;br&nbsp;/&gt;From:&nbsp;&quot;Tim&nbsp;Watson&quot;&nbsp;&amp;lt;tim@rabbitmq.com&amp;gt;&lt;br&nbsp;/&gt;Sent:&nbsp;Thursday,&nbsp;November&nbsp;15,&nbsp;2012&nbsp;3:58am&lt;br&nbsp;/&gt;To:&nbsp;&quot;Discussions&nbsp;about&nbsp;RabbitMQ&quot;&nbsp;&amp;lt;rabbitmq-discuss@lists.rabbitmq.com&amp;gt;&lt;br&nbsp;/&gt;Cc:&nbsp;rabbitmq-discuss@googlegroups.com,&nbsp;&quot;Michal&nbsp;Levý&quot;&nbsp;&amp;lt;michal.liwoj@gmail.com&amp;gt;&lt;br&nbsp;/&gt;Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ&nbsp;as&nbsp;communication&nbsp;server&nbsp;for&nbsp;mobile&nbsp;devices&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/p&gt;<br>
&lt;div&nbsp;id=&quot;SafeStyles1352976950&quot;&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;Hi&nbsp;Michal,&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;On&nbsp;11/14/2012&nbsp;04:49&nbsp;PM,&nbsp;Michal&nbsp;Levý&nbsp;wrote:&lt;br&nbsp;/&gt;&amp;gt;&nbsp;Hi&nbsp;everyone&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;I&nbsp;have&nbsp;following&nbsp;scenario:&lt;br&nbsp;/&gt;&amp;gt;&nbsp;1)&nbsp;Many&nbsp;Android&nbsp;clients&nbsp;(from&nbsp;1000&nbsp;to&nbsp;10&nbsp;000&nbsp;clients)&nbsp;-&nbsp;not&nbsp;connected&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;all&nbsp;the&nbsp;time&nbsp;(messaging&nbsp;seems&nbsp;like&nbsp;good&nbsp;fit&nbsp;for&nbsp;this)&lt;br&nbsp;/&gt;&amp;gt;&nbsp;2)&nbsp;Each&nbsp;sending&nbsp;max&nbsp;100&nbsp;messages\day&lt;br&nbsp;/&gt;&amp;gt;&nbsp;3)&nbsp;Also&nbsp;needs&nbsp;to&nbsp;send&nbsp;some&nbsp;messages&nbsp;back&nbsp;from&nbsp;server&nbsp;but&nbsp;not&nbsp;very&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;frequently&nbsp;(10\day)&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;I&nbsp;was&nbsp;looking&nbsp;on&nbsp;rabbit&nbsp;tutorials,&nbsp;AMQP&nbsp;spec&nbsp;etc.&lt;br&nbsp;/&gt;&amp;gt;&nbsp;It&nbsp;looks&nbsp;like&nbsp;collecting&nbsp;data&nbsp;from&nbsp;androids&nbsp;is&nbsp;easy&nbsp;task.&nbsp;All&nbsp;will&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;send&nbsp;data&nbsp;into&nbsp;single&nbsp;exchange\queue.&lt;br&nbsp;/&gt;&amp;gt;&nbsp;But&nbsp;what&nbsp;about&nbsp;sending&nbsp;messages&nbsp;to&nbsp;Androids&nbsp;from&nbsp;server?&lt;br&nbsp;/&gt;&amp;gt;&nbsp;1st&nbsp;i&nbsp;was&nbsp;thinking&nbsp;about&nbsp;having&nbsp;single&nbsp;queue&nbsp;and&nbsp;to&nbsp;subcribe&nbsp;from&nbsp;each&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;device&nbsp;with&nbsp;some&nbsp;kind&nbsp;of&nbsp;&quot;filter&quot;&nbsp;(based&nbsp;on&nbsp;some&nbsp;header&nbsp;field).&nbsp;I&nbsp;know&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;there&nbsp;are&nbsp;message&nbsp;brokers&nbsp;which&nbsp;support&nbsp;this&nbsp;scenario.&lt;br&nbsp;/&gt;&amp;gt;&nbsp;But&nbsp;it&nbsp;seems&nbsp;Rabbit&nbsp;doesn't&nbsp;support&nbsp;this.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;It&nbsp;isn't&nbsp;hard&nbsp;to&nbsp;set&nbsp;this&nbsp;up&nbsp;in&nbsp;Rabbit!&nbsp;You&nbsp;will&nbsp;need&nbsp;to&nbsp;think&nbsp;about&nbsp;&lt;br&nbsp;/&gt;solving&nbsp;the&nbsp;problem&nbsp;in&nbsp;AMQP&nbsp;terms&nbsp;though,&nbsp;which&nbsp;is&nbsp;admittedly&nbsp;a&nbsp;bit&nbsp;&lt;br&nbsp;/&gt;different&nbsp;from&nbsp;what&nbsp;you'd&nbsp;do&nbsp;with&nbsp;say&nbsp;JMS&nbsp;or&nbsp;whatever.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;Do&nbsp;i&nbsp;really&nbsp;have&nbsp;to&nbsp;create&nbsp;one&nbsp;&quot;sending&quot;&nbsp;queue&nbsp;for&nbsp;each&nbsp;client&nbsp;(using&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;direct&nbsp;exchange&nbsp;with&nbsp;proper&nbsp;&quot;per&nbsp;device&quot;&nbsp;routing&nbsp;key)&nbsp;?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;As&nbsp;a&nbsp;matter&nbsp;of&nbsp;fact,&nbsp;clients&nbsp;never&nbsp;send&nbsp;messages&nbsp;directly&nbsp;to&nbsp;queues,&nbsp;but&nbsp;&lt;br&nbsp;/&gt;rather&nbsp;send&nbsp;them&nbsp;to&nbsp;exchanges&nbsp;(as&nbsp;you've&nbsp;already&nbsp;noted),&nbsp;after&nbsp;which&nbsp;&lt;br&nbsp;/&gt;they're&nbsp;routed&nbsp;to&nbsp;zero&nbsp;or&nbsp;more&nbsp;queues&nbsp;based&nbsp;on&nbsp;the&nbsp;bindings&nbsp;you've&nbsp;set&nbsp;&lt;br&nbsp;/&gt;up&nbsp;(between&nbsp;the&nbsp;exchanges&nbsp;and&nbsp;queues).&nbsp;So&nbsp;for&nbsp;example,&nbsp;you&nbsp;can&nbsp;send&nbsp;a&nbsp;&lt;br&nbsp;/&gt;message&nbsp;to&nbsp;an&nbsp;exchange&nbsp;from&nbsp;one&nbsp;client&nbsp;and&nbsp;receive&nbsp;it&nbsp;on&nbsp;another&nbsp;a&nbsp;la&nbsp;&lt;br&nbsp;/&gt;pub/sub&nbsp;by&nbsp;using&nbsp;a&nbsp;topic&nbsp;exchange.&nbsp;You&nbsp;can&nbsp;apply&nbsp;content&nbsp;based&nbsp;routing&nbsp;&lt;br&nbsp;/&gt;using&nbsp;the&nbsp;headers&nbsp;exchange.&nbsp;If&nbsp;you've&nbsp;got&nbsp;data&nbsp;that&nbsp;needs&nbsp;to&nbsp;go&nbsp;out&nbsp;to&nbsp;&lt;br&nbsp;/&gt;the&nbsp;devices&nbsp;then&nbsp;you&nbsp;first&nbsp;need&nbsp;to&nbsp;figure&nbsp;out&nbsp;what&nbsp;your&nbsp;filters&nbsp;look&nbsp;&lt;br&nbsp;/&gt;like.&nbsp;Once&nbsp;these&nbsp;are&nbsp;in&nbsp;place,&nbsp;you&nbsp;can&nbsp;use&nbsp;one&nbsp;of&nbsp;the&nbsp;built&nbsp;in&nbsp;exchange&nbsp;&lt;br&nbsp;/&gt;types&nbsp;to&nbsp;place&nbsp;the&nbsp;messages&nbsp;into&nbsp;the&nbsp;broker's&nbsp;care.&nbsp;Each&nbsp;device&nbsp;that&nbsp;&lt;br&nbsp;/&gt;wishes&nbsp;to&nbsp;consume&nbsp;data&nbsp;can&nbsp;either&nbsp;create&nbsp;a&nbsp;temporary&nbsp;queue&nbsp;and&nbsp;bind&nbsp;it&nbsp;&lt;br&nbsp;/&gt;to&nbsp;the&nbsp;exchange(s)&nbsp;in&nbsp;the&nbsp;right&nbsp;way,&nbsp;or&nbsp;connect&nbsp;to&nbsp;an&nbsp;existing&nbsp;queue&nbsp;&lt;br&nbsp;/&gt;which&nbsp;is&nbsp;bound&nbsp;to&nbsp;a&nbsp;topic&nbsp;exchange&nbsp;for&nbsp;some&nbsp;set&nbsp;of&nbsp;keys&nbsp;that&nbsp;interest&nbsp;you.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;How&nbsp;much&nbsp;overhead&nbsp;queues&nbsp;in&nbsp;rabbit&nbsp;have&nbsp;?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;You&nbsp;can&nbsp;have&nbsp;lots&nbsp;(i.e.,&nbsp;thousands)&nbsp;of&nbsp;queues&nbsp;without&nbsp;suffering&nbsp;too&nbsp;&lt;br&nbsp;/&gt;much,&nbsp;though&nbsp;there&nbsp;is&nbsp;obviously&nbsp;*some*&nbsp;overhead&nbsp;(memory,&nbsp;etc)&nbsp;and&nbsp;its&nbsp;&lt;br&nbsp;/&gt;worth&nbsp;planning&nbsp;your&nbsp;topology&nbsp;carefully&nbsp;so&nbsp;as&nbsp;to&nbsp;get&nbsp;the&nbsp;best&nbsp;out&nbsp;of&nbsp;&lt;br&nbsp;/&gt;Rabbit.&nbsp;We&nbsp;can&nbsp;help&nbsp;with&nbsp;that&nbsp;(here)&nbsp;by&nbsp;pointing&nbsp;you&nbsp;to&nbsp;the&nbsp;right&nbsp;&lt;br&nbsp;/&gt;resources&nbsp;and&nbsp;documentation,&nbsp;or&nbsp;if&nbsp;you&nbsp;want&nbsp;elaborate&nbsp;on&nbsp;some&nbsp;of&nbsp;the&nbsp;&lt;br&nbsp;/&gt;finer&nbsp;details&nbsp;of&nbsp;the&nbsp;design&nbsp;we&nbsp;often&nbsp;have&nbsp;lively&nbsp;and&nbsp;interesting&nbsp;&lt;br&nbsp;/&gt;discussions&nbsp;about&nbsp;how&nbsp;to&nbsp;solve&nbsp;various&nbsp;problems&nbsp;on&nbsp;this&nbsp;mailing&nbsp;list!&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Going&nbsp;back&nbsp;to&nbsp;something&nbsp;you&nbsp;mentioned&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;your&nbsp;post:&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;It&nbsp;looks&nbsp;like&nbsp;collecting&nbsp;data&nbsp;from&nbsp;androids&nbsp;is&nbsp;easy&nbsp;task.&nbsp;All&nbsp;will&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;send&nbsp;data&nbsp;into&nbsp;single&nbsp;exchange\queue.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;This&nbsp;really&nbsp;depends&nbsp;on&nbsp;what&nbsp;the&nbsp;whole&nbsp;messaging&nbsp;topology&nbsp;needs&nbsp;to&nbsp;look&nbsp;&lt;br&nbsp;/&gt;like.&nbsp;Sometimes&nbsp;you&nbsp;need&nbsp;to&nbsp;propagate&nbsp;messages&nbsp;into&nbsp;various&nbsp;places,&nbsp;and&nbsp;&lt;br&nbsp;/&gt;building&nbsp;blocks&nbsp;like&nbsp;fan-out&nbsp;and&nbsp;exchange-2-exchange&nbsp;bindings&nbsp;can&nbsp;help&nbsp;&lt;br&nbsp;/&gt;with&nbsp;this.&nbsp;Other&nbsp;times,&nbsp;it&nbsp;actually&nbsp;makes&nbsp;more&nbsp;sense&nbsp;to&nbsp;send&nbsp;some&nbsp;&lt;br&nbsp;/&gt;messages&nbsp;to&nbsp;a&nbsp;specific&nbsp;exchange&nbsp;and&nbsp;others&nbsp;to,&nbsp;well,&nbsp;another.&nbsp;As&nbsp;you're&nbsp;&lt;br&nbsp;/&gt;making&nbsp;design&nbsp;decisions&nbsp;such&nbsp;as&nbsp;these,&nbsp;you'll&nbsp;want&nbsp;to&nbsp;consider&nbsp;various&nbsp;&lt;br&nbsp;/&gt;factors&nbsp;which&nbsp;include&nbsp;performance&nbsp;and&nbsp;resource&nbsp;consumption&nbsp;on&nbsp;the&nbsp;&lt;br&nbsp;/&gt;broker,&nbsp;scaling&nbsp;up/out&nbsp;(as&nbsp;you&nbsp;add&nbsp;more&nbsp;clients,&nbsp;potentially&nbsp;cluster&nbsp;the&nbsp;&lt;br&nbsp;/&gt;broker&nbsp;and&nbsp;so&nbsp;on)&nbsp;and&nbsp;of&nbsp;course&nbsp;the&nbsp;management&nbsp;of&nbsp;all&nbsp;this&nbsp;&lt;br&nbsp;/&gt;infrastructure,&nbsp;from&nbsp;the&nbsp;perspective&nbsp;of&nbsp;both&nbsp;the&nbsp;client&nbsp;application(s)&nbsp;&lt;br&nbsp;/&gt;and&nbsp;the&nbsp;administration&nbsp;of&nbsp;the&nbsp;broker&nbsp;itself.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;It&nbsp;can&nbsp;be&nbsp;also&nbsp;management&nbsp;issue&nbsp;and&nbsp;really&nbsp;feels&nbsp;like&nbsp;overkill&nbsp;when&nbsp;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;number&nbsp;of&nbsp;messages&nbsp;send&nbsp;from&nbsp;server&nbsp;to&nbsp;device&nbsp;is&nbsp;really&nbsp;low....&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;It's&nbsp;actually&nbsp;quite&nbsp;easy&nbsp;to&nbsp;set&nbsp;up&nbsp;a&nbsp;temporary,&nbsp;auto-delete&nbsp;(once&nbsp;the&nbsp;&lt;br&nbsp;/&gt;client&nbsp;disconnects)&nbsp;queue&nbsp;that&nbsp;is&nbsp;used&nbsp;simply&nbsp;to&nbsp;bind&nbsp;to&nbsp;an&nbsp;exchange&nbsp;&lt;br&nbsp;/&gt;that&nbsp;you're&nbsp;interested&nbsp;in.&nbsp;The&nbsp;semantics&nbsp;probably&nbsp;need&nbsp;some&nbsp;thought&nbsp;&lt;br&nbsp;/&gt;however:&nbsp;how&nbsp;are&nbsp;you&nbsp;going&nbsp;to&nbsp;consume&nbsp;messages&nbsp;(e.g.,&nbsp;round&nbsp;robin,&nbsp;&lt;br&nbsp;/&gt;fan-out,&nbsp;etc),&nbsp;how&nbsp;will&nbsp;you&nbsp;know&nbsp;to&nbsp;delete&nbsp;them&nbsp;from&nbsp;the&nbsp;broker&nbsp;(using&nbsp;&lt;br&nbsp;/&gt;acks,&nbsp;etc)&nbsp;and&nbsp;so&nbsp;on.&nbsp;This&nbsp;is&nbsp;where&nbsp;you&nbsp;need&nbsp;to&nbsp;think&nbsp;carefully&nbsp;about&nbsp;&lt;br&nbsp;/&gt;your&nbsp;design.&nbsp;Either&nbsp;way,&nbsp;there&nbsp;shouldn't&nbsp;be&nbsp;much&nbsp;management&nbsp;to&nbsp;do&nbsp;if&nbsp;&lt;br&nbsp;/&gt;you're&nbsp;using&nbsp;temporary&nbsp;queues&nbsp;to&nbsp;make&nbsp;consumption&nbsp;and&nbsp;guarantee&nbsp;that&nbsp;the&nbsp;&lt;br&nbsp;/&gt;queues&nbsp;are&nbsp;deleted&nbsp;once&nbsp;you're&nbsp;finished&nbsp;with&nbsp;them&nbsp;(i.e.,&nbsp;the&nbsp;client&nbsp;goes&nbsp;&lt;br&nbsp;/&gt;away).&nbsp;If&nbsp;you're&nbsp;using&nbsp;long&nbsp;lived&nbsp;(shared)&nbsp;queues&nbsp;then&nbsp;the&nbsp;design&nbsp;&lt;br&nbsp;/&gt;complexity&nbsp;pushes&nbsp;back&nbsp;into&nbsp;the&nbsp;exchanges&nbsp;and&nbsp;bindings&nbsp;you&nbsp;configure,&nbsp;&lt;br&nbsp;/&gt;but&nbsp;that's&nbsp;done&nbsp;just&nbsp;once&nbsp;and&nbsp;then&nbsp;clients&nbsp;need&nbsp;to&nbsp;know&nbsp;where/how&nbsp;to&nbsp;&lt;br&nbsp;/&gt;connect.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;Any&nbsp;advice&nbsp;will&nbsp;be&nbsp;appriciated.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;If&nbsp;you've&nbsp;been&nbsp;through&nbsp;the&nbsp;tutorials,&nbsp;then&nbsp;hopefully&nbsp;it's&nbsp;clear&nbsp;that&nbsp;&lt;br&nbsp;/&gt;consuming&nbsp;from&nbsp;a&nbsp;queue&nbsp;is&nbsp;relatively&nbsp;simple&nbsp;and&nbsp;that&nbsp;you&nbsp;have&nbsp;a&nbsp;number&nbsp;&lt;br&nbsp;/&gt;of&nbsp;choices&nbsp;when&nbsp;it&nbsp;comes&nbsp;to&nbsp;'filtering'&nbsp;what&nbsp;you&nbsp;receive.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;&lt;br&nbsp;/&gt;go&nbsp;into&nbsp;a&nbsp;bit&nbsp;more&nbsp;detail&nbsp;about&nbsp;these&nbsp;'filters'&nbsp;then&nbsp;we&nbsp;can&nbsp;look&nbsp;at&nbsp;&lt;br&nbsp;/&gt;which&nbsp;topologies&nbsp;might&nbsp;best&nbsp;support&nbsp;your&nbsp;use&nbsp;cases.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Cheers,&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Tim&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;_______________________________________________&lt;br&nbsp;/&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&nbsp;/&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;br&nbsp;/&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/p&gt;<br>
&lt;/div&gt;&lt;/font&gt;
</tt>
