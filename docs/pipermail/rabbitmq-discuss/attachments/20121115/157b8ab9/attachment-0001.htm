<tt>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;hi,&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;I&nbsp;am&nbsp;a&nbsp;newbie&nbsp;to&nbsp;use&nbsp;a&nbsp;rabbitmq.&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;currently,&nbsp;I&nbsp;am&nbsp;using&nbsp;it&nbsp;without&nbsp;no&nbsp;auto-ack&nbsp;mode.&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;manually,&nbsp;I&nbsp;send&nbsp;&amp;nbsp;ack/nack&nbsp;after&nbsp;receiving&nbsp;messages&nbsp;from&nbsp;queues.&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;but,&nbsp;on&nbsp;this,&nbsp;I&nbsp;found&nbsp;that&amp;nbsp;current&nbsp;queue&nbsp;size&nbsp;is&nbsp;always&nbsp;different&nbsp;with&nbsp;a&nbsp;real&nbsp;queue&nbsp;size.&nbsp;actually,&nbsp;it&nbsp;is&nbsp;always&nbsp;same&nbsp;with&nbsp;actual&nbsp;queue&nbsp;size&nbsp;-&nbsp;prefetch&nbsp;size.&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;here&nbsp;is&nbsp;my&nbsp;code&nbsp;to&nbsp;send.&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&lt;span&nbsp;class=&quot;s1&quot;&gt;channel&lt;/span&gt;.basicPublish(&lt;span&nbsp;class=&quot;s1&quot;&gt;exchangeName&lt;/span&gt;,&nbsp;&lt;span&nbsp;class=&quot;s1&quot;&gt;queueName&lt;/span&gt;,&nbsp;&lt;span&nbsp;class=&quot;s2&quot;&gt;&lt;b&gt;null&lt;/b&gt;&lt;/span&gt;,&nbsp;message);&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;System.&lt;span&nbsp;class=&quot;s1&quot;&gt;out&lt;/span&gt;.println(&lt;span&nbsp;class=&quot;s1&quot;&gt;channel&lt;/span&gt;.queueDeclarePassive(&lt;span&nbsp;class=&quot;s1&quot;&gt;queueName&lt;/span&gt;).getMessageCount());&nbsp;//&nbsp;for&nbsp;debugging&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;If&nbsp;I&nbsp;set&nbsp;the&nbsp;prefetchCount&nbsp;as&nbsp;5.&nbsp;it&nbsp;prints&nbsp;out&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;1&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;2&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;3&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;4&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;.....&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;If&nbsp;I&nbsp;set&nbsp;it&nbsp;as&nbsp;3,&nbsp;it&nbsp;prints&nbsp;out&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;0&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;1&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;2&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;3&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;4&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;..&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;How&nbsp;could&nbsp;I&nbsp;retrieve&nbsp;the&nbsp;correct&nbsp;queue&nbsp;size&nbsp;regardless&nbsp;of&nbsp;the&nbsp;prefetchCount.&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;thanks&nbsp;for&nbsp;your&nbsp;concerns.&lt;/p&gt;
</tt>
