<tt>
additionally,&nbsp;this&nbsp;is&nbsp;an&nbsp;initialization&nbsp;code&nbsp;for&nbsp;channels.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&lt;span&nbsp;class=&quot;s1&quot;&gt;channel&lt;/span&gt;&nbsp;=&nbsp;ConnectionManager.createChannel();&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p2&quot;&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p3&quot;&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;logger&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;.info(&lt;/span&gt;&quot;Setting&nbsp;basic.qos&nbsp;prefetch-count&nbsp;to&nbsp;&quot;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;+&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;prefetchCount&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;);&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;span&nbsp;class=&quot;s1&quot;&gt;channel&lt;/span&gt;.basicQos(&lt;span&nbsp;class=&quot;s1&quot;&gt;prefetchCount&lt;/span&gt;);&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p2&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;span&nbsp;class=&quot;s1&quot;&gt;consumer&lt;/span&gt;&nbsp;=&nbsp;&lt;span&nbsp;class=&quot;s3&quot;&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt;&nbsp;QueueingConsumer(&lt;span&nbsp;class=&quot;s1&quot;&gt;channel&lt;/span&gt;);&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p4&quot;&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;consumerTag&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;=&nbsp;&lt;/span&gt;channel&lt;span&nbsp;class=&quot;s2&quot;&gt;.basicConsume(&lt;/span&gt;queueName&lt;span&nbsp;class=&quot;s2&quot;&gt;,&nbsp;&lt;/span&gt;autoAck&lt;span&nbsp;class=&quot;s2&quot;&gt;,&nbsp;&lt;/span&gt;consumer&lt;span&nbsp;class=&quot;s2&quot;&gt;);&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p2&quot;&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p3&quot;&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;logger&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;.info(&lt;/span&gt;&quot;Consuming&nbsp;a&nbsp;queue&nbsp;'&quot;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;+&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;queueName&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;+&nbsp;&lt;/span&gt;&quot;'&quot;&lt;span&nbsp;class=&quot;s2&quot;&gt;);&lt;/span&gt;&lt;/p&gt;&lt;br&gt;2012년&nbsp;11월&nbsp;16일&nbsp;금요일&nbsp;오후&nbsp;4시&nbsp;27분&nbsp;24초&nbsp;UTC+9,&nbsp;Henry&nbsp;JunYoung&nbsp;Kim&nbsp;님의&nbsp;말:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&gt;hi,&amp;nbsp;&lt;/p&gt;&lt;p&gt;I&nbsp;am&nbsp;a&nbsp;newbie&nbsp;to&nbsp;use&nbsp;a&nbsp;rabbitmq.&amp;nbsp;&lt;/p&gt;&lt;p&gt;currently,&nbsp;I&nbsp;am&nbsp;using&nbsp;it&nbsp;without&nbsp;no&nbsp;auto-ack&nbsp;mode.&amp;nbsp;&lt;/p&gt;&lt;p&gt;manually,&nbsp;I&nbsp;send&nbsp;&amp;nbsp;ack/nack&nbsp;after&nbsp;receiving&nbsp;messages&nbsp;from&nbsp;queues.&lt;/p&gt;&lt;p&gt;but,&nbsp;on&nbsp;this,&nbsp;I&nbsp;found&nbsp;that&amp;nbsp;current&nbsp;queue&nbsp;size&nbsp;is&nbsp;always&nbsp;different&nbsp;with&nbsp;a&nbsp;real&nbsp;queue&nbsp;size.&nbsp;actually,&nbsp;it&nbsp;is&nbsp;always&nbsp;same&nbsp;with&nbsp;actual&nbsp;queue&nbsp;size&nbsp;-&nbsp;prefetch&nbsp;size.&amp;nbsp;&lt;/p&gt;&lt;p&gt;here&nbsp;is&nbsp;my&nbsp;code&nbsp;to&nbsp;send.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&lt;span&gt;channel&lt;/span&gt;.basicPublish(&lt;span&gt;exchang&lt;wbr&gt;eName&lt;/span&gt;,&nbsp;&lt;span&gt;queueName&lt;/span&gt;,&nbsp;&lt;span&gt;&lt;b&gt;null&lt;/b&gt;&lt;/span&gt;,&nbsp;message);&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;System.&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;channel&lt;/span&gt;.&lt;wbr&gt;queueDeclarePassive(&lt;span&gt;queueName&lt;/span&gt;)&lt;wbr&gt;.getMessageCount());&nbsp;//&nbsp;for&nbsp;debugging&lt;/p&gt;&lt;p&gt;If&nbsp;I&nbsp;set&nbsp;the&nbsp;prefetchCount&nbsp;as&nbsp;5.&nbsp;it&nbsp;prints&nbsp;out&amp;nbsp;&lt;/p&gt;&lt;p&gt;0&lt;/p&gt;&lt;p&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&gt;0&lt;br&gt;&lt;/p&gt;&lt;p&gt;1&lt;/p&gt;&lt;p&gt;2&lt;/p&gt;&lt;p&gt;3&lt;/p&gt;&lt;p&gt;4&lt;/p&gt;&lt;p&gt;.....&lt;/p&gt;&lt;p&gt;If&nbsp;I&nbsp;set&nbsp;it&nbsp;as&nbsp;3,&nbsp;it&nbsp;prints&nbsp;out&lt;/p&gt;&lt;p&gt;0&lt;/p&gt;&lt;p&gt;0&lt;/p&gt;&lt;p&gt;0&lt;/p&gt;&lt;p&gt;1&lt;/p&gt;&lt;p&gt;2&lt;/p&gt;&lt;p&gt;3&lt;/p&gt;&lt;p&gt;4&lt;/p&gt;&lt;p&gt;..&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;How&nbsp;could&nbsp;I&nbsp;retrieve&nbsp;the&nbsp;correct&nbsp;queue&nbsp;size&nbsp;regardless&nbsp;of&nbsp;the&nbsp;prefetchCount.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;thanks&nbsp;for&nbsp;your&nbsp;concerns.&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
