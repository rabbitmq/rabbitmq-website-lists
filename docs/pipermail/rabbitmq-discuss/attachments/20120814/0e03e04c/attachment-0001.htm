<tt>
&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&nbsp;class=&quot;votecell&quot;&gt;&lt;div&nbsp;class=&quot;vote&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;vote-count-post&quot;&gt;0&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;vote-down-off&quot;&nbsp;title=&quot;This&nbsp;question&nbsp;does&nbsp;not&nbsp;show&nbsp;any&nbsp;research&nbsp;effort;&nbsp;it&nbsp;is&nbsp;unclear&nbsp;or&nbsp;not&nbsp;useful&nbsp;(click&nbsp;again&nbsp;to&nbsp;undo)&quot;&gt;down&nbsp;vote&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;star-off&quot;&nbsp;href=&quot;http://stackoverflow.com/questions/11951508/spring-amqp-would-like-to-put-message-to-queue-and-send-ack-immediately#&quot;&nbsp;title=&quot;This&nbsp;is&nbsp;a&nbsp;favorite&nbsp;question&nbsp;(click&nbsp;again&nbsp;to&nbsp;undo)&quot;&gt;favorite&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
&lt;/div&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>
&lt;td&nbsp;class=&quot;postcell&quot;&gt;<br>
&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;post-text&quot;&nbsp;itemprop=&quot;description&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;I&nbsp;wrote&nbsp;Java&nbsp;application,&nbsp;that&nbsp;sends&nbsp;messages&nbsp;to&nbsp;RabbitMQ.<br>
Then&nbsp;Flume&nbsp;picks&nbsp;messages&nbsp;up&nbsp;from&nbsp;RabbitMQ&nbsp;queue.<br>
I'm&nbsp;interested&nbsp;that&nbsp;nobody&nbsp;pulls&nbsp;messages&nbsp;from&nbsp;the&nbsp;queue,&nbsp;except&nbsp;flume.&lt;/p&gt;<br>
<br>
&lt;p&gt;My&nbsp;application&nbsp;uses&nbsp;Spring&nbsp;AMQP&nbsp;Java&nbsp;plugin.&lt;/p&gt;<br>
<br>
&lt;h2&gt;The&nbsp;problem:&lt;/h2&gt;<br>
<br>
&lt;p&gt;With&nbsp;the&nbsp;code&nbsp;below,&nbsp;message&nbsp;comes&nbsp;to&nbsp;RabbitMQ&nbsp;queue&nbsp;and&nbsp;stays&nbsp;'Unknowledges'&nbsp;for&nbsp;ever.<br>
As&nbsp;I&nbsp;understand,&nbsp;RabbitMQ&nbsp;is&nbsp;waiting&nbsp;for&nbsp;ACK&nbsp;from&nbsp;MessageListener,&nbsp;but&nbsp;MessageListener&nbsp;will&nbsp;never&nbsp;ACK.<br>
Does&nbsp;anybody&nbsp;have&nbsp;idea&nbsp;how&nbsp;to&nbsp;fix&nbsp;it?&lt;/p&gt;<br>
<br>
&lt;p&gt;The&nbsp;code:&lt;/p&gt;<br>
<br>
&lt;pre&nbsp;class=&quot;lang-java&nbsp;prettyprint&quot;&gt;&lt;code&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;class&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyAmqpConfiguration&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Autowired&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;ConnectionFactory&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;connectionFactory&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Bean&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;SimpleMessageListenerContainer&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;messageListenerContainer&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;()&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;SimpleMessageListenerContainer&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;container&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;SimpleMessageListenerContainer&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;connectionFactory&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;);&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;container&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;setQueues&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;activityLogsQueue&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;());&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;container&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;setMessageListener&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyMessageListener&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;());&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;container&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;setConcurrentConsumers&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;);&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;return&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;container&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Bean&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;name&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;str&quot;&gt;&quot;myTemplate&quot;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;RabbitTemplate&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;rabbitTemplate&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;()&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;RabbitTemplate&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;template&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;RabbitTemplate&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;connectionFactory&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;);&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;template&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;setMessageConverter&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyMessageConverter&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;());&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;return&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;template&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;class&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyMessageListener&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;implements&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MessageListener&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyMessageListener&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MessageConverter&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;converter&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyMessageHandler&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyObject&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;messageHandler&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;this&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;converter&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;converter&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;this&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;messageHandler&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;messageHandler&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Override&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;void&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;onMessage&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;Message&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;message&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;this&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;messageHandler&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;doThings&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;();&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;class&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyMessageHandler&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Autowired&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Qualifier&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;str&quot;&gt;&quot;myTemplate&quot;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;RabbitTemplate&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;template&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Override&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;void&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;handleMessage&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyObject&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;thing&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;template&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;convertAndSend&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;exchange&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;routingKey&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;thing&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;);&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;class&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MyMessageConverter&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;extends&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;JsonMessageConverter&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Override&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;protected&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;Message&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;createMessage&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;Object&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;object&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;,&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MessageProperties&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;messageProperties&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;com&quot;&gt;//do&nbsp;things&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;lit&quot;&gt;@Override&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;Object&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;fromMessage&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;Message&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;message&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;throws&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;MessageConversionException&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;throw&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;typ&quot;&gt;UnsupportedOperationException&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;str&quot;&gt;&quot;fromMessage&nbsp;is&nbsp;not&nbsp;supported&nbsp;in&nbsp;&quot;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;+&lt;/span&gt;&lt;span&nbsp;class=&quot;kwd&quot;&gt;this&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;getClass&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;().&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;getName&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;());&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;pun&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;pln&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</tt>
