<tt>
&lt;html&gt;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;-webkit-tap-highlight-color:&nbsp;rgba(26,&nbsp;26,&nbsp;26,&nbsp;0.296875);&nbsp;-webkit-composition-fill-color:&nbsp;rgba(175,&nbsp;192,&nbsp;227,&nbsp;0.230469);&nbsp;-webkit-composition-frame-color:&nbsp;rgba(77,&nbsp;128,&nbsp;180,&nbsp;0.230469);&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;span&gt;On&nbsp;15&nbsp;Oct&nbsp;2010,&nbsp;at&nbsp;10:03,&nbsp;mabrek&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mabrek@gmail.com&quot;&nbsp;x-apple-data-detectors=&quot;true&quot;&gt;&lt;a&nbsp;href=&quot;mailto:mabrek@gmail.com&quot;&gt;mabrek@gmail.com&lt;/a&gt;&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;On&nbsp;10/12/2010&nbsp;05:39&nbsp;PM,&nbsp;Rob&nbsp;Harrop&nbsp;wrote:&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Summary&nbsp;of&nbsp;changes:&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;*&nbsp;Dispatch&nbsp;to&nbsp;consumers&nbsp;now&nbsp;happens&nbsp;on&nbsp;a&nbsp;separate&nbsp;thread&nbsp;from&nbsp;the&nbsp;Connection&nbsp;thread&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Have&nbsp;you&nbsp;considered&nbsp;switching&nbsp;to&nbsp;NIO&nbsp;with&nbsp;one&nbsp;io-loop&nbsp;thread&nbsp;per&nbsp;connection/several&nbsp;connections?&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Something&nbsp;like&nbsp;Netty&nbsp;or&nbsp;Apache&nbsp;Mina.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;We've&nbsp;been&nbsp;chewing&nbsp;over&nbsp;NIO&nbsp;a&nbsp;bit&nbsp;recently.&nbsp;It's&nbsp;possible&nbsp;that&nbsp;we'll&nbsp;switch&nbsp;over&nbsp;but&nbsp;currently&nbsp;I&nbsp;think&nbsp;1&nbsp;IO&nbsp;thread&nbsp;per&nbsp;connection&nbsp;is&nbsp;sufficient.&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;*&nbsp;Each&nbsp;Channel&nbsp;has&nbsp;its&nbsp;own&nbsp;dispatch&nbsp;thread&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;It&nbsp;can&nbsp;result&nbsp;in&nbsp;creating&nbsp;too&nbsp;many&nbsp;threads.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;This&nbsp;is&nbsp;bounded&nbsp;by&nbsp;the&nbsp;number&nbsp;of&nbsp;channels.&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;*&nbsp;Channels&nbsp;are&nbsp;safe&nbsp;for&nbsp;use&nbsp;from&nbsp;multiple&nbsp;threads&nbsp;(not&nbsp;suitable&nbsp;for&nbsp;heavy&nbsp;concurrent&nbsp;usage&nbsp;though)&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Consider&nbsp;web&nbsp;appication&nbsp;scenario.&nbsp;It&nbsp;sends&nbsp;a&nbsp;message&nbsp;per&nbsp;incoming&nbsp;request.&nbsp;Requests&nbsp;are&nbsp;served&nbsp;from&nbsp;several&nbsp;threads&nbsp;(up&nbsp;to&nbsp;100)&nbsp;with&nbsp;a&nbsp;heavy&nbsp;concurrency&nbsp;(hundreds&nbsp;requests&nbsp;per&nbsp;second).&nbsp;So&nbsp;application&nbsp;needs&nbsp;either&nbsp;thread-safe&nbsp;non-blocking&nbsp;publisher&nbsp;that&nbsp;is&nbsp;suitable&nbsp;for&nbsp;heavy&nbsp;concurrency&nbsp;or&nbsp;very&nbsp;light-weight&nbsp;non-thread-safe&nbsp;publisher&nbsp;that&nbsp;can&nbsp;be&nbsp;created&nbsp;per&nbsp;incoming&nbsp;request&nbsp;and&nbsp;deleted&nbsp;after&nbsp;use.&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;Channels&nbsp;are&nbsp;pretty&nbsp;light&nbsp;to&nbsp;create.&nbsp;But&nbsp;I&nbsp;can&nbsp;certainly&nbsp;see&nbsp;a&nbsp;case&nbsp;where&nbsp;thread&nbsp;usage&nbsp;can&nbsp;go&nbsp;crazy.&lt;/span&gt;&lt;/span&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;-webkit-tap-highlight-color:&nbsp;rgba(26,&nbsp;26,&nbsp;26,&nbsp;0.296875);&nbsp;-webkit-composition-fill-color:&nbsp;rgba(175,&nbsp;192,&nbsp;227,&nbsp;0.230469);&nbsp;-webkit-composition-frame-color:&nbsp;rgba(77,&nbsp;128,&nbsp;180,&nbsp;0.230469);&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;-webkit-tap-highlight-color:&nbsp;rgba(26,&nbsp;26,&nbsp;26,&nbsp;0.296875);&nbsp;-webkit-composition-fill-color:&nbsp;rgba(175,&nbsp;192,&nbsp;227,&nbsp;0.230469);&nbsp;-webkit-composition-frame-color:&nbsp;rgba(77,&nbsp;128,&nbsp;180,&nbsp;0.230469);&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;span&gt;&lt;/span&gt;I'm&nbsp;on&nbsp;vacation&nbsp;this&nbsp;weekend&nbsp;but&nbsp;I'm&nbsp;pondering&nbsp;a&nbsp;solution&nbsp;to&nbsp;general&nbsp;thread&nbsp;pooling&nbsp;that&nbsp;will&nbsp;allow&nbsp;for&nbsp;a&nbsp;pluggable&nbsp;ExecutorService.&nbsp;The&nbsp;solution&nbsp;I&nbsp;have&nbsp;in&nbsp;mind&nbsp;will&nbsp;guarantee&nbsp;per&nbsp;consumer&nbsp;ordering&nbsp;and&nbsp;is&nbsp;not&nbsp;susceptible&nbsp;to&nbsp;stalling.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;-webkit-tap-highlight-color:&nbsp;rgba(26,&nbsp;26,&nbsp;26,&nbsp;0.296875);&nbsp;-webkit-composition-fill-color:&nbsp;rgba(175,&nbsp;192,&nbsp;227,&nbsp;0.230469);&nbsp;-webkit-composition-frame-color:&nbsp;rgba(77,&nbsp;128,&nbsp;180,&nbsp;0.230469);&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Regards,&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Anton&nbsp;Lebedevich.&lt;/span&gt;&lt;/blockquote&gt;&lt;/span&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
