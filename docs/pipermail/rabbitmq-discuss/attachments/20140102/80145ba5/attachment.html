<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Rohit;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jan&nbsp;1,&nbsp;2014&nbsp;at&nbsp;11:31&nbsp;PM,&nbsp;Rohit&nbsp;Patle&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:Rohit.Patel2@techmahindra.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Rohit.Patel2@techmahindra.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&gt;<br>
&lt;div&nbsp;style=&quot;direction:ltr;font-size:10pt;font-family:Tahoma&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;using&nbsp;rabbitmq-c&nbsp;with&nbsp;following&nbsp;specifications:&lt;br&gt;<br>
Name:&nbsp;Librabbitmq&lt;br&gt;<br>
Description:&nbsp;An&nbsp;AMQP&nbsp;0-9-1&nbsp;client&nbsp;library&lt;br&gt;<br>
Client&nbsp;library&nbsp;Version:&nbsp;0.3.0&lt;br&gt;<br>
Rabbitmq&nbsp;server&nbsp;Version:&nbsp;3.2.2-1&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;highly&nbsp;recommend&nbsp;upgrading&nbsp;to&nbsp;v0.4.1&nbsp;if&nbsp;possible,&nbsp;as&nbsp;there&nbsp;have&nbsp;been&nbsp;several&nbsp;improvements&nbsp;around&nbsp;error&nbsp;handling&nbsp;since&nbsp;v0.3.0. &lt;/div&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;direction:ltr;font-size:10pt;font-family:Tahoma&quot;&gt;<br>
<br>
&lt;br&gt;<br>
1.&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;close&nbsp;the&nbsp;channel&nbsp;and&nbsp;getting&nbsp;the&lt;span&nbsp;style=&quot;background-color:rgb(255,255,0)&quot;&gt;&nbsp;AMQP_RESPONSE_LIBRARY_EXCEPTION&lt;/span&gt;&nbsp;in&nbsp;amqp_channel_close&nbsp;API.&nbsp;Can&nbsp;you&nbsp;tell&nbsp;me&nbsp;what&nbsp;are&nbsp;the&nbsp;different&nbsp;reason&nbsp;for&nbsp;:&lt;br&gt;<br>
&lt;br&gt;<br>
i.&nbsp;AMQP_RESPONSE_LIBRARY_EXCEPTION,&lt;br&gt;<br>
ii. &nbsp;AMQP_RESPONSE_SERVER_EXCEPTION&lt;br&gt;<br>
iii.&nbsp;AMQP_RESPONSE_NONE&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;See:&nbsp;&lt;a&nbsp;href=&quot;https://github.com/alanxz/rabbitmq-c/blob/5f291ea772a536da3087f216e240016365e61a82/librabbitmq/amqp.h#L1582&quot;&gt;https://github.com/alanxz/rabbitmq-c/blob/5f291ea772a536da3087f216e240016365e61a82/librabbitmq/amqp.h#L1582&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hopefully&nbsp;you&nbsp;never&nbsp;see&nbsp;an&nbsp;AMQP_RESPONSE_NONE&nbsp;-&nbsp;as&nbsp;that&nbsp;would&nbsp;likely&nbsp;indicate&nbsp;a&nbsp;bug&nbsp;somewhere. &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
&lt;div&gt;&lt;div&nbsp;style=&quot;direction:ltr;font-size:10pt;font-family:Tahoma&quot;&gt;<br>
&lt;br&gt;<br>
2.&nbsp;What&nbsp;will&nbsp;be&nbsp;the&nbsp;implication&nbsp;if&nbsp;I&nbsp;call&nbsp;amqp_destroy_connection&nbsp;without&nbsp;calling&nbsp;amqp_connection_close,&nbsp;amqp_queue_unbind&nbsp;and&nbsp;amqp_queue_delete?&nbsp;Will&nbsp;it&nbsp;release&nbsp;all&nbsp;the&nbsp;internal&nbsp;resources&nbsp;acquired&nbsp;while&nbsp;creating&nbsp;the&nbsp;connection?&nbsp;In&nbsp;other&nbsp;words,&nbsp;is&nbsp;there&nbsp;any<br>
&nbsp;need&nbsp;to&nbsp;call&nbsp;these&nbsp;APIs&nbsp;if&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;call&nbsp;amqp_destroy_connection&nbsp;API&nbsp;alone?&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Calling&nbsp;amqp_destroy_connection&nbsp;without&nbsp;calling&nbsp;amqp_connection_close&nbsp;first&nbsp;will&nbsp;cause&nbsp;the&nbsp;underlying&nbsp;socket&nbsp;to&nbsp;be&nbsp;closed&nbsp;without&nbsp;sending&nbsp;the&nbsp;connection.close&nbsp;method&nbsp;to&nbsp;the&nbsp;broker.&nbsp;This&nbsp;should&nbsp;not&nbsp;leak&nbsp;any&nbsp;resources&nbsp;on&nbsp;the&nbsp;client&nbsp;side.&nbsp; On&nbsp;the&nbsp;broker&nbsp;side&nbsp;the&nbsp;broker&nbsp;will&nbsp;eventually&nbsp;detect&nbsp;that&nbsp;the&nbsp;socket&nbsp;has&nbsp;been&nbsp;closed&nbsp;and&nbsp;will&nbsp;emit&nbsp;a&nbsp;warning&nbsp;to&nbsp;the&nbsp;error&nbsp;log&nbsp;indicating&nbsp;that&nbsp;a&nbsp;connection&nbsp;closed&nbsp;unexpectedly.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;for&nbsp;amqp_queue_unbind&nbsp;and&nbsp;amqp_queue_delete,&nbsp;these&nbsp;only&nbsp;manipulate&nbsp;objects&nbsp;defined&nbsp;on&nbsp;the&nbsp;broker.&nbsp;A&nbsp;queue&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;hang&nbsp;around&nbsp;after&nbsp;a&nbsp;client&nbsp;disconnects&nbsp;depending&nbsp;on&nbsp;how&nbsp;it&nbsp;was&nbsp;declared.&nbsp;A&nbsp;queue&nbsp;binding&nbsp;will&nbsp;hang&nbsp;around&nbsp;as&nbsp;long&nbsp;as&nbsp;both&nbsp;the&nbsp;exchange&nbsp;and&nbsp;queue&nbsp;still&nbsp;exist.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTH&lt;/div&gt;&lt;div&gt;-Alan&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
