<tt>
Update:&nbsp;was&nbsp;because&nbsp;my&nbsp;queue&nbsp;name&nbsp;and&nbsp;routing&nbsp;key&nbsp;were&nbsp;unicode&nbsp;strings&nbsp;-&nbsp;pulled&nbsp;the&nbsp;latest&nbsp;commit&nbsp;to&nbsp;pika&nbsp;which&nbsp;now&nbsp;checks&nbsp;for&nbsp;that,&nbsp;helped&nbsp;me&nbsp;debug.&nbsp;Looks&nbsp;like&nbsp;everything&nbsp;has&nbsp;to&nbsp;be&nbsp;a&nbsp;bytestring&nbsp;in&nbsp;order&nbsp;for&nbsp;the&nbsp;_marshal&nbsp;function&nbsp;to&nbsp;generate&nbsp;a&nbsp;valid&nbsp;payload,&nbsp;otherwise&nbsp;python&nbsp;tries&nbsp;to&nbsp;encode&nbsp;everything&nbsp;into&nbsp;unicode&lt;br&gt;&lt;br&gt;On&nbsp;Monday,&nbsp;August&nbsp;13,&nbsp;2012&nbsp;9:40:53&nbsp;AM&nbsp;UTC-4,&nbsp;Stephen&nbsp;Young&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;Hi&nbsp;there,&lt;div&gt;&lt;br&gt;I've&nbsp;been&nbsp;using&nbsp;version&nbsp;0.9,6&nbsp;pika&nbsp;in&nbsp;a&nbsp;stable&nbsp;environment&nbsp;for&nbsp;about&nbsp;a&nbsp;month&nbsp;and&nbsp;am&nbsp;suddenly&nbsp;encountering&nbsp;a&nbsp;unicode&nbsp;error&nbsp;that&nbsp;looks&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;&lt;div&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/lib/python2.7/site-&lt;wbr&gt;packages/Twisted-12.0.0-py2.7-&lt;wbr&gt;macosx-10.7-x86_64.egg/&lt;wbr&gt;twisted/internet/&lt;wbr&gt;selectreactor.py&quot;,&nbsp;line&nbsp;150,&nbsp;in&nbsp;_doReadOrWrite&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;why&nbsp;=&nbsp;getattr(selectable,&nbsp;method)()&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/lib/python2.7/site-&lt;wbr&gt;packages/Twisted-12.0.0-py2.7-&lt;wbr&gt;macosx-10.7-x86_64.egg/&lt;wbr&gt;twisted/internet/tcp.py&quot;,&nbsp;line&nbsp;199,&nbsp;in&nbsp;doRead&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;rval&nbsp;=&nbsp;self.protocol.dataReceived(&lt;wbr&gt;data)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/&lt;wbr&gt;adapters/twisted_connection.&lt;wbr&gt;py&quot;,&nbsp;line&nbsp;378,&nbsp;in&nbsp;dataReceived&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;self._on_data_available(data)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/&lt;wbr&gt;connection.py&quot;,&nbsp;line&nbsp;701,&nbsp;in&nbsp;_on_data_available&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;frame)&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;#&nbsp;Args&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/&lt;wbr&gt;callback.py&quot;,&nbsp;line&nbsp;161,&nbsp;in&nbsp;process&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;callback(*args,&nbsp;**keywords)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/channel.&lt;wbr&gt;py&quot;,&nbsp;line&nbsp;152,&nbsp;in&nbsp;_on_synchronous_complete&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;self.rpc(*method)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/channel.&lt;wbr&gt;py&quot;,&nbsp;line&nbsp;114,&nbsp;in&nbsp;rpc&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;self.send_method(method)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/channel.&lt;wbr&gt;py&quot;,&nbsp;line&nbsp;121,&nbsp;in&nbsp;send_method&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;self.connection._send_method(&lt;wbr&gt;self.channel_number,&nbsp;method,&nbsp;content)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/&lt;wbr&gt;connection.py&quot;,&nbsp;line&nbsp;781,&nbsp;in&nbsp;_send_method&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;self._send_frame(pika.frame.&lt;wbr&gt;Method(channel_number,&nbsp;method))&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/&lt;wbr&gt;adapters/twisted_connection.&lt;wbr&gt;py&quot;,&nbsp;line&nbsp;355,&nbsp;in&nbsp;_send_frame&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;marshalled_frame&nbsp;=&nbsp;frame.marshal()&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/frame.&lt;wbr&gt;py&quot;,&nbsp;line&nbsp;65,&nbsp;in&nbsp;marshal&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;return&nbsp;self._marshal(pieces)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;File&nbsp;&quot;/devel/src/pika/pika/frame.&lt;wbr&gt;py&quot;,&nbsp;line&nbsp;40,&nbsp;in&nbsp;_marshal&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;len(payload))&nbsp;+&nbsp;payload&nbsp;+&nbsp;chr(spec.FRAME_END)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;exceptions.UnicodeDecodeError:&nbsp;'ascii'&nbsp;codec&nbsp;can't&nbsp;decode&nbsp;byte&nbsp;0xce&nbsp;in&nbsp;position&nbsp;0:&nbsp;ordinal&nbsp;not&nbsp;in&nbsp;range(128)&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm&nbsp;using&nbsp;the&nbsp;twisted&nbsp;adapter,&nbsp;and&nbsp;I&nbsp;have&nbsp;a&nbsp;hunch&nbsp;that&nbsp;the&nbsp;problem&nbsp;is&nbsp;coming&nbsp;from&nbsp;there&nbsp;somewhere,&nbsp;but&nbsp;I'm&nbsp;pretty&nbsp;lost&nbsp;as&nbsp;far&nbsp;as&nbsp;what&nbsp;to&nbsp;do&nbsp;to&nbsp;fix&nbsp;this&nbsp;bug.&nbsp;Anyone&nbsp;have&nbsp;any&nbsp;ideas?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Stephen&amp;nbsp;&lt;/div&gt;&lt;/blockquote&gt;
</tt>
