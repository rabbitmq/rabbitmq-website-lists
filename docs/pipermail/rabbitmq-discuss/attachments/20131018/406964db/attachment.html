<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;stomp.js&nbsp;is&nbsp;the&nbsp;latest,&nbsp;found&nbsp;in &lt;a&nbsp;href=&quot;https://github.com/jmesnil/stomp-websocket/blob/master/lib/stomp.js&quot;&gt;https://github.com/jmesnil/stomp-websocket/blob/master/lib/stomp.js&lt;/a&gt;.&lt;/div&gt;<br>
&lt;div&gt;I&amp;#39;m&nbsp;using&nbsp;the&nbsp;following&nbsp;code.&nbsp;Note,&nbsp;that&nbsp;I&amp;#39;m&nbsp;not&nbsp;using&nbsp;SockJS.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;var&nbsp;client&nbsp;=&nbsp;Stomp.client(&amp;#39;ws://&lt;a&nbsp;href=&quot;http://vm0077.virtues.fi:15674/stomp/websocket&amp;#39;&quot;&gt;vm0077.virtues.fi:15674/stomp/websocket&amp;#39;&lt;/a&gt;);&lt;/div&gt;<br>
&lt;div&gt;client.heartbeat.outgoing&nbsp;=&nbsp;20000;&lt;/div&gt;&lt;div&gt;client.heartbeat.incoming&nbsp;=&nbsp;0;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;client.debug&nbsp;=&nbsp;function(str)&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;$(&amp;quot;#debug&amp;quot;).append(str&nbsp;+&nbsp;&amp;quot;\n&amp;quot;);&lt;/div&gt;<br>
&lt;div&gt;};&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;var&nbsp;on_connect&nbsp;=&nbsp;function()&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;subId&nbsp;=&nbsp;client.subscribe(&amp;#39;/exchange/capacity/nothing.special&amp;#39;,&nbsp;handleMessage);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;console.log(&amp;#39;connected&amp;#39;);&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;var&nbsp;data&nbsp;=&nbsp;&amp;quot;Hello&nbsp;World!&amp;quot;;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;client.send(&amp;#39;/exchange/capacity/nothing.special&amp;#39;,&nbsp;{},&nbsp;data);&lt;/div&gt;&lt;div&gt;<br>
};&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;var&nbsp;handleMessage&nbsp;=&nbsp;function(d)&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;$(&amp;quot;#messages&amp;quot;).append(d.body&nbsp;+&nbsp;&amp;quot;\n&amp;quot;);&lt;/div&gt;&lt;div&gt;};&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;var&nbsp;on_error&nbsp;=&nbsp; function(error)&nbsp;{&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;console.log(error);&lt;/div&gt;&lt;div&gt;};&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;client.connect(&amp;#39;user&amp;#39;,&nbsp;&amp;#39;pass&amp;#39;,&nbsp;on_connect,&nbsp;on_error,&nbsp;&amp;#39;/&amp;#39;);&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
Br,&lt;/div&gt;&lt;div&gt;Petri&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;Petri&nbsp;Luojus&lt;br&gt;+358&nbsp;41&nbsp;437&nbsp;3592&lt;br&gt;Oulu,&nbsp;Finland&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:luojus@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;luojus@gmail.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Oct&nbsp;18,&nbsp;2013&nbsp;at&nbsp;1:43&nbsp;PM,&nbsp;Emile&nbsp;Joubert&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;11/10/13&nbsp;07:58,&nbsp;Petri&nbsp;Luojus&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&amp;gt;&nbsp;GET&nbsp;/stomp/websocket&nbsp;HTTP/1.1&lt;br&gt;<br>
&amp;gt;&nbsp;Upgrade:&nbsp;websocket&lt;br&gt;<br>
&amp;gt;&nbsp;Connection:&nbsp;Upgrade&lt;br&gt;<br>
&amp;gt;&nbsp;Host:&nbsp;xxx.yyy:15674&lt;br&gt;<br>
&amp;gt;&nbsp;Origin:&nbsp;null&lt;br&gt;<br>
&amp;gt;&nbsp;Sec-WebSocket-Protocol:&nbsp;v10.stomp,&nbsp;v11.stomp&lt;br&gt;<br>
&amp;gt;&nbsp;Pragma:&nbsp;no-cache&lt;br&gt;<br>
&amp;gt;&nbsp;Cache-Control:&nbsp;no-cache&lt;br&gt;<br>
&amp;gt;&nbsp;Sec-WebSocket-Key:&nbsp;YRpCwsRP6s2ounZHK4soEQ==&lt;br&gt;<br>
&amp;gt;&nbsp;Sec-WebSocket-Version:&nbsp;13&lt;br&gt;<br>
&amp;gt;&nbsp;Sec-WebSocket-Extensions:&nbsp;x-webkit-deflate-frame&lt;br&gt;<br>
&amp;gt;&nbsp;User-Agent:&nbsp;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1;&nbsp;WOW64)&nbsp;AppleWebKit/537.36&lt;br&gt;<br>
&amp;gt;&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/30.0.1599.69&nbsp;Safari/537.36&lt;br&gt;<br>
&amp;gt;&nbsp;Cookie:&nbsp;auth=bHVvanVzOk15aGthbGU1;&lt;br&gt;<br>
&amp;gt;&nbsp;m=1933:600%7C5|2377:large|2491:chart|2663:t|6967:t|34e2:|4e99:t|2c69:t|2a03:t|745a:t|77cb:t|5cf4:t|3a95:avg|54b5:small|29b3:60%7C5|3a8e:chart|54ae:small|29ac:600%7C5|47ba:t|e69:chart|45b9:600%7C5|4a01:t|ca3:t|79d4:chart|640c:small|678e:60%7C5|4e71:large|4d66:500|1d98:t|6cfc:t|15cc:t&lt;br&gt;<br>
<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;HTTP/1.1&nbsp;101&nbsp;Switching&nbsp;Protocols&lt;br&gt;<br>
&amp;gt;&nbsp;Upgrade:&nbsp;websocket&lt;br&gt;<br>
&amp;gt;&nbsp;Sec-Websocket-Accept:&nbsp;DGeZKxS98lD43p+4Gkhb17W29E0=&lt;br&gt;<br>
&amp;gt;&nbsp;Connection:&nbsp;Upgrade&lt;br&gt;<br>
&lt;br&gt;<br>
Can&nbsp;you&nbsp;confirm&nbsp;what&nbsp;the&nbsp;code&nbsp;you&nbsp;used&nbsp;to&nbsp;generate&nbsp;these&nbsp;headers,&nbsp;and&lt;br&gt;<br>
which&nbsp;revision&nbsp;of&nbsp;stomp.js?&nbsp;I&nbsp;get&nbsp;slightly&nbsp;different&nbsp;headers&nbsp;and&nbsp;no&lt;br&gt;<br>
error&nbsp;when&nbsp;I&nbsp;use&nbsp;the&nbsp;latest&nbsp;version&nbsp;of&nbsp;Chrome&nbsp;and&nbsp;the&nbsp;web&nbsp;stomp&nbsp;examples&lt;br&gt;<br>
that&nbsp;ship&nbsp;in&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;&lt;a&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-web-stomp-examples/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://hg.rabbitmq.com/rabbitmq-web-stomp-examples/&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
GET&nbsp;ws://localhost:15674/stomp/584/zw7on1yc/websocket&nbsp;HTTP/1.1&lt;br&gt;<br>
Pragma:&nbsp;no-cache&lt;br&gt;<br>
Origin:&nbsp;&lt;a&nbsp;href=&quot;http://localhost:15670&quot;&nbsp;target=&quot;_blank&quot;&gt;http://localhost:15670&lt;/a&gt;&lt;br&gt;<br>
Host:&nbsp;localhost:15674&lt;br&gt;<br>
Sec-WebSocket-Key:&nbsp;VE4morwMfRKFtxmcVUdddQ==&lt;br&gt;<br>
User-Agent:&nbsp;Mozilla/5.0&nbsp;(X11;&nbsp;Linux&nbsp;x86_64)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&lt;br&gt;<br>
like&nbsp;Gecko)&nbsp;Chrome/30.0.1599.101&nbsp;Safari/537.36&lt;br&gt;<br>
Upgrade:&nbsp;websocket&lt;br&gt;<br>
Sec-WebSocket-Extensions:&nbsp;x-webkit-deflate-frame&lt;br&gt;<br>
Cache-Control:&nbsp;no-cache&lt;br&gt;<br>
Connection:&nbsp;Upgrade&lt;br&gt;<br>
Sec-WebSocket-Version:&nbsp;13&lt;br&gt;<br>
&lt;br&gt;<br>
HTTP/1.1&nbsp;101&nbsp;Switching&nbsp;Protocols&lt;br&gt;<br>
Connection:&nbsp;Upgrade&lt;br&gt;<br>
Sec-Websocket-Accept:&nbsp;x4EO4xRPJ3Cc9kzEnvlv2ToCSvc=&lt;br&gt;<br>
Upgrade:&nbsp;websocket&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
