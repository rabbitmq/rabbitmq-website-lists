<tt>
&lt;div&gt;Thank&nbsp;you&nbsp;for&nbsp;your&nbsp;reply!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;might&nbsp;be&nbsp;a&nbsp;little&nbsp;question&nbsp;but,&nbsp;if&nbsp;RabbitMQ&nbsp;runs&nbsp;out&nbsp;of&nbsp;memory,&nbsp;and&nbsp;I&nbsp;am&nbsp;unable&nbsp;to&nbsp;open&nbsp;a&nbsp;new&nbsp;channel,&nbsp;how&nbsp;would&nbsp;one&nbsp;then&nbsp;consume&nbsp;off&nbsp;the&nbsp;queue,&nbsp;if&nbsp;one&nbsp;isn&amp;#39;t&nbsp;able&nbsp;to&nbsp;open&nbsp;a&nbsp;channel&nbsp;to&nbsp;do&nbsp;so?&nbsp;Or&nbsp;is&nbsp;this&nbsp;something&nbsp;which&nbsp;has&nbsp;been&nbsp;solved&nbsp;with&nbsp;the&nbsp;new&nbsp;persister?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers&lt;/div&gt;&lt;div&gt;&lt;br&gt;Cal&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;18,&nbsp;2010&nbsp;at&nbsp;5:44&nbsp;PM,&nbsp;Alexandru&nbsp;Scvorţov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:alexandru@rabbitmq.com&quot;&gt;alexandru@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Hi&nbsp;Cal,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;seem&nbsp;to&nbsp;have&nbsp;a&nbsp;problem&nbsp;where&nbsp;RabbitMQ&nbsp;will&nbsp;stop&nbsp;accepting&nbsp;channel&nbsp;requests&lt;br&gt;<br>
&amp;gt;&nbsp;after&nbsp;either&nbsp;a&nbsp;certain&nbsp;amount&nbsp;of&nbsp;messages&nbsp;are&nbsp;in&nbsp;the&nbsp;queue,&nbsp;or&nbsp;once&nbsp;I&nbsp;have&lt;br&gt;<br>
&amp;gt;&nbsp;sent&nbsp;200-300&nbsp;connection&nbsp;requests.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;What&nbsp;you&nbsp;describe&nbsp;is&nbsp;usually&nbsp;caused&nbsp;by&nbsp;rabbit&nbsp;running&nbsp;out&nbsp;memory.&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;rabbit&nbsp;runs&nbsp;out&nbsp;of&nbsp;memory&nbsp;it&nbsp;stops&nbsp;accepting&nbsp;new&nbsp;connections.&lt;br&gt;<br>
Check&nbsp;the&nbsp;logs&nbsp;for&nbsp;for&nbsp;warnings&nbsp;about&nbsp;the&nbsp;hitting&nbsp;the&nbsp;high&nbsp;memory&lt;br&gt;<br>
watermark&nbsp;to&nbsp;see&nbsp;if&nbsp;this&nbsp;is&nbsp;indeed&nbsp;the&nbsp;case.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;At&nbsp;first&nbsp;I&nbsp;thought&nbsp;it&nbsp;was&nbsp;a&nbsp;memory&nbsp;problem,&nbsp;but&nbsp;if&nbsp;I&nbsp;restart&nbsp;RabbitMQ,&lt;br&gt;<br>
&amp;gt;&nbsp;sometimes&nbsp;it&nbsp;will&nbsp;start&nbsp;accepting&nbsp;connections&nbsp;again&nbsp;and&nbsp;allow&nbsp;me&nbsp;to&nbsp;put&nbsp;more&lt;br&gt;<br>
&amp;gt;&nbsp;items&nbsp;on&nbsp;the&nbsp;queue,&nbsp;but&nbsp;then&nbsp;other&nbsp;times&nbsp;it&nbsp;won&amp;#39;t.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Sounds&nbsp;like&nbsp;you&amp;#39;re&nbsp;squeezing&nbsp;in&nbsp;a&nbsp;few&nbsp;more&nbsp;messages&nbsp;before&nbsp;hitting&nbsp;the&nbsp;memory&lt;br&gt;<br>
watermark&nbsp;again.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Currently,&nbsp;I&nbsp;am&nbsp;at&nbsp;324k&nbsp;messages&nbsp;in&nbsp;the&nbsp;queue.&lt;br&gt;<br>
&amp;gt;&nbsp;Does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;ideas&nbsp;what&nbsp;could&nbsp;be&nbsp;causing&nbsp;this?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;That&amp;#39;s&nbsp;sounds&nbsp;like&nbsp;an&nbsp;awful&nbsp;lot&nbsp;of&nbsp;messages.&nbsp; Do&nbsp;you&nbsp;actually&nbsp;need&nbsp;all&lt;br&gt;<br>
of&nbsp;them&nbsp;on&nbsp;the&nbsp;queue?&nbsp; Are&nbsp;you&nbsp;consuming&nbsp;them?&nbsp;(if&nbsp;so,&nbsp;are&nbsp;you&nbsp;also&lt;br&gt;<br>
ack&amp;#39;ing&nbsp;them?)&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;problem&nbsp;you&amp;#39;re&nbsp;facing&nbsp;is&nbsp;that&nbsp;the&nbsp;released&nbsp;versions&nbsp;of&nbsp;rabbit&nbsp;hold&lt;br&gt;<br>
all&nbsp;of&nbsp;the&nbsp;messages&nbsp;in&nbsp;memory.&nbsp; As&nbsp;a&nbsp;direct&nbsp;consequence,&nbsp;how&nbsp;many&lt;br&gt;<br>
messages&nbsp;you&nbsp;can&nbsp;hold&nbsp;in&nbsp;the&nbsp;broker&nbsp;is&nbsp;upper-bounded&nbsp;by&nbsp;the&nbsp;amount&nbsp;of&lt;br&gt;<br>
RAM&nbsp;you&nbsp;have&nbsp;(the&nbsp;default&nbsp;is&nbsp;0.4&nbsp;of&nbsp;the&nbsp;available&nbsp;RAM,&nbsp;if&nbsp;I&nbsp;remember&lt;br&gt;<br>
correctly).&nbsp; This&nbsp;has&nbsp;been&nbsp;fixed&nbsp;on&nbsp;the&nbsp;default&nbsp;branch&nbsp;(i.e.&nbsp;the&nbsp;amount&lt;br&gt;<br>
of&nbsp;messages&nbsp;is&nbsp;upper-bounded&nbsp;by&nbsp;disk-space)&nbsp;and&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;next&lt;br&gt;<br>
release.&lt;br&gt;<br>
&lt;br&gt;<br>
Hope&nbsp;this&nbsp;helps.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Alex&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;p&nbsp;style=&quot;color:rgb(0,&nbsp;51,&nbsp;102);font-weight:bold&quot;&gt;&lt;span&nbsp;style=&quot;border-collapse:separate;font-family:arial;line-height:normal;font-size:small&quot;&gt;Cal&nbsp;Leeming&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;color:rgb(0,&nbsp;51,&nbsp;102);font-weight:bold&quot;&gt;<br>
Operational&nbsp;Security&nbsp;&amp;amp;&nbsp;Support&nbsp;Team&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(204,&nbsp;204,&nbsp;204);padding-bottom:25px&quot;&gt;&lt;b&gt;Out&nbsp;of&nbsp;Hours: &lt;/b&gt;+44&nbsp;(07534)&nbsp;971120&nbsp;| &lt;b&gt;Support&nbsp;Tickets: &lt;/b&gt;&lt;a&nbsp;href=&quot;mailto:support@simplicitymedialtd.co.uk&quot;&nbsp;style=&quot;color:rgb(49,&nbsp;132,&nbsp;173)&quot;&nbsp;target=&quot;_blank&quot;&gt;support@simplicitymedialtd.co.uk&lt;/a&gt; &lt;br&gt;<br>
&lt;b&gt;Fax: &lt;/b&gt;+44&nbsp;(02476)&nbsp;578987 | &lt;b&gt;Email: &lt;/b&gt;&lt;a&nbsp;href=&quot;mailto:cal.leeming@simplicitymedialtd.co.uk&quot;&nbsp;style=&quot;color:rgb(49,&nbsp;132,&nbsp;173)&quot;&nbsp;target=&quot;_blank&quot;&gt;cal.leeming@simplicitymedialtd.co.uk&lt;/a&gt; &lt;/p&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;line-height:13px;font-size:10px;color:rgb(185,&nbsp;184,&nbsp;184)&quot;&gt;Simplicity&nbsp;Media&nbsp;Ltd.&nbsp;All&nbsp;rights&nbsp;reserved.&lt;br&gt;<br>
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;line-height:13px;font-size:10px;color:rgb(185,&nbsp;184,&nbsp;184)&quot;&gt;Registered&nbsp;company&nbsp;number 7143564&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
