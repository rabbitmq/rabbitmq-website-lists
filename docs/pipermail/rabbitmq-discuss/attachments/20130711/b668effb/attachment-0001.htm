<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Guillaume,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Wiser&nbsp;heads&nbsp;will&nbsp;no&nbsp;doubt&nbsp;correct&nbsp;me,&nbsp;but:&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;1.&nbsp;Durable&nbsp;queues&nbsp;!=&nbsp;durable&nbsp;messages:&nbsp;for&nbsp;your&nbsp;messages&nbsp;to&nbsp;(possibly)&nbsp;still&nbsp;be&nbsp;there&nbsp;after&nbsp;a&nbsp;crash&nbsp;you&nbsp;must&nbsp;indicate&nbsp;that&nbsp;they&nbsp;are&nbsp;persistent&nbsp;(delivery_mode=2).&lt;/div&gt;<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;2.&nbsp;You&nbsp;can&nbsp;cross-link&nbsp;your&nbsp;exchanges/queues&nbsp;using&nbsp;shovels&nbsp;such&nbsp;that&nbsp;messages&nbsp;appear&nbsp;in&nbsp;both&nbsp;servers&nbsp;in&nbsp;a&nbsp;symmetric&nbsp;manner.&nbsp;I&nbsp;have&nbsp;personally&nbsp;found&nbsp;this&nbsp;easier&nbsp;to:&nbsp;understand,&nbsp;configure,&nbsp;implement,&nbsp;and&nbsp;operate&nbsp;than&nbsp;federation,&nbsp;but&nbsp;don&amp;#39;t&nbsp;let&nbsp;me&nbsp;discourage&nbsp;you&nbsp;from&nbsp;trying&nbsp;federation&nbsp;as&nbsp;well!&lt;/div&gt;<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;3.&nbsp;We&nbsp;do&nbsp;health&nbsp;checks&nbsp;and&nbsp;automated&nbsp;failover&nbsp;using&nbsp;AWS&nbsp;Route&nbsp;53:&nbsp;a&nbsp;smart&nbsp;DNS&nbsp;service&nbsp;-&nbsp;works&nbsp;fine,&nbsp;so&nbsp;you&nbsp;are&nbsp;good&nbsp;there.&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;4.&nbsp;Bonus:&nbsp;we&nbsp;actually&nbsp;exchange&nbsp;messages&nbsp;twice&nbsp;between&nbsp;servers&nbsp;(actually&nbsp;clusters),&nbsp;once&nbsp;before&nbsp;they&nbsp;are&nbsp;&amp;#39;processed&amp;#39;&nbsp;and&nbsp;once&nbsp;after&nbsp;they&nbsp;are&nbsp;&amp;#39;processed&amp;#39;.&nbsp;We&nbsp;do&nbsp;this&nbsp;because&nbsp;our&nbsp;own&nbsp;processing&nbsp;steps&nbsp;are&nbsp;the&nbsp;least&nbsp;reliable&nbsp;and&nbsp;most&nbsp;time&nbsp;consuming&nbsp;portion&nbsp;of&nbsp;each&nbsp;message&nbsp;pipeline,&nbsp;hence&nbsp;failures&nbsp;tend&nbsp;to&nbsp;occur&nbsp;there.&nbsp;This&nbsp;results&nbsp;in&nbsp;duplicate&nbsp;messages&nbsp;after&nbsp;processing&nbsp;(actually&nbsp;triplicate&nbsp;in&nbsp;our&nbsp;case).&nbsp;We&nbsp;have&nbsp;a&nbsp;&amp;#39;resolver&amp;#39;&nbsp;layer&nbsp;that&nbsp;de-duplicates&nbsp;and&nbsp;continuously&nbsp;reports&nbsp;on&nbsp;paths&nbsp;and&nbsp;latencies,&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;successful&nbsp;processing&nbsp;of&nbsp;each&nbsp;message.&lt;/div&gt;<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Michael&nbsp;Laing&lt;/div&gt;&lt;div&nbsp;style&gt;NYTimes&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;11,&nbsp;2013&nbsp;at&nbsp;9:19&nbsp;PM,&nbsp;Guillaume&nbsp;Ouellet&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:gui.ouellet@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;gui.ouellet@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Ok,&nbsp;I&nbsp;think&nbsp;I&nbsp;have&nbsp;found&nbsp;a&nbsp;way&nbsp;to&nbsp;solve&nbsp;this&nbsp;issue.&lt;br&gt;&lt;br&gt;My&nbsp;queues&nbsp;will&nbsp;be&nbsp;durable,&nbsp;so&nbsp;if&nbsp;the&nbsp;server&nbsp;crashes,&nbsp;the&nbsp;queues&nbsp;will&nbsp;be&nbsp;reloaded&nbsp;on&nbsp;boot&nbsp;up.&nbsp;The&nbsp;servers&nbsp;RAID&nbsp;configuration&nbsp;will&nbsp;make&nbsp;sure&nbsp;we&nbsp;don&amp;#39;t&nbsp;loose&nbsp;any&nbsp;items&nbsp;from&nbsp;our&nbsp;queue. &lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;producer&nbsp;client&nbsp;code&nbsp;will&nbsp;implement&nbsp; a&nbsp;logic&nbsp;where&nbsp;if&nbsp;the&nbsp;primary&nbsp;hostname&nbsp;can&amp;#39;t&nbsp;be&nbsp;reached,&nbsp;we&nbsp;will&nbsp;send&nbsp;the&nbsp;items&nbsp;to&nbsp;the&nbsp;secondary&nbsp;hostname.&nbsp;The&nbsp;consumers&nbsp;will&nbsp;listen&nbsp;to&nbsp;both&nbsp;hostname. &lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;2&nbsp;questions:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;Is&nbsp;this&nbsp;approach&nbsp;flawed&nbsp;?&lt;/div&gt;&lt;div&gt;2.&nbsp;I&nbsp;am&nbsp;using&nbsp;c#&nbsp;client,&nbsp;and&nbsp;I&nbsp;can&amp;#39;t&nbsp;find&nbsp;in&nbsp;the&nbsp;doc&nbsp;any&nbsp;scheme&nbsp;for&nbsp;alternate&nbsp;nodes&nbsp;in&nbsp;case&nbsp;the&nbsp;primare&nbsp;fails?&nbsp;Is&nbsp;there&nbsp;any&nbsp;implementation&nbsp;similar&nbsp;to&nbsp;this,&nbsp;or&nbsp;I&amp;#39;ll&nbsp;have&nbsp;to&nbsp;do&nbsp;my&nbsp;own&nbsp;?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;br&gt;On&nbsp;Wednesday,&nbsp;10&nbsp;July&nbsp;2013&nbsp;15:27:43&nbsp;UTC-4,&nbsp;Guillaume&nbsp;Ouellet&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0;margin-left:0.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi&nbsp;all, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;use&nbsp;RabbitMq&nbsp;so&nbsp;that&nbsp;I&nbsp;have&nbsp;one&nbsp;instance&nbsp;of&nbsp;RabbitMQ&nbsp;on&nbsp;each&nbsp;of&nbsp;my&nbsp;2&nbsp;servers&nbsp;that&nbsp;are&nbsp;separated&nbsp;by&nbsp;a&nbsp;WAN.&nbsp;One&nbsp;server&nbsp;would&nbsp;be&nbsp;active,&nbsp;the&nbsp;other&nbsp;&amp;quot;inactive&amp;quot;,&nbsp;but&nbsp;the&nbsp;inactive&nbsp;would&nbsp;actually&nbsp;have&nbsp;the&nbsp;queue&nbsp;from&nbsp;the&nbsp;active&nbsp;replicated&nbsp;real-time.&nbsp;This&nbsp;way,&nbsp;if&nbsp;the&nbsp;active&nbsp;server&nbsp;goes&nbsp;down,&nbsp;the&nbsp;inactive&nbsp;server&nbsp;kicks&nbsp;in,&nbsp;and&nbsp;continues&nbsp;where&nbsp;the&nbsp;active&nbsp;left&nbsp;off.&lt;br&gt;<br>
&lt;br&gt;It&nbsp;seemed&nbsp;like&nbsp;the&nbsp;clustering&nbsp;option&nbsp;does&nbsp;exactly&nbsp;this,&nbsp;but&nbsp;as&nbsp;I&nbsp;said&nbsp;previously,&nbsp;I&nbsp;am&nbsp;over&nbsp;a&nbsp;WAN,&nbsp;and&nbsp;a&nbsp;WAN&nbsp;configuration&nbsp;is&nbsp;not&nbsp;recommended.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;question&nbsp;is&nbsp;how&nbsp;would&nbsp;I&nbsp;implement&nbsp;the&nbsp;previous&nbsp;logic&nbsp;via&nbsp;shovels&nbsp;or&nbsp;federations&nbsp;?&nbsp;I&nbsp;can&amp;#39;t&nbsp;seem&nbsp;to&nbsp;get&nbsp;my&nbsp;head&nbsp;around&nbsp;this&nbsp;looking&nbsp;at&nbsp;the&nbsp;documentation.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
