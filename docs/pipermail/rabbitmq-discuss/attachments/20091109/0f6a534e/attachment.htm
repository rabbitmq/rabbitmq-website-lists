<tt>
Hey&nbsp;Kalpesh&lt;br&gt;&lt;br&gt;Thank&nbsp;u&nbsp;for&nbsp;ur&nbsp;response&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Nov&nbsp;9,&nbsp;2009&nbsp;at&nbsp;7:58&nbsp;AM,&nbsp;Kalpesh&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:kpatel@egnyte.com&quot;&gt;kpatel@egnyte.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&nbsp;lang=&quot;EN-US&quot;&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;Hello&nbsp;Arun,&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;The&nbsp;current&nbsp;production&nbsp;in&nbsp;egnyte&nbsp;uses&nbsp;Rabbit&nbsp;in&nbsp;a&nbsp;low&nbsp;volume<br>
scenario&nbsp;like&nbsp;10/15&nbsp;per&nbsp;min.&nbsp;In&nbsp;future&nbsp;versions&nbsp;we&nbsp;are&nbsp;planning&nbsp;to&nbsp;use&nbsp;Rabbit<br>
as&nbsp;the&nbsp;backend&nbsp;messaging&nbsp;system&nbsp;for&nbsp;handling&nbsp;most&nbsp;of&nbsp;our&nbsp;background&nbsp;jobs.&nbsp;The<br>
volume&nbsp;can&nbsp;comes&nbsp;in&nbsp;bursts&nbsp;and&nbsp;if&nbsp;background&nbsp;job&nbsp;consumers&nbsp;are&nbsp;down&nbsp;it&nbsp;can&nbsp;accumulate<br>
in&nbsp;worse&nbsp;case&nbsp;to&nbsp;200-500K&nbsp;per&nbsp;day&nbsp;(This&nbsp;is&nbsp;worse&nbsp;case,&nbsp;in&nbsp;normal&nbsp;case&nbsp;the&nbsp;queue<br>
should&nbsp;be&nbsp;exhausted&nbsp;immediately). &nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;I&nbsp;tried&nbsp;a&nbsp;simple&nbsp;test&nbsp;of&nbsp;pushing&nbsp;200K&nbsp;messages&nbsp;each&nbsp;1KB&nbsp;then<br>
killed&nbsp;the&nbsp;rabbit&nbsp;and&nbsp;started&nbsp;Rabbit&nbsp;again&nbsp;and&nbsp;Rabbit&nbsp;was&nbsp;able&nbsp;to&nbsp;recover&nbsp;all<br>
messages.&nbsp;Then&nbsp;in&nbsp;another&nbsp;test&nbsp;I&nbsp;tried&nbsp;pushing&nbsp;500K&nbsp;messages&nbsp;1&nbsp;KB&nbsp;each&nbsp;and<br>
Rabbit&nbsp;died,&nbsp;I&nbsp;wasn&amp;#39;t&nbsp;able&nbsp;to&nbsp;recover&nbsp;the&nbsp;mnesia&nbsp;database&nbsp;(I&nbsp;had&nbsp;to&nbsp;purge&nbsp;the<br>
db&nbsp;and&nbsp;start&nbsp;over&nbsp;with&nbsp;fresh&nbsp;db&nbsp;and&nbsp;lost&nbsp;all&nbsp;messags).&nbsp; The&nbsp;only&nbsp;solution<br>
I&nbsp;found&nbsp;was&nbsp;to&nbsp;have&nbsp;2&nbsp;or&nbsp;more&nbsp;rabbits&nbsp;and&nbsp;use&nbsp;round&nbsp;robin&nbsp;to&nbsp;increase&nbsp;the&nbsp;no&nbsp;of<br>
messages&nbsp;Rabbit&nbsp;can&nbsp;hold.&nbsp;In&nbsp;addition&nbsp;we&nbsp;can&amp;#39;t&nbsp;afford&nbsp;to&nbsp;lose&nbsp;messages&nbsp;and&nbsp;I<br>
will&nbsp;have&nbsp;to&nbsp;use&nbsp;the&nbsp;control-flow&nbsp;mechanism&nbsp;to&nbsp;throttle&nbsp;the&nbsp;consumers&nbsp;to&nbsp;log&nbsp;to<br>
some&nbsp;db&nbsp;or&nbsp;filesystem&nbsp;in&nbsp;case&nbsp;both&nbsp;Rabbits&nbsp;are&nbsp;full&nbsp;(but&nbsp;then&nbsp;the&nbsp;solution&nbsp;is<br>
becoming&nbsp;complex&nbsp;if&nbsp;I&nbsp;have&nbsp;to&nbsp;introduce&nbsp;a&nbsp;db&nbsp;in&nbsp;the&nbsp;mix&nbsp;as&nbsp;the&nbsp;consumers&nbsp;will<br>
have&nbsp;to&nbsp;keep&nbsp;checkpoints&nbsp;and&nbsp;other&nbsp;recovery&nbsp;mechanism).&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;The&nbsp;ideal&nbsp;solution&nbsp;is&nbsp;that&nbsp;Rabbit&nbsp;should&nbsp;keep&nbsp;only&nbsp;those&nbsp;many<br>
messages&nbsp;in&nbsp;memory&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;and&nbsp;rest&nbsp;should&nbsp;be&nbsp;persisted&nbsp;in&nbsp;the&nbsp;disk<br>
that&nbsp;way&nbsp;we&nbsp;are&nbsp;limited&nbsp;by&nbsp;disk&nbsp;and&nbsp;not&nbsp;physical&nbsp;memory&nbsp;of&nbsp;the&nbsp;machine.&nbsp;I&nbsp;saw<br>
that&nbsp;Matthew&nbsp;and&nbsp;team&nbsp;are&nbsp;already&nbsp;working&nbsp;on&nbsp;it&nbsp;that&amp;#39;s&nbsp;why&nbsp;I&nbsp;am&nbsp;interested&nbsp;in<br>
testing&nbsp;it&nbsp;out&nbsp;if&nbsp;its&nbsp;available&nbsp;as&nbsp;beta.&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Guess&nbsp;this&nbsp;is&nbsp;a&nbsp;fundamental&nbsp;problem&nbsp;with&nbsp;mnesia&nbsp;(storing&nbsp;data&nbsp;both&nbsp;in&nbsp;ram&nbsp;and&nbsp;fs)..&lt;br&gt;Looking&nbsp;forward&nbsp;to&nbsp;the&nbsp;new&nbsp;persister&lt;br&gt;&lt;br&gt;-Arun&nbsp;&lt;br&gt;<br>
&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&nbsp;lang=&quot;EN-US&quot;&gt;&lt;div&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;Thanks&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt;-Kalpesh&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&nbsp;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;div&nbsp;style=&quot;border-style:&nbsp;solid&nbsp;none&nbsp;none;&nbsp;border-color:&nbsp;rgb(181,&nbsp;196,&nbsp;223)&nbsp;-moz-use-text-color&nbsp;-moz-use-text-color;&nbsp;border-width:&nbsp;1pt&nbsp;medium&nbsp;medium;&nbsp;padding:&nbsp;3pt&nbsp;0in&nbsp;0in;&quot;&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;From:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;&nbsp;Arun&nbsp;Suresh<br>
[mailto:&lt;a&nbsp;href=&quot;mailto:arun.suresh@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;arun.suresh@gmail.com&lt;/a&gt;]&nbsp;&lt;br&gt;<br>
&lt;b&gt;Sent:&lt;/b&gt;&nbsp;Sunday,&nbsp;November&nbsp;08,&nbsp;2009&nbsp;7:56&nbsp;PM&lt;br&gt;<br>
&lt;b&gt;To:&lt;/b&gt;&nbsp;Kalpesh&lt;br&gt;<br>
&lt;b&gt;Cc:&lt;/b&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:matthew@lshift.net&quot;&nbsp;target=&quot;_blank&quot;&gt;matthew@lshift.net&lt;/a&gt;;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;b&gt;Subject:&lt;/b&gt;&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ&nbsp;new&nbsp;Persister&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;Hello&nbsp;Kalpesh&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;are&nbsp;using&nbsp;RabbitMQ&nbsp;as&nbsp;well&nbsp;in&nbsp;our&nbsp;team...&nbsp;Most&nbsp;of&nbsp;our&nbsp;messaging&nbsp;needs&nbsp;are<br>
not&nbsp;high&nbsp;volume..&nbsp;but&nbsp;we&nbsp;do&nbsp;have&nbsp;a&nbsp;set&nbsp;of&nbsp;messages&nbsp;where&nbsp;we&nbsp;expect&nbsp;something<br>
like&nbsp;350/min&nbsp;at&nbsp;peek&nbsp;load&nbsp;to&nbsp;be&nbsp;distributed&nbsp;to&nbsp;consumers..&lt;br&gt;<br>
&lt;br&gt;<br>
Just&nbsp;curious&nbsp;to&nbsp;know&nbsp;what&nbsp;is&nbsp;the&nbsp;load&nbsp;at&nbsp;which&nbsp;the&nbsp;current&nbsp;implementation&nbsp;of<br>
the&nbsp;RabbitMQ&nbsp;persistor&nbsp;bails&nbsp;out&nbsp;on&nbsp;you..&lt;br&gt;<br>
&lt;br&gt;<br>
-Arun&nbsp;Suresh&lt;br&gt;<br>
Yahoo!&nbsp;India&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;On&nbsp;Mon,&nbsp;Nov&nbsp;9,&nbsp;2009&nbsp;at&nbsp;7:11&nbsp;AM,&nbsp;Kalpesh&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:kpatel@egnyte.com&quot;&nbsp;target=&quot;_blank&quot;&gt;kpatel@egnyte.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/p&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;div&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Hello<br>
Matthew,&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;We<br>
are&nbsp;looking&nbsp;forward&nbsp;for&nbsp;the&nbsp;new&nbsp;persister&nbsp;that&nbsp;RabbitMQ&nbsp;team&nbsp;is&nbsp;working&nbsp;on.&nbsp;We<br>
are&nbsp;currently&nbsp;using&nbsp;Rabbit&nbsp;in&nbsp;a&nbsp;low&nbsp;volume&nbsp;scenario,&nbsp;now&nbsp;we&nbsp;are&nbsp;planning&nbsp;to&nbsp;use<br>
it&nbsp;for&nbsp;a&nbsp;high&nbsp;volume&nbsp;scenario.&nbsp;We&nbsp;can&amp;#39;t&nbsp;afford&nbsp;to&nbsp;lose&nbsp;any&nbsp;messages,<br>
 currently&nbsp;Rabbit&nbsp;runs&nbsp;out&nbsp;of&nbsp;memory&nbsp;if&nbsp;we&nbsp;overfed&nbsp;it&nbsp;and&nbsp;then&nbsp;it&nbsp;crashes.<br>
The&nbsp;only&nbsp;way&nbsp;to&nbsp;not&nbsp;lose&nbsp;message&nbsp;is&nbsp;to&nbsp;store&nbsp;it&nbsp;in&nbsp;some&nbsp;db&nbsp;or&nbsp;filesystem&nbsp;and<br>
than&nbsp;push&nbsp;it&nbsp;to&nbsp;Rabbit&nbsp;just&nbsp;for&nbsp;distribution&nbsp;to&nbsp;consumers.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Is<br>
there&nbsp;any&nbsp;way&nbsp;we&nbsp;can&nbsp;get&nbsp;access&nbsp;to&nbsp;the&nbsp;new&nbsp;persister&nbsp;code?&nbsp;I&nbsp;would&nbsp;be&nbsp;happy&nbsp;to<br>
do&nbsp;some&nbsp;tests&nbsp;on&nbsp;it.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Thanks&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;-Kalpesh&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(126,&nbsp;126,&nbsp;126);&quot;&gt;Kalpesh&nbsp;Patel&lt;br&gt;<br>
&lt;/span&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(230,&nbsp;102,&nbsp;27);&quot;&gt;Egnyte&nbsp;&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(230,&nbsp;102,&nbsp;27);&quot;&gt;-&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;color:&nbsp;rgb(230,&nbsp;102,&nbsp;27);&quot;&gt;your&nbsp;&lt;b&gt;On&nbsp;Demand<br>
File&nbsp;Server&lt;br&gt;<br>
&lt;/b&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;8pt;&nbsp;color:&nbsp;rgb(126,&nbsp;126,&nbsp;126);&quot;&gt;Big&nbsp;infrastructure;<br>
Small&nbsp;price&nbsp;tag&lt;br&gt;<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;color:&nbsp;rgb(126,&nbsp;126,&nbsp;126);&quot;&gt;W&nbsp;650.265.4054&nbsp;|&nbsp;C<br>
650.740.3062&lt;br&gt;<br>
sign&nbsp;up&nbsp;at&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;9pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;254);&quot;&gt;&lt;a&nbsp;href=&quot;http://www.egnyte.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.egnyte.com&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-bottom:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
