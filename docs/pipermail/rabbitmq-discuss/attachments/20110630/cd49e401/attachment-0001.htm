<tt>
Hi&nbsp;Marek,&lt;br&gt;&lt;br&gt;Later&nbsp;i&nbsp;found&nbsp;out&nbsp;that&nbsp;the&nbsp;Amazon&nbsp;ELB&nbsp;has&nbsp;a&nbsp;60&nbsp;seconds&nbsp;period&nbsp;of&nbsp;inactivity.&nbsp;So&nbsp;the&nbsp;connection&nbsp;was&nbsp;getting&nbsp;closed&nbsp;after&nbsp;60&nbsp;seconds.&lt;br&gt;Setting&nbsp;the&nbsp;heartbeat&nbsp;in&nbsp;the&nbsp;connection&nbsp;factory&nbsp;helped&nbsp;in&nbsp;not&nbsp;losing&nbsp;the&nbsp;connection.&nbsp;&lt;br&gt;<br>
&lt;br&gt;Thanks,&lt;br&gt;Dhinesh&nbsp;Kumar&nbsp;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jun&nbsp;29,&nbsp;2011&nbsp;at&nbsp;9:31&nbsp;PM,&nbsp;Marek&nbsp;Majkowski&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&amp;#39;m&nbsp;afraid&nbsp;we&nbsp;don&amp;#39;t&nbsp;have&nbsp;much&nbsp;experience&nbsp;with&nbsp;Amazon&nbsp;ELB.&nbsp;Maybe&nbsp;there&lt;br&gt;<br>
is&nbsp;some&nbsp;kind&nbsp;of&nbsp;timeout&nbsp;after&nbsp;which&nbsp;the&nbsp;connection&nbsp;is&nbsp;broken?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
 Marek&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Wed,&nbsp;Jun&nbsp;22,&nbsp;2011&nbsp;at&nbsp;13:00,&nbsp;Dhinesh&nbsp;Kumar&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:dhinesh.ravi@gmail.com&quot;&gt;dhinesh.ravi@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;run&nbsp;a&nbsp;RabbitMQ&nbsp;broker&nbsp;behind&nbsp;an&nbsp;ELB.&lt;br&gt;<br>
&amp;gt;&nbsp;The&nbsp;amqp&nbsp;connection&nbsp;gets&nbsp;established&nbsp;but&nbsp;it&nbsp;is&nbsp;getting&nbsp;closed&nbsp;after&lt;br&gt;<br>
&amp;gt;&nbsp;sometime.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;with&nbsp;this&nbsp;kind&nbsp;of&nbsp;message:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;=ERROR&nbsp;REPORT====&nbsp;22-Jun-2011::11:27:59&nbsp;===&lt;br&gt;<br>
&amp;gt;&nbsp;**&nbsp;Generic&nbsp;server&nbsp;&amp;lt;0.149.0&amp;gt;&nbsp;terminating&lt;br&gt;<br>
&amp;gt;&nbsp;**&nbsp;Last&nbsp;message&nbsp;in&nbsp;was&nbsp;socket_closed&lt;br&gt;<br>
&amp;gt;&nbsp;**&nbsp;When&nbsp;Server&nbsp;state&nbsp;==&nbsp;{state,amqp_network_connection,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;{state,#Port&amp;lt;0.651&amp;gt;,0,&amp;lt;0.153.0&amp;gt;,131072,undefined,&lt;br&gt;<br>
&amp;gt;&nbsp;                               &nbsp;false},&lt;br&gt;<br>
&amp;gt;&nbsp;                           &nbsp;&amp;lt;0.148.0&amp;gt;,&amp;lt;0.151.0&amp;gt;,&lt;br&gt;<br>
&amp;gt;&nbsp;                           &nbsp;{amqp_params,&amp;lt;&amp;lt;&amp;quot;guest&amp;quot;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&amp;quot;guest&amp;quot;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;quot;BrokerHostname&amp;quot;,&lt;br&gt;<br>
&amp;gt;&nbsp;                               &nbsp;5672,nonode@nohost,0,0,0,none,&lt;br&gt;<br>
&amp;gt;&nbsp;                               &nbsp;[#Fun&amp;lt;amqp_auth_mechanisms.plain.3&amp;gt;,&lt;br&gt;<br>
&amp;gt;&nbsp;                                &nbsp;#Fun&amp;lt;amqp_auth_mechanisms.amqplain.3&amp;gt;],&lt;br&gt;<br>
&amp;gt;&nbsp;                               &nbsp;none,[]},&lt;br&gt;<br>
&amp;gt;&nbsp;                           &nbsp;0,&lt;br&gt;<br>
&amp;gt;&nbsp;                           &nbsp;[{&amp;lt;&amp;lt;&amp;quot;capabilities&amp;quot;&amp;gt;&amp;gt;,table,&lt;br&gt;<br>
&amp;gt;&nbsp;                             &nbsp;[{&amp;lt;&amp;lt;&amp;quot;publisher_confirms&amp;quot;&amp;gt;&amp;gt;,bool,true},&lt;br&gt;<br>
&amp;gt;&nbsp;                              &nbsp;{&amp;lt;&amp;lt;&amp;quot;exchange_exchange_bindings&amp;quot;&amp;gt;&amp;gt;,bool,true},&lt;br&gt;<br>
&amp;gt;&nbsp;                              &nbsp;{&amp;lt;&amp;lt;&amp;quot;basic.nack&amp;quot;&amp;gt;&amp;gt;,bool,true},&lt;br&gt;<br>
&amp;gt;&nbsp;                              &nbsp;{&amp;lt;&amp;lt;&amp;quot;consumer_cancel_notify&amp;quot;&amp;gt;&amp;gt;,bool,true}]},&lt;br&gt;<br>
&amp;gt;&nbsp;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;copyright&amp;quot;&amp;gt;&amp;gt;,longstr,&lt;br&gt;<br>
&amp;gt;&nbsp;                             &nbsp;&amp;lt;&amp;lt;&amp;quot;Copyright&nbsp;(C)&nbsp;2007-2011&nbsp;VMware,&nbsp;Inc.&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
&amp;gt;&nbsp;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;information&amp;quot;&amp;gt;&amp;gt;,longstr,&lt;br&gt;<br>
&amp;gt;&nbsp;                             &nbsp;&amp;lt;&amp;lt;&amp;quot;Licensed&nbsp;under&nbsp;the&nbsp;MPL. &nbsp;See&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/&lt;/a&gt;&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
&amp;gt;&nbsp;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;platform&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;Erlang/OTP&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
&amp;gt;&nbsp;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;product&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;RabbitMQ&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
&amp;gt;&nbsp;                            &nbsp;{&amp;lt;&amp;lt;&amp;quot;version&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;2.4.1&amp;quot;&amp;gt;&amp;gt;}],&lt;br&gt;<br>
&amp;gt;&nbsp;                           &nbsp;#Fun&amp;lt;amqp_connection_sup.0.110528238&amp;gt;,&lt;br&gt;<br>
&amp;gt;&nbsp;                           &nbsp;#Fun&amp;lt;amqp_connection_sup.2.116782220&amp;gt;,false}&lt;br&gt;<br>
&amp;gt;&nbsp;**&nbsp;Reason&nbsp;for&nbsp;termination&nbsp;==&lt;br&gt;<br>
&amp;gt;&nbsp;**&nbsp;socket_closed_unexpectedly&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;If&nbsp;i&nbsp;do&nbsp;the&nbsp;same&nbsp;without&nbsp;ELB,&nbsp;the&nbsp;connection&nbsp;is&nbsp;stable.&lt;br&gt;<br>
&amp;gt;&nbsp;Is&nbsp;there&nbsp;any&nbsp;setting&nbsp;which&nbsp;i&nbsp;am&nbsp;missing?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks&nbsp;in&nbsp;advance,&lt;br&gt;<br>
&amp;gt;&nbsp;Dhinesh&nbsp;Kumar&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
