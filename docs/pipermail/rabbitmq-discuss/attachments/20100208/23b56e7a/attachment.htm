<tt>
Matthias,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;injected&nbsp;the&nbsp;java&nbsp;Tracer&nbsp;into&nbsp;the&nbsp;path,&nbsp;and&nbsp;spotted&nbsp;a&nbsp;Connection.tune&nbsp;method&nbsp;with&nbsp;interesting&nbsp;parameters:&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1265609050931:&nbsp;conn#0&nbsp;ch#0&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;connection.start-ok&amp;gt;(client-properties={library_version=0.6.1,&nbsp;library=Python&nbsp;amqplib},mechanism=AMQPLAIN,response=LOGINSguesPASSWORDSguest,locale=en_US),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1265609050961:&nbsp;conn#0&nbsp;ch#0&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;connection.tune&amp;gt;(channel-max=0,frame-max=131072,heartbeat=0),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051002:&nbsp;conn#0&nbsp;ch#0&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;connection.tune-ok&amp;gt;(channel-max=65535,frame-max=131072,heartbeat=0),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1265609051003:&nbsp;conn#0&nbsp;ch#0&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;connection.open&amp;gt;(virtual-host=/,capabilities=,insist=false),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051041:&nbsp;conn#0&nbsp;ch#0&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;connection.open-ok&amp;gt;(known-hosts=localhost:5672),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1265609051081:&nbsp;conn#0&nbsp;ch#1&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;channel.open&amp;gt;(out-of-band=),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051121:&nbsp;conn#0&nbsp;ch#1&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;channel.open-ok&amp;gt;(),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051161:&nbsp;conn#0&nbsp;ch#1&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;access.request&amp;gt;(realm=/data,exclusive=false,passive=false,active=true,write=true,read=false),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1265609051200:&nbsp;conn#0&nbsp;ch#1&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;access.request-ok&amp;gt;(ticket=1),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051242:&nbsp;conn#0&nbsp;ch#2&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;channel.open&amp;gt;(out-of-band=),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051290:&nbsp;conn#0&nbsp;ch#2&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;channel.open-ok&amp;gt;(),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1265609051331:&nbsp;conn#0&nbsp;ch#2&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;access.request&amp;gt;(realm=/data,exclusive=false,passive=false,active=true,write=false,read=true),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051370:&nbsp;conn#0&nbsp;ch#2&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;access.request-ok&amp;gt;(ticket=1),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1265609051412:&nbsp;conn#0&nbsp;ch#2&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;queue.declare&amp;gt;(ticket=1,queue=transcode.wmal,passive=false,durable=false,exclusive=false,auto-delete=true,nowait=false,arguments={}),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051451:&nbsp;conn#0&nbsp;ch#2&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;queue.declare-ok&amp;gt;(queue=transcode.wmal,message-count=0,consumer-count=0),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1265609051490:&nbsp;conn#0&nbsp;ch#2&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;basic.consume&amp;gt;(ticket=1,queue=transcode.wmal,consumer-tag=,no-local=false,no-ack=false,exclusive=false,nowait=false),null,&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1265609051531:&nbsp;conn#0&nbsp;ch#2&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;basic.consume-ok&amp;gt;(consumer-tag=amq.ctag-GmOHWY3xtNeQ9+9WvAo3oA==),null,&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;led&nbsp;me&nbsp;to&nbsp;the&nbsp;discussion&nbsp;on &lt;a&nbsp;href=&quot;http://www.amqp.org/jira/browse/AMQP-108&quot;&gt;http://www.amqp.org/jira/browse/AMQP-108&lt;/a&gt;,&nbsp;suggesting&nbsp;that&nbsp;there&nbsp;is&nbsp;an&nbsp;upper&nbsp;limit&nbsp;on&nbsp;AMQP&nbsp;payload&nbsp;of&nbsp;a&nbsp;16-bit&nbsp;number&nbsp;in&nbsp;versions&nbsp;0.8/0.9. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;ll&nbsp;try&nbsp;patching&nbsp;py-amqplib&nbsp;to&nbsp;take&nbsp;frame-max&nbsp;in&nbsp;kwargs,&nbsp;but&nbsp;any&nbsp;other&nbsp;gotchas&nbsp;you&nbsp;can&nbsp;think&nbsp;of&nbsp;would&nbsp;be&nbsp;appreciated?&nbsp;Would&nbsp;I&nbsp;be&nbsp;better&nbsp;off&nbsp;trying&nbsp;Tony&amp;#39;s&nbsp;PIKA?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sigurd&lt;br&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2010/2/7&nbsp;Sigurd&nbsp;Høgsbro&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:sigurd.hogsbro@museeka.com&quot;&gt;sigurd.hogsbro@museeka.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&gt;Hello&nbsp;Matthias,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;below&nbsp;extract&nbsp;from&nbsp;rabbit.log&nbsp;is&nbsp;from&nbsp;a&nbsp;problematic&nbsp;run.&nbsp;It&nbsp;appears&nbsp;the&nbsp;python&nbsp;instance&nbsp;running&nbsp;with&nbsp;Windows&nbsp;XP&nbsp;within&nbsp;VirtualBox&nbsp;aborts&nbsp;the&nbsp;connection. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;The&nbsp;message&nbsp;bodies&nbsp;being&nbsp;sent&nbsp;are&nbsp;6-25Mb&nbsp;each,&nbsp;which&nbsp;isn&amp;#39;t&nbsp;immaterial&nbsp;but&nbsp;AFAICT&nbsp;should&nbsp;work. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;used&nbsp;to&nbsp;have&nbsp;immediate&nbsp;and&nbsp;mandatory&nbsp;flags&nbsp;set&nbsp;but&nbsp;I&amp;#39;ve&nbsp;removed&nbsp;these&nbsp;to&nbsp;make&nbsp;the&nbsp;connection&nbsp;as&nbsp;plain&nbsp;vanilla&nbsp;as&nbsp;possible.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sigurd&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:55:33&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&nbsp;target=&quot;_blank&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://192.168.66.61:54000&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.66.61:54000&lt;/a&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:55:33&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.809.5&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://192.168.66.61:54000&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.66.61:54000&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:55:51&nbsp;===&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&nbsp;target=&quot;_blank&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47539&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47539&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:55:51&nbsp;===&lt;/div&gt;<br>
<br>
&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.835.5&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47539&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47539&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:55:51&nbsp;===&lt;/div&gt;&lt;div&gt;accepted&nbsp;TCP&nbsp;connection&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0:5672&quot;&nbsp;target=&quot;_blank&quot;&gt;0.0.0.0:5672&lt;/a&gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47540&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47540&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:55:51&nbsp;===&lt;/div&gt;&lt;div&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.841.5&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47540&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47540&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=WARNING&nbsp;REPORT====&nbsp;7-Feb-2010::09:56:35&nbsp;===&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;exception&nbsp;on&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.835.5&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47539&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47539&lt;/a&gt;&lt;/div&gt;&lt;div&gt;connection_closed_abruptly&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:56:35&nbsp;===&lt;/div&gt;<br>
<br>
&lt;div&gt;<br>
closing&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.835.5&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47539&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47539&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=WARNING&nbsp;REPORT====&nbsp;7-Feb-2010::09:56:35&nbsp;===&lt;/div&gt;&lt;div&gt;exception&nbsp;on&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.841.5&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47540&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47540&lt;/a&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;connection_closed_abruptly&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;7-Feb-2010::09:56:35&nbsp;===&lt;/div&gt;&lt;div&gt;closing&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.841.5&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:47540&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:47540&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
2010/2/6&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@lshift.net&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
Sigurd,&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Sigurd&nbsp;Høgsbro&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
when&nbsp;used&nbsp;in&nbsp;anger&nbsp;sending&nbsp;the&nbsp;response&nbsp;[...]&nbsp;fails&nbsp;with:&lt;div&gt;&lt;br&gt;<br>
[Errno&nbsp;10054]&nbsp;An&nbsp;existing&nbsp;connection&nbsp;was&nbsp;forcibly&nbsp;closed&nbsp;by&nbsp;the&nbsp;remote&lt;br&gt;<br>
host&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;anything&nbsp;unusual&nbsp;in&nbsp;the&nbsp;server&nbsp;logs&nbsp;(rabbit.log&nbsp;and&nbsp;rabbit-sasl.log)?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
