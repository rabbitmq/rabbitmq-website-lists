<tt>
&lt;div&gt;Fascinating...not&nbsp;sure&nbsp;if&nbsp;the&nbsp;subject&nbsp;has&nbsp;been&nbsp;beaten&nbsp;to&nbsp;death&nbsp;yet,&nbsp;but,&nbsp;my&nbsp;results&nbsp;are&nbsp;somewhat&nbsp;different.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;following&nbsp;are&nbsp;on&nbsp;Windows&nbsp;7&nbsp;X64:&lt;/div&gt;&lt;div&gt;------------------------------------------------------------------------------------------------------------------------------------------&lt;/div&gt;<br>
&lt;div&gt;Fixed&nbsp;send&nbsp;and&nbsp;receive&nbsp;buffers&nbsp;at&nbsp;65535:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;c:\AMQP\RabbitMQ\rabbitmq-java-client-1.7.1\test\src&amp;gt;java&nbsp;-server&nbsp;com.rabbitmq.e&lt;/div&gt;&lt;div&gt;xamples.MulticastMain&nbsp;-hlocalhost&nbsp;-p5672&nbsp;-a&nbsp;-z&nbsp;60&nbsp;-i&nbsp;10&nbsp;-s&nbsp;1024&nbsp;-r&nbsp;12000&lt;/div&gt;<br>
&lt;div&gt;starting&nbsp;consumer&nbsp;#0&lt;/div&gt;&lt;div&gt;starting&nbsp;producer&nbsp;#0&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;4095&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;449/489755/1646688&nbsp;microseconds&lt;/div&gt;&lt;div&gt;sending&nbsp;rate:&nbsp;4849&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;5395&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;1566/374119/1485288&nbsp;microseconds&lt;/div&gt;<br>
&lt;div&gt;sending&nbsp;rate:&nbsp;5226&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;4620&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;785/299498/1330197&nbsp;microseconds&lt;/div&gt;&lt;div&gt;sending&nbsp;rate:&nbsp;5176&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;5137&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;918/381703/1385686&nbsp;microseconds&lt;/div&gt;<br>
&lt;div&gt;sending&nbsp;rate:&nbsp;5357&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;5873&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;379/445433/1677491&nbsp;microseconds&lt;/div&gt;&lt;div&gt;sending&nbsp;rate:&nbsp;5192&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;5274&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;426/244059/1061180&nbsp;microseconds&lt;/div&gt;<br>
&lt;div&gt;recving&nbsp;rate&nbsp;avg:&nbsp;5193&nbsp;msg/s&lt;/div&gt;&lt;div&gt;sending&nbsp;rate&nbsp;avg:&nbsp;5211&nbsp;msg/s&lt;/div&gt;&lt;div&gt;------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;with&nbsp;no&nbsp;buffers&nbsp;specified&nbsp;on&nbsp;the&nbsp;same&nbsp;machine:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;c:\AMQP\RabbitMQ\rabbitmq-java-client-1.7.1\test\src&amp;gt;java&nbsp;-server&nbsp;com.rabbitmq.e&lt;/div&gt;&lt;div&gt;xamples.MulticastMain&nbsp;-hlocalhost&nbsp;-p5672&nbsp;-a&nbsp;-z&nbsp;60&nbsp;-i&nbsp;10&nbsp;-s&nbsp;1024&nbsp;-r&nbsp;12000&lt;/div&gt;<br>
&lt;div&gt;starting&nbsp;consumer&nbsp;#0&lt;/div&gt;&lt;div&gt;starting&nbsp;producer&nbsp;#0&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;3302&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;6666/493540/1274826&nbsp;microseconds&lt;/div&gt;&lt;div&gt;sending&nbsp;rate:&nbsp;3461&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;3696&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;6462/270603/1022742&nbsp;microseconds&lt;/div&gt;<br>
&lt;div&gt;sending&nbsp;rate:&nbsp;3688&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;3684&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;707/903615/2256495&nbsp;microseconds&lt;/div&gt;&lt;div&gt;sending&nbsp;rate:&nbsp;3836&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;3923&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;801/387877/1060920&nbsp;microseconds&lt;/div&gt;<br>
&lt;div&gt;sending&nbsp;rate:&nbsp;4052&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;3594&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;2566/253710/1099121&nbsp;microseconds&lt;/div&gt;&lt;div&gt;sending&nbsp;rate:&nbsp;3473&nbsp;msg/s&lt;/div&gt;&lt;div&gt;recving&nbsp;rate:&nbsp;3900&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;2045/308265/658904&nbsp;microseconds&lt;/div&gt;<br>
&lt;div&gt;recving&nbsp;rate&nbsp;avg:&nbsp;3708&nbsp;msg/s&lt;/div&gt;&lt;div&gt;sending&nbsp;rate&nbsp;avg:&nbsp;3715&nbsp;msg/s&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Feb&nbsp;8,&nbsp;2010&nbsp;at&nbsp;13:24,&nbsp;Matthew&nbsp;Sackman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthew@lshift.net&quot;&gt;matthew@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
On&nbsp;Sat,&nbsp;Feb&nbsp;06,&nbsp;2010&nbsp;at&nbsp;04:32:35AM&nbsp;+0100,&nbsp;Holger&nbsp;Hoffstaette&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;This&nbsp;rabbit&nbsp;hole&nbsp;goes&nbsp;deep..&lt;br&gt;<br>
&lt;br&gt;<br>
Indeed&nbsp;it&nbsp;does.&nbsp;I&nbsp;repeated&nbsp;all&nbsp;my&nbsp;tests&nbsp;this&nbsp;morning&nbsp;with&nbsp;the&nbsp;buffers&lt;br&gt;<br>
all&nbsp;hard&nbsp;set&nbsp;to&nbsp;65536&nbsp;and&nbsp;things&nbsp;got&nbsp;slightly&nbsp;better&nbsp;with&nbsp;large&lt;br&gt;<br>
messages&nbsp;(~1kB),&nbsp;but&nbsp;worse&nbsp;with&nbsp;small&nbsp;messages.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;then&nbsp;set&nbsp;up&nbsp;a&nbsp;high&nbsp;latency&nbsp;loopback:&lt;br&gt;<br>
#&nbsp;tc&nbsp;qdisc&nbsp;add&nbsp;dev&nbsp;lo&nbsp;root&nbsp;netem&nbsp;delay&nbsp;100ms&nbsp;20ms&nbsp;distribution&nbsp;pareto&nbsp;loss&nbsp;0.01%&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;a&nbsp;100ms&nbsp;delay,&nbsp;±20ms&nbsp;on&nbsp;a&nbsp;pareto&nbsp;distribution,&nbsp;with&nbsp;0.01%&nbsp;packet&lt;br&gt;<br>
loss.&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;our&nbsp;default&nbsp;buffer&nbsp;sizes:&lt;br&gt;<br>
rabbitmq-java-client/build/dist$&nbsp;sh&nbsp;runjava.sh&nbsp;com/rabbitmq/examples/MulticastMain&nbsp;-a&nbsp;-z&nbsp;60&nbsp;-i&nbsp;10&nbsp;-s&nbsp;1024&nbsp;-r&nbsp;12000&lt;br&gt;<br>
starting&nbsp;consumer&nbsp;#0&lt;br&gt;<br>
starting&nbsp;producer&nbsp;#0&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;8&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;207432/3279948/6437079&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;322&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;13&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;6437120/11372211/16522991&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;14&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;14&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;16522969/21456014/26551356&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;13&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;13&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;26551374/31650558/36685934&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;13&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;13&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;36687449/41818269/46842999&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;13&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;13&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;46851173/51931717/56934090&nbsp;microseconds&lt;br&gt;<br>
recving&nbsp;rate&nbsp;avg:&nbsp;13&nbsp;msg/s&lt;br&gt;<br>
sending&nbsp;rate&nbsp;avg:&nbsp;67&nbsp;msg/s&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;buffers&nbsp;set&nbsp;to&nbsp;65536&nbsp;and&nbsp;65536:&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;180&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;220489/3300700/6318430&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;648&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;286&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;6318355/10433052/12858930&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;256&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;264&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;12676703/13635080/14137168&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;294&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;282&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;12437468/13308885/14238964&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;275&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;272&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;12971076/13367869/13966905&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;262&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;251&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;13644724/14051244/14746586&nbsp;microseconds&lt;br&gt;<br>
recving&nbsp;rate&nbsp;avg:&nbsp;265&nbsp;msg/s&lt;br&gt;<br>
sending&nbsp;rate&nbsp;avg:&nbsp;332&nbsp;msg/s&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;no&nbsp;buffers&nbsp;set&nbsp;(thus&nbsp;allowing&nbsp;auto&nbsp;resizing&nbsp;to&nbsp;take&nbsp;place):&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;1012&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;196813/2498703/3712777&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;6146&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;6104&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;2782802/4983136/5602666&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;10466&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;9649&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;5440633/5971475/6431049&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;10637&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;9970&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;6204889/6718248/7106264&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;6681&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;9535&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;3934919/4661861/7229773&nbsp;microseconds&lt;br&gt;<br>
sending&nbsp;rate:&nbsp;10795&nbsp;msg/s&lt;br&gt;<br>
recving&nbsp;rate:&nbsp;8960&nbsp;msg/s,&nbsp;min/avg/max&nbsp;latency:&nbsp;4055794/4703495/5892391&nbsp;microseconds&lt;br&gt;<br>
recving&nbsp;rate&nbsp;avg:&nbsp;7755&nbsp;msg/s&lt;br&gt;<br>
sending&nbsp;rate&nbsp;avg:&nbsp;9121&nbsp;msg/s&lt;br&gt;<br>
&lt;br&gt;<br>
Needless&nbsp;to&nbsp;say,&nbsp;my&nbsp;flabber&nbsp;has&nbsp;been&nbsp;ghasted.&nbsp;Many&nbsp;thanks&nbsp;for&nbsp;bringing&lt;br&gt;<br>
this&nbsp;issue&nbsp;to&nbsp;our&nbsp;attention.&nbsp;Unless&nbsp;there&nbsp;are&nbsp;further&nbsp;revelations,&nbsp;it&amp;#39;s&lt;br&gt;<br>
very&nbsp;likely&nbsp;we&amp;#39;ll&nbsp;remove&nbsp;this&nbsp;setting&nbsp;in&nbsp;the&nbsp;next&nbsp;release.&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
Matthew&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;---&lt;br&gt;John&nbsp;Apps&lt;br&gt;(49)&nbsp;171&nbsp;869&nbsp;1813&lt;br&gt;<br>

</tt>
