<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&nbsp;been&nbsp;tinkering&nbsp;with&nbsp;RabbitMQ&nbsp;to&nbsp;solve&nbsp;a&nbsp;number&nbsp;of&nbsp;issues&nbsp;with&nbsp;distributed&nbsp;servers,&nbsp;mostly&nbsp;the&nbsp;tutorials/docs&nbsp;have&nbsp;given&nbsp;me&nbsp;the&nbsp;information&nbsp;needed&nbsp;but&nbsp;I&nbsp;have&nbsp;a&nbsp;special&nbsp;use&nbsp;case&nbsp;that&nbsp;I&nbsp;can't&nbsp;unravel.&lt;br&gt;&lt;br&gt;In&nbsp;the&nbsp;simplest&nbsp;of&nbsp;the&nbsp;usages&nbsp;I&nbsp;have&nbsp;a&nbsp;queue&nbsp;called&nbsp;'online'&nbsp;the&nbsp;message&nbsp;is&nbsp;either&nbsp;'On'&nbsp;or&nbsp;'Off'&nbsp;to&nbsp;indicate&nbsp;whether&nbsp;servers&nbsp;should&nbsp;be&nbsp;online&nbsp;or&nbsp;offline.&nbsp;The&nbsp;number&nbsp;of&nbsp;servers&nbsp;is&nbsp;variable&nbsp;depending&nbsp;on&nbsp;load&nbsp;(eg&nbsp;we&nbsp;are&nbsp;planning&nbsp;to&nbsp;use&nbsp;AWS&nbsp;for&nbsp;some&nbsp;of&nbsp;our&nbsp;sites)&nbsp;So&nbsp;there&nbsp;is&nbsp;always&nbsp;one&nbsp;and&nbsp;only&nbsp;one&nbsp;message&nbsp;persistently&nbsp;in&nbsp;the&nbsp;queue&nbsp;which&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;server&nbsp;should&nbsp;be&nbsp;handling&nbsp;user&nbsp;web&nbsp;requests.&nbsp;So&nbsp;I&nbsp;need&nbsp;the&nbsp;value&nbsp;to&nbsp;be&nbsp;sticky,&nbsp;when&nbsp;a&nbsp;new&nbsp;server&nbsp;joins&nbsp;the&nbsp;queue&nbsp;it&nbsp;gets&nbsp;the&nbsp;last&nbsp;message&nbsp;and&nbsp;then&nbsp;is&nbsp;'subscribed'&nbsp;and&nbsp;will&nbsp;receive&nbsp;the&nbsp;state&nbsp;change.&lt;br&gt;&lt;br&gt;My&nbsp;idea&nbsp;is&nbsp;that&nbsp;when&nbsp;everything&nbsp;is&nbsp;online&nbsp;I&nbsp;could&nbsp;just&nbsp;run&nbsp;a&nbsp;cron&nbsp;job&nbsp;which&nbsp;will&nbsp;ask&nbsp;the&nbsp;queue&nbsp;if&nbsp;it&nbsp;is&nbsp;on/off&nbsp;if&nbsp;off&nbsp;it&nbsp;will&nbsp;stop&nbsp;the&nbsp;web&nbsp;service&nbsp;(I&nbsp;already&nbsp;do&nbsp;this&nbsp;manually&nbsp;with&nbsp;a&nbsp;semaphore&nbsp;file)&nbsp;and&nbsp;wait&nbsp;for&nbsp;the&nbsp;message&nbsp;to&nbsp;'clear'&nbsp;back&nbsp;to&nbsp;'online'.&nbsp;So&nbsp;how&nbsp;do&nbsp;I&nbsp;set&nbsp;up&nbsp;the&nbsp;sender&nbsp;and&nbsp;server&nbsp;side&nbsp;to&nbsp;do&nbsp;this&nbsp;sort&nbsp;of&nbsp;semaphore?&nbsp;I&nbsp;assume&nbsp;the&nbsp;consumer&nbsp;side&nbsp;will&nbsp;just&nbsp;be&nbsp;similar&nbsp;to&nbsp;what&nbsp;I&nbsp;have&nbsp;already&nbsp;being&nbsp;playing&nbsp;with&nbsp;on&nbsp;my&nbsp;local&nbsp;system&nbsp;here&nbsp;working&nbsp;through&nbsp;the&nbsp;tutorials.&lt;br&gt;&lt;br&gt;Thanks&nbsp;in&nbsp;advance,&lt;br&gt;Larry&lt;br&gt;&lt;br&gt;&lt;/div&gt;
</tt>
