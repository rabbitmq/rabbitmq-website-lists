<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;i&nbsp;enable&nbsp;confirms&nbsp;[1],&nbsp;then:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;The&nbsp;broker&nbsp;will&nbsp;confirm&nbsp;messages&nbsp;once:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;it&nbsp;decides&nbsp;a&nbsp;message&nbsp;will&nbsp;not&nbsp;be&nbsp;routed&nbsp;to&nbsp;queues&nbsp;(if&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;mandatory&nbsp;flag&nbsp;is&nbsp;set&nbsp;then&nbsp;the&nbsp;basic.return&nbsp;is&nbsp;sent&nbsp;first)&nbsp;or&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;transient&nbsp;message&nbsp;has&nbsp;reached&nbsp;all&nbsp;its&nbsp;queues&nbsp;(and&nbsp;mirrors)&nbsp;or&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;persistent&nbsp;message&nbsp;has&nbsp;reached&nbsp;all&nbsp;its&nbsp;queues&nbsp;(and&nbsp;mirrors)&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;been&nbsp;persisted&nbsp;to&nbsp;disk&nbsp;(and&nbsp;fsynced)&nbsp;or&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;persistent&nbsp;message&nbsp;has&nbsp;been&nbsp;consumed&nbsp;(and&nbsp;if&nbsp;necessary<br>
&nbsp;&nbsp;&nbsp;&nbsp;acknowledged)&nbsp;from&nbsp;all&nbsp;its&nbsp;queues&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;So,&nbsp;if&nbsp;i&nbsp;send&nbsp;a&nbsp;persistent&nbsp;message&nbsp;(delivery&nbsp;mode&nbsp;=&nbsp;2)&nbsp;to&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;non-durable&nbsp;exchange&nbsp;which&nbsp;routes&nbsp;to&nbsp;a&nbsp;non-durable&nbsp;queue,&nbsp;then&nbsp;i<br>
&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;only&nbsp;get&nbsp;a&nbsp;confirmation&nbsp;once&nbsp;the&nbsp;message&nbsp;has&nbsp;been&nbsp;consumed&nbsp;from<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;queue,&nbsp;right?&nbsp;And&nbsp;if&nbsp;my&nbsp;consumer&nbsp;is&nbsp;not&nbsp;set&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;auto-acknowledge,&nbsp;then&nbsp;i&nbsp;will&nbsp;only&nbsp;get&nbsp;a&nbsp;confirmation&nbsp;once&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;consumer&nbsp;has&nbsp;acknowledged&nbsp;the&nbsp;message,&nbsp;right?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;be&nbsp;happening&nbsp;for&nbsp;me.&nbsp;I&nbsp;get&nbsp;a&nbsp;confirmation&nbsp;12<br>
&nbsp;&nbsp;&nbsp;&nbsp;milliseconds&nbsp;after&nbsp;sending&nbsp;the&nbsp;message,&nbsp;but&nbsp;i&nbsp;know&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;acknowledgement&nbsp;isn't&nbsp;being&nbsp;sent&nbsp;for&nbsp;another&nbsp;whole&nbsp;second.&nbsp;I&nbsp;can't<br>
&nbsp;&nbsp;&nbsp;&nbsp;tell&nbsp;if&nbsp;the&nbsp;confirmation&nbsp;is&nbsp;being&nbsp;sent&nbsp;when&nbsp;the&nbsp;broker&nbsp;receives&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;message,&nbsp;gives&nbsp;it&nbsp;to&nbsp;an&nbsp;exchange,&nbsp;puts&nbsp;it&nbsp;in&nbsp;a&nbsp;queue,&nbsp;or&nbsp;delivers&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;a&nbsp;consumer,&nbsp;since&nbsp;all&nbsp;those&nbsp;things&nbsp;happen&nbsp;in&nbsp;very&nbsp;rapid<br>
&nbsp;&nbsp;&nbsp;&nbsp;succession.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Any&nbsp;ideas&nbsp;as&nbsp;to&nbsp;what&nbsp;i&nbsp;should&nbsp;look&nbsp;into?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;using&nbsp;the&nbsp;Java&nbsp;API,&nbsp;if&nbsp;that&nbsp;matters.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Cheers,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;tom&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;[1]&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.rabbitmq.com/confirms.html&quot;&gt;http://www.rabbitmq.com/confirms.html&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;--&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Tom&nbsp;Anderson&nbsp;|&nbsp;Developer&nbsp;|&nbsp;+44&nbsp;20&nbsp;7826&nbsp;4312&nbsp;|&nbsp;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;http://timgroup.com/&quot;&gt;timgroup.com&lt;/a&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;color:DarkGrey;&nbsp;font-size:&nbsp;small;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;STATEMENT&nbsp;OF&nbsp;CONFIDENTIALITY:&nbsp;The&nbsp;information&nbsp;contained&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;electronic&nbsp;message&nbsp;and&nbsp;any&nbsp;attachments&nbsp;to&nbsp;this&nbsp;message<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;intended&nbsp;for&nbsp;the&nbsp;exclusive&nbsp;use&nbsp;of&nbsp;the&nbsp;addressee(s)&nbsp;and&nbsp;may<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contain&nbsp;confidential&nbsp;or&nbsp;privileged&nbsp;information.&nbsp;If&nbsp;you&nbsp;are&nbsp;not<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;please&nbsp;notify&nbsp;Tom&nbsp;Anderson&nbsp;at&nbsp;TIM<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Group&nbsp;at&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:tom.anderson@timgroup.com&quot;&gt;tom.anderson@timgroup.com&lt;/a&gt;&nbsp;and&nbsp;destroy&nbsp;all&nbsp;copies&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;message&nbsp;and&nbsp;any&nbsp;attachments.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;TIM&nbsp;Group&nbsp;is&nbsp;the&nbsp;trading&nbsp;name&nbsp;for&nbsp;YouDevise&nbsp;Limited.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;YouDevise&nbsp;Limited&nbsp;is&nbsp;registered&nbsp;in&nbsp;England,&nbsp;No.&nbsp;3331176.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registered&nbsp;office:&nbsp;3&nbsp;Copthall&nbsp;Avenue,&nbsp;London,&nbsp;EC2R&nbsp;7BH.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
