<tt>
Hi,&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;two&nbsp;node&nbsp;cluster&nbsp;(RMQ&nbsp;2.8.2&nbsp;Erlang&nbsp;R14B03)&nbsp;and&nbsp;testing&nbsp;HA&nbsp;for&nbsp;production&nbsp;release.&nbsp;Both&nbsp;nodes&nbsp;configured&nbsp;as&nbsp;disc&nbsp;in&nbsp;the&nbsp;cluster.&nbsp;I&nbsp;have&nbsp;several&nbsp;mirrored&nbsp;queues.&nbsp; All&nbsp;queues&nbsp;are&nbsp;durable&nbsp;and&nbsp;auto&nbsp;delete&nbsp;off.&nbsp; Messages&nbsp;are&nbsp;posted&nbsp;with&nbsp;delivery_mode&nbsp;2&nbsp;(persistent).&nbsp; I&nbsp;publish&nbsp;some&nbsp;messages&nbsp;(less&nbsp;than&nbsp;100).&nbsp; I&nbsp;see&nbsp;all&nbsp;my&nbsp;messages&nbsp;in&nbsp;the&nbsp;queues&nbsp;via&nbsp;the&nbsp;management&nbsp;GUI.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;run&nbsp;rabbitmqctl&nbsp;stop_app&nbsp;on&nbsp;node1.&nbsp;The  /var/lib/rabbitmq/mnesia/rabbit@rmq1-test/msg_store_persistent&nbsp;before&nbsp;stop_app&nbsp;is:&lt;/div&gt;&lt;div&gt;-rw-r--r--&nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp;472724&nbsp;Jul&nbsp;20&nbsp;15:09&nbsp;0.rdq&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;the&nbsp;stop_app:&lt;/div&gt;&lt;div&gt;&lt;div&gt;-rw-r--r--&nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp;472724&nbsp;Jul&nbsp;20&nbsp;15:09&nbsp;0.rdq&lt;/div&gt;&lt;div&gt;-rw-r--r--&nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp;1664&nbsp;Jul&nbsp;20&nbsp;15:15&nbsp;clean.dot&lt;/div&gt;&lt;div&gt;-rw-r--r--&nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; &nbsp; 474&nbsp;Jul&nbsp;20&nbsp;15:15&nbsp;file_summary.ets&lt;/div&gt;<br>
&lt;div&gt;-rw-r--r--&nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp; 48953&nbsp;Jul&nbsp;20&nbsp;15:15&nbsp;msg_store_index.ets&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then&nbsp;I&nbsp;run&nbsp;rabbitmqctl&nbsp;start_app&nbsp;(without&nbsp;publishing&nbsp;any&nbsp;message)&nbsp;and&nbsp;msg_store_persistent&nbsp;is&nbsp;cleared. &lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;-rw-r--r--&nbsp;1&nbsp;rabbitmq&nbsp;rabbitmq&nbsp;0&nbsp;Jul&nbsp;20&nbsp;15:16&nbsp;0.rdq&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;I&nbsp;do&nbsp;app_stop&amp;amp;app_start&nbsp;on&nbsp;node1&nbsp; all&nbsp;my&nbsp;queues&nbsp;become&nbsp;unsynchronised&nbsp;(without&nbsp;publishing&nbsp;any&nbsp;new&nbsp;msgs).&nbsp; The&nbsp;management&nbsp;interfaces&nbsp;says&nbsp;all&nbsp;msgs&nbsp;are&nbsp;only&nbsp;on&nbsp;node2&nbsp;only.&nbsp;  &lt;/div&gt;<br>
&lt;div&gt;If&nbsp;I&nbsp;go&nbsp;through&nbsp;the&nbsp;same&nbsp;sequence&nbsp;of&nbsp;app_stop&amp;amp;app_start&nbsp;on&nbsp;node2,&nbsp;then&nbsp;all&nbsp;msgs&nbsp;are&nbsp;lost!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Note,&nbsp;I&nbsp;get&nbsp;the&nbsp;same&nbsp;result&nbsp;if&nbsp;use&nbsp;/etc/init.d/rabbitmq-server&nbsp;start/stop.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
Could&nbsp;someone&nbsp;let&nbsp;me&nbsp;know&nbsp;what&nbsp;might&nbsp;be&nbsp;wrong&nbsp;with&nbsp;my&nbsp;configuration&nbsp;or&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong?<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
