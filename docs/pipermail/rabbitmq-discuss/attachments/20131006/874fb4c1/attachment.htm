<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;rabbitmq&nbsp;setup&nbsp;that&nbsp;uses&nbsp;STOMP&nbsp;as&nbsp;a&nbsp;means&nbsp;to&nbsp;talk&nbsp;to&nbsp;end&nbsp;user&nbsp;devices&nbsp;(android/websockets&nbsp;in&nbsp;the&nbsp;browser).&nbsp;The&nbsp;situation&nbsp;is&nbsp;there&nbsp;is&nbsp;a&nbsp;problem&nbsp;if&nbsp;I&nbsp;wait&nbsp;for&nbsp;10&nbsp;mins&nbsp;between&nbsp;messages&nbsp;and&nbsp;then&nbsp;try&nbsp;to&nbsp;send&nbsp;some&nbsp;message&nbsp;from&nbsp;server&nbsp;-&amp;gt;&nbsp;client,&nbsp;the&nbsp;client&nbsp;never&nbsp;receives&nbsp;it.&nbsp;I&nbsp;tried&nbsp;this&nbsp;in&nbsp;2&nbsp;systems,&nbsp;with&nbsp;different&nbsp;behaviors,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;Dev&nbsp;VM&nbsp;-&nbsp;4&nbsp;core&nbsp;windows&nbsp;server&lt;/span&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;The&nbsp;issue&nbsp;gets&nbsp;reproduced&nbsp;very&nbsp;very&nbsp;rarely&nbsp;but&nbsp;happens&nbsp;after&nbsp;working&nbsp;for&nbsp;an&nbsp;hour&nbsp;or&nbsp;so&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;Test&nbsp;VM&nbsp;-&nbsp;1&nbsp;core&nbsp;windows&nbsp;server&lt;/span&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;The&nbsp;issue&nbsp;gets&nbsp;reproduced&nbsp;often&nbsp;immediately&nbsp;after&nbsp;10&nbsp;mins.&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;div&gt;I&nbsp;believe&nbsp;its&nbsp;a&nbsp;configuration&nbsp;issue,&nbsp;because&nbsp;as&nbsp;soon&nbsp;as&nbsp;I&nbsp;close&nbsp;my&nbsp;app&nbsp;(in&nbsp;android)&nbsp;or&nbsp;refresh&nbsp;the&nbsp;browser,&nbsp;it&nbsp;works&nbsp;immediately.&nbsp;Does&nbsp;this&nbsp;mean,&nbsp;rabbitmq&nbsp;somehow&nbsp;marks&nbsp;a&nbsp;STOMP&nbsp;queue&nbsp;stale&nbsp;after&nbsp;some&nbsp;timeout?&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Some&nbsp;more&nbsp;points&nbsp;to&nbsp;add&nbsp;up&nbsp;the&nbsp;discussion,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;I&nbsp;use&nbsp;STOMP&nbsp;1.0&nbsp;definition&nbsp;in&nbsp;the&nbsp;header&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;No&nbsp;headers&nbsp;for&nbsp;heart-beating&nbsp;(its&nbsp;disabled&nbsp;by&nbsp;default&nbsp;in&nbsp;the&nbsp;protocol,&nbsp;so&nbsp;I&nbsp;dint&nbsp;add&nbsp;it&nbsp;in&nbsp;the&nbsp;header),&nbsp;just&nbsp;thought&nbsp;to&nbsp;mention&nbsp;it.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;All&nbsp;messages&nbsp;are&nbsp;send&nbsp;using&nbsp;UTF8&nbsp;format&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;The&nbsp;server&nbsp;has&nbsp;a&nbsp;AMQP&nbsp;queue&nbsp;handle&nbsp;which&nbsp;is&nbsp;used&nbsp;to&nbsp;send&nbsp;messages&nbsp;as&nbsp;UTF8&nbsp;format,&nbsp;client&nbsp;receives&nbsp;it&nbsp;via&nbsp;STOMP&nbsp;but&nbsp;listening&nbsp;over&nbsp;amqp&nbsp;queue&nbsp;by&nbsp;using&nbsp;the&nbsp;standards&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;documentation.&nbsp;This&nbsp;works&nbsp;whenever&nbsp;I&nbsp;have&nbsp;a&nbsp;new&nbsp;connection&nbsp;or&nbsp;restart&nbsp;the&nbsp;app,&nbsp;but&nbsp;fails&nbsp;after&nbsp;I&nbsp;wait&nbsp;for&nbsp;10-15&nbsp;mins,&nbsp;Is&nbsp;it&nbsp;something&nbsp;related&nbsp;to&nbsp;the&nbsp;1-core&nbsp;machine?&nbsp;Does&nbsp;Erlang&nbsp;has&nbsp;to&nbsp;do&nbsp;anything&nbsp;here?&nbsp;or&nbsp;rabbitmq&nbsp;marks&nbsp;the&nbsp;STOMP&nbsp;queue&nbsp;stale?&nbsp;This&nbsp;never&nbsp;happened&nbsp;before&nbsp;when&nbsp;I&nbsp;used&nbsp;only&nbsp;AMQP&nbsp;queues,&nbsp;(point&nbsp;to&nbsp;remember&nbsp;is&nbsp;I&nbsp;can't&nbsp;use&nbsp;AMQP&nbsp;in&nbsp;my&nbsp;end&nbsp;client&nbsp;apps&nbsp;as&nbsp;its&nbsp;very&nbsp;big&nbsp;to&nbsp;implement&nbsp;+&nbsp;I&nbsp;use&nbsp;the&nbsp;same&nbsp;messaging&nbsp;layer&nbsp;over&nbsp;the&nbsp;web&nbsp;using&nbsp;websockets).&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;ideas&nbsp;or&nbsp;things&nbsp;that&nbsp;I&nbsp;need&nbsp;to&nbsp;check&nbsp;would&nbsp;be&nbsp;really&nbsp;helpful.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Suhaib&lt;/div&gt;&lt;/div&gt;
</tt>
