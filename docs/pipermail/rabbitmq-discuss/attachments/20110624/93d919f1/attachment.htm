<tt>
Hello,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;right&nbsp;looking&nbsp;at&nbsp;RabbitMQ&nbsp;and&nbsp;STOMP&nbsp;support.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;some&nbsp;recommendations&nbsp;which&nbsp;could&nbsp;be&nbsp;useful.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;find&nbsp;that&nbsp;change&nbsp;2&nbsp;might&nbsp;be&nbsp;a&nbsp;problem&nbsp;in&nbsp;some&nbsp;of&nbsp;the&nbsp;cases.&lt;/div&gt;<br>
<br>
&lt;div&gt;Producers&nbsp;usually&nbsp;don&amp;#39;t&nbsp;have&nbsp;a&nbsp;notion&nbsp;of&nbsp;creating&nbsp;the&nbsp;destination,&nbsp;they&nbsp;just&nbsp;like&nbsp;to&nbsp;send&nbsp;a&nbsp;message.&lt;/div&gt;&lt;div&gt;Removing&nbsp;the&nbsp;possibility&nbsp;to&nbsp;create&nbsp;queues&nbsp;would&nbsp;mean&nbsp;to&nbsp;add&nbsp;the&nbsp;notion&nbsp;of&nbsp;creating&nbsp;queues&nbsp;on&nbsp;producers.&lt;/div&gt;<br>
<br>
&lt;div&gt;If&nbsp;this&nbsp;notion&nbsp;wouldn&amp;#39;t&nbsp;be&nbsp;added&nbsp;the&nbsp;messages&nbsp;sent&nbsp;before&nbsp;the&nbsp;subscription&nbsp;of&nbsp;a&nbsp;consumers&nbsp;will&nbsp;be&nbsp;discarded.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;find&nbsp;which&nbsp;it&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;extend&nbsp;a&nbsp;little&nbsp;the&nbsp;flexibility&nbsp;of&nbsp;the&nbsp;stomp&nbsp;support.&lt;/div&gt;<br>
<br>
&lt;div&gt;For&nbsp;instance,&nbsp;correct&nbsp;me&nbsp;if&nbsp;I&nbsp;am&nbsp;wrong&nbsp;please,&nbsp;I&nbsp;wasn&amp;#39;t&nbsp;able&nbsp;to&nbsp;do&nbsp;the&nbsp;following&nbsp;via&nbsp;pure&nbsp;stomp:&lt;/div&gt;&lt;div&gt;-&nbsp;create&nbsp;an&nbsp;exchange&nbsp;of&nbsp;type&nbsp;topic&nbsp;and&nbsp;name&nbsp;X&lt;/div&gt;&lt;div&gt;-&nbsp;create&nbsp;a&nbsp;queue&nbsp;of&nbsp;name&nbsp;Y&nbsp;(durable&nbsp;and&nbsp;not&nbsp;auto-delete)&lt;/div&gt;<br>
<br>
&lt;div&gt;-&nbsp;add&nbsp;binding&nbsp;between&nbsp;X&nbsp;and&nbsp;Y&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;translated&nbsp;in&nbsp;what&nbsp;in&nbsp;JMS&nbsp;is&nbsp;called&nbsp;durable&nbsp;subscriber,&lt;/div&gt;&lt;div&gt;it&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;something&nbsp;like&nbsp;this.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Stomp&nbsp;component&nbsp;increases&nbsp;interoperability&nbsp;with&nbsp;other&nbsp;messaging&nbsp;brokers,&lt;/div&gt;<br>
<br>
&lt;div&gt;it&nbsp;would&nbsp;be&nbsp;great&nbsp;to&nbsp;try&nbsp;to&nbsp;have&nbsp;similar&nbsp;behaviors&nbsp;for&nbsp;some&nbsp;of&nbsp;the&nbsp;basic&nbsp;messaging&nbsp;blocks.&lt;/div&gt;&lt;div&gt;People&nbsp;might&nbsp;be&nbsp;interested&nbsp;in&nbsp;changing&nbsp;messaging&nbsp;broker&nbsp;if&nbsp;similar&nbsp;functionality&nbsp;would&nbsp;be&nbsp;supported.&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;Change&nbsp;1&nbsp;adds&nbsp;flexibility,&nbsp;however&nbsp;I&nbsp;would&nbsp;keep&nbsp;auto&nbsp;creation&nbsp;in&nbsp;SEND&nbsp;phase with&nbsp;a&nbsp;default&nbsp;set&nbsp;of&nbsp;parameters.&lt;/div&gt;&lt;div&gt;These&nbsp;default&nbsp;parameters&nbsp;could&nbsp;be&nbsp;the&nbsp;most&nbsp;obvious&nbsp;or&nbsp;the&nbsp;one&nbsp;which&nbsp;would&nbsp;allow&nbsp;easy&nbsp;interoperability&nbsp;between&nbsp;different&nbsp;products.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;---&lt;br&gt;Massimo&nbsp;Paladin&lt;br&gt;&lt;br&gt;email: &lt;a&nbsp;href=&quot;mailto:massimo.paladin@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;massimo.paladin@gmail.com&lt;/a&gt;&lt;br&gt;website: &lt;a&nbsp;href=&quot;http://www.mpaladin.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.mpaladin.com&lt;/a&gt;&lt;br&gt;<br>
<br>
flickr&amp;#39;s&nbsp;page: &lt;a&nbsp;href=&quot;http://flickr.com/photos/massimop&quot;&nbsp;target=&quot;_blank&quot;&gt;http://flickr.com/photos/massimop&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Jun&nbsp;24,&nbsp;2011&nbsp;at&nbsp;3:33&nbsp;PM,&nbsp;Rob&nbsp;Harrop&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rob@rabbitmq.com&quot;&gt;rob@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
All,&lt;br&gt;<br>
&lt;br&gt;<br>
We&amp;#39;re&nbsp;thinking&nbsp;of&nbsp;making&nbsp;some&nbsp;changes&nbsp;to&nbsp;the&nbsp;STOMP&nbsp;adapter&nbsp;and&nbsp;would&nbsp;like&nbsp;to&nbsp;get&nbsp;some&nbsp;feedback&nbsp;before&nbsp;we&nbsp;do.&lt;br&gt;<br>
&lt;br&gt;<br>
----------&lt;br&gt;<br>
Motivation&lt;br&gt;<br>
----------&lt;br&gt;<br>
&lt;br&gt;<br>
We&amp;#39;re&nbsp;making&nbsp;these&nbsp;changes&nbsp;to&nbsp;support&nbsp;two&nbsp;main&nbsp;use&nbsp;cases:&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;SUBSCRIBE&nbsp;and&nbsp;SEND&nbsp;to&nbsp;queues&nbsp;created&nbsp;outside&nbsp;of&nbsp;STOMP&nbsp;with&nbsp;arbitrary&nbsp;queue&nbsp;properties&nbsp;(durable,&nbsp;auto-delete,&nbsp;x-message-ttl&nbsp;etc.)&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;Allow&nbsp;STOMP&nbsp;clients&nbsp;to&nbsp;create&nbsp;queues&nbsp;with&nbsp;arbitrary&nbsp;queue&nbsp;properties&lt;br&gt;<br>
&lt;br&gt;<br>
----------------&lt;br&gt;<br>
Proposed&nbsp;Changes&lt;br&gt;<br>
----------------&lt;br&gt;<br>
&lt;br&gt;<br>
Currently,&nbsp;the&nbsp;STOMP&nbsp;adapter&nbsp;automatically&nbsp;creates&nbsp;the&nbsp;necessary&nbsp;queues&nbsp;when&nbsp;issuing&nbsp;SEND&nbsp;and&nbsp;SUBSCRIBE&nbsp;frames.&nbsp;Queues&nbsp;are&nbsp;created&nbsp;with&nbsp;a&nbsp;hard-coded&nbsp;set&nbsp;of&nbsp;properties&nbsp;that&nbsp;depends&nbsp;on&nbsp;the&nbsp;destination&nbsp;type.&lt;br&gt;<br>
&lt;br&gt;<br>
Change&nbsp;1:&nbsp;Allow&nbsp;extra&nbsp;headers&nbsp;on&nbsp;SUBSCRIBE&nbsp;to&nbsp;control&nbsp;queue&nbsp;properties&lt;br&gt;<br>
&lt;br&gt;<br>
We&amp;#39;ll&nbsp;add&nbsp;support&nbsp;for&nbsp;durable,&nbsp;exclusive,&nbsp;auto-delete&nbsp;and&nbsp;everything&nbsp;else&nbsp;as&nbsp;headers&nbsp;on&nbsp;the&nbsp;SUBSCRIBE&nbsp;frame.&lt;br&gt;<br>
&lt;br&gt;<br>
Change&nbsp;2:&nbsp;Stop&nbsp;creating&nbsp;queues&nbsp;on&nbsp;SEND&lt;br&gt;<br>
&lt;br&gt;<br>
Because&nbsp;queue.declare&nbsp;requires&nbsp;queue&nbsp;attributes&nbsp;to&nbsp;be&nbsp;semantically&nbsp;equivalent,&nbsp;issuing&nbsp;a&nbsp;queue.declare&nbsp;on&nbsp;SEND&nbsp;means&nbsp;that&nbsp;each&nbsp;SEND&nbsp;frame&nbsp;would&nbsp;also&nbsp;need&nbsp;to&nbsp;carry&nbsp;the&nbsp;queue&nbsp;attributes&nbsp;in&nbsp;the&nbsp;header&lt;br&gt;<br>
&lt;br&gt;<br>
------------&lt;br&gt;<br>
Consequences&lt;br&gt;<br>
------------&lt;br&gt;<br>
&lt;br&gt;<br>
+&nbsp;Support&nbsp;for&nbsp;all&nbsp;queue&nbsp;attributes&lt;br&gt;<br>
+&nbsp;Subscribe&nbsp;and&nbsp;send&nbsp;to&nbsp;existing&nbsp;queues&lt;br&gt;<br>
+&nbsp;Improved&nbsp;SEND&nbsp;performance&nbsp;(no&nbsp;need&nbsp;to&nbsp;ensure&nbsp;queues&nbsp;exist)&lt;br&gt;<br>
-&nbsp;Need&nbsp;to&nbsp;issue&nbsp;a&nbsp;SUBSCRIBE&nbsp;to&nbsp;ensure&nbsp;queues&nbsp;exist&lt;br&gt;<br>
&lt;br&gt;<br>
Please&nbsp;give&nbsp;any&nbsp;feedback&nbsp;you&nbsp;have.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Rob&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;u&gt;&lt;/u&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;u&gt;&lt;/u&gt;cgi-bin/mailman/listinfo/&lt;u&gt;&lt;/u&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
