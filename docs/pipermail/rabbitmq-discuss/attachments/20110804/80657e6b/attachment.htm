<tt>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;What&nbsp;could&nbsp;be&nbsp;performance&nbsp;expectations&nbsp;of&nbsp;RabbitMQ&nbsp;on&nbsp;EC2?&nbsp;Would&nbsp;appreciate&nbsp;sharing&nbsp;experience&nbsp;here.&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;do&nbsp;some&nbsp;performance&nbsp;test&nbsp;of&nbsp;RabbitMQ&nbsp;on&nbsp;aws&nbsp;EC2.&nbsp;I&nbsp;have&nbsp;3&nbsp;separate&nbsp;EC2&nbsp;instance&nbsp;running&nbsp;for&nbsp;RabbitMQ,&nbsp;Publisher&nbsp;and&nbsp;consumer/worker.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;The&nbsp;scenario&nbsp;I&nbsp;have&nbsp;is&nbsp;that&nbsp;Publisher&nbsp;pushes&nbsp;JSON&nbsp;string&nbsp;(approx&nbsp;165-200&nbsp;bytes)&nbsp;to&nbsp;exchange&nbsp;type&nbsp;direct&nbsp;with&nbsp;durable&nbsp;set&nbsp;to&nbsp;true&nbsp;and&nbsp;bind&nbsp;queue&nbsp;with&nbsp;durable&nbsp;set&nbsp;to&nbsp;true&nbsp;(i.e.&nbsp;both&nbsp;in&nbsp;persistent&nbsp;mode).&nbsp;Consumer/worker&nbsp;is&nbsp;running&nbsp;on&nbsp;separate&nbsp;box&nbsp;-&nbsp;keeps&nbsp;pulling&nbsp;messages.&nbsp;(Moving&nbsp;forward&nbsp;these&nbsp;messages&nbsp;at&nbsp;worker&nbsp;are&nbsp;expected&nbsp;to&nbsp;be&nbsp;persisted&nbsp;in&nbsp;MongoDB&nbsp;and&nbsp;Publisher&nbsp;would&nbsp;be&nbsp;replaced&nbsp;with&nbsp;Restful&nbsp; service&nbsp;using&nbsp;REST&nbsp;easy)&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;To&nbsp;keep&nbsp;things&nbsp;simple&nbsp;I&nbsp;have&nbsp;simulated&nbsp;this&nbsp;scenario&nbsp;by&nbsp;using&nbsp;Multicast&nbsp;sample&nbsp;code.&nbsp;I&nbsp;had&nbsp;split&nbsp;multicast&nbsp;code&nbsp;in&nbsp;to&nbsp;two&nbsp;separate&nbsp;java&nbsp;file&nbsp;namely&nbsp;“Producer”&nbsp;and&nbsp;“Worker”&nbsp;to&nbsp;run&nbsp;each&nbsp;on&nbsp;separate&nbsp;box.&nbsp;I&nbsp;have&nbsp;used&nbsp;“c1.mediam”&nbsp;EC2&nbsp;with&nbsp;Ubuntu&nbsp;server&nbsp;v11.4&nbsp;32&nbsp;bit&nbsp;for&nbsp;running&nbsp;producer&nbsp;and&nbsp;consumer&nbsp;and&nbsp;“m1.large”&nbsp;with&nbsp;Ubuntu&nbsp;server&nbsp;v11.4&nbsp;64&nbsp;bit&nbsp;for&nbsp;RabbitMQ.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;am&nbsp;able&nbsp;to&nbsp;achieve&nbsp;a&nbsp;throughput&nbsp;of&nbsp;3-5k&nbsp;messages&nbsp;per&nbsp;second&nbsp;i.e.&nbsp;keeping&nbsp;study&nbsp;message&nbsp;push&nbsp;rate&nbsp;to&nbsp;5K.&nbsp;(This&nbsp;concur&nbsp;with&lt;a&nbsp;href=&quot;&nbsp;http://www.rabbitmq.com/faq.html#performance-latency&quot;&gt;&nbsp;http://www.rabbitmq.com/faq.html#performance-latency&lt;/a&gt;)&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Further,&nbsp;when&nbsp;I&nbsp;increase&nbsp;the&nbsp;push&nbsp;rate&nbsp;to&nbsp;10-12k&nbsp;messages&nbsp;per&nbsp;second.&nbsp;Consumer’s&nbsp;ability&nbsp;to&nbsp;consume&nbsp;messages&nbsp;drops&nbsp;to&nbsp;1-2k&nbsp;messages&nbsp;per&nbsp;second&nbsp;and&nbsp;it&nbsp;generates&nbsp;backlog&nbsp;(Many&nbsp;time&nbsp;it&nbsp;goes&nbsp;below&nbsp;800&nbsp;messages&nbsp;per&nbsp;second&nbsp;too).&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;With&nbsp;above&nbsp;scenario,&nbsp;I&nbsp;have&nbsp;following&nbsp;questions&nbsp;and&nbsp;would&nbsp;appreciate&nbsp;thoughts/suggestion&nbsp;to&nbsp;improve&nbsp;throughput&nbsp;of&nbsp;consumer&nbsp;as&nbsp;well.&nbsp; (NOTE:&nbsp;all&nbsp;the&nbsp;messages&nbsp;in&nbsp;my&nbsp;scenario&nbsp;are&nbsp;expected&nbsp;to&nbsp;similar&nbsp;type&nbsp;giving&nbsp;no&nbsp;opportunity&nbsp;to&nbsp;group&nbsp;them&nbsp;for&nbsp;setting&nbsp;routing&nbsp;therefore&nbsp;may&nbsp;need&nbsp;some&nbsp;kind&nbsp;of&nbsp;load-balancer&nbsp;approach)&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;1) This&nbsp;performance&nbsp;is&nbsp;observed&nbsp;with&nbsp;one&nbsp;rabbitMQ&nbsp;server,&nbsp;one&nbsp;exchange&nbsp;and&nbsp;one&nbsp;queue.&nbsp;Is&nbsp;anything&nbsp;further&nbsp;can&nbsp;be&nbsp;configured,&nbsp;fine-tuned&nbsp;to&nbsp;improvise&nbsp;throughput&nbsp;to&nbsp;more&nbsp;than&nbsp;5k&nbsp;with&nbsp;persistent&nbsp;mode.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2) I&nbsp;do&nbsp;understand,&nbsp;clustering&nbsp;could&nbsp;be&nbsp;another&nbsp;option.&nbsp;However,&nbsp;I&nbsp;need&nbsp;to&nbsp;set&nbsp;cluster&nbsp;based&nbsp;on&nbsp;incoming&nbsp;load&nbsp;and&nbsp;I&nbsp;may&nbsp;not&nbsp;get&nbsp;message&nbsp;grouping&nbsp;/&nbsp;identity&nbsp;to&nbsp;define&nbsp;routing&nbsp;(since&nbsp;messages&nbsp;are&nbsp;expected&nbsp;to&nbsp;be&nbsp;just&nbsp;log&nbsp;description).&nbsp;Can&nbsp;I&nbsp;have&nbsp;clustering&nbsp;following&nbsp;load&nbsp;balancing&nbsp;option&nbsp;for&nbsp;worker/consumer?&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;3) I&nbsp;am&nbsp;expected&nbsp;to&nbsp;process&nbsp;several&nbsp;hundred&nbsp;thousand&nbsp;requests&nbsp;per&nbsp;second.&nbsp;I&nbsp;would&nbsp;appreciate&nbsp;sharing&nbsp;some&nbsp;experience&nbsp;and&nbsp;approach&nbsp;to&nbsp;achieve&nbsp;this.&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;<br>
&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;<br>

</tt>
