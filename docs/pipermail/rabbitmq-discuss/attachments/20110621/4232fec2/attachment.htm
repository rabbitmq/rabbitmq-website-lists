<tt>
Good&nbsp;day,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;wondering&nbsp;whether&nbsp;someone&nbsp;my&nbsp;know&nbsp;the&nbsp;answer&nbsp;to&nbsp;the&nbsp;following&nbsp;questions.&nbsp; I&amp;#39;ve&nbsp;read&nbsp;the&nbsp;FAQ&nbsp;and&nbsp;manuals,&nbsp;but&nbsp;they&nbsp;are&nbsp;not&nbsp;completely&nbsp;clear.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;first&nbsp;question&nbsp;is&nbsp;does&nbsp;a&nbsp;persistent&nbsp;message&nbsp;will&nbsp;hit&nbsp;the&nbsp;disk&nbsp;even&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;consumer&nbsp;on&nbsp;the&nbsp;queue&nbsp;the&nbsp;message&nbsp;is&nbsp;being&nbsp;delivered&nbsp;to,&nbsp;and&nbsp;do&nbsp;automatic&nbsp;acknowledgements&nbsp;(i.e.&nbsp;no-wait)&nbsp;make&nbsp;a&nbsp;difference?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;are&nbsp;in&nbsp;a&nbsp;situation&nbsp;where&nbsp;writing&nbsp;to&nbsp;disk&nbsp;is&nbsp;expensive,&nbsp;and&nbsp;usually&nbsp;there&nbsp;will&nbsp;be&nbsp;a&nbsp;waiting&nbsp;and&nbsp;willing&nbsp;consumer&nbsp;attached&nbsp;to&nbsp;the&nbsp;queue,&nbsp;but&nbsp;we&nbsp;are&nbsp;not&nbsp;using&nbsp;automatic&nbsp;acks,&nbsp;rather&nbsp;we&nbsp;ack&nbsp;the&nbsp;message&nbsp;when&nbsp;the&nbsp;consumer&nbsp;has&nbsp;processed&nbsp;it,&nbsp;which&nbsp;may&nbsp;take&nbsp;a&nbsp;second&nbsp;or&nbsp;two.&nbsp; So&nbsp;we&amp;#39;d&nbsp;like&nbsp;to&nbsp;know&nbsp;whether&nbsp;in&nbsp;the&nbsp;common&nbsp;case&nbsp;in&nbsp;this&nbsp;situation&nbsp;messages&nbsp;will&nbsp;be&nbsp;written&nbsp;to&nbsp;disk&nbsp;or&nbsp;not.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;docs&nbsp;are&nbsp;unclear.&nbsp; One&nbsp;could&nbsp;interpret&nbsp;them&nbsp;to&nbsp;mean&nbsp;that&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;willing&nbsp;consumer&nbsp;the&nbsp;message&nbsp;will&nbsp;not&nbsp;be&nbsp;written&nbsp;to&nbsp;disk,&nbsp;but&nbsp;its&nbsp;unclear&nbsp;if&nbsp;this&nbsp;requires&nbsp;no-wait&nbsp;to&nbsp;be&nbsp;true.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;second&nbsp;question&nbsp;is&nbsp;what&nbsp;happens&nbsp;to&nbsp;persistent&nbsp;messages&nbsp;coming&nbsp;in&nbsp;through&nbsp;a&nbsp;node&nbsp;that&nbsp;are&nbsp;to&nbsp;be&nbsp;routed&nbsp;to&nbsp;a&nbsp;durable&nbsp;queue&nbsp;attached&nbsp;to&nbsp;a&nbsp;different&nbsp;node?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;believe&nbsp;this&nbsp;is&nbsp;answered&nbsp;by&nbsp;a&nbsp;question&nbsp;in&nbsp;the&nbsp;FAQ,&nbsp;&amp;quot;What&nbsp;happens&nbsp;to&nbsp;messages&nbsp;when&nbsp;a&nbsp;network&nbsp;outage&nbsp;removes&nbsp;the&nbsp;route&nbsp;between&nbsp;an&nbsp;exchange&nbsp;and&nbsp;a&nbsp;bound&nbsp;queue?&amp;quot;,&nbsp;which&nbsp;states&nbsp;that&nbsp;the&nbsp;messages&nbsp;will&nbsp;be&nbsp;silently&nbsp;dropped&nbsp;unless&nbsp;I&nbsp;set&nbsp;the&nbsp;mandatory&nbsp;flag&nbsp;on&nbsp;basic.publish.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alas,&nbsp;that&nbsp;is&nbsp;not&nbsp;feasible&nbsp;in&nbsp;our&nbsp;use-case.&nbsp; We&nbsp;are&nbsp;publishing&nbsp;to&nbsp;a&nbsp;topic&nbsp;exchange&nbsp;and&nbsp;creating&nbsp;bindings&nbsp;to&nbsp;to&nbsp;match&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;published&nbsp;messages&nbsp;to&nbsp;some&nbsp;durable&nbsp;queues.&nbsp; Thus,&nbsp;we&nbsp;actually&nbsp;expect&nbsp;many&nbsp;messages&nbsp;to&nbsp;be&nbsp;routed&nbsp;to&nbsp;no&nbsp;queue.&nbsp; Even&nbsp;if&nbsp;we&nbsp;set&nbsp;the&nbsp;mandatory&nbsp;flag,&nbsp;we&amp;#39;d&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;tell&nbsp;whether&nbsp;the&nbsp;error&nbsp;received&nbsp;by&nbsp;the&nbsp;publisher&nbsp;was&nbsp;a&nbsp;result&nbsp;of&nbsp;no&nbsp;binding&nbsp;matching&nbsp;the&nbsp;message&nbsp;(a&nbsp;normal&nbsp;condition)&nbsp;or&nbsp;the&nbsp;loss&nbsp;a&nbsp;node,&nbsp;along&nbsp;with&nbsp;all&nbsp;the&nbsp;queues&nbsp;and&nbsp;bindings&nbsp;associated&nbsp;with&nbsp;it&nbsp;(an&nbsp;exceptional&nbsp;condition).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;suggestions&nbsp;on&nbsp;how&nbsp;to&nbsp;handle&nbsp;this&nbsp;issue&nbsp;and&nbsp;distinguish&nbsp;between&nbsp;these&nbsp;two&nbsp;conditions?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Elias&nbsp;Levy&lt;/div&gt;<br>

</tt>
