<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;guys!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;have&nbsp;an&nbsp;application&nbsp;that&nbsp;has&nbsp;a&nbsp;publisher&nbsp;which&nbsp;sends&nbsp;messages&nbsp;to&nbsp;a&nbsp;consumer&nbsp;which&nbsp;process&nbsp;those&nbsp;messages&nbsp;and&nbsp;then&nbsp;stores&nbsp;them&nbsp;in&nbsp;the&nbsp;DB.&nbsp;Everything&nbsp;is&nbsp;working&nbsp;fine&nbsp;up&nbsp;to&nbsp;now,&nbsp;but&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;we're&nbsp;receiving&nbsp;is&nbsp;getting&nbsp;bigger&nbsp;and&nbsp;performance&nbsp;is&nbsp;quite&nbsp;bad.&nbsp;We&nbsp;started&nbsp;to&nbsp;analize&nbsp;where&nbsp;the&nbsp;bottleneck&nbsp;was&nbsp;and&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;in&nbsp;rabbit&nbsp;queues.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I've&nbsp;been&nbsp;reading&nbsp;many&nbsp;posts&nbsp;in&nbsp;Rabbit's&nbsp;blog&nbsp;about&nbsp;optimization&nbsp;but&nbsp;I&nbsp;couldn't&nbsp;find&nbsp;how&nbsp;to&nbsp;solve&nbsp;the&nbsp;problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;main&nbsp;problem&nbsp;is&nbsp;that&nbsp;we're&nbsp;publishing&nbsp;messages&nbsp;faster&nbsp;than&nbsp;we&nbsp;can&nbsp;consume&nbsp;them.&nbsp;When&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;in&nbsp;ready&nbsp;state&nbsp;(or&nbsp;in&nbsp;unacked&nbsp;state)&nbsp;increases,&nbsp;the&nbsp;deliver&nbsp;ratio&nbsp;decrease&nbsp;considerably.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I've&nbsp;tried&nbsp;adding&nbsp;more&nbsp;consumers,&nbsp;sending&nbsp;messages&nbsp;more&nbsp;slowly&nbsp;(with&nbsp;time&nbsp;sleep)...&nbsp;without&nbsp;luck.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I've&nbsp;seen&nbsp;that&nbsp;sending&nbsp;an&nbsp;ack&nbsp;for&nbsp;each&nbsp;message&nbsp;make&nbsp;things&nbsp;slower&nbsp;but&nbsp;we&nbsp;actually&nbsp;need&nbsp;to&nbsp;ensure&nbsp;they're&nbsp;delivered.&nbsp;Our&nbsp;current&nbsp;ack&nbsp;ratio&nbsp;is&nbsp;too&nbsp;low,&nbsp;so&nbsp;every&nbsp;time&nbsp;the&nbsp;number&nbsp;of&nbsp;unacked&nbsp;messages&nbsp;increases,&nbsp;the&nbsp;deliver&nbsp;ratio&nbsp;decreases.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Do&nbsp;you&nbsp;have&nbsp;any&nbsp;ideas&nbsp;of&nbsp;what&nbsp;could&nbsp;I&nbsp;try&nbsp;to&nbsp;improve&nbsp;our&nbsp;process&nbsp;performance?&nbsp;Or&nbsp;should&nbsp;I&nbsp;just&nbsp;make&nbsp;sure&nbsp;not&nbsp;to&nbsp;send&nbsp;more&nbsp;messages&nbsp;than&nbsp;my&nbsp;current&nbsp;ack&nbsp;ratio?&nbsp;Is&nbsp;stacking&nbsp;acks&nbsp;and&nbsp;sending&nbsp;them&nbsp;in&nbsp;batches&nbsp;a&nbsp;safe&nbsp;strategy&nbsp;to&nbsp;try&nbsp;out?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Adding&nbsp;more&nbsp;queues&nbsp;is&nbsp;not&nbsp;an&nbsp;option&nbsp;since&nbsp;it&nbsp;will&nbsp;add&nbsp;too&nbsp;much&nbsp;complexity&nbsp;to&nbsp;our&nbsp;app.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!!&lt;/div&gt;&lt;/div&gt;
</tt>
