<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial,&nbsp;&amp;#39;Liberation&nbsp;Sans&amp;#39;,&nbsp;&amp;#39;DejaVu&nbsp;Sans&amp;#39;,&nbsp;sans-serif;&nbsp;font-size:&nbsp;14px;&nbsp;line-height:&nbsp;18px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;p&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;1em;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font-size:&nbsp;14px;&nbsp;vertical-align:&nbsp;baseline;&nbsp;background-image:&nbsp;initial;&nbsp;background-attachment:&nbsp;initial;&nbsp;background-origin:&nbsp;initial;&nbsp;background-clip:&nbsp;initial;&nbsp;background-color:&nbsp;transparent;&nbsp;clear:&nbsp;both;&nbsp;word-wrap:&nbsp;break-word;&nbsp;background-position:&nbsp;initial&nbsp;initial;&nbsp;background-repeat:&nbsp;initial&nbsp;initial;&nbsp;&quot;&gt;<br>
I am&nbsp;struggling&nbsp;to&nbsp;work&nbsp;out&nbsp;how&nbsp;I&nbsp;can&nbsp;communicate&nbsp;between&nbsp;rabbitmq&nbsp;and&nbsp;em-websocet.&lt;/p&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Arial,&nbsp;&amp;#39;Liberation&nbsp;Sans&amp;#39;,&nbsp;&amp;#39;DejaVu&nbsp;Sans&amp;#39;,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:&nbsp;14px;&nbsp;line-height:&nbsp;18px;&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial,&nbsp;&amp;#39;Liberation&nbsp;Sans&amp;#39;,&nbsp;&amp;#39;DejaVu&nbsp;Sans&amp;#39;,&nbsp;sans-serif;&nbsp;font-size:&nbsp;14px;&nbsp;line-height:&nbsp;18px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;p&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;1em;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font-size:&nbsp;14px;&nbsp;vertical-align:&nbsp;baseline;&nbsp;background-image:&nbsp;initial;&nbsp;background-attachment:&nbsp;initial;&nbsp;background-origin:&nbsp;initial;&nbsp;background-clip:&nbsp;initial;&nbsp;background-color:&nbsp;transparent;&nbsp;clear:&nbsp;both;&nbsp;word-wrap:&nbsp;break-word;&nbsp;background-position:&nbsp;initial&nbsp;initial;&nbsp;background-repeat:&nbsp;initial&nbsp;initial;&nbsp;&quot;&gt;<br>
My&nbsp;are&nbsp;requirements&nbsp;for&nbsp;the&nbsp;piece&nbsp;of&nbsp;work&nbsp;are&nbsp;this.&lt;br&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;I&nbsp;want&nbsp;a&nbsp;user&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;kick&nbsp;off from&nbsp;a&nbsp;web&nbsp;page a&nbsp;long&nbsp;running&nbsp;process&nbsp;that&nbsp;could&nbsp;take&nbsp;at&nbsp;least&nbsp;20&nbsp;minutes&nbsp;to&nbsp;finish.&lt;/li&gt;&lt;li&gt;I&nbsp;want&nbsp;the&nbsp;process&nbsp;to&nbsp;complete&nbsp;even&nbsp;if&nbsp;the&nbsp;user&nbsp;closes&nbsp;down&nbsp;the&nbsp;browser.&lt;/li&gt;<br>
&lt;li&gt;While&nbsp;the&nbsp;user&nbsp;still&nbsp;has&nbsp;the&nbsp;browser&nbsp;open,&nbsp;I&nbsp;want&nbsp;the&nbsp;user&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;get&nbsp;real&nbsp;time&nbsp;updates&nbsp;of&nbsp;the&nbsp;long&nbsp;running&nbsp;process&nbsp;displayed&nbsp;in&nbsp;the&nbsp;browser.&lt;br&gt;&lt;br&gt;My&nbsp;thoughts&nbsp;are&nbsp;that&nbsp;the&nbsp;client&nbsp;script&nbsp;on&nbsp;the&nbsp;page&nbsp;will&nbsp;create&nbsp;a&nbsp;websocket&nbsp;connection&nbsp;that&nbsp;will&nbsp;kick&nbsp;off&nbsp;an&nbsp;EventMachine-Websocket&nbsp;instance&nbsp;on&nbsp;the&nbsp;server&nbsp;(I&nbsp;am&nbsp;using&nbsp;Ruby&nbsp;on&nbsp;Rails).&lt;br&gt;<br>
The&nbsp;websocket&nbsp;instance&nbsp;will&nbsp;subscribe&nbsp;to&nbsp;an&nbsp;AMQP&nbsp;queue&nbsp;that&nbsp;will&nbsp;complete&nbsp;the&nbsp;long&nbsp;running&nbsp;process&nbsp;even&nbsp;if&nbsp;the&nbsp;browser&nbsp;is&nbsp;closed&nbsp;down. &lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;struggling&nbsp;with&nbsp;how&nbsp;the&nbsp;em-websocket&nbsp;instance&nbsp;will&nbsp;receive&nbsp;updates&nbsp;of&nbsp;the&nbsp;work&nbsp;that&nbsp;is&nbsp;being&nbsp;done&nbsp;which&nbsp;is&nbsp;effectively&nbsp;inserts&nbsp;into&nbsp;a&nbsp;database.&lt;br&gt;<br>
&lt;br&gt;Do&nbsp;I&nbsp;need&nbsp;2&nbsp;queues?&nbsp; One&nbsp;to&nbsp;start&nbsp;the&nbsp;process&nbsp;and&nbsp;one&nbsp;to&nbsp;receive&nbsp;updates&nbsp;or&nbsp;is&nbsp;there&nbsp;a&nbsp;better&nbsp;way? &lt;br&gt;&lt;br&gt;Can&nbsp;anybody&nbsp;shed&nbsp;any&nbsp;advice&nbsp;on&nbsp;this&nbsp;situation?&nbsp; Has&nbsp;anybody&nbsp;done&nbsp;anything&nbsp;similar?&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;Cheers&lt;br&gt;&lt;br&gt;Paul&nbsp;Cowan&lt;br&gt;&lt;br&gt;Cutting-Edge&nbsp;Solutions&nbsp;(Scotland)&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://thesoftwaresimpleton.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://thesoftwaresimpleton.com/&lt;/a&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
