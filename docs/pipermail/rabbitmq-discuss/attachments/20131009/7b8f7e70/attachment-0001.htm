<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;If&nbsp;used&nbsp;correctly,&nbsp;rabbitmq-c&nbsp;should&nbsp;not&nbsp;cause&nbsp;your&nbsp;program&nbsp;to&nbsp;terminate.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;I&nbsp;would&nbsp;need&nbsp;a&nbsp;bit&nbsp;more&nbsp;information&nbsp;by&nbsp;what&nbsp;you&nbsp;mean&nbsp;by&nbsp;&amp;quot;program&nbsp;terminated&amp;quot;&nbsp;to&nbsp;help&nbsp;you&nbsp;diagnose&nbsp;your&nbsp;issue.&nbsp;Did&nbsp;it&nbsp;segfault?&nbsp;Did&nbsp;it&nbsp;abort()?&nbsp;If&nbsp;so,&nbsp;is&nbsp;there&nbsp;a&nbsp;callstack&nbsp;indicating&nbsp;where&nbsp;this&nbsp;happened?&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;9,&nbsp;2013&nbsp;at&nbsp;5:56&nbsp;AM,&nbsp;Lothe&nbsp;Shashank&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:Shashank.Lothe@techmahindra.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Shashank.Lothe@techmahindra.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&gt;<br>
&lt;div&nbsp;style=&quot;direction:ltr;font-size:10pt;font-family:Tahoma&quot;&gt;1.&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;check&nbsp;the&nbsp;connection&nbsp;before&nbsp;I&nbsp;publish&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;No,&nbsp;and&nbsp;even&nbsp;if&nbsp;there&nbsp;was,&nbsp;its&nbsp;entirely&nbsp;possible&nbsp;that&nbsp;the&nbsp;connection&nbsp;could&nbsp;be&nbsp;closed&nbsp;between&nbsp;the&nbsp;time&nbsp;the&nbsp;program&nbsp;checked&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;connection&nbsp;was&nbsp;open&nbsp;and&nbsp;the&nbsp;time&nbsp;amqp_basic_publish()&nbsp;was&nbsp;called.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;direction:ltr;font-size:10pt;font-family:Tahoma&quot;&gt;<br>
<br>
2.&nbsp;if&nbsp;the&nbsp;connection&nbsp;value&nbsp;becomes&nbsp;NULL,&nbsp;as&nbsp;we&nbsp;stop&nbsp;the&nbsp;broker.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;amqp_connection_state_t&nbsp;objects&nbsp;are&nbsp;only&nbsp;allocated&nbsp;with&nbsp;amqp_new_connection(),&nbsp;and&nbsp;only&nbsp;deallocated&nbsp;with&nbsp;amqp_destroy_connection().&nbsp;No&nbsp;other&nbsp;function&nbsp;in&nbsp;rabbitmq-c&nbsp;should&nbsp;change&nbsp;the&nbsp;external&nbsp;facing&nbsp;value&nbsp;of&nbsp;an&nbsp;amqp_connection_state_t.&nbsp;Its&nbsp;an&nbsp;opaque&nbsp;pointer. &lt;a&nbsp;href=&quot;http://stackoverflow.com/a/7553775/786714&quot;&gt;http://stackoverflow.com/a/7553775/786714&lt;/a&gt;&nbsp;for&nbsp;a&nbsp;better&nbsp;explanation&nbsp;on&nbsp;the&nbsp;pattern&nbsp;in&nbsp;use&nbsp;here.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Alan&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
