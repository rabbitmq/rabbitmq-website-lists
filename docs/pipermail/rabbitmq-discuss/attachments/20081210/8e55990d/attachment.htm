<tt>
I&nbsp;am&nbsp;trying&nbsp;to&nbsp;write&nbsp;a&nbsp;java&nbsp;application&nbsp;that&nbsp;can&nbsp;handle&nbsp;the&nbsp;rabbitmq&nbsp;server&nbsp;going&nbsp;down&nbsp;and&nbsp;coming&nbsp;back&nbsp;up&nbsp;(or&nbsp;losing&nbsp;the&nbsp;connection&nbsp;to&nbsp;the&nbsp;server&nbsp;and&nbsp;getting&nbsp;it&nbsp;back).&lt;br&gt;&lt;br&gt;When&nbsp;my&nbsp;application&nbsp;is&nbsp;running&nbsp;and&nbsp;I&nbsp;stop&nbsp;the&nbsp;rabbitmq&nbsp;server,&nbsp;the&nbsp;ShutdownListener&nbsp;gets&nbsp;called&nbsp;(and&nbsp;some&nbsp;of&nbsp;the&nbsp;disconnection&nbsp;methods&nbsp;may&nbsp;throw&nbsp;some&nbsp;exceptions).&nbsp;So&nbsp;far&nbsp;all&nbsp;good.&lt;br&gt;<br>
&lt;br&gt;When&nbsp;the&nbsp;server&nbsp;comes&nbsp;back&nbsp;up&nbsp;the&nbsp;application&nbsp;connects&nbsp;to&nbsp;the&nbsp;server:&nbsp;(It&nbsp;keeps&nbsp;trying&nbsp;to&nbsp;connect&nbsp;while&nbsp;the&nbsp;server&nbsp;is&nbsp;down&nbsp;until&nbsp;it&nbsp;successes.)&nbsp;&lt;br&gt;&lt;br&gt;ConnectionFactory&nbsp;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory(params);&lt;br&gt;connection&nbsp;=&nbsp;factory.newConnection(host,&nbsp;AMQP.PROTOCOL.PORT);&lt;br&gt;<br>
channel&nbsp;=&nbsp;connection.createChannel();&lt;br&gt;channel.accessRequest(this.realm);&lt;br&gt;&lt;br&gt;Code&nbsp;above&nbsp;gets&nbsp;run&nbsp;through&nbsp;without&nbsp;any&nbsp;exceptions.&nbsp;But,&nbsp;when&nbsp;reconnecting,&nbsp;the&nbsp;execution&nbsp;stops&nbsp;at&nbsp;this&nbsp;line,&nbsp;the&nbsp;method&nbsp;seems&nbsp;to&nbsp;never&nbsp;return:&lt;br&gt;<br>
&lt;br&gt;connection.addShutdownListener(shutdownListener);&lt;br&gt;&lt;br&gt;At&nbsp;first&nbsp;time&nbsp;connection&nbsp;the&nbsp;same&nbsp;code&nbsp;is&nbsp;executed&nbsp;without&nbsp;any&nbsp;problems.&lt;br&gt;&lt;br&gt;In&nbsp;some&nbsp;cases,&nbsp;when&nbsp;the&nbsp;connection&nbsp;is&nbsp;terminated&nbsp;from&nbsp;within&nbsp;my&nbsp;application,&nbsp;execution&nbsp;also&nbsp;stops&nbsp;at&nbsp;these&nbsp;lines:&lt;br&gt;<br>
&lt;br&gt;channel.basicCancel(consumerTag);&lt;br&gt;channel.basicCancel(commandConsumerTag);&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;once&nbsp;seen&nbsp;addShutdownListener&nbsp;throw&nbsp;a&nbsp;ConcurrentModificationException,&nbsp;but&nbsp;the&nbsp;rabbitmq&nbsp;connection&nbsp;is&nbsp;not&nbsp;running&nbsp;in&nbsp;a&nbsp;multithreaded&nbsp;environment.&lt;br&gt;<br>
&lt;br&gt;Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;set&nbsp;a&nbsp;general&nbsp;timeout&nbsp;for&nbsp;all&nbsp;API&nbsp;method?&nbsp;Am&nbsp;I&nbsp;missing&nbsp;anything&nbsp;else&nbsp;wrt&nbsp;this&nbsp;problem?&nbsp;I&nbsp;understand&nbsp;that&nbsp;it&nbsp;may&nbsp;be&nbsp;impossible&nbsp;to&nbsp;find&nbsp;the&nbsp;cause&nbsp;of&nbsp;this&nbsp;with&nbsp;this&nbsp;little&nbsp;information&nbsp;unless&nbsp;anyone&nbsp;has&nbsp;seen&nbsp;anything&nbsp;similar.&nbsp;I&nbsp;am&nbsp;ready&nbsp;to&nbsp;supply&nbsp;more&nbsp;information&nbsp;that&nbsp;can&nbsp;help&nbsp;find&nbsp;the&nbsp;cause&nbsp;of&nbsp;this.&lt;br&gt;<br>
&lt;br&gt;<br>

</tt>
