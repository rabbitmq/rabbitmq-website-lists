<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;I&amp;#39;ve&nbsp;spoken&nbsp;to&nbsp;Ben&nbsp;about&nbsp;this&nbsp;topic&nbsp;in&nbsp;the&nbsp;past,&nbsp;and&nbsp;he&nbsp;advised&nbsp;me&nbsp;to&nbsp;open&nbsp;an&nbsp;new&nbsp;topic&nbsp;on&nbsp;it,&nbsp;which&nbsp;is&nbsp;what&nbsp;I&amp;#39;m&nbsp;doing.&lt;br&gt;&lt;br&gt;In&nbsp;the&nbsp;MQ&nbsp;world&nbsp;(IIRC)&nbsp;there&nbsp;is&nbsp;an&nbsp;administration&nbsp;API&nbsp;through&nbsp;which&nbsp;one&nbsp;can&nbsp;do&nbsp;virtually&nbsp;anything&nbsp;that&nbsp;one&nbsp;can&nbsp;do&nbsp;using&nbsp;the&nbsp;command&nbsp;runmqsc.&nbsp;I&nbsp;believe&nbsp;that&nbsp;RabbitMQ&nbsp;really,&nbsp;really&nbsp;needs&nbsp;something&nbsp;similar.&nbsp;When&nbsp;I&nbsp;could&nbsp;not&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;delete&nbsp;a&nbsp;no-longer&nbsp;needed&nbsp;permanent&nbsp;queue&nbsp;using&nbsp;rabbitmqctl,&nbsp;I&nbsp;wrote&nbsp;a&nbsp;simple&nbsp;Erlang&nbsp;module&nbsp;(source&nbsp;code&nbsp;attached),&nbsp;which&nbsp;I&nbsp;named&nbsp;rbmq_admin,&nbsp;that&nbsp;makes&nbsp;available&nbsp;a&nbsp;number&nbsp;of&nbsp;administrative&nbsp;RabbitMQ&nbsp;commands.&lt;br&gt;<br>
&lt;br&gt;This&nbsp;exports&nbsp;the&nbsp;following&nbsp;Erlang&nbsp;functions:&lt;br&gt;<br>
&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;stop/1,&nbsp;stop_app/1,&nbsp;start_app/1,&nbsp;reset/1,&nbsp;force_reset/1,&nbsp;cluster/2,&nbsp;status/1,&nbsp;add_user/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;delete_user/2,&nbsp;change_password/3,&nbsp;list_users/1,&nbsp;add_vhost/2,&nbsp;delete_vhost/2,&nbsp;list_vhosts/1,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;map_user_vhost/3,&nbsp;unmap_user_vhost/3,&nbsp;list_user_vhosts/2,&nbsp;list_vhost_users/2,&nbsp;add_realm/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;delete_realm/3,&nbsp;list_realms/2,&nbsp;set_permissions/5,&nbsp;list_permissions/3,&nbsp;list_queues/1,&nbsp;delete_queue/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;permission_list/1&lt;/span&gt;&lt;br&gt;&lt;br&gt;With&nbsp;these,&nbsp;I&nbsp;can&nbsp;do&nbsp;just&nbsp;about&nbsp;anything&nbsp;I&nbsp;need&nbsp;to&nbsp;administer&nbsp;RabbitMQ.&nbsp;It&nbsp;uses&nbsp;rpc:call()&nbsp;to&nbsp;communicate&nbsp;with&nbsp;the&nbsp;Rabbit&nbsp;node,&nbsp;so&nbsp;it&amp;#39;s&nbsp;usable&nbsp;across&nbsp;nodes,&nbsp;subject&nbsp;to&nbsp;Erlang&nbsp;features&nbsp;like&nbsp;cookies&nbsp;and&nbsp;-sname/-name&nbsp;usage.&nbsp;I&nbsp;use&nbsp;it&nbsp;to&nbsp;create&nbsp;realms,&nbsp;vhosts,&nbsp;users,&nbsp;and&nbsp;so&nbsp;on&nbsp;using&nbsp;Erlang.&nbsp;I&nbsp;even&nbsp;wrote&nbsp;a&nbsp;simple&nbsp;Yaws&nbsp;web&nbsp;page&nbsp;that&nbsp;lists&nbsp;all&nbsp;the&nbsp;queues&nbsp;on&nbsp;a&nbsp;given&nbsp;node&nbsp;and&nbsp;vhost,&nbsp;together&nbsp;with&nbsp;how&nbsp;many&nbsp;messages&nbsp;are&nbsp;outstanding&nbsp;on&nbsp;the&nbsp;queue&nbsp;and&nbsp;how&nbsp;many&nbsp;consumers&nbsp;are&nbsp;attached.&nbsp;With&nbsp;the&nbsp;wrapper,&nbsp;it&amp;#39;s&nbsp;fairly&nbsp;trivial&nbsp;to&nbsp;do.&lt;br&gt;<br>
<br>
&lt;br&gt;Now&nbsp;the&nbsp;weakness&nbsp;of&nbsp;this&nbsp;approach&nbsp;is&nbsp;that&nbsp;these&nbsp;commands&nbsp;are&nbsp;really&nbsp;just&nbsp;a&nbsp;thin&nbsp;wrapper&nbsp;over&nbsp;functions&nbsp;exported&nbsp;by&nbsp;the&nbsp;following&nbsp;RabbitMQ&nbsp;modules:&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;rabbit,&nbsp;rabbit_mnesia,&nbsp;rabbit_access_control,&nbsp;rabbit_realm,&nbsp;and&nbsp;rabbit_amqqueue.&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;This&nbsp;has&nbsp;the&nbsp;following&nbsp;shortcomings:&lt;br&gt;&lt;ol&gt;&lt;li&gt;It&nbsp;is&nbsp;intimately&nbsp;tied&nbsp;to&nbsp;rabbit&nbsp;internal&nbsp;APIs.&nbsp;Any&nbsp;change&nbsp;to&nbsp;the&nbsp;APIs,&nbsp;even&nbsp;just&nbsp;for&nbsp;the&nbsp;sake&nbsp;of&nbsp;refactoring,&nbsp;will&nbsp;break&nbsp;this.&lt;/li&gt;&lt;li&gt;It&nbsp;uses&nbsp;internal&nbsp;formats&nbsp;(e.g.&nbsp;tuples)&nbsp;returned&nbsp;by&nbsp;the&nbsp;API,&nbsp;which&nbsp;also&nbsp;tightly&nbsp;couples&nbsp;it&nbsp;to&nbsp;the&nbsp;internals.&lt;/li&gt;<br>
<br>
&lt;li&gt;It&nbsp;is&nbsp;non-standard.&lt;/li&gt;&lt;li&gt;It&amp;#39;s&nbsp;only&nbsp;available&nbsp;in&nbsp;Erlang.&lt;/li&gt;&lt;/ol&gt;For&nbsp;me,&nbsp;these&nbsp;are&nbsp;not&nbsp;huge&nbsp;issues&nbsp;right&nbsp;now&nbsp;(until&nbsp;they&nbsp;change&nbsp;the&nbsp;internals&nbsp;:).&nbsp;However,&nbsp;if&nbsp;there&nbsp;is&nbsp;to&nbsp;be&nbsp;a&nbsp;standard&nbsp;RabbitMQ&nbsp;Admin&nbsp;API,&nbsp;Ben&nbsp;and&nbsp;his&nbsp;colleagues&nbsp;will&nbsp;need&nbsp;to&nbsp;implement&nbsp;it&nbsp;and&nbsp;release&nbsp;it&nbsp;officially.&nbsp;We&nbsp;can&nbsp;help&nbsp;by&nbsp;defining&nbsp;what&nbsp;we&nbsp;would&nbsp;like&nbsp;to&nbsp;see&nbsp;in&nbsp;it.&lt;br&gt;<br>
<br>
&lt;br&gt;What&nbsp;this&nbsp;topic&nbsp;hopes&nbsp;to&nbsp;achieve&nbsp;is&nbsp;to&nbsp;(a)&nbsp;gauge&nbsp;the&nbsp;interest&nbsp;in&nbsp;the&nbsp;RabbitMQ&nbsp;community&nbsp;for&nbsp;something&nbsp;like&nbsp;this,&nbsp;and&nbsp;(b)&nbsp;if&nbsp;there&nbsp;is&nbsp;enough&nbsp;interest,&nbsp;gather&nbsp;requirements&nbsp;--&nbsp;or&nbsp;even&nbsp;just&nbsp;a&nbsp;wish&nbsp;list&nbsp;--&nbsp;from&nbsp;the&nbsp;community.&nbsp;The&nbsp;wrapper&nbsp;I&nbsp;wrote&nbsp;and&nbsp;this&nbsp;post&nbsp;could&nbsp;be&nbsp;a&nbsp;starting&nbsp;point&nbsp;for&nbsp;this&nbsp;discussion.&lt;br&gt;<br>
<br>
&lt;br&gt;The&nbsp;API&nbsp;would&nbsp;require&nbsp;at&nbsp;least&nbsp;the&nbsp;following:&lt;br&gt;&lt;ol&gt;&lt;li&gt;It&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;available&nbsp;in&nbsp;multiple&nbsp;languages,&nbsp;to&nbsp;support&nbsp;the&nbsp;multiple&nbsp;clients&nbsp;(e.g.&nbsp;Java,&nbsp;.NET,&nbsp;Erlang).&nbsp;Hopefully&nbsp;it&nbsp;could&nbsp;be&nbsp;defined&nbsp;in&nbsp;such&nbsp;a&nbsp;way&nbsp;that&nbsp;one&nbsp;language-agnostic&nbsp;manual&nbsp;could&nbsp;be&nbsp;written&nbsp;for&nbsp;all&nbsp;the&nbsp;languages,&nbsp;together&nbsp;with&nbsp;short&nbsp;language-specific&nbsp;chapters&nbsp;to&nbsp;clarify&nbsp;exact&nbsp;usage&nbsp;for&nbsp;that&nbsp;language&nbsp;binding.&lt;br&gt;<br>
<br>
&lt;/li&gt;&lt;li&gt;The&nbsp;formats&nbsp;of&nbsp;data&nbsp;passed&nbsp;to&nbsp;and&nbsp;returned&nbsp;from&nbsp;the&nbsp;API&nbsp;would&nbsp;have&nbsp;to&nbsp;become&nbsp;cast&nbsp;in&nbsp;concrete.&nbsp;For&nbsp;example,&nbsp;at&nbsp;the&nbsp;moment&nbsp;a&nbsp;list&nbsp;of&nbsp;queues&nbsp;returned&nbsp;by&nbsp;rabbit_amqqueue:stat_all/0&nbsp;is&nbsp;in&nbsp;this&nbsp;format:&lt;br&gt;[&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;{ok,{resource,&amp;lt;&amp;lt;&amp;quot;resource&nbsp;name&amp;quot;&amp;gt;&amp;gt;,queue,&amp;lt;&amp;lt;&amp;quot;queue&nbsp;name&amp;quot;&amp;gt;&amp;gt;},&nbsp;NumMsgs,NumConsumers},...]&lt;/span&gt;.&nbsp;A&nbsp;canonical&nbsp;format&nbsp;for&nbsp;this&nbsp;(and&nbsp;all&nbsp;the&nbsp;others)&nbsp;needs&nbsp;to&nbsp;be&nbsp;defined,&nbsp;which&nbsp;won&amp;#39;t&nbsp;change&nbsp;(or&nbsp;can&nbsp;change&nbsp;in&nbsp;a&nbsp;non-breaking&nbsp;way),&nbsp;even&nbsp;if&nbsp;there&nbsp;are&nbsp;internal&nbsp;RabbitMQ&nbsp;changes.&nbsp;Preferably,&nbsp;the&nbsp;data&nbsp;formats&nbsp;should&nbsp;be&nbsp;extensible&nbsp;so&nbsp;that&nbsp;new&nbsp;data&nbsp;points&nbsp;can&nbsp;easily&nbsp;be&nbsp;added&nbsp;that&nbsp;will&nbsp;not&nbsp;break&nbsp;existing&nbsp;code.&nbsp;How&nbsp;to&nbsp;do&nbsp;this&nbsp;across&nbsp;multiple&nbsp;languages&nbsp;is&nbsp;a&nbsp;good&nbsp;question,&nbsp;unless&nbsp;a&nbsp;language-agnostic&nbsp;format&nbsp;such&nbsp;as&nbsp;XML&nbsp;(heavy)&nbsp;or&nbsp;JSON&nbsp;(haven&amp;#39;t&nbsp;used&nbsp;it)&nbsp;or&nbsp;something&nbsp;similar&nbsp;is&nbsp;used.&nbsp;I&nbsp;expect&nbsp;there&nbsp;will&nbsp;be&nbsp;much&nbsp;debate&nbsp;about&nbsp;this.&lt;br&gt;<br>
<br>
&lt;/li&gt;&lt;li&gt;It&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;powerful&nbsp;enough&nbsp;to&nbsp;do&nbsp;most&nbsp;or&nbsp;all&nbsp;administrative&nbsp;tasks.&nbsp;Again,&nbsp;the&nbsp;list&nbsp;of&nbsp;functions&nbsp;above&nbsp;could&nbsp;be&nbsp;a&nbsp;starting&nbsp;point.&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;I&nbsp;hope&nbsp;this&nbsp;is&nbsp;of&nbsp;interest.&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;Edwin&nbsp;Fine&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jul&nbsp;16,&nbsp;2008&nbsp;at&nbsp;6:55&nbsp;AM,&nbsp;Ben&nbsp;Hood&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
Michael,&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
On&nbsp;Wed,&nbsp;Jul&nbsp;16,&nbsp;2008&nbsp;at&nbsp;10:44&nbsp;AM,&nbsp;Tony&nbsp;Garnock-Jones&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tonyg@lshift.net&quot;&nbsp;target=&quot;_blank&quot;&gt;tonyg@lshift.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hi&nbsp;Michael,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Michael&nbsp;Arnoldus&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Speaking&nbsp;of&nbsp;which&nbsp;-&nbsp;if&nbsp;it&nbsp;should&nbsp;happen&nbsp;that&nbsp;I&nbsp;one&nbsp;late&nbsp;night&nbsp;are&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;finding&nbsp;myself&nbsp;sorely&nbsp;missing&nbsp;working&nbsp;in&nbsp;erlang&nbsp;to&nbsp;the&nbsp;degree&nbsp;that&nbsp;I&amp;#39;d&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;like&nbsp;to&nbsp;experiment&nbsp;with&nbsp;this&nbsp;-&nbsp;do&nbsp;you&nbsp;have&nbsp;any&nbsp;docs&nbsp;or&nbsp;just&nbsp;pointers&nbsp;to&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;how&nbsp;to&nbsp;receive&nbsp;and&nbsp;send&nbsp;AMQP&nbsp;from&nbsp;inside&nbsp;erlang?&nbsp;I&nbsp;guess&nbsp;using&nbsp;the&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;erlang&nbsp;AMQP&nbsp;client&nbsp;to&nbsp;let&nbsp;the&nbsp;server&nbsp;talk&nbsp;to&nbsp;itself&nbsp;isn&amp;#39;t&nbsp;exactly&nbsp;the&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;right&nbsp;approach&nbsp;...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Can&nbsp;you&nbsp;elaborate&nbsp;on&nbsp;why&nbsp;using&nbsp;the&nbsp;Erlang&nbsp;client&nbsp;to&nbsp;let&nbsp;the&nbsp;*server&lt;br&gt;<br>
speak&nbsp;to&nbsp;itself*&nbsp;may&nbsp;the&nbsp;wrong&nbsp;approach?&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;Tony&nbsp;has&nbsp;pointed&nbsp;out&nbsp;in&nbsp;the&nbsp;previous&nbsp;post,&nbsp;you&nbsp;can&nbsp;use&nbsp;the&nbsp;internal&lt;br&gt;<br>
rabbit&nbsp;API&nbsp;to&nbsp;send&nbsp;and&nbsp;receive&nbsp;messages,&nbsp;but&nbsp;this&nbsp;means&nbsp;that&nbsp;you&nbsp;tie&lt;br&gt;<br>
yourself&nbsp;in&nbsp;the&nbsp;internals&nbsp;of&nbsp;Rabbit,&nbsp;which&nbsp;*may*&nbsp;change&nbsp;over&nbsp;time.&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Ben&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;The&nbsp;great&nbsp;enemy&nbsp;of&nbsp;the&nbsp;truth&nbsp;is&nbsp;very&nbsp;often&nbsp;not&nbsp;the&nbsp;lie&nbsp;--&nbsp;deliberate,&nbsp;contrived&nbsp;and&nbsp;dishonest,&nbsp;but&nbsp;the&nbsp;myth,&nbsp;persistent,&nbsp;persuasive,&nbsp;and&nbsp;unrealistic.&nbsp;Belief&nbsp;in&nbsp;myths&nbsp;allows&nbsp;the&nbsp;comfort&nbsp;of&nbsp;opinion&nbsp;without&nbsp;the&nbsp;discomfort&nbsp;of&nbsp;thought.&lt;br&gt;<br>
<br>
John&nbsp;F.&nbsp;Kennedy&nbsp;35th&nbsp;president&nbsp;of&nbsp;US&nbsp;1961-1963&nbsp;(1917&nbsp;-&nbsp;1963)<br>
&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;The&nbsp;great&nbsp;enemy&nbsp;of&nbsp;the&nbsp;truth&nbsp;is&nbsp;very&nbsp;often&nbsp;not&nbsp;the&nbsp;lie&nbsp;--&nbsp;deliberate,&nbsp;contrived&nbsp;and&nbsp;dishonest,&nbsp;but&nbsp;the&nbsp;myth,&nbsp;persistent,&nbsp;persuasive,&nbsp;and&nbsp;unrealistic.&nbsp;Belief&nbsp;in&nbsp;myths&nbsp;allows&nbsp;the&nbsp;comfort&nbsp;of&nbsp;opinion&nbsp;without&nbsp;the&nbsp;discomfort&nbsp;of&nbsp;thought.&lt;br&gt;<br>
John&nbsp;F.&nbsp;Kennedy&nbsp;35th&nbsp;president&nbsp;of&nbsp;US&nbsp;1961-1963&nbsp;(1917&nbsp;-&nbsp;1963)<br>

</tt>
