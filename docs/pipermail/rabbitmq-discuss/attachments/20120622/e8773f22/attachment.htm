<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Software&nbsp;version:&nbsp;2.8.2&lt;/div&gt;&lt;div&gt;The&nbsp;cluster&nbsp;has&nbsp;been &lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px;white-space:nowrap;background-color:rgb(255,255,255)&quot;&gt;stressed&lt;/span&gt; with&nbsp;1000&nbsp;writers&nbsp;and&nbsp;100&nbsp;readers.&nbsp;Message&nbsp;size&nbsp;is&nbsp;100kB.&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;Test&nbsp;configuration:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;u&gt;readers&nbsp;node&nbsp;#1&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;test.ConnectionPerWorker=true&lt;/div&gt;&lt;div&gt;test.WritersCount=0&lt;/div&gt;&lt;div&gt;test.ReadersCount=33&lt;/div&gt;&lt;div&gt;test.Durable=true&lt;/div&gt;<br>
&lt;div&gt;test.QueuesCount=1&lt;/div&gt;&lt;div&gt;test.AutoAck=false&lt;/div&gt;&lt;div&gt;test.ExchangeType=direct&lt;/div&gt;&lt;div&gt;test.QueueNamePrefix=direct&lt;/div&gt;&lt;/div&gt;&lt;div&gt;test.Host=arch-task-mq-7.atm&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;u&gt;readers&nbsp;node&nbsp;#2&lt;/u&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;test.ConnectionPerWorker=true&lt;/div&gt;&lt;div&gt;test.WritersCount=0&lt;/div&gt;&lt;div&gt;test.ReadersCount=33&lt;/div&gt;&lt;div&gt;test.Durable=true&lt;/div&gt;&lt;div&gt;test.QueuesCount=1&lt;/div&gt;&lt;div&gt;test.AutoAck=false&lt;/div&gt;&lt;div&gt;test.ExchangeType=direct&lt;/div&gt;<br>
&lt;div&gt;test.QueueNamePrefix=direct&lt;/div&gt;&lt;div&gt;test.Host=arch-task-mq-8.atm&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;u&gt;readers&nbsp;node&nbsp;#3&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;test.ConnectionPerWorker=true&lt;/div&gt;&lt;div&gt;test.WritersCount=0&lt;/div&gt;&lt;div&gt;test.ReadersCount=33&lt;/div&gt;<br>
&lt;div&gt;test.Durable=true&lt;/div&gt;&lt;div&gt;test.QueuesCount=1&lt;/div&gt;&lt;div&gt;test.AutoAck=false&lt;/div&gt;&lt;div&gt;test.ExchangeType=direct&lt;/div&gt;&lt;div&gt;test.QueueNamePrefix=direct&lt;/div&gt;&lt;div&gt;test.Host=arch-task-mq-8.atm&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;u&gt;writers&nbsp;node&nbsp;#4&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;test.ConnectionPerWorker=true&lt;/div&gt;&lt;div&gt;test.WritersCount=333&lt;/div&gt;&lt;div&gt;test.ReadersCount=0&lt;/div&gt;&lt;div&gt;test.Durable=true&lt;/div&gt;&lt;div&gt;test.QueuesCount=1&lt;/div&gt;&lt;div&gt;test.AutoAck=false&lt;/div&gt;<br>
&lt;div&gt;test.ExchangeType=direct&lt;/div&gt;&lt;div&gt;test.QueueNamePrefix=direct&lt;/div&gt;&lt;div&gt;test.BodySize=102400&lt;/div&gt;&lt;div&gt;#&nbsp;available&nbsp;units:&nbsp;s(seconds),&nbsp;m(minutes),&nbsp;h(hours)&nbsp;d(days)&lt;/div&gt;&lt;div&gt;test.TestDuration=3h&lt;/div&gt;&lt;div&gt;test.Host=arch-task-mq-8.atm&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;writers&nbsp;node&nbsp;#5&lt;/div&gt;&lt;div&gt;&lt;div&gt;test.ConnectionPerWorker=true&lt;/div&gt;&lt;div&gt;test.WritersCount=333&lt;/div&gt;&lt;div&gt;test.ReadersCount=0&lt;/div&gt;&lt;div&gt;test.Durable=true&lt;/div&gt;&lt;div&gt;test.QueuesCount=1&lt;/div&gt;&lt;div&gt;test.AutoAck=false&lt;/div&gt;<br>
&lt;div&gt;test.ExchangeType=direct&lt;/div&gt;&lt;div&gt;test.QueueNamePrefix=direct&lt;/div&gt;&lt;div&gt;test.BodySize=102400&lt;/div&gt;&lt;div&gt;#&nbsp;available&nbsp;units:&nbsp;s(seconds),&nbsp;m(minutes),&nbsp;h(hours)&nbsp;d(days)&lt;/div&gt;&lt;div&gt;test.TestDuration=3h&lt;/div&gt;&lt;div&gt;test.Host=arch-task-mq-7.atm&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;writers&nbsp;node&nbsp;#6&lt;/div&gt;&lt;div&gt;&lt;div&gt;test.ConnectionPerWorker=true&lt;/div&gt;&lt;div&gt;test.WritersCount=334&lt;/div&gt;&lt;div&gt;test.ReadersCount=0&lt;/div&gt;&lt;div&gt;test.Durable=true&lt;/div&gt;&lt;div&gt;test.QueuesCount=1&lt;/div&gt;&lt;div&gt;test.AutoAck=false&lt;/div&gt;<br>
&lt;div&gt;test.ExchangeType=direct&lt;/div&gt;&lt;div&gt;test.QueueNamePrefix=direct&lt;/div&gt;&lt;div&gt;test.BodySize=102400&lt;/div&gt;&lt;div&gt;#&nbsp;available&nbsp;units:&nbsp;s(seconds),&nbsp;m(minutes),&nbsp;h(hours)&nbsp;d(days)&lt;/div&gt;&lt;div&gt;test.TestDuration=3h&lt;/div&gt;&lt;div&gt;test.Host=arch-task-mq-8.atm&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;u&gt;Actual&nbsp;tests&nbsp;state:&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Running&nbsp;worker-1000w-100r-100kB&lt;/div&gt;&lt;div&gt;Preparing&nbsp;tests&nbsp;on&nbsp;arch-task-mq-1&lt;/div&gt;&lt;div&gt;Preparing&nbsp;tests&nbsp;on&nbsp;arch-task-mq-2&lt;/div&gt;&lt;div&gt;Preparing&nbsp;tests&nbsp;on&nbsp;arch-task-mq-3&lt;/div&gt;<br>
&lt;div&gt;Preparing&nbsp;tests&nbsp;on&nbsp;arch-task-mq-4&lt;/div&gt;&lt;div&gt;Preparing&nbsp;tests&nbsp;on&nbsp;arch-task-mq-5&lt;/div&gt;&lt;div&gt;Preparing&nbsp;tests&nbsp;on&nbsp;arch-task-mq-6&lt;/div&gt;&lt;div&gt;Preparations&nbsp;done,&nbsp;starting&nbsp;testing&nbsp;procedure&lt;/div&gt;&lt;div&gt;Start&nbsp;tests&nbsp;on&nbsp;arch-task-mq-1&lt;/div&gt;<br>
&lt;div&gt;Start&nbsp;tests&nbsp;on&nbsp;arch-task-mq-2&lt;/div&gt;&lt;div&gt;Start&nbsp;tests&nbsp;on&nbsp;arch-task-mq-3&lt;/div&gt;&lt;div&gt;Start&nbsp;tests&nbsp;on&nbsp;arch-task-mq-4&lt;/div&gt;&lt;div&gt;Start&nbsp;tests&nbsp;on&nbsp;arch-task-mq-5&lt;/div&gt;&lt;div&gt;Start&nbsp;tests&nbsp;on&nbsp;arch-task-mq-6&lt;/div&gt;&lt;div&gt;Waiting&nbsp;for&nbsp;tests&nbsp;to&nbsp;finish&lt;/div&gt;<br>
&lt;div&gt;Tests&nbsp;done&nbsp;on&nbsp;arch-task-mq-5&lt;/div&gt;&lt;div&gt;Tests&nbsp;done&nbsp;on&nbsp;arch-task-mq-6&lt;/div&gt;&lt;div&gt;Tests&nbsp;done&nbsp;on&nbsp;arch-task-mq-4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;readers&nbsp;has&nbsp;been&nbsp;disconnected&nbsp;by&nbsp;the&nbsp;server&nbsp;ahead&nbsp;of&nbsp;time.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;u&gt;Actual&nbsp;cluster&nbsp;state&nbsp;(data&nbsp;from&nbsp;Management&nbsp;Plugin&nbsp;view):&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Name&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; File&nbsp;descriptors&nbsp;(?)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Socket&nbsp;descriptors&nbsp;(?)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Erlang&nbsp;processes&nbsp; &nbsp; &nbsp; Memory&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Disk&nbsp;space&nbsp; &nbsp;  Uptime&nbsp; &nbsp;  Type&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (used&nbsp;/&nbsp;available)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  (used&nbsp;/&nbsp;available)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (used&nbsp;/&nbsp;available)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;rabit@arch-task-mq-7&nbsp; &nbsp; 392&nbsp;/&nbsp;1024&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  334&nbsp;/&nbsp;829&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2885&nbsp;/&nbsp;1048576&nbsp; &nbsp; &nbsp; &nbsp; 540.2MB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 49.6GB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 21h&nbsp;14m&nbsp; Disc&nbsp;Stats&nbsp;*&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.6GB&nbsp;high&nbsp;watermark 4.0GB&nbsp;low&nbsp;watermark&lt;/div&gt;&lt;div&gt;&lt;div&gt;rabbit@arch-task-mq-8&nbsp; 692&nbsp;/&nbsp;1024&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;668&nbsp;/&nbsp;829&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  5522&nbsp;/&nbsp;1048576&nbsp; &nbsp; &nbsp; &nbsp; 1.8GB&nbsp;(?)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 46.1GB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 21h&nbsp;16m&nbsp; RAM&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.6GB&nbsp;high&nbsp;watermark 4.0GB&nbsp;low&nbsp;watermark&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;div&gt;Number&nbsp;of&nbsp;processes&nbsp;is&nbsp;growing&nbsp;all&nbsp;the&nbsp;time&nbsp;even&nbsp;though&nbsp;no&nbsp;messages&nbsp;are&nbsp;not&nbsp;published&nbsp;or&nbsp;received.&lt;/div&gt;&lt;div&gt;All&nbsp;publishers has&nbsp;been&nbsp;blocked.&nbsp;After&nbsp;some&nbsp;time&nbsp;I&nbsp;killed&nbsp;the&nbsp;publisher processes,&nbsp;but&nbsp;RabbitMQ&nbsp;still&nbsp;sees&nbsp;them&nbsp;as&nbsp;connected&nbsp;and&nbsp;blocked.&nbsp;:)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Some&nbsp;logs:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;mkiedys@arch-task-mq-8:/var/log/rabbitmq$&nbsp;cat&nbsp;rabbit@arch-task-mq-8.log&nbsp;|grep&nbsp;vm_memory_high|tail&nbsp;-n&nbsp;20&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1709148224&nbsp;allowed:1717986918&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2135174984&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1593121728&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2043534608&nbsp;allowed:1717986918&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1681947128&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2088225952&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1710494800&nbsp;allowed:1717986918&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2208875080&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1713902032&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2122564032&nbsp;allowed:1717986918&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1663616264&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2098909664&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1712666136&nbsp;allowed:1717986918&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2088814360&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1640273568&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2116966952&nbsp;allowed:1717986918&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1715305176&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2186572648&nbsp;allowed:1717986918&lt;/div&gt;&lt;div&gt;vm_memory_high_watermark&nbsp;clear.&nbsp;Memory&nbsp;used:1716620504&nbsp;allowed:1717986918&lt;/div&gt;<br>
&lt;div&gt;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:2180898440&nbsp;allowed:1717986918&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;mkiedys@arch-task-mq-8:/var/log/rabbitmq$&nbsp;cat&nbsp;rabbit@arch-task-mq-8.log&nbsp;|grep&nbsp;vm_memory_high|wc&nbsp;-l&lt;/div&gt;&lt;div&gt;2935&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Why&nbsp;does&nbsp;the&nbsp;server&nbsp;consumes&nbsp;more&nbsp;memory&nbsp;than&nbsp;1.6GB&nbsp;limit?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;MK&lt;/div&gt;<br>

</tt>
