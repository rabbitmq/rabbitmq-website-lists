<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Arial&quot;&gt;Hi,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;have&nbsp;the&nbsp;following&nbsp;environment:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Server:&nbsp;(Language:&nbsp;Erlang,&nbsp;Version:&nbsp;2.7.1)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Broker:&nbsp;(Version:&nbsp;3.1.5)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Client:&nbsp;(Language:&nbsp;Grails/Groovy,&nbsp;Version:&nbsp;2.8.4)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;am&nbsp;using&nbsp;RPC&nbsp;functionality&nbsp;over&nbsp;the&nbsp;broker.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;queue&nbsp;is&nbsp;created&nbsp;by&nbsp;the&nbsp;server&nbsp;or&nbsp;the&nbsp;client&nbsp;has&nbsp;the&nbsp;following<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;configuration:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;code&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;auto&nbsp;delete&lt;/code&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(68,68,68);&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;code&nbsp;style=&quot;text-align:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;justify;&quot;&gt;durable&lt;/code&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(68,68,68);&quot;&gt;&amp;nbsp;and&amp;nbsp;&lt;/span&gt;&lt;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;exclusive&lt;/code&gt;&lt;span&nbsp;style=&quot;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(68,68,68);&quot;&gt;&amp;nbsp;attributes&nbsp;are&nbsp;set&nbsp;to&nbsp;&lt;/span&gt;&lt;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;false&lt;/code&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;problem:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;client&nbsp;and&nbsp;the&nbsp;server&nbsp;is&nbsp;not&nbsp;active&nbsp;and&nbsp;the&nbsp;broker&nbsp;restarts<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;queue&nbsp;does&nbsp;not&nbsp;survive&nbsp;the&nbsp;restart&nbsp;and&nbsp;it&nbsp;behaves&nbsp;as&nbsp;required.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;the&nbsp;client&nbsp;and&nbsp;the&nbsp;server&nbsp;is&nbsp;active&nbsp;and&nbsp;the&nbsp;broker&nbsp;restarts<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;broker&nbsp;change&nbsp;the&nbsp;queue&nbsp;durability&nbsp;to&lt;span&nbsp;style=&quot;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(68,68,68);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;code&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;durable&lt;/code&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(68,68,68);&quot;&gt;&nbsp;:&nbsp;&lt;/span&gt;true&nbsp;and&nbsp;it&nbsp;survives<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;restart.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;causes&nbsp;chaos&nbsp;with&nbsp;the&nbsp;server&nbsp;behaviour.&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;server&nbsp;tries&nbsp;to&nbsp;recover&nbsp;the&nbsp;connection&nbsp;and&nbsp;recreate&nbsp;the&nbsp;queue<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;configuration&nbsp;of&nbsp;&lt;code&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;auto<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete&lt;/code&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(68,68,68);&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;durable&lt;/code&gt;&lt;span&nbsp;style=&quot;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(68,68,68);&quot;&gt;&amp;nbsp;and&amp;nbsp;&lt;/span&gt;&lt;code&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;exclusive&lt;/code&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;color:&nbsp;rgb(68,68,68);&quot;&gt;&amp;nbsp;attributes&nbsp;are&nbsp;set&nbsp;to&nbsp;&lt;/span&gt;&lt;code<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style=&quot;text-align:&nbsp;justify;&quot;&gt;false.&nbsp;&lt;/code&gt;In&nbsp;turn&nbsp;the&nbsp;creation<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;queue&nbsp;to&nbsp;fails&nbsp;because&nbsp;of&nbsp;the&nbsp;changed&nbsp;durability.&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;Why&nbsp;does&nbsp;the&nbsp;broker&nbsp;change&nbsp;the&nbsp;durability<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;queue?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;Is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;the&nbsp;correct&nbsp;behaviour?&lt;/font&gt;&lt;/font&gt;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Any&nbsp;help&nbsp;or&nbsp;advice&nbsp;shall&nbsp;be&nbsp;highly&nbsp;appreciated.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thanks&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;--&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;src=&quot;cid:part1.02090200.06000902@econsys.co.za&quot;&nbsp;border=&quot;0&quot;&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
