<tt>
&lt;font&nbsp;size=&quot;2&quot;&gt;Hi&nbsp;all,&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;In&nbsp;a&nbsp;project&nbsp;I'm&nbsp;working&nbsp;on&nbsp;we&nbsp;set&nbsp;up&nbsp;a&nbsp;cluster&nbsp;of&nbsp;application&nbsp;nodes,&nbsp;each&nbsp;with&nbsp;RabbitMQ&nbsp;installed.&nbsp;Everybody&nbsp;can&nbsp;talk&nbsp;to&nbsp;everybody,&nbsp;and&nbsp;we&nbsp;can&nbsp;scale&nbsp;the&nbsp;number&nbsp;of&nbsp;nodes&nbsp;pretty&nbsp;easily.&amp;nbsp;&lt;/font&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;small;&nbsp;&quot;&gt;But&nbsp;on&nbsp;more&nbsp;than&nbsp;one&nbsp;occasion,&nbsp;we&nbsp;have&nbsp;seen&nbsp;mnesia&nbsp;become&nbsp;partitioned.&nbsp;You've&nbsp;seen&nbsp;this&nbsp;before:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;&lt;div&gt;&lt;b&nbsp;id=&quot;internal-source-marker_0.011038042372092605&quot;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;'Times&nbsp;New&nbsp;Roman';&nbsp;font-weight:&nbsp;normal;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Arial;&nbsp;background-color:&nbsp;transparent;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Mnesia('rabbit@app-6'):&nbsp;**&nbsp;ERROR&nbsp;**&nbsp;mnesia_event&nbsp;got&nbsp;{inconsistent_database,&nbsp;running_partitioned_network,&nbsp;'rabbit@app-5'}&lt;/font&gt;&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;best&nbsp;as&nbsp;we&nbsp;can&nbsp;tell,&nbsp;this&nbsp;is&nbsp;caused&nbsp;by&nbsp;temporary&nbsp;network&nbsp;outages,&nbsp;or&nbsp;possibly&nbsp;high-load&nbsp;conditions,&nbsp;or&nbsp;possibly&nbsp;the&nbsp;nexus&nbsp;of&nbsp;both.&nbsp;However&nbsp;it&nbsp;happens,&nbsp;you&nbsp;end&nbsp;up&nbsp;with&nbsp;one&nbsp;or&nbsp;more&nbsp;nodes&nbsp;down&nbsp;for&nbsp;the&nbsp;count&nbsp;with&nbsp;non-deterministic&nbsp;behavior&nbsp;(messages&nbsp;sent&nbsp;to&nbsp;that&nbsp;node&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;reach&nbsp;other&nbsp;nodes).&nbsp;It&nbsp;doesn't&nbsp;recover&nbsp;until&nbsp;you&nbsp;&lt;b&gt;manually&lt;/b&gt;&nbsp;stop_app/start_app.&nbsp;And&nbsp;if&nbsp;it&nbsp;happened&nbsp;to&nbsp;be&nbsp;a&nbsp;disc&nbsp;node,&nbsp;&lt;b&gt;rm&nbsp;-rf&nbsp;/var/lib/rabbitmq/mnesia/rabbitmq/*&lt;/b&gt;&nbsp;in&nbsp;between.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;a&nbsp;supposedly&nbsp;&quot;just&nbsp;works&quot;&nbsp;kind&nbsp;of&nbsp;service,&nbsp;that&nbsp;is&nbsp;just&nbsp;not&nbsp;good&nbsp;enough.&nbsp;I&nbsp;can't&nbsp;have&nbsp;my&nbsp;ops&nbsp;people&nbsp;rolling&nbsp;out&nbsp;of&nbsp;bed&nbsp;to&nbsp;take&nbsp;action&nbsp;every&nbsp;time&nbsp;there's&nbsp;a&nbsp;minor&nbsp;network&nbsp;glitch.&nbsp;So,&nbsp;I&nbsp;either&nbsp;need&nbsp;to&nbsp;provide&nbsp;a&nbsp;network&nbsp;that&nbsp;never&nbsp;becomes&nbsp;partitioned&nbsp;(does&nbsp;such&nbsp;a&nbsp;network&nbsp;exist?&nbsp;Certainly&nbsp;not&nbsp;at&nbsp;AWS!),&nbsp;or&nbsp;I&nbsp;need&nbsp;to&nbsp;drop&nbsp;clustering&nbsp;and&nbsp;have&nbsp;a&nbsp;single&nbsp;RabbitMQ&nbsp;server&nbsp;which&nbsp;won't&nbsp;scale,&nbsp;or&nbsp;I&nbsp;need&nbsp;to&nbsp;cobble&nbsp;together&nbsp;some&nbsp;kind&nbsp;of&nbsp;automated&nbsp;supervisor&nbsp;which&nbsp;is&nbsp;certain&nbsp;not&nbsp;to&nbsp;handle&nbsp;all&nbsp;cases,&nbsp;or&nbsp;I&nbsp;need&nbsp;to&nbsp;use&nbsp;a&nbsp;different&nbsp;messaging&nbsp;tool.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please,&nbsp;somebody&nbsp;dispute&nbsp;my&nbsp;conclusion&nbsp;because&nbsp;I&nbsp;would&nbsp;love&nbsp;to&nbsp;continue&nbsp;using&nbsp;RabbitMQ.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best&nbsp;regards,&lt;/div&gt;&lt;div&gt;Glade&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;
</tt>
