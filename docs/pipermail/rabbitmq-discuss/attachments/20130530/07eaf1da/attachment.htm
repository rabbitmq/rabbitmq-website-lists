<tt>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;TITLE&gt;Re:&nbsp;[rabbitmq-discuss]&nbsp;ConfirmSelect()&nbsp;overhead&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;FONT&nbsp;FACE=&quot;Lucida&nbsp;Grande&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Yeah,&nbsp;I&nbsp;was&nbsp;hoping&nbsp;to&nbsp;ensure&nbsp;guaranteed&nbsp;delivery&nbsp;simply,&nbsp;without&nbsp;caching&nbsp;messages&nbsp;for&nbsp;re-publishing,&nbsp;but&nbsp;looks&nbsp;like&nbsp;I&amp;#8217;ll&nbsp;have&nbsp;to&nbsp;add&nbsp;a&nbsp;thread&nbsp;and&nbsp;cache&nbsp;for&nbsp;doing&nbsp;this.&nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Is&nbsp;this&nbsp;the&nbsp;convention?&nbsp;&amp;nbsp;To&nbsp;cache&nbsp;the&nbsp;message&nbsp;with&nbsp;its&nbsp;sequence&nbsp;#,&nbsp;with&nbsp;another&nbsp;thread&nbsp;checking&nbsp;on&nbsp;the&nbsp;cache,&nbsp;attempting&nbsp;republish&nbsp;when&nbsp;Nacks&nbsp;received?&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
thx&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;5/30/13&nbsp;2:23&nbsp;PM,&nbsp;&amp;quot;Matthias&nbsp;Radestock&amp;quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;matthias@rabbitmq.com&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Lucida&nbsp;Grande&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Adam,&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;30/05/13&nbsp;18:12,&nbsp;Adam&nbsp;Morgan&nbsp;wrote:&lt;BR&gt;<br>
&amp;gt;&nbsp;Has&nbsp;anyone&nbsp;else&nbsp;done&nbsp;a&nbsp;test&nbsp;to&nbsp;determine&nbsp;the&nbsp;impact&nbsp;of&nbsp;enabling&lt;BR&gt;<br>
&amp;gt;&nbsp;confirmSelect()&nbsp;on&nbsp;publishing&nbsp;channels&nbsp;with&nbsp;respect&nbsp;to&nbsp;publishing&nbsp;rates?&lt;BR&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&amp;nbsp;In&nbsp;preliminary&nbsp;testing&nbsp;I&nbsp;have&nbsp;seen&nbsp;slower&nbsp;throughput&nbsp;by&nbsp;a&nbsp;ratio&nbsp;of&lt;BR&gt;<br>
&amp;gt;&nbsp;about&nbsp;40:1.&nbsp;&amp;nbsp;Is&nbsp;this&nbsp;in&nbsp;line&nbsp;with&nbsp;what&nbsp;others&nbsp;have&nbsp;seen?&lt;BR&gt;<br>
&lt;BR&gt;<br>
How&nbsp;are&nbsp;you&nbsp;using&nbsp;confirms?&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;you&nbsp;are&nbsp;waiting&nbsp;for&nbsp;a&nbsp;confirm&nbsp;after&nbsp;every&nbsp;single&nbsp;publish&nbsp;then&nbsp;things&lt;BR&gt;<br>
will&nbsp;go&nbsp;very&nbsp;slow&nbsp;indeed,&nbsp;since&nbsp;you&nbsp;are&nbsp;effectively&nbsp;making&nbsp;publish&lt;BR&gt;<br>
synchronous,&nbsp;taking&nbsp;in&nbsp;the&nbsp;entire&nbsp;round&nbsp;trip&nbsp;and&nbsp;processing&nbsp;latency,&lt;BR&gt;<br>
and,&nbsp;depending&nbsp;on&nbsp;the&nbsp;delivery&nbsp;mode,&nbsp;cost&nbsp;of&nbsp;writing&nbsp;to&nbsp;disk.&lt;BR&gt;<br>
&lt;BR&gt;<br>
So&nbsp;don't&nbsp;do&nbsp;that.&nbsp;Ideally&nbsp;applications&nbsp;should&nbsp;handle&nbsp;confirms&lt;BR&gt;<br>
asynchronously,&nbsp;decoupled&nbsp;from&nbsp;publishing.&nbsp;If&nbsp;that&nbsp;is&nbsp;too&nbsp;hard&nbsp;/&lt;BR&gt;<br>
impractical,&nbsp;at&nbsp;least&nbsp;batch&nbsp;the&nbsp;waiting&nbsp;for&nbsp;confirms,&nbsp;e.g.&nbsp;wait&nbsp;for&lt;BR&gt;<br>
confirms&nbsp;every&nbsp;n&nbsp;messages&nbsp;or&nbsp;n&nbsp;seconds.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Matthias.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/BLOCKQUOTE&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
