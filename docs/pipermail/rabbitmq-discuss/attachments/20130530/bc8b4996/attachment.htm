<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi&nbsp;Adam,&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;30&nbsp;May&nbsp;2013,&nbsp;at&nbsp;13:38,&nbsp;Adam&nbsp;Morgan&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
<br>
&lt;title&gt;AutoAck&nbsp;issue&lt;/title&gt;<br>
<br>
&lt;div&gt;<br>
&lt;font&nbsp;face=&quot;Lucida&nbsp;Grande&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt&quot;&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;implement&nbsp;guaranteed&nbsp;delivery&nbsp;in&nbsp;my&nbsp;system&nbsp;but&nbsp;am&nbsp;having&nbsp;issues&nbsp;around&nbsp;acknowledgements&nbsp;being&nbsp;sent&nbsp;automagically.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;ul&gt;&lt;li&gt;&lt;font&nbsp;face=&quot;Lucida&nbsp;Grande&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt&quot;&gt;I&nbsp;have&nbsp;turned&nbsp;on&nbsp;channel.confirmSelect()&nbsp;on&nbsp;publishing&nbsp;channel.<br>
&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font&nbsp;face=&quot;Lucida&nbsp;Grande&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt&quot;&gt;I&nbsp;have&nbsp;added&nbsp;my&nbsp;publisher&nbsp;as&nbsp;a&nbsp;ConfirmListener&nbsp;to&nbsp;the&nbsp;publishing&nbsp;channel.<br>
&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font&nbsp;face=&quot;Lucida&nbsp;Grande&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt&quot;&gt;I&nbsp;very&nbsp;clearly&nbsp;have&nbsp;autoAck=false&nbsp;in&nbsp;my&nbsp;basicConsume()&nbsp;call.&lt;br&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;font&nbsp;face=&quot;Lucida&nbsp;Grande&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt&quot;&gt;&lt;br&gt;<br>
Despite&nbsp;this,&nbsp;my&nbsp;publisher/ConfirmListener&nbsp;is&nbsp;receiving&nbsp;an&nbsp;ack&nbsp;as&nbsp;soon&nbsp;as&nbsp;my&nbsp;consumer&nbsp;receives&nbsp;the&nbsp;message.&nbsp;&amp;nbsp;Repeat,&nbsp;my&nbsp;consumer&nbsp;client&nbsp;has&nbsp;NOT&nbsp;yet&nbsp;called&nbsp;basicAck(),&nbsp;but&nbsp;my&nbsp;publisher/ConfirmListener&nbsp;callback&nbsp;is&nbsp;made.&nbsp;&amp;nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;something&nbsp;else&nbsp;I&nbsp;should&nbsp;be&nbsp;doing?&nbsp;&amp;nbsp;Is&nbsp;there&nbsp;other&nbsp;configuration&nbsp;I&nbsp;might&nbsp;be&nbsp;doing&nbsp;that&nbsp;would&nbsp;interfere&nbsp;with&nbsp;this?&nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;you're&nbsp;getting&nbsp;confused&nbsp;between&nbsp;confirms&nbsp;and&nbsp;ACKs.&nbsp;Confirms&nbsp;sent&nbsp;from&nbsp;the&nbsp;broker&nbsp;to&nbsp;a&nbsp;producer&nbsp;are&nbsp;orthogonal&nbsp;to&nbsp;ACKs&nbsp;sent&nbsp;from&nbsp;a&nbsp;consumer&nbsp;to&nbsp;the&nbsp;broker.&amp;nbsp;When&nbsp;the&nbsp;broker&nbsp;has&nbsp;accepted&nbsp;responsibility&nbsp;for&nbsp;a&nbsp;message,&nbsp;it&nbsp;will&nbsp;send&nbsp;a&nbsp;confirm&nbsp;_in&nbsp;the&nbsp;form&nbsp;of&nbsp;an&nbsp;ACK_&nbsp;to&nbsp;the&nbsp;publisher.&nbsp;Now&nbsp;&quot;accepted&nbsp;responsibility&quot;&nbsp;means&nbsp;various&nbsp;things&nbsp;depending&nbsp;on&nbsp;you&nbsp;configuration&nbsp;-&nbsp;see&nbsp;&lt;a&nbsp;href=&quot;https://www.rabbitmq.com/reliability.html&quot;&gt;https://www.rabbitmq.com/reliability.html&lt;/a&gt;&nbsp;for&nbsp;details&nbsp;-&nbsp;but&nbsp;in&nbsp;general,&nbsp;if&nbsp;the&nbsp;broker&nbsp;is&nbsp;able&nbsp;to&nbsp;immediately&nbsp;deliver&nbsp;a&nbsp;message&nbsp;to&nbsp;an&nbsp;active&nbsp;consumer,&nbsp;then&nbsp;it&nbsp;has&nbsp;certainly&nbsp;discharged&nbsp;it's&nbsp;responsibility&nbsp;&quot;to&nbsp;the&nbsp;producer&quot;&nbsp;for&nbsp;handling&nbsp;that&nbsp;message,&nbsp;therefore&nbsp;it&nbsp;sends&nbsp;a&nbsp;confirm&nbsp;(i.e.,&nbsp;an&nbsp;ACK)&nbsp;to&nbsp;the&nbsp;producer.&nbsp;This&nbsp;is&nbsp;completely&nbsp;independent&nbsp;of&nbsp;what&nbsp;the&nbsp;consumer&nbsp;does&nbsp;with&nbsp;the&nbsp;message&nbsp;-&nbsp;it&nbsp;might&nbsp;NACK/REJECT&nbsp;it&nbsp;but&nbsp;that's&nbsp;&quot;the&nbsp;broker's&nbsp;problem&nbsp;to&nbsp;handle&quot;&nbsp;and&nbsp;not&nbsp;the&nbsp;producer's.&nbsp;Once&nbsp;the&nbsp;broker&nbsp;sends&nbsp;a&nbsp;confirm,&nbsp;*it*&nbsp;is&nbsp;responsible&nbsp;for&nbsp;the&nbsp;message.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;you&nbsp;appear&nbsp;to&nbsp;be&nbsp;looking&nbsp;for&nbsp;is&nbsp;a&nbsp;kind&nbsp;of&nbsp;RPC&nbsp;(in&nbsp;terms&nbsp;of&nbsp;synchronicity)&nbsp;between&nbsp;producer&nbsp;and&nbsp;consumer,&nbsp;and&nbsp;/that/&nbsp;is&nbsp;not&nbsp;what&nbsp;messaging&nbsp;systems&nbsp;typically&nbsp;deliver,&nbsp;opting&nbsp;instead&nbsp;for&nbsp;a&nbsp;de-coupled&nbsp;view&nbsp;of&nbsp;the&nbsp;interaction&nbsp;via&nbsp;an&nbsp;intermediary&nbsp;(i.e.,&nbsp;the&nbsp;broker).&nbsp;Notably,&nbsp;even&nbsp;JMS&nbsp;transactions&nbsp;do&nbsp;*not*&nbsp;coordinate&nbsp;over&nbsp;both&nbsp;the&nbsp;producer&nbsp;and&nbsp;consumer,&nbsp;but&nbsp;handle&nbsp;only&nbsp;one&nbsp;perspective&nbsp;or&nbsp;the&nbsp;other.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Tim&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
