<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Rabbit&nbsp;version&nbsp;in&nbsp;use&nbsp;is:&nbsp;RabbitMQ&nbsp;3.2.1,&nbsp;Erlang&nbsp;R14B04&lt;br&gt;&lt;br&gt;rabbitmqctl&nbsp;report&nbsp;on &lt;div&gt;upstream:&nbsp;&lt;a&nbsp;href=&quot;http://pastebin.com/PNqTziGk&quot;&gt;http://pastebin.com/PNqTziGk&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&quot;slave&quot;&nbsp;server: &lt;a&nbsp;href=&quot;http://pastebin.com/4L6JFsiW&quot;&gt;http://pastebin.com/4L6JFsiW&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;I&nbsp;have&nbsp;this&nbsp;in&nbsp;the&nbsp;exchanges&nbsp;list&nbsp;on&nbsp;the&nbsp;upstream:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;table&nbsp;class=&quot;&quot;&nbsp;style=&quot;border-collapse:collapse;border-width:1px;border-bottom-style:solid;border-bottom-color:rgb(204,204,204);margin-bottom:0px;font-family:Verdana,sans-serif&quot;&gt;<br>
<br>
&lt;tbody&gt;&lt;tr&nbsp;class=&quot;&quot;&nbsp;style=&quot;color:rgb(170,170,170)&quot;&gt;&lt;td&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(248,248,248)),to(rgb(255,255,255)))&quot;&gt;<br>
<br>
&lt;a&nbsp;href=&quot;http://rabbit1:15672/#/exchanges/%2F/federation%3A%20users%20-%3E%20rabbit%40rabbit3.c.rabbit-magic.internal%20B&quot;&nbsp;title=&quot;This&nbsp;is&nbsp;used&nbsp;internally&nbsp;by&nbsp;the&nbsp;federation&nbsp;mechanism.&quot;&nbsp;style=&quot;display:block;width:408px;color:rgb(170,170,170);font-weight:bold;text-decoration:none&quot;&gt;federation:&nbsp;users&nbsp;-&gt;&nbsp;rabbit@rabbit3.c.rabbit-magic.internal&nbsp;B&lt;/a&gt;&lt;/td&gt;<br>
<br>
&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(248,248,248)),to(rgb(255,255,255)));text-align:center!important&quot;&gt;<br>
<br>
x-federation-upstream&lt;/td&gt;&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(248,248,248)),to(rgb(255,255,255)));text-align:center!important&quot;&gt;<br>
<br>
ha-all&lt;/td&gt;&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(248,248,248)),to(rgb(255,255,255)));text-align:center!important&quot;&gt;<br>
<br>
&lt;acronym&nbsp;title=&quot;durable:&nbsp;true&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;D&lt;/acronym&gt; &lt;acronym&nbsp;title=&quot;auto-delete:&nbsp;true&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;AD&lt;/acronym&gt; &lt;acronym&nbsp;title=&quot;internal:&nbsp;true&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;I&lt;/acronym&gt; &lt;acronym&nbsp;title=&quot;x-max-hops:&nbsp;1,&nbsp;x-internal-purpose:&nbsp;federation&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;Args&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/acronym&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br&gt;And&nbsp;this&nbsp;i&nbsp;the&nbsp;queues&nbsp;list:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;table&nbsp;class=&quot;&quot;&nbsp;style=&quot;border-collapse:collapse;border-width:1px;border-bottom-style:solid;border-bottom-color:rgb(204,204,204);margin-bottom:0px;font-family:Verdana,sans-serif&quot;&gt;<br>
<br>
&lt;tbody&gt;&lt;tr&nbsp;class=&quot;&quot;&nbsp;style=&quot;color:rgb(170,170,170)&quot;&gt;&lt;td&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
<br>
&lt;a&nbsp;href=&quot;http://rabbit1:15672/#/queues/%2F/federation%3A%20users%20-%3E%20rabbit%40rabbit3.c.rabbit-magic.internal&quot;&nbsp;title=&quot;This&nbsp;is&nbsp;used&nbsp;internally&nbsp;by&nbsp;the&nbsp;federation&nbsp;mechanism.&quot;&nbsp;style=&quot;display:block;width:395px;color:rgb(170,170,170);font-weight:bold;text-decoration:none&quot;&gt;federation:&nbsp;users&nbsp;-&gt;&nbsp;rabbit@rabbit3.c.rabbit-magic.internal&lt;/a&gt;&lt;/td&gt;<br>
<br>
&lt;td&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
<br>
&lt;small&nbsp;style=&quot;font-size:0.8em&quot;&gt;rabbit@&lt;/small&gt;util1 &lt;acronym&nbsp;title=&quot;Synchronised&nbsp;mirrors:&nbsp;rabbit@util2&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;+1&lt;/acronym&gt;&lt;/td&gt;<br>
<br>
&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)));text-align:center!important&quot;&gt;<br>
<br>
&lt;/td&gt;&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)));text-align:center!important&quot;&gt;<br>
<br>
&lt;acronym&nbsp;title=&quot;x-expires:&nbsp;3600000&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;Exp&lt;/acronym&gt; &lt;acronym&nbsp;title=&quot;durable:&nbsp;true&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;D&lt;/acronym&gt; &lt;acronym&nbsp;title=&quot;x-internal-purpose:&nbsp;federation&quot;&nbsp;style=&quot;background-color:rgb(170,221,221);padding:2px&nbsp;4px;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-right-radius:2px;border-bottom-left-radius:2px;border:none&quot;&gt;Args&lt;/acronym&gt;&lt;/td&gt;<br>
<br>
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br&gt;&lt;b&gt;For&nbsp;the&nbsp;slave:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Nothing.&lt;/b&gt;&nbsp;Except&nbsp;on&nbsp;channels,&nbsp;where&nbsp;I&nbsp;find&nbsp;this: &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;table&nbsp;class=&quot;&quot;&nbsp;style=&quot;border-collapse:collapse;border-width:1px;border-bottom-style:solid;border-bottom-color:rgb(204,204,204);margin-bottom:1em;font-family:Verdana,sans-serif&quot;&gt;<br>
<br>
&lt;tbody&gt;&lt;tr&nbsp;class=&quot;&quot;&gt;&lt;td&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
<br>
&lt;a&nbsp;href=&quot;http://162.222.179.163:15672/#/channels/%3Crabbit%40rabbit3.3.237.0%3E%20(1)&quot;&nbsp;style=&quot;display:block;width:203px;color:black;font-weight:bold;text-decoration:none&quot;&gt;&lt;rabbit@rabbit3.3.237.0&gt;&nbsp;(1)&lt;/a&gt;&lt;/td&gt;&lt;td&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)));text-align:center!important&quot;&gt;<br>
<br>
federation&lt;br&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Feel&nbsp;like&nbsp;we&nbsp;might&nbsp;be&nbsp;on&nbsp;to&nbsp;something?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;How&nbsp;do&nbsp;I&nbsp;set&nbsp;this&nbsp;up?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;a&nbsp;side&nbsp;note:&nbsp;The&nbsp;queues&nbsp;and&nbsp;exchanges&nbsp;on&nbsp;the&nbsp;upstream&nbsp;might&nbsp;still&nbsp;be&nbsp;there&nbsp;since&nbsp;when&nbsp;we&nbsp;tried&nbsp;making&nbsp;it&nbsp;run&nbsp;both&nbsp;ways,&nbsp;not&nbsp;sure&nbsp;about&nbsp;this.&nbsp;We&nbsp;do&nbsp;however&nbsp;have&nbsp;the&nbsp;federation&nbsp;status&nbsp;on&nbsp;the&nbsp;SLAVE,&nbsp;and&nbsp;according&nbsp;to&nbsp;that&nbsp;it&#39;s&nbsp;up&nbsp;and&nbsp;running.&lt;br&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Best&nbsp;regards&lt;br&gt;Patrik&nbsp;Ring&lt;br&gt;&lt;br&gt;Co-founder&nbsp;and&nbsp;CTO&nbsp;of&nbsp;Bloglovin.com&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:patrik.ring@bloglovin.com&quot;&nbsp;target=&quot;_blank&quot;&gt;patrik.ring@bloglovin.com&lt;/a&gt;&lt;br&gt;<br>
<br>
+46&nbsp;730&nbsp;59&nbsp;78&nbsp;14&lt;div&gt;+1&nbsp;347&nbsp;859&nbsp;7999&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;4,&nbsp;2014&nbsp;at&nbsp;12:56&nbsp;PM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
Hi&nbsp;Patrik.&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;03/03/14&nbsp;21:41,&nbsp;Patrik&nbsp;Ring&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Some&nbsp;messages&nbsp;come&nbsp;through&nbsp;(but&nbsp;are&nbsp;heavily&nbsp;delayed,&nbsp;as&nbsp;in&nbsp;hours)&nbsp;but&lt;br&gt;<br>
they&nbsp;seem&nbsp;completely&nbsp;random.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
That&#39;s&nbsp;definitely&nbsp;not&nbsp;right!&lt;br&gt;<br>
&lt;br&gt;<br>
First&nbsp;of&nbsp;all,&nbsp;could&nbsp;you&nbsp;send&nbsp;the&nbsp;output&nbsp;of&nbsp;&quot;rabbitmqctl&nbsp;report&quot;&nbsp;for&nbsp;each&nbsp;broker?&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;which&nbsp;version&nbsp;of&nbsp;RabbitMQ&nbsp;are&nbsp;you&nbsp;using?&lt;br&gt;<br>
&lt;br&gt;<br>
Secondly,&nbsp;you&nbsp;might&nbsp;want&nbsp;to&nbsp;investigate&nbsp;whether&nbsp;the&nbsp;underlying&nbsp;infrastructure&nbsp;used&nbsp;by&nbsp;federation&nbsp;is&nbsp;wired&nbsp;up&nbsp;correctly.&nbsp;There&nbsp;should&nbsp;be&nbsp;a&nbsp;queue&nbsp;for&nbsp;each&nbsp;(exchange,&nbsp;downstream)&nbsp;pairing&nbsp;declared&nbsp;in&nbsp;the&nbsp;upstream&nbsp;broker&nbsp;(called&nbsp;&quot;federation:&nbsp;[exchange]&nbsp;-&gt;&nbsp;[node]&quot;).&nbsp;It&nbsp;should&nbsp;be&nbsp;bound&nbsp;(once)&nbsp;to&nbsp;an&nbsp;internal&nbsp;exchange&nbsp;with&nbsp;a&nbsp;similar&nbsp;name.&nbsp;That&nbsp;internal&nbsp;exchange&nbsp;should&nbsp;be&nbsp;bound&nbsp;to&nbsp;the&nbsp;upstream&nbsp;exchange&nbsp;with&nbsp;all&nbsp;the&nbsp;bindings&nbsp;that&nbsp;are&nbsp;in&nbsp;use&nbsp;downstream.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Does&nbsp;it&nbsp;look&nbsp;like&nbsp;that&nbsp;is&nbsp;happening?&nbsp;Is&nbsp;the&nbsp;infrastructure&nbsp;queue&nbsp;seeing&nbsp;the&nbsp;message&nbsp;rates&nbsp;you&nbsp;would&nbsp;expect?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
