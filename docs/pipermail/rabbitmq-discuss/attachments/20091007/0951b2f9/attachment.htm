<tt>
Hi&nbsp;Robert,&lt;br&gt;&lt;br&gt;If&nbsp;you&nbsp;set&nbsp;the&nbsp;QOS&nbsp;on&nbsp;the&nbsp;consumer&nbsp;to&nbsp;1&nbsp;(as&nbsp;you&nbsp;say),&nbsp;then&nbsp;this&nbsp;should&nbsp;prevent&nbsp;the&nbsp;message&nbsp;being&nbsp;queued&nbsp;at&nbsp;the&nbsp;client.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Paul.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;7,&nbsp;2009&nbsp;at&nbsp;12:28&nbsp;PM,&nbsp;Robert&nbsp;Raschke&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rtrlists@googlemail.com&quot;&gt;rtrlists@googlemail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;wondering&nbsp;if&nbsp;I&amp;#39;m&nbsp;wandering&nbsp;the&nbsp;right&nbsp;path&nbsp;here.&nbsp;(I&amp;#39;m&nbsp;using&nbsp;1.6.0&nbsp;with&nbsp;erlang&nbsp;client.)&lt;br&gt;<br>
&lt;br&gt;I&nbsp;was&nbsp;intending&nbsp;to&nbsp;use&nbsp;a&nbsp;basic.publish&nbsp;with&nbsp;mandatory&nbsp;and&nbsp;immediate&nbsp;set&nbsp;to&nbsp;true,&nbsp;and&nbsp;a&nbsp;return&nbsp;handler&nbsp;to&nbsp;allow&nbsp;me&nbsp;to&nbsp;add&nbsp;new&nbsp;workers&nbsp;reading&nbsp;from&nbsp;a&nbsp;queue.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;create&nbsp;a&nbsp;work&nbsp;queue&nbsp;with&nbsp;a&nbsp;return&nbsp;handler&nbsp;and&nbsp;a&nbsp;reply&nbsp;queue.&nbsp;I&nbsp;also&nbsp;create&nbsp;one&nbsp;initial&nbsp;worker,&nbsp;subscribing&nbsp;to&nbsp;the&nbsp;work&nbsp;queue&nbsp;with&nbsp;no_ack&nbsp;set&nbsp;to&nbsp;false.&lt;br&gt;&lt;br&gt;I&nbsp;then&nbsp;publish&nbsp;a&nbsp;work&nbsp;message&nbsp;onto&nbsp;the&nbsp;work&nbsp;queue&nbsp;and&nbsp;the&nbsp;worker&nbsp;picks&nbsp;it&nbsp;up,&nbsp;does&nbsp;the&nbsp;work&nbsp;and&nbsp;publishes&nbsp;the&nbsp;answer&nbsp;back&nbsp;into&nbsp;the&nbsp;reply&nbsp;queue.&lt;br&gt;<br>
<br>
&lt;br&gt;My&nbsp;intention&nbsp;was&nbsp;that&nbsp;my&nbsp;work&nbsp;message&nbsp;publish&nbsp;uses&nbsp;the&nbsp;immediate&nbsp;flag&nbsp;to&nbsp;generate&nbsp;a&nbsp;basic.return&nbsp;if&nbsp;the&nbsp;message&nbsp;cannot&nbsp;be&nbsp;immediately&nbsp;delivered.&nbsp;I&nbsp;thought&nbsp;that&nbsp;if&nbsp;my&nbsp;worker&nbsp;is&nbsp;busy&nbsp;it&nbsp;won&amp;#39;t&nbsp;get&nbsp;the&nbsp;next&nbsp;message,&nbsp;leading&nbsp;to&nbsp;the&nbsp;basic.return.&nbsp;But&nbsp;I&nbsp;believe&nbsp;my&nbsp;thinking&nbsp;is&nbsp;wrong.&nbsp;It&nbsp;looks&nbsp;like&nbsp;the&nbsp;second&nbsp;work&nbsp;message&nbsp;is&nbsp;routed&nbsp;to&nbsp;the&nbsp;initial&nbsp;work&nbsp;consumer&nbsp;immediately,&nbsp;even&nbsp;if&nbsp;it&nbsp;is&nbsp;still&nbsp;busy.&lt;br&gt;<br>
<br>
&lt;br&gt;Have&nbsp;I&nbsp;overlooked&nbsp;something&nbsp;obvious,&nbsp;or&nbsp;would&nbsp;I&nbsp;need&nbsp;to&nbsp;implement&nbsp;a&nbsp;1&nbsp;message&nbsp;flow&nbsp;control&nbsp;on&nbsp;the&nbsp;channel&nbsp;that&nbsp;the&nbsp;work&nbsp;consumer&nbsp;is&nbsp;using?&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;any&nbsp;pointers,&lt;br&gt;Robby&lt;br&gt;&lt;br&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
