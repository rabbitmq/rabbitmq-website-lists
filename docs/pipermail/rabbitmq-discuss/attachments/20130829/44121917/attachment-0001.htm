<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;:)&nbsp;.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
&lt;div&gt;I&nbsp;configured,&nbsp;or&nbsp;rather&nbsp;do&nbsp;me&nbsp;wondering,&nbsp;RMQ&nbsp;to&nbsp;use&nbsp;ldap&nbsp;(openldap)&lt;/div&gt;&lt;div&gt;for&nbsp;authentication&nbsp;and&nbsp;authorization.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;LDAP&nbsp;works&nbsp;ok,&nbsp;but&nbsp;the&nbsp;LDAP-user&nbsp;can&nbsp;not&nbsp;declare&nbsp;exchanges&nbsp;and&nbsp;queues,&nbsp;(login&nbsp;wheel:pass&nbsp;it&nbsp;works,&nbsp;published&nbsp;msg&nbsp;to&nbsp;exchange&nbsp;works,&nbsp;read&nbsp;msg&nbsp;from&nbsp;queque&nbsp;works&nbsp;)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&amp;#39;s&nbsp;my&nbsp;Rabbit&nbsp;configs&nbsp;: &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;CONFIG1:&lt;/div&gt;&lt;div&gt;&lt;div&gt;[&lt;/div&gt;&lt;div&gt; &nbsp;{rabbit,&nbsp;[&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {auth_backends,&nbsp;[rabbit_auth_backend_ldap,&nbsp;rabbit_auth_backend_internal]},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; {tcp_listeners,&nbsp;[]},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {ssl_listeners,&nbsp;[{&amp;quot;127.0.0.1&amp;quot;,&nbsp;5671}&nbsp;]},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {ssl_options,&nbsp;[{cacertfile,&amp;quot;/home/hg/cert/testca/cacert.pem&amp;quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{certfile,&amp;quot;/home/hg/cert/server/cert.pem&amp;quot;},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{keyfile,&amp;quot;/home/hg/cert/server/key.pem&amp;quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{verify,verify_peer},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{fail_if_no_peer_cert,true}]}&lt;/div&gt;&lt;div&gt; &nbsp; ]&lt;/div&gt;&lt;div&gt; &nbsp;},&lt;/div&gt;<br>
&lt;div&gt; &nbsp;{rabbitmq_auth_backend_ldap,&lt;/div&gt;&lt;div&gt; &nbsp; [&nbsp;{servers,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[&amp;quot;localhost&amp;quot;]},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {user_dn_pattern,&nbsp; &nbsp; &nbsp; &nbsp;&amp;quot;cn=${username},o=org1,dc=nodomain&amp;quot;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {use_ssl,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;false},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; {port,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 389},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {log,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;true},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {resource_access_query,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;{for,&nbsp;[{permission,&nbsp;configure,&nbsp;{in_group,&nbsp;&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;}},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {permission,&nbsp;write,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{for,&nbsp;[{resource,&nbsp;queue,&nbsp; &nbsp; {in_group,&nbsp;&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;}},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {resource,&nbsp;exchange,&nbsp;{constant,&nbsp;true}}]}},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {permission,&nbsp;read,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{for,&nbsp;[{resource,&nbsp;exchange,&nbsp;{in_group,&nbsp;&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;}},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {resource,&nbsp;queue,&nbsp; &nbsp; {constant,&nbsp;true}}]}}&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;]&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;}},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; {tag_queries,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[{administrator,&nbsp;{constant,&nbsp;false}},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{management,&nbsp; &nbsp; {constant,&nbsp;true}}]}&lt;/div&gt;&lt;div&gt; &nbsp; ]&lt;/div&gt;&lt;div&gt; &nbsp;}&lt;/div&gt;<br>
&lt;div&gt;].&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;LOG:&lt;/div&gt;&lt;div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;DECISION:&nbsp;does&nbsp;wheel&nbsp;have&nbsp;tag&nbsp;management?&nbsp;true&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;LDAP&nbsp;DECISION:&nbsp;login&nbsp;for&nbsp;wheel:&nbsp;ok&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt;LDAP&nbsp;CHECK:&nbsp;access&nbsp;to&nbsp;vhost&nbsp;&amp;quot;/&amp;quot;&nbsp;for&nbsp;&amp;quot;wheel&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;bind&nbsp;succeeded:&nbsp;cn=wheel,o=org1,dc=nodomain&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;evaluating&nbsp;query:&nbsp;{constant,true}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;evaluated&nbsp;constant:&nbsp;true&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt;LDAP&nbsp;DECISION:&nbsp;access&nbsp;to&nbsp;vhost&nbsp;&amp;quot;/&amp;quot;&nbsp;for&nbsp;&amp;quot;wheel&amp;quot;:&nbsp;ok&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;LDAP&nbsp;CHECK:&nbsp;configure&nbsp;permission&nbsp;for&nbsp;queue&nbsp;&amp;quot;tyerter&amp;quot;&nbsp;in&nbsp;&amp;quot;/&amp;quot;&nbsp;for&nbsp;&amp;quot;wheel&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;bind&nbsp;succeeded:&nbsp;cn=wheel,o=org1,dc=nodomain&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;evaluating&nbsp;query:&nbsp;{for,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[{permission,configure,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{in_group,&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;}},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {permission,write,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{for,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [{resource,queue,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {in_group,&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;}},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{resource,exchange,{constant,true}}]}},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {permission,read,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{for,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [{resource,exchange,&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {in_group,&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;}},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{resource,queue,{constant,true}}]}}]}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;selecting&nbsp;subquery&nbsp;permission&nbsp;=&nbsp;configure&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;evaluating&nbsp;query:&nbsp;{in_group,&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;}&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;evaluating&nbsp;query:&nbsp;{in_group,&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;,&amp;quot;member&amp;quot;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;LDAP&nbsp;filling&nbsp;template&nbsp;&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;&nbsp;with&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[{username,&amp;lt;&amp;lt;&amp;quot;wheel&amp;quot;&amp;gt;&amp;gt;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {user_dn,&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {vhost,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {resource,queue},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {name,&amp;lt;&amp;lt;&amp;quot;tyerter&amp;quot;&amp;gt;&amp;gt;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {permission,configure}]&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;LDAP&nbsp;template&nbsp;result:&nbsp;&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;LDAP&nbsp;evaluated&nbsp;in_group&nbsp;for&nbsp;&amp;quot;cn=wheel,o=org1,dc=nodomain&amp;quot;:&nbsp;false&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt;LDAP&nbsp;DECISION:&nbsp;configure&nbsp;permission&nbsp;for&nbsp;queue&nbsp;&amp;quot;tyerter&amp;quot;&nbsp;in&nbsp;&amp;quot;/&amp;quot;&nbsp;for&nbsp;&amp;quot;wheel&amp;quot;:&nbsp;denied&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=ERROR&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;connection&nbsp;&amp;lt;0.1234.0&amp;gt;,&nbsp;channel&nbsp;1&nbsp;-&nbsp;soft&nbsp;error:&lt;/div&gt;&lt;div&gt;{amqp_error,access_refused,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;quot;access&nbsp;to&nbsp;queue&nbsp;&amp;#39;tyerter&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&nbsp;refused&nbsp;for&nbsp;user&nbsp;&amp;#39;wheel&amp;#39;&amp;quot;,&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;#39;queue.declare&amp;#39;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=ERROR&nbsp;REPORT====&nbsp;29-Aug-2013::14:24:05&nbsp;===&lt;/div&gt;&lt;div&gt;webmachine&nbsp;error:&nbsp;path=&amp;quot;/api/queues/%2F/tyerter&amp;quot;&lt;/div&gt;&lt;div&gt;&amp;quot;Unauthorized&amp;quot;&lt;/div&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Can&nbsp;anyone&nbsp;have&nbsp;any&nbsp;suggestions&nbsp;or&nbsp;experience&nbsp;with&nbsp;this&nbsp;problem.&lt;/div&gt;&lt;div&gt;For&nbsp;all&nbsp;thank&nbsp;you&nbsp;in&nbsp;advance.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Muniek&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
