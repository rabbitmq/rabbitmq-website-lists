<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;after&nbsp;i&nbsp;upgrade&nbsp;rabbitmq&nbsp;to&nbsp;the&nbsp;latest&nbsp;version&nbsp;3.2.2,&nbsp;all&nbsp;rabbitmq&nbsp;services&nbsp;work&nbsp;well,the&nbsp;memory&nbsp;usage&nbsp;of &nbsp;the&nbsp;most&nbsp;is&nbsp;about&nbsp;200M&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2014-01-16&nbsp;Blake-R&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:blake-r@mail.ru&quot;&nbsp;target=&quot;_blank&quot;&gt;blake-r@mail.ru&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi.&nbsp;I&#39;m&nbsp;use&nbsp;last&nbsp;RabbitMQ&nbsp;3.2.2&nbsp;and&nbsp;got&nbsp;same&nbsp;problem:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/badarg-in-dict-fetch-problem-on-basic-consume-ok-or-not-tp32572p32597.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://rabbitmq.1065348.n5.nabble.com/badarg-in-dict-fetch-problem-on-basic-consume-ok-or-not-tp32572p32597.html&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
2014/1/16&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&gt;:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&gt;&nbsp;A&nbsp;couple&nbsp;of&nbsp;memory&nbsp;leaks&nbsp;have&nbsp;been&nbsp;fixed&nbsp;in&nbsp;the&nbsp;management&nbsp;plugin&nbsp;since&lt;br&gt;<br>
&gt;&nbsp;3.1.0.&nbsp;From&nbsp;the&nbsp;changelog:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;25600&nbsp;fix&nbsp;consumer&nbsp;record&nbsp;leak&nbsp;in&nbsp;the&nbsp;management&nbsp;database&nbsp;(since&nbsp;2.2.0)&lt;br&gt;<br>
&gt;&nbsp;25629&nbsp;fix&nbsp;memory&nbsp;leak&nbsp;in&nbsp;the&nbsp;presence&nbsp;of&nbsp;long-lived&nbsp;channels&nbsp;and&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp;short-lived&nbsp;queues&nbsp;(since&nbsp;3.1.0)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;So&nbsp;an&nbsp;upgrade&nbsp;is&nbsp;definitely&nbsp;advised.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Cheers,&nbsp;Simon&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;16/01/14&nbsp;03:33,&nbsp;Xie&nbsp;Yunpeng&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;my&nbsp;rabbitmq&nbsp;cluster&nbsp;consist&nbsp;of&nbsp;three&nbsp;rabbitmq&nbsp;service&nbsp;on&nbsp;three&nbsp;machine,&lt;br&gt;<br>
&gt;&gt;&nbsp;and&nbsp;i&nbsp;use&nbsp;lvs&nbsp;to&nbsp;make&nbsp;other&nbsp;services&nbsp;can&nbsp;use&nbsp;one&nbsp;ip&nbsp;address&nbsp;connect&nbsp;to&lt;br&gt;<br>
&gt;&gt;&nbsp;rabbitmq&nbsp;server.&nbsp;one&nbsp;of&nbsp;the&nbsp;machine&nbsp;handle&nbsp;three&nbsp;hundred&nbsp;connections&nbsp;and&lt;br&gt;<br>
&gt;&gt;&nbsp;more&nbsp;than&nbsp;four&nbsp;thousand&nbsp;channles,&nbsp;send&nbsp;and&nbsp;revice&nbsp;rate&nbsp;is&nbsp;the&nbsp;same&nbsp;so&lt;br&gt;<br>
&gt;&gt;&nbsp;there&nbsp;is&nbsp;no&nbsp;msg&nbsp;in&nbsp;queue.but&nbsp;it&#39;s&nbsp;memory&nbsp;usage&nbsp;is&nbsp;growing&nbsp;all&nbsp;the&nbsp;time&lt;br&gt;<br>
&gt;&gt;&nbsp;until&nbsp;i&nbsp;stop_app/start_app,&nbsp;when&nbsp;i&nbsp;check&nbsp;memory&nbsp;usage&nbsp;on&nbsp;rabbitmq&lt;br&gt;<br>
&gt;&gt;&nbsp;management&nbsp;it&nbsp;shows&nbsp;2.3G,&nbsp;but&nbsp;i&nbsp;use&nbsp;top&nbsp;on&nbsp;the&nbsp;machine&nbsp;can&nbsp;see&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;rabbitmq&nbsp;use&nbsp;about&nbsp;13G&nbsp;memory,&nbsp;how&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem?&nbsp;is&nbsp;it&nbsp;a&nbsp;bug?&lt;br&gt;<br>
&gt;&gt;&nbsp;memory&nbsp;info&nbsp;on&nbsp;this&nbsp;machine&nbsp;with&nbsp;rabbitmqctl&nbsp;report:&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp;{erlang_version,&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp;&quot;Erlang&nbsp;R16B03&nbsp;(erts-5.10.4)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:24:24]&lt;br&gt;<br>
&gt;&gt;&nbsp;[async-threads:30]&nbsp;[hipe]&nbsp;[kernel-poll:true]\n&quot;},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp;{memory,&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp;[{total,2476273832},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {connection_procs,155880032},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {queue_procs,5600},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {plugins,590576},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {other_proc,22481760},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {mnesia,104832},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {mgmt_db,2184042360},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {msg_index,40560},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {other_ets,41907368},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {binary,34012872},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {code,19853836},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {atom,703377},&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; {other_system,16650659}]},&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;--&lt;br&gt;<br>
&gt;&nbsp;Simon&nbsp;MacMullen&lt;br&gt;<br>
&gt;&nbsp;RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
