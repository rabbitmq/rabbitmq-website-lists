<tt>
I&nbsp;understand,&nbsp;thank&nbsp;you.&nbsp;I&amp;#39;ll&nbsp;try&nbsp;to&nbsp;improve&nbsp;it&nbsp;until&nbsp;I&nbsp;can&nbsp;do&nbsp;something&nbsp;better&nbsp;with&nbsp;credit&nbsp;flow.&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2012/8/3&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;03/08/12&nbsp;09:45,&nbsp;Félix&nbsp;López&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Let&nbsp;me&nbsp;check.&lt;br&gt;<br>
&lt;br&gt;<br>
Regarding&nbsp;the&nbsp;throttling:&lt;br&gt;<br>
It&amp;#39;s&nbsp;a&nbsp;temporary&nbsp;solution,&nbsp;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;try&nbsp;to&nbsp;do&nbsp;good&nbsp;one&nbsp;with&nbsp;credit&lt;br&gt;<br>
flow,&nbsp;but&nbsp;later.&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;preserves&nbsp;the&nbsp;order&nbsp;in&nbsp;what&nbsp;they&nbsp;arrive,&nbsp;so&nbsp;when&nbsp;a&nbsp;message&nbsp;for&nbsp;the&lt;br&gt;<br>
exchange&nbsp;Test1&nbsp;arrives&nbsp;a&nbsp;process&nbsp;is&nbsp;spawned&nbsp;with&nbsp;a&nbsp;timeout,&nbsp;the&nbsp;next&lt;br&gt;<br>
message&nbsp;for&nbsp;the&nbsp;same&nbsp;exchange&nbsp;takes&nbsp;into&nbsp;that&nbsp;time,&nbsp;so&nbsp;it&nbsp;calculates&nbsp;its&lt;br&gt;<br>
timeout&nbsp;basing&nbsp;on&nbsp;it.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
In&nbsp;your&nbsp;code&nbsp;each&nbsp;message&nbsp;is&nbsp;passed&nbsp;on&nbsp;via&nbsp;a&nbsp;freshly&nbsp;spawned&nbsp;process.&nbsp;Erlang&nbsp;only&nbsp;guarantees&nbsp;message&nbsp;order&nbsp;between&nbsp;pairs&nbsp;of&nbsp;processes.&nbsp;What&nbsp;you&nbsp;have&nbsp;will&nbsp;work&nbsp;most&nbsp;of&nbsp;the&nbsp;time,&nbsp;particularly&nbsp;when&nbsp;message&nbsp;rates&nbsp;are&nbsp;low,&nbsp;but&nbsp;there&nbsp;is&nbsp;no&nbsp;guarantee.&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
About&nbsp;the&nbsp;rate&nbsp;limit&nbsp;with&nbsp;multiple&nbsp;concurrent&nbsp;publishers,&nbsp;why&nbsp;not?&nbsp;It&lt;br&gt;<br>
stores&nbsp;the&nbsp;next&nbsp;timeout&nbsp;in&nbsp;a&nbsp;transaction,&nbsp;so&nbsp;the&nbsp;next&nbsp;message&nbsp;should&lt;br&gt;<br>
calculate&nbsp;its&nbsp;timeout&nbsp;taking&nbsp;into&nbsp;account&nbsp;the&nbsp;previous&nbsp;message.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
The&nbsp;reading&nbsp;of&nbsp;the&nbsp;previous&nbsp;timeout&nbsp;and&nbsp;writing&nbsp;of&nbsp;the&nbsp;new&nbsp;timeout&nbsp;happen&nbsp;in&nbsp;different&nbsp;transactions.&nbsp;So&nbsp;multiple&nbsp;concurrent&nbsp;publishers&nbsp;could&nbsp;all&nbsp;read&nbsp;the&nbsp;same&nbsp;value.&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.linkedin.com/in/flopezluis&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.linkedin.com/in/flopezluis&lt;/a&gt;&lt;br&gt;&lt;br&gt;It&amp;#39;s&nbsp;easier&nbsp;to&nbsp;ask&nbsp;forgiveness&nbsp;than&nbsp;it&nbsp;is&nbsp;to&nbsp;get&nbsp;permission&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&amp;quot;.....it&nbsp;doesn&amp;#39;t&nbsp;matter&nbsp;how&nbsp;many&nbsp;times&nbsp;you&nbsp;fail.&nbsp;It&nbsp;doesn&amp;#39;t&nbsp;matter&nbsp;how&nbsp;many&nbsp;times&nbsp;you&nbsp;almost&nbsp;get&nbsp;it&nbsp;right.&nbsp;No&nbsp;one&nbsp;is&nbsp;going&nbsp;to&nbsp;know&nbsp;or&nbsp;care&nbsp;about&nbsp;your&nbsp;failures,&nbsp;and&nbsp;either&nbsp;should&nbsp;you.&nbsp;All&nbsp;you&nbsp;have&nbsp;to&nbsp;do&nbsp;is&nbsp;learn&nbsp;from&nbsp;them&nbsp;and&nbsp;those&nbsp;around&nbsp;you&nbsp;because...All&nbsp;that&nbsp;matters&nbsp;in&nbsp;business&nbsp;is&nbsp;that&nbsp;you&nbsp;get&nbsp;it&nbsp;right&nbsp;once.&nbsp;Then&nbsp;everyone&nbsp;can&nbsp;tell&nbsp;you&nbsp;how&nbsp;lucky&nbsp;you&nbsp;are.&amp;quot;&lt;br&gt;<br>
--Mark&nbsp;Cuban&amp;quot;&lt;br&gt;&lt;br&gt;&amp;quot;Always&nbsp;be&nbsp;the&nbsp;worst&nbsp;guy&nbsp;in&nbsp;every&nbsp;band&nbsp;you&amp;#39;re&nbsp;in.&amp;quot;&nbsp;If&nbsp;you&amp;#39;re&nbsp;the&nbsp;best&nbsp;guy&nbsp;there,&nbsp;you&nbsp;need&nbsp;to&nbsp;be&nbsp;in&nbsp;a&nbsp;different&nbsp;band.&nbsp;And&nbsp;I&nbsp;think&nbsp;that&nbsp;works&nbsp;for&nbsp;almost&nbsp;everything&nbsp;that&amp;#39;s&nbsp;out&nbsp;there&nbsp;as&nbsp;well.&amp;quot;&nbsp;Pat&nbsp;Metheny&lt;br&gt;<br>
<br>
&lt;/div&gt;<br>

</tt>
