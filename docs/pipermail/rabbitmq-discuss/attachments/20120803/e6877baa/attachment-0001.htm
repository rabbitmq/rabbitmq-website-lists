<tt>
Thanks&nbsp;Dave, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;this&nbsp;behavior&nbsp;is&nbsp;right?&nbsp;Why&nbsp;the&nbsp;rabbit&nbsp;dont&nbsp;disconnect&nbsp;client&nbsp;when&nbsp;connection/socket&nbsp;timeout.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thiago&nbsp;Burgo&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2012/8/3&nbsp;Dave&nbsp;Curylo&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:curylod@asme.org&quot;&nbsp;target=&quot;_blank&quot;&gt;curylod@asme.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;Thiago,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regarding&nbsp;your&nbsp;consumers,&nbsp;when&nbsp;using&nbsp;the&nbsp;.NET&nbsp;client,&nbsp;you&nbsp;should&nbsp;make&nbsp;sure&nbsp;to&nbsp;set&nbsp;the&nbsp;RequestedHeartbeat&nbsp;property&nbsp;on&nbsp;your&nbsp;ConnectionFactory&nbsp;to&nbsp;a&nbsp;non-zero&nbsp;value.&nbsp; If&nbsp;you&nbsp;don&amp;#39;t&nbsp;do&nbsp;this,&nbsp;then&nbsp;should&nbsp;a&nbsp;process&nbsp;die&nbsp;without&nbsp;a&nbsp;chance&nbsp;to&nbsp;clean&nbsp;up&nbsp;the&nbsp;connection,&nbsp;it&nbsp;may&nbsp;never&nbsp;get&nbsp;disconnected&nbsp;and&nbsp;you&nbsp;will&nbsp;have&nbsp;to&nbsp;close&nbsp;the&nbsp;connections&nbsp;manually&nbsp;either&nbsp;through&nbsp;the&nbsp;management&nbsp;web&nbsp;interface&nbsp;or&nbsp;rabbitmqctl.&nbsp; Rabbit&nbsp;seems&nbsp;to&nbsp;hold&nbsp;on&nbsp;to&nbsp;the&nbsp;connections&nbsp;if&nbsp;you&nbsp;don&amp;#39;t&nbsp;do&nbsp;this.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;a&nbsp;helpful&nbsp;script&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;connections&nbsp;and&nbsp;find&nbsp;it&nbsp;tedious&nbsp;to&nbsp;close&nbsp;them&nbsp;using&nbsp;the&nbsp;web&nbsp;UI.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;line-height:normal;text-indent:0px;letter-spacing:normal;text-align:-webkit-auto;font-variant:normal;text-transform:none;font-style:normal;font-weight:normal;word-spacing:0px&quot;&gt;<br>
#!/bin/bash<br>
peerToDisconnect=1.2.3.4<br>
for&nbsp;c&nbsp;in&nbsp;`rabbitmqctl&nbsp;list_connections&nbsp;peer_address&nbsp;pid&nbsp;|&nbsp;grep&nbsp;$peerToDisconnect`;<br>
do<br>
if&nbsp;[&nbsp;$c&nbsp;!=&nbsp;$peerToDisconnect&nbsp;];<br>
then&nbsp;rabbitmqctl&nbsp;close_connection&nbsp;$c&nbsp;&amp;quot;Orphaned&nbsp;-&nbsp;disconnecting&amp;quot;;<br>
fi;<br>
done<br>
&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;-Dave&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&gt;On&nbsp;Aug&nbsp;3,&nbsp;2012,&nbsp;at&nbsp;1:10&nbsp;PM,&nbsp;Thiago&nbsp;Burgo&nbsp;Belo&nbsp;wrote:&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&gt;&lt;div&gt;Matthias, &lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;Has&nbsp;2&nbsp;consumers,&nbsp;but&nbsp;this&nbsp;is&nbsp;more&nbsp;strange,&nbsp;because&nbsp;I&nbsp;closed&nbsp;all&nbsp;connections&nbsp;with&nbsp;Rabbit&nbsp;(.NEt&nbsp;Client)&nbsp;and&nbsp;the&nbsp;consumers&nbsp;are&nbsp;Idle&nbsp;since&nbsp;2012-08-02&nbsp;15:05:56,&nbsp;the&nbsp;consumers&nbsp;will&nbsp;never&nbsp;die?&lt;/div&gt;<br>
&lt;div&gt;Note&nbsp;1:&nbsp; I&nbsp;already&nbsp;turned&nbsp;off&nbsp;my&nbsp;computer&nbsp;(client)&nbsp;and&nbsp;the&nbsp;consumer&nbsp;keep&nbsp;alive.&lt;/div&gt;&lt;div&gt;Note&nbsp;1:&nbsp;I&amp;#39;m&nbsp;using&nbsp;a&nbsp;non&nbsp;default&nbsp;virtual&nbsp;host,&nbsp;something&nbsp;like&nbsp;/myVirtualHost&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;See&nbsp;the&nbsp;attachment.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks, &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thiago&nbsp;Burgo&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2012/8/2&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;02/08/12&nbsp;20:58,&nbsp;Thiago&nbsp;Burgo&nbsp;Belo&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
My&nbsp;queue&nbsp;with&nbsp;x-expires&nbsp;not&nbsp;expires&nbsp;after&nbsp;timeout,&nbsp;the&nbsp;follow&nbsp;queue&nbsp;was&lt;br&gt;<br>
created&nbsp;and&nbsp;not&nbsp;accessed&nbsp;since&nbsp;(2012-08-02&nbsp;14:00),&nbsp;and&nbsp;not&nbsp;expired&nbsp;until&lt;br&gt;<br>
now.&lt;br&gt;<br>
&lt;br&gt;<br>
Parameters&lt;br&gt;<br>
x-ha-policy:&nbsp; &nbsp; all&lt;br&gt;<br>
x-expires:&nbsp; &nbsp; &nbsp; 9000&lt;br&gt;<br>
arguments:&nbsp; &nbsp; &nbsp; &lt;br&gt;<br>
x-match:&nbsp; &nbsp; &nbsp; &nbsp; any&lt;br&gt;<br>
&lt;br&gt;<br>
durable:&nbsp; &nbsp; &nbsp; &nbsp; true&lt;br&gt;<br>
&lt;br&gt;<br>
Exclusive&nbsp;owner&nbsp;None&nbsp;Status&nbsp;Idle&nbsp;since&lt;br&gt;<br>
2012-08-02&nbsp;16:16:58&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
Does&nbsp;the&nbsp;queue&nbsp;have&nbsp;a&nbsp;consumer?&nbsp;From&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/extensions.html#queue-leases&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/&lt;u&gt;&lt;/u&gt;extensions.html#queue-leases&lt;/a&gt;&lt;br&gt;<br>
&amp;lt;quote&amp;gt;&lt;br&gt;<br>
&amp;quot;Unused&nbsp;means&nbsp;the&nbsp;queue&nbsp;has&nbsp;no&nbsp;consumers,&nbsp;the&nbsp;queue&nbsp;has&nbsp;not&nbsp;been&nbsp;redeclared,&nbsp;and&nbsp;basic.get&nbsp;has&nbsp;not&nbsp;been&nbsp;invoked&nbsp;for&nbsp;a&nbsp;duration&nbsp;of&nbsp;at&nbsp;least&nbsp;the&nbsp;expiration&nbsp;period.&amp;quot;&lt;br&gt;<br>
&amp;lt;/quote&amp;gt;&lt;span&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;span&gt;&amp;lt;rabbit.png&amp;gt;&lt;/span&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
