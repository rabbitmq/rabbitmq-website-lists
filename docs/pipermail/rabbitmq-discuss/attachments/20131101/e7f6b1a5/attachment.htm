<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;According&nbsp;to&nbsp;http://www.rabbitmq.com/reliability.html,&lt;br&gt;&quot;Connection&nbsp;Failures&lt;br&gt;In&nbsp;the&nbsp;event&nbsp;of&nbsp;a&nbsp;connection&nbsp;failure,&nbsp;the&nbsp;client&nbsp;will&nbsp;need&nbsp;to&nbsp;establish&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;broker.&nbsp;Any&nbsp;channels&nbsp;opened&nbsp;on&nbsp;the&nbsp;previous&nbsp;connection&nbsp;will&nbsp;have&nbsp;been&nbsp;automatically&nbsp;closed&nbsp;and&nbsp;these&nbsp;will&nbsp;need&nbsp;re-opening&nbsp;too.&quot;&nbsp;&lt;br&gt;&lt;br&gt;I&nbsp;manage&nbsp;to&nbsp;establish&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;broker,&nbsp;however,&nbsp;if&nbsp;the&nbsp;IP&nbsp;of&nbsp;the&nbsp;new&nbsp;connection&nbsp;is&nbsp;different&nbsp;from&nbsp;previous&nbsp;connection&nbsp;(for&nbsp;example,&nbsp;via&nbsp;different&nbsp;networks&nbsp;such&nbsp;as&nbsp;3G&nbsp;and&nbsp;Wifi&nbsp;network&nbsp;or&nbsp;via&nbsp;different&nbsp;router)&nbsp;the&nbsp;previous&nbsp;connection&nbsp;will&nbsp;not&nbsp;be&nbsp;closed&nbsp;until&nbsp;the&nbsp;heartbeat&nbsp;timeout&nbsp;(default&nbsp;is&nbsp;600s).&nbsp;&lt;br&gt;&lt;br&gt;Consumers&lt;br&gt;Channel&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Consumer&nbsp;tag&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Ack&nbsp;required&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Exclusive&lt;br&gt;210.19.225.88:36920&nbsp;(1)&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;amq.ctag-ma8QOXnZ_UAK-R7wddQGXA&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;●&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;○&lt;br&gt;210.19.225.3:60659&nbsp;(1)&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;amq.ctag-igoa2WysTs79WAk969UFJg&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;●&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;○&lt;br&gt;&lt;br&gt;Due&nbsp;to&nbsp;that&nbsp;the&nbsp;new&nbsp;connection&nbsp;or&nbsp;channel&nbsp;created&nbsp;is&nbsp;not&nbsp;able&nbsp;to&nbsp;receive<br>
&nbsp;all&nbsp;of&nbsp;the&nbsp;messages&nbsp;delivered&nbsp;to&nbsp;the&nbsp;queue.&nbsp;The&nbsp;new&nbsp;connection&nbsp;only&nbsp;<br>
receives&nbsp;alternate&nbsp;message&nbsp;until&nbsp;previous&nbsp;connection&nbsp;is&nbsp;closed.&lt;br&gt;For&nbsp;example,&nbsp;M1,&nbsp;M2,&nbsp;M3,&nbsp;M4&nbsp;published&nbsp;to&nbsp;the&nbsp;queue,&nbsp;new&nbsp;connection&nbsp;only&nbsp;receives&nbsp;M2,&nbsp;M4&nbsp;within&nbsp;the&nbsp;600s;&nbsp;after&nbsp;the&nbsp;previous&nbsp;connection&nbsp;is&nbsp;closed&nbsp;the&nbsp;new&nbsp;connection&nbsp;will&nbsp;get&nbsp;M1&nbsp;and&nbsp;M3.&nbsp;&lt;br&gt;&lt;br&gt;If&nbsp;the&nbsp;IP&nbsp;is&nbsp;the&nbsp;same,&nbsp;the&nbsp;previous&nbsp;connection&nbsp;does&nbsp;get&nbsp;closed&nbsp;immediately.&nbsp;New&nbsp;connection&nbsp;will&nbsp;get&nbsp;M1,&nbsp;M2,&nbsp;M3,&nbsp;and&nbsp;M4.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;jusing&nbsp;rabbitmq-java&nbsp;client.&nbsp;is&nbsp;this&nbsp;a&nbsp;bug?&nbsp;&lt;br&gt;&lt;br&gt;What&nbsp;can&nbsp;I&nbsp;do&nbsp;to&nbsp;ensure&nbsp;that&nbsp;I&nbsp;can&nbsp;receive&nbsp;all&nbsp;of&nbsp;the&nbsp;messages&nbsp;immediately&nbsp;even&nbsp;in&nbsp;the&nbsp;scenario&nbsp;in&nbsp;which&nbsp;IP&nbsp;is&nbsp;different?&nbsp;&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;--Wong&nbsp;Liong&nbsp;Hung&lt;br&gt;&lt;/div&gt;
</tt>
