<tt>
I&nbsp;have&nbsp;seen&nbsp;those&nbsp;log&nbsp;files&nbsp;of&nbsp;which&nbsp;you&nbsp;speak.&nbsp;They&nbsp;are&nbsp;.....&nbsp;large,&nbsp;to&nbsp;say&nbsp;the&nbsp;least.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;just&nbsp;checked&nbsp;in&nbsp;to&nbsp;app&nbsp;and&nbsp;SASL&nbsp;and&nbsp;there&amp;#39;s&nbsp;nothing&nbsp;from&nbsp;that&nbsp;time&nbsp;frame.&nbsp;On&nbsp;the&nbsp;host&nbsp;which&nbsp;had&nbsp;the&nbsp;queue&nbsp;in&nbsp;question,&nbsp;the&nbsp;best&nbsp;I&nbsp;have&nbsp;is&nbsp;78k&nbsp;SASL&nbsp;messages&nbsp;over&nbsp;the&nbsp;course&nbsp;of&nbsp;the&nbsp;day&nbsp;that&nbsp;look&nbsp;like&nbsp;the&nbsp;one&nbsp;I&nbsp;pasted&nbsp;below.&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=SUPERVISOR&nbsp;REPORT====&nbsp;9-Aug-2011::12:19:16&nbsp;===&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; Supervisor:&nbsp;{&amp;lt;0.7200.4&amp;gt;,rabbit_channel_sup_sup}&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; Context:&nbsp; &nbsp; shutdown_error&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; Reason:&nbsp; &nbsp; &nbsp;shutdown&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; Offender:&nbsp; &nbsp;[{pid,&amp;lt;0.15122.24&amp;gt;},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{name,channel_sup},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{mfa,{rabbit_channel_sup,start_link,[]}},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{restart_type,temporary},&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{shutdown,infinity},&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{child_type,supervisor}]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;can&nbsp;email&nbsp;you&nbsp;logs,&nbsp;but&nbsp;they&amp;#39;re&nbsp;really&nbsp;not&nbsp;exciting.&nbsp;It&amp;#39;s&nbsp;all&nbsp;just&nbsp;noise&nbsp;as&nbsp;messages&nbsp;were&nbsp;published&nbsp;and&nbsp;consumers&nbsp;had&nbsp;yet&nbsp;to&nbsp;initialize&nbsp;and&nbsp;declare&nbsp;exchanges,&nbsp;queues&nbsp;and&nbsp;bindings.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;assume&nbsp;you&nbsp;have&nbsp;tests&nbsp;for&nbsp;spooling&nbsp;to&nbsp;disk&nbsp;when&nbsp;rabbit&nbsp;is&nbsp;low&nbsp;on&nbsp;memory.&nbsp;Has&nbsp;this&nbsp;been&nbsp;tested&nbsp;in&nbsp;a&nbsp;cluster&nbsp;situation&nbsp;such&nbsp;as&nbsp;I&nbsp;described?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;checked&nbsp;our&nbsp;configurations,&nbsp;and&nbsp;I&nbsp;wonder&nbsp;if&nbsp;this&nbsp;is&nbsp;what&nbsp;caused&nbsp;the&nbsp;problem:&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;[{rabbit,&nbsp;[{vm_memory_high_watermark,&nbsp;0},&nbsp;{cluster_nodes,&nbsp;[&amp;#39;artemis&amp;#39;,&amp;#39;hermes&amp;#39;]}]}].&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Aaron&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Aug&nbsp;15,&nbsp;2011&nbsp;at&nbsp;9:21&nbsp;AM,&nbsp;Matthew&nbsp;Sackman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthew@rabbitmq.com&quot;&gt;matthew@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Hi&nbsp;Aaron,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;Fri,&nbsp;Aug&nbsp;12,&nbsp;2011&nbsp;at&nbsp;02:27:25PM&nbsp;-0400,&nbsp;Aaron&nbsp;Westendorf&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;We&amp;#39;ve&nbsp;put&nbsp;two&nbsp;new&nbsp;rabbit&nbsp;2.5&nbsp;hosts&nbsp;into&nbsp;production&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;as&nbsp;we&lt;br&gt;<br>
&amp;gt;&nbsp;performed&nbsp;some&nbsp;other&nbsp;major&nbsp;upgrades&nbsp;to&nbsp;our&nbsp;software&nbsp;on&nbsp;9&nbsp;August.&nbsp;As&lt;br&gt;<br>
&amp;gt;&nbsp;designed,&nbsp;our&nbsp;messages&nbsp;queued&nbsp;up&nbsp;in&nbsp;rabbit,&nbsp;and&nbsp;we&nbsp;slowly&nbsp;consumed&nbsp;them.&lt;br&gt;<br>
&amp;gt;&nbsp;When&nbsp;the&nbsp;queues&nbsp;were&nbsp;empty,&nbsp;rabbit&nbsp;blew&nbsp;up&nbsp;and&nbsp;took&nbsp;out&nbsp;both&nbsp;hosts&nbsp;in&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;cluster.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Not&nbsp;quite&nbsp;as&nbsp;designed.&nbsp;Do&nbsp;you&nbsp;have&nbsp;the&nbsp;logs&nbsp;available&nbsp;for&nbsp;these&nbsp;machines&lt;br&gt;<br>
from&nbsp;as&nbsp;they&nbsp;blew&nbsp;up&nbsp;that&nbsp;you&nbsp;can&nbsp;send&nbsp;us&nbsp;(maybe&nbsp;off&nbsp;list)?&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Shortly&nbsp;after&nbsp;the&nbsp;queues&nbsp;drained,&nbsp;rabbit&nbsp;became&nbsp;completely&nbsp;unresponsive.&nbsp;Our&lt;br&gt;<br>
&amp;gt;&nbsp;`watch`&nbsp;process&nbsp;to&nbsp;list_queues&nbsp;and&nbsp;check&nbsp;on&nbsp;the&nbsp;state&nbsp;stopped&nbsp;running.&nbsp;We&lt;br&gt;<br>
&amp;gt;&nbsp;observed&nbsp;heavy&nbsp;swap&nbsp;churn&nbsp;via&nbsp;kswapd[0-9]+.&nbsp;It&nbsp;appeared&nbsp;that&nbsp;rabbit&nbsp;was&lt;br&gt;<br>
&amp;gt;&nbsp;trying&nbsp;to&nbsp;load&nbsp;in&nbsp;all&nbsp;of&nbsp;the&nbsp;data&nbsp;that&nbsp;it&nbsp;had&nbsp;paged&nbsp;to&nbsp;disk.&nbsp; I&amp;#39;ve&nbsp;attached&lt;br&gt;<br>
&amp;gt;&nbsp;graphs&nbsp;that&nbsp;show&nbsp;when&nbsp;this&nbsp;event&nbsp;occurred,&nbsp;but&nbsp;they&amp;#39;re&nbsp;the&nbsp;weekly&nbsp;rollups&nbsp;so&lt;br&gt;<br>
&amp;gt;&nbsp;it&amp;#39;s&nbsp;hidden&nbsp;in&nbsp;the&nbsp;noise.&nbsp;The&nbsp;&amp;quot;max&amp;quot;&nbsp;column&nbsp;is&nbsp;the&nbsp;best&nbsp;record&nbsp;of&nbsp;the&nbsp;limits&lt;br&gt;<br>
&amp;gt;&nbsp;that&nbsp;were&nbsp;hit,&nbsp;especially&nbsp;the&nbsp;&amp;quot;committed&amp;quot;&nbsp;value&nbsp;which&nbsp;is&nbsp;significantly&lt;br&gt;<br>
&amp;gt;&nbsp;higher&nbsp;than&nbsp;the&nbsp;8GB&nbsp;of&nbsp;RAM&nbsp;available.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;To&nbsp;me,&nbsp;this&nbsp;sounds&nbsp;like&nbsp;Rabbit&nbsp;was&nbsp;about&nbsp;to&nbsp;crash.&nbsp;Sadly,&nbsp;Erlang&nbsp;is&nbsp;very&lt;br&gt;<br>
very&nbsp;poor&nbsp;at&nbsp;string&nbsp;handling.&nbsp;When&nbsp;processes&nbsp;in&nbsp;Erlang&nbsp;crash,&nbsp;they&nbsp;have&lt;br&gt;<br>
their&nbsp;last&nbsp;known&nbsp;state,&nbsp;stacktrace,&nbsp;and&nbsp;&amp;quot;last&nbsp;message&nbsp;in&amp;quot;&nbsp;dumped&nbsp;to&nbsp;the&lt;br&gt;<br>
log.&nbsp;This&nbsp;is&nbsp;fantastic&nbsp;from&nbsp;a&nbsp;debugging&nbsp;pov,&nbsp;but&nbsp;Erlang&nbsp;is&nbsp;so&nbsp;awful&nbsp;at&lt;br&gt;<br>
converting&nbsp;all&nbsp;this&nbsp;data&nbsp;to&nbsp;a&nbsp;string&nbsp;to&nbsp;put&nbsp;into&nbsp;the&nbsp;log,&nbsp;that&nbsp;I&lt;br&gt;<br>
regularly&nbsp;see&nbsp;Erlang&nbsp;eat&nbsp;GBs&nbsp;of&nbsp;RAM,&nbsp;eventually&nbsp;running&nbsp;out&nbsp;and&nbsp;then&lt;br&gt;<br>
swapping&nbsp;to&nbsp;death&nbsp;when&nbsp;converting&nbsp;a&nbsp;few&nbsp;MB&nbsp;of&nbsp;state&nbsp;to&nbsp;a&nbsp;string.&nbsp;This&lt;br&gt;<br>
seems&nbsp;to&nbsp;match&nbsp;what&nbsp;happened&nbsp;to&nbsp;you.&lt;br&gt;<br>
&lt;br&gt;<br>
However,&nbsp;Rabbit&nbsp;certainly&nbsp;shouldn&amp;#39;t&nbsp;have&nbsp;crashed,&nbsp;and&nbsp;we&amp;#39;ve&nbsp;had&nbsp;very&nbsp;few&lt;br&gt;<br>
crash&nbsp;reports&nbsp;with&nbsp;2.5.1.&nbsp;It&amp;#39;s&nbsp;possible&nbsp;that&nbsp;the&nbsp;logs&nbsp;contain&nbsp;at&nbsp;least&lt;br&gt;<br>
part&nbsp;of&nbsp;the&nbsp;reason&nbsp;for&nbsp;the&nbsp;crash,&nbsp;and&nbsp;if&nbsp;so,&nbsp;they&amp;#39;d&nbsp;help&nbsp;a&nbsp;lot.&nbsp;But&lt;br&gt;<br>
other&nbsp;than&nbsp;that&nbsp;there&amp;#39;s&nbsp;very&nbsp;little&nbsp;for&nbsp;us&nbsp;to&nbsp;go&nbsp;on&nbsp;to&nbsp;try&nbsp;and&nbsp;help&nbsp;out.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;have&nbsp;the&nbsp;logs&nbsp;available&nbsp;and&nbsp;if&nbsp;they&nbsp;contain&nbsp;errors&nbsp;then&nbsp;they&amp;#39;d&nbsp;be&lt;br&gt;<br>
of&nbsp;great&nbsp;help.&nbsp;Has&nbsp;Rabbit&nbsp;been&nbsp;behaving&nbsp;itself&nbsp;since&nbsp;or&nbsp;did&nbsp;you&lt;br&gt;<br>
downgrade&nbsp;back&nbsp;to&nbsp;your&nbsp;previously&nbsp;known-good&nbsp;version?&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;wishes,&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Matthew&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;Aaron&nbsp;Westendorf&lt;br&gt;Senior&nbsp;Software&nbsp;Engineer&lt;br&gt;Agora&nbsp;Games&lt;br&gt;359&nbsp;Broadway&lt;br&gt;Troy,&nbsp;NY&nbsp;12180&lt;br&gt;Phone:&nbsp;518.268.1000&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:aaron@agoragames.com&quot;&gt;aaron@agoragames.com&lt;/a&gt;&nbsp;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.agoragames.com&quot;&gt;www.agoragames.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
