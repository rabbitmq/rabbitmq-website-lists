<tt>
&gt;From&nbsp;the&nbsp;Clustering&nbsp;Guide&nbsp;(emphasis&nbsp;mine):&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&amp;quot;All&nbsp;data/state&nbsp;required&nbsp;for&nbsp;the&nbsp;operation&nbsp;of&nbsp;a&nbsp;RabbitMQ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;broker&nbsp;is&nbsp;replicated&nbsp;across&nbsp;all&nbsp;nodes,&nbsp;for&nbsp;reliability&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scaling,&nbsp;with&nbsp;full&nbsp;ACID&nbsp;properties.&nbsp;&lt;b&gt;&lt;i&gt;An&nbsp;exception&nbsp;to&nbsp;this&nbsp;are<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;queues,&nbsp;which&nbsp;currently&nbsp;only&nbsp;reside&nbsp;on&nbsp;the&nbsp;node&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;created&nbsp;them&lt;/i&gt;&lt;/b&gt;,&nbsp;though&nbsp;they&nbsp;are&nbsp;visible&nbsp;and&nbsp;reachable&nbsp;from&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodes.&nbsp;Future&nbsp;releases&nbsp;of&nbsp;RabbitMQ&nbsp;will&nbsp;introduce&nbsp;migration<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;replication&nbsp;of&nbsp;message&nbsp;queues.&amp;quot;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html#clustering&quot;&gt;http://www.rabbitmq.com/clustering.html#clustering&lt;/a&gt;&lt;br&gt;&lt;br&gt;-Brendan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;Thu,&nbsp;May&nbsp;21,&nbsp;2009&nbsp;at&nbsp;4:26&nbsp;AM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:work@anomalizer.net&quot;&gt;work@anomalizer.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
(rabbit&nbsp;n00b&nbsp;warning)&lt;br&gt;<br>
I&nbsp;have&nbsp;two&nbsp;machines&nbsp;januty00&nbsp;and&nbsp;jaunty01&nbsp;that&nbsp;are&nbsp;running&nbsp;in&nbsp;clustered&lt;br&gt;<br>
mode.&nbsp;There&nbsp;is&nbsp;a&nbsp;durable&nbsp;queue&nbsp;with&nbsp;a&nbsp;few&nbsp;messages&nbsp;in&nbsp;it.&nbsp;Here&nbsp;is&nbsp;the&lt;br&gt;<br>
behaviour&nbsp;I&nbsp;am&nbsp;seeing:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
arvindj@jaunty00&nbsp;~&nbsp;$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;list_queues&lt;br&gt;<br>
Listing&nbsp;queues&nbsp;...&lt;br&gt;<br>
po_box&nbsp; 40&lt;br&gt;<br>
...done.&lt;br&gt;<br>
arvindj@jaunty00&nbsp;~&nbsp;$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;status&lt;br&gt;<br>
Status&nbsp;of&nbsp;node&nbsp;rabbit@jaunty00&nbsp;...&lt;br&gt;<br>
[{running_applications,[{rabbit,&amp;quot;RabbitMQ&amp;quot;,&amp;quot;1.5.4&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {mnesia,&amp;quot;MNESIA&nbsp; CXC&nbsp;138&nbsp;12&amp;quot;,&amp;quot;4.4.7&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {os_mon,&amp;quot;CPO&nbsp; CXC&nbsp;138&nbsp;46&amp;quot;,&amp;quot;2.1.8&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {sasl,&amp;quot;SASL&nbsp; CXC&nbsp;138&nbsp;11&amp;quot;,&amp;quot;2.1.5.4&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {stdlib,&amp;quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&amp;quot;,&amp;quot;1.15.5&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {kernel,&amp;quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&amp;quot;,&amp;quot;2.12.5&amp;quot;}]},&lt;br&gt;<br>
 {nodes,[rabbit@jaunty01,rabbit@jaunty00]},&lt;br&gt;<br>
 {running_nodes,[rabbit@jaunty01,rabbit@jaunty00]}]&lt;br&gt;<br>
...done.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
arvindj@jaunty01&nbsp;~&nbsp;$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;list_queues&lt;br&gt;<br>
Listing&nbsp;queues&nbsp;...&lt;br&gt;<br>
po_box&nbsp; 40&lt;br&gt;<br>
...done.&lt;br&gt;<br>
arvindj@jaunty01&nbsp;~&nbsp;$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;status&lt;br&gt;<br>
Status&nbsp;of&nbsp;node&nbsp;rabbit@jaunty01&nbsp;...&lt;br&gt;<br>
[{running_applications,[{rabbit,&amp;quot;RabbitMQ&amp;quot;,&amp;quot;1.5.4&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {mnesia,&amp;quot;MNESIA&nbsp; CXC&nbsp;138&nbsp;12&amp;quot;,&amp;quot;4.4.7&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {os_mon,&amp;quot;CPO&nbsp; CXC&nbsp;138&nbsp;46&amp;quot;,&amp;quot;2.1.8&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {sasl,&amp;quot;SASL&nbsp; CXC&nbsp;138&nbsp;11&amp;quot;,&amp;quot;2.1.5.4&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {stdlib,&amp;quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&amp;quot;,&amp;quot;1.15.5&amp;quot;},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {kernel,&amp;quot;ERTS&nbsp; CXC&nbsp;138&nbsp;10&amp;quot;,&amp;quot;2.12.5&amp;quot;}]},&lt;br&gt;<br>
 {nodes,[rabbit@jaunty01,rabbit@jaunty00]},&lt;br&gt;<br>
 {running_nodes,[rabbit@jaunty00,rabbit@jaunty01]}]&lt;br&gt;<br>
...done.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;looks&nbsp;fine&nbsp;when&nbsp;both&nbsp;machines&nbsp;are&nbsp;up.&nbsp;Now&nbsp;when&nbsp;jaunty00&nbsp;goes&nbsp;down,&nbsp;the&lt;br&gt;<br>
queue&nbsp;disappears&nbsp;from&nbsp;jaunty01&lt;br&gt;<br>
arvindj@jaunty00&nbsp;~&nbsp;$&nbsp;sudo&nbsp;/etc/init.d/rabbitmq-server&nbsp;stop&lt;br&gt;<br>
Stopping&nbsp;rabbitmq-server:&nbsp;rabbitmq-server.&lt;br&gt;<br>
arvindj@jaunty01&nbsp;~&nbsp;$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;list_queues&lt;br&gt;<br>
Listing&nbsp;queues&nbsp;...&lt;br&gt;<br>
...done.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;I&nbsp;bring&nbsp;januty00&nbsp;back,&nbsp;the&nbsp;queue&nbsp;reappears&nbsp;on&nbsp;jaunty01.The&nbsp;reverse&nbsp;is&lt;br&gt;<br>
not&nbsp;true&nbsp;i.e.&nbsp;when&nbsp;jaunty01&nbsp;goes&nbsp;down,&nbsp;the&nbsp;queue&nbsp;is&nbsp;still&nbsp;available&nbsp;on&lt;br&gt;<br>
jaunty00&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;understanding&nbsp;was&nbsp;that&nbsp;in&nbsp;clustered&nbsp;mode,&nbsp;if&nbsp;any&nbsp;one&nbsp;of&nbsp;the&nbsp;nodes&nbsp;goes&lt;br&gt;<br>
down,&nbsp;the&nbsp;queue&nbsp;is&nbsp;still&nbsp;available&nbsp;on&nbsp;the&nbsp;other&nbsp;nodes.&nbsp;What&nbsp;am&nbsp;I&nbsp;missing&lt;br&gt;<br>
here?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
