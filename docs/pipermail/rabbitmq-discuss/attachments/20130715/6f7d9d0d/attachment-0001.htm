<tt>
We&nbsp;have&nbsp;been&nbsp;using&nbsp;rabbitmq&nbsp;for&nbsp;a&nbsp;number&nbsp;or&nbsp;years&nbsp;with&nbsp;great&nbsp;success,&nbsp;thanks.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;All&nbsp;the&nbsp;following&nbsp;relates&nbsp;to&nbsp;rabbitmq&nbsp;3.1.1&nbsp;on&nbsp;debian.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Recently&nbsp;we&nbsp;started&nbsp;a&nbsp;new&nbsp;project&nbsp;using&nbsp;rabbitmq&nbsp;to&nbsp;handle&nbsp;large&nbsp;amounts&nbsp;of&nbsp;data,&nbsp;over&nbsp;40kHz&nbsp;message&nbsp;rate&nbsp;and&nbsp;message&nbsp;sizes&nbsp;of&nbsp;a&nbsp;few&nbsp;kilobytes.&nbsp;The&nbsp;project&nbsp;depends&nbsp;on&nbsp;using&nbsp;a&nbsp;topic&nbsp;exchange&nbsp;with&nbsp;routing&nbsp;keys&nbsp;of&nbsp;the&nbsp;form&nbsp;AA.BB.CC.DD.EE.&nbsp;Consumers&nbsp;are&nbsp;able&nbsp;to&nbsp;bind&nbsp;a&nbsp;queue&nbsp;with&nbsp;a&nbsp;given&nbsp;wildcard&nbsp;pattern&nbsp;in&nbsp;order&nbsp;to&nbsp;receive&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;message&nbsp;stream&nbsp;published&nbsp;by&nbsp;one&nbsp;publisher.&nbsp;There&nbsp;is&nbsp;always&nbsp;one&nbsp;consumer&nbsp;that&nbsp;binds&nbsp;with&nbsp;the&nbsp;&quot;#&quot;&nbsp;routing&nbsp;key&nbsp;to&nbsp;receive&nbsp;all&nbsp;messages.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;have&nbsp;started&nbsp;testing&nbsp;against&nbsp;a&nbsp;broker&nbsp;running&nbsp;on&nbsp;a&nbsp;machine&nbsp;with&nbsp;8&nbsp;cores,&nbsp;about&nbsp;2GHz&nbsp;each,&nbsp;with&nbsp;32GB&nbsp;ram,&nbsp;and&nbsp;over&nbsp;a&nbsp;terabyte&nbsp;of&nbsp;free&nbsp;disk&nbsp;space.&nbsp;I&nbsp;am&nbsp;publishing&nbsp;with&nbsp;a&nbsp;single&nbsp;erlang&nbsp;client&nbsp;to&nbsp;a&nbsp;topic&nbsp;exchange.&nbsp;I&nbsp;am&nbsp;only&nbsp;able&nbsp;to&nbsp;publish&nbsp;at&nbsp;about&nbsp;15kHz&nbsp;before&nbsp;I&nbsp;see&nbsp;flow&nbsp;control&nbsp;kick&nbsp;in&nbsp;on&nbsp;the&nbsp;management&nbsp;UI&nbsp;for&nbsp;the&nbsp;connection.&nbsp;This&nbsp;is&nbsp;with&nbsp;no&nbsp;queue&nbsp;bound&nbsp;to&nbsp;the&nbsp;exchange,&nbsp;so&nbsp;rabbitmq&nbsp;only&nbsp;needs&nbsp;to&nbsp;receive&nbsp;the&nbsp;messages&nbsp;and&nbsp;drop&nbsp;them.&nbsp;So&nbsp;at&nbsp;15kHz&nbsp;I&nbsp;see&nbsp;flow&nbsp;control&nbsp;kicking&nbsp;in,&nbsp;but&nbsp;the&nbsp;machine&nbsp;is&nbsp;not&nbsp;busy,&nbsp;all&nbsp;8&nbsp;cores&nbsp;show&nbsp;85-95%&nbsp;idle.&nbsp;It&nbsp;looks&nbsp;like&nbsp;the&nbsp;server&nbsp;is&nbsp;basically&nbsp;idle.&nbsp;If&nbsp;I&nbsp;then&nbsp;bind&nbsp;a&nbsp;queue&nbsp;with&nbsp;the&nbsp;routing&nbsp;key&nbsp;&quot;#&quot;&nbsp;I&nbsp;see&nbsp;the&nbsp;enqueue&nbsp;rate&nbsp;hover&nbsp;around&nbsp;5-7kHz.&nbsp;If&nbsp;I&nbsp;add&nbsp;a&nbsp;consumer&nbsp;to&nbsp;keep&nbsp;the&nbsp;queue&nbsp;empty&nbsp;I&nbsp;see&nbsp;no&nbsp;improvement.&nbsp;And&nbsp;during&nbsp;all&nbsp;this&nbsp;the&nbsp;machine&nbsp;still&nbsp;never&nbsp;gets&nbsp;busy.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;confusion&nbsp;lies&nbsp;in&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;flow&nbsp;control&nbsp;kicks&nbsp;in,&nbsp;but&nbsp;the&nbsp;machine&nbsp;is&nbsp;not&nbsp;busy.&nbsp;There&nbsp;is&nbsp;no&nbsp;ram&nbsp;or&nbsp;disk&nbsp;shortage&nbsp;and&nbsp;the&nbsp;machine's&nbsp;NIC&nbsp;can&nbsp;certainly&nbsp;handle&nbsp;much&nbsp;higher&nbsp;bandwidth&nbsp;loads&nbsp;than&nbsp;the&nbsp;15kHz&nbsp;message&nbsp;rate&nbsp;I&nbsp;see&nbsp;in&nbsp;rabbitmq.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;read&nbsp;everything&nbsp;I&nbsp;can&nbsp;on&nbsp;performance&nbsp;and&nbsp;expected&nbsp;to&nbsp;see&nbsp;a&nbsp;message&nbsp;receiving&nbsp;rate,&nbsp;that&nbsp;is&nbsp;with&nbsp;no&nbsp;queues,&nbsp;of&nbsp;over&nbsp;100kHz.&nbsp;Once&nbsp;I&nbsp;add&nbsp;queues,&nbsp;etc&nbsp;I&nbsp;was&nbsp;expecting&nbsp;20kHz&nbsp;or&nbsp;better.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;40kHz&nbsp;throughput&nbsp;is&nbsp;un-realistic&nbsp;at&nbsp;this&nbsp;point.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Mark.&lt;/div&gt;
</tt>
