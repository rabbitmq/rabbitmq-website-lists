<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type='text/css'&gt;p&nbsp;{&nbsp;margin:&nbsp;0;&nbsp;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style='font-family:&nbsp;tahoma,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;#000000'&gt;As&nbsp;I&nbsp;mentioned&nbsp;on&nbsp;the&nbsp;Spring&nbsp;forum&nbsp;-&nbsp;the&nbsp;rabbit&nbsp;template&nbsp;will&nbsp;use&nbsp;the&nbsp;same&nbsp;channel&nbsp;as&nbsp;the&nbsp;listener&nbsp;(by&nbsp;default).&nbsp;If&nbsp;the&nbsp;listener&nbsp;is&nbsp;transactional,&nbsp;the&nbsp;send&nbsp;won't&nbsp;complete&nbsp;until&nbsp;the&nbsp;transaction&nbsp;commits&nbsp;(handler&nbsp;exits).&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://forum.springsource.org/showthread.php?135102-Problems-when-sending-a-message-while-receiving-using-RabbitMQ-RabbitTemplate&amp;amp;p=439178&amp;amp;posted=1#post439178&quot;&gt;http://forum.springsource.org/showthread.php?135102-Problems-when-sending-a-message-while-receiving-using-RabbitMQ-RabbitTemplate&amp;amp;p=439178&amp;amp;posted=1#post439178&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;hr&nbsp;id=&quot;zwchr&quot;&gt;&lt;div&nbsp;style=&quot;color:#000;font-weight:normal;font-style:normal;text-decoration:none;font-family:Helvetica,Arial,sans-serif;font-size:12pt;&quot;&gt;&lt;b&gt;From:&nbsp;&lt;/b&gt;&quot;Marco&nbsp;Pas&quot;&nbsp;&amp;lt;marco.pasopas@gmail.com&amp;gt;&lt;br&gt;&lt;b&gt;To:&nbsp;&lt;/b&gt;rabbitmq-discuss@googlegroups.com&lt;br&gt;&lt;b&gt;Sent:&nbsp;&lt;/b&gt;Friday,&nbsp;February&nbsp;22,&nbsp;2013&nbsp;9:06:52&nbsp;AM&lt;br&gt;&lt;b&gt;Subject:&nbsp;&lt;/b&gt;[rabbitmq-discuss]&nbsp;Problems&nbsp;when&nbsp;sending&nbsp;a&nbsp;message&nbsp;while&nbsp;receiving&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;HI&nbsp;there&nbsp;i&nbsp;am&nbsp;trying&nbsp;to&nbsp;send&nbsp;a&nbsp;message&nbsp;in&nbsp;the&nbsp;handleMessage&nbsp;method,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;this&nbsp;seems&nbsp;to&nbsp;fail&nbsp;somehow.&nbsp;Is&nbsp;there&nbsp;a&nbsp;reason&nbsp;why&nbsp;i&nbsp;cannot&nbsp;send&nbsp;a&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;message&nbsp;to&nbsp;rabbitMQ&nbsp;when&nbsp;processing&nbsp;a&nbsp;message?&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;//&nbsp;receives&nbsp;a&nbsp;message&nbsp;and&nbsp;replies&nbsp;to&nbsp;the&nbsp;reply&nbsp;queue&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;void&nbsp;handleMessage(Message&nbsp;message)&nbsp;{&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;//&nbsp;send&nbsp;a&nbsp;message&nbsp;to&nbsp;the&nbsp;exchange&nbsp;and&nbsp;waits&nbsp;for&nbsp;the&nbsp;reply..&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;String&nbsp;result&nbsp;=&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;rabbitTemplate.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;convertSendAndReceive(&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;myCustomExch&quot;,&nbsp;&quot;myRoutingKey&quot;,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&quot;test&nbsp;content&quot;)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;//&nbsp;determine&nbsp;the&nbsp;reply&nbsp;queue&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;def&nbsp;destQueue&nbsp;=&nbsp;message.messageProperties.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;replyTo&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;//&nbsp;code&nbsp;omitted&nbsp;that&nbsp;processes&nbsp;the&nbsp;message&nbsp;and&nbsp;uses&nbsp;the&nbsp;previously&nbsp;result&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;....&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;//&nbsp;send&nbsp;the&nbsp;content&nbsp;back&nbsp;to&nbsp;the&nbsp;reply&nbsp;queue&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;rabbitSend&nbsp;destQueue,&nbsp;responseJson&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;}&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;When&nbsp;i&nbsp;put&nbsp;the&nbsp;rabbitTemplate.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;convertSendAndReceive(&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;myCustomExch&quot;,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&quot;myRoutingKey&quot;,&nbsp;&quot;test&nbsp;content&quot;)&nbsp;method&nbsp;in&nbsp;a&nbsp;non&nbsp;handleMessage&nbsp;method&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;it&nbsp;works&nbsp;without&nbsp;problems.&nbsp;Am&nbsp;i&nbsp;not&nbsp;allowed&nbsp;to&nbsp;send&nbsp;and&nbsp;receive&nbsp;inside&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;a&nbsp;handleMessage&nbsp;method&nbsp;that&nbsp;is&nbsp;also&nbsp;handling&nbsp;stuf?&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&quot;&gt;/Marco&lt;/span&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;br&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
