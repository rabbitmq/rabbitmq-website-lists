<tt>
&lt;html&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;style&nbsp;id=&quot;owaParaStyle&quot;&nbsp;type=&quot;text/css&quot;&gt;P&nbsp;{margin-top:0;margin-bottom:0;}&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;ocsi=&quot;0&quot;&nbsp;fpstyle=&quot;1&quot;&gt;<br>
&lt;div&nbsp;style=&quot;direction:&nbsp;ltr;font-family:&nbsp;Tahoma;color:&nbsp;#000000;font-size:&nbsp;10pt;&quot;&gt;thank&nbsp;you&nbsp;for&nbsp;your&nbsp;reactivity&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;b&gt;&lt;i&gt;&lt;u&gt;channel.queueDeclarePassive(queueName)&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;queue&nbsp;doesn't&nbsp;exist.&lt;/u&gt;&lt;/i&gt;&lt;/b&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Yes&nbsp;but&nbsp;the&nbsp;solution&nbsp;needs&nbsp;to&nbsp;use&nbsp;a&nbsp;Channel&nbsp;object,&nbsp;use&nbsp;@Inject&nbsp;of&nbsp;the&nbsp;factory,&nbsp;and&nbsp;it&nbsp;is&nbsp;not&nbsp;a&nbsp;boolean&nbsp;method&nbsp;so&nbsp;utilisation&nbsp;of&nbsp;spring&nbsp;amqp&nbsp;has&nbsp;no&nbsp;avantage&nbsp;and&nbsp;more&nbsp;it&nbsp;closes&nbsp;the&nbsp;channel&nbsp;connection!!!!we&nbsp;have&nbsp;to&nbsp;declare&nbsp;az&nbsp;new&nbsp;channel&nbsp;because&nbsp;spring&nbsp;create<br>
&nbsp;one&nbsp;by&nbsp;default&nbsp;plus&nbsp;all&nbsp;my&nbsp;consumers...for&nbsp;the&nbsp;moment&nbsp;my&nbsp;code&nbsp;is&nbsp;like&nbsp;this&nbsp;(in&nbsp;a&nbsp;wicket&nbsp;appplication)&nbsp;:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@Inject&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;b&gt;AmqpTemplate&nbsp;amqpTemplate;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;amqpTemplate.convertAndSend(&amp;quot;queue&amp;quot;,&nbsp;messageField.getValue().toString());&lt;/b&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
my&nbsp;spring&nbsp;configuration&nbsp;:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;lt;!--&nbsp;now&nbsp;we&nbsp;can&nbsp;use&nbsp;--&amp;gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;context:property-placeholder&nbsp;location=&amp;quot;${ext.properties.dir}&amp;quot;&nbsp;/&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;rabbit:connection-factory&nbsp;id=&amp;quot;rabbitConnectionFactory&amp;quot;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;host=&amp;quot;${config.amqp.server}&amp;quot;&nbsp;username=&amp;quot;${config.amqp.username}&amp;quot;&nbsp;password=&amp;quot;${config.amqp.password}&amp;quot;&nbsp;/&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;!--&nbsp;Creates&nbsp;a&nbsp;org.springframework.amqp.rabbit.core.RabbitTemplate&nbsp;for&nbsp;access<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;to&nbsp;the&nbsp;broker&nbsp;--&amp;gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;rabbit:template&nbsp;id=&amp;quot;amqpTemplate&amp;quot;&nbsp;connection-factory=&amp;quot;rabbitConnectionFactory&amp;quot;&nbsp;/&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;!--&nbsp;Creates&nbsp;a&nbsp;queue&nbsp;for&nbsp;consumers&nbsp;to&nbsp;retrieve&nbsp;messages&nbsp;--&amp;gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;rabbit:queue&nbsp;id=&amp;quot;queue&amp;quot;&nbsp;name=&amp;quot;${config.amqp.queuename}&amp;quot;&nbsp;/&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;bean&nbsp;id=&amp;quot;messageListener&amp;quot;&nbsp;class=&amp;quot;lu.pragmaconsult.geocamp.receiver.MessageHandler&amp;quot;&nbsp;/&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;rabbit:listener-container&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;connection-factory=&amp;quot;rabbitConnectionFactory&amp;quot;&nbsp;concurrency=&amp;quot;${config.amqp.nbconsumer}&amp;quot;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;auto-startup=&amp;quot;true&amp;quot;&amp;gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;rabbit:listener&nbsp;queues=&amp;quot;queue&amp;quot;&nbsp;ref=&amp;quot;messageListener&amp;quot;&nbsp;/&amp;gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/rabbit:listener-container&amp;gt;&lt;/b&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;i&nbsp;use&nbsp;your&nbsp;advice&nbsp;:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@Inject&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;b&gt;AmqpTemplate&nbsp;amqpTemplate;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;/b&gt;&lt;b&gt;&lt;font&nbsp;color=&quot;FF0000&quot;&gt;Channel&nbsp;channel;&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;FF0000&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;@Inject&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ConnectionFactory&nbsp;rabbitConnectionFactory;&lt;/font&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;amqpTemplate.convertAndSend(&amp;quot;queue&amp;quot;,&nbsp;messageField.getValue().toString());&lt;/b&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;FF0000&quot;&gt;&lt;b&gt;channel&nbsp;=(Channel)&nbsp;rabbitConnectionFactory.createConnection().createChannel(true);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;try&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;channel.queueDeclarePassive(&amp;quot;queue/GeoCampQueue3&amp;quot;);&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&nbsp;catch&nbsp;(IOException&nbsp;e)&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//&nbsp;TODO&nbsp;Auto-generated&nbsp;catch&nbsp;block&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;e.printStackTrace();&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//maybe&nbsp;add&nbsp;the&nbsp;code&nbsp;for&nbsp;verify&nbsp;the&nbsp;queue&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;amqpTemplate.convertAndSend(&amp;quot;queue/GeoCampQueue3&amp;quot;,&nbsp;messageField.getValue().toString());&lt;/b&gt;&lt;/font&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
it&nbsp;is&nbsp;not&nbsp;what&nbsp;i&nbsp;want&nbsp;moreover&nbsp;i&nbsp;want&nbsp;the&nbsp;name&nbsp;of&nbsp;queue&nbsp;come&nbsp;from&nbsp;spring&nbsp;and&nbsp;not&nbsp;in&nbsp;code.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;b&gt;&lt;i&gt;No,&nbsp;you&nbsp;can't&nbsp;specify&nbsp;the&nbsp;queue&nbsp;name&nbsp;in&nbsp;the&nbsp;send&nbsp;methods&nbsp;-&nbsp;you&nbsp;don't&nbsp;send&nbsp;to&nbsp;a&nbsp;queue,&nbsp;you&nbsp;send&nbsp;to&nbsp;an&nbsp;exchange,&nbsp;and&nbsp;it&nbsp;routes&nbsp;it&nbsp;to&nbsp;the&nbsp;queue.&lt;/i&gt;&lt;/b&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
if&nbsp;the&nbsp;queue&nbsp;is&nbsp;binding&nbsp;to&nbsp;the&nbsp;exchange&nbsp;by&nbsp;default,&nbsp;it&nbsp;is&nbsp;in&nbsp;direct&nbsp;so&nbsp;the&nbsp;queue&nbsp;name&nbsp;is&nbsp;my&nbsp;&amp;quot;routing&nbsp;key&amp;quot;,&nbsp;if&nbsp;i&nbsp;put&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;exchange&nbsp;(&amp;quot;&amp;quot;)&nbsp;nothing&nbsp;happening&lt;br&gt;<br>
&lt;br&gt;<br>
i&nbsp;try&nbsp;this&nbsp;:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;rabbit:template&nbsp;id=&amp;quot;amqpTemplate&amp;quot;&nbsp;connection-factory=&amp;quot;rabbitConnectionFactory&amp;quot;&nbsp;queue=&amp;quot;queue&amp;quot;&nbsp;exchange=&amp;quot;&amp;quot;&nbsp;routing-key=&amp;quot;&amp;quot;/&amp;gt;&lt;/b&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
but&nbsp;the&nbsp;exchange&nbsp;and&nbsp;routing&nbsp;key&nbsp;is&nbsp;like&nbsp;this&nbsp;by&nbsp;default,&nbsp;so&nbsp;my&nbsp;template&nbsp;don't&nbsp;send&nbsp;automatiqueliy&nbsp;to&nbsp;my&nbsp;queue&nbsp;directly&nbsp;by&nbsp;spring&nbsp;configuration.....&lt;br&gt;<br>
&lt;br&gt;<br>
have&nbsp;you&nbsp;got&nbsp;any&nbsp;idéas????&lt;br&gt;<br>
&amp;nbsp;&lt;br&gt;<br>
________________________________________&lt;br&gt;<br>
De&nbsp;:&nbsp;rabbitmq-discuss-bounces@lists.rabbitmq.com&nbsp;[rabbitmq-discuss-bounces@lists.rabbitmq.com]&nbsp;de&nbsp;la&nbsp;part&nbsp;de&nbsp;Gary&nbsp;Russell&nbsp;[grussell@vmware.com]&lt;br&gt;<br>
Date&nbsp;d'envoi&nbsp;:&nbsp;vendredi&nbsp;22&nbsp;février&nbsp;2013&nbsp;17:22&lt;br&gt;<br>
À&nbsp;:&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&lt;br&gt;<br>
Objet&nbsp;:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;test&nbsp;of&nbsp;a&nbsp;existing&nbsp;queue&lt;br&gt;<br>
&lt;br&gt;<br>
channel.queueDeclarePassive(queueName)&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;queue&nbsp;doesn't&nbsp;exist.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;get&nbsp;a&nbsp;channel&nbsp;by&lt;br&gt;<br>
&lt;br&gt;<br>
Channel&nbsp;channel&nbsp;=&nbsp;factory.createConnection().createChannel(false);&lt;br&gt;<br>
&lt;br&gt;<br>
where&nbsp;factory&nbsp;is&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;CachingConnectionFactory.&lt;br&gt;<br>
&lt;br&gt;<br>
No,&nbsp;you&nbsp;can't&nbsp;specify&nbsp;the&nbsp;queue&nbsp;name&nbsp;in&nbsp;the&nbsp;send&nbsp;methods&nbsp;-&nbsp;you&nbsp;don't&nbsp;send&nbsp;to&nbsp;a&nbsp;queue,&nbsp;you&nbsp;send&nbsp;to&nbsp;an&nbsp;exchange,&nbsp;and&nbsp;it&nbsp;routes&nbsp;it&nbsp;to&nbsp;the&nbsp;queue.&lt;br&gt;<br>
&lt;br&gt;<br>
-----&nbsp;Original&nbsp;Message&nbsp;-----&lt;br&gt;<br>
From:&nbsp;&amp;quot;Cyril&nbsp;LECLERC&amp;quot;&nbsp;&amp;lt;Cyril.LECLERC@pragmaconsult.lu&amp;gt;&lt;br&gt;<br>
To:&nbsp;&amp;quot;Discussions&nbsp;about&nbsp;RabbitMQ&amp;quot;&nbsp;&amp;lt;rabbitmq-discuss@lists.rabbitmq.com&amp;gt;&lt;br&gt;<br>
Sent:&nbsp;Friday,&nbsp;February&nbsp;22,&nbsp;2013&nbsp;10:54:53&nbsp;AM&lt;br&gt;<br>
Subject:&nbsp;[rabbitmq-discuss]&nbsp;test&nbsp;of&nbsp;a&nbsp;existing&nbsp;queue&lt;br&gt;<br>
&lt;br&gt;<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
How&nbsp;we&nbsp;can&nbsp;test&nbsp;if&nbsp;a&nbsp;queue&nbsp;exits&nbsp;in&nbsp;application?&nbsp;Without&nbsp;the&nbsp;queueDeclare&nbsp;because&nbsp;it&nbsp;is&nbsp;not&nbsp;what&nbsp;i&nbsp;want,&nbsp;indeed,&nbsp;if&nbsp;i&nbsp;use&nbsp;amqpTemplate.convertAndSend(),&nbsp;and&nbsp;the&nbsp;queue&nbsp;does'nt&nbsp;existing,&nbsp;nothing&nbsp;will&nbsp;happen,&nbsp;but&nbsp;i&nbsp;have&nbsp;to&nbsp;know&nbsp;if&nbsp;the&nbsp;queue&nbsp;configured&nbsp;is&nbsp;existing,<br>
&nbsp;but&nbsp;not&nbsp;create&nbsp;it...because&nbsp;we&nbsp;use&nbsp;spring&nbsp;amqp.&lt;br&gt;<br>
&lt;br&gt;<br>
Moreover&nbsp;how&nbsp;we&nbsp;can&nbsp;configure&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;queue&nbsp;in&nbsp;this&nbsp;method&nbsp;(amqpTemplate.convertAndSend())&nbsp;because&nbsp;it&nbsp;takes&nbsp;one&nbsp;string&nbsp;argument&nbsp;but&nbsp;when&nbsp;it&nbsp;is&nbsp;configured&nbsp;in&nbsp;spring&nbsp;i&nbsp;don't&nbsp;have&nbsp;to&nbsp;configure&nbsp;in&nbsp;the&nbsp;code&nbsp;i&nbsp;want&nbsp;to&nbsp;use&nbsp;spring&nbsp;configuration&nbsp;...&lt;br&gt;<br>
&lt;br&gt;<br>
thanks....&lt;br&gt;<br>
&lt;br&gt;<br>
Cyril&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
rabbitmq-discuss@lists.rabbitmq.com&lt;br&gt;<br>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
rabbitmq-discuss@lists.rabbitmq.com&lt;br&gt;<br>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
This&nbsp;email&nbsp;was&nbsp;Virus&nbsp;checked&nbsp;by&nbsp;Pragma&nbsp;Consult&nbsp;Security&nbsp;Gateway.&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
