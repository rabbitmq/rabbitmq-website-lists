<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;==&nbsp;8-Nov-2008::20:08:59&nbsp;==&nbsp;ERROR&nbsp;-&nbsp;&amp;nbsp;emulator&lt;br&gt;<br>
&amp;gt;&nbsp;Error&nbsp;in&nbsp;process&nbsp;&amp;lt;0.191.0&amp;gt;&nbsp;on&nbsp;node&nbsp;&amp;#39;xhg_rel@ender&amp;#39;&nbsp;with&nbsp;exit&nbsp;value:&lt;br&gt;<br>
&amp;gt;&nbsp;{badarg,[{erlang,list_to_binary,[{frame_rec,&amp;lt;&amp;lt;217&lt;br&gt;<br>
&amp;gt;&nbsp;bytes&amp;gt;&amp;gt;,1226192940,0,active,ok,0,undefined,0,&amp;lt;&amp;lt;33&lt;br&gt;<br>
&amp;gt;&nbsp;bytes&amp;gt;&amp;gt;}]},{rabbit_binary_generator,create_frame,3},{rabbit_binary_generator,build_content_frames,5},{rabbit_binary_generator,build_simple_content_frames...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;That&nbsp;is&nbsp;a&nbsp;fair&nbsp;point.&nbsp;May&nbsp;I&nbsp;suggest&nbsp;that&nbsp;we&nbsp;let&nbsp;the&nbsp;application&nbsp;choose&lt;br&gt;<br>
what&nbsp;it&nbsp;wants&nbsp;to&nbsp;do&nbsp;-&nbsp;adding&nbsp;an&nbsp;equivalent&nbsp;call&nbsp;command&nbsp;would&nbsp;be&lt;br&gt;<br>
trivial.&nbsp;What&nbsp;do&nbsp;you&nbsp;think?&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;I&nbsp;think&nbsp;that&amp;#39;s&nbsp;a&nbsp;very&nbsp;fair&nbsp;compromise.&lt;br&gt;&amp;nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&amp;gt;&nbsp;What&nbsp;I&nbsp;was&nbsp;trying&nbsp;to&nbsp;describe&nbsp;was&nbsp;having&nbsp;a&nbsp;gen_server&nbsp;or&nbsp;gen_fsm&nbsp;that&nbsp;has&nbsp;a&lt;br&gt;<br>
&amp;gt;&nbsp;clause&nbsp;something&nbsp;like&nbsp;this;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;handle_info(#&amp;#39;channel.flow&amp;#39;{active&nbsp;=&nbsp;false},&nbsp;State)&nbsp;-&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{noreply,&nbsp;State#state{channel_flow&nbsp;=&nbsp;false}};&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;handle_info(#&amp;#39;channel.flow&amp;#39;{active&nbsp;=&nbsp;true},&nbsp;State)&nbsp;-&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{noreply,&nbsp;State#state{channel_flow&nbsp;=&nbsp;true}};&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Sure,&nbsp;but&nbsp;this&nbsp;is&nbsp;all&nbsp;on&nbsp;the&nbsp;receiving&nbsp;process&amp;#39;&nbsp;side,&nbsp;so&nbsp;whether&nbsp;it&lt;br&gt;<br>
handles&nbsp;it&nbsp;as&nbsp;a&nbsp;gen_server&nbsp;or&nbsp;as&nbsp;a&nbsp;plain&nbsp;jane&nbsp;receive&nbsp;block&nbsp;*should*&lt;br&gt;<br>
be&nbsp;irrelevant.&nbsp;Furthermore,&nbsp;the&nbsp;receiving&nbsp;process&nbsp;may&nbsp;just&nbsp;ignore&nbsp;the&lt;br&gt;<br>
notification&nbsp;or&nbsp;it&nbsp;may&nbsp;not&nbsp;register&nbsp;itself&nbsp;in&nbsp;the&nbsp;first&nbsp;place.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&nbsp;think&nbsp;the&nbsp;more&nbsp;important&nbsp;side&nbsp;of&nbsp;things&nbsp;is&nbsp;how&nbsp;the&nbsp;channel&lt;br&gt;<br>
process&nbsp;propagates&nbsp;the&nbsp;event&nbsp;that&nbsp;it&nbsp;receives&nbsp;from&nbsp;the&nbsp;broker.&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;this&nbsp;is&nbsp;what&nbsp;I&nbsp;have&nbsp;done&nbsp;-&nbsp;when&nbsp;the&nbsp;amqp_channel&nbsp;receives&nbsp;the&lt;br&gt;<br>
#&amp;#39;channel.flow&amp;#39;{active&nbsp;=&nbsp;false}&nbsp;from&nbsp;the&nbsp;broker,&nbsp;it&nbsp;sends&nbsp;the&lt;br&gt;<br>
registered&nbsp;listener&nbsp;a&nbsp;pause&nbsp;atom&nbsp;-&nbsp;in&nbsp;the&nbsp;reverse&nbsp;it&nbsp;sends&nbsp;it&nbsp;a&nbsp;resume&lt;br&gt;<br>
atom.&lt;br&gt;<br>
&lt;br&gt;<br>
Hence&nbsp;what&nbsp;you&nbsp;are&nbsp;suggesting&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;what&nbsp;I&nbsp;have&nbsp;already&nbsp;done&nbsp;:-)&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;So&nbsp;does&nbsp;that&nbsp;mean&nbsp;that&nbsp;when&nbsp;a&nbsp;consumer&nbsp;wants&nbsp;to&nbsp;perform&nbsp;a&nbsp;channel.flow,&nbsp;there&nbsp;will&nbsp;be&nbsp;a&nbsp;call&nbsp;made&nbsp;available&nbsp;on&nbsp;the&nbsp;channel,&nbsp;say&nbsp;amqp_channel:flow(true|false)?&nbsp;Otherwise,&nbsp;if&nbsp;the&nbsp;consumer&nbsp;sends&nbsp;a&nbsp;channel.flow&nbsp;command&nbsp;directly,&nbsp;it&nbsp;is&nbsp;inconsistent&nbsp;on&nbsp;an&nbsp;API&nbsp;level&nbsp;with&nbsp;the&nbsp;producer,&nbsp;which&nbsp;only&nbsp;receives&amp;nbsp;&nbsp;pause&nbsp;and&nbsp;resume&nbsp;atoms.&nbsp;(a)&nbsp;Do&nbsp;you&nbsp;agree&nbsp;and&nbsp;(b)&nbsp;How&nbsp;do&nbsp;you&nbsp;plan&nbsp;to&nbsp;handle&nbsp;that&nbsp;side&nbsp;of&nbsp;it?&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Is&nbsp;this&nbsp;a&nbsp;re-transmission&nbsp;issue&nbsp;in&nbsp;your&nbsp;mail&nbsp;;-)&lt;/blockquote&gt;&lt;div&gt;No,&nbsp;it&amp;#39;s&nbsp;a&nbsp;re-transmission&nbsp;issue&nbsp;in&nbsp;my&nbsp;brain&nbsp;:)&nbsp;&lt;br&gt;<br>
&lt;br&gt;Ed&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
