<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;I'm&nbsp;trying&nbsp;to&nbsp;understand&nbsp;the&nbsp;CORRECT&nbsp;way&nbsp;of&nbsp;handling&nbsp;messages&nbsp;that&nbsp;cannot&nbsp;be&nbsp;processed,&nbsp;for&nbsp;some&nbsp;reason.&nbsp;&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;two&nbsp;consumers&nbsp;listening&nbsp;for&nbsp;messages&nbsp;(in&nbsp;a&nbsp;worker&nbsp;queue&nbsp;setup,&nbsp;as&nbsp;described&nbsp;here:&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/tutorials/tutorial-two-python.html&quot;&gt;http://www.rabbitmq.com/tutorials/tutorial-two-python.html&lt;/a&gt;).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Scenario&nbsp;A:&lt;div&gt;A&nbsp;message&nbsp;is&nbsp;received&nbsp;and&nbsp;processed,&nbsp;then&nbsp;it's&nbsp;ack'd&nbsp;using&nbsp;basic_ack.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Scenario&nbsp;B:&lt;div&gt;A&nbsp;message&nbsp;is&nbsp;received&nbsp;and&nbsp;processed,&nbsp;but&nbsp;an&nbsp;error&nbsp;occurs.&nbsp;&amp;nbsp;An&nbsp;error&nbsp;like&nbsp;my&nbsp;consumer&nbsp;loses&nbsp;connection&nbsp;to&nbsp;the&nbsp;DB.&nbsp;&amp;nbsp;In&nbsp;this&nbsp;case,&nbsp;I&nbsp;don't&nbsp;issue&nbsp;a&nbsp;basic_ack&nbsp;(and&nbsp;my&nbsp;consumer&nbsp;remains&nbsp;running).&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;looking&nbsp;at&nbsp;the&nbsp;docs,&nbsp;I&nbsp;understand&nbsp;if&nbsp;a&nbsp;message&nbsp;is&nbsp;not&nbsp;acknowledged&nbsp;and&nbsp;the&nbsp;consumer&nbsp;dies,&nbsp;rabbit&nbsp;will&nbsp;requeue&nbsp;the&nbsp;message&nbsp;for&nbsp;redelivery.&nbsp;&amp;nbsp;But&nbsp;what&nbsp;if&nbsp;the&nbsp;consumer&nbsp;remains&nbsp;running&nbsp;(and&nbsp;I&nbsp;just&nbsp;can't&nbsp;process&nbsp;the&nbsp;message).&nbsp;&amp;nbsp;Should&nbsp;I&nbsp;not&nbsp;issue&nbsp;the&nbsp;basic_ack&nbsp;(will&nbsp;it&nbsp;get&nbsp;sent&nbsp;to&nbsp;another&nbsp;consumer)?&nbsp;&amp;nbsp;Or&nbsp;should&nbsp;I&nbsp;issue&nbsp;the&nbsp;basic_ack&nbsp;and&nbsp;then&nbsp;reject&nbsp;the&nbsp;message?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm&nbsp;asking&nbsp;because&nbsp;earlier&nbsp;today&nbsp;I&nbsp;noticed&nbsp;I&nbsp;had&nbsp;an&nbsp;&quot;unacknowledged&quot;&nbsp;message&nbsp;on&nbsp;my&nbsp;queue.&nbsp;&amp;nbsp;&nbsp;With&nbsp;the&nbsp;unacknowledged&nbsp;message&nbsp;on&nbsp;the&nbsp;queue,&nbsp;only&nbsp;one&nbsp;worker&nbsp;consumer&nbsp;was&nbsp;receiving&nbsp;all&nbsp;messages.&nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;[root@web2&nbsp;tmp]#&nbsp;rabbitmqctl&nbsp;list_queues&nbsp;-p&nbsp;/&nbsp;messages&nbsp;messages_unacknowledged&nbsp;messages_ready&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;Listing&nbsp;queues&nbsp;...&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;1&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;1&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;0&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial;&nbsp;&quot;&gt;The&nbsp;other&nbsp;worker&nbsp;was&nbsp;in&nbsp;a&nbsp;'stale'&nbsp;state&nbsp;and&nbsp;not&nbsp;receiving&nbsp;any&nbsp;messages.&nbsp;&amp;nbsp;I'm&nbsp;just&nbsp;trying&nbsp;to&nbsp;understand&nbsp;if&nbsp;my&nbsp;logic&nbsp;on&nbsp;not&nbsp;ack'ing&nbsp;a&nbsp;message&nbsp;is&nbsp;correct&nbsp;and&nbsp;if&nbsp;that's&nbsp;how&nbsp;i&nbsp;ended&nbsp;up&nbsp;with&nbsp;an&nbsp;unacknowledged&nbsp;message.&nbsp;&amp;nbsp;Also&nbsp;trying&nbsp;to&nbsp;understand&nbsp;why&nbsp;my&nbsp;worker&nbsp;just&nbsp;stopped&nbsp;receiving&nbsp;messages.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial;&nbsp;&quot;&gt;Any&nbsp;guidance&nbsp;would&nbsp;be&nbsp;appreciated!&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Arial;&nbsp;&quot;&gt;Thanks&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
