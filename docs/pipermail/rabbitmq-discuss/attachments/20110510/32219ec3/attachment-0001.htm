<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;10/05/11&nbsp;11:01,&nbsp;Simone&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:9673128.8763.1305021708674.JavaMail.geo-discussion-forums@vbjh33&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Ok&nbsp;so&nbsp;I&nbsp;get&nbsp;publisher&nbsp;confirms&nbsp;have&nbsp;to&nbsp;do&nbsp;with&nbsp;messages<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getting&nbsp;from&nbsp;the&nbsp;publisher&nbsp;to&nbsp;the&nbsp;broker,&nbsp;while&nbsp;acks&nbsp;concern&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;link&nbsp;from&nbsp;the&nbsp;broker&nbsp;to&nbsp;the&nbsp;consumer,&nbsp;correct?&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;With&nbsp;strongest&nbsp;delivery&nbsp;warranty&nbsp;I&nbsp;mean&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;once&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;has&nbsp;been&nbsp;published&nbsp;by&nbsp;a&nbsp;publisher&nbsp;it&nbsp;is&nbsp;going&nbsp;to&nbsp;reach&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;consumers&nbsp;supposed&nbsp;to&nbsp;be&nbsp;receiving&nbsp;it.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Therefore&nbsp;to&nbsp;achieve&nbsp;this&nbsp;sort&nbsp;of&nbsp;thing&nbsp;without&nbsp;using<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transactions&nbsp;I&nbsp;have&nbsp;to&nbsp;use&nbsp;both&nbsp;publisher&nbsp;confirms&nbsp;and&nbsp;consumer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acks,&nbsp;right?&nbsp;Just&nbsp;trying&nbsp;to&nbsp;get&nbsp;a&nbsp;better&nbsp;understanding&nbsp;at&nbsp;how<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;works.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;a&nbsp;&quot;once&nbsp;and&nbsp;only&nbsp;once&quot;&nbsp;QoS,&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;&quot;at&nbsp;least<br>
&nbsp;&nbsp;&nbsp;&nbsp;once&quot;,&nbsp;then&nbsp;you'll&nbsp;need&nbsp;to&nbsp;deal&nbsp;with&nbsp;duplicates.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;use&nbsp;publisher&nbsp;acks,&nbsp;then,&nbsp;when&nbsp;you&nbsp;receive&nbsp;the&nbsp;publisher&nbsp;ack<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;broker&nbsp;you&nbsp;know&nbsp;the&nbsp;message&nbsp;has&nbsp;reached&nbsp;the&nbsp;server&nbsp;ok.<br>
&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;if&nbsp;the&nbsp;server&nbsp;crashes,&nbsp;then&nbsp;it's&nbsp;possible&nbsp;the&nbsp;message&nbsp;did<br>
&nbsp;&nbsp;&nbsp;&nbsp;reach&nbsp;the&nbsp;server&nbsp;ok,&nbsp;but&nbsp;you&nbsp;didn't&nbsp;get&nbsp;the&nbsp;ack&nbsp;back&nbsp;before&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;died.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If,&nbsp;on&nbsp;recovery,&nbsp;you&nbsp;resend&nbsp;any&nbsp;messages&nbsp;that&nbsp;you&nbsp;didn't&nbsp;receive<br>
&nbsp;&nbsp;&nbsp;&nbsp;publisher&nbsp;acks&nbsp;for,&nbsp;there&nbsp;is&nbsp;a&nbsp;possibility&nbsp;of&nbsp;duplicate&nbsp;messages&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;server.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Similarly&nbsp;with&nbsp;consuming&nbsp;messages,&nbsp;if&nbsp;you&nbsp;ack&nbsp;messages&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;consumer&nbsp;once&nbsp;they&nbsp;have&nbsp;been&nbsp;consumed,&nbsp;then&nbsp;if&nbsp;the&nbsp;server&nbsp;crashes<br>
&nbsp;&nbsp;&nbsp;&nbsp;after&nbsp;a&nbsp;message&nbsp;has&nbsp;been&nbsp;consumed&nbsp;but&nbsp;before&nbsp;the&nbsp;ack&nbsp;for&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;is&nbsp;processed&nbsp;on&nbsp;the&nbsp;server,&nbsp;on&nbsp;recovery&nbsp;of&nbsp;the&nbsp;server&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;may&nbsp;be&nbsp;redelivered.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;you&nbsp;build&nbsp;your&nbsp;message&nbsp;consumption&nbsp;logic&nbsp;to&nbsp;be&nbsp;idempotent&nbsp;(i.e.<br>
&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;harm&nbsp;comes&nbsp;in&nbsp;processing&nbsp;the&nbsp;same&nbsp;message&nbsp;twice),&nbsp;you&nbsp;can&nbsp;get&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;effective&quot;&nbsp;once&nbsp;and&nbsp;only&nbsp;once&nbsp;QoS.&nbsp;This&nbsp;may&nbsp;be&nbsp;hard&nbsp;or&nbsp;easy<br>
&nbsp;&nbsp;&nbsp;&nbsp;depending&nbsp;on&nbsp;your&nbsp;application&nbsp;semantics.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:9673128.8763.1305021708674.JavaMail.geo-discussion-forums@vbjh33&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Thanks&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;fieldset&nbsp;class=&quot;mimeAttachmentHeader&quot;&gt;&lt;/fieldset&gt;<br>
_______________________________________________<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
