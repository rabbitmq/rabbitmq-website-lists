<tt>
Hi&nbsp;Ed,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;what&nbsp;i&nbsp;am&nbsp;thinking:&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;for&nbsp;option&nbsp;1,&nbsp;have&nbsp;you&nbsp;tried&nbsp;the&nbsp;RPC&nbsp;style?&nbsp;&amp;nbsp;take&nbsp;a&nbsp;look&nbsp;at&nbsp;this&amp;nbsp;<br>
&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/tutorials/tutorial-six-java.html&quot;&gt;http://www.rabbitmq.com/tutorials/tutorial-six-java.html&lt;/a&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;for&nbsp;option&nbsp;2,&nbsp;i&nbsp;think&nbsp;you&nbsp;may&nbsp;need&nbsp;a&nbsp;smart&nbsp;dispatcher&nbsp;between&nbsp;the&nbsp;queue&nbsp;and&nbsp;all&nbsp;those&nbsp;consumers.&nbsp;it&nbsp;will&nbsp;consume&nbsp;messages&nbsp;from&nbsp;the&nbsp;queue&nbsp;and&nbsp;then&nbsp;dispatch&nbsp;every&nbsp;single&nbsp;message&nbsp;by&nbsp;ticket&nbsp;number&nbsp;to&nbsp;different&nbsp;consumers.&nbsp;The&nbsp;dispatcher&nbsp;need&nbsp;to&nbsp;monitor&nbsp;the&nbsp;status&nbsp;of&nbsp;each&nbsp;consumer,&nbsp;like&nbsp;is&nbsp;it&nbsp;busy&nbsp;or&nbsp;which&nbsp;ticket&nbsp;is&nbsp;it&nbsp;processing?&lt;br&gt;&lt;br&gt;On&nbsp;Tuesday,&nbsp;June&nbsp;26,&nbsp;2012&nbsp;10:30:34&nbsp;AM&nbsp;UTC+8,&nbsp;Ed&nbsp;Levin&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;considering&nbsp;RabbitMQ&nbsp;for&nbsp;a&nbsp;project&nbsp;with&nbsp;the&nbsp;following&nbsp;requirement&nbsp;and&nbsp;wanted&nbsp;to&nbsp;get&nbsp;some&nbsp;feedback&nbsp;since&nbsp;I&nbsp;am&nbsp;relatively&nbsp;new&nbsp;to&nbsp;message&nbsp;queuing:&lt;br&gt;&lt;br&gt;To&nbsp;start,&nbsp;I&nbsp;have&nbsp;a&nbsp;queue&nbsp;with&nbsp;a&nbsp;number&nbsp;of&nbsp;consumers&nbsp;assigned&nbsp;for&nbsp;concurrent&nbsp;processing.&nbsp;The&nbsp;messages&nbsp;published&nbsp;to&nbsp;a&nbsp;queue&nbsp;will&nbsp;represent&nbsp;tickets&nbsp;coming&nbsp;from&nbsp;a&nbsp;ticketing&nbsp;system&nbsp;and&nbsp;some&nbsp;may&nbsp;be&nbsp;associated&nbsp;with&nbsp;the&nbsp;same&nbsp;ticket&nbsp;(e.g.&nbsp;same&nbsp;ticket&nbsp;number&nbsp;on&nbsp;different&nbsp;messages&nbsp;in&nbsp;the&nbsp;queue).&nbsp;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;I&nbsp;can&nbsp;only&nbsp;consume&nbsp;(work&nbsp;on)&nbsp;a&nbsp;single&nbsp;message&nbsp;belonging&nbsp;to&nbsp;a&nbsp;given&nbsp;ticket&nbsp;at&nbsp;a&nbsp;time&nbsp;to&nbsp;avoid&nbsp;external&nbsp;concurrency&nbsp;issues.&nbsp;In&nbsp;other&nbsp;words,&nbsp;if&nbsp;consumer&nbsp;A&nbsp;is&nbsp;working&nbsp;on&nbsp;a&nbsp;message&nbsp;representing&nbsp;ticket&nbsp;1&nbsp;and,&nbsp;at&nbsp;the&nbsp;same&nbsp;time,&nbsp;consumer&nbsp;B&nbsp;is&nbsp;available&nbsp;and&nbsp;is&nbsp;assigned&nbsp;the&nbsp;next&nbsp;message&nbsp;from&nbsp;the&nbsp;queue&nbsp;that&nbsp;also&nbsp;represents&nbsp;ticket&nbsp;1,&nbsp;we&nbsp;have&nbsp;a&nbsp;problem.&lt;br&gt;&lt;br&gt;So&nbsp;far&nbsp;I&nbsp;am&nbsp;considering&nbsp;two&nbsp;possible&nbsp;options:&lt;br&gt;&lt;br&gt;1.&nbsp;Dynamically&nbsp;create&nbsp;a&nbsp;temp&nbsp;queue&nbsp;per&nbsp;new&nbsp;unique&nbsp;ticket&nbsp;that&nbsp;arrives,&nbsp;and&nbsp;in&nbsp;effect&nbsp;sort&nbsp;messages&nbsp;into&nbsp;their&nbsp;own&nbsp;queues&nbsp;by&nbsp;ticket&nbsp;number.&nbsp;The&nbsp;problem&nbsp;with&nbsp;this&nbsp;(if&nbsp;even&nbsp;possible)&nbsp;is&nbsp;how&nbsp;to&nbsp;manage&nbsp;consumers&nbsp;for&nbsp;the&nbsp;temp&nbsp;queues.&nbsp;If&nbsp;I&nbsp;assign&nbsp;a&nbsp;single&nbsp;consumer&nbsp;to&nbsp;each&nbsp;queue,&nbsp;the&nbsp;system&nbsp;does&nbsp;not&nbsp;scale,&nbsp;if&nbsp;I&nbsp;assign&nbsp;a&nbsp;consumer&nbsp;to&nbsp;multiple&nbsp;queues&nbsp;I&nbsp;am&nbsp;back&nbsp;to&nbsp;the&nbsp;original&nbsp;problem.&lt;br&gt;&lt;br&gt;2.Keep&nbsp;a&nbsp;single&nbsp;queue&nbsp;with&nbsp;multiple&nbsp;consumers&nbsp;assigned&nbsp;and&nbsp;implement&nbsp;a&nbsp;cache&nbsp;to&nbsp;track&nbsp;ticket&nbsp;numbers&nbsp;currently&nbsp;being&nbsp;processed.&nbsp;When&nbsp;a&nbsp;consumer&nbsp;receives&nbsp;a&nbsp;new&nbsp;message,&nbsp;it&nbsp;first&nbsp;checks&nbsp;the&nbsp;cache&nbsp;to&nbsp;see&nbsp;if&nbsp;a&nbsp;given&nbsp;ticket&nbsp;is&nbsp;already&nbsp;being&nbsp;processed.&nbsp;If&nbsp;so,&nbsp;re-queue&nbsp;the&nbsp;message,&nbsp;otherwise&nbsp;add&nbsp;to&nbsp;cache.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;leaning&nbsp;towards&nbsp;option&nbsp;2&nbsp;but&nbsp;appreciate&nbsp;any&nbsp;feedback&nbsp;and&nbsp;wisdom&nbsp;from&nbsp;the&nbsp;community&nbsp;(perhaps&nbsp;I&nbsp;am&nbsp;missing&nbsp;something&nbsp;obvious).&lt;br&gt;&lt;br&gt;Thank&nbsp;you,&lt;br&gt;&lt;br&gt;-Ed&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
