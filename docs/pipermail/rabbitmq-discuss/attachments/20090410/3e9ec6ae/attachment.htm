<tt>
Hi&nbsp;Tony,&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;talk&nbsp;on&nbsp;Wednesday.&lt;br&gt;&lt;br&gt;I&amp;#39;d&nbsp;rather&nbsp;not&nbsp;hack&nbsp;the&nbsp;kernel.&nbsp;If&nbsp;RabbitMQ&nbsp;can&nbsp;already&nbsp;handle&nbsp;the&nbsp;queues&nbsp;and&nbsp;messages,&nbsp;could&nbsp;I&nbsp;instead&nbsp;have&nbsp;a&nbsp;dozen&nbsp;multiplexer&nbsp;processes&nbsp;that&nbsp;do&nbsp;nothing&nbsp;but&nbsp;multiplex&nbsp;1000&nbsp;TCP&nbsp;AMQP&nbsp;connections&nbsp;into&nbsp;a&nbsp;single&nbsp;one?&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;if&nbsp;the&nbsp;AMQP&nbsp;protocol&nbsp;makes&nbsp;this&nbsp;possible.&nbsp;It&nbsp;might&nbsp;need&nbsp;to&nbsp;keep&nbsp;track&nbsp;of&nbsp;virtual&nbsp;connections&nbsp;within&nbsp;the&nbsp;single&nbsp;connection.&lt;br&gt;<br>
<br>
&lt;br&gt;Lawrence&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Apr&nbsp;10,&nbsp;2009&nbsp;at&nbsp;2:53&nbsp;PM,&nbsp;Tony&nbsp;Garnock-Jones&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tonyg@lshift.net&quot;&gt;tonyg@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
Hi&nbsp;Lawrence,&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Lawrence&nbsp;Kesteloot&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&nbsp;need&nbsp;to&nbsp;have&nbsp;a&nbsp;large&nbsp;number&nbsp;of&nbsp;connections&nbsp;to&nbsp;the&nbsp;message&nbsp;broker,&lt;br&gt;<br>
perhaps&nbsp;10,000.&nbsp;There&nbsp;is&nbsp;typically&nbsp;(on&nbsp;Unix)&nbsp;a&nbsp;limit&nbsp;of&nbsp;1024&nbsp;open&nbsp;file&lt;br&gt;<br>
descriptors&nbsp;per&nbsp;process.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Indeed.&nbsp;You&nbsp;will&nbsp;need&nbsp;to&nbsp;engage&nbsp;in&nbsp;kernel&nbsp;(or&nbsp;at&nbsp;least&nbsp;rlimit)&nbsp;tuning&nbsp;to&nbsp;raise&nbsp;the&nbsp;limit.&nbsp;(You&nbsp;may&nbsp;also&nbsp;need&nbsp;to&nbsp;increase&nbsp;the&nbsp;limit&nbsp;the&nbsp;erlang&nbsp;VM&nbsp;places&nbsp;on&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;processes;&nbsp;&amp;quot;+P&nbsp;1000000&amp;quot;&nbsp;argument&nbsp;to&nbsp;the&nbsp;VM)&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
I&amp;#39;ve&nbsp;had&nbsp;upwards&nbsp;of&nbsp;4000&nbsp;simultaneous&nbsp;connections&nbsp;to&nbsp;a&nbsp;single&nbsp;node&nbsp;before,&nbsp;but&nbsp;haven&amp;#39;t&nbsp;done&nbsp;any&nbsp;serious&nbsp;testing&nbsp;of&nbsp;it&nbsp;with&nbsp;so&nbsp;many&nbsp;connections.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Multiple&nbsp;instances&nbsp;of&nbsp;the&nbsp;broker?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Clustering&nbsp;will&nbsp;help&nbsp;spread&nbsp;the&nbsp;load,&nbsp;so&nbsp;yes,&nbsp;maybe.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Also,&nbsp;each&nbsp;connection&nbsp;will&lt;br&gt;<br>
have&nbsp;its&nbsp;own&nbsp;queue.&nbsp;Can&nbsp;RabbitMQ&nbsp;deal&nbsp;with&nbsp;tens&nbsp;of&nbsp;thousands&nbsp;of&lt;br&gt;<br>
queues?&nbsp;The&nbsp;total&nbsp;message&nbsp;throughput&nbsp;will&nbsp;be&nbsp;on&nbsp;the&nbsp;order&nbsp;of&nbsp;the&lt;br&gt;<br>
number&nbsp;of&nbsp;connections&nbsp;per&nbsp;second&nbsp;(several&nbsp;thousand&nbsp;per&nbsp;second).&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
It&nbsp;can&nbsp;deal&nbsp;with&nbsp;tens&nbsp;or&nbsp;even&nbsp;hundreds&nbsp;of&nbsp;thousands&nbsp;of&nbsp;queues.&nbsp;The&nbsp;throughput&nbsp;may&nbsp;be&nbsp;a&nbsp;limiting&nbsp;factor,&nbsp;but&nbsp;again&nbsp;clustering&nbsp;may&nbsp;help&nbsp;there.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&nbsp; Tony&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
