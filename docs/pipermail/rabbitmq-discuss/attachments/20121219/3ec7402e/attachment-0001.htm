<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;John,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;start&nbsp;a&nbsp;new&nbsp;thread&nbsp;when&nbsp;asking&nbsp;a&nbsp;new&nbsp;topic.&nbsp;It's&nbsp;very<br>
&nbsp;&nbsp;&nbsp;&nbsp;difficult&nbsp;to&nbsp;keep&nbsp;track&nbsp;of&nbsp;your&nbsp;posts&nbsp;otherwise,&nbsp;and&nbsp;it&nbsp;therefore<br>
&nbsp;&nbsp;&nbsp;&nbsp;takes&nbsp;us&nbsp;longer&nbsp;to&nbsp;help!&nbsp;Thanks.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;So&nbsp;on&nbsp;the&nbsp;subject&nbsp;of&nbsp;transactions...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;12/17/2012&nbsp;07:15&nbsp;PM,&nbsp;John&nbsp;Smith&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:1355771741.55347.YahooMailNeo@web165001.mail.bf1.yahoo.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255);&nbsp;font-family:&nbsp;lucida&nbsp;console,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;Am&nbsp;I&nbsp;correctly&nbsp;interpreting&nbsp;the&nbsp;following&nbsp;link:&lt;/span&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&amp;nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;http://www.rabbitmq.com/semantics.html&quot;&gt;http://www.rabbitmq.com/semantics.html&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&amp;nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;I&nbsp;can&nbsp;have&nbsp;publish&nbsp;inside&nbsp;a&nbsp;transaction,&nbsp;but&nbsp;not<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receive&nbsp;inside&nbsp;a&nbsp;tx,&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;of&nbsp;course&nbsp;receive&nbsp;messages&nbsp;inside&nbsp;a&nbsp;transaction,&nbsp;however<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;*receipt&nbsp;is&nbsp;not&nbsp;transactional*&nbsp;but&nbsp;rather&nbsp;the&nbsp;acknowledgement<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;send&nbsp;for&nbsp;it&nbsp;is.&nbsp;What&nbsp;this&nbsp;means&nbsp;in&nbsp;practise&nbsp;is&nbsp;that&nbsp;once<br>
&nbsp;&nbsp;&nbsp;&nbsp;delivered,&nbsp;a&nbsp;message&nbsp;arriving&nbsp;during&nbsp;a&nbsp;transaction&nbsp;will&nbsp;not&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;redelivered&nbsp;even&nbsp;if&nbsp;you&nbsp;roll&nbsp;back&nbsp;the&nbsp;transaction.&nbsp;On&nbsp;the&nbsp;broker,&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;send&nbsp;back&nbsp;an&nbsp;ACK&nbsp;the&nbsp;message&nbsp;is&nbsp;normally&nbsp;then&nbsp;removed&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;queue,&nbsp;and&nbsp;not&nbsp;before&nbsp;then,&nbsp;so&nbsp;that&nbsp;nack/reject&nbsp;work&nbsp;as&nbsp;expected.&nbsp;If<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;send&nbsp;an&nbsp;ACK&nbsp;during&nbsp;a&nbsp;transaction&nbsp;and&nbsp;subsequently&nbsp;roll&nbsp;back&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;transaction,&nbsp;the&nbsp;message&nbsp;will&nbsp;*not*&nbsp;be&nbsp;removed&nbsp;from&nbsp;the&nbsp;queue&nbsp;nor<br>
&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;it&nbsp;be&nbsp;delivered&nbsp;to&nbsp;you&nbsp;again!&nbsp;That&nbsp;is&nbsp;what&nbsp;the&nbsp;AMQP&nbsp;spec&nbsp;means<br>
&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;it&nbsp;distinguishes&nbsp;between&nbsp;atomic&nbsp;delivery&nbsp;(which&nbsp;isn't&nbsp;mandated<br>
&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;supported)&nbsp;and&nbsp;atomic&nbsp;acknowledgements&nbsp;(which&nbsp;are).&nbsp;As&nbsp;per&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;spec,&nbsp;if&nbsp;you're&nbsp;holding&nbsp;onto&nbsp;a&nbsp;message&nbsp;received&nbsp;during&nbsp;a&nbsp;transaction<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;was&nbsp;subsequently&nbsp;rolled&nbsp;back,&nbsp;it&nbsp;is&nbsp;valid&nbsp;to&nbsp;ACK&nbsp;that&nbsp;message<br>
&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;a&nbsp;later&nbsp;time&nbsp;in&nbsp;a&nbsp;subsequent&nbsp;transaction.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:1355771741.55347.YahooMailNeo@web165001.mail.bf1.yahoo.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255);&nbsp;font-family:&nbsp;lucida&nbsp;console,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;and&nbsp;the&nbsp;transaction&nbsp;is&nbsp;not&nbsp;atomic&nbsp;?&lt;/span&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Transactions&nbsp;in&nbsp;AMQP&nbsp;are&nbsp;atomic&nbsp;for&nbsp;a&nbsp;single&nbsp;queue,&nbsp;but&nbsp;RabbitMQ<br>
&nbsp;&nbsp;&nbsp;&nbsp;does&nbsp;not&nbsp;uphold&nbsp;the&nbsp;atomicity&nbsp;guarantee&nbsp;in&nbsp;the&nbsp;face&nbsp;of&nbsp;failure<br>
&nbsp;&nbsp;&nbsp;&nbsp;during&nbsp;the&nbsp;commit&nbsp;phase.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:1355771741.55347.YahooMailNeo@web165001.mail.bf1.yahoo.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:lucida<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console,&nbsp;sans-serif;font-size:12pt&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;Could&nbsp;someone&nbsp;please&nbsp;post&nbsp;a&nbsp;link&nbsp;to&nbsp;where&nbsp;I&nbsp;can&nbsp;view<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;example&nbsp;of&nbsp;a&nbsp;transaction&nbsp;in&nbsp;Rabbit&nbsp;?&lt;/span&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;explain&nbsp;what&nbsp;you're&nbsp;specifically&nbsp;trying&nbsp;to&nbsp;achieve&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;transactions,&nbsp;then&nbsp;we&nbsp;can&nbsp;probably&nbsp;point&nbsp;you&nbsp;in&nbsp;the&nbsp;right&nbsp;direction.&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
