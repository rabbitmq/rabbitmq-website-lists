<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Let&nbsp;me&nbsp;make&nbsp;a&nbsp;constructive&nbsp;suggestion.&nbsp;By&nbsp;using&nbsp;the&nbsp;configuration,&nbsp;we&nbsp;could&nbsp;avoid&nbsp;the&nbsp;compile-time&nbsp;dependency&nbsp;on&nbsp;either&nbsp;of&nbsp;those&nbsp;modules,&nbsp;and&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;we&nbsp;could&nbsp;make&nbsp;amqp_connection&nbsp;more&nbsp;flexible.&lt;br&gt;<br>
&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;%%&nbsp;Starts&nbsp;a&nbsp;new&nbsp;channel.&nbsp;Flavor&nbsp;is&nbsp;direct&nbsp;or&nbsp;network.&nbsp;flavor_module&nbsp;is&nbsp;set&nbsp;up&nbsp;to&nbsp;be&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;%%&nbsp;one&nbsp;of&nbsp;amqp_direct_driver&nbsp;or&nbsp;amqp_network_driver&nbsp;(or,&nbsp;some&nbsp;other&nbsp;driver&nbsp;-&nbsp;e.g.&nbsp;future&nbsp;amqp_wmq_driver)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;handle_call({Flavor,&nbsp;ChannelNumber,&nbsp;OutOfBand},&nbsp;From,&nbsp;State)&nbsp;-&amp;gt;&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{ok,&nbsp;Module}&nbsp;=&nbsp;proplists:get_value(Flavor,&nbsp;State#state.flavor_module),&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;handle_start({ChannelNumber,&nbsp;OutOfBand},&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;Module:open_channel/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;Module:close_channel/1,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;Module:do/2,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;Module:do/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;State);&lt;/span&gt;&lt;br&gt;<br>
&lt;br&gt;What&nbsp;do&nbsp;you&nbsp;think?&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;Edwin&lt;br&gt;&lt;/div&gt;<br>

</tt>
