<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Sep&nbsp;7,&nbsp;2008&nbsp;at&nbsp;7:41&nbsp;PM,&nbsp;Ben&nbsp;Hood&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Edwin,&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Sun,&nbsp;Sep&nbsp;7,&nbsp;2008&nbsp;at&nbsp;10:32&nbsp;PM,&nbsp;Edwin&nbsp;Fine&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss_efine@usa.net&quot;&gt;rabbitmq-discuss_efine@usa.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&amp;gt;&nbsp;As&nbsp;the&nbsp;most&nbsp;up&nbsp;to&nbsp;date&nbsp;client&nbsp;code&nbsp;currently&nbsp;stands,&nbsp;amqp_channel&nbsp;calls&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_amqqueue&nbsp;in&nbsp;a&nbsp;handle_info&nbsp;function.&nbsp;Although&nbsp;this&nbsp;handle_info&lt;br&gt;<br>
&amp;gt;&nbsp;function&nbsp;is&nbsp;used&nbsp;only&nbsp;by&nbsp;the&nbsp;direct&nbsp;client,&nbsp;I&nbsp;am&nbsp;uncomfortable&nbsp;with&nbsp;having&lt;br&gt;<br>
&amp;gt;&nbsp;server-specific&nbsp;code&nbsp;mixed&nbsp;in&nbsp;with&nbsp;pure&nbsp;client&nbsp;code.&nbsp;There&nbsp;should&nbsp;be&nbsp;a&nbsp;clean&lt;br&gt;<br>
&amp;gt;&nbsp;separation&nbsp;of&nbsp;concerns&nbsp;and&nbsp;all&nbsp;&amp;quot;direct&amp;quot;&nbsp;code,&nbsp;which&nbsp;calls&nbsp;into&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;server-specific&nbsp;code,&nbsp;should&nbsp;be&nbsp;in&nbsp;one&nbsp;module,&nbsp;and&nbsp;the&nbsp;network-only&nbsp;code&nbsp;in&lt;br&gt;<br>
&amp;gt;&nbsp;another.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;The&nbsp;clean&nbsp;separation&nbsp;has&nbsp;been&nbsp;accomplished&nbsp;by&nbsp;having&nbsp;both&nbsp;modes&nbsp;of&lt;br&gt;<br>
operation&nbsp;(embedded&nbsp;vs&nbsp;TCP)&nbsp;implemented&nbsp;in&nbsp;separate&nbsp;driver&nbsp;modules.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;build&nbsp;a&nbsp;network&nbsp;only&nbsp;package,&nbsp;you&nbsp;can&nbsp;just&nbsp;leave&nbsp;out&lt;br&gt;<br>
the&nbsp;amqp_direct_driver&nbsp;module.&lt;br&gt;<br>
&lt;br&gt;<br>
Hence&nbsp;with&nbsp;all&nbsp;due&nbsp;respect,&nbsp;I&nbsp;would&nbsp;disagree&nbsp;that&nbsp;concerns&nbsp;have&nbsp;been&nbsp;mixed.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;With&nbsp;all&nbsp;due&nbsp;respect&nbsp;in&nbsp;return,&nbsp;check&nbsp;out&nbsp;this&nbsp;code&nbsp;from&nbsp;amqp_connection.erl:&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;%%&nbsp;Starts&nbsp;a&nbsp;new&nbsp;network&nbsp;channel.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;handle_call({network,&nbsp;ChannelNumber,&nbsp;OutOfBand},&nbsp;From,&nbsp;State)&nbsp;-&amp;gt;&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;handle_start({ChannelNumber,&nbsp;OutOfBand},&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_network_driver:open_channel/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_network_driver:close_channel/1,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_network_driver:do/2,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_network_driver:do/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;State);&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;%%&nbsp;Starts&nbsp;a&nbsp;new&nbsp;direct&nbsp;channel.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;handle_call({direct,&nbsp;ChannelNumber,&nbsp;OutOfBand},&nbsp;From,&nbsp;State)&nbsp;-&amp;gt;&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;handle_start({ChannelNumber,&nbsp;OutOfBand},&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_direct_driver:open_channel/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_direct_driver:close_channel/1,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_direct_driver:do/2,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fun&nbsp;amqp_direct_driver:do/3,&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;State);&lt;/span&gt;&lt;br&gt;&lt;br&gt;This&nbsp;ties&nbsp;the&nbsp;module&nbsp;to&nbsp;amqp_direct_driver&nbsp;by&nbsp;naming&nbsp;it.&nbsp;xref&nbsp;will&nbsp;show&nbsp;this&nbsp;code&nbsp;is&nbsp;dependent&nbsp;on&nbsp;amqp_direct_driver.&nbsp;Dialyzer&nbsp;will&nbsp;complain&nbsp;if&nbsp;amqp_direct_driver&nbsp;is&nbsp;not&nbsp;there.&nbsp;This&nbsp;call&nbsp;should&nbsp;be&nbsp;handled&nbsp;somewhere&nbsp;else.&nbsp;In&nbsp;my&nbsp;humble&nbsp;opinion.&lt;br&gt;<br>
&amp;nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;amqp_network_driver&nbsp;calls&nbsp;rabbit_framing_channel,&nbsp;which&nbsp;in&nbsp;turn&nbsp;calls&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_channel.&nbsp;So&nbsp;indirectly,&nbsp;the&nbsp;network&nbsp;client&nbsp;uses&nbsp;rabbit_channel&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;needs&nbsp;it&nbsp;in&nbsp;the&nbsp;common&nbsp;distribution.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;This&nbsp;is&nbsp;true,&nbsp;but&nbsp;this&nbsp;only&nbsp;pertains&nbsp;to&nbsp;the&nbsp;do/2&nbsp;and&nbsp;do/3&nbsp;calls,&nbsp;which&lt;br&gt;<br>
*could*&nbsp;be&nbsp;abstracted&nbsp;out&nbsp;of&nbsp;the&nbsp;rabbit_channel&nbsp;module&nbsp;with&nbsp;not&nbsp;too&lt;br&gt;<br>
many&nbsp;changes.&lt;/blockquote&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;Well,&nbsp;then,&nbsp;let&amp;#39;s&nbsp;factor&nbsp;it&nbsp;out.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;So,&nbsp;ignoring&nbsp;modules&nbsp;provided&nbsp;by&nbsp;Erlang/OTP,&nbsp;and&nbsp;the&nbsp;network&nbsp;client&nbsp;modules&lt;br&gt;<br>
&amp;gt;&nbsp;themselves,&nbsp;the&nbsp;following&nbsp;modules&nbsp;are&nbsp;needed&nbsp;by&nbsp;the&nbsp;network&nbsp;client:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;hessian&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;have&nbsp;just&nbsp;deleted&nbsp;the&nbsp;reference&nbsp;to&nbsp;hessian&nbsp;(bug19334).&nbsp;This&nbsp;was&lt;br&gt;<br>
something&nbsp;experimental&nbsp;and&nbsp;should&nbsp;not&nbsp;be&nbsp;in&nbsp;the&nbsp;client&nbsp;code&nbsp;base.&lt;/blockquote&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;Ok,&nbsp;good&nbsp;to&nbsp;know!&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_binary_generator&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_framing&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_framing_channel&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_heartbeat&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_misc&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_reader&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit_writer&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;Ben&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Regards,&lt;br&gt;Edwin&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
