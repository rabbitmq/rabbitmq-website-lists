<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;So&nbsp;here&amp;#39;s&nbsp;my&nbsp;first&nbsp;change&nbsp;(attached&nbsp;file&nbsp;ampq_connection.erl).&lt;br&gt;&lt;br&gt;I&amp;#39;ve&nbsp;modified&nbsp;amqp_connection&nbsp;to&nbsp;be&nbsp;completely&nbsp;dynamic&nbsp;and&nbsp;not&nbsp;depend&nbsp;at&nbsp;all&nbsp;at&nbsp;compile&nbsp;time&nbsp;on&nbsp;any&nbsp;network&nbsp;driver&nbsp;module.&nbsp;Now&nbsp;some&nbsp;people&nbsp;may&nbsp;shudder&nbsp;at&nbsp;building&nbsp;a&nbsp;module&nbsp;name&nbsp;from&nbsp;strings,&nbsp;but&nbsp;it&amp;#39;s&nbsp;not&nbsp;uncommon&nbsp;outside&nbsp;Erlang&nbsp;and&nbsp;it&nbsp;certainly&nbsp;does&nbsp;give&nbsp;flexibility.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;have&nbsp;successfully&nbsp;run&nbsp;the&nbsp;network_client_test,&nbsp;but&nbsp;could&nbsp;not&nbsp;run&nbsp;the&nbsp;direct&nbsp;test.&nbsp;Is&nbsp;this&nbsp;possibly&nbsp;because&nbsp;the&nbsp;Rabbit&nbsp;1.4.0&nbsp;I&nbsp;have&nbsp;installed&nbsp;is&nbsp;not&nbsp;in&nbsp;sync&nbsp;with&nbsp;the&nbsp;API&nbsp;expected&nbsp;by&nbsp;the&nbsp;direct&nbsp;driver?&lt;br&gt;&lt;br&gt;As&nbsp;an&nbsp;added&nbsp;bonus,&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;prevent&nbsp;code&nbsp;from&nbsp;running&nbsp;that&nbsp;was&nbsp;marked&nbsp;with&lt;br&gt;<br>
&lt;br&gt;%%&nbsp;TODO&nbsp;This&nbsp;differentiation&nbsp;is&nbsp;only&nbsp;necessary&nbsp;for&nbsp;the&nbsp;direct&nbsp;channel,&lt;br&gt;&lt;br&gt;because&nbsp;the&nbsp;server&nbsp;state&nbsp;now&nbsp;&amp;quot;knows&amp;quot;&nbsp;what&nbsp;kind&nbsp;of&nbsp;connection&nbsp;it&nbsp;is.&lt;br&gt;&lt;br&gt;I&amp;#39;d&nbsp;be&nbsp;very&nbsp;interested&nbsp;to&nbsp;hear&nbsp;your&nbsp;thoughts&nbsp;on&nbsp;this&nbsp;approach,&nbsp;and&nbsp;whether&nbsp;or&nbsp;not&nbsp;you&nbsp;can&nbsp;get&nbsp;the&nbsp;direct&nbsp;driver&nbsp;test&nbsp;to&nbsp;work.&lt;br&gt;<br>
&lt;br&gt;Regards,&lt;br&gt;Edwin&lt;br&gt;&lt;/div&gt;<br>

</tt>
