<tt>
&lt;div&gt;An&nbsp;untested&nbsp;patch&nbsp;to&nbsp;disable&nbsp;it:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;diff&nbsp;--git&nbsp;a/src/rabbit_reader.erl&nbsp;b/src/rabbit_reader.erl&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;index&nbsp;5acf6ac..8b65821&nbsp;100644&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;---&nbsp;a/src/rabbit_reader.erl&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;+++&nbsp;b/src/rabbit_reader.erl&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;@@&nbsp;-368,7&nbsp;+368,7&nbsp;@@&nbsp;terminate(_Explanation,&nbsp;State)&nbsp;-&amp;gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;control_throttle(State&nbsp;=&nbsp;#v1{connection_state&nbsp;&amp;nbsp;&nbsp;=&nbsp;CS,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;conserve_resources&nbsp;=&nbsp;Mem})&nbsp;-&amp;gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;-&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;case&nbsp;{CS,&nbsp;Mem&nbsp;orelse&nbsp;credit_flow:blocked()}&nbsp;of&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;case&nbsp;{CS,&nbsp;Mem}&nbsp;of&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{running,&nbsp;&amp;nbsp;&nbsp;true}&nbsp;-&amp;gt;&nbsp;State#v1{connection_state&nbsp;=&nbsp;blocking};&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{blocking,&nbsp;false}&nbsp;-&amp;gt;&nbsp;State#v1{connection_state&nbsp;=&nbsp;running};&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{blocked,&nbsp;&amp;nbsp;false}&nbsp;-&amp;gt;&nbsp;ok&nbsp;=&nbsp;rabbit_heartbeat:resume_monitor(&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;On&nbsp;Friday,&nbsp;May&nbsp;25,&nbsp;2012&nbsp;3:42:36&nbsp;PM&nbsp;UTC-7,&nbsp;Pablo&nbsp;Molnar&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;I'm&nbsp;also&nbsp;experiencing&nbsp;the&nbsp;flow&nbsp;control&nbsp;to&nbsp;be&nbsp;unhelpful&nbsp;using&nbsp;spring-amqp&nbsp;libraries.&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;just&nbsp;turn&nbsp;it&nbsp;off?&lt;br&gt;&lt;br&gt;Thanks,&lt;div&gt;Pablo&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;&amp;nbsp;Fri,&nbsp;May&nbsp;25,&nbsp;2012&nbsp;at&nbsp;2:57&nbsp;PM,&nbsp;Chip&nbsp;Salzenberg&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rev.chip@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&nbsp;checklongurl=&quot;true&quot;&gt;rev.chip@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;The&nbsp;fundamental&nbsp;paradox&nbsp;of&nbsp;per-connection&nbsp;flow&nbsp;control&nbsp;is&nbsp;that&nbsp;it&nbsp;holds&nbsp;up&nbsp;the&nbsp;stop&nbsp;sign&nbsp;just&nbsp;when&nbsp;progress&nbsp;becomes&nbsp;possible.&nbsp;&amp;nbsp;It&nbsp;is&nbsp;backwards&nbsp;and&nbsp;unhelpful.&nbsp;&amp;nbsp;Consider:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;A&nbsp;client&nbsp;is&nbsp;publishing&nbsp;1.5K/sec&nbsp;to&nbsp;each&nbsp;of&nbsp;four&nbsp;exchanges,&nbsp;each&nbsp;of&nbsp;which&nbsp;has&nbsp;a&nbsp;queue.&lt;/div&gt;&lt;div&gt;2.&nbsp;There&nbsp;are&nbsp;no&nbsp;consumers.&nbsp;&amp;nbsp;Therefore&nbsp;the&nbsp;queue&nbsp;is&nbsp;growing.&lt;/div&gt;&lt;div&gt;3.&nbsp;RMQ&nbsp;does&nbsp;not&nbsp;stop&nbsp;this.&nbsp;&amp;nbsp;&quot;Flow&nbsp;control&quot;&nbsp;does&nbsp;not&nbsp;trigger.&lt;/div&gt;<br>
&lt;div&gt;4.&nbsp;The&nbsp;consumers&nbsp;appear&nbsp;to&nbsp;begin&nbsp;to&nbsp;tear&nbsp;down&nbsp;the&nbsp;backlog.&lt;/div&gt;&lt;div&gt;5.&nbsp;RMQ&nbsp;per-connection&nbsp;flow&nbsp;control&nbsp;suddenly&nbsp;decides&nbsp;that&nbsp;now&nbsp;there&nbsp;are&nbsp;some&nbsp;consumers,&nbsp;now&nbsp;it&nbsp;has&nbsp;a&nbsp;reason&nbsp;to&nbsp;throttle&nbsp;the&nbsp;sender.&lt;/div&gt;&lt;div&gt;6.&nbsp;If&nbsp;the&nbsp;consumers&nbsp;had&nbsp;not&nbsp;shown&nbsp;up,&nbsp;the&nbsp;producer&nbsp;would&nbsp;not&nbsp;have&nbsp;been&nbsp;blocked.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Therefore,&nbsp;it&nbsp;is&nbsp;only&nbsp;when&nbsp;the&nbsp;backlog&nbsp;can&nbsp;go&nbsp;DOWN&nbsp;that&nbsp;the&nbsp;broker&nbsp;decides&nbsp;to&nbsp;throttle&nbsp;the&nbsp;sender.&nbsp;&amp;nbsp;Not&nbsp;when&nbsp;the&nbsp;backlog&nbsp;was&nbsp;GROWING,&nbsp;but&nbsp;when&nbsp;it&nbsp;could&nbsp;be&nbsp;SHRINKING,&nbsp;that's&nbsp;when&nbsp;RMQ&nbsp;decides&nbsp;to&nbsp;stop&nbsp;accepting.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;not&nbsp;acceptable.&lt;/div&gt;&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&nbsp;checklongurl=&quot;true&quot;&gt;rabbitmq-discuss@lists.&lt;wbr&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&nbsp;checklongurl=&quot;true&quot;&gt;https://lists.rabbitmq.com/&lt;wbr&gt;cgi-bin/mailman/listinfo/&lt;wbr&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;
</tt>
