<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=gb2312&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;STYLE&gt;<br>
BLOCKQUOTE&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px;&nbsp;MARGIN-LEFT:&nbsp;2em<br>
}<br>
OL&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
UL&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
DIV.FoxDiv20120825092604130718&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLINE-HEIGHT:&nbsp;1.5;&nbsp;FONT-FAMILY:&nbsp;CALIBRI,&nbsp;SANS-SERIF;&nbsp;WORD-WRAP:&nbsp;break-word;&nbsp;COLOR:&nbsp;rgb(0,0,0);&nbsp;FONT-SIZE:&nbsp;14px;&nbsp;-WEBKIT-NBSP-MODE:&nbsp;SPACE;&nbsp;-WEBKIT-LINE-BREAK:&nbsp;AFTER-WHITE-SPACE<br>
}<br>
BODY&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLINE-HEIGHT:&nbsp;1.5;&nbsp;FONT-FAMILY:&nbsp;ËÎÌå;&nbsp;COLOR:&nbsp;#000080;&nbsp;FONT-SIZE:&nbsp;10.5pt<br>
}<br>
&lt;/STYLE&gt;<br>
<br>
&lt;META&nbsp;name=GENERATOR&nbsp;content=&quot;MSHTML&nbsp;8.00.7601.17874&quot;&gt;&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;style=&quot;MARGIN:&nbsp;10px&quot;&gt;<br>
&lt;DIV&gt;Thanks,&nbsp;Michael.&nbsp;Actually&nbsp;round-robins&nbsp;dispatching&nbsp;doesn't&nbsp;fit&nbsp;my&nbsp;situation&nbsp;<br>
well.&nbsp;If&nbsp;two&nbsp;consumers&nbsp;exist,&nbsp;they&nbsp;will&nbsp;get&nbsp;the&nbsp;message&nbsp;almost&nbsp;in&nbsp;the&nbsp;same&nbsp;time.&nbsp;<br>
In&nbsp;this&nbsp;way,&nbsp;the&nbsp;order&nbsp;of&nbsp;the&nbsp;messages&nbsp;cannot&nbsp;be&nbsp;assured.&nbsp;I&nbsp;wonder&nbsp;if&nbsp;there&nbsp;is&nbsp;<br>
some&nbsp;way&nbsp;that&nbsp;the&nbsp;server&nbsp;will&nbsp;send&nbsp;the&nbsp;message&nbsp;the&nbsp;second&nbsp;consumer&nbsp;only&nbsp;after&nbsp;it&nbsp;<br>
receives&nbsp;the&nbsp;ACK&nbsp;from&nbsp;the&nbsp;first&nbsp;consumer.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;HR&nbsp;style=&quot;WIDTH:&nbsp;210px;&nbsp;HEIGHT:&nbsp;1px&quot;&nbsp;align=left&nbsp;color=#b5c4df&nbsp;SIZE=1&gt;<br>
<br>
&lt;DIV&gt;&lt;SPAN&gt;johnson&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-BOTTOM:&nbsp;medium&nbsp;none;&nbsp;BORDER-LEFT:&nbsp;medium&nbsp;none;&nbsp;PADDING-BOTTOM:&nbsp;0cm;&nbsp;PADDING-LEFT:&nbsp;0cm;&nbsp;PADDING-RIGHT:&nbsp;0cm;&nbsp;BORDER-TOP:&nbsp;#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;BORDER-RIGHT:&nbsp;medium&nbsp;none;&nbsp;PADDING-TOP:&nbsp;3pt&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;PADDING-BOTTOM:&nbsp;8px;&nbsp;PADDING-LEFT:&nbsp;8px;&nbsp;PADDING-RIGHT:&nbsp;8px;&nbsp;BACKGROUND:&nbsp;#efefef;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-SIZE:&nbsp;12px;&nbsp;PADDING-TOP:&nbsp;8px&quot;&gt;<br>
&lt;DIV&gt;&lt;B&gt;From:&lt;/B&gt;&amp;nbsp;&lt;A&nbsp;href=&quot;mailto:Michael.Laing@nytimes.com&quot;&gt;Laing,&nbsp;Michael&nbsp;<br>
P.&lt;/A&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;B&gt;Date:&lt;/B&gt;&amp;nbsp;2012-08-25&amp;nbsp;03:12&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;B&gt;To:&lt;/B&gt;&amp;nbsp;&lt;A&nbsp;<br>
href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq&lt;/A&gt;;&nbsp;&lt;A&nbsp;<br>
href=&quot;mailto:johnson@edocom.cn&quot;&gt;johnson&lt;/A&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;B&gt;Subject:&lt;/B&gt;&amp;nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;How&nbsp;to&nbsp;achieve&nbsp;HA&nbsp;<br>
consumers?&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&nbsp;class=FoxDiv20120825092604130718&gt;<br>
&lt;DIV&gt;Actually,&nbsp;rereading,&nbsp;perhaps&nbsp;my&nbsp;solution&nbsp;is&nbsp;different&nbsp;from&nbsp;yours¡­&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;SPAN&nbsp;id=OLK_SRC_BODY_SECTION&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-BOTTOM:&nbsp;medium&nbsp;none;&nbsp;TEXT-ALIGN:&nbsp;left;&nbsp;BORDER-LEFT:&nbsp;medium&nbsp;none;&nbsp;PADDING-BOTTOM:&nbsp;0in;&nbsp;PADDING-LEFT:&nbsp;0in;&nbsp;PADDING-RIGHT:&nbsp;0in;&nbsp;FONT-FAMILY:&nbsp;Calibri;&nbsp;COLOR:&nbsp;black;&nbsp;FONT-SIZE:&nbsp;11pt;&nbsp;BORDER-TOP:&nbsp;#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;BORDER-RIGHT:&nbsp;medium&nbsp;none;&nbsp;PADDING-TOP:&nbsp;3pt&quot;&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;From:&nbsp;&lt;/SPAN&gt;Michael&nbsp;Laing&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:Michael.Laing@nytimes.com&quot;&gt;Michael.Laing@nytimes.com&lt;/A&gt;&amp;gt;&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;Reply-To:&nbsp;&lt;/SPAN&gt;rabbitmq&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/A&gt;&amp;gt;&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;Date:&nbsp;&lt;/SPAN&gt;Fri,&nbsp;24&nbsp;Aug&nbsp;2012&nbsp;13:54:15&nbsp;-0400&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;To:&nbsp;&lt;/SPAN&gt;johnson&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:johnson@edocom.cn&quot;&gt;johnson@edocom.cn&lt;/A&gt;&amp;gt;,&nbsp;rabbitmq&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/A&gt;&amp;gt;&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;Subject:&nbsp;&lt;/SPAN&gt;Re:&nbsp;[rabbitmq-discuss]&nbsp;How&nbsp;to&nbsp;achieve&nbsp;<br>
HA&nbsp;consumers?&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;FONT-FAMILY:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;WORD-WRAP:&nbsp;break-word;&nbsp;COLOR:&nbsp;rgb(0,0,0);&nbsp;FONT-SIZE:&nbsp;14px;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space&quot;&gt;<br>
&lt;DIV&gt;I&nbsp;use&nbsp;your&nbsp;option&nbsp;1:&nbsp;below,&nbsp;which&nbsp;works&nbsp;well.&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;All&nbsp;critical&nbsp;services&nbsp;drive&nbsp;from&nbsp;HA&nbsp;queues&nbsp;and&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;worker&nbsp;<br>
(consumer)&nbsp;connected&nbsp;to&nbsp;each&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster.&nbsp;RabbitMQ&nbsp;round-robins&nbsp;messages&nbsp;<br>
to&nbsp;the&nbsp;workers.&nbsp;If&nbsp;a&nbsp;worker&nbsp;or&nbsp;node&nbsp;fails,&nbsp;its&nbsp;message&nbsp;is&nbsp;routed&nbsp;to&nbsp;another&nbsp;<br>
worker.&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;Michael&lt;/DIV&gt;&lt;SPAN&nbsp;id=OLK_SRC_BODY_SECTION&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-BOTTOM:&nbsp;medium&nbsp;none;&nbsp;TEXT-ALIGN:&nbsp;left;&nbsp;BORDER-LEFT:&nbsp;medium&nbsp;none;&nbsp;PADDING-BOTTOM:&nbsp;0in;&nbsp;PADDING-LEFT:&nbsp;0in;&nbsp;PADDING-RIGHT:&nbsp;0in;&nbsp;FONT-FAMILY:&nbsp;Calibri;&nbsp;COLOR:&nbsp;black;&nbsp;FONT-SIZE:&nbsp;11pt;&nbsp;BORDER-TOP:&nbsp;#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;BORDER-RIGHT:&nbsp;medium&nbsp;none;&nbsp;PADDING-TOP:&nbsp;3pt&quot;&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;From:&nbsp;&lt;/SPAN&gt;johnson&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:johnson@edocom.cn&quot;&gt;johnson@edocom.cn&lt;/A&gt;&amp;gt;&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;Reply-To:&nbsp;&lt;/SPAN&gt;johnson&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:johnson@edocom.cn&quot;&gt;johnson@edocom.cn&lt;/A&gt;&amp;gt;,&nbsp;rabbitmq&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/A&gt;&amp;gt;&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;Date:&nbsp;&lt;/SPAN&gt;Fri,&nbsp;24&nbsp;Aug&nbsp;2012&nbsp;12:30:01&nbsp;-0400&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;To:&nbsp;&lt;/SPAN&gt;rabbitmq&nbsp;&amp;lt;&lt;A&nbsp;<br>
href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/A&gt;&amp;gt;&lt;BR&gt;&lt;SPAN&nbsp;<br>
style=&quot;FONT-WEIGHT:&nbsp;bold&quot;&gt;Subject:&nbsp;&lt;/SPAN&gt;[rabbitmq-discuss]&nbsp;How&nbsp;to&nbsp;achieve&nbsp;HA&nbsp;<br>
consumers?&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;STYLE&gt;BLOCKQUOTE&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px;&nbsp;MARGIN-LEFT:&nbsp;2em<br>
}<br>
OL&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
UL&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
P&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
&lt;/STYLE&gt;<br>
<br>
&lt;META&nbsp;name=GENERATOR&nbsp;content=&quot;MSHTML&nbsp;8.00.7601.17874&quot;&gt;<br>
&lt;DIV&nbsp;style=&quot;MARGIN:&nbsp;10px&quot;&gt;<br>
&lt;DIV&gt;Hi,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;One&nbsp;problem&nbsp;I&nbsp;encountered&nbsp;is&nbsp;how&nbsp;to&nbsp;achieve&nbsp;HA&nbsp;consumers.&nbsp;My&nbsp;situation&nbsp;is&nbsp;<br>
the&nbsp;following.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;installed&amp;nbsp;1&nbsp;consumer&nbsp;in&amp;nbsp;a&amp;nbsp;server&nbsp;to&nbsp;consume&nbsp;the&nbsp;messages.&nbsp;<br>
But&nbsp;in&nbsp;the&nbsp;production&nbsp;environment,&amp;nbsp;to&nbsp;avoid&nbsp;the&nbsp;unexceptional&nbsp;crash&nbsp;of&nbsp;the&nbsp;<br>
consumer,&nbsp;I&nbsp;need&nbsp;to&nbsp;install&nbsp;another&nbsp;consumer&nbsp;in&nbsp;another&nbsp;server.&nbsp;However,&nbsp;because&nbsp;<br>
the&nbsp;order&nbsp;of&nbsp;the&nbsp;messages&nbsp;are&nbsp;very&nbsp;important,&nbsp;if&nbsp;two&nbsp;consumers&amp;nbsp;receive&nbsp;<br>
the&amp;nbsp;messages&nbsp;simultaneously,&nbsp;the&nbsp;order&nbsp;cannot&nbsp;be&nbsp;reserved.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Maybe&nbsp;the&nbsp;following&nbsp;2&nbsp;way&nbsp;can&nbsp;work.&lt;/DIV&gt;<br>
&lt;DIV&gt;1:&nbsp;At&nbsp;the&nbsp;same&nbsp;time,&nbsp;the&nbsp;server&nbsp;only&nbsp;sends&amp;nbsp;the&nbsp;message&nbsp;to&nbsp;1&nbsp;consumer.&nbsp;<br>
After&nbsp;that&nbsp;consumer&nbsp;return&nbsp;a&nbsp;ACK,&nbsp;the&nbsp;server&nbsp;send&nbsp;the&nbsp;message&nbsp;to&nbsp;another&nbsp;<br>
consumer.&nbsp;This&nbsp;means&nbsp;that&nbsp;although&nbsp;two&nbsp;consumers&nbsp;exist,&nbsp;they&nbsp;receive&nbsp;the&nbsp;<br>
messages&nbsp;in&nbsp;turn&nbsp;&lt;SPAN&nbsp;id=result_box&nbsp;lang=en&nbsp;class=short_text&nbsp;c=&quot;4&quot;&nbsp;<br>
a=&quot;undefined&quot;&nbsp;closure_uid_hna1tc=&quot;117&quot;&gt;&lt;SPAN&nbsp;closure_uid_hna1tc=&quot;201&quot;&gt;not&nbsp;<br>
concurrently.&nbsp;Once&nbsp;1&nbsp;consumer&nbsp;crashes,&nbsp;the&nbsp;remaining&nbsp;consumer&nbsp;can&nbsp;still&nbsp;<br>
work.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;lang=en&nbsp;class=short_text&nbsp;c=&quot;4&quot;&nbsp;a=&quot;undefined&quot;&nbsp;<br>
closure_uid_hna1tc=&quot;117&quot;&gt;&lt;SPAN&nbsp;<br>
closure_uid_hna1tc=&quot;201&quot;&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&nbsp;lang=en&nbsp;class=short_text&nbsp;c=&quot;4&quot;&nbsp;a=&quot;undefined&quot;&nbsp;<br>
closure_uid_hna1tc=&quot;117&quot;&gt;&lt;SPAN&nbsp;closure_uid_hna1tc=&quot;201&quot;&gt;2:&nbsp;2&nbsp;consumers&nbsp;work&nbsp;like&nbsp;<br>
master-slave.&nbsp;Only&nbsp;1&nbsp;consumer&nbsp;works&nbsp;and&nbsp;the&nbsp;other&nbsp;one&nbsp;doesn't&nbsp;consume&nbsp;any&nbsp;<br>
message.&nbsp;Once&nbsp;1&nbsp;consumer&nbsp;crashes,&nbsp;the&nbsp;remaining&nbsp;consumer&nbsp;will&nbsp;be&nbsp;<br>
activated.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;have&nbsp;searched&nbsp;a&nbsp;lot&nbsp;of&nbsp;RabbitMQ&nbsp;docs&nbsp;and&nbsp;couldn't&nbsp;find&nbsp;useful&nbsp;info.&nbsp;Could&nbsp;<br>
anyone&nbsp;can&nbsp;give&nbsp;me&nbsp;some&nbsp;clue?&nbsp;Thanks&nbsp;a&nbsp;lot.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;HR&nbsp;style=&quot;WIDTH:&nbsp;210px;&nbsp;HEIGHT:&nbsp;1px&quot;&nbsp;align=left&nbsp;color=#b5c4df&nbsp;SIZE=1&gt;<br>
&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;SPAN&gt;johnson&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
