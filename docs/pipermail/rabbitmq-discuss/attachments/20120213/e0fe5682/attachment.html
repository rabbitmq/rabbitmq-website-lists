<tt>
Hi, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Wouldn&amp;#39;t&nbsp;it&nbsp;be&nbsp;enough&nbsp;to&nbsp;have&nbsp;only&nbsp;write&nbsp;permission&nbsp;to&nbsp;write&nbsp;to&nbsp;exchange,&nbsp;provided&nbsp;I&nbsp;do&nbsp;passive&nbsp;mode, &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;example&nbsp;ruby&nbsp;script&nbsp;I&nbsp;expected&nbsp;to&nbsp;work&nbsp;but&nbsp;it&nbsp;doesn&amp;#39;t.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;prep&nbsp;with &lt;/div&gt;&lt;div&gt;gem&nbsp;install&nbsp;bunny&lt;/div&gt;&lt;div&gt;gem&nbsp;install&nbsp;rspec&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;run&nbsp;with&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;rspec&nbsp;test.rb&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;test.rb:&lt;/div&gt;&lt;div&gt;--------------------------------------------------------------&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;require&nbsp;&amp;#39;bunny&amp;#39;&lt;/div&gt;&lt;div&gt;system&nbsp;&amp;quot;sudo&nbsp;rabbitmqctl&nbsp;add_vhost&nbsp;/x&amp;quot;&lt;/div&gt;&lt;div&gt;system&nbsp;&amp;quot;sudo&nbsp;rabbitmqctl&nbsp;add_user&nbsp;writer&nbsp;123&amp;quot;&lt;/div&gt;&lt;div&gt;#&nbsp;with&nbsp;this&nbsp;it&nbsp;works&lt;/div&gt;&lt;div&gt;#&nbsp;system&nbsp;&amp;quot;sudo&nbsp;rabbitmqctl&nbsp;set_permissions&nbsp;-p&nbsp;/x&nbsp;writer&nbsp;&amp;#39;.*&amp;#39;&nbsp;&amp;#39;.*&amp;#39;&nbsp; &amp;#39;foo&amp;#39;&amp;quot;&lt;/div&gt;<br>
&lt;div&gt;#&nbsp;with&nbsp;this&nbsp;it&nbsp;doesn&amp;#39;t&lt;/div&gt;&lt;div&gt;system&nbsp;&amp;quot;sudo&nbsp;rabbitmqctl&nbsp;set_permissions&nbsp;-p&nbsp;/x&nbsp;writer&nbsp;&amp;#39;foo&amp;#39;&nbsp;&amp;#39;.*&amp;#39;&nbsp; &amp;#39;foo&amp;#39;&amp;quot;&lt;/div&gt;&lt;div&gt;system&nbsp;&amp;quot;sudo&nbsp;rabbitmqctl&nbsp;add_user&nbsp;admin&nbsp;321&amp;quot;&lt;/div&gt;&lt;div&gt;<br>
system&nbsp;&amp;quot;sudo&nbsp;rabbitmqctl&nbsp;set_permissions&nbsp;-p&nbsp;/x&nbsp;admin&nbsp;&amp;#39;.*&amp;#39;&nbsp;&amp;#39;.*&amp;#39;&nbsp; &amp;#39;.*&amp;#39;&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;describe&nbsp;&amp;quot;wonderful&nbsp;bunny&nbsp;permission&nbsp;tests&amp;quot;&nbsp;do&lt;/div&gt;&lt;div&gt; &nbsp;it&nbsp;&amp;quot;should&nbsp;only&nbsp;push&amp;quot;&nbsp;do&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;@admin&nbsp;=&nbsp;Bunny.new(:host&nbsp;=&amp;gt;&nbsp;&amp;#39;localhost&amp;#39;,:vhost=&amp;gt;&nbsp;&amp;quot;/x&amp;quot;,&nbsp;:port&nbsp;=&amp;gt;&nbsp;5672,:user=&amp;gt;&amp;quot;admin&amp;quot;,:pass=&amp;gt;&nbsp;&amp;quot;321&amp;quot;&nbsp;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;@admin.start&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;#&nbsp;create/get&nbsp;queue&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;q&nbsp;=&nbsp;@admin.queue(&amp;#39;myqueue&amp;#39;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;#&nbsp;create/get&nbsp;exchange&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;exchange&nbsp;=&nbsp;@admin.exchange(&amp;quot;myexchange&amp;quot;,:type&nbsp;=&amp;gt;&nbsp;:topic,:durable&nbsp;=&amp;gt;&nbsp;true)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;#&nbsp;bind&nbsp;queue&nbsp;to&nbsp;exchange&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;q.bind(exchange,:key&nbsp;=&amp;gt;&nbsp;&amp;quot;#&amp;quot;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;##############################&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;@writer&nbsp;=&nbsp; Bunny.new(:host&nbsp;=&amp;gt;&nbsp;&amp;#39;localhost&amp;#39;,:vhost=&amp;gt;&nbsp;&amp;quot;/x&amp;quot;,&nbsp;:port&nbsp;=&amp;gt;&nbsp;5672,:user=&amp;gt;&amp;quot;writer&amp;quot;,:pass=&amp;gt;&nbsp;&amp;quot;123&amp;quot;,:logging=&amp;gt;true&nbsp;)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;@writer.start&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;e&nbsp;=&nbsp;@writer.exchange(&amp;quot;myexchange&amp;quot;,&nbsp;:passive&nbsp;=&amp;gt;&nbsp;true)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;e.publish&nbsp;&amp;quot;yo&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;q.pop[:payload].should&nbsp;==&nbsp;&amp;quot;yo&amp;quot;&lt;/div&gt;&lt;div&gt;<br>
 &nbsp;end&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;end&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;reply&nbsp;is:&lt;/div&gt;&lt;div&gt;&lt;div&gt;I,&nbsp;[2012-02-13&nbsp;14:50:54#16707]&nbsp; INFO&nbsp;--&nbsp;send:&nbsp;#&amp;lt;Qrack::Transport::Method:0x7fd6f3cee0d8&nbsp;@payload=#&amp;lt;Qrack::Protocol::Exchange::Declare:0x7fd6f3cee5d8&nbsp;@auto_delete=nil,&nbsp;@durable=nil,&nbsp;@passive=true,&nbsp;@nowait=nil,&nbsp;@type=:direct,&nbsp;@exchange=&amp;quot;myexchange&amp;quot;,&nbsp;@arguments=nil,&nbsp;@internal=nil,&nbsp;@ticket=1&amp;gt;,&nbsp;@channel=1&amp;gt;&lt;/div&gt;<br>
&lt;div&gt;I,&nbsp;[2012-02-13&nbsp;14:50:54#16707]&nbsp; INFO&nbsp;--&nbsp;received:&nbsp;#&amp;lt;Qrack::Transport::Method:0x7fd6f3ceb540&nbsp;@payload=#&amp;lt;Qrack::Protocol::Channel::Close:0x7fd6f3ceb400&nbsp;@method_id=10,&nbsp;@class_id=40,&nbsp;@reply_text=&amp;quot;ACCESS_REFUSED&nbsp;-&nbsp;access&nbsp;to&nbsp;exchange&nbsp;&amp;#39;myexchange&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/x&amp;#39;&nbsp;refused&nbsp;for&nbsp;user&nbsp;&amp;#39;writer&amp;#39;&amp;quot;,&nbsp;@reply_code=403&amp;gt;,&nbsp;@channel=1&amp;gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Why&nbsp;do&nbsp;I&nbsp;still&nbsp;need&nbsp;config&nbsp;permission,&nbsp;although&nbsp;I&nbsp;opened&nbsp;exchange&nbsp;with&nbsp;passive&nbsp;option.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Rubycut&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
