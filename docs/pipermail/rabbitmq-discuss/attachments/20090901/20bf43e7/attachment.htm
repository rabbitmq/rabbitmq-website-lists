<tt>
Hi&nbsp;all,&lt;br&gt;&lt;br&gt;We&amp;#39;re&nbsp;in&nbsp;a&nbsp;particular&nbsp;situation&nbsp;where&nbsp;occasionally&nbsp;a&nbsp;client&nbsp;will&nbsp;be&nbsp;disconnected&nbsp;from&nbsp;the&nbsp;server&nbsp;(often&nbsp;through&nbsp;some&nbsp;unclean&nbsp;network&nbsp;break,&nbsp;such&nbsp;as&nbsp;the&nbsp;random&nbsp;stuff&nbsp;that&nbsp;can&nbsp;happen&nbsp;with&nbsp;3G&nbsp;data&nbsp;links&nbsp;and&nbsp;virtual&nbsp;machines),&nbsp;but&nbsp;the&nbsp;queues&nbsp;associated&nbsp;with&nbsp;that&nbsp;client&nbsp;don&amp;#39;t&nbsp;die&nbsp;and&nbsp;continue&nbsp;to&nbsp;grow.&lt;br&gt;<br>
&lt;br&gt;Eventually&nbsp;some&nbsp;of&nbsp;the&nbsp;queues&nbsp;grow&nbsp;so&nbsp;large,&nbsp;that&nbsp;we&nbsp;start&nbsp;seeing&nbsp;txamqp&nbsp;(the&nbsp;client&nbsp;side&nbsp;library&nbsp;we&nbsp;use)&nbsp;start&nbsp;whining&nbsp;that&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;know&nbsp;what&nbsp;to&nbsp;do&nbsp;with&nbsp;&amp;quot;channel_flow&amp;quot;&nbsp;-&nbsp;presumably&nbsp;this&nbsp;is&nbsp;the&nbsp;memory&nbsp;based&nbsp;throttling&nbsp;kicking&nbsp;in&nbsp;(though&nbsp;I&nbsp;don&amp;#39;t&nbsp;recall&nbsp;explicitly&nbsp;enabling&nbsp;it&nbsp;-&nbsp;unless&nbsp;it&amp;#39;s&nbsp;something&nbsp;auto-enabled&nbsp;by&nbsp;default&nbsp;in&nbsp;the&nbsp;.deb&nbsp;packages?)...&lt;br&nbsp;clear=&quot;all&quot;&gt;<br>
&lt;br&gt;Questions&nbsp;would&nbsp;be:&lt;br&gt;&lt;ol&gt;&lt;li&gt;Even&nbsp;though&nbsp;we&nbsp;haven&amp;#39;t&nbsp;explicitly&nbsp;enabled&nbsp;it,&nbsp;if&nbsp;we&nbsp;do&nbsp;start&nbsp;to&nbsp;see&nbsp;channel_flow&nbsp;messages,&nbsp;this&nbsp;would&nbsp;be&nbsp;the&nbsp;memory&nbsp;based&nbsp;throttling,&nbsp;correct?&lt;br&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Besides&nbsp;rabbit&nbsp;noticing&nbsp;when&nbsp;a&nbsp;TCP&nbsp;connection&nbsp;dies&nbsp;-&nbsp;is&nbsp;there&nbsp;any&nbsp;&amp;quot;heartbeat&amp;quot;&nbsp;functionality&nbsp;built&nbsp;into&nbsp;rabbit&nbsp;and/or&nbsp;the&nbsp;AMQP&nbsp;spec&nbsp;that&nbsp;would&nbsp;actually&nbsp;test&nbsp;whether&nbsp;or&nbsp;not&nbsp;a&nbsp;connection&nbsp;is&nbsp;active,&nbsp;and&nbsp;if&nbsp;it&nbsp;isn&amp;#39;t,&nbsp;kill&nbsp;the&nbsp;relevant&nbsp;queues?&nbsp;Do&nbsp;I&nbsp;as&nbsp;the&nbsp;person&nbsp;who&nbsp;monitors&nbsp;the&nbsp;server&nbsp;configure&nbsp;this,&nbsp;or&nbsp;do&nbsp;the&nbsp;programmers&nbsp;who&nbsp;write&nbsp;our&nbsp;clients&nbsp;need&nbsp;to&nbsp;incorporate&nbsp;something&nbsp;into&nbsp;their&nbsp;code?&lt;br&gt;<br>
&lt;br&gt;&lt;/li&gt;&lt;li&gt;In&nbsp;calculating&nbsp;the&nbsp;&amp;quot;5%&amp;quot;&nbsp;of&nbsp;memory&nbsp;available&nbsp;threshold,&nbsp;what&nbsp;would&nbsp;rabbit&nbsp;be&nbsp;considering&nbsp;memory..&nbsp;Real?&nbsp;Swap?&nbsp;Virtual?&nbsp;All&nbsp;of&nbsp;the&nbsp;above?&lt;br&gt;Ie.&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;#&nbsp;cat&nbsp;/proc/meminfo&nbsp;|&nbsp;grep&nbsp;-i&nbsp;&amp;quot;total\|free&amp;quot;&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;MemTotal:      &nbsp;514056&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;MemFree:       &nbsp;144860&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;HighTotal:          &nbsp;0&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;HighFree:           &nbsp;0&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;LowTotal:      &nbsp;514056&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;LowFree:       &nbsp;144860&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;SwapTotal:    &nbsp;1044184&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;SwapFree:      &nbsp;838244&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;VmallocTotal:  &nbsp;442360&nbsp;kB&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;HugePages_Total:    &nbsp;0&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;HugePages_Free:     &nbsp;0&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;As&nbsp;a&nbsp;failsafe&nbsp;against&nbsp;runaway&nbsp;queues,&nbsp;I&amp;#39;m&nbsp;thinking&nbsp;of&nbsp;implementing&nbsp;something&nbsp;that&nbsp;culls&nbsp;queues&nbsp;over&nbsp;a&nbsp;given&nbsp;order&nbsp;of&nbsp;magnitude&nbsp;on&nbsp;a&nbsp;timed&nbsp;basis,&nbsp;or&nbsp;triggered&nbsp;by&nbsp;a&nbsp;lower&nbsp;memory&nbsp;threshold&nbsp;than&nbsp;rabbit&amp;#39;s..&lt;br&gt;<br>
<br>

</tt>
