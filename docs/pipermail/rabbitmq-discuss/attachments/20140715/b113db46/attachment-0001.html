<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Good&nbsp;Day&nbsp;Everyone.&lt;div&gt;Im&nbsp;a&nbsp;few&nbsp;months&nbsp;new&nbsp;to&nbsp;Node.js&nbsp;and&nbsp;Rabbit&nbsp;and&nbsp;im&nbsp;having&nbsp;a&nbsp;strange&nbsp;issue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(68,&nbsp;68,&nbsp;68);&nbsp;font-family:&nbsp;Verdana,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12px;&nbsp;text-align:&nbsp;right;&quot;&gt;RabbitMQ&nbsp;3.3.1&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(68,&nbsp;68,&nbsp;68);&nbsp;font-family:&nbsp;Verdana,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12px;&nbsp;text-align:&nbsp;right;&quot;&gt;Node.js&nbsp;&lt;/span&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;v0.10.26&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;Express&nbsp;4.2.0&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;Couchbase&nbsp;2.5.1&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;AMQP&nbsp;(module&nbsp;from&nbsp;NPM)&nbsp;0.2.0&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;The&nbsp;architecture&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;I&nbsp;have&nbsp;a&nbsp;main&nbsp;app&nbsp;that&nbsp;has&nbsp;a&nbsp;producer&nbsp;which&nbsp;sends&nbsp;a&nbsp;json&nbsp;object&nbsp;to&nbsp;RabbitMQ&nbsp;to&nbsp;a&nbsp;queue.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;I&nbsp;have&nbsp;a&nbsp;secondary&nbsp;app&nbsp;that&nbsp;is&nbsp;the&nbsp;consumer.&nbsp;It&nbsp;receives&nbsp;the&nbsp;json&nbsp;object,&nbsp;parses&nbsp;it&nbsp;and&nbsp;formats&nbsp;the&nbsp;data&nbsp;to&nbsp;be&nbsp;saved&nbsp;in&nbsp;couchbase.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;When&nbsp;I&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;couchbase&nbsp;or&nbsp;interact&nbsp;with&nbsp;couchbase&nbsp;at&nbsp;all&nbsp;from&nbsp;the&nbsp;consumer&nbsp;method,&nbsp;i&nbsp;get&nbsp;the&nbsp;following&nbsp;error&nbsp;amqp&nbsp;connection&nbsp;error:&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;error:&nbsp;&nbsp;code=ECONNRESET,&nbsp;errno=ECONNRESET,&nbsp;syscall=read&nbsp;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;I&nbsp;then&nbsp;added&nbsp;LongJohn&nbsp;from&nbsp;NPM&nbsp;which&nbsp;gives&nbsp;longer&nbsp;stack&nbsp;trace.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;and&nbsp;the&nbsp;error&nbsp;i&nbsp;get&nbsp;is&nbsp;:&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;div&gt;/node_modules/express/lib/request.js:252&lt;/div&gt;&lt;div&gt;var&nbsp;trustProxy&nbsp;=&nbsp;this.app.get('trust&nbsp;proxy');&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^&lt;/div&gt;&lt;div&gt;TypeError:&nbsp;Cannot&nbsp;call&nbsp;method&nbsp;'get'&nbsp;of&nbsp;undefined&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;note&nbsp;enabled&nbsp;a&nbsp;'trust&nbsp;proxy'&nbsp;and&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;unrelated&nbsp;to&nbsp;my&nbsp;issue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Im&nbsp;not&nbsp;sure&nbsp;how&nbsp;else&nbsp;to&nbsp;debug&nbsp;this&nbsp;issue&nbsp;and&nbsp;I&nbsp;am&nbsp;hoping&nbsp;someone&nbsp;out&nbsp;there&nbsp;has&nbsp;seen&nbsp;this&nbsp;before&nbsp;or&nbsp;can&nbsp;guide&nbsp;me&nbsp;where&nbsp;to&nbsp;look&nbsp;next.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;Jason&lt;/div&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#444444&quot;&nbsp;face=&quot;Verdana,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
