<tt>
I'm&nbsp;faced&nbsp;with&nbsp;much&nbsp;the&nbsp;same&nbsp;issue&nbsp;Matt&nbsp;P.&nbsp;mentions,&nbsp;but&nbsp;I&nbsp;wanted&nbsp;to&nbsp;make&nbsp;sure&nbsp;I&nbsp;understand&nbsp;how&nbsp;this&nbsp;works.&nbsp;&amp;nbsp;Is&nbsp;the&nbsp;following&nbsp;correct?&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;system&nbsp;is&nbsp;set&nbsp;up&nbsp;to&nbsp;have&nbsp;a&nbsp;set&nbsp;of&nbsp;three&nbsp;hosts&nbsp;each&nbsp;running&nbsp;a&nbsp;single&nbsp;RabbitMQ&nbsp;node.&nbsp;&amp;nbsp;A&nbsp;load-balancer&nbsp;routes&nbsp;traffic&nbsp;evenly&nbsp;between&nbsp;all&nbsp;the&nbsp;nodes,&nbsp;and&nbsp;has&nbsp;a&nbsp;health-check&nbsp;to&nbsp;determine&nbsp;whether&nbsp;each&nbsp;node&nbsp;is&nbsp;active&nbsp;and&nbsp;healthy.&nbsp;&amp;nbsp;The&nbsp;entire&nbsp;cluster&nbsp;is&nbsp;served&nbsp;by&nbsp;a&nbsp;single&nbsp;external&nbsp;IP&nbsp;address&nbsp;(which&nbsp;points&nbsp;to&nbsp;the&nbsp;load&nbsp;balancer).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Within&nbsp;the&nbsp;cluster,&nbsp;let's&nbsp;say&nbsp;I&nbsp;have&nbsp;a&nbsp;topic&nbsp;exchange,&nbsp;and&nbsp;a&nbsp;number&nbsp;of&nbsp;clients&nbsp;who&nbsp;each&nbsp;subscribe&nbsp;to&nbsp;a&nbsp;specific&nbsp;topic&nbsp;(several&nbsp;clients&nbsp;to&nbsp;a&nbsp;topic)&nbsp;by&nbsp;creating&nbsp;a&nbsp;permanent,&nbsp;named&nbsp;queue&nbsp;for&nbsp;themselves&nbsp;and&nbsp;binding&nbsp;it&nbsp;to&nbsp;the&nbsp;exchange.&nbsp;&amp;nbsp;The&nbsp;messages&nbsp;come&nbsp;from&nbsp;another&nbsp;server&nbsp;whose&nbsp;sole&nbsp;function&nbsp;is&nbsp;to&nbsp;generate&nbsp;these&nbsp;messages&nbsp;and&nbsp;publish&nbsp;them&nbsp;to&nbsp;the&nbsp;exchange.&nbsp;&amp;nbsp;Let's&nbsp;assume&nbsp;everyone&nbsp;connects&nbsp;successfully&nbsp;and&nbsp;a&nbsp;while&nbsp;passes&nbsp;during&nbsp;which&nbsp;everyone&nbsp;gets&nbsp;their&nbsp;messages&nbsp;as&nbsp;expected.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then,&nbsp;one&nbsp;node&nbsp;fails.&nbsp;&amp;nbsp;The&nbsp;load&nbsp;balancer&nbsp;detects&nbsp;this&nbsp;and&nbsp;stop&nbsp;routing&nbsp;new&nbsp;connections&nbsp;to&nbsp;that&nbsp;machine.&nbsp;&amp;nbsp;All&nbsp;clients&nbsp;connected&nbsp;to&nbsp;that&nbsp;node&nbsp;lose&nbsp;their&nbsp;connections&nbsp;and&nbsp;re-connect&nbsp;(through&nbsp;the&nbsp;load&nbsp;balancer)&nbsp;to&nbsp;one&nbsp;of&nbsp;the&nbsp;functioning&nbsp;nodes.&nbsp;&amp;nbsp;They&nbsp;re-subscribe&nbsp;to&nbsp;their&nbsp;named&nbsp;queues,&nbsp;and&nbsp;find&nbsp;all&nbsp;the&nbsp;messages&nbsp;they&nbsp;missed&nbsp;while&nbsp;they&nbsp;were&nbsp;re-connecting&nbsp;are&nbsp;waiting&nbsp;for&nbsp;them&nbsp;(assuming&nbsp;the&nbsp;mirroring&nbsp;was&nbsp;up-to-date&nbsp;when&nbsp;the&nbsp;one&nbsp;node&nbsp;failed),&nbsp;and&nbsp;continue&nbsp;to&nbsp;receive&nbsp;all&nbsp;new&nbsp;messages&nbsp;posted&nbsp;to&nbsp;their&nbsp;topics.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;server&nbsp;publishing&nbsp;the&nbsp;messages&nbsp;opens&nbsp;and&nbsp;closes&nbsp;its&nbsp;connection&nbsp;each&nbsp;time&nbsp;it&nbsp;needs&nbsp;to&nbsp;publish&nbsp;a&nbsp;message,&nbsp;so&nbsp;it&nbsp;notices&nbsp;nothing.&nbsp;&amp;nbsp;The&nbsp;load&nbsp;balancer&nbsp;automatically&nbsp;routes&nbsp;it&nbsp;to&nbsp;a&nbsp;functioning&nbsp;node,&nbsp;and&nbsp;publishes&nbsp;to&nbsp;the&nbsp;exchange&nbsp;which&nbsp;automatically&nbsp;routes&nbsp;the&nbsp;message&nbsp;to&nbsp;the&nbsp;queue&nbsp;no&nbsp;matter&nbsp;what&nbsp;node&nbsp;is&nbsp;current&nbsp;the&nbsp;master&nbsp;node&nbsp;for&nbsp;that&nbsp;queue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Am&nbsp;I&nbsp;missing&nbsp;anything&nbsp;here?&nbsp;&amp;nbsp;Thanks&nbsp;very&nbsp;much&nbsp;for&nbsp;any&nbsp;help!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;On&nbsp;Wednesday,&nbsp;February&nbsp;22,&nbsp;2012&nbsp;12:10:05&nbsp;PM&nbsp;UTC-8,&nbsp;Matthew&nbsp;Sackman&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;On&nbsp;Wed,&nbsp;Feb&nbsp;22,&nbsp;2012&nbsp;at&nbsp;10:39:04AM&nbsp;-0800,&nbsp;Matt&nbsp;Pietrek&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;|&nbsp;Messages&nbsp;are&nbsp;*always*&nbsp;read&nbsp;from&nbsp;the&nbsp;master&nbsp;node&nbsp;(for&nbsp;a&nbsp;given&nbsp;queue).&lt;br&gt;&amp;gt;&nbsp;&lt;br&gt;&amp;gt;&nbsp;This&nbsp;is&nbsp;very&nbsp;helpful.&nbsp;Going&nbsp;a&nbsp;step&nbsp;further,&nbsp;is&nbsp;it&nbsp;true&nbsp;to&nbsp;say&nbsp;that&nbsp;in&nbsp;a&lt;br&gt;&amp;gt;&nbsp;cluster&nbsp;where&nbsp;we&nbsp;mirror&nbsp;all&nbsp;queues,&nbsp;there's&nbsp;really&nbsp;no&nbsp;benefit&nbsp;to&nbsp;assigning&lt;br&gt;&amp;gt;&nbsp;the&nbsp;VIP&nbsp;to&nbsp;one&nbsp;node&nbsp;over&nbsp;another?&lt;p&gt;Correct,&nbsp;though&nbsp;for&nbsp;performance&nbsp;reasons&nbsp;you&nbsp;might&nbsp;like&nbsp;to&nbsp;ensure&nbsp;the&lt;br&gt;masters&nbsp;are&nbsp;roughly&nbsp;uniformly&nbsp;spread&nbsp;over&nbsp;all&nbsp;the&nbsp;nodes.&lt;/p&gt;&lt;p&gt;Matthew&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;javascript:&quot;&nbsp;target=&quot;_blank&quot;&nbsp;gdf-obfuscated-mailto=&quot;eVwFYvdDXZQJ&quot;&gt;rabbitmq...@lists.&lt;wbr&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;wbr&gt;cgi-bin/mailman/listinfo/&lt;wbr&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
