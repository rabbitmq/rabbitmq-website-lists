<tt>
&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;Matthew,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;From&nbsp;your&nbsp;perspective&nbsp;is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;that's&nbsp;not&nbsp;a&nbsp;bad&nbsp;idea&nbsp;while&nbsp;not&nbsp;impacting&nbsp;production&nbsp;queue&nbsp;use?&nbsp;Your&nbsp;points&nbsp;are&nbsp;valid,&nbsp;however&nbsp;since&nbsp;they're&nbsp;arguments&nbsp;and&nbsp;Rabbit&nbsp;doesn't&nbsp;care&nbsp;about&nbsp;or&nbsp;use&nbsp;arguments,&nbsp;I&nbsp;wonder&nbsp;how&nbsp;impacting&nbsp;it&nbsp;can&nbsp;be?&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Gavin&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;&lt;p&nbsp;style=&quot;color:&nbsp;#a0a0a0;&quot;&gt;On&nbsp;Friday,&nbsp;May&nbsp;13,&nbsp;2011&nbsp;at&nbsp;8:10&nbsp;AM,&nbsp;Matthew&nbsp;Sackman&nbsp;wrote:&lt;/p&gt;&nbsp;--&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;style=&quot;color:&nbsp;#a0a0a0;&quot;&gt;On&nbsp;Friday,&nbsp;May&nbsp;13,&nbsp;2011&nbsp;at&nbsp;8:10&nbsp;AM,&nbsp;Matthew&nbsp;Sackman&nbsp;wrote:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Fri,&nbsp;May&nbsp;13,&nbsp;2011&nbsp;at&nbsp;10:58:34AM&nbsp;+0100,&nbsp;Simon&nbsp;MacMullen&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Depends&nbsp;how&nbsp;you&nbsp;define&nbsp;&quot;bad&nbsp;idea&quot;.&nbsp;In&nbsp;terms&nbsp;of&nbsp;today's&lt;br&gt;implementation&nbsp;you&nbsp;should&nbsp;be&nbsp;fine,&nbsp;as&nbsp;long&nbsp;as&nbsp;you&nbsp;don't&nbsp;expect&nbsp;(for&lt;br&gt;example)&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;flip&nbsp;the&nbsp;durability&nbsp;field&nbsp;and&nbsp;have&nbsp;that&nbsp;mean&lt;br&gt;something.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;It's&nbsp;a&nbsp;very&nbsp;bad&nbsp;idea.&nbsp;For&nbsp;one&nbsp;thing,&nbsp;Rabbit&nbsp;assumes&nbsp;that&nbsp;the&nbsp;queue&lt;br&gt;record&nbsp;is&nbsp;unaltered&nbsp;after&nbsp;the&nbsp;queue&nbsp;has&nbsp;been&nbsp;created.&nbsp;Consequently&nbsp;the&lt;br&gt;amqqueue_process&nbsp;process&nbsp;takes&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;#amqqueue&nbsp;record&nbsp;and&nbsp;holds&lt;br&gt;it&nbsp;in&nbsp;its&nbsp;state.&nbsp;It&nbsp;never&nbsp;updates&nbsp;it.&nbsp;So&nbsp;if&nbsp;you&nbsp;change&nbsp;the&nbsp;copy&nbsp;in&lt;br&gt;mnesia,&nbsp;then&nbsp;you&nbsp;subsquently&nbsp;have&nbsp;divergence&nbsp;between&nbsp;the&nbsp;queue&nbsp;process's&lt;br&gt;copy,&nbsp;and&nbsp;the&nbsp;mnesia&nbsp;copy.&nbsp;This&nbsp;can&nbsp;lead&nbsp;to&nbsp;suprising&nbsp;results.&lt;br&gt;&lt;br&gt;For&nbsp;example&nbsp;if&nbsp;you&nbsp;issue&nbsp;amqqueue:info&nbsp;on&nbsp;a&nbsp;queue&nbsp;then&nbsp;it'll&nbsp;go&nbsp;through&lt;br&gt;to&nbsp;the&nbsp;queue&nbsp;and&nbsp;not&nbsp;mnesia.&nbsp;Thus&nbsp;you'll&nbsp;find&nbsp;that&nbsp;results&nbsp;in&nbsp;management&lt;br&gt;and&nbsp;in&nbsp;rabbitmqctl&nbsp;now&nbsp;don't&nbsp;match.&lt;br&gt;&lt;br&gt;You&nbsp;then&nbsp;have&nbsp;things&nbsp;like&nbsp;the&nbsp;property&nbsp;that&nbsp;queue&nbsp;redeclaration&nbsp;should&lt;br&gt;fail&nbsp;if&nbsp;arguments&nbsp;do&nbsp;not&nbsp;match&nbsp;(semantically)&nbsp;the&nbsp;original&nbsp;declaration.&lt;br&gt;But&nbsp;this&nbsp;only&nbsp;goes&nbsp;as&nbsp;far&nbsp;as&nbsp;mnesia.&nbsp;Consequently,&nbsp;you&nbsp;will&nbsp;have&nbsp;the&lt;br&gt;queue,&nbsp;if&nbsp;you&nbsp;interrogate&nbsp;it,&nbsp;claiming&nbsp;its&nbsp;arguments&nbsp;are&nbsp;one&nbsp;thing,&nbsp;but&lt;br&gt;if&nbsp;you&nbsp;try&nbsp;to&nbsp;redeclare&nbsp;the&nbsp;queue&nbsp;with&nbsp;those&nbsp;arguments,&nbsp;you&nbsp;can&nbsp;find&lt;br&gt;it'll&nbsp;fail&nbsp;because&nbsp;the&nbsp;mnesia&nbsp;copy&nbsp;is&nbsp;different.&lt;br&gt;&lt;br&gt;Finally,&nbsp;you'll&nbsp;have&nbsp;the&nbsp;fact&nbsp;that&nbsp;if&nbsp;the&nbsp;broker&nbsp;is&nbsp;restarted,&nbsp;you'll&lt;br&gt;have&nbsp;the&nbsp;queues&nbsp;recovered&nbsp;with&nbsp;their&nbsp;arguments&nbsp;taken&nbsp;from&nbsp;mnesia.&nbsp;So&lt;br&gt;suddenly&nbsp;on&nbsp;startup,&nbsp;you'll&nbsp;have&nbsp;queues&nbsp;being&nbsp;restarted&nbsp;with&nbsp;different&lt;br&gt;arguments&nbsp;from&nbsp;that&nbsp;which&nbsp;they&nbsp;were&nbsp;last&nbsp;running&nbsp;with.&lt;br&gt;&lt;br&gt;Matthew&lt;br&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;
</tt>
