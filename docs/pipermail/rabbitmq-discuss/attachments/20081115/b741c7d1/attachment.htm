<tt>
would&nbsp;a&nbsp;slower&nbsp;broker&nbsp;(&amp;lt;1000msg/sec),&nbsp;that&nbsp;provides&nbsp;infinite&nbsp;message&nbsp;storage&nbsp;fit&nbsp;the&nbsp;bill?&lt;br&gt;&lt;br&gt;If&nbsp;there&nbsp;were&nbsp;an&nbsp;option&nbsp;in&nbsp;rabbit&nbsp;to&nbsp;store&nbsp;all&nbsp;messages&nbsp;on&nbsp;disk,&lt;br&gt;and&nbsp;forget&nbsp;them&nbsp;there,&nbsp;then&nbsp;reload&nbsp;them&nbsp;when&nbsp;ready&nbsp;to&nbsp;send,&nbsp;then&lt;br&gt;<br>
the&nbsp;retention&nbsp;and&nbsp;queuing&nbsp;limits&nbsp;go&nbsp;away&nbsp;(if&nbsp;queues&nbsp;are&nbsp;also&nbsp;on&nbsp;disk.)&amp;nbsp;&nbsp;basically&nbsp;if&nbsp;no-one&nbsp;is&nbsp;consuming&nbsp;from&nbsp;a&nbsp;queue&nbsp;for&nbsp;a&nbsp;certain&nbsp;amount&nbsp;of&nbsp;time...&nbsp;say&nbsp;minutes,&nbsp;those&nbsp;queues&nbsp;should&nbsp;flush&nbsp;to&nbsp;disk,&nbsp;and&nbsp;free&nbsp;up&nbsp;memory&nbsp;for&nbsp;active&nbsp;queues.&lt;br&gt;<br>
&lt;br&gt;I&amp;#39;m&nbsp;not&nbsp;suggesting&nbsp;rabbit&nbsp;modify&nbsp;their&nbsp;high&nbsp;speed&nbsp;way&nbsp;of&nbsp;doing&nbsp;things,&nbsp;but&nbsp;there&nbsp;might&nbsp;be&nbsp;another&nbsp;mode...&nbsp;the&nbsp;trivially&nbsp;primitive&nbsp;way&nbsp;to&nbsp;do&nbsp;it:&lt;br&gt;ie.&lt;br&gt;exchange&nbsp;stores&nbsp;into&nbsp;directory&nbsp;tree:&lt;br&gt;&lt;br&gt;db/2008/11/08/23/59/msg324&nbsp;msg325...&lt;br&gt;<br>
&lt;br&gt;the&nbsp;routing&nbsp;algorithm&nbsp;makes&nbsp;links&nbsp;for&nbsp;the&nbsp;queues:&lt;br&gt;&lt;br&gt;queues/myqueue/msg324&nbsp;--&amp;gt;&nbsp;unix&nbsp;hard&nbsp;link,&nbsp;to&nbsp;msg324&nbsp;in&nbsp;the&nbsp;db&nbsp;tree.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;msg325...&lt;br&gt;&lt;br&gt;etc...&lt;br&gt;we&nbsp;timed&nbsp;a&nbsp;reasonably&nbsp;linux&nbsp;server&nbsp;a&nbsp;few&nbsp;years&nbsp;ago&nbsp;at&nbsp;being&nbsp;able&nbsp;to&nbsp;perform&nbsp;20,000&nbsp;file&nbsp;creations&nbsp;per&nbsp;second,&nbsp;which&nbsp;was&nbsp;enough&nbsp;to&nbsp;support&nbsp;the&nbsp;messaging&nbsp;rate&nbsp;we&nbsp;needed.&lt;br&gt;<br>
&lt;br&gt;yes,&nbsp;you&nbsp;need&nbsp;a&nbsp;single&nbsp;file&nbsp;system&nbsp;for&nbsp;the&nbsp;message&nbsp;store.&amp;nbsp;&nbsp;We&nbsp;run&nbsp;such&nbsp;db&amp;#39;s&nbsp;with&nbsp;upwards&nbsp;of&nbsp;20,000,000&nbsp;messages&nbsp;in&nbsp;an&nbsp;ext3,&nbsp;with&nbsp;decent&nbsp;performance.&amp;nbsp;&nbsp;LRU&nbsp;is&nbsp;a&nbsp;wonderful&nbsp;gift&nbsp;from&nbsp;the&nbsp;paging&nbsp;system&nbsp;and&nbsp;buffer&nbsp;cache&nbsp;that&nbsp;you&nbsp;get&nbsp;for&nbsp;free.&amp;nbsp;&nbsp;It&nbsp;manages&nbsp;what&nbsp;to&nbsp;keep&nbsp;in&nbsp;memory&nbsp;completely&nbsp;transparently&nbsp;to&nbsp;the&nbsp;application&nbsp;code.&lt;br&gt;<br>
&lt;br&gt;when&nbsp;I&nbsp;can&nbsp;get&nbsp;away&nbsp;with&nbsp;a&nbsp;trivially&nbsp;primitive&nbsp;implementation,&nbsp;I&nbsp;take&nbsp;it.&lt;br&gt;&lt;br&gt;(before&nbsp;someone&nbsp;says&nbsp;show&nbsp;me&nbsp;the&nbsp;code...&nbsp;&lt;a&nbsp;href=&quot;http://metpx.sf.net&quot;&gt;http://metpx.sf.net&lt;/a&gt;,&nbsp;and&nbsp;no&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;do&nbsp;AMQP...&nbsp;but&nbsp;the&nbsp;ideas&nbsp;are&nbsp;vanishingly&nbsp;alike.)&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Nov&nbsp;15,&nbsp;2008&nbsp;at&nbsp;4:47&nbsp;PM,&nbsp;rrabarg2&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rrabarg2@yahoo.com.sg&quot;&gt;rrabarg2@yahoo.com.sg&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&nbsp;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
&nbsp;&nbsp;<br>
<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Ben,&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;have&nbsp;a&nbsp;system&nbsp;which&nbsp;includes&nbsp;a&nbsp;homogeneous&nbsp;set&nbsp;of&nbsp;message&nbsp;producers<br>
(we&nbsp;call&nbsp;switches)&nbsp;and&nbsp;a&nbsp;backoffice&nbsp;application&nbsp;which&nbsp;consumes&nbsp;these<br>
messages.&amp;nbsp;&nbsp;We&nbsp;have&nbsp;a&nbsp;guaranteed&nbsp;delivery&nbsp;requirement&nbsp;for&nbsp;the&nbsp;messages,<br>
we&nbsp;also&nbsp;require&nbsp;that&nbsp;the&nbsp;switches&nbsp;can&nbsp;continue&nbsp;to&nbsp;operate&nbsp;unhindered<br>
(assuming&nbsp;infinite&nbsp;disk&nbsp;space)&nbsp;during&nbsp;long&nbsp;periods&nbsp;of&nbsp;slow&nbsp;or<br>
non-consumption&nbsp;of&nbsp;messages&nbsp;by&nbsp;the&nbsp;backoffice.&amp;nbsp;&nbsp;I&amp;#39;m&nbsp;not&nbsp;familiar&nbsp;with<br>
rabbitMQ,&nbsp;but&nbsp;the&nbsp;implication&nbsp;I&nbsp;take&nbsp;from&nbsp;this&nbsp;thread&nbsp;is&nbsp;that&nbsp;rabbitMQ<br>
would&nbsp;not&nbsp;meet&nbsp;our&nbsp;requirements&nbsp;(at&nbsp;least&nbsp;not&nbsp;without&nbsp;significant&nbsp;extra<br>
bespoke&nbsp;work)&amp;nbsp;&nbsp;-&nbsp;is&nbsp;that&nbsp;a&nbsp;fair&nbsp;statement?&lt;br&gt;<br>
&lt;br&gt;<br>
Regards&lt;br&gt;<br>
&lt;br&gt;<br>
Graham&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
