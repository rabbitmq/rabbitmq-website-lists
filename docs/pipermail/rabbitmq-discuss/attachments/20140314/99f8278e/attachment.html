<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Alex.&lt;div&gt;I&nbsp;follow&nbsp;and&nbsp;read&nbsp;through&nbsp;the&nbsp;thread&nbsp;carefully&nbsp;because&nbsp;I&nbsp;ran&nbsp;into&nbsp;almost&nbsp;exactly&nbsp;the&nbsp;same&nbsp;problem&nbsp;when&nbsp;trying&nbsp;to&nbsp;use&nbsp;SSL&nbsp;to&nbsp;authenticate&nbsp;my&nbsp;.NET&nbsp;client.&nbsp;Both&nbsp;broker&nbsp;and&nbsp;client&nbsp;sit&nbsp;on&nbsp;the&nbsp;same&nbsp;machine.&nbsp;The&nbsp;only&nbsp;advertised&nbsp;working&nbsp;example&nbsp;in&nbsp;http://blog.johnruiz.com/2011/12/establishing-ssl-connection-to-rabbitmq.html&nbsp;does&nbsp;not&nbsp;work&nbsp;for&nbsp;me&nbsp;for&nbsp;some&nbsp;reason.&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;follow&nbsp;all&nbsp;the&nbsp;suggested&nbsp;route&nbsp;and&nbsp;start&nbsp;up&nbsp;s_server&nbsp;and&nbsp;ran&nbsp;my&nbsp;.net&nbsp;client&nbsp;to&nbsp;it&nbsp;as&nbsp;suggested.&nbsp;this&nbsp;is&nbsp;what&nbsp;I&nbsp;got:&lt;/div&gt;&lt;div&gt;&lt;div&gt;openssl&nbsp;s_server&nbsp;-accept&nbsp;5671&nbsp;-cert&nbsp;SSLserver/cert.pem&nbsp;-key&nbsp;SSLserver/key.pem&nbsp;\&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&nbsp;&nbsp;-CAfile&nbsp;SSLCA/cacert.pem&lt;/div&gt;&lt;div&gt;Using&nbsp;default&nbsp;temp&nbsp;DH&nbsp;parameters&lt;/div&gt;&lt;div&gt;Using&nbsp;default&nbsp;temp&nbsp;ECDH&nbsp;parameters&lt;/div&gt;&lt;div&gt;ACCEPT&lt;/div&gt;&lt;div&gt;-----BEGIN&nbsp;SSL&nbsp;SESSION&nbsp;PARAMETERS-----&lt;/div&gt;&lt;div&gt;MHUCAQECAgMABAIABQQg2uALybqAbk6tXfkSN/Pypg4kqeosku2CdlyFiQj9gGcE&lt;/div&gt;&lt;div&gt;MI0tXD4TyV/YWyqUB8gTnOc/Scx3hLJYG1dxGbDalzDg/Vz9BOSGBqfkvCYAERLq&lt;/div&gt;&lt;div&gt;CKEGAgRTIvxuogQCAgEspAYEBAEAAAA=&lt;/div&gt;&lt;div&gt;-----END&nbsp;SSL&nbsp;SESSION&nbsp;PARAMETERS-----&lt;/div&gt;&lt;div&gt;Shared&nbsp;ciphers:RC4-SHA:DES-CBC3-SHA:EDH-DSS-DES-CBC3-SHA:RC4-MD5&lt;/div&gt;&lt;div&gt;CIPHER&nbsp;is&nbsp;RC4-SHA&lt;/div&gt;&lt;div&gt;Secure&nbsp;Renegotiation&nbsp;IS&nbsp;supported&lt;/div&gt;&lt;div&gt;AMQP&nbsp;&nbsp;&nbsp;&nbsp;ERROR&lt;/div&gt;&lt;div&gt;shutting&nbsp;down&nbsp;SSL&lt;/div&gt;&lt;div&gt;CONNECTION&nbsp;CLOSED&lt;/div&gt;&lt;div&gt;ACCEPT&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;and&nbsp;the&nbsp;.NET&nbsp;errors&nbsp;displays:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;None&nbsp;of&nbsp;the&nbsp;specified&nbsp;endpoints&nbsp;were&nbsp;reachable&lt;/div&gt;&lt;div&gt;Endpoints&nbsp;attempted:&lt;/div&gt;&lt;div&gt;------------------------------------------------&lt;/div&gt;&lt;div&gt;endpoint=amqp-0-9://MM181938-PC:5671,&nbsp;attempts=1&lt;/div&gt;&lt;div&gt;RabbitMQ.Client.Exceptions.ProtocolVersionMismatchException:&nbsp;AMQP&nbsp;server&nbsp;protoc&lt;/div&gt;&lt;div&gt;l&nbsp;negotiation&nbsp;failure:&nbsp;server&nbsp;version&nbsp;unknown-unknown,&nbsp;client&nbsp;version&nbsp;0-9&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.Impl.ConnectionBase.StartAndTune()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.Framing.Impl.v0_9_1.Connection.Open(Boolean&nbsp;insist)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.Impl.ConnectionBase..ctor(ConnectionFactory&nbsp;factory,&nbsp;Bool&lt;/div&gt;&lt;div&gt;an&nbsp;insist,&nbsp;IFrameHandler&nbsp;frameHandler)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.Framing.Impl.v0_9_1.Connection..ctor(ConnectionFactory&nbsp;fa&lt;/div&gt;&lt;div&gt;tory,&nbsp;Boolean&nbsp;insist,&nbsp;IFrameHandler&nbsp;frameHandler)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.Framing.Impl.v0_9_1.ProtocolBase.CreateConnection(Connect&lt;/div&gt;&lt;div&gt;onFactory&nbsp;factory,&nbsp;Boolean&nbsp;insist,&nbsp;IFrameHandler&nbsp;frameHandler)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.ConnectionFactory.FollowRedirectChain(Int32&nbsp;maxRedirects,&lt;/div&gt;&lt;div&gt;IDictionary`2&nbsp;connectionAttempts,&nbsp;IDictionary`2&nbsp;connectionErrors,&nbsp;AmqpTcpEndpoi&lt;/div&gt;&lt;div&gt;t[]&amp;&nbsp;mostRecentKnownHosts,&nbsp;AmqpTcpEndpoint&nbsp;endpoint)&lt;/div&gt;&lt;div&gt;================================================&lt;/div&gt;&lt;div&gt;Stack&nbsp;trace:&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.ConnectionFactory.CreateConnection(Int32&nbsp;maxRedirects)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitMQ.Client.ConnectionFactory.CreateConnection()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;at&nbsp;RabbitSslTest.Program.Start()&nbsp;in&nbsp;c:\Users\meng\Documents\Visual&nbsp;Studio&nbsp;20&lt;/div&gt;&lt;div&gt;2\Projects\testCert\testCert\Program.cs:line&nbsp;59&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;please&nbsp;help.&lt;/div&gt;&lt;div&gt;Yours,&nbsp;&lt;/div&gt;&lt;div&gt;yoda&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;On&nbsp;Monday,&nbsp;12&nbsp;September&nbsp;2011&nbsp;12:22:33&nbsp;UTC-4,&nbsp;Alexandru&nbsp;Scvor≈£ov&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&gt;&nbsp;As&nbsp;I&nbsp;said&nbsp;before&nbsp;we&nbsp;tried&nbsp;CN=server-PC&nbsp;for&nbsp;our&nbsp;certs&lt;br&gt;&gt;&nbsp;and&nbsp;added&nbsp;&quot;server-PC&nbsp;10.35.110.167&quot;&nbsp;to&nbsp;hosts&nbsp;file&nbsp;on&nbsp;our&nbsp;windows&nbsp;machine.&lt;p&gt;Ok.&lt;/p&gt;&lt;p&gt;&gt;&nbsp;And&nbsp;when&nbsp;we&nbsp;check&nbsp;we&nbsp;still&nbsp;get&nbsp;&quot;bad&nbsp;gethostbyaddr&quot;&nbsp;from&nbsp;openssl&nbsp;s_server&lt;br&gt;&gt;&nbsp;also&nbsp;.net&nbsp;client&nbsp;crashes,&lt;br&gt;&gt;&nbsp;and&nbsp;problem&nbsp;continues...&lt;/p&gt;&lt;p&gt;Turns&nbsp;out&nbsp;that's&nbsp;because&nbsp;the&nbsp;client's&nbsp;IP&nbsp;isn't&nbsp;in&nbsp;the&nbsp;server's&nbsp;hosts&lt;br&gt;file.&nbsp;&nbsp;Should&nbsp;be&nbsp;harmless&nbsp;and&nbsp;works&nbsp;fine&nbsp;without&nbsp;that.&lt;/p&gt;&lt;p&gt;The&nbsp;output&nbsp;from&nbsp;s_client&nbsp;is&nbsp;perfectly&nbsp;fine&nbsp;and&nbsp;shows&nbsp;that&nbsp;the&nbsp;.NET&nbsp;can&lt;br&gt;connect&nbsp;to&nbsp;the&nbsp;server&nbsp;machine&nbsp;via&nbsp;SSL.&lt;/p&gt;&lt;p&gt;Is&nbsp;there&nbsp;any&nbsp;chance&nbsp;you&nbsp;could&nbsp;try&nbsp;running&nbsp;your&nbsp;.NET&nbsp;program&nbsp;from&nbsp;a&nbsp;different&lt;br&gt;machine?&nbsp;&nbsp;In&nbsp;particular,&nbsp;could&nbsp;you&nbsp;run&nbsp;under&nbsp;Mono&nbsp;on&nbsp;the&nbsp;same&nbsp;machine&nbsp;as&lt;br&gt;the&nbsp;broker?&lt;/p&gt;&lt;p&gt;Please&nbsp;reply&nbsp;to&nbsp;this&nbsp;message&nbsp;and&nbsp;don't&nbsp;start&nbsp;a&nbsp;new&nbsp;thread.&lt;/p&gt;&lt;p&gt;Cheers,&lt;br&gt;Alex&lt;/p&gt;&lt;p&gt;On&nbsp;Mon,&nbsp;Sep&nbsp;12,&nbsp;2011&nbsp;at&nbsp;05:25:47PM&nbsp;+0200,&nbsp;Umut&nbsp;Sahin&nbsp;wrote:&lt;br&gt;&gt;&nbsp;As&nbsp;I&nbsp;said&nbsp;before&nbsp;we&nbsp;tried&nbsp;CN=server-PC&nbsp;for&nbsp;our&nbsp;certs&lt;br&gt;&gt;&nbsp;and&nbsp;added&nbsp;&quot;server-PC&nbsp;10.35.110.167&quot;&nbsp;to&nbsp;hosts&nbsp;file&nbsp;on&nbsp;our&nbsp;windows&nbsp;machine.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;And&nbsp;when&nbsp;we&nbsp;check&nbsp;we&nbsp;still&nbsp;get&nbsp;&quot;bad&nbsp;gethostbyaddr&quot;&nbsp;from&nbsp;openssl&nbsp;s_server&lt;br&gt;&gt;&nbsp;also&nbsp;.net&nbsp;client&nbsp;crashes,&lt;br&gt;&gt;&nbsp;and&nbsp;problem&nbsp;continues...&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Regards,&lt;br&gt;&gt;&nbsp;Umut&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;______________________________&lt;wbr&gt;_________________&lt;br&gt;&gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;javascript:&quot;&nbsp;target=&quot;_blank&quot;&nbsp;gdf-obfuscated-mailto=&quot;nDZ5_kB4fl0J&quot;&nbsp;onmousedown=&quot;this.href='javascript:';return&nbsp;true;&quot;&nbsp;onclick=&quot;this.href='javascript:';return&nbsp;true;&quot;&gt;rabbitmq...@lists.&lt;wbr&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onmousedown=&quot;this.href='https://www.google.com/url?q\75https%3A%2F%2Flists.rabbitmq.com%2Fcgi-bin%2Fmailman%2Flistinfo%2Frabbitmq-discuss\46sa\75D\46sntz\0751\46usg\75AFQjCNEa7MyKsA1XPSVZIhQM5kBuKmKiKg';return&nbsp;true;&quot;&nbsp;onclick=&quot;this.href='https://www.google.com/url?q\75https%3A%2F%2Flists.rabbitmq.com%2Fcgi-bin%2Fmailman%2Flistinfo%2Frabbitmq-discuss\46sa\75D\46sntz\0751\46usg\75AFQjCNEa7MyKsA1XPSVZIhQM5kBuKmKiKg';return&nbsp;true;&quot;&gt;https://lists.rabbitmq.com/&lt;wbr&gt;cgi-bin/mailman/listinfo/&lt;wbr&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;javascript:&quot;&nbsp;target=&quot;_blank&quot;&nbsp;gdf-obfuscated-mailto=&quot;nDZ5_kB4fl0J&quot;&nbsp;onmousedown=&quot;this.href='javascript:';return&nbsp;true;&quot;&nbsp;onclick=&quot;this.href='javascript:';return&nbsp;true;&quot;&gt;rabbitmq...@lists.&lt;wbr&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onmousedown=&quot;this.href='https://www.google.com/url?q\75https%3A%2F%2Flists.rabbitmq.com%2Fcgi-bin%2Fmailman%2Flistinfo%2Frabbitmq-discuss\46sa\75D\46sntz\0751\46usg\75AFQjCNEa7MyKsA1XPSVZIhQM5kBuKmKiKg';return&nbsp;true;&quot;&nbsp;onclick=&quot;this.href='https://www.google.com/url?q\75https%3A%2F%2Flists.rabbitmq.com%2Fcgi-bin%2Fmailman%2Flistinfo%2Frabbitmq-discuss\46sa\75D\46sntz\0751\46usg\75AFQjCNEa7MyKsA1XPSVZIhQM5kBuKmKiKg';return&nbsp;true;&quot;&gt;https://lists.rabbitmq.com/&lt;wbr&gt;cgi-bin/mailman/listinfo/&lt;wbr&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
