<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Ben,&lt;br&gt;&lt;br&gt;Thanks&nbsp;so&nbsp;much&nbsp;for&nbsp;looking&nbsp;into&nbsp;this&nbsp;and&nbsp;giving&nbsp;it&nbsp;your&nbsp;consideration.&nbsp;I&amp;#39;m&nbsp;happy&nbsp;that&nbsp;you&nbsp;found&nbsp;it&nbsp;of&nbsp;some&nbsp;value.&nbsp;I&nbsp;was&nbsp;a&nbsp;bit&nbsp;worried&nbsp;that&nbsp;you&nbsp;would&nbsp;have&nbsp;concerns&nbsp;about&nbsp;the&nbsp;performance&nbsp;of&nbsp;the&nbsp;modified&nbsp;code,&nbsp;given&nbsp;that&nbsp;it&amp;#39;s&nbsp;no&nbsp;longer&nbsp;a&nbsp;direct&nbsp;module&nbsp;call.&nbsp;I&nbsp;read&nbsp;your&nbsp;comments&nbsp;below&nbsp;with&nbsp;interest,&nbsp;and&nbsp;I&nbsp;am&nbsp;watching&nbsp;and&nbsp;learning.&nbsp;I&amp;#39;ll&nbsp;be&nbsp;very&nbsp;curious&nbsp;to&nbsp;see&nbsp;the&nbsp;actual&nbsp;finished&nbsp;code&nbsp;when&nbsp;it&amp;#39;s&nbsp;released.&nbsp;I&amp;#39;m&nbsp;glad&nbsp;the&nbsp;direct&nbsp;driver&nbsp;problem&nbsp;was&nbsp;just&nbsp;a&nbsp;commented-out&nbsp;line&nbsp;of&nbsp;code&nbsp;-&nbsp;I&nbsp;admit&nbsp;I&nbsp;did&nbsp;do&nbsp;it&nbsp;all&nbsp;in&nbsp;a&nbsp;hurry&nbsp;as&nbsp;a&nbsp;proof&nbsp;of&nbsp;concept.&nbsp;&lt;br&gt;<br>
&lt;br&gt;I&nbsp;have&nbsp;in&nbsp;the&nbsp;meantime&nbsp;created&nbsp;my&nbsp;own&nbsp;little&nbsp;rabbitmq_common&nbsp;application,&nbsp;used&nbsp;only&nbsp;by&nbsp;the&nbsp;Erlang&nbsp;client,&nbsp;and&nbsp;it&nbsp;is&nbsp;all&nbsp;working&nbsp;famously&nbsp;and&nbsp;nicely&nbsp;decoupled&nbsp;from&nbsp;the&nbsp;server.&nbsp;I&nbsp;trust&nbsp;that&nbsp;the&nbsp;changes&nbsp;you&nbsp;are&nbsp;talking&nbsp;about&nbsp;will&nbsp;come&nbsp;out&nbsp;in&nbsp;the&nbsp;next&nbsp;release&nbsp;of&nbsp;RabbitMQ,&nbsp;so&nbsp;when&nbsp;that&nbsp;happens,&nbsp;I&amp;#39;ll&nbsp;change&nbsp;my&nbsp;code&nbsp;to&nbsp;use&nbsp;the&nbsp;&amp;quot;official&amp;quot;&nbsp;client&nbsp;and&nbsp;whatever&nbsp;the&nbsp;common&nbsp;app&nbsp;is&nbsp;called.&lt;br&gt;<br>
&lt;br&gt;Regards,&lt;br&gt;Edwin&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Sep&nbsp;10,&nbsp;2008&nbsp;at&nbsp;6:54&nbsp;PM,&nbsp;Ben&nbsp;Hood&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Edwin,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;Sep&nbsp;8,&nbsp;2008&nbsp;at&nbsp;8:19&nbsp;AM,&nbsp;Ben&nbsp;Hood&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;I&amp;#39;d&nbsp;be&nbsp;very&nbsp;interested&nbsp;to&nbsp;hear&nbsp;your&nbsp;thoughts&nbsp;on&nbsp;this&nbsp;approach,&nbsp;and&nbsp;whether&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;or&nbsp;not&nbsp;you&nbsp;can&nbsp;get&nbsp;the&nbsp;direct&nbsp;driver&nbsp;test&nbsp;to&nbsp;work.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&amp;#39;ve&nbsp;started&nbsp;a&nbsp;branch&nbsp;for&nbsp;this&nbsp;in&nbsp;hg,&nbsp;it&amp;#39;s&nbsp;called&nbsp;bug19373.&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;that&nbsp;I&amp;#39;ve&nbsp;done&nbsp;so&nbsp;far&nbsp;is&nbsp;to&nbsp;apply&nbsp;your&nbsp;patch&nbsp;and&nbsp;fix&nbsp;the&nbsp;line&nbsp;that&lt;br&gt;<br>
you&nbsp;commented&nbsp;out&nbsp;that&nbsp;made&nbsp;the&nbsp;direct&nbsp;test&nbsp;fail&nbsp;(you&nbsp;un-exported&nbsp;the&lt;br&gt;<br>
start/2&nbsp;function,&nbsp;which&nbsp;is&nbsp;required&nbsp;for&nbsp;the&nbsp;direct&nbsp;client).&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;do&nbsp;have&nbsp;a&nbsp;few&nbsp;observations&nbsp;that&nbsp;I&amp;#39;ll&nbsp;just&nbsp;work&nbsp;into&nbsp;that&nbsp;branch&nbsp;-&lt;br&gt;<br>
&lt;br&gt;<br>
1.&nbsp;The&nbsp;string&nbsp;building&nbsp;is&nbsp;probably&nbsp;unecessary&nbsp;-&nbsp;you&nbsp;could&nbsp;just&nbsp;pass&lt;br&gt;<br>
the&nbsp;module&nbsp;name&nbsp;in&nbsp;1:1&lt;br&gt;<br>
2.&nbsp;I&nbsp;think&nbsp;you&nbsp;took&nbsp;the&nbsp;comment&nbsp;in&nbsp;the&nbsp;unregister/2&nbsp;function&nbsp;a&nbsp;little&lt;br&gt;<br>
too&nbsp;literally,&nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;it&nbsp;need&nbsp;any&nbsp;driver&nbsp;specific&lt;br&gt;<br>
differentiation.&nbsp;If&nbsp;it&nbsp;did,&nbsp;then&nbsp;the&nbsp;correct&nbsp;thing&nbsp;to&nbsp;do&nbsp;is&nbsp;to&lt;br&gt;<br>
encapsulate&nbsp;this&nbsp;in&nbsp;a&nbsp;callback&nbsp;and&nbsp;let&nbsp;the&nbsp;driver&nbsp;handle&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;this&nbsp;will&nbsp;all&nbsp;be&nbsp;dependent&nbsp;on&nbsp;another&nbsp;bug&nbsp;that&nbsp;I&amp;#39;ve&nbsp;started&nbsp;to&lt;br&gt;<br>
do&nbsp;the&nbsp;necessary&nbsp;splitting&nbsp;in&nbsp;the&nbsp;server&nbsp;code&nbsp;base.&lt;br&gt;<br>
&lt;br&gt;<br>
Just&nbsp;wanted&nbsp;to&nbsp;give&nbsp;you&nbsp;a&nbsp;heads&nbsp;up&nbsp;to&nbsp;let&nbsp;you&nbsp;that&nbsp;we&amp;#39;re&nbsp;not&lt;br&gt;<br>
completely&nbsp;slacking&nbsp;off&nbsp;here.&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;for&nbsp;time&nbsp;lines,&nbsp;ATM&nbsp;this&nbsp;is&nbsp;about&nbsp;priority&nbsp;2&nbsp;behind&nbsp;some&nbsp;major&lt;br&gt;<br>
server&nbsp;refactoring,&nbsp;so&nbsp;I&amp;#39;ll&nbsp;let&nbsp;you&nbsp;know&nbsp;as&nbsp;soon&nbsp;as&nbsp;I&nbsp;can.&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Ben&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
