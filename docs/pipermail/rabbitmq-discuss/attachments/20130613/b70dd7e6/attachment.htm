<tt>
Posting&nbsp;this&nbsp;to&nbsp;the&nbsp;list&nbsp;after&nbsp;some&nbsp;discussion&nbsp;on&nbsp;IRC&nbsp;with&nbsp;bob2351&nbsp;on&nbsp;irc.freenode.net.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;have&nbsp;a&nbsp;*slightly*&nbsp;strange&nbsp;situation&nbsp;with&nbsp;using&nbsp;RabbitMQ,&nbsp;we&nbsp;start&nbsp;it&nbsp;under&nbsp;`runit`,&nbsp;and&nbsp;it&nbsp;effectively&nbsp;believes&nbsp;that&nbsp;it's&nbsp;running&nbsp;in&nbsp;the&nbsp;foreground.&nbsp;I&nbsp;have&nbsp;anecdotal&nbsp;evidence&nbsp;that&nbsp;this&nbsp;causes&nbsp;other&nbsp;problems,&nbsp;but&nbsp;at&nbsp;least&nbsp;not&nbsp;anything&nbsp;that&nbsp;hurts&nbsp;too&nbsp;often&nbsp;(i.e&nbsp;you&nbsp;lose&nbsp;&quot;persistent&nbsp;messages&quot;&nbsp;in&nbsp;this&nbsp;setup)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&nbsp;all&nbsp;aside,&nbsp;attached&nbsp;(&nbsp;&lt;a&nbsp;href=&quot;https://gist.github.com/leehambley/5773039&quot;&gt;https://gist.github.com/leehambley/5773039&lt;/a&gt;&nbsp;)&nbsp;is&nbsp;a&nbsp;stacktrace&nbsp;from&nbsp;a&nbsp;problematic&nbsp;box,&nbsp;we&nbsp;couldn't&nbsp;get&nbsp;it&nbsp;to&nbsp;recover&nbsp;(single&nbsp;node,&nbsp;single&nbsp;replica,&nbsp;etc,&nbsp;etc)&nbsp;-&nbsp;we&nbsp;simply&nbsp;deleted&nbsp;the&nbsp;mnesia&nbsp;database,&nbsp;which&nbsp;worked&nbsp;well&nbsp;enough.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Some&nbsp;information&nbsp;about&nbsp;our&nbsp;environment:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;$&nbsp;erl&nbsp;--version&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Erlang&nbsp;R14B04&nbsp;(erts-5.8.5)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:8:8]&nbsp;[rq:8]&nbsp;[async-threads:0]&nbsp;[kernel-poll:false]&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;$&nbsp;dpkg&nbsp;--list&nbsp;|&nbsp;grep&nbsp;rabbit&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;ii&nbsp;&amp;nbsp;rabbitmq-server&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;3.0.4-1&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;AMQP&nbsp;server&nbsp;written&nbsp;in&nbsp;Erlang&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;$&nbsp;sudo&nbsp;RABBITMQ_NODENAME=ourproject&nbsp;rabbitmqctl&nbsp;status&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Status&nbsp;of&nbsp;node&nbsp;ourproject@carla&nbsp;...&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;[{pid,8055},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{running_applications,&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;[{rabbitmq_management,&quot;RabbitMQ&nbsp;Management&nbsp;Console&quot;,&quot;3.0.4&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{rabbitmq_management_agent,&quot;RabbitMQ&nbsp;Management&nbsp;Agent&quot;,&quot;3.0.4&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{rabbit,&quot;RabbitMQ&quot;,&quot;3.0.4&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{os_mon,&quot;CPO&nbsp;&amp;nbsp;CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.7&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{rabbitmq_web_dispatch,&quot;RabbitMQ&nbsp;Web&nbsp;Dispatcher&quot;,&quot;3.0.4&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{webmachine,&quot;webmachine&quot;,&quot;1.9.1-rmq3.0.4-git52e62bc&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{mochiweb,&quot;MochiMedia&nbsp;Web&nbsp;Server&quot;,&quot;2.3.1-rmq3.0.4-gitd541e9a&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{xmerl,&quot;XML&nbsp;parser&quot;,&quot;1.2.10&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{inets,&quot;INETS&nbsp;&amp;nbsp;CXC&nbsp;138&nbsp;49&quot;,&quot;5.7.1&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{mnesia,&quot;MNESIA&nbsp;&amp;nbsp;CXC&nbsp;138&nbsp;12&quot;,&quot;4.5&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{amqp_client,&quot;RabbitMQ&nbsp;AMQP&nbsp;Client&quot;,&quot;3.0.4&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{sasl,&quot;SASL&nbsp;&amp;nbsp;CXC&nbsp;138&nbsp;11&quot;,&quot;2.1.10&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{stdlib,&quot;ERTS&nbsp;&amp;nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;1.17.5&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{kernel,&quot;ERTS&nbsp;&amp;nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;2.14.5&quot;}]},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{os,{unix,linux}},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{erlang_version,&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&quot;Erlang&nbsp;R14B04&nbsp;(erts-5.8.5)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:8:8]&nbsp;[rq:8]&nbsp;[async-threads:30]&nbsp;[kernel-poll:true]\n&quot;},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{memory,&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;[{total,33984216},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{connection_procs,756760},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{queue_procs,325576},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{plugins,218728},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{other_proc,9518440},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{mnesia,93728},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{mgmt_db,148472},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{msg_index,71528},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{other_ets,1145600},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{binary,604208},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{code,17266925},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{atom,1550457},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{other_system,2283794}]},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{vm_memory_high_watermark,0.4},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{vm_memory_limit,6656894566},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{disk_free_limit,1000000000},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{disk_free,11247643770880},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{file_descriptors,&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;[{total_limit,924},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{total_used,23},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{sockets_limit,829},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{sockets_used,12}]},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{processes,[{limit,1048576},{used,345}]},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{run_queue,0},&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&amp;nbsp;{uptime,2692}]&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;...done.&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;believe&nbsp;this&nbsp;bug&nbsp;is&nbsp;already&nbsp;being&nbsp;tracked&nbsp;internally,&nbsp;and&nbsp;I&nbsp;post&nbsp;the&nbsp;report&nbsp;here&nbsp;in&nbsp;the&nbsp;hope&nbsp;that&nbsp;I'll&nbsp;have&nbsp;a&nbsp;place&nbsp;to&nbsp;attach&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;an&nbsp;mnesia&nbsp;database&nbsp;the&nbsp;next&nbsp;time&nbsp;this&nbsp;happens&nbsp;to&nbsp;us,&nbsp;or&nbsp;that&nbsp;someone&nbsp;else&nbsp;might&nbsp;find&nbsp;this&nbsp;report&nbsp;and&nbsp;be&nbsp;able&nbsp;to&nbsp;contribute.&nbsp;Finally,&nbsp;selfishly,&nbsp;in&nbsp;the&nbsp;hope&nbsp;that&nbsp;I'll&nbsp;get&nbsp;notified&nbsp;when&nbsp;this&nbsp;gets&nbsp;fixed,&nbsp;and&nbsp;I&nbsp;upgrade,&nbsp;and&nbsp;sleep&nbsp;at&nbsp;night&nbsp;again.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;Lee&nbsp;Hambley&lt;/div&gt;
</tt>
