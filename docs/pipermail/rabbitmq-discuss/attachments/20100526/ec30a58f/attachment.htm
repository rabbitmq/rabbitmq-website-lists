<tt>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;TITLE&gt;Librabbitmq&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Hey&nbsp;Tony&nbsp;&amp;amp;&nbsp;gang,&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;am&nbsp;having&nbsp;some&nbsp;trouble&nbsp;with&nbsp;the&nbsp;librabbitmq&nbsp;library,&nbsp;and&nbsp;I&nbsp;am&nbsp;hoping&nbsp;you&nbsp;can&nbsp;help&nbsp;me&nbsp;out.&nbsp;We&nbsp;have&nbsp;managed&nbsp;to&nbsp;created&nbsp;a&nbsp;situation&nbsp;whereby&nbsp;a&nbsp;connection&nbsp;gets&nbsp;closed&nbsp;down,&nbsp;but&nbsp;the&nbsp;PHP&nbsp;client&nbsp;does&nbsp;not&nbsp;know&nbsp;about&nbsp;it&nbsp;yet.&nbsp;As&nbsp;a&nbsp;result,&nbsp;when&nbsp;it&nbsp;tries&nbsp;to&nbsp;clean&nbsp;itself&nbsp;up&nbsp;with&nbsp;amqp_channel_close(),&nbsp;a&nbsp;SIGPIPE&nbsp;is&nbsp;thrown&nbsp;and&nbsp;PHP&nbsp;gets&nbsp;all&nbsp;kinds&nbsp;of&nbsp;pissed&nbsp;off.&nbsp;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;you&nbsp;could&nbsp;help&nbsp;me&nbsp;either:&lt;BR&gt;<br>
1.&nbsp;catch&nbsp;SIGPIPE&nbsp;in&nbsp;the&nbsp;PHP&nbsp;C&nbsp;client&nbsp;somehow.&nbsp;(I&nbsp;am&nbsp;a&nbsp;n00b.)&lt;BR&gt;<br>
2.&nbsp;pass&nbsp;some&nbsp;sort&nbsp;of&nbsp;flag&nbsp;to&nbsp;the&nbsp;connection&nbsp;to&nbsp;ignore&nbsp;SIGPIPE&nbsp;and&nbsp;return&nbsp;false&nbsp;instead.&nbsp;In&nbsp;case&nbsp;you&nbsp;are&nbsp;as&nbsp;clueless&nbsp;as&nbsp;I&nbsp;am&nbsp;(I&nbsp;am&nbsp;sure&nbsp;you&nbsp;are&nbsp;not,&nbsp;but&nbsp;just&nbsp;in&nbsp;case)&nbsp;I&nbsp;found&nbsp;this:&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;FONT&nbsp;SIZE=&quot;2&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Consolas,&nbsp;Courier&nbsp;New,&nbsp;Courier&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:10pt'&gt;setsockopt&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Consolas,&nbsp;Courier&nbsp;New,&nbsp;Courier&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;(sd,&nbsp;SOL_SOCKET,&nbsp;SO_NOSIGPIPE,&nbsp;(void&nbsp;*)&amp;amp;set,&nbsp;sizeof(int));&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Thanks!&lt;BR&gt;<br>
Pieter&lt;/FONT&gt;&lt;/SPAN&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
