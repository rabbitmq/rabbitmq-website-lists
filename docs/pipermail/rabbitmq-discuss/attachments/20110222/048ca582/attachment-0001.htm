<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;wanted&nbsp;to&nbsp;show&nbsp;my&nbsp;design&nbsp;for&nbsp;a&nbsp;priority&nbsp;based&nbsp;task&nbsp;queue&nbsp;and&nbsp;get&nbsp;some&nbsp;insight&nbsp;from&nbsp;experts.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;client&nbsp;create&nbsp;a&nbsp;queue&nbsp;named:&nbsp;&amp;quot;some_tasks_to_work_on2&amp;quot;&nbsp;and&nbsp;put&nbsp;his&nbsp;tasks&nbsp;there,&lt;/div&gt;<br>
&lt;div&gt;then&nbsp;it&nbsp;puts&nbsp;the&nbsp;following&nbsp;message&nbsp;in&nbsp;a&nbsp;queue&nbsp;named&nbsp;&amp;quot;batch_states&amp;quot;:&lt;/div&gt;&lt;div&gt;[{batch=&amp;quot;some_tasks_to_work_on2&amp;quot;,&nbsp;priority=3}]&lt;/div&gt;&lt;div&gt;now&nbsp;each&nbsp;worker&nbsp;can&nbsp;take&nbsp;the&nbsp;status&nbsp;message&nbsp;and&nbsp;get&nbsp;tasks&nbsp;from&nbsp;the&nbsp;batch.&lt;/div&gt;<br>
&lt;div&gt;if&nbsp;a&nbsp;few막atches마re&nbsp;in&nbsp;the&nbsp;status&nbsp;message&nbsp;then&nbsp;the&nbsp;worker&nbsp;check&nbsp;the&nbsp;queue&nbsp;by&nbsp;the&nbsp;priority&nbsp;order.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;a&nbsp;worker&nbsp;should&nbsp;also&nbsp;return&nbsp;the&nbsp;status&nbsp;message&nbsp;after&nbsp;reading&nbsp;it&nbsp;so&nbsp;other&nbsp;workers&nbsp;can&nbsp;also&nbsp;read&nbsp;it.&lt;/div&gt;<br>
&lt;div&gt;now&nbsp;this&nbsp;is&nbsp;needed&nbsp;because&nbsp;i&nbsp;want&nbsp;workers&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;wake&nbsp;up마ny&nbsp;time마nd&nbsp;get&nbsp;the&nbsp;latest&nbsp;status.&lt;/div&gt;&lt;div&gt;In&nbsp;this&nbsp;approch&nbsp;I&nbsp;can&nbsp;add&nbsp;new&nbsp;batches&nbsp;on&nbsp;the&nbsp;fly&nbsp;and&nbsp;also&nbsp;change&nbsp;priorities.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Do&nbsp;you&nbsp;think&nbsp;there&nbsp;is&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;do&nbsp;it?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
