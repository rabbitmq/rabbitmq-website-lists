-module(rabbit_test).

-export([main/0]).

main() ->
    MyList = [1,2,3],
    my_pmap:pmap(fun(F) -> send_a_message(F) end, MyList).

    %Now I am getting same error as pmap for file, I will take look at it later.	
    %{ok, S} = file:open("rabbit_testing", read),
    %loop(S),
    %file:close(S).
    
send_a_message(Amessage)->
        amqp_async_pub:message_publish(Amessage).

loop(S) ->
    case io:get_line(S, '') of
        eof -> ok;
        
        L ->    
            send_a_message(L),
	    %io:format("file content: ~p~n", [L]),  
            loop(S)
     end.