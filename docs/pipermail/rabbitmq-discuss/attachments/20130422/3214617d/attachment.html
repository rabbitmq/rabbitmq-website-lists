<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;Jacques,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Have&nbsp;you&nbsp;posted&nbsp;details&nbsp;about&nbsp;this&nbsp;to&nbsp;the&nbsp;mailing&nbsp;list&nbsp;previously?&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;didn't&nbsp;see&nbsp;anything&nbsp;specific&nbsp;from&nbsp;you&nbsp;in&nbsp;the&nbsp;last&nbsp;week&nbsp;or&nbsp;so.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Would&nbsp;you&nbsp;be&nbsp;able&nbsp;to&nbsp;provide&nbsp;logs&nbsp;and/or&nbsp;further&nbsp;information&nbsp;about<br>
&nbsp;&nbsp;&nbsp;&nbsp;your&nbsp;setup?&nbsp;Obviously&nbsp;we're&nbsp;keen&nbsp;to&nbsp;track&nbsp;down&nbsp;any&nbsp;bugs&nbsp;that&nbsp;cause<br>
&nbsp;&nbsp;&nbsp;&nbsp;operational&nbsp;issues&nbsp;and&nbsp;resolve&nbsp;them&nbsp;asap.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Cheers,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Tim&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;04/19/2013&nbsp;04:06&nbsp;PM,&nbsp;Jacques&nbsp;Doubell&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:398f5f6d-22c0-49ec-989b-6cfae1416cda@googlegroups.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;We&nbsp;have&nbsp;also&nbsp;recently&nbsp;upgraded&nbsp;to&nbsp;3.0.4&nbsp;and&nbsp;have&nbsp;since<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;had&nbsp;2&nbsp;outages.&nbsp;In&nbsp;the&nbsp;one&nbsp;case&nbsp;the&nbsp;service&nbsp;was&nbsp;running&nbsp;but<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;non&nbsp;functional.&nbsp;The&nbsp;logs&nbsp;didn't&nbsp;have&nbsp;errors,&nbsp;but&nbsp;at&nbsp;a&nbsp;certain<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;point&nbsp;just&nbsp;stopped&nbsp;receiving&nbsp;new&nbsp;connections.&nbsp;We&nbsp;had&nbsp;to&nbsp;restart<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;service&nbsp;and&nbsp;all&nbsp;was&nbsp;well&nbsp;until&nbsp;about&nbsp;a&nbsp;week&nbsp;later&nbsp;when&nbsp;there<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;were&nbsp;a&nbsp;lot&nbsp;of&nbsp;heaped&nbsp;up&nbsp;messages&nbsp;server&nbsp;side&nbsp;but&nbsp;clients&nbsp;could&nbsp;not<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connect&nbsp;to&nbsp;the&nbsp;queue&nbsp;anymore.&nbsp;(server&nbsp;actively&nbsp;refused&nbsp;connection<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;from&nbsp;the&nbsp;client&nbsp;side).&nbsp;We&nbsp;will&nbsp;be&nbsp;downgrading&nbsp;to&nbsp;2.8.x&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;mean&nbsp;time.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Friday,&nbsp;April&nbsp;12,&nbsp;2013&nbsp;8:36:22&nbsp;PM&nbsp;UTC+2,&nbsp;Matt&nbsp;Wise&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;We've&nbsp;been<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;running&nbsp;RabbitMQ&nbsp;2.8.x&nbsp;in&nbsp;production&nbsp;in&nbsp;Amazon&nbsp;for&nbsp;about&nbsp;16<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;months&nbsp;now&nbsp;without&nbsp;very&nbsp;many&nbsp;issues.&nbsp;Last&nbsp;week&nbsp;we&nbsp;ran&nbsp;into&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;issue&nbsp;where&nbsp;our&nbsp;2.8.5&nbsp;cluster&nbsp;nodes&nbsp;hit&nbsp;their&nbsp;high-memory-limit<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;stopped&nbsp;processing&nbsp;jobs,&nbsp;effectively&nbsp;taking&nbsp;down&nbsp;our&nbsp;entire<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Celery&nbsp;task&nbsp;queue.&nbsp;We&nbsp;decided&nbsp;to&nbsp;upgrade&nbsp;the&nbsp;software&nbsp;to&nbsp;3.0.4<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(which&nbsp;had&nbsp;been&nbsp;running&nbsp;in&nbsp;staging&nbsp;for&nbsp;a&nbsp;few&nbsp;weeks,&nbsp;as&nbsp;a&nbsp;single<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance,&nbsp;without&nbsp;issue)&nbsp;and&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;beef&nbsp;up&nbsp;the&nbsp;size<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;redundancy&nbsp;of&nbsp;our&nbsp;farm&nbsp;to&nbsp;3&nbsp;machines&nbsp;that&nbsp;were&nbsp;m1.larges.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Old&nbsp;Farm:&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&nbsp;server1:&nbsp;m1.small,&nbsp;2.8.5,&nbsp;us-west-1c&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&nbsp;server2:&nbsp;m1.small,&nbsp;2.8.5,&nbsp;us-west-1c&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;New&nbsp;Farm:&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&nbsp;server1:&nbsp;m1.large,&nbsp;3.0.4,&nbsp;us-west-1a&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&nbsp;server2:&nbsp;m1.large,&nbsp;3.0.4,&nbsp;us-west-1c&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&nbsp;server3:&nbsp;m1.large,&nbsp;3.0.4,&nbsp;us-west-1c&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Since&nbsp;creating&nbsp;the&nbsp;new&nbsp;server&nbsp;farm&nbsp;though&nbsp;we've&nbsp;had&nbsp;3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outages.&nbsp;In&nbsp;the&nbsp;first&nbsp;two&nbsp;outages&nbsp;we&nbsp;received&nbsp;a&nbsp;Network<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Partition&nbsp;Split,&nbsp;and&nbsp;effectively&nbsp;all&nbsp;3&nbsp;of&nbsp;the&nbsp;systems&nbsp;decided<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;run&nbsp;their&nbsp;own&nbsp;queues&nbsp;independently&nbsp;of&nbsp;the&nbsp;other&nbsp;servers.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;was&nbsp;the&nbsp;first&nbsp;time&nbsp;we'd&nbsp;ever&nbsp;seen&nbsp;this&nbsp;failure,&nbsp;ever.&nbsp;In<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;most&nbsp;recent&nbsp;failure&nbsp;we&nbsp;had&nbsp;2&nbsp;machines&nbsp;split&nbsp;off,&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3rd&nbsp;rabbitmq&nbsp;service&nbsp;effectively&nbsp;became&nbsp;unresponsive&nbsp;entirely.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;For&nbsp;sanity&nbsp;sake,&nbsp;at&nbsp;this&nbsp;point&nbsp;we've&nbsp;backed&nbsp;down&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;following&nbsp;configuration:&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;New-New&nbsp;Farm:&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&nbsp;server1:&nbsp;m1.large,&nbsp;2.8.5,&nbsp;us-west-1c&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&nbsp;server2:&nbsp;m1.large,&nbsp;2.8.5,&nbsp;us-west-1a&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Up&nbsp;until&nbsp;recently&nbsp;though&nbsp;I&nbsp;had&nbsp;felt&nbsp;extremely&nbsp;comfortable<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;RabbitMQ's&nbsp;clustering&nbsp;technology&nbsp;and&nbsp;reliability...&nbsp;now<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;not&nbsp;so&nbsp;much.&nbsp;Has&nbsp;anyone&nbsp;else&nbsp;seen&nbsp;similar&nbsp;behaviors?&nbsp;Is&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simply&nbsp;due&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;we're&nbsp;running&nbsp;cross-zone&nbsp;now&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amazon,&nbsp;or&nbsp;is&nbsp;it&nbsp;more&nbsp;likely&nbsp;the&nbsp;3&nbsp;servers&nbsp;that&nbsp;caused&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;problem?&nbsp;Or&nbsp;the&nbsp;3.0.x&nbsp;upgrade?&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;--Matt&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&nbsp;class=&quot;mimeAttachmentHeader&quot;&gt;&lt;/fieldset&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
