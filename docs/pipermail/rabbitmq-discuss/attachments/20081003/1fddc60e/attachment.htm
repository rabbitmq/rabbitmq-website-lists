<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;&quot;&gt;hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;i&nbsp;have&nbsp;somehow&nbsp;clumsy&nbsp;fingers.&nbsp;i&nbsp;try&nbsp;to&nbsp;get&nbsp;a&nbsp;test&nbsp;script&nbsp;working&nbsp;that&nbsp;uses&nbsp;the&nbsp;erlang&nbsp;rpc&nbsp;client&nbsp;and&nbsp;lib_amqp&nbsp;but&nbsp;i&nbsp;fail&nbsp;miserably.&nbsp;is&nbsp;there&nbsp;somewhere&nbsp;a&nbsp;short&nbsp;snippet&nbsp;that&nbsp;actually&nbsp;uses&nbsp;those&nbsp;two&nbsp;libs&nbsp;to&nbsp;post&nbsp;messages&nbsp;to&nbsp;rabbit?&nbsp;my&nbsp;(very&nbsp;short)&nbsp;test&nbsp;thingy&nbsp;looks&nbsp;currently&nbsp;like&nbsp;that&nbsp;(many&nbsp;iterations&nbsp;old&nbsp;though)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---------------------8&amp;lt;------------------&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;-module(test).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-include_lib(&amp;quot;rabbitmq_server/include/rabbit_framing.hrl&amp;quot;).&lt;/div&gt;&lt;div&gt;-include_lib(&amp;quot;rabbitmq_server/include/rabbit.hrl&amp;quot;).&lt;/div&gt;<br>
&lt;div&gt;-include(&amp;quot;include/amqp_client.hrl&amp;quot;).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-export([channel/0,&nbsp;broker/0,&nbsp;start/0]).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;channel()&nbsp;-&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;C=lib_amqp:start_connection(&amp;quot;localhost&amp;quot;),&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Channel=lib_amqp:start_channel(C),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{ok,&nbsp;Channel}.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;broker&nbsp;()-&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{ok,&nbsp;Channel}&nbsp;=&nbsp;channel(),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Broker&nbsp;=&nbsp;#broker_config{channel_pid&nbsp;=&nbsp;Channel},&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{ok,&nbsp;Broker}.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;start()&nbsp;-&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{ok,&nbsp;Broker}&nbsp;=&nbsp;broker(),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;amqp_rpc_client:start(Broker,&nbsp;&amp;lt;&amp;lt;&amp;quot;Hessian&amp;quot;&amp;gt;&amp;gt;).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;---------------------&amp;gt;8------------------&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;thanks&nbsp;for&nbsp;all&nbsp;hints&nbsp;in&nbsp;the&nbsp;right&nbsp;direction&nbsp;:-)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cheers&lt;/div&gt;&lt;div&gt;lenz&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;<br>

</tt>
