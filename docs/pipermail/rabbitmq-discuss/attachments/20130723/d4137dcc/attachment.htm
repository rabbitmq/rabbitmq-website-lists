<tt>
hi&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;Probably&nbsp;installation&nbsp;created&nbsp;files&nbsp;with&nbsp;rabbitmq&nbsp;user&nbsp;ownes.&nbsp;It&nbsp;is&nbsp;not&nbsp;good&nbsp;practice&nbsp;to&nbsp;run&nbsp;rabbitmq&nbsp;server&nbsp;with&nbsp;root&amp;nbsp;privileges.&nbsp;RabbitMQ&nbsp;need&nbsp;rights&nbsp;to&nbsp;read/write&nbsp;to&nbsp;mnesia&nbsp;and&nbsp;log&nbsp;dirs&nbsp;only.&nbsp;You&nbsp;can&nbsp;run&nbsp;RMQ&nbsp;with&nbsp;non&nbsp;root&nbsp;user.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)&nbsp;Default&nbsp;place&nbsp;for&nbsp;.erlang.cookie&nbsp;file&nbsp;is&nbsp;user&nbsp;home&nbsp;directory.&nbsp;Probably&nbsp;at&nbsp;the&nbsp;installation&nbsp;RMQ&nbsp;places&nbsp;cookie&nbsp;in&nbsp;its&nbsp;installation&nbsp;dir&nbsp;(/var/lib/rabbitmq).&nbsp;Read&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.erlang.org/doc/reference_manual/distributed.html&quot;&gt;http://www.erlang.org/doc/reference_manual/distributed.html&lt;/a&gt;&amp;nbsp;and&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html&quot;&gt;http://www.rabbitmq.com/clustering.html&lt;/a&gt;&amp;nbsp;for&nbsp;more&nbsp;info&nbsp;about&nbsp;erlang&nbsp;cookie.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3)&nbsp;Your&nbsp;understanding&nbsp;is&nbsp;correct.&nbsp;RMQ&nbsp;uses&nbsp;only&nbsp;one&nbsp;cookie&nbsp;file.&nbsp;To&nbsp;be&nbsp;consistent&nbsp;you&nbsp;can&nbsp;delete&nbsp;one&nbsp;of&nbsp;them.&nbsp;Start&nbsp;with&nbsp;that&nbsp;placed&nbsp;in&nbsp;user&nbsp;home&nbsp;dir.&nbsp;Probably&nbsp;RMQ&nbsp;creates&nbsp;cookie&nbsp;in&nbsp;home&nbsp;dir&nbsp;when&nbsp;started&nbsp;not&nbsp;with&nbsp;rabbitmq&nbsp;user&nbsp;or&nbsp;not&nbsp;with&nbsp;init&nbsp;script&nbsp;(service&nbsp;rabbitmq&nbsp;strarted).&nbsp;I&nbsp;use&nbsp;precompiled&nbsp;RMQ&amp;nbsp;package&nbsp;that&nbsp;place&nbsp;in&nbsp;/opt&nbsp;dir.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;4)&nbsp;You&nbsp;doesn't&nbsp;I&nbsp;think.&nbsp;Different&nbsp;cookies&nbsp;can&nbsp;be&nbsp;the&nbsp;reason&nbsp;of&nbsp;such&nbsp;problems.&nbsp;To&nbsp;help&nbsp;you,&nbsp;it&amp;nbsp;necessary&nbsp;to&nbsp;know&lt;/div&gt;&lt;div&gt;-&nbsp;how&nbsp;you&nbsp;start&nbsp;rabbitmq&nbsp;node&nbsp;(1&nbsp;and&nbsp;2)&lt;/div&gt;&lt;div&gt;-&nbsp;try&nbsp;to&nbsp;start&nbsp;nodes&nbsp;not&nbsp;in&nbsp;cluster&nbsp;on&nbsp;different&nbsp;servers&nbsp;with&nbsp;the&nbsp;same&nbsp;cookie&nbsp;and&nbsp;with&nbsp;the&nbsp;full&nbsp;name&nbsp;resolving&nbsp;(-name&nbsp;flag&nbsp;instead&nbsp;of&nbsp;-sname).&nbsp;Then&nbsp;try&nbsp;to&nbsp;get&nbsp;status&nbsp;of&nbsp;each&nbsp;node&nbsp;from&nbsp;it&nbsp;server&nbsp;and&nbsp;from&nbsp;another.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[server1]#&nbsp;rabbitmq&nbsp;-n&nbsp;rabbtimq@server1&nbsp;status&lt;br&gt;[server1]#&nbsp;rabbitmq&nbsp;-n&nbsp;rabbtimq@server2&nbsp;status&lt;/div&gt;&lt;div&gt;[server2]#&nbsp;rabbitmq&nbsp;-n&nbsp;rabbtimq@server1&nbsp;status&lt;/div&gt;&lt;div&gt;[server2]#&nbsp;rabbitmq&nbsp;-n&nbsp;rabbtimq@server2&nbsp;status&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;is&nbsp;minimum&nbsp;of&nbsp;actions&nbsp;to&nbsp;start&nbsp;resolve&nbsp;your&nbsp;problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;On&nbsp;Tuesday,&nbsp;July&nbsp;2,&nbsp;2013&nbsp;1:42:37&nbsp;PM&nbsp;UTC+3,&nbsp;Priyanki&nbsp;Vashi&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;Hi&nbsp;there&nbsp;,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;had&nbsp;a&nbsp;question&nbsp;about&nbsp;erlang&nbsp;cookie,&nbsp;which&nbsp;gets&nbsp;generated&nbsp;when&nbsp;we&nbsp;start&nbsp;rabbitmq&nbsp;server.&nbsp;The&nbsp;situation&nbsp;is&nbsp;as&nbsp;follows.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;Even&nbsp;if&nbsp;I&nbsp;did&nbsp;not&nbsp;created&nbsp;any&nbsp;user&nbsp;named&nbsp;'rabbitmq',&nbsp;there&nbsp;are&nbsp;files,&nbsp;which&nbsp;are&nbsp;owned&nbsp;by&nbsp;this&nbsp;user.&nbsp;Does&nbsp;the&nbsp;installation&nbsp;or&nbsp;startup&nbsp;of&nbsp;rabbitmq-server&nbsp;does&nbsp;this&nbsp;?&nbsp;Also&nbsp;is&nbsp;it&nbsp;OK&nbsp;to&nbsp;use&nbsp;root&nbsp;user&nbsp;to&nbsp;do&nbsp;server&nbsp;administration&nbsp;operation&nbsp;or&nbsp;will&nbsp;it&nbsp;be&nbsp;considered&nbsp;not&nbsp;so&nbsp;good&nbsp;practice&nbsp;?&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)&nbsp;I&nbsp;use&nbsp;root&nbsp;user&nbsp;to&nbsp;start&nbsp;and&nbsp;stop&nbsp;rabbitmq&nbsp;server&nbsp;and&nbsp;when&nbsp;I&nbsp;start&nbsp;the&nbsp;server,&nbsp;I&nbsp;see&nbsp;that&nbsp;a&nbsp;file&nbsp;.erlang.cookie&nbsp;gets&nbsp;generated&nbsp;in&nbsp;root&nbsp;home&nbsp;dir.&nbsp;That&nbsp;is&nbsp;correct&nbsp;as&nbsp;per&nbsp;my&nbsp;understanding&nbsp;but&nbsp;I&nbsp;also&nbsp;see&nbsp;that&nbsp;there&nbsp;is&nbsp;another&nbsp;file&nbsp;with&nbsp;the&nbsp;same&nbsp;.erlang.cookie&nbsp;gets&nbsp;generated&nbsp;in&nbsp;/var/lib/rabbitmq&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3)&nbsp;Also&nbsp;these&nbsp;two&nbsp;erlang&nbsp;cookies&nbsp;are&nbsp;different&nbsp;from&nbsp;each&nbsp;other.&nbsp;Why&nbsp;there&nbsp;are&nbsp;two&nbsp;erlang&nbsp;cookie&nbsp;files&nbsp;gets&nbsp;generated&nbsp;?&nbsp;What&nbsp;is&nbsp;the&nbsp;importance&nbsp;?&lt;/div&gt;&lt;div&gt;My&nbsp;theoretical&nbsp;understanding&nbsp;is&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;erlang&nbsp;cookie&nbsp;should&nbsp;get&nbsp;generated&nbsp;and&nbsp;that&nbsp;one&nbsp;should&nbsp;be&nbsp;in&nbsp;home&nbsp;dir&nbsp;of&nbsp;user,&nbsp;which&nbsp;starts&nbsp;the&nbsp;rabbitmq-server.&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;correct&nbsp;understanding&nbsp;or&nbsp;?&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;4)&nbsp;Also&nbsp;do&nbsp;I&nbsp;need&nbsp;to&nbsp;configure&nbsp;different&nbsp;values&nbsp;of&nbsp;epmd&nbsp;ports&nbsp;when&nbsp;I&nbsp;want&nbsp;to&nbsp;run&nbsp;cluster&nbsp;with&nbsp;two&nbsp;physical&nbsp;nodes&nbsp;or&nbsp;it's&nbsp;OK&nbsp;to&nbsp;keep&nbsp;it&nbsp;as&nbsp;default&nbsp;?&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;I&nbsp;thought&nbsp;NO&nbsp;need&nbsp;to&nbsp;change&nbsp;but&nbsp;then&nbsp;since&nbsp;I&nbsp;am&nbsp;running&nbsp;into&nbsp;these&nbsp;problems&nbsp;thought&nbsp;of&nbsp;asking.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;like&nbsp;to&nbsp;understand&nbsp;this&nbsp;bcoz,&nbsp;I&nbsp;tried&nbsp;to&nbsp;setup&nbsp;a&nbsp;cluster&nbsp;on&nbsp;two&nbsp;different&nbsp;physical&nbsp;machines&nbsp;and&nbsp;as&nbsp;per&nbsp;the&nbsp;guidelines&nbsp;gives&nbsp;in&nbsp;'rabbitmq&nbsp;in&nbsp;action',&nbsp;before&nbsp;joining&nbsp;nodes&nbsp;running&nbsp;on&nbsp;different&nbsp;physical&nbsp;machines&nbsp;in&nbsp;the&nbsp;cluster,&nbsp;the&nbsp;erlang&nbsp;cookie&nbsp;should&nbsp;be&nbsp;sync&nbsp;meaning&nbsp;that&nbsp;both&nbsp;the&nbsp;nodes&nbsp;should&nbsp;have&nbsp;same&nbsp;erlang&nbsp;cookie&nbsp;so&nbsp;I&nbsp;tried&nbsp;to&nbsp;copy&nbsp;cookie&nbsp;from&nbsp;first&nbsp;node&nbsp;to&nbsp;second&nbsp;and&nbsp;tried&nbsp;to&nbsp;restart&nbsp;second&nbsp;node&nbsp;but&nbsp;then&nbsp;I&nbsp;had&nbsp;problems&nbsp;with&nbsp;restarting&nbsp;the&nbsp;node&nbsp;or&nbsp;even&nbsp;stopping&nbsp;the&nbsp;node&nbsp;and&nbsp;I&nbsp;get&nbsp;error.&nbsp;I&nbsp;also&nbsp;checked&nbsp;the&nbsp;latest&nbsp;log&nbsp;file&nbsp;and&nbsp;it&nbsp;says&amp;nbsp;&lt;/div&gt;&lt;div&gt;&quot;=ERROR&nbsp;REPORT====&nbsp;2-Jul-2013::19:48:28&nbsp;===&lt;/div&gt;&lt;div&gt;**&nbsp;Connection&nbsp;attempt&nbsp;from&nbsp;disallowed&nbsp;node&nbsp;rabbitmqctl40424@nazgul&nbsp;**&quot;&nbsp;,&nbsp;which&nbsp;I&nbsp;believe&nbsp;is&nbsp;due&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;erlang&nbsp;cookie,&nbsp;which&nbsp;it&nbsp;had&nbsp;originally&nbsp;when&nbsp;I&nbsp;started&nbsp;the&nbsp;node&nbsp;has&nbsp;changed&nbsp;now&nbsp;and&nbsp;hence&nbsp;it&nbsp;does&nbsp;not&nbsp;allow&nbsp;me&nbsp;to&nbsp;stop&nbsp;the&nbsp;node.&nbsp;Is&nbsp;my&nbsp;understanding&nbsp;correct&nbsp;here&nbsp;or&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Error&nbsp;mesaage&nbsp;while&nbsp;stopping&nbsp;or&nbsp;restarting&nbsp;the&nbsp;node&nbsp;after&nbsp;copying&nbsp;erlang&nbsp;cookie&nbsp;from&nbsp;first&nbsp;node&nbsp;to&nbsp;second&nbsp;one.&lt;/div&gt;&lt;div&gt;&lt;div&gt;Error:&nbsp;unable&nbsp;to&nbsp;connect&nbsp;to&nbsp;node&nbsp;rabbit_2@nazgul:&nbsp;nodedown&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;DIAGNOSTICS&lt;/div&gt;&lt;div&gt;===========&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;nodes&nbsp;in&nbsp;question:&nbsp;[rabbit_2@nazgul]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;hosts,&nbsp;their&nbsp;running&nbsp;nodes&nbsp;and&nbsp;ports:&lt;/div&gt;&lt;div&gt;-&nbsp;nazgul:&nbsp;[{rabbit_2,58454},{rabbit,&lt;wbr&gt;38771},{rabbitmqctl40424,&lt;wbr&gt;60952}]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;current&nbsp;node&nbsp;details:&lt;/div&gt;&lt;div&gt;-&nbsp;node&nbsp;name:&nbsp;rabbitmqctl40424@nazgul&lt;/div&gt;&lt;div&gt;-&nbsp;home&nbsp;dir:&nbsp;/var/lib/rabbitmq&lt;/div&gt;&lt;div&gt;-&nbsp;cookie&nbsp;hash:&nbsp;ad/NgkXjjR95x3cMejxwqg==&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;in&nbsp;advance&nbsp;and&nbsp;please&nbsp;guide&nbsp;me&nbsp;so&nbsp;that&nbsp;I&nbsp;understand&nbsp;what&nbsp;had&nbsp;gone&nbsp;wrong&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best&nbsp;Regards,&lt;br&gt;Priyanki.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
