<tt>
Hi&lt;div&gt;Probably&nbsp;you&nbsp;need&nbsp;to&nbsp;create&nbsp;new&nbsp;SockJS&nbsp;object&nbsp;(tcp&nbsp;connection)&nbsp;on&nbsp;disconnect.&nbsp;See&nbsp;line&nbsp;16.&nbsp;I&nbsp;assume&nbsp;ws&nbsp;is&nbsp;TCP&nbsp;connection&nbsp;object.&nbsp;More&nbsp;info&nbsp;for&nbsp;SockJS&nbsp;you&nbsp;can&nbsp;find&nbsp;at&amp;nbsp;&lt;a&nbsp;href=&quot;https://github.com/sockjs/sockjs-client&quot;&gt;https://github.com/sockjs/sockjs-client&lt;/a&gt;.&lt;/div&gt;&lt;div&gt;Try&nbsp;to&nbsp;move&nbsp;lines&nbsp;16-22&nbsp;to&nbsp;Connect()&nbsp;function.&lt;/div&gt;&lt;div&gt;Also,&nbsp;any&nbsp;debug&nbsp;messages&nbsp;on&nbsp;reconnect&nbsp;attempt&nbsp;are&nbsp;welcome.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;On&nbsp;Saturday,&nbsp;July&nbsp;20,&nbsp;2013&nbsp;8:31:03&nbsp;PM&nbsp;UTC+3,&nbsp;joshu...@hotmail.com&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;Using&nbsp;references&nbsp;on&amp;nbsp;&lt;a&nbsp;href=&quot;http://jmesnil.net/stomp-websocket/doc/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://jmesnil.net/stomp-&lt;wbr&gt;websocket/doc/&lt;/a&gt;&nbsp;and&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/web-stomp.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/&lt;wbr&gt;web-stomp.html&lt;/a&gt;,&nbsp;I&nbsp;managed&nbsp;to&nbsp;come&nbsp;out&nbsp;with&nbsp;my&nbsp;own&nbsp;Web-Stomp&nbsp;js&nbsp;code&nbsp;that&nbsp;can&nbsp;connect&nbsp;and&nbsp;receive&nbsp;messages.&nbsp;&amp;nbsp;However,&nbsp;I'm&nbsp;unable&nbsp;to&nbsp;reconnect&nbsp;in&nbsp;the&nbsp;event&nbsp;the&nbsp;connection&nbsp;to&nbsp;Web-Stomp&nbsp;server&nbsp;breaks.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;did&nbsp;is&nbsp;on&nbsp;on_connect_error,&nbsp;I&nbsp;did&nbsp;a&nbsp;client.disconnect,&nbsp;followed&nbsp;by&nbsp;a&nbsp;client.connect.&nbsp;&amp;nbsp;The&nbsp;disconnect&nbsp;works&nbsp;but&nbsp;the&nbsp;connect&nbsp;fails.&nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Since&nbsp;I'm&nbsp;not&nbsp;able&nbsp;to&nbsp;find&nbsp;any&nbsp;code&nbsp;example&nbsp;that&nbsp;deals&nbsp;with&nbsp;reconnecting,&nbsp;I&nbsp;took&nbsp;a&nbsp;look&nbsp;at&nbsp;sockjs&nbsp;groups&nbsp;but&nbsp;it&nbsp;appears&nbsp;to&nbsp;me&nbsp;that&nbsp;the&nbsp;code&nbsp;used&nbsp;for&nbsp;sockjs&nbsp;is&nbsp;different&nbsp;from&nbsp;that&nbsp;of&nbsp;web-stomp&nbsp;plugin&nbsp;examples.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's&nbsp;the&nbsp;full&nbsp;js&nbsp;code:&nbsp;Here&nbsp;is&nbsp;my&nbsp;full&nbsp;code:&amp;nbsp;&lt;a&nbsp;href=&quot;http://pastebin.com/dtEBnzGP&quot;&nbsp;target=&quot;_blank&quot;&gt;http://pastebin.com/&lt;wbr&gt;dtEBnzGP&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&nbsp;style=&quot;margin:0px;padding:0px&nbsp;0px&nbsp;0px&nbsp;48px;color:rgb(172,172,172);font-family:Consolas,Menlo,Monaco,'Lucida&nbsp;Console','Liberation&nbsp;Mono','DejaVu&nbsp;Sans&nbsp;Mono','Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',monospace,serif;font-size:12px;line-height:21px;background-color:rgb(248,248,248)&quot;&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,102);font-weight:bold&quot;&gt;function&lt;/span&gt;&amp;nbsp;on_connect_error&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;erro&lt;wbr&gt;r&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&amp;nbsp;&nbsp;$&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'#output'&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;.&lt;span&nbsp;style=&quot;color:rgb(102,0,102)&quot;&gt;append&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'&lt;wbr&gt;Connection&nbsp;failed!&nbsp;Error:'&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;+&lt;/span&gt;&amp;nbsp;error&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;+&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;&quot;&amp;lt;br&amp;gt;&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;$&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'#output'&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;.&lt;span&nbsp;style=&quot;color:rgb(102,0,102)&quot;&gt;append&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'&lt;wbr&gt;Disconnecting....'&lt;/span&gt;&amp;nbsp;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;+&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;&quot;&amp;lt;br&amp;gt;&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&amp;nbsp;client.&lt;span&nbsp;style=&quot;color:rgb(102,0,102)&quot;&gt;disconnect&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,102);font-weight:bold&quot;&gt;function&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;&lt;wbr&gt;{&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;$&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'#output'&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;.&lt;span&nbsp;style=&quot;color:rgb(102,0,102)&quot;&gt;append&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'&lt;wbr&gt;Disconnected!'&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;+&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;&quot;&amp;lt;br&amp;gt;&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&amp;nbsp;&nbsp;$&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'#output'&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;.&lt;span&nbsp;style=&quot;color:rgb(102,0,102)&quot;&gt;append&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;'&lt;wbr&gt;Reconnecting...'&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;+&lt;/span&gt;&amp;nbsp;&lt;span&nbsp;style=&quot;color:rgb(51,102,204)&quot;&gt;&quot;&amp;lt;br&amp;gt;&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&amp;nbsp;&nbsp;Connect&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,153,51)&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&nbsp;style=&quot;padding-right:5px;padding-left:5px;vertical-align:top;color:rgb(0,0,0);border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);background-color:rgb(255,255,255);line-height:21px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,153,0)&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
