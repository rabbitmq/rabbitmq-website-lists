<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;dir=&quot;auto&quot;&gt;&lt;div&gt;The&nbsp;x-forwarded-for&nbsp;is&nbsp;a&nbsp;application&nbsp;level&nbsp;thing&nbsp;and&nbsp;it&nbsp;only&nbsp;applies&nbsp;to&nbsp;HTTP.&nbsp;In&nbsp;the&nbsp;case&nbsp;if&nbsp;AMQP,&nbsp;I&nbsp;doubt&nbsp;Amazon's&nbsp;LB&nbsp;operates&nbsp;at&nbsp;application&nbsp;level&nbsp;and&nbsp;understands&nbsp;the&nbsp;protocol.&amp;nbsp;&lt;span&nbsp;style=&quot;-webkit-tap-highlight-color:&nbsp;rgba(26,&nbsp;26,&nbsp;26,&nbsp;0.292969);&nbsp;-webkit-composition-fill-color:&nbsp;rgba(175,&nbsp;192,&nbsp;227,&nbsp;0.230469);&nbsp;-webkit-composition-frame-color:&nbsp;rgba(77,&nbsp;128,&nbsp;180,&nbsp;0.230469);&nbsp;&quot;&gt;Instead,&nbsp;the&nbsp;LB&nbsp;operates&nbsp;at&nbsp;TCP/IP&nbsp;level&nbsp;establishing&nbsp;new&nbsp;TCP&nbsp;connection&nbsp;to&nbsp;Rabbit&nbsp;from&nbsp;its&nbsp;own&nbsp;IP&nbsp;and&nbsp;forwarding&nbsp;data&nbsp;between&nbsp;incoming&nbsp;connection&nbsp;and&nbsp;that&nbsp;Rabbit&nbsp;connection&nbsp;without&nbsp;any&nbsp;understanding&nbsp;what&nbsp;that&nbsp;data&nbsp;is.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Which&nbsp;means&nbsp;it&nbsp;cannot&nbsp;add&nbsp;any&nbsp;information&nbsp;what&nbsp;wasn't&nbsp;there&nbsp;already.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;On&nbsp;31&nbsp;May&nbsp;2013,&nbsp;at&nbsp;20:30,&nbsp;Joe&nbsp;Vandermark&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:joe.vandermark@gmail.com&quot;&gt;joe.vandermark@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;similar&nbsp;issue/requirement..&nbsp;Checking&nbsp;in&nbsp;to&nbsp;see&nbsp;if&nbsp;Mike&nbsp;figured&nbsp;this&nbsp;out&nbsp;or&nbsp;if&nbsp;anyone&nbsp;else&nbsp;has&nbsp;a&nbsp;similar&nbsp;need&nbsp;and&nbsp;solution.&lt;br&gt;&lt;br&gt;On&nbsp;Monday,&nbsp;January&nbsp;7,&nbsp;2013&nbsp;11:40:39&nbsp;AM&nbsp;UTC-6,&nbsp;Mike&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0..8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;p&nbsp;style=&quot;font-size:14px;clear:both;word-wrap:break-word;color:rgb(0,0,0);font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif&quot;&gt;I&nbsp;have&nbsp;a&nbsp;rabbitMQ&nbsp;cluster&nbsp;running&nbsp;on&nbsp;EC2&nbsp;behind&nbsp;an&nbsp;AWS&nbsp;load-balancer.&nbsp;In&nbsp;the&nbsp;rabbitMQ&nbsp;monitoring&nbsp;app,&nbsp;it&nbsp;shows&nbsp;the&nbsp;IP&nbsp;address&nbsp;of&nbsp;each&nbsp;machine&nbsp;that's&nbsp;currently&nbsp;connected&nbsp;to&nbsp;rabbitMQ.&nbsp;Since&nbsp;the&nbsp;clients&nbsp;are&nbsp;hitting&nbsp;rabbitMQ&nbsp;through&nbsp;the&nbsp;LB,&nbsp;it's&nbsp;showing&nbsp;the&nbsp;LBs&nbsp;IP&nbsp;address,&nbsp;instead&nbsp;of&nbsp;the&nbsp;client.&lt;/p&gt;&lt;p&nbsp;style=&quot;font-size:14px;clear:both;word-wrap:break-word;color:rgb(0,0,0);font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif&quot;&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;get&nbsp;the&nbsp;rabbitMQ&nbsp;monitoring&nbsp;plugin&nbsp;to&nbsp;show&nbsp;the&nbsp;x-forwarded-for&nbsp;request&nbsp;header,&nbsp;which&nbsp;contains&nbsp;the&nbsp;actual&nbsp;client&nbsp;IP&nbsp;address?&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;span&gt;_______________________________________________&lt;/span&gt;&lt;br&gt;&lt;span&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists..rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;<br>
This&nbsp;email&nbsp;is&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;intended&nbsp;recipient(s)&nbsp;only.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;email&nbsp;in&nbsp;error,&nbsp;please&nbsp;notify&nbsp;the&nbsp;sender&nbsp;immediately&nbsp;and&nbsp;then&nbsp;delete&nbsp;it.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;you&nbsp;must&nbsp;not&nbsp;use,&nbsp;disclose&nbsp;or&nbsp;distribute&nbsp;this&nbsp;email&nbsp;without&nbsp;the&nbsp;author's&nbsp;prior&nbsp;permission.&nbsp;AlertMe.com&nbsp;Ltd.&nbsp;is&nbsp;not&nbsp;responsible&nbsp;for&nbsp;any&nbsp;personal&nbsp;views&nbsp;expressed&nbsp;in&nbsp;this&nbsp;message&nbsp;or&nbsp;any&nbsp;attachments&nbsp;that&nbsp;are&nbsp;those&nbsp;of&nbsp;the&nbsp;individual&nbsp;sender.&lt;br/&gt;<br>
&lt;br/&gt;<br>
AlertMe.com&nbsp;Ltd,&nbsp;30&nbsp;Station&nbsp;Road,&nbsp;Cambridge,&nbsp;CB1&nbsp;2RE,&nbsp;UK.&lt;br/&gt;<br>
Registered&nbsp;in&nbsp;England,&nbsp;Company&nbsp;number&nbsp;578&nbsp;2908,&nbsp;VAT&nbsp;registration&nbsp;number&nbsp;GB&nbsp;895&nbsp;9914&nbsp;42.&lt;br/&gt;<br>
&lt;/body&gt;&lt;/html&gt;
</tt>
