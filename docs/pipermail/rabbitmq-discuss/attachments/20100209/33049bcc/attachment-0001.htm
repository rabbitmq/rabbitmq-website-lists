<tt>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;TITLE&gt;Re:&nbsp;[rabbitmq-discuss]&nbsp;PHP&nbsp;Client&nbsp;libraries&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Hey&nbsp;guys,&lt;BR&gt;<br>
&lt;BR&gt;<br>
Just&nbsp;FYI,&nbsp;I&nbsp;have&nbsp;a&nbsp;mostly&nbsp;working&nbsp;php-rabbit&nbsp;patch.&nbsp;Using&nbsp;the&nbsp;demo&nbsp;script&nbsp;I&nbsp;can&nbsp;declare,&nbsp;bind,&nbsp;publish&nbsp;and&nbsp;consume.&nbsp;I&nbsp;ran&nbsp;into&nbsp;a&nbsp;segfault&nbsp;when&nbsp;I&nbsp;tried&nbsp;to&nbsp;incorporate&nbsp;it&nbsp;into&nbsp;our&nbsp;framework,&nbsp;so&nbsp;there&nbsp;is&nbsp;still&nbsp;some&nbsp;debugging&nbsp;to&nbsp;do&nbsp;there.&lt;BR&gt;<br>
I&nbsp;will&nbsp;submit&nbsp;a&nbsp;patch&nbsp;to&nbsp;everyone&nbsp;later&nbsp;today,&nbsp;with&nbsp;the&nbsp;understanding&nbsp;that&nbsp;I&nbsp;make&nbsp;no&nbsp;guarantees&nbsp;as&nbsp;to&nbsp;whether&nbsp;it&nbsp;is&nbsp;production&nbsp;ready.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Pieter&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;2/9/10&nbsp;3:00&nbsp;AM,&nbsp;&amp;quot;Alexandre&nbsp;Kalendarev&amp;quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;akalend@mail.ru&quot;&gt;akalend@mail.ru&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;Hi&nbsp;Dieter,&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;gt;&nbsp;thank&nbsp;you&nbsp;for&nbsp;your&nbsp;reply.&nbsp;Am&nbsp;I&nbsp;right,&nbsp;the&nbsp;module&nbsp;does&nbsp;not&nbsp;support&lt;BR&gt;<br>
&amp;gt;&nbsp;consuming&nbsp;messages?&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;module&nbsp;is&nbsp;support&nbsp;Consume&nbsp;and&nbsp;Get&nbsp;methods.&nbsp;But&nbsp;Consume&lt;BR&gt;<br>
methods&nbsp;is&nbsp;sync&nbsp;and&nbsp;GET&nbsp;is&nbsp;async.&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;You&nbsp;use&nbsp;the&nbsp;&amp;nbsp;the&nbsp;consume&nbsp;in&nbsp;the&nbsp;WEB&nbsp;pages,&nbsp;the&nbsp;HTTP&nbsp;protocol&nbsp;is&nbsp;async&nbsp;and&nbsp;You&nbsp;can't&nbsp;wait&nbsp;if&nbsp;you&nbsp;have&nbsp;not&nbsp;commet&nbsp;technology.&lt;BR&gt;<br>
My&nbsp;recomendation&nbsp;&amp;nbsp;is&nbsp;use&nbsp;the&nbsp;series&nbsp;of&nbsp;GET&nbsp;method:&lt;BR&gt;<br>
&lt;BR&gt;<br>
//&nbsp;get&nbsp;queue&nbsp;items&lt;BR&gt;<br>
$queue&nbsp;=&nbsp;new&nbsp;AMQPQueue(APMQConection(),&nbsp;'my_queue');&lt;BR&gt;<br>
$i=0;&lt;BR&gt;<br>
$res&nbsp;=&nbsp;true;&lt;BR&gt;<br>
while&nbsp;($res&nbsp;=&nbsp;$queue-&amp;gt;get()&nbsp;!==&nbsp;false&nbsp;&amp;nbsp;){&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$i++;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&nbsp;&amp;quot;$i&nbsp;:&nbsp;{$res['msg']}&amp;lt;br&amp;gt;\n&amp;quot;;&lt;BR&gt;<br>
}&lt;BR&gt;<br>
&lt;BR&gt;<br>
But,&nbsp;You&nbsp;can&nbsp;use&nbsp;the&nbsp;Consume,&nbsp;You&nbsp;must&nbsp;the&nbsp;read&nbsp;queue&nbsp;lenght&nbsp;and&nbsp;make&nbsp;Consume&nbsp;of&nbsp;len&nbsp;messages.&lt;BR&gt;<br>
It&nbsp;is&nbsp;guarantie&nbsp;of&nbsp;absent&nbsp;waiting&nbsp;new&nbsp;messages.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
//&nbsp;consume&lt;BR&gt;<br>
$i=0;&lt;BR&gt;<br>
$queue&nbsp;=&nbsp;new&nbsp;AMQPQueue(APMQConection());&lt;BR&gt;<br>
&lt;BR&gt;<br>
$n&nbsp;=&nbsp;$queue-&amp;gt;declare('my_queue');&nbsp;&amp;nbsp;//&nbsp;we&nbsp;get&nbsp;the&nbsp;lenght&nbsp;of&nbsp;queue&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;&lt;BR&gt;<br>
$queueMessages&nbsp;=&nbsp;$queue-&amp;gt;consume(&nbsp;$n&nbsp;);&nbsp;//&nbsp;we&nbsp;reading&nbsp;$n&nbsp;messages,&nbsp;&amp;nbsp;all&nbsp;queue.&lt;BR&gt;<br>
foreach($queueMessages&nbsp;as&nbsp;$item){&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;$i++;&lt;BR&gt;<br>
&amp;nbsp;&amp;nbsp;echo&nbsp;&amp;quot;$i.$item&amp;quot;;&lt;BR&gt;<br>
}&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;$n&nbsp;less&nbsp;lenght&nbsp;of&nbsp;queue,&nbsp;the&nbsp;all&nbsp;nonreaded&nbsp;messages&nbsp;will&nbsp;be&nbsp;gone.&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;Consume&nbsp;method&nbsp;is&nbsp;faster.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;gt;Or&nbsp;Am&nbsp;i&nbsp;mixing&nbsp;up&nbsp;the&nbsp;Modules?&lt;BR&gt;<br>
the&nbsp;module&nbsp;php-amqp&nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;http://code.google.com/p/php-amqp/&quot;&gt;http://code.google.com/p/php-amqp/&lt;/a&gt;&nbsp;&amp;nbsp;&amp;nbsp;don't&nbsp;support&nbsp;consume,&nbsp;bind&nbsp;and&nbsp;queue.&nbsp;It&nbsp;is&nbsp;only&nbsp;publish.&lt;BR&gt;<br>
&lt;BR&gt;<br>
If&nbsp;You&nbsp;have&nbsp;any&nbsp;questions&nbsp;send&nbsp;me,&nbsp;I&nbsp;will&nbsp;very&nbsp;happeness&nbsp;ask&nbsp;You.&nbsp;Sorry&nbsp;for&nbsp;my&nbsp;English.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Alexandre&lt;BR&gt;<br>
&lt;BR&gt;<br>
_______________________________________________&lt;BR&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;BR&gt;<br>
&lt;a&nbsp;href=&quot;rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;BR&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/BLOCKQUOTE&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;&lt;BR&gt;<br>
--&nbsp;&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#343434&quot;&gt;&lt;FONT&nbsp;SIZE=&quot;4&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:14pt'&gt;the&nbsp;rubicon&nbsp;project&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;FONT&nbsp;COLOR=&quot;#BA0022&quot;&gt;&lt;FONT&nbsp;SIZE=&quot;1&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:9pt'&gt;&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;SPAN&nbsp;STYLE='font-size:7pt'&gt;PIETER&nbsp;DE&nbsp;ZWART&nbsp;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;SIZE=&quot;1&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:7pt'&gt;&lt;FONT&nbsp;COLOR=&quot;#404040&quot;&gt;|&nbsp;INTERFACES&nbsp;ENGINEER&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#AC0021&quot;&gt;&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#BB001E&quot;&gt;&amp;#8226;&amp;#8226;&amp;#8226;&nbsp;P&nbsp;310&nbsp;207&nbsp;0272&nbsp;|&nbsp;x224&lt;BR&gt;<br>
&amp;#8226;&amp;#8226;&amp;#8226;&nbsp;F&nbsp;323&nbsp;466&nbsp;7119&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;BR&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#3C3C3C&quot;&gt;&lt;BR&gt;<br>
1925&nbsp;S.&nbsp;BUNDY&nbsp;&amp;nbsp;DRIVE&lt;BR&gt;<br>
LOS&nbsp;ANGELES,&nbsp;CALIFORNIA&nbsp;90025&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#B60F1D&quot;&gt;&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;WWW.RUBICONPROJECT.COM&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#B60F1D&quot;&gt;&nbsp;&amp;lt;&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&gt;&lt;U&gt;&lt;a&nbsp;href=&quot;http://&quot;&gt;http://&lt;/a&gt;www.rubiconproject.com/&lt;/U&gt;&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#B60F1D&quot;&gt;&amp;gt;&nbsp;&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#2F2F2F&quot;&gt;&lt;FONT&nbsp;SIZE=&quot;4&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:13pt'&gt;&lt;IMG&nbsp;src=&quot;cid:3348550043_415745&quot;&nbsp;&gt;&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;FONT&nbsp;COLOR=&quot;#787878&quot;&gt;&lt;FONT&nbsp;SIZE=&quot;1&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:7pt'&gt;&amp;#8220;COMPANY&nbsp;OF&nbsp;THE&nbsp;YEAR&amp;#8221;&nbsp;ALWAYSON&nbsp;ONMEDIA&nbsp;2009&lt;BR&gt;<br>
#24&nbsp;ON&nbsp;FAST&nbsp;COMPANY&nbsp;FAST&nbsp;50&nbsp;READER&nbsp;FAVORITES&lt;BR&gt;<br>
2008&nbsp;&amp;nbsp;ALWAYSON&nbsp;250&nbsp;GLOBAL&nbsp;WINNER&lt;BR&gt;<br>
2008&nbsp;ALWAYSON&nbsp;ONMEDIA&nbsp;100&nbsp;WINNER&lt;BR&gt;<br>
TWIISTUP3&nbsp;&amp;nbsp;BEST&nbsp;IN&nbsp;SHOW&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;SIZE=&quot;1&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:7pt'&gt;&lt;FONT&nbsp;COLOR=&quot;#777777&quot;&gt;PRICEWATERHOUSECOOPERS&nbsp;&amp;#8211;&nbsp;ENTRETECH&nbsp;&amp;nbsp;BEST&nbsp;STARTUP&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#787878&quot;&gt;AMERICAN&nbsp;BUSINESS&nbsp;AWARDS&nbsp;-&nbsp;STEVIES&nbsp;&amp;nbsp;&amp;#8216;08&nbsp;FINALIST&nbsp;BEST&nbsp;NEW&nbsp;COMPANY&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#777777&quot;&gt;AMERICAN&nbsp;BUSINESS&nbsp;&amp;nbsp;AWARDS&nbsp;-&nbsp;STEVIES&nbsp;&amp;#8216;08&nbsp;FINALIST&nbsp;MOST&nbsp;INNOVATIVE&nbsp;COMPANY&lt;BR&gt;<br>
AMERICAN&nbsp;BUSINESS&nbsp;&amp;nbsp;AWARDS&nbsp;-&nbsp;STEVIES&nbsp;&amp;#8216;08&nbsp;FINALIST&nbsp;NEW&nbsp;PRODUCT&nbsp;OR&nbsp;SERVICE&nbsp;-&nbsp;&amp;nbsp;SERVICES&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;COLOR=&quot;#198000&quot;&gt;&lt;FONT&nbsp;SIZE=&quot;6&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Webdings&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:24pt'&gt;P&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;SIZE=&quot;1&quot;&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:7pt'&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:8pt'&gt;Please&nbsp;consider&nbsp;the&nbsp;environment&nbsp;before&nbsp;printing&nbsp;this&nbsp;e-mail&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Calibri,&nbsp;Verdana,&nbsp;Helvetica,&nbsp;Arial&quot;&gt;&lt;SPAN&nbsp;STYLE='font-size:11pt'&gt;&lt;BR&gt;<br>
&lt;/SPAN&gt;&lt;/FONT&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>
<br>

</tt>
