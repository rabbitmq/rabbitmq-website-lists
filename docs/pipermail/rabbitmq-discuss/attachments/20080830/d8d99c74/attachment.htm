<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;sorry&nbsp;for&nbsp;emailing&nbsp;my&nbsp;question&nbsp;a&nbsp;few&nbsp;times.&amp;nbsp;&nbsp;I&nbsp;need&nbsp;to&nbsp;get&nbsp;Flex&nbsp;to&nbsp;successful&nbsp;establish&nbsp;connection&nbsp;with&nbsp;RabbitMQ&nbsp;inside&nbsp;my&nbsp;Flex&nbsp;application&nbsp;in&nbsp;order&nbsp;to&nbsp;position&nbsp;the&nbsp;use&nbsp;of&nbsp;RabbitMQ&nbsp;in&nbsp;our&nbsp;application.&amp;nbsp;&nbsp;I&nbsp;can&nbsp;establish&nbsp;a&nbsp;AMPQ&nbsp;to&nbsp;AMPQ&nbsp;connection&nbsp;using&nbsp;Java&nbsp;client&nbsp;for&nbsp;both&nbsp;publisher&nbsp;and&nbsp;subscriber,&nbsp;but&nbsp;I&nbsp;am&nbsp;not&nbsp;able&nbsp;to&nbsp;use&nbsp;Flex&nbsp;as&nbsp;the&nbsp;subscriber.&amp;nbsp;&nbsp;I&nbsp;know&nbsp;I&nbsp;may&nbsp;try&nbsp;using&nbsp;FM3&nbsp;to&nbsp;act&nbsp;as&nbsp;the&nbsp;subscriber,&nbsp;but&nbsp;I&nbsp;still&nbsp;think&nbsp;the&nbsp;best&nbsp;and&nbsp;most&nbsp;straight&nbsp;forward&nbsp;solution&nbsp;is&nbsp;to&nbsp;have&nbsp;Flex&nbsp;client&nbsp;to&nbsp;subscribe&nbsp;directly&nbsp;to&nbsp;RabbitMQ.&amp;nbsp;&nbsp;&lt;br&gt;<br>
&lt;br&gt;RabbitMQ.log&nbsp;says:<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;error&nbsp;on&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.8716.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://192.168.1.100:50021/&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.1.100:50021&lt;/a&gt;&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;{handshake_timeout,frame_&lt;/b&gt;&lt;b&gt;header}&lt;/b&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;Here&nbsp;is&nbsp;my&nbsp;code,&nbsp;could&nbsp;someone&nbsp;help&nbsp;me&nbsp;to&nbsp;find&nbsp;out&nbsp;what&nbsp;is&nbsp;wrong?&amp;nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&amp;lt;?xml&nbsp;version=&amp;quot;1.0&amp;quot;&nbsp;encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;br&gt;&amp;lt;mx:Application&nbsp;xmlns:mx=&amp;quot;&lt;a&nbsp;href=&quot;http://www.adobe.com/2006/mxml&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.adobe.com/2006/mxml&lt;/a&gt;&amp;quot;&nbsp;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;layout=&amp;quot;absolute&amp;quot;&nbsp;styleName=&amp;quot;plain&amp;quot;&amp;nbsp;&nbsp;creationComplete=&amp;quot;init()&amp;quot;&amp;gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&amp;nbsp;&nbsp;&amp;lt;mx:Script&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;![CDATA[&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;import&nbsp;org.amqp.patterns.impl.SubscribeClientImpl;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;import&nbsp;org.amqp.patterns.SubscribeClient;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;import&nbsp;org.amqp.Connection;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;import&nbsp;org.amqp.ConnectionState;&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;import&nbsp;org.amqp.patterns.CorrelatedMessageEvent;&lt;br&gt;&amp;nbsp;&amp;nbsp;import&nbsp;org.amqp.ProtocolEvent;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;import&nbsp;org.amqp.Session;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;import&nbsp;org.amqp.SessionManager;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;import&nbsp;org.amqp.impl.SessionStateHandler;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;private&nbsp;var&nbsp;subClient:SubscribeClientImpl;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;protected&nbsp;var&nbsp;connection:Connection;&lt;br&gt;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&nbsp;var&nbsp;serializer:JSONSerializer&nbsp;=&nbsp;new&nbsp;JSONSerializer();&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;public&nbsp;function&nbsp;init():void&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;trace(&amp;quot;test&nbsp;sub&nbsp;init&amp;quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;connection&nbsp;=&nbsp;new&nbsp;Connection(buildConnectionState());&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;subClient&nbsp;=&nbsp;new&nbsp;SubscribeClientImpl(connection);&lt;br&gt;&lt;b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;subClient.serializer&nbsp;=&nbsp;serializer;&lt;br&gt;<br>
<br>
//&amp;nbsp;&amp;nbsp;&amp;nbsp;subClient.realm&nbsp;=&nbsp;&amp;quot;/data&amp;quot;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;subClient.exchange&nbsp;=&nbsp;&amp;quot;gamex&amp;quot;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;subClient.exchangeType&nbsp;=&nbsp;&amp;quot;topic&amp;quot;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;sub.subscribe(&amp;quot;SimpleQueue&amp;quot;,onMessageArrive);&lt;/b&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;public&nbsp;function&nbsp;buildConnectionState():ConnectionState&nbsp;{&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;var&nbsp;state:ConnectionState&nbsp;=&nbsp;new&nbsp;ConnectionState();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;state.username&nbsp;=&nbsp;&amp;quot;guest&amp;quot;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;state.password&nbsp;=&nbsp;&amp;quot;guest&amp;quot;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;state.vhostpath&nbsp;=&nbsp;&amp;quot;/&amp;quot;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;state.serverhost&nbsp;=&nbsp;&amp;quot;&lt;a&nbsp;href=&quot;http://192.168.1.104/&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.1.104&lt;/a&gt;&amp;quot;;&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;state;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;public&nbsp;function&nbsp;onMessageArrive(event:CorrelatedMessageEvent):void&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;var&nbsp;o:*&nbsp;=&nbsp;event.result;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;]]&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;lt;/mx:Script&amp;gt;&lt;/div&gt;<br>
<br>
<br>
&amp;lt;/mx:Application&amp;gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
