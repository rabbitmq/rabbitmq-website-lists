<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;This&nbsp;is&nbsp;probably&nbsp;my&nbsp;ignorance,&nbsp;but&nbsp;I&amp;#39;m&nbsp;getting&nbsp;slightly&nbsp;confused&nbsp;about&lt;br&gt;<br>
<br>
what&nbsp;exact&nbsp;cause&nbsp;and&nbsp;effect&nbsp;you&nbsp;are&nbsp;investigating.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Ben,&nbsp;I&nbsp;think&nbsp;we&amp;#39;re&nbsp;on&nbsp;the&nbsp;same&nbsp;page.&nbsp;I&nbsp;understand&nbsp;the&nbsp;current&nbsp;limitations,&nbsp;and&nbsp;now&nbsp;I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;the&nbsp;ceiling&nbsp;thresholds&nbsp;for&nbsp;setting&nbsp;up&nbsp;a&nbsp;production&nbsp;node:&nbsp;memory&nbsp;usage&nbsp;patterns,&nbsp;how&nbsp;it&nbsp;performs&nbsp;when&nbsp;swapping,&nbsp;etc.&amp;nbsp;&nbsp;Also&nbsp;found&nbsp;a&nbsp;few&nbsp;bugs&nbsp;in&nbsp;the&nbsp;Ruby&nbsp;client,&nbsp;working&nbsp;on&nbsp;addressing&nbsp;those.&nbsp;:)&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;If&nbsp;you&nbsp;don&amp;#39;t&nbsp;use&nbsp;producer&nbsp;flow&nbsp;control&nbsp;(the&nbsp;channel.flow&nbsp;command)&nbsp;to&lt;br&gt;<br>
throttle&nbsp;message&nbsp;sending,&nbsp;eventually&nbsp;you&nbsp;will&nbsp;run&nbsp;out&nbsp;of&nbsp;resources&nbsp;and&lt;br&gt;<br>
you&nbsp;will&nbsp;see&nbsp;the&nbsp;behaviour&nbsp;that&nbsp;you&nbsp;are&nbsp;reporting.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Yep.&amp;nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Marking&nbsp;messages&nbsp;as&nbsp;persistent&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;help&nbsp;with&nbsp;the&nbsp;current&lt;br&gt;<br>
implementation.&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;a&nbsp;message&nbsp;is&nbsp;marked&nbsp;as&nbsp;persistent,&nbsp;it&nbsp;means&nbsp;that&nbsp;there&nbsp;is&nbsp;an&lt;br&gt;<br>
additional&nbsp;replica&nbsp;of&nbsp;the&nbsp;message&nbsp;on&nbsp;disk.&nbsp;The&nbsp;purpose&nbsp;of&nbsp;the&nbsp;replica&lt;br&gt;<br>
is&nbsp;to&nbsp;be&nbsp;requeued&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;queue&nbsp;recovery&nbsp;process,&nbsp;if&nbsp;the&lt;br&gt;<br>
message&nbsp;was&nbsp;not&nbsp;subsequently&nbsp;ack&amp;#39;ed&nbsp;by&nbsp;a&nbsp;consumer.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
ATM&nbsp;Rabbit&nbsp;is&nbsp;not&nbsp;smart&nbsp;enough&nbsp;to&nbsp;piggy&nbsp;back&nbsp;off&nbsp;the&nbsp;journal&nbsp;to&nbsp;smooth&lt;br&gt;<br>
out&nbsp;memory&nbsp;consumption.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&amp;nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Also,&nbsp;it&nbsp;is&nbsp;questionable&nbsp;as&nbsp;to&nbsp;whether&nbsp;this&nbsp;would&nbsp;be&nbsp;the&nbsp;best&nbsp;way&nbsp;to&lt;br&gt;<br>
<br>
solve&nbsp;the&nbsp;infamous&nbsp;queue&nbsp;paging&nbsp;problem.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Yep,&nbsp;good&nbsp;points.&nbsp;I&nbsp;think&nbsp;we&amp;#39;ll&nbsp;go&nbsp;ahead&nbsp;an&nbsp;implement&nbsp;our&nbsp;own&nbsp;backup&nbsp;strategy&nbsp;for&nbsp;time&nbsp;being,&nbsp;but&nbsp;I&nbsp;do&nbsp;hope&nbsp;that&nbsp;we&amp;#39;ll&nbsp;see&nbsp;some&nbsp;sane&nbsp;overflow&nbsp;conditions&nbsp;make&nbsp;it&nbsp;to&nbsp;RabbitMQ&nbsp;sooner&nbsp;rather&nbsp;than&nbsp;later&nbsp;(number&nbsp;of&nbsp;messages,&nbsp;ttl,&nbsp;whichever).&nbsp;&lt;br&gt;<br>
&lt;br&gt;Cheers,&lt;br&gt;ig&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
