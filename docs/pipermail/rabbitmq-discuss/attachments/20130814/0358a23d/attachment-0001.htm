<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;As&nbsp;suggested&nbsp;I&nbsp;tried&nbsp;upgrading&nbsp;the&nbsp;erlang&nbsp;to&nbsp;R16B01&nbsp;and&nbsp;the&nbsp;rabbitmq&nbsp;server&nbsp;to&nbsp;3.1.4.&nbsp;&amp;nbsp;Now&nbsp;I&nbsp;am&nbsp;not&nbsp;able&nbsp;to&nbsp;bring&nbsp;up&nbsp;the&nbsp;rabbitmq&nbsp;server.&nbsp;&amp;nbsp;I&nbsp;tried&nbsp;removing&nbsp;the&nbsp;erlang&nbsp;and&nbsp;rabbitmq&nbsp;installs&nbsp;multiple&nbsp;times&nbsp;and&nbsp;still&nbsp;I&nbsp;am&nbsp;unable&nbsp;to&nbsp;bring&nbsp;it&nbsp;up.&nbsp;I&nbsp;am&nbsp;not&nbsp;using&nbsp;any&nbsp;custom&nbsp;configuration&nbsp;or&nbsp;env&nbsp;files&nbsp;as&nbsp;well.&nbsp;&amp;nbsp;I&nbsp;tried&nbsp;removing&nbsp;the&nbsp;mnesia&nbsp;directory&nbsp;but&nbsp;did&nbsp;not&nbsp;help&nbsp;either.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#&nbsp;rpm&nbsp;-qa&nbsp;|&nbsp;grep&nbsp;-i&nbsp;esl&nbsp;|&nbsp;more&lt;/div&gt;&lt;div&gt;esl-erlang-R16B01-1.x86_64&lt;/div&gt;&lt;div&gt;]#&nbsp;rpm&nbsp;-qa&nbsp;|&nbsp;grep&nbsp;-i&nbsp;rabbit&lt;/div&gt;&lt;div&gt;rabbitmq-server-3.1.4-1.noarch.&nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;startup&nbsp;log&nbsp;has&nbsp;the&nbsp;following&nbsp;error&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Starting&nbsp;broker...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;BOOT&nbsp;FAILED&lt;/div&gt;&lt;div&gt;===========&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Error&nbsp;description:&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;{could_not_start,rabbit,undef}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Log&nbsp;files&nbsp;(may&nbsp;contain&nbsp;more&nbsp;information):&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;/var/log/rabbitmq/rabbit@itops-dev-164.log&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;/var/log/rabbitmq/rabbit@itops-dev-164-sasl.log&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;{&quot;init&nbsp;terminating&nbsp;in&nbsp;do_boot&quot;,{rabbit,failure_during_boot,{could_not_start,rabbit,undef}}}^M&lt;/div&gt;&lt;div&gt;^[[60G[^[[0;31mFAILED^[[0;39m]^M&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;attaching&amp;nbsp;rabbit@itops-dev-164-sasl.log&nbsp;file&nbsp;as&nbsp;well&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;On&nbsp;Tuesday,&nbsp;August&nbsp;13,&nbsp;2013&nbsp;5:39:53&nbsp;PM&nbsp;UTC-4,&nbsp;ramvi...@gmail.com&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;We&nbsp;also&nbsp;noticed&nbsp;two&nbsp;other&nbsp;failures.&nbsp;&amp;nbsp;When&nbsp;we&nbsp;kill&nbsp;the&nbsp;epmd&nbsp;process&nbsp;and&nbsp;restart&nbsp;rabbitMQ&nbsp;we&nbsp;see&nbsp;the&nbsp;following&nbsp;error.&nbsp;&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;{error_logger,{{2013,8,13},{&lt;wbr&gt;17,31,53}},&quot;Protocol:&nbsp;~p:&nbsp;not&nbsp;supported~n&quot;,[&quot;inet_tls&quot;]}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;According&nbsp;to&nbsp;one&nbsp;other&nbsp;thread&nbsp;here,&nbsp;this&nbsp;should&nbsp;go&nbsp;away&nbsp;if&nbsp;we&nbsp;use&nbsp;the&nbsp;latest&nbsp;version&nbsp;of&nbsp;erlang,&nbsp;which&nbsp;we&nbsp;are&nbsp;using.&nbsp;&amp;nbsp;Rabbit&nbsp;MQ&nbsp;also&nbsp;seems&nbsp;to&nbsp;recognize&nbsp;the&nbsp;latest&nbsp;version&nbsp;of&nbsp;erlang,&nbsp;when&nbsp;we&nbsp;do&nbsp;rabbitmqctl&nbsp;status.&nbsp;We&nbsp;checked&nbsp;this&nbsp;&amp;nbsp;removing&nbsp;the&nbsp;SSL.configuration.&nbsp;&amp;nbsp;As&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;ssl&nbsp;config&nbsp;guide&nbsp;for&nbsp;erlang,&nbsp;if&nbsp;we&nbsp;uncomment&nbsp;the&nbsp;commented&nbsp;out&nbsp;section&nbsp;of&nbsp;the&nbsp;config&nbsp;file&nbsp;below,&nbsp;the&nbsp;RRabbitMQ&nbsp;server&nbsp;would&nbsp;just&nbsp;hang.&nbsp;&amp;nbsp;I&nbsp;am&nbsp;able&nbsp;to&nbsp;connect&nbsp;the&nbsp;WebUI,&nbsp;but&nbsp;I&nbsp;never&nbsp;get&nbsp;the&nbsp;success&nbsp;message&nbsp;on&nbsp;the&nbsp;terminal&nbsp;I&nbsp;started&nbsp;the&nbsp;server.&nbsp;&amp;nbsp;Also,&nbsp;the&nbsp;other&nbsp;node&nbsp;when&nbsp;brought&nbsp;up,&nbsp;times&nbsp;out&nbsp;trying&nbsp;to&nbsp;connect&nbsp;to&nbsp;this&nbsp;node.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Venkat&lt;/div&gt;&lt;br&gt;On&nbsp;Tuesday,&nbsp;August&nbsp;13,&nbsp;2013&nbsp;12:00:57&nbsp;PM&nbsp;UTC-4,&nbsp;&lt;a&gt;ramvi...@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0;margin-left:0.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;We&nbsp;are&nbsp;setting&nbsp;up&nbsp;a&nbsp;RabbitMQ&nbsp;env&nbsp;with&nbsp;clustering&nbsp;on&nbsp;the&nbsp;LAN&nbsp;and&nbsp;federated&nbsp;on&nbsp;the&nbsp;WAN.&nbsp;&amp;nbsp;We&nbsp;also&nbsp;intend&nbsp;to&nbsp;use&nbsp;consistent&nbsp;hash&nbsp;on&nbsp;the&nbsp;receiver&nbsp;side.&nbsp;&amp;nbsp;We&nbsp;were&nbsp;able&nbsp;to&nbsp;successfully&nbsp;setup&nbsp;a&nbsp;federated&nbsp;configuration&nbsp;with&nbsp;ssl&nbsp;enabled.&nbsp;&amp;nbsp;But&nbsp;we&nbsp;are&nbsp;having&nbsp;issues&nbsp;trying&nbsp;to&nbsp;setup&nbsp;ssl&nbsp;with&nbsp;clusters.&nbsp;&amp;nbsp;We&nbsp;are&nbsp;using&nbsp;RabbitMQ&nbsp;3.1.3&nbsp;with&nbsp;erlang&nbsp;version&amp;nbsp;&amp;nbsp;5.9.3.1.&nbsp;&amp;nbsp;We&nbsp;have&nbsp;setup&nbsp;the&nbsp;erlang&nbsp;config&nbsp;based&nbsp;on&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.erlang.org/doc/apps/ssl/ssl_distribution.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.erlang.org/doc/&lt;wbr&gt;apps/ssl/ssl_distribution.html&lt;/a&gt;&lt;wbr&gt;.&nbsp;&amp;nbsp;&nbsp;I&nbsp;am&nbsp;able&nbsp;connect&nbsp;tru&nbsp;an&nbsp;erlang&nbsp;client&nbsp;server&nbsp;program&nbsp;to&nbsp;send&nbsp;data&nbsp;back&nbsp;and&nbsp;forth&nbsp;and&nbsp;so&nbsp;I&nbsp;know&nbsp;the&nbsp;ssl&nbsp;with&nbsp;erlang&nbsp;works.&nbsp;&amp;nbsp;But&nbsp;when&nbsp;I&nbsp;bring&nbsp;RabbitMQ&nbsp;with&nbsp;clusters&nbsp;and&nbsp;take&nbsp;a&nbsp;TCP&nbsp;dump&nbsp;of&nbsp;the&nbsp;packets,&nbsp;the&nbsp;data&nbsp;transfer&nbsp;seem&nbsp;to&nbsp;be&nbsp;clear&nbsp;text.&nbsp;&amp;nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;check&nbsp;if&nbsp;the&nbsp;clusters&nbsp;are&nbsp;configured&nbsp;for&nbsp;ssl&nbsp;by&nbsp;any&nbsp;other&nbsp;means.&nbsp;&amp;nbsp;Also,&nbsp;would&nbsp;appreciate&nbsp;if&nbsp;someone&nbsp;can&nbsp;point&nbsp;out&nbsp;what&nbsp;am&nbsp;I&nbsp;doing&nbsp;wrong&nbsp;here.&nbsp;&amp;nbsp;Here&nbsp;is&nbsp;the&nbsp;env&nbsp;file&nbsp;(rabbitmq-env.conf)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;-boot&nbsp;/usr/lib64/erlang/releases/&lt;wbr&gt;R15B03/start_ssl&nbsp;-proto_dist&nbsp;inet_tls&quot;&lt;/div&gt;&lt;div&gt;#SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-pa&nbsp;/usr/lib64/erlang/lib/ssl-5.1.&lt;wbr&gt;2/ebin&quot;&lt;/div&gt;&lt;div&gt;#SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;/usr/lib64/erlang/lib/asn1-1.&lt;wbr&gt;8/ebin&quot;&lt;/div&gt;&lt;div&gt;#SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_portprogram_dir&nbsp;/usr/lib64/erlang/lib/ssl-5.1.&lt;wbr&gt;2/ebin&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;server_cacertfile&nbsp;/etc/openssl/all_cacerts.pem&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;server_certfile&nbsp;/etc/openssl/nn-vmrh5/cert.&lt;wbr&gt;pem&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;server_keyfile&nbsp;/etc/openssl/nn-vmrh5/key.pem&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;server_verify&nbsp;1&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;server_fail_if_no_peer_cert&nbsp;true&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;server_secure_renegotiate&nbsp;true&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;client_cacertfile&nbsp;/etc/openssl/all_cacerts.pem&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;client_certfile&nbsp;/etc/openssl/nn-vmrh5/cert.&lt;wbr&gt;pem&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;client_keyfile&nbsp;/etc/openssl/nn-vmrh5/key.pem&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;client_verify&nbsp;1&quot;&lt;/div&gt;&lt;div&gt;SERVER_START_ARGS=&quot;${SERVER_&lt;wbr&gt;START_ARGS}&nbsp;-ssl_dist_opt&nbsp;client_secure_renegotiate&nbsp;true&quot;&lt;/div&gt;&lt;div&gt;#echo&nbsp;SERVER_START_ARGS:&nbsp;${SERVER_START_ARGS}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;the&nbsp;rabbitmq.config&nbsp;for&nbsp;clustering&nbsp;and&nbsp;ssl&nbsp;option&nbsp;set&nbsp;for&nbsp;other&nbsp;modes.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[nn-vmrh5:&nbsp;/etc/rabbitmq]vi&nbsp;rabbitmq.config&lt;/div&gt;&lt;div&gt;[&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{rabbit,&nbsp;[&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{default_vhost,&nbsp;&amp;lt;&amp;lt;&quot;alert&quot;&amp;gt;&amp;gt;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{tcp_listeners,&nbsp;[5672]},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{ssl_listeners,&nbsp;[5671]},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{rabbitmq_tracing,&nbsp;[{username,&nbsp;&quot;guest&quot;}]},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{cluster_nodes,&nbsp;['rabbit@nn-vmrh5','rabbit@nn-&lt;wbr&gt;vmrh5g']},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{ssl_options,&nbsp;[{cacertfile,&quot;/etc/openssl/&lt;wbr&gt;all_cacerts.pem&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{certfile,&quot;/etc/openssl/nn-&lt;wbr&gt;vmrh5/cert.pem&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{keyfile,&quot;/etc/openssl/nn-&lt;wbr&gt;vmrh5/key.pem&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{verify,verify_peer},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{fail_if_no_peer_cert,true}]&nbsp;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{auth_mechanisms,&nbsp;['PLAIN',&nbsp;'AMQPLAIN',&nbsp;'EXTERNAL']},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{ssl_cert_login_from,&nbsp;common_name},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{log_levels,&nbsp;[{connection,&nbsp;info}]}&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;]&nbsp;}&lt;/div&gt;&lt;div&gt;].&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;Would&nbsp;really&nbsp;appreciate&nbsp;any&nbsp;help&nbsp;on&nbsp;this.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;Venkat&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
