<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Thanks&nbsp;Tim,&nbsp;I&nbsp;will&nbsp;send&nbsp;you&nbsp;a&nbsp;link&nbsp;to&nbsp;the&nbsp;log&nbsp;files&nbsp;privately.&nbsp;We&nbsp;do&nbsp;have&nbsp;mirrored&nbsp;queues,&nbsp;we&nbsp;setup&nbsp;an&nbsp;HA&nbsp;policy&nbsp;to&nbsp;mirror&nbsp;all&nbsp;queues&nbsp;to&nbsp;exactly&nbsp;2&nbsp;nodes&nbsp;of&nbsp;the&nbsp;4,&nbsp;as&nbsp;of&nbsp;yet&nbsp;we&nbsp;have&nbsp;not&nbsp;made&nbsp;use&nbsp;of&nbsp;any&nbsp;synchronization&nbsp;policy.&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;We&nbsp;start&nbsp;all&nbsp;rabbit&nbsp;nodes&nbsp;via:&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;sudo&nbsp;/etc/init.d/rabbit-server&nbsp;start&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;We&nbsp;do&nbsp;have&nbsp;chef&nbsp;managing&nbsp;this&nbsp;server&nbsp;and&nbsp;has&nbsp;since&nbsp;caused&nbsp;a&nbsp;restart&nbsp;on&nbsp;2&nbsp;of&nbsp;our&nbsp;4&nbsp;nodes,&nbsp;it&nbsp;is&nbsp;now&nbsp;temporarily&nbsp;disabled.&nbsp;I&nbsp;will&nbsp;send&nbsp;you&nbsp;the&nbsp;log&nbsp;files&nbsp;for&nbsp;all&nbsp;4&nbsp;nodes&nbsp;dating&nbsp;back&nbsp;several&nbsp;days.&nbsp;One&nbsp;thing&nbsp;I&nbsp;did&nbsp;notice&nbsp;in&nbsp;the&nbsp;log&nbsp;file&nbsp;for&nbsp;3&nbsp;of&nbsp;the&nbsp;4&nbsp;nodes:&lt;br&gt;<br>
<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::23:27:20&nbsp;===&lt;br&gt;connection&nbsp;&amp;lt;0.25853.253&amp;gt;,&nbsp;channel&nbsp;1&nbsp;-&nbsp;soft&nbsp;error:&lt;br&gt;{amqp_error,not_found,&lt;br&gt;           &nbsp;&amp;quot;home&nbsp;node&nbsp;&amp;#39;rabbit@rabbit-box&amp;#39;&nbsp;of&nbsp;durable&nbsp;queue&nbsp;&amp;#39;&lt;a&nbsp;href=&quot;http://my.queue.name&quot;&nbsp;target=&quot;_blank&quot;&gt;my.queue.name&lt;/a&gt;&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;&nbsp;is&nbsp;down&nbsp;or&nbsp;inaccessible&amp;quot;,&lt;br&gt;<br>
<br>
           &nbsp;&amp;#39;queue.declare&amp;#39;}&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;looking&nbsp;at&nbsp;the&nbsp;log&nbsp;files&nbsp;you&nbsp;will&nbsp;notice&nbsp;many&nbsp;entries&nbsp;like:&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;17-May-2013::09:15:42&nbsp;===&lt;br&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.5117.0&amp;gt;&nbsp;(IP:55913&nbsp;-&amp;gt;&nbsp;IP:5672)&lt;br&gt;<br>
<br>
&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;17-May-2013::09:15:42&nbsp;===&lt;br&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.5117.0&amp;gt;&nbsp;(IP:55913&nbsp;-&amp;gt;&nbsp;IP:5672):&lt;br&gt;connection_closed_abruptly&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Those&nbsp;are&nbsp;our&nbsp;load&nbsp;balancers&nbsp;checking&nbsp;the&nbsp;node&nbsp;health,&nbsp;sorry&nbsp;for&nbsp;the&nbsp;log&nbsp;spam.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;May&nbsp;17,&nbsp;2013&nbsp;at&nbsp;9:32&nbsp;AM,&nbsp;Tim&nbsp;Watson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tim@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;tim@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;Hmn&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt;On&nbsp;17&nbsp;May&nbsp;2013,&nbsp;at&nbsp;13:45,&nbsp;Eric&nbsp;Berg&nbsp;wrote:&lt;/div&gt;<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;response&nbsp;Tim.&nbsp;If&nbsp;you&nbsp;would&nbsp;like&nbsp;SSH&nbsp;access&nbsp;to&nbsp;these&nbsp;boxes&nbsp;let&nbsp;me&nbsp;know,&nbsp;we&nbsp;can&nbsp;work&nbsp;something&nbsp;out&nbsp;privately.&nbsp;Thanks!&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Ok,&nbsp;though&nbsp;first&nbsp;of&nbsp;all&nbsp;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;know&nbsp;if&nbsp;you&nbsp;supply&nbsp;logs&nbsp;for&nbsp;the&nbsp;nodes&nbsp;in&nbsp;question?&nbsp;A&nbsp;private&nbsp;drop&nbsp;box&nbsp;would&nbsp;be&nbsp;fine.&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Update&nbsp;from&nbsp;yesterday:&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;It&nbsp;looks&nbsp;like&nbsp;2&nbsp;of&nbsp;the&nbsp;4&nbsp;nodes&nbsp;in&nbsp;our&nbsp;cluster&nbsp;have&nbsp;finally&nbsp;shut&nbsp;down,&nbsp;all&nbsp;channels&nbsp;are&nbsp;now&nbsp;gone.&nbsp;Another&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster&nbsp;hangs&nbsp;on&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&amp;gt;&nbsp;sudo&nbsp;rabbitmqctl&nbsp;status&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;the&nbsp;final&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster&nbsp;appears&nbsp;to&nbsp;be&nbsp;running&nbsp;just&nbsp;fine.&nbsp;It&nbsp;however&nbsp;sees&nbsp;the&nbsp;unresponsive&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster&nbsp;status&nbsp;as&nbsp;a&nbsp;running&nbsp;node,&nbsp;as&nbsp;does&nbsp;the&nbsp;web&nbsp;UI.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Right,&nbsp;so&nbsp;we&amp;#39;ve&nbsp;still&nbsp;got&nbsp;an&nbsp;unresponsive&nbsp;node.&nbsp;Do&nbsp;you&nbsp;have&nbsp;any&nbsp;mirrored&nbsp;queues,&nbsp;and&nbsp;if&nbsp;so,&nbsp;what&nbsp;synchronisation&nbsp;and/or&nbsp;recovery&nbsp;policies&nbsp;are&nbsp;you&nbsp;using?&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;b&gt;When&nbsp;you&nbsp;upgraded&nbsp;your&nbsp;cluster,&nbsp;what&nbsp;RabbitMQ&nbsp;version&nbsp;did&nbsp;you&nbsp;upgrade&nbsp;<br>
from&nbsp;and&nbsp;to,&nbsp;and&nbsp;did&nbsp;you&nbsp;upgrade&nbsp;Erlang&nbsp;as&nbsp;well&nbsp;and&nbsp;if&nbsp;so,&nbsp;which&nbsp;<br>
versions&nbsp;were&nbsp;involved?&lt;br&gt;&lt;/b&gt;&lt;/div&gt;-&nbsp;we&nbsp;upgraded&nbsp;from&nbsp;3.0.4&nbsp;to&nbsp;3.1.0,&nbsp;we&nbsp;did&nbsp;not&nbsp;upgrade&nbsp;Erlang&nbsp;it&nbsp;was/is&nbsp;at&nbsp;version&nbsp;R15B03.&nbsp;We&nbsp;did&nbsp;however&nbsp;install&nbsp;it&nbsp;via&nbsp;RPM&nbsp;with&nbsp;the&nbsp;--nodeps&nbsp;flag&nbsp;because&nbsp;it&nbsp;did&nbsp;not&nbsp;detect&nbsp;the&nbsp;Erlang&nbsp;dependency&nbsp;correctly.&nbsp;We&nbsp;had&nbsp;previously&nbsp;installed&nbsp;Erlang:&lt;br&gt;<br>
<br>
&lt;br&gt;esl-erlang.x86_64   &nbsp;R15B03-2          &nbsp;@erlang-solutions&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Hmn,&nbsp;I&nbsp;suppose&nbsp;it&amp;#39;s&nbsp;possible&nbsp;that&nbsp;this&nbsp;re-install&nbsp;went&nbsp;wrong&nbsp;somehow&nbsp;and&nbsp;is&nbsp;causing&nbsp;some&nbsp;of&nbsp;the&nbsp;things&nbsp;below.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;b&gt;&lt;br&gt;What&nbsp;happens&nbsp;if&nbsp;you&nbsp;start&nbsp;up&nbsp;Erlang&nbsp;by&nbsp;itself,&nbsp;using&nbsp;`erl&nbsp;-sname&nbsp;test`&nbsp;-&nbsp;do&nbsp;you&nbsp;still&nbsp;see&nbsp;all&nbsp;those&nbsp;screwy&nbsp;warnings?&nbsp;&lt;/b&gt;&lt;br&gt;&lt;div&gt;All&nbsp;4&nbsp;of&nbsp;the&nbsp;nodes&nbsp;can&nbsp;run&nbsp;this&nbsp;without&nbsp;issue&nbsp;as&nbsp;my&nbsp;user,&nbsp;when&nbsp;I&nbsp;sudo&nbsp;su&nbsp;to&nbsp;rabbitmq&nbsp;user&nbsp;I&nbsp;get&nbsp;errors&nbsp;on&nbsp;2&nbsp;of&nbsp;the&nbsp;4&nbsp;nodes&nbsp;as&nbsp;such:&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Well&nbsp;the&nbsp;nodes&nbsp;should&nbsp;always&nbsp;be&nbsp;running&nbsp;as&nbsp;the&nbsp;rabbitmq&nbsp;user,&nbsp;so&nbsp;how&amp;#39;re&nbsp;you&nbsp;starting&nbsp;them&nbsp;as&nbsp;your&nbsp;user?&nbsp;That&nbsp;might&nbsp;be&nbsp;at&nbsp;the&nbsp;root&nbsp;of&nbsp;some&nbsp;of&nbsp;these&nbsp;problems,&nbsp;viz&nbsp;the&nbsp;rabbitmq-server&nbsp;(service)&nbsp;should&nbsp;always&nbsp;run&nbsp;as&nbsp;the&nbsp;rabbitmq&nbsp;user&nbsp;and&nbsp;when&nbsp;issuing&nbsp;rabbitmqctl&nbsp;commands&nbsp;and&nbsp;the&nbsp;like,&nbsp;you&nbsp;would&nbsp;normally&nbsp;do&nbsp;`$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;status`&nbsp;and&nbsp;so&nbsp;on. Log&nbsp;files&nbsp;would&nbsp;definitely&nbsp;help&nbsp;though.&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
