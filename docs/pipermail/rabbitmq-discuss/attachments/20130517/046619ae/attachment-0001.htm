<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&nbsp;we&nbsp;were&nbsp;hoping&nbsp;to&nbsp;get&nbsp;some&nbsp;pointers&nbsp;in&nbsp;looking&nbsp;into&nbsp;this&nbsp;problem.&nbsp; We&amp;#39;re&nbsp;running&nbsp;rabbitmq&nbsp;2.7.1-1&nbsp;in&nbsp;a&nbsp;xen&nbsp;VM&nbsp;on&nbsp;debian&nbsp;6&nbsp;squeeze.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;generally&nbsp;process&nbsp;about&nbsp;20&nbsp;messages/sec,&nbsp;with&nbsp;occasional&nbsp;transient&nbsp;spikes&nbsp;to&nbsp;500.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;recently&nbsp;added&nbsp;a&nbsp;new&nbsp;queue&nbsp;and&nbsp;saw&nbsp;the&nbsp;disk&nbsp;utilization&nbsp;jump&nbsp;to&nbsp;60-80%&nbsp;and&nbsp;the&nbsp;iowait&nbsp; to&nbsp;40-60%.&nbsp;Read&nbsp;sectors/sec&nbsp;is&nbsp;around&nbsp;0,&nbsp;and&nbsp;write&nbsp;sectors/sec&nbsp;is&nbsp;about&nbsp;1k,&nbsp;which&nbsp;is&nbsp;unchanged&nbsp;from&nbsp;before&nbsp;adding&nbsp;this&nbsp;new&nbsp;queue.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;input&nbsp;and&nbsp;output&nbsp;on&nbsp;this&nbsp;new&nbsp;queue&nbsp;is&nbsp;only&nbsp;1-10&nbsp;per&nbsp;second.&nbsp; The&nbsp;messages&nbsp;in&nbsp;it&nbsp;are&nbsp;only&nbsp;60-70&nbsp;bytes.&nbsp; We&nbsp;currently&nbsp;have&nbsp;a&nbsp;backlog&nbsp;of&nbsp;about&nbsp;100,000&nbsp;messages&nbsp;in&nbsp;the&nbsp;queue,&nbsp;we&nbsp;maxed&nbsp;out&nbsp;at&nbsp;250,000.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;individual&nbsp;consumers&nbsp;of&nbsp;this&nbsp;new&nbsp;queue&nbsp;don&amp;#39;t&nbsp;fetch&nbsp;that&nbsp;many&nbsp;messages--the&nbsp;work&nbsp;they&amp;#39;re&nbsp;associated&nbsp;with&nbsp;takes&nbsp;1-30&nbsp;seconds&nbsp;to&nbsp;perform.&nbsp; We&amp;#39;re&nbsp;using&nbsp;STOMP&nbsp;as&nbsp;a&nbsp;message&nbsp;transport.&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;every&nbsp;consumer&nbsp;we&nbsp;add&nbsp;to&nbsp;the&nbsp;queue&nbsp;seems&nbsp;to&nbsp;increase&nbsp;disk&nbsp;activity&nbsp;by&nbsp;about&nbsp;10%,&nbsp;and&nbsp;by&nbsp;the&nbsp;time&nbsp;we&nbsp;have&nbsp;8&nbsp;consumers,&nbsp;the&nbsp;rabbitmq&nbsp;server&nbsp;is&nbsp;overloaded&nbsp;enough&nbsp;that&nbsp;other&nbsp;queues&nbsp;start&nbsp;falling&nbsp;behind&nbsp;in&nbsp;their&nbsp;deliveries.&nbsp; &lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;If&nbsp;we&nbsp;shut&nbsp;off&nbsp;all&nbsp;the&nbsp;consumers&nbsp;on&nbsp;the&nbsp;new&nbsp;queue,&nbsp;disk&nbsp;activity&nbsp;immediately&nbsp;falls&nbsp;to&nbsp;easily&nbsp;sustainable&nbsp;levels&nbsp;(near&nbsp;zero&nbsp;iowait).&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Is&nbsp;there&nbsp;anything&nbsp;we&nbsp;can&nbsp;look&nbsp;at&nbsp;to&nbsp;get&nbsp;further&nbsp;information&nbsp;on&nbsp;the&nbsp;problem?&nbsp; Any&nbsp;pointers&nbsp;you&nbsp;have&nbsp;would&nbsp;be&nbsp;helpful.&nbsp; Thanks!&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
