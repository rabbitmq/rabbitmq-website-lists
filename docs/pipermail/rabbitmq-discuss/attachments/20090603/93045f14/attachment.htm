<tt>
Gavin,&lt;br&gt;&lt;br&gt;I&nbsp;had&nbsp;this&nbsp;same&nbsp;issue.&nbsp;Luckily&nbsp;it&amp;#39;s&nbsp;easy&nbsp;to&nbsp;take&nbsp;care&nbsp;of.&nbsp;Just&nbsp;edit&nbsp;src/rabbit_stomp.erl&nbsp;in&nbsp;the&nbsp;stomp&nbsp;adapter&nbsp;(assuming&nbsp;it&amp;#39;s&nbsp;from&nbsp;hg&nbsp;tip)&nbsp;and&nbsp;change&lt;br&gt;line&nbsp;364    &nbsp;&lt;br&gt;ChPid&nbsp;=&nbsp;rabbit_channel:start_link(?MODULE,&nbsp;self(),&nbsp;self(),&nbsp;U#user.username,&nbsp;list_to_binary(VirtualHost)),&lt;br&gt;<br>
to&lt;br&gt;ChPid&nbsp;=&nbsp;rabbit_channel:start_link(self(),&nbsp;self(),&nbsp;U#user.username,&nbsp;list_to_binary(VirtualHost)),&lt;br&gt;&lt;br&gt;Just&nbsp;remove&nbsp;the&nbsp;&amp;quot;?Module&amp;quot;&nbsp;since&nbsp;the&nbsp;start_link&nbsp;function&nbsp;changes&nbsp;in&nbsp;the&nbsp;new&nbsp;rabbitmq-server&nbsp;version.&lt;br&gt;<br>
&lt;br&gt;-Nemanja&lt;br&gt; &lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jun&nbsp;3,&nbsp;2009&nbsp;at&nbsp;5:13&nbsp;PM,&nbsp;Gavin&nbsp;M.&nbsp;Roy&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:gmr@myyearbook.com&quot;&gt;gmr@myyearbook.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I&amp;#39;ve&nbsp;been&nbsp;working&nbsp;on&nbsp;troubleshooting&nbsp;Stomp&nbsp;connectivity&nbsp;with&nbsp;RabbitMQ.&lt;br&gt;<br>
 All&nbsp;of&nbsp;my&nbsp;R&amp;amp;D&nbsp;was&nbsp;on&nbsp;1.5.3&nbsp;with&nbsp;rabbitmq-stomp&nbsp;tag&nbsp;rabbitmq_v1_5_3&lt;br&gt;<br>
and&nbsp;it&nbsp;worked&nbsp;just&nbsp;fine.&nbsp; I&nbsp;went&nbsp;to&nbsp;setup&nbsp;a&nbsp;production&nbsp;test&nbsp;with&lt;br&gt;<br>
RabbitMQ&nbsp;1.5.5&nbsp;and&nbsp;rabbitmq-stomp&nbsp;tip&nbsp;and&nbsp;it&nbsp;stopped&nbsp;working.&lt;br&gt;<br>
&lt;br&gt;<br>
Here&amp;#39;s&nbsp;the&nbsp;error&nbsp;output:&lt;br&gt;<br>
&lt;br&gt;<br>
=ERROR&nbsp;REPORT====&nbsp;3-Jun-2009::18:06:44&nbsp;===&lt;br&gt;<br>
STOMP&nbsp;error&nbsp;frame&nbsp;sent:&lt;br&gt;<br>
Message:&nbsp;&amp;quot;Processing&nbsp;error&amp;quot;&lt;br&gt;<br>
Detail:&nbsp;&amp;quot;Processing&nbsp;error\n&amp;quot;&lt;br&gt;<br>
Server&nbsp;private&nbsp;detail:&nbsp;{undef,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[{rabbit_channel,start_link,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [rabbit_stomp,&amp;lt;0.176.0&amp;gt;,&amp;lt;0.176.0&amp;gt;,&amp;lt;&amp;lt;&amp;quot;guest&amp;quot;&amp;gt;&amp;gt;,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;]},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {rabbit_stomp,do_login,4},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {rabbit_stomp,process_frame,3},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {rabbit_stomp,process_received_bytes,2},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {rabbit_stomp,init,1},&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {proc_lib,init_p_do_apply,3}]}&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;have&nbsp;any&nbsp;suggestions&nbsp;on&nbsp;how&nbsp;to&nbsp;fix&nbsp;this&nbsp;that&nbsp;would&nbsp;be&nbsp;helpful.&lt;br&gt;<br>
In&nbsp;addition,&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;change&nbsp;the&nbsp;default&nbsp;auto-delete&nbsp;from&nbsp;true&lt;br&gt;<br>
to&nbsp;false:&lt;br&gt;<br>
&lt;br&gt;<br>
[root@mq07&nbsp;src]#&nbsp;hg&nbsp;diff&lt;br&gt;<br>
diff&nbsp;-r&nbsp;8216e71f106c&nbsp;src/rabbit_stomp.erl&lt;br&gt;<br>
---&nbsp;a/src/rabbit_stomp.erl&nbsp; &nbsp; &nbsp; Mon&nbsp;Mar&nbsp;09&nbsp;13:47:54&nbsp;2009&nbsp;+0000&lt;br&gt;<br>
+++&nbsp;b/src/rabbit_stomp.erl&nbsp; &nbsp; &nbsp; Wed&nbsp;Jun&nbsp;03&nbsp;18:12:34&nbsp;2009&nbsp;-0400&lt;br&gt;<br>
@@&nbsp;-534,7&nbsp;+534,7&nbsp;@@&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; passive&nbsp; &nbsp; &nbsp;=&nbsp;BoolH(&amp;quot;passive&amp;quot;,&nbsp;false),&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; durable&nbsp; &nbsp; &nbsp;=&nbsp;BoolH(&amp;quot;durable&amp;quot;,&nbsp;false),&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; exclusive&nbsp; &nbsp;=&nbsp;BoolH(&amp;quot;exclusive&amp;quot;,&nbsp;false),&lt;br&gt;<br>
-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;auto_delete&nbsp;=&nbsp;BoolH(&amp;quot;auto-delete&amp;quot;,&nbsp;true),&lt;br&gt;<br>
+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;auto_delete&nbsp;=&nbsp;BoolH(&amp;quot;auto-delete&amp;quot;,&nbsp;false),&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nowait&nbsp; &nbsp; &nbsp; =&nbsp;true,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arguments&nbsp; &nbsp;=&nbsp;[longstr_field(K,&nbsp;V)&nbsp;||&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&amp;quot;X-Q-&amp;quot;&nbsp;++&nbsp;K,&nbsp;V}&nbsp;&amp;lt;-&nbsp;Headers]},&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;I&nbsp;wasn&amp;#39;t&nbsp;sure&nbsp;if&nbsp;this&nbsp;could&nbsp;cause&nbsp;any&nbsp;problems.&nbsp; Thoughts?&lt;br&gt;<br>
&lt;br&gt;<br>
TIA,&lt;br&gt;<br>
&lt;br&gt;<br>
Gavin&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
