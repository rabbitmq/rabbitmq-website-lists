<tt>
Hi&nbsp;Christopher,&lt;br&gt;&lt;br&gt;We&nbsp;are&nbsp;trying&nbsp;to&nbsp;setup&nbsp;the&nbsp;HA&nbsp;for&nbsp;RabbitMQ&nbsp;with&nbsp;Corosync.&nbsp;We&nbsp;are&nbsp;able&nbsp;to&nbsp;install&nbsp;the&nbsp;corosync&nbsp;but&nbsp;not&nbsp;able&nbsp;to&nbsp;configure&nbsp;with&nbsp;RabbitMQ.&nbsp;We&nbsp;have&nbsp;tried&nbsp;to&nbsp;locate&nbsp;but&nbsp;not&nbsp;able&nbsp;to&nbsp;find&nbsp;where&nbsp;to&nbsp;configure.&nbsp;Please&nbsp;can&nbsp;you&nbsp;provide&nbsp;some&nbsp;pointers&nbsp;of&nbsp;steps&nbsp;to&nbsp;configure&nbsp;the&nbsp;RabbitMQ&nbsp;configuration&nbsp;files&nbsp;with&nbsp;Corosync.&lt;br&gt;&lt;br&gt;Thanks&nbsp;in&nbsp;advance,&lt;br&gt;Sateesh&nbsp;B.&lt;br&gt;&lt;br&gt;On&nbsp;Friday,&nbsp;January&nbsp;27,&nbsp;2012&nbsp;11:19:05&nbsp;PM&nbsp;UTC+5:30,&nbsp;Christopher&nbsp;Grebs&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Hey&nbsp;there,&lt;p&gt;today&nbsp;we&nbsp;experimented&nbsp;with&nbsp;some&nbsp;high&nbsp;availability&nbsp;setup&nbsp;featuring&nbsp;&lt;br&gt;RabbitMQ&nbsp;+&nbsp;HA-Queues&nbsp;and&nbsp;Corosync.&nbsp;&amp;nbsp;Currently&nbsp;we&nbsp;have&nbsp;this&nbsp;setup:&lt;/p&gt;&lt;p&gt;&amp;nbsp;&nbsp;*&nbsp;2&nbsp;nodes&nbsp;named&nbsp;mq01ha&nbsp;and&nbsp;mq02ha&lt;/p&gt;&lt;p&gt;Both&nbsp;nodes&nbsp;have&nbsp;ha-ip&nbsp;addresses&nbsp;that&nbsp;move&nbsp;to&nbsp;the&nbsp;other&nbsp;node&nbsp;that&nbsp;is&nbsp;not&nbsp;&lt;br&gt;down&nbsp;so&nbsp;that&nbsp;all&nbsp;services&nbsp;can&nbsp;proceed,&nbsp;no&nbsp;matter&nbsp;to&nbsp;what&nbsp;node&nbsp;they&nbsp;are&nbsp;&lt;br&gt;connected.&lt;/p&gt;&lt;p&gt;Our&nbsp;test&nbsp;scenario:&lt;/p&gt;&lt;p&gt;One&nbsp;producer&nbsp;is&nbsp;pushing&nbsp;to&nbsp;mq01ha&nbsp;and&nbsp;one&nbsp;consumer&nbsp;is&nbsp;consuming&nbsp;from&nbsp;&lt;br&gt;mq01ha,&nbsp;the&nbsp;consumer&nbsp;is&nbsp;a&nbsp;bit&nbsp;slower&nbsp;so&nbsp;that&nbsp;messages&nbsp;pile&nbsp;up&nbsp;unacked.&lt;/p&gt;&lt;p&gt;Now&nbsp;we&nbsp;kill&nbsp;mq01ha&nbsp;by&nbsp;pusing&nbsp;the&nbsp;virtual&nbsp;power&nbsp;button&nbsp;(virtual&nbsp;maschines&nbsp;&lt;br&gt;are&nbsp;great!),&nbsp;corosync&nbsp;moves&nbsp;the&nbsp;ip&nbsp;from&nbsp;mq01ha&nbsp;to&nbsp;mq02ha&nbsp;and&nbsp;the&nbsp;&lt;br&gt;consumers&nbsp;and&nbsp;producers&nbsp;proceed&nbsp;with&nbsp;their&nbsp;work.&nbsp;&amp;nbsp;This&nbsp;works&nbsp;great&nbsp;and&nbsp;&lt;br&gt;everything&nbsp;is&nbsp;fine&nbsp;again.&lt;/p&gt;&lt;p&gt;Now&nbsp;(and&nbsp;this&nbsp;is&nbsp;the&nbsp;part&nbsp;where&nbsp;I&nbsp;need&nbsp;your&nbsp;knowledge)&nbsp;we&nbsp;currently&nbsp;have&nbsp;&lt;br&gt;the&nbsp;setup&nbsp;that&nbsp;if&nbsp;mq01&nbsp;starts&nbsp;up&nbsp;again&nbsp;the&nbsp;ip&nbsp;address&nbsp;moves&nbsp;back&nbsp;to&nbsp;mq01.&lt;/p&gt;&lt;p&gt;Now&nbsp;mq01&nbsp;is&nbsp;back&nbsp;up,&nbsp;all&nbsp;consumers&nbsp;and&nbsp;producers&nbsp;are&nbsp;proceeding&nbsp;with&nbsp;&lt;br&gt;their&nbsp;work.&nbsp;&amp;nbsp;But&nbsp;unfortunately&nbsp;in&nbsp;mq01&nbsp;and&nbsp;mq02&nbsp;all&nbsp;messages&nbsp;that&nbsp;were&nbsp;&lt;br&gt;unacked&nbsp;while&nbsp;mq01&nbsp;gone&nbsp;down&nbsp;are&nbsp;still&nbsp;unacked&nbsp;and&nbsp;there&nbsp;is&nbsp;some&nbsp;not&nbsp;&lt;br&gt;existing&nbsp;connection&nbsp;open&nbsp;in&nbsp;the&nbsp;connections&nbsp;view&nbsp;on&nbsp;rabbitmq.&nbsp;This&nbsp;is&nbsp;&lt;br&gt;true&nbsp;for&nbsp;both,&nbsp;the&nbsp;web&nbsp;interface&nbsp;and&nbsp;for&nbsp;rabbitmqctl.&nbsp;Even&nbsp;if&nbsp;I&nbsp;shutdown&nbsp;&lt;br&gt;all&nbsp;consumers&nbsp;and&nbsp;producers&nbsp;this&nbsp;connection&nbsp;exists,&nbsp;so&nbsp;it's&nbsp;not&nbsp;related&nbsp;&lt;br&gt;to&nbsp;any&nbsp;real&nbsp;TCP&nbsp;connection.&lt;/p&gt;&lt;p&gt;I&nbsp;think&nbsp;that&nbsp;rabbitmq&nbsp;is&nbsp;not&nbsp;designed&nbsp;for&nbsp;this&nbsp;kind&nbsp;of&nbsp;scenario,&nbsp;but&nbsp;&lt;br&gt;maybe&nbsp;you&nbsp;can&nbsp;tell&nbsp;me&nbsp;more&nbsp;about&nbsp;what&nbsp;rabbitmq&nbsp;does.&nbsp;&amp;nbsp;Maybe&nbsp;we&nbsp;found&nbsp;&lt;br&gt;some&nbsp;bug,&nbsp;I&nbsp;don't&nbsp;know.&lt;/p&gt;&lt;p&gt;What&nbsp;we&nbsp;are&nbsp;now&nbsp;planning&nbsp;is&nbsp;a&nbsp;simple&nbsp;setup&nbsp;with&nbsp;only&nbsp;one&nbsp;ha-ip&nbsp;that&nbsp;&lt;br&gt;moves&nbsp;from&nbsp;host&nbsp;to&nbsp;host&nbsp;only&nbsp;in&nbsp;failover&nbsp;so&nbsp;that&nbsp;-&nbsp;in&nbsp;theory&nbsp;-&nbsp;&lt;br&gt;everything&nbsp;should&nbsp;work&nbsp;properly&nbsp;again.&nbsp;&amp;nbsp;But&nbsp;we&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;then&nbsp;&lt;br&gt;again&nbsp;we&nbsp;have&nbsp;the&nbsp;problem&nbsp;that&nbsp;unacked&nbsp;messages&nbsp;stay&nbsp;unacked.&lt;/p&gt;&lt;p&gt;Hopefully&nbsp;I&nbsp;described&nbsp;this&nbsp;stuff&nbsp;clear&nbsp;enough&nbsp;:)&lt;/p&gt;&lt;p&gt;&lt;br&gt;Thanks!&lt;/p&gt;&lt;p&gt;Cheers,&lt;br&gt;Christopher.&lt;/p&gt;&lt;p&gt;--&nbsp;&lt;br&gt;Christopher&nbsp;Grebs&lt;br&gt;Data&nbsp;Processing&nbsp;Developer&lt;/p&gt;&lt;p&gt;Tel&nbsp;+49-30-611035-1664&lt;br&gt;Fax&nbsp;-49-30-611035-2652&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:christopher.grebs@native-instruments.de&quot;&nbsp;target=&quot;_blank&quot;&gt;christopher.grebs@native-&lt;wbr&gt;instruments.de&lt;/a&gt;&lt;/p&gt;&lt;p&gt;NATIVE&nbsp;INSTRUMENTS&nbsp;GmbH&lt;br&gt;Schlesische&nbsp;Strasse&nbsp;29-30&lt;br&gt;10997&nbsp;Berlin,&nbsp;Germany&lt;/p&gt;&lt;p&gt;&lt;a&nbsp;href=&quot;http://www.native-instruments.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.native-instruments.&lt;wbr&gt;com&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;***&lt;/p&gt;&lt;p&gt;KOMPLETE&nbsp;8&nbsp;ULTIMATE&nbsp;-&nbsp;the&nbsp;premium&nbsp;NI&nbsp;producer&nbsp;collection&lt;br&gt;=&amp;gt;&nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://www.native-instruments.com/komplete8&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.native-instruments.&lt;wbr&gt;com/komplete8&lt;/a&gt;&lt;/p&gt;&lt;p&gt;TRAKTOR&nbsp;KONTROL&nbsp;S2&nbsp;-&nbsp;the&nbsp;professional&nbsp;2.1&nbsp;DJ&nbsp;system&lt;br&gt;=&amp;gt;&nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://www.native-instruments.com/s2&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.native-instruments.&lt;wbr&gt;com/s2&lt;/a&gt;&lt;/p&gt;&lt;p&gt;-&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&nbsp;&amp;nbsp;NATIVE&nbsp;INSTRUMENTS&nbsp;-&nbsp;The&nbsp;Future&nbsp;of&nbsp;Sound&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;-&lt;/p&gt;&lt;p&gt;Registergericht:&nbsp;Amtsgericht&nbsp;Charlottenburg&lt;br&gt;Registernummer:&nbsp;HRB&nbsp;72458&lt;br&gt;UST.-ID.-Nr.&nbsp;DE&nbsp;20&nbsp;374&nbsp;7747&lt;/p&gt;&lt;p&gt;Geschäftsführung:&nbsp;Daniel&nbsp;Haver&nbsp;(CEO),&nbsp;Mate&nbsp;Galic&lt;/p&gt;&lt;p&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;wbr&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;wbr&gt;cgi-bin/mailman/listinfo/&lt;wbr&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;/blockquote&gt;
</tt>
