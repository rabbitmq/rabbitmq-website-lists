<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;05/25/2011&nbsp;03:01&nbsp;PM,&nbsp;Aaron&nbsp;Westendorf&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:BANLkTikiUH740bEt1Bt8=_PbXh=T9NvGUw@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;What&nbsp;is&nbsp;the&nbsp;expected&nbsp;behavior&nbsp;of&nbsp;Rabbit&nbsp;when&nbsp;Erlang&nbsp;runs&nbsp;out&nbsp;of<br>
processes?&nbsp;We&nbsp;had&nbsp;an&nbsp;event&nbsp;over&nbsp;the&nbsp;past&nbsp;weekend&nbsp;that&nbsp;went&nbsp;something<br>
like&nbsp;this:<br>
<br>
&nbsp;&nbsp;=ERROR&nbsp;REPORT====&nbsp;22-May-2011::17:35:58&nbsp;===<br>
&nbsp;&nbsp;Too&nbsp;many&nbsp;processes&lt;font&nbsp;face=&quot;Ubuntu&quot;&gt;<br>
&lt;/font&gt;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Ubuntu&quot;&gt;Regards,&nbsp;Aaron,&nbsp;Can&nbsp;you&nbsp;provide&nbsp;your<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;environment's&nbsp;details?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Operating&nbsp;System&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Erlang&nbsp;version&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;RabbitMQ&nbsp;version&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Second&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;Can&nbsp;you&nbsp;provide&nbsp;minor&nbsp;details&nbsp;which&nbsp;are&nbsp;the&nbsp;basic&nbsp;workflows&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;RabbitMQ'use&nbsp;on&nbsp;Agora?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Can&nbsp;you&nbsp;check&nbsp;with&nbsp;erlang:system_info(process_limit)&nbsp;which&nbsp;is&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process&nbsp;limit&nbsp;in&nbsp;your&nbsp;O.S?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Regards&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:BANLkTikiUH740bEt1Bt8=_PbXh=T9NvGUw@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
This&nbsp;continued&nbsp;for&nbsp;many&nbsp;hours.&nbsp;Rabbit&nbsp;is&nbsp;configured&nbsp;with&nbsp;1048576&nbsp;procs<br>
and&nbsp;with&nbsp;mid-day&nbsp;load&nbsp;is&nbsp;reporting&nbsp;595400&nbsp;in&nbsp;use.&nbsp;At&nbsp;the&nbsp;time&nbsp;of&nbsp;this<br>
event,&nbsp;our&nbsp;databases&nbsp;were&nbsp;beginning&nbsp;a&nbsp;prolonged&nbsp;period&nbsp;of&nbsp;fail,&nbsp;and<br>
messages&nbsp;were&nbsp;starting&nbsp;to&nbsp;pile&nbsp;up.&nbsp;I&nbsp;don't&nbsp;have&nbsp;numbers&nbsp;for&nbsp;count&nbsp;of<br>
pending&nbsp;messages&nbsp;at&nbsp;the&nbsp;time&nbsp;of&nbsp;this&nbsp;first&nbsp;log&nbsp;report,&nbsp;but&nbsp;when&nbsp;it<br>
outright&nbsp;crashed&nbsp;2.5&nbsp;hours&nbsp;later,&nbsp;the&nbsp;backlog&nbsp;had&nbsp;spiked&nbsp;to&nbsp;more&nbsp;than<br>
2&nbsp;million&nbsp;and&nbsp;was&nbsp;declining&nbsp;after&nbsp;we&nbsp;fixed&nbsp;the&nbsp;databases&nbsp;and&nbsp;messages<br>
were&nbsp;finally&nbsp;draining.<br>
<br>
I&nbsp;have&nbsp;mountains&nbsp;of&nbsp;application&nbsp;and&nbsp;SASL&nbsp;logs&nbsp;and&nbsp;have&nbsp;already&nbsp;poured<br>
through&nbsp;them&nbsp;to&nbsp;highlight&nbsp;notable&nbsp;sections.&nbsp;I'll&nbsp;gladly&nbsp;provide&nbsp;any<br>
data&nbsp;to&nbsp;help&nbsp;diagnose&nbsp;the&nbsp;crash.&nbsp;The&nbsp;final&nbsp;seconds,&nbsp;triggered&nbsp;by&nbsp;a<br>
rabbitmqctl&nbsp;call&nbsp;to&nbsp;list&nbsp;queues,&nbsp;resulted&nbsp;in&nbsp;rex&nbsp;dying&nbsp;and&nbsp;mnesia<br>
exiting.<br>
<br>
-Aaron<br>
<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Marcos&nbsp;Luis&nbsp;Ortiz&nbsp;Valmaseda<br>
&nbsp;Software&nbsp;Engineer&nbsp;(Distributed&nbsp;Systems)<br>
&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://uncubanitolinuxero.blogspot.com&quot;&gt;http://uncubanitolinuxero.blogspot.com&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
