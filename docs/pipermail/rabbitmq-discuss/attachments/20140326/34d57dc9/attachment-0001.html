<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hey&nbsp;Nikolay,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Where&nbsp;I&nbsp;work&nbsp;we've&nbsp;opted&nbsp;to&nbsp;put&nbsp;a&nbsp;RabbitMQ&nbsp;broker&nbsp;on&nbsp;each&nbsp;physical&nbsp;machine&nbsp;in&nbsp;our&nbsp;live&nbsp;environment.&lt;/div&gt;&lt;div&gt;These&nbsp;brokers&nbsp;have&nbsp;a&nbsp;single&nbsp;exchange&nbsp;and&nbsp;queue&nbsp;both&nbsp;called&nbsp;&quot;local.outgoing&quot;&nbsp;(i.e.&nbsp;there's&nbsp;a&nbsp;single&nbsp;message&nbsp;stream)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;then&nbsp;a&nbsp;central&nbsp;RabbitMQ&nbsp;broker&nbsp;with&nbsp;shovels&nbsp;configured&nbsp;to&nbsp;fetch&nbsp;messages&nbsp;from&nbsp;each&nbsp;machine.&lt;/div&gt;&lt;div&gt;The&nbsp;central&nbsp;RabbitMQ&nbsp;broker&nbsp;is&nbsp;where&nbsp;all&nbsp;the&nbsp;routing&nbsp;to&nbsp;queues&nbsp;takes&nbsp;place.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;means&nbsp;that:&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;It's&nbsp;unlikely&nbsp;that&nbsp;the&nbsp;local&nbsp;RabbitMQ&nbsp;broker&nbsp;instance&nbsp;is&nbsp;unreachable&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;Messages&nbsp;are&nbsp;queued&nbsp;at&nbsp;the&nbsp;local&nbsp;RabbitMQ&nbsp;broker&nbsp;if&nbsp;there&nbsp;are&nbsp;network&nbsp;problems&nbsp;until&nbsp;they're&nbsp;resolved&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;Apps&nbsp;don't&nbsp;have&nbsp;to&nbsp;maintain&nbsp;state&nbsp;(unless&nbsp;they&nbsp;need&nbsp;to&nbsp;for&nbsp;another&nbsp;reason)&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;Apps&nbsp;are&nbsp;dumb,&nbsp;they&nbsp;just&nbsp;raise&nbsp;events&nbsp;(messages)&nbsp;but&nbsp;don't&nbsp;know&nbsp;who&nbsp;cares&nbsp;and&nbsp;who&nbsp;they&nbsp;should&nbsp;send&nbsp;messages&nbsp;to,&nbsp;it's&nbsp;one&nbsp;big&nbsp;stream&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;line-height:&nbsp;normal;&quot;&gt;We&nbsp;can&nbsp;upgrade,&nbsp;restart,&nbsp;re-configure&nbsp;the&nbsp;central&nbsp;RabbitMQ&nbsp;broker&nbsp;as&nbsp;required&nbsp;without&nbsp;down-time&nbsp;or&nbsp;message&nbsp;loss&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;This&nbsp;is&nbsp;just&nbsp;a&nbsp;case&nbsp;study&nbsp;;-)&nbsp;it&nbsp;may&nbsp;not&nbsp;match&nbsp;you're&nbsp;requirements&lt;/div&gt;&lt;div&gt;Mat&nbsp;B&lt;/div&gt;&lt;br&gt;On&nbsp;Saturday,&nbsp;15&nbsp;March&nbsp;2014&nbsp;16:18:49&nbsp;UTC,&nbsp;Nikolay&nbsp;Maximov&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;share&nbsp;you&nbsp;experience&nbsp;in&nbsp;architecture&nbsp;setup.&nbsp;Current&nbsp;application&nbsp;setup&nbsp;built&nbsp;as&nbsp;local&nbsp;SQL&nbsp;database&nbsp;filled&nbsp;in&nbsp;realtime&nbsp;with&nbsp;rate&nbsp;as&nbsp;fast&nbsp;as&nbsp;1&nbsp;transaction&nbsp;per&nbsp;10&nbsp;seconds.&nbsp;There&nbsp;are&nbsp;a&nbsp;few&nbsp;tables&nbsp;to&nbsp;replicate&nbsp;-&nbsp;one&nbsp;from&nbsp;point&nbsp;of&nbsp;sale&nbsp;transaction&nbsp;and&nbsp;another&nbsp;with&nbsp;image.&nbsp;This&nbsp;is&nbsp;2-tier&nbsp;scheme&nbsp;with&nbsp;collecting&nbsp;data&nbsp;from&nbsp;15-40&nbsp;nodes&nbsp;(points&nbsp;of&nbsp;sale).&nbsp;Data&nbsp;then&nbsp;replicated&nbsp;to&nbsp;2nd&nbsp;level&nbsp;with&nbsp;SymmetricDS&nbsp;software.&nbsp;We&nbsp;want&nbsp;to&nbsp;move&nbsp;to&nbsp;MQ&nbsp;architecture&nbsp;and&nbsp;I&nbsp;want&nbsp;to&nbsp;ask&nbsp;wether&nbsp;this&nbsp;is&nbsp;good&nbsp;solution?&nbsp;I&nbsp;found&nbsp;no&nbsp;information&nbsp;on&nbsp;how&nbsp;to&nbsp;protect&nbsp;RabbitMQ&nbsp;from&nbsp;node&nbsp;failures&nbsp;or&nbsp;network&nbsp;down&nbsp;problems.&nbsp;Current&nbsp;solution&nbsp;store&nbsp;data&nbsp;in&nbsp;node's&nbsp;MySQL&nbsp;database&nbsp;until&nbsp;network&nbsp;is&nbsp;up&nbsp;and&nbsp;them&nbsp;SymmetricDS&nbsp;detects&nbsp;difference&nbsp;to&nbsp;be&nbsp;sent&nbsp;to&nbsp;upper&nbsp;layer.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;help&nbsp;is&nbsp;appreciated.&nbsp;Thank&nbsp;you&nbsp;in&nbsp;advance.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
