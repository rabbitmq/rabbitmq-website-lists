<tt>
Hi&nbsp;All,&lt;br&gt;&lt;br&gt;Our&nbsp;website&nbsp;have&nbsp;daily&nbsp;active&nbsp;users&nbsp;around&nbsp;50,000&nbsp;and&nbsp;we&nbsp;want&nbsp;use&nbsp;rabbitmq&nbsp;as&nbsp;message&nbsp;broker&nbsp;for&nbsp;&amp;quot;~real&nbsp;time&nbsp;web&nbsp;notifications&amp;quot;&nbsp;for&nbsp;lot&nbsp;of&nbsp;events&nbsp;generated&nbsp;by&nbsp;users.&lt;br&gt;Need&nbsp;some&nbsp;help&nbsp;in&nbsp;designing&nbsp;for&nbsp;our&nbsp;use&nbsp;case.&nbsp;our&nbsp;requirements&nbsp;are&nbsp;as&nbsp;follows,&lt;br&gt;<br>
&lt;br&gt;1.&nbsp;Users&nbsp;are&nbsp;part&nbsp;of&nbsp;different&nbsp;communities,&nbsp;a&nbsp;user&nbsp;can&nbsp;be&nbsp;part&nbsp;of&nbsp;multiple&nbsp;communities.&lt;br&gt;2.&nbsp;when&nbsp;a&nbsp;user&nbsp;uploads&nbsp;a&nbsp;Image,&nbsp;all&nbsp;the&nbsp;users&nbsp;in&nbsp;that&nbsp;community&nbsp;need&nbsp;to&nbsp;be&nbsp;notified&nbsp;like&nbsp;on&nbsp;facebook.&lt;br&gt;3.&nbsp;users&nbsp;can&nbsp;form&nbsp;groups&nbsp;inside&nbsp;each&nbsp;community.&nbsp;the&nbsp;targeted&nbsp;group&nbsp;alone&nbsp;need&nbsp;to&nbsp;be&nbsp;notified&nbsp;based&nbsp;on&nbsp;scenario.&lt;br&gt;<br>
&lt;br&gt;here,&nbsp;user&nbsp;uploading&nbsp;an&nbsp;image&nbsp;is&nbsp;just&nbsp;one&nbsp;of&nbsp;the&nbsp;scenarios&nbsp;we&nbsp;have.&lt;br&gt;right&nbsp;now&nbsp;we&nbsp;have&nbsp;designed&nbsp;the&nbsp;following&nbsp;way,&lt;br&gt;&lt;br&gt;Producer&nbsp;-&nbsp;&lt;br&gt;     &nbsp;Exchange&nbsp;name&nbsp;-&nbsp;&amp;quot;web&nbsp;notifications&amp;quot;&lt;br&gt;     &nbsp;Exchange&nbsp;Type&nbsp;-&nbsp;&amp;quot;direct&amp;quot;&lt;br&gt;<br>
     &nbsp;Routing&nbsp;key&nbsp;-&nbsp;&amp;quot;gallery&amp;quot;&lt;br&gt;     &nbsp;message&nbsp;body&nbsp;-&nbsp;{&nbsp;producer_user_Id:&nbsp;123,&nbsp;target_user_Ids:&nbsp;[23,&nbsp;45,&nbsp;56],&nbsp;type:&nbsp;&amp;quot;image_upload&amp;quot;&nbsp;}&lt;br&gt;Consumer&nbsp;-&nbsp;&lt;br&gt;     &nbsp;Exchange&nbsp;name&nbsp;-&nbsp;&amp;quot;web&nbsp;notifications&amp;quot;&lt;br&gt;<br>
     &nbsp;Exchange&nbsp;type&nbsp;-&nbsp;&amp;quot;direct&amp;quot;&lt;br&gt;     &nbsp;Routing&nbsp;key&nbsp;-&nbsp;&amp;quot;gallery&amp;quot;&lt;br&gt;     &nbsp;queue&nbsp;name&nbsp;-&nbsp;no&nbsp;name&nbsp;given&nbsp;-&nbsp;auto&nbsp;generated&lt;br&gt;we&nbsp;are&nbsp;consuming&nbsp;the&nbsp;messages&nbsp;and&nbsp;processing&nbsp;them&nbsp;based&nbsp;on&nbsp;type&nbsp;in&nbsp;message&nbsp;body&nbsp;and&nbsp;storing&nbsp;it&nbsp;in&nbsp;redis&nbsp;for&nbsp;each&nbsp;user&nbsp;in&nbsp;target_user_Ids,&lt;br&gt;<br>
so&nbsp;regardless&nbsp;of&nbsp;user&nbsp;being&nbsp;online&nbsp;or&nbsp;offline&nbsp;we&nbsp;are&nbsp;persisting&nbsp;notifications&nbsp;and&nbsp;delivering&nbsp;them&nbsp;once&nbsp;user&nbsp;logs&nbsp;in.&lt;br&gt;we&nbsp;are&nbsp;not&nbsp;sure&nbsp;if&nbsp;the&nbsp;current&nbsp;design&nbsp;is&nbsp;proper&nbsp;since&nbsp;all&nbsp;messages&nbsp;from&nbsp;50k&nbsp;users&nbsp;are&nbsp;routed&nbsp;to&nbsp;only&nbsp;few&nbsp;queues(&nbsp;&amp;lt;&nbsp;10&nbsp;)&nbsp;and&nbsp;few&nbsp;worker-consumers.&lt;br&gt;<br>
we&nbsp;also&nbsp;need&nbsp;to&nbsp;notify&nbsp;the&nbsp;users&nbsp;via&nbsp;e-mail&nbsp;about&nbsp;the&nbsp;events.&lt;br&gt;What&nbsp;is&nbsp;a&nbsp;good&nbsp;design&nbsp;pattern&nbsp;for&nbsp;our&nbsp;use&nbsp;case&nbsp;-&nbsp;like&nbsp;number&nbsp;of&nbsp;queues?,&nbsp;exchange&nbsp;type?,&nbsp;number&nbsp;of&nbsp;exchanges(&nbsp;web,&nbsp;e-mail&nbsp;)&nbsp;??&lt;br&gt;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;anyone&nbsp;need&nbsp;more&nbsp;information.&lt;br&gt;<br>
&lt;br&gt;Thank&nbsp;you,&lt;br&gt;Bhaskar&nbsp;teja&lt;br&gt;&lt;br&gt;<br>

</tt>
