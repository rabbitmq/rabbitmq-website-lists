<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Dec&nbsp;19,&nbsp;2008&nbsp;at&nbsp;8:11&nbsp;AM,&nbsp;Ben&nbsp;Hood&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&amp;gt;&nbsp;2)&nbsp;What&nbsp;would&nbsp;be&nbsp;the&nbsp;right&nbsp;way&nbsp;of&nbsp;upgrading&nbsp;rabbitmq&nbsp;on&nbsp;a&nbsp;running&nbsp;server&lt;br&gt;<br>
&amp;gt;&nbsp;without&nbsp;shutting&nbsp;it&nbsp;down?&nbsp;(I&nbsp;know&nbsp;erlang&nbsp;supports&nbsp;this&nbsp;feature&nbsp;but&nbsp;I&nbsp;failed&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;find&nbsp;something&nbsp;about&nbsp;it&nbsp;in&nbsp;the&nbsp;documentation).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;This&nbsp;is&nbsp;supported&nbsp;in&nbsp;Erlang&nbsp;and&nbsp;I&nbsp;use&nbsp;it&nbsp;a&nbsp;lot&nbsp;myself&nbsp;when&nbsp;hacking&nbsp;on&lt;br&gt;<br>
Rabbit&nbsp;but&nbsp;we&nbsp;are&nbsp;not&nbsp;yet&nbsp;making&nbsp;use&nbsp;of&nbsp;it&nbsp;from&nbsp;a&nbsp;release&nbsp;perspective.&lt;br&gt;<br>
One&nbsp;of&nbsp;the&nbsp;issues&nbsp;that&nbsp;you&nbsp;would&nbsp;run&nbsp;into&nbsp;(which&nbsp;is&nbsp;not&nbsp;necessarily&lt;br&gt;<br>
Erlang&nbsp;specific)&nbsp;is&nbsp;dealing&nbsp;with&nbsp;schema&nbsp;upgrades&nbsp;in&nbsp;mnesia,&nbsp;i.e.&nbsp;you&lt;br&gt;<br>
would&nbsp;have&nbsp;to&nbsp;migrate&nbsp;the&nbsp;database&nbsp;(which&nbsp;changed&nbsp;considerably&nbsp;between&lt;br&gt;<br>
1.4&nbsp;and&nbsp;1.5).&nbsp;I&nbsp;should&nbsp;imagine&nbsp;that&nbsp;as&nbsp;Rabbit&nbsp;matures&nbsp;more,&nbsp;we&nbsp;could&lt;br&gt;<br>
make&nbsp;more&nbsp;use&nbsp;of&nbsp;this&nbsp;feature.&lt;br&gt;<br>
&lt;br&gt;<br>
Having&nbsp;said&nbsp;that,&nbsp;I&nbsp;know&nbsp;that&nbsp;Edwin&nbsp;is&nbsp;using&nbsp;OTP&nbsp;release&nbsp;handling&nbsp;with&lt;br&gt;<br>
Rabbit,&nbsp;whereas&nbsp;the&nbsp;official&nbsp;Rabbit&nbsp;release&nbsp;management&nbsp;is&nbsp;more&nbsp;OS&lt;br&gt;<br>
package&nbsp;manager&nbsp;centric,&nbsp;so&nbsp;he&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;comment&nbsp;on&nbsp;this.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;So,&nbsp;what&nbsp;would&nbsp;be&nbsp;my&nbsp;course&nbsp;of&nbsp;upgrade&nbsp;in&nbsp;a&nbsp;running&nbsp;server?&nbsp;Stop&nbsp;rabbit,&nbsp;upgrade&nbsp;and&nbsp;start&nbsp;it&nbsp;again&nbsp;and&nbsp;it&nbsp;should&nbsp;upgrade&nbsp;the&nbsp;mnesia-db?&lt;br&gt;<br>
&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://hopper.squarespace.com/blog/2008/11/9/flow-control-in-rabbitmq.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://hopper.squarespace.com/blog/2008/11/9/flow-control-in-rabbitmq.html&lt;/a&gt;&amp;nbsp;&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;quot;From&nbsp;a&nbsp;protocol&nbsp;perspective,&nbsp;when&nbsp;the&nbsp;broker&nbsp;decides&nbsp;that&nbsp;it&nbsp;is&lt;br&gt;<br>
running&nbsp;out&nbsp;of&nbsp;resources&nbsp;to&nbsp;buffer&nbsp;an&nbsp;imbalance,&nbsp;it&nbsp;sends&nbsp;a&lt;br&gt;<br>
channel.flow&nbsp;command&nbsp;out&nbsp;to&nbsp;every&nbsp;channel.&nbsp;This&nbsp;command&nbsp;contains&nbsp;a&lt;br&gt;<br>
flag&nbsp;to&nbsp;indicate&nbsp;to&nbsp;a&nbsp;client&nbsp;whether&nbsp;content&nbsp;bearing&nbsp;AMQP&nbsp;methods&nbsp;can&lt;br&gt;<br>
be&nbsp;sent&nbsp;or&nbsp;not.&nbsp;So&nbsp;if&nbsp;a&nbsp;client&nbsp;receives&nbsp;this&nbsp;command&nbsp;with&nbsp;the&nbsp;flag&nbsp;set&lt;br&gt;<br>
to&nbsp;false,&nbsp;then&nbsp;the&nbsp;client&nbsp;should&nbsp;suspend&nbsp;sending&nbsp;any&nbsp;further&nbsp;content&lt;br&gt;<br>
bearing&nbsp;methods&nbsp;(e.g.&nbsp;basic.publish),&nbsp;until&nbsp;such&nbsp;a&nbsp;time&nbsp;that&nbsp;the&lt;br&gt;<br>
broker&nbsp;notifies&nbsp;the&nbsp;client&nbsp;that&nbsp;it&nbsp;is&nbsp;safe&nbsp;to&nbsp;resume.&nbsp;The&nbsp;notification&lt;br&gt;<br>
of&nbsp;resumption&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;pause&nbsp;-&nbsp;the&nbsp;broker&nbsp;sends&nbsp;a&lt;br&gt;<br>
channel.flow&nbsp;command&nbsp;with&nbsp;the&nbsp;flag&nbsp;set&nbsp;to&nbsp;true.&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;info&nbsp;and&nbsp;the&nbsp;link.&nbsp;I&amp;#39;ll&nbsp;read&nbsp;more&nbsp;about&nbsp;it.&lt;br&gt;&lt;br&gt;Eran&nbsp;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
