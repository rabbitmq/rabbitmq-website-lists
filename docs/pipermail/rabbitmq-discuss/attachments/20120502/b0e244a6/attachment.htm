<tt>
Hi&nbsp;Everyone,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;playing&nbsp;around&nbsp;with&nbsp;Rabbitmq(sorry&nbsp;for&nbsp;flooding&nbsp;the&nbsp;list&nbsp;lately)&nbsp;and&nbsp;am&nbsp;having&nbsp;some&nbsp;weird&nbsp;problems&nbsp;in&nbsp;my&nbsp;tests.&nbsp; I&nbsp;have&nbsp;a&nbsp;multi-threaded&nbsp;application&nbsp;that&nbsp;I&nbsp;was&nbsp;considering&nbsp;using&nbsp;rabbitmq&nbsp;to&nbsp;manage&nbsp;the&nbsp;queue&nbsp;but&nbsp;I&amp;#39;m&nbsp;getting&nbsp;alot&nbsp;of&nbsp;blocking&nbsp;between&nbsp;my&nbsp;channels.&nbsp; Is&nbsp;there&nbsp;a preferred way&nbsp;to&nbsp;setup&nbsp;pools?<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;a&nbsp;bit&nbsp;new&nbsp;to&nbsp;Java&nbsp;so&nbsp;I&nbsp;used&nbsp;to&nbsp;the&nbsp;pools&nbsp;from&nbsp;apache&nbsp;commons&nbsp;but&nbsp;when&nbsp;I&nbsp;profile&nbsp;the&nbsp;channels&nbsp;are&nbsp;all&nbsp;blocking&nbsp;each&nbsp;other.&nbsp; To&nbsp;test&nbsp;if&nbsp;dedicated&nbsp;connections&nbsp;per&nbsp;thread&nbsp;worked&nbsp;better&nbsp;I&nbsp;made&nbsp;an&nbsp;example&nbsp;of&nbsp;it&nbsp;as&nbsp;well&nbsp;and&nbsp;it&nbsp;does&nbsp;not&nbsp;block&nbsp;when&nbsp;the&nbsp;same&nbsp;program&nbsp;has&nbsp;a&nbsp;single&nbsp;channel&nbsp;per&nbsp;connection.&nbsp; &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;my&nbsp;question,&nbsp;do&nbsp;channels&nbsp;block&nbsp;each&nbsp;other&nbsp;or&nbsp;am&nbsp;I&nbsp;doing&nbsp;something&nbsp;wrong(using&nbsp;java&nbsp;api&nbsp;wrong&nbsp;or&nbsp;misunderstanding&nbsp;connection/channels)?&nbsp; Is&nbsp;there&nbsp;a&nbsp;more preferred way?&nbsp;Unrelated&nbsp;to&nbsp;the&nbsp;question,&nbsp;but&nbsp;I&nbsp;was&nbsp;also&nbsp;wondering&nbsp;is&nbsp;there&nbsp;any&nbsp;difference&nbsp;between&nbsp;channels&nbsp;and&nbsp;connections&nbsp;in&nbsp;terms&nbsp;of&nbsp;throughput(i.e.&nbsp;would&nbsp;there&nbsp;be&nbsp;any benefit of&nbsp;using&nbsp;dedicated&nbsp;connections&nbsp;ignoring&nbsp;the&nbsp;overhead&nbsp;in establishing/maintaining&nbsp;the&nbsp;connection)?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&amp;#39;s&nbsp;the&nbsp;test&nbsp;code(it&nbsp;simply&nbsp;sends&nbsp;to&nbsp;a&nbsp;thread&nbsp;a&nbsp;bunch&nbsp;of&nbsp;data&nbsp;to&nbsp;write&nbsp;the&nbsp;queue).&nbsp;If&nbsp;it&nbsp;helps&nbsp;I&amp;#39;m&nbsp;using&nbsp;v2.7.1,&nbsp;installed&nbsp;from&nbsp;MacPorts):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;import&nbsp;org.apache.commons.pool.BasePoolableObjectFactory;&lt;/div&gt;<br>
&lt;div&gt;import&nbsp;org.apache.commons.pool.ObjectPool;&lt;/div&gt;&lt;div&gt;import&nbsp;org.apache.commons.pool.PoolableObjectFactory;&lt;/div&gt;&lt;div&gt;import&nbsp;org.apache.commons.pool.impl.GenericObjectPool;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;import&nbsp;java.io.IOException;&lt;/div&gt;<br>
&lt;div&gt;import&nbsp;java.util.NoSuchElementException;&lt;/div&gt;&lt;div&gt;import&nbsp;java.util.Set;&lt;/div&gt;&lt;div&gt;import&nbsp;java.util.concurrent.ExecutorService;&lt;/div&gt;&lt;div&gt;import&nbsp;java.util.concurrent.Executors;&lt;/div&gt;&lt;div&gt;import&nbsp;java.util.concurrent.LinkedBlockingDeque;&lt;/div&gt;<br>
&lt;div&gt;import&nbsp;java.util.concurrent.ThreadPoolExecutor;&lt;/div&gt;&lt;div&gt;import&nbsp;java.util.concurrent.TimeUnit;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;import&nbsp;com.rabbitmq.client.ConnectionFactory;&lt;/div&gt;&lt;div&gt;import&nbsp;com.rabbitmq.client.Connection;&lt;/div&gt;<br>
&lt;div&gt;import&nbsp;com.rabbitmq.client.Channel;&lt;/div&gt;&lt;div&gt;import&nbsp;com.rabbitmq.client.MessageProperties;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;public&nbsp;class&nbsp;PoolExample&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp;  &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;private&nbsp;static&nbsp;ExecutorService&nbsp;executor_worker;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;static&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;final&nbsp;int&nbsp;numberOfThreads_ThreadPoolExecutor&nbsp;=&nbsp;20;&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;executor_worker&nbsp;=&nbsp;Executors.newFixedThreadPool(numberOfThreads_ThreadPoolExecutor);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;System.out.println(&amp;quot;starting..&amp;quot;);&nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;ObjectPool&amp;lt;Channel&amp;gt;&nbsp;pool&nbsp;=&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;new&nbsp;GenericObjectPool&amp;lt;Channel&amp;gt;(&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;new&nbsp;ConnectionPoolableObjectFactory(),&nbsp;50);&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;for&nbsp;(int&nbsp;x&nbsp;=&nbsp;0;&nbsp;x&amp;lt;500000000;&nbsp;x++)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;executor_worker.submit(new&nbsp;MyRunnable(x,&nbsp;pool));&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;/*&lt;/div&gt;&lt;div&gt; //this&nbsp;is&nbsp;a&nbsp;version&nbsp;that&nbsp;creates&nbsp;its&nbsp;own&nbsp;connection&nbsp;per&nbsp;channel&lt;/div&gt;&lt;div&gt; class&nbsp;ConnectionPoolableObjectFactory&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;extends&nbsp;BasePoolableObjectFactory&amp;lt;Channel&amp;gt;&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;private&nbsp;static&nbsp;final&nbsp;ConnectionFactory&nbsp;factory&nbsp;=&nbsp;newConnectionFactory();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;private&nbsp;static&nbsp;ConnectionFactory&nbsp;newConnectionFactory()&nbsp;{&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;ConnectionFactory&nbsp;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;factory.setHost(&amp;quot;localhost&amp;quot;);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;factory;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;@Override&lt;/div&gt;&lt;div&gt;<br>
 &nbsp; &nbsp;public&nbsp;Channel&nbsp;makeObject()&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(&amp;quot;new&nbsp;channel&amp;quot;);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;return&nbsp;factory.newConnection().createChannel();&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;@Override&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;public&nbsp;boolean&nbsp;validateObject(Channel&nbsp;channel)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;channel.isOpen();&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;@Override&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;public&nbsp;void&nbsp;destroyObject(Channel&nbsp;channel)&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;System.out.println(&amp;quot;closing&amp;quot;);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;channel.close();&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;@Override&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;public&nbsp;void&nbsp;passivateObject(Channel&nbsp;channel)&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;//System.out.println(&amp;quot;sent&nbsp;back&nbsp;to&nbsp;queue&amp;quot;);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;<br>
&lt;div&gt;}&lt;/div&gt;&lt;div&gt;*/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//this&nbsp;version&nbsp;pools&nbsp;channels &lt;/div&gt;&lt;div&gt;class&nbsp;ConnectionPoolableObjectFactory&nbsp;extends&nbsp;BasePoolableObjectFactory&amp;lt;Channel&amp;gt;&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;private&nbsp;final&nbsp;Connection&nbsp;connection;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;ConnectionPoolableObjectFactory()&nbsp;throws&nbsp;IOException&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;ConnectionFactory&nbsp;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;factory.setHost(&amp;quot;localhost&amp;quot;);&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;connection&nbsp;=&nbsp;factory.newConnection();&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;@Override&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;public&nbsp;Channel&nbsp;makeObject()&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;return&nbsp;connection.createChannel();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;@Override&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;public&nbsp;boolean&nbsp;validateObject(Channel&nbsp;channel)&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;return&nbsp;channel.isOpen();&lt;/div&gt;&lt;div&gt;<br>
&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;@Override&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;public&nbsp;void&nbsp;destroyObject(Channel&nbsp;channel)&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;channel.close();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;@Override&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;public&nbsp;void&nbsp;passivateObject(Channel&nbsp;channel)&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;//do&nbsp;nothing&lt;/div&gt;&lt;div&gt;<br>
&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;class&nbsp;MyRunnable&nbsp;implements&nbsp;Runnable{&nbsp; &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;protected&nbsp;int&nbsp;x&nbsp;=&nbsp;0;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;protected&nbsp;ObjectPool&amp;lt;Channel&amp;gt;&nbsp;pool;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;public&nbsp;MyRunnable(int&nbsp;x,&nbsp;ObjectPool&amp;lt;Channel&amp;gt;&nbsp;pool)&nbsp;{&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;//&nbsp;TODO&nbsp;Auto-generated&nbsp;constructor&nbsp;stub&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;this.x&nbsp;=&nbsp;x;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;this.pool&nbsp;=&nbsp;pool;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;public&nbsp;void&nbsp;run(){&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;try&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Channel&nbsp;channel&nbsp;=&nbsp;pool.borrowObject();&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;String&nbsp;message&nbsp;=&nbsp;Integer.toString(x);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;channel.basicPublish(&nbsp;&amp;quot;&amp;quot;,&nbsp;&amp;quot;task_queue&amp;quot;, &lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MessageProperties.PERSISTENT_TEXT_PLAIN,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;message.getBytes());&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;pool.returnObject(channel);&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&nbsp;catch&nbsp;(NoSuchElementException&nbsp;e)&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;//&nbsp;TODO&nbsp;Auto-generated&nbsp;catch&nbsp;block&lt;/div&gt;&lt;div&gt;<br>
&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;e.printStackTrace();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&nbsp;catch&nbsp;(IllegalStateException&nbsp;e)&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;//&nbsp;TODO&nbsp;Auto-generated&nbsp;catch&nbsp;block&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;e.printStackTrace();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;//&nbsp;TODO&nbsp;Auto-generated&nbsp;catch&nbsp;block&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;e.printStackTrace();&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;} &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
