<tt>
Hi&nbsp;James,&lt;br&gt;&lt;br&gt;Both&nbsp;the&nbsp;queue&nbsp;and&nbsp;every&nbsp;single&nbsp;message&nbsp;should&nbsp;be&nbsp;durable&nbsp;if&nbsp;you&nbsp;want&nbsp;RabbitMQ&nbsp;to&nbsp;persist&nbsp;messages&nbsp;for&nbsp;you.&nbsp;For&nbsp;a&nbsp;queue,&nbsp;declare&nbsp;it&nbsp;as&nbsp;durable.&nbsp;For&nbsp;a&nbsp;message,&nbsp;set&nbsp;the&nbsp;&quot;deliveryMode&quot;&nbsp;to&nbsp;2&nbsp;(persistent),&nbsp;default&nbsp;is&nbsp;1&nbsp;(non-persistent),&nbsp;when&nbsp;publish&nbsp;it.&lt;br&gt;&lt;br&gt;On&nbsp;Tuesday,&nbsp;April&nbsp;3,&nbsp;2012&nbsp;7:01:32&nbsp;AM&nbsp;UTC+8,&nbsp;iceblaze&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;Hello,&nbsp;&lt;br&gt;&lt;br&gt;I&nbsp;seem&nbsp;to&nbsp;be&nbsp;having&nbsp;problems&nbsp;with&nbsp;persistence&nbsp;using&nbsp;RabbitMQ,&nbsp;and&nbsp;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;someone&nbsp;would&nbsp;help&nbsp;point&nbsp;out&nbsp;what&nbsp;I'm&nbsp;missing?&lt;br&gt;&lt;br&gt;For&nbsp;example,&nbsp;&lt;a&nbsp;href=&quot;http://pastebin.com/PRRHx5hF&quot;&nbsp;target=&quot;_blank&quot;&gt;http://pastebin.com/PRRHx5hF&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;I&nbsp;run&nbsp;the&nbsp;&quot;send&quot;&nbsp;function&nbsp;20&nbsp;times&nbsp;to&nbsp;fill&nbsp;the&nbsp;queue&nbsp;with&nbsp;20&nbsp;messages,&nbsp;then&nbsp;I&nbsp;run&nbsp;rabbitmqadmin&nbsp;list&nbsp;queues,&nbsp;and&nbsp;after&nbsp;/etc/init.d/rabbitmq-server&nbsp;restart.&nbsp;Finally.&nbsp;I&nbsp;run&nbsp;rabbitmqadmin&nbsp;list&nbsp;queues&nbsp;again&nbsp;and&nbsp;as&nbsp;you&nbsp;can&nbsp;see&nbsp;the&nbsp;queue&nbsp;and&nbsp;exchange&nbsp;persist,&nbsp;but&nbsp;the&nbsp;messages&nbsp;are&nbsp;lost.&nbsp;&lt;br&gt;<br>
&lt;br&gt;I&nbsp;can&nbsp;provide&nbsp;any&nbsp;other&nbsp;information&nbsp;if&nbsp;necessary.&lt;br&gt;&lt;br&gt;Thanks!!&lt;br&gt;&lt;br&gt;-James&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&quot;Of&nbsp;course,&nbsp;the&nbsp;actual&nbsp;government&nbsp;of&nbsp;any&nbsp;computer&nbsp;is&nbsp;run&nbsp;by&nbsp;that&nbsp;fascist&nbsp;dictator&nbsp;known&nbsp;as&nbsp;the&nbsp;operating&nbsp;system.&nbsp;But&nbsp;a&nbsp;wise&nbsp;dictator&nbsp;knows&nbsp;when&nbsp;to&nbsp;let&nbsp;the&nbsp;people&nbsp;think&nbsp;they're&nbsp;capitalists--and&nbsp;when&nbsp;to&nbsp;let&nbsp;them&nbsp;think&nbsp;they're&nbsp;communists.&quot;&nbsp;-&nbsp;Programming&nbsp;Perl&nbsp;third&nbsp;edition&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;
</tt>
