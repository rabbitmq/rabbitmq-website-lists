<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;So&nbsp;is&nbsp;there&nbsp;a&nbsp;way&nbsp;I&nbsp;can&nbsp;test&nbsp;from&nbsp;erl?&lt;br&gt;&lt;/div&gt;like&nbsp;eldap:open,&nbsp;eldap:start_tls,&nbsp;eldap:simple_bind&lt;br&gt;&lt;/div&gt;Tutorial&nbsp;is&nbsp;less&nbsp;on&nbsp;this&nbsp;on&nbsp;google:)&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
2014-07-01&nbsp;17:47&nbsp;GMT+08:00&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;01/07/14&nbsp;09:36,&nbsp;Joey&nbsp;Jiao&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Looks&nbsp;like&nbsp;I&#39;m&nbsp;hitting&nbsp;this&nbsp;as&nbsp;I&nbsp;cannot&nbsp;connect&nbsp;to&nbsp;port&nbsp;636.&nbsp;But&nbsp;does&lt;br&gt;<br>
eldap&nbsp;support&nbsp;StartTLS&nbsp;now?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Looks&nbsp;like&nbsp;it&nbsp;does&nbsp;now:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.erlang.org/doc/man/eldap.html#start_tls-2&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.erlang.org/doc/man/&lt;u&gt;&lt;/u&gt;eldap.html#start_tls-2&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&#39;ll&nbsp;file&nbsp;a&nbsp;bug&nbsp;for&nbsp;StartTLS&nbsp;support.&nbsp;But&nbsp;for&nbsp;the&nbsp;time&nbsp;being&nbsp;your&nbsp;only&nbsp;option&nbsp;is&nbsp;to&nbsp;use&nbsp;SSL&nbsp;on&nbsp;port&nbsp;636.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
From:&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;simon@...&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://gmane.org/get-address.php?address=simon%2dmQ7lE4MOPXtWk0Htik3J%2fw%40public.gmane.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://gmane.org/get-address.&lt;u&gt;&lt;/u&gt;php?address=simon%&lt;u&gt;&lt;/u&gt;2dmQ7lE4MOPXtWk0Htik3J%2fw%&lt;u&gt;&lt;/u&gt;40public.gmane.org&lt;/a&gt;&gt;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
<br>
&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;Configuring&nbsp;Auth&nbsp;LDAP&nbsp;Backend&nbsp;using&nbsp;LDAP+SSL/TLS&lt;br&gt;&lt;/div&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://news.gmane.org/find-root.php?message_id=5268EBB6.4010504%40rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://news.gmane.org/find-&lt;u&gt;&lt;/u&gt;root.php?message_id=5268EBB6.&lt;u&gt;&lt;/u&gt;4010504%40rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;<br>
Newsgroups:&nbsp;gmane.comp.networking.&lt;u&gt;&lt;/u&gt;rabbitmq.general&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://news.gmane.org/gmane.comp.networking.rabbitmq.general&quot;&nbsp;target=&quot;_blank&quot;&gt;http://news.gmane.org/gmane.&lt;u&gt;&lt;/u&gt;comp.networking.rabbitmq.&lt;u&gt;&lt;/u&gt;general&lt;/a&gt;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
Date:&nbsp;2013-10-24&nbsp;09:43:18&nbsp;GMT&nbsp;(35&nbsp;weeks,&nbsp;4&nbsp;days,&nbsp;22&nbsp;hours&nbsp;and&nbsp;49&nbsp;minutes&lt;br&gt;<br>
ago)&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Currently&nbsp;you&nbsp;can&#39;t&nbsp;set&nbsp;SSL&nbsp;options&nbsp;for*LDAP*&nbsp; connections,&nbsp;you&nbsp;can&nbsp;only&lt;br&gt;<br>
set&nbsp;{*use_ssl*,&nbsp;true}&nbsp;to&nbsp;make&nbsp;a&nbsp;connection&nbsp;without&nbsp;presenting&nbsp;a&nbsp;client&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
certificate.&nbsp;I&nbsp;guess&nbsp;this&nbsp;should&nbsp;be&nbsp;fixed.&lt;br&gt;<br>
&lt;br&gt;<br>
Also&nbsp;you&nbsp;have&nbsp;{port,&nbsp;389}&nbsp;which&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;work&nbsp;as&nbsp;it&#39;s&nbsp;the&nbsp;non-SSL&lt;br&gt;&lt;/div&gt;<br>
port&nbsp;and&nbsp;I&#39;m&nbsp;not&nbsp;at&nbsp;all&nbsp;convinced&nbsp;e*ldap*&nbsp; (the&nbsp;underlying&nbsp;Erlang*LDAP*&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
library)&nbsp;supports&nbsp;StartTLS.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;the&nbsp;only&nbsp;configuration&nbsp;that&nbsp;could&nbsp;work&nbsp;at&nbsp;the&nbsp;moment&nbsp;is&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
{*use_ssl*,&nbsp;true},&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
{port,&nbsp; &nbsp; 636}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
2014-07-01&nbsp;16:16&nbsp;GMT+08:00&nbsp;Joey&nbsp;Jiao&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:joey.jiaojg@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joey.jiaojg@gmail.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;mailto:&lt;a&nbsp;href=&quot;mailto:joey.jiaojg@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joey.jiaojg@gmail.com&lt;/a&gt;&gt;&lt;u&gt;&lt;/u&gt;&gt;:&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Here&nbsp;is&nbsp;my&nbsp;config&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;[&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; {rabbit,&nbsp;[&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {log_levels,&nbsp;[{default,&nbsp;info}]},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {reverse_dns_lookups,&nbsp;true},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {auth_backends,&nbsp;[rabbit_auth_backend_ldap]},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {ssl_listeners,&nbsp;[5671]}&lt;br&gt;<br>
 &nbsp; &nbsp;%&nbsp; &nbsp; {ssl_options,&nbsp;[&lt;br&gt;<br>
 &nbsp; &nbsp;%&nbsp; &nbsp; &nbsp; {verify,&nbsp;verify_none},&lt;br&gt;<br>
 &nbsp; &nbsp;%&nbsp; &nbsp; &nbsp; {cacertfile,&nbsp;&quot;/etc/rabbitmq/qc_root_g2_&lt;u&gt;&lt;/u&gt;cert.crt&quot;},&lt;br&gt;<br>
 &nbsp; &nbsp;%&nbsp; &nbsp; &nbsp; {certfile,&nbsp;&quot;/etc/rabbitmq/ssl_v1_cert.&lt;u&gt;&lt;/u&gt;crt&quot;}&lt;br&gt;<br>
 &nbsp; &nbsp;%&nbsp; &nbsp; ]}&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; ]},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; {rabbitmq_auth_backend_ldap,&nbsp;[&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {servers,&nbsp;[&quot;ldap&quot;]},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {user_dn_pattern,&nbsp;&quot;uid=${username},ou=people,o=&lt;u&gt;&lt;/u&gt;xxx&quot;},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;%&nbsp; {dn_lookup_attribute,&nbsp;&quot;uid&quot;},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;%&nbsp; {dn_lookup_base,&nbsp;&quot;ou=people,o=xxx&quot;},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;%&nbsp; {dn_lookup_bind,&nbsp;anon},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {use_ssl,&nbsp;false},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {log,&nbsp;network},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {vhost_access_query,&nbsp;{constant,&nbsp;true}},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {resource_access_query,&nbsp;{constant,&nbsp;true}},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; {tag_queries,&nbsp;[{administrator,&nbsp;{constant,&nbsp;true}},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{management,&nbsp;{constant,&nbsp;true}}]}&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; ]}&lt;br&gt;<br>
 &nbsp; &nbsp;].&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;2014-07-01&nbsp;13:20&nbsp;GMT+08:00&nbsp;Joey&nbsp;Jiao&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:joey.jiaojg@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joey.jiaojg@gmail.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
 &nbsp; &nbsp;&lt;mailto:&lt;a&nbsp;href=&quot;mailto:joey.jiaojg@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;joey.jiaojg@gmail.com&lt;/a&gt;&gt;&lt;u&gt;&lt;/u&gt;&gt;:&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Hi,&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;I&#39;m&nbsp;still&nbsp;on&nbsp;using&nbsp;rabbitmq_auth_backends_ldap&nbsp;plugin&nbsp;but&nbsp;login&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;still&nbsp;failed.&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;After&nbsp;a&nbsp;track,&nbsp;it&nbsp;failed&nbsp;during&nbsp;eldap:simple_bind.&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;But&nbsp;it&nbsp;failed&nbsp;at&nbsp;simple_bind&nbsp;with&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;eldap:simple_bind(L,&quot;uid=&lt;u&gt;&lt;/u&gt;jiangenj,ou=people,o=xxx&quot;,&quot;&lt;u&gt;&lt;/u&gt;password&quot;)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;with&nbsp;error&nbsp;{error,&lt;u&gt;&lt;/u&gt;confidentialityRequired}.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;My&nbsp;django&nbsp;app&nbsp;uses&nbsp;settings&nbsp;below&nbsp;and&nbsp;it&nbsp;worked.&nbsp;How&nbsp;can&nbsp;I&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;convert&nbsp;to&nbsp;rabbitmq&nbsp;way?&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;import&nbsp;ldap&lt;br&gt;&lt;/div&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;*AUTH_LDAP_START_TLS&nbsp;=&nbsp;True&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;AUTH_LDAP_GLOBAL_OPTIONS&nbsp;=&nbsp;{&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ldap.OPT_X_TLS_REQUIRE_CERT:&nbsp;ldap.OPT_X_TLS_NEVER&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;}*&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;*AUTH_LDAP_BIND_DN&nbsp;=&nbsp;&#39;&#39;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;AUTH_LDAP_BIND_PASSWORD&nbsp;=&nbsp;&#39;&#39;*&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;*AUTH_LDAP_BIND_AS_&lt;u&gt;&lt;/u&gt;AUTHENTICATING_USER&nbsp;=&nbsp;True*&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;AUTH_LDAP_SERVER_URI&nbsp;=&nbsp;&#39;ldap://ldap&#39;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;AUTH_LDAP_USER_DN_TEMPLATE&nbsp;=&nbsp;&#39;uid=%(user)s,ou=people,o=xxx&#39;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;--&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;-Joey&nbsp;Jiao&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;--&lt;br&gt;<br>
 &nbsp; &nbsp;-Joey&nbsp;Jiao&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
-Joey&nbsp;Jiao&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&nbsp;has&nbsp;moved&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/forum/#!forum/rabbitmq-users&quot;&nbsp;target=&quot;_blank&quot;&gt;https://groups.google.com/&lt;u&gt;&lt;/u&gt;forum/#!forum/rabbitmq-users&lt;/a&gt;,&lt;br&gt;<br>
please&nbsp;subscribe&nbsp;to&nbsp;the&nbsp;new&nbsp;list!&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;u&gt;&lt;/u&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;u&gt;&lt;/u&gt;cgi-bin/mailman/listinfo/&lt;u&gt;&lt;/u&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;-Joey&nbsp;Jiao<br>
&lt;/div&gt;<br>

</tt>
