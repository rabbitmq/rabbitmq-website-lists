<tt>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;style=&quot;color:&nbsp;#A0A0A8;&quot;&gt;On&nbsp;Wednesday,&nbsp;September&nbsp;7,&nbsp;2011&nbsp;at&nbsp;7:21&nbsp;AM,&nbsp;Ann&nbsp;Witbrock&nbsp;(c)&nbsp;wrote:&lt;/p&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Times&nbsp;New&nbsp;Roman;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;#000000&quot;&gt;&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;div&nbsp;style=&quot;FONT-STYLE:&nbsp;normal;&nbsp;FONT-FAMILY:&nbsp;Helvetica,Arial,sans-serif;&nbsp;COLOR:&nbsp;#000;&nbsp;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-WEIGHT:&nbsp;normal;&nbsp;TEXT-DECORATION:&nbsp;none&quot;&gt;&lt;b&gt;From:&nbsp;&lt;/b&gt;&quot;Sergey&nbsp;Almazov&quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:sergey.almazoff@gmail.com&quot;&gt;sergey.almazoff@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;&lt;b&gt;To:&nbsp;&lt;/b&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;b&gt;Sent:&nbsp;&lt;/b&gt;Wednesday,&nbsp;7&nbsp;September,&nbsp;2011&nbsp;6:39:59&nbsp;AM&lt;br&gt;&lt;b&gt;Subject:&nbsp;&lt;/b&gt;[rabbitmq-discuss]&nbsp;pika&nbsp;error&nbsp;-&nbsp;need&nbsp;a&nbsp;help&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;font-style:&nbsp;normal;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-weight:&nbsp;normal;&nbsp;text-decoration:&nbsp;none;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;When&nbsp;I&nbsp;start&nbsp;this&nbsp;code&nbsp;-&amp;gt;&nbsp;have&nbsp;an&nbsp;error:&amp;nbsp;&lt;b&gt;error:&nbsp;uncaptured&nbsp;python&nbsp;exception,&nbsp;closing&nbsp;channel&nbsp;&amp;lt;pika.asyncore_adapter.RabbitDispatcher&nbsp;connected&nbsp;at&nbsp;0x12ad6c0&amp;gt;&lt;/b&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;So&nbsp;one&nbsp;of&nbsp;the&nbsp;difficulties&nbsp;with&nbsp;async&nbsp;programming&nbsp;in&nbsp;python&nbsp;is&nbsp;catching&nbsp;exceptions,&nbsp;add&nbsp;in&nbsp;some&nbsp;interesting&nbsp;aspects&nbsp;of&nbsp;AMQP&nbsp;and&nbsp;knowing&nbsp;what&nbsp;has&nbsp;happened&nbsp;where&nbsp;can&nbsp;be&nbsp;difficult.&nbsp;If&nbsp;you&nbsp;could&nbsp;provide&nbsp;a&nbsp;traceback&nbsp;beyond&nbsp;the&nbsp;exception&nbsp;it&nbsp;would&nbsp;be&nbsp;helpful.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;may&nbsp;be&nbsp;getting&nbsp;a&nbsp;remote&nbsp;close&nbsp;from&nbsp;RabbitMQ.&nbsp;You&nbsp;can&nbsp;check&nbsp;your&nbsp;rabbitmq&nbsp;logs&nbsp;to&nbsp;see&nbsp;and&nbsp;you&nbsp;can&nbsp;handle&nbsp;it&nbsp;in&nbsp;your&nbsp;code.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;suggest&nbsp;adding&nbsp;an&nbsp;on&nbsp;channel&nbsp;close&nbsp;callback&nbsp;(this&nbsp;is&nbsp;rough&nbsp;untested&nbsp;code):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;from&nbsp;pika&nbsp;import&nbsp;spec&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;def&nbsp;my_callback_function(&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;frame):&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&nbsp;&nbsp;print&nbsp;frame.method.reply_code&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&nbsp;&nbsp;print&nbsp;frame.method.reply_text&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;callback_manager&nbsp;=&nbsp;connection.callbacks.add(channel.channel_number,&amp;nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;spec&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;o&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;font-weight:&nbsp;bold;&nbsp;&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Channel&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;o&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;font-weight:&nbsp;bold;&nbsp;&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Close&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;p&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;,&nbsp;my_callback_function)&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;Courier,&nbsp;monospace;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;p&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;Courier,&nbsp;monospace;&nbsp;font-size:&nbsp;12px;&nbsp;line-height:&nbsp;16px;&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;p&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt>
