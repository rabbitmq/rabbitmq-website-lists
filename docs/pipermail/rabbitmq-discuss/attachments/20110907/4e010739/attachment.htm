<tt>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;style=&quot;color:&nbsp;#A0A0A8;&quot;&gt;On&nbsp;Wednesday,&nbsp;September&nbsp;7,&nbsp;2011&nbsp;at&nbsp;2:45&nbsp;PM,&nbsp;Christopher&nbsp;Lefevre&nbsp;wrote:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;&lt;div&gt;&lt;div&gt;<br>
<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
<br>
<br>
<br>
&lt;div&nbsp;class=&quot;WordSection1&quot;&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:11.0pt;&nbsp;font-family:&amp;quot;Calibri&amp;quot;,&amp;quot;sans-serif&amp;quot;;&nbsp;color:#1F497D&quot;&gt;Only&nbsp;using&nbsp;one&nbsp;connection&nbsp;is&nbsp;the&nbsp;point&nbsp;of&nbsp;this&nbsp;modification.&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;Oh&nbsp;that's&nbsp;easy&nbsp;then.&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;WordSection1&quot;&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;font-size:11.0pt;&nbsp;font-family:&amp;quot;Calibri&amp;quot;,&amp;quot;sans-serif&amp;quot;;&nbsp;color:#1F497D&quot;&gt;I&nbsp;already&nbsp;have&nbsp;a&nbsp;setup&nbsp;that&nbsp;does&nbsp;an&nbsp;asynchronous&nbsp;call&nbsp;that&nbsp;instantiates&nbsp;a&nbsp;Pika&nbsp;Publisher&nbsp;to&nbsp;publish&nbsp;a&nbsp;message&nbsp;to&nbsp;the&nbsp;queue,&nbsp;and&nbsp;a&nbsp;Pika&nbsp;Monitor&nbsp;to&nbsp;consume&nbsp;messages.&nbsp;However&nbsp;those&nbsp;each&nbsp;create&nbsp;their&nbsp;own&nbsp;connection&nbsp;and&nbsp;ioloops.&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;No&nbsp;need&nbsp;for&nbsp;that.&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(31,&nbsp;73,&nbsp;125);&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;font-size:&nbsp;15px;&nbsp;&quot;&gt;Am&nbsp;I&nbsp;chasing&nbsp;my&nbsp;tail&nbsp;trying&nbsp;to&nbsp;get&nbsp;multiple&nbsp;channels&nbsp;created&nbsp;for&nbsp;a&nbsp;single&nbsp;connection?&nbsp;Then&nbsp;creating&nbsp;a&nbsp;queue&nbsp;on&nbsp;each&nbsp;channel,&nbsp;one&nbsp;to&nbsp;monitor,&nbsp;one&nbsp;to&nbsp;publish<br>
&nbsp;to?&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;You&nbsp;don't&nbsp;need&nbsp;a&nbsp;channel&nbsp;per&nbsp;queue&nbsp;really,&nbsp;but&nbsp;it&nbsp;should&nbsp;be&nbsp;easy&nbsp;to&nbsp;create&nbsp;--&nbsp;this&nbsp;is&nbsp;more&nbsp;pseudocode,&nbsp;but&nbsp;should&nbsp;get&nbsp;the&nbsp;spirit&nbsp;across:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;conn&nbsp;=&nbsp;FooConnection(on_connection_open)&lt;/div&gt;&lt;div&gt;&lt;div&gt;conn.ioloop.start()&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;on_connection_open(conn):&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;conn.channel(on_channel_one_open)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;conn.channel(on_channel_two_open)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;on_channel_one_open(channel):&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;global&nbsp;channel_one&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;channel_one&nbsp;=&nbsp;channel&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;channel_one.create_queue(on_monitor_queue_created)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;on_monitor_queue_created(frame)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;channel_one.basic_consume('routing_key',&nbsp;monitor_consumer_function)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;on_channel_two_open(channel):&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;global&nbsp;channel_two&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;channel_two&nbsp;=&nbsp;channel&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;for&nbsp;x&nbsp;in&nbsp;xrange(0,&nbsp;10000):&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;publish_consumer_function(x)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt>
