<tt>
&lt;html&gt;&lt;head&gt;&lt;style&gt;body{font-family:Helvetica,Arial;font-size:13px}&lt;/style&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;Hi&nbsp;all,&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;I&nbsp;ran&nbsp;into&nbsp;a&nbsp;small&nbsp;bug&nbsp;in&nbsp;pamqp&nbsp;where&nbsp;it&nbsp;tries&nbsp;to&nbsp;determine&nbsp;the&nbsp;best&nbsp;data&nbsp;type&nbsp;for&nbsp;an&nbsp;AMQP&nbsp;field&nbsp;table&nbsp;when&nbsp;packing&nbsp;data.&nbsp;I&nbsp;found&nbsp;that&nbsp;when&nbsp;I&nbsp;allow&nbsp;it&nbsp;to&nbsp;use&nbsp;a&nbsp;short&nbsp;int&nbsp;value,&nbsp;RabbitMQ&nbsp;can&nbsp;not&nbsp;properly&nbsp;decode&nbsp;it.&nbsp;I&nbsp;just&nbsp;went&nbsp;back&nbsp;and&nbsp;looked&nbsp;at&nbsp;the&nbsp;AMQP&nbsp;errata&nbsp;for&nbsp;field&nbsp;types&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/amqp-0-9-1-errata.html#section_3&quot;&gt;http://www.rabbitmq.com/amqp-0-9-1-errata.html#section_3&lt;/a&gt;.&nbsp;Seems&nbsp;my&nbsp;mistake&nbsp;was&nbsp;using&nbsp;the&nbsp;AMQP-0-9-1&nbsp;standard&nbsp;for&nbsp;field&nbsp;types&nbsp;with&nbsp;regard&nbsp;to&nbsp;short&nbsp;integers.&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;According&nbsp;to&nbsp;that&nbsp;table&nbsp;for&nbsp;0-9-1,&nbsp;&lt;i&gt;U&lt;/i&gt;&nbsp;should&nbsp;indicate&nbsp;a&nbsp;signed&nbsp;16-bit&nbsp;integer&nbsp;value&nbsp;and&nbsp;&lt;i&gt;s&lt;/i&gt;&nbsp;should&nbsp;indicate&nbsp;a&nbsp;short&nbsp;string.&nbsp;These&nbsp;are&nbsp;the&nbsp;values&nbsp;I&nbsp;used,&nbsp;however&nbsp;RabbitMQ&nbsp;chokes&nbsp;on&nbsp;the&nbsp;&lt;i&gt;U&lt;/i&gt;.&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;In&nbsp;looking&nbsp;at&nbsp;the&nbsp;code&nbsp;for&nbsp;the&nbsp;encoder&nbsp;and&nbsp;decoder&nbsp;in&nbsp;Rabbit,&nbsp;I&nbsp;see&nbsp;that&nbsp;&lt;i&gt;s&lt;/i&gt;&nbsp;is&nbsp;used&nbsp;for&nbsp;short&nbsp;ints.&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;a&nbsp;href=&quot;https://github.com/rabbitmq/rabbitmq-server/blob/master/src/rabbit_binary_generator.erl#L133&quot;&gt;https://github.com/rabbitmq/rabbitmq-server/blob/master/src/rabbit_binary_generator.erl#L133&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;a&nbsp;href=&quot;https://github.com/rabbitmq/rabbitmq-server/blob/master/src/rabbit_binary_parser.erl#L78&quot;&gt;https://github.com/rabbitmq/rabbitmq-server/blob/master/src/rabbit_binary_parser.erl#L78&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;And&nbsp;that&nbsp;the&nbsp;AMQP-0-9-1&nbsp;specified&nbsp;&lt;i&gt;U&lt;/i&gt;&nbsp;is&nbsp;not&nbsp;supported&nbsp;at&nbsp;all.&nbsp;Additionally,&nbsp;the&nbsp;0-9-1&nbsp;&lt;i&gt;s&lt;/i&gt;&nbsp;is&nbsp;only&nbsp;used&nbsp;for&nbsp;short&nbsp;ints.&nbsp;This&nbsp;is&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;remarks.&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;Will&nbsp;RabbitMQ&nbsp;be&nbsp;staying&nbsp;with&nbsp;the&nbsp;misuse&nbsp;of&nbsp;&lt;i&gt;s&lt;/i&gt;&nbsp;for&nbsp;shorts&nbsp;for&nbsp;the&nbsp;foreseeable&nbsp;future?&nbsp;Is&nbsp;there&nbsp;any&nbsp;intention&nbsp;or&nbsp;desire&nbsp;to&nbsp;add&nbsp;the&nbsp;specified&nbsp;&lt;i&gt;U&lt;/i&gt;&nbsp;into&nbsp;the&nbsp;decoder&nbsp;and&nbsp;never&nbsp;support&nbsp;&lt;i&gt;s&lt;/i&gt;&nbsp;for&nbsp;anything&nbsp;but&nbsp;short-int&nbsp;instead&nbsp;of&nbsp;short-string?&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;Regards,&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;Gavin&lt;/div&gt;&lt;div&nbsp;id=&quot;bloop_sign_1389919133155708928&quot;&nbsp;class=&quot;bloop_sign&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
