<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;guys,&lt;br&gt;&lt;br&gt;after&nbsp;complaining&nbsp;about&nbsp;RabbitMQ&nbsp;HA&nbsp;mode&nbsp;in&nbsp;twitter[1],&nbsp;I&nbsp;got&nbsp;a&nbsp;response&nbsp;by&nbsp;√Ålvaro&nbsp;(@old_sound)[2]&nbsp;stating&nbsp;that&nbsp;I&nbsp;should&nbsp;post&nbsp;my&nbsp;problem&nbsp;here.&nbsp;Fair&nbsp;enough,&nbsp;here&nbsp;are&nbsp;my&nbsp;details:&lt;br&gt;&lt;br&gt;Architecture:&nbsp;simple&nbsp;RabbitMQ&nbsp;2.8.x&nbsp;cluster&nbsp;with&nbsp;two&nbsp;machines.&nbsp;&lt;br&gt;Usage:&nbsp;really&nbsp;simple&nbsp;pub-sub&nbsp;on&nbsp;a&nbsp;topic.&nbsp;Nothing&nbsp;fancy.&nbsp;Queues&nbsp;on&nbsp;'all'&nbsp;mirroring.&lt;br&gt;Library:&nbsp;node-amqp&nbsp;for&nbsp;Node.js&nbsp;[3],&nbsp;v0.1.7,&nbsp;as&nbsp;published&nbsp;on&nbsp;npm,&nbsp;not&nbsp;on&nbsp;github)&lt;br&gt;&lt;br&gt;The&nbsp;symptons&nbsp;are:&lt;br&gt;&lt;br&gt;1)&nbsp;We&nbsp;connect&nbsp;to&nbsp;several&nbsp;logical&nbsp;brokers&nbsp;from&nbsp;each&nbsp;of&nbsp;our&nbsp;nodes.&nbsp;This&nbsp;means&nbsp;that&nbsp;we&nbsp;are&nbsp;connected&nbsp;to&nbsp;the&nbsp;master&nbsp;and&nbsp;slaves&nbsp;of&nbsp;each&nbsp;queue.&lt;br&gt;2)&nbsp;When&nbsp;the&nbsp;master&nbsp;fails,&nbsp;RabbitMQ&nbsp;selects&nbsp;the&nbsp;eldest&nbsp;slave&nbsp;and&nbsp;promotes&nbsp;to&nbsp;be&nbsp;the&nbsp;master.&lt;br&gt;3)&nbsp;&quot;The&nbsp;slave&nbsp;considers&nbsp;all&nbsp;previous&nbsp;consumers&nbsp;to&nbsp;have&nbsp;been&nbsp;abruptly&nbsp;disconnected.&quot;[4]&nbsp;So&nbsp;we&nbsp;end&nbsp;up&nbsp;with&nbsp;the&nbsp;connections&nbsp;NOT&nbsp;being&nbsp;closed&nbsp;but&nbsp;not&nbsp;binded&nbsp;to&nbsp;any&nbsp;queue,&nbsp;and&nbsp;no&nbsp;information&nbsp;from&nbsp;RabbitMQ&nbsp;to&nbsp;the&nbsp;&quot;slave&quot;&nbsp;consumers.&nbsp;This&nbsp;means&nbsp;that&nbsp;we&nbsp;have&nbsp;the&nbsp;connection,&nbsp;we&nbsp;do&nbsp;not&nbsp;have&nbsp;any&nbsp;error&nbsp;message,&nbsp;but&nbsp;we&nbsp;stop&nbsp;receiving&nbsp;any&nbsp;further&nbsp;messages.&lt;div&gt;&lt;br&gt;I&nbsp;have&nbsp;read&nbsp;the&nbsp;documentation&nbsp;and&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;the&nbsp;expected&nbsp;behaviour,&nbsp;but&nbsp;I'm&nbsp;more&nbsp;than&nbsp;open&nbsp;to&nbsp;improve&nbsp;our&nbsp;code&nbsp;to&nbsp;solve&nbsp;this&nbsp;problems.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;&lt;br&gt;Guillermo&lt;br&gt;&lt;br&gt;&lt;br&gt;[1]&nbsp;https://twitter.com/willyaranda/status/375343649896538112&lt;br&gt;[2]&amp;nbsp;https://twitter.com/old_sound/status/375353677319376896&lt;br&gt;[3]&nbsp;https://github.com/postwait/node-amqp&lt;br&gt;&lt;/div&gt;&lt;div&gt;[4]&amp;nbsp;http://www.rabbitmq.com/ha.html&lt;/div&gt;&lt;/div&gt;
</tt>
