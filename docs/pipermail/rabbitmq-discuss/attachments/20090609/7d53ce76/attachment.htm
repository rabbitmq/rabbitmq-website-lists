<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Jun&nbsp;9,&nbsp;2009&nbsp;at&nbsp;1:09&nbsp;AM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@lshift.net&quot;&gt;matthias@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
Please&nbsp;take&nbsp;this&nbsp;in&nbsp;context&nbsp;in&nbsp;that&nbsp;I&nbsp;am&nbsp;migrating&nbsp;a&nbsp;large&nbsp;scale&nbsp;ActiveMQ&nbsp;install&nbsp;using&nbsp;STOMP&nbsp;to&nbsp;RabbitMQ&nbsp;and&nbsp;am&nbsp;looking&nbsp;to&nbsp;mirror&nbsp;default&nbsp;behaviors.&nbsp; That&nbsp;being&nbsp;said,&nbsp;I&amp;#39;ve&nbsp;changing&nbsp;the&nbsp;default&nbsp;behaviors&nbsp;in&nbsp;the&nbsp;stomp&nbsp;connector&nbsp;when&nbsp;I&nbsp;download&nbsp;it&nbsp;so&nbsp;that&nbsp;I&nbsp;get&nbsp;the&nbsp;behaviors&nbsp;I&nbsp;need&nbsp;by&nbsp;default.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
The&nbsp;default&nbsp;behaviour&nbsp;of&nbsp;the&nbsp;current&nbsp;implementation&nbsp;of&nbsp;the&nbsp;RabbitMQ&lt;br&gt;<br>
STOMP&nbsp;adapter&lt;br&gt;<br>
&lt;br&gt;<br>
1)&nbsp;routes&nbsp;messages&nbsp;to&nbsp;one&nbsp;consumer&nbsp;(round-robin)&nbsp;-&nbsp;this&nbsp;can&nbsp;be&nbsp;changed&lt;br&gt;<br>
to&nbsp;&amp;#39;all&amp;#39;&nbsp;by&nbsp;specifying&nbsp;appropriate&nbsp;&amp;#39;exchange&amp;#39;&nbsp;and&nbsp;&amp;#39;routing_key&amp;#39;&nbsp;headers&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;+1 This is good. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
2)&nbsp;does&nbsp;not&nbsp;queue&nbsp;messages&nbsp;when&nbsp;there&nbsp;are&nbsp;no&nbsp;subscribers&nbsp;-&nbsp;this&nbsp;can&nbsp;be&lt;br&gt;<br>
changed&nbsp;by&nbsp;specifying&nbsp;an&nbsp;&amp;#39;auto-delete&nbsp;=&nbsp;false&amp;#39;&nbsp;header&nbsp;(though&nbsp;that&nbsp;does&lt;br&gt;<br>
require&nbsp;at&nbsp;least&nbsp;one&nbsp;SUBSCRIBE&nbsp;to&nbsp;start&nbsp;with)&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;change&nbsp;this&nbsp;auto-delete&nbsp;=&nbsp;false&nbsp;in&nbsp;the&nbsp;code&nbsp;before&nbsp;compilation&nbsp;to&nbsp;mirror&nbsp;ActiveMQ&nbsp;behavior.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; 3)&nbsp;sends&nbsp;only&nbsp;one&nbsp;copy&nbsp;of&nbsp;a&nbsp;message&nbsp;to&nbsp;a&nbsp;client&nbsp;in&nbsp;the&nbsp;event&nbsp;the&nbsp;client&lt;/div&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
has&nbsp;more&nbsp;than&nbsp;one&nbsp;subscription&nbsp;for&nbsp;the&nbsp;same&nbsp;destination&nbsp;-&nbsp;this&nbsp;can&nbsp;be&lt;br&gt;<br>
changed&nbsp;by&nbsp;specifying&nbsp; appropriate&nbsp;&amp;#39;exchange&amp;#39;&nbsp;and&nbsp;&amp;#39;routing_key&amp;#39;&nbsp;headers&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;+1&nbsp;This&nbsp;makes&nbsp;sense.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Should&nbsp;the&nbsp;default&nbsp;behaviour&nbsp;be&nbsp;different?&nbsp;And&nbsp;why?&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;only&nbsp;other&nbsp;oddity&nbsp;is&nbsp;the&nbsp;durable&nbsp;consumer.&nbsp; Coming&nbsp;from&nbsp;an&nbsp;ActiveMQ&nbsp;world,&nbsp;this&nbsp;is&nbsp;more&nbsp;of&nbsp;a&nbsp;server&nbsp;side&nbsp;setting&nbsp;than&nbsp;a&nbsp;header&nbsp;packet&nbsp;setting.&nbsp; &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;what&nbsp;it&amp;#39;s&nbsp;worth&nbsp;is&nbsp;the&nbsp;biggest&nbsp;issue&nbsp;I&nbsp;had&nbsp;to&nbsp;overcome&nbsp;(other&nbsp;than&nbsp;the&nbsp;client&nbsp;issues)&nbsp;was&nbsp;the&nbsp;concept&nbsp;that&nbsp;one&nbsp;has&nbsp;to&nbsp;subscribe&nbsp;to&nbsp;a&nbsp;queue&nbsp;in&nbsp;order&nbsp;to&nbsp;set&nbsp;the&nbsp;default&nbsp;behavior&nbsp;for&nbsp;it.&nbsp; Our&nbsp;workflow&nbsp;has&nbsp;apps&nbsp;enqueueing&nbsp;all&nbsp;over&nbsp;the&nbsp;place&nbsp;and&nbsp;a&nbsp;limited&nbsp;set&nbsp;of&nbsp;consumers&nbsp;that&nbsp;can&nbsp;be&nbsp;restarted&nbsp;or&nbsp;down&nbsp;for&nbsp;small&nbsp;periods&nbsp;of&nbsp;time.&nbsp; The&nbsp;natural&nbsp;flow&nbsp;for&nbsp;us&nbsp;is&nbsp;to&nbsp;start&nbsp;enqueueing&nbsp;then&nbsp;add&nbsp;consumers&nbsp;that&nbsp;subscribe,&nbsp;not&nbsp;the&nbsp;other&nbsp;way&nbsp;around.&nbsp; If&nbsp;the&nbsp;queue&nbsp;behavior&nbsp;can&nbsp;be&nbsp;set&nbsp;when&nbsp;messages&nbsp;are&nbsp;sent,&nbsp;it&nbsp;would&nbsp;make&nbsp;things&nbsp;easier&nbsp;to&nbsp;grok.&nbsp; Even&nbsp;more&nbsp;ideal&nbsp;would&nbsp;be&nbsp;to&nbsp;set&nbsp;defaults&nbsp;by&nbsp;exchange,&nbsp;but&nbsp;that&nbsp;probably&nbsp;is&nbsp;more&nbsp;work&nbsp;than&nbsp;is&nbsp;reasonably&nbsp;obtained,&nbsp;compared&nbsp;to&nbsp;just&nbsp;changing&nbsp;defaults.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Gavin&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;/div&gt;<br>

</tt>
