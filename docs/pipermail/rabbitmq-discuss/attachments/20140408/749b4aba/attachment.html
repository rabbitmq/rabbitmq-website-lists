<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;I&nbsp;am&nbsp;facing&nbsp;a&nbsp;performance&nbsp;bottleneck&nbsp;on&nbsp;the&nbsp;inter-node&nbsp;connection&nbsp;between&nbsp;two&nbsp;nodes&nbsp;in&nbsp;a&nbsp;cluster.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;Cluster&nbsp;configuration&nbsp;is&nbsp;as&nbsp;follow:&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;Nodes:&nbsp;2&nbsp;(node1&nbsp;and&nbsp;node2)&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;OS:&nbsp;RHEL6&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;RabbitMQ&nbsp;version:&nbsp;3.3.0&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;Erlang&nbsp;version:&nbsp;R16B03&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;rabbitmq.config:&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;[{rabbit,&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;[&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{cluster_nodes,&nbsp;{[&#39;rabbit@node1&#39;,&nbsp;&#39;rabbit@node2&#39;],&nbsp;disc}},&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{hipe_compile,&nbsp;true},&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{delegate_count,&nbsp;32},&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt; &nbsp; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{loopback_users,&nbsp;[]}&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt; &nbsp;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;]&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;}].&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;Queues&nbsp;are&nbsp;located&nbsp;on&nbsp;node1.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;When&nbsp;producing/consuming&nbsp;messages&nbsp;of&nbsp;1KB&nbsp;on&nbsp;the&nbsp;same&nbsp;node&nbsp;(node&nbsp;1),&nbsp;I&nbsp;am&nbsp;able&nbsp;to&nbsp;achieve&nbsp;up&nbsp;to&nbsp;100K&nbsp;TPS,&nbsp;even&nbsp;more.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;If&nbsp;I&nbsp;produce&nbsp;messages&nbsp;on&nbsp;node&nbsp;2,&nbsp;and&nbsp;consume&nbsp;messages&nbsp;from&nbsp;node&nbsp;1;&nbsp;I&nbsp;am&nbsp;not&nbsp;able&nbsp;to&nbsp;hit&nbsp;more&nbsp;then&nbsp;15K&nbsp;TPS.&nbsp;Knowing&nbsp;that&nbsp;the&nbsp;CPU&nbsp;load&nbsp;on&nbsp;the&nbsp;two&nbsp;nodes&nbsp;is&nbsp;very&nbsp;relaxed&nbsp;(90%&nbsp;idle),&nbsp;and&nbsp;no&nbsp;bottleneck&nbsp;on&nbsp;the&nbsp;network&nbsp;bandwidth&nbsp;between&nbsp;the&nbsp;nodes.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;The&nbsp;same,&nbsp;if&nbsp;I&nbsp;produce&nbsp;on&nbsp;node&nbsp;1,&nbsp;and&nbsp;consume&nbsp;on&nbsp;node&nbsp;2;&nbsp;I&nbsp;am&nbsp;not&nbsp;able&nbsp;to&nbsp;hit&nbsp;more&nbsp;then&nbsp;15K&nbsp;TPS&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;I&nbsp;am&nbsp;suspecting&nbsp;a&nbsp;limitation&nbsp;on&nbsp;the&nbsp;inter-node&nbsp;connection&nbsp;between&nbsp;the&nbsp;nodes.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;create&nbsp;multiple&nbsp;links&nbsp;between&nbsp;the&nbsp;nodes&nbsp;to&nbsp;scale&nbsp;up?&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;If&nbsp;not&nbsp;possible&nbsp;to&nbsp;create&nbsp;multiple&nbsp;links,&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;optimize&nbsp;the&nbsp;link&nbsp;performance?&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;Is&nbsp;there&nbsp;something&nbsp;else&nbsp;I&nbsp;can&nbsp;do&nbsp;to&nbsp;increase&nbsp;the&nbsp;performance&nbsp;between&nbsp;nodes?&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica;min-height:14.0px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;font:12.0px&nbsp;Helvetica&quot;&gt;Thanks&nbsp;for&nbsp;your&nbsp;help.&lt;/p&gt;&lt;/div&gt;<br>

</tt>
