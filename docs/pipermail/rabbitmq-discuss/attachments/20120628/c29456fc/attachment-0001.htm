<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;28&nbsp;Jun&nbsp;2012,&nbsp;at&nbsp;12:29,&nbsp;Vaidik&nbsp;Kapoor&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;p&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;1em;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font-size:&nbsp;13px;&nbsp;vertical-align:&nbsp;baseline;&nbsp;background-image:&nbsp;initial;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;clear:&nbsp;both;&nbsp;word-wrap:&nbsp;break-word;&nbsp;font-family:&nbsp;Arial,&nbsp;'Liberation&nbsp;Sans',&nbsp;'DejaVu&nbsp;Sans',&nbsp;sans-serif;&nbsp;line-height:&nbsp;16px;&nbsp;text-align:&nbsp;left;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;&lt;strong&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;vertical-align:baseline;background-image:initial;background-color:transparent;font-weight:bold&quot;&gt;The&nbsp;Problem:&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;1em;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;border-top-width:&nbsp;0px;&nbsp;border-right-width:&nbsp;0px;&nbsp;border-bottom-width:&nbsp;0px;&nbsp;border-left-width:&nbsp;0px;&nbsp;border-style:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;font-size:&nbsp;13px;&nbsp;vertical-align:&nbsp;baseline;&nbsp;background-image:&nbsp;initial;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;clear:&nbsp;both;&nbsp;word-wrap:&nbsp;break-word;&nbsp;font-family:&nbsp;Arial,&nbsp;'Liberation&nbsp;Sans',&nbsp;'DejaVu&nbsp;Sans',&nbsp;sans-serif;&nbsp;line-height:&nbsp;16px;&nbsp;text-align:&nbsp;left;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;<br>
The&nbsp;above&nbsp;stated&nbsp;solution&nbsp;(according&nbsp;to&nbsp;us)&nbsp;will&nbsp;work&nbsp;fine&nbsp;but&nbsp;the&nbsp;issue&nbsp;is&nbsp;that&nbsp;we&nbsp;don't&nbsp;want&nbsp;to&nbsp;implement&nbsp;the&nbsp;whole&nbsp;synchronization&nbsp;protocol&nbsp;by&nbsp;ourselves&nbsp;for&nbsp;the&nbsp;simple&nbsp;reason&nbsp;that&nbsp;we&nbsp;might&nbsp;be&nbsp;wrong&nbsp;here.&nbsp;We&nbsp;were&nbsp;unable&nbsp;to&nbsp;find&nbsp;this&nbsp;particular&nbsp;way&nbsp;of&nbsp;synchronization&nbsp;in&nbsp;Redis.&nbsp;So&nbsp;we&nbsp;are&nbsp;open&nbsp;to&nbsp;other&nbsp;AMQP&nbsp;based&nbsp;queues&nbsp;like&nbsp;RabbitMQ,&nbsp;ZeroMQ,&nbsp;etc.&nbsp;Again&nbsp;we&nbsp;were&nbsp;not&nbsp;able&nbsp;to&nbsp;figure&nbsp;out&nbsp;if&nbsp;we&nbsp;can&nbsp;do&nbsp;this&nbsp;with&nbsp;these&nbsp;solutions.&lt;/p&gt;&lt;/blockquote&gt;&lt;div&gt;0MQ&nbsp;is&nbsp;cool,&nbsp;but&nbsp;it&nbsp;is&nbsp;not,&nbsp;to&nbsp;the&nbsp;best&nbsp;of&nbsp;my&nbsp;knowledge,&nbsp;AMQP&nbsp;based.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&lt;ul&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:1em;margin-left:30px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;font-size:13px;vertical-align:baseline;background-image:initial;background-color:rgb(255,255,255);list-style-position:initial;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;line-height:16px;text-align:left&quot;&gt;<br>
&lt;li&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;vertical-align:baseline;background-image:initial;background-color:transparent;word-wrap:break-word&quot;&gt;<br>
Do&nbsp;these&nbsp;Message&nbsp;Queues&nbsp;or&nbsp;any&nbsp;other&nbsp;data&nbsp;store&nbsp;provide&nbsp;features&nbsp;that&nbsp;can&nbsp;be&nbsp;the&nbsp;solution&nbsp;to&nbsp;our&nbsp;problem?&nbsp;If&nbsp;yes,&nbsp;then&nbsp;how?&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;div&gt;Rabbit&nbsp;can&nbsp;do&nbsp;other&nbsp;things&nbsp;besides&nbsp;AMQP&nbsp;ACKs&nbsp;to&nbsp;help&nbsp;here.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;ul&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:1em;margin-left:30px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;font-size:13px;vertical-align:baseline;background-image:initial;background-color:rgb(255,255,255);list-style-position:initial;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;line-height:16px;text-align:left&quot;&gt;&lt;li&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;vertical-align:baseline;background-image:initial;background-color:transparent;word-wrap:break-word&quot;&gt;<br>
If&nbsp;not,&nbsp;then&nbsp;is&nbsp;our&nbsp;solution&nbsp;good&nbsp;enough?&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;div&gt;Well&nbsp;your&nbsp;solution&nbsp;sounds&nbsp;fine,&nbsp;but&nbsp;you're&nbsp;going&nbsp;to&nbsp;have&nbsp;to&nbsp;work&nbsp;around&nbsp;all&nbsp;the&nbsp;potential&nbsp;issues&nbsp;(central&nbsp;node&nbsp;is&nbsp;down,&nbsp;some&nbsp;other&nbsp;node&nbsp;is&nbsp;down,&nbsp;both&nbsp;nodes&nbsp;are&nbsp;up&nbsp;and&nbsp;communicating&nbsp;but&nbsp;the&nbsp;network&nbsp;goes&nbsp;down&nbsp;at&nbsp;some&nbsp;point,&nbsp;etc)&nbsp;by&nbsp;hand.&nbsp;I&nbsp;would&nbsp;posit&nbsp;however,&nbsp;that&nbsp;it&nbsp;takes&nbsp;a&nbsp;long&nbsp;time&nbsp;(i.e.,&nbsp;years)&nbsp;to&nbsp;gradually&nbsp;squash&nbsp;out&nbsp;all&nbsp;the&nbsp;little&nbsp;bugs&nbsp;in&nbsp;a&nbsp;complicated&nbsp;piece&nbsp;of&nbsp;high&nbsp;availability,&nbsp;distributed&nbsp;software.&amp;nbsp;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;ul&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:1em;margin-left:30px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;font-size:13px;vertical-align:baseline;background-image:initial;background-color:rgb(255,255,255);list-style-position:initial;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;line-height:16px;text-align:left&quot;&gt;&lt;li&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;vertical-align:baseline;background-image:initial;background-color:transparent;word-wrap:break-word&quot;&gt;<br>
Can&nbsp;anyone&nbsp;suggest&nbsp;a&nbsp;better&nbsp;solution?&lt;/li&gt;&lt;li&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;vertical-align:baseline;background-image:initial;background-color:transparent;word-wrap:break-word&quot;&gt;<br>
Can&nbsp;there&nbsp;be&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;do&nbsp;this?&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;div&gt;Possibly!&nbsp;:)&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;ul&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:1em;margin-left:30px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;font-size:13px;vertical-align:baseline;background-image:initial;background-color:rgb(255,255,255);list-style-position:initial;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;line-height:16px;text-align:left&quot;&gt;&lt;li&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;vertical-align:baseline;background-image:initial;background-color:transparent;word-wrap:break-word&quot;&gt;<br>
What&nbsp;would&nbsp;be&nbsp;the&nbsp;best&nbsp;way&nbsp;to&nbsp;make&nbsp;it&nbsp;fail&nbsp;safe?&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;div&gt;Well&nbsp;if&nbsp;you&nbsp;don't&nbsp;care&nbsp;about&nbsp;performance&nbsp;at&nbsp;all,&nbsp;you&nbsp;can&nbsp;just&nbsp;use&nbsp;a&nbsp;database&nbsp;and&nbsp;standard&nbsp;replication&nbsp;technology,&nbsp;but&nbsp;it's&nbsp;not&nbsp;going&nbsp;to&nbsp;scale&nbsp;(or&nbsp;perform)&nbsp;very&nbsp;nicely.&nbsp;You&nbsp;could&nbsp;also&nbsp;consider&nbsp;a&nbsp;sharded&nbsp;distributed&nbsp;file&nbsp;system,&nbsp;although&nbsp;personally&nbsp;I&nbsp;wouldn't&nbsp;want&nbsp;to&nbsp;go&nbsp;that&nbsp;way&nbsp;as&nbsp;the&nbsp;guarantees&nbsp;probably&nbsp;don't&nbsp;fit&nbsp;what&nbsp;you're&nbsp;trying&nbsp;to&nbsp;do&nbsp;very&nbsp;well.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;ul&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:1em;margin-left:30px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;font-size:13px;vertical-align:baseline;background-image:initial;background-color:rgb(255,255,255);list-style-position:initial;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;line-height:16px;text-align:left&quot;&gt;&lt;li&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;vertical-align:baseline;background-image:initial;background-color:transparent;word-wrap:break-word&quot;&gt;<br>
The&nbsp;data&nbsp;that&nbsp;we&nbsp;are&nbsp;collecting&nbsp;is&nbsp;very&nbsp;important&nbsp;to&nbsp;us&nbsp;and&nbsp;the&nbsp;order&nbsp;of&nbsp;data&nbsp;delivery&nbsp;to&nbsp;the&nbsp;central&nbsp;node&nbsp;is&nbsp;not&nbsp;an&nbsp;issue.&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;'Liberation&nbsp;Sans',&nbsp;'DejaVu&nbsp;Sans',&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;line-height:16px&quot;&gt;---&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;'Liberation&nbsp;Sans',&nbsp;'DejaVu&nbsp;Sans',&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;line-height:16px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;'Liberation&nbsp;Sans',&nbsp;'DejaVu&nbsp;Sans',&nbsp;sans-serif&quot;&nbsp;size=&quot;4&quot;&gt;&lt;span&nbsp;style=&quot;line-height:16px&quot;&gt;Response&nbsp;from&nbsp;Alexis:&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;font-size:13px;line-height:16px;background-color:rgb(255,255,255)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;font-size:13px;line-height:16px;background-color:rgb(255,255,255)&quot;&gt;You&nbsp;could&nbsp;do&nbsp;this&nbsp;with&nbsp;RabbitMQ&nbsp;by&nbsp;setting&nbsp;up&nbsp;the&nbsp;central&nbsp;node&nbsp;(or&nbsp;cluster&nbsp;of&nbsp;nodes)&nbsp;to&nbsp;be&nbsp;a&nbsp;consumer&nbsp;of&nbsp;messages&nbsp;from&nbsp;the&nbsp;other&nbsp;nodes,&nbsp;and&nbsp;using&nbsp;the&nbsp;message&nbsp;acknowledgement&nbsp;feature.&nbsp;This&nbsp;feature&nbsp;means&nbsp;that&nbsp;the&nbsp;central&nbsp;node(s)&nbsp;can&nbsp;ack&nbsp;delivery,&nbsp;so&nbsp;that&nbsp;other&nbsp;nodes&nbsp;only&nbsp;delete&nbsp;messages&nbsp;after&nbsp;the&nbsp;ack.&nbsp;See&nbsp;for&nbsp;example:&amp;nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/tutorials/tutorial-two-python.html&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;style=&quot;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-style:initial;border-color:initial;font-size:13px;vertical-align:baseline;background-image:initial;background-color:rgb(255,255,255);color:rgb(74,107,130);text-decoration:none;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;line-height:16px&quot;&gt;http://www.rabbitmq.com/tutorials/tutorial-two-python.html&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;---&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;add&nbsp;to&nbsp;that&nbsp;another&nbsp;potential&nbsp;bit&nbsp;of&nbsp;the&nbsp;puzzle.&nbsp;You&nbsp;might&nbsp;also&nbsp;want&nbsp;to&nbsp;look&nbsp;at&nbsp;'Publisher&nbsp;Confirms'&nbsp;(&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/extensions.html#publishing&quot;&gt;http://www.rabbitmq.com/extensions.html#publishing&lt;/a&gt;)&nbsp;-&nbsp;a&nbsp;Rabbit&nbsp;extension&nbsp;to&nbsp;AMQP&nbsp;that&nbsp;solves&nbsp;most&nbsp;of&nbsp;the&nbsp;use&nbsp;cases&nbsp;of&nbsp;transactions,&nbsp;without&nbsp;sacrificing&nbsp;performance.&nbsp;In&nbsp;this&nbsp;model,&nbsp;the&nbsp;broker&nbsp;sends&nbsp;a&nbsp;confirm&nbsp;to&nbsp;the&nbsp;publisher&nbsp;once&nbsp;it&nbsp;has&nbsp;'taken&nbsp;responsibility&nbsp;for'&nbsp;a&nbsp;message.&nbsp;If&nbsp;you&nbsp;are&nbsp;marking&nbsp;your&nbsp;messages&nbsp;as&nbsp;persistent,&nbsp;then&nbsp;the&nbsp;(central)&nbsp;broker&nbsp;*only*&nbsp;does&nbsp;this&nbsp;once&nbsp;the&nbsp;data&nbsp;has&nbsp;been&nbsp;fsync'ed&nbsp;to&nbsp;disk.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;BTW&nbsp;-&nbsp;guaranteeing&nbsp;'once&nbsp;and&nbsp;only&nbsp;once'&nbsp;delivery&nbsp;in&nbsp;an&nbsp;asynchronous&nbsp;messaging&nbsp;system&nbsp;is&nbsp;a&nbsp;bit&nbsp;far&nbsp;out.&nbsp;I&nbsp;would&nbsp;suggest&nbsp;looking&nbsp;at&amp;nbsp;&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2010-August/008272.html&quot;&gt;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2010-August/008272.html&lt;/a&gt;&nbsp;for&nbsp;starters.&nbsp;Anyway,&nbsp;publisher&nbsp;confirms&nbsp;should&nbsp;get&nbsp;you&nbsp;some&nbsp;of&nbsp;the&nbsp;way&nbsp;to&nbsp;what&nbsp;you're&nbsp;looking&nbsp;for&nbsp;I&nbsp;expect.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;The&nbsp;response&nbsp;from&nbsp;Alexis&nbsp;actually&nbsp;solves&nbsp;most&nbsp;of&nbsp;our&nbsp;problems.&nbsp;But,&nbsp;there&nbsp;is&nbsp;one&nbsp;more&nbsp;thing&nbsp;to&nbsp;consider.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;b&gt;I&nbsp;had&nbsp;stated&nbsp;it&nbsp;as&nbsp;a&nbsp;constraint&nbsp;in&nbsp;the&nbsp;original&nbsp;post&nbsp;that:&lt;/b&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;font-size:13px;line-height:17px;background-color:rgb(250,250,250)&quot;&gt;&quot;Also,&nbsp;the&nbsp;data&nbsp;on&nbsp;the&nbsp;central&nbsp;node&nbsp;must&nbsp;not&nbsp;get&nbsp;duplicated&nbsp;or&nbsp;stored&nbsp;again.&nbsp;That&nbsp;is&nbsp;data&nbsp;collected&nbsp;on&nbsp;one&nbsp;of&nbsp;the&nbsp;nodes&nbsp;should&nbsp;be&nbsp;stored&nbsp;on&nbsp;the&nbsp;central&nbsp;nodes&nbsp;only&nbsp;once.&quot;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;font-size:13px;line-height:17px;background-color:rgb(250,250,250)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Well&nbsp;what&nbsp;exactly&nbsp;do&nbsp;you&nbsp;mean&nbsp;by&nbsp;this?&nbsp;If&nbsp;you&nbsp;mean&nbsp;that&nbsp;a&nbsp;'message'&nbsp;(as&nbsp;identified&nbsp;by&nbsp;its&nbsp;correlation-id)&nbsp;should&nbsp;only&nbsp;be&nbsp;delivered&nbsp;once,&nbsp;then&nbsp;using&nbsp;publisher&nbsp;confirms&nbsp;or&nbsp;acks&nbsp;is&nbsp;the&nbsp;way&nbsp;to&nbsp;go.&nbsp;If&nbsp;you're&nbsp;talking&nbsp;about&nbsp;the&nbsp;actual&nbsp;'content'&nbsp;of&nbsp;your&nbsp;messages&nbsp;not&nbsp;getting&nbsp;duplicated,&nbsp;then&nbsp;that's&nbsp;*entirely*&nbsp;up&nbsp;to&nbsp;your&nbsp;applications,&nbsp;no&nbsp;matter&nbsp;what&nbsp;synchronisation&nbsp;mechanism&nbsp;you&nbsp;choose.&nbsp;Rabbit&nbsp;will&nbsp;not&nbsp;store&nbsp;duplicate&nbsp;persistent&nbsp;messages,&nbsp;*but*&nbsp;the&nbsp;guarantees&nbsp;about&nbsp;how&nbsp;many&nbsp;times&nbsp;a&nbsp;message&nbsp;is&nbsp;received&nbsp;(or&nbsp;delivered,&nbsp;etc)&nbsp;are&nbsp;somewhat&nbsp;different&nbsp;and&nbsp;none&nbsp;of&nbsp;this&nbsp;says&nbsp;anything&nbsp;about&nbsp;what&nbsp;is&nbsp;'inside'&nbsp;a&nbsp;message&nbsp;being&nbsp;duplicated&nbsp;or&nbsp;not.&nbsp;To&nbsp;a&nbsp;broker,&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;message&nbsp;are&nbsp;just&nbsp;a&nbsp;blob&nbsp;of&nbsp;data.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Arial,'Liberation&nbsp;Sans','DejaVu&nbsp;Sans',sans-serif;font-size:13px;line-height:17px;background-color:rgb(250,250,250)&quot;&gt;How&nbsp;do&nbsp;I&nbsp;ensure&nbsp;this?&nbsp;Consider&nbsp;the&nbsp;scenario&nbsp;in&nbsp;which&nbsp;the&nbsp;ACK&nbsp;does&nbsp;not&nbsp;get&nbsp;delivered&nbsp;due&nbsp;to&nbsp;network&nbsp;issues&nbsp;(in&nbsp;our&nbsp;scenario).&nbsp;What&nbsp;happens&nbsp;in&nbsp;that&nbsp;case?&nbsp;The&nbsp;queue&nbsp;still&nbsp;is&nbsp;not&nbsp;aware&nbsp;of&nbsp;the&nbsp;status&nbsp;of&nbsp;the&nbsp;completion&nbsp;of&nbsp;the&nbsp;work.&nbsp;Does&nbsp;the&nbsp;message&nbsp;in&nbsp;that&nbsp;case&nbsp;get&nbsp;locked?&nbsp;Or&nbsp;does&nbsp;another&nbsp;worker&nbsp;pick&nbsp;it&nbsp;up?&nbsp;If&nbsp;another&nbsp;worker&nbsp;picks&nbsp;it&nbsp;up,&nbsp;then&nbsp;will&nbsp;we&nbsp;have&nbsp;the&nbsp;same&nbsp;data&nbsp;worked&nbsp;twice?&nbsp;How&nbsp;do&nbsp;we&nbsp;deal&nbsp;this&nbsp;situation?&lt;/span&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Well&nbsp;you're&nbsp;going&nbsp;to&nbsp;have&nbsp;to&nbsp;handle&nbsp;this&nbsp;yourself&nbsp;regardless&nbsp;of&nbsp;what&nbsp;technology&nbsp;you&nbsp;choose&nbsp;to&nbsp;transfer&nbsp;data&nbsp;across&nbsp;the&nbsp;wire.&nbsp;If&nbsp;you&nbsp;choose&nbsp;to&nbsp;publish&nbsp;from&nbsp;your&nbsp;remote&nbsp;nodes&nbsp;to&nbsp;a&nbsp;central&nbsp;broker,&nbsp;then&nbsp;you&nbsp;*should*&nbsp;resubmit&nbsp;a&nbsp;message&nbsp;if&nbsp;the&nbsp;connection&nbsp;drops&nbsp;before&nbsp;you&nbsp;get&nbsp;a&nbsp;'confirm-ok'&nbsp;back&nbsp;from&nbsp;the&nbsp;broker.&nbsp;If&nbsp;you're&nbsp;after&nbsp;some&nbsp;kind&nbsp;of&nbsp;2-phase&nbsp;commit&nbsp;where&nbsp;both&nbsp;parties&nbsp;keep&nbsp;on&nbsp;sending&nbsp;ACKs&nbsp;then&nbsp;I&nbsp;think&nbsp;you're&nbsp;going&nbsp;to&nbsp;end&nbsp;up&nbsp;spending&nbsp;a&nbsp;lot&nbsp;of&nbsp;time&nbsp;trying&nbsp;to&nbsp;deal&nbsp;with&nbsp;potential&nbsp;byzantine&nbsp;failures:&nbsp;even&nbsp;paxos&nbsp;and&nbsp;zab&nbsp;have&nbsp;failure&nbsp;models.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;thing&nbsp;to&nbsp;consider.&nbsp;If&nbsp;the&nbsp;central&nbsp;node&nbsp;is&nbsp;really&nbsp;acting&nbsp;in&nbsp;the&nbsp;role&nbsp;of&nbsp;a&nbsp;database,&nbsp;and&nbsp;what&nbsp;you&nbsp;want&nbsp;is&nbsp;for&nbsp;the&nbsp;remote&nbsp;nodes&nbsp;to&nbsp;sychronise&nbsp;with&nbsp;it,&nbsp;then&nbsp;there&nbsp;are&nbsp;other&nbsp;options.&nbsp;For&nbsp;shovelling&nbsp;data&nbsp;across&nbsp;a&nbsp;WAN,&nbsp;rabbit&nbsp;provides&nbsp;a&nbsp;'shovel'&nbsp;plugin&nbsp;that&nbsp;simply&nbsp;forwards&nbsp;all&nbsp;its&nbsp;messages&nbsp;to&nbsp;another&nbsp;broker.&nbsp;To&nbsp;quote&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/shovel.html:&quot;&gt;http://www.rabbitmq.com/shovel.html:&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&quot;The&nbsp;high&nbsp;level&nbsp;goal&nbsp;of&nbsp;a&nbsp;&lt;em&gt;shovel&lt;/em&gt;&nbsp;is&nbsp;to&nbsp;reliably&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continually&nbsp;take&nbsp;messages&nbsp;from&nbsp;a&nbsp;queue&nbsp;(a&nbsp;&lt;em&gt;source&lt;/em&gt;)&nbsp;in&nbsp;one<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;broker&nbsp;and&nbsp;publish&nbsp;them&nbsp;to&nbsp;exchanges&nbsp;in&nbsp;another&nbsp;broker&nbsp;(a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;em&gt;destination&lt;/em&gt;).&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&amp;nbsp;The&nbsp;source&nbsp;queue&nbsp;and&nbsp;destination&nbsp;exchanges&nbsp;can&nbsp;be&nbsp;on&nbsp;the&nbsp;same<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;broker&nbsp;or&nbsp;distinct&nbsp;brokers.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&amp;nbsp;A&nbsp;shovel&nbsp;behaves&nbsp;like&nbsp;a&nbsp;well-written&nbsp;client&nbsp;application,&nbsp;which<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connects&nbsp;to&nbsp;its&nbsp;source&nbsp;and&nbsp;destination,&nbsp;reads&nbsp;and&nbsp;writes&nbsp;messages,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;copes&nbsp;with&nbsp;connection&nbsp;failures.&quot;&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;Like&nbsp;federated&nbsp;exchanges&nbsp;(another&nbsp;WAN&nbsp;friendly,&nbsp;highly&nbsp;available&nbsp;and&nbsp;partition&nbsp;tolerant&nbsp;feature),&nbsp;shovel&nbsp;will&nbsp;'behave&nbsp;itself'&nbsp;and&nbsp;can&nbsp;be&nbsp;configured&nbsp;to&nbsp;use&nbsp;publisher&nbsp;confirms&nbsp;just&nbsp;as&nbsp;a&nbsp;hand&nbsp;written&nbsp;producer&nbsp;would.&nbsp;You&nbsp;can&nbsp;also&nbsp;tweak&nbsp;the&nbsp;properties&nbsp;that&nbsp;get&nbsp;passed&nbsp;on&nbsp;to&nbsp;the&nbsp;destination&nbsp;broker,&nbsp;allowing&nbsp;a&nbsp;client&nbsp;application&nbsp;(such&nbsp;as&nbsp;a&nbsp;house&nbsp;keeper)&nbsp;running&nbsp;against&nbsp;the&nbsp;central&nbsp;broker/cluster&nbsp;to&nbsp;do&nbsp;some&nbsp;intervention&nbsp;if&nbsp;needed.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Using&nbsp;shovel&nbsp;like&nbsp;this&nbsp;is&nbsp;a&nbsp;bit&nbsp;of&nbsp;an&nbsp;esoteric&nbsp;choice&nbsp;-&nbsp;it&nbsp;does&nbsp;not&nbsp;provide&nbsp;the&nbsp;same&nbsp;kind&nbsp;of&nbsp;consistency&nbsp;guarantees&nbsp;that&nbsp;HA&nbsp;(mirror)&nbsp;queues&nbsp;do,&nbsp;but&nbsp;then&nbsp;it's&nbsp;not&nbsp;designed&nbsp;to.&nbsp;And&nbsp;consistency&nbsp;means&nbsp;different&nbsp;things&nbsp;to&nbsp;different&nbsp;people&nbsp;in&nbsp;different&nbsp;contexts.&nbsp;For&nbsp;example,&nbsp;if&nbsp;you&nbsp;simply&nbsp;care&nbsp;about&nbsp;the&nbsp;data&nbsp;getting&nbsp;to&nbsp;the&nbsp;central&nbsp;node&nbsp;eventually,&nbsp;then&nbsp;having&nbsp;shovel&nbsp;use&nbsp;publisher&nbsp;confirms&nbsp;and&nbsp;keep&nbsp;trying&nbsp;to&nbsp;reconnect&nbsp;is&nbsp;the&nbsp;central&nbsp;broker&nbsp;goes&nbsp;down&nbsp;might&nbsp;be&nbsp;'good&nbsp;enough'&nbsp;for&nbsp;you.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;lots&nbsp;of&nbsp;inter-node&nbsp;coordination,&nbsp;then&nbsp;you&nbsp;probably&nbsp;want&nbsp;to&nbsp;write&nbsp;custom&nbsp;clients&nbsp;(producing&nbsp;and&nbsp;consuming)&nbsp;that&nbsp;will&nbsp;run&nbsp;in&nbsp;both&nbsp;(the&nbsp;central&nbsp;and&nbsp;remote)&nbsp;locations.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;avoid&nbsp;delays&nbsp;in&nbsp;delivery,&nbsp;you&nbsp;might&nbsp;even&nbsp;have&nbsp;the&nbsp;shovel&nbsp;fail&nbsp;over&nbsp;and&nbsp;delegate&nbsp;to&nbsp;another&nbsp;(remote)&nbsp;node&nbsp;if/when&nbsp;the&nbsp;central&nbsp;server&nbsp;is&nbsp;not&nbsp;accessible&nbsp;(because&nbsp;network&nbsp;issues&nbsp;between&nbsp;site-a&nbsp;and&nbsp;HQ&nbsp;do&nbsp;not&nbsp;necessarily&nbsp;mean&nbsp;that&nbsp;site-b&nbsp;inaccessible&nbsp;to&nbsp;or&nbsp;from&nbsp;either&nbsp;location!).&nbsp;Just&nbsp;a&nbsp;though.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;you&nbsp;will&nbsp;almost&nbsp;definitely&nbsp;want&nbsp;to&nbsp;set&nbsp;up&nbsp;an&nbsp;HA&nbsp;cluster&nbsp;in&nbsp;your&nbsp;central&nbsp;location,&nbsp;so&nbsp;that&nbsp;you&nbsp;can&nbsp;loose&nbsp;a&nbsp;server&nbsp;and&nbsp;not&nbsp;be&nbsp;dead&nbsp;in&nbsp;the&nbsp;water.&nbsp;Try&nbsp;to&nbsp;bare&nbsp;in&nbsp;mind&nbsp;that&nbsp;a&nbsp;box&nbsp;can&nbsp;actually&nbsp;physically&nbsp;break&nbsp;beyond&nbsp;repair,&nbsp;and&nbsp;under&nbsp;those&nbsp;circumstances&nbsp;you're&nbsp;actually&nbsp;doomed&nbsp;unless&nbsp;you've&nbsp;got&nbsp;clustered&nbsp;replication&nbsp;even&nbsp;in&nbsp;the&nbsp;'central&nbsp;server'&nbsp;to&nbsp;make&nbsp;the&nbsp;solution&nbsp;available&nbsp;and&nbsp;to&nbsp;prevent&nbsp;data&nbsp;loss.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm&nbsp;sure&nbsp;that&nbsp;other,&nbsp;more&nbsp;experienced&nbsp;rabbit-iers&nbsp;will&nbsp;have&nbsp;more&nbsp;useful&nbsp;things&nbsp;to&nbsp;add.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Tim&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
