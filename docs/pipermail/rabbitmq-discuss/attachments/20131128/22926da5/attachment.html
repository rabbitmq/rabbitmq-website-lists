<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;there.&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;messages&nbsp;stored&nbsp;in&nbsp;a&nbsp;durable&nbsp;queue&nbsp;doesn&#39;t&nbsp;survive&nbsp;a&nbsp;service&nbsp;restart&nbsp;(I&#39;m&nbsp;using&nbsp;windows&nbsp;version&nbsp;of&nbsp;Rabbit).&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;using&nbsp;message&nbsp;confirmation,&nbsp;but&nbsp;clearly&nbsp;I&nbsp;need&nbsp;to&nbsp;do&nbsp;something&nbsp;else.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;how&nbsp;I&#39;m&nbsp;publishing&nbsp;the&nbsp;messages&nbsp;:&nbsp;&lt;br&gt;&lt;br&gt;               &nbsp;using&nbsp;(var&nbsp;channel&nbsp;=&nbsp;rabbitConnection.Connection.CreateModel())&lt;br&gt;               &nbsp;{&lt;br&gt;                   &nbsp;channel.ConfirmSelect();&nbsp;//enable&nbsp;confirms&nbsp;on&nbsp;channel&lt;br&gt;<br>
                   &nbsp;foreach&nbsp;(var&nbsp;message&nbsp;in&nbsp;messages)&lt;br&gt;                   &nbsp;{&lt;br&gt;                       &nbsp;var&nbsp;serialization&nbsp;=&nbsp;_serializer.Serialize(message&nbsp;,&nbsp;Encoding.UTF8);&lt;br&gt;                       &nbsp;channel.BasicPublish(rabbitAddress.Name,&nbsp;string.Empty,&nbsp;null,&nbsp;serialization);&lt;br&gt;<br>
                   &nbsp;}&lt;br&gt;                   &nbsp;channel.WaitForConfirms();&lt;br&gt;               &nbsp;}&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;the&nbsp;RabbitMQ&nbsp;Management&nbsp;I&nbsp;see&nbsp;the&nbsp;confirmation&nbsp;throughput&nbsp;and&nbsp;the&nbsp;messages&nbsp;stored&nbsp;in&nbsp;ready&nbsp;state,&nbsp;but&nbsp;once&nbsp;the&nbsp;messages&nbsp;are&nbsp;there&nbsp;and&nbsp;then&nbsp;I&nbsp;stop&nbsp;the&nbsp;RabbitMQ&nbsp;service,&nbsp;when&nbsp;I&nbsp;start&nbsp;the&nbsp;service&nbsp;again&nbsp;everything&nbsp;is&nbsp;gone.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;reference&nbsp;I&#39;m&nbsp;using&nbsp;this:&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/blog/2011/02/10/introducing-publisher-confirms/&quot;&gt;http://www.rabbitmq.com/blog/2011/02/10/introducing-publisher-confirms/&lt;/a&gt;&nbsp;and &nbsp;&lt;a&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-java-client/file/default/test/src/com/rabbitmq/examples/ConfirmDontLoseMessages.java&quot;&gt;http://hg.rabbitmq.com/rabbitmq-java-client/file/default/test/src/com/rabbitmq/examples/ConfirmDontLoseMessages.java&lt;/a&gt;&nbsp;although&nbsp;I&nbsp;use&nbsp;C#&nbsp;.&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;know&nbsp;what&nbsp;I&#39;m&nbsp;doing&nbsp;wrong.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;I´m&nbsp;using&nbsp;RabbitMQ&nbsp;3.1.5,&nbsp;&lt;acronym&nbsp;class=&quot;&quot;&nbsp;title=&quot;Erlang&nbsp;R16B01&nbsp;(erts-5.10.2)&nbsp;[smp:4:4]&nbsp;[async-threads:30]&quot;&gt;Erlang&nbsp;R16B01&lt;/acronym&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;From&nbsp;my&nbsp;understanding&nbsp;the&nbsp;consumer&nbsp;has&nbsp;nothing&nbsp;to&nbsp;do&nbsp;with&nbsp;persistance.&nbsp;Is&nbsp;this&nbsp;correct?&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot&nbsp;in&nbsp;advance.&lt;/div&gt;&lt;/div&gt;<br>

</tt>
