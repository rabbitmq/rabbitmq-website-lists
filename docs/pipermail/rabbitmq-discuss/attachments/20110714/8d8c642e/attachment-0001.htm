<tt>
&lt;html&nbsp;xmlns:v=&quot;urn:schemas-microsoft-com:vml&quot;&nbsp;xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot;&nbsp;xmlns:w=&quot;urn:schemas-microsoft-com:office:word&quot;&nbsp;xmlns:m=&quot;http://schemas.microsoft.com/office/2004/12/omml&quot;&nbsp;xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;meta&nbsp;name=&quot;Generator&quot;&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;14&nbsp;(filtered&nbsp;medium)&quot;&gt;<br>
&lt;style&gt;&lt;!--<br>
/*&nbsp;Font&nbsp;Definitions&nbsp;*/<br>
@font-face<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{font-family:Calibri;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppanose-1:2&nbsp;15&nbsp;5&nbsp;2&nbsp;2&nbsp;2&nbsp;4&nbsp;3&nbsp;2&nbsp;4;}<br>
@font-face<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{font-family:Georgia;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppanose-1:2&nbsp;4&nbsp;5&nbsp;2&nbsp;5&nbsp;4&nbsp;5&nbsp;2&nbsp;3&nbsp;3;}<br>
/*&nbsp;Style&nbsp;Definitions&nbsp;*/<br>
p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin:0cm;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:.0001pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-size:11.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-fareast-language:EN-US;}<br>
a:link,&nbsp;span.MsoHyperlink<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-priority:99;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcolor:blue;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
a:visited,&nbsp;span.MsoHyperlinkFollowed<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-priority:99;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcolor:purple;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
p<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-priority:99;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-margin-top-alt:auto;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-right:0cm;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-margin-bottom-alt:auto;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-left:0cm;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-size:12.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Times&nbsp;New&nbsp;Roman&quot;,&quot;serif&quot;;}<br>
span.EmailStyle17<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-type:personal-compose;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcolor:windowtext;}<br>
.MsoChpDefault<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-type:export-only;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Calibri&quot;,&quot;sans-serif&quot;;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-fareast-language:EN-US;}<br>
@page&nbsp;WordSection1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{size:612.0pt&nbsp;792.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin:72.0pt&nbsp;72.0pt&nbsp;72.0pt&nbsp;72.0pt;}<br>
div.WordSection1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{page:WordSection1;}<br>
/*&nbsp;List&nbsp;Definitions&nbsp;*/<br>
@list&nbsp;l0<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-list-id:1701777207;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmso-list-template-ids:-1337588872;}<br>
ol<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin-bottom:0cm;}<br>
ul<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin-bottom:0cm;}<br>
--&gt;&lt;/style&gt;&lt;!--[if&nbsp;gte&nbsp;mso&nbsp;9]&gt;&lt;xml&gt;<br>
&lt;o:shapedefaults&nbsp;v:ext=&quot;edit&quot;&nbsp;spidmax=&quot;1026&quot;&nbsp;/&gt;<br>
&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if&nbsp;gte&nbsp;mso&nbsp;9]&gt;&lt;xml&gt;<br>
&lt;o:shapelayout&nbsp;v:ext=&quot;edit&quot;&gt;<br>
&lt;o:idmap&nbsp;v:ext=&quot;edit&quot;&nbsp;data=&quot;1&quot;&nbsp;/&gt;<br>
&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;lang=&quot;EN-GB&quot;&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&gt;<br>
&lt;div&nbsp;class=&quot;WordSection1&quot;&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;Hi&nbsp;All,&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;This&nbsp;is&nbsp;a&nbsp;copy&nbsp;of<br>
&lt;a&nbsp;href=&quot;http://mikehadlow.blogspot.com/2011/07/easynetq-how-should-messaging-client.html&quot;&gt;<br>
a&nbsp;blog&nbsp;post&nbsp;I&amp;#8217;ve&nbsp;just&nbsp;written&lt;/a&gt;.&nbsp;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;anyone&nbsp;on&nbsp;the&nbsp;group&nbsp;had&nbsp;any&nbsp;good&nbsp;suggestions&nbsp;for&nbsp;error&nbsp;handling&nbsp;strategies?&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;&lt;a&nbsp;href=&quot;https://github.com/mikehadlow/EasyNetQ&quot;&gt;EasyNetQ&lt;/a&gt;&nbsp;is&nbsp;my&nbsp;simple&nbsp;.NET&nbsp;API&nbsp;for&nbsp;RabbitMQ.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;I&amp;#8217;ve&nbsp;started&nbsp;thinking&nbsp;about&nbsp;the&nbsp;best&nbsp;patterns&nbsp;for&nbsp;implementing&nbsp;error&nbsp;handling&nbsp;in&nbsp;EasyNetQ.&nbsp;One&nbsp;of&nbsp;the&nbsp;aims&nbsp;of&nbsp;EasyNetQ&nbsp;is&nbsp;to&nbsp;remove&nbsp;as&nbsp;many&nbsp;infrastructure&nbsp;concerns&nbsp;from<br>
&nbsp;the&nbsp;application&nbsp;developer&nbsp;as&nbsp;possible.&nbsp;This&nbsp;means&nbsp;that&nbsp;the&nbsp;API&nbsp;should&nbsp;correctly&nbsp;handle&nbsp;any&nbsp;exceptions&nbsp;that&nbsp;bubble&nbsp;up&nbsp;from&nbsp;the&nbsp;application&nbsp;layer.<br>
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;One&nbsp;of&nbsp;the&nbsp;core&nbsp;requirements&nbsp;is&nbsp;that&nbsp;we&nbsp;shouldn&amp;#8217;t&nbsp;lose&nbsp;messages&nbsp;when&nbsp;the&nbsp;application&nbsp;throws.&nbsp;The&nbsp;question&nbsp;then&nbsp;becomes:&nbsp;where&nbsp;should&nbsp;the&nbsp;message,&nbsp;that&nbsp;the&nbsp;application&nbsp;was<br>
&nbsp;consuming&nbsp;when&nbsp;it&nbsp;threw,&nbsp;go?&nbsp;There&nbsp;seem&nbsp;to&nbsp;be&nbsp;three&nbsp;choices:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;ol&nbsp;start=&quot;1&quot;&nbsp;type=&quot;1&quot;&gt;<br>
&lt;li&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;color:#333333;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;line-height:19.2pt;mso-list:l0&nbsp;level1&nbsp;lfo1&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;&quot;&gt;Put&nbsp;the&nbsp;failed&nbsp;message&nbsp;back&nbsp;on&nbsp;the&nbsp;queue&nbsp;it&nbsp;was&nbsp;consumed&nbsp;from.<br>
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;color:#333333;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;line-height:19.2pt;mso-list:l0&nbsp;level1&nbsp;lfo1&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;&quot;&gt;Put&nbsp;the&nbsp;failed&nbsp;message&nbsp;on&nbsp;an&nbsp;error&nbsp;queue.<br>
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;color:#333333;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;line-height:19.2pt;mso-list:l0&nbsp;level1&nbsp;lfo1&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;&quot;&gt;A&nbsp;combination&nbsp;of&nbsp;1&nbsp;and&nbsp;2.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;strong&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;Option&nbsp;1&lt;/span&gt;&lt;/strong&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;&nbsp;has&nbsp;the&nbsp;benefit&nbsp;that&nbsp;it&amp;#8217;s&amp;nbsp;the&nbsp;out-of-the-box&nbsp;behaviour&nbsp;of&nbsp;AMQP.&nbsp;In&nbsp;the&nbsp;case&nbsp;of<br>
&nbsp;EasyNetQ,&nbsp;I&nbsp;would&nbsp;simply&nbsp;catch&nbsp;any&nbsp;exceptions,&nbsp;log&nbsp;them,&nbsp;and&nbsp;just&nbsp;send&nbsp;a&nbsp;noAck&nbsp;command&nbsp;back&nbsp;to&nbsp;RabbitMQ.&nbsp;Rabbit&nbsp;would&nbsp;put&nbsp;the&nbsp;message&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;the&nbsp;queue&nbsp;and&nbsp;then&nbsp;resend&nbsp;it&nbsp;when&nbsp;it&nbsp;got&nbsp;to&nbsp;the&nbsp;front.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;Another&nbsp;advantage&nbsp;of&nbsp;this&nbsp;technique&nbsp;is&nbsp;that&nbsp;it&nbsp;gives&amp;nbsp;competing&nbsp;consumers&amp;nbsp;the&nbsp;opportunity&nbsp;to&nbsp;process&nbsp;the&nbsp;message.&nbsp;If&nbsp;you&nbsp;have&nbsp;more&nbsp;than&nbsp;one&nbsp;consumer&nbsp;on&nbsp;a&nbsp;queue,&nbsp;Rabbit&nbsp;will<br>
&nbsp;send&nbsp;the&nbsp;messages&nbsp;to&nbsp;them&nbsp;in&nbsp;turn,&nbsp;so&nbsp;this&nbsp;is&nbsp;out-of-the-box.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;The&nbsp;drawback&nbsp;of&nbsp;this&nbsp;method&nbsp;is&nbsp;that&nbsp;there&amp;#8217;s&nbsp;the&nbsp;possibility&nbsp;of&nbsp;the&nbsp;queue&nbsp;filling&nbsp;up&nbsp;with&nbsp;failed&nbsp;messages.&nbsp;The&nbsp;consumer&nbsp;would&nbsp;just&nbsp;be&nbsp;cycling&nbsp;around&nbsp;throwing&nbsp;exceptions&nbsp;and<br>
&nbsp;any&nbsp;messages&nbsp;that&nbsp;it&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;to&nbsp;consume&nbsp;would&nbsp;be&nbsp;slowed&nbsp;down&nbsp;by&nbsp;having&nbsp;to&nbsp;wait&nbsp;their&nbsp;turn&nbsp;amongst&nbsp;a&nbsp;long&nbsp;queue&nbsp;of&nbsp;failed&nbsp;messages.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;Another&nbsp;problem&nbsp;is&nbsp;that&nbsp;it&amp;#8217;s&nbsp;difficult&nbsp;to&nbsp;manually&nbsp;inspect&nbsp;the&nbsp;messages&nbsp;and&nbsp;selectively&nbsp;delete&nbsp;or&nbsp;retry&nbsp;them.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;strong&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;Option&nbsp;2&lt;/span&gt;&lt;/strong&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;&nbsp;is&nbsp;harder&nbsp;to&nbsp;implement.&nbsp;I&nbsp;would&nbsp;have&nbsp;to&nbsp;catch&nbsp;exceptions,&nbsp;log&nbsp;them&nbsp;and&nbsp;then&nbsp;write<br>
&nbsp;the&nbsp;message&nbsp;to&nbsp;an&nbsp;error&nbsp;queue.&nbsp;I&nbsp;would&nbsp;need&nbsp;to&nbsp;write&nbsp;an&nbsp;error&nbsp;queue&nbsp;consumer&nbsp;to&nbsp;store&nbsp;the&nbsp;messages&nbsp;in&nbsp;a&nbsp;database.&nbsp;I&nbsp;would&nbsp;then&nbsp;need&nbsp;to&nbsp;provide&nbsp;the&nbsp;user&nbsp;with&nbsp;some&nbsp;way&nbsp;to&nbsp;inspect&nbsp;the&nbsp;messages&nbsp;alongside&nbsp;the&nbsp;error&nbsp;that&nbsp;caused&nbsp;them&nbsp;to&nbsp;arrive&nbsp;in&nbsp;the&nbsp;error&nbsp;queue<br>
&nbsp;so&nbsp;that&nbsp;they&nbsp;could&nbsp;make&nbsp;a&nbsp;ignore/retry&nbsp;decision.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;I&nbsp;could&nbsp;also&nbsp;implement&nbsp;some&nbsp;kind&nbsp;of&nbsp;wait-and-retry&nbsp;function&nbsp;on&nbsp;the&nbsp;error&nbsp;queue,&nbsp;but&nbsp;that&nbsp;would&nbsp;also&nbsp;add&nbsp;additional&nbsp;complexity.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;It&nbsp;has&nbsp;the&nbsp;advantage&nbsp;that&nbsp;the&nbsp;original&nbsp;queue&nbsp;remains&nbsp;clear&nbsp;of&nbsp;failing&nbsp;messages.&nbsp;Failed&nbsp;messages&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;that&nbsp;caused&nbsp;the&nbsp;failure&nbsp;can&nbsp;be&nbsp;inspected&nbsp;together,<br>
&nbsp;and&nbsp;failed&nbsp;messages&nbsp;can&nbsp;be&nbsp;manually&nbsp;ignored&nbsp;or&nbsp;retried.&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;With&nbsp;the&nbsp;failed&nbsp;messages&nbsp;sitting&nbsp;in&nbsp;a&nbsp;database,&nbsp;it&nbsp;would&nbsp;also&nbsp;be&nbsp;simple&nbsp;to&nbsp;create&nbsp;a&nbsp;mechanism&nbsp;where&nbsp;those&nbsp;messages&nbsp;could&nbsp;be&nbsp;replayed&nbsp;on&nbsp;a&nbsp;developer&nbsp;machine&nbsp;to&nbsp;aid&nbsp;in&nbsp;debugging.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;strong&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;A&nbsp;combination&nbsp;of&nbsp;1&nbsp;and&nbsp;2&lt;/span&gt;&lt;/strong&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;.&nbsp;I&amp;#8217;m&nbsp;moving&nbsp;towards&nbsp;thinking&nbsp;that&nbsp;a&nbsp;combination&nbsp;of&nbsp;1&nbsp;&amp;amp;&nbsp;2&nbsp;might<br>
&nbsp;be&nbsp;the&nbsp;best&nbsp;strategy.&nbsp;When&nbsp;a&nbsp;message&nbsp;fails&nbsp;initially,&nbsp;we&nbsp;simply&nbsp;noAck&nbsp;it&nbsp;and&nbsp;it&nbsp;goes&nbsp;back&nbsp;to&nbsp;the&nbsp;queue.&nbsp;AMQP&nbsp;provides&nbsp;a&nbsp;Redelivered&nbsp;flag,&nbsp;so&nbsp;when&nbsp;the&nbsp;messages&nbsp;is&nbsp;consumed&nbsp;a&nbsp;second&nbsp;time&nbsp;we&nbsp;can&nbsp;be&nbsp;aware&nbsp;that&nbsp;it&amp;#8217;s&nbsp;a&nbsp;retry.&nbsp;Unfortunately&nbsp;there&nbsp;doesn&amp;#8217;t&nbsp;seem&nbsp;to<br>
&nbsp;be&nbsp;a&nbsp;retry&nbsp;count&nbsp;in&nbsp;AMQP,&nbsp;so&nbsp;the&nbsp;best&nbsp;we&nbsp;can&nbsp;do&nbsp;is&nbsp;allow&nbsp;for&nbsp;a&nbsp;single&nbsp;retry.&nbsp;This&nbsp;has&nbsp;the&nbsp;benefit&nbsp;that&nbsp;it&nbsp;gives&nbsp;a&nbsp;competing&nbsp;consumer&nbsp;a&nbsp;chance&nbsp;to&nbsp;process&nbsp;the&nbsp;message.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;After&nbsp;the&nbsp;single&nbsp;retry&nbsp;we&nbsp;fall&nbsp;back&nbsp;to<br>
&lt;strong&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;&quot;&gt;Option&nbsp;2&lt;/span&gt;&lt;/strong&gt;.&nbsp;The&nbsp;message&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;error&nbsp;queue&nbsp;on&nbsp;the&nbsp;second&nbsp;failure.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;I&nbsp;would&nbsp;be&nbsp;very&nbsp;interested&nbsp;in&nbsp;hearing&nbsp;how&nbsp;other&nbsp;people&nbsp;have&nbsp;implemented&nbsp;error&nbsp;handling&nbsp;with&nbsp;AMQP/RabbitMQ.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;Many&nbsp;thanks&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;line-height:19.2pt&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Georgia&amp;quot;,&amp;quot;serif&amp;quot;;color:#333333&quot;&gt;Mike&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;color=&quot;Black&quot;&nbsp;size=&quot;3&quot;&gt;15below&nbsp;Limited:&nbsp;Company&nbsp;registered&nbsp;in&nbsp;England&nbsp;and&nbsp;Wales&nbsp;No&nbsp;3945289&lt;br&gt;<br>
Registered&nbsp;Office:&nbsp;Lyndean&nbsp;House,&nbsp;43-46&nbsp;Queens&nbsp;Road,&nbsp;Brighton&nbsp;BN1&nbsp;3XB,&nbsp;United&nbsp;Kingdom&lt;br&gt;<br>
&lt;br&gt;<br>
15below&nbsp;Australia&nbsp;Pty&nbsp;Limited:&nbsp;ABN&nbsp;25&nbsp;132&nbsp;716&nbsp;379&lt;br&gt;<br>
Level&nbsp;50,&nbsp;120&nbsp;Collins&nbsp;Street,&nbsp;Melbourne,&nbsp;Victoria&nbsp;3000,&nbsp;Australia&lt;br&gt;<br>
&lt;br&gt;<br>
Please&nbsp;think&nbsp;about&nbsp;the&nbsp;environment&nbsp;before&nbsp;printing&nbsp;this&nbsp;email.&lt;br&gt;<br>
&lt;br&gt;<br>
************************************************************************&lt;br&gt;<br>
This&nbsp;email&nbsp;and&nbsp;any&nbsp;attachments&nbsp;may&nbsp;be&nbsp;confidential&nbsp;and/or&nbsp;legally&nbsp;privileged&nbsp;and&nbsp;are&nbsp;solely&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;intended&nbsp;recipient.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;email&nbsp;in&nbsp;error&nbsp;please&nbsp;contact&nbsp;the&nbsp;sender.&nbsp;Any&nbsp;views&nbsp;or&nbsp;opinions&nbsp;expressed&nbsp;within&nbsp;this&nbsp;e-mail&nbsp;are&nbsp;solely<br>
&nbsp;those&nbsp;of&nbsp;the&nbsp;sender,&nbsp;and&nbsp;do&nbsp;not&nbsp;necessarily&nbsp;represent&nbsp;those&nbsp;of&nbsp;15below&nbsp;unless&nbsp;otherwise&nbsp;specifically&nbsp;stated.&nbsp;Although&nbsp;15below&nbsp;has&nbsp;taken&nbsp;every&nbsp;reasonable&nbsp;precaution&nbsp;to&nbsp;ensure&nbsp;that&nbsp;any&nbsp;attachment&nbsp;to&nbsp;this&nbsp;e-mail&nbsp;has&nbsp;been&nbsp;checked&nbsp;for&nbsp;viruses,&nbsp;it&nbsp;is&nbsp;strongly&nbsp;recommended<br>
&nbsp;that&nbsp;you&nbsp;carry&nbsp;out&nbsp;your&nbsp;own&nbsp;virus&nbsp;check&nbsp;before&nbsp;opening&nbsp;any&nbsp;attachment,&nbsp;as&nbsp;we&nbsp;cannot&nbsp;accept&nbsp;liability&nbsp;for&nbsp;any&nbsp;damage&nbsp;sustained&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;software&nbsp;virus&nbsp;infection.&lt;br&gt;<br>
&lt;/font&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
