<tt>
&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;Hello,&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;I'm&nbsp;writing&nbsp;unit&nbsp;tests&nbsp;for&nbsp;the&nbsp;various&nbsp;components&nbsp;in&nbsp;my&nbsp;application,&nbsp;some&nbsp;of&nbsp;which&nbsp;interface&nbsp;with&nbsp;a&nbsp;RabbitMQ&nbsp;broker.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;I've&nbsp;managed&nbsp;to&nbsp;successfully&nbsp;implement&nbsp;reading&nbsp;from&nbsp;a&nbsp;mocked&nbsp;call&nbsp;to&nbsp;&lt;/font&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;IModel.BasicConsume()&lt;/font&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;&nbsp;and&nbsp;acknowledging&nbsp;with&amp;nbsp;&lt;/font&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;IModel.BasicAck()&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;verdana,&nbsp;sans-serif;&quot;&gt;&nbsp;but&nbsp;am&nbsp;stuck&nbsp;on&amp;nbsp;&lt;/span&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;IModel.BasicPublish()&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;verdana,&nbsp;sans-serif;&quot;&gt;,&nbsp;in&nbsp;particular&nbsp;mocking&nbsp;the&nbsp;ack/nack&nbsp;mechanism&nbsp;with&nbsp;&lt;/span&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;IModel&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;verdana,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;as&nbsp;I&nbsp;need&nbsp;to&nbsp;test&nbsp;my&nbsp;component&nbsp;in&nbsp;both&nbsp;those&nbsp;scenarios.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;verdana,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;verdana,&nbsp;sans-serif;&quot;&gt;How&nbsp;does&nbsp;the&nbsp;ack/nack&nbsp;mechanism&nbsp;work&nbsp;with&nbsp;&lt;/span&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;IModel.WaitForConfirms()&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;verdana,&nbsp;sans-serif;&quot;&gt;&amp;nbsp;and&nbsp;how&nbsp;would&nbsp;I&nbsp;go&nbsp;about&nbsp;sending&nbsp;an&nbsp;ack/nack&nbsp;when&nbsp;the&nbsp;publisher&nbsp;calls&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;'courier&nbsp;new',&nbsp;monospace;&quot;&gt;IModel.BasicPublish()&lt;/span&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;?&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;I'm&nbsp;using&nbsp;NSubstitute&nbsp;as&nbsp;my&nbsp;mocking&nbsp;library&nbsp;but&nbsp;I&nbsp;imagine&nbsp;the&nbsp;solution&nbsp;is&amp;nbsp;translatable&amp;nbsp;across&nbsp;mocking&nbsp;frameworks.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;Thanks,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;verdana,&nbsp;sans-serif&quot;&gt;Mark&lt;/font&gt;&lt;/div&gt;
</tt>
