<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;<br>
Thanks&nbsp;Scott.&nbsp;I'll&nbsp;try&nbsp;that.&nbsp;I&nbsp;was&nbsp;looking&nbsp;to&nbsp;do&nbsp;a&nbsp;similar&nbsp;thing&nbsp;with&nbsp;the&nbsp;Ruby&nbsp;socket&nbsp;implementation&nbsp;but&nbsp;got&nbsp;hung&nbsp;up&nbsp;on&nbsp;the&nbsp;timeout&nbsp;issue.&nbsp;Do&nbsp;you&nbsp;know&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;issues&nbsp;with&nbsp;Windows&nbsp;and&nbsp;select&nbsp;used&nbsp;in&nbsp;this&nbsp;way?&nbsp;I&nbsp;don't&nbsp;use&nbsp;Windows&nbsp;myself,&nbsp;but&nbsp;I&nbsp;don't&nbsp;want&nbsp;to&nbsp;introduce&nbsp;a&nbsp;problem&nbsp;for&nbsp;those&nbsp;who&nbsp;do.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I've&nbsp;also&nbsp;been&nbsp;reading&nbsp;the&nbsp;AMQP&nbsp;0-10&nbsp;specification.&nbsp;I&nbsp;have&nbsp;only&nbsp;skimmed&nbsp;it&nbsp;before&nbsp;because&nbsp;I&nbsp;wasn't&nbsp;targeting&nbsp;a&nbsp;broker&nbsp;that&nbsp;implemented&nbsp;it.&nbsp;It&nbsp;contains&nbsp;a&nbsp;section&nbsp;about&nbsp;transfer&nbsp;of&nbsp;responsibility&nbsp;that&nbsp;seems&nbsp;to&nbsp;deal&nbsp;with&nbsp;the&nbsp;issues&nbsp;that&nbsp;I've&nbsp;been&nbsp;trying&nbsp;to&nbsp;address&nbsp;in&nbsp;my&nbsp;last&nbsp;two&nbsp;posts.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Chris&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;6&nbsp;Jan&nbsp;2010,&nbsp;at&nbsp;00:58,&nbsp;Scott&nbsp;Brooks&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;From&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.tin.org/bin/man.cgi?section=2&amp;amp;topic=select&quot;&gt;http://www.tin.org/bin/man.cgi?section=2&amp;amp;topic=select&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;If&nbsp;you&nbsp;specify&nbsp;select&nbsp;with&nbsp;a&nbsp;NULL&nbsp;timeout,&nbsp;then&nbsp;it&nbsp;will&nbsp;wait&nbsp;for&nbsp;ever&nbsp;which&nbsp;you&nbsp;don't&nbsp;want.&lt;div&gt;You&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;specify&nbsp;a&nbsp;wait&nbsp;of&nbsp;0,&nbsp;to&nbsp;have&nbsp;it&nbsp;return&nbsp;immediately.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Scott&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;2010-01-05,&nbsp;at&nbsp;2:32&nbsp;PM,&nbsp;Chris&nbsp;Duncan&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&nbsp;Hi&nbsp;Scott,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;read&nbsp;the&nbsp;details&nbsp;of&nbsp;the&nbsp;select&nbsp;call&nbsp;correctly,&nbsp;wouldn't&nbsp;I&nbsp;have&nbsp;to&nbsp;provide&nbsp;a&nbsp;timeout&nbsp;value&nbsp;so&nbsp;that&nbsp;if&nbsp;there&nbsp;is&nbsp;nothing&nbsp;to&nbsp;read&nbsp;from&nbsp;the&nbsp;socket&nbsp;I&nbsp;stop&nbsp;blocking&nbsp;and&nbsp;can&nbsp;publish&nbsp;the&nbsp;next&nbsp;message?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Chris&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;5&nbsp;Jan&nbsp;2010,&nbsp;at&nbsp;14:48,&nbsp;Scott&nbsp;Brooks&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Have&nbsp;you&nbsp;tried&nbsp;calling&nbsp;select&nbsp;on&nbsp;your&nbsp;socket&nbsp;to&nbsp;see&nbsp;if&nbsp;there&nbsp;is&nbsp;any&nbsp;data&nbsp;available&nbsp;to&nbsp;be&nbsp;read&nbsp;before&nbsp;a&nbsp;publish?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then&nbsp;your&nbsp;publish&nbsp;method&nbsp;could&nbsp;throw&nbsp;a&nbsp;ChannelFlowException&nbsp;or&nbsp;something&nbsp;like&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;are&nbsp;waiting&nbsp;on&nbsp;tx-ok,&nbsp;then&nbsp;you&nbsp;will&nbsp;have&nbsp;to&nbsp;wait&nbsp;the&nbsp;latency&nbsp;of&nbsp;your&nbsp;link&nbsp;to&nbsp;your&nbsp;rabbit&nbsp;server&nbsp;before&nbsp;sending&nbsp;your&nbsp;next&nbsp;message.&nbsp;&amp;nbsp;Even&nbsp;a&nbsp;1&nbsp;ms&nbsp;delay&nbsp;on&nbsp;your&nbsp;link&nbsp;limits&nbsp;you&nbsp;to&nbsp;1000&nbsp;messages/second.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;2010-01-05,&nbsp;at&nbsp;7:21&nbsp;AM,&nbsp;Chris&nbsp;Duncan&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I've&nbsp;been&nbsp;wanting&nbsp;to&nbsp;incorporate&nbsp;Channel.Flow&nbsp;method&nbsp;handling&nbsp;into&nbsp;the&nbsp;Bunny&nbsp;Ruby&nbsp;client&nbsp;library&nbsp;for&nbsp;a&nbsp;while.&nbsp;It's&nbsp;needed,&nbsp;but&nbsp;I&nbsp;want&nbsp;to&nbsp;do&nbsp;it&nbsp;in&nbsp;a&nbsp;simple,&nbsp;efficient&nbsp;way.&nbsp;I&nbsp;want&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;give&nbsp;a&nbsp;client&nbsp;application&nbsp;the&nbsp;option&nbsp;to&nbsp;stop&nbsp;sending&nbsp;messages&nbsp;as&nbsp;soon&nbsp;as&nbsp;possible&nbsp;after&nbsp;receiving&nbsp;a&nbsp;Channel.Flow&nbsp;method&nbsp;(with&nbsp;:active&nbsp;=&amp;gt;&nbsp;false)&nbsp;and&nbsp;that&nbsp;means&nbsp;that&nbsp;I&nbsp;need&nbsp;to&nbsp;know&nbsp;whether&nbsp;a&nbsp;Basic.Publish&nbsp;succeeds&nbsp;as&nbsp;well&nbsp;as&nbsp;whether&nbsp;it&nbsp;fails.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;At&nbsp;the&nbsp;moment&nbsp;there&nbsp;is&nbsp;the&nbsp;potential&nbsp;for&nbsp;a&nbsp;client&nbsp;application&nbsp;to&nbsp;keep&nbsp;firing&nbsp;messages&nbsp;at&nbsp;the&nbsp;server&nbsp;whilst&nbsp;being&nbsp;oblivious&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;server&nbsp;is&nbsp;telling&nbsp;it&nbsp;to&nbsp;stop.&nbsp;If&nbsp;the&nbsp;client&nbsp;application&nbsp;is&nbsp;just&nbsp;writing&nbsp;and&nbsp;not&nbsp;reading,&nbsp;purely&nbsp;a&nbsp;publisher&nbsp;of&nbsp;messages,&nbsp;then&nbsp;there&nbsp;has&nbsp;to&nbsp;be&nbsp;an&nbsp;efficient&nbsp;way&nbsp;of&nbsp;notifying&nbsp;the&nbsp;client&nbsp;that&nbsp;a&nbsp;publish&nbsp;has&nbsp;succeeded.&nbsp;As&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;see,&nbsp;the&nbsp;simplest&nbsp;way&nbsp;to&nbsp;do&nbsp;that&nbsp;is&nbsp;with&nbsp;a&nbsp;publish-ok.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;Transactions&nbsp;may&nbsp;give&nbsp;me&nbsp;what&nbsp;I&nbsp;want&nbsp;but&nbsp;I&nbsp;don't&nbsp;think&nbsp;that&nbsp;I&nbsp;should&nbsp;be&nbsp;enforcing&nbsp;the&nbsp;use&nbsp;of&nbsp;transactions&nbsp;in&nbsp;my&nbsp;client&nbsp;library&nbsp;just&nbsp;so&nbsp;that&nbsp;it&nbsp;will&nbsp;handle&nbsp;Channel.Flow&nbsp;methods&nbsp;properly.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&nbsp;&lt;br&gt;&nbsp;Chris&lt;/font&gt;&nbsp;&lt;span&gt;&amp;lt;ATT00001.c&amp;gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&gt;---------------------&lt;br&gt;Scott&nbsp;Brooks&lt;br&gt;Web&nbsp;Developer&lt;br&gt;Epic&nbsp;Advertising&nbsp;-&nbsp;New&nbsp;York,&nbsp;Toronto,&nbsp;San&nbsp;Francisco,&nbsp;London&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.EpicAdvertising.com/&quot;&gt;www.EpicAdvertising.com&lt;/a&gt;&lt;br&gt;60&nbsp;Columbia&nbsp;Way,&nbsp;Suite&nbsp;310&lt;br&gt;Markham,&nbsp;ON&nbsp;L3R&nbsp;0C9&lt;br&gt;(905)&nbsp;946-0300&nbsp;x2356&nbsp;-&nbsp;phone&lt;br&gt;(888)&nbsp;666-3120&nbsp;-&nbsp;fax&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:scott.brooks@epicadvertising.com&quot;&gt;scott.brooks@epicadvertising.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;auto;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0;&nbsp;&quot;&gt;&lt;div&gt;---------------------&lt;br&gt;Scott&nbsp;Brooks&lt;br&gt;Web&nbsp;Developer&lt;br&gt;Epic&nbsp;Advertising&nbsp;-&nbsp;New&nbsp;York,&nbsp;Toronto,&nbsp;San&nbsp;Francisco,&nbsp;London&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.EpicAdvertising.com&quot;&gt;www.EpicAdvertising.com&lt;/a&gt;&lt;br&gt;60&nbsp;Columbia&nbsp;Way,&nbsp;Suite&nbsp;310&lt;br&gt;Markham,&nbsp;ON&nbsp;L3R&nbsp;0C9&lt;br&gt;(905)&nbsp;946-0300&nbsp;x2356&nbsp;-&nbsp;phone&lt;br&gt;(888)&nbsp;666-3120&nbsp;-&nbsp;fax&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:scott.brooks@epicadvertising.com&quot;&gt;scott.brooks@epicadvertising.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
