diff -ur rabbitmq-1.3.0/erlang/rabbit/src/rabbit_amqqueue_process.erl rabbitmq-1.3.0-persistent-headers/erlang/rabbit/src/rabbit_amqqueue_process.erl
--- rabbitmq-1.3.0/erlang/rabbit/src/rabbit_amqqueue_process.erl	2008-04-01 12:11:51.000000000 +0200
+++ rabbitmq-1.3.0-persistent-headers/erlang/rabbit/src/rabbit_amqqueue_process.erl	2008-05-27 16:55:14.000000000 +0200
@@ -323,7 +323,7 @@
     ok;
 persist_message(Txn, QName, Message) ->
     M = Message#basic_message{
-          %% don't persist the recoverable decoded properties
+          %% don't persist any recoverable decoded properties, rebuild from properties_bin on restore
           content = rabbit_binary_parser:clear_decoded_content(
                       Message#basic_message.content)},
     persist_work(Txn, QName, [{publish, M, QName}]).
diff -ur rabbitmq-1.3.0/erlang/rabbit/src/rabbit_binary_parser.erl rabbitmq-1.3.0-persistent-headers/erlang/rabbit/src/rabbit_binary_parser.erl
--- rabbitmq-1.3.0/erlang/rabbit/src/rabbit_binary_parser.erl	2008-04-01 12:11:51.000000000 +0200
+++ rabbitmq-1.3.0-persistent-headers/erlang/rabbit/src/rabbit_binary_parser.erl	2008-05-27 17:06:05.000000000 +0200
@@ -139,5 +139,9 @@
 
 clear_decoded_content(Content = #content{properties = none}) ->
     Content;
+clear_decoded_content(Content = #content{properties_bin = none}) ->
+    %% Only clear when we can rebuild the properties later in accordance to the content
+    %% record definition comment - maximum one of properties and properties_bin can be 'none'
+    Content;
 clear_decoded_content(Content = #content{}) ->
     Content#content{properties = none}.
