<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Responses&nbsp;inlined&nbsp;below:&lt;br&gt;&lt;br&gt;-Alan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Fri,&nbsp;Feb&nbsp;10,&nbsp;2012&nbsp;at&nbsp;2:00&nbsp;PM,&nbsp;Arun&nbsp;Chandrasekaran&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:visionofarun@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;visionofarun@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hi&nbsp;all,&lt;br&gt;&lt;br&gt;With&nbsp;rabbitmq-c,&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;bind&nbsp;on&nbsp;different&nbsp;channels&nbsp;from&nbsp;different&nbsp;threads?&lt;br&gt;<br>
<br>
&lt;br&gt;Basically,&nbsp;I&amp;#39;m&nbsp;not&nbsp;sharing&nbsp;any&nbsp;of&nbsp;these&nbsp;between&nbsp;the&nbsp;threads:&nbsp;amqp_connection_state_t,&nbsp;socket,&nbsp;channel.&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;You&nbsp;have&nbsp;interpreted&nbsp;the&nbsp;documentation&nbsp;correctly:&lt;br&gt;<br>
&lt;br&gt;<br>
amqp_connection_state_t,&nbsp;its&nbsp;socket,&nbsp;and&nbsp;all&nbsp;associated&nbsp;amqp_channel_t&amp;#39;s&nbsp;must&nbsp;not&nbsp;be&nbsp;<br>
shared&nbsp;between&nbsp;threads. &nbsp;Its&nbsp;ok&nbsp;to&nbsp;have&nbsp;separate&nbsp;instances&nbsp;of&nbsp;these&nbsp;objects&nbsp;used&nbsp;in&nbsp;different&nbsp;threads.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
<br>
&lt;br&gt;Here&nbsp;is&nbsp;the&nbsp;&amp;quot;examples/amqp_consumer.c&amp;quot;&nbsp;sample&nbsp;code&nbsp;modified&nbsp;for&nbsp;2&nbsp;threads:&nbsp;&lt;a&nbsp;href=&quot;http://codepad.org/zPa91lbr&quot;&nbsp;target=&quot;_blank&quot;&gt;http://codepad.org/zPa91lbr&lt;/a&gt;.&nbsp;I&nbsp;have&nbsp;also&nbsp;attached&nbsp;the&nbsp;code&nbsp;for&nbsp;your&nbsp;reference.&lt;br&gt;<br>
<br>
&lt;br&gt;I&nbsp;get&nbsp;this&nbsp;error&nbsp;from&nbsp;the&nbsp;second&nbsp;thread&nbsp;:&nbsp;&lt;br&gt;&lt;br&gt;&amp;quot;Declaring&nbsp;queue:&nbsp;server&nbsp;connection&nbsp;error&nbsp;504,&nbsp;message:&nbsp;CHANNEL_ERROR&nbsp;-&nbsp;expected&nbsp;&amp;#39;channel.open&amp;#39;&amp;quot;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;Your&nbsp;problem&nbsp;is&nbsp;on&nbsp;line&nbsp;156:&lt;br&gt;<br>
<br>
amqp_channel_open(conn,&nbsp;1);&nbsp;/*&nbsp;opens&nbsp;channel&nbsp;1&nbsp;*/&nbsp;&lt;br&gt;&lt;br&gt;You&nbsp;then&nbsp;try&nbsp;to&nbsp;use&nbsp;channel&nbsp;stored&nbsp;in&nbsp;the&nbsp;variable&nbsp;chan&nbsp;on&nbsp;line&nbsp;160:&lt;br&gt;...&nbsp;=&nbsp;amqp_queue_declare(conn,&nbsp;chan&nbsp;/*&nbsp;may&nbsp;not&nbsp;be&nbsp;channel&nbsp;1&nbsp;*/&nbsp;...);&lt;br&gt;&lt;br&gt;Try&nbsp;changing&nbsp;156&nbsp;to&nbsp;open&nbsp;channel&nbsp;stored&nbsp;in&nbsp;chan.&lt;br&gt;<br>
<br>
&lt;br&gt;Also&nbsp;note&nbsp;that&nbsp;channels&nbsp;are&nbsp;on&nbsp;a&nbsp;per-connection&nbsp;basis,&nbsp;so&nbsp;it&nbsp;is&nbsp;ok&nbsp;to&nbsp;have&nbsp;two&nbsp;different&nbsp;connections&nbsp;with&nbsp;the&nbsp;same&nbsp;channel&nbsp;identifiers.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
<br>
&lt;br&gt;The&nbsp;README&nbsp;clearly&nbsp;states&nbsp;that&nbsp;it&nbsp;is&nbsp;valid&nbsp;to&nbsp;have&nbsp;different&nbsp;connections,&nbsp;sockets&nbsp;and&nbsp;channels&nbsp;per&nbsp;thread&nbsp;(last&nbsp;section):&nbsp;&lt;a&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-c/file/fb6fca832fd2/README&quot;&nbsp;target=&quot;_blank&quot;&gt;http://hg.rabbitmq.com/rabbitmq-c/file/fb6fca832fd2/README&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Just&nbsp;an&nbsp;FYI:&nbsp;the&nbsp;canonical&nbsp;sources&nbsp;for&nbsp;the&nbsp;rabbitmq-c&nbsp;library&nbsp;have&nbsp;moved&nbsp;to&nbsp;a&nbsp;new&nbsp;location:&lt;br&gt;&lt;a&nbsp;href=&quot;https://github.com/alanxz/rabbitmq-c&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/alanxz/rabbitmq-c&lt;/a&gt;&lt;br&gt;<br>
 &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;Can&nbsp;someone&nbsp;give&nbsp;me&nbsp;an&nbsp;insight&nbsp;into&nbsp;where&nbsp;I&nbsp;am&nbsp;going&nbsp;wrong&nbsp;or&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;limitation&nbsp;with&nbsp;rabbitmq-c?&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;Arun&lt;br&gt;&lt;br&gt;&lt;/div&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;br&gt;<br>

</tt>
