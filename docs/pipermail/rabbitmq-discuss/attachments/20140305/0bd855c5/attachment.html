<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Mar&nbsp;5,&nbsp;2014&nbsp;at&nbsp;1:32&nbsp;AM,&nbsp;Ben&nbsp;Hood&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Sun,&nbsp;Mar&nbsp;2,&nbsp;2014&nbsp;at&nbsp;3:21&nbsp;AM,&nbsp;Laing,&nbsp;Michael&lt;br&gt;<br>
<br>
&lt;&lt;a&nbsp;href=&quot;mailto:michael.laing@nytimes.com&quot;&gt;michael.laing@nytimes.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Persistence&nbsp;might&nbsp;increase&nbsp;reliability&nbsp;when&nbsp;you&nbsp;plan&nbsp;to&nbsp;restart&nbsp;nodes&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;need&nbsp;to&nbsp;regain&nbsp;state.&nbsp;We&nbsp;don&#39;t&nbsp;do&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Are&nbsp;you&nbsp;referring&nbsp;to&nbsp;Rabbit&nbsp;nodes&nbsp;heres?&nbsp;Reading&nbsp;further&nbsp;into&nbsp;your&lt;br&gt;<br>
description,&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;application&nbsp;state&nbsp;is&nbsp;maintained&nbsp;by&lt;br&gt;<br>
Cassandra&nbsp;replication.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes.&nbsp;Rabbit&nbsp;nodes.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;We&nbsp;target&nbsp;queue&nbsp;lengths&nbsp;of&nbsp;zero&nbsp;and&nbsp;are&nbsp;close&nbsp;most&nbsp;of&nbsp;the&nbsp;time.&nbsp;Anything&lt;br&gt;<br>
&gt;&nbsp;else&nbsp;stands&nbsp;out&nbsp;like&nbsp;a&nbsp;black&nbsp;spot&nbsp;on&nbsp;a&nbsp;white&nbsp;sheet.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;How&nbsp;do&nbsp;you&nbsp;achieve&nbsp;this&nbsp;steady&nbsp;state?&nbsp;Have&nbsp;you&nbsp;calibrated&nbsp;your&nbsp;app&nbsp;in&lt;br&gt;<br>
some&nbsp;fashion?&nbsp;Or&nbsp;do&nbsp;you&nbsp;apply&nbsp;flow&nbsp;control?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Some&nbsp;of&nbsp;our&nbsp;fabrik&nbsp;apps&nbsp;apply&nbsp;flow&nbsp;control.&nbsp;For&nbsp;example,&nbsp;we&nbsp;apply&nbsp;flow&nbsp;control&nbsp;to&nbsp;the&nbsp;ingress&nbsp;of&nbsp;&#39;silver&#39;&nbsp;service&nbsp;messages&nbsp;so&nbsp;that&nbsp;&#39;gold&#39;&nbsp;service&nbsp;takes&nbsp;precedence. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Since&nbsp;our&nbsp;services&nbsp;are&nbsp;fully&nbsp;parallelized,&nbsp;if&nbsp;a&nbsp;bottleneck&nbsp;appears,&nbsp;we&nbsp;add&nbsp;more&nbsp;workers&nbsp;to&nbsp;that&nbsp;stage,&nbsp;distributed&nbsp;across&nbsp;the&nbsp;rabbit&nbsp;cluster.&nbsp;For&nbsp;example,&nbsp;our&nbsp;&#39;cache_pull&#39;&nbsp;service&nbsp;has&nbsp;9&nbsp;workers&nbsp;in&nbsp;each&nbsp;core&nbsp;pipeline.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;SEDA&nbsp;is&nbsp;a&nbsp;good&nbsp;inspiration&nbsp;for&nbsp;this&nbsp;kind&nbsp;of&nbsp;design&nbsp;-&nbsp;Cassandra&nbsp;is&nbsp;organized&nbsp;internally&nbsp;this&nbsp;way&nbsp;- &lt;span&nbsp;class=&quot;&quot;&gt;nyt&lt;/span&gt;⨍aбrik&nbsp;is&nbsp;SEDA&nbsp;writ&nbsp;large&nbsp;with&nbsp;bigger&nbsp;chunks.&nbsp;Here&#39;s&nbsp;a&nbsp;SEDA&nbsp;link&nbsp;from&nbsp;the&nbsp;originator: &lt;a&nbsp;href=&quot;http://matt-welsh.blogspot.com/2010/07/retrospective-on-seda.html&quot;&gt;http://matt-welsh.blogspot.com/2010/07/retrospective-on-seda.html&lt;/a&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;So&nbsp;we&nbsp;never&nbsp;restart&nbsp;nodes&nbsp;that&nbsp;die.&nbsp;Just&nbsp;sync&nbsp;in&nbsp;new&nbsp;ones.&nbsp;Actually&nbsp;we&nbsp;have&lt;br&gt;<br>
&gt;&nbsp;not&nbsp;yet&nbsp;had&nbsp;any&nbsp;core&nbsp;nodes&nbsp;die&nbsp;in&nbsp;production.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Again&nbsp;-&nbsp;you&#39;re&nbsp;talking&nbsp;about&nbsp;Rabbit&nbsp;nodes&nbsp;right?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yup.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;Our&nbsp;instances&nbsp;are&nbsp;ridiculously&nbsp;small&nbsp;and&nbsp;inexpensive&nbsp;to&nbsp;run.&nbsp;We&nbsp;rely&nbsp;on&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;global,&nbsp;headless,&nbsp;mutually&nbsp;supporting&nbsp;rabbit&nbsp;army&nbsp;for&nbsp;our&nbsp;reliability,&lt;br&gt;<br>
&gt;&nbsp;paired&nbsp;with&nbsp;a&nbsp;small&nbsp;Cassandra&nbsp;horde.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Seems&nbsp;like&nbsp;a&nbsp;simple&nbsp;yet&nbsp;effective&nbsp;approach&nbsp;given&nbsp;the&nbsp;scale&nbsp;you&#39;re&nbsp;targeting.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Actually&nbsp;I&nbsp;think&nbsp;it&nbsp;will&nbsp;work&nbsp;for&nbsp;anyone&nbsp;that&nbsp;wants&nbsp;a&nbsp;global,&nbsp;reliable,&nbsp;public-facing&nbsp;bi-directional&nbsp;messaging&nbsp;platform&nbsp;that&nbsp;will&nbsp;scale&nbsp;up&nbsp;when&nbsp;it&nbsp;needs,&nbsp;down&nbsp;when&nbsp;it&nbsp;doesn&#39;t,&nbsp;and&nbsp;is&nbsp;presented&nbsp;as&nbsp;a&nbsp;standard&nbsp;service&nbsp;to&nbsp;internal&nbsp;customers.&nbsp;We&#39;re&nbsp;the&nbsp;ham&nbsp;in&nbsp;the&nbsp;sandwich&nbsp;-&nbsp;and&nbsp;much&nbsp;more&nbsp;reliable&nbsp;than&nbsp;the&nbsp;bread&nbsp;slices.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;back-end&nbsp;is&nbsp;&#39;pluggable&#39;&nbsp;-&nbsp;couchbase&nbsp;might&nbsp;be&nbsp;an&nbsp;alternate&nbsp;choice.&nbsp;We&#39;ve&nbsp;used&nbsp;riak&nbsp;and&nbsp;dynamodb&nbsp;but&nbsp;chose&nbsp;Cassandra&nbsp;because&nbsp;multi-datacenter&nbsp;facilities&nbsp;are&nbsp;available&nbsp;and&nbsp;free&nbsp;to&nbsp;use&nbsp;plus&nbsp;we&nbsp;have&nbsp;folks&nbsp;who&nbsp;can&nbsp;jump&nbsp;into&nbsp;any&nbsp;Java&nbsp;issues&nbsp;(not&nbsp;me).&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
