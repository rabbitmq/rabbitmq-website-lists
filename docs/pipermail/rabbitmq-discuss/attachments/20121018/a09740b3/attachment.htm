<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;10/18/2012&nbsp;10:30&nbsp;AM,&nbsp;Artur&nbsp;Ejsmont&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:CABv2Cn2J758KHSuT8ix5dczV3qA5-Xihospc7yzHwRQjSYpiLA@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;Hi&nbsp;there&nbsp;everyone,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;I&nbsp;am&nbsp;working&nbsp;on&nbsp;a&nbsp;rabbitmq&nbsp;based&nbsp;messaging&nbsp;system&nbsp;and&nbsp;i&nbsp;was<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wondering&nbsp;if&nbsp;you&nbsp;could&nbsp;help&nbsp;me&nbsp;out&nbsp;:)&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;I&nbsp;was&nbsp;wondering&nbsp;how&nbsp;could&nbsp;i&nbsp;enforce&nbsp;events&nbsp;being&nbsp;processed&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;order&nbsp;they&nbsp;are&nbsp;published?&amp;nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;So&nbsp;from&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.rabbitmq.com/semantics.html&quot;&gt;http://www.rabbitmq.com/semantics.html&lt;/a&gt;,&nbsp;we&nbsp;can&nbsp;see:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;Section&nbsp;4.7&nbsp;of&nbsp;the&nbsp;AMQP&nbsp;0-9-1&nbsp;core&nbsp;specification&nbsp;explains&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;conditions&nbsp;under&nbsp;which&nbsp;ordering&nbsp;is&nbsp;guaranteed:&nbsp;messages&nbsp;published&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;channel,&nbsp;passing&nbsp;through&nbsp;one&nbsp;exchange&nbsp;and&nbsp;one&nbsp;queue&nbsp;and&nbsp;one<br>
&nbsp;&nbsp;&nbsp;&nbsp;outgoing&nbsp;channel&nbsp;will&nbsp;be&nbsp;received&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;that&nbsp;they&nbsp;were<br>
&nbsp;&nbsp;&nbsp;&nbsp;sent.&nbsp;RabbitMQ&nbsp;offers&nbsp;stronger&nbsp;guarantees&nbsp;since&nbsp;release&nbsp;2.7.0.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&nbsp;Messages&nbsp;can&nbsp;be&nbsp;returned&nbsp;to&nbsp;the&nbsp;queue&nbsp;using&nbsp;AMQP&nbsp;methods&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;feature&nbsp;a&nbsp;requeue&nbsp;parameter&nbsp;(&lt;span&nbsp;class=&quot;code&nbsp;&quot;&gt;basic.recover&lt;/span&gt;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;class=&quot;code&nbsp;&quot;&gt;basic.reject&lt;/span&gt;&nbsp;and&nbsp;&lt;span&nbsp;class=&quot;code&nbsp;&quot;&gt;basic.nack&lt;/span&gt;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;due&nbsp;to&nbsp;a&nbsp;channel&nbsp;closing&nbsp;while&nbsp;holding&nbsp;unacknowledged&nbsp;messages.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Any&nbsp;of&nbsp;these&nbsp;scenarios&nbsp;caused&nbsp;messages&nbsp;to&nbsp;be&nbsp;requeued&nbsp;at&nbsp;the&nbsp;back<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;queue&nbsp;for&nbsp;RabbitMQ&nbsp;releases&nbsp;earlier&nbsp;than&nbsp;2.7.0.&nbsp;From<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RabbitMQ&nbsp;release&nbsp;2.7.0,&nbsp;messages&nbsp;&lt;b&gt;are&nbsp;always&nbsp;held&nbsp;in&nbsp;the&nbsp;queue<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;publication&nbsp;order&lt;/b&gt;,&nbsp;&lt;b&gt;even&nbsp;in&nbsp;the&nbsp;presence&nbsp;of&nbsp;requeueing<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;channel&nbsp;closure&lt;/b&gt;.&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&nbsp;With&nbsp;release&nbsp;2.7.0&nbsp;and&nbsp;later&nbsp;&lt;b&gt;it&nbsp;is&nbsp;still&nbsp;possible&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;individual&nbsp;consumers&nbsp;to&nbsp;observe&nbsp;messages&nbsp;out&nbsp;of&nbsp;order&nbsp;if&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queue&nbsp;has&nbsp;multiple&nbsp;subscribers&lt;/b&gt;.&nbsp;This&nbsp;is&nbsp;due&nbsp;to&nbsp;the&nbsp;actions<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;other&nbsp;subscribers&nbsp;who&nbsp;may&nbsp;requeue&nbsp;messages.&nbsp;From&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;perspective&nbsp;of&nbsp;the&nbsp;queue&nbsp;the&nbsp;messages&nbsp;are&nbsp;always&nbsp;held&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;publication&nbsp;order.&quot;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;So&nbsp;you've&nbsp;got&nbsp;to&nbsp;think&nbsp;about&nbsp;it&nbsp;in&nbsp;those&nbsp;terms.&nbsp;It's&nbsp;exactly&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;same&nbsp;with&nbsp;ActiveMQ&nbsp;message&nbsp;groups,&nbsp;because&nbsp;they&nbsp;are&nbsp;based&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;Exclusive&nbsp;Consumer&nbsp;feature,&nbsp;which&nbsp;states:&nbsp;&quot;The&nbsp;broker&nbsp;will&nbsp;pick&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;single&nbsp;MessageConsumer&nbsp;to&nbsp;get&nbsp;all&nbsp;the&nbsp;messages&nbsp;for&nbsp;a&nbsp;queue&nbsp;to&nbsp;ensure<br>
&nbsp;&nbsp;&nbsp;&nbsp;ordering.&nbsp;If&nbsp;that&nbsp;consumer&nbsp;fails,&nbsp;the&nbsp;broker&nbsp;will&nbsp;auto&nbsp;failover&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;choose&nbsp;another&nbsp;consumer.&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://activemq.apache.org/exclusive-consumer.html&quot;&gt;http://activemq.apache.org/exclusive-consumer.html&lt;/a&gt;)&nbsp;except&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;groups&nbsp;are&nbsp;parallel,&nbsp;so:&nbsp;&quot;...&nbsp;logically&nbsp;Message&nbsp;Groups&nbsp;are&nbsp;kinda<br>
&nbsp;&nbsp;&nbsp;&nbsp;like&nbsp;a&nbsp;parallel&nbsp;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;http://activemq.apache.org/exclusive-consumer.html&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title=&quot;Exclusive&nbsp;Consumer&quot;&gt;Exclusive&nbsp;Consumer&lt;/a&gt;.&nbsp;Rather&nbsp;than&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;messages&nbsp;going&nbsp;to&nbsp;a&nbsp;single&nbsp;consumer,&nbsp;the&nbsp;standard&nbsp;JMS&nbsp;header&nbsp;&lt;b&gt;JMSXGroupID&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;used&nbsp;to&nbsp;define&nbsp;which&nbsp;&lt;em&gt;message&nbsp;group&lt;/em&gt;&nbsp;the&nbsp;message&nbsp;belongs<br>
&nbsp;&nbsp;&nbsp;&nbsp;to.&nbsp;The&nbsp;Message&nbsp;Group&nbsp;feature&nbsp;then&nbsp;ensures&nbsp;that&nbsp;all&nbsp;messages&nbsp;for&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;same&nbsp;message&nbsp;group&nbsp;will&nbsp;be&nbsp;sent&nbsp;to&nbsp;the&nbsp;same&nbsp;JMS&nbsp;consumer&nbsp;-&nbsp;while<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;consumer&nbsp;stays&nbsp;alive.&nbsp;As&nbsp;soon&nbsp;as&nbsp;the&nbsp;consumer&nbsp;dies&nbsp;another&nbsp;will<br>
&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;chosen.&quot;&nbsp;(&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://activemq.apache.org/message-groups.html&quot;&gt;http://activemq.apache.org/message-groups.html&lt;/a&gt;).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;might&nbsp;be&nbsp;able&nbsp;kludge&nbsp;something&nbsp;similar&nbsp;using&nbsp;the&nbsp;consistent&nbsp;hash<br>
&nbsp;&nbsp;&nbsp;&nbsp;exchange&nbsp;plugin<br>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-consistent-hash-exchange/file/rabbitmq_v2_8_7/README.md&quot;&gt;http://hg.rabbitmq.com/rabbitmq-consistent-hash-exchange/file/rabbitmq_v2_8_7/README.md&lt;/a&gt;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;you&nbsp;will&nbsp;*not*&nbsp;get&nbsp;the&nbsp;same&nbsp;kind&nbsp;of&nbsp;guarantees.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;been&nbsp;asked&nbsp;about&nbsp;this&nbsp;feature&nbsp;before&nbsp;and&nbsp;will&nbsp;probably<br>
&nbsp;&nbsp;&nbsp;&nbsp;implement&nbsp;something&nbsp;like&nbsp;it&nbsp;in&nbsp;a&nbsp;future&nbsp;release.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Cheers,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Tim&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
