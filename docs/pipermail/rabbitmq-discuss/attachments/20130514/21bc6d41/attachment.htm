<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Oh&nbsp;you&amp;#39;re&nbsp;right!&nbsp;-&nbsp;it&nbsp;broke&nbsp;because&nbsp;I&nbsp;removed&nbsp;the&nbsp;guest&nbsp;user,&nbsp;not&nbsp;because&nbsp;I&nbsp;had&nbsp;a&nbsp;second&nbsp;username.&nbsp;I&nbsp;got&nbsp;confused&nbsp;as&nbsp;to&nbsp;what&nbsp;the&nbsp;username&nbsp;does,&nbsp;when&nbsp;I&nbsp;changed&nbsp;it&nbsp;to&nbsp;anything&nbsp;other&nbsp;than&nbsp;what&nbsp;was&nbsp;used&nbsp;to&nbsp;connect&nbsp;(which&nbsp;was&nbsp;a&nbsp;user&nbsp;on&nbsp;the&nbsp;system),&nbsp;it&nbsp;showed&nbsp;the&nbsp;user&nbsp;not&nbsp;found&nbsp;error.&lt;div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Everything&nbsp;is&nbsp;working&nbsp;like&nbsp;I&nbsp;wanted&nbsp;with&nbsp;the&nbsp;commands&nbsp;bellow.&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;One&nbsp;question&nbsp;however,&nbsp;if&nbsp;I&nbsp;have&nbsp;a&nbsp;topic&nbsp;exchange&nbsp;and&nbsp;I&nbsp;bind&nbsp;a&nbsp;queue&nbsp;with&nbsp;a&nbsp;routing&nbsp;key.&nbsp;Is&nbsp;the&nbsp;federation&nbsp;plugin&nbsp;able&nbsp;to&nbsp;determine&nbsp;and&nbsp;only&nbsp;federate&nbsp;relevant&nbsp;messages?&nbsp;--&nbsp;What&nbsp;I&nbsp;mean&nbsp;by&nbsp;that&nbsp;is&nbsp;if&nbsp;an&nbsp;exchange&nbsp;has&nbsp;no&nbsp;queues&nbsp;that&nbsp;match&nbsp;a&nbsp;routing&nbsp;key,&nbsp;will&nbsp;the&nbsp;message&nbsp;still&nbsp;be&nbsp;federated?&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;---&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;div&gt;On&nbsp;Cloud:&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;Sanity&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;delete_user&nbsp;guest&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_user&nbsp;portal&nbsp;password&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;set_user_tags&nbsp;portal&nbsp;administrator&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;New&nbsp;Vhost&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_vhost&nbsp;oracle&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;Federation&nbsp;details&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_permissions&nbsp;portal&nbsp;xanview.*&nbsp;xanview.*&nbsp;xanview.*&lt;/div&gt;&lt;div&gt;<br>
 &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&nbsp;local-username&nbsp;&amp;#39;&amp;quot;portal&amp;quot;&amp;#39;&lt;/div&gt;<br>
&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&nbsp;local-nodename&nbsp;&amp;#39;&amp;quot;portal&amp;quot;&amp;#39;&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_policy&nbsp;federate-me&nbsp;&amp;quot;^xanview&amp;quot;&nbsp;&amp;#39;{&amp;quot;federation-upstream-set&amp;quot;:&nbsp;&amp;quot;all&amp;quot;}&amp;#39;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;Local&nbsp;server&nbsp;1&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_user&nbsp;welbeck-dvr1&nbsp;password&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_permissions&nbsp;welbeck-dvr1&nbsp;xanview.*&nbsp;xanview.*&nbsp;xanview.*&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation-upstream&nbsp;welbeck-dvr1&nbsp;\&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp;&amp;#39;{&amp;quot;uri&amp;quot;:&amp;quot;amqp://&lt;a&nbsp;href=&quot;http://welbeck-dvr1:password@10.9.0.2/oracle&quot;&gt;welbeck-dvr1:password@10.9.0.2/oracle&lt;/a&gt;&amp;quot;}&amp;#39;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;Local&nbsp;server&nbsp;2&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_user&nbsp;test-dvr2&nbsp;password&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_permissions&nbsp;test-dvr2&nbsp;xanview.*&nbsp;xanview.*&nbsp;xanview.*&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation-upstream&nbsp;test-dvr2&nbsp;\&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&amp;#39;{&amp;quot;uri&amp;quot;:&amp;quot;amqp://&lt;a&nbsp;href=&quot;http://test-dvr2:password@10.9.0.3/oracle&quot;&gt;test-dvr2:password@10.9.0.3/oracle&lt;/a&gt;&amp;quot;}&amp;#39;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;XanBox&nbsp;1:&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;New&nbsp;Vhost&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;delete_user&nbsp;guest&nbsp;#&nbsp;sanity&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_vhost&nbsp;oracle&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;Federation&nbsp;details&lt;/div&gt;&lt;div&gt;<br>
<br>
 &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&nbsp;local-username&nbsp;&amp;#39;&amp;quot;welbeck-dvr1&amp;quot;&amp;#39;&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&nbsp;local-nodename&nbsp;&amp;#39;&amp;quot;welbeck-dvr1&amp;quot;&amp;#39;&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_policy&nbsp;federate-me&nbsp;&amp;quot;^xanview&amp;quot;&nbsp;&amp;#39;{&amp;quot;federation-upstream-set&amp;quot;:&nbsp;&amp;quot;all&amp;quot;}&amp;#39;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;User&nbsp;&amp;amp;&nbsp;upstream&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_user&nbsp;welbeck-dvr1&nbsp;password&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_permissions&nbsp;welbeck-dvr1&nbsp;xanview.*&nbsp;xanview.*&nbsp;xanview.*&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation-upstream&nbsp;Portal&nbsp;\&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&amp;#39;{&amp;quot;uri&amp;quot;:&amp;quot;amqp://&lt;a&nbsp;href=&quot;http://welbeck-dvr1:password@10.9.0.1/oracle&quot;&gt;welbeck-dvr1:password@10.9.0.1/oracle&lt;/a&gt;&amp;quot;}&amp;#39;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;XanBox&nbsp;2:&lt;/div&gt;&lt;div&gt;<br>
 &nbsp;#&nbsp;New&nbsp;Vhost&lt;/div&gt;<br>
&lt;div&gt; &nbsp;rabbitmqctl&nbsp;delete_user&nbsp;guest&nbsp;#&nbsp;Sanity&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_vhost&nbsp;oracle&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;Federation&nbsp;details&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&nbsp;local-username&nbsp;&amp;#39;&amp;quot;test-dvr2&amp;quot;&amp;#39;&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&nbsp;local-nodename&nbsp;&amp;#39;&amp;quot;test-dvr2&amp;quot;&amp;#39;&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_policy&nbsp;federate-me&nbsp;&amp;quot;^xanview&amp;quot;&nbsp;&amp;#39;{&amp;quot;federation-upstream-set&amp;quot;:&nbsp;&amp;quot;all&amp;quot;}&amp;#39;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;#&nbsp;User&nbsp;&amp;amp;&nbsp;upstream&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;add_user&nbsp;test-dvr2&nbsp;password&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_permissions&nbsp;test-dvr2&nbsp;xanview.*&nbsp;xanview.*&nbsp;xanview.*&lt;/div&gt;&lt;div&gt; &nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation-upstream&nbsp;Portal&nbsp;\&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&amp;#39;{&amp;quot;uri&amp;quot;:&amp;quot;amqp://&lt;a&nbsp;href=&quot;http://test-dvr2:password@10.9.0.1/oracle&quot;&gt;test-dvr2:password@10.9.0.1/oracle&lt;/a&gt;&amp;quot;}&amp;#39;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
On&nbsp;14&nbsp;May&nbsp;2013&nbsp;14:46,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;14/05/13&nbsp;14:24,&nbsp;Roman&nbsp;Gaufman&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Yes&nbsp;but&nbsp;I&nbsp;want&nbsp;it&nbsp;biodirectional,&nbsp;I&nbsp;tried&nbsp;to&nbsp;simplify&nbsp;the&nbsp;example,&nbsp;but&nbsp;I&lt;br&gt;<br>
guess&nbsp;that&nbsp;wasn&amp;#39;t&nbsp;helpful.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Ah,&nbsp;got&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;lt;snip&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
They&nbsp;each&nbsp;have&nbsp;a&nbsp;RabbitMQ&nbsp;instance,&nbsp;on&nbsp;each&nbsp;one&nbsp;I&nbsp;do:&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
 1.&nbsp;Create&nbsp;vhost:&nbsp;oracle&lt;br&gt;<br>
 2.&nbsp;Create&nbsp;new&nbsp;users:&nbsp;moscow:password,&nbsp;london:password,&nbsp;cloud:password&lt;br&gt;<br>
 3.&nbsp;Set&nbsp;permissions&nbsp;for&nbsp;all&nbsp;users&nbsp;for&nbsp;the&nbsp;oracle&nbsp;vhost:&nbsp;.*&nbsp;.*&nbsp;.*&lt;br&gt;<br>
 4.&nbsp;Set&nbsp;local&nbsp;username&nbsp;and&nbsp;nodename&lt;br&gt;<br>
 &nbsp; &nbsp; 1.&nbsp;Cloud:&nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;local-username&nbsp;&amp;#39;&amp;quot;Cloud&amp;quot;&amp;#39;&lt;br&gt;<br>
 &nbsp; &nbsp; 2.&nbsp;London:&nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;local-nodename&nbsp;&amp;#39;&amp;quot;London&amp;quot;&amp;#39;&lt;br&gt;<br>
 &nbsp; &nbsp; 3.&nbsp;Moscow:&nbsp;rabbitmqctl&nbsp;-p&nbsp;oracle&nbsp;set_parameter&nbsp;federation&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;local-nodename&nbsp;&amp;#39;&amp;quot;Moscow&amp;quot;&amp;#39;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
So&nbsp;here&nbsp;you&nbsp;are&nbsp;setting&nbsp;the&nbsp;local-username&nbsp;to&nbsp;&amp;quot;Cloud&amp;quot;,&nbsp;but&nbsp;local-nodename&nbsp;to&nbsp;&amp;quot;London&amp;quot;&nbsp;/&nbsp;&amp;quot;Moscow&amp;quot;.&nbsp;Is&nbsp;that&nbsp;another&nbsp;simplification?&nbsp;Is&nbsp;that&nbsp;happening&nbsp;on&nbsp;the&nbsp;same&nbsp;machine?&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;lt;snip&amp;gt;&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;configuration&nbsp;looks&nbsp;reasonable.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Now&nbsp;the&nbsp;problem&nbsp;comes&nbsp;when&nbsp;I&nbsp;set&nbsp;a&nbsp;federation&nbsp;upstream&nbsp;on&nbsp;the&nbsp;&amp;quot;Local&amp;quot;&lt;br&gt;<br>
servers&nbsp;(London&nbsp;and&nbsp;Moscow),&nbsp;I&nbsp;want&nbsp;to&nbsp;have&nbsp;a&nbsp;different&lt;br&gt;<br>
username/password&nbsp;on&nbsp;each.&nbsp;But&nbsp;it&nbsp;seems&nbsp;the&nbsp;&amp;quot;Cloud&amp;quot;&nbsp;upstream&nbsp;must&nbsp;always&lt;br&gt;<br>
have&nbsp;the&nbsp;same&nbsp;username/password?&nbsp;-&nbsp;Unless&nbsp;I&nbsp;am&nbsp;misunderstanding&nbsp;something?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
I&amp;#39;m&nbsp;afraid&nbsp;it&amp;#39;s&nbsp;still&nbsp;not&nbsp;tremendously&nbsp;clear&nbsp;what&nbsp;you&nbsp;are&nbsp;asking&nbsp;here.&nbsp;If&nbsp;you&nbsp;want&nbsp;&amp;quot;London&amp;quot;&nbsp;to&nbsp;connect&nbsp;to&nbsp;&amp;quot;Cloud&amp;quot;&nbsp;using&nbsp;one&nbsp;username&nbsp;and&nbsp;&amp;quot;Moscow&amp;quot;&nbsp;to&nbsp;connect&nbsp;to&nbsp;&amp;quot;Cloud&amp;quot;&nbsp;with&nbsp;another,&nbsp;then&nbsp;you&nbsp;can&nbsp;do&nbsp;that&nbsp;-&nbsp;just&nbsp;set&nbsp;the&nbsp;usernames&nbsp;/&nbsp;passwords&nbsp;in&nbsp;the&nbsp;URLs&nbsp;differently.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
Yes,&nbsp;I&nbsp;did&nbsp;all&nbsp;that,&nbsp;but&nbsp;I&nbsp;want&nbsp;to&nbsp;federate&nbsp;in&nbsp;both&nbsp;directions.&nbsp;If&nbsp;I&nbsp;do&lt;br&gt;<br>
the&nbsp;above,&nbsp;all&nbsp;messages&nbsp;I&nbsp;write&nbsp;to&nbsp;the&nbsp;Local&nbsp;servers&nbsp;(London,&nbsp;Moscow)&nbsp;I&lt;br&gt;<br>
can&nbsp;consume&nbsp;on&nbsp;the&nbsp;Cloud&nbsp;server,&nbsp;however&nbsp;if&nbsp;I&nbsp;write&nbsp;from&nbsp;the&nbsp;Cloud&lt;br&gt;<br>
server,&nbsp;I&nbsp;cannot&nbsp;consume&nbsp;the&nbsp;messages&nbsp;on&nbsp;the&nbsp;Local&nbsp;servers.&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;do&nbsp;that,&nbsp;I&nbsp;need&nbsp;to&nbsp;add&nbsp;federation&nbsp;upstreams&nbsp;on&nbsp;the&nbsp;local&nbsp;servers:&lt;br&gt;<br>
&lt;br&gt;<br>
rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;Cloud&lt;br&gt;<br>
&amp;#39;{&amp;quot;uri&amp;quot;:&amp;quot;amqp://&lt;a&nbsp;href=&quot;http://london:password@10.9.0.1/oracle&quot;&nbsp;target=&quot;_blank&quot;&gt;london:&lt;u&gt;&lt;/u&gt;password@10.9.0.1/oracle&lt;/a&gt;&lt;br&gt;&lt;/div&gt;<br>
&amp;lt;&lt;a&nbsp;href=&quot;http://london:password@10.9.0.1/oracle&quot;&nbsp;target=&quot;_blank&quot;&gt;http://london:password@10.9.&lt;u&gt;&lt;/u&gt;0.1/oracle&lt;/a&gt;&amp;gt;&amp;quot;}&amp;#39;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;Cloud&lt;br&gt;<br>
&amp;#39;{&amp;quot;uri&amp;quot;:&amp;quot;amqp://&lt;a&nbsp;href=&quot;http://moscow:password@10.9.0.1/oracle&quot;&nbsp;target=&quot;_blank&quot;&gt;moscow:&lt;u&gt;&lt;/u&gt;password@10.9.0.1/oracle&lt;/a&gt;&lt;br&gt;&lt;/div&gt;<br>
&amp;lt;&lt;a&nbsp;href=&quot;http://moscow:password@10.9.0.1/oracle&quot;&nbsp;target=&quot;_blank&quot;&gt;http://moscow:password@10.9.&lt;u&gt;&lt;/u&gt;0.1/oracle&lt;/a&gt;&amp;gt;&amp;quot;}&amp;#39;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;I&nbsp;cannot&nbsp;do&nbsp;that&nbsp;because&nbsp;RabbitMQ&nbsp;only&nbsp;accepts&nbsp;a&nbsp;single&lt;br&gt;<br>
local-username&nbsp;:(&nbsp;-&nbsp;Am&nbsp;I&nbsp;missing&nbsp;something?&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Ah&nbsp;-&nbsp;I&nbsp;think&nbsp;I&nbsp;understand&nbsp;what&nbsp;you&nbsp;are&nbsp;missing.&nbsp;Do&nbsp;you&nbsp;think&nbsp;local-username&nbsp;must&nbsp;correspond&nbsp;to&nbsp;the&nbsp;username&nbsp;set&nbsp;in&nbsp;another&nbsp;server&amp;#39;s&nbsp;upstream&nbsp;URL?&nbsp;That&amp;#39;s&nbsp;not&nbsp;the&nbsp;case.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;remote&nbsp;username(s)&nbsp;(i.e.&nbsp;the&nbsp;ones&nbsp;in&nbsp;the&nbsp;upstream&nbsp;URLs)&nbsp;need&nbsp;to&nbsp;be&nbsp;valid&nbsp;users&nbsp;in&nbsp;the&nbsp;upstream&nbsp;host.&nbsp;I&nbsp;think&nbsp;you&nbsp;have&nbsp;that&nbsp;right.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;local-username&nbsp;just&nbsp;needs&nbsp;to&nbsp;exist&nbsp;locally&nbsp;and&nbsp;be&nbsp;able&nbsp;to&nbsp;publish&nbsp;messages;&nbsp;it&amp;#39;s&nbsp;used&nbsp;to&nbsp;republish&nbsp;messages&nbsp;that&nbsp;have&nbsp;been&nbsp;received&nbsp;from&nbsp;a&nbsp;remote&nbsp;host.&nbsp;*It&nbsp;does&nbsp;not&nbsp;need&nbsp;to&nbsp;correspond&nbsp;to&nbsp;anything&nbsp;else*.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;fact&nbsp;that&nbsp;you&nbsp;are&nbsp;seeing&nbsp;{error,user_does_not_exist}&nbsp;on&nbsp;a&nbsp;certain&nbsp;host&nbsp;means&nbsp;that&nbsp;you&nbsp;have&nbsp;set&nbsp;the&nbsp;local-username&nbsp;to&nbsp;the&nbsp;name&nbsp;of&nbsp;a&nbsp;user&nbsp;that&nbsp;does&nbsp;not&nbsp;exist&nbsp;on&nbsp;that&nbsp;host.&nbsp;Or&nbsp;that&nbsp;you&nbsp;have&nbsp;not&nbsp;set&nbsp;it,&nbsp;it;s&nbsp;defaulting&nbsp;to&nbsp;&amp;quot;guest&amp;quot;,&nbsp;and&nbsp;&amp;quot;guest&amp;quot;&nbsp;does&nbsp;not&nbsp;exist.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Does&nbsp;this&nbsp;make&nbsp;sense?&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
