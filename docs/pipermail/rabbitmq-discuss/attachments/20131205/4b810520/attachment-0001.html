<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;Hello&nbsp;Simon,&nbsp;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Oops.&nbsp;I&nbsp;meant&nbsp;to&nbsp;say&nbsp;I&nbsp;removed&nbsp;acks.&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Shri&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&lt;br&gt;Simon&nbsp;MacMullen&nbsp;&lt;simon@rabbitmq.com&gt;&nbsp;wrote:&lt;br&gt;Are&nbsp;you&nbsp;saying&nbsp;you&nbsp;turned&nbsp;*off*&nbsp;auto-ack&nbsp;-&nbsp;i.e.&nbsp;you&nbsp;turned&nbsp;&lt;br&gt;acknowledgements&nbsp;on?&nbsp;If&nbsp;so,&nbsp;that&nbsp;would&nbsp;account&nbsp;for&nbsp;greater&nbsp;network&nbsp;and&nbsp;&lt;br&gt;CPU&nbsp;use.&lt;br&gt;&lt;br&gt;Cheers,&nbsp;Simon&lt;br&gt;&lt;br&gt;On&nbsp;04/12/2013&nbsp;23:11,&nbsp;shridharan&nbsp;muthu&nbsp;wrote:&lt;br&gt;&gt;&nbsp;Hello&nbsp;there,&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;a&nbsp;performance&nbsp;optimization&nbsp;on&nbsp;our&nbsp;rabbit&nbsp;mq&nbsp;cluster&nbsp;(of&nbsp;2&lt;br&gt;&gt;&nbsp;nodes),&nbsp;I&nbsp;removed&nbsp;following&nbsp;from&nbsp;a&nbsp;high&nbsp;volume&nbsp;non-durable&nbsp;queue&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;&nbsp;1.&nbsp;AMQP_MANDATORY&nbsp;flag&nbsp;during&nbsp;publish&nbsp;and&lt;br&gt;&gt;&nbsp;&nbsp;2.&nbsp;AMQP_AUTOACK&nbsp;during&nbsp;consume.&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;As&nbsp;a&nbsp;result&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;on&nbsp;that&nbsp;queue&nbsp;went&nbsp;down&nbsp;from&nbsp;150&nbsp;to&lt;br&gt;&gt;&nbsp;15&nbsp;which&nbsp;is&nbsp;fantastic&nbsp;and&nbsp;expected.&nbsp;But&nbsp;this&nbsp;also&nbsp;increased&nbsp;overall&nbsp;cpu&lt;br&gt;&gt;&nbsp;usage&nbsp;from&nbsp;22%&nbsp;to&nbsp;32%&nbsp;with&nbsp;an&nbsp;increased&nbsp;network&nbsp;traffic&nbsp;from&nbsp;30k&lt;br&gt;&gt;&nbsp;packets/sec&nbsp;to&nbsp;40k&nbsp;packets/sec.&nbsp;The&nbsp;ingress&nbsp;&amp;&nbsp;egress&nbsp;rate&nbsp;stayed&nbsp;the&lt;br&gt;&gt;&nbsp;same&nbsp;before&nbsp;and&nbsp;after&nbsp;the&nbsp;change&nbsp;i.e.&nbsp;around&nbsp;300&nbsp;msgs/sec.&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;So,&nbsp;my&nbsp;question&nbsp;is&nbsp;why&nbsp;would&nbsp;network&nbsp;traffic&nbsp;increase&nbsp;when&nbsp;I&nbsp;make&nbsp;all&lt;br&gt;&gt;&nbsp;calls&nbsp;asynchronous&nbsp;when&nbsp;the&nbsp;ingress&nbsp;&amp;&nbsp;egress&nbsp;rate&nbsp;is&nbsp;same&nbsp;?&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;More&nbsp;info&nbsp;about&nbsp;the&nbsp;cluster:&lt;br&gt;&gt;&nbsp;shri@mq1:~$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;status&lt;br&gt;&gt;&nbsp;Status&nbsp;of&nbsp;node&nbsp;rabbit@mq1&nbsp;...&lt;br&gt;&gt;&nbsp;[{pid,11689},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{running_applications,&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{rabbitmq_management,&quot;RabbitMQ&nbsp;Management&nbsp;Console&quot;,&quot;3.0.2&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{rabbitmq_management_agent,&quot;RabbitMQ&nbsp;Management&nbsp;Agent&quot;,&quot;3.0.2&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{rabbit,&quot;RabbitMQ&quot;,&quot;3.0.2&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os_mon,&quot;CPO&nbsp;&nbsp;CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.4&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{rabbitmq_mochiweb,&quot;RabbitMQ&nbsp;Mochiweb&nbsp;Embedding&quot;,&quot;3.0.2&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{webmachine,&quot;webmachine&quot;,&quot;1.9.1-rmq3.0.2-git52e62bc&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mochiweb,&quot;MochiMedia&nbsp;Web&nbsp;Server&quot;,&quot;2.3.1-rmq3.0.2-gitd541e9a&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mnesia,&quot;MNESIA&nbsp;&nbsp;CXC&nbsp;138&nbsp;12&quot;,&quot;4.4.12&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{amqp_client,&quot;RabbitMQ&nbsp;AMQP&nbsp;Client&quot;,&quot;3.0.2&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{xmerl,&quot;XML&nbsp;parser&quot;,&quot;1.2.3&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{inets,&quot;INETS&nbsp;&nbsp;CXC&nbsp;138&nbsp;49&quot;,&quot;5.2&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sasl,&quot;SASL&nbsp;&nbsp;CXC&nbsp;138&nbsp;11&quot;,&quot;2.1.8&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{stdlib,&quot;ERTS&nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;1.16.4&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{kernel,&quot;ERTS&nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;2.13.4&quot;}]},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{os,{unix,linux}},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{erlang_version,&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Erlang&nbsp;R13B03&nbsp;(erts-5.7.4)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:12:12]&nbsp;[rq:12]&lt;br&gt;&gt;&nbsp;[async-threads:30]&nbsp;[hipe]&nbsp;[kernel-poll:true]\n&quot;},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{memory,&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{total,469535752},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{connection_procs,17995944},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{queue_procs,11675696},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{plugins,230048},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{other_proc,126014264},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mnesia,18446743803509563784},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mgmt_db,12530864},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{msg_index,1934440},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{other_ets,-18446743803280937440},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{binary,5524296},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{code,18395964},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{atom,3440321},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{other_system,43167571}]},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{vm_memory_high_watermark,0.4},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{vm_memory_limit,5047128883},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{disk_free_limit,1000000000},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{disk_free,482189381632},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{file_descriptors,&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{total_limit,65436},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{total_used,309},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sockets_limit,58890},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sockets_used,298}]},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{processes,[{limit,1048576},{used,2992}]},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{run_queue,7},&lt;br&gt;&gt;&nbsp;&nbsp;&nbsp;{uptime,23771203}]&lt;br&gt;&gt;&nbsp;...done.&lt;br&gt;&gt;&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;Thank&nbsp;you,&lt;br&gt;&gt;&nbsp;Shri&lt;br&gt;&gt;&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;_______________________________________________&lt;br&gt;&gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&gt;&nbsp;rabbitmq-discuss@lists.rabbitmq.com&lt;br&gt;&gt;&nbsp;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;br&gt;&gt;&lt;br&gt;&lt;br&gt;&lt;/body&gt;
</tt>
