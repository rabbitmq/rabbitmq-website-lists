<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;all.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;leaning&nbsp;rabbitmq&nbsp;use&nbsp;haproxy&nbsp;to&nbsp;execute&nbsp;failover&nbsp;in&nbsp;a&nbsp;cluster.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;IP&nbsp;server&nbsp;rabbitmq_1:&nbsp;10.0.0.101&nbsp;port:&nbsp;15672&lt;/div&gt;&lt;div&gt;IP&nbsp;server&nbsp;rabbitmq_2:&nbsp;192.168.247.129&nbsp;port:&nbsp;15672&lt;br&gt;&lt;/div&gt;&lt;div&gt;IP&nbsp;server&nbsp;haproxy:&nbsp;192.168.247.131&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Haproxy&nbsp;config&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;#&nbsp;HAProxy&nbsp;Config&nbsp;for&nbsp;Local&nbsp;RabbitMQ&nbsp;SLB&nbsp;Warren&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;global&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;log&nbsp;127.0.0.1&nbsp;local0&nbsp;info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;maxconn&nbsp;4096&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;daemon&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;nbproc&nbsp;1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;defaults&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;log&nbsp;global&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;mode&nbsp;tcp&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;option&nbsp;tcplog&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;option&nbsp;dontlognull&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;retries&nbsp;3&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;option&nbsp;redispatch&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;maxconn&nbsp;2000&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;timeout&nbsp;connect&nbsp;5s&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;timeout&nbsp;client&nbsp;120s&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;timeout&nbsp;server&nbsp;120s&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;listen&nbsp;rabbitmq_local_cluster&nbsp;192.168.247.131:8088&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;mode&nbsp;tcp&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;balance&nbsp;roundrobin&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;server&nbsp;rabbit_a&nbsp;10.0.0.101:15672&nbsp;check&nbsp;inter&nbsp;5000&nbsp;rise&nbsp;2&nbsp;fall&nbsp;3&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;server&nbsp;rabbit_b&nbsp;192.168.247.129:15672&nbsp;backup&nbsp;inter&nbsp;5000&nbsp;rise&nbsp;2&nbsp;fall&nbsp;3&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;listen&nbsp;private_monitoring&nbsp;:8101&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;mode&nbsp;http&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;log&nbsp;global&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;maxconn&nbsp;10&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;clitimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100s&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srvtimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100s&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100s&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout&nbsp;queue&nbsp;&nbsp;&nbsp;100s&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;option&nbsp;httplog&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;stats&nbsp;hide-version&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;stats&nbsp;show-node&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;stats&nbsp;enable&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;stats&nbsp;auth&nbsp;admin:123456&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;stats&nbsp;uri&nbsp;/stats&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;stats&nbsp;refresh&nbsp;5s&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Code&nbsp;APP&nbsp;send&nbsp;message&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;class&nbsp;Send&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;Main()&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory&nbsp;{&nbsp;HostName&nbsp;=&nbsp;&quot;192.168.247.131&quot;,&nbsp;Port=8088&nbsp;};&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;(var&nbsp;connection&nbsp;=&nbsp;factory.CreateConnection())&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;(var&nbsp;channel&nbsp;=&nbsp;connection.CreateModel())&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//channel.QueueDeclare(&quot;hello&quot;,&nbsp;false,&nbsp;false,&nbsp;false,&nbsp;null);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel.QueueDeclare(&quot;q_A&quot;,&nbsp;false,&nbsp;false,&nbsp;false,&nbsp;null);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel.QueueDeclare(&quot;q_B&quot;,&nbsp;false,&nbsp;false,&nbsp;false,&nbsp;null);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(true)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;message&nbsp;=&nbsp;&quot;Hello&nbsp;World!&nbsp;&quot;&nbsp;+&nbsp;i.ToString();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;body&nbsp;=&nbsp;Encoding.UTF8.GetBytes(message);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel.BasicPublish(&quot;&quot;,&nbsp;&quot;q_A&quot;,&nbsp;null,&nbsp;body);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel.BasicPublish(&quot;&quot;,&nbsp;&quot;q_B&quot;,&nbsp;null,&nbsp;body);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(&quot;&nbsp;[x]&nbsp;Sent&nbsp;{0}&quot;,&nbsp;message);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i++;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread.Sleep(1000);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.Read();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#ff9900&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;pls&nbsp;help&nbsp;me.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;so&nbsp;muck.&lt;/div&gt;&lt;div&gt;&lt;br&gt;On&nbsp;Thursday,&nbsp;16&nbsp;July&nbsp;2009&nbsp;21:45:56&nbsp;UTC+7,&nbsp;Tammo....@btc-ag.com&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&gt;<br>
&lt;font&nbsp;face=&quot;Calibri,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;<br>
&lt;div&gt;Hy,&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;i´m&nbsp;building&nbsp;a&nbsp;client&nbsp;server&nbsp;.net&nbsp;application&nbsp;that&nbsp;uses&nbsp;rabbitmq&nbsp;as&nbsp;mom.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;the&nbsp;code&nbsp;i´m&nbsp;using&nbsp;to&nbsp;pulish&nbsp;messages&nbsp;is:&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#2B91AF&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;IProtocol&lt;/font&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&nbsp;color=&quot;#000000&quot;&gt;&nbsp;protocol&nbsp;=&nbsp;&lt;/font&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;Protocols&lt;/font&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&nbsp;color=&quot;#000000&quot;&gt;.FromEnvironment();&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;color=&quot;#2B91AF&quot;&gt;IConnection&lt;/font&gt;&nbsp;conn&nbsp;=&nbsp;factory.CreateConnection(&lt;wbr&gt;rmqBrokerUrl);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;color=&quot;#2B91AF&quot;&gt;IModel&lt;/font&gt;&nbsp;channel&nbsp;&nbsp;=&nbsp;conn.CreateModel();&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.AutoClose&nbsp;=&nbsp;&lt;font&nbsp;color=&quot;#0000FF&quot;&gt;true&lt;/font&gt;;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;color=&quot;#2B91AF&quot;&gt;IBasicProperties&lt;/font&gt;&nbsp;props&nbsp;=&nbsp;channel.CreateBasicProperties(&lt;wbr&gt;);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel.BasicPublish(exchange,&nbsp;routingKey,&nbsp;props,&nbsp;buffer);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel.Close(200,&nbsp;&lt;font&nbsp;color=&quot;#A31515&quot;&gt;&quot;Goodbye&quot;&lt;/font&gt;);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New,&nbsp;monospace&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;after&nbsp;sending&nbsp;about&nbsp;4000msg&nbsp;each&nbsp;in&nbsp;a&nbsp;single&nbsp;thread&nbsp;using&nbsp;the&nbsp;above&nbsp;code,&nbsp;&nbsp;im&nbsp;getting&nbsp;error&nbsp;that&nbsp;states:&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&quot;None&nbsp;of&nbsp;the&nbsp;specified&nbsp;endpoints&nbsp;were&nbsp;reachable&quot;.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;any&nbsp;hints&nbsp;on&nbsp;this?&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;thanks&nbsp;a&nbsp;lot,&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;Tammo&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;/font&gt;<br>
&lt;/div&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
