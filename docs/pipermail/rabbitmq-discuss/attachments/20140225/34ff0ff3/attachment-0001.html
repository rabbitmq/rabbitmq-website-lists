<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;How&nbsp;to&nbsp;reproduce:&lt;br&gt;<br>
1)&nbsp;Connect&nbsp;to&nbsp;stomp,&nbsp;make&nbsp;some&nbsp;subscriptions&lt;br&gt;<br>
2)&nbsp;Try&nbsp;to&nbsp;SEND&nbsp;something&nbsp;to&nbsp;exchange&nbsp;you&nbsp;don&#39;t&nbsp;have&nbsp;rights&nbsp;to,&nbsp;a&nbsp;record&nbsp;like&nbsp;this&nbsp;will&nbsp;appear&nbsp;in&nbsp;log&nbsp;which&nbsp;is&nbsp;OK:&lt;/p&gt;<br>
<br>
&lt;pre&gt;&lt;code&gt;<br>
=ERROR&nbsp;REPORT====&nbsp;25-Feb-2014::10:40:32&nbsp;===<br>
connection&nbsp;&lt;0.27089.0&gt;,&nbsp;channel&nbsp;1&nbsp;-&nbsp;soft&nbsp;error:<br>
{amqp_error,access_refused,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;access&nbsp;to&nbsp;exchange&nbsp;&#39;production.main.services.presence&#39;&nbsp;in&nbsp;vhost&nbsp;&#39;frontend&#39;&nbsp;refused&nbsp;for&nbsp;user&nbsp;&#39;{\&quot;userId\&quot;:1,\&quot;namespaces\&quot;:[\&quot;production.main\&quot;]}&#39;&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;basic.publish&#39;}<br>
<br>
&lt;/code&gt;&lt;/pre&gt;<br>
<br>
&lt;p&gt;3)&nbsp;&lt;a&nbsp;href=&quot;https://lh4.googleusercontent.com/-YXrCFotPYRk/Uww8v7H0FHI/AAAAAAAADXM/dtH_H3ZzkE8/s756/file2nqmNa.png&quot;&gt;https://lh4.googleusercontent.com/-YXrCFotPYRk/Uww8v7H0FHI/AAAAAAAADXM/dtH_H3ZzkE8/s756/file2nqmNa.png&lt;/a&gt;&lt;br&gt;<br>
<br>
Websocket&nbsp;remains&nbsp;active,&nbsp;js&nbsp;is&nbsp;able&nbsp;to&nbsp;send&nbsp;messages,&nbsp;without&nbsp;any&nbsp;reaction&nbsp;althrough.&lt;/p&gt;<br>
<br>
&lt;p&gt;Expected&nbsp;behaviour:&lt;br&gt;<br>
Connection&nbsp;should&nbsp;be&nbsp;closed&nbsp;with&nbsp;the&nbsp;channel.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
