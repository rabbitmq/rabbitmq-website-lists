<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hey,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm&nbsp;pretty&nbsp;new&nbsp;to&nbsp;RabbitMQ&nbsp;and&nbsp;AMQP&nbsp;in&nbsp;general&nbsp;and&nbsp;I&nbsp;have&nbsp;the&nbsp;feeling&nbsp;my&nbsp;design&nbsp;decisions&nbsp;regarding&nbsp;this&nbsp;problem&nbsp;might&nbsp;be&nbsp;wrong.&nbsp;So,&nbsp;the&nbsp;problem:&nbsp;I&nbsp;have&nbsp;a&nbsp;relational&nbsp;database&nbsp;with&nbsp;a&nbsp;notifications&nbsp;table&nbsp;where&nbsp;each&nbsp;notification&nbsp;has&nbsp;many&nbsp;associated&nbsp;apps.&nbsp;Each&nbsp;app&nbsp;has&nbsp;itself&nbsp;many&nbsp;devices.&nbsp;Now,&nbsp;a&nbsp;producer&nbsp;will&nbsp;check&nbsp;the&nbsp;table&nbsp;for&nbsp;new&nbsp;notifications&nbsp;with&nbsp;a&nbsp;specific&nbsp;state.&nbsp;If&nbsp;there&nbsp;are&nbsp;any,&nbsp;grab&nbsp;them&nbsp;and&nbsp;produce&nbsp;a&nbsp;message&nbsp;for&nbsp;each&nbsp;device&nbsp;in&nbsp;each&nbsp;app&nbsp;associated&nbsp;with&nbsp;the&nbsp;new&nbsp;notification.&nbsp;After&nbsp;that,&nbsp;some&nbsp;consumer&nbsp;workers&nbsp;will&nbsp;work&nbsp;the&nbsp;queue(s)&nbsp;off&nbsp;and&nbsp;deliver&nbsp;the&nbsp;messages&nbsp;to&nbsp;the&nbsp;devices.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now,&nbsp;since&nbsp;the&nbsp;message&nbsp;payload&nbsp;will&nbsp;differ&nbsp;depending&nbsp;on&nbsp;the&nbsp;app&nbsp;type,&nbsp;my&nbsp;idea&nbsp;was&nbsp;to&nbsp;dynamically&nbsp;generate&nbsp;queues&nbsp;for&nbsp;each&nbsp;app&nbsp;for&nbsp;a&nbsp;notification.&nbsp;Having&nbsp;a&nbsp;notification&nbsp;with&nbsp;ID=42&nbsp;and&nbsp;associated&nbsp;apps&nbsp;with&nbsp;IDS=110,&nbsp;112,&nbsp;I&nbsp;would&nbsp;generate&nbsp;the&nbsp;queues&nbsp;&quot;42_110&quot;&nbsp;and&nbsp;&quot;42_112&quot;.&nbsp;Then,&nbsp;consumer&nbsp;workers&nbsp;would&nbsp;be&nbsp;notified&nbsp;about&nbsp;the&nbsp;new&nbsp;queues&nbsp;and&nbsp;work&nbsp;them&nbsp;off.&nbsp;As&nbsp;the&nbsp;workers&nbsp;need&nbsp;the&nbsp;notification&nbsp;and&nbsp;app&nbsp;data&nbsp;in&nbsp;addition&nbsp;to&nbsp;the&nbsp;message&nbsp;payload&nbsp;itself,&nbsp;they&nbsp;could&nbsp;easily&nbsp;get&nbsp;it&nbsp;by&nbsp;splitting&nbsp;the&nbsp;queue&nbsp;name&nbsp;at&nbsp;&quot;_&quot;&nbsp;and&nbsp;querying&nbsp;the&nbsp;database.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Despite&nbsp;I&nbsp;think&nbsp;this&nbsp;could&nbsp;work,&nbsp;it&nbsp;just&nbsp;doesn't&nbsp;feel&nbsp;right.&nbsp;Is&nbsp;there&nbsp;any&nbsp;opinionated&nbsp;way&nbsp;to&nbsp;go?&nbsp;How&nbsp;would&nbsp;you&nbsp;design&nbsp;it?&nbsp;Appreciating&nbsp;any&nbsp;help.&nbsp;:)&lt;/div&gt;&lt;/div&gt;
</tt>
