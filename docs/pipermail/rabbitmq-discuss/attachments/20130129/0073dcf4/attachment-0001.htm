<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Thanks&nbsp;much&nbsp;Simon,&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;are&nbsp;saying&nbsp;I&nbsp;only&nbsp;need&nbsp;to&nbsp;declare&nbsp;one&nbsp;setting&nbsp;in&nbsp;E?&amp;nbsp;&lt;/div&gt;&lt;div&gt;ie.&amp;nbsp;&lt;/div&gt;&lt;div&gt;in&nbsp;E:&lt;br&gt;rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;my-upstream&nbsp;'{&quot;uri&quot;:&quot;&lt;a&nbsp;href=&quot;amqp://A&quot;&gt;amqp://A&lt;/a&gt;&quot;,&nbsp;&quot;expires&quot;:3600}'&lt;br&gt;rabbitmqctl&nbsp;set_policy...&lt;br&gt;....&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now,&nbsp;it&nbsp;comes&nbsp;that&nbsp;if&nbsp;A&nbsp;which&nbsp;is&nbsp;my&nbsp;upstream&nbsp;fails,&nbsp;what&nbsp;would&nbsp;happen?&amp;nbsp;[A,&nbsp;B,&nbsp;C]&nbsp;is&nbsp;running&nbsp;with&nbsp;HAQ&nbsp;(active/active).&lt;/div&gt;&lt;div&gt;Do&nbsp;I&nbsp;just&nbsp;lost&nbsp;federation?&lt;/div&gt;&lt;div&gt;If&nbsp;not,&amp;nbsp;how&nbsp;does&nbsp;E&nbsp;handle&nbsp;this&nbsp;in&nbsp;case&nbsp;of&amp;nbsp;&lt;/div&gt;&lt;div&gt;1)&nbsp;A&nbsp;is&nbsp;a&nbsp;master&lt;/div&gt;&lt;div&gt;2)&nbsp;A&nbsp;is&nbsp;a&nbsp;slave&amp;nbsp;&lt;/div&gt;&lt;div&gt;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[E,&nbsp;F]&nbsp;also&nbsp;runs&nbsp;HAQ&nbsp;cluster,&nbsp;what&nbsp;if&nbsp;E&nbsp;dies,&nbsp;how&nbsp;to&nbsp;config&nbsp;F&nbsp;continue&nbsp;to&nbsp;perform&nbsp;as&nbsp;down-stream&nbsp;nodes&nbsp;as&nbsp;HAQ&nbsp;suppose&nbsp;to&nbsp;do&nbsp;?&nbsp;Can&nbsp;we&nbsp;achieve&nbsp;this?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yican&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Jan&nbsp;29,&nbsp;2013,&nbsp;at&nbsp;11:27&nbsp;AM,&nbsp;Simon&nbsp;MacMullen&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;You&nbsp;don't&nbsp;need&nbsp;to&nbsp;declare&nbsp;the&nbsp;same&nbsp;parameters&nbsp;and&nbsp;policies&nbsp;in&nbsp;E&nbsp;and&nbsp;F,&nbsp;&lt;br&gt;they're&nbsp;cluster-wide.&lt;br&gt;&lt;br&gt;You&nbsp;should&nbsp;note&nbsp;that&nbsp;if&nbsp;you&nbsp;specify&nbsp;nodes&nbsp;from&nbsp;the&nbsp;same&nbsp;cluster&nbsp;as&nbsp;&lt;br&gt;separate&nbsp;upstreams&nbsp;then&nbsp;the&nbsp;federated&nbsp;exchange&nbsp;will&nbsp;attempt&nbsp;to&nbsp;consume&nbsp;&lt;br&gt;from&nbsp;them&nbsp;all&nbsp;simultaneously&nbsp;-&nbsp;this&nbsp;might&nbsp;break&nbsp;message&nbsp;ordering.&nbsp;So&nbsp;you&nbsp;&lt;br&gt;would&nbsp;normally&nbsp;add&nbsp;each&nbsp;cluster&nbsp;once.&lt;br&gt;&lt;br&gt;At&nbsp;the&nbsp;moment&nbsp;there's&nbsp;no&nbsp;way&nbsp;to&nbsp;say&nbsp;&quot;all&nbsp;these&nbsp;upstreams&nbsp;are&nbsp;in&nbsp;the&nbsp;same&nbsp;&lt;br&gt;cluster,&nbsp;just&nbsp;ensure&nbsp;you&nbsp;use&nbsp;one&nbsp;of&nbsp;them&quot;&nbsp;although&nbsp;we&nbsp;hope&nbsp;to&nbsp;add&nbsp;this&nbsp;&lt;br&gt;in&nbsp;a&nbsp;future&nbsp;release.&lt;br&gt;&lt;br&gt;Cheers,&nbsp;Simon&lt;br&gt;&lt;br&gt;On&nbsp;28/01/13&nbsp;21:36,&nbsp;Cao,&nbsp;Yican&nbsp;-&nbsp;0551&nbsp;-&nbsp;MITLL&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hi,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;In&nbsp;federation&nbsp;document,&nbsp;it&nbsp;says:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&quot;When&nbsp;using&nbsp;a&nbsp;federation&nbsp;in&nbsp;a&nbsp;cluster,&nbsp;all&nbsp;the&nbsp;nodes&nbsp;of&nbsp;the&nbsp;cluster&nbsp;must&nbsp;have&nbsp;the&nbsp;federation&nbsp;plugin&nbsp;installed.&nbsp;...&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;have&nbsp;2&nbsp;clustered&nbsp;HAQ&nbsp;nodes&nbsp;[A,&nbsp;B,&nbsp;C]&nbsp;and&nbsp;[E,&nbsp;F].&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;[A,&nbsp;B,&nbsp;C]&nbsp;is&nbsp;clustered&nbsp;and&nbsp;so&nbsp;does&nbsp;[E,&nbsp;F].&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Do&nbsp;I&nbsp;have&nbsp;to:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;in&nbsp;E:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;my-upstream&nbsp;'{&quot;uri&quot;:&quot;&lt;a&nbsp;href=&quot;amqp://A&quot;&gt;amqp://A&lt;/a&gt;&quot;,&nbsp;&quot;expires&quot;:3600}'&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_policy...&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;....&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;my-upstream&nbsp;'{&quot;uri&quot;:&quot;&lt;a&nbsp;href=&quot;amqp://B&quot;&gt;amqp://B&lt;/a&gt;&quot;,&nbsp;&quot;expires&quot;:3600}'&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_policy...&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;....&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;my-upstream&nbsp;'{&quot;uri&quot;:&quot;&lt;a&nbsp;href=&quot;amqp://C&quot;&gt;amqp://C&lt;/a&gt;&quot;,&nbsp;&quot;expires&quot;:3600}'&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_policy...&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;....&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;and&nbsp;do&nbsp;the&nbsp;same&nbsp;in&nbsp;F:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;my-upstream&nbsp;'{&quot;uri&quot;:&quot;&lt;a&nbsp;href=&quot;amqp://A&quot;&gt;amqp://A&lt;/a&gt;&quot;,&nbsp;&quot;expires&quot;:3600}'&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_policy...&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;....&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;my-upstream&nbsp;'{&quot;uri&quot;:&quot;&lt;a&nbsp;href=&quot;amqp://B&quot;&gt;amqp://B&lt;/a&gt;&quot;,&nbsp;&quot;expires&quot;:3600}'&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_policy...&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;....&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_parameter&nbsp;federation-upstream&nbsp;my-upstream&nbsp;'{&quot;uri&quot;:&quot;&lt;a&nbsp;href=&quot;amqp://C&quot;&gt;amqp://C&lt;/a&gt;&quot;,&nbsp;&quot;expires&quot;:3600}'&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmqctl&nbsp;set_policy...&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;....&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;?&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;If&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;Pair&nbsp;of&nbsp;federated&nbsp;exchanges&nbsp;in&nbsp;your&nbsp;example&nbsp;topologies,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Shall&nbsp;I&nbsp;setup&nbsp;same&nbsp;in&nbsp;A,&nbsp;B&nbsp;and&nbsp;C?&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Thanks.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Yican&nbsp;Cao&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;_______________________________________________&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Simon&nbsp;MacMullen&lt;br&gt;RabbitMQ,&nbsp;VMware&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
