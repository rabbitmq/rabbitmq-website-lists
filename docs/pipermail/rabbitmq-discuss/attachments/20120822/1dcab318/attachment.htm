<tt>
Hi&nbsp;folks,&lt;br&gt;&lt;br&gt;My&nbsp;java&nbsp;client&nbsp;is&nbsp;hitting&nbsp;a&nbsp;deadlock&nbsp;closing&nbsp;a&nbsp;channel&nbsp;or&nbsp;a&nbsp;connection.&nbsp;I&nbsp;have&nbsp;also&nbsp;noticed&nbsp;that&nbsp;it&nbsp;hangs&nbsp;when&nbsp;deleting&nbsp;a&nbsp;queue&nbsp;as&nbsp;well.&nbsp;I&nbsp;have&nbsp;noticed&nbsp;this&nbsp;error&nbsp;when&nbsp;the&nbsp;server&nbsp;has&nbsp;a&nbsp;large&nbsp;number&nbsp;of&nbsp;connections.&nbsp;When&nbsp;I&nbsp;reboot&nbsp;the&nbsp;error&nbsp;goes&nbsp;away&nbsp;for&nbsp;some&nbsp;time&nbsp;and&nbsp;then&nbsp;appears&nbsp;again.&nbsp;In&nbsp;the&nbsp;rabbitmq&nbsp;management&nbsp;webpage&nbsp;I&nbsp;see&nbsp;a&nbsp;memory&nbsp;warning&lt;br&gt;&lt;br&gt;Memory&nbsp;usage&nbsp;is&nbsp;2.3GB&nbsp;where&nbsp;the&nbsp;high&nbsp;watermark&nbsp;is&nbsp;1.5&nbsp;GB.&lt;br&gt;&quot;The&nbsp;memory&nbsp;alarm&nbsp;for&nbsp;this&nbsp;node&nbsp;has&nbsp;gone&nbsp;off.&nbsp;It&nbsp;will&nbsp;block&nbsp;incoming&nbsp;network&nbsp;<br>
traffic&nbsp;until&nbsp;the&nbsp;memory&nbsp;usage&nbsp;drops&nbsp;below&nbsp;the&nbsp;watermark.&nbsp;&quot;.&nbsp;&lt;br&gt;&lt;br&gt;Why&nbsp;is&nbsp;the&nbsp;memory&nbsp;usage&nbsp;above&nbsp;the&nbsp;watermark?&nbsp;From&nbsp;what&nbsp;I&nbsp;have&nbsp;read&nbsp;RabbitMQ&nbsp;moves&nbsp;the&nbsp;messages&nbsp;to&nbsp;disk&nbsp;and&nbsp;scales&nbsp;that&nbsp;way&nbsp;without&nbsp;using&nbsp;more&nbsp;memory.&lt;br&gt;&lt;br&gt;regards,&lt;br&gt;Dharshan&lt;br&gt;www.scalegrid.net&lt;br&gt;(Services&nbsp;for&nbsp;the&nbsp;private&nbsp;cloud)&lt;br&gt;&lt;br&gt;&lt;br&gt;Here&nbsp;is&nbsp;the&nbsp;status&nbsp;of&nbsp;my&nbsp;server&lt;br&gt;&lt;br&gt;Status&nbsp;of&nbsp;node&nbsp;rabbit@drrabbitmq1&nbsp;...&lt;br&gt;[{pid,1169},&lt;br&gt;&amp;nbsp;{running_applications,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[{rabbitmq_management,&quot;RabbitMQ&nbsp;Management&nbsp;Console&quot;,&quot;2.8.4&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{xmerl,&quot;XML&nbsp;parser&quot;,&quot;1.2.10&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbitmq_management_agent,&quot;RabbitMQ&nbsp;Management&nbsp;Agent&quot;,&quot;2.8.4&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{amqp_client,&quot;RabbitMQ&nbsp;AMQP&nbsp;Client&quot;,&quot;2.8.4&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbit,&quot;RabbitMQ&quot;,&quot;2.8.4&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{ssl,&quot;Erlang/OTP&nbsp;SSL&nbsp;application&quot;,&quot;4.1.6&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{public_key,&quot;Public&nbsp;key&nbsp;infrastructure&quot;,&quot;0.13&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{crypto,&quot;CRYPTO&nbsp;version&nbsp;2&quot;,&quot;2.0.4&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{os_mon,&quot;CPO&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.7&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{sasl,&quot;SASL&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;11&quot;,&quot;2.1.10&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbitmq_mochiweb,&quot;RabbitMQ&nbsp;Mochiweb&nbsp;Embedding&quot;,&quot;2.8.4&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.8.4-hg&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{mochiweb,&quot;MochiMedia&nbsp;Web&nbsp;Server&quot;,&quot;1.3-rmq2.8.4-git&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{inets,&quot;INETS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;49&quot;,&quot;5.7.1&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{mnesia,&quot;MNESIA&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;12&quot;,&quot;4.5&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{stdlib,&quot;ERTS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;1.17.5&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{kernel,&quot;ERTS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;2.14.5&quot;}]},&lt;br&gt;&amp;nbsp;{os,{unix,linux}},&lt;br&gt;&amp;nbsp;{erlang_version,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;Erlang&nbsp;R14B04&nbsp;(erts-5.8.5)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:2:2]&nbsp;[rq:2]&nbsp;[async-threads:30]&nbsp;[kernel-poll:true]\n&quot;},&lt;br&gt;&amp;nbsp;{memory,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[{total,2379504536},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{processes,1926964632},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{processes_used,1924985912},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{system,452539904},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{atom,1722081},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{atom_used,1690549},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{binary,194345200},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{code,18717132},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{ets,176530144}]},&lt;br&gt;&amp;nbsp;{vm_memory_high_watermark,0.3999999998070925},&lt;br&gt;&amp;nbsp;{vm_memory_limit,1658825932},&lt;br&gt;&amp;nbsp;{disk_free_limit,1000000000},&lt;br&gt;&amp;nbsp;{disk_free,2966052864},&lt;br&gt;&amp;nbsp;{file_descriptors,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[{total_limit,65436},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{total_used,18006},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{sockets_limit,58890},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{sockets_used,8000}]},&lt;br&gt;&amp;nbsp;{processes,[{limit,1048576},{used,98174}]},&lt;br&gt;&amp;nbsp;{run_queue,0},&lt;br&gt;&amp;nbsp;{uptime,61715}]&lt;br&gt;...done.&lt;br&gt;&lt;br&gt;&lt;br&gt;
</tt>
