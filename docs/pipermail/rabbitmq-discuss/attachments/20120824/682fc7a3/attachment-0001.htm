<tt>
I&nbsp;was&nbsp;able&nbsp;to&nbsp;reproduce&nbsp;this&nbsp;in&nbsp;exactly&nbsp;the&nbsp;same&nbsp;way&nbsp;with&nbsp;2.8.6&nbsp;and&nbsp;Erlang&nbsp;R15B01.&lt;br&gt;&lt;br&gt;Here&amp;#39;s&nbsp;the&nbsp;log&nbsp;from&nbsp;rabbit@play.log.&nbsp;When&nbsp;play2&nbsp;goes&nbsp;down&nbsp;and&nbsp;comes&nbsp;back&nbsp;up,&nbsp;the&nbsp;&amp;#39;unit_test&amp;#39;&nbsp;queue&nbsp;(the&nbsp;only&nbsp;queue&nbsp;with&nbsp;messages)&nbsp;disappears.&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;24-Aug-2012::10:29:06&nbsp;===&lt;br&gt;rabbit&nbsp;on&nbsp;node&nbsp;rabbit@play2&nbsp;down&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;24-Aug-2012::10:29:06&nbsp;===&lt;br&gt;Mirrored-queue&nbsp;(queue&nbsp;&amp;#39;unit_test&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;):&nbsp;Slave&nbsp;&amp;lt;rabbit@play.1.261.0&amp;gt;&nbsp;saw&nbsp;deaths&nbsp;of&nbsp;mirrors&nbsp;&amp;lt;rabbit@play2.2.2550.0&amp;gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;24-Aug-2012::10:29:12&nbsp;===&lt;br&gt;rabbit&nbsp;on&nbsp;node&nbsp;rabbit@play2&nbsp;up&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;24-Aug-2012::10:29:12&nbsp;===&lt;br&gt;**&nbsp;Generic&nbsp;server&nbsp;&amp;lt;0.261.0&amp;gt;&nbsp;terminating&lt;br&gt;**&nbsp;Last&nbsp;message&nbsp;in&nbsp;was&nbsp;{&amp;#39;$gen_cast&amp;#39;,{gm,{length,3}}}&lt;br&gt;<br>
**&nbsp;When&nbsp;Server&nbsp;state&nbsp;==&nbsp;{state,&lt;br&gt;                        &nbsp;{amqqueue,&lt;br&gt;                         &nbsp;{resource,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,queue,&amp;lt;&amp;lt;&amp;quot;unit_test&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;                         &nbsp;true,false,none,&lt;br&gt;<br>
                         &nbsp;[{&amp;lt;&amp;lt;&amp;quot;x-ha-policy&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;all&amp;quot;&amp;gt;&amp;gt;}],&lt;br&gt;                         &nbsp;&amp;lt;3299.2457.0&amp;gt;,&lt;br&gt;                         &nbsp;[&amp;lt;3298.2550.0&amp;gt;],&lt;br&gt;                         &nbsp;all},&lt;br&gt;<br>
                        &nbsp;&amp;lt;0.262.0&amp;gt;,&amp;lt;3299.2457.0&amp;gt;,rabbit_variable_queue,&lt;br&gt;                        &nbsp;{vqstate,&lt;br&gt;                         &nbsp;{0,{[],[]}},&lt;br&gt;                         &nbsp;{0,{[],[]}},&lt;br&gt;                         &nbsp;{delta,undefined,0,undefined},&lt;br&gt;<br>
                         &nbsp;{0,{[],[]}},&lt;br&gt;                         &nbsp;{0,{[],[]}},&lt;br&gt;                         &nbsp;0,&lt;br&gt;                         &nbsp;{0,nil},&lt;br&gt;                         &nbsp;undefined,&lt;br&gt;                         &nbsp;{0,nil},&lt;br&gt;<br>
                         &nbsp;{qistate,&lt;br&gt;                          &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/queues/5CPQWZ6GS6L07B10CDNMTM42C&amp;quot;,&lt;br&gt;                          &nbsp;{{dict,0,16,16,8,80,48,&lt;br&gt;                            &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;<br>
                            &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;                              &nbsp;[]}}},&lt;br&gt;                           &nbsp;[]},&lt;br&gt;                          &nbsp;undefined,0,262144,&lt;br&gt;                          &nbsp;#Fun&amp;lt;rabbit_variable_queue.2.121033067&amp;gt;,&lt;br&gt;<br>
                          &nbsp;{0,nil}},&lt;br&gt;                         &nbsp;{{client_msstate,msg_store_persistent,&lt;br&gt;                           &nbsp;&amp;lt;&amp;lt;61,29,142,33,178,251,167,19,151,135,213,43,204,&lt;br&gt;                             &nbsp;197,156,123&amp;gt;&amp;gt;,&lt;br&gt;<br>
                           &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                            &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                            &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;                              &nbsp;[]}}},&lt;br&gt;<br>
                           &nbsp;{state,327753,&lt;br&gt;                            &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_persistent&amp;quot;},&lt;br&gt;                           &nbsp;rabbit_msg_store_ets_index,&lt;br&gt;                           &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_persistent&amp;quot;,&lt;br&gt;<br>
                           &nbsp;&amp;lt;0.255.0&amp;gt;,331850,323656,335947,340044},&lt;br&gt;                          &nbsp;{client_msstate,msg_store_transient,&lt;br&gt;                           &nbsp;&amp;lt;&amp;lt;41,125,255,66,12,1,141,122,87,67,196,42,155,134,&lt;br&gt;<br>
                             &nbsp;88,81&amp;gt;&amp;gt;,&lt;br&gt;                           &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                            &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                            &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;<br>
                              &nbsp;[]}}},&lt;br&gt;                           &nbsp;{state,307268,&lt;br&gt;                            &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_transient&amp;quot;},&lt;br&gt;                           &nbsp;rabbit_msg_store_ets_index,&lt;br&gt;<br>
                           &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_transient&amp;quot;,&lt;br&gt;                           &nbsp;&amp;lt;0.250.0&amp;gt;,311365,303144,315462,319559}},&lt;br&gt;                         &nbsp;true,0,#Fun&amp;lt;rabbit_mirror_queue_slave.1.52898136&amp;gt;,0,&lt;br&gt;<br>
                         &nbsp;0,infinity,0,0,0,0,0,&lt;br&gt;                         &nbsp;{rates,&lt;br&gt;                          &nbsp;{{1345,829346,423057},0},&lt;br&gt;                          &nbsp;{{1345,829346,423057},0},&lt;br&gt;                          &nbsp;0.0,0.0,&lt;br&gt;<br>
                          &nbsp;{1345,829348,736018}},&lt;br&gt;                         &nbsp;{0,nil},&lt;br&gt;                         &nbsp;{0,nil},&lt;br&gt;                         &nbsp;{0,nil},&lt;br&gt;                         &nbsp;{0,nil},&lt;br&gt;                         &nbsp;0,0,&lt;br&gt;<br>
                         &nbsp;{rates,&lt;br&gt;                          &nbsp;{{1345,829346,423057},0},&lt;br&gt;                          &nbsp;{{1345,829346,423057},0},&lt;br&gt;                          &nbsp;0.0,0.0,&lt;br&gt;                          &nbsp;{1345,829348,736018}}},&lt;br&gt;<br>
                        &nbsp;undefined,undefined,&lt;br&gt;                        &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                         &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                         &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;<br>
                        &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                         &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                         &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;                        &nbsp;0,&lt;br&gt;<br>
                        &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                         &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                         &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;                        &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;<br>
                         &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                         &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;                        &nbsp;true}&lt;br&gt;**&nbsp;Reason&nbsp;for&nbsp;termination&nbsp;==&nbsp;&lt;br&gt;<br>
**&nbsp;{function_clause,&lt;br&gt;      &nbsp;[{rabbit_mirror_queue_slave,set_synchronised,&lt;br&gt;           &nbsp;[false,&lt;br&gt;            &nbsp;{state,&lt;br&gt;                &nbsp;{amqqueue,&lt;br&gt;                    &nbsp;{resource,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,queue,&amp;lt;&amp;lt;&amp;quot;unit_test&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;<br>
                    &nbsp;true,false,none,&lt;br&gt;                    &nbsp;[{&amp;lt;&amp;lt;&amp;quot;x-ha-policy&amp;quot;&amp;gt;&amp;gt;,longstr,&amp;lt;&amp;lt;&amp;quot;all&amp;quot;&amp;gt;&amp;gt;}],&lt;br&gt;                    &nbsp;&amp;lt;3299.2457.0&amp;gt;,&lt;br&gt;                    &nbsp;[&amp;lt;3298.2550.0&amp;gt;],&lt;br&gt;<br>
                    &nbsp;all},&lt;br&gt;                &nbsp;&amp;lt;0.262.0&amp;gt;,&amp;lt;3299.2457.0&amp;gt;,rabbit_variable_queue,&lt;br&gt;                &nbsp;{vqstate,&lt;br&gt;                    &nbsp;{0,{[],[]}},&lt;br&gt;                    &nbsp;{0,{[],[]}},&lt;br&gt;                    &nbsp;{delta,undefined,0,undefined},&lt;br&gt;<br>
                    &nbsp;{0,{[],[]}},&lt;br&gt;                    &nbsp;{0,{[],[]}},&lt;br&gt;                    &nbsp;0,&lt;br&gt;                    &nbsp;{0,nil},&lt;br&gt;                    &nbsp;undefined,&lt;br&gt;                    &nbsp;{0,nil},&lt;br&gt;                    &nbsp;{qistate,&lt;br&gt;<br>
                        &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/queues/5CPQWZ6GS6L07B10CDNMTM42C&amp;quot;,&lt;br&gt;                        &nbsp;{{dict,0,16,16,8,80,48,&lt;br&gt;                             &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;<br>
                              &nbsp;[]},&lt;br&gt;                             &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;                               &nbsp;[]}}},&lt;br&gt;                         &nbsp;[]},&lt;br&gt;                        &nbsp;undefined,0,262144,&lt;br&gt;<br>
                        &nbsp;#Fun&amp;lt;rabbit_variable_queue.2.121033067&amp;gt;,&lt;br&gt;                        &nbsp;{0,nil}},&lt;br&gt;                    &nbsp;{{client_msstate,msg_store_persistent,&lt;br&gt;                         &nbsp;&amp;lt;&amp;lt;61,29,142,33,178,251,167,19,151,135,213,43,204,197,&lt;br&gt;<br>
                           &nbsp;156,123&amp;gt;&amp;gt;,&lt;br&gt;                         &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                             &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;                              &nbsp;[]},&lt;br&gt;                             &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;<br>
                               &nbsp;[]}}},&lt;br&gt;                         &nbsp;{state,327753,&lt;br&gt;                             &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_persistent&amp;quot;},&lt;br&gt;                         &nbsp;rabbit_msg_store_ets_index,&lt;br&gt;<br>
                         &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_persistent&amp;quot;,&lt;br&gt;                         &nbsp;&amp;lt;0.255.0&amp;gt;,331850,323656,335947,340044},&lt;br&gt;                     &nbsp;{client_msstate,msg_store_transient,&lt;br&gt;<br>
                         &nbsp;&amp;lt;&amp;lt;41,125,255,66,12,1,141,122,87,67,196,42,155,134,88,&lt;br&gt;                           &nbsp;81&amp;gt;&amp;gt;,&lt;br&gt;                         &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                             &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;<br>
                              &nbsp;[]},&lt;br&gt;                             &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;br&gt;                               &nbsp;[]}}},&lt;br&gt;                         &nbsp;{state,307268,&lt;br&gt;                             &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_transient&amp;quot;},&lt;br&gt;<br>
                         &nbsp;rabbit_msg_store_ets_index,&lt;br&gt;                         &nbsp;&amp;quot;/home/mpietrek/work/var/lib/rabbit@play/msg_store_transient&amp;quot;,&lt;br&gt;                         &nbsp;&amp;lt;0.250.0&amp;gt;,311365,303144,315462,319559}},&lt;br&gt;<br>
                    &nbsp;true,0,#Fun&amp;lt;rabbit_mirror_queue_slave.1.52898136&amp;gt;,0,0,&lt;br&gt;                    &nbsp;infinity,0,0,0,0,0,&lt;br&gt;                    &nbsp;{rates,&lt;br&gt;                        &nbsp;{{1345,829346,423057},0},&lt;br&gt;                        &nbsp;{{1345,829346,423057},0},&lt;br&gt;<br>
                        &nbsp;0.0,0.0,&lt;br&gt;                        &nbsp;{1345,829348,736018}},&lt;br&gt;                    &nbsp;{0,nil},&lt;br&gt;                    &nbsp;{0,nil},&lt;br&gt;                    &nbsp;{0,nil},&lt;br&gt;                    &nbsp;{0,nil},&lt;br&gt;                    &nbsp;0,0,&lt;br&gt;<br>
                    &nbsp;{rates,&lt;br&gt;                        &nbsp;{{1345,829346,423057},0},&lt;br&gt;                        &nbsp;{{1345,829346,423057},0},&lt;br&gt;                        &nbsp;0.0,0.0,&lt;br&gt;                        &nbsp;{1345,829348,736018}}},&lt;br&gt;<br>
                &nbsp;undefined,undefined,&lt;br&gt;                &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                    &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                    &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;<br>
                &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                    &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                    &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;                &nbsp;0,&lt;br&gt;                &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;<br>
                    &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;                    &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;                &nbsp;{dict,0,16,16,8,80,48,&lt;br&gt;                    &nbsp;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},&lt;br&gt;<br>
                    &nbsp;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;br&gt;                &nbsp;true}],&lt;br&gt;           &nbsp;[]},&lt;br&gt;       &nbsp;{rabbit_mirror_queue_slave,process_instruction,2,[]},&lt;br&gt;       &nbsp;{rabbit_mirror_queue_slave,handle_cast,2,[]},&lt;br&gt;<br>
       &nbsp;{gen_server2,handle_msg,2,[]},&lt;br&gt;       &nbsp;{proc_lib,wake_up,3,[{file,&amp;quot;proc_lib.erl&amp;quot;},{line,237}]}]}&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;22,&nbsp;2012&nbsp;at&nbsp;8:09&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Matt,&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;22/08/12&nbsp;23:06,&nbsp;Matt&nbsp;Pietrek&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&amp;#39;m&nbsp;experiencing&nbsp;a&nbsp;consistently&nbsp;reproducible&nbsp;scenario&nbsp;where&nbsp;an&nbsp;HA&nbsp;queue&lt;br&gt;<br>
disappears&nbsp;when&nbsp;a&nbsp;node&nbsp;rejoins&nbsp;the&nbsp;cluster.&nbsp;This&nbsp;is&nbsp;using&nbsp;RabbitMQ&nbsp;2.8.5&lt;br&gt;<br>
and&nbsp;Erlang&nbsp;R15B01.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
please&nbsp;try&nbsp;reproducing&nbsp;this&nbsp;with&nbsp;2.8.6.&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;
</tt>
