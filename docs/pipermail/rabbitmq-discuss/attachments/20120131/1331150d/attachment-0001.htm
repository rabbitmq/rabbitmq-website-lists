<tt>
&lt;br&gt;&lt;br&gt;Let&nbsp;me&nbsp;first&nbsp;describe&nbsp;my&nbsp;setup.&lt;br&gt;&lt;br&gt;root@webnode1]#&nbsp;rabbitmqadmin.py&nbsp;show&nbsp;overview&lt;br&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+--------------------+-----------------+--------------------+------------------+&lt;br&gt;<br>
|&nbsp;management_version&nbsp;|&nbsp; &nbsp; &nbsp; node&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;statistics_db_node&nbsp;|&nbsp;statistics_level&nbsp;|&lt;br&gt;+--------------------+-----------------+--------------------+------------------+&lt;br&gt;|&nbsp;2.7.1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;rabbit@webnode1&nbsp;|&nbsp;rabbit@webnode1&nbsp; &nbsp; |&nbsp;fine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;br&gt;<br>
+--------------------+-----------------+--------------------+------------------+&lt;/font&gt;&lt;br&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Rabbit&nbsp;MQ&amp;#39;s&nbsp;producers&nbsp;comes&nbsp;from&nbsp;PHP&nbsp;5.3.8 &lt;a&nbsp;href=&quot;http://www.php.net/manual/en/book.amqp.php&quot;&gt;http://www.php.net/manual/en/book.amqp.php&lt;/a&gt;.&nbsp;Each&nbsp;apache&nbsp;process&nbsp;could&nbsp;produce&nbsp;a&nbsp;rabbit&nbsp;message,&nbsp;I&nbsp;am&nbsp;producing&nbsp;around&nbsp;1000&nbsp;messages&nbsp;a&nbsp;second&nbsp;on&nbsp; c1.xtralarge&nbsp;instance&nbsp;at&nbsp;ec2.&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,helvetica,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,helvetica,sans-serif&quot;&gt;My&nbsp;erlang&nbsp;version&nbsp;is &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,helvetica,sans-serif&quot;&gt; &lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;div&gt;/usr/local/bin/erl&nbsp;-v&lt;/div&gt;&lt;div&gt;Erlang&nbsp;R15B&nbsp;(erts-5.9)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:8:8]&nbsp;[async-threads:0]&nbsp;[hipe]&nbsp;[kernel-poll:false]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;PROBLEM:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;about&nbsp;40&nbsp;mins&nbsp;of&nbsp;rabbit&nbsp;accepting&nbsp;messages&nbsp;all&nbsp;connections&nbsp;block&nbsp;causing&nbsp;a&nbsp;rather&nbsp;bad&nbsp;error&nbsp;on&nbsp;the&nbsp;front&nbsp;ends&nbsp;killing&nbsp;traffic.&nbsp;Turning&nbsp;rabbit&nbsp;off&nbsp;and&nbsp;restarting&nbsp;the&nbsp;web&nbsp;servers&nbsp;forces&nbsp;a&nbsp;recovery.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Stats&nbsp;from&nbsp;Rabbit:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Roughly&nbsp;5000&nbsp;queues&nbsp;are&nbsp;made&lt;/div&gt;&lt;div&gt;Roughly&nbsp;3600&nbsp;exchanges&nbsp;are&nbsp;made&lt;/div&gt;&lt;div&gt;Each&nbsp;exchange&nbsp;can&nbsp;have&nbsp;at&nbsp;most&nbsp;1200&nbsp;queues&nbsp;bound&nbsp;to&nbsp;it.&lt;/div&gt;&lt;div&gt;Each&nbsp;Queue&nbsp;is&nbsp;setup&nbsp;for&nbsp;autodelete&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;exchanges&nbsp;with&nbsp;delivery&nbsp;type&nbsp;1.&lt;/div&gt;<br>
&lt;div&gt;All&nbsp;data&nbsp;passed&nbsp;is&nbsp;JSON&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;consumer&nbsp;is&nbsp;NODE&nbsp;and&nbsp;its&nbsp;keeping&nbsp;up&nbsp;with&nbsp;the&nbsp;consumption&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;RabbitMQ&nbsp;memlimit&nbsp;is&nbsp;around&nbsp;5.3G&lt;/div&gt;&lt;div&gt;RabbitMQ&nbsp;mem&nbsp;used&nbsp;hits&nbsp;around&nbsp;1.9G&nbsp;when&nbsp;it&nbsp;freezes&nbsp;produces&lt;/div&gt;<br>
&lt;div&gt;RabbitMQ&nbsp;proc&nbsp;used&nbsp;hits&nbsp;around&nbsp;220K&lt;/div&gt;&lt;div&gt;RabbitMQ&nbsp;fd_total&nbsp;is&nbsp;50K&lt;/div&gt;&lt;div&gt;RabbitMQ&nbsp;socks_total&nbsp;is&nbsp;around&nbsp;45K&nbsp;and&nbsp;Socks&nbsp;used&nbsp;is&nbsp;4K&lt;/div&gt;&lt;div&gt;mem_ets&nbsp;hists&nbsp;100M&nbsp;//&nbsp;not&nbsp;sure&nbsp;what&nbsp;this&nbsp;is &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
Any&nbsp;idea&nbsp;what&nbsp;is&nbsp;going&nbsp;on?&nbsp;What&nbsp;limit&nbsp;am&nbsp;I&nbsp;hitting?&nbsp;Why&nbsp;does&nbsp;RabbitMQ&nbsp;block?&nbsp;How&nbsp;can&nbsp;I&nbsp;detect&nbsp;that&nbsp;I&nbsp;am&nbsp;about&nbsp;to&nbsp;hit&nbsp;a&nbsp;block&nbsp;state?&nbsp;Any&nbsp;suggestions&nbsp;or&nbsp;request&nbsp;of&nbsp;additional&nbsp;data&nbsp;would&nbsp;be&nbsp;great.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;<br>

</tt>
