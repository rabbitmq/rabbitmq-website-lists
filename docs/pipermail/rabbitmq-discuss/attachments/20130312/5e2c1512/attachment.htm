<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;It&nbsp;is&nbsp;due&nbsp;to&nbsp;the&nbsp;way&nbsp;Erlang&nbsp;spins&nbsp;up&nbsp;more&nbsp;cores.&nbsp;The&nbsp;Erlang&nbsp;VM&nbsp;decides&nbsp;at&nbsp;certain&nbsp;intervals&nbsp;how&nbsp;many&nbsp;cores&nbsp;it&nbsp;needs&nbsp;to&nbsp;satisfy&nbsp;the&nbsp;work&nbsp;it&nbsp;has.&nbsp;If&nbsp;it&nbsp;never&nbsp;needs&nbsp;more&nbsp;than&nbsp;7&nbsp;cores&nbsp;to&nbsp;satisfy&nbsp;work,&nbsp;it&nbsp;will&nbsp;never&nbsp;spin&nbsp;up&nbsp;more.&nbsp;Also&nbsp;note&nbsp;that&nbsp;it&nbsp;will&nbsp;keep&nbsp;a&nbsp;core&nbsp;&amp;quot;awake&amp;quot;&nbsp;even&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;work&nbsp;to&nbsp;do&nbsp;in&nbsp;the&nbsp;hope&nbsp;that&nbsp;work&nbsp;will&nbsp;arrive&nbsp;soon.&nbsp;So&nbsp;you&nbsp;cannot&nbsp;use&nbsp;a&nbsp;command&nbsp;like&nbsp;top(1)&nbsp;to&nbsp;get&nbsp;any&nbsp;idea&nbsp;of&nbsp;what&nbsp;is&nbsp;happening.&lt;div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;The&nbsp;way&nbsp;is&nbsp;to&nbsp;get&nbsp;a&nbsp;shell&nbsp;on&nbsp;an&nbsp;erlang&nbsp;node&nbsp;and&nbsp;then&nbsp;use &lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;a&nbsp;href=&quot;http://erlang.org/doc/man/erlang.html#statistics-1&quot;&gt;http://erlang.org/doc/man/erlang.html#statistics-1&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;in&nbsp;particular&nbsp;the&nbsp;scheduler_wall_time&nbsp;stats&nbsp;to&nbsp;get&nbsp;a&nbsp;grip&nbsp;on&nbsp;scheduler&nbsp;utilization.&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;My&nbsp;guess&nbsp;would&nbsp;be&nbsp;that&nbsp;you&nbsp;are&nbsp;bound&nbsp;by&nbsp;something&nbsp;else&nbsp;than&nbsp;CPU.&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;7,&nbsp;2013&nbsp;at&nbsp;9:14&nbsp;AM,&nbsp;Xie&nbsp;Yunpeng&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:woqimingweipeng@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;woqimingweipeng@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;rabbitmq&nbsp;version:&nbsp;3.0.2&lt;br&gt;&lt;/div&gt;cpu:&nbsp;24&nbsp;cores&lt;br&gt;&lt;/div&gt;memory:&nbsp;64G&lt;br&gt;&lt;/div&gt;i&nbsp;deploy&nbsp;a&nbsp;rabbitmq&nbsp;service&nbsp;on&nbsp;the&nbsp;server&nbsp;above&nbsp;and&nbsp;do&nbsp;a&nbsp;&lt;span&gt;stress&nbsp;testing&lt;/span&gt;&nbsp;,&nbsp;use&nbsp;150&nbsp;threads&nbsp;for&nbsp;send&nbsp;and&nbsp;300&nbsp;threads&nbsp;for&nbsp;recv&nbsp;on&nbsp;150&nbsp;queues&nbsp;on&nbsp;the&nbsp;service,&nbsp;per&nbsp;queue&nbsp;with&nbsp;1&nbsp;send/&nbsp;2&nbsp;recv.&nbsp;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;the&nbsp;cpu&nbsp;useage&nbsp;is&nbsp;always&nbsp;below&nbsp;700%,&nbsp;no&nbsp;matter&nbsp;i&nbsp;increase&nbsp;queues&nbsp;and&nbsp;threads&nbsp;or&nbsp;not.&lt;br&gt;&lt;br&gt;&lt;/div&gt;how&nbsp;to&nbsp;use&nbsp;more&nbsp;than&nbsp;7&nbsp;cores&nbsp;in&nbsp;rabbitmq?&lt;br&gt;&lt;div&gt;&lt;br&gt;i&nbsp;find&nbsp;smp&nbsp;is&nbsp;set&nbsp;to&nbsp;24:24&lt;br&gt;[rabbitmq]$&nbsp;erl&lt;br&gt;Erlang&nbsp;R15B03&nbsp;(erts-5.9.3.1)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:24:24]&nbsp;[async-threads:0]&nbsp;[hipe]&nbsp;[kernel-poll:false]&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;Eshell&nbsp;V5.9.3.1 &nbsp;(abort&nbsp;with&nbsp;^G)&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;J.<br>
&lt;/div&gt;<br>

</tt>
