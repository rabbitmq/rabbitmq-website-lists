<tt>
Thats&nbsp;sounds&nbsp;very&nbsp;unsatisfactory&nbsp;simply&nbsp;because&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;it&nbsp;addresses&nbsp;the&nbsp;real&nbsp;problem&nbsp;and&nbsp;makes&nbsp;me&nbsp;wonder&amp;nbsp;&amp;nbsp;how&nbsp;efficient/inefficient&nbsp;the&nbsp;AMQP&nbsp;parser&nbsp;really&nbsp;is.&nbsp;If&nbsp;I&nbsp;send&nbsp;large&nbsp;byte&nbsp;arrays&nbsp;what&nbsp;needs&nbsp;to&nbsp;be&nbsp;parsed?&nbsp;My&nbsp;understanding&nbsp;is&nbsp;that&nbsp;each&nbsp;message&nbsp;gets&nbsp;parsed&nbsp;to&nbsp;AMQP&nbsp;but&nbsp;not&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;message&nbsp;body.&nbsp;So,&nbsp;I&nbsp;fail&nbsp;to&nbsp;understand&nbsp;how&nbsp;parsing&nbsp;makes&nbsp;a&nbsp;difference&nbsp;whether&nbsp;I&nbsp;send&nbsp;a&nbsp;byte&nbsp;array&nbsp;of&nbsp;size&nbsp;10&nbsp;bytes&nbsp;versus&nbsp;a&nbsp;message&nbsp;that&nbsp;contains&nbsp;a&nbsp;body&nbsp;that&nbsp;holds&nbsp;a&nbsp;10&nbsp;megabyte&nbsp;byte&nbsp;array.&nbsp;I&nbsp;do&nbsp;not&nbsp;see&nbsp;why&nbsp;the&nbsp;bus&nbsp;limits&nbsp;me&nbsp;to&nbsp;45mb/second.&nbsp;My&nbsp;binary&nbsp;reader&nbsp;moves&nbsp;about&nbsp;200mb/second,&nbsp;reading&nbsp;from&nbsp;a&nbsp;physical&nbsp;storage&nbsp;into&nbsp;memory,&nbsp;including&nbsp;the&nbsp;parsing&nbsp;of&nbsp;the&nbsp;byte&nbsp;arrays&nbsp;to&nbsp;C#&nbsp;objects,&nbsp;thus&nbsp;the&nbsp;raw&nbsp;speed&nbsp;should&nbsp;be&nbsp;even&nbsp;a&nbsp;lot&nbsp;higher.&nbsp;There&nbsp;must&nbsp;be&nbsp;something&nbsp;else&nbsp;going&nbsp;on&nbsp;that&nbsp;limits&nbsp;RabbitMQ&nbsp;to&nbsp;go&nbsp;beyond&nbsp;the&nbsp;45mb/second.&nbsp;The&nbsp;order&nbsp;of&nbsp;messages&nbsp;is&nbsp;important&nbsp;thus&nbsp;I&nbsp;cannot&nbsp;run&nbsp;more&nbsp;channels&nbsp;in&nbsp;parallel.&nbsp;Can&nbsp;anyone&nbsp;please&nbsp;chime&nbsp;in&nbsp;so&nbsp;I&nbsp;understand&nbsp;what&nbsp;I&nbsp;am&nbsp;overlooking&nbsp;here?&nbsp;Thanks&nbsp;a&nbsp;lot.&lt;div&gt;&lt;br&gt;&lt;br&gt;On&nbsp;Tuesday,&nbsp;March&nbsp;6,&nbsp;2012&nbsp;1:36:53&nbsp;AM&nbsp;UTC+9,&nbsp;Simon&nbsp;MacMullen&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;p&gt;I&nbsp;suspect&nbsp;you're&nbsp;probably&nbsp;limited&nbsp;by&nbsp;the&nbsp;speed&nbsp;of&nbsp;the&nbsp;AMQP&nbsp;parser&nbsp;in&nbsp;&lt;br&gt;this&nbsp;case.&nbsp;Unfortunately&nbsp;the&nbsp;only&nbsp;thing&nbsp;you&nbsp;can&nbsp;really&nbsp;do&nbsp;to&nbsp;make&nbsp;it&nbsp;run&nbsp;&lt;br&gt;faster&nbsp;is&nbsp;turn&nbsp;on&nbsp;HiPE&nbsp;compilation&nbsp;or&nbsp;buy&nbsp;a&nbsp;a&nbsp;faster&nbsp;machine.&nbsp;And&nbsp;HiPE&nbsp;&lt;br&gt;compilation&nbsp;only&nbsp;works&nbsp;on&nbsp;Unix&nbsp;I'm&nbsp;afraid.&lt;/p&gt;&lt;p&gt;If&nbsp;you&nbsp;can&nbsp;afford&nbsp;to&nbsp;lose&nbsp;ordering&nbsp;guarantees&nbsp;you&nbsp;could&nbsp;push&nbsp;the&nbsp;&lt;br&gt;messages&nbsp;through&nbsp;more&nbsp;than&nbsp;one&nbsp;connection&nbsp;/&nbsp;queue,&nbsp;and&nbsp;thus&nbsp;take&nbsp;&lt;br&gt;advantage&nbsp;of&nbsp;more&nbsp;cores.&lt;/p&gt;&lt;p&gt;Cheers,&nbsp;Simon&lt;/p&gt;&lt;p&gt;--&nbsp;&lt;br&gt;Simon&nbsp;MacMullen&lt;br&gt;RabbitMQ,&nbsp;VMware&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;wbr&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;wbr&gt;cgi-bin/mailman/listinfo/&lt;wbr&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
