<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;Le&nbsp;16&nbsp;sept.&nbsp;10&nbsp;à&nbsp;14:12,&nbsp;Emile&nbsp;Joubert&nbsp;a&nbsp;écrit&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hi,&amp;nbsp;&lt;/div&gt;&lt;div&gt;thanks&nbsp;for&nbsp;the&nbsp;support.&nbsp;The&nbsp;same&nbsp;problem&nbsp;happens&nbsp;both&nbsp;with&nbsp;the&nbsp;version&nbsp;2.0.0&nbsp;and&nbsp;2.1.0&nbsp;!!&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;just&nbsp;performed&nbsp;the&nbsp;upgrade&nbsp;on&nbsp;our&nbsp;development&nbsp;environment,&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;solve&nbsp;this&nbsp;issue.&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;br&gt;Hi&nbsp;Romary,&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;this&nbsp;error&nbsp;report.&nbsp;Can&nbsp;you&nbsp;confirm&nbsp;whether&nbsp;the&nbsp;logfile&lt;br&gt;contained&nbsp;anything&nbsp;relevant&nbsp;before&nbsp;the&nbsp;broker&nbsp;became&nbsp;unavailable?&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Nope,&nbsp;the&nbsp;broker&nbsp;log&nbsp;does&nbsp;not&nbsp;contain&nbsp;anything&nbsp;relevant.&amp;nbsp;Here&nbsp;is&nbsp;an&nbsp;extract&nbsp;of&nbsp;the&nbsp;log&nbsp;file&nbsp;when&nbsp;the&nbsp;broker&nbsp;crashes&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;=INFO&nbsp;REPORT====&nbsp;16-Sep-2010::14:47:47&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;Limiting&nbsp;to&nbsp;approx&nbsp;65435&nbsp;file&nbsp;handles&nbsp;(58889&nbsp;sockets)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;=INFO&nbsp;REPORT====&nbsp;16-Sep-2010::14:47:47&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;Memory&nbsp;limit&nbsp;set&nbsp;to&nbsp;1609MB.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;=INFO&nbsp;REPORT====&nbsp;16-Sep-2010::14:47:47&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;msg_store_transient:&nbsp;using&nbsp;rabbit_msg_store_ets_index&nbsp;to&nbsp;provide&nbsp;index&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;=INFO&nbsp;REPORT====&nbsp;16-Sep-2010::14:47:47&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;msg_store_persistent:&nbsp;using&nbsp;rabbit_msg_store_ets_index&nbsp;to&nbsp;provide&nbsp;index&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;=WARNING&nbsp;REPORT====&nbsp;16-Sep-2010::14:47:47&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;msg_store_persistent:&nbsp;rebuilding&nbsp;indices&nbsp;from&nbsp;scratch&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;=INFO&nbsp;REPORT====&nbsp;16-Sep-2010::14:47:47&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;started&nbsp;TCP&nbsp;Listener&nbsp;on&nbsp;0.0.0.0:5672&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;=INFO&nbsp;REPORT====&nbsp;16-Sep-2010::14:47:47&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;'Courier&nbsp;New'&quot;&gt;started&nbsp;SSL&nbsp;Listener&nbsp;on&nbsp;0.0.0.0:5671&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&nbsp;Do&nbsp;you&lt;br&gt;override&nbsp;any&nbsp;default&nbsp;configuration&nbsp;variables&nbsp;in&nbsp;the&nbsp;broker&nbsp;config&nbsp;file?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ho&nbsp;yes&nbsp;we&nbsp;did&nbsp;:&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;here&nbsp;is&nbsp;the&nbsp;/etc/rabbitmq/rabbitmq.config&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;[&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;{rabbit,&nbsp;[&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{vm_memory_high_watermark,&nbsp;0.8},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{ssl_listeners,&nbsp;[{&quot;0.0.0.0&quot;,5671}]},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{ssl_options,&nbsp;[{cacertfile,&quot;/var/lib/rabbitmq/ssl/certificate-authority/schneider-ca.pem&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{certfile,&quot;/var/lib/rabbitmq/ssl/broker-certs/broker-cert.pem&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{keyfile,&quot;/var/lib/rabbitmq/ssl/broker-certs/broker-key.pem&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{verify,verify_none},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{fail_if_no_peer_cert,false}]}&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;]}&lt;/div&gt;&lt;div&gt;].&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;and&nbsp;ther&nbsp;is&nbsp;the&nbsp;/etc/rabbitmq/rabbitmq.conf&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;#&nbsp;increase&nbsp;the&nbsp;max&nbsp;number&nbsp;of&nbsp;Erlang&nbsp;lightweight&nbsp;process&lt;/div&gt;&lt;div&gt;SERVER_ERL_ARGS=&quot;$SERVER_ERL_ARGS&nbsp;+P&nbsp;1000000&quot;&lt;/div&gt;&lt;div&gt;RABBITMQ_MULTI_ERL_ARGS=&quot;$RABBITMQ_MULTI_ERL_ARGS&nbsp;+P&nbsp;1000000&quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;finaly&nbsp;the&nbsp;/etc/default/rabbitmq&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;#&nbsp;65,635&nbsp;maximum&nbsp;connections&nbsp;per&nbsp;rabbitmq&nbsp;process&lt;/div&gt;&lt;div&gt;ulimit&nbsp;-n&nbsp;65535&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;If&nbsp;you&nbsp;find&nbsp;memory&nbsp;usage&nbsp;growing&nbsp;with&nbsp;SSL&nbsp;then&nbsp;try&nbsp;using&nbsp;Erlang&nbsp;R14B.&lt;br&gt;(Also&nbsp;see&nbsp;OTP-8810)&nbsp;What&nbsp;version&nbsp;of&nbsp;Erlang&nbsp;are&nbsp;you&nbsp;currently&nbsp;using?&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes&nbsp;we&nbsp;are&nbsp;on&nbsp;our&nbsp;way&nbsp;to&nbsp;upgrade&nbsp;to&nbsp;Erlang&nbsp;R14B&nbsp;too&nbsp;!!&nbsp;I&nbsp;will&nbsp;let&nbsp;you&nbsp;know&nbsp;if&nbsp;it&nbsp;solves&nbsp;any&nbsp;of&nbsp;our&nbsp;troubles&nbsp;!&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Regards&lt;br&gt;&lt;br&gt;Emile&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Thanks&nbsp;for&nbsp;all,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Romary.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;On&nbsp;16/09/10&nbsp;10:32,&nbsp;Romary&nbsp;Kremer&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;We&nbsp;are&nbsp;performing&nbsp;evaluation&nbsp;on&nbsp;rabbitmq&nbsp;message&nbsp;broker,&nbsp;and&nbsp;we&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;currently&nbsp;encounter&nbsp;difficulties&nbsp;with&nbsp;release&nbsp;2.0.0:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;Our&nbsp;application&nbsp;implies&nbsp;10&nbsp;000&nbsp;peers&nbsp;producing&nbsp;messages&nbsp;periodically&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;to&nbsp;a&nbsp;unique&nbsp;queue.&nbsp;This&nbsp;queue&nbsp;is&nbsp;listen&nbsp;asynchronously&nbsp;by&nbsp;another&nbsp;peer.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;All&nbsp;peer&nbsp;are&nbsp;written&nbsp;in&nbsp;Java.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;The&nbsp;production&nbsp;rate&nbsp;of&nbsp;a&nbsp;single&nbsp;peer&nbsp;is&nbsp;4&nbsp;messages&nbsp;/&nbsp;hour.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;We&nbsp;can&nbsp;simulate&nbsp;a&nbsp;time-consuming&nbsp;task&nbsp;in&nbsp;the&nbsp;consumer&nbsp;callback,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;simulating&nbsp;more&nbsp;or&nbsp;less&nbsp;fast&nbsp;consumer.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;we&nbsp;are&nbsp;using&nbsp;SSL&nbsp;certificate&nbsp;on&nbsp;the&nbsp;broker&nbsp;side&nbsp;to&nbsp;allow&nbsp;the&nbsp;peer&nbsp;to&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;authenticate&nbsp;the&nbsp;broker.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;we&nbsp;have&nbsp;noticed&nbsp;that&nbsp;the&nbsp;use&nbsp;of&nbsp;SSL&nbsp;as&nbsp;dramatic&nbsp;incidence&nbsp;on&nbsp;the&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;memory&nbsp;occupied&nbsp;by&nbsp;Rabbitmq&nbsp;process&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Since&nbsp;we&nbsp;upgraded&nbsp;to&nbsp;version&nbsp;*2.0.0*,&nbsp;we&nbsp;are&nbsp;no&nbsp;longer&nbsp;able&nbsp;to&nbsp;make&nbsp;a&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;test&nbsp;scenario&nbsp;running.&nbsp;The&nbsp;symptoms&nbsp;are&nbsp;listed&nbsp;bellow&nbsp;:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;on&nbsp;the&nbsp;broker&nbsp;console&nbsp;first,&nbsp;we&nbsp;get&nbsp;the&nbsp;message&nbsp;:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Erlang&nbsp;has&nbsp;closed&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Error:&nbsp;unable&nbsp;to&nbsp;connect&nbsp;to&nbsp;node&nbsp;rabbit@murphys:&nbsp;nodedown&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;diagnostics:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;nodes&nbsp;and&nbsp;their&nbsp;ports&nbsp;on&nbsp;murphys:&nbsp;[{rabbitmqctl22609,42767}]&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;current&nbsp;node:&nbsp;rabbitmqctl22609@murphys&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;current&nbsp;node&nbsp;home&nbsp;dir:&nbsp;/var/lib/rabbitmq&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;current&nbsp;node&nbsp;cookie&nbsp;hash:&nbsp;qu0gh1hg7j7LKyzK0GLk+A==&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;we&nbsp;have&nbsp;kept&nbsp;the&nbsp;erl_crash.dump&nbsp;in&nbsp;case,&nbsp;but&nbsp;since&nbsp;i's&nbsp;about&nbsp;200&nbsp;MB&nbsp;&amp;nbsp;I&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;cannot&nbsp;do&nbsp;nothing&nbsp;to&nbsp;send&nbsp;it&nbsp;to&nbsp;you.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Maybe&nbsp;some&nbsp;one&nbsp;can&nbsp;give&nbsp;us&nbsp;some&nbsp;hints&nbsp;or&nbsp;some&nbsp;indicators&nbsp;to&nbsp;look&nbsp;out&nbsp;in&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;the&nbsp;dump&nbsp;to&nbsp;help&nbsp;diagnostics,&nbsp;but&nbsp;we&nbsp;are&nbsp;not&nbsp;Erlang&nbsp;fluent&nbsp;!&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;What&nbsp;we&nbsp;know&nbsp;for&nbsp;sure&nbsp;is&nbsp;that&nbsp;the&nbsp;crash&nbsp;happens&nbsp;while&nbsp;the&nbsp;10&nbsp;000&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;connections&nbsp;are&nbsp;established,&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;test.&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;We&nbsp;have&nbsp;monitored&nbsp;the&nbsp;&amp;nbsp;number&nbsp;of&nbsp;connections&nbsp;established&nbsp;and&nbsp;the&nbsp;crashes&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;happens&nbsp;always&nbsp;around&nbsp;4500&nbsp;-&nbsp;5000&nbsp;connections,&nbsp;but&nbsp;never&nbsp;the&nbsp;same&nbsp;exact&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;number.&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;We&nbsp;also&nbsp;tried&nbsp;with&nbsp;and&nbsp;without&nbsp;SSL&nbsp;but&nbsp;this&nbsp;does&nbsp;not&nbsp;help&nbsp;at&nbsp;all&nbsp;(same&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;symptoms).&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;the&nbsp;client&nbsp;side,&nbsp;our&nbsp;application&nbsp;registers&nbsp;a&nbsp;ShutdownListener&nbsp;to&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;implement&nbsp;a&nbsp;connection&nbsp;retry&nbsp;logic&nbsp;upon&nbsp;shutdown.&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;The&nbsp;retries&nbsp;always&nbsp;failed&nbsp;with&nbsp;the&nbsp;error&nbsp;:&nbsp;connection&nbsp;refused.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;here&nbsp;are&nbsp;some&nbsp;figures&nbsp;we&nbsp;gathered&nbsp;during&nbsp;the&nbsp;test&nbsp;start&nbsp;up&nbsp;about&nbsp;the&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;maximum&nbsp;number&nbsp;of&nbsp;connection&nbsp;established&nbsp;before&nbsp;it&nbsp;crashes&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;with&nbsp;SSL&nbsp;:&nbsp;5404,&nbsp;4493,&nbsp;4399&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;without&nbsp;SSL&nbsp;:&nbsp;4673&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;we&nbsp;dont&nbsp;think&nbsp;that&nbsp;the&nbsp;problem&nbsp;is&nbsp;about&nbsp;file&nbsp;descriptors&nbsp;since&nbsp;we&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;haven't&nbsp;changed&nbsp;anything&nbsp;in&nbsp;the&nbsp;configuration&nbsp;when&nbsp;we&nbsp;upgraded&nbsp;to&nbsp;2.0.0.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;The&nbsp;same&nbsp;test&nbsp;used&nbsp;to&nbsp;run&nbsp;successfully&nbsp;on&nbsp;previous&nbsp;version&nbsp;of&nbsp;the&nbsp;broker&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;(1.7.2,&nbsp;and&nbsp;1.8.1).&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Moreover,&nbsp;the&nbsp;rabbit_status&nbsp;plugin&nbsp;tells&nbsp;us&nbsp;we&nbsp;have&nbsp;enough&nbsp;file&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;descriptors&nbsp;as&nbsp;well&nbsp;as&nbsp;erlang&nbsp;processes&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;file&nbsp;descriptors&nbsp;(used&nbsp;/&nbsp;available)=&nbsp;34&nbsp;/&nbsp;65535&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;elrang&nbsp;processes&nbsp;(used&nbsp;/&nbsp;available)=&nbsp;160&nbsp;/&nbsp;1&nbsp;000&nbsp;000&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;-&nbsp;memory&nbsp;(used&nbsp;/&nbsp;available)=&nbsp;40&nbsp;MB&nbsp;/&nbsp;1609&nbsp;MB&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;We&nbsp;haven't&nbsp;try&nbsp;the&nbsp;*2.1.0*&nbsp;yet&nbsp;because&nbsp;we&nbsp;would&nbsp;like&nbsp;to&nbsp;have&nbsp;your&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;feedback&nbsp;about&nbsp;this&nbsp;issue&nbsp;before.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;We&nbsp;would&nbsp;appreciate&nbsp;your&nbsp;feedbacks&nbsp;on&nbsp;that&nbsp;point&nbsp;before&nbsp;we&nbsp;migrate&nbsp;to&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;release&nbsp;2.1.0.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Best&nbsp;regards,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Romary.&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
