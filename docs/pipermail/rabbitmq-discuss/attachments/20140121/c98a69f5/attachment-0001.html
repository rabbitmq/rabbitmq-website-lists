<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;folks,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;having&nbsp;an&nbsp;issue&nbsp;with&nbsp;RabbitMQ&nbsp;3.2.2&nbsp;(Erlang&nbsp;R15B01).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;have&nbsp;3&nbsp;clusters&nbsp;(2-nodes&nbsp;per&nbsp;cluster)&nbsp;configured&nbsp;for&nbsp;federation&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;complete&nbsp;graph&nbsp;fashion&nbsp;(they&nbsp;all&nbsp;federate&nbsp;with&nbsp;each&nbsp;other).&nbsp;&nbsp;Each<br>
&nbsp;&nbsp;&nbsp;&nbsp;cluster&nbsp;has&nbsp;a&nbsp;policy&nbsp;to&nbsp;federate&nbsp;queues&nbsp;with&nbsp;pattern&nbsp;^cluster1.*<br>
&nbsp;&nbsp;&nbsp;&nbsp;(for&nbsp;cluster1),&nbsp;^cluster2.*&nbsp;(for&nbsp;cluster2),&nbsp;and&nbsp;^cluster3.*&nbsp;(for<br>
&nbsp;&nbsp;&nbsp;&nbsp;cluster3).&nbsp;&nbsp;So&nbsp;in&nbsp;other&nbsp;words,&nbsp;if&nbsp;clusters&nbsp;#2&nbsp;or&nbsp;#3&nbsp;have&nbsp;a&nbsp;queue<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;&quot;cluster1&quot;,&nbsp;it&nbsp;will&nbsp;be&nbsp;federated&nbsp;(pulled<br>
&nbsp;&nbsp;&nbsp;&nbsp;down&nbsp;to)&nbsp;cluster1&nbsp;upon&nbsp;request.&nbsp;&nbsp;The&nbsp;policy&nbsp;for&nbsp;federation&nbsp;also&nbsp;has<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;attribute&nbsp;&quot;ha-mode&quot;&nbsp;set&nbsp;to&nbsp;&quot;all&quot;,&nbsp;so&nbsp;that&nbsp;messages&nbsp;sent&nbsp;between<br>
&nbsp;&nbsp;&nbsp;&nbsp;clusters&nbsp;are&nbsp;not&nbsp;lost&nbsp;upon&nbsp;a&nbsp;failure.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;queue's&nbsp;I'm&nbsp;working&nbsp;with&nbsp;have&nbsp;the&nbsp;Auto&nbsp;Delete&nbsp;and&nbsp;Durable&nbsp;flags<br>
&nbsp;&nbsp;&nbsp;&nbsp;set.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Without&nbsp;much&nbsp;effort,&nbsp;I'm&nbsp;seeing&nbsp;errors&nbsp;on&nbsp;cluster1&nbsp;after&nbsp;using&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;queue&nbsp;a&nbsp;few&nbsp;times.&nbsp;&nbsp;The&nbsp;error&nbsp;is&nbsp;visible&nbsp;within&nbsp;the&nbsp;management<br>
&nbsp;&nbsp;&nbsp;&nbsp;console:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;TypeError:&nbsp;Cannot&nbsp;read&nbsp;property&nbsp;'ram_msg_count'&nbsp;of&nbsp;undefined&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;federation&nbsp;from&nbsp;that&nbsp;point&nbsp;on&nbsp;for&nbsp;that&nbsp;queue&nbsp;fails.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;I&nbsp;do&nbsp;this&nbsp;complete&nbsp;graph&nbsp;scenario&nbsp;without&nbsp;making&nbsp;use&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;clusters&nbsp;I&nbsp;do&nbsp;not&nbsp;experience&nbsp;this&nbsp;problem.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I've&nbsp;seen&nbsp;mentions&nbsp;on&nbsp;the&nbsp;list&nbsp;that&nbsp;this&nbsp;was&nbsp;an&nbsp;issue&nbsp;with&nbsp;clusters<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;durable&nbsp;queues,&nbsp;but&nbsp;fixed&nbsp;in&nbsp;3.2.1.&nbsp;&nbsp;Perhaps&nbsp;it&nbsp;is&nbsp;still&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;issue?&nbsp;&nbsp;Or&nbsp;still&nbsp;an&nbsp;issue&nbsp;just&nbsp;when&nbsp;federation&nbsp;is&nbsp;involved?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Josh&nbsp;West<br>
One.com&nbsp;-&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.one.com&quot;&gt;http://www.one.com&lt;/a&gt;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
