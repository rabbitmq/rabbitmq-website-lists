<tt>
reply&nbsp;instead&nbsp;of&nbsp;reply&nbsp;to&nbsp;all...&lt;br&gt;Thank&nbsp;you&nbsp;ben...&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;On&nbsp;Tue,&nbsp;Nov&nbsp;11,&nbsp;2008&nbsp;at&nbsp;6:35&nbsp;AM,&nbsp;Ben&nbsp;Hood&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;<br>
Peter,&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;Nov&nbsp;11,&nbsp;2008&nbsp;at&nbsp;4:42&nbsp;AM,&nbsp;Peter&nbsp;Silva&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:Peter.A.Silva@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Peter.A.Silva@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;This&nbsp;discussion&nbsp;(as&nbsp;an&nbsp;extension&nbsp;to&nbsp;the&nbsp;thread&nbsp;Kirk&nbsp;started)&nbsp;is&nbsp;going&lt;br&gt;<br>
on&nbsp;too&nbsp;long.&nbsp;If&nbsp;defering&nbsp;the&nbsp;routing&nbsp;type&nbsp;to&nbsp;the&nbsp;bindings&nbsp;is&nbsp;as&lt;br&gt;<br>
trivial&nbsp;as&nbsp;you&nbsp;maintain,&nbsp;then&nbsp;please&nbsp;enlighten&nbsp;me&nbsp;with&nbsp;a&nbsp;proof&nbsp;of&lt;br&gt;<br>
concept&nbsp;written&nbsp;in&nbsp;a&nbsp;language&nbsp;of&nbsp;your&nbsp;choice.&nbsp;It&nbsp;would&nbsp;have&nbsp;not&nbsp;have&lt;br&gt;<br>
to&nbsp;be&nbsp;AMQP&nbsp;specific,&nbsp;just&nbsp;something&nbsp;that&nbsp;shows&nbsp;the&nbsp;basr&nbsp;fundamental&lt;br&gt;<br>
routing&nbsp;lookup&nbsp;mechanism&nbsp;based&nbsp;on&nbsp;the&nbsp;data&nbsp;structures&nbsp;you&nbsp;are&lt;br&gt;<br>
proposing.&lt;br&gt;<br>
&lt;br&gt;<br>
Code&nbsp;speaks&nbsp;louder&nbsp;than&nbsp;words&nbsp;and&nbsp;I&nbsp;would&nbsp;love&nbsp;to&nbsp;be&nbsp;proven&nbsp;wrong.&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Funny&nbsp;you&nbsp;should&nbsp;ask!&lt;br&gt;&lt;br&gt;I&nbsp;would&nbsp;really&nbsp;appreciate&nbsp;someone&nbsp;who&nbsp;understands&nbsp;switching&nbsp;having&nbsp;a&nbsp;look&nbsp;at&nbsp;our&nbsp;switch.&amp;nbsp;&nbsp;We&amp;#39;ve&nbsp;only&nbsp;used&nbsp;it&nbsp;internally&nbsp;so&nbsp;far,&nbsp;but&nbsp;I&nbsp;whipped&nbsp;up&nbsp;some&nbsp;.deb&amp;#39;s&nbsp;in&nbsp;honour&nbsp;of&nbsp;your&nbsp;request:&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;a&nbsp;href=&quot;http://metpx.sf.net&quot;&nbsp;target=&quot;_blank&quot;&gt;http://metpx.sf.net&lt;/a&gt;&amp;nbsp;&nbsp;&lt;br&gt;&lt;br&gt;It&amp;#39;s&nbsp;a&nbsp;third&nbsp;generation&nbsp;switch,&nbsp;build&nbsp;from&nbsp;blackbox&nbsp;re-engineering&nbsp;of&nbsp;the&nbsp;other&nbsp;two&nbsp;generations.&amp;nbsp;&nbsp;There&nbsp;is&nbsp;developer&nbsp;documentation&nbsp;to&nbsp;get&nbsp;a&nbsp;loopback&nbsp;configuration&nbsp;working&nbsp;for&nbsp;testing,&nbsp;it&amp;#39;s&nbsp;very&nbsp;weather&nbsp;oriented&nbsp;right&nbsp;now.&amp;nbsp;&amp;nbsp;&nbsp;We&amp;#39;ve&nbsp;been&nbsp;working&nbsp;on&nbsp;it&nbsp;for&nbsp;a&nbsp;few&nbsp;years,&nbsp;but&nbsp;the&nbsp;weather&nbsp;messaging&nbsp;community&nbsp;is,&nbsp;well,&nbsp;kind&nbsp;of&nbsp;scattered,&nbsp;so&nbsp;the&nbsp;installed&nbsp;base&nbsp;is&nbsp;1.&amp;nbsp;&nbsp;It&amp;#39;s&nbsp;a&nbsp;very&nbsp;enthusiastic&nbsp;1,&nbsp;mind&nbsp;you&nbsp;:-)&lt;br&gt;<br>
<br>
&lt;br&gt;concept&nbsp;mapping:&lt;br&gt;&lt;br&gt;AMQP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;MetPX&lt;br&gt;---------&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;-----------&lt;br&gt;Exchange&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Receiver&lt;br&gt;Queue&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Sender&lt;br&gt;Binding&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Routing&lt;br&gt;&lt;br&gt;bindings&nbsp;work&nbsp;with&nbsp;two&nbsp;verbs,&nbsp;accept&nbsp;and&nbsp;reject.&lt;br&gt;<br>
<br>
We&nbsp;differentiate&nbsp;between&nbsp;regex&amp;#39;s&nbsp;and&nbsp;direct&nbsp;mappings&nbsp;for&nbsp;efficiency&nbsp;reasons&nbsp;(use&nbsp;a&nbsp;table&nbsp;for&nbsp;the&nbsp;direct&nbsp;ones.)&lt;br&gt;and&nbsp;yeah,&nbsp;we&amp;#39;re&nbsp;stuck&nbsp;with&nbsp;a&nbsp;linear&nbsp;search&nbsp;through&nbsp;regex&amp;#39;s,&nbsp;which&nbsp;we&nbsp;try&nbsp;to&nbsp;minimize.&amp;nbsp;&nbsp;&lt;br&gt;&lt;br&gt;<br>
<br>
We&nbsp;didn&amp;#39;t&nbsp;do&nbsp;routing&nbsp;that&nbsp;matches&nbsp;to&nbsp;exchanges,&nbsp;but&nbsp;almost&nbsp;all&nbsp;the&nbsp;exchanges&nbsp;use&nbsp;the&nbsp;same&nbsp;routing&nbsp;tables.&nbsp;It&nbsp;implements&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;routing&nbsp;algorithms&nbsp;I&nbsp;have&nbsp;described&nbsp;in&nbsp;python.&amp;nbsp;&nbsp;Ruthless&nbsp;simplicity&nbsp;meant&nbsp;that&nbsp;our&nbsp;first&nbsp;database&nbsp;was&nbsp;done&nbsp;using&nbsp;1&nbsp;file&nbsp;per&nbsp;message&nbsp;on&nbsp;a&nbsp;raw&nbsp;file&nbsp;system.&amp;nbsp;&nbsp;It&nbsp;turns&nbsp;out&nbsp;we&nbsp;can&nbsp;deliver&nbsp;hundreds&nbsp;of&nbsp;messages&nbsp;per&nbsp;second&nbsp;with&nbsp;that&nbsp;storage&nbsp;and&nbsp;FTP,&nbsp;which&nbsp;was&nbsp;good&nbsp;enough&nbsp;for&nbsp;us.&lt;br&gt;<br>
<br>
&lt;br&gt;The&nbsp;packaging&nbsp;is&nbsp;kind&nbsp;of&nbsp;rough,&nbsp;internal&nbsp;people&nbsp;use&nbsp;it&nbsp;a&nbsp;little&nbsp;differently.&amp;nbsp;&nbsp;We&amp;#39;ve&nbsp;been&nbsp;using&nbsp;debian&nbsp;packages&nbsp;for&nbsp;a&nbsp;few&nbsp;months,&nbsp;but&nbsp;file&nbsp;layout&nbsp;is&nbsp;a&nbsp;little&nbsp;different.&nbsp;&lt;br&gt;&lt;br&gt;The&nbsp;routing&nbsp;is&nbsp;actually&nbsp;a&nbsp;very&nbsp;small&nbsp;part&nbsp;of&nbsp;the&nbsp;code&nbsp;a&nbsp;few&nbsp;hundred&nbsp;lines&nbsp;at&nbsp;most.&amp;nbsp;&nbsp;Most&nbsp;of&nbsp;it&nbsp;is&nbsp;protocol&nbsp;drivers.&lt;br&gt;<br>
<br>
&lt;br&gt;The&nbsp;reason&nbsp;for&nbsp;me&nbsp;asking&nbsp;these&nbsp;questions&nbsp;is&nbsp;to&nbsp;understand&nbsp;how&nbsp;to&nbsp;add&nbsp;AMQP&nbsp;support&nbsp;to&nbsp;metpx.&nbsp;&lt;br&gt;&lt;br&gt;ready&nbsp;to&nbsp;answer&nbsp;questions,&nbsp;on&nbsp;or&nbsp;offline.&nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&lt;br&gt;<br>
&amp;gt;&nbsp;going&nbsp;through&nbsp;long&nbsp;lists&nbsp;of&nbsp;regular&nbsp;expression&nbsp;evaluations&nbsp;can&nbsp;kill&lt;br&gt;<br>
&amp;gt;&nbsp;performance.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;:-)&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;the&nbsp;key&nbsp;is&nbsp;minimizing&nbsp;the&nbsp;number&nbsp;that&nbsp;have&nbsp;to&nbsp;be&nbsp;searched&nbsp;for&nbsp;each&nbsp;routing&nbsp;event.&amp;nbsp;&amp;nbsp;&nbsp;If&nbsp;you&nbsp;treasure&nbsp;speed&nbsp;over&nbsp;flexibility,&nbsp;then&nbsp;just&nbsp;don&amp;#39;t&nbsp;put&nbsp;any&nbsp;regex&amp;#39;s&nbsp;in&nbsp;your&nbsp;routing.&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;difference&nbsp;in&nbsp;the&nbsp;design&nbsp;point,&nbsp;is&nbsp;that&nbsp;metpx&nbsp;came&nbsp;from&nbsp;dealing&nbsp;with&nbsp;existing&nbsp;exchanges,&nbsp;and&nbsp;did&nbsp;not&nbsp;have&nbsp;the&nbsp;luxury&nbsp;of&nbsp;defining&nbsp;it&amp;#39;s&nbsp;own&nbsp;key&nbsp;syntax.&amp;nbsp;&amp;nbsp;&nbsp;Data&nbsp;producers&nbsp;are&nbsp;often&nbsp;limited&nbsp;in&nbsp;the&nbsp;names&nbsp;they&nbsp;can&nbsp;supply,&nbsp;and&nbsp;consumers&nbsp;with&nbsp;what&nbsp;they&nbsp;receive&nbsp;(remember,&nbsp;we&nbsp;deal&nbsp;with&nbsp;files,&nbsp;our&nbsp;keys&nbsp;are&nbsp;essentially&nbsp;file&nbsp;names.)&lt;br&gt;<br>
<br>
&lt;br&gt;If&nbsp;we&nbsp;insisted&nbsp;on&nbsp;file&nbsp;naming&nbsp;conventions,&nbsp;we&nbsp;ended&nbsp;up&nbsp;having&nbsp;to&nbsp;implement&nbsp;separate&nbsp;glue&nbsp;elsewhere&nbsp;to&nbsp;rename&nbsp;things&nbsp;we&nbsp;received&nbsp;into&nbsp;the&nbsp;file&nbsp;naming&nbsp;convention&nbsp;the&nbsp;switch&nbsp;required.&lt;br&gt;&amp;nbsp;&nbsp;It&nbsp;made&nbsp;sense&nbsp;to&nbsp;add&nbsp;regex&nbsp;comprehension&nbsp;to&nbsp;the&nbsp;switch&nbsp;itself&nbsp;to&nbsp;derive&nbsp;routing&nbsp;keys&nbsp;from&nbsp;the&nbsp;arbitrary&nbsp;file&nbsp;names&nbsp;we&nbsp;would&nbsp;receive.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;br&gt;<br>

</tt>
