<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=gb2312&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7638.1&quot;&gt;<br>
&lt;TITLE&gt;rabbit&nbsp;is&nbsp;out&nbsp;of&nbsp;service&nbsp;in&nbsp;disk&nbsp;mode.&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I&nbsp;send&nbsp;messages(size:10kB)&nbsp;to&nbsp;a&nbsp;queue&nbsp;on&nbsp;single&nbsp;node,but&nbsp;with&nbsp;no&nbsp;consumers.&nbsp;Here&nbsp;is&nbsp;my&nbsp;java&nbsp;code:&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;channel.exchangeDeclare(exec,&nbsp;&amp;quot;direct&amp;quot;,&nbsp;true,&nbsp;false,&nbsp;null);&lt;BR&gt;<br>
&amp;nbsp;&nbsp;channel.queueDeclare(&amp;quot;FirstQueue&amp;quot;,&nbsp;true,&nbsp;false,&nbsp;false,&nbsp;null);&lt;BR&gt;<br>
&amp;nbsp;&nbsp;channel.queueBind(queueName,&nbsp;exec,&nbsp;routingKey);&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;BasicProperties&nbsp;bp&nbsp;=&nbsp;new&nbsp;BasicProperties();&lt;BR&gt;<br>
&amp;nbsp;&nbsp;bp.setDeliveryMode(2);&lt;BR&gt;<br>
&amp;nbsp;&nbsp;channel.basicPublish(exec,&nbsp;routingKey,&nbsp;bp,&nbsp;messageBodyBytes);&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;When&nbsp;9000&nbsp;message&nbsp;sent,&nbsp;the&nbsp;producer&nbsp;was&nbsp;blocked,&nbsp;I&nbsp;got&nbsp;a&nbsp;message&nbsp;in&nbsp;log&nbsp;:&lt;BR&gt;<br>
&amp;nbsp;&nbsp;vm_memory_high_watermark&nbsp;set.&nbsp;Memory&nbsp;used:288650128&nbsp;allowed:211065241&lt;BR&gt;<br>
&amp;nbsp;&nbsp;alarm_handler:&nbsp;{set,{vm_memory_high_watermark,[]}}&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;Then&nbsp;I&nbsp;stop&nbsp;the&nbsp;rabbit,restart&nbsp;it,&nbsp;but&nbsp;I&nbsp;got&nbsp;same&nbsp;messages&nbsp;in&nbsp;log&nbsp;.&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;If&nbsp;I&nbsp;start&nbsp;a&nbsp;consumer,it&nbsp;receives&nbsp;no&nbsp;messages&nbsp;either¡£&lt;BR&gt;<br>
&amp;nbsp;&lt;BR&gt;<br>
&amp;nbsp;&nbsp;Anyone&nbsp;knows&nbsp;how&nbsp;many&nbsp;messages&nbsp;can&nbsp;a&nbsp;queue&nbsp;persist?&nbsp;just&nbsp;9000&nbsp;?&lt;BR&gt;<br>
&amp;nbsp;&nbsp;I&nbsp;want&nbsp;to&nbsp;persist&nbsp;all&nbsp;the&nbsp;messages,&nbsp;is&nbsp;it&nbsp;possible?&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;nbsp;&nbsp;Anyone&nbsp;give&nbsp;me&nbsp;some&nbsp;advice?&nbsp;Thks&nbsp;.&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
