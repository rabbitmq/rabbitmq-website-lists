<tt>
Yes,&nbsp;$PID_FILE&nbsp;and&nbsp;&amp;quot;normal&nbsp;exit&nbsp;0&amp;quot;&nbsp;was&nbsp;important,&nbsp;without&nbsp;&amp;quot;normal&nbsp;exit&amp;quot;&nbsp;the&nbsp;process&nbsp;would&nbsp;be&nbsp;respawned&nbsp;as&nbsp;soon&nbsp;as&nbsp;it&nbsp;was&nbsp;stopped&nbsp;in&nbsp;pre-stop.&nbsp;&amp;nbsp;<br>
&lt;br/&gt;&lt;br/&gt;description&nbsp;&amp;quot;RabbitMQ&nbsp;Server&amp;quot;<br>
&lt;br/&gt;start&nbsp;on&nbsp;runlevel&nbsp;[2345]<br>
&lt;br/&gt;stop&nbsp;on&nbsp;runlevel&nbsp;[016]<br>
&lt;br/&gt;kill&nbsp;timeout&nbsp;60<br>
&lt;br/&gt;respawn<br>
&lt;br/&gt;respawn&nbsp;limit&nbsp;10&nbsp;5<br>
&lt;br/&gt;normal&nbsp;exit&nbsp;0&nbsp;<br>
&lt;br/&gt;console&nbsp;log<br>
&lt;br/&gt;setuid&nbsp;rabbitmq<br>
&lt;br/&gt;setgid&nbsp;rabbitmq<br>
&lt;br/&gt;env&nbsp;HOME=/var/lib/rabbitmq<br>
&lt;br/&gt;env&nbsp;PID_FILE=/var/run/rabbitmq/pid<br>
&lt;br/&gt;exec&nbsp;/usr/lib/rabbitmq/bin/rabbitmq-server<br>
&lt;br/&gt;post-start&nbsp;exec&nbsp;/usr/sbin/rabbitmqctl&nbsp;wait&nbsp;$PID_FILE<br>
&lt;br/&gt;pre-stop&nbsp;exec&nbsp;/usr/sbin/rabbitmqctl&nbsp;stop&nbsp;$PID_FILE<br>
&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Thanks!&nbsp;&amp;nbsp;<br>
&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;On&nbsp;Tuesday&nbsp;26&nbsp;March&nbsp;2013&nbsp;at&nbsp;21:15,&nbsp;Simon&nbsp;MacMullen-2&nbsp;[via&nbsp;RabbitMQ]&nbsp;wrote:<br>
&lt;br/&gt;&lt;div&nbsp;class='shrinkable-quote'&gt;&lt;br/&gt;&amp;gt;&nbsp;On&nbsp;26/03/13&nbsp;13:09,&nbsp;Tim&nbsp;Watson&nbsp;wrote:&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;On&nbsp;26&nbsp;Mar&nbsp;2013,&nbsp;at&nbsp;12:25,&nbsp;Simon&nbsp;MacMullen&nbsp;wrote:&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&nbsp;Note&nbsp;that&nbsp;you&nbsp;are&nbsp;also&nbsp;running&nbsp;as&nbsp;root.&nbsp;So&nbsp;I&nbsp;would&nbsp;modify&nbsp;two&nbsp;lines:&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&nbsp;post-start&nbsp;exec&nbsp;/usr/sbin/rabbitmqctl&nbsp;wait&nbsp;/var/run/rabbitmq/pid&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;gt;&nbsp;pre-stop&nbsp;exec&nbsp;/usr/sbin/rabbitmqctl&nbsp;stop&nbsp;/var/run/rabbitmq/pid&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&amp;gt;&nbsp;Doesn't&nbsp;the&nbsp;previous&nbsp;setuid/setgid&nbsp;deal&nbsp;with&nbsp;that?&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;Argh;&nbsp;I&nbsp;wrote&nbsp;the&nbsp;&amp;quot;Note&nbsp;that&amp;quot;&nbsp;before&nbsp;noticing&nbsp;the&nbsp;setuid/setgid,&nbsp;then&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;failed&nbsp;to&nbsp;delete&nbsp;it.&nbsp;Please&nbsp;ignore.&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;Cheers,&nbsp;Simon&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;--&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;Simon&nbsp;MacMullen&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;RabbitMQ,&nbsp;VMware&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;_______________________________________________&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;[hidden&nbsp;email]&nbsp;(/user/SendEmail.jtp?type=node&amp;amp;node=25728&amp;amp;i=0)&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_top&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;link=&quot;external&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br/&gt;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;If&nbsp;you&nbsp;reply&nbsp;to&nbsp;this&nbsp;email,&nbsp;your&nbsp;message&nbsp;will&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;discussion&nbsp;below:&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/SIGTERM-tp25695p25728.html&quot;&nbsp;target=&quot;_top&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;link=&quot;external&quot;&gt;http://rabbitmq.1065348.n5.nabble.com/SIGTERM-tp25695p25728.html&lt;/a&gt;&amp;nbsp;<br>
&lt;br/&gt;&amp;gt;&nbsp;To&nbsp;unsubscribe&nbsp;from&nbsp;SIGTERM,&nbsp;click&nbsp;here&nbsp;(&lt;a&nbsp;href=&quot;&quot;&nbsp;target=&quot;_top&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;link=&quot;external&quot;&gt;<br>
&lt;br/&gt;&amp;gt;&nbsp;NAML&nbsp;(&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&quot;&nbsp;target=&quot;_top&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;link=&quot;external&quot;&gt;http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;amp;id=instant_html%21nabble%3Aemail.naml&amp;amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml&lt;/a&gt;)&nbsp;<br>
&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;<br>
<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&lt;br/&gt;&lt;hr&nbsp;align=&quot;left&quot;&nbsp;width=&quot;300&quot;&nbsp;/&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/SIGTERM-tp25695p25732.html&quot;&gt;Re:&nbsp;SIGTERM&lt;/a&gt;&lt;br/&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/&quot;&gt;RabbitMQ&nbsp;mailing&nbsp;list&nbsp;archive&lt;/a&gt;&nbsp;at&nbsp;Nabble.com.&lt;br/&gt;
</tt>
