<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;May&nbsp;25,&nbsp;2012&nbsp;at&nbsp;5:12&nbsp;AM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;id=&quot;:1aj&quot;&gt;In&nbsp;&lt;span&nbsp;class=&quot;il&quot;&gt;the&lt;/span&gt;&nbsp;mean&nbsp;time,&nbsp;I&nbsp;wonder&nbsp;whether&nbsp;500&nbsp;consumers&nbsp;and&nbsp;prefetch-count&nbsp;of&nbsp;2&nbsp;is&nbsp;what&nbsp;you&nbsp;really&nbsp;want.&nbsp;Normally&nbsp;I&nbsp;would&nbsp;expect&nbsp;a&nbsp;configuration&nbsp;like&nbsp;that&nbsp;when&nbsp;you&nbsp;expect&nbsp;to&nbsp;take&nbsp;some&nbsp;time&nbsp;to&nbsp;process&nbsp;each&nbsp;message,&nbsp;but&nbsp;it&nbsp;sounds&nbsp;like&nbsp;you&amp;#39;re&nbsp;going&nbsp;fast&nbsp;enough&nbsp;that&nbsp;either&nbsp;500&nbsp;consumers&nbsp;are&nbsp;not&nbsp;needed,&nbsp;or&nbsp;prefetch-count&nbsp;&amp;gt;&nbsp;2&nbsp;might&nbsp;lead&nbsp;to&nbsp;better&nbsp;performance.&lt;/div&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;I&nbsp;didn&amp;#39;t&nbsp;know&nbsp;that&nbsp;a&nbsp;larger&nbsp;prefetch&nbsp;count&nbsp;could&nbsp;reduce&nbsp;broker&nbsp;workload.&nbsp; Per-message&nbsp;processing&nbsp;in&nbsp;this&nbsp;system&nbsp;is&nbsp;sometimes&nbsp;high&nbsp;(up&nbsp;to&nbsp;20s),&nbsp;but&nbsp;it&nbsp;averages&nbsp;very&nbsp;low.&nbsp; It&amp;#39;s&nbsp;likely&nbsp;that&nbsp;500&nbsp;is&nbsp;overkill,&nbsp;but&nbsp;probably&nbsp;only&nbsp;by&nbsp;2x&nbsp;or&nbsp;so.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Assuming&nbsp;a&nbsp;constant&nbsp;throughput&nbsp;of&nbsp;about&nbsp;6K/sec&nbsp;and&nbsp;at&nbsp;least&nbsp;250&nbsp;workers,&nbsp;what&nbsp;prefetch&nbsp;seems&nbsp;more&nbsp;helpful,&nbsp;IYO?&nbsp; 10?&nbsp; 20?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
