<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Steve,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;EnqueueItem&nbsp;called&nbsp;repeatedly?&nbsp;I&nbsp;would&nbsp;move&nbsp;all&nbsp;of&nbsp;the&nbsp;connection&nbsp;creation&nbsp;code&nbsp;out&nbsp;of&nbsp;this&nbsp;function,&nbsp;and&nbsp;instead&nbsp;maintain&nbsp;the&nbsp;connection&nbsp;as&nbsp;a&nbsp;long&nbsp;lived&nbsp;instance.&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;--Jon&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Feb&nbsp;23,&nbsp;2014&nbsp;at&nbsp;5:51&nbsp;AM,&nbsp;Steve&nbsp;T&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:ssteo@roboqa.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ssteo@roboqa.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;for&nbsp;sending&nbsp;to&nbsp;this&nbsp;mail&nbsp;list,&nbsp;not&nbsp;sure&nbsp;if&nbsp;this&nbsp;is&nbsp;the&nbsp;right&nbsp;channel&nbsp;to&nbsp;report&nbsp;this&nbsp;issue.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;using&nbsp;RabbitMQ&nbsp;.NET&nbsp;client&nbsp;3.2.3&nbsp;with&nbsp;RabbitMQ&nbsp;3.2.3&nbsp;but&nbsp;encountering&nbsp;some&nbsp;random&nbsp;errors&nbsp;thrown&nbsp;from&nbsp;within&nbsp;the&nbsp;client&nbsp;itself.&nbsp;The&nbsp;error&nbsp;below&nbsp;happens&nbsp;very&nbsp;occassionally&nbsp;during&nbsp;item&nbsp;publishing&nbsp;via&nbsp;my&nbsp;own&nbsp;function &lt;span&nbsp;style=&quot;font-family:arial,sans-serif&quot;&gt;EnqueueItem();&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Stack&nbsp;Trace:&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;System.Net.Sockets.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;SocketException:&nbsp;The&nbsp;descriptor&nbsp;is&nbsp;not&nbsp;a&nbsp;socket&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt; &nbsp;at&nbsp;System.Net.Sockets.Socket.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;SetSocketOption&nbsp;(SocketOptionLevel&nbsp;optionLevel,&nbsp;SocketOptionName&nbsp;optionName,&nbsp;Int32&nbsp;optionValue)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt; &nbsp;at&nbsp;System.Net.Sockets.TcpClient.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;set_ReceiveTimeout&nbsp;(Int32&nbsp;value)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt; &nbsp;at&nbsp;RabbitMQ.Client.Impl.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;SocketFrameHandler_0_9.set_&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Timeout&nbsp;(Int32&nbsp;value)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt; &nbsp;at&nbsp;RabbitMQ.Client.Impl.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;ConnectionBase.ClosingLoop&nbsp;()&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;My&nbsp;code&nbsp;is&nbsp;fairly&nbsp;straightforward,&nbsp;shown&nbsp;below:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;private&nbsp;static&nbsp;void&nbsp;EnqueueItem(string&nbsp;queue,&nbsp;string&nbsp;json)&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ConnectionFactory&nbsp;connectionFactory&nbsp;=&nbsp;new&nbsp;ConnectionFactory()&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HostName&nbsp;=&nbsp;ROBOQA_RABBITMQ_HOSTNAME,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UserName&nbsp;=&nbsp;ROBOQA_RABBITMQ_USERNAME,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Password&nbsp;=&nbsp;ROBOQA_RABBITMQ_PASSWORD&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;using&nbsp;(IConnection&nbsp;iconnection&nbsp;=&nbsp;connectionFactory.CreateConnection())&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;using&nbsp;(IModel&nbsp;channel&nbsp;=&nbsp;iconnection.CreateModel())&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.QueueDeclare(queue,&nbsp;true,&nbsp;false,&nbsp;false,&nbsp;null);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IBasicProperties&nbsp;properties&nbsp;=&nbsp;channel.CreateBasicProperties();&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;properties.SetPersistent(true);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.BasicPublish(String.Empty,&nbsp;queue,&nbsp;properties,&nbsp;Encoding.UTF8.GetBytes(json));&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Will&nbsp;be&nbsp;great&nbsp;if&nbsp;anyone&nbsp;can&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;problem&nbsp;with&nbsp;the&nbsp;way&nbsp;I&nbsp;use&nbsp;it&nbsp;or&nbsp;maybe&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;client&nbsp;driver&nbsp;itself?&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Thanks,&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Steve.&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
