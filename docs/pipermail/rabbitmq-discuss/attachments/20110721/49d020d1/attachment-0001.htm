<tt>
Hi,&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;investigating&nbsp;a&nbsp;rare&nbsp;(but&nbsp;nonetheless&nbsp;top&nbsp;priority)&nbsp;amqp&nbsp;gem&nbsp;issue&nbsp;when&nbsp;frames&nbsp;are&nbsp;delivered&nbsp;out&nbsp;of&nbsp;order.&nbsp;Neither&nbsp;the&nbsp;Tracer&nbsp;tool&nbsp;nor&nbsp;Wireshark&nbsp;give&nbsp;me&lt;br&gt;good&nbsp;understanding&nbsp;of&nbsp;what&nbsp;frame&nbsp;exactly&nbsp;RabbitMQ&nbsp;chokes&nbsp;on,&nbsp;it&nbsp;just&nbsp;says&nbsp;&amp;quot;expected&nbsp;a&nbsp;method&nbsp;frame,&nbsp;got&nbsp;a&nbsp;non-method&nbsp;frame&nbsp;instead&amp;quot;.&lt;br&gt;<br>
<br>
&lt;br&gt;So&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;patch&nbsp;RabbitMQ&nbsp;to&nbsp;get&nbsp;some&nbsp;more&nbsp;information.&nbsp;What&amp;#39;s&nbsp;the&nbsp;right&nbsp;way&nbsp;to&nbsp;do&nbsp;it?&nbsp;Right&nbsp;now&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;make&lt;br&gt;rabbit_command_assembler:process/2&nbsp;do&nbsp;what&nbsp;I&nbsp;want&nbsp;and&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;how&nbsp;to&nbsp;get&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&lt;br&gt;<br>
<br>
&lt;br&gt;1.&nbsp;Method&nbsp;that&nbsp;was&nbsp;delivered&nbsp;out&nbsp;of&nbsp;order.&lt;br&gt;2.&nbsp;#&nbsp;of&nbsp;the&nbsp;channel&nbsp;on&nbsp;which&nbsp;it&nbsp;happened&lt;br&gt;3.&nbsp;Ideally,&nbsp;10-20&nbsp;most&nbsp;recent&nbsp;frames&lt;br&gt;&lt;br&gt;Can&nbsp;I&nbsp;ask&nbsp;someone&nbsp;from&nbsp;the&nbsp;RabbitMQ&nbsp;team&nbsp;help&nbsp;me&nbsp;a&nbsp;little&nbsp;bit?&nbsp;Where&nbsp;should&nbsp;I&nbsp;be&nbsp;looking?&nbsp;Is&nbsp;it&nbsp;a&nbsp;good&nbsp;idea&nbsp;to&nbsp;make&nbsp;Rabbit&nbsp;log&nbsp;such&lt;br&gt;<br>
<br>
issues&nbsp;with&nbsp;more&nbsp;detail&nbsp;(it&nbsp;shouldn&amp;#39;t&nbsp;affect&nbsp;hot&nbsp;code&nbsp;path&nbsp;performance&nbsp;anyway)?&lt;br&gt;&lt;br&gt;At&nbsp;this&nbsp;point&nbsp;I&nbsp;have&nbsp;an&nbsp;app&nbsp;that&nbsp;reproduces&nbsp;the&nbsp;issue&nbsp;roughly&nbsp;every&nbsp;other&nbsp;time&nbsp;and&nbsp;I&nbsp;am&nbsp;using&nbsp;a&nbsp;Rabbit&nbsp;instance&nbsp;compiled&nbsp;from&nbsp;HEAD&nbsp;sources.&lt;br&gt;<br>
<br>
--&nbsp;&lt;br&gt;MK&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://github.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/michaelklishin&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twitter.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/michaelklishin&lt;/a&gt;&lt;br&gt;&lt;br&gt;<br>
<br>
<br>

</tt>
