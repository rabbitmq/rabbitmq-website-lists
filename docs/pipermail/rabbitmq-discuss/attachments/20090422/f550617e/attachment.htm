<tt>
Hello,&lt;br&gt;&lt;br&gt;So&nbsp;first&nbsp;off&nbsp;I&nbsp;want&nbsp;to&nbsp;say&nbsp;how&nbsp;delighted&nbsp;I&nbsp;am&nbsp;with&nbsp;RabbitMQ.&nbsp;Once&nbsp;I&nbsp;kinda&nbsp;got&nbsp;the&nbsp;hang&nbsp;of&nbsp;Erlang,&nbsp;the&nbsp;code&nbsp;is&nbsp;really&nbsp;nice&nbsp;and&nbsp;easy&nbsp;enough&nbsp;to&nbsp;understand;&nbsp;though&nbsp;I&amp;#39;m&nbsp;still&nbsp;very&nbsp;much&nbsp;new&nbsp;at&nbsp;this.&lt;br&gt;&lt;br&gt;First&nbsp;a&nbsp;little&nbsp;background&nbsp;(sorry&nbsp;it&amp;#39;s&nbsp;so&nbsp;long):&nbsp;I&nbsp;have&nbsp;a&nbsp;use-case&nbsp;where&nbsp;I&amp;#39;m&nbsp;using&nbsp;RabbitMQ&nbsp;with&nbsp;the&nbsp;STOMP&nbsp;adapter&nbsp;(which&nbsp;is&nbsp;also&nbsp;wonderful&nbsp;BTW)&nbsp;but&nbsp;ran&nbsp;into&nbsp;some&nbsp;limitations.&nbsp;We&nbsp;(my&nbsp;team&nbsp;working&nbsp;on&nbsp;a&nbsp;project)&nbsp;plan&nbsp;for&nbsp;every&nbsp;user&nbsp;of&nbsp;our&nbsp;service&nbsp;to&nbsp;have&nbsp;their&nbsp;own&nbsp;&amp;#39;inbox&amp;#39;&nbsp;(queue)&nbsp;to&nbsp;receive&nbsp;real-time&nbsp;data&nbsp;over&nbsp;via&nbsp;a&nbsp;topic&nbsp;exchange.&nbsp;What&nbsp;we&nbsp;want&nbsp;to&nbsp;allow&nbsp;though&nbsp;is&nbsp;for&nbsp;same&nbsp;user&nbsp;(or&nbsp;a&nbsp;default&nbsp;&amp;#39;guest&amp;#39;&nbsp;account)&nbsp;to&nbsp;log&nbsp;in&nbsp;from&nbsp;multiple&nbsp;places&nbsp;and&nbsp;receive&nbsp;from&nbsp;the&nbsp;same&nbsp;queue.&nbsp;Now&nbsp;one&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;I&nbsp;suppose&nbsp;would&nbsp;be&nbsp;to&nbsp;create&nbsp;an&nbsp;exchange&nbsp;per&nbsp;user&nbsp;to&nbsp;fan&nbsp;out&nbsp;and&nbsp;have&nbsp;new&nbsp;temporary/auto_delete&nbsp;queue&amp;#39;s&nbsp;for&nbsp;each&nbsp;connection;&nbsp;kind&nbsp;of&nbsp;like&nbsp;what&nbsp;the&nbsp;STOMP&nbsp;adapter&nbsp;docs&nbsp;describe&nbsp;for&nbsp;broadcast.&nbsp;But&nbsp;creating&nbsp;an&nbsp;exchange&nbsp;per&nbsp;user&nbsp;just&nbsp;seemed&nbsp;too...heavy&nbsp;for&nbsp;me&nbsp;and&nbsp;overkill,&nbsp;I&nbsp;think&nbsp;it&amp;#39;s&nbsp;easier&nbsp;to&nbsp;just&nbsp;give&nbsp;each&nbsp;a&nbsp;queue.&lt;br&gt;<br>
&lt;br&gt;Problem&nbsp;was,&nbsp;I&nbsp;couldn&amp;#39;t&nbsp;properly&nbsp;map&nbsp;in&nbsp;my&nbsp;head&nbsp;(or&nbsp;in&nbsp;code)&nbsp;how&nbsp;to&nbsp;get&nbsp;all&nbsp;consumers&nbsp;of&nbsp;that&nbsp;queue&nbsp;to&nbsp;get&nbsp;the&nbsp;message.&nbsp;The&nbsp;broadcast-like&nbsp;behaviour&nbsp;using&nbsp;another&nbsp;fanout&nbsp;exchange&nbsp;like&nbsp;described&nbsp;didn&amp;#39;t&nbsp;seem&nbsp;like&nbsp;it&nbsp;would&nbsp;work&nbsp;for&nbsp;me.&lt;br&gt;<br>
&lt;br&gt;So&nbsp;I&nbsp;modified&nbsp;the&nbsp;RabbitMQ-server&nbsp;code&nbsp;to&nbsp;add&nbsp;another&nbsp;boolean&nbsp;attribute&nbsp;to&nbsp;each&nbsp;queue&nbsp;called&nbsp;&amp;#39;broadcast&amp;#39;.&nbsp;When&nbsp;you&nbsp;declare&nbsp;a&nbsp;queue,&nbsp;you&nbsp;can&nbsp;turn&nbsp;on&nbsp;&amp;#39;broadcast&amp;#39;&nbsp;(default&nbsp;is&nbsp;false)&nbsp;and&nbsp;that&nbsp;will&nbsp;make&nbsp;all&nbsp;the&nbsp;current/active&nbsp;consumers&nbsp;of&nbsp;the&nbsp;queue&nbsp;receive&nbsp;the&nbsp;message&nbsp;at&nbsp;once&nbsp;instead&nbsp;of&nbsp;round-robining&nbsp;to&nbsp;a&nbsp;single&nbsp;consumer.&nbsp;I&nbsp;thought&nbsp;about&nbsp;maybe&nbsp;setting&nbsp;this&nbsp;flag&nbsp;per&nbsp;message&nbsp;instead&nbsp;but&nbsp;that&nbsp;thought&nbsp;only&nbsp;came&nbsp;as&nbsp;I&nbsp;was&nbsp;almost&nbsp;finished&nbsp;with&nbsp;the&nbsp;per-queue&nbsp;one&nbsp;and&nbsp;that&nbsp;seems&nbsp;to&nbsp;work&nbsp;great&nbsp;for&nbsp;me.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;know&nbsp;this&nbsp;probably&nbsp;breaks&nbsp;the&nbsp;AMQP&nbsp;protocol&nbsp;as&nbsp;defined,&nbsp;but&nbsp;I&nbsp;found&nbsp;it&nbsp;to&nbsp;be&nbsp;really&nbsp;useful&nbsp;and&nbsp;kind&nbsp;of&nbsp;surprised&nbsp;that&nbsp;such&nbsp;a&nbsp;behaviour&nbsp;didn&amp;#39;t&nbsp;exist.&lt;br&gt;&lt;br&gt;Because&nbsp;I&amp;#39;ve&nbsp;been&nbsp;Erlanging&nbsp;for&nbsp;all&nbsp;of&nbsp;2&nbsp;days&nbsp;now,&nbsp;I&nbsp;just&nbsp;wanted&nbsp;to&nbsp;post&nbsp;my&nbsp;diff&nbsp;here&nbsp;with&nbsp;the&nbsp;changes&nbsp;to&nbsp;do&nbsp;this&nbsp;feature&nbsp;and&nbsp;see&nbsp;if&nbsp;some&nbsp;of&nbsp;you&nbsp;talented&nbsp;RabbitMQ&nbsp;devs&nbsp;could&nbsp;give&nbsp;it&nbsp;a&nbsp;quick&nbsp;glance&nbsp;and&nbsp;see&nbsp;if&nbsp;I&nbsp;might&nbsp;have&nbsp;royally&nbsp;screwed&nbsp;up&nbsp;somewhere.&nbsp;I&nbsp;tested&nbsp;it&nbsp;for&nbsp;me&nbsp;and&nbsp;it&nbsp;works&nbsp;fine,&nbsp;but&nbsp;haven&amp;#39;t&nbsp;done&nbsp;much&nbsp;load-testing&nbsp;on&nbsp;it&nbsp;yet.&nbsp;I&nbsp;just&nbsp;really&nbsp;love&nbsp;that&nbsp;I&nbsp;can&nbsp;have&nbsp;however-many&nbsp;STOMP&nbsp;connections&nbsp;to&nbsp;a&nbsp;single&nbsp;broadcast-queue&nbsp;and&nbsp;they&nbsp;all&nbsp;get&nbsp;a&nbsp;message&nbsp;going&nbsp;to&nbsp;it,&nbsp;it&amp;#39;s&nbsp;really&nbsp;great.&lt;br&gt;<br>
&lt;br&gt;So&nbsp;attached&nbsp;is&nbsp;the&nbsp;diff&nbsp;for&nbsp;the&nbsp;server.&nbsp;I&nbsp;did&nbsp;the&nbsp;testing&nbsp;for&nbsp;this&nbsp;using&nbsp;Barry&amp;#39;s&nbsp;nice&nbsp;py-amqplib&nbsp;and&nbsp;made&nbsp;a&nbsp;change&nbsp;there&nbsp;too&nbsp;to&nbsp;send&nbsp;another&nbsp;Bit&nbsp;for&nbsp;the&nbsp;boolean&nbsp;broadcast&nbsp;flag&nbsp;when&nbsp;declaring&nbsp;a&nbsp;queue;&nbsp;I&nbsp;attached&nbsp;the&nbsp;new&nbsp;file&nbsp;I&nbsp;changed&nbsp;for&nbsp;that&nbsp;too.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;would&nbsp;just&nbsp;appreciate&nbsp;any&nbsp;feedback&nbsp;you&nbsp;guys&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;give&nbsp;for&nbsp;this&nbsp;and&nbsp;thank&nbsp;you&nbsp;again&nbsp;for&nbsp;such&nbsp;a&nbsp;great&nbsp;peice&nbsp;of&nbsp;software!&lt;br&gt;&lt;br&gt;-Nemanja&lt;br&gt;&lt;br&gt;P.S.&nbsp;The&nbsp;changes&nbsp;I&nbsp;made&nbsp;were&nbsp;to&nbsp;the&nbsp;tip&nbsp;of&nbsp;hg&nbsp;as&nbsp;of&nbsp;yesterday&nbsp;morning&nbsp;(well&nbsp;morning&nbsp;for&nbsp;me&nbsp;in&nbsp;GMT-6).&lt;br&gt;<br>

</tt>
