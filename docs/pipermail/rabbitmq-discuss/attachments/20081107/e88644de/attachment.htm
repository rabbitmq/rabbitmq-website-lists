<tt>
Hi&nbsp;all,&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;using&nbsp;the&nbsp;Erlang&nbsp;client&nbsp;(2008/06/23&nbsp;vintage,&nbsp;I&nbsp;think)&nbsp;and&nbsp;I&amp;#39;ve&nbsp;started&nbsp;to&nbsp;need&nbsp;message-related&nbsp;properties&nbsp;like&nbsp;timestamp,&nbsp;expiration,&nbsp;and&nbsp;so&nbsp;on,&nbsp;to&nbsp;avoid&nbsp;reinventing&nbsp;the&nbsp;wheel.&nbsp;The&nbsp;Java&nbsp;client&amp;#39;s&nbsp;Javadoc&nbsp;I&nbsp;am&nbsp;not&nbsp;finding&nbsp;very&nbsp;helpful&nbsp;for&nbsp;this&nbsp;set&nbsp;of&nbsp;questions.&nbsp;I&nbsp;know&nbsp;that&nbsp;the&nbsp;Erlang&nbsp;client&nbsp;is&nbsp;still&nbsp;experimental,&nbsp;so&nbsp;I&nbsp;am<br>
asking&nbsp;for&nbsp;&amp;quot;documentation&amp;quot;&nbsp;here&nbsp;(*&nbsp;see&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;post&nbsp;before&nbsp;sending&nbsp;STFW&nbsp;messages,&nbsp;please&nbsp;:)&lt;br&gt;&lt;br&gt;If&nbsp;the&nbsp;following&nbsp;questions&nbsp;are&nbsp;answered&nbsp;somewhere&nbsp;in&nbsp;a&nbsp;way&nbsp;that&nbsp;relates<br>
to&nbsp;how&nbsp;to&nbsp;use&nbsp;it&nbsp;in&nbsp;the&nbsp;Erlang&nbsp;client&nbsp;(e.g.&nbsp;examples&nbsp;in&nbsp;Erlang),&nbsp;please&nbsp;point&nbsp;me&nbsp;to&nbsp;it&nbsp;and&nbsp;disregard&nbsp;the&nbsp;rest&nbsp;of&nbsp;these&nbsp;questions.&lt;br&gt;&lt;br&gt;My&nbsp;questions&nbsp;are:&lt;br&gt;&lt;ol&gt;&lt;li&gt;When&nbsp;I&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;properties&nbsp;set&nbsp;to&nbsp;amqp_util:basic_properties(),&nbsp;and&nbsp;receive&nbsp;it&nbsp;using&nbsp;a&nbsp;basic.get,&nbsp;the&nbsp;message&nbsp;has&nbsp;only&nbsp;got&nbsp;property&nbsp;data&nbsp;in&nbsp;properties_bin,&nbsp;but&nbsp;properties&nbsp;is&nbsp;set&nbsp;to&nbsp;&amp;#39;none&amp;#39;.&nbsp;How&nbsp;do&nbsp;I&nbsp;decode&nbsp;what&amp;#39;s&nbsp;in&nbsp;properties_bin?&nbsp;Alternatively,&nbsp;how&nbsp;do&nbsp;I&nbsp;get&nbsp;the&nbsp;properties&nbsp;to&nbsp;stay&nbsp;set&nbsp;in&nbsp;the&nbsp;unencoded&nbsp;&amp;#39;properties&amp;#39;&nbsp;field?&lt;br&gt;<br>
&lt;/li&gt;&lt;li&gt;What&nbsp;is&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;timestamp&nbsp;field,&nbsp;and&nbsp;how&nbsp;do&nbsp;I&nbsp;encode/decode&nbsp;it?&nbsp;I&nbsp;can&amp;#39;t&nbsp;find&nbsp;a&nbsp;definition&nbsp;for&nbsp;its&nbsp;type&nbsp;&amp;quot;timestamp&amp;quot;&nbsp;in&nbsp;the&nbsp;AMQP&nbsp;spec.&lt;br&gt;&lt;/li&gt;&lt;li&gt;When&nbsp;and&nbsp;by&nbsp;what&nbsp;does&nbsp;the&nbsp;timestamp&nbsp;get&nbsp;set?&nbsp;I&nbsp;searched&nbsp;all&nbsp;the&nbsp;client&nbsp;code&nbsp;for&nbsp;&amp;#39;timestamp&amp;#39;&nbsp;but&nbsp;could&nbsp;not&nbsp;find&nbsp;it,&nbsp;so&nbsp;when&nbsp;I&nbsp;create&nbsp;a&nbsp;new&nbsp;message,&nbsp;what&nbsp;sets&nbsp;this?&lt;/li&gt;<br>
&lt;li&gt;What&nbsp;is&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;expiration?&nbsp;The&nbsp;spec&nbsp;does&nbsp;not&nbsp;define&nbsp;it.&lt;br&gt;&lt;/li&gt;&lt;li&gt;What&nbsp;is&nbsp;the&nbsp;behavior&nbsp;when&nbsp;a&nbsp;message&nbsp;has&nbsp;expired?&nbsp;Does&nbsp;the&nbsp;client&nbsp;automatically&nbsp;throw&nbsp;it&nbsp;away&nbsp;when&nbsp;doing&nbsp;a&nbsp;basic.get&nbsp;or&nbsp;consume&nbsp;so&nbsp;I&nbsp;never&nbsp;see&nbsp;it?&lt;br&gt;<br>
&lt;/li&gt;&lt;li&gt;Does&nbsp;the&nbsp;message_id&nbsp;ever&nbsp;get&nbsp;set&nbsp;automatically&nbsp;to&nbsp;a&nbsp;unique&nbsp;value?&lt;/li&gt;&lt;li&gt;What&nbsp;is&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;&amp;#39;type&amp;#39;&nbsp;property?&nbsp;The&nbsp;spec&nbsp;just&nbsp;writes&nbsp;&amp;quot;message&nbsp;type&nbsp;name&amp;quot;?&nbsp;Is&nbsp;this&nbsp;totally&nbsp;user-defined?&lt;/li&gt;<br>
&lt;li&gt;How&nbsp;does&nbsp;one&nbsp;set&nbsp;and&nbsp;get&nbsp;message&nbsp;headers?&lt;/li&gt;&lt;/ol&gt;I&nbsp;am&nbsp;sure&nbsp;that&nbsp;I&nbsp;could&nbsp;work&nbsp;this&nbsp;all&nbsp;out&nbsp;if&nbsp;I&nbsp;read&nbsp;all&nbsp;the&nbsp;Rabbit&nbsp;code,&nbsp;all&nbsp;the&nbsp;AMQP&nbsp;tutorials&nbsp;I&nbsp;can&nbsp;find,&nbsp;and&nbsp;so&nbsp;on,&nbsp;but&nbsp;it&nbsp;would&nbsp;take&nbsp;me&nbsp;days.&nbsp;It&amp;#39;s&nbsp;already&nbsp;taken&nbsp;hours&nbsp;so&nbsp;far.&nbsp;If&nbsp;anyone&nbsp;can&nbsp;help&nbsp;me&nbsp;shortcut&nbsp;this,&nbsp;I&nbsp;would&nbsp;be&nbsp;very&nbsp;grateful.&lt;br&gt;<br>
&lt;br&gt;Regards,&lt;br&gt;<br>
Edwin&nbsp;Fine&lt;br&gt;----------&lt;br&gt;*&nbsp;For&nbsp;those&nbsp;who&nbsp;believe&nbsp;I&nbsp;should&nbsp;RTFM&nbsp;or&nbsp;STFW,&nbsp;I&nbsp;hear&nbsp;you,&nbsp;and&nbsp;I&nbsp;have&nbsp;done&nbsp;my&nbsp;best&nbsp;in&nbsp;the&nbsp;time&nbsp;I&nbsp;have&nbsp;available.&nbsp;This&nbsp;is&nbsp;what&nbsp;I&nbsp;have&nbsp;done&nbsp;and/or&nbsp;learned:&lt;br&gt;&lt;br&gt;I&nbsp;looked&nbsp;in&nbsp;the&nbsp;Erlang&nbsp;client&nbsp;and<br>
server&nbsp;code,&nbsp;too,&nbsp;but&nbsp;found&nbsp;little&nbsp;to&nbsp;help,&nbsp;besides&nbsp;this&nbsp;in<br>
amqp_util.erl:&lt;br&gt;<br>
&lt;br&gt;<br>
basic_properties()&nbsp;-&amp;gt;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&amp;#39;P_basic&amp;#39;{content_type&nbsp;=&nbsp;&amp;lt;&amp;lt;&amp;quot;application/octet-stream&amp;quot;&amp;gt;&amp;gt;,&nbsp;delivery_mode&nbsp;=&nbsp;1,&nbsp;priority&nbsp;=&nbsp;0}&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;From&nbsp;rabbit_framing.hrl,&nbsp;I&nbsp;got&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
-record(&amp;#39;P_basic&amp;#39;,&nbsp;{content_type,&nbsp;content_encoding,&nbsp;headers,<br>
delivery_mode,&nbsp;priority,&nbsp;correlation_id,&nbsp;reply_to,&nbsp;expiration,<br>
message_id,&nbsp;timestamp,&nbsp;type,&nbsp;user_id,&nbsp;app_id,&nbsp;cluster_id}).&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;above&nbsp;fields&nbsp;are&nbsp;described&nbsp;in&nbsp;the&nbsp;amqp0-8.xml&nbsp;document&nbsp;in&nbsp;terms&nbsp;of<br>
their&nbsp;basic&nbsp;type&nbsp;(e.g.&nbsp;shortstr,&nbsp;whatever&nbsp;that&nbsp;is)&nbsp;and&nbsp;their&nbsp;purpose.<br>
The&nbsp;basic&nbsp;types&nbsp;(shortstr,&nbsp;timestamp,&nbsp;etc)&nbsp;are&nbsp;not&nbsp;explained&nbsp;in&nbsp;the<br>
document,&nbsp;nor&nbsp;can&nbsp;I&nbsp;find&nbsp;a&nbsp;reference&nbsp;to&nbsp;anything&nbsp;that&nbsp;does&nbsp;explain<br>
them.&nbsp;I&nbsp;saw&nbsp;in&nbsp;the&nbsp;Rabbit&nbsp;code&nbsp;an&nbsp;assertion&nbsp;that&nbsp;shortstr&nbsp;length&nbsp;must<br>
be&nbsp;&amp;lt;&nbsp;256,&nbsp;so&nbsp;now&nbsp;I&nbsp;know&nbsp;that&nbsp;:)&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;the&nbsp;Javadoc,&nbsp;only&nbsp;the&nbsp;content_type,&nbsp;delivery_mode,&nbsp;and&nbsp;priority<br>
fields&nbsp;seem&nbsp;to&nbsp;be&nbsp;used&nbsp;in&nbsp;the&nbsp;MessageProperties&nbsp;class.&nbsp;The&nbsp;descriptions<br>
of&nbsp;each&nbsp;of&nbsp;the&nbsp;properties&nbsp;in&nbsp;Basic.Properties&nbsp;are&nbsp;absent.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;searched&nbsp;the&nbsp;Rabbit&nbsp;message&nbsp;list&nbsp;archives,&nbsp;too.&nbsp;One&nbsp;of&nbsp;the&nbsp;messages<br>
pointed&nbsp;me&nbsp;to&nbsp;a&nbsp;tutorial&nbsp;in&nbsp;C,&nbsp;which&nbsp;was&nbsp;useful&nbsp;to&nbsp;see&nbsp;how&nbsp;some&nbsp;of&nbsp;the<br>
properties&nbsp;were&nbsp;used&nbsp;(&lt;a&nbsp;href=&quot;http://www.openamq.org/tutorial:soa&quot;&gt;http://www.openamq.org/tutorial:soa&lt;/a&gt;).&nbsp;Now&nbsp;I<br>
understand&nbsp;that&nbsp;I&nbsp;have&nbsp;to&nbsp;set&nbsp;the&nbsp;message_id&nbsp;myself,&nbsp;and&nbsp;that&nbsp;the<br>
routing&nbsp;key&nbsp;of&nbsp;the&nbsp;sender&nbsp;should&nbsp;be&nbsp;put&nbsp;into&nbsp;reply_to&nbsp;if&nbsp;the&nbsp;sender<br>
requires&nbsp;a&nbsp;reply,&nbsp;in&nbsp;other&nbsp;words,&nbsp;the&nbsp;routing&nbsp;key&nbsp;of&nbsp;the&nbsp;responder&nbsp;must<br>
be&nbsp;set&nbsp;to&nbsp;the&nbsp;sender&amp;#39;s&nbsp;reply_to&nbsp;property.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;am&nbsp;still&nbsp;looking&nbsp;through&nbsp;the&nbsp;C&nbsp;code&nbsp;tutorials,&nbsp;so&nbsp;maybe&nbsp;I&nbsp;will&nbsp;find&nbsp;out&nbsp;more.&lt;br&gt;<br>

</tt>
