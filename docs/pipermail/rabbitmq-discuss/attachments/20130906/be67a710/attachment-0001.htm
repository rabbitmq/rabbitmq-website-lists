<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Simon,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;am&nbsp;not&nbsp;trying&nbsp;to&nbsp;monitor&nbsp;rabbitmq.&nbsp;Rabbitmq&nbsp;is&nbsp;part&nbsp;of&nbsp;the&nbsp;new&nbsp;version&nbsp;of&nbsp;Zenoss.&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;setup&nbsp;my&nbsp;new&nbsp;Zenoss&nbsp;installation&nbsp;in&nbsp;a&nbsp;Veritas&nbsp;cluster&nbsp;that&nbsp;has&nbsp;a&nbsp;SAN&nbsp;and&nbsp;VIP&nbsp;that&nbsp;fail&nbsp;back&nbsp;and&nbsp;forth&nbsp;between&nbsp;the&nbsp;hosts.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;Zenoss&nbsp;and&nbsp;RabbitMQ&nbsp;work&nbsp;fine&nbsp;on&nbsp;Node&nbsp;A&nbsp;but&nbsp;not&nbsp;on&nbsp;Node&nbsp;B.&nbsp;I&nbsp;don&amp;#39;t&nbsp;see&nbsp;any&nbsp;difference&nbsp;in&nbsp;the&nbsp;setup&nbsp;from&nbsp;Node&nbsp;A&nbsp;to&nbsp;Node&nbsp;B.&lt;br&gt;&lt;br&gt;&lt;/div&gt;If&nbsp;this&nbsp;were&nbsp;working&nbsp;right,&nbsp;I&nbsp;could&nbsp;failover&nbsp;to&nbsp;Node&nbsp;B&nbsp;and&nbsp;RabbitMQ&nbsp;would&nbsp;allow&nbsp;Zenhub&nbsp;(a&nbsp;zenoss&nbsp;service)&nbsp;to&nbsp;connect&nbsp;to&nbsp;it.&nbsp;Zenhub&nbsp;logs&nbsp;tell&nbsp;me&nbsp;RabbitMQ&nbsp;is&nbsp;refusing&nbsp;its&nbsp;connection.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;Thank&nbsp;you&nbsp;for&nbsp;any&nbsp;help!&lt;br&gt;&lt;br&gt;&lt;/div&gt;Cheers&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Sep&nbsp;6,&nbsp;2013&nbsp;at&nbsp;11:49&nbsp;AM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;06/09/2013&nbsp;3:51PM,&nbsp;Ken&nbsp;Henry&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Simon,&lt;br&gt;<br>
&lt;br&gt;<br>
Anything&nbsp;else&nbsp;you&nbsp;can&nbsp;think&nbsp;of&nbsp;to&nbsp;troubleshoot&nbsp;more?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
You&nbsp;are&nbsp;essential&nbsp;saying&nbsp;that&nbsp;Zenoss&nbsp;is&nbsp;at&nbsp;fault?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
I&nbsp;still&nbsp;don&amp;#39;t&nbsp;think&nbsp;I&nbsp;am&nbsp;100%&nbsp;sure&nbsp;what&nbsp;you&nbsp;are&nbsp;saying&nbsp;your&nbsp;problem&nbsp;is.&nbsp;Are&nbsp;you&nbsp;saying:&lt;br&gt;<br>
&lt;br&gt;<br>
1)&nbsp;Zenoss&nbsp;should&nbsp;be&nbsp;connecting&nbsp;to&nbsp;node&nbsp;A&nbsp;and&nbsp;node&nbsp;B&nbsp;to&nbsp;monitor&nbsp;them&lt;br&gt;<br>
2)&nbsp;It&nbsp;should&nbsp;also&nbsp;be&nbsp;routing&nbsp;connections&nbsp;from&nbsp;clients&nbsp;to&nbsp;node&nbsp;A&nbsp;but&nbsp;not&nbsp;node&nbsp;B&nbsp;since&nbsp;node&nbsp;A&nbsp;has&nbsp;not&nbsp;failed&lt;br&gt;<br>
3)&nbsp;But&nbsp;you&amp;#39;re&nbsp;seeing&nbsp;long-lived&nbsp;connections&nbsp;to&nbsp;node&nbsp;B,&nbsp;which&nbsp;shouldn&amp;#39;t&nbsp;be&nbsp;happening&lt;br&gt;<br>
&lt;br&gt;<br>
That&amp;#39;s&nbsp;what&nbsp;I&amp;#39;ve&nbsp;understood&nbsp;from&nbsp;you.&lt;br&gt;<br>
&lt;br&gt;<br>
However,&nbsp;I&amp;#39;ve&nbsp;just&nbsp;Googled&nbsp;&amp;quot;zenoss&nbsp;rabbitmq&amp;quot;&nbsp;and&nbsp;they&nbsp;claim&nbsp;their&nbsp;plugin&nbsp;monitors&nbsp;RabbitMQ&nbsp;by&nbsp;invoking&nbsp;rabbitmqctl&nbsp;over&nbsp;ssh.&nbsp;So&nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;that&nbsp;adds&nbsp;up&nbsp;with&nbsp;what&nbsp;I&amp;#39;ve&nbsp;understood.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;please&nbsp;can&nbsp;you&nbsp;explain&nbsp;what&nbsp;you&nbsp;expect&nbsp;to&nbsp;be&nbsp;happening,&nbsp;and&nbsp;why&nbsp;the&nbsp;results&nbsp;you&amp;#39;re&nbsp;seeing&nbsp;don&amp;#39;t&nbsp;match&nbsp;your&nbsp;expectations?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Fri,&nbsp;Sep&nbsp;6,&nbsp;2013&nbsp;at&nbsp;9:30&nbsp;AM,&nbsp;Simon&nbsp;MacMullen&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&amp;lt;mailto:&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;On&nbsp;06/09/2013&nbsp;2:23PM,&nbsp;Ken&nbsp;Henry&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Simon,&nbsp;thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;your&nbsp;help!&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Yes&nbsp;I&nbsp;figured&nbsp;that&nbsp;if&nbsp;my&nbsp;connection&nbsp;was&nbsp;closed&nbsp;those&nbsp;connections&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;would&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;not&nbsp;listed&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;I&nbsp;actually&nbsp;killed&nbsp;the&nbsp;connections&nbsp;yesterday&nbsp;and&nbsp;they&nbsp;kept&nbsp;coming&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;back&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;under&nbsp;different&nbsp;pids&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;I&nbsp;started&nbsp;the&nbsp;zenoss&nbsp;service&nbsp;that&nbsp;connects&nbsp;to&nbsp;rabbitmq&nbsp;and&nbsp;it&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;looks&nbsp;like&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;its&nbsp;trying&nbsp;to&nbsp;connect&nbsp;to&nbsp;a&nbsp;PID&nbsp;that&nbsp;does&nbsp;not&nbsp;exist&nbsp;which&nbsp;it&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;sounds&nbsp;like&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;from&nbsp;your&nbsp;e-mail&nbsp;that&nbsp;that&nbsp;is&nbsp;ok?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;The&nbsp;pid&nbsp;is&nbsp;effectively&nbsp;just&nbsp;a&nbsp;connection&nbsp;identifier&nbsp;in&nbsp;this&nbsp;case.&nbsp;So&lt;br&gt;<br>
 &nbsp; &nbsp;if&nbsp;the&nbsp;connections&nbsp;logging&nbsp;as&nbsp;&amp;quot;closed_abruptly&amp;quot;&nbsp;don&amp;#39;t&nbsp;show&nbsp;up&nbsp;under&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;quot;rabbitmqctl&nbsp;list_connections&amp;quot;&nbsp;I&amp;#39;d&nbsp;say&nbsp;you&amp;#39;re&nbsp;good.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;sorry&nbsp;I&nbsp;am&nbsp;running&nbsp;a&nbsp;little&nbsp;slow&nbsp;this&nbsp;morning&nbsp;but&nbsp;I&nbsp;couldn&amp;#39;t&nbsp;get&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;that&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;command&nbsp;to&nbsp;work&nbsp;all&nbsp;together&nbsp;but&nbsp;was&nbsp;able&nbsp;to&nbsp;just&nbsp;run&nbsp;it&nbsp;with&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;pid&nbsp;option&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;rabbitmqctl&nbsp;list_connections&nbsp;zenoss&nbsp;localhost&nbsp;client_properties&nbsp;pid&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Listing&nbsp;connections&nbsp;...&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Error:&nbsp;{bad_argument,zenoss}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;You&nbsp;don&amp;#39;t&nbsp;need&nbsp;to&nbsp;make&nbsp;substitutions&nbsp;there&nbsp;-&nbsp;I&nbsp;mean&nbsp;literally&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;quot;rabbitmqctl&nbsp;list_connections&nbsp;user&nbsp;peer_host&nbsp;peer_port&lt;br&gt;<br>
 &nbsp; &nbsp;client_properties&nbsp;pid&amp;quot;.&nbsp;That&nbsp;command&nbsp;means&nbsp;&amp;quot;give&nbsp;me&nbsp;a&nbsp;listing&nbsp;with&lt;br&gt;<br>
 &nbsp; &nbsp;columns&nbsp;for&nbsp;user,&nbsp;peer&nbsp;host,&nbsp;etc&amp;quot;.&nbsp;See&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
 &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/man/__rabbitmqctl.1.man.html#list___connections&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/man/__&lt;u&gt;&lt;/u&gt;rabbitmqctl.1.man.html#list___&lt;u&gt;&lt;/u&gt;connections&lt;/a&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
 &nbsp; &nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/man/rabbitmqctl.1.man.html#list_connections&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/man/&lt;u&gt;&lt;/u&gt;rabbitmqctl.1.man.html#list_&lt;u&gt;&lt;/u&gt;connections&lt;/a&gt;&amp;gt;&nbsp;for&lt;br&gt;<br>
 &nbsp; &nbsp;more&nbsp;details.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Is&nbsp;there&nbsp;anyway&nbsp;to&nbsp;turn&nbsp;on&nbsp;more&nbsp;logging?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Afraid&nbsp;not.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Cheers,&nbsp;Simon&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;--&lt;br&gt;<br>
 &nbsp; &nbsp;Simon&nbsp;MacMullen&lt;br&gt;<br>
 &nbsp; &nbsp;RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
