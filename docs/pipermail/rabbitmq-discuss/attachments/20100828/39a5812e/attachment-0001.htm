<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Thanks&nbsp;for&nbsp;your&nbsp;answer.&lt;br&gt;&lt;br&gt;A&nbsp;job&nbsp;(task)&nbsp;is&nbsp;something&nbsp;that&nbsp;our&nbsp;web&nbsp;based&nbsp;system&nbsp;monitors&nbsp;-&nbsp;external&nbsp;system(s)&nbsp;do&nbsp;things&nbsp;for&nbsp;us&nbsp;as&nbsp;a&nbsp;Job,&nbsp;and&nbsp;we&nbsp;provide&nbsp;feedback&nbsp;on&nbsp;that.&nbsp;At&nbsp;the&nbsp;moment,&nbsp;its&nbsp;very&nbsp;old-school,&nbsp;if&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;the&nbsp;status&nbsp;of&nbsp;a&nbsp;job&nbsp;we&nbsp;make&nbsp;a&nbsp;request&nbsp;to&nbsp;the&nbsp;external&nbsp;system&nbsp;and&nbsp;get&nbsp;the&nbsp;status&nbsp;and&nbsp;display&nbsp;it&nbsp;in&nbsp;our&nbsp;web&nbsp;interface.&nbsp;I&nbsp;want&nbsp;to&nbsp;move&nbsp;to&nbsp;a&nbsp;system&nbsp;where&nbsp;the&nbsp;external&nbsp;system&nbsp;sends&nbsp;us&nbsp;callbacks&nbsp;as&nbsp;the&nbsp;job&nbsp;progresses,&nbsp;and&nbsp;if&nbsp;anyone&nbsp;is&nbsp;on&nbsp;the&nbsp;web&nbsp;interface&nbsp;looking&nbsp;at&nbsp;that&nbsp;job&nbsp;they&nbsp;get&nbsp;updates&nbsp;on&nbsp;the&nbsp;status.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;actually&nbsp;considering&nbsp;dropping&nbsp;STOMP,&nbsp;and&nbsp;writing&nbsp;consumers&nbsp;and&nbsp;broadcasters&nbsp;in&nbsp;AMQP.&nbsp;But&nbsp;the&nbsp;overall&nbsp;functionality&nbsp;will&nbsp;be&nbsp;the&nbsp;same,&lt;br&gt;&lt;br&gt;I&nbsp;will&nbsp;have&nbsp;processes&nbsp;that&nbsp;will&nbsp;receive&nbsp;external&nbsp;notifications&nbsp;of&nbsp;updates&nbsp;on&nbsp;jobs&nbsp;(the&nbsp;callbacks)&nbsp;and&nbsp;should&nbsp;then&nbsp;place&nbsp;them&nbsp;onto&nbsp;a&nbsp;queue&nbsp;in&nbsp;RabbitMQ&nbsp;for&nbsp;that&nbsp;particular&nbsp;job,&nbsp;so&nbsp;any&nbsp;consumer&nbsp;that&nbsp;is&nbsp;listening&nbsp;to&nbsp;the&nbsp;queue&nbsp;gets&nbsp;a&nbsp;notification.&nbsp;(Broadcast,&nbsp;not&nbsp;round-robin).&lt;br&gt;&lt;br&gt;Each&nbsp;Job&nbsp;will&nbsp;have&nbsp;its&nbsp;own&nbsp;queue,&nbsp;plus&nbsp;a&nbsp;queue&nbsp;for&nbsp;all&nbsp;Jobs.&lt;br&gt;&lt;br&gt;The&nbsp;consumer,&nbsp;or&nbsp;customer&nbsp;is&nbsp;a&nbsp;browser&nbsp;session&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;day,&nbsp;using&nbsp;browser&nbsp;(Javascript)&nbsp;websocket&nbsp;-&nbsp;to&nbsp;a&nbsp;&amp;nbsp;proxy&nbsp;-&nbsp;to&nbsp;a&nbsp;long&nbsp;polling&nbsp;handler&nbsp;capable&nbsp;of&nbsp;listen&nbsp;to&nbsp;AMQP&nbsp;queues&nbsp;(thus&nbsp;getting&nbsp;rid&nbsp;of&nbsp;my&nbsp;STOMP&nbsp;need).&nbsp;The&nbsp;long&nbsp;polling&nbsp;handler&nbsp;listens&nbsp;to&nbsp;a&nbsp;queue&nbsp;as&nbsp;told&nbsp;by&nbsp;the&nbsp;browser,&nbsp;sending&nbsp;any&nbsp;feedback&nbsp;to&nbsp;the&nbsp;browser.&lt;br&gt;&lt;br&gt;In&nbsp;more&nbsp;detail:&lt;br&gt;&lt;br&gt;Browser&nbsp;(&nbsp;Javascript,&nbsp;websocket)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&lt;br&gt;Orbited2.0&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&lt;br&gt;Tornado&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&lt;br&gt;RabbitMQ&lt;br&gt;&lt;br&gt;&lt;br&gt;Tornado&nbsp;will&nbsp;handle&nbsp;the&nbsp;websockets,&nbsp;user&nbsp;authentication&nbsp;and&nbsp;connect&nbsp;to&nbsp;RabbitMQ&nbsp;using&nbsp;AMQP.&lt;br&gt;&lt;br&gt;Thats&nbsp;it&nbsp;in&nbsp;theory.&nbsp;My&nbsp;question&nbsp;is&nbsp;really&nbsp;is&nbsp;there&nbsp;any&nbsp;glaring&nbsp;errors&nbsp;in&nbsp;this,&nbsp;and&nbsp;also&nbsp;about&nbsp;the&nbsp;queue&nbsp;setup&nbsp;-&nbsp;but&nbsp;I&nbsp;will&nbsp;look&nbsp;at&nbsp;your&nbsp;example.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;&lt;br&gt;Tim.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;On&nbsp;27&nbsp;Aug&nbsp;2010,&nbsp;at&nbsp;13:20,&nbsp;Marek&nbsp;Majkowski&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Tim,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;24,&nbsp;2010&nbsp;at&nbsp;14:15,&nbsp;Tim&nbsp;Child&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tim@cantemo.com&quot;&gt;tim@cantemo.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;One&nbsp;part&nbsp;of&nbsp;my&nbsp;application&nbsp;is&nbsp;to&nbsp;provide&nbsp;realtime&nbsp;feedback&nbsp;on&nbsp;jobs&nbsp;going&nbsp;on&nbsp;in&nbsp;the&nbsp;system,&nbsp;there&nbsp;will&nbsp;be&nbsp;a&nbsp;job&nbsp;overview&nbsp;page,&nbsp;which&nbsp;will&nbsp;list&nbsp;the&nbsp;status&nbsp;of&nbsp;x&nbsp;number&nbsp;of&nbsp;jobs&nbsp;(probably&nbsp;about&nbsp;40),&nbsp;and&nbsp;a&nbsp;job&nbsp;'detail'&nbsp;page&nbsp;which&nbsp;will&nbsp;have&nbsp;more&nbsp;in-depth&nbsp;information&nbsp;on&nbsp;that&nbsp;job.&nbsp;I&nbsp;have&nbsp;been&nbsp;working&nbsp;with&nbsp;Orbited&nbsp;and&nbsp;Morbidq,&nbsp;and&nbsp;basically&nbsp;it&nbsp;works&nbsp;today&nbsp;by&nbsp;creating&nbsp;STOMP&nbsp;channels&nbsp;for&nbsp;each&nbsp;job,&nbsp;and&nbsp;on&nbsp;going&nbsp;to&nbsp;the&nbsp;detail&nbsp;page&nbsp;of&nbsp;a&nbsp;particular&nbsp;job&nbsp;my&nbsp;Javascript&nbsp;subscribes&nbsp;to&nbsp;the&nbsp;job&nbsp;channel&nbsp;/jobs/jobID&nbsp;&amp;nbsp;using&nbsp;STOMP.&nbsp;I&nbsp;have&nbsp;a&nbsp;publisher&nbsp;that&nbsp;when&nbsp;there&nbsp;are&nbsp;any&nbsp;updates&nbsp;to&nbsp;the&nbsp;jobs&nbsp;publishes&nbsp;to&nbsp;the&nbsp;channel,&nbsp;and&nbsp;if&nbsp;any&nbsp;consumers&nbsp;are&nbsp;listening&nbsp;on&nbsp;that&nbsp;particular&nbsp;channel&nbsp;the&nbsp;page&nbsp;is&nbsp;updated&nbsp;with&nbsp;the&nbsp;new&nbsp;details.&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Now&nbsp;moving&nbsp;over&nbsp;to&nbsp;using&nbsp;RabbitMQ,&nbsp;and&nbsp;the&nbsp;stomp&nbsp;plugin,&nbsp;I&nbsp;understand&nbsp;that&nbsp;my&nbsp;setup&nbsp;will&nbsp;change&nbsp;slightly.&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;currently&nbsp;have&nbsp;a&nbsp;VHOST&nbsp;/&nbsp;,&nbsp;and&nbsp;I&nbsp;publish&nbsp;to&nbsp;an&nbsp;exchange,&nbsp;my&nbsp;understanding&nbsp;is&nbsp;that&nbsp;I&nbsp;have&nbsp;to&nbsp;send&nbsp;to&nbsp;a&nbsp;particular&nbsp;exchange&nbsp;&quot;amq.topic&quot;&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;broadcast&nbsp;to&nbsp;more&nbsp;than&nbsp;one&nbsp;consumer&nbsp;that&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;listening.&nbsp;I&nbsp;don't&nbsp;care&nbsp;if&nbsp;my&nbsp;message&nbsp;doesn't&nbsp;ever&nbsp;get&nbsp;received&nbsp;as&nbsp;someone&nbsp;will&nbsp;not&nbsp;always&nbsp;be&nbsp;on&nbsp;the&nbsp;system.&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;And&nbsp;then&nbsp;my&nbsp;STOMP&nbsp;consumer&nbsp;will&nbsp;listen&nbsp;to&nbsp;VHOST&nbsp;/&nbsp;and&nbsp;amq.topic&nbsp;?&nbsp;But&nbsp;if&nbsp;I&nbsp;want&nbsp;to&nbsp;replicate&nbsp;my&nbsp;jobs&nbsp;channels,&nbsp;should&nbsp;I&nbsp;create&nbsp;a&nbsp;routing&nbsp;key,&nbsp;binding&nbsp;and&nbsp;different&nbsp;queues&nbsp;for&nbsp;each&nbsp;job?&nbsp;Records&nbsp;of&nbsp;jobs&nbsp;can&nbsp;stay&nbsp;on&nbsp;my&nbsp;system&nbsp;forever,&nbsp;but&nbsp;the&nbsp;period&nbsp;that&nbsp;they&nbsp;get&nbsp;updated&nbsp;is&nbsp;sporadic&nbsp;-&nbsp;much&nbsp;in&nbsp;the&nbsp;first&nbsp;minutes&nbsp;of&nbsp;their&nbsp;life,&nbsp;hardly&nbsp;ever&nbsp;after&nbsp;they&nbsp;have&nbsp;been&nbsp;finished.&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;don't&nbsp;thin&nbsp;I&nbsp;understand&nbsp;what&nbsp;you&nbsp;mean&nbsp;by&nbsp;'replicating&nbsp;jobs&nbsp;channels'.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Instead,&nbsp;let&nbsp;me&nbsp;focus&nbsp;on&nbsp;our&nbsp;STOMP&nbsp;plugin&nbsp;semantics.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;First,&nbsp;the&nbsp;basic&nbsp;flow&nbsp;of&nbsp;AMQP&nbsp;messages&nbsp;goes&nbsp;like&nbsp;that:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;[Producer]---&amp;gt;Exchange---&amp;gt;(using&nbsp;binding)---&amp;gt;Queue---&amp;gt;[Consumer]&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;You&nbsp;need&nbsp;to&nbsp;decide&nbsp;where&nbsp;to&nbsp;do&nbsp;dispatching&nbsp;of&nbsp;messages&nbsp;from&nbsp;multiple&nbsp;producers,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;do&nbsp;you&nbsp;have&nbsp;a&nbsp;queue&nbsp;per&nbsp;customer&nbsp;or&nbsp;maybe&nbsp;many&nbsp;queues&nbsp;for&nbsp;every&nbsp;customer?&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Does&nbsp;a&nbsp;'customer'&nbsp;mean&nbsp;a&nbsp;browser&nbsp;session&nbsp;and&nbsp;or&nbsp;is&nbsp;it&nbsp;just&nbsp;a&nbsp;single&nbsp;page&nbsp;view?&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Next&nbsp;problem&nbsp;is&nbsp;that&nbsp;the&nbsp;mapping&nbsp;of&nbsp;AMQP&nbsp;to&nbsp;STOMP&nbsp;is&nbsp;not&nbsp;straightforward,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;it&nbsp;requires&nbsp;pretty&nbsp;good&nbsp;understanding&nbsp;of&nbsp;AMQP&nbsp;routing.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;The&nbsp;best&nbsp;examples&nbsp;of&nbsp;STOMP&nbsp;and&nbsp;rabbitmq-stomp&nbsp;semantics&nbsp;that&nbsp;I'm&nbsp;aware&nbsp;of&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;are&nbsp;in&nbsp;the&nbsp;test&nbsp;file:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;a&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-stomp/file/0404cb2620df/test/test.py&quot;&gt;http://hg.rabbitmq.com/rabbitmq-stomp/file/0404cb2620df/test/test.py&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;For&nbsp;example&nbsp;the&nbsp;&quot;test_broadcast&quot;&nbsp;may&nbsp;be&nbsp;useful&nbsp;to&nbsp;you.&nbsp;The&nbsp;next&nbsp;example&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&quot;test_roundrobin&quot;&nbsp;shows&nbsp;how&nbsp;to&nbsp;declare&nbsp;a&nbsp;named&nbsp;queue.&nbsp;Take&nbsp;look&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;at&nbsp;the&nbsp;subtle&nbsp;difference&nbsp;in&nbsp;'destination:'&nbsp;headers&nbsp;between&nbsp;this&nbsp;and&nbsp;a&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;previous&nbsp;example.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Cheers,&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Marek&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;Tim&nbsp;Child&lt;br&gt;+46&nbsp;(0)&nbsp;7602&nbsp;17785&lt;br&gt;Skype:&nbsp;timchild&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.cantemo.com/&quot;&gt;http://www.cantemo.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
