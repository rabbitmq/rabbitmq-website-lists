<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;A&nbsp;trick&nbsp;is&nbsp;to&nbsp;make&nbsp;your&nbsp;messages&nbsp;idempotent.&nbsp;Then&nbsp;you&nbsp;can&nbsp;reissue&nbsp;the&nbsp;same&nbsp;request&nbsp;again&nbsp;after&nbsp;a&nbsp;timeout,&nbsp;should&nbsp;you&nbsp;have&nbsp;had&nbsp;no&nbsp;response&nbsp;yet.&nbsp;It&nbsp;is&nbsp;a&nbsp;protocol&nbsp;design&nbsp;trick&nbsp;that&nbsp;often&nbsp;helps&nbsp;because&nbsp;it&nbsp;circumvents&nbsp;the&nbsp;problem&nbsp;of&nbsp;keeping&nbsp;state&nbsp;entirely.&nbsp;Also&nbsp;look&nbsp;at&nbsp;&quot;best&nbsp;effort&quot;&nbsp;delivery.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Nov&nbsp;26,&nbsp;2013&nbsp;at&nbsp;11:18&nbsp;PM,&nbsp;Alvaro&nbsp;Videla&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:videlalvaro@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;videlalvaro@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Also&nbsp;I&nbsp;think&nbsp;it&nbsp;might&nbsp;be&nbsp;worth&nbsp;mentioning&nbsp;the&nbsp;&quot;Publisher&nbsp;Confirms&quot;&lt;br&gt;<br>
feature&nbsp;of&nbsp;RabbitMQ:&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/confirms.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/confirms.html&lt;/a&gt;&nbsp;in&nbsp;case&nbsp;you&lt;br&gt;<br>
need&nbsp;to&nbsp;be&nbsp;sure&nbsp;a&nbsp;message&nbsp;was&nbsp;taking&nbsp;care&nbsp;by&nbsp;the&nbsp;server.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
-Alvaro&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;Nov&nbsp;26,&nbsp;2013&nbsp;at&nbsp;11:14&nbsp;PM,&nbsp;Michael&nbsp;Klishin&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;mailto:mklishin@gopivotal.com&quot;&gt;mklishin@gopivotal.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;26&nbsp;Nov&nbsp;2013,&nbsp;at&nbsp;23:35,&nbsp;Alfonso&nbsp;Alvz&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:alfonso.alvz@gmail.com&quot;&gt;alfonso.alvz@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;there&#39;s&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;make&nbsp;the&nbsp;messages&nbsp;persistent&nbsp;in&nbsp;case&nbsp;the&nbsp;server&nbsp;fails?.&nbsp;If&nbsp;the&nbsp;client&nbsp;sends&nbsp;a&nbsp;message&nbsp;with&nbsp;no&nbsp;server&nbsp;running,&nbsp;it&nbsp;stays&nbsp;there&nbsp;awaiting&nbsp;for&nbsp;the&nbsp;response&nbsp;and&nbsp;it&nbsp;doesn&#39;t&nbsp;get&nbsp;anything&nbsp;once&nbsp;the&nbsp;server&nbsp;goes&nbsp;up&nbsp;again..&lt;br&gt;<br>
<br>
<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Accumulate&nbsp;messages&nbsp;in&nbsp;the&nbsp;client&nbsp;and&nbsp;re-publish&nbsp;them&nbsp;when&nbsp;a&nbsp;new&nbsp;connection&nbsp;is&nbsp;up.&nbsp;Note&nbsp;that&nbsp;to&nbsp;really&lt;br&gt;<br>
&gt;&nbsp;make&nbsp;this&nbsp;work&nbsp;you’ll&nbsp;need&nbsp;to&nbsp;have&nbsp;a&nbsp;WAL&nbsp;(write-ahead&nbsp;log)&nbsp;of&nbsp;messages&nbsp;on&nbsp;disk&nbsp;to&nbsp;significantly&nbsp;reduce&lt;br&gt;<br>
&gt;&nbsp;message&nbsp;loss&nbsp;probability&nbsp;when&nbsp;your&nbsp;publisher&nbsp;crashes,&nbsp;runs&nbsp;out&nbsp;of&nbsp;memory,&nbsp;etc.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Having&nbsp;a&nbsp;configuration&nbsp;like&nbsp;this:&lt;br&gt;<br>
&gt;&gt;&nbsp;If&nbsp;the&nbsp;server&nbsp;disappears,&nbsp;is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;resume&nbsp;the&nbsp;process&nbsp;whenever&nbsp;the&nbsp;server&nbsp;is&nbsp;up&nbsp;again?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Some&nbsp;clients&nbsp;support&nbsp;automatic&nbsp;recovery&nbsp;but&nbsp;currently&nbsp;don’t&nbsp;provide&nbsp;WAL’s.&nbsp;3rd&nbsp;party&nbsp;projects&nbsp;built&nbsp;on&nbsp;top&lt;br&gt;<br>
&gt;&nbsp;of&nbsp;clients&nbsp;(e.g.&nbsp;Hutch,&nbsp;Celery&nbsp;or&nbsp;EasyNetQ)&nbsp;may&nbsp;choose&nbsp;to&nbsp;provide&nbsp;WAL&nbsp;and&nbsp;more&nbsp;advanced&nbsp;features&lt;br&gt;<br>
&gt;&nbsp;but&nbsp;it&nbsp;is&nbsp;currently&nbsp;out&nbsp;of&nbsp;scope&nbsp;for&nbsp;the&nbsp;protocol&nbsp;clients.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Message&nbsp;durability&nbsp;controls&nbsp;whether&nbsp;the&nbsp;message&nbsp;will&nbsp;be&nbsp;stored&nbsp;on&nbsp;disk&nbsp;by&nbsp;RabbitMQ.&nbsp;It&nbsp;has&nbsp;no&nbsp;effect&lt;br&gt;<br>
&gt;&nbsp;on&nbsp;what&nbsp;happens&nbsp;when&nbsp;you&nbsp;publish&nbsp;messages&nbsp;on&nbsp;a&nbsp;closed&nbsp;connection.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;MK&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Software&nbsp;Engineer,&nbsp;Pivotal/RabbitMQ&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;J.<br>
&lt;/div&gt;<br>

</tt>
