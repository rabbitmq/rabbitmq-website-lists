<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;the&nbsp;easiest&nbsp;would&nbsp;be&nbsp;to&nbsp;implement&nbsp;some&nbsp;kind&nbsp;of&nbsp;RPC&nbsp;logic&nbsp;so&nbsp;when&nbsp;the&nbsp;consumer&nbsp;gets&nbsp;the&nbsp;&amp;quot;banana&amp;quot;&nbsp;message,&nbsp;it&nbsp;can&nbsp;publish&nbsp;a&nbsp;message&nbsp;back&nbsp;to&nbsp;the&nbsp;sender&nbsp;so&nbsp;the&nbsp;sender&nbsp;can&nbsp;restart&nbsp;the&nbsp;sequence.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;could&nbsp;also&nbsp;try&nbsp;something&nbsp;with&nbsp;basic.nack&nbsp;and&nbsp;a&nbsp;bascic.qos&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;that&nbsp;you&nbsp;want&nbsp;to&nbsp;cycle&nbsp;through.&nbsp;So&nbsp;in&nbsp;your&nbsp;case&nbsp;you&nbsp;can&nbsp;set&nbsp;a&nbsp;prefetch&nbsp;count&nbsp;of&nbsp;3&nbsp;and&nbsp;whenever&nbsp;you&nbsp;get&nbsp;the&nbsp;banana&nbsp;message&nbsp;you&nbsp;basick.nack&nbsp;all&nbsp;three.&nbsp;See&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/nack.html&quot;&gt;http://www.rabbitmq.com/nack.html&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;first&nbsp;approach&nbsp;could&nbsp;be&nbsp;more&nbsp;flexible.&amp;nbsp;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alvaro&lt;br&gt;&lt;br&gt;On&nbsp;Wednesday,&nbsp;November&nbsp;27,&nbsp;2013,&nbsp;&lt;a&nbsp;href=&quot;mailto:yby538@163.com&quot;&gt;yby538@163.com&lt;/a&gt;&nbsp;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;u&gt;&lt;/u&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;MARGIN:10px&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;hi,all&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;sender&nbsp;and&nbsp;i&nbsp;have&nbsp;a&nbsp;receiver.&nbsp;Sender&nbsp;pushes&nbsp;the&nbsp;messages,&amp;nbsp;&nbsp;<br>
apple&nbsp;,orange&nbsp;,banana&nbsp;to&nbsp;queue&nbsp;which&nbsp;is&nbsp;named&nbsp;&amp;quot;fruit&amp;quot;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;once&nbsp;the&nbsp;receiver&nbsp;gets&nbsp;the&nbsp;message&nbsp;&amp;quot;banana&amp;quot;&nbsp;and&nbsp;send&nbsp;the&nbsp;ack.&amp;nbsp;&nbsp;i&nbsp;<br>
want&nbsp;the&nbsp;sender&nbsp;to&nbsp;be&nbsp;noticed&nbsp;so&nbsp;it&nbsp;can&amp;nbsp;&nbsp;send&nbsp;the&nbsp;message&nbsp;&amp;quot;banana&amp;quot;&nbsp;to&nbsp;the&nbsp;<br>
queue&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;you&nbsp;know,&nbsp;i&nbsp;mean,&nbsp;i&nbsp;want&nbsp;to&nbsp;ensure&nbsp;that&nbsp;the&nbsp;queue&nbsp;does&nbsp;always&nbsp;<br>
contains&nbsp;banana&nbsp;,apple&nbsp;and&nbsp;orange&nbsp;and&nbsp;if&nbsp;one&nbsp;message&nbsp;was&nbsp;got&nbsp;by&nbsp;the&nbsp;receiver&nbsp;<br>
,the&nbsp;sender&nbsp;will&nbsp;push&nbsp;it&nbsp;to&nbsp;the&nbsp;queue&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;how&nbsp;to&nbsp;implement&nbsp;it,&nbsp;please?&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;Does&nbsp;it&nbsp;make&nbsp;sense?&nbsp;i&nbsp;am&nbsp;very&nbsp;sorry&nbsp;since&nbsp;my&nbsp;English&nbsp;is&nbsp;very&nbsp;poor&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;thanks&nbsp;a&nbsp;lot&lt;/div&gt;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;hr&nbsp;style=&quot;min-height:1px;WIDTH:210px&quot;&nbsp;align=&quot;left&quot;&nbsp;color=&quot;#b5c4df&quot;&nbsp;size=&quot;1&quot;&gt;<br>
<br>
&lt;div&gt;&lt;span&gt;<br>
&lt;div&nbsp;style=&quot;FONT-SIZE:10pt;FONT-FAMILY:verdana;MARGIN:10px&quot;&gt;<br>
&lt;div&gt;叶邦宇，福建人，热爱篮球和游泳，研究三国史&lt;/div&gt;<br>
&lt;div&gt;喜欢看书，说笑话，调侃，以及听音乐&lt;/div&gt;<br>
&lt;div&gt;有轻微强迫症，有一颗善良的心，喜欢就事论事&lt;/div&gt;<br>
&lt;div&gt;极度挑食，几乎不吃零食，很少吃水果&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
