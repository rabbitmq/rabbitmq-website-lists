<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;am&nbsp;using&nbsp;F5&nbsp;as&nbsp;well&nbsp;but&nbsp;as&nbsp;2-cluster&nbsp;with&nbsp;2&nbsp;nodes&nbsp;each.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;&gt;But&nbsp;in&nbsp;every&nbsp;test&nbsp;scenario&nbsp;under&nbsp;load&nbsp;we&nbsp;start&nbsp;to&nbsp;see&nbsp;the&nbsp;socket&nbsp;opened&nbsp;to&nbsp;Rabbit&nbsp;on&nbsp;a&nbsp;write&nbsp;operation&nbsp;and&nbsp;no&nbsp;response&nbsp;for&nbsp;20-30&nbsp;seconds&nbsp;(with&nbsp;&gt;network&nbsp;tracing&nbsp;tools).&lt;/font&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Is&nbsp;this&nbsp;no&nbsp;response&nbsp;on&nbsp;the&nbsp;client&nbsp;side?&nbsp;How&nbsp;does&nbsp;the&nbsp;network&nbsp;capture&nbsp;look&nbsp;on&nbsp;the&nbsp;rabbitmq&nbsp;server&nbsp;side?&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Thanks!&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Feb&nbsp;6,&nbsp;2014&nbsp;at&nbsp;7:34&nbsp;PM,&nbsp;Ron&nbsp;Cordell&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:ron.cordell@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ron.cordell@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Hello&nbsp;everyone!&lt;/span&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;We&nbsp;are&nbsp;trying&nbsp;to&nbsp;understand&nbsp;RabbitMQ&nbsp;behavior&nbsp;that&nbsp;we&nbsp;see&nbsp;in&nbsp;a&nbsp;highly&nbsp;available&nbsp;cluster&nbsp;and&nbsp;I&#39;m&nbsp;hoping&nbsp;someone&nbsp;here&nbsp;can&nbsp;shed&nbsp;some&nbsp;light&nbsp;on&nbsp;it.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;We&nbsp;have&nbsp;a&nbsp;3-node&nbsp;cluster&nbsp;that&nbsp;is&nbsp;exposed&nbsp;to&nbsp;the&nbsp;application&nbsp;via&nbsp;an&nbsp;F5&nbsp;load&nbsp;balancer&nbsp;by&nbsp;a&nbsp;virtual&nbsp;IP.&nbsp;The&nbsp;majority&nbsp;of&nbsp;the&nbsp;queues&nbsp;that&nbsp;are&nbsp;created&nbsp;are&nbsp;highly&nbsp;available&nbsp;queues&nbsp;in&nbsp;order&nbsp;to&nbsp;prevent&nbsp;message&nbsp;loss&nbsp;from&nbsp;happening&nbsp;in&nbsp;the&nbsp;event&nbsp;of&nbsp;a&nbsp;catastrophic&nbsp;failure&nbsp;of&nbsp;a&nbsp;node.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;The&nbsp;rabbit&nbsp;instances/nodes&nbsp;are&nbsp;3.2.2&nbsp;with&nbsp;Erlang&nbsp;16B02.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;The&nbsp;application&nbsp;consists&nbsp;of&nbsp;a&nbsp;series&nbsp;of&nbsp;REST&nbsp;HTTP&nbsp;interfaces&nbsp;which&nbsp;place&nbsp;the&nbsp;incoming&nbsp;messages&nbsp;onto&nbsp;the&nbsp;rabbit&nbsp;queues.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;When&nbsp;we&nbsp;load&nbsp;test&nbsp;the&nbsp;application&nbsp;we&nbsp;are&nbsp;seeing&nbsp;a&nbsp;periodic&nbsp;delay&nbsp;in&nbsp;writing&nbsp;a&nbsp;message&nbsp;to&nbsp;Rabbit.&nbsp;The&nbsp;delay&nbsp;happens&nbsp;about&nbsp;once&nbsp;every&nbsp;few&nbsp;minutes&nbsp;and&nbsp;lasts&nbsp;up&nbsp;to&nbsp;30&nbsp;seconds.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;We&nbsp;have&nbsp;tested&nbsp;in&nbsp;several&nbsp;scenarios:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
3&nbsp;node&nbsp;load&nbsp;balanced&nbsp;cluster&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;single&nbsp;node,&nbsp;non&nbsp;ha-policy&nbsp;applied&nbsp;machine&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;on&nbsp;Windows&nbsp;Server&nbsp;2008R2&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;on&nbsp;Linux&nbsp;(Oracle&nbsp;Linux)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;on&nbsp;VMWare&nbsp;virtual&nbsp;machines&nbsp;on&nbsp;high&nbsp;speed&nbsp;SAN&nbsp;storage&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
on&nbsp;physical&nbsp;machines&nbsp;with&nbsp;SSD&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;direct&nbsp;connection&nbsp;with&nbsp;no&nbsp;LB&nbsp;to&nbsp;single&nbsp;node&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
We&nbsp;haven&#39;t&nbsp;tested&nbsp;every&nbsp;combination&nbsp;in&nbsp;this&nbsp;list&nbsp;but&nbsp;we&#39;ve&nbsp;tried&nbsp;to&nbsp;isolate&nbsp;I/O,&nbsp;operating&nbsp;system,&nbsp;machine&nbsp;characteristics,&nbsp;etc.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
But&nbsp;in&nbsp;every&nbsp;test&nbsp;scenario&nbsp;under&nbsp;load&nbsp;we&nbsp;start&nbsp;to&nbsp;see&nbsp;the&nbsp;socket&nbsp;opened&nbsp;to&nbsp;Rabbit&nbsp;on&nbsp;a&nbsp;write&nbsp;operation&nbsp;and&nbsp;no&nbsp;response&nbsp;for&nbsp;20-30&nbsp;seconds&nbsp;(with&nbsp;network&nbsp;tracing&nbsp;tools).&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Has&nbsp;anyone&nbsp;seen&nbsp;any&nbsp;behavior&nbsp;like&nbsp;this? &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
Our&nbsp;concern&nbsp;is&nbsp;that&nbsp;under&nbsp;load&nbsp;some&nbsp;REST&nbsp;interfaces&nbsp;will&nbsp;show&nbsp;periodic&nbsp;slowness;&nbsp;we&nbsp;have&nbsp;SLAs&nbsp;of&nbsp;~1&nbsp;second&nbsp;on&nbsp;the&nbsp;interfaces.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
Thanks&nbsp;for&nbsp;any&nbsp;input!&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Cheers,&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Ron&nbsp;Cordell&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
