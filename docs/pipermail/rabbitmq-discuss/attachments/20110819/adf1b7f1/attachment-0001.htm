<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=gb2312&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7638.1&quot;&gt;<br>
&lt;TITLE&gt;a&nbsp;shared&nbsp;queue&nbsp;problem&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;on&nbsp;java&nbsp;api&nbsp;guide&nbsp;page&nbsp;,you&nbsp;can&nbsp;find&nbsp;that&nbsp;If&nbsp;several&nbsp;clients&nbsp;want&nbsp;to&nbsp;share&nbsp;a&nbsp;queue&nbsp;with&nbsp;a&nbsp;well-known&nbsp;name,&nbsp;this&nbsp;code&nbsp;would&nbsp;be&nbsp;appropriate:&lt;BR&gt;<br>
&lt;BR&gt;<br>
channel.exchangeDeclare(exchangeName,&nbsp;&amp;quot;direct&amp;quot;,&nbsp;true);&lt;BR&gt;<br>
channel.queueDeclare(queueName,&nbsp;true,&nbsp;false,&nbsp;false,&nbsp;null);&lt;BR&gt;<br>
channel.queueBind(queueName,&nbsp;exchangeName,&nbsp;routingKey);&lt;BR&gt;<br>
&lt;BR&gt;<br>
when&nbsp;i&nbsp;do&nbsp;that&nbsp;one&nbsp;routingKey&nbsp;is&nbsp;aa,another&nbsp;is&nbsp;bb,start&nbsp;aa&nbsp;first,then&nbsp;start&nbsp;bb,when&nbsp;i&nbsp;send&nbsp;message&nbsp;by&nbsp;routing&nbsp;bb,the&nbsp;first&nbsp;routingKey&nbsp;aa&nbsp;client&nbsp;receives&nbsp;the&nbsp;message,but&nbsp;the&nbsp;message&nbsp;i&nbsp;want&nbsp;to&nbsp;send&nbsp;to&nbsp;routingKey&nbsp;bb&nbsp;client.&lt;BR&gt;<br>
&lt;BR&gt;<br>
start&nbsp;aa&nbsp;routingKey&nbsp;client---&amp;gt;start&nbsp;bb&nbsp;routingKey&nbsp;client---&amp;gt;send&nbsp;routingKey&nbsp;bb&nbsp;message---&amp;gt;routingKey&nbsp;aa&nbsp;receive&nbsp;the&nbsp;message---&amp;gt;send&nbsp;routingKey&nbsp;bb&nbsp;message---&amp;gt;routingKey&nbsp;bb&nbsp;receive&nbsp;the&nbsp;message--...&lt;BR&gt;<br>
why&nbsp;message&nbsp;is&nbsp;not&nbsp;arrive&nbsp;the&nbsp;correct&nbsp;client&nbsp;by&nbsp;routingKey???&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
