<tt>
Thanks&nbsp;for&nbsp;the&nbsp;input.&nbsp;This&nbsp;is&nbsp;exactly&nbsp;the&nbsp;type&nbsp;of&nbsp;info&nbsp;I&amp;#39;m&nbsp;looking&nbsp;for!&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;9,&nbsp;2012&nbsp;at&nbsp;4:48&nbsp;AM,&nbsp;Marek&nbsp;Majkowski&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;8,&nbsp;2012&nbsp;at&nbsp;23:51,&nbsp;Glen&nbsp;Wagley&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:glen.wagley@gmail.com&quot;&gt;glen.wagley@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&amp;gt;&nbsp;I&amp;#39;m&nbsp;experimenting&nbsp;with&nbsp;rabbitmq&nbsp;to&nbsp;replace&nbsp;our&nbsp;current&nbsp;message&nbsp;queuing&lt;br&gt;<br>
&amp;gt;&nbsp;implementation.&nbsp;Currently&nbsp;our&nbsp;test&nbsp;system&nbsp;is&nbsp;comprised&nbsp;of&nbsp;a&nbsp;REST&nbsp;web&lt;br&gt;<br>
&amp;gt;&nbsp;service,&nbsp;a&nbsp;3-node&nbsp;rabbitmq&nbsp;cluster,&nbsp;and&nbsp;a&nbsp;windows&nbsp;service.&nbsp;The&nbsp;REST&nbsp;service&lt;br&gt;<br>
&amp;gt;&nbsp;acts&nbsp;as&nbsp;a&nbsp;front-end&nbsp;for&nbsp;our&nbsp;clients&nbsp;to&nbsp;send&nbsp;data&nbsp;to&nbsp;which&nbsp;then&nbsp;gets&lt;br&gt;<br>
&amp;gt;&nbsp;published&nbsp;from&nbsp;the&nbsp;REST&nbsp;service&nbsp;to&nbsp;our&nbsp;rabbitmq&nbsp;cluster.&nbsp;The&nbsp;windows&nbsp;service&lt;br&gt;<br>
&amp;gt;&nbsp;has&nbsp;multiple&nbsp;subscriber&nbsp;threads&nbsp;that&nbsp;consume&nbsp;the&nbsp;messages&nbsp;from&nbsp;the&nbsp;cluster&lt;br&gt;<br>
&amp;gt;&nbsp;and&nbsp;do&nbsp;things&nbsp;like&nbsp;insert&nbsp;data&nbsp;from&nbsp;the&nbsp;message&nbsp;into&nbsp;a&nbsp;relational&nbsp;database,&lt;br&gt;<br>
&amp;gt;&nbsp;send&nbsp;an&nbsp;email&nbsp;containing&nbsp;the&nbsp;message&nbsp;contents,&nbsp;etc.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Right&nbsp;now&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;if&nbsp;I&nbsp;am&nbsp;limiting&nbsp;throughput&nbsp;to&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;cluster&nbsp;because&nbsp;each&nbsp;instance&nbsp;of&nbsp;the&nbsp;REST&nbsp;service&nbsp;and&nbsp;each&nbsp;instance&nbsp;of&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;windows&nbsp;service&nbsp;only&nbsp;has&nbsp;one&nbsp;connection&nbsp;to&nbsp;the&nbsp;cluster&nbsp;BUT&nbsp;multiple&lt;br&gt;<br>
&amp;gt;&nbsp;channels.&nbsp;We&nbsp;support&nbsp;about&nbsp;two&nbsp;dozen&nbsp;message&nbsp;types&nbsp;right&nbsp;now&nbsp;and&nbsp;I&amp;#39;ve&lt;br&gt;<br>
&amp;gt;&nbsp;created&nbsp;a&nbsp;channel&nbsp;for&nbsp;each&nbsp;one.&nbsp;Some&nbsp;channels&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;messages&nbsp;flowing&lt;br&gt;<br>
&amp;gt;&nbsp;through&nbsp;while&nbsp;some&nbsp;have&nbsp;little&nbsp;to&nbsp;none&nbsp;depending&nbsp;on&nbsp;the&nbsp;day.&nbsp;Is&nbsp;there&nbsp;a&lt;br&gt;<br>
&amp;gt;&nbsp;recommended&nbsp;approach&nbsp;to&nbsp;number&nbsp;of&nbsp;connections&nbsp;vs&nbsp;channels?&nbsp;We&nbsp;are&nbsp;starting&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;load&nbsp;test&nbsp;the&nbsp;system&nbsp;and&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;understand&nbsp;what&nbsp;could&nbsp;be&nbsp;tweaked&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;improve&nbsp;performance/throughput.&nbsp;Thanks.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;Glen,&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;aren&amp;#39;t&nbsp;any&nbsp;specific&nbsp;guidelines&nbsp;about&nbsp;connections&nbsp;vs&nbsp;channels.&lt;br&gt;<br>
Depending&nbsp;on&nbsp;the&nbsp;application,&nbsp;it&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient&nbsp;to&nbsp;use&lt;br&gt;<br>
multiple&nbsp;connections&nbsp;or&nbsp;channels.&nbsp;Use&nbsp;what&nbsp;is&nbsp;more&nbsp;convenient.&lt;br&gt;<br>
&lt;br&gt;<br>
Of&nbsp;course,&nbsp;if&nbsp;possible&nbsp;you&nbsp;should&nbsp;reduce&nbsp;number&nbsp;of&lt;br&gt;<br>
connections&nbsp;-&nbsp;connections&nbsp;consume&nbsp;constrained&nbsp;resources&lt;br&gt;<br>
(file&nbsp;descriptors).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Having&nbsp;said&nbsp;that&nbsp;there&nbsp;is&nbsp;one&nbsp;particular&nbsp;case&nbsp;when&nbsp;you&nbsp;could&lt;br&gt;<br>
benefit&nbsp;from&nbsp;having&nbsp;multiple&nbsp;connections.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;a&nbsp;situation&nbsp;when&nbsp;RabbitMQ&nbsp;runs&nbsp;of&nbsp;memory&nbsp;(high&nbsp;memory&lt;br&gt;<br>
watermark),&nbsp;it&nbsp;will&nbsp;stop&nbsp;accepting&nbsp;new&nbsp;messages.&nbsp;But&nbsp;due&nbsp;to&nbsp;the&lt;br&gt;<br>
limitations&nbsp;of&nbsp;AMQP&nbsp;protocol,&nbsp;it&nbsp;can&amp;#39;t&nbsp; be&nbsp;done&nbsp;on&nbsp;per-channel&lt;br&gt;<br>
basis&nbsp;-&nbsp;a&nbsp;full&nbsp;connection&nbsp;will&nbsp;be&nbsp;stopped&nbsp;in&nbsp;such&nbsp;case.&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;rephrase&nbsp;-&nbsp;when&nbsp;rabbit&nbsp;runs&nbsp;out&nbsp;of&nbsp;memory&nbsp;the&nbsp;connections&lt;br&gt;<br>
on&nbsp;which&nbsp;messages&nbsp;are&nbsp;being&nbsp;published&nbsp;will&nbsp;be&nbsp;temporarily&lt;br&gt;<br>
throttled.&nbsp;You&nbsp;won&amp;#39;t&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;anything&nbsp;on&nbsp;that&nbsp;connection&lt;br&gt;<br>
until&nbsp;rabbit&nbsp;recovers&nbsp;-&nbsp;that&nbsp;includes&nbsp;consuming&nbsp;messages.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;if&nbsp;you&nbsp;wish&nbsp;to&nbsp;be&nbsp;shielded&nbsp;against&nbsp;this&nbsp;situation,&nbsp;you&lt;br&gt;<br>
may&nbsp;want&nbsp;to&nbsp;keep&nbsp;publishers&nbsp;on&nbsp;a&nbsp;separate&nbsp;connection&lt;br&gt;<br>
than&nbsp;consumers.&nbsp;That&nbsp;will&nbsp;ensure&nbsp;that&nbsp;even&nbsp;in&nbsp;the&lt;br&gt;<br>
out-of-memory&nbsp;case&nbsp;the&nbsp;consumers&nbsp;will&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;their&lt;br&gt;<br>
job&nbsp;(and&nbsp;thus&nbsp;help&nbsp;rabbitmq&nbsp;free&nbsp;memory&nbsp;faster)&lt;br&gt;<br>
&lt;br&gt;<br>
Hope&nbsp;that&nbsp;helps,&lt;br&gt;<br>
&nbsp; Marek&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;Glen&nbsp;Wagley&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:glen.wagley@gmail.com&quot;&gt;glen.wagley@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>

</tt>
