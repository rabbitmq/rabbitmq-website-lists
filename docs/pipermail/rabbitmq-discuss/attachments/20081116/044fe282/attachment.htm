<tt>
Ben:&nbsp;running&nbsp;latest&nbsp;version&nbsp;as&nbsp;of&nbsp;this&nbsp;past&nbsp;Friday&nbsp;(much&nbsp;better&nbsp;than&nbsp;1.4.0,&nbsp;which&nbsp;I&nbsp;tried&nbsp;at&nbsp;first)&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
I&nbsp;recommend&nbsp;persisting&nbsp;with&nbsp;this.&nbsp;&amp;nbsp;(sorry,&nbsp;I&nbsp;could&nbsp;not&nbsp;resist&nbsp;that)&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;;-)&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;*&nbsp;I&nbsp;am&nbsp;assuming&nbsp;flow&nbsp;control&nbsp;does&nbsp;not&nbsp;solve&nbsp;your&nbsp;problem&nbsp;-&nbsp;I&nbsp;think&nbsp;you&lt;br&gt;<br>
<br>
have&nbsp;made&nbsp;that&nbsp;clear,&nbsp;but&nbsp;can&nbsp;I&nbsp;just&nbsp;check?&lt;/blockquote&gt;&lt;div&gt;&amp;nbsp;&lt;br&gt;Yep,&nbsp;in&nbsp;fact,&nbsp;I&nbsp;would&nbsp;much&nbsp;rather&nbsp;not&nbsp;throttle&nbsp;the&nbsp;producers&nbsp;-&nbsp;the&nbsp;queue&nbsp;becomes&nbsp;a&nbsp;leaky&nbsp;abstraction.&nbsp;I&nbsp;like&nbsp;to&nbsp;think&nbsp;of&nbsp;Rabbit&nbsp;(or&nbsp;any&nbsp;other&nbsp;router/queue&nbsp;in&nbsp;between)&nbsp;as&nbsp;a&nbsp;buffer,&nbsp;hence&nbsp;it&nbsp;should&nbsp;accept&nbsp;and&nbsp;fan&nbsp;out&nbsp;the&nbsp;messages&nbsp;without&nbsp;exposing&nbsp;the&nbsp;lag&nbsp;on&nbsp;the&nbsp;consumer&nbsp;side.&nbsp;&lt;br&gt;<br>
&lt;br&gt;I&nbsp;may&nbsp;be&nbsp;conflating&nbsp;two&nbsp;different&nbsp;requirements,&nbsp;but&nbsp;here&nbsp;is&nbsp;an&nbsp;interesting&nbsp;scenario&nbsp;to&nbsp;think&nbsp;about:&nbsp;our&nbsp;entire&nbsp;infrastructure&nbsp;is&nbsp;deployed&nbsp;on&nbsp;EC2,&nbsp;and&nbsp;time&nbsp;and&nbsp;time&nbsp;again&nbsp;we&amp;#39;ve&nbsp;found&nbsp;SQS&nbsp;(simple&nbsp;queue&nbsp;service)&nbsp;a&nbsp;life&nbsp;savior&nbsp;for&nbsp;big&nbsp;data&nbsp;migrations&nbsp;or&nbsp;general&nbsp;maintenance.&nbsp;We&amp;#39;re&nbsp;generating&nbsp;a&nbsp;lot&nbsp;of&nbsp;real-time&nbsp;data,&nbsp;and&nbsp;SQS&nbsp;allows&nbsp;us&nbsp;to&nbsp;reroute&nbsp;all&nbsp;of&nbsp;it&nbsp;into&nbsp;a&nbsp;temporary&nbsp;queue,&nbsp;and&nbsp;let&nbsp;it&nbsp;accumulate&nbsp;(we&amp;#39;ve&nbsp;pushed&nbsp;hundreds&nbsp;of&nbsp;GB&amp;#39;s&nbsp;of&nbsp;data&nbsp;into&nbsp;it)&nbsp;while&nbsp;we&nbsp;do&nbsp;our&nbsp;work,&nbsp;and&nbsp;once&nbsp;we&amp;#39;re&nbsp;done,&nbsp;we&nbsp;just&nbsp;flush&nbsp;the&nbsp;queue.&nbsp;No&nbsp;additional&nbsp;infrastructure&nbsp;required.&nbsp;(same&nbsp;thing&nbsp;for&nbsp;aggregate&nbsp;jobs,&nbsp;or&nbsp;even&nbsp;one-off&nbsp;trial&nbsp;projects)&lt;br&gt;<br>
&lt;br&gt;Arguably,&nbsp;we&nbsp;could&nbsp;use&nbsp;a&nbsp;different&nbsp;piece&nbsp;of&nbsp;infrastructure&nbsp;to&nbsp;cover&nbsp;this&nbsp;case&nbsp;(another&nbsp;rabbit&nbsp;consumer&nbsp;which&nbsp;stores&nbsp;data&nbsp;into&nbsp;a&nbsp;database),&nbsp;but&nbsp;if&nbsp;Rabbit&nbsp;could&nbsp;handle&nbsp;this,&nbsp;life&nbsp;is&nbsp;much&nbsp;easier.&lt;br&gt;&lt;br&gt;(Wild&nbsp;idea:&nbsp;provide&nbsp;an&nbsp;SQS&nbsp;adapter&nbsp;to&nbsp;reroute&nbsp;packets&nbsp;into&nbsp;at&nbsp;a&nbsp;certain&nbsp;threshold..&nbsp;Perhaps&nbsp;not&nbsp;so&nbsp;wild&nbsp;if&nbsp;we&nbsp;get&nbsp;a&nbsp;pluggable&nbsp;interface)&nbsp;&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;*&nbsp;How&nbsp;often&nbsp;do&nbsp;you&nbsp;expect&nbsp;the&nbsp;250Gb&nbsp;case&nbsp;to&nbsp;happen&nbsp;-&nbsp;do&nbsp;you&nbsp;consider&lt;br&gt;<br>
it&nbsp;exceptional&nbsp;or&nbsp;normal?&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;250GB&nbsp;is&nbsp;an&nbsp;exception,&nbsp;but&nbsp;smaller&nbsp;amounts&nbsp;(1-5Gb)&nbsp;are&nbsp;fairly&nbsp;frequent&nbsp;(which&nbsp;is&nbsp;theoretically&nbsp;possible&nbsp;even&nbsp;with&nbsp;the&nbsp;current&nbsp;pure&nbsp;memory&nbsp;deployment).&nbsp;&lt;br&gt;&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
*&nbsp;Do&nbsp;you&nbsp;have&nbsp;ordering&nbsp;constraints,&nbsp;and/or&nbsp;must&nbsp;all&nbsp;the&nbsp;messages&nbsp;be&nbsp;on&nbsp;one&nbsp;queue&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Depends&nbsp;on&nbsp;the&nbsp;data.&nbsp;Most&nbsp;of&nbsp;it&nbsp;is&nbsp;order&nbsp;agnostic,&nbsp;but&nbsp;there&nbsp;is&nbsp;some&nbsp;data&nbsp;which&nbsp;only&nbsp;makes&nbsp;sense&nbsp;when&nbsp;delivered&nbsp;in&nbsp;order.&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
*&nbsp;In&nbsp;the&nbsp;case&nbsp;where&nbsp;you&nbsp;need&nbsp;to&nbsp;page&nbsp;to&nbsp;disk&nbsp;due&nbsp;to&nbsp;a&nbsp;lack&nbsp;of&nbsp;machine&lt;br&gt;<br>
memory,&nbsp;and&nbsp;because&nbsp;your&nbsp;queues&nbsp;are&nbsp;not&nbsp;being&nbsp;drained&nbsp;by&nbsp;consumers,&lt;br&gt;<br>
does&nbsp;it&nbsp;matter&nbsp;what&nbsp;the&nbsp;latency&nbsp;of&nbsp;message&nbsp;delivery&nbsp;is&nbsp;once&nbsp;the&lt;br&gt;<br>
consumers&nbsp;come&nbsp;back?&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&amp;nbsp;&lt;br&gt;No&nbsp;-&nbsp;within&nbsp;reason,&nbsp;of&nbsp;course.&nbsp;;-)&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
The&nbsp;point&nbsp;being&nbsp;that&nbsp;there&nbsp;may&nbsp;be&nbsp;some&nbsp;workaround&nbsp;that&nbsp;you&nbsp;can&nbsp;try,&lt;br&gt;<br>
depending&nbsp;on&nbsp;the&nbsp;answer&nbsp;to&nbsp;the&nbsp;above.&nbsp;&amp;nbsp;You&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;see&nbsp;where&nbsp;I&lt;br&gt;<br>
am&nbsp;going&nbsp;by&nbsp;the&nbsp;last&nbsp;question...&nbsp;;-)&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Absolutely.&nbsp;I&amp;#39;m&nbsp;not&nbsp;saying&nbsp;Rabbit&nbsp;should&nbsp;do&nbsp;all&nbsp;of&nbsp;the&nbsp;things&nbsp;I&amp;#39;ve&nbsp;described&nbsp;either.&nbsp;Of&nbsp;course&nbsp;the&nbsp;more&nbsp;the&nbsp;better,&nbsp;but&nbsp;even&nbsp;more&nbsp;importantly&nbsp;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;see&nbsp;some&nbsp;sane&nbsp;overflow&nbsp;conditions:&nbsp;ttl,&nbsp;max&nbsp;queue&nbsp;size,&nbsp;etc.&nbsp;That&nbsp;I&nbsp;can&nbsp;plan&nbsp;for,&nbsp;crashing..&nbsp;won&amp;#39;t&nbsp;work.&nbsp;;-)&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;ig&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
