<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Ben,&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;have&nbsp;a&nbsp;system&nbsp;which&nbsp;includes&nbsp;a&nbsp;homogeneous&nbsp;set&nbsp;of&nbsp;message&nbsp;producers<br>
(we&nbsp;call&nbsp;switches)&nbsp;and&nbsp;a&nbsp;backoffice&nbsp;application&nbsp;which&nbsp;consumes&nbsp;these<br>
messages.&amp;nbsp;&nbsp;We&nbsp;have&nbsp;a&nbsp;guaranteed&nbsp;delivery&nbsp;requirement&nbsp;for&nbsp;the&nbsp;messages,<br>
we&nbsp;also&nbsp;require&nbsp;that&nbsp;the&nbsp;switches&nbsp;can&nbsp;continue&nbsp;to&nbsp;operate&nbsp;unhindered<br>
(assuming&nbsp;infinite&nbsp;disk&nbsp;space)&nbsp;during&nbsp;long&nbsp;periods&nbsp;of&nbsp;slow&nbsp;or<br>
non-consumption&nbsp;of&nbsp;messages&nbsp;by&nbsp;the&nbsp;backoffice.&amp;nbsp;&nbsp;I'm&nbsp;not&nbsp;familiar&nbsp;with<br>
rabbitMQ,&nbsp;but&nbsp;the&nbsp;implication&nbsp;I&nbsp;take&nbsp;from&nbsp;this&nbsp;thread&nbsp;is&nbsp;that&nbsp;rabbitMQ<br>
would&nbsp;not&nbsp;meet&nbsp;our&nbsp;requirements&nbsp;(at&nbsp;least&nbsp;not&nbsp;without&nbsp;significant&nbsp;extra<br>
bespoke&nbsp;work)&amp;nbsp;&nbsp;-&nbsp;is&nbsp;that&nbsp;a&nbsp;fair&nbsp;statement?&lt;br&gt;<br>
&lt;br&gt;<br>
Regards&lt;br&gt;<br>
&lt;br&gt;<br>
Graham&lt;br&gt;<br>
&lt;br&gt;<br>
Ben&nbsp;Hood&nbsp;wrote:<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:269388e30811151118p5c1d002bp581a373785164028@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Ilya,<br>
<br>
On&nbsp;Sat,&nbsp;Nov&nbsp;15,&nbsp;2008&nbsp;at&nbsp;6:43&nbsp;PM,&nbsp;Ilya&nbsp;Grigorik&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:ilya@aiderss.com&quot;&gt;&amp;lt;ilya@aiderss.com&amp;gt;&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;-&nbsp;If&nbsp;we&nbsp;connect&nbsp;multiple&nbsp;nodes&nbsp;together&nbsp;(without&nbsp;persistence),&nbsp;and&nbsp;then<br>
create&nbsp;an&nbsp;exchange,&nbsp;the&nbsp;in-memory&nbsp;queues&nbsp;will&nbsp;be&nbsp;replicated&nbsp;across&nbsp;all<br>
nodes?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
No,&nbsp;only&nbsp;broker&nbsp;entities&nbsp;are&nbsp;replicated&nbsp;(exchanges,&nbsp;queues&nbsp;and<br>
bindings),&nbsp;but&nbsp;not&nbsp;the&nbsp;actual&nbsp;messages&nbsp;as&nbsp;indicated&nbsp;in&nbsp;the&nbsp;clustering<br>
guide:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html&quot;&gt;http://www.rabbitmq.com/clustering.html&lt;/a&gt;<br>
<br>
The&nbsp;reason&nbsp;for&nbsp;this&nbsp;is&nbsp;primarily&nbsp;the&nbsp;cost&nbsp;of&nbsp;inter-node&nbsp;message&nbsp;replication.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;-&nbsp;Assuming&nbsp;the&nbsp;cluster&nbsp;is&nbsp;running,&nbsp;is&nbsp;it&nbsp;up&nbsp;to&nbsp;the&nbsp;client&nbsp;to&nbsp;determine&nbsp;which<br>
node&nbsp;it&nbsp;wants&nbsp;to&nbsp;connect&nbsp;to&nbsp;(either&nbsp;explicitly,&nbsp;or&nbsp;through&nbsp;some&nbsp;load<br>
balancer&nbsp;in&nbsp;between)?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
Yes.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;-&nbsp;Now,&nbsp;if&nbsp;we&nbsp;add&nbsp;persistence&nbsp;to&nbsp;the&nbsp;queue,&nbsp;will&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;queue&nbsp;be<br>
stored&nbsp;on&nbsp;each&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
You&nbsp;a&nbsp;queue&nbsp;only&nbsp;exists&nbsp;on&nbsp;one&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster.&nbsp;Persistent<br>
messages&nbsp;that&nbsp;are&nbsp;routed&nbsp;to&nbsp;a&nbsp;queue&nbsp;are&nbsp;written&nbsp;to&nbsp;disk&nbsp;on&nbsp;the&nbsp;node<br>
where&nbsp;the&nbsp;queue&nbsp;exists.&nbsp;Also&nbsp;you&nbsp;need&nbsp;to&nbsp;differentiate&nbsp;between<br>
persistent&nbsp;messages&nbsp;(a&nbsp;property&nbsp;that&nbsp;the&nbsp;publisher&nbsp;sets)&nbsp;and<br>
persistent&nbsp;queue&nbsp;(a&nbsp;property&nbsp;that&nbsp;is&nbsp;set&nbsp;when&nbsp;creating&nbsp;a&nbsp;queue).&nbsp;The<br>
implication&nbsp;is&nbsp;that&nbsp;you&nbsp;can&nbsp;send&nbsp;persistent&nbsp;messages&nbsp;to&nbsp;a&nbsp;transient<br>
queue&nbsp;and&nbsp;vice&nbsp;versa.<br>
<br>
HTH,<br>
<br>
Ben<br>
<br>
_______________________________________________<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
