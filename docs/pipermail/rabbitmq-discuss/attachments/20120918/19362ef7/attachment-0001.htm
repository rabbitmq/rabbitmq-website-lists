<tt>
&lt;div&gt;&lt;div&gt;Hello,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;2&nbsp;node&nbsp;(both&nbsp;disk)&nbsp;cluster&nbsp;setup.&nbsp;In&nbsp;an&nbsp;attempt&nbsp;to&nbsp;simulate&nbsp;a&nbsp;node&nbsp;failure&nbsp;I&nbsp;am&nbsp;killing&nbsp;the&nbsp;erlang&nbsp;process&nbsp;hosting&nbsp;rabbit&nbsp;on&nbsp;the&nbsp;master&nbsp;for&nbsp;a&nbsp;durable&nbsp;queue.&nbsp;I&nbsp;would&nbsp;expect&nbsp;to&nbsp;get&nbsp;a&nbsp;HandleBasicCancel&nbsp;as&nbsp;defined&nbsp;in&nbsp;the&nbsp;documentation,&nbsp;however&nbsp;I&nbsp;am&nbsp;only&nbsp;getting&nbsp;an&nbsp;OnCancel.&nbsp;Is&nbsp;this&nbsp;expected?&nbsp;Should&nbsp;I&nbsp;be&nbsp;simulating&nbsp;a&nbsp;node&nbsp;failure&nbsp;in&nbsp;another&nbsp;way?&nbsp;I&nbsp;tried&nbsp;setting&nbsp;the&nbsp;client&nbsp;capabilities&nbsp;but&nbsp;it&nbsp;seems&nbsp;the&nbsp;C#&nbsp;client&nbsp;sends&nbsp;true&nbsp;for&nbsp;consumer_cancel_notify&nbsp;no&nbsp;matter&nbsp;what&nbsp;I&nbsp;specify.&nbsp;I&nbsp;validate&nbsp;this&nbsp;via&nbsp;the&nbsp;management&nbsp;website&nbsp;for&nbsp;the&nbsp;connection&nbsp;and&nbsp;see:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;capabilities&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;/div&gt;&lt;div&gt;publisher_confirms:&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;true&lt;/div&gt;&lt;div&gt;exchange_exchange_bindings:&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;true&lt;/div&gt;&lt;div&gt;consumer_cancel_notify:&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;true&lt;/div&gt;&lt;div&gt;basic.nack:&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;true&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;create&nbsp;the&nbsp;queue&nbsp;with&nbsp;the&nbsp;following&nbsp;code:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ConnectionFactory&nbsp;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;factory.HostName&nbsp;=&nbsp;&quot;localhost&quot;;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;this.connection&nbsp;=&nbsp;factory.CreateConnection();&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;this.channel&nbsp;=&nbsp;this.connection.CreateModel();&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;this.queueConsumer&nbsp;=&nbsp;new&nbsp;FabricNotificationQueueConsumer(this.region,&nbsp;this.groupName,&nbsp;this.serializer,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;this.cache);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Dictionary&amp;lt;string,&nbsp;object&amp;gt;&nbsp;queueArgs&nbsp;=&nbsp;new&nbsp;Dictionary&amp;lt;string,&nbsp;object&amp;gt;();&lt;/div&gt;&lt;div&gt;queueArgs.Add(&quot;x-ha-policy&quot;,&nbsp;&quot;all&quot;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;this.channel.QueueDeclare(QueueName,&nbsp;true,&nbsp;false,&nbsp;false,&nbsp;queueArgs);&lt;/div&gt;&lt;div&gt;this.channel.QueueBind(QueueName,&nbsp;exchange,&nbsp;string.Format(&quot;{0}.{1}.*&quot;,&nbsp;this.region,&nbsp;this.groupName));&lt;/div&gt;&lt;div&gt;this.channel.BasicConsume(QueueName,&nbsp;true,&nbsp;this.queueConsumer);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;help,&lt;/div&gt;&lt;div&gt;Mike&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
