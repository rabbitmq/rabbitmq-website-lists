<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;In&nbsp;my&nbsp;application&nbsp;I&nbsp;need&nbsp;to&nbsp;stream&nbsp;stock&nbsp;prices&nbsp;to&nbsp;users.&lt;br&gt;The&nbsp;&amp;#39;last&nbsp;price&amp;#39;&nbsp;will&nbsp;be&nbsp;retrieved&nbsp;from&nbsp;a&nbsp;separate&nbsp;service&nbsp;when&nbsp;a&nbsp;consumer&nbsp;connects&nbsp;which&nbsp;simplifies&nbsp;things.&lt;br&gt;Each&nbsp;user&nbsp;will&nbsp;subscribe&nbsp;to&nbsp;several&nbsp;stocks.&lt;br&gt;<br>
<br>
<br>
Users&nbsp;are&nbsp;web&nbsp;browsers&nbsp;connecting&nbsp;using&nbsp;long-polling.&lt;br&gt;&lt;br&gt;Do&nbsp;I&nbsp;create&nbsp;one&nbsp;queue&nbsp;per&nbsp;consumer&nbsp;with&nbsp;several&nbsp;bindings,&nbsp;one&nbsp;for&nbsp;each&nbsp;stock?&nbsp;&lt;br&gt;Prices&nbsp;in&nbsp;this&nbsp;case&nbsp;will&nbsp;be&nbsp;sent&nbsp;with&nbsp;a&nbsp;topic&nbsp;routing&nbsp;key.&lt;br&gt;Another&nbsp;option&nbsp;is&nbsp;to&nbsp;create&nbsp;one&nbsp;queue&nbsp;per&nbsp;stock.&nbsp;each&nbsp;consumer&nbsp;will&nbsp;be&nbsp;subscribed&nbsp;to&nbsp;several&nbsp;queues.&lt;br&gt;<br>
<br>
<br>
Messages&nbsp;will&nbsp;be&nbsp;sent&nbsp;with&nbsp;a&nbsp;direct&nbsp;routing&nbsp;key.&lt;br&gt;&lt;br&gt;Users&nbsp;will&nbsp;connect&nbsp;using&nbsp;a&nbsp;browser&nbsp;with&nbsp;long-polling&nbsp;to&nbsp;the&nbsp;mochiweb&nbsp;plugin.&lt;br&gt;Each&nbsp;user&nbsp;will&nbsp;be&nbsp;presented&nbsp;at&nbsp;the&nbsp;server&nbsp;side&nbsp;as&nbsp;an&nbsp;erlang&nbsp;AMQP&nbsp;client.&lt;br&gt;When&nbsp;using&nbsp;long-polling&nbsp;it&nbsp;is&nbsp;possible&nbsp;that&nbsp;the&nbsp;server&nbsp;sent&nbsp;responses&nbsp;to&nbsp;both&nbsp;connections&nbsp;and&nbsp;have&nbsp;to&nbsp;wait&nbsp;for&nbsp;the&nbsp;user&nbsp;to&nbsp;send&nbsp;a&nbsp;new&nbsp;request.&lt;br&gt;<br>
<br>
<br>
How&nbsp;do&nbsp;I&nbsp;handle&nbsp;this&nbsp;scenario?&nbsp;Does&nbsp;the&nbsp;erlang&nbsp;client&nbsp;store&nbsp;the&nbsp;messages&nbsp;in&nbsp;its&nbsp;state?&lt;br&gt;Every&nbsp;time&nbsp;the&nbsp;erlang&nbsp;client&nbsp;gets&nbsp;a&nbsp;new&nbsp;long-polling&nbsp;request&nbsp;it&nbsp;checks&nbsp;for&nbsp;messages&nbsp;in&nbsp;the&nbsp;state,&lt;br&gt;if&nbsp;there&nbsp;are&nbsp;messages&nbsp;it&nbsp;sends&nbsp;them&nbsp;immediately&nbsp;and&nbsp;if&nbsp;there&nbsp;aren&amp;#39;t&nbsp;it&nbsp;keep-alive&nbsp;the&nbsp;request.&lt;br&gt;<br>
<br>
<br>
Another&nbsp;option&nbsp;is&nbsp;that&nbsp;the&nbsp;erlang&nbsp;client&nbsp;will&nbsp;acknowledge&nbsp;messages&nbsp;only&nbsp;if&nbsp;it&nbsp;can&nbsp;pass&nbsp;it&nbsp;to&nbsp;the&nbsp;web&nbsp;client.&lt;br&gt;What&nbsp;will&nbsp;happen&nbsp;in&nbsp;this&nbsp;case?&nbsp;Will&nbsp;the&nbsp;queue&nbsp;keep&nbsp;sending&nbsp;new&nbsp;messages&nbsp;or&nbsp;will&nbsp;it&nbsp;wait&nbsp;for&nbsp;the&nbsp;erlang&nbsp;client&nbsp;o&nbsp;&amp;#39;initialize&amp;#39;&nbsp;the&nbsp;channel?&lt;br&gt;<br>
<br>
<br>
Are&nbsp;there&nbsp;a&nbsp;suspend&nbsp;and&nbsp;resume&nbsp;features?&lt;br&gt;&lt;br&gt;Thanks&lt;br&gt;&lt;/div&gt;<br>

</tt>
