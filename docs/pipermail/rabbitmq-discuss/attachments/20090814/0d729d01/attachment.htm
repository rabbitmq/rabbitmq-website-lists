<tt>
Hi&nbsp;Nathan,&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Aug&nbsp;14,&nbsp;2009&nbsp;at&nbsp;6:29&nbsp;PM,&nbsp;Nathan&nbsp;Gray&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:n8gray@n8gray.org&quot;&gt;n8gray@n8gray.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;br&gt;<br>
Maybe,&nbsp;maybe&nbsp;not.&nbsp; I&amp;#39;ve&nbsp;written&nbsp;a&nbsp;multiplayer&nbsp;boardgame.&nbsp; I&nbsp;used&lt;br&gt;<br>
Google&nbsp;App&nbsp;Engine&nbsp;for&nbsp;the&nbsp;server,&nbsp;which&nbsp;works&nbsp;fine&nbsp;but&nbsp;requires&nbsp;that&lt;br&gt;<br>
the&nbsp;client&nbsp;poll&nbsp;the&nbsp;server&nbsp;to&nbsp;detect&nbsp;when&nbsp;someone&nbsp;has&nbsp;made&nbsp;a&nbsp;move,&lt;br&gt;<br>
sent&nbsp;a&nbsp;chat,&nbsp;or&nbsp;otherwise&nbsp;generated&nbsp;an&nbsp;event.&nbsp; (GAE&nbsp;doesn&amp;#39;t&nbsp;allow&lt;br&gt;<br>
long-lived&nbsp;connections&nbsp;or&nbsp;raw&nbsp;socket&nbsp;access.)&nbsp; I&amp;#39;m&nbsp;hoping&nbsp;to&nbsp;use&lt;br&gt;<br>
rabbitmq&nbsp;as&nbsp;an&nbsp;&amp;quot;event&nbsp;server&amp;quot;&nbsp;to&nbsp;get&nbsp;real-time&nbsp;updates&nbsp;to&nbsp;clients&lt;br&gt;<br>
without&nbsp;pounding&nbsp;GAE&nbsp;with&nbsp;HTTP&nbsp;requests.&nbsp; When&nbsp;an&nbsp;event&nbsp;is&nbsp;generated&lt;br&gt;<br>
for&nbsp;a&nbsp;game,&nbsp;GAE&nbsp;publishes&nbsp;to&nbsp;the&nbsp;event&nbsp;server,&nbsp;which&nbsp;tells&nbsp;any&lt;br&gt;<br>
connected&nbsp;clients&nbsp;of&nbsp;the&nbsp;game&nbsp;to&nbsp;ask&nbsp;GAE&nbsp;for&nbsp;an&nbsp;update.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;will&nbsp;be&nbsp;many&nbsp;games&nbsp;running,&nbsp;and&nbsp;each&nbsp;game&nbsp;has&nbsp;2-4&nbsp;players.&nbsp; The&lt;br&gt;<br>
natural&nbsp;mapping&nbsp;(IMHO)&nbsp;to&nbsp;AMQP&nbsp;is&nbsp;to&nbsp;have&nbsp;one&nbsp;fanout&nbsp;exchange&nbsp;per&lt;br&gt;<br>
game.&nbsp; The&nbsp;server&nbsp;on&nbsp;GAE&nbsp;creates&nbsp;this&nbsp;(durable)&nbsp;exchange&nbsp;when&nbsp;a&nbsp;new&lt;br&gt;<br>
game&nbsp;starts.&nbsp; When&nbsp;the&nbsp;game&nbsp;ends&nbsp;there&nbsp;will&nbsp;be&nbsp;no&nbsp;more&nbsp;events&nbsp;from&nbsp;it,&lt;br&gt;<br>
so&nbsp;the&nbsp;exchange&nbsp;is&nbsp;deleted.&nbsp; It&amp;#39;s&nbsp;possible&nbsp;for&nbsp;a&nbsp;game&nbsp;to&nbsp;end&nbsp;before&lt;br&gt;<br>
the&nbsp;client&nbsp;connects&nbsp;(the&nbsp;last&nbsp;player&nbsp;can&nbsp;play&nbsp;while&nbsp;the&nbsp;client&nbsp;is&lt;br&gt;<br>
offline).&nbsp; Each&nbsp;player&nbsp;can&nbsp;play&nbsp;multiple&nbsp;games,&nbsp;thus&nbsp;the&nbsp;requirement&lt;br&gt;<br>
to&nbsp;connect&nbsp;to&nbsp;multiple&nbsp;exchanges.&nbsp; Clients&nbsp;connect&nbsp;with&nbsp;auto-delete&lt;br&gt;<br>
queues,&nbsp;since&nbsp;message&nbsp;content&nbsp;is&nbsp;uninteresting&nbsp;--&nbsp;it&amp;#39;s&nbsp;only&nbsp;the&nbsp;timing&lt;br&gt;<br>
they&nbsp;care&nbsp;about.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;there&amp;#39;s&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;I&amp;#39;m&nbsp;happy&nbsp;to&nbsp;hear&nbsp;it.&nbsp; I&nbsp;could&nbsp;use&lt;br&gt;<br>
one&nbsp;big&nbsp;direct&nbsp;exchange&nbsp;with&nbsp;player&nbsp;names&nbsp;as&nbsp;routing&nbsp;keys,&nbsp;but&nbsp;that&lt;br&gt;<br>
would&nbsp;require&nbsp;my&nbsp;publisher&nbsp;to&nbsp;send&nbsp;multiple&nbsp;messages&nbsp;for&nbsp;each&nbsp;game&lt;br&gt;<br>
event,&nbsp;one&nbsp;for&nbsp;each&nbsp;player&nbsp;in&nbsp;the&nbsp;game.&nbsp; I&nbsp;could&nbsp;use&nbsp;one&nbsp;big&nbsp;topic&lt;br&gt;<br>
exchange&nbsp;with&nbsp;routing&nbsp;keys&nbsp;like&nbsp;&amp;quot;joe.sally.bob&amp;quot;&nbsp;and&nbsp;subscribe&nbsp;with&lt;br&gt;<br>
patterns&nbsp;like&nbsp;&amp;quot;#.bob.#&amp;quot;,&nbsp;but&nbsp;putting&nbsp;all&nbsp;the&nbsp;messages&nbsp;through&nbsp;one&lt;br&gt;<br>
topic&nbsp;exchange&nbsp;doesn&amp;#39;t&nbsp;seem&nbsp;like&nbsp;it&nbsp;would&nbsp;scale&nbsp;well.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Assuming&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;known&nbsp;identifier&nbsp;for&nbsp;each&nbsp;game&nbsp;(database&nbsp;id,&nbsp;guid,&nbsp;or&nbsp;equivalent),&nbsp;what&nbsp;about&nbsp;using&nbsp;a&nbsp;single&nbsp;direct&nbsp;exchange,&nbsp;with&nbsp;the&nbsp;routing&nbsp;key&nbsp;being&nbsp;set&nbsp;to&nbsp;the&nbsp;game&nbsp;id&nbsp;each&nbsp;time.&nbsp;When&nbsp;a&nbsp;player&nbsp;connects,&nbsp;they&nbsp;subscribe&nbsp;to&nbsp;the&nbsp;exchange&nbsp;with&nbsp;all&nbsp;of&nbsp;the&nbsp;routing&nbsp;keys&nbsp;for&nbsp;the&nbsp;games&nbsp;that&nbsp;they&nbsp;are&nbsp;interested&nbsp;in.&nbsp;&lt;br&gt;<br>
&lt;br&gt;As&nbsp;far&nbsp;as&nbsp;scalability&nbsp;is&nbsp;concerned,&nbsp;using&nbsp;a&nbsp;direct&nbsp;exchange&nbsp;with&nbsp;many&nbsp;routing&nbsp;keys&nbsp;should&nbsp;hopefully&nbsp;be&nbsp;no&nbsp;worse&nbsp;than&nbsp;many&nbsp;fanout&nbsp;exchanges&nbsp;with&nbsp;no&nbsp;routing&nbsp;keys.&nbsp;If&nbsp;you&amp;#39;re&nbsp;considering&nbsp;the&nbsp;clustering&nbsp;scenario,&nbsp;exchange&nbsp;information&nbsp;is&nbsp;replicated&nbsp;to&nbsp;all&nbsp;nodes&nbsp;-&nbsp;so&nbsp;it&nbsp;isn&amp;#39;t&nbsp;like&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;point&nbsp;that&nbsp;all&nbsp;messages&nbsp;need&nbsp;to&nbsp;go&nbsp;through.&lt;br&gt;<br>
&lt;br&gt;Thanks,&lt;br&gt;Paul.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
