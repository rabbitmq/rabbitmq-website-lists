<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;setup&nbsp;a&nbsp;trace&nbsp;at&nbsp;the&nbsp;client&nbsp;app&nbsp;server.&nbsp;Set&nbsp;the&nbsp;listen&nbsp;port&nbsp;and&nbsp;connection&nbsp;port&nbsp;and&nbsp;got&nbsp;a&nbsp;log&nbsp;for&nbsp;the&nbsp;unsuccessful&nbsp;factory.newConnection()&nbsp;.&nbsp;I&nbsp;added&nbsp;it&nbsp;in&nbsp;attached&nbsp;the&nbsp;tracelog.txt.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;now&nbsp;regarding&nbsp;the&nbsp;other&nbsp;references&nbsp;you&nbsp;gave&nbsp;me &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1&nbsp;Protocol&nbsp;errors:&lt;br&gt; Acknowledging&nbsp;with&nbsp;an&nbsp;unknown&nbsp;delivery&nbsp;tag&lt;br&gt; Redeclaring&nbsp;exchanges&nbsp;with&nbsp;different&nbsp;parameters&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;you recommended not&nbsp;acking&nbsp;more&nbsp;than&nbsp;once.&nbsp;This&nbsp;whole&nbsp;thing&nbsp;started&nbsp;when&nbsp;we&nbsp;upgraded&nbsp;the&nbsp;rabbitmq&nbsp;version&nbsp;and&nbsp;Matthias&nbsp;sujested&nbsp;we&nbsp;will&nbsp;change&nbsp;the&nbsp;consumer&nbsp;to&nbsp;ack&nbsp;(i.e.&nbsp;we&nbsp;changed&nbsp;it&nbsp;to &lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(80,&nbsp;0,&nbsp;80);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;channel.basicConsume(&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(80,&nbsp;0,&nbsp;80);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(80,&nbsp;0,&nbsp;80);&nbsp;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;queueName,&nbsp;FALSE,&nbsp;queueingConsumer);&lt;/span&gt;) &lt;/div&gt;<br>
&lt;div&gt;(This&nbsp;is&nbsp;if&nbsp;I&nbsp;understood&nbsp;him&nbsp;right&nbsp;)&lt;/div&gt;&lt;div&gt;So&nbsp;How&nbsp;can&nbsp;I&nbsp;control&nbsp;the&nbsp;acking&nbsp;.&nbsp;How&nbsp;do&nbsp;I&nbsp;know&nbsp;if&nbsp;I&nbsp;ack&nbsp;more&nbsp;then&nbsp;once.&nbsp;I&nbsp;think&nbsp;I&nbsp;never&nbsp;send&nbsp;an&nbsp;ack consciously.&nbsp;only&nbsp;through&nbsp;the&nbsp;subscibe&nbsp;. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;hope&nbsp;the&nbsp;second&nbsp;and&nbsp;the&nbsp;third&nbsp;will&nbsp;be&nbsp;solved&nbsp;with&nbsp;the&nbsp;trace. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;direction:&nbsp;ltr;&quot;&gt;and&nbsp;thanks&nbsp;again. &lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;1,&nbsp;2011&nbsp;at&nbsp;3:41&nbsp;PM,&nbsp;Emile&nbsp;Joubert&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Hi,&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;01/03/11&nbsp;12:55,&nbsp;mysurf&nbsp;mail&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi&nbsp;Emile,&lt;br&gt;<br>
I&nbsp;have&nbsp;a&nbsp;few&nbsp;questions:&lt;br&gt;<br>
1.&nbsp;On&nbsp;the&nbsp;rabbitmq&nbsp;server&nbsp;we&nbsp;have&nbsp;a&nbsp;few&nbsp;Erlang&nbsp;versions.&nbsp;Should&nbsp;that&lt;br&gt;<br>
create&nbsp;a&nbsp;problem&nbsp;.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Keep&nbsp;in&nbsp;mind&nbsp;that&nbsp;different&nbsp;features&nbsp;of&nbsp;RabbitMQ&nbsp;have&nbsp;different&nbsp;minimum&nbsp;requirements&nbsp;(e.g.&nbsp;SSL&nbsp;and&nbsp;some&nbsp;plugins).&nbsp;This&nbsp;is&nbsp;especially&nbsp;important&nbsp;in&nbsp;a&nbsp;multi-version&nbsp;environment.&nbsp;It&nbsp;is&nbsp;best&nbsp;to&nbsp;use&nbsp;the&nbsp;latest&nbsp;version&nbsp;across&nbsp;the&nbsp;board&nbsp;if&nbsp;possible&nbsp;(unless&nbsp;it&nbsp;is&nbsp;an&nbsp;alpha&nbsp;version&nbsp;containing&nbsp;an&nbsp;A).&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
 &lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
(For&nbsp;now,&nbsp;I&nbsp;finished&nbsp;removing&nbsp;the&nbsp;older&nbsp;ones,&nbsp;so&nbsp;currently&nbsp;we&nbsp;have&nbsp;only&lt;br&gt;<br>
5.8.2&nbsp;and&nbsp;the&nbsp;problem&nbsp;still&nbsp;exists&lt;br&gt;<br>
2.&nbsp;I&nbsp;have&nbsp;added&nbsp;the&nbsp;logs&nbsp;file&nbsp;from&nbsp;the&nbsp;rabbitmq&nbsp;server.&nbsp;I&nbsp;am&nbsp;the&nbsp;ip&nbsp;that&lt;br&gt;<br>
ends&nbsp;with&nbsp;170.120&nbsp;and&nbsp;my&nbsp;last&nbsp;trial&nbsp;had&nbsp;an&nbsp;exception.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
It&nbsp;is&nbsp;unusual&nbsp;to&nbsp;have&nbsp;the&nbsp;broker&nbsp;listen&nbsp;on&nbsp;port&nbsp;1434.&nbsp;From&nbsp;the&nbsp;log&nbsp;there&nbsp;are&nbsp;at&nbsp;least&nbsp;3&nbsp;kinds&nbsp;of&nbsp;problems:&lt;br&gt;<br>
&lt;br&gt;<br>
1&nbsp;Protocol&nbsp;errors:&lt;br&gt;<br>
&nbsp; Acknowledging&nbsp;with&nbsp;an&nbsp;unknown&nbsp;delivery&nbsp;tag&lt;br&gt;<br>
&nbsp; Redeclaring&nbsp;exchanges&nbsp;with&nbsp;different&nbsp;parameters&lt;br&gt;<br>
&nbsp; These&nbsp;will&nbsp;lead&nbsp;to&nbsp;a&nbsp;channel&nbsp;or&nbsp;connection&nbsp;closure.&lt;br&gt;<br>
&lt;br&gt;<br>
2&nbsp;1-Mar-2011::14:15:02&lt;br&gt;<br>
&nbsp; Handshake&nbsp;timeout&lt;br&gt;<br>
&nbsp; This&nbsp;will&nbsp;close&nbsp;the&nbsp;connection&lt;br&gt;<br>
&lt;br&gt;<br>
3&nbsp;1-Mar-2011::14:18:46&lt;br&gt;<br>
&nbsp; Abrupt&nbsp;connection&nbsp;termination&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;first&nbsp;can&nbsp;be&nbsp;solved&nbsp;by&nbsp;making&nbsp;sure&nbsp;that&nbsp;you&nbsp;don&amp;#39;t&nbsp;acknowledge&nbsp;messages&nbsp;more&nbsp;than&nbsp;once,&nbsp;and&nbsp;that&nbsp;you&nbsp;declare&nbsp;exchanges&nbsp;with&nbsp;identical&nbsp;parameters.&nbsp;The&nbsp;second&nbsp;and&nbsp;third&nbsp;may&nbsp;have&nbsp;a&nbsp;related&nbsp;root&nbsp;cause,&nbsp;which&nbsp;the&nbsp;tracer&nbsp;or&nbsp;network&nbsp;diagnostic&nbsp;tools&nbsp;should&nbsp;help&nbsp;to&nbsp;identify.&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
3.&nbsp;Now&nbsp;about&nbsp;that&nbsp;tracer.&nbsp;I&nbsp;have&nbsp;been&nbsp;having&nbsp;some&nbsp;hard&nbsp;time&nbsp;finding&lt;br&gt;<br>
documentation&nbsp;for&nbsp;it.&lt;br&gt;<br>
Should&nbsp;I&nbsp;run&nbsp;it&nbsp;from&nbsp;the&nbsp;client&nbsp;(it&nbsp;comes&nbsp;with&nbsp;the&nbsp;client&nbsp;packacge)&nbsp;or&lt;br&gt;<br>
in&nbsp;the&nbsp;server?&nbsp;I&nbsp;am&nbsp;running&nbsp;it&nbsp;in&nbsp;the&nbsp;client.&lt;br&gt;<br>
my&nbsp;rabbit&nbsp;node&nbsp;port&nbsp;is&nbsp;1434.&nbsp; so&nbsp;I&nbsp;am&nbsp;running&nbsp;it&nbsp;with&lt;br&gt;<br>
.\runjava.bat&nbsp;co&nbsp;m.rabbitmq.tools.Tracer&nbsp;1434&nbsp;192.168.100.251&nbsp;5672&lt;br&gt;<br>
are&nbsp;my&nbsp;parameters&nbsp;ok&nbsp;?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
See&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/examples.html#tracer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/examples.html#tracer&lt;/a&gt;&nbsp;.&lt;br&gt;<br>
Judging&nbsp;by&nbsp;your&nbsp;logfile&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;1434&nbsp;as&nbsp;the&nbsp;connectPort&nbsp;argument&nbsp;instead&nbsp;of&nbsp;5672.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;used&nbsp;rabbit&nbsp;node&nbsp;port&nbsp;as&nbsp;listenport&nbsp;and&nbsp;5672&nbsp;as&nbsp;connect&nbsp;port.&nbsp;I&nbsp;also&lt;br&gt;<br>
switched&nbsp;them&nbsp;but&nbsp;no&nbsp;luck&nbsp;.&nbsp;I&nbsp;didnt&nbsp;see&nbsp;anything&nbsp;on&nbsp;the&nbsp;cmd&nbsp;when&nbsp;I&lt;br&gt;<br>
invoked&nbsp;my&nbsp;produce&nbsp;command.&lt;br&gt;<br>
here&nbsp;it&nbsp;is&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
You&nbsp;should&nbsp;configure&nbsp;AMQP&nbsp;clients&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;tracer&nbsp;instead&nbsp;of&nbsp;to&nbsp;the&nbsp;broker&nbsp;directly.&nbsp;The&nbsp;port&nbsp;should&nbsp;be&nbsp;the&nbsp;one&nbsp;given&nbsp;as&nbsp;the&nbsp;first&nbsp;argument&nbsp;(listenPort)&nbsp;and&nbsp;the&nbsp;host&nbsp;should&nbsp;be&nbsp;the&nbsp;IP&nbsp;number&nbsp;of&nbsp;the&nbsp;machine&nbsp;running&nbsp;the&nbsp;tracer.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
