<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;Tony.&lt;br&gt;&lt;br&gt;This&nbsp;looks&nbsp;like&nbsp;an&nbsp;interesting&nbsp;semantics&nbsp;for&nbsp;this.&lt;br&gt;&lt;br&gt;Eran&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;17,&nbsp;2009&nbsp;at&nbsp;1:11&nbsp;PM,&nbsp;Tony&nbsp;Garnock-Jones&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tonyg@lshift.net&quot;&gt;tonyg@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;Eran&nbsp;Sandler&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Regarding&nbsp;the&nbsp;blocking&nbsp;&amp;quot;GET&amp;quot;&nbsp;commands,&nbsp;I&nbsp;read&nbsp;about&nbsp;Kesterl&nbsp;(in&nbsp;the&nbsp;link&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;gave&nbsp;below)&nbsp;and&nbsp;thought&nbsp;its&nbsp;an&nbsp;interesting&nbsp;approach&nbsp;to&nbsp;make&nbsp;pulling&nbsp;a&lt;br&gt;<br>
&amp;gt;&nbsp;bit&nbsp;more&nbsp;efficient&nbsp;instead&nbsp;of&nbsp;sending&nbsp;the&nbsp;&amp;quot;puller&amp;quot;&nbsp;back&nbsp;to&nbsp;a&nbsp;short&nbsp;sleep.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Another&nbsp;approach&nbsp;is&nbsp;to&nbsp;set&nbsp;the&nbsp;prefetch&nbsp;window&nbsp;to&nbsp;1,&nbsp;and&nbsp;start&nbsp;a&lt;br&gt;<br>
consumer.&nbsp;If&nbsp;you&nbsp;really&nbsp;did&nbsp;only&nbsp;want&nbsp;a&nbsp;single&nbsp;message,&nbsp;you&nbsp;can&nbsp;cancel&lt;br&gt;<br>
the&nbsp;consumer&nbsp;before&nbsp;acking&nbsp;the&nbsp;message.&nbsp;Otherwise,&nbsp;when&nbsp;you&nbsp;ack&nbsp;it,&nbsp;the&lt;br&gt;<br>
server&nbsp;will&nbsp;send&nbsp;you&nbsp;the&nbsp;next&nbsp;waiting&nbsp;message&nbsp;if&nbsp;there&nbsp;is&nbsp;one.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.QOS{&nbsp;prefetch_count&nbsp;=&nbsp;1&nbsp;}&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.CONSUME&lt;br&gt;<br>
&nbsp; &amp;lt;--&nbsp;BASIC.CONSUME-OK&lt;br&gt;<br>
&nbsp; ...&nbsp;wait&nbsp;for&nbsp;a&nbsp;message&nbsp;to&nbsp;arrive&nbsp;...&lt;br&gt;<br>
&nbsp; &amp;lt;--&nbsp;BASIC.DELIVER&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.CANCEL&lt;br&gt;<br>
&nbsp; &amp;lt;--&nbsp;BASIC.CANCEL-OK&lt;br&gt;<br>
&nbsp; ...&nbsp;processing&nbsp;of&nbsp;message&nbsp;...&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.ACK&lt;br&gt;<br>
&lt;br&gt;<br>
versus&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.QOS{&nbsp;prefetch_count&nbsp;=&nbsp;1&nbsp;}&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.CONSUME&lt;br&gt;<br>
&nbsp; &amp;lt;--&nbsp;BASIC.CONSUME-OK&lt;br&gt;<br>
&nbsp; ...&nbsp;wait&nbsp;for&nbsp;a&nbsp;message&nbsp;to&nbsp;arrive&nbsp;...&lt;br&gt;<br>
&nbsp; &amp;lt;--&nbsp;BASIC.DELIVER&lt;br&gt;<br>
&nbsp; ...&nbsp;processing&nbsp;of&nbsp;message&nbsp;...&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.ACK&lt;br&gt;<br>
&nbsp; ...&nbsp;wait&nbsp;for&nbsp;a&nbsp;message&nbsp;to&nbsp;arrive&nbsp;...&lt;br&gt;<br>
&nbsp; &amp;lt;--&nbsp;BASIC.DELIVER&lt;br&gt;<br>
&nbsp; ...&nbsp;processing&nbsp;of&nbsp;message&nbsp;...&lt;br&gt;<br>
&nbsp; --&amp;gt;&nbsp;BASIC.ACK&lt;br&gt;<br>
&nbsp; ...&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&nbsp; Tony&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;--&lt;br&gt;<br>
 [][][]&nbsp;Tony&nbsp;Garnock-Jones&nbsp; &nbsp; &nbsp;|&nbsp;Mob:&nbsp;+44&nbsp;(0)7905&nbsp;974&nbsp;211&lt;br&gt;<br>
&nbsp; &nbsp;[][]&nbsp;LShift&nbsp;Ltd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;Tel:&nbsp;+44&nbsp;(0)20&nbsp;7729&nbsp;7060&lt;br&gt;<br>
 []&nbsp; []&nbsp;&lt;a&nbsp;href=&quot;http://www.lshift.net/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.lshift.net/&lt;/a&gt;&nbsp;|&nbsp;Email:&nbsp;&lt;a&nbsp;href=&quot;mailto:tonyg@lshift.net&quot;&gt;tonyg@lshift.net&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
