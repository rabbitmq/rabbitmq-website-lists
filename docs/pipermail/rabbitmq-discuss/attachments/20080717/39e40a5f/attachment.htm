<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&amp;#39;ve&nbsp;just&nbsp;finished&nbsp;a&nbsp;simple&nbsp;high&nbsp;level&nbsp;api,&nbsp;and&nbsp;committed&nbsp;several&nbsp;examples&nbsp;showing&nbsp;off&nbsp;direct,&nbsp;topic,&nbsp;fanout&nbsp;and&nbsp;rpc&nbsp;style&nbsp;messaging&nbsp;over&nbsp;rabbitmq:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;http://github.com/tmm1/amqp/tree/master/examples/pingpong.rb&quot;&gt;http://github.com/tmm1/amqp/tree/master/examples/pingpong.rb&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;http://github.com/tmm1/amqp/tree/master/examples/clock.rb&quot;&gt;http://github.com/tmm1/amqp/tree/master/examples/clock.rb&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;http://github.com/tmm1/amqp/tree/master/examples/stocks.rb&quot;&gt;http://github.com/tmm1/amqp/tree/master/examples/stocks.rb&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;http://github.com/tmm1/amqp/tree/master/examples/hashtable.rb&quot;&gt;http://github.com/tmm1/amqp/tree/master/examples/hashtable.rb&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;API&nbsp;revolves&nbsp;around&nbsp;an&nbsp;MQ&nbsp;object,&nbsp;which&nbsp;corresponds&nbsp;1:1&nbsp;with&nbsp;an&nbsp;AMQP&nbsp;channel.&nbsp;An&nbsp;AMQP&nbsp;connection&nbsp;is&nbsp;created&nbsp;automatically&nbsp;by&nbsp;the&nbsp;MQ&nbsp;class&nbsp;(on&nbsp;demand),&nbsp;so&nbsp;you&nbsp;don&amp;#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;connection,&nbsp;channel&nbsp;or&nbsp;sessions.&nbsp;In&nbsp;the&nbsp;simplest&nbsp;case,&nbsp;MQ&nbsp;objects&nbsp;allow&nbsp;publishing&nbsp;to&nbsp;exchanges&nbsp;and&nbsp;reading&nbsp;from&nbsp;queues:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;amq&nbsp;=&nbsp;MQ.new&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;amq.queue(&amp;#39;queue_name&amp;#39;).subscribe{&nbsp;|msg|&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;puts&nbsp;&amp;quot;i&nbsp;got&nbsp;a&nbsp;message:&nbsp;#{msg}&amp;quot;&nbsp;&amp;nbsp;&nbsp;#&nbsp;msg&nbsp;==&nbsp;&amp;quot;hello&nbsp;world&amp;quot;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;end&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;amq.direct.publish(&amp;#39;hello&nbsp;world&amp;#39;,&nbsp;:key&nbsp;=&amp;gt;&nbsp;&amp;#39;queue_name&amp;#39;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;Aman&nbsp;Gupta&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Jul&nbsp;12,&nbsp;2008&nbsp;at&nbsp;2:45&nbsp;AM,&nbsp;Aman&nbsp;Gupta&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq@tmm1.net&quot;&gt;rabbitmq@tmm1.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&gt;I&amp;#39;ve&nbsp;been&nbsp;working&nbsp;on&nbsp;a&nbsp;Ruby/EventMachine&nbsp;AMQP&nbsp;client&nbsp;over&nbsp;the&nbsp;past&nbsp;few&nbsp;days&nbsp;and&nbsp;I&nbsp;have&nbsp;a&nbsp;simple&nbsp;client&nbsp;up&nbsp;and&nbsp;running:&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;def&nbsp;receive_data&nbsp;data&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Frame.extract(data).each&nbsp;do&nbsp;|frame|&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;#&nbsp;log&nbsp;&amp;#39;got&nbsp;a&nbsp;frame&amp;#39;,&nbsp;frame&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;case&nbsp;method&nbsp;=&nbsp;frame.payload&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;when&nbsp;Protocol::Connection::Start&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;send&nbsp;Protocol::Connection::StartOk.new({:platform&nbsp;=&amp;gt;&nbsp;&amp;#39;Ruby/EventMachine&amp;#39;,&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:product&nbsp;=&amp;gt;&nbsp;&amp;#39;AMQP&amp;#39;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:information&nbsp;=&amp;gt;&nbsp;&amp;#39;&lt;a&nbsp;href=&quot;http://github.com/tmm1/amqp&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/tmm1/amqp&lt;/a&gt;&amp;#39;,&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:version&nbsp;=&amp;gt;&nbsp;&amp;#39;0.0.1&amp;#39;},&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;#39;AMQPLAIN&amp;#39;,&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{:LOGIN&nbsp;=&amp;gt;&nbsp;&amp;#39;guest&amp;#39;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:PASSWORD&nbsp;=&amp;gt;&nbsp;&amp;#39;guest&amp;#39;},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;#39;en_US&amp;#39;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;when&nbsp;Protocol::Connection::Tune&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;send&nbsp;Protocol::Connection::TuneOk.new&nbsp;:channel_max&nbsp;=&amp;gt;&nbsp;0,&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:frame_max&nbsp;=&amp;gt;&nbsp;131072,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:heartbeat&nbsp;=&amp;gt;&nbsp;0&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;send&nbsp;Protocol::Connection::Open.new&nbsp;:virtual_host&nbsp;=&amp;gt;&nbsp;&amp;#39;/&amp;#39;,&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:capabilities&nbsp;=&amp;gt;&nbsp;&amp;#39;&amp;#39;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;:insist&nbsp;=&amp;gt;&nbsp;false&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;when&nbsp;Protocol::Connection::OpenOk&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;send&nbsp;Protocol::Channel::Open.new,&nbsp;:channel&nbsp;=&amp;gt;&nbsp;1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;end&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;end&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;end&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Feedback&nbsp;and&nbsp;ideas&nbsp;for&nbsp;a&nbsp;higher-level&nbsp;queue/exchange/binding&nbsp;API&nbsp;are&nbsp;welcome.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;Aman&nbsp;Gupta&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
