<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi,&nbsp;Simon.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:4F22A81F.6050405@rabbitmq.com&quot;&nbsp;type=&quot;cite&quot;&gt;So<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;looks&nbsp;like&nbsp;you&nbsp;are&nbsp;leaving&nbsp;the&nbsp;cluster&nbsp;and&nbsp;then&nbsp;resetting,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rather&nbsp;than&nbsp;the&nbsp;other&nbsp;way&nbsp;around&nbsp;(which&nbsp;is&nbsp;more&nbsp;normal).&nbsp;It&nbsp;looks<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;like&nbsp;the&nbsp;request&nbsp;to&nbsp;leave&nbsp;the&nbsp;cluster&nbsp;gets&nbsp;ignored&nbsp;in&nbsp;this&nbsp;case.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I'll&nbsp;file&nbsp;a&nbsp;bug.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I've&nbsp;tried&nbsp;scenario,&nbsp;when&nbsp;removing&nbsp;node&nbsp;from&nbsp;cluster&nbsp;is&nbsp;performed<br>
&nbsp;&nbsp;&nbsp;&nbsp;like&nbsp;this:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;join&nbsp;machine&nbsp;B&nbsp;(epbyminw2482t3)&nbsp;to&nbsp;machine&nbsp;A&nbsp;(epbyminw2482t2).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[root@epbyminw2482t3&nbsp;~]#&nbsp;rabbitmqctl&nbsp;stop_app&nbsp;&amp;amp;&amp;amp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rabbitmqctl&nbsp;reset&nbsp;&amp;amp;&amp;amp;&nbsp;rabbitmqctl&nbsp;cluster&nbsp;wosnfs@`hostname<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-s`&nbsp;wosnfs@epbyminw2482t2&nbsp;&amp;amp;&amp;amp;&nbsp;rabbitmqctl&nbsp;start_app&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;-CUT-&amp;gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clustering&nbsp;node&nbsp;wosnfs@epbyminw2482t3&nbsp;with&nbsp;[wosnfs@epbyminw2482t3,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;wosnfs@epbyminw2482t2]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...done.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starting&nbsp;node&nbsp;wosnfs@epbyminw2482t3&nbsp;...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...done.&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Everything&nbsp;is&nbsp;ok.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;remove&nbsp;node&nbsp;A&nbsp;from&nbsp;cluster&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[root@epbyminw2482t2&nbsp;~]#&nbsp;&lt;b&gt;rabbitmqctl&nbsp;stop_app&nbsp;&amp;amp;&amp;amp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rabbitmqctl&nbsp;reset&nbsp;&amp;amp;&amp;amp;&nbsp;rabbitmqctl&nbsp;start_app&lt;/b&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stopping&nbsp;node&nbsp;wosnfs@epbyminw2482t2&nbsp;...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...done.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resetting&nbsp;node&nbsp;wosnfs@epbyminw2482t2&nbsp;...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...done.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starting&nbsp;node&nbsp;wosnfs@epbyminw2482t2&nbsp;...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...done.&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;From&nbsp;now&nbsp;node&nbsp;A&nbsp;and&nbsp;B&nbsp;are&nbsp;standalone,&nbsp;and&nbsp;operate&lt;i&gt;&nbsp;independently.&lt;/i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;3)&nbsp;restart&nbsp;broker&nbsp;on&nbsp;node&nbsp;B.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt&gt;Restarting&nbsp;rabbitmq-server:&nbsp;FAILED&nbsp;-&nbsp;check<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/var/log/rabbitmq/startup_{log,&nbsp;_err}&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rabbitmq-server.&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt&gt;[root@epbyminw2482t3&nbsp;~]#&nbsp;cat&nbsp;/var/log/rabbitmq/startup_log&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Activating&nbsp;RabbitMQ&nbsp;plugins&nbsp;...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;plugins&nbsp;activated:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;-CUT-&amp;gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;:&nbsp;wosnfs@epbyminw2482t3&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app&nbsp;descriptor&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/lib/rabbitmq/lib/rabbitmq_server-2.7.1/sbin/../ebin/rabbit.app&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;home&nbsp;dir&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;:&nbsp;/var/lib/rabbitmq&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config&nbsp;file(s)&nbsp;:&nbsp;(none)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;-CUT-&amp;gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erlang&nbsp;version&nbsp;:&nbsp;5.8.4&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rabbit&nbsp;boot&nbsp;start&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;starting&nbsp;file&nbsp;handle&nbsp;cache<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;...done&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;starting&nbsp;worker<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pool&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;...done&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;starting<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;database&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...BOOT&nbsp;ERROR:&nbsp;FAILED&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reason:&nbsp;{error,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{unable_to_join_cluster,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[wosnfs@epbyminw2482t3,wosnfs@epbyminw2482t2],&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{merge_schema_failed,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;Bad&nbsp;cookie&nbsp;in&nbsp;table&nbsp;definition<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mirrored_sup_childspec:&nbsp;wosnfs@epbyminw2482t3&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{cstruct,mirrored_sup_childspec,ordered_set,[wosnfs@epbyminw2482t3],[],[],0,read_write,false,[],[],false,mirrored_sup_childspec,[key,mirroring_pid,childspec],[],[],{{1327,927347,889571},wosnfs@epbyminw2482t2},{{3,1},{wosnfs@epbyminw2482t3,{1327,927549,609065}}}},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wosnfs@epbyminw2482t2&nbsp;=<br>
{cstruct,mirrored_sup_childspec,ordered_set,[wosnfs@epbyminw2482t2],[],[],0,read_write,false,[],[],false,mirrored_sup_childspec,[key,mirroring_pid,childspec],[],[],{{1327,927550,935402},wosnfs@epbyminw2482t2},{{2,0},[]}}\n&quot;}}}&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stacktrace:&nbsp;[{rabbit_mnesia,init_db,3},&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbit_mnesia,init,0},&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbit,'-run_boot_step/1-lc$^1/1-1-',1},&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbit,run_boot_step,1},&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbit,'-start/2-lc$^0/1-0-',1},&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbit,start,2},&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{application_master,start_it_old,4}]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;Kernel&nbsp;pid<br>
terminated&quot;,application_controller,&quot;{application_start_failure,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}}}&quot;}&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;got&nbsp;this&nbsp;error.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;3.1)&nbsp;But,&nbsp;if&nbsp;we&nbsp;stop&nbsp;application&nbsp;on&nbsp;node&nbsp;A&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt&gt;[root@epbyminw2482t2&nbsp;~]#&nbsp;rabbitmqctl&nbsp;stop_app&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;3.2)&lt;tt&gt;&nbsp;[root@epbyminw2482t3&nbsp;~]#&nbsp;service&nbsp;rabbitmq-server&nbsp;restart&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Restarting&nbsp;rabbitmq-server:&nbsp;RabbitMQ&nbsp;is&nbsp;not&nbsp;running&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SUCCESS&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rabbitmq-server.&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Rabbitmq&nbsp;broker&nbsp;on&nbsp;node&nbsp;B(!)&nbsp;restarts&nbsp;successfully.&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Until&nbsp;broker(or&nbsp;application)&nbsp;on&nbsp;node&nbsp;A&nbsp;is&nbsp;down,&nbsp;node&nbsp;B&nbsp;work&nbsp;fine.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;broker&nbsp;on&nbsp;node&nbsp;A&nbsp;is&nbsp;up,&nbsp;node&amp;nbsp;&nbsp;B&nbsp;faces&nbsp;above&nbsp;mentioned&nbsp;troubles<br>
&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;restart&nbsp;(or&nbsp;`rabbitmqctl&nbsp;reset`).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Workaround&nbsp;is&nbsp;to&nbsp;remove&nbsp;mnesia&nbsp;db&nbsp;on&nbsp;node&nbsp;B,&nbsp;but&nbsp;it&nbsp;is&nbsp;bad&nbsp;idea,<br>
&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;node&nbsp;B&nbsp;is&nbsp;still&nbsp;joined&nbsp;to&nbsp;the&nbsp;cluster.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;seems&nbsp;that&nbsp;there&nbsp;is&nbsp;some&nbsp;kind&nbsp;of&nbsp;rule&nbsp;about&nbsp;order&nbsp;of&nbsp;joining&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;removing&nbsp;nodes&nbsp;from&nbsp;cluster...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;our&nbsp;application&nbsp;all&nbsp;rabbitmq&nbsp;brokers&nbsp;have&nbsp;to&nbsp;joined&nbsp;in&nbsp;cluster&nbsp;as<br>
&nbsp;&nbsp;&nbsp;&nbsp;disk&nbsp;nodes,&nbsp;and&nbsp;it&nbsp;have&nbsp;to&nbsp;be&nbsp;possible&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;add\remove&nbsp;any&nbsp;node&nbsp;at&nbsp;any&nbsp;time.&nbsp;Could&nbsp;you&nbsp;suggest&nbsp;me,&nbsp;have&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;achieve&nbsp;that&nbsp;and&nbsp;avoid&nbsp;&quot;bad&nbsp;cookie&quot;&nbsp;problem?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
