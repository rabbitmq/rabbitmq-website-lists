<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;&lt;div&gt;Don't&nbsp;take&nbsp;this&nbsp;as&nbsp;gospel,&nbsp;yet,&nbsp;but&nbsp;my&nbsp;understanding&nbsp;is&nbsp;that&nbsp;you'll&nbsp;be&nbsp;able&nbsp;to&nbsp;make&nbsp;cluster&nbsp;changes&nbsp;like&nbsp;this&nbsp;successfully,&nbsp;but&nbsp;I'll&nbsp;make&nbsp;sure&nbsp;there's&nbsp;a&nbsp;test&nbsp;case&nbsp;to&nbsp;prove&nbsp;this&nbsp;scenario.&lt;/div&gt;&lt;div&gt;&lt;br&gt;On&nbsp;1&nbsp;Oct&nbsp;2012,&nbsp;at&nbsp;18:07,&nbsp;Matt&nbsp;Pietrek&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mpietrek@skytap.com&quot;&gt;mpietrek@skytap.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Hey&nbsp;Tim,&lt;br&gt;&lt;br&gt;I&nbsp;was&nbsp;expecting&nbsp;that&nbsp;basic&nbsp;response.&nbsp;Thanks!&lt;br&gt;&lt;br&gt;However...&nbsp;I&nbsp;still&nbsp;think&nbsp;there&nbsp;may&nbsp;an&nbsp;issue&nbsp;here&nbsp;that&nbsp;hinders&nbsp;RabbitMQ's&nbsp;deployment&nbsp;in&nbsp;production&nbsp;scenarios.&nbsp;Please&nbsp;correct&nbsp;me&nbsp;if&nbsp;I'm&nbsp;wrong&nbsp;or&nbsp;missing&nbsp;something.&lt;br&gt;<br>
&lt;br&gt;Hypothetically,&nbsp;what&nbsp;would&nbsp;happen&nbsp;if&nbsp;my&nbsp;'util'&nbsp;node&nbsp;was&nbsp;zapped&nbsp;by&nbsp;lightning&nbsp;and&nbsp;I&nbsp;had&nbsp;no&nbsp;way&nbsp;to&nbsp;bring&nbsp;it&nbsp;up&nbsp;in&nbsp;a&nbsp;timely&nbsp;manner.&nbsp;Would&nbsp;I&nbsp;be&nbsp;able&nbsp;to&nbsp;start&nbsp;the&nbsp;existing&nbsp;cluster&nbsp;nodes&nbsp;(play,&nbsp;play2)&nbsp;&quot;far&nbsp;enough&quot;&nbsp;to&nbsp;run&nbsp;the&nbsp;proper&nbsp;rabbitmqctl&nbsp;command&nbsp;to&nbsp;remove&nbsp;util&nbsp;from&nbsp;the&nbsp;cluster?&lt;br&gt;<br>
&lt;br&gt;That&nbsp;is,&nbsp;once&nbsp;I've&nbsp;gotten&nbsp;into&nbsp;a&nbsp;bad&nbsp;situation,&nbsp;can&nbsp;I&nbsp;back&nbsp;out&nbsp;of&nbsp;it&nbsp;gracefully&nbsp;and&nbsp;without&nbsp;message&nbsp;loss?&nbsp;Or&nbsp;is&nbsp;the&nbsp;only&nbsp;option&nbsp;to&nbsp;reset&nbsp;the&nbsp;entire&nbsp;cluster?&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;&lt;br&gt;Matt&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Oct&nbsp;1,&nbsp;2012&nbsp;at&nbsp;3:04&nbsp;AM,&nbsp;Tim&nbsp;Watson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tim@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;tim@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&lt;div&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;Matt,&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;09/28/2012&nbsp;08:23&nbsp;PM,&nbsp;Matt&nbsp;Pietrek&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;For&nbsp;example,&nbsp;at&nbsp;one&nbsp;point&nbsp;I&nbsp;had&nbsp;a&nbsp;three&nbsp;node&nbsp;cluster:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;play,&nbsp;play2,&nbsp;and&nbsp;util.&nbsp;I&nbsp;then&nbsp;removed&nbsp;util&nbsp;from&nbsp;the&nbsp;cluster,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;although&nbsp;to&nbsp;be&nbsp;honest,&nbsp;simply&nbsp;by&nbsp;changing&nbsp;the&nbsp;rabbitmq.config<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file,&nbsp;rather&nbsp;than&nbsp;explicitly&nbsp;running&nbsp;rabbitmqctl&nbsp;stop_app&nbsp;while<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;cluster&nbsp;is&nbsp;still&nbsp;running.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;pretty&nbsp;sure&nbsp;you're&nbsp;not&nbsp;supposed&nbsp;to&nbsp;do&nbsp;that!&nbsp;:)&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;My&nbsp;steps:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Running&nbsp;as&nbsp;three&nbsp;node&nbsp;cluster,&nbsp;stop&nbsp;all&nbsp;brokers&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Create&nbsp;a&nbsp;new&nbsp;rabbitmq.config&nbsp;file&nbsp;with&nbsp;just&nbsp;two&nbsp;brokers&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Attempt&nbsp;to&nbsp;start&nbsp;the&nbsp;new&nbsp;cluster.&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;don't&nbsp;take&nbsp;util&nbsp;offline&nbsp;using&nbsp;the&nbsp;right&nbsp;procedure,&nbsp;I&nbsp;suspect<br>
&nbsp;&nbsp;&nbsp;&nbsp;mnesia&nbsp;will&nbsp;get&nbsp;out&nbsp;of&nbsp;sorts&nbsp;and&nbsp;this&nbsp;isn't&nbsp;something&nbsp;you&nbsp;want&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;happen.&nbsp;It's&nbsp;important&nbsp;to&nbsp;make&nbsp;cluster&nbsp;changes&nbsp;using&nbsp;the&nbsp;right<br>
&nbsp;&nbsp;&nbsp;&nbsp;procedure,&nbsp;as&nbsp;mnesia&nbsp;is&nbsp;rather&nbsp;a&nbsp;fussy&nbsp;beast.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;BTW&nbsp;we've&nbsp;made&nbsp;some&nbsp;improvements&nbsp;that&nbsp;(hopefully)&nbsp;simplify&nbsp;working<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;clusters&nbsp;and&nbsp;these&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;forthcoming&nbsp;feature&nbsp;release!<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Cheers,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Tim&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
