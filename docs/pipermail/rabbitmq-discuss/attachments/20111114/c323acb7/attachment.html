<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Cheers,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;was&nbsp;fiddling&nbsp;with&nbsp;the&nbsp;Topic&nbsp;examples&nbsp;and&nbsp;I&nbsp;ran&nbsp;into&nbsp;a&nbsp;problem.&nbsp;If<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;start&nbsp;the&nbsp;client&nbsp;&quot;ReceiveLogsTopic&quot;&nbsp;before&nbsp;the&nbsp;sender<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;EmitLogTopic&quot;&nbsp;I&nbsp;see&nbsp;everything&nbsp;working&nbsp;fine.&nbsp;Sender&nbsp;sends&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;receives&nbsp;and&nbsp;displays&nbsp;right.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;if&nbsp;I&nbsp;start&nbsp;the&nbsp;sender&nbsp;before&nbsp;the&nbsp;client,&nbsp;the&nbsp;message&nbsp;gets<br>
&nbsp;&nbsp;&nbsp;&nbsp;sent&nbsp;but&nbsp;then&nbsp;nothing&nbsp;happens,&nbsp;the&nbsp;queue&nbsp;appears&nbsp;to&nbsp;be&nbsp;empty&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;keeps&nbsp;waiting&nbsp;for&nbsp;nothing.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;think&nbsp;that's&nbsp;correct&nbsp;since&nbsp;the&nbsp;queue&nbsp;is&nbsp;created&nbsp;at&nbsp;runtime&nbsp;and&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;destroyed&nbsp;when&nbsp;there's&nbsp;nothing&nbsp;more&nbsp;to&nbsp;do&nbsp;with&nbsp;it&nbsp;as&nbsp;explained&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;documentation:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;sourcecode&quot;&gt;channel.exchangeDeclare(&lt;b&gt;exchangeName&lt;/b&gt;,&nbsp;&lt;b&gt;&quot;direct&quot;&lt;/b&gt;,&nbsp;&lt;b&gt;true&lt;/b&gt;);<br>
String&nbsp;&lt;b&gt;queueName&lt;/b&gt;&nbsp;=&nbsp;channel.queueDeclare().getQueue();<br>
channel.queueBind(&lt;b&gt;queueName&lt;/b&gt;,&nbsp;&lt;b&gt;exchangeName&lt;/b&gt;,&nbsp;&lt;b&gt;routingKey&lt;/b&gt;);&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&nbsp;This&nbsp;will&nbsp;actively&nbsp;declare&nbsp;the&nbsp;following&nbsp;objects,&nbsp;both&nbsp;of&nbsp;which<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;be&nbsp;customised&nbsp;by&nbsp;using&nbsp;additional&nbsp;parameters.&nbsp;Here&nbsp;neither&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;them&nbsp;have&nbsp;any&nbsp;special&nbsp;arguments.&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ol&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;a&nbsp;durable,&nbsp;non-autodelete&nbsp;exchange&nbsp;of&nbsp;&quot;direct&quot;&nbsp;type&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;a&nbsp;non-durable,&nbsp;exclusive,&nbsp;autodelete&nbsp;queue&nbsp;with&nbsp;a&nbsp;generated<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ol&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;What&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;do&nbsp;instead&nbsp;is&nbsp;(example):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;1)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;create&nbsp;3&nbsp;exchanges:&nbsp;EXA,&nbsp;EXB&nbsp;and&nbsp;EXC&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;every&nbsp;exchange,&nbsp;create&nbsp;2&nbsp;queues&nbsp;and&nbsp;bind&nbsp;them&nbsp;to&nbsp;it:&nbsp;Q1&nbsp;and&nbsp;Q2.<br>
&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;queues&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;but&nbsp;are&nbsp;not&nbsp;the&nbsp;same&nbsp;object&nbsp;(see<br>
&nbsp;&nbsp;&nbsp;&nbsp;attached&nbsp;PNG&nbsp;if&nbsp;needed)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;2)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;send&nbsp;a&nbsp;message&nbsp;to&nbsp;be&nbsp;queued&nbsp;in&nbsp;queue&nbsp;Q1&nbsp;through&nbsp;EXA&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;send&nbsp;the&nbsp;same&nbsp;message&nbsp;to&nbsp;be&nbsp;queued&nbsp;in&nbsp;queue&nbsp;Q1&nbsp;through&nbsp;EXB&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;then&nbsp;is&nbsp;queued&nbsp;in&nbsp;two&nbsp;different&nbsp;queues&nbsp;which&nbsp;happen&nbsp;to&nbsp;have<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;same&nbsp;name&nbsp;but&nbsp;are&nbsp;binded&nbsp;to&nbsp;different&nbsp;exchanges&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;3)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;poll&nbsp;Q1&nbsp;through&nbsp;EXA&nbsp;to&nbsp;read&nbsp;messages&nbsp;and&nbsp;delete&nbsp;message&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;poll&nbsp;Q1&nbsp;through&nbsp;EXB&nbsp;to&nbsp;read&nbsp;messages&nbsp;and&nbsp;leave&nbsp;message&nbsp;there&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;then&nbsp;is&nbsp;no&nbsp;longer&nbsp;in&nbsp;EXA-Q1&nbsp;but&nbsp;is&nbsp;still&nbsp;available&nbsp;through<br>
&nbsp;&nbsp;&nbsp;&nbsp;EXB-Q1&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;don't&nbsp;and&nbsp;can't&nbsp;know&nbsp;if&nbsp;and&nbsp;when&nbsp;someone&nbsp;will&nbsp;try&nbsp;to&nbsp;send&nbsp;or&nbsp;read<br>
&nbsp;&nbsp;&nbsp;&nbsp;messages.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;guess&nbsp;it&nbsp;would&nbsp;require&nbsp;me&nbsp;to&nbsp;declare&nbsp;and&nbsp;bind&nbsp;a&nbsp;queue&nbsp;beforehand,<br>
&nbsp;&nbsp;&nbsp;&nbsp;maybe&nbsp;by&nbsp;using&nbsp;3&nbsp;classes:&nbsp;setUpExchangeAndQueues,&nbsp;sendMessage,<br>
&nbsp;&nbsp;&nbsp;&nbsp;pollMessages,&nbsp;but&nbsp;I'm&nbsp;a&nbsp;bit&nbsp;at&nbsp;loss&nbsp;here,&nbsp;could&nbsp;anyone&nbsp;point&nbsp;me&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;right&nbsp;direction?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;read&nbsp;that:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;several&nbsp;clients&nbsp;want&nbsp;to&nbsp;share&nbsp;a&nbsp;queue&nbsp;with&nbsp;a&nbsp;well-known&nbsp;name,<br>
&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;code&nbsp;would&nbsp;be&nbsp;appropriate:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;sourcecode&quot;&gt;channel.exchangeDeclare(&lt;b&gt;exchangeName&lt;/b&gt;,&nbsp;&lt;b&gt;&quot;direct&quot;&lt;/b&gt;,&nbsp;&lt;b&gt;true&lt;/b&gt;);<br>
channel.queueDeclare(&lt;b&gt;queueName&lt;/b&gt;,&nbsp;&lt;b&gt;true&lt;/b&gt;,&nbsp;&lt;b&gt;false&lt;/b&gt;,&nbsp;&lt;b&gt;false&lt;/b&gt;,&nbsp;&lt;b&gt;null&lt;/b&gt;);<br>
channel.queueBind(&lt;b&gt;queueName&lt;/b&gt;,&nbsp;&lt;b&gt;exchangeName&lt;/b&gt;,&nbsp;&lt;b&gt;routingKey&lt;/b&gt;);&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&nbsp;This&nbsp;will&nbsp;actively&nbsp;declare:&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;ol&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;a&nbsp;durable,&nbsp;non-autodelete&nbsp;exchange&nbsp;of&nbsp;&quot;direct&quot;&nbsp;type&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;a&nbsp;durable,&nbsp;non-exclusive,&nbsp;non-autodelete&nbsp;queue&nbsp;with&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;well-known&nbsp;name&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ol&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Tried&nbsp;it&nbsp;but&nbsp;failed.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;advise,&nbsp;I'm&nbsp;going&nbsp;crazy&nbsp;on&nbsp;this.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thank&nbsp;you,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;have&nbsp;a&nbsp;nice&nbsp;day&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;--&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dr.&nbsp;Stefano&nbsp;Ghio&nbsp;-&nbsp;ENG&nbsp;Engineering&nbsp;Italy&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Website:&nbsp;&lt;a&nbsp;href=&quot;http://groglogs.blogspot.com/&quot;&gt;http://groglogs.blogspot.com/&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;If&nbsp;you&nbsp;received&nbsp;this&nbsp;message&nbsp;but&nbsp;you&nbsp;are&nbsp;not&nbsp;its&nbsp;recipient,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;please&nbsp;ignore&nbsp;it&nbsp;and&nbsp;warn&nbsp;me,&nbsp;thank&nbsp;you.&lt;/b&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
