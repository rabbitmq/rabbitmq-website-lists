<tt>
Hi&nbsp;Everyone,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;encounter&nbsp;a&nbsp;strange&nbsp;problem&nbsp;when&nbsp;applying&nbsp;my&nbsp;puppet&nbsp;module&nbsp;I&nbsp;have&nbsp;created&nbsp;for&nbsp;installing&nbsp;RabbitMQ.&nbsp;To&nbsp;be&nbsp;more&nbsp;precise,&nbsp;I&nbsp;encounter&nbsp;the&nbsp;problem&nbsp;when&nbsp;enabling&nbsp;the&nbsp;plugins.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;relevant&nbsp;resources&nbsp;look&nbsp;as&nbsp;follows:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-bottom:&nbsp;10px;&nbsp;padding:&nbsp;5px;&nbsp;font-size:&nbsp;14px;&nbsp;background-color:&nbsp;rgb(238,&nbsp;238,&nbsp;238);&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;overflow:&nbsp;auto;&nbsp;width:&nbsp;auto;&nbsp;max-height:&nbsp;600px;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;line-height:&nbsp;18px;&nbsp;&quot;&gt;&lt;code&nbsp;style=&quot;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;&quot;&gt;$version&nbsp;=&nbsp;&quot;2.8.7&quot;<br>
$url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&quot;http://www.rabbitmq.com/releases/rabbitmq-server/v${version}/rabbitmq-server-${version}-1.noarch.rpm&quot;<br>
<br>
package{&quot;erlang&quot;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;ensure&nbsp;=&amp;gt;&nbsp;&quot;present&quot;,<br>
}<br>
<br>
package{&quot;rabbitmq-server&quot;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;provider&nbsp;=&amp;gt;&nbsp;&quot;rpm&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;source&nbsp;&nbsp;&nbsp;=&amp;gt;&nbsp;$url,<br>
&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;&nbsp;=&amp;gt;&nbsp;Package[&quot;erlang&quot;]<br>
}<br>
<br>
exec{&quot;rabbitmq-plugins&quot;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;=&amp;gt;&nbsp;&quot;/usr/bin:/usr/sbin:/bin&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;command&nbsp;=&amp;gt;&nbsp;&quot;rabbitmq-plugins&nbsp;enable&nbsp;rabbitmq_management&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;=&amp;gt;&nbsp;Package[&quot;rabbitmq-server&quot;]<br>
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;error&nbsp;I&nbsp;get:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-bottom:&nbsp;10px;&nbsp;padding:&nbsp;5px;&nbsp;font-size:&nbsp;14px;&nbsp;background-color:&nbsp;rgb(238,&nbsp;238,&nbsp;238);&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;overflow:&nbsp;auto;&nbsp;width:&nbsp;auto;&nbsp;max-height:&nbsp;600px;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;line-height:&nbsp;18px;&nbsp;&quot;&gt;&lt;code&nbsp;style=&quot;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;&quot;&gt;/Stage[main]/Rabbitmq/Exec[rabbitmq-plugins]/returns:&nbsp;erlexec:&nbsp;HOME&nbsp;must&nbsp;be&nbsp;set&lt;/code&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;margin-bottom:&nbsp;10px;&nbsp;padding:&nbsp;5px;&nbsp;background-color:&nbsp;rgb(238,&nbsp;238,&nbsp;238);&nbsp;overflow:&nbsp;auto;&nbsp;width:&nbsp;auto;&nbsp;max-height:&nbsp;600px;&nbsp;&quot;&gt;&lt;code&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;Lucida&nbsp;Console,&nbsp;Liberation&nbsp;Mono,&nbsp;DejaVu&nbsp;Sans&nbsp;Mono,&nbsp;Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono,&nbsp;Courier&nbsp;New,&nbsp;monospace,&nbsp;serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;14px;&nbsp;line-height:&nbsp;18px;&quot;&gt;/Stage[main]/Rabbitmq/Service[rabbitmq-server]:&nbsp;Dependency&nbsp;Exec[rabbitmq-plugins]&nbsp;has&nbsp;failures:&nbsp;true&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;thing&nbsp;is,&nbsp;that&nbsp;HOME&nbsp;is&nbsp;set.&nbsp;Have&nbsp;checked&nbsp;that&nbsp;during&nbsp;a&nbsp;puppet&nbsp;run&nbsp;by&nbsp;creating&nbsp;an&nbsp;exec&nbsp;resource&nbsp;to&nbsp;echo&nbsp;HOME.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;log&nbsp;into&nbsp;the&nbsp;box&nbsp;that&nbsp;I&nbsp;create&nbsp;with&nbsp;veewee&nbsp;and&nbsp;vagrant,&nbsp;I&nbsp;can&nbsp;execute&amp;nbsp;&quot;rabbitmq-plugins&nbsp;enable&nbsp;rabbitmq_management&quot;&nbsp;without&nbsp;any&nbsp;problems.&nbsp;But&nbsp;I&nbsp;always&nbsp;get&nbsp;the&nbsp;error&nbsp;from&nbsp;within&nbsp;puppet.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Starting&nbsp;rabbitmq-server&nbsp;leaves&nbsp;me&nbsp;with&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-bottom:&nbsp;10px;&nbsp;padding:&nbsp;5px;&nbsp;font-size:&nbsp;14px;&nbsp;background-color:&nbsp;rgb(238,&nbsp;238,&nbsp;238);&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;overflow:&nbsp;auto;&nbsp;width:&nbsp;auto;&nbsp;max-height:&nbsp;600px;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;line-height:&nbsp;18px;&nbsp;&quot;&gt;&lt;code&nbsp;style=&quot;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;'Courier&nbsp;New',&nbsp;monospace,&nbsp;serif;&nbsp;&quot;&gt;[{pid,2834},<br>
{running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;2.8.7&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ssl,&quot;Erlang/OTP&nbsp;SSL&nbsp;application&quot;,&quot;4.1.6&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{public_key,&quot;Public&nbsp;key&nbsp;infrastructure&quot;,&quot;0.13&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{crypto,&quot;CRYPTO&nbsp;version&nbsp;2&quot;,&quot;2.0.4&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mnesia,&quot;MNESIA&nbsp;&nbsp;CXC&nbsp;138&nbsp;12&quot;,&quot;4.5&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{os_mon,&quot;CPO&nbsp;&nbsp;CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.7&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sasl,&quot;SASL&nbsp;&nbsp;CXC&nbsp;138&nbsp;11&quot;,&quot;2.1.10&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{stdlib,&quot;ERTS&nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;1.17.5&quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{kernel,&quot;ERTS&nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;2.14.5&quot;}]},<br>
{os,{unix,linux}},<br>
{erlang_version,&quot;Erlang&nbsp;R14B04&nbsp;(erts-5.8.5)&nbsp;[source]&nbsp;[64-bit]&nbsp;[rq:1]&nbsp;[async-threads:30]&nbsp;[kernel-poll:true]\n&quot;},<br>
{memory,[{total,24993120},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{processes,10328496},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{processes_used,10321296},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{system,14664624},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{atom,1175905},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{atom_used,1143841},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{binary,17192},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{code,11416020},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ets,766168}]},<br>
{vm_memory_high_watermark,0.4},<br>
{vm_memory_limit,205851852},<br>
{disk_free_limit,1000000000},<br>
{disk_free,7089795072},<br>
{file_descriptors,[{total_limit,924},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{total_used,4},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sockets_limit,829},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sockets_used,2}]},<br>
{processes,[{limit,1048576},{used,131}]},<br>
{run_queue,0},<br>
{uptime,6}]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;whole&nbsp;puppet&nbsp;manifest&nbsp;can&nbsp;be&nbsp;found&nbsp;under&amp;nbsp;&lt;a&nbsp;href=&quot;https://github.com/tobias-wissmueller/dev_ops_central/blob/master/modules/rabbitmq/manifests/init.pp&quot;&gt;https://github.com/tobias-wissmueller/dev_ops_central/blob/master/modules/rabbitmq/manifests/init.pp&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also&nbsp;have&nbsp;posted&nbsp;this&nbsp;problem&nbsp;over&nbsp;at&amp;nbsp;&lt;a&nbsp;href=&quot;http://serverfault.com/questions/434942/veewee-vagrant-puppet-erlang-and-rabbitmq&quot;&gt;Serverfault&lt;/a&gt;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;help&nbsp;is&nbsp;highly&nbsp;appreciated&nbsp;since&nbsp;I&nbsp;am&nbsp;totally&nbsp;stuck&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Tobi&lt;/div&gt;
</tt>
