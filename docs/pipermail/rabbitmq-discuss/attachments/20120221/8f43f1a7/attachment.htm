<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;div&gt;I've&nbsp;noticed&nbsp;a&nbsp;pattern&nbsp;here&nbsp;that&nbsp;seems&nbsp;to&nbsp;be&nbsp;consistently&nbsp;reproducible.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;our&nbsp;setup,&nbsp;we&nbsp;have&nbsp;three&amp;nbsp;RabbitMQ&nbsp;2.71&amp;nbsp;brokers&nbsp;in&nbsp;a&nbsp;cluster&nbsp;on&nbsp;Ubuntu&nbsp;10.04.&nbsp;They're&nbsp;all&nbsp;mirroring&nbsp;the&nbsp;same&nbsp;set&nbsp;of&nbsp;queues,&nbsp;but&nbsp;that&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;relevant&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Starting&nbsp;from&nbsp;a&nbsp;healthy&nbsp;state&nbsp;(Management&nbsp;web&nbsp;console&nbsp;showing&nbsp;all&nbsp;brokers,&nbsp;and&nbsp;all&nbsp;queues&nbsp;in&nbsp;sync),&nbsp;I&nbsp;simply&nbsp;run&nbsp;&quot;rabbitmqctl&nbsp;stop_app&quot;&nbsp;for&nbsp;one&nbsp;of&nbsp;the&nbsp;nodes,&nbsp;followed&nbsp;by&nbsp;running&nbsp;&quot;rabbitmqctl&nbsp;start_app&quot;&nbsp;on&nbsp;the&nbsp;same&nbsp;node.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;expected&nbsp;results&nbsp;is&nbsp;that&nbsp;the&nbsp;one&nbsp;broker&nbsp;should&nbsp;drop&nbsp;out&nbsp;of&nbsp;the&nbsp;cluster,&nbsp;then&nbsp;rejoin&nbsp;it.&nbsp;This&nbsp;is&nbsp;indeed&nbsp;what&nbsp;happens&nbsp;when&nbsp;I&nbsp;run&nbsp;against&nbsp;a&nbsp;broker&nbsp;that&nbsp;does&nbsp;*not*&nbsp;have&nbsp;the&nbsp;stats&nbsp;database&nbsp;(as&nbsp;shown&nbsp;by&nbsp;the&nbsp;Web&nbsp;UI).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;try&nbsp;this&nbsp;action&nbsp;on&nbsp;the&nbsp;node&nbsp;with&nbsp;the&nbsp;stats&nbsp;database,&nbsp;rabbitmqctl&nbsp;waits&nbsp;forever&nbsp;and&nbsp;I&nbsp;have&nbsp;to&nbsp;ctrl-c&nbsp;out.&nbsp;&amp;nbsp;If&nbsp;I&nbsp;then&nbsp;try&nbsp;&quot;rabbitmqctl&nbsp;stop&quot;,&nbsp;it&nbsp;errors&nbsp;out,&nbsp;saying&nbsp;that&nbsp;the&nbsp;node&nbsp;is&nbsp;down.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;only&nbsp;way&nbsp;I&nbsp;can&nbsp;get&nbsp;the&nbsp;cluster&nbsp;back&nbsp;up&nbsp;is&nbsp;to&nbsp;shut&nbsp;down&nbsp;the&nbsp;other&nbsp;two&nbsp;actively&nbsp;running&nbsp;nodes,&nbsp;then&nbsp;restart&nbsp;all&nbsp;three&nbsp;nodes.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Known&nbsp;issue?&nbsp;Something&nbsp;I'm&nbsp;overlooking?&nbsp;Searching&nbsp;online&nbsp;isn't&nbsp;turning&nbsp;up&nbsp;anything&nbsp;obvious.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Matt&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
