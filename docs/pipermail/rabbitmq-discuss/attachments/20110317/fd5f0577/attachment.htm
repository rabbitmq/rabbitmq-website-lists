<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;!--&nbsp;DIV&nbsp;{margin:0px;}&nbsp;--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;font-family:times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;font-size:10pt&quot;&gt;Matthew:&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;10pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;10pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;10pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;10pt;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,new&nbsp;york,times,serif;&nbsp;font-size:&nbsp;10pt;&quot;&gt;&amp;gt;&nbsp;one&nbsp;thing&nbsp;i&nbsp;found&nbsp;is&nbsp;broker&nbsp;always&nbsp;shows&nbsp;&quot;Memory&nbsp;limit&nbsp;set&nbsp;to&nbsp;1638MB.&quot;&nbsp;in&nbsp;the&nbsp;log.&amp;nbsp;&nbsp;We&nbsp;have&nbsp;16&nbsp;GB&nbsp;RAM&nbsp;so&nbsp;it&nbsp;should&nbsp;be&nbsp;40%&nbsp;of&nbsp;the&nbsp;RAM&nbsp;by&nbsp;default.&amp;nbsp;&nbsp;&nbsp;I&nbsp;will&nbsp;try&nbsp;to<br>
&nbsp;investigate&nbsp;more&nbsp;tomorrow.&lt;br&gt;&lt;br&gt;It&nbsp;turns&nbsp;out&nbsp;that&nbsp;I&nbsp;was&nbsp;running&nbsp;the&nbsp;broker&nbsp;using&nbsp;32&nbsp;bit&nbsp;binary,&nbsp;that&nbsp;is&nbsp;why&nbsp;the&nbsp;memory&nbsp;limit&nbsp;is&nbsp;40%&nbsp;*&nbsp;4GB&nbsp;=&nbsp;1.6&nbsp;GB.&amp;nbsp;&nbsp;the&nbsp;broker&nbsp;would&nbsp;crash&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;than&nbsp;50&nbsp;GB&nbsp;of&nbsp;messages&nbsp;in&nbsp;1000&nbsp;queues.&amp;nbsp;&nbsp;When&nbsp;this&nbsp;happened,&nbsp;the&amp;nbsp;&nbsp;memory&nbsp;usage&nbsp;reached&nbsp;4&nbsp;GB.&lt;br&gt;If&nbsp;I&nbsp;run&nbsp;the&nbsp;broker&nbsp;using&nbsp;64&nbsp;bit,&amp;nbsp;&nbsp;it&nbsp;does&nbsp;not&nbsp;crash&nbsp;because&nbsp;it&nbsp;could&nbsp;get&nbsp;more&nbsp;than&nbsp;6&nbsp;GB&nbsp;of&nbsp;memory.&amp;nbsp;&amp;nbsp;&nbsp;It&nbsp;was&nbsp;able&nbsp;to&nbsp;consume&nbsp;all&nbsp;the&nbsp;messages&nbsp;at&nbsp;rate&nbsp;of&nbsp;100-200&nbsp;MB/sec.&lt;br&gt;&lt;br&gt;Thanks.&lt;br&gt;&lt;br&gt;-alex&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;&lt;/html&gt;
</tt>
