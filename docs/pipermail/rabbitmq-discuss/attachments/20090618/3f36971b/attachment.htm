<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Suhail,&lt;br&gt;<br>
&lt;br&gt;<br>
Suhail&nbsp;Doshi&nbsp;wrote:<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:376f3e6f0906171126j6ec132f3ged75c33c7c6e45c9@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;Hey&nbsp;Ben,<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;My&nbsp;name&nbsp;is&nbsp;Suhail,&nbsp;I&nbsp;am&nbsp;having&nbsp;a&nbsp;bit&nbsp;of&nbsp;trouble&nbsp;with&nbsp;the&nbsp;erlang<br>
client&nbsp;lib&nbsp;for&nbsp;rabbitmq,&nbsp;for&nbsp;some&nbsp;reason&nbsp;my&nbsp;code&nbsp;simply&nbsp;just&nbsp;halts&nbsp;at<br>
the&nbsp;amqp_connection:start()&nbsp;phase:&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;-module(metrics_queue).&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;-author('Suhail&nbsp;Doshi&nbsp;&amp;lt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;mailto:suhail@mixpanel.com&quot;&nbsp;target=&quot;_blank&quot;&gt;suhail@mixpanel.com&lt;/a&gt;&amp;gt;').&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;-export([amqp_lifecycle/0,&nbsp;send_message/5,&nbsp;log/2]).&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;-include_lib(&quot;rabbitmq-erlang-client/rabbitmq_server/include/rabbit.hrl&quot;).&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;-include_lib(&quot;rabbitmq-erlang-client/rabbitmq_server/include/rabbit_framing.hrl&quot;).&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;-include(&quot;rabbitmq-erlang-client/include/amqp_client.hrl&quot;).&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;-record(rabbit_info,&nbsp;{channel,&nbsp;ticket,&nbsp;exchange,&nbsp;routing_key}).&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;amqp_lifecycle()&nbsp;-&amp;gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;User&nbsp;=&nbsp;Password&nbsp;=&nbsp;&quot;mixpanel&quot;,&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Realm&nbsp;=&nbsp;&amp;lt;&amp;lt;&quot;mixpanel&quot;&amp;gt;&amp;gt;,&nbsp;%%&nbsp;virtual_host&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;log(&quot;test&quot;,&nbsp;&quot;state-1&quot;),&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Connection&nbsp;=&nbsp;amqp_connection:start(User,&nbsp;Password,<br>
&quot;127.0.0.1&quot;),&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;log(&quot;test&quot;,&nbsp;&quot;state-2&quot;),&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Channel&nbsp;=&nbsp;amqp_connection:open_channel(Connection),&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Access&nbsp;=&nbsp;#'access.request'{&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;realm&nbsp;=&nbsp;Realm,&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;exclusive&nbsp;=&nbsp;false,&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;passive&nbsp;=&nbsp;true,&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;active&nbsp;=&nbsp;true,&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;write&nbsp;=&nbsp;true,&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;read&nbsp;=&nbsp;true&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;},&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;I&nbsp;added&nbsp;you&nbsp;on&nbsp;gchat&nbsp;if&nbsp;you&nbsp;have&nbsp;any&nbsp;time&nbsp;to&nbsp;talk.&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;anything&nbsp;in&nbsp;the&nbsp;server&nbsp;log?&nbsp;Can&nbsp;you&nbsp;supply&nbsp;some&nbsp;details&nbsp;about<br>
your&nbsp;environment&nbsp;and&nbsp;the&nbsp;versions&nbsp;of&nbsp;the&nbsp;client&nbsp;and&nbsp;server&nbsp;you&nbsp;are<br>
using?&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;you're&nbsp;using&nbsp;the&nbsp;a&nbsp;deprecated&nbsp;API&nbsp;-&nbsp;realms&nbsp;have&nbsp;been&nbsp;removed&nbsp;from<br>
the&nbsp;spec.&lt;br&gt;<br>
&lt;br&gt;<br>
I'm&nbsp;posting&nbsp;this&nbsp;to&nbsp;the&nbsp;Rabbit&nbsp;list&nbsp;-&nbsp;this&nbsp;is&nbsp;the&nbsp;most&nbsp;appropriate<br>
place&nbsp;to&nbsp;get&nbsp;help&nbsp;from&nbsp;the&nbsp;community.&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Ben&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
