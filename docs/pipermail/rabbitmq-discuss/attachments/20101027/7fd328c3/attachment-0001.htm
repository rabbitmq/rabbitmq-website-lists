<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Emile,&lt;br&gt;&lt;br&gt;Thank&nbsp;you&nbsp;very&nbsp;much,&nbsp;your&nbsp;response&nbsp;is&nbsp;much&nbsp;appreciated.&nbsp;It&amp;#39;s&nbsp;great&nbsp;to&nbsp;know&nbsp;we&nbsp;can&nbsp;expect&nbsp;to&nbsp;see&nbsp;this&nbsp;option&nbsp;(in&nbsp;the&nbsp;near&nbsp;future?).&lt;br&gt;&lt;br&gt;As&nbsp;a&nbsp;side&nbsp;note:&nbsp;I&nbsp;would&nbsp;have&nbsp;been&nbsp;able&nbsp;to&nbsp;implement&nbsp;the&nbsp;first&nbsp;option&nbsp;you&nbsp;suggested,&nbsp;except&nbsp;that&nbsp;I&nbsp;work&nbsp;with&nbsp;Spring&nbsp;AMQP.&nbsp;It&amp;#39;s&nbsp;impossible&nbsp;to&nbsp;pass&nbsp;on&nbsp;a&nbsp;custom&nbsp;ConnectionFactory&nbsp;instead&nbsp;of&nbsp;rabbit&amp;#39;s&nbsp;own&nbsp;to&nbsp;it&nbsp;due&nbsp;to&nbsp;the&nbsp;lack&nbsp;of&nbsp;an&nbsp;interface.&nbsp;If&nbsp;rabbit&amp;#39;s&nbsp;ConnectionFactory&nbsp;was&nbsp;an&nbsp;interface,&nbsp;Spring&nbsp;AMQP&nbsp;(and&nbsp;other&nbsp;frameworks)&nbsp;could&nbsp;use&nbsp;that&nbsp;interface&nbsp;instead&nbsp;of&nbsp;the&nbsp;direct&nbsp;implementation,&nbsp;thus,&nbsp;allowing&nbsp;framework&nbsp;users&nbsp;to&nbsp;pass&nbsp;on&nbsp;custom&nbsp;connection&nbsp;factories.&lt;br&gt;<br>
<br>
&lt;br&gt;Have&nbsp;a&nbsp;great&nbsp;day.&lt;br&gt;&lt;br&gt;Best&nbsp;Regards,&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;27,&nbsp;2010&nbsp;at&nbsp;1:40&nbsp;PM,&nbsp;Emile&nbsp;Joubert&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;br&gt;<br>
Hi&nbsp;again&nbsp;Amr,&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
On&nbsp;27/10/10&nbsp;12:01,&nbsp;Emile&nbsp;Joubert&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hi&nbsp;Amr,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;23/10/10&nbsp;19:20,&nbsp;Amr&nbsp;Mostafa&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;I&amp;#39;ve&nbsp;been&nbsp;searching&nbsp;around&nbsp;for&nbsp;a&nbsp;way&nbsp;to&nbsp;specify&nbsp;a&nbsp;connect&nbsp;timeout&nbsp;in&nbsp;the&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Java&nbsp;client,&nbsp;but&nbsp;couldn&amp;#39;t&nbsp;find&nbsp;an&nbsp;easy&nbsp;way&nbsp;to&nbsp;do&nbsp;that.&nbsp;There&nbsp;is&nbsp;one&nbsp;way,&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;which&nbsp;is&nbsp;by&nbsp;extending&nbsp;ConnectionFactory&nbsp;with&nbsp;a&nbsp;custom&nbsp;createFrameHandler&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;method,&nbsp;but&nbsp;that&nbsp;doesn&amp;#39;t&nbsp;work&nbsp;with&nbsp;my&nbsp;case&nbsp;since&nbsp;I&amp;#39;m&nbsp;using&nbsp;Spring&nbsp;AMQP&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;support&nbsp;on&nbsp;top&nbsp;of&nbsp;the&nbsp;client&nbsp;API.&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;It&nbsp;would&nbsp;be&nbsp;very&nbsp;useful&nbsp;to&nbsp;add&nbsp;an&nbsp;option&nbsp;for&nbsp;that&nbsp;in&nbsp;the&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;ConnectionFactory&nbsp;which,&nbsp;if&nbsp;specified,&nbsp;would&nbsp;be&nbsp;passed&nbsp;to&nbsp;the&nbsp;socket&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;connect&nbsp;call.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;You&nbsp;can&nbsp;also&nbsp;set&nbsp;socket&nbsp;options&nbsp;by&nbsp;overriding&lt;br&gt;<br>
&amp;gt;&nbsp;ConnectionFactory.configureSocket().&nbsp;By&nbsp;default&nbsp;this&nbsp;hook&nbsp;disables&lt;br&gt;<br>
&amp;gt;&nbsp;Nagle&amp;#39;s&nbsp;algorithm,&nbsp;but&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;set&nbsp;the&nbsp;timeout&nbsp;as&nbsp;well&lt;br&gt;<br>
&amp;gt;&nbsp;(socket.setSoTimeout()).&nbsp;Even&nbsp;when&nbsp;using&nbsp;Spring&nbsp;AMQP&nbsp;you&nbsp;should&nbsp;be&nbsp;able&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;specify&nbsp;your&nbsp;own&nbsp;ConnectionFactory&nbsp;that&nbsp;inherits&nbsp;from&nbsp;the&nbsp;existing&nbsp;one.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;My&nbsp;previous&nbsp;advice&nbsp;won&amp;#39;t&nbsp;work,&nbsp;because&nbsp;SO_TIMEOUT&nbsp;doesn&amp;#39;t&nbsp;affect&nbsp;the&lt;br&gt;<br>
connection&nbsp;timeout.&nbsp;Instead&nbsp;of&nbsp;overriding&nbsp;configureSocket(),&nbsp;you&nbsp;need&nbsp;to&lt;br&gt;<br>
override&nbsp;createFrameHandler().&nbsp;The&nbsp;call&nbsp;to&nbsp;socket.connect(addr)&nbsp;needs&nbsp;to&lt;br&gt;<br>
be&nbsp;changed&nbsp;to&nbsp;the&nbsp;2-parameter&nbsp;version&nbsp;that&nbsp;accepts&nbsp;a&nbsp;connection&nbsp;timeout.&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;option&nbsp;would&nbsp;be&nbsp;to&nbsp;supply&nbsp;your&nbsp;own&nbsp;SocketFactory&nbsp;that&nbsp;supplies&lt;br&gt;<br>
sockets&nbsp;that&nbsp;override&nbsp;connect().&lt;br&gt;<br>
&lt;br&gt;<br>
Given&nbsp;the&nbsp;difficulty&nbsp;of&nbsp;both&nbsp;these&nbsp;options&nbsp;we&nbsp;will&nbsp;look&nbsp;at&nbsp;extending&nbsp;the&lt;br&gt;<br>
ConnectionFactory&nbsp;API&nbsp;to&nbsp;make&nbsp;this&nbsp;simpler,&nbsp;as&nbsp;you&nbsp;suggested.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Emile&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Amr&nbsp;Mostafa&lt;br&gt;Egypt&nbsp;Development&nbsp;Center&lt;br&gt;Member&nbsp;of&nbsp;NTG&lt;br&gt;Mobile:&nbsp;+(2012)1700502&lt;br&gt;Office:&nbsp;+(202)24052355/6&nbsp;-&nbsp;Ext.:&nbsp;2005&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
