<tt>
Hi&nbsp;all,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;rabbit&nbsp;server&nbsp;on&nbsp;single&nbsp;dedicated&nbsp;CentOS&nbsp;machine&nbsp;(Quad&nbsp;Core&nbsp;with&nbsp;16Gb&nbsp;RAM)&nbsp;connected&nbsp;to&nbsp;1Gbit&nbsp;LAN.&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;many&nbsp;queues&nbsp;running,&nbsp;but&nbsp;total&nbsp;number&nbsp;of&nbsp;messages&nbsp;is&nbsp;not&nbsp;very&nbsp;high&nbsp;for&nbsp;such&nbsp;a&nbsp;machine.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;is&nbsp;following:&lt;/div&gt;&lt;div&gt;1)&nbsp;I&nbsp;connect&nbsp;client&nbsp;A&nbsp;to&nbsp;some&nbsp;queue&nbsp;(with&nbsp;many&nbsp;many&nbsp;messages&nbsp;ready)&nbsp;with&nbsp;some&nbsp;routing&nbsp;key&nbsp;-&nbsp;it&nbsp;processes&nbsp;150&nbsp;messages&nbsp;per&nbsp;sec&nbsp;(its&nbsp;limit).&lt;/div&gt;&lt;div&gt;2)&nbsp;I&nbsp;connect&nbsp;another&nbsp;client&nbsp;A&nbsp;in&nbsp;parallel&nbsp;on&nbsp;identical&nbsp;server&nbsp;to&nbsp;same&nbsp;queue&nbsp;with&nbsp;same&nbsp;routing&nbsp;key.&nbsp;Now&nbsp;I&nbsp;have&nbsp;2&nbsp;identical&nbsp;consumers&nbsp;on&nbsp;same&nbsp;queue&nbsp;and&nbsp;messages&nbsp;are&nbsp;distributed&nbsp;on&nbsp;round&nbsp;robin &lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;manner,&nbsp;but&nbsp;somehow&nbsp;second&nbsp;unit&nbsp;receives&nbsp;only&nbsp;50&nbsp;messages&nbsp;per&nbsp;sec. &lt;/div&gt;&lt;div&gt;3)&nbsp;If&nbsp;I&nbsp;disconnect&nbsp;A1,&nbsp;A2&nbsp;starts&nbsp;working&nbsp;normally.&nbsp;If&nbsp;I&nbsp;connect&nbsp;A1&nbsp;back&nbsp;it&nbsp;becomes&nbsp;a&nbsp;slow&nbsp;node.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;model&nbsp;is&nbsp;TOPIC&nbsp;with acknowledgments.&lt;/div&gt;<br>
&lt;div&gt;Attached&nbsp;screenshots&nbsp;from&nbsp;manager&nbsp;and&nbsp;top&nbsp;command&nbsp;on&nbsp;rabbit&nbsp;machine.&lt;/div&gt;&lt;div&gt;Did&nbsp;anyone&nbsp;experience&nbsp;similar&nbsp;problem? &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot,&lt;/div&gt;&lt;div&gt; &nbsp; Pavel&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;div&nbsp;class=&quot;highlight&quot;&nbsp;style=&quot;min-width:120px;font-size:14px;text-align:center;padding:10px;margin:0px&nbsp;20px&nbsp;0px&nbsp;0px;color:rgb(136,136,136);border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;float:left;background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)));border:1px&nbsp;solid&nbsp;rgb(224,224,224);font-family:Verdana,sans-serif&quot;&gt;<br>
Publish&lt;strong&nbsp;style=&quot;font-size:2em;display:block;color:rgb(68,68,68);font-weight:normal&quot;&gt;148&lt;/strong&gt;msg/s&lt;/div&gt;&lt;div&nbsp;class=&quot;highlight&quot;&nbsp;style=&quot;min-width:120px;font-size:14px;text-align:center;padding:10px;margin:0px&nbsp;20px&nbsp;0px&nbsp;0px;color:rgb(136,136,136);border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;float:left;background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)));border:1px&nbsp;solid&nbsp;rgb(224,224,224);font-family:Verdana,sans-serif&quot;&gt;<br>
Deliver&lt;strong&nbsp;style=&quot;font-size:2em;display:block;color:rgb(68,68,68);font-weight:normal&quot;&gt;744&lt;/strong&gt;msg/s&lt;/div&gt;&lt;div&nbsp;class=&quot;highlight&quot;&nbsp;style=&quot;min-width:120px;font-size:14px;text-align:center;padding:10px;margin:0px&nbsp;20px&nbsp;0px&nbsp;0px;color:rgb(136,136,136);border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;float:left;background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)));border:1px&nbsp;solid&nbsp;rgb(224,224,224);font-family:Verdana,sans-serif&quot;&gt;<br>
Redelivered&lt;strong&nbsp;style=&quot;font-size:2em;display:block;color:rgb(68,68,68);font-weight:normal&quot;&gt;0.00&lt;/strong&gt;msg/s&lt;/div&gt;&lt;div&nbsp;class=&quot;highlight&quot;&nbsp;style=&quot;min-width:120px;font-size:14px;text-align:center;padding:10px;margin:0px&nbsp;20px&nbsp;0px&nbsp;0px;color:rgb(136,136,136);border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;float:left;background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)));border:1px&nbsp;solid&nbsp;rgb(224,224,224);font-family:Verdana,sans-serif&quot;&gt;<br>
Acknowledge&lt;strong&nbsp;style=&quot;font-size:2em;display:block;color:rgb(68,68,68);font-weight:normal&quot;&gt;746&lt;/strong&gt;msg/s&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;table&nbsp;class=&quot;list&quot;&nbsp;style=&quot;border-collapse:collapse;border-width:1px;border-bottom-style:solid;border-bottom-color:rgb(204,204,204);margin-bottom:0px;font-family:Verdana,sans-serif&quot;&gt;&lt;tbody&gt;&lt;tr&gt;<br>
&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;Name&lt;/th&gt;&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;<br>
File&nbsp;descriptors &lt;span&nbsp;class=&quot;help&quot;&nbsp;id=&quot;file-descriptors&quot;&nbsp;style=&quot;color:rgb(136,136,136)&quot;&gt;(?)&lt;/span&gt;&lt;sub&nbsp;style=&quot;display:block;font-size:0.8em;color:rgb(136,136,136)&quot;&gt;(used&nbsp;/&nbsp;available)&lt;/sub&gt;&lt;/th&gt;&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;<br>
Socket&nbsp;descriptors &lt;span&nbsp;class=&quot;help&quot;&nbsp;id=&quot;socket-descriptors&quot;&nbsp;style=&quot;color:rgb(136,136,136)&quot;&gt;(?)&lt;/span&gt;&lt;sub&nbsp;style=&quot;display:block;font-size:0.8em;color:rgb(136,136,136)&quot;&gt;(used&nbsp;/&nbsp;available)&lt;/sub&gt;&lt;/th&gt;&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;<br>
Erlang&nbsp;processes&lt;sub&nbsp;style=&quot;display:block;font-size:0.8em;color:rgb(136,136,136)&quot;&gt;(used&nbsp;/&nbsp;available)&lt;/sub&gt;&lt;/th&gt;&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;<br>
Memory&lt;/th&gt;&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;Disk&nbsp;space&lt;/th&gt;&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;<br>
Uptime&lt;/th&gt;&lt;th&nbsp;style=&quot;font-weight:normal;font-size:12px;line-height:17px;padding:4px;vertical-align:top;min-width:5em;width:auto;border:1px&nbsp;solid&nbsp;rgb(204,204,204);text-align:center&quot;&gt;Type&lt;/th&gt;&lt;/tr&gt;&lt;tr&nbsp;class=&quot;alt1&quot;&gt;&lt;td&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
&lt;br&gt;&lt;/td&gt;&lt;td&nbsp;class=&quot;status&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;text-align:center;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
&lt;div&nbsp;class=&quot;green&quot;&nbsp;style=&quot;padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:rgb(144,238,144)&quot;&gt;297&nbsp;/&nbsp;1024&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;class=&quot;status&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;text-align:center;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
&lt;div&nbsp;class=&quot;green&quot;&nbsp;style=&quot;padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:rgb(144,238,144)&quot;&gt;135&nbsp;/&nbsp;829&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;class=&quot;status&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;text-align:center;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
&lt;div&nbsp;class=&quot;green&quot;&nbsp;style=&quot;padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:rgb(144,238,144)&quot;&gt;16815&nbsp;/&nbsp;1048576&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;class=&quot;status&quot;&nbsp;style=&quot;font-size:12px;line-height:17px;font-family:Verdana,sans-serif;padding:4px;text-align:center;vertical-align:top;min-width:5em;width:auto;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);border-right-width:1px;border-right-style:solid;border-right-color:rgb(204,204,204);background-image:-webkit-gradient(linear,0%&nbsp;0%,0%&nbsp;100%,from(rgb(240,240,240)),to(rgb(224,224,224)))&quot;&gt;<br>
&lt;div&nbsp;class=&quot;green&quot;&nbsp;style=&quot;padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;background-color:rgb(144,238,144)&quot;&gt;826.6MB&lt;/div&gt;&lt;sub&nbsp;style=&quot;display:block;font-size:0.8em;color:rgb(136,136,136)&quot;&gt;6.2GB&nbsp;high&nbsp;waterm&lt;/sub&gt;&lt;/td&gt;<br>
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Tasks:&nbsp;598&nbsp;total,&nbsp; &nbsp;1&nbsp;running,&nbsp;597&nbsp;sleeping,&nbsp; &nbsp;0&nbsp;stopped,&nbsp; &nbsp;0&nbsp;zombie&lt;/div&gt;&lt;div&gt;Cpu0&nbsp; :&nbsp;29.8%us,&nbsp; 6.0%sy,&nbsp; 0.0%ni,&nbsp;64.2%id,&nbsp; 0.0%wa,&nbsp; 0.0%hi,&nbsp; 0.0%si,&nbsp; 0.0%st&lt;/div&gt;<br>
&lt;div&gt;Cpu1&nbsp; :&nbsp;33.2%us,&nbsp; 5.6%sy,&nbsp; 0.0%ni,&nbsp;61.1%id,&nbsp; 0.0%wa,&nbsp; 0.0%hi,&nbsp; 0.0%si,&nbsp; 0.0%st&lt;/div&gt;&lt;div&gt;Cpu2&nbsp; :&nbsp;34.7%us,&nbsp; 6.1%sy,&nbsp; 0.0%ni,&nbsp;59.3%id,&nbsp; 0.0%wa,&nbsp; 0.0%hi,&nbsp; 0.0%si,&nbsp; 0.0%st&lt;/div&gt;&lt;div&gt;Cpu3&nbsp; :&nbsp;30.1%us,&nbsp; 4.7%sy,&nbsp; 0.0%ni,&nbsp;64.5%id,&nbsp; 0.7%wa,&nbsp; 0.0%hi,&nbsp; 0.0%si,&nbsp; 0.0%st&lt;/div&gt;<br>
&lt;div&gt;Cpu4&nbsp; :&nbsp;29.7%us,&nbsp; 5.3%sy,&nbsp; 0.0%ni,&nbsp;65.0%id,&nbsp; 0.0%wa,&nbsp; 0.0%hi,&nbsp; 0.0%si,&nbsp; 0.0%st&lt;/div&gt;&lt;div&gt;Cpu5&nbsp; :&nbsp;34.2%us,&nbsp; 6.2%sy,&nbsp; 0.0%ni,&nbsp;56.8%id,&nbsp; 0.0%wa,&nbsp; 0.0%hi,&nbsp; 2.7%si,&nbsp; 0.0%st&lt;/div&gt;&lt;div&gt;Cpu6&nbsp; :&nbsp;19.9%us,&nbsp; 3.4%sy,&nbsp; 0.0%ni,&nbsp;76.4%id,&nbsp; 0.0%wa,&nbsp; 0.0%hi,&nbsp; 0.3%si,&nbsp; 0.0%st&lt;/div&gt;<br>
&lt;div&gt;Cpu7&nbsp; :&nbsp; 2.3%us,&nbsp; 1.0%sy,&nbsp; 0.0%ni,&nbsp;96.7%id,&nbsp; 0.0%wa,&nbsp; 0.0%hi,&nbsp; 0.0%si,&nbsp; 0.0%st&lt;/div&gt;&lt;div&gt;Mem:&nbsp; 16217336k&nbsp;total,&nbsp;13285852k&nbsp;used,&nbsp; 2931484k&nbsp;free,&nbsp; &nbsp;191072k&nbsp;buffers&lt;/div&gt;&lt;div&gt;Swap:&nbsp; 2097144k&nbsp;total,&nbsp; &nbsp; &nbsp;4904k&nbsp;used,&nbsp; 2092240k&nbsp;free,&nbsp;10533540k&nbsp;cached&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; PID&nbsp;USER&nbsp; &nbsp; &nbsp; PR&nbsp; NI&nbsp; VIRT&nbsp; RES&nbsp; SHR&nbsp;S&nbsp;%CPU&nbsp;%MEM&nbsp; &nbsp; TIME+&nbsp; COMMAND&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt;<br>
19404&nbsp;rabbitmq&nbsp; 20&nbsp; &nbsp;0&nbsp;3551m&nbsp;806m&nbsp;2480&nbsp;S&nbsp;254.6&nbsp; 5.1&nbsp; 21417:07&nbsp;beam.smp&nbsp;  &lt;/div&gt;&lt;/div&gt;<br>

</tt>
