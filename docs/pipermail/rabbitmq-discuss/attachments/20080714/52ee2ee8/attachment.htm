<tt>
The&nbsp;amqp0-8.pdf&nbsp;spec&nbsp;states:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;12.0px&nbsp;Helvetica;&nbsp;min-height:&nbsp;14.0px&quot;&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;10.0px&nbsp;Helvetica&quot;&gt;The&amp;nbsp;content&amp;nbsp;body&amp;nbsp;payload&amp;nbsp;is&amp;nbsp;an&amp;nbsp;opaque&amp;nbsp;binary&amp;nbsp;block&amp;nbsp;followed&amp;nbsp;by&amp;nbsp;a&amp;nbsp;frame&amp;nbsp;end&amp;nbsp;octet:&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;+-----------------------+&nbsp;+-----------+&lt;span&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;|&nbsp;Opaque&nbsp;binary&nbsp;payload&nbsp;|&nbsp;|&nbsp;frame-end&nbsp;|&lt;span&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;+-----------------------+&nbsp;+-----------+&lt;span&nbsp;style=&quot;font:&nbsp;12.0px&nbsp;Helvetica&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&quot;&gt;However,&nbsp;sending&nbsp;the&nbsp;extra&nbsp;frame-end&nbsp;octet&nbsp;with&nbsp;the&nbsp;content&nbsp;causes&nbsp;rabbitmq&nbsp;to&nbsp;get&nbsp;&amp;quot;stuck&amp;quot;.&nbsp;In&nbsp;fact,&nbsp;this&nbsp;occurs&nbsp;anytime&nbsp;rabbitmq&nbsp;reads&nbsp;more&nbsp;content&nbsp;data&nbsp;than&nbsp;it&nbsp;is&nbsp;expecting.&nbsp;Here&nbsp;is&nbsp;a&nbsp;naive&nbsp;patch&nbsp;to&nbsp;ignore&nbsp;extra&nbsp;content&nbsp;in&nbsp;the&nbsp;body&nbsp;frame:&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;diff&nbsp;-r&nbsp;2453e5783900&nbsp;src/rabbit_framing_channel.erl&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;<br>
---&nbsp;a/src/rabbit_framing_channel.erl&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Tue&nbsp;Jul&nbsp;08&nbsp;12:16:59&nbsp;2008&nbsp;+0100&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;+++&nbsp;b/src/rabbit_framing_channel.erl&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Mon&nbsp;Jul&nbsp;14&nbsp;16:31:03&nbsp;2008&nbsp;-0700&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;@@&nbsp;-101,6&nbsp;+101,10&nbsp;@@&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&amp;nbsp;collect_content_payload(_ChannelPid,&nbsp;0,&nbsp;Acc)&nbsp;-&amp;gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Acc;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;+collect_content_payload(_ChannelPid,&nbsp;RemainingByteCount,&nbsp;Acc)&nbsp;when&nbsp;RemainingByteCount&nbsp;&amp;lt;&nbsp;0&nbsp;-&amp;gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Content&nbsp;=&nbsp;list_to_binary(Acc),&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{Ret,&nbsp;_}&nbsp;=&nbsp;split_binary(Content,&nbsp;size(Content)&nbsp;+&nbsp;RemainingByteCount),&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;[Ret];&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&amp;nbsp;collect_content_payload(ChannelPid,&nbsp;RemainingByteCount,&nbsp;Acc)&nbsp;-&amp;gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;case&nbsp;read_frame(ChannelPid)&nbsp;of&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{content_body,&nbsp;FragmentBin}&nbsp;-&amp;gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;9.0px&nbsp;Monaco&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&quot;&gt;&amp;nbsp;&amp;nbsp;Aman&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;<br>

</tt>
