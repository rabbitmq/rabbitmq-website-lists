<tt>
On&nbsp;27&nbsp;October&nbsp;2011&nbsp;12:23,&nbsp;Mario&nbsp;Leyton&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mleyton@niclabs.cl&quot;&gt;mleyton@niclabs.cl&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
If&nbsp;there&nbsp;are&nbsp;no&nbsp;headers,&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;matter&nbsp;why,&nbsp;a&nbsp;good&nbsp;API&nbsp;should&nbsp;always&lt;br&gt;<br>
return&nbsp;an&nbsp;empty&nbsp;Map&nbsp;o&nbsp;List&nbsp;and&nbsp;not&nbsp;null&nbsp;because&nbsp;it&nbsp;contaminates&nbsp;the&nbsp;API&lt;br&gt;<br>
user&amp;#39;s&nbsp;code.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;It&nbsp;may&nbsp;do&nbsp;so&nbsp;for&nbsp;Java.&nbsp;Other&nbsp;languages&nbsp;do&nbsp;things&nbsp;like&nbsp;this&nbsp;differently.&nbsp;AMQP&nbsp;is&nbsp;language-neutral,&nbsp;and&nbsp;has&nbsp;its&nbsp;own&nbsp;semantics.&nbsp;The&nbsp;API&nbsp;should&nbsp;make&nbsp;it&nbsp;easy&nbsp;for&nbsp;the&nbsp;user&nbsp;to&nbsp;work&nbsp;with&nbsp;AMQP&nbsp;semantics,&nbsp;and&nbsp;should&nbsp;not,&nbsp;for&nbsp;example,&nbsp;lull&nbsp;the&nbsp;user&nbsp;into&nbsp;a&nbsp;false&nbsp;sense&nbsp;that&nbsp;all&nbsp;the&nbsp;world&nbsp;is&nbsp;a&nbsp;Java&nbsp;program.&nbsp;If&nbsp;a&nbsp;sender&nbsp;sent&nbsp;a&nbsp;message&nbsp;with&nbsp;a&nbsp;missing&nbsp;username&nbsp;header,&nbsp;for&nbsp;instance,&nbsp;that&nbsp;should&nbsp;be&nbsp;hard&nbsp;to&nbsp;misinterpret&nbsp;as&nbsp;the&nbsp;sender&nbsp;having&nbsp;sent&nbsp;a&nbsp;message&nbsp;with&nbsp;an&nbsp;empty-string&nbsp;username&nbsp;header.&nbsp;IMO,&nbsp;the&nbsp;same&nbsp;applies&nbsp;to&nbsp;maps,&nbsp;integers,&nbsp;booleans,&nbsp;timestamps&nbsp;etc.&nbsp;(I&amp;#39;m&nbsp;not&nbsp;even&nbsp;sure&nbsp;what&nbsp;a&nbsp;sensible&nbsp;&amp;quot;default&amp;quot;/&amp;quot;missing&amp;quot;&nbsp;value&nbsp;for&nbsp;a&nbsp;timestamp&nbsp;would&nbsp;be.)&lt;br&gt;<br>
&lt;br&gt;You&amp;#39;re&nbsp;right&nbsp;that&nbsp;we&nbsp;could&nbsp;do&nbsp;what&nbsp;the&nbsp;C&nbsp;library&nbsp;does,&nbsp;and&nbsp;use&nbsp;a&nbsp;separate&nbsp;flag,&nbsp;but&nbsp;I&nbsp;believe&nbsp;this&nbsp;would&nbsp;make&nbsp;it&nbsp;more&nbsp;likely&nbsp;that&nbsp;subtle&nbsp;interoperability&nbsp;issues&nbsp;would&nbsp;arise.&nbsp;At&nbsp;least&nbsp;with&nbsp;the&nbsp;NPE&nbsp;you&nbsp;get&nbsp;rapid&nbsp;feedback&nbsp;that&nbsp;someone&nbsp;isn&amp;#39;t&nbsp;following&nbsp;the&nbsp;communication&nbsp;contract;&nbsp;either&nbsp;the&nbsp;local&nbsp;Java&nbsp;code,&nbsp;in&nbsp;which&nbsp;case&nbsp;adding&nbsp;a&nbsp;null&nbsp;check&nbsp;lets&nbsp;you&nbsp;conform&nbsp;to&nbsp;the&nbsp;language&nbsp;being&nbsp;spoken&nbsp;by&nbsp;the&nbsp;remote&nbsp;party,&nbsp;or&nbsp;the&nbsp;remote&nbsp;party&amp;#39;s&nbsp;code,&nbsp;in&nbsp;which&nbsp;case&nbsp;you&nbsp;can&nbsp;either&nbsp;choose&nbsp;to&nbsp;work&nbsp;around&nbsp;the&nbsp;difference&nbsp;locally&nbsp;or&nbsp;get&nbsp;the&nbsp;remote&nbsp;party&nbsp;to&nbsp;change.&nbsp;Papering&nbsp;over&nbsp;the&nbsp;difference&nbsp;at&nbsp;the&nbsp;API&nbsp;level&nbsp;masks&nbsp;the&nbsp;underlying&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;If&nbsp;you&nbsp;are&nbsp;working&nbsp;in&nbsp;an&nbsp;all-java&nbsp;environment,&nbsp;a&nbsp;good&nbsp;choice&nbsp;for&nbsp;your&nbsp;code&nbsp;might&nbsp;be&nbsp;to&nbsp;abstract&nbsp;away&nbsp;the&nbsp;difference&nbsp;between&nbsp;a&nbsp;missing&nbsp;map&nbsp;and&nbsp;an&nbsp;empty&nbsp;map.&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt; &nbsp;Tony&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
