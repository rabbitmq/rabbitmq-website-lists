<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;&lt;div&gt;&gt;&nbsp;Date:&nbsp;Wed,&nbsp;11&nbsp;Dec&nbsp;2013&nbsp;10:32:00&nbsp;+0000&lt;br&gt;&gt;&nbsp;From:&nbsp;simon@rabbitmq.com&lt;br&gt;&gt;&nbsp;To:&nbsp;rabbitmq-discuss@lists.rabbitmq.com&lt;br&gt;&gt;&nbsp;CC:&nbsp;joshua__lim@hotmail.com&lt;br&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;How&nbsp;to&nbsp;create&nbsp;a&nbsp;rabbitmq&nbsp;cluster&nbsp;using&nbsp;existing&nbsp;application&nbsp;without&nbsp;losing&nbsp;existing&nbsp;data?&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;On&nbsp;11/12/13&nbsp;10:26,&nbsp;Joshua&nbsp;Lim&nbsp;wrote:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;find&nbsp;out&nbsp;if&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;create&nbsp;a&nbsp;rabbitmq&nbsp;cluster&lt;br&gt;&gt;&nbsp;&gt;&nbsp;for&nbsp;an&nbsp;existing&nbsp;production&nbsp;instance&nbsp;with&nbsp;data&nbsp;on&nbsp;it.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Yes.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;The&nbsp;reason&nbsp;is&lt;br&gt;&gt;&nbsp;&gt;&nbsp;because&nbsp;I'm&nbsp;starting&nbsp;with&nbsp;only&nbsp;1&nbsp;server&nbsp;for&nbsp;the&nbsp;start&nbsp;and&nbsp;would&nbsp;like&nbsp;to&lt;br&gt;&gt;&nbsp;&gt;&nbsp;expand&nbsp;to&nbsp;a&nbsp;2&nbsp;server&nbsp;cluster&nbsp;only&nbsp;in&nbsp;the&nbsp;future.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Which&nbsp;makes&nbsp;sense.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;What&nbsp;I&nbsp;did&nbsp;is:&lt;br&gt;&gt;&nbsp;&gt;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;1.&nbsp;Issue&nbsp;rabbitmqctl&nbsp;stop_app,&nbsp;rabbitmqctl&nbsp;reset,&nbsp;rabbitmqctl&nbsp;stop&nbsp;on&lt;br&gt;&gt;&nbsp;&gt;&nbsp;both&nbsp;nodes.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;rabbitmqctl&nbsp;reset&nbsp;is&nbsp;the&nbsp;culprit&nbsp;here&nbsp;-&nbsp;it&nbsp;will&nbsp;erase&nbsp;all&nbsp;information&nbsp;on&nbsp;&lt;br&gt;&gt;&nbsp;the&nbsp;node.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;2.&nbsp;Add&nbsp;auto-config&nbsp;to&nbsp;rabbitmq.config&nbsp;on&nbsp;both&nbsp;nodes:&nbsp;&nbsp;&nbsp;{cluster_nodes,&lt;br&gt;&gt;&nbsp;&gt;&nbsp;{['rabbit@existing-machine',&nbsp;'rabbit@new-machine'],&nbsp;disc}}&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Note&nbsp;that&nbsp;the&nbsp;auto-config&nbsp;lists&nbsp;nodes&nbsp;in&nbsp;an&nbsp;existing&nbsp;cluster&nbsp;that&nbsp;the&nbsp;&lt;br&gt;&gt;&nbsp;machine&nbsp;should&nbsp;attempt&nbsp;to&nbsp;contact&nbsp;when&nbsp;coming&nbsp;up&nbsp;from&nbsp;a&nbsp;new&nbsp;installation&nbsp;&lt;br&gt;&gt;&nbsp;(or&nbsp;post&nbsp;reset).&nbsp;And&nbsp;a&nbsp;standalone&nbsp;node&nbsp;is&nbsp;a&nbsp;cluster&nbsp;of&nbsp;size&nbsp;one.&lt;br&gt;&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&gt;&nbsp;So&nbsp;what&nbsp;you&nbsp;really&nbsp;wanted&nbsp;to&nbsp;do&nbsp;was:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;*&nbsp;Not&nbsp;touch&nbsp;existing-machine&lt;br&gt;&gt;&nbsp;*&nbsp;Add&nbsp;{cluster_nodes,&nbsp;{['rabbit@existing-machine'],&nbsp;disc}}&nbsp;to&nbsp;new-machine&lt;br&gt;&gt;&nbsp;*&nbsp;Reset&nbsp;new-machine&nbsp;if&nbsp;you've&nbsp;previously&nbsp;used&nbsp;RabbitMQ&nbsp;on&nbsp;it&lt;br&gt;&gt;&nbsp;*&nbsp;Start&nbsp;new-machine&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;pointers,&nbsp;this&nbsp;now&nbsp;works.&nbsp;&nbsp;:)&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;a&nbsp;bit&nbsp;confused&nbsp;by&nbsp;the&nbsp;3&nbsp;node&nbsp;example&nbsp;(see&nbsp;config&nbsp;below)&nbsp;mentioned&nbsp;in&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;http://www.rabbitmq.com/clustering.html&lt;/a&gt;&nbsp;&nbsp;That's&nbsp;why&nbsp;I&nbsp;put&nbsp;all&nbsp;the&nbsp;nodes&nbsp;into&nbsp;cluster_nodes&nbsp;field.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;{cluster_nodes,&nbsp;{['rabbit@rabbit1',&nbsp;'rabbit@rabbit2',&nbsp;'rabbit@rabbit3'],&nbsp;disc}},&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;How&nbsp;about&nbsp;the&nbsp;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;cluster_nodes&nbsp;configuration&nbsp;field&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;on&nbsp;existing&nbsp;machine&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;?&nbsp;&nbsp;I&nbsp;left&nbsp;it&nbsp;as&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;{cluster_nodes,&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&nbsp;{['rabbit@existing-machine',&nbsp;'rabbit@new-machine'],&nbsp;disc}}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;that&nbsp;the&nbsp;correct&nbsp;way?&nbsp;&nbsp;I&nbsp;need&nbsp;active-active&nbsp;ha.&nbsp;&nbsp;By&nbsp;the&nbsp;way,&nbsp;I've&nbsp;not&nbsp;gone&nbsp;into&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/ha.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/ha.html&lt;/a&gt;&nbsp;yet.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
