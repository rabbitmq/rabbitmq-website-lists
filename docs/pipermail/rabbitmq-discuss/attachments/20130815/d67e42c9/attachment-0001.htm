<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Again,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;all&nbsp;the&nbsp;above&nbsp;suggestions,&nbsp;I&nbsp;again&nbsp;try&nbsp;to&nbsp;do&nbsp;my&nbsp;tests&nbsp;with&nbsp;eye&nbsp;on&nbsp;disk&nbsp;usage,&nbsp;RAM&nbsp;usage&nbsp;and&nbsp;network&nbsp;bandwidth&nbsp;utilization.&nbsp;This&nbsp;has&nbsp;now&nbsp;lead&nbsp;to&nbsp;many&nbsp;more&nbsp;questions&nbsp;so&nbsp;could&nbsp;anyone&nbsp;please&nbsp;throw&nbsp;some&nbsp;light&nbsp;on&nbsp;them.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;I&nbsp;have&nbsp;a&nbsp;quite&nbsp;high&nbsp;bandwidth&nbsp;between&nbsp;my&nbsp;client&nbsp;(producer&nbsp;&amp;amp;&nbsp;receiver)&nbsp;and&nbsp;server.&nbsp;Its&nbsp;around&nbsp;9.2&nbsp;Gbps.&nbsp;I&nbsp;have&nbsp;confirmed&nbsp;this&nbsp;by&nbsp;running&nbsp;iperf&nbsp;utility.&nbsp;But&nbsp;the&nbsp;maximum&nbsp;bandwidth&nbsp;I&nbsp;can&nbsp;reach&nbsp;is&nbsp;only&nbsp;160&nbsp;mbps.&nbsp;(I&nbsp;have&nbsp;pika&nbsp;client&nbsp;and&nbsp;single&nbsp;rabbitmq&nbsp;DISK&nbsp;type)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)&nbsp;I&nbsp;then&nbsp;also&nbsp;took&nbsp;network&nbsp;traces&nbsp;using&nbsp;wireshark,&nbsp;and&nbsp;what&nbsp;I&nbsp;observed&nbsp;that&nbsp;the&nbsp;AMQP&nbsp;overhead&nbsp;was&nbsp;quite&nbsp;high&nbsp;then&nbsp;the&nbsp;actual&nbsp;payload.&nbsp;If&nbsp;I&nbsp;send&nbsp;100&nbsp;bytes&nbsp;of&nbsp;string&nbsp;then&nbsp;overhead&nbsp;is&nbsp;300&nbsp;bytes&nbsp;so&nbsp;for&nbsp;every&nbsp;message&nbsp;of&nbsp;100&nbsp;bytes&nbsp;I&nbsp;end&nbsp;up&nbsp;sending&nbsp;400&nbsp;bytes&nbsp;on&nbsp;wire. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Since&nbsp;I&nbsp;have&nbsp;publish&nbsp;confirm/ack&nbsp;enabled&nbsp;so&nbsp;I&nbsp;understand&nbsp;part&nbsp;of&nbsp;this&nbsp;but&nbsp;there&nbsp;is&nbsp;also&nbsp;content&nbsp;header&nbsp;and&nbsp;some&nbsp;overhead&nbsp;in&nbsp;content&nbsp;body&nbsp;as&nbsp;well. &lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;standard&nbsp;for&nbsp;most&nbsp;of&nbsp;the&nbsp;clients&nbsp;or&nbsp;its&nbsp;specific&nbsp;for&nbsp;pika-clients&nbsp;only&nbsp;? &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3)&nbsp;I&nbsp;then&nbsp;also&nbsp;try&nbsp;to&nbsp;observer&nbsp;how&nbsp;my&nbsp;system&nbsp;resources&nbsp;are&nbsp;used.&nbsp;I&nbsp;am&nbsp;new&nbsp;to&nbsp;this&nbsp;but&nbsp;after&nbsp;some&nbsp;googling&nbsp;I&nbsp;learnt&nbsp;a&nbsp;linux&nbsp;command&nbsp;&amp;#39;dstat&nbsp;-dmnsy&amp;#39;.&nbsp;This&nbsp;provides&nbsp;me&nbsp;disk&nbsp;usage,&nbsp;RAM&nbsp;usage,&nbsp;interrupts&nbsp;and&nbsp;context&nbsp;switches,&nbsp;network&nbsp;send/recev.&nbsp;What&nbsp;I&nbsp;observer&nbsp;that&nbsp;as&nbsp;I&nbsp;increase&nbsp;no&nbsp;of&nbsp;producer/receiver,&nbsp;compare&nbsp;to&nbsp;DISK&nbsp;and&nbsp;RAM&nbsp;usage,&nbsp;its&nbsp;interrupts&nbsp;and&nbsp;context&nbsp;switches,&nbsp;which&nbsp;increases&nbsp;rapidly. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;what&nbsp;does&nbsp;this&nbsp;really&nbsp;mean&nbsp;? &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;4)&nbsp;Also,&nbsp;after&nbsp;certain&nbsp;point&nbsp;the&nbsp;value&nbsp;under&nbsp;network&nbsp;send/receive&nbsp;field&nbsp;remains&nbsp;constant.&nbsp;Not&nbsp;sure&nbsp;what&nbsp;does&nbsp;this&nbsp;mean&nbsp;also&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;am&nbsp;pasting&nbsp;here&nbsp;one&nbsp;of&nbsp;the&nbsp;observed&nbsp;sample&nbsp;from&nbsp;dstat. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; mq10@mqserver10:~$&nbsp;sudo&nbsp;rabbitmqadmin&nbsp;list&nbsp;queues&nbsp;vhost&nbsp;name&nbsp;node&nbsp;messages&nbsp;message_stats.publish_details.rate&lt;/div&gt;&lt;div&gt;+-------+------+-----------------+----------+------------------------------------+&lt;/div&gt;<br>
&lt;div&gt;|&nbsp;vhost&nbsp;|&nbsp;name&nbsp;|&nbsp; &nbsp; &nbsp; node&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;messages&nbsp;|&nbsp;message_stats.publish_details.rate&nbsp;|&lt;/div&gt;&lt;div&gt;+-------+------+-----------------+----------+------------------------------------+&lt;/div&gt;&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;1&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;5&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;3380.4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;<br>
&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;2&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;3&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;3649.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;3&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;6&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;3402.4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;4&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;3450.8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;<br>
&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;5&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;3&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;3444.8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;+-------+------+-----------------+----------+------------------------------------+&lt;/div&gt;&lt;div&gt;mq10@mqserver10:~$&nbsp;dstat&nbsp;-dmnsy&lt;/div&gt;<br>
&lt;div&gt;-dsk/total-&nbsp;------memory-usage-----&nbsp;-net/total-&nbsp;----swap---&nbsp;---system--&lt;/div&gt;&lt;div&gt; read&nbsp; writ|&nbsp;used&nbsp; buff&nbsp; cach&nbsp; free|&nbsp;recv&nbsp; send|&nbsp;used&nbsp; free|&nbsp;int&nbsp; &nbsp;csw&lt;/div&gt;&lt;div&gt; 100k&nbsp;8974B|&nbsp;188M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 15k&nbsp;9759&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; 16k|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6363k&nbsp;4615k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;6590&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6666k&nbsp;4847k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;7846&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6293k&nbsp;4500k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 21k&nbsp;7518&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|7049k&nbsp;5121k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;5936&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;188M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|6947k&nbsp;5081k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;6309&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;188M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|6387k&nbsp;4741k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;7020&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;188M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|6482k&nbsp;4739k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;7094&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|5642k&nbsp;3976k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 18k&nbsp;7586&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6246k&nbsp;4487k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 21k&nbsp;7497&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6631k&nbsp;4827k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 21k&nbsp;5924&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6615k&nbsp;4722k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 21k&nbsp;5448&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|5677k&nbsp;4051k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 20k&nbsp;5757&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6007k&nbsp;4284k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 20k&nbsp;6581&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6983k&nbsp;5052k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5704&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6318k&nbsp;4539k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;6208&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6769k&nbsp;4862k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5952&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6334k&nbsp;4586k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;6518&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;191M&nbsp;25.7M&nbsp; 115M&nbsp;9671M|7019k&nbsp;5089k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5937&nbsp;^C&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; mq10@mqserver10:~$&nbsp;sudo&nbsp;rabbitmqadmin&nbsp;list&nbsp;queues&nbsp;vhost&nbsp;name&nbsp;node&nbsp;messages&nbsp;message_stats.publish_details.rate&lt;/div&gt;&lt;div&gt;+-------+------+-----------------+----------+------------------------------------+&lt;/div&gt;<br>
&lt;div&gt;|&nbsp;vhost&nbsp;|&nbsp;name&nbsp;|&nbsp; &nbsp; &nbsp; node&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;messages&nbsp;|&nbsp;message_stats.publish_details.rate&nbsp;|&lt;/div&gt;&lt;div&gt;+-------+------+-----------------+----------+------------------------------------+&lt;/div&gt;&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;1&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;3&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;2846.8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;<br>
&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;2&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;6&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;2894.2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;3&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;5&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;2950.2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;4&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;3&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;2931.8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;<br>
&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;5&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;6&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;2788.2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;6&nbsp; &nbsp; |&nbsp;Moon@mqserver10&nbsp;|&nbsp;7&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;3008.2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;+-------+------+-----------------+----------+------------------------------------+&lt;/div&gt;<br>
&lt;div&gt;mq10@mqserver10:~$&nbsp;dstat&nbsp;-dmnsy&lt;/div&gt;&lt;div&gt;-dsk/total-&nbsp;------memory-usage-----&nbsp;-net/total-&nbsp;----swap---&nbsp;---system--&lt;/div&gt;&lt;div&gt; read&nbsp; writ|&nbsp;used&nbsp; buff&nbsp; cach&nbsp; free|&nbsp;recv&nbsp; send|&nbsp;used&nbsp; free|&nbsp;int&nbsp; &nbsp;csw&lt;/div&gt;&lt;div&gt; &nbsp;90k&nbsp;8095B|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 16k&nbsp;9394&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6893k&nbsp;4967k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 24k&nbsp;6852&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;192M&nbsp;25.7M&nbsp; 115M&nbsp;9670M|5171k&nbsp;3601k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 19k&nbsp;4542&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;191M&nbsp;25.7M&nbsp; 115M&nbsp;9671M|7007k&nbsp;5107k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 24k&nbsp;6125&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;191M&nbsp;25.7M&nbsp; 115M&nbsp;9671M|6684k&nbsp;4890k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;6508&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;191M&nbsp;25.7M&nbsp; 115M&nbsp;9671M|6453k&nbsp;4643k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;6159&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;191M&nbsp;25.7M&nbsp; 115M&nbsp;9671M|6342k&nbsp;4549k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;5418&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;191M&nbsp;25.7M&nbsp; 115M&nbsp;9671M|6284k&nbsp;4475k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;5698&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6783k&nbsp;4861k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5781&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6636k&nbsp;4707k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5779&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6807k&nbsp;4877k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5590&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6904k&nbsp;4949k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 24k&nbsp;5668&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|7194k&nbsp;5134k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 24k&nbsp;5700&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6727k&nbsp;4779k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5259&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|7168k&nbsp;5114k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 25k&nbsp;5737&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6943k&nbsp;5046k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5646&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|6869k&nbsp;4929k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5777&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;188M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|7037k&nbsp;5044k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5586&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;188M&nbsp;25.7M&nbsp; 115M&nbsp;9674M|6999k&nbsp;5031k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5730&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;189M&nbsp;25.7M&nbsp; 115M&nbsp;9673M|6599k&nbsp;4742k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 22k&nbsp;6504&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6615k&nbsp;4834k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;6436&lt;/div&gt;&lt;div&gt; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp;190M&nbsp;25.7M&nbsp; 115M&nbsp;9672M|6595k&nbsp;4742k|&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;0&nbsp;|&nbsp; 23k&nbsp;5795&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also,&nbsp;what&nbsp;is&nbsp;the&nbsp;good&nbsp;profiler&nbsp;to&nbsp;run&nbsp;for&nbsp;rabbitmq&nbsp;server&nbsp;? &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;really&nbsp;want&nbsp;to&nbsp;get&nbsp;hold&nbsp;of&nbsp;how&nbsp;the&nbsp;system&nbsp;resources&nbsp;are&nbsp;used&nbsp;and&nbsp;what&nbsp;is&nbsp;the&nbsp;bottleneck&nbsp;so&nbsp;may&nbsp;be&nbsp;profiler&nbsp;is&nbsp;a&nbsp;good&nbsp;idea. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;suggest.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best&nbsp;Regards,&lt;/div&gt;&lt;div&gt;Priyanki. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Aug&nbsp;1,&nbsp;2013&nbsp;at&nbsp;9:27&nbsp;PM,&nbsp;Michael&nbsp;Klishin&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mklishin@gopivotal.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mklishin@gopivotal.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Priyanki&nbsp;Vashi:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;1)&nbsp;Why&nbsp;there&nbsp;is&nbsp;no&nbsp;linear&nbsp;increase&nbsp;in&nbsp;throughput&nbsp;with&nbsp;DISK&nbsp;type&nbsp;of&nbsp;node&nbsp;as&nbsp;it&amp;#39;s&nbsp;seen&nbsp;with&nbsp;RAM&nbsp;type&nbsp;of&nbsp;node&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Because&nbsp;disks&nbsp;are&nbsp;much&nbsp;slower&nbsp;than&nbsp;RAM&nbsp;and&nbsp;performing&nbsp;multiple&nbsp;I/O&nbsp;operations&nbsp;in&nbsp;parallel&nbsp;often&nbsp;won&amp;#39;t&nbsp;yield&lt;br&gt;<br>
linear&nbsp;increase&nbsp;in&nbsp;I/O&nbsp;throughput&nbsp;(depends&nbsp;on&nbsp;your&nbsp;disks&nbsp;and&nbsp;how&nbsp;they&nbsp;are&nbsp;set&nbsp;up;&nbsp;try&nbsp;with&nbsp;a&nbsp;striping&nbsp;array&nbsp;of&nbsp;SSDs&nbsp;;))&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;RAM&nbsp;access,&nbsp;it&nbsp;is&nbsp;more&nbsp;likely&nbsp;that&nbsp;you&nbsp;will&nbsp;see&nbsp;nearly&nbsp;linear&nbsp;increase.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;3)&nbsp;What&nbsp;can&nbsp;be&nbsp;done&nbsp;to&nbsp;improve&nbsp;throughput&nbsp;in&nbsp;both&nbsp;the&nbsp;Tests&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;It&amp;#39;s&nbsp;hard&nbsp;to&nbsp;give&nbsp;you&nbsp;good&nbsp;advice&nbsp;without&nbsp;seeing&nbsp;the&nbsp;code.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;4)&nbsp;Since&nbsp;I&nbsp;have&nbsp;VM&nbsp;with&nbsp;20&nbsp;cores&nbsp;dedicated&nbsp;for&nbsp;rabbitMQ&nbsp;execution,&nbsp;how&nbsp;can&nbsp;I&nbsp;load&nbsp;the&nbsp;CPU&nbsp;to&nbsp;it&amp;#39;s&nbsp;limit&nbsp;?&nbsp;with&nbsp;the&nbsp;current&nbsp;tests&nbsp;I&nbsp;can&nbsp;load&nbsp;CPU&nbsp;maximum&nbsp;to&nbsp;800%&nbsp;with&nbsp; &nbsp; above&nbsp;mentioned&nbsp;throughput.&nbsp;currently&nbsp;the&nbsp;limiting&nbsp;factor&nbsp;seems&nbsp;to&nbsp;be&nbsp;server&nbsp;latency&nbsp;so&nbsp;how&nbsp;to&nbsp;overcome&nbsp;that&nbsp;?&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;suspect&nbsp;that&nbsp;the&nbsp;limiting&nbsp;factor&nbsp;is&nbsp;disk&nbsp;and&nbsp;network&nbsp;I/O&nbsp;and&nbsp;not&nbsp;CPU.&lt;br&gt;<br>
If&nbsp;Erlang&nbsp;runtime&nbsp;does&nbsp;not&nbsp;need&nbsp;more&nbsp;cores,&nbsp;it&nbsp;will&nbsp;not&nbsp;use&nbsp;more&nbsp;cores.&lt;br&gt;<br>
&lt;br&gt;<br>
Try&nbsp;running&nbsp;iostat&nbsp;or&nbsp;vmstat&nbsp;alongside&nbsp;your&nbsp;benchmarks&nbsp;to&nbsp;see&nbsp;what&nbsp;%&nbsp;of&nbsp;load&nbsp;your&nbsp;disk&nbsp;has.&lt;br&gt;<br>
Monitoring&nbsp;network&nbsp;throughput&nbsp;is&nbsp;another&nbsp;thing&nbsp;to&nbsp;do.&nbsp;Finally,&nbsp;TCP&nbsp;stack&nbsp;configuration&nbsp;matters.&lt;br&gt;<br>
For&nbsp;example,&nbsp;does&nbsp;Pika&nbsp;disable&nbsp;Nagle&amp;#39;s&nbsp;algorithm&nbsp;[1]&nbsp;on&nbsp;the&nbsp;sockets&nbsp;it&nbsp;uses?&nbsp;I&amp;#39;m&nbsp;not&nbsp;sure.&lt;br&gt;<br>
&lt;br&gt;<br>
1.&nbsp;&lt;a&nbsp;href=&quot;http://boundary.com/blog/2012/05/02/know-a-delay-nagles-algorithm-and-you&quot;&nbsp;target=&quot;_blank&quot;&gt;http://boundary.com/blog/2012/05/02/know-a-delay-nagles-algorithm-and-you&lt;/a&gt;&lt;br&gt;<br>
--&lt;br&gt;<br>
MK&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
