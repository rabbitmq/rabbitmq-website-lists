<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;currently&nbsp;testing&nbsp;out&nbsp;some&nbsp;RabbitMQ&nbsp;cluster&nbsp;configurations&nbsp;and&nbsp;have&nbsp;come&nbsp;across&nbsp;some&nbsp;behaviour&nbsp;that&nbsp;is&nbsp;undesirable&nbsp;in&nbsp;an&nbsp;otherwise&nbsp;useful&nbsp;set&nbsp;up.&lt;/div&gt;&lt;div&gt;The&nbsp;amount&nbsp;of&nbsp;time&nbsp;the&nbsp;cluster&nbsp;takes&nbsp;to&nbsp;promote&nbsp;a&nbsp;mirrored&nbsp;slave&nbsp;queue&nbsp;to&nbsp;become&nbsp;the&nbsp;master&nbsp;seems&nbsp;quite&nbsp;long.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;have&nbsp;a&nbsp;cluster&nbsp;with&nbsp;two&nbsp;instances&nbsp;of&nbsp;RabbitMQ&nbsp;sat&nbsp;behind&nbsp;a&nbsp;load&nbsp;balancer&nbsp;in&nbsp;order&nbsp;to&nbsp;handle&nbsp;reconnection&nbsp;when&nbsp;one&nbsp;of&nbsp;the&nbsp;boxes&nbsp;fails.&amp;nbsp;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;publisher&nbsp;publishing&nbsp;persistent&nbsp;messages&nbsp;to&nbsp;a&nbsp;durable&nbsp;mirrored&nbsp;queue.&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;one&nbsp;box&nbsp;dies,&nbsp;the&nbsp;publisher&nbsp;will&nbsp;attempt&nbsp;to&nbsp;reconnect&nbsp;via&nbsp;the&nbsp;load&nbsp;balancer.&nbsp;The&nbsp;load&nbsp;balancer,&nbsp;knowing&nbsp;one&nbsp;box&nbsp;is&nbsp;down,&nbsp;directs&nbsp;the&nbsp;traffic&nbsp;to&nbsp;the&nbsp;healthy&nbsp;RabbitMQ&nbsp;instance.&lt;/div&gt;&lt;div&gt;This&nbsp;reconnection&nbsp;is&nbsp;very&nbsp;fast,&nbsp;however,&nbsp;when&nbsp;attempting&nbsp;to&nbsp;publish&nbsp;to&nbsp;the&nbsp;healthy&nbsp;RabbitMQ&nbsp;exceptions&nbsp;are&nbsp;thrown&nbsp;for&nbsp;a&nbsp;period&nbsp;of&nbsp;between&nbsp;40-80&nbsp;seconds&nbsp;before&nbsp;messages&nbsp;are&nbsp;published&nbsp;as&nbsp;normal&nbsp;again.&lt;/div&gt;&lt;div&gt;&lt;br&gt;Has&nbsp;anyone&nbsp;else&nbsp;experienced&nbsp;similar&nbsp;behaviour&nbsp;when&nbsp;using&nbsp;RabbitMQ&nbsp;clustering&nbsp;in&nbsp;this&nbsp;way?&nbsp;Ideally,&nbsp;the&nbsp;failover&nbsp;time&nbsp;for&nbsp;my&nbsp;implementation&nbsp;needs&nbsp;to&nbsp;be&nbsp;negligible.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Having&nbsp;implemented&nbsp;this&nbsp;using&nbsp;both&nbsp;the&nbsp;.NET&nbsp;and&nbsp;Java&nbsp;SDKs&nbsp;I&nbsp;believe&nbsp;I&nbsp;have&nbsp;ruled&nbsp;out&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;SDKs&nbsp;being&nbsp;the&nbsp;cause.&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;also&nbsp;run&nbsp;tests&nbsp;that&nbsp;do&nbsp;not&nbsp;use&nbsp;the&nbsp;load&nbsp;balancer&nbsp;to&nbsp;be&nbsp;sure&nbsp;it&nbsp;isn't&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;issue&nbsp;so&nbsp;my&nbsp;current&nbsp;understanding&nbsp;is&nbsp;that&nbsp;this&nbsp;must&nbsp;be&nbsp;a&nbsp;limitation&nbsp;of&nbsp;RabbitMQ.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;anyone&nbsp;has&nbsp;any&nbsp;knowledge&nbsp;they&nbsp;can&nbsp;share&nbsp;on&nbsp;this&nbsp;topic&nbsp;I&nbsp;would&nbsp;greatly&nbsp;appreciate&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:x-small&quot;&gt;Confidentiality:&nbsp;This&nbsp;e-mail&nbsp;(and&nbsp;any&nbsp;associated&nbsp;files)&nbsp;is&nbsp;intended&nbsp;only&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;intended&nbsp;recipient&nbsp;and&nbsp;may&nbsp;contain&nbsp;information&nbsp;that&nbsp;is&nbsp;confidential,&nbsp;subject&nbsp;to&nbsp;copyright&nbsp;or&nbsp;constitutes&nbsp;a&nbsp;trade&nbsp;secret.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient&nbsp;you&nbsp;are&nbsp;hereby&nbsp;notified&nbsp;that&nbsp;any&nbsp;disclosure,&nbsp;copying&nbsp;or&nbsp;distribution&nbsp;of&nbsp;this&nbsp;message,&nbsp;or&nbsp;files&nbsp;associated&nbsp;with&nbsp;this&nbsp;message,&nbsp;is&nbsp;strictly&nbsp;prohibited.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;message&nbsp;in&nbsp;error,&nbsp;please&nbsp;notify&nbsp;us&nbsp;immediately&nbsp;by&nbsp;replying&nbsp;to&nbsp;the&nbsp;message&nbsp;and&nbsp;then&nbsp;delete&nbsp;it&nbsp;from&nbsp;your&nbsp;computer.&nbsp;Messages&nbsp;sent&nbsp;to&nbsp;and&nbsp;from&nbsp;us&nbsp;may&nbsp;be&nbsp;monitored.&nbsp;The&nbsp;views&nbsp;expressed&nbsp;in&nbsp;this&nbsp;message&nbsp;are&nbsp;those&nbsp;of&nbsp;the&nbsp;author&nbsp;and&nbsp;do&nbsp;not&nbsp;necessarily&nbsp;represent&nbsp;the&nbsp;views&nbsp;of&nbsp;Esendex&nbsp;Ltd.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;Security:&nbsp;This&nbsp;e-mail&nbsp;and&nbsp;any&nbsp;attachments&nbsp;are&nbsp;believed&nbsp;to&nbsp;be&nbsp;free&nbsp;from&nbsp;any&nbsp;virus&nbsp;but&nbsp;it&nbsp;is&nbsp;the&nbsp;responsibility&nbsp;of&nbsp;the&nbsp;recipient&nbsp;to&nbsp;ensure&nbsp;this&nbsp;is&nbsp;so.&nbsp;E-mail&nbsp;is&nbsp;not&nbsp;a&nbsp;100%&nbsp;secure&nbsp;communications&nbsp;medium.&nbsp;We&nbsp;recommend&nbsp;you&nbsp;observe&nbsp;this&nbsp;when&nbsp;e-mailing&nbsp;us.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&gt;Esendex&nbsp;Ltd&nbsp;is&nbsp;a&nbsp;limited&nbsp;company&nbsp;registered&nbsp;in&nbsp;the&nbsp;UK,&nbsp;with&nbsp;company&nbsp;number&nbsp;04217280&nbsp;and&nbsp;having&nbsp;its&nbsp;registered&nbsp;office&nbsp;at&nbsp;15&nbsp;Warwick&nbsp;Road&nbsp;•&nbsp;Stratford&nbsp;Upon&nbsp;Avon&nbsp;•&nbsp;Warwickshire&nbsp;•&nbsp;CV37&nbsp;6YW.&lt;/font&gt;&lt;/div&gt;
</tt>
