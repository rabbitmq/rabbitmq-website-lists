<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Even&nbsp;though&nbsp;it&nbsp;sounds&nbsp;like&nbsp;a&nbsp;nice&nbsp;feature,&nbsp;it&nbsp;is&nbsp;probably&nbsp;difficult<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;really&nbsp;implement,&nbsp;if&nbsp;not&nbsp;done&nbsp;on&nbsp;the&nbsp;client&nbsp;side.&nbsp;The&nbsp;duplicates<br>
&nbsp;&nbsp;&nbsp;&nbsp;might&nbsp;happen&nbsp;when&nbsp;delivering&nbsp;to&nbsp;the&nbsp;client&nbsp;side.&nbsp;but&nbsp;on&nbsp;the&nbsp;client<br>
&nbsp;&nbsp;&nbsp;&nbsp;side&nbsp;it&nbsp;should&nbsp;be&nbsp;quite&nbsp;easy&nbsp;to&nbsp;do&nbsp;the&nbsp;filtering:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;get&nbsp;a&nbsp;message&nbsp;from&nbsp;the&nbsp;queue,&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;check&nbsp;against&nbsp;memcached&nbsp;(couchbase,&nbsp;or&nbsp;some&nbsp;other&nbsp;cache<br>
&nbsp;&nbsp;&nbsp;&nbsp;technology)&nbsp;whether&nbsp;the&nbsp;messageID&nbsp;exists.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Add&nbsp;the&nbsp;new&nbsp;message&nbsp;to&nbsp;memcached&nbsp;(can&nbsp;be&nbsp;done&nbsp;with&nbsp;the&nbsp;previous<br>
&nbsp;&nbsp;&nbsp;&nbsp;step)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;the&nbsp;timeout&nbsp;in&nbsp;memcached&nbsp;to&nbsp;your&nbsp;window&nbsp;size.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;should&nbsp;be&nbsp;straight&nbsp;forward,&nbsp;would&nbsp;scale&nbsp;up&nbsp;to&nbsp;quite&nbsp;a&nbsp;lot&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;messages)&nbsp;and&nbsp;should&nbsp;remove&nbsp;(depending&nbsp;on&nbsp;your&nbsp;window&nbsp;size)&nbsp;all<br>
&nbsp;&nbsp;&nbsp;&nbsp;duplicates.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Is&nbsp;there&nbsp;a&nbsp;good&nbsp;reason&nbsp;why&nbsp;you&nbsp;wouldn't&nbsp;want&nbsp;to&nbsp;do&nbsp;this&nbsp;on&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;side&nbsp;as&nbsp;described?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Cheers&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Matthias&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;PS:&nbsp;as&nbsp;a&nbsp;caching&nbsp;technology&nbsp;you&nbsp;could&nbsp;of&nbsp;course&nbsp;do&nbsp;your&nbsp;own<br>
&nbsp;&nbsp;&nbsp;&nbsp;in-memory-solution&nbsp;but&nbsp;that's&nbsp;probably&nbsp;more&nbsp;work&nbsp;than&nbsp;to&nbsp;use&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;out-of-the-box&nbsp;solution.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;On&nbsp;2013-11-11&nbsp;12:35&nbsp;,&nbsp;Laing,&nbsp;Michael<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:CAKgmDnEWqf=pwN-X=GdLYqRQnAWbsMpwF1s91xBmUH5RynvDyQ@mail.gmail.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;In&nbsp;our&nbsp;scenarios,&nbsp;messages&nbsp;are&nbsp;ultimately&nbsp;delivered<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;a&nbsp;'retail'&nbsp;rabbitmq&nbsp;instance&nbsp;to&nbsp;be&nbsp;delivered&nbsp;to&nbsp;a&nbsp;client.&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pipelines&nbsp;that&nbsp;process&nbsp;and&nbsp;deliver&nbsp;messages&nbsp;are&nbsp;purposefully<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redundant,&nbsp;hence&nbsp;there&nbsp;may&nbsp;be&nbsp;multiple&nbsp;replicas&nbsp;of&nbsp;each&nbsp;message<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'racing'&nbsp;to&nbsp;the&nbsp;endpoint.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Usually,&nbsp;the&nbsp;replicas&nbsp;are&nbsp;resolved&nbsp;before&nbsp;getting&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retail&nbsp;rabbit.&nbsp;When&nbsp;components&nbsp;fail,&nbsp;however,&nbsp;duplicates&nbsp;can<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leak&nbsp;through&nbsp;during&nbsp;a&nbsp;small&nbsp;window&nbsp;of&nbsp;time.&nbsp;We&nbsp;eliminate&nbsp;those<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duplicates&nbsp;at&nbsp;the&nbsp;retail&nbsp;layer&nbsp;by&nbsp;looking&nbsp;at&nbsp;each&nbsp;message_id.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ultimately,&nbsp;our&nbsp;client&nbsp;contract&nbsp;allows&nbsp;duplicates&nbsp;as&nbsp;well&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;one&nbsp;slips&nbsp;by.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;It&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;this&nbsp;is&nbsp;a&nbsp;generic&nbsp;issue.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;What&nbsp;would&nbsp;be&nbsp;useful&nbsp;in&nbsp;our&nbsp;case,&nbsp;and&nbsp;hopefully&nbsp;for&nbsp;many<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;others,&nbsp;would&nbsp;be&nbsp;a&nbsp;'Duplicate&nbsp;Message&nbsp;ID&nbsp;Window'&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;milliseconds,&nbsp;as&nbsp;an&nbsp;exchange&nbsp;attribute.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;If&nbsp;non-zero,&nbsp;the&nbsp;exchange&nbsp;would&nbsp;drop&nbsp;any&nbsp;message&nbsp;with&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duplicate&nbsp;message_id&nbsp;that&nbsp;appeared&nbsp;within&nbsp;the&nbsp;specified&nbsp;window<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;time,&nbsp;possibly&nbsp;routing&nbsp;it&nbsp;to&nbsp;the&nbsp;alternate&nbsp;exchange,&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;In&nbsp;our&nbsp;case,&nbsp;a&nbsp;window&nbsp;of&nbsp;a&nbsp;few&nbsp;seconds,&nbsp;perhaps&nbsp;up&nbsp;to&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minute&nbsp;would&nbsp;suffice.&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Thanks,&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Michael&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&nbsp;class=&quot;mimeAttachmentHeader&quot;&gt;&lt;/fieldset&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
