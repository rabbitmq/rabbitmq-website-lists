<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7652.24&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[rabbitmq-discuss]&nbsp;High&nbsp;cpu&nbsp;usage&nbsp;for&nbsp;Java&nbsp;RabbitMQ&nbsp;client?&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Matthias,&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;gt;&nbsp;You&nbsp;should&nbsp;not&nbsp;be&nbsp;using&nbsp;the&nbsp;tip.&nbsp;See&lt;BR&gt;<br>
&amp;gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-January/003164.html&quot;&gt;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-January/003164.html&lt;/A&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;used&nbsp;the&nbsp;directions&nbsp;from&nbsp;&lt;A&nbsp;HREF=&quot;http://www.rabbitmq.com/build-server.html&quot;&gt;http://www.rabbitmq.com/build-server.html&lt;/A&gt;&nbsp;to&nbsp;download.&amp;nbsp;&nbsp;If&nbsp;those&nbsp;are&nbsp;incorrect,&nbsp;then&nbsp;that&nbsp;needs&nbsp;to&nbsp;be&nbsp;fixed.&amp;nbsp;&nbsp;I&nbsp;was&nbsp;referred&nbsp;to&nbsp;that&nbsp;page&nbsp;by&nbsp;an&nbsp;email&nbsp;a&nbsp;little&nbsp;bit&nbsp;ago&nbsp;to&nbsp;the&nbsp;list.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&amp;gt;Looks&nbsp;fairly&nbsp;sane.&nbsp;The&nbsp;connection&nbsp;thread&nbsp;sits&nbsp;exactly&nbsp;where&nbsp;you'd&nbsp;expect&lt;BR&gt;<br>
&amp;gt;&nbsp;it&nbsp;to&nbsp;be&nbsp;when&nbsp;not&nbsp;much&nbsp;is&nbsp;happening&nbsp;on&nbsp;the&nbsp;connection,&nbsp;namely&nbsp;in&nbsp;a&lt;BR&gt;<br>
&amp;gt;&nbsp;socketRead0.&nbsp;There&nbsp;are&nbsp;a&nbsp;whole&nbsp;bunch&nbsp;of&nbsp;non-rabbit&nbsp;threads&nbsp;though,&lt;BR&gt;<br>
&amp;gt;&nbsp;including&nbsp;UI&nbsp;threads.&nbsp;It&nbsp;would&nbsp;be&nbsp;good&nbsp;to&nbsp;eliminate&nbsp;those&nbsp;from&nbsp;our&lt;BR&gt;<br>
&amp;gt;&nbsp;enquiries.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Yes&nbsp;there&nbsp;are&nbsp;a&nbsp;lot&nbsp;of&nbsp;UI&nbsp;threads.&amp;nbsp;&nbsp;The&nbsp;UI&nbsp;is&nbsp;entirely&nbsp;driven&nbsp;by&nbsp;messages&nbsp;from&nbsp;AMQP.&amp;nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
What&nbsp;I&nbsp;did,&nbsp;in&nbsp;a&nbsp;different&nbsp;experiment,&nbsp;was&nbsp;disable&nbsp;posting&nbsp;to&nbsp;the&nbsp;AMQP&nbsp;broker.&amp;nbsp;&nbsp;The&nbsp;UI&nbsp;is&nbsp;then&nbsp;doing&nbsp;nothing,&nbsp;and&nbsp;the&nbsp;system&nbsp;process&nbsp;time&nbsp;is&nbsp;the&nbsp;majority&nbsp;of&nbsp;effort.&amp;nbsp;&nbsp;I'm&nbsp;thinking&nbsp;of&nbsp;running&nbsp;strace&nbsp;on&nbsp;this,&nbsp;to&nbsp;see&nbsp;what&nbsp;the&nbsp;specific&nbsp;issue&nbsp;is.&amp;nbsp;&nbsp;My&nbsp;concern&nbsp;is&nbsp;that,&nbsp;for&nbsp;some&nbsp;reason,&nbsp;the&nbsp;call&nbsp;is&nbsp;not&nbsp;blocking&nbsp;in&nbsp;a&nbsp;nice&nbsp;way&nbsp;and&nbsp;is&nbsp;causing&nbsp;excess&nbsp;looping&nbsp;somewhere.&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;will&nbsp;develop&nbsp;a&nbsp;non-UI&nbsp;process&nbsp;that&nbsp;does&nbsp;the&nbsp;same&nbsp;things&nbsp;and&nbsp;test&nbsp;it.&amp;nbsp;&nbsp;If&nbsp;I&nbsp;can&nbsp;reproduce&nbsp;this&nbsp;result&nbsp;then&nbsp;I&nbsp;can&nbsp;post&nbsp;that&nbsp;code.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Thanks&nbsp;for&nbsp;your&nbsp;help,&lt;BR&gt;<br>
Rob&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
