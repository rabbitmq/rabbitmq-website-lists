<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;----------&nbsp;Forwarded&nbsp;message&nbsp;----------&lt;br&gt;From:&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;mysurf&nbsp;mail&lt;/b&gt;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:stammailbox@gmail.com&quot;&gt;stammailbox@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;Jul&nbsp;13,&nbsp;2011&nbsp;at&nbsp;4:27&nbsp;PM&lt;br&gt;Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;a&nbsp;few&nbsp;json&nbsp;rpc&nbsp;questions&lt;br&gt;To:&nbsp;Emile&nbsp;Joubert&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;<br>
&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;Hi&nbsp;Emile, &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;Thanks&nbsp;for&nbsp;the&nbsp;assistance.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;Though&nbsp;I&nbsp;have&nbsp;read&nbsp;the<br>
tutorial&nbsp;in&nbsp;your&nbsp;site,&nbsp;it&nbsp;looks&nbsp;like&nbsp;I&nbsp;did&nbsp;not&nbsp;fully&nbsp;understand&nbsp;the&nbsp;rpc&nbsp;for<br>
multiple&nbsp;clients&amp;#39;&nbsp;mechanism. &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;What&nbsp;I&nbsp;want&nbsp;is&nbsp;that&nbsp;the&nbsp;rpc<br>
server&nbsp;will&nbsp;serve&nbsp;all&nbsp;rpc&nbsp;clients. &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;how&nbsp;many<br>
clients&nbsp;I&nbsp;will&nbsp;have&nbsp;in&nbsp;advance.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;I&nbsp;have&nbsp;a&nbsp;lot&nbsp;and&nbsp;some&nbsp;will<br>
run&nbsp;from&nbsp;the&nbsp;same&nbsp;folder&nbsp;with&nbsp;the&nbsp;same&nbsp;configurations&nbsp;(more&nbsp;that&nbsp;one&nbsp;instance)&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;I&nbsp;have&nbsp;put&nbsp;a&nbsp;routing&nbsp;key&nbsp;in<br>
the&nbsp;server&nbsp;and&nbsp;all&nbsp;the&nbsp;clients&nbsp;(same&nbsp;one)&nbsp;and&nbsp;I&nbsp;thought&nbsp;it&nbsp;would&nbsp;make&nbsp;the&nbsp;server&nbsp;handle&nbsp;all&nbsp;the<br>
requests. &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;1.&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;use&nbsp;the&nbsp;rpc&nbsp;like&nbsp;that&nbsp;for&nbsp;multiple&nbsp;clients?&lt;/span&gt;&lt;/p&gt;&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:Arial&quot;&gt;2.&nbsp;Would&nbsp;I&nbsp;need&nbsp;to&nbsp;give&nbsp;each<br>
one&nbsp;a&nbsp;different&nbsp;routing&nbsp;key? &lt;/span&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;3.&nbsp;Would&nbsp;I&nbsp;need&nbsp;to&nbsp;use&nbsp;different&nbsp;server&nbsp;threads&nbsp;for&nbsp;each&nbsp;client? &lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;Thanks. &lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;I&nbsp;will&nbsp;add&nbsp;my&nbsp;client&nbsp;/<br>
server&nbsp;code. &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;I&nbsp;would&nbsp;appreciate&nbsp;it&nbsp;very<br>
much&nbsp;if&nbsp;you&nbsp;elaborate&nbsp;your&nbsp;answer &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;Thank&nbsp;you.&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;My&nbsp;server&nbsp;code&nbsp;(&nbsp;try&nbsp;catch&nbsp;keywords&nbsp;were&nbsp;removed&nbsp;for<br>
clarity)&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;   &nbsp;&lt;/span&gt;public<br>
void&nbsp;startListenToClients()&nbsp;{&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       <br>
&lt;/span&gt;ConnectionFactory&nbsp;connFactory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       <br>
&lt;/span&gt;connFactory.setHost(props.getProperty(&amp;quot;Host&amp;quot;));&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       <br>
&lt;/span&gt;connFactory.setPort(Integer.parseInt(props.getProperty(&amp;quot;Port&amp;quot;)));&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       <br>
&lt;/span&gt;Connection&nbsp;conn&nbsp;=&nbsp;null;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       <br>
&lt;/span&gt;JsonRpcServer&nbsp;server&nbsp;=&nbsp;null;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;    &nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;conn&nbsp;=<br>
connFactory.newConnection();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;final<br>
Channel&nbsp;ch&nbsp;=&nbsp;conn.createChannel();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;String<br>
positionsServerRPCQueueName&nbsp;=&nbsp;props.getProperty(&amp;quot;PositionsServerRPCQueueName&amp;quot;);&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       <br>
&lt;/span&gt;ch.queueDeclare(positionsServerRPCQueueName,&nbsp;false,&nbsp;false,&nbsp;true,&nbsp;null);&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;server<br>
=&nbsp;new&nbsp;JsonRpcServer(ch,&nbsp;positionsServerRPCQueueName,<br>
IPositionsServerServicesInternal.class,&nbsp;new&nbsp;PositionsServerServicesInternalWrapper(positionsServerServicesImpl));&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;    &nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt; &nbsp;&lt;/span&gt;&lt;span&gt;     &nbsp;&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;Thread&nbsp;thread&nbsp;=&nbsp;new&nbsp;Thread(new&nbsp;Runnable()&nbsp;{&lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;           <br>
&lt;/span&gt;@Override&nbsp;public&nbsp;void&nbsp;run()&nbsp;{&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;                <br>
&lt;/span&gt;server.mainloop();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;           &nbsp;&lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;});&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       <br>
&lt;/span&gt;thread.start();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;   &nbsp;&lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;My&nbsp;client&nbsp;code&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;public<br>
IPositionsServerServicesInternal&nbsp;getPositionsServerClient()&nbsp;{&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;&lt;span&gt;       &nbsp;&lt;/span&gt;ConnectionFactory&nbsp;ConnFactory&nbsp;=&nbsp;new<br>
ConnectionFactory();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;           <br>
&lt;/span&gt;ConnFactory.setHost(props.getProperty(&amp;quot;Host&amp;quot;));&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;           <br>
&lt;/span&gt;ConnFactory.setPort(Integer.parseInt(props.getProperty(&amp;quot;Port&amp;quot;)));&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;           <br>
&lt;/span&gt;positionsServerClientConnection&nbsp;=&nbsp;ConnFactory.newConnection();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;           <br>
&lt;/span&gt;Channel&nbsp;channel&nbsp;=&nbsp;getToServerChannel().getChannel();&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;           <br>
&lt;/span&gt;client&nbsp;=&nbsp;new&nbsp;JsonRpcClient(channel,&nbsp;&amp;quot;&amp;quot;,<br>
props.getProperty(&amp;quot;PositionsServerRPCQueueName&amp;quot;)); &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:black&quot;&gt;&lt;span&gt;   &nbsp;&lt;/span&gt;}&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;On&nbsp;Mon,&nbsp;Jul&nbsp;11,&nbsp;2011&nbsp;at&nbsp;2:00<br>
PM,&nbsp;Emile&nbsp;Joubert &amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt; wrote:&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;Hi,&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;margin-bottom:12.0pt;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;&lt;br&gt;<br>
On&nbsp;11/07/11&nbsp;10:23,&nbsp;mysurf&nbsp;mail&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;have&nbsp;three&nbsp;general&nbsp;questions&nbsp;regarding&nbsp;rabbit&nbsp;java&nbsp;rpc&lt;br&gt;<br>
&amp;gt;&nbsp;1.&nbsp;How&nbsp;should&nbsp;I&nbsp;define&nbsp;the&nbsp;client&nbsp;when&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;two&nbsp;applications?&lt;br&gt;<br>
&amp;gt;&nbsp;currently&nbsp;i&nbsp;use&nbsp;this&nbsp;line&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;new<br>
JsonRpcCleint(channel,&amp;quot;&amp;quot;,SomeStringNotUniqueToApp)&lt;br&gt;<br>
&amp;gt;&nbsp;in&nbsp;all&nbsp;my&nbsp;apps.&lt;br&gt;<br>
&amp;gt;&nbsp;Sometimes&nbsp;the&nbsp;application&nbsp;gets&nbsp;stuck&nbsp;in&nbsp;the&nbsp;client&nbsp;wen&nbsp;trying&nbsp;to&nbsp;get&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;RPCClient&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;The&nbsp;RPC&nbsp;servers&nbsp;that&nbsp;serve<br>
requests&nbsp;for&nbsp;different&nbsp;applications&nbsp;must&nbsp;be&lt;br&gt;<br>
listening&nbsp;on&nbsp;different&nbsp;work&nbsp;queues.&nbsp;You&nbsp;must&nbsp;ensure&nbsp;that&nbsp;RPC&nbsp;clients&nbsp;use&lt;br&gt;<br>
a&nbsp;routing&nbsp;key&nbsp;that&nbsp;matches&nbsp;the&nbsp;server&nbsp;queue&nbsp;and&nbsp;are&nbsp;different&nbsp;for&nbsp;each&lt;br&gt;<br>
application.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;don&amp;#39;t&nbsp;see&nbsp;how&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;use&nbsp;a&nbsp;routing&nbsp;key&nbsp;that&nbsp;is&nbsp;not&nbsp;unique&lt;br&gt;<br>
to&nbsp;the&nbsp;application.&nbsp;Perhaps&nbsp;you&nbsp;can&nbsp;explain&nbsp;your&nbsp;intended&nbsp;use.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;margin-bottom:12.0pt;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;2.&nbsp;Is&nbsp;the&nbsp;JsonRPCClient/Server&nbsp;a&nbsp;guaranteed&nbsp;message&nbsp;delivery&nbsp;process?&lt;br&gt;<br>
&amp;gt;&nbsp;By&nbsp;that&nbsp;I&nbsp;am&nbsp;asking&nbsp;if&nbsp;when&nbsp;the&nbsp;server&nbsp;falls&nbsp;and&nbsp;loads&nbsp;again&nbsp;after&nbsp;few&lt;br&gt;<br>
&amp;gt;&nbsp;seconds-&nbsp;will&nbsp;it&nbsp;send&nbsp;answers&nbsp;?&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;The&nbsp;server&nbsp;work&nbsp;queue&nbsp;is<br>
normally&nbsp;declared&nbsp;outside&nbsp;the&nbsp;RPC&nbsp;Server&lt;br&gt;<br>
framework,&nbsp;so&nbsp;you&nbsp;can&nbsp;set&nbsp;this&nbsp;up&nbsp;as&nbsp;a&nbsp;durable&nbsp;queue&nbsp;if&nbsp;you&nbsp;want&nbsp;work&lt;br&gt;<br>
messages&nbsp;to&nbsp;survive&nbsp;a&nbsp;server&nbsp;restart.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;margin-bottom:12.0pt;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;3.&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;determine&nbsp;timout&nbsp;for&nbsp;RPC&nbsp;?&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;have&nbsp;asked&nbsp;it&nbsp;here&nbsp;before&nbsp;and&nbsp;received&nbsp;a&nbsp;negative&nbsp;answer&nbsp;(emile&nbsp;opened&lt;br&gt;<br>
&amp;gt;&nbsp;a&nbsp;bug&nbsp;for&nbsp;it&nbsp;-&nbsp;bug23515)&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;LTR&quot;&nbsp;style=&quot;text-align:left;direction:ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;This&nbsp;feature&nbsp;has&nbsp;been&nbsp;added<br>
recently&nbsp;and&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;next&nbsp;release.&lt;br&gt;<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:Arial;color:black&quot;&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;dir=&quot;RTL&quot;&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/font&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
