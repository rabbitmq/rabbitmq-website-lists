<tt>
Hi&nbsp;All,&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;a&nbsp;fanout&nbsp;exchange&nbsp;and&nbsp;I&nbsp;am&nbsp;binding&nbsp;different&nbsp;queues&nbsp;to&nbsp;this&nbsp;exchange.&nbsp;When&nbsp;I&nbsp;send&nbsp;data&nbsp;to&nbsp;this&nbsp;exchange&nbsp;each&nbsp;queue&nbsp;that&nbsp;is&nbsp;bound&nbsp;to&nbsp;this&nbsp;exchange&nbsp;is&nbsp;getting&nbsp;data&nbsp;as&nbsp;expected.&nbsp;But&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;connect&nbsp;multiple&nbsp;consumers&nbsp;to&nbsp;one&nbsp;of&nbsp;these&nbsp;fanned&nbsp;out&nbsp;queues,&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;message:&lt;br&gt;<br>
&amp;quot;Queue&nbsp;message_queue1&nbsp;has&nbsp;an&nbsp;exclusive&nbsp;consumer.&nbsp;No&nbsp;more&nbsp;consumers&nbsp;allowed.&amp;quot;&lt;br&gt;&lt;br&gt;Here&nbsp;is&nbsp;the&nbsp;properties&nbsp;file&nbsp;that&nbsp;has&nbsp;the&nbsp;configuration:&lt;br&gt;&lt;br&gt;fanout.properties:&lt;br&gt;--------------------&lt;br&gt;java.naming.factory.initial&nbsp;=&nbsp;org.apache.qpid.jndi.PropertiesFileInitialContextFactory&lt;br&gt;<br>
connectionfactory.qpidConnectionfactory&nbsp;=&nbsp;amqp://guest:guest@xxxxxxx/?brokerlist=&amp;#39;tcp://xxxxx:5672&amp;#39;&lt;br&gt;&lt;br&gt;#&nbsp;for&nbsp;producer&lt;br&gt;destination.fanoutQueue&nbsp;=&nbsp;BURL:fanout://testcollector.fanout//message_queue?durable=&amp;#39;false&amp;#39;&amp;amp;autodelete=&amp;#39;true&amp;#39;&amp;amp;exclusive=&amp;#39;false&amp;#39;&lt;br&gt;<br>
&lt;br&gt;#&nbsp;for&nbsp;consumers&lt;br&gt;destination.fanoutQueue1&nbsp;=&nbsp;BURL:fanout://testcollector.fanout//message_queue1?durable=&amp;#39;false&amp;#39;&amp;amp;autodelete=&amp;#39;true&amp;#39;&amp;amp;exclusive=&amp;#39;false&amp;#39;&lt;br&gt;&lt;br&gt;destination.fanoutQueue2&nbsp;=&nbsp;BURL:fanout://testcollector.fanout//message_queue2?durable=&amp;#39;false&amp;#39;&amp;amp;autodelete=&amp;#39;true&amp;#39;&amp;amp;exclusive=&amp;#39;false&amp;#39;&lt;br&gt;<br>
&lt;br&gt;destination.fanoutQueue3&nbsp;=&nbsp;BURL:fanout://testcollector.fanout//message_queue3?durable=&amp;#39;false&amp;#39;&amp;amp;autodelete=&amp;#39;true&amp;#39;&amp;amp;exclusive=&amp;#39;false&amp;#39;&lt;br&gt;-------------------------&lt;br&gt;&lt;br&gt;I&nbsp;tried&nbsp;to&nbsp;connect&nbsp;two&nbsp;consumers&nbsp;to&nbsp;message_queue1&nbsp;and&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;error:&lt;br&gt;<br>
INFO&nbsp;org.apache.qpid.client.AMQConnection&nbsp;-&nbsp;Closing&nbsp;AMQConnection&nbsp;due&nbsp;to&nbsp;:org.apache.qpid.AMQException:&nbsp;ch=0&nbsp;id=0&nbsp;ExecutionException(errorCode=RESOURCE_LOCKED,&nbsp;commandId=6,&nbsp;classCode=4,&nbsp;commandCode=7,&nbsp;fieldIndex=0,&nbsp;description=resource-locked:&nbsp;Queue&nbsp;message_queue1&nbsp;has&nbsp;an&nbsp;exclusive&nbsp;consumer.&nbsp;No&nbsp;more&nbsp;consumers&nbsp;allowed.&nbsp;(qpid/broker/Queue.cpp:385),&nbsp;errorInfo={})&nbsp;[error&nbsp;code&nbsp;405:&nbsp;Already&nbsp;exists]&lt;br&gt;<br>
&lt;br&gt;I&nbsp;checked&nbsp;the&nbsp;configuration&nbsp;on&nbsp;AMQP&nbsp;Server&nbsp;and&nbsp;it&nbsp;says&nbsp;that&nbsp;message_queue1&nbsp;is&nbsp;a&nbsp;non-exclusive&nbsp;queue.&lt;br&gt;-bash-4.1$&nbsp;qpid-stat&nbsp;-q&lt;br&gt;Queues&lt;br&gt; &nbsp;queue                                 &nbsp;dur &nbsp;autoDel &nbsp;excl &nbsp;msg  &nbsp;msgIn &nbsp;msgOut &nbsp;bytes &nbsp;bytesIn &nbsp;bytesOut &nbsp;cons &nbsp;bind&lt;br&gt;<br>
 &nbsp;message_queue1                             &nbsp;Y                &nbsp;1   &nbsp;22    &nbsp;21     &nbsp;15   &nbsp;324     &nbsp;309        &nbsp;1    &nbsp;2&lt;br&gt;&lt;br&gt;&lt;br&gt;Here&nbsp;is&nbsp;the&nbsp;code&nbsp;I&nbsp;am&nbsp;using.&lt;br&gt;&lt;br&gt;Producer.java:&nbsp;(queueName=fanoutQueue)&lt;br&gt;----------------&lt;br&gt;<br>
               &nbsp;Properties&nbsp;properties&nbsp;=&nbsp;new&nbsp;Properties();&lt;br&gt;   &nbsp;   &nbsp;properties.load(this.getClass().getResourceAsStream(&amp;quot;fanout.properties&amp;quot;));&lt;br&gt;&lt;br&gt;   &nbsp;   &nbsp;//Create&nbsp;the&nbsp;initial&nbsp;context&lt;br&gt;   &nbsp;   &nbsp;Context&nbsp;ctx&nbsp;=&nbsp;new&nbsp;InitialContext(properties);&lt;br&gt;<br>
&lt;br&gt;   &nbsp;   &nbsp;//&nbsp;look&nbsp;up&nbsp;destination&nbsp;and&nbsp;connection&nbsp;factory&lt;br&gt;   &nbsp;   &nbsp;Destination&nbsp;destination&nbsp;=&nbsp;(Destination)ctx.lookup(queueName);&lt;br&gt;   &nbsp;   &nbsp;ConnectionFactory&nbsp;conFac&nbsp;=&nbsp;(ConnectionFactory)ctx.lookup(&amp;quot;qpidConnectionfactory&amp;quot;);&lt;br&gt;<br>
   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;   &nbsp;Connection&nbsp;connection&nbsp;=&nbsp;conFac.createConnection();&lt;br&gt;   &nbsp;   &nbsp;Session&nbsp;session&nbsp;=&nbsp;connection.createSession(false,&nbsp;Session.AUTO_ACKNOWLEDGE);&lt;br&gt;   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;   &nbsp;MessageProducer&nbsp;messageProducer&nbsp;=&nbsp;session.createProducer(destination);&lt;br&gt;<br>
   &nbsp;   &nbsp;TextMessage&nbsp;message;&lt;br&gt;&lt;br&gt;   &nbsp;   &nbsp;//&nbsp;Send&nbsp;a&nbsp;series&nbsp;of&nbsp;messages&nbsp;in&nbsp;a&nbsp;loop&lt;br&gt;   &nbsp;   &nbsp;int&nbsp;i=0;&lt;br&gt;   &nbsp;   &nbsp;while(true)&nbsp;{&lt;br&gt;   &nbsp;   &nbsp;   &nbsp;message&nbsp;=&nbsp;session.createTextMessage(&amp;quot;Hello&nbsp;world!&nbsp;&amp;quot;+i);&lt;br&gt;   &nbsp;   &nbsp;   &nbsp;messageProducer.send(message,&nbsp;DeliveryMode.NON_PERSISTENT,   &nbsp;Message.DEFAULT_PRIORITY,&nbsp;60*1000);&lt;br&gt;<br>
   &nbsp;   &nbsp;   &nbsp;i++;&lt;br&gt;   &nbsp;   &nbsp;   &nbsp;Thread.sleep(1000);&lt;br&gt;   &nbsp;   &nbsp;}&lt;br&gt;-------------------&lt;br&gt;&lt;br&gt;Consumer.java:&nbsp;(queueName=fanoutQueue1)&lt;br&gt;-----------------&lt;br&gt;               &nbsp;Properties&nbsp;properties&nbsp;=&nbsp;new&nbsp;Properties();&lt;br&gt;   &nbsp;   &nbsp;properties.load(this.getClass().getResourceAsStream(&amp;quot;fanout.properties&amp;quot;));&lt;br&gt;<br>
&lt;br&gt;   &nbsp;   &nbsp;//Create&nbsp;the&nbsp;initial&nbsp;context&lt;br&gt;   &nbsp;   &nbsp;Context&nbsp;ctx&nbsp;=&nbsp;new&nbsp;InitialContext(properties);&lt;br&gt;&lt;br&gt;   &nbsp;   &nbsp;//&nbsp;look&nbsp;up&nbsp;destination&nbsp;and&nbsp;connection&nbsp;factory&lt;br&gt;   &nbsp;   &nbsp;Destination&nbsp;destination&nbsp;=&nbsp;(Destination)ctx.lookup(queueName);&lt;br&gt;<br>
   &nbsp;   &nbsp;ConnectionFactory&nbsp;conFac&nbsp;=&nbsp;(ConnectionFactory)ctx.lookup(&amp;quot;qpidConnectionfactory&amp;quot;);&lt;br&gt;   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;   &nbsp;Connection&nbsp;connection&nbsp;=&nbsp;conFac.createConnection();&lt;br&gt;   &nbsp;   &nbsp;connection.setExceptionListener(new&nbsp;ExceptionListener()&lt;br&gt;<br>
   &nbsp;   &nbsp;{&lt;br&gt;   &nbsp;   &nbsp;   &nbsp;public&nbsp;void&nbsp;onException(JMSException&nbsp;jmse)&lt;br&gt;   &nbsp;   &nbsp;   &nbsp;{&lt;br&gt;   &nbsp;   &nbsp;       &nbsp;System.err.println(CLASS&nbsp;+&nbsp;&amp;quot;:&nbsp;The&nbsp;sample&nbsp;received&nbsp;an&nbsp;exception&nbsp;through&nbsp;the&nbsp;ExceptionListener&amp;quot;);&lt;br&gt;   &nbsp;   &nbsp;       &nbsp;System.exit(0);&lt;br&gt;<br>
   &nbsp;   &nbsp;   &nbsp;}&lt;br&gt;   &nbsp;   &nbsp;});&lt;br&gt;&lt;br&gt;   &nbsp;   &nbsp;System.out.println(CLASS&nbsp;+&nbsp;&amp;quot;:&nbsp;Creating&nbsp;a&nbsp;non-transacted,&nbsp;auto-acknowledged&nbsp;session&amp;quot;);&lt;br&gt;   &nbsp;   &nbsp;Session&nbsp;session&nbsp;=&nbsp;connection.createSession(false,&nbsp;Session.AUTO_ACKNOWLEDGE);&lt;br&gt;<br>
   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;   &nbsp;MessageConsumer&nbsp;messageConsumer&nbsp;=&nbsp;session.createConsumer(destination);&lt;br&gt;   &nbsp;   &nbsp;connection.start();&lt;br&gt;   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;   &nbsp;while(true)&nbsp;{&lt;br&gt;   &nbsp;   &nbsp;   &nbsp;TextMessage&nbsp;message&nbsp;=&nbsp;(TextMessage)messageConsumer.receive(1000);&lt;br&gt;<br>
   &nbsp;   &nbsp;   &nbsp;if(message&nbsp;!=&nbsp;null)&lt;br&gt;   &nbsp;   &nbsp;   &nbsp;   &nbsp;System.out.println(message.getText());&lt;br&gt;   &nbsp;   &nbsp;}&lt;br&gt;-----------------&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;using&nbsp;QPID,&nbsp;but&nbsp;I&nbsp;figured&nbsp;if&nbsp;this&nbsp;is&nbsp;doable&nbsp;in&nbsp;RabbitMQ,&nbsp;then&nbsp;it&nbsp;should&nbsp;be&nbsp;possible&nbsp;in&nbsp;QPID&nbsp;too.&lt;br&gt;<br>
Am&nbsp;I&nbsp;missing&nbsp;something&nbsp;here?&lt;br&gt;&lt;br&gt;I&nbsp;really&nbsp;appreciate&nbsp;your&nbsp;help.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Uday&lt;br&gt;&lt;br&gt;<br>

</tt>
