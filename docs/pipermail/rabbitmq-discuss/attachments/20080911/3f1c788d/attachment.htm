<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Here&nbsp;are&nbsp;the&nbsp;tests.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;There&nbsp;is&nbsp;the&nbsp;one<br>
project&nbsp;for&nbsp;producing&nbsp;stuff&nbsp;that&nbsp;looks&nbsp;like&nbsp;the&nbsp;messages&nbsp;I'm&nbsp;sending<br>
and&nbsp;a&nbsp;very&nbsp;simple&nbsp;consumer.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;This&nbsp;is&nbsp;VERY&nbsp;crude&nbsp;(I<br>
did&nbsp;this&nbsp;very&nbsp;quickly)&nbsp;stuff&nbsp;and&nbsp;I&nbsp;might&nbsp;be&nbsp;wrong&nbsp;in&nbsp;my&nbsp;programming<br>
paradigm&nbsp;that&nbsp;I&nbsp;use&nbsp;with&nbsp;RabbitMQ&nbsp;so&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;of&nbsp;everything&nbsp;I<br>
should&nbsp;change.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;That's&nbsp;basically&nbsp;what&nbsp;I<br>
do.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Be&nbsp;sure&nbsp;to&nbsp;define&nbsp;the<br>
username,&nbsp;password&nbsp;and&nbsp;virtual.&nbsp;This&nbsp;sample&nbsp;assumes&nbsp;there&nbsp;is&nbsp;a&nbsp;queue<br>
named&nbsp;ActionsQueue&nbsp;and&nbsp;it&nbsp;was&nbsp;already&nbsp;created&nbsp;(creating&nbsp;it&nbsp;with&nbsp;the<br>
CreateQueue&nbsp;sample&nbsp;that&nbsp;comes&nbsp;with&nbsp;the&nbsp;.NET&nbsp;library&nbsp;and&nbsp;making&nbsp;it<br>
durable&nbsp;will&nbsp;make&nbsp;it&nbsp;exactly&nbsp;how&nbsp;I've&nbsp;defined&nbsp;it).&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;I&nbsp;don't&nbsp;use&nbsp;the<br>
automatic&nbsp;consumer&nbsp;that&nbsp;waits&nbsp;for&nbsp;data&nbsp;because&nbsp;I&nbsp;need&nbsp;some&nbsp;flexibility<br>
in&nbsp;that&nbsp;area,&nbsp;that's&nbsp;why&nbsp;I&nbsp;have&nbsp;the&nbsp;sleep&nbsp;part.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Hope&nbsp;that&nbsp;will&nbsp;help,&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Eran&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Ben&nbsp;Hood&nbsp;wrote:&lt;/p&gt;<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:269388e30809110607t6b4907b2l649e9cee1fb514c4@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Eran,<br>
<br>
On&nbsp;Thu,&nbsp;Sep&nbsp;11,&nbsp;2008&nbsp;at&nbsp;1:57&nbsp;PM,&nbsp;Eran&nbsp;Sandler&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:eran.sandler@gmail.com&quot;&gt;&amp;lt;eran.sandler@gmail.com&amp;gt;&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;I&nbsp;don't&nbsp;use&nbsp;an&nbsp;exchange.&nbsp;I&nbsp;saw&nbsp;that&nbsp;its&nbsp;possible&nbsp;to&nbsp;use&nbsp;this&nbsp;without&nbsp;an<br>
exchange&nbsp;(but&nbsp;perhaps&nbsp;I'm&nbsp;screwing&nbsp;myself&nbsp;with&nbsp;regards&nbsp;to&nbsp;clustering,&nbsp;I<br>
haven't&nbsp;taken&nbsp;a&nbsp;closer&nbsp;look&nbsp;as&nbsp;to&nbsp;how&nbsp;to&nbsp;work&nbsp;well&nbsp;with&nbsp;clustering).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
No,&nbsp;that's&nbsp;fine.&nbsp;What&nbsp;you&nbsp;are&nbsp;doing&nbsp;is&nbsp;using&nbsp;what&nbsp;is&nbsp;known&nbsp;as&nbsp;the<br>
default&nbsp;exchange.&nbsp;This&nbsp;means&nbsp;that&nbsp;message&nbsp;is&nbsp;routed&nbsp;to&nbsp;a&nbsp;queue&nbsp;with<br>
the&nbsp;same&nbsp;name&nbsp;as&nbsp;the&nbsp;routing&nbsp;key.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;I&nbsp;think&nbsp;BasicConsume&nbsp;should&nbsp;work&nbsp;just&nbsp;fine.&nbsp;I&nbsp;saw&nbsp;that&nbsp;it&nbsp;can&nbsp;handle&nbsp;the&nbsp;Ack<br>
automatically.&nbsp;The&nbsp;reason&nbsp;I&nbsp;thought&nbsp;using&nbsp;BasicGet&nbsp;was&nbsp;to&nbsp;keep&nbsp;my&nbsp;options<br>
open&nbsp;as&nbsp;to&nbsp;refuse&nbsp;a&nbsp;message&nbsp;for&nbsp;a&nbsp;point&nbsp;in&nbsp;time&nbsp;where&nbsp;my&nbsp;consuming&nbsp;code&nbsp;will<br>
run&nbsp;on&nbsp;a&nbsp;couple&nbsp;of&nbsp;machines&nbsp;that&nbsp;might&nbsp;get&nbsp;upgraded&nbsp;sequentially.&nbsp;This&nbsp;might<br>
lead&nbsp;to&nbsp;scenario&nbsp;in&nbsp;which&nbsp;I&nbsp;have&nbsp;added&nbsp;a&nbsp;new&nbsp;message&nbsp;type&nbsp;I&nbsp;want&nbsp;to&nbsp;handle<br>
and&nbsp;I&nbsp;don't&nbsp;have&nbsp;the&nbsp;new&nbsp;code&nbsp;on&nbsp;all&nbsp;consumers.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
You&nbsp;can&nbsp;ack&nbsp;manually&nbsp;if&nbsp;you&nbsp;want&nbsp;to.&nbsp;Set&nbsp;the&nbsp;no_ack&nbsp;flag&nbsp;to&nbsp;true&nbsp;and<br>
then&nbsp;make&nbsp;a&nbsp;application&nbsp;specific&nbsp;decision&nbsp;of&nbsp;whether&nbsp;to&nbsp;ack&nbsp;or&nbsp;not&nbsp;in<br>
the&nbsp;onDeliver&nbsp;callback.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Regarding&nbsp;the&nbsp;sample,&nbsp;I&nbsp;will&nbsp;write&nbsp;something&nbsp;quick&nbsp;based&nbsp;on&nbsp;my&nbsp;original&nbsp;code<br>
and&nbsp;send&nbsp;it&nbsp;so&nbsp;it&nbsp;will&nbsp;make&nbsp;your&nbsp;life&nbsp;(and&nbsp;mine)&nbsp;a&nbsp;lot&nbsp;nicer&nbsp;(and&nbsp;quicker)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
Cool,&nbsp;hopefully&nbsp;one&nbsp;of&nbsp;us&nbsp;will&nbsp;get&nbsp;some&nbsp;time&nbsp;to&nbsp;look&nbsp;at&nbsp;it.<br>
<br>
Ben<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
