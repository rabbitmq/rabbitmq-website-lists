<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;The&nbsp;reason&nbsp;we&nbsp;are&nbsp;using<br>
a&nbsp;message&nbsp;queue&nbsp;is&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;send&nbsp;various&nbsp;messages&nbsp;to&nbsp;perform<br>
actions&nbsp;in&nbsp;an&nbsp;async&nbsp;manner.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;I&nbsp;prefer&nbsp;not&nbsp;to&nbsp;lose<br>
these&nbsp;messages,&nbsp;hence&nbsp;the&nbsp;durable&nbsp;queue,&nbsp;but&nbsp;I&nbsp;can&nbsp;recover&nbsp;from&nbsp;not<br>
getting&nbsp;them.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;The&nbsp;behavior&nbsp;I&nbsp;would<br>
expect,&nbsp;such&nbsp;as&nbsp;flowing&nbsp;back&nbsp;to&nbsp;the&nbsp;disk&nbsp;is&nbsp;to&nbsp;flush&nbsp;them&nbsp;to&nbsp;the&nbsp;disk<br>
and&nbsp;only&nbsp;keep&nbsp;a&nbsp;small&nbsp;portion&nbsp;in-memory,&nbsp;when&nbsp;&quot;the&nbsp;cows&nbsp;come&nbsp;home&quot;&nbsp;(or<br>
more&nbsp;exactly,&nbsp;the&nbsp;cowboy&nbsp;comes&nbsp;back&nbsp;and&nbsp;pushes&nbsp;the&nbsp;cows&nbsp;to&nbsp;their<br>
rightful&nbsp;place)&nbsp;it&nbsp;will&nbsp;start&nbsp;reading&nbsp;from&nbsp;the&nbsp;disk&nbsp;chunk&nbsp;by&nbsp;chunk<br>
until&nbsp;it&nbsp;reaches&nbsp;a&nbsp;point&nbsp;where&nbsp;all&nbsp;the&nbsp;backlog&nbsp;finished&nbsp;and&nbsp;from&nbsp;there<br>
it&nbsp;will&nbsp;go&nbsp;back&nbsp;to&nbsp;work&nbsp;as&nbsp;it&nbsp;was&nbsp;before.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Having&nbsp;that&nbsp;combined<br>
with&nbsp;a&nbsp;key&nbsp;that&nbsp;says&nbsp;when&nbsp;we&nbsp;should&nbsp;start&nbsp;throwing&nbsp;things&nbsp;directly&nbsp;to<br>
the&nbsp;disk&nbsp;without&nbsp;keeping&nbsp;them&nbsp;in&nbsp;memory&nbsp;(or&nbsp;without&nbsp;keeping&nbsp;them&nbsp;in<br>
memory&nbsp;too&nbsp;much)&nbsp;as&nbsp;well&nbsp;as&nbsp;a&nbsp;max&nbsp;queue&nbsp;length&nbsp;(depth,&nbsp;depends&nbsp;on&nbsp;where<br>
you&nbsp;look&nbsp;at&nbsp;it)&nbsp;would&nbsp;be&nbsp;really&nbsp;great.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Having&nbsp;the&nbsp;ability&nbsp;to<br>
write&nbsp;a&nbsp;queue&nbsp;plugin&nbsp;would&nbsp;be&nbsp;really&nbsp;great.&nbsp;There&nbsp;is&nbsp;always&nbsp;that&nbsp;20%<br>
that&nbsp;requires&nbsp;a&nbsp;certain&nbsp;behavior&nbsp;that&nbsp;is&nbsp;not&nbsp;off&nbsp;the&nbsp;shelf&nbsp;:-)&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Eran&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&quot;&gt;Ben&nbsp;Hood&nbsp;wrote:&lt;/p&gt;<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:269388e30809110438o7a2a809dr4ea9742f6e04f59b@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Eran,<br>
<br>
On&nbsp;Thu,&nbsp;Sep&nbsp;11,&nbsp;2008&nbsp;at&nbsp;12:14&nbsp;PM,&nbsp;Ben&nbsp;Hood&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&gt;&amp;lt;0x6e6562@gmail.com&amp;gt;&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;You've&nbsp;got&nbsp;2&nbsp;options:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
You&nbsp;might&nbsp;also&nbsp;have&nbsp;a&nbsp;third&nbsp;option:&nbsp;setting&nbsp;the&nbsp;auto-delete&nbsp;flag.&nbsp;By<br>
setting&nbsp;this&nbsp;flag,&nbsp;when&nbsp;the&nbsp;consumer&nbsp;goes&nbsp;away,&nbsp;the&nbsp;queue&nbsp;will&nbsp;be<br>
auto-deleted&nbsp;and&nbsp;hence&nbsp;the&nbsp;messages&nbsp;will&nbsp;be&nbsp;dropped.<br>
<br>
ATM,&nbsp;I&nbsp;assume&nbsp;you&nbsp;have&nbsp;a&nbsp;durable&nbsp;queue&nbsp;that&nbsp;you&nbsp;are&nbsp;sending&nbsp;persistent<br>
messages&nbsp;to.&nbsp;Does&nbsp;this&nbsp;necessarily&nbsp;fit&nbsp;in&nbsp;with&nbsp;the&nbsp;nature&nbsp;of&nbsp;your<br>
application&nbsp;from&nbsp;a&nbsp;design&nbsp;perspective?&nbsp;Do&nbsp;you&nbsp;*really*&nbsp;need&nbsp;persistent<br>
messages&nbsp;for&nbsp;stuff&nbsp;that&nbsp;you&nbsp;are&nbsp;apparently&nbsp;not&nbsp;interested&nbsp;in<br>
consuming?<br>
<br>
Off&nbsp;on&nbsp;a&nbsp;tangent,&nbsp;this&nbsp;*may*&nbsp;be&nbsp;a&nbsp;use&nbsp;case&nbsp;for&nbsp;pluggable&nbsp;queues.&nbsp;If<br>
you&nbsp;implemented&nbsp;a&nbsp;queue&nbsp;backend&nbsp;that&nbsp;overflowed&nbsp;to&nbsp;disk,&nbsp;then&nbsp;you<br>
could&nbsp;happily&nbsp;queue&nbsp;up&nbsp;messages&nbsp;until&nbsp;the&nbsp;cows&nbsp;come&nbsp;home.&nbsp;Or&nbsp;at&nbsp;least<br>
until&nbsp;your&nbsp;SAN&nbsp;fills&nbsp;up.&nbsp;Again,&nbsp;this&nbsp;could&nbsp;be&nbsp;a&nbsp;future&nbsp;feature.<br>
<br>
HTH,<br>
<br>
Ben<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
