<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;10pt;<br>
font-family:Tahoma<br>
}<br>
--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;<br>
Hi&nbsp;RabbitMQ&nbsp;community:&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;encounter&nbsp;this&nbsp;problem&nbsp;about&nbsp;message&nbsp;persistence.&nbsp;Here&nbsp;is&nbsp;my&nbsp;case,&nbsp;I&nbsp;have&nbsp;2&nbsp;server&nbsp;nodes&nbsp;with&nbsp;active/active&nbsp;setup,&nbsp;both&nbsp;are&nbsp;persisted&nbsp;to&nbsp;DISK.&nbsp;The&nbsp;queue&nbsp;declarations&nbsp;are&nbsp;defined&nbsp;as&nbsp;durable.&lt;br&gt;This&nbsp;is&nbsp;what&nbsp;I&nbsp;got&nbsp;when&nbsp;doing:&lt;br&gt;&lt;br&gt;#&nbsp;rabbitmqctl&nbsp;cluster_status&lt;br&gt;Cluster&nbsp;status&nbsp;of&nbsp;node&nbsp;'rabbit@aaron-vm177'&nbsp;...&lt;br&gt;[{nodes,[{disc,['rabbit@vm1','rabbit@vm2']}]},&lt;br&gt;&amp;nbsp;{running_nodes,['rabbit@vm1','rabbit@vm2']}]&lt;br&gt;...done.&lt;br&gt;&lt;br&gt;#&nbsp;rabbitmqctl&nbsp;list_queues&lt;br&gt;Listing&nbsp;queues&nbsp;...&lt;br&gt;test&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;10&lt;br&gt;...done.&lt;br&gt;&lt;br&gt;&lt;br&gt;My&nbsp;vm1&nbsp;is&nbsp;currently&nbsp;master&nbsp;node.&nbsp;When&nbsp;I&nbsp;stop&nbsp;RabbitMQ&nbsp;service&nbsp;in&nbsp;vm1,&nbsp;and&nbsp;start&nbsp;it&nbsp;back&nbsp;up.&nbsp;I&nbsp;check&nbsp;my&nbsp;messages&nbsp;in&nbsp;the&nbsp;queue,&nbsp;the&nbsp;messages&nbsp;are&nbsp;still&nbsp;there.&nbsp;This&nbsp;time&nbsp;when&nbsp;I&nbsp;stop&nbsp;RabbitMQ&nbsp;service&nbsp;in&nbsp;vm2.&nbsp;The&nbsp;messages&nbsp;will&nbsp;be&nbsp;gone.&nbsp;It&nbsp;seems&nbsp;like&nbsp;when&nbsp;I&nbsp;restart&nbsp;both&nbsp;server&nbsp;nodes,&nbsp;the&nbsp;data&nbsp;will&nbsp;be&nbsp;lost.&nbsp;Does&nbsp;anyone&nbsp;know&nbsp;the&nbsp;reason?&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;work&nbsp;around&nbsp;this?&lt;br&gt;&lt;br&gt;My&nbsp;goal&nbsp;is&nbsp;that&nbsp;any&nbsp;server&nbsp;nodes&nbsp;down,&nbsp;and&nbsp;when&nbsp;I&nbsp;bring&nbsp;it&nbsp;back&nbsp;up,&nbsp;no&nbsp;data&nbsp;will&nbsp;be&nbsp;lost.&lt;br&gt;&lt;br&gt;Jeffrey.&lt;br&gt;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
