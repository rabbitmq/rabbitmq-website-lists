<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Steve,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;probably&nbsp;happens&nbsp;because&nbsp;both&nbsp;queues&nbsp;are&nbsp;bound&nbsp;to&nbsp;the&nbsp;exchange&nbsp;to&nbsp;receive&nbsp;a&nbsp;message.&nbsp;The&nbsp;reason&nbsp;for&nbsp;that&nbsp;may&nbsp;be&nbsp;an&nbsp;exchange&nbsp;type&nbsp;(fan-out&nbsp;for&nbsp;example&nbsp;will&nbsp;send&nbsp;message&nbsp;to&nbsp;any&nbsp;bound&nbsp;queue)&nbsp;or&nbsp;routing-key.&nbsp;Looking&nbsp;at&nbsp;your&nbsp;example,&nbsp;the&nbsp;routing-key&nbsp;used&nbsp;to&nbsp;bind&nbsp;queues&nbsp;is&nbsp;empty.&nbsp;Hence&nbsp;each&nbsp;message&nbsp;post&nbsp;with&nbsp;empty&nbsp;routing&nbsp;key&nbsp;will&nbsp;be&nbsp;delivered&nbsp;to&nbsp;both&nbsp;queues.&nbsp;You&nbsp;can&nbsp;run&nbsp;simple&nbsp;test&nbsp;to&nbsp;verify&nbsp;that.&nbsp;Just&nbsp;make&nbsp;sure&nbsp;all&nbsp;your&nbsp;queues&nbsp;are&nbsp;set&nbsp;up&nbsp;and&nbsp;then&nbsp;publish&nbsp;a&nbsp;message&nbsp;but&nbsp;do&nbsp;not&nbsp;run&nbsp;any&nbsp;consumers.&nbsp;Login&nbsp;to&nbsp;management&nbsp;portal&nbsp;to&nbsp;check&nbsp;to&nbsp;which&nbsp;queue&nbsp;the&nbsp;message&nbsp;has&nbsp;been&nbsp;routed&nbsp;to.&lt;br&gt;&lt;br&gt;You&nbsp;can&nbsp;find&nbsp;more&nbsp;information&nbsp;about&nbsp;routing-key&nbsp;at&nbsp;[http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.bind.routing-key](http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.bind.routing-key)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Mariusz&lt;br&gt;&lt;br&gt;&lt;br&gt;On&nbsp;Wednesday,&nbsp;16&nbsp;July&nbsp;2014&nbsp;21:45:04&nbsp;UTC+1,&nbsp;Steve&nbsp;Schoon&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;Here&nbsp;is&nbsp;my&nbsp;strange&nbsp;problem&nbsp;that&nbsp;I&nbsp;can't&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;fix:&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;consumer&nbsp;1&nbsp;write&nbsp;message&nbsp;'a'&nbsp;to&nbsp;'work-queue'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;worker&nbsp;starts&nbsp;processing&nbsp;job&nbsp;'a'&nbsp;(this&nbsp;takes&nbsp;a&nbsp;few&nbsp;minutes)&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;consumer&nbsp;1&nbsp;subscribes&nbsp;to&nbsp;'queue-a'&nbsp;and&nbsp;try&nbsp;to&nbsp;consume&nbsp;1&nbsp;msg&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;consumer&nbsp;2&nbsp;subscribes&nbsp;to&nbsp;'queue-b'&nbsp;and&nbsp;tries&nbsp;to&nbsp;consume&nbsp;1&nbsp;msg&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;worker&nbsp;completes&nbsp;processing&nbsp;job&nbsp;'a'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;worker&nbsp;writes&nbsp;'a-is-done'&nbsp;message&nbsp;to&nbsp;'queue-a'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;**&nbsp;CONSUMER&nbsp;2&nbsp;RECEIVES&nbsp;THE&nbsp;'a-is-done'&nbsp;WRITTEN&nbsp;TO&nbsp;'queue-a'&nbsp;EVEN&nbsp;THOUGH&nbsp;IT'S&nbsp;CONSUMING&nbsp;FROM&nbsp;'queue-b'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;consumer&nbsp;1&nbsp;receives&nbsp;the&nbsp;expected&nbsp;message&nbsp;from&nbsp;'queue-a'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;worker&nbsp;starts&nbsp;processing&nbsp;job&nbsp;'b'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;worker&nbsp;completes&nbsp;processing&nbsp;job&nbsp;'b'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;worker&nbsp;writes&nbsp;'b-is-done'&nbsp;message&nbsp;to&nbsp;'queue-'b&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;'worker'&nbsp;is&nbsp;a&nbsp;console&nbsp;application&nbsp;that&nbsp;does&nbsp;the&nbsp;following&nbsp;in&nbsp;a&nbsp;forever&nbsp;loop:&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;reads&nbsp;1&nbsp;message&nbsp;from&nbsp;'work-queue',&nbsp;&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;does&nbsp;some&nbsp;processing&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;write&nbsp;1&nbsp;message&nbsp;to&nbsp;'queue-X'&nbsp;where&nbsp;'X'&nbsp;is&nbsp;part&nbsp;of&nbsp;the&nbsp;message&nbsp;it&nbsp;read&nbsp;from&nbsp;'work-queue'&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:13px&quot;&gt;'consumer1'&nbsp;and&nbsp;'consumer2'&nbsp;are&nbsp;requests&nbsp;being&nbsp;handled&nbsp;by&nbsp;a&nbsp;a&nbsp;ServiceStack-based&nbsp;webservice&nbsp;running&nbsp;under&nbsp;IIS&nbsp;7.5.&nbsp;&nbsp;The&nbsp;code&nbsp;looks&nbsp;like&nbsp;this:&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;string&nbsp;queueName&nbsp;=&nbsp;request.QueueName;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;BasicDeliverEventArgs&nbsp;result&nbsp;=&nbsp;null;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;var&nbsp;connectionFactory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;connectionFactory.Endpoint&nbsp;=&nbsp;new&nbsp;AmqpTcpEndpoint(&quot;myhostname&quot;);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;connectionFactory.UserName&nbsp;=&nbsp;&quot;user&quot;;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;connectionFactory.Password&nbsp;=&nbsp;&quot;pass&quot;;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;using&nbsp;(IConnection&nbsp;connection&nbsp;=&nbsp;connectionFactory.&lt;wbr&gt;CreateConnection())&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;using&nbsp;(IModel&nbsp;channel&nbsp;=&nbsp;connection.CreateModel())&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;channel.ExchangeDeclare(&quot;&lt;wbr&gt;myexchange&quot;,&nbsp;ExchangeType.Direct,&nbsp;true);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;channel.QueueDeclare(&lt;wbr&gt;queueName,&nbsp;false,&nbsp;false,&nbsp;true,&nbsp;null);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;channel.QueueBind(queueName,&nbsp;&quot;myexchange&quot;,&nbsp;&quot;&quot;);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace&quot;&gt;using&nbsp;(Subscription&nbsp;sub&nbsp;=&nbsp;new&nbsp;Subscription(channel,&nbsp;&quot;queue-a&quot;,&nbsp;false))&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace&quot;&gt;bool&nbsp;rc&nbsp;=&nbsp;sub.Next(60&nbsp;*&nbsp;5&nbsp;*&nbsp;1000,&nbsp;out&nbsp;result);&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace&quot;&gt;if&nbsp;(rc&nbsp;==&nbsp;false&nbsp;&amp;&amp;&nbsp;result&nbsp;==&nbsp;null)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:13px;font-family:'courier&nbsp;new',monospace;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:'courier&nbsp;new',monospace;font-size:13px&quot;&gt;throw&nbsp;new&nbsp;Exception(&quot;whatever&quot;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:'courier&nbsp;new',monospace;font-size:13px;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:'courier&nbsp;new',monospace;font-size:13px&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:'courier&nbsp;new',monospace;font-size:13px;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:'courier&nbsp;new',monospace;font-size:13px&quot;&gt;sub.Ack(result);&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:'courier&nbsp;new',monospace;font-size:13px&quot;&gt;string&nbsp;msg&nbsp;=&nbsp;Encoding.UTF8.GetString(&lt;wbr&gt;result.Body);&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:'courier&nbsp;new',monospace;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;How&nbsp;is&nbsp;is&nbsp;possible&nbsp;that&nbsp;when&nbsp;subscribed&nbsp;to&nbsp;'queue-a',&nbsp;that&nbsp;a&nbsp;message&nbsp;is&nbsp;received&nbsp;that&nbsp;we&nbsp;placed&nbsp;into&nbsp;'queue-b'?&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Hope&nbsp;this&nbsp;makes&nbsp;sense....thanks&nbsp;for&nbsp;any&nbsp;thoughts/suggestions.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;--&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Steve&nbsp;Schoon&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
