<tt>
Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;let&amp;#39;s&nbsp;start&nbsp;again&nbsp;because&nbsp;my&nbsp;first&nbsp;error&nbsp;report&nbsp;was&nbsp;wrong.&nbsp;I&nbsp;shouldn&amp;#39;t&nbsp;have&nbsp;mentioned&nbsp;mochiweb&nbsp;or&nbsp;the&nbsp;management&nbsp;plugin.&nbsp;I&nbsp;did&nbsp;so&nbsp;because&nbsp;the&nbsp;first&nbsp;time&nbsp;this&nbsp;error&nbsp;happened&nbsp;to&nbsp;me&nbsp;I&nbsp;was&nbsp;trying&nbsp;to&nbsp;enable&nbsp;those&nbsp;plugins.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So,&nbsp;yes.&nbsp;The&nbsp;release&nbsp;is&nbsp;created&nbsp;based&nbsp;on&nbsp;the&nbsp;dependencies&nbsp;from&nbsp;the&nbsp;rabbit.app&nbsp;which&nbsp;doesn&amp;#39;t&nbsp;declare&nbsp;inets&nbsp;as&nbsp;one&nbsp;if&nbsp;its&nbsp;dependencies:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-server/file/89d34c362862/ebin/rabbit_app.in#l13&quot;&gt;http://hg.rabbitmq.com/rabbitmq-server/file/89d34c362862/ebin/rabbit_app.in#l13&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;when&nbsp;the&nbsp;Erlang&nbsp;release&nbsp;is&nbsp;generated&nbsp;the&nbsp;inets&nbsp;is&nbsp;not&nbsp;shipped&nbsp;with&nbsp;the&nbsp;.tar&nbsp;created.&lt;/div&gt;&lt;div&gt;&lt;br&gt;Actually&nbsp;I&nbsp;think&nbsp;any&nbsp;app&nbsp;used&nbsp;by&nbsp;the&nbsp;project&nbsp;which&nbsp;also&nbsp;appears&nbsp;here:&nbsp;ls&nbsp;/usr/local/lib/erlang/lib/&nbsp;should&nbsp;be&nbsp;declared&nbsp;as&nbsp;a&nbsp;dependency.&nbsp;(kernel&nbsp;and&nbsp;stdlib&nbsp;are&nbsp;required&nbsp;anyway,&nbsp;same&nbsp;thing&nbsp;with&nbsp;erts&nbsp;and&nbsp;sasl&nbsp;if&nbsp;used).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Declaring&nbsp;the&nbsp;app&nbsp;dependency&nbsp;is&nbsp;not&nbsp;required&nbsp;to&nbsp;generate&nbsp;a&nbsp;release&nbsp;per-se,&nbsp;but&nbsp;is&nbsp;required&nbsp;by&nbsp;the&nbsp;rabbit_prelaunch.erl&nbsp;script&nbsp;that&nbsp;generates&nbsp;the&nbsp;release&nbsp;file&nbsp;automatically:&nbsp;See: &lt;a&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-server/file/89d34c362862/src/rabbit_prelaunch.erl#l72&quot;&gt;http://hg.rabbitmq.com/rabbitmq-server/file/89d34c362862/src/rabbit_prelaunch.erl#l72&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;when&nbsp;generating&nbsp;a&nbsp;.rel&nbsp;file&nbsp;you&nbsp;can&nbsp;actually&nbsp;write&nbsp;all&nbsp;the&nbsp;app&nbsp;dependencies&nbsp;manually&nbsp;but&nbsp;I&nbsp;automated&nbsp;the&nbsp;process&nbsp;by&nbsp;&amp;quot;borrowing&amp;quot;&nbsp;code&nbsp;from&nbsp;the&nbsp;rabbit_prelaunch&nbsp;script.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
So&nbsp;in&nbsp;my&nbsp;case&nbsp;to&nbsp;fix&nbsp;the&nbsp;issue&nbsp;I&nbsp;just&nbsp;added&nbsp;some&nbsp;extra&nbsp;apps&nbsp;here: &lt;a&nbsp;href=&quot;https://github.com/videlalvaro/tamedrabbit/blob/master/erlang/rabbit_release.erl#L9&quot;&gt;https://github.com/videlalvaro/tamedrabbit/blob/master/erlang/rabbit_release.erl#L9&lt;/a&gt;&nbsp;(Note&nbsp;that&nbsp;rabbit_prelaunch.erl&nbsp;has&nbsp;the&nbsp;same&nbsp;erlang&nbsp;macro&nbsp;on&nbsp;top).&nbsp;By&nbsp;adding&nbsp;inets&nbsp;and&nbsp;xmerl&nbsp;there&nbsp;I&nbsp;made&nbsp;sure&nbsp;that&nbsp;those&nbsp;apps&nbsp;are&nbsp;shipped&nbsp;with&nbsp;my&nbsp;custom&nbsp;release.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;use&nbsp;my&nbsp;own&nbsp;rabbit_release.erl&nbsp;to&nbsp;generate&nbsp;the&nbsp;release&nbsp;.tar&nbsp;and&nbsp;what&nbsp;not.&nbsp;Then&nbsp;rabbitmq-server&nbsp;uses&nbsp;rabbit_prelaunch.erl&nbsp;to&nbsp;generate&nbsp;it&amp;#39;s&nbsp;own&nbsp;release&nbsp;file&nbsp;that&nbsp;is&nbsp;loaded&nbsp;during&nbsp;server&nbsp;startup.&nbsp;That&nbsp;release&nbsp;file&nbsp;generated&nbsp;by&nbsp;the&nbsp;prelaunch&nbsp;script&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;target&nbsp;system,&nbsp;that&nbsp;of&nbsp;course&nbsp;will&nbsp;not&nbsp;include&nbsp;inets.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does&nbsp;it&nbsp;make&nbsp;sense&nbsp;now?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alvaro&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Apr&nbsp;25,&nbsp;2012&nbsp;at&nbsp;1:57&nbsp;PM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;25/04/12&nbsp;12:52,&nbsp;Alvaro&nbsp;Videla&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;tried&nbsp;to&nbsp;reproduce&nbsp;the&nbsp;problem.&nbsp;Actually&nbsp;*rabbitmq-server*&nbsp;needs&nbsp;to&lt;br&gt;<br>
declare&nbsp;*inets*&nbsp;in&nbsp;its&nbsp;app&nbsp;dependencies.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
I&nbsp;still&nbsp;don&amp;#39;t&nbsp;get&nbsp;it&nbsp;-&nbsp;does&nbsp;the&nbsp;release&nbsp;build&nbsp;thing&nbsp;that&nbsp;you&nbsp;have&nbsp;check&nbsp;only&nbsp;the&nbsp;rabbit.app&nbsp;descriptor,&nbsp;or&nbsp;those&nbsp;of&nbsp;all&nbsp;the&nbsp;plugins&nbsp;too?&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;the&nbsp;former,&nbsp;why&nbsp;did&nbsp;adding&nbsp;xmerl&nbsp;to&nbsp;rabbitmq-management&nbsp;fix&nbsp;anything?&nbsp;(it&nbsp;was&nbsp;the&nbsp;right&nbsp;thing&nbsp;to&nbsp;do&nbsp;anyway,&nbsp;but&nbsp;why&nbsp;did&nbsp;it&nbsp;not&nbsp;cause&nbsp;this&nbsp;problem?)&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;the&nbsp;latter,&nbsp;why&nbsp;is&nbsp;inets&nbsp;not&nbsp;being&nbsp;picked&nbsp;up&nbsp;due&nbsp;to&nbsp;its&nbsp;presence&nbsp;in&nbsp;mochiweb.app?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;VMware&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
