<tt>
&lt;div&gt;We&nbsp;run&nbsp;rabbitMQ&nbsp;on&nbsp;Amazon&nbsp;EC2&nbsp;&amp;quot;small&amp;quot;&nbsp;servers&nbsp;(1.7GB&nbsp;ram.)&nbsp;The&nbsp;rabbitMQ&nbsp;install&nbsp;is&nbsp;out&nbsp;of&nbsp;the&nbsp;box,&nbsp;simply&nbsp;installing&nbsp;from&nbsp;the&nbsp;debian&nbsp;package.&nbsp;We&nbsp;access&nbsp;rabbit&nbsp;through&nbsp;a&nbsp;python&nbsp;AMQP&nbsp;interface&nbsp;(py-amqplib)&nbsp;and&nbsp;wrapper&nbsp;client&nbsp;that&nbsp;we&nbsp;set&nbsp;up&nbsp;like&nbsp;this: &lt;a&nbsp;href=&quot;http://github.com/bwhitman/py-amqplib-wrapper/tree/master&quot;&gt;http://github.com/bwhitman/py-amqplib-wrapper/tree/master&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Our&nbsp;use&nbsp;is&nbsp;probably&nbsp;non-normative:&nbsp;we&nbsp;keep&nbsp;millions&nbsp;of&nbsp;messages&nbsp;around&nbsp;most&nbsp;of&nbsp;the&nbsp;day.&nbsp;An&nbsp;average&nbsp;message&nbsp;stays&nbsp;in&nbsp;a&nbsp;queue&nbsp;for&nbsp;up&nbsp;to&nbsp;12&nbsp;hours,&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;dozen&nbsp;or&nbsp;so&nbsp;queues&nbsp;that&nbsp;each&nbsp;reach&nbsp;about&nbsp;1&nbsp;million&nbsp;messages&nbsp;at&nbsp;peak.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;quickly&nbsp;determined&nbsp;that&nbsp;a&nbsp;single&nbsp;EC2&nbsp;small&nbsp;node&nbsp;can&nbsp;support&nbsp;up&nbsp;to&nbsp;about&nbsp;1-2m&nbsp;un-ack&amp;#39;d&nbsp;messages&nbsp;before&nbsp;it&nbsp;runs&nbsp;out&nbsp;of&nbsp;ram.&nbsp;And&nbsp;when&nbsp;it&nbsp;runs&nbsp;out&nbsp;of&nbsp;ram&nbsp;the&nbsp;rabbit&nbsp;instance&nbsp;stops&nbsp;responding.&nbsp;To&nbsp;get&nbsp;around&nbsp;this&nbsp;we&nbsp;boot&nbsp;more&nbsp;rabbit&nbsp;nodes&nbsp;and&nbsp;we shard&nbsp;via&nbsp;a&nbsp;consistent&nbsp;hash&nbsp;that&nbsp;routes&nbsp;messages&nbsp;based&nbsp;on&nbsp;their&nbsp;ID.&nbsp;This&nbsp;gets&nbsp;us&nbsp;more&nbsp;message&nbsp;capacity&nbsp;but&nbsp;gets&nbsp;expensive&nbsp;and&nbsp;has&nbsp;more&nbsp;moving&nbsp;parts&nbsp;that&nbsp;can&nbsp;break.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;better&nbsp;way.&nbsp;I&nbsp;would&nbsp;gladly&nbsp;take&nbsp;a&nbsp;message&nbsp;consume&nbsp;speed&nbsp;hit&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;have&nbsp;the&nbsp;rabbit&nbsp;store&nbsp;backed&nbsp;by&nbsp;disk&nbsp;instead&nbsp;of&nbsp;keeping&nbsp;it&nbsp;live&nbsp;in&nbsp;ram&nbsp;as&nbsp;it&nbsp;seems&nbsp;to.&nbsp;Is&nbsp;this&nbsp;possible?&nbsp;How&nbsp;do&nbsp;people&nbsp;set&nbsp;up&nbsp;simple&nbsp;message&nbsp;queues&nbsp;that&nbsp;can&nbsp;store&nbsp;millions&nbsp;of&nbsp;messages&nbsp;for&nbsp;long&nbsp;periods&nbsp;of&nbsp;time?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
