<tt>
The&nbsp;amqp_consume&nbsp;example&nbsp;sets&nbsp;no_ack&nbsp;=&nbsp;1,&nbsp;so&nbsp;the&nbsp;broker&nbsp;sends&nbsp;messages&nbsp;to&nbsp;consumers&nbsp;as&nbsp;fast&nbsp;as&nbsp;possible&nbsp;without&nbsp;waiting&nbsp;for&nbsp;any&nbsp;acknowledgement&nbsp;from&nbsp;clients.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;make&nbsp;it&nbsp;work&nbsp;more&nbsp;like&nbsp;a&nbsp;work-queue,&nbsp;you&#39;d&nbsp;need&nbsp;to&nbsp;set&nbsp;no_ack&nbsp;=&nbsp;0,&nbsp;requiring&nbsp;the&nbsp;consumer&nbsp;to&nbsp;send&nbsp;a&nbsp;basic.ack&nbsp;(amqp_basic_ack).&nbsp;In&nbsp;addition&nbsp;you&#39;ll&nbsp;also&nbsp;need&nbsp;to&nbsp;set&nbsp;a&nbsp;qos&nbsp;(using&nbsp;amqp_basic_qos)&nbsp;which&nbsp;will&nbsp;limit&nbsp;the&nbsp;number&nbsp;of&nbsp;unacked&nbsp;messages&nbsp;that&nbsp;each&nbsp;consumer&nbsp;can&nbsp;have.&nbsp;(to&nbsp;be&nbsp;pedantic&nbsp;-&nbsp;the&nbsp;qos&nbsp;parameter&nbsp;is&nbsp;per-channel:&nbsp;see:&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/consumer-prefetch.html&quot;&gt;http://www.rabbitmq.com/consumer-prefetch.html&lt;/a&gt;&nbsp;)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Alan&lt;/div&gt;&lt;br&gt;&lt;div&gt;On&nbsp;Fri&nbsp;Jun&nbsp;13&nbsp;2014&nbsp;at&nbsp;12:30:38&nbsp;PM,&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ktran0003@gmail.com&quot;&gt;ktran0003@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;tried&nbsp;out&nbsp;the&nbsp;producer/consumer&nbsp;examples&nbsp;included&nbsp;in &nbsp;rabbitmq-c&nbsp;as&nbsp;follows:&lt;br&gt;One&nbsp;producer&nbsp;and&nbsp;two&nbsp;consumers&lt;br&gt;&lt;br&gt;In&nbsp;two&nbsp;separate&nbsp;terminal&nbsp;windows: &nbsp;./amqp_consumer&nbsp;localhost&nbsp;5672&lt;br&gt;In&nbsp;one&nbsp;terminal&nbsp;window: &nbsp;%./amqp_producer&nbsp;localhost&nbsp;5672&nbsp;1&nbsp;6&lt;br&gt;<br>
&lt;br&gt;Both&nbsp;consumers&nbsp;show:&lt;br&gt;6737&nbsp;ms:&nbsp;Received&nbsp;1&nbsp;-&nbsp;1&nbsp;since&nbsp;last&nbsp;report&nbsp;(0&nbsp;Hz)&lt;br&gt;6737&nbsp;ms:&nbsp;Received&nbsp;2&nbsp;-&nbsp;1&nbsp;since&nbsp;last&nbsp;report&nbsp;(16949&nbsp;Hz)&lt;br&gt;7739&nbsp;ms:&nbsp;Received&nbsp;3&nbsp;-&nbsp;1&nbsp;since&nbsp;last&nbsp;report&nbsp;(0&nbsp;Hz)&lt;br&gt;8737&nbsp;ms:&nbsp;Received&nbsp;4&nbsp;-&nbsp;1&nbsp;since&nbsp;last&nbsp;report&nbsp;(1&nbsp;Hz)&lt;br&gt;<br>
9738&nbsp;ms:&nbsp;Received&nbsp;5&nbsp;-&nbsp;1&nbsp;since&nbsp;last&nbsp;report&nbsp;(0&nbsp;Hz)&lt;br&gt;10737&nbsp;ms:&nbsp;Received&nbsp;6&nbsp;-&nbsp;1&nbsp;since&nbsp;last&nbsp;report&nbsp;(1&nbsp;Hz)&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;a&nbsp;surprise&nbsp;to&nbsp;me. &nbsp;I&nbsp;thought&nbsp;the&nbsp;messages&nbsp;should&nbsp;be&nbsp;sent&nbsp;round-robin&nbsp;to&nbsp;both&nbsp;consumers&nbsp;(like&nbsp;the&nbsp;python&nbsp;example)&nbsp;so&nbsp;they&nbsp;would&nbsp;not&nbsp;receive&nbsp;everything&nbsp;like&nbsp;a&nbsp;fanout.&lt;br&gt;<br>
Do&nbsp;I&nbsp;miss&nbsp;something? &nbsp;If&nbsp;this&nbsp;is&nbsp;the&nbsp;way&nbsp;it&#39;s&nbsp;supposed&nbsp;to&nbsp;work,&nbsp;how&nbsp;I&nbsp;change&nbsp;the&nbsp;code&nbsp;to&nbsp;make&nbsp;it&nbsp;work&nbsp;like&nbsp;a&nbsp;work&nbsp;queue?&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;-Kim&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;u&gt;&lt;/u&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;u&gt;&lt;/u&gt;cgi-bin/mailman/listinfo/&lt;u&gt;&lt;/u&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>

</tt>
