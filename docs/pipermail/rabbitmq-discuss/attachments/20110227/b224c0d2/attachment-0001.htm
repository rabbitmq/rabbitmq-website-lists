<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;well&nbsp;,&nbsp;thank&nbsp;you&nbsp;for&nbsp;your&nbsp;quick&nbsp;response. &lt;div&gt;&lt;div&gt;Well,&nbsp;it&nbsp;seemed&nbsp;fine&nbsp;when&nbsp;I&nbsp;tried&nbsp;to&nbsp;do&nbsp;it&nbsp;all&nbsp;in&nbsp;my&nbsp;local&nbsp;computer&nbsp;(two&nbsp;apps&nbsp;and&nbsp;rabbit)&lt;/div&gt;&lt;div&gt;but&nbsp;when&nbsp;I&nbsp;upgraded&nbsp;the&nbsp;clients&nbsp;in&nbsp;the&nbsp;production&nbsp;environment&nbsp;(whoops)&nbsp;the&nbsp;clients&nbsp;threw&nbsp;the&nbsp;following&nbsp;exception: &lt;/div&gt;<br>
&lt;div&gt;(side&nbsp;note:&nbsp;I&nbsp;did&nbsp;not&nbsp;change&nbsp;any&nbsp;property&nbsp;(socket,port&nbsp;etc&nbsp;)&nbsp;in&nbsp;the&nbsp;client&nbsp;side.&nbsp;so&nbsp;i&nbsp;am&nbsp;guessing&nbsp;firewall&nbsp;is&nbsp;not&nbsp;an&nbsp;option&nbsp;because&nbsp;everything&nbsp;worked&nbsp;with&nbsp;the&nbsp;former&nbsp;version&nbsp;of&nbsp;rabbit&nbsp;-&nbsp;1.7.0.&nbsp; )&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;com.rabbitmq.client.ShutdownSignalException:&nbsp;connection&nbsp;error;&nbsp;reason:&nbsp;java.net.SocketException:&nbsp;Connection&nbsp;reset&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.AMQConnection.shutdown(AMQConnection.java:588)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:454)&lt;/div&gt;&lt;div&gt;Caused&nbsp;by:&nbsp;com.rabbitmq.client.ShutdownSignalException:&nbsp;connection&nbsp;error;&nbsp;reason:&nbsp;java.net.SocketException:&nbsp;Connection&nbsp;reset&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;...&nbsp;2&nbsp;more&lt;/div&gt;&lt;div&gt;Caused&nbsp;by:&nbsp;java.net.SocketException:&nbsp;Connection&nbsp;reset&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;java.net.SocketInputStream.read(Unknown&nbsp;Source)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;java.io.BufferedInputStream.fill(Unknown&nbsp;Source)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;java.io.BufferedInputStream.read(Unknown&nbsp;Source)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;java.io.DataInputStream.readUnsignedByte(Unknown&nbsp;Source)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.Frame.readFrom(Frame.java:117)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:151)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.AMQConnection.readFrame(AMQConnection.java:379)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:420)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you &lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Feb&nbsp;25,&nbsp;2011&nbsp;at&nbsp;1:46&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;24/02/11&nbsp;15:48,&nbsp;mysurf&nbsp;mail&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
What&nbsp;I&nbsp;basically&nbsp;see&nbsp;is&nbsp;that&nbsp;we&nbsp;start&nbsp;listening&nbsp;on&nbsp;the&nbsp;receiving&lt;br&gt;<br>
app&nbsp;(subscriber)&nbsp; as&nbsp;follows:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;boolean&nbsp;durable&nbsp;=&nbsp;false;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;final&nbsp;boolean&nbsp;mandatory&nbsp;=&nbsp;true;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;final&nbsp;boolean&nbsp;immediate&nbsp;=&nbsp;true;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.exchangeDeclare(exchangeName,&nbsp;&amp;quot;direct&amp;quot;,&nbsp;durable,&lt;br&gt;<br>
mandatory,&nbsp;immediate,&nbsp;new&nbsp;HashMap&amp;lt;String,&nbsp;Object&amp;gt;());&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.queueDeclare(queueName,&nbsp;durable);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.queueBind(queueName,&nbsp;exchangeName,&nbsp;routingKey);&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;boolean&nbsp;noAck&nbsp;=&nbsp;true;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;queueingConsumer&nbsp;=&nbsp;new&nbsp;QueueingConsumer(channel);&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.basicConsume(queueName,&nbsp;noAck,&nbsp;queueingConsumer);&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
So&nbsp;the&nbsp;client&nbsp;is&nbsp;consuming&nbsp;in&nbsp;noAck/autoAck&nbsp;mode,&nbsp;which&nbsp;means&nbsp;it&nbsp;*must&nbsp;not*&nbsp;basicAck&nbsp;the&nbsp;messages.&nbsp;The&nbsp;error&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&nbsp; &nbsp; &nbsp;&amp;gt;&nbsp;reply-code=406,reply-text=PRECONDITION_FAILED&nbsp;-&nbsp;unknown&nbsp;delivery&nbsp;tag&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;&amp;gt;&nbsp;1,class-id=60,method-id=80),null,&amp;quot;&amp;quot;}&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
is&nbsp;most&nbsp;likely&nbsp;due&nbsp;it&nbsp;doing&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
