<tt>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;&quot;&gt;For&nbsp;some&nbsp;reason&nbsp;I&nbsp;can&amp;#39;t&nbsp;get&nbsp;this&nbsp;example&nbsp;to&nbsp;work:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;&amp;#39;Times&nbsp;New&nbsp;Roman&amp;#39;;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;pre&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;<br>
<br>
[sender]<br>
var&nbsp;sys&nbsp;=&nbsp;require(&amp;#39;sys&amp;#39;);<br>
var&nbsp;amqp&nbsp;=&nbsp;require(&amp;#39;./amqp&amp;#39;);<br>
<br>
var&nbsp;connection&nbsp;=&nbsp;amqp.createConnection({&nbsp;host:&nbsp;&amp;#39;localhost&amp;#39;&nbsp;});<br>
<br>
//&nbsp;Wait&nbsp;for&nbsp;connection&nbsp;to&nbsp;become&nbsp;established.<br>
connection.addListener(&amp;#39;ready&amp;#39;,&nbsp;function&nbsp;()&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;x&nbsp;=&nbsp;connection.exchange()<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;q&nbsp;=&nbsp;connection.queue(&amp;quot;aqueuename&amp;quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;autoDelete:&nbsp;true,&nbsp;durable:&nbsp;false,&nbsp;exclusive:&nbsp;false&nbsp;});<br>
&nbsp;&nbsp;&nbsp;&nbsp;x.publish(&amp;#39;aqueuename&amp;#39;,&nbsp;{foo:&nbsp;&amp;quot;bar&amp;quot;});<br>
});<br>
<br>
[receiver]<br>
#!/usr/bin/env&nbsp;python<br>
import&nbsp;pika<br>
<br>
connection&nbsp;=&nbsp;pika.AsyncoreConnection(pika.ConnectionParameters(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host=&amp;#39;localhost&amp;#39;))<br>
channel&nbsp;=&nbsp;connection.channel()<br>
<br>
q&nbsp;=&nbsp;channel.queue_declare(queue=&amp;#39;aqueuename&amp;#39;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_delete=True,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;durable=False,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exclusive=False)<br>
<br>
print&nbsp;&amp;#39;&nbsp;[*]&nbsp;Waiting&nbsp;for&nbsp;messages.&nbsp;To&nbsp;exit&nbsp;press&nbsp;CTRL+C&amp;#39;<br>
<br>
def&nbsp;callback(ch,&nbsp;method,&nbsp;properties,&nbsp;body):<br>
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&amp;quot;&nbsp;[x]&nbsp;Received&nbsp;%r&amp;quot;&nbsp;%&nbsp;(body,)<br>
<br>
channel.basic_consume(callback,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queue=&amp;#39;aqueuename&amp;#39;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_ack=True)<br>
<br>
pika.asyncore_loop()&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;I&nbsp;wanted&nbsp;to&nbsp;used&nbsp;a&nbsp;BlockingConnection.&nbsp;Do&nbsp;you&nbsp;know&nbsp;if&nbsp;this&nbsp;works&nbsp;with&nbsp;a&nbsp;BlockingConnection?&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;Thanks&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;&quot;&gt;Ricardo&lt;/pre&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;Ricardo&nbsp;Brízido&lt;br&gt;<br>

</tt>
