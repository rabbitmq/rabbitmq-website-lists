<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Calibri;&nbsp;&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;sorry&nbsp;for&nbsp;the&nbsp;doublepost&nbsp;here&nbsp;-&nbsp;not&nbsp;sure&nbsp;if&nbsp;my&nbsp;other&nbsp;one&nbsp;even&nbsp;got&nbsp;through,&nbsp;since&nbsp;my&nbsp;original&nbsp;subscribed&nbsp;address&nbsp;doesn't&nbsp;match&nbsp;what&nbsp;my&nbsp;sender&nbsp;address&nbsp;goes&nbsp;OUT&nbsp;as..&nbsp;anyway,&nbsp;that's&nbsp;fixed,&nbsp;so&nbsp;here's&nbsp;my&nbsp;original&nbsp;question:&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;So,&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;get&nbsp;mcollective&nbsp;to&nbsp;work&nbsp;with&nbsp;a&nbsp;highly-available&nbsp;rabbitMQ&nbsp;cluster.&nbsp;&amp;nbsp;Using&nbsp;SSL&nbsp;(that&nbsp;is&nbsp;actually&nbsp;working),&nbsp;and&nbsp;an&nbsp;F5&nbsp;bigIP.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;So,&nbsp;as&nbsp;long&nbsp;as&nbsp;both&nbsp;of&nbsp;my&nbsp;rabbitmq&nbsp;nodes&nbsp;are&nbsp;up,&nbsp;everything&nbsp;works&nbsp;great.&nbsp;&amp;nbsp;Loadbalancer&nbsp;works,&nbsp;even&nbsp;with&nbsp;SSL&nbsp;turned&nbsp;on,&nbsp;all&nbsp;my&nbsp;mcollective&nbsp;stuff&nbsp;works,&nbsp;everything&nbsp;is&nbsp;happy&nbsp;and&nbsp;good.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;I&nbsp;have&nbsp;both&nbsp;of&nbsp;my&nbsp;rabbitmq&nbsp;nodes&nbsp;configured&nbsp;as&nbsp;disc&nbsp;nodes,&nbsp;and&nbsp;they&nbsp;share&nbsp;a&nbsp;common&nbsp;config&nbsp;as&nbsp;such:&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;(partial&nbsp;config):&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;[&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;{rabbit,&nbsp;[&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{cluster_nodes,&nbsp;['rabbit@rabbit01',&nbsp;'rabbit@rabbit02',&nbsp;'rabbit@rabbit03',&nbsp;'rabbit@rabbit04']},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{ssl_listeners,&nbsp;[5671]},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{ssl_options,&nbsp;[{cacertfile,&amp;quot;/etc/rabbitmq/ca/cacert.pem&amp;quot;},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{certfile,&amp;quot;/etc/rabbitmq/servercert/cert.pem&amp;quot;},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{keyfile,&amp;quot;/etc/rabbitmq/servercert/key.pem&amp;quot;},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{verify,verify_none},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{fail_if_no_peer_cert,false}]},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{auth_backends,&nbsp;[rabbit_auth_backend_internal,rabbit_auth_backend_ldap]}&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;]},&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;{rabbitmq_stomp,&nbsp;[{ssl_listeners,&nbsp;[6163]}]},&lt;/span&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;(at&nbsp;the&nbsp;moment,&nbsp;only&nbsp;rabbit01&nbsp;and&nbsp;rabbit02&nbsp;are&nbsp;online).&nbsp;&amp;nbsp;So&nbsp;if&nbsp;I&nbsp;list&nbsp;the&nbsp;queues&nbsp;under&nbsp;the&nbsp;/mcollective&nbsp;vhost,&nbsp;everything&nbsp;looks&nbsp;normal&nbsp;(on&nbsp;both&nbsp;nodes).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;If&nbsp;I&nbsp;stop&nbsp;rabbit02,&nbsp;no&nbsp;problem,&nbsp;everything&nbsp;still&nbsp;works.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;If&nbsp;I&nbsp;stop&nbsp;rabbit01,&nbsp;everything&nbsp;breaks.&nbsp;&amp;nbsp;rabbitmqctl&nbsp;list_queues&nbsp;-p&nbsp;/mcollective&nbsp;shows&nbsp;almost&nbsp;nothing&nbsp;-&nbsp;the&nbsp;main&nbsp;mcollective&nbsp;queue&nbsp;and&nbsp;almost&nbsp;every&nbsp;child&nbsp;just&nbsp;magically&nbsp;disappears.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;As&nbsp;I&nbsp;said,&nbsp;I'm&nbsp;kind&nbsp;of&nbsp;new&nbsp;to&nbsp;this;&nbsp;what&nbsp;is&nbsp;going&nbsp;on&nbsp;here?&nbsp;&amp;nbsp;Is&nbsp;it&nbsp;because&nbsp;mcollective&nbsp;isn't&nbsp;creating&nbsp;the&nbsp;queues&nbsp;as&nbsp;'mirrored'&nbsp;and&nbsp;rabbit01&nbsp;is&nbsp;elected&nbsp;as&nbsp;the&nbsp;master?&nbsp;&amp;nbsp;or&nbsp;is&nbsp;something&nbsp;else&nbsp;going&nbsp;on?&nbsp;&amp;nbsp;If&nbsp;my&nbsp;assumption&nbsp;is&nbsp;correct,&nbsp;is&nbsp;there&nbsp;anything&nbsp;I&nbsp;can&nbsp;do<br>
&nbsp;about&nbsp;this?&lt;/div&gt;<br>
&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;Scott&nbsp;M.&nbsp;Stone,&lt;/b&gt;&amp;nbsp;Sr.&nbsp;Systems&nbsp;Engineer&amp;nbsp;|&nbsp;ServiceNow&nbsp;|&nbsp;Office&nbsp;425-629-2803&nbsp;|&nbsp;Mobile&nbsp;408-857-2973&nbsp;|&nbsp;www.service-now.com&lt;/div&gt;<br>
&lt;div&gt;Transform&nbsp;IT&amp;nbsp;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
