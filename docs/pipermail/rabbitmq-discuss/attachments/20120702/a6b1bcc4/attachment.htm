<tt>
I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;get&nbsp;the&nbsp;Ruby-AMQP&nbsp;gem&nbsp;working&nbsp;with&nbsp;RabbitMQ&amp;#39;s&nbsp;federation&nbsp;plugin.<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;federation&nbsp;set&nbsp;up&nbsp;as&nbsp;following:&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-top:15px;margin-bottom:15px;padding:6px&nbsp;10px;border:1px&nbsp;solid&nbsp;rgb(204,204,204);font-size:13px;font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;background-color:rgb(248,248,248);line-height:19px;overflow:auto;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;color:rgb(51,51,51)&quot;&gt;<br>
<br>
&lt;code&nbsp;style=&quot;margin:0px;padding:0px;border:none;font-size:12px;font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;word-wrap:break-word;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px&quot;&gt;{rabbitmq_federation,<br>
&nbsp;&nbsp;&nbsp;[&nbsp;{exchanges,&nbsp;[[{exchange,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;xanview&amp;quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{virtual_host,&nbsp;&amp;quot;/&amp;quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{type,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;topic&amp;quot;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{durable,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{auto_delete,&nbsp;&nbsp;false},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{internal,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;false},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{upstream_set,&nbsp;&amp;quot;my-upstreams&amp;quot;}]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]},&nbsp;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;appears&nbsp;in&nbsp;the&nbsp;web&nbsp;interface&nbsp;as:&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-top:15px;margin-bottom:15px;padding:6px&nbsp;10px;border:1px&nbsp;solid&nbsp;rgb(204,204,204);font-size:13px;font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;background-color:rgb(248,248,248);line-height:19px;overflow:auto;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;color:rgb(51,51,51)&quot;&gt;<br>
<br>
&lt;code&nbsp;style=&quot;margin:0px;padding:0px;border:none;font-size:12px;font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;word-wrap:break-word;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px&quot;&gt;Type&nbsp;&nbsp;&nbsp;&nbsp;x-federation<br>
Parameters&nbsp;&nbsp;&nbsp;arguments:&nbsp;upstream-set:&nbsp;&nbsp;&nbsp;my-upstreams<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&nbsp;&nbsp;topic<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;durable:&nbsp;&nbsp;&nbsp;true&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;try&nbsp;to&nbsp;use&nbsp;it&nbsp;in&nbsp;Ruby&nbsp;in&nbsp;a&nbsp;consumer&nbsp;like&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;line-height:20px;color:rgb(51,51,51);font-size:13px;font-family:Helvetica,arial,freesans,clean,sans-serif;margin:0px;border:0px;padding:0px&quot;&gt;<br>
<br>
<br>
&lt;pre&nbsp;style=&quot;margin-top:15px;margin-bottom:15px;padding:6px&nbsp;10px;border:1px&nbsp;solid&nbsp;rgb(204,204,204);font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;background-color:rgb(248,248,248);line-height:19px;overflow:auto;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;exchange&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;=&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,128,128)&quot;&gt;AMQP&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;::&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,128,128)&quot;&gt;Exchange&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;channel&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;,&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;quot;x-federation&amp;quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;,&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;quot;my-exchange&amp;quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;,&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:durable&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;=&amp;gt;&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;true&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;)&lt;/span&gt;<br>
&lt;/pre&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;However&nbsp;in&nbsp;the&nbsp;RabbitMQ&nbsp;config&nbsp;I&nbsp;get&nbsp;this&nbsp;error:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;&lt;pre&nbsp;style=&quot;margin-top:15px;margin-bottom:15px;padding:6px&nbsp;10px;border:1px&nbsp;solid&nbsp;rgb(204,204,204);font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;background-color:rgb(248,248,248);line-height:19px;overflow:auto;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px&quot;&gt;<br>
<br>
&lt;code&nbsp;style=&quot;margin:0px;padding:0px;border:none;font-size:12px;font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;word-wrap:break-word;background-color:transparent;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px&quot;&gt;connection&nbsp;&amp;lt;0.16597.1&amp;gt;,&nbsp;channel&nbsp;2&nbsp;-&nbsp;error:<br>
{amqp_error,precondition_failed,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;inequivalent&nbsp;arg&nbsp;&amp;#39;type&amp;#39;for&nbsp;exchange&nbsp;&amp;#39;xanview&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;:&nbsp;received&nbsp;none&nbsp;but&nbsp;current&nbsp;is&nbsp;the&nbsp;value&nbsp;&amp;#39;topic&amp;#39;&nbsp;of&nbsp;type&nbsp;&amp;#39;longstr&amp;#39;&amp;quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;#39;exchange.declare&amp;#39;}&lt;/code&gt;&lt;/pre&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;seems&nbsp;something&nbsp;in&nbsp;the&nbsp;Ruby-AMQP&nbsp;gem&nbsp;is&nbsp;preventing&nbsp;me&nbsp;from&nbsp;using&nbsp;an&nbsp;exchange&nbsp;type&nbsp;&amp;quot;x-federation&amp;quot;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;consume&nbsp;messages&nbsp;sent&nbsp;to&nbsp;a&nbsp;federated&nbsp;exchange&nbsp;using&nbsp;your&nbsp;typical:&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-top:15px;margin-bottom:15px;padding:6px&nbsp;10px;border:1px&nbsp;solid&nbsp;rgb(204,204,204);font-size:13px;font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;background-color:rgb(248,248,248);line-height:19px;overflow:auto;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;color:rgb(51,51,51)&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,128,128)&quot;&gt;AMQP&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;start&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;amqp://guest:guest@localhost:25672&amp;#39;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;)&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;do&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;|&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;connection&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;,&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;open_ok&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;|&lt;/span&gt;<br>
&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;channel&lt;/span&gt;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;=&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,128,128)&quot;&gt;AMQP&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;::&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,128,128)&quot;&gt;Channel&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;connection&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;)&lt;/span&gt;<br>
&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;channel&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;queue&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;,&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:durable&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;=&amp;gt;&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;true&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;)&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;do&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;|&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;queue&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;|&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;queue&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;bind&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;xanview&amp;#39;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;,&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:routing_key&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;=&amp;gt;&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;#&amp;#39;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;)&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;queue&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;subscribe&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;do&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;|&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;metadata&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;,&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;payload&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;|&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,134,179)&quot;&gt;puts&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;quot;Recieved&nbsp;message:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;#{&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;payload&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;inspect&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;.&amp;quot;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;end&lt;/span&gt;&nbsp;<br>
&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;end&lt;/span&gt;&nbsp;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;end&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;get&nbsp;this&nbsp;exception&nbsp;for&nbsp;the&nbsp;first&nbsp;message&nbsp;received:&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;margin-top:15px;margin-bottom:15px;padding:6px&nbsp;10px;border:1px&nbsp;solid&nbsp;rgb(204,204,204);font-size:13px;font-family:Consolas,Menlo,&amp;#39;Liberation&nbsp;Mono&amp;#39;,Courier,monospace;background-color:rgb(248,248,248);line-height:19px;overflow:auto;border-top-left-radius:3px;border-top-right-radius:3px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;color:rgb(51,51,51)&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,38)&quot;&gt;/usr/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;local&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rvm&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;ruby&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;1&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;p194&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;protocol&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;0&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;lib&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;protocol&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;table&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rb&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;:&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;89&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:in&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;`decode&amp;#39;:&nbsp;NotImplementedError&nbsp;(NotImplementedError)&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-protocol-0.9.3/lib/amq/protocol/table_value_decoder.rb:144:in&nbsp;`&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;decode_hash&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-protocol-0.9.3/lib/amq/protocol/table_value_decoder.rb:46:in&nbsp;`decode_array&amp;#39;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;from&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,38)&quot;&gt;/usr/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;local&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rvm&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;ruby&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;1&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;p194&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;protocol&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;0&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;lib&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;protocol&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;table&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rb&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;:&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;99&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:in&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;`decode&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-protocol-0.9.3/lib/amq/protocol/client.rb:1560:in&nbsp;`&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;block&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;in&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;decode_properties&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-protocol-0.9.3/lib/amq/protocol/client.rb:1543:in&nbsp;`each&amp;#39;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;from&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,38)&quot;&gt;/usr/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;local&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rvm&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;ruby&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;1&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;p194&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;protocol&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;0&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;lib&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;protocol&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;client&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rb&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;:&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;1543&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:in&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;`decode_properties&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-protocol-0.9.3/lib/amq/protocol/frame.rb:142:in&nbsp;`&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;decode_payload&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-protocol-0.9.3/lib/amq/protocol/frame.rb:115:in&nbsp;`body_size&amp;#39;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;from&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,38)&quot;&gt;/usr/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;local&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rvm&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;ruby&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;1&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;p194&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;client&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;0&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;lib&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;client&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;async&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;adapter&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rb&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;:&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;675&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:in&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;`content_complete?&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-client-0.9.3/lib/amq/client/async/adapter.rb:667:in&nbsp;`&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;frameset_complete?&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/amq-client-0.9.3/lib/amq/client/async/adapter.rb:518:in&nbsp;`receive_frame&amp;#39;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;from&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,38)&quot;&gt;/usr/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;local&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rvm&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;ruby&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;1&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;p194&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;client&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;0&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;lib&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amq&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;client&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;async&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;adapters&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;event_machine&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rb&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;:&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;327&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:in&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;`receive_data&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in&nbsp;`&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;run_machine&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;/usr/local/rvm/gems/ruby-1.9.3-p194/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in&nbsp;`run&amp;#39;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;from&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,38)&quot;&gt;/usr/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;local&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rvm&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;ruby&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;1&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;3&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;p194&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;gems&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amqp&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;-&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;0&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;9&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;6&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;lib&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;amqp&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;/&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;connection&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;rb&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;:&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(0,153,153)&quot;&gt;38&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(153,0,115)&quot;&gt;:in&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;`start&amp;#39;&lt;/span&gt;<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(221,17,68)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;client1.rb:7:in&nbsp;`&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px&quot;&gt;main&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-weight:bold&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;color:rgb(166,23,23);background-color:rgb(227,210,210)&quot;&gt;&amp;#39;&lt;/span&gt;&lt;/pre&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;Any&nbsp;advice&nbsp;would&nbsp;be&nbsp;greatly&nbsp;appreciated.&nbsp;Maybe&nbsp;someone&nbsp;has&nbsp;an&nbsp;example&nbsp;of&nbsp;using&nbsp;RabbitMQ&nbsp;Federation&nbsp;with&nbsp;the&nbsp;Ruby-AMQP&nbsp;gem?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Roman&lt;/div&gt;<br>

</tt>
