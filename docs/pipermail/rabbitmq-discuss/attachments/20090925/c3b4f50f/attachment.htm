<tt>
Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;place&nbsp;a&nbsp;memory&nbsp;restriction&nbsp;on&nbsp;rabbitmq?&nbsp;I&nbsp;am&nbsp;getting&nbsp;a&nbsp;bit&nbsp;tired&nbsp;of&nbsp;it&nbsp;locking&nbsp;up&nbsp;all&nbsp;the&nbsp;available&nbsp;memory&nbsp;when&nbsp;there&nbsp;are&nbsp;a&nbsp;significant&nbsp;amount&nbsp;of&nbsp;items&nbsp;in&nbsp;the&nbsp;queue&nbsp;since&nbsp;it&nbsp;won&amp;#39;t&nbsp;write&nbsp;them&nbsp;to&nbsp;disk&lt;div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Suhail&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Sep&nbsp;24,&nbsp;2009&nbsp;at&nbsp;7:11&nbsp;AM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@lshift.net&quot;&gt;matthias@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;Gavin,&lt;br&gt;<br>
&lt;br&gt;<br>
Gavin&nbsp;M.&nbsp;Roy&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&amp;gt;&nbsp;Is&nbsp;it&nbsp;safe&nbsp;to&nbsp;assume&nbsp;the&nbsp;VM&nbsp;will&nbsp;make&nbsp;use&nbsp;of&nbsp;what&nbsp;it&amp;#39;s&nbsp;holding&nbsp;on&nbsp;to&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;it&amp;#39;s&nbsp;not&nbsp;a&nbsp;leak&nbsp;of&nbsp;some&nbsp;sort?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;doubt&nbsp;it&nbsp;is&nbsp;a&nbsp;leak,&nbsp;but&nbsp;the&nbsp;VM&nbsp;can&nbsp;hold&nbsp;on&nbsp;to&nbsp;free&nbsp;memory&nbsp;in&nbsp;the&lt;br&gt;<br>
anticipation&nbsp;of&nbsp;future&nbsp;need&nbsp;which&nbsp;may&nbsp;never&nbsp;materialise.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;(rabbit@mq07)1&amp;gt;&nbsp;memory().&lt;br&gt;<br>
&amp;gt;&nbsp;[{total,354514080},&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;So&nbsp;that&amp;#39;s&nbsp;just&nbsp;~350MB&nbsp;there,&nbsp;which&nbsp;means&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;VM&nbsp;process&amp;#39;&lt;br&gt;<br>
memory&nbsp;is&nbsp;technically&nbsp;free&nbsp;but&nbsp;hasn&amp;#39;t&nbsp;been&nbsp;returned&nbsp;to&nbsp;the&nbsp;OS,&nbsp;unless&lt;br&gt;<br>
there&amp;#39;s&nbsp;a&nbsp;leak&nbsp;in&nbsp;the&nbsp;VM&nbsp;itself.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;docs&nbsp;for&nbsp;erlang:memory/0&nbsp;mention&nbsp;various&nbsp;caveats&nbsp;regarding&nbsp;the&lt;br&gt;<br>
accuracy&nbsp;of&nbsp;the&nbsp;reported&nbsp;figures,&nbsp;and&nbsp;ways&nbsp;to&nbsp;improve&nbsp;that&nbsp;accuracy,&lt;br&gt;<br>
which&nbsp;is&nbsp;something&nbsp;you&nbsp;may&nbsp;want&nbsp;to&nbsp;look&nbsp;into&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;investigate&lt;br&gt;<br>
this&nbsp;further.&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;a&nbsp;href=&quot;http://mixpanel.com&quot;&gt;http://mixpanel.com&lt;/a&gt;&lt;br&gt;Blog:&nbsp;&lt;a&nbsp;href=&quot;http://blog.mixpanel.com&quot;&gt;http://blog.mixpanel.com&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
