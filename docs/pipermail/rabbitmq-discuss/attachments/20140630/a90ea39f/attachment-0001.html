<tt>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;We&nbsp;did&nbsp;not&nbsp;change&nbsp;netticktime,&nbsp;and&nbsp;the&nbsp;other&nbsp;nodes&nbsp;in&nbsp;the&nbsp;cluster&nbsp;were&nbsp;frozen&nbsp;for&nbsp;about&nbsp;an&nbsp;hour&nbsp;by&nbsp;the&nbsp;time&nbsp;networking&nbsp;was&nbsp;active&nbsp;again&nbsp;on&nbsp;the&nbsp;node&nbsp;that&nbsp;crashed.&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Frustratingly&nbsp;there&nbsp;was&nbsp;nothing&nbsp;in&nbsp;the&nbsp;logs,&nbsp;but&nbsp;I&nbsp;think&nbsp;that&#39;s&nbsp;because&nbsp;of&nbsp;the&nbsp;bug&nbsp;fixed&nbsp;in&nbsp;3.3.3&nbsp;and&nbsp;we&nbsp;went&nbsp;live&nbsp;with&nbsp;3.3.2&nbsp;:( &nbsp;we&nbsp;started&nbsp;upgrading&nbsp;on&nbsp;Friday&nbsp;to&nbsp;fix&nbsp;that...&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Dan.&lt;/p&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Jun&nbsp;30,&nbsp;2014&nbsp;6:23&nbsp;AM,&nbsp;&quot;Simon&nbsp;MacMullen&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&nbsp;type=&quot;attribution&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
On&nbsp;27/06/14&nbsp;20:55,&nbsp;Daniel&nbsp;Burke&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Today&nbsp;we&nbsp;had&nbsp;the&nbsp;physical&nbsp;machine&nbsp;of&nbsp;a&nbsp;dedicated&nbsp;node&nbsp;kernel&nbsp;panic&lt;br&gt;<br>
(linux&nbsp;centos&nbsp;6)...&nbsp;when&nbsp;that&nbsp;happened&nbsp;the&nbsp;other&nbsp;two&nbsp;nodes&nbsp;in&nbsp;the&lt;br&gt;<br>
cluster&nbsp;seemed&nbsp;to&nbsp;choke,&nbsp;and&nbsp;not&nbsp;respond&nbsp;at&nbsp;all.&lt;br&gt;<br>
&lt;br&gt;<br>
&quot;rabbitmqctl&nbsp;cluster_status&quot;&nbsp;on&nbsp;either&nbsp;of&nbsp;the&nbsp;other&nbsp;nodes&nbsp;would&nbsp;hang.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;web&nbsp;management&nbsp;UI&nbsp;didn&#39;t&nbsp;respond.&nbsp; I&nbsp;could&nbsp;get&nbsp;a&nbsp;login&nbsp;page&nbsp;to&nbsp;come&lt;br&gt;<br>
up&nbsp;but&nbsp;after&nbsp;that&nbsp;it&nbsp;would&nbsp;go&nbsp;back&nbsp;to&nbsp;not&nbsp;responding.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
The&nbsp;management&nbsp;UI&nbsp;and&nbsp;&quot;rabbitmqctl&nbsp;cluster_status&quot;&nbsp;can&nbsp;hang&nbsp;for&nbsp;a&nbsp;short&nbsp;while,&nbsp;while&nbsp;the&nbsp;live&nbsp;nodes&nbsp;attempt&nbsp;to&nbsp;contact&nbsp;the&nbsp;crashed&nbsp;node&nbsp;but&nbsp;haven&#39;t&nbsp;got&nbsp;an&nbsp;answer&nbsp;from&nbsp;it.&nbsp;Once&nbsp;the&nbsp;live&nbsp;nodes&nbsp;decide&nbsp;that&nbsp;the&nbsp;dead&nbsp;node&nbsp;is&nbsp;in&nbsp;fact&nbsp;dead,&nbsp;the&nbsp;UI&nbsp;and&nbsp;rabbitmqctl&nbsp;will&nbsp;become&nbsp;responsive&nbsp;again.&nbsp;This&nbsp;time&nbsp;period&nbsp;is&nbsp;defined&nbsp;by&nbsp;net_ticktime&nbsp;(see&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/nettick.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/&lt;u&gt;&lt;/u&gt;nettick.html&lt;/a&gt;).&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
*&nbsp;Have&nbsp;you&nbsp;changed&nbsp;this&nbsp;setting?&lt;br&gt;<br>
*&nbsp;Did&nbsp;messages&nbsp;about&nbsp;the&nbsp;node&nbsp;being&nbsp;down&nbsp;get&nbsp;logged&nbsp;by&nbsp;the&nbsp;other&nbsp;nodes?&nbsp;When?&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
When&nbsp;the&nbsp;crashed&nbsp;machine&nbsp;came&nbsp;back&nbsp;up,&nbsp;without&nbsp;starting&nbsp;rabbitmq&nbsp;on&nbsp;it,&lt;br&gt;<br>
once&nbsp;networking&nbsp;was&nbsp;responding,&nbsp;the&nbsp;other&nbsp;two&nbsp;nodes&nbsp;seemed&nbsp;to&nbsp;free&nbsp;up&lt;br&gt;<br>
and&nbsp;start&nbsp;operating&nbsp;normally&nbsp;again.&lt;br&gt;<br>
&lt;br&gt;<br>
After&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;cluster&nbsp;was&nbsp;operating&nbsp;normally&nbsp;again,&nbsp;we&nbsp;brought&lt;br&gt;<br>
down&nbsp;the&nbsp;crashed&nbsp;machine&nbsp;to&nbsp;do&nbsp;a&nbsp;memtest,&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;experience&nbsp;the&lt;br&gt;<br>
cluster&nbsp;freeze&nbsp;again&nbsp;(rabbitmq&nbsp;was&nbsp;not&nbsp;ever&nbsp;started&nbsp;back&nbsp;up&nbsp;on&nbsp;the&lt;br&gt;<br>
failed&nbsp;node).&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;cluster&nbsp;(we&nbsp;went&nbsp;live&nbsp;with&nbsp;multiple&nbsp;clusters&nbsp;yesterday),&nbsp;is&nbsp;running&lt;br&gt;<br>
3&nbsp;physical&nbsp;dedicated&nbsp;machines.&nbsp; All&nbsp;of&nbsp;them&nbsp;are&nbsp;on&nbsp;centos&nbsp;6.&nbsp; RabbitMQ&nbsp;v&lt;br&gt;<br>
3.3.2.&nbsp; All&nbsp;nodes&nbsp;are&nbsp;disc&nbsp;nodes.&nbsp; All&nbsp;queues&nbsp;are&nbsp;durable&nbsp;and&nbsp;mirrored.&lt;br&gt;<br>
 &nbsp;This&nbsp;cluster&nbsp;has&nbsp;one&nbsp;queue,&nbsp;plus&nbsp;1000&#39;s&nbsp;of&nbsp;dynamic&nbsp;shovels&nbsp;(which&nbsp;of&lt;br&gt;<br>
course&nbsp;includes&nbsp;their&nbsp;own&nbsp;queues&nbsp;on&nbsp;this&nbsp;cluster)&nbsp;connecting&nbsp;to&nbsp;queues&lt;br&gt;<br>
on&nbsp;3&nbsp;other&nbsp;clusters&nbsp;with&nbsp;similar&nbsp;setups.&nbsp; Each&nbsp;node&nbsp;has&nbsp;about&nbsp;7gig&nbsp;of&lt;br&gt;<br>
disk&nbsp;free&nbsp;on&nbsp;the&nbsp;relevant&nbsp;partition,&nbsp;and&nbsp;48gig&nbsp;of&nbsp;ram&nbsp;with&nbsp;the&lt;br&gt;<br>
high_water_mark&nbsp;set&nbsp;to&nbsp;0.9,&nbsp;but&nbsp;even&nbsp;at&nbsp;diminished&nbsp;capacity&nbsp;right&nbsp;now,&lt;br&gt;<br>
the&nbsp;most&nbsp;ram&nbsp;used&nbsp;is&nbsp;1.2gig&nbsp;on&nbsp;one&nbsp;node&nbsp;and&nbsp;600meg&nbsp;on&nbsp;the&nbsp;other&nbsp;(these&lt;br&gt;<br>
boxes&nbsp;were&nbsp;way&nbsp;over&nbsp;built&nbsp;with&nbsp;short-term&nbsp;growth&nbsp;in&nbsp;mind).&lt;br&gt;<br>
&lt;br&gt;<br>
Sadly,&nbsp;there&nbsp;was&nbsp;nothing&nbsp;in&nbsp;the&nbsp;logs.&nbsp; We&nbsp;realized&nbsp;this&nbsp;might&nbsp;be&nbsp;related&lt;br&gt;<br>
to&nbsp;the&nbsp;logging&nbsp;bug&nbsp;fixed&nbsp;in&nbsp;3.3.3,&nbsp;so&nbsp;we&nbsp;just&nbsp;upgraded&nbsp;our&nbsp;dev&lt;br&gt;<br>
environment&nbsp;to&nbsp;start&nbsp;the&nbsp;process&nbsp;to&nbsp;deal&nbsp;with&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;thoughts&nbsp;on&nbsp;what&nbsp;the&nbsp;cause&nbsp;of&nbsp;this&nbsp;freeze&nbsp;up&nbsp;could&nbsp;have&nbsp;been?&nbsp; And&lt;br&gt;<br>
how&nbsp;to&nbsp;mitigate&nbsp;it?&nbsp; Or&nbsp;any&nbsp;troubleshooting&nbsp;/&nbsp;information&nbsp;gathering&nbsp;we&lt;br&gt;<br>
could&nbsp;do&nbsp;if&nbsp;it&nbsp;happens&nbsp;again?&nbsp; It&#39;s&nbsp;a&nbsp;scary&nbsp;thing&nbsp;now&nbsp;to&nbsp;have&nbsp;happen&nbsp;on&lt;br&gt;<br>
a&nbsp;friday&nbsp;afternoon.&nbsp; We&nbsp;were&nbsp;counting&nbsp;on&nbsp;three&nbsp;node&nbsp;clusters&nbsp;getting&nbsp;us&lt;br&gt;<br>
through&nbsp;if&nbsp;there&nbsp;was&nbsp;an&nbsp;outage&nbsp;of&nbsp;a&nbsp;node&nbsp;during&nbsp;the&nbsp;weekend...&nbsp;but&nbsp;now&lt;br&gt;<br>
we&#39;re&nbsp;all&nbsp;afraid&nbsp;to&nbsp;go&nbsp;home&nbsp;for&nbsp;the&nbsp;weekend!&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks!&lt;br&gt;<br>
Dan.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&nbsp;has&nbsp;moved&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/forum/#!forum/rabbitmq-users&quot;&nbsp;target=&quot;_blank&quot;&gt;https://groups.google.com/&lt;u&gt;&lt;/u&gt;forum/#!forum/rabbitmq-users&lt;/a&gt;,&lt;br&gt;<br>
please&nbsp;subscribe&nbsp;to&nbsp;the&nbsp;new&nbsp;list!&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;u&gt;&lt;/u&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;u&gt;&lt;/u&gt;cgi-bin/mailman/listinfo/&lt;u&gt;&lt;/u&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
