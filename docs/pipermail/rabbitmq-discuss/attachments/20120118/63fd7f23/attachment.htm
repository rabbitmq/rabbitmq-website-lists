<tt>
Yup,&nbsp;that&nbsp;was&nbsp;it&nbsp;exactly.&nbsp;&amp;nbsp;I&nbsp;just&nbsp;had&nbsp;the&nbsp;diff&nbsp;up,&nbsp;so&nbsp;here&nbsp;are&nbsp;the&nbsp;two&nbsp;major&nbsp;changes&nbsp;I&nbsp;had&nbsp;to&nbsp;make:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;-&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;channel.queue(&nbsp;@queue,&nbsp;:durable&nbsp;=&amp;gt;&nbsp;true&nbsp;).subscribe(:ack=&amp;gt;true)&nbsp;do&nbsp;|header,message|&lt;/div&gt;&lt;div&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;channel.queue(&nbsp;@queue,&nbsp;:durable&nbsp;=&amp;gt;&nbsp;true,&nbsp;:arguments&nbsp;=&amp;gt;&nbsp;{'x-ha-policy'&nbsp;=&amp;gt;&nbsp;'all'}&nbsp;).subscribe(:ack=&amp;gt;true)&nbsp;do&nbsp;|header,message|&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;def&nbsp;self.get_channel(host)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;connection&nbsp;=&nbsp;AMQP.connect(&nbsp;:host=&amp;gt;host&nbsp;)&lt;/div&gt;&lt;div&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;connection.on_connection_interruption&nbsp;do&nbsp;|conn,&nbsp;settings|&lt;/div&gt;&lt;div&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;conn.reconnect(false,1)&lt;/div&gt;&lt;div&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;end&lt;/div&gt;&lt;div&gt;+&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;channel&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;=&nbsp;AMQP::Channel.new(&nbsp;connection&nbsp;)&lt;/div&gt;&lt;div&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;channel.auto_recovery&nbsp;=&nbsp;true&lt;/div&gt;&lt;div&gt;+&lt;/div&gt;&lt;div&gt;+&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;channel&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;end&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;I&nbsp;said,&nbsp;this&nbsp;hasn't&nbsp;gone&nbsp;into&nbsp;production&nbsp;yet,&nbsp;but&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;doing&nbsp;well&nbsp;in&nbsp;our&nbsp;staging&nbsp;environment.&nbsp;&amp;nbsp;I&nbsp;don't&nbsp;think&nbsp;our&nbsp;message&nbsp;rate&nbsp;is&nbsp;high&nbsp;enough&nbsp;to&nbsp;really&nbsp;exercise&nbsp;this&nbsp;setup&nbsp;in&nbsp;staging,&nbsp;so&nbsp;I&nbsp;can't&nbsp;really&nbsp;comment&nbsp;on&nbsp;performance&nbsp;yet.&nbsp;&amp;nbsp;(We're&nbsp;holding&nbsp;off&nbsp;moving&nbsp;this&nbsp;into&nbsp;production&nbsp;as&nbsp;we&nbsp;are&nbsp;trying&nbsp;to&nbsp;provide&nbsp;high&nbsp;availability&nbsp;for&nbsp;our&nbsp;applications&nbsp;and&nbsp;services&nbsp;across&nbsp;the&nbsp;board,&nbsp;which&nbsp;in&nbsp;some&nbsp;cases&nbsp;means&nbsp;we&nbsp;will&nbsp;be&nbsp;using&nbsp;one&nbsp;VM&nbsp;for&nbsp;multiple&nbsp;services.&nbsp;&amp;nbsp;Since&nbsp;the&nbsp;other&nbsp;services&nbsp;aren't&nbsp;ready&nbsp;to&nbsp;go&nbsp;yet,&nbsp;we&nbsp;haven't&nbsp;pushed&nbsp;this&nbsp;up.)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;jrob&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;
</tt>
