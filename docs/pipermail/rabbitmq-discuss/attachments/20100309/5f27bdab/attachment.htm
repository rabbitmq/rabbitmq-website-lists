<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;Matthias,&nbsp;Matthew&nbsp;and&nbsp;Jeremy,&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
strace&amp;#39;ing&nbsp;sounds&nbsp;like&nbsp;an&nbsp;excellent&nbsp;plan.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;should&nbsp;preface&nbsp;this&nbsp;by&nbsp;saying&nbsp;that&nbsp;I&nbsp;am&nbsp;not&nbsp;well&nbsp;versed&nbsp;in&nbsp;rabbitmq&nbsp;or&nbsp;system&nbsp;administration,&nbsp;so&nbsp;I&nbsp;may&nbsp;be&nbsp;doing&nbsp;something&nbsp;dumb&nbsp;here...&nbsp;I&nbsp;attempted&nbsp;an&nbsp;strace&nbsp;like&nbsp;so:&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;First,&nbsp;a:&nbsp;`ps&nbsp;aux&nbsp;|&nbsp;grep&nbsp;rabbitmq`&nbsp;to&nbsp;find&nbsp;the&nbsp;phantom&nbsp;rabbitmq&nbsp;process&nbsp;that&nbsp;apt-get&nbsp;install&nbsp;seems&nbsp;to&nbsp;have&nbsp;left&nbsp;running,&nbsp;followed&nbsp;by&nbsp;a&nbsp;`sudo&nbsp;kill&nbsp;####`&nbsp;to&nbsp;get&nbsp;rid&nbsp;of&nbsp;it&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then&nbsp;a&nbsp;`sudo&nbsp;strace&nbsp;rabbitmq-server`&nbsp;to&nbsp;start&nbsp;the&nbsp;trace.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;are&nbsp;the&nbsp;results&nbsp;from&nbsp;strace:&lt;/div&gt;&lt;div&gt;&lt;div&gt;wait4(-1,&nbsp;0x7fff09bb6e5c,&nbsp;WNOHANG,&nbsp;NULL)&nbsp;=&nbsp;-1&nbsp;ECHILD&nbsp;(No&nbsp;child&nbsp;processes)&lt;/div&gt;&lt;div&gt;rt_sigreturn(0xffffffffffffffff)&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;<br>
<br>
close(3)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[CHLD],&nbsp;[],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigaction(SIGINT,&nbsp;{0x441000,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;{SIG_DFL,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigaction(SIGINT,&nbsp;{SIG_DFL,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;{0x441000,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;NULL,&nbsp;[],&nbsp;8)&nbsp; =&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;read(255,&nbsp;&amp;quot;\nif&nbsp;[&nbsp;`id&nbsp;-u`&nbsp;=&nbsp;0&nbsp;]&nbsp;;&nbsp;then\n&nbsp; &nbsp; s&amp;quot;...,&nbsp;498)&nbsp;=&nbsp;207&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;NULL,&nbsp;[],&nbsp;8)&nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;pipe([3,&nbsp;4])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[CHLD],&nbsp;[],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[INT&nbsp;CHLD],&nbsp;[],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;lseek(255,&nbsp;-1,&nbsp;SEEK_CUR)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;497&lt;/div&gt;&lt;div&gt;clone(child_stack=0,&nbsp;flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD,&nbsp;child_tidptr=0x7f96238a47c0)&nbsp;=&nbsp;29934&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigaction(SIGCHLD,&nbsp;{0x4431e0,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;{0x4431e0,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;close(4)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;read(3,&nbsp;&amp;quot;0\n&amp;quot;,&nbsp;128)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;2&lt;/div&gt;&lt;div&gt;read(3,&nbsp;&amp;quot;&amp;quot;,&nbsp;128)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;---&nbsp;SIGCHLD&nbsp;(Child&nbsp;exited)&nbsp;@&nbsp;0&nbsp;(0)&nbsp;---&lt;/div&gt;&lt;div&gt;wait4(-1,&nbsp;[{WIFEXITED(s)&nbsp;&amp;amp;&amp;amp;&nbsp;WEXITSTATUS(s)&nbsp;==&nbsp;0}],&nbsp;WNOHANG,&nbsp;NULL)&nbsp;=&nbsp;29934&lt;/div&gt;<br>
<br>
&lt;div&gt;wait4(-1,&nbsp;0x7fff09bb6e9c,&nbsp;WNOHANG,&nbsp;NULL)&nbsp;=&nbsp;-1&nbsp;ECHILD&nbsp;(No&nbsp;child&nbsp;processes)&lt;/div&gt;&lt;div&gt;rt_sigreturn(0xffffffffffffffff)&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;close(3)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[CHLD],&nbsp;[],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigaction(SIGINT,&nbsp;{0x441000,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;{SIG_DFL,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigaction(SIGINT,&nbsp;{SIG_DFL,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;{0x441000,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;NULL,&nbsp;[],&nbsp;8)&nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;stat(&amp;quot;.&amp;quot;,&nbsp;{st_mode=S_IFDIR|0755,&nbsp;st_size=4096,&nbsp;...})&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;stat(&amp;quot;/usr/local/sbin/su&amp;quot;,&nbsp;0x7fff09bb7470)&nbsp;=&nbsp;-1&nbsp;ENOENT&nbsp;(No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory)&lt;/div&gt;<br>
<br>
&lt;div&gt;stat(&amp;quot;/usr/local/bin/su&amp;quot;,&nbsp;0x7fff09bb7470)&nbsp;=&nbsp;-1&nbsp;ENOENT&nbsp;(No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory)&lt;/div&gt;&lt;div&gt;stat(&amp;quot;/usr/sbin/su&amp;quot;,&nbsp;0x7fff09bb7470)&nbsp; &nbsp; =&nbsp;-1&nbsp;ENOENT&nbsp;(No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory)&lt;/div&gt;&lt;div&gt;stat(&amp;quot;/usr/bin/su&amp;quot;,&nbsp;0x7fff09bb7470)&nbsp; &nbsp; &nbsp;=&nbsp;-1&nbsp;ENOENT&nbsp;(No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory)&lt;/div&gt;<br>
<br>
&lt;div&gt;stat(&amp;quot;/sbin/su&amp;quot;,&nbsp;0x7fff09bb7470)&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;-1&nbsp;ENOENT&nbsp;(No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory)&lt;/div&gt;&lt;div&gt;stat(&amp;quot;/bin/su&amp;quot;,&nbsp;{st_mode=S_IFREG|S_ISUID|0755,&nbsp;st_size=36864,&nbsp;...})&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;stat(&amp;quot;/bin/su&amp;quot;,&nbsp;{st_mode=S_IFREG|S_ISUID|0755,&nbsp;st_size=36864,&nbsp;...})&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;brk(0x1de7000)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0x1de7000&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[INT&nbsp;CHLD],&nbsp;[],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[CHLD],&nbsp;[INT&nbsp;CHLD],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[INT&nbsp;CHLD],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;clone(child_stack=0,&nbsp;flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD,&nbsp;child_tidptr=0x7f96238a47c0)&nbsp;=&nbsp;29935&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[CHLD],&nbsp;[],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;[CHLD],&nbsp;[],&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigaction(SIGINT,&nbsp;{0x441000,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;{SIG_DFL,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;wait4(-1,&lt;/div&gt;&lt;div&gt;=================PAUSED&nbsp;HERE&nbsp;UNTIL&nbsp;CRASH=======================&lt;/div&gt;&lt;div&gt;&lt;div&gt;{error_logger,{{2010,3,9},{0,32,45}},&amp;quot;Protocol:&nbsp;~p:&nbsp;register&nbsp;error:&nbsp;~p~n&amp;quot;,[&amp;quot;inet_tcp&amp;quot;,{{badmatch,{error,etimedout}},[{inet_tcp_dist,listen,1},{net_kernel,start_protos,4},{net_kernel,start_protos,3},{net_kernel,init_node,2},{net_kernel,init,1},{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}]}&lt;/div&gt;<br>
<br>
&lt;div&gt;{error_logger,{{2010,3,9},{0,32,45}},crash_report,[[{initial_call,{net_kernel,init,[&amp;#39;Argument__1&amp;#39;]}},{pid,&amp;lt;0.22.0&amp;gt;},{registered_name,[]},{error_info,{exit,{error,badarg},[{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}},{ancestors,[net_sup,kernel_sup,&amp;lt;0.9.0&amp;gt;]},{messages,[]},{links,[#Port&amp;lt;0.97&amp;gt;,&amp;lt;0.19.0&amp;gt;]},{dictionary,[{longnames,false}]},{trap_exit,true},{status,running},{heap_size,610},{stack_size,24},{reductions,501}],[]]}&lt;/div&gt;<br>
<br>
&lt;div&gt;{error_logger,{{2010,3,9},{0,32,45}},supervisor_report,[{supervisor,{local,net_sup}},{errorContext,start_error},{reason,{&amp;#39;EXIT&amp;#39;,nodistribution}},{offender,[{pid,undefined},{name,net_kernel},{mfa,{net_kernel,start_link,[[rabbit,shortnames]]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]}]}&lt;/div&gt;<br>
<br>
&lt;div&gt;{error_logger,{{2010,3,9},{0,32,45}},supervisor_report,[{supervisor,{local,kernel_sup}},{errorContext,start_error},{reason,shutdown},{offender,[{pid,undefined},{name,net_sup},{mfa,{erl_distribution,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}]}&lt;/div&gt;<br>
<br>
&lt;div&gt;{error_logger,{{2010,3,9},{0,32,45}},std_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}&lt;/div&gt;&lt;div&gt;{&amp;quot;Kernel&nbsp;pid&nbsp;terminated&amp;quot;,application_controller,&amp;quot;{application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}&amp;quot;}&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Crash&nbsp;dump&nbsp;was&nbsp;written&nbsp;to:&nbsp;erl_crash.dump&lt;/div&gt;&lt;div&gt;Kernel&nbsp;pid&nbsp;terminated&nbsp;(application_controller)&nbsp;({application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})&lt;/div&gt;&lt;div&gt;[{WIFEXITED(s)&nbsp;&amp;amp;&amp;amp;&nbsp;WEXITSTATUS(s)&nbsp;==&nbsp;1}],&nbsp;0,&nbsp;NULL)&nbsp;=&nbsp;29935&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigprocmask(SIG_SETMASK,&nbsp;[],&nbsp;NULL,&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;---&nbsp;SIGCHLD&nbsp;(Child&nbsp;exited)&nbsp;@&nbsp;0&nbsp;(0)&nbsp;---&lt;/div&gt;&lt;div&gt;wait4(-1,&nbsp;0x7fff09bb711c,&nbsp;WNOHANG,&nbsp;NULL)&nbsp;=&nbsp;-1&nbsp;ECHILD&nbsp;(No&nbsp;child&nbsp;processes)&lt;/div&gt;&lt;div&gt;rt_sigreturn(0xffffffffffffffff)&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigaction(SIGINT,&nbsp;{SIG_DFL,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;{0x441000,&nbsp;[],&nbsp;SA_RESTORER,&nbsp;0x7f9622f0b530},&nbsp;8)&nbsp;=&nbsp;0&lt;/div&gt;&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;NULL,&nbsp;[],&nbsp;8)&nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;read(255,&nbsp;&amp;quot;\n&amp;quot;,&nbsp;498)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;1&lt;/div&gt;<br>
<br>
&lt;div&gt;rt_sigprocmask(SIG_BLOCK,&nbsp;NULL,&nbsp;[],&nbsp;8)&nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;read(255,&nbsp;&amp;quot;&amp;quot;,&nbsp;498)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&lt;/div&gt;&lt;div&gt;exit_group(1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;===============&nbsp;END&nbsp;OF&nbsp;TRACE&nbsp;=========================================================&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(Jeremy&nbsp;asked)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;border-collapse:&nbsp;collapse;&nbsp;&quot;&gt;&amp;gt;&nbsp;You&nbsp;should&nbsp;provide&nbsp;the&nbsp;erlang&nbsp;dependencies&nbsp;here.&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;border-collapse:&nbsp;collapse;&nbsp;&quot;&gt;&lt;/span&gt;If&nbsp;I&amp;#39;m&nbsp;reading&nbsp;aptitude&nbsp;correctly,&nbsp;it&nbsp;says&nbsp;that&nbsp;it&nbsp;will&nbsp;pull&nbsp;in&nbsp;&amp;quot;erlang-base&nbsp;1:13.b.1-dfsg-2ubuntu1&amp;quot;&nbsp;as&nbsp;a&nbsp;dependency.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;that&nbsp;enough&nbsp;information?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Carver&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
