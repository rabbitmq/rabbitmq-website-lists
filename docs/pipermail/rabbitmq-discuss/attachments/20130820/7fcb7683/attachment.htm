<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Here&amp;#39;s&nbsp;an&nbsp;example&nbsp;double-ack&amp;#39;ing&nbsp;a&nbsp;message:&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/alanxz/rabbitmq-c/blob/e7626673f7834aa59858347196c5f549759ccec3/examples/amqp_consumer.c&quot;&gt;https://github.com/alanxz/rabbitmq-c/blob/e7626673f7834aa59858347196c5f549759ccec3/examples/amqp_consumer.c&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;you&nbsp;basic.ack&nbsp;a&nbsp;message&nbsp;twice,&nbsp;it&nbsp;will&nbsp;cause&nbsp;a&nbsp;channel-exception&nbsp;(a&nbsp;channel.close&nbsp;method),&nbsp;and&nbsp;the&nbsp;channel&nbsp;will&nbsp;be&nbsp;closed.&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;Mon,&nbsp;Aug&nbsp;19,&nbsp;2013&nbsp;at&nbsp;7:00&nbsp;PM,&nbsp;3k4b251&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:314992959@qq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;314992959@qq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp; did&nbsp; a&nbsp; test.&nbsp;try&nbsp;to&nbsp; use&nbsp;amqp_basic_ack&nbsp;twice&nbsp; after&nbsp;i&nbsp;got&nbsp; the&nbsp; message&lt;br&gt;<br>
delivery_tag&nbsp;.&nbsp; &nbsp; it&amp;#39;s&nbsp;seems&nbsp; like&nbsp;that&nbsp; channel&nbsp; still&nbsp; alive,&nbsp; consumer&lt;br&gt;<br>
lose.&nbsp; and&nbsp; I&nbsp; can&nbsp;still&nbsp; receive&nbsp; messages&nbsp; from&nbsp;the&nbsp;same&nbsp;queue&nbsp; without&lt;br&gt;<br>
any&nbsp;consumer.&nbsp; &nbsp;And&nbsp; the&nbsp;durable&nbsp; messages&nbsp; can&nbsp;not&nbsp; remove&nbsp;from&nbsp;queue&nbsp;by&lt;br&gt;<br>
the&nbsp;amqp_basic_ack().&nbsp; And&nbsp; amqp_consume_message()&nbsp; always&nbsp; return&lt;br&gt;<br>
AMQP_RESPONSE_NORMAL.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-use-amqp-basic-ack-qwTag-twice-lead-consumer-lose-tp28911p28947.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-use-amqp-basic-ack-qwTag-twice-lead-consumer-lose-tp28911p28947.html&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&nbsp;HOEnZb&quot;&gt;Sent&nbsp;from&nbsp;the&nbsp;RabbitMQ&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
