<tt>
Hi&nbsp;there,&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;new&nbsp;to&nbsp;the&nbsp;concepts&nbsp;of&nbsp;AMQP&nbsp;and&nbsp;RabbitMQ&nbsp;and&nbsp;was&nbsp;wondering&nbsp;if&nbsp;someone&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;right&nbsp;direction&nbsp;or&nbsp;offer&nbsp;some&nbsp;advice.&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;got&nbsp;a&nbsp;direct&nbsp;exchange&nbsp;feeding&nbsp;a&nbsp;durable&nbsp;queue,&nbsp;if&nbsp;I&nbsp;load&nbsp;say&nbsp;50,000&nbsp;messages&nbsp;onto&nbsp;the&nbsp;queue&nbsp;and&nbsp;then&nbsp;start&nbsp;a&nbsp;consumer&nbsp;to&nbsp;work&nbsp;through&nbsp;those&nbsp;item&amp;#39;s.&lt;br&gt;<br>
&lt;br&gt;My&nbsp;consumer&nbsp;creates&nbsp;the&nbsp;connection,&nbsp;then&nbsp;creates&nbsp;the&nbsp;model&nbsp;(I&amp;#39;m&nbsp;using&nbsp;.NET)&nbsp;and&nbsp;sets&nbsp;the&nbsp;Qos&nbsp;prefetch&nbsp;count&nbsp;to&nbsp;1,&nbsp;then&nbsp;calls&nbsp;BasicGet,&nbsp;processes&nbsp;the&nbsp;message,&nbsp;sends&nbsp;an&nbsp;ack&nbsp;(BasicAck),&nbsp;then&nbsp;enumerates&nbsp;until&nbsp;BasicGet&nbsp;returns&nbsp;null.&nbsp;Finally&nbsp;disposing&nbsp;the&nbsp;model&nbsp;and&nbsp;closing&nbsp;the&nbsp;connection.&lt;br&gt;<br>
&lt;br&gt;If&nbsp;I&nbsp;restart&nbsp;the&nbsp;host&nbsp;I&nbsp;have&nbsp;the&nbsp;RabbitMQ&nbsp;broker&nbsp;running&nbsp;on&nbsp;(Windows)&nbsp;after&nbsp;processing&nbsp;and&nbsp;ack&amp;#39;ing&nbsp;40,000&nbsp;messages&nbsp;while&nbsp;my&nbsp;consumer&nbsp;is&nbsp;working&nbsp;through&nbsp;the&nbsp;remaining&nbsp;items,&nbsp;when&nbsp;the&nbsp;RabbitMQ&nbsp;broker&nbsp;comes&nbsp;back&nbsp;online&nbsp;the&nbsp;40,000&nbsp;messages&nbsp;are&nbsp;redelivered&nbsp;(even&nbsp;though&nbsp;they&nbsp;were&nbsp;acknowledged).&lt;br&gt;<br>
&lt;br&gt;Is&nbsp;this&nbsp;supposed&nbsp;to&nbsp;happen?&nbsp;I&nbsp;would&nbsp;anticipate&nbsp;a&nbsp;number&nbsp;of&nbsp;them&nbsp;being&nbsp;requeued&nbsp;if&nbsp;the&nbsp;broker&nbsp;was&nbsp;shutdown&nbsp;abruptly&nbsp;(i.e.&nbsp;loss&nbsp;of&nbsp;power)&nbsp;as&nbsp;it&nbsp;may&nbsp;not&nbsp;have&nbsp;been&nbsp;written&nbsp;to&nbsp;disk&nbsp;at&nbsp;that&nbsp;stage,&nbsp;but&nbsp;a&nbsp;graceful&nbsp;restart&nbsp;I&nbsp;thought&nbsp;it&nbsp;may&nbsp;flush&nbsp;any&nbsp;uncommitted&nbsp;changes&nbsp;to&nbsp;disk.&lt;br&gt;<br>
&lt;br&gt;If&nbsp;this&nbsp;is&nbsp;by&nbsp;design,&nbsp;any&nbsp;suggestions&nbsp;or&nbsp;advice&nbsp;on&nbsp;how&nbsp;I&nbsp;can&nbsp;minimise&nbsp;the&nbsp;number&nbsp;of&nbsp;redelivered&nbsp;messages&nbsp;if&nbsp;the&nbsp;broker&nbsp;dies/restarts?&lt;br&gt;&lt;br&gt;Thanks&nbsp;in&nbsp;advance,&lt;br&gt;&lt;br&gt;Ben&lt;br&gt;&lt;br&gt;<br>

</tt>
