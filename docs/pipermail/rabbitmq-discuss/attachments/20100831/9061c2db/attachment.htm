<tt>
Our&nbsp;group&nbsp;has&nbsp;wanted&nbsp;this&nbsp;sort&nbsp;of&nbsp;functionality&nbsp;also. &nbsp;The&nbsp;problem&nbsp;we&nbsp;want&nbsp;to&nbsp;solve&lt;br&gt;is&nbsp;pretty&nbsp;much&nbsp;the&nbsp;same: &nbsp;If&nbsp;a&nbsp;queue&nbsp;comes&nbsp;to&nbsp;contain&nbsp;more&nbsp;than&nbsp;X&nbsp;entries,&nbsp;then&nbsp;it&lt;br&gt;means&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;problem&nbsp;with&nbsp;the&nbsp;consumer(s),&nbsp;and&nbsp;we&nbsp;would&nbsp;like&nbsp;to&nbsp;be&nbsp;notified.&lt;br&gt;<br>
<br>
&lt;br&gt;-&nbsp;Jim&lt;br&gt;&lt;br&gt;Jim&nbsp;Irrer &nbsp;  &nbsp;&lt;a&nbsp;href=&quot;mailto:irrer@umich.edu&quot;&gt;irrer@umich.edu&lt;/a&gt; &nbsp; &nbsp;  &nbsp;(734)&nbsp;647-4409&lt;br&gt;University&nbsp;of&nbsp;Michigan&nbsp;Hospital&nbsp;Radiation&nbsp;Oncology&lt;br&gt;519&nbsp;W.&nbsp;William&nbsp;St. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp;Ann&nbsp;Arbor,&nbsp;MI&nbsp;48103&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;----------&nbsp;Forwarded&nbsp;message&nbsp;----------&lt;br&gt;From:&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Matthias&nbsp;Radestock&lt;/b&gt;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
Date:&nbsp;Tue,&nbsp;Aug&nbsp;31,&nbsp;2010&nbsp;at&nbsp;5:29&nbsp;PM&lt;br&gt;Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ&nbsp;and&nbsp;queue&nbsp;message&nbsp;limits?&lt;br&gt;To:&nbsp;Christian&nbsp;Legnitto&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:clegnitto@mozilla.com&quot;&gt;clegnitto@mozilla.com&lt;/a&gt;&amp;gt;&lt;br&gt;Cc:&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;br&gt;Christian,&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Christian&nbsp;Legnitto&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
My&nbsp;main&nbsp;issue&nbsp;is&nbsp;I&nbsp;intend&nbsp;to&nbsp;have&nbsp;hundreds&nbsp;of&nbsp;queues&nbsp;with&nbsp;100k+&nbsp;messages&nbsp;that&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;processed&nbsp;in&nbsp;a&nbsp;timely&nbsp;manner.&nbsp;Memory&nbsp;is&nbsp;ok&nbsp;with&nbsp;the&nbsp;new&nbsp;persister&nbsp;(yay!),&nbsp;but&nbsp;the&nbsp;disk&nbsp;fills&nbsp;up&nbsp;quickly.&nbsp;Right&nbsp;now&nbsp;with&nbsp;only&nbsp;1&nbsp;consumer,&nbsp;if&nbsp;I&nbsp;don&amp;#39;t&nbsp;ack&nbsp;messages&nbsp;coming&nbsp;from&nbsp;bugzilla&nbsp;for&nbsp;2&nbsp;days&nbsp;I&nbsp;use&nbsp;up&nbsp;20GB&nbsp;of&nbsp;disk.&nbsp;I&nbsp;can&nbsp;of&nbsp;course&nbsp;throw&nbsp;hardware&nbsp;at&nbsp;the&nbsp;problem,&nbsp;but&nbsp;it&nbsp;seems&nbsp;I&amp;#39;d&nbsp;reach&nbsp;a&nbsp;point&nbsp;where&nbsp;it&nbsp;merely&nbsp;wouldn&amp;#39;t&nbsp;scale.&lt;br&gt;<br>
<br>
<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Thanks&nbsp;for&nbsp;explaining&nbsp;the&nbsp;problem&nbsp;you&nbsp;are&nbsp;trying&nbsp;to&nbsp;solve.&lt;br&gt;<br>
&lt;br&gt;<br>
Note&nbsp;that&nbsp;in&nbsp;RabbitMQ&nbsp;messages&nbsp;are&nbsp;shared&nbsp;between&nbsp;queues,&nbsp;i.e.&nbsp;if&nbsp;the&nbsp;same&nbsp;message&nbsp;ends&nbsp;up&nbsp;in&nbsp;multiple&nbsp;queues&nbsp;we&nbsp;have&nbsp;at&nbsp;most&nbsp;one&nbsp;copy&nbsp;in&nbsp;memory&nbsp;and&nbsp;at&nbsp;most&nbsp;one&nbsp;copy&nbsp;on&nbsp;disk.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;you&nbsp;may&nbsp;find&nbsp;RabbitMQ&nbsp;scales&nbsp;better&nbsp;here&nbsp;than&nbsp;you&nbsp;expected.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&nbsp;don&amp;#39;t&nbsp;think&nbsp;it&nbsp;is&nbsp;unreasonable&nbsp;to&nbsp;tell&nbsp;consumers&nbsp;that&nbsp;all&nbsp;messages&lt;br&gt;<br>
up&nbsp;to&nbsp;a&nbsp;point&nbsp;will&nbsp;be&nbsp;persisted,&nbsp;but&nbsp;once&nbsp;a&nbsp;threshold&nbsp;is&nbsp;reached&nbsp;only&lt;br&gt;<br>
x&nbsp;amount&nbsp;of&nbsp;messages&nbsp;will&nbsp;persist.&nbsp;I&nbsp;see&nbsp;other&nbsp;brokers&nbsp;support&nbsp;such&nbsp;a&lt;br&gt;<br>
thing,&nbsp;though&nbsp;it&nbsp;sounds&nbsp;like&nbsp;RabbitMQ&nbsp;likely&nbsp;does&nbsp;not.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
We&nbsp;did&nbsp;introduce&nbsp;queue&nbsp;leases&nbsp;in&nbsp;the&nbsp;2.0.0&nbsp;release,&nbsp;which&nbsp;allows&nbsp;the&nbsp;server&nbsp;to&nbsp;remove&nbsp;entire&nbsp;queues&nbsp;when&nbsp;they&nbsp;haven&amp;#39;t&nbsp;been&nbsp;used&nbsp;for&nbsp;a&nbsp;while.&nbsp;That&nbsp;may&nbsp;not&nbsp;be&nbsp;the&nbsp;best&nbsp;fit&nbsp;for&nbsp;your&nbsp;use&nbsp;case,&nbsp;but&nbsp;it&amp;#39;s&nbsp;certainly&nbsp;a&nbsp;feature&nbsp;aimed&nbsp;at&nbsp;addressing&nbsp;similar&nbsp;problems.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Another&nbsp;feature&nbsp;we&nbsp;have&nbsp;in&nbsp;our&nbsp;plans&nbsp;is&nbsp;per-queue&nbsp;message&nbsp;TTLs,&nbsp;i.e.&nbsp;messages&nbsp;will&nbsp;get&nbsp;removed&nbsp;from&nbsp;queues&nbsp;if&nbsp;they&nbsp;are&nbsp;older&nbsp;than&nbsp;a&nbsp;specified&nbsp;threshold.&nbsp;It&nbsp;sounds&nbsp;like&nbsp;that&nbsp;would&nbsp;fit&nbsp;your&nbsp;use&nbsp;case&nbsp;nicely,&nbsp;and&nbsp;arguably&nbsp;better&nbsp;than&nbsp;a&nbsp;count-based&nbsp;limit.&nbsp;Though&nbsp;the&nbsp;latter&nbsp;too&nbsp;is&nbsp;something&nbsp;we&nbsp;may&nbsp;support&nbsp;one&nbsp;day.&lt;div&gt;<br>
<br>
&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
