<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type='text/css'&gt;p&nbsp;{&nbsp;margin:&nbsp;0;&nbsp;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style='font-family:&nbsp;Arial;&nbsp;font-size:&nbsp;10pt;&nbsp;color:&nbsp;#000000'&gt;Hi,&nbsp;Paul...&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-weight:&nbsp;normal;&nbsp;font-style:&nbsp;normal;&nbsp;text-decoration:&nbsp;none;&nbsp;font-family:&nbsp;Helvetica,Arial,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&lt;br&gt;In&nbsp;re&nbsp;(1):&nbsp;exactly&nbsp;Jerry,&nbsp;application&nbsp;specific.&nbsp;I&nbsp;see&nbsp;the&nbsp;queue&nbsp;as&nbsp;containing&nbsp;useful&nbsp;information&nbsp;about&nbsp;the&nbsp;application's&nbsp;progress&nbsp;and&nbsp;its&nbsp;current&nbsp;state.&nbsp;Hence,&nbsp;I&nbsp;didn't&nbsp;want&nbsp;a&nbsp;message&nbsp;to&nbsp;be&nbsp;deleted&nbsp;&quot;merely&quot;&nbsp;because&nbsp;the&nbsp;worker&nbsp;consumer&nbsp;pulled&nbsp;it&nbsp;from&nbsp;the&nbsp;queue.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Gotcha.&amp;nbsp;&nbsp;The&nbsp;right&nbsp;conceptual&nbsp;way&nbsp;to&nbsp;think&nbsp;of&nbsp;the&nbsp;deliver-ACK-dequeue&nbsp;lifecycle&nbsp;for&nbsp;a&nbsp;message&nbsp;is&lt;br&gt;as&nbsp;implementing&nbsp;a&nbsp;&quot;transfer&nbsp;of&nbsp;responsibility&quot;&nbsp;so&nbsp;that&nbsp;things&nbsp;are&nbsp;left,&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;client&nbsp;failure,&lt;br&gt;in&nbsp;a&nbsp;state&nbsp;that&nbsp;will&nbsp;allow&nbsp;life&nbsp;to&nbsp;meaningfully&nbsp;go&nbsp;on.&amp;nbsp;&nbsp;Thus,&nbsp;the&nbsp;RabbitMQ&nbsp;broker&nbsp;secretes&nbsp;away&nbsp;its&lt;br&gt;knowledge&nbsp;of&nbsp;a&nbsp;delivered&nbsp;message&nbsp;until&nbsp;the&nbsp;client&nbsp;sends&nbsp;its&nbsp;ACK,&nbsp;thereby&nbsp;saying&nbsp;&quot;I've&nbsp;got&nbsp;this,&nbsp;you&lt;br&gt;can&nbsp;stop&nbsp;worrying&nbsp;about&nbsp;it&quot;&nbsp;at&nbsp;which&nbsp;point&nbsp;Rabbit&nbsp;knows&nbsp;it's&nbsp;no&nbsp;longer&nbsp;under&nbsp;any&nbsp;obligation&nbsp;to&nbsp;&lt;br&gt;deliver&nbsp;that&nbsp;message&nbsp;in&nbsp;the&nbsp;future&nbsp;and&nbsp;can&nbsp;dispense&nbsp;with&nbsp;whatever&nbsp;record&nbsp;of&nbsp;it&nbsp;that&nbsp;it&nbsp;has.&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&lt;br&gt;As&nbsp;noted&nbsp;earlier,&nbsp;I&nbsp;am&nbsp;(but&nbsp;for&nbsp;some&nbsp;modest&nbsp;&quot;academic&quot;&nbsp;exposure)&nbsp;new&nbsp;to&nbsp;MOM.&nbsp;Using&nbsp;a&nbsp;queue&nbsp;as&nbsp;a&nbsp;persistence&nbsp;store&nbsp;may&nbsp;not&nbsp;be&nbsp;the&nbsp;best&nbsp;design&nbsp;idea.&nbsp;My&nbsp;thinking&nbsp;is&nbsp;that&nbsp;the&nbsp;data&nbsp;is&nbsp;there&nbsp;in&nbsp;the&nbsp;queue,&nbsp;so&nbsp;why&nbsp;incur&nbsp;the&nbsp;overhead&nbsp;of&nbsp;copying&nbsp;it&nbsp;to&nbsp;the&nbsp;lowest&nbsp;layer&nbsp;database&nbsp;store?&nbsp;I&nbsp;envision&nbsp;an&nbsp;external&nbsp;bit&nbsp;of&nbsp;software,&nbsp;e.g.,&nbsp;a&nbsp;reporting&nbsp;tool,&nbsp;being&nbsp;able&nbsp;to&nbsp;query&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;queue.&nbsp;I&nbsp;suppose&nbsp;it&nbsp;would&nbsp;suffice&nbsp;if&nbsp;the&nbsp;reporting&nbsp;tool&nbsp;could&nbsp;read&nbsp;through&nbsp;the&nbsp;queue&nbsp;sequentially&nbsp;(though&nbsp;the&nbsp;ability&nbsp;to&nbsp;access&nbsp;a&nbsp;single&nbsp;message&nbsp;directly&nbsp;would&nbsp;be&nbsp;nice).&lt;br&gt;&lt;br&gt;&lt;/div&gt;Although&nbsp;it&nbsp;might&nbsp;seem&nbsp;that&nbsp;there's&nbsp;some&nbsp;initial&nbsp;economy&nbsp;in&nbsp;this&nbsp;mode&nbsp;of&nbsp;thinking,&nbsp;it's&nbsp;probably&nbsp;&lt;br&gt;not&nbsp;an&nbsp;approach&nbsp;that&nbsp;will&nbsp;serve&nbsp;your&nbsp;distributed&nbsp;app&nbsp;design&nbsp;super&nbsp;well&nbsp;as&nbsp;you&nbsp;go&nbsp;forward.&amp;nbsp;&nbsp;&lt;br&gt;Rabbit's&nbsp;good&nbsp;at&nbsp;accepting&nbsp;and&nbsp;delivering&nbsp;messages,&nbsp;and&nbsp;providing&nbsp;understandable&nbsp;(although&nbsp;&lt;br&gt;not&nbsp;always&nbsp;totally&nbsp;obvious&nbsp;without&nbsp;some&nbsp;study&nbsp;or&nbsp;reflection)&nbsp;guarantees&nbsp;of&nbsp;what&nbsp;conditions&nbsp;that&nbsp;&lt;br&gt;will&nbsp;happen&nbsp;under.&lt;br&gt;&lt;br&gt;If&nbsp;you're&nbsp;wanting&nbsp;to&nbsp;persist&nbsp;data&nbsp;for&nbsp;the&nbsp;ages,&nbsp;or&nbsp;for&nbsp;offline&nbsp;batch&nbsp;processing,&nbsp;or&nbsp;for&nbsp;generating&nbsp;&lt;br&gt;interesting&nbsp;reports&nbsp;or&nbsp;analytics,&nbsp;you're&nbsp;best&nbsp;off&nbsp;using&nbsp;a&nbsp;data&nbsp;store&nbsp;suited&nbsp;to&nbsp;feeding&nbsp;whatever&lt;br&gt;systems&nbsp;or&nbsp;engines&nbsp;are&nbsp;doing&nbsp;that&nbsp;work.&amp;nbsp;&nbsp;Rabbit&nbsp;makes&nbsp;a&nbsp;fine&nbsp;way&nbsp;to&nbsp;transport&nbsp;such&nbsp;stuff&lt;br&gt;between&nbsp;the&nbsp;various&nbsp;systems&nbsp;that&nbsp;need&nbsp;to&nbsp;handle&nbsp;it,&nbsp;e.g.&nbsp;things&nbsp;that&nbsp;write&nbsp;into&nbsp;logs&nbsp;or&nbsp;databases,&lt;br&gt;workers&nbsp;processing&nbsp;jobs&nbsp;represented&nbsp;by&nbsp;messages&nbsp;out&nbsp;of&nbsp;a&nbsp;queue,&nbsp;etc.&amp;nbsp;&nbsp;Think&nbsp;of&nbsp;Rabbit&nbsp;as&lt;br&gt;being&nbsp;a&nbsp;tool&nbsp;you&nbsp;can&nbsp;use&nbsp;for&nbsp;creating&nbsp;sort&nbsp;of&nbsp;the&nbsp;&quot;peripheral&nbsp;nervous&nbsp;system&quot;&nbsp;of&nbsp;your&nbsp;application,&lt;br&gt;ferrying&nbsp;tasks,&nbsp;events,&nbsp;notifications&nbsp;and&nbsp;the&nbsp;like&nbsp;between&nbsp;whatever&nbsp;your&nbsp;system's&nbsp;eyes,&nbsp;hands,&lt;br&gt;feet,&nbsp;brains,&nbsp;tentacles,&nbsp;etc.&nbsp;might&nbsp;be.&amp;nbsp;&nbsp;It's&nbsp;likely&nbsp;your&nbsp;various&nbsp;applications&nbsp;requiring&nbsp;long&nbsp;term&lt;br&gt;persistence,&nbsp;or&nbsp;richer&nbsp;querying&nbsp;and&nbsp;processing,&nbsp;aren't&nbsp;going&nbsp;to&nbsp;map&nbsp;well&nbsp;on&nbsp;to&nbsp;the&nbsp;message&lt;br&gt;transport&nbsp;system&nbsp;itself,&nbsp;and&nbsp;you&nbsp;might&nbsp;find&nbsp;yourself&nbsp;painted&nbsp;into&nbsp;strange&nbsp;corners&nbsp;if&nbsp;you&nbsp;try&lt;br&gt;to&nbsp;conflate&nbsp;the&nbsp;intention&nbsp;of&nbsp;these&nbsp;different&nbsp;types&nbsp;of&nbsp;systems&nbsp;too&nbsp;readily.&amp;nbsp;&nbsp;Make&nbsp;sense?&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&lt;br&gt;But&nbsp;maybe&nbsp;I&nbsp;am&nbsp;thinking&nbsp;about&nbsp;this&nbsp;the&nbsp;wrong&nbsp;way.&nbsp;Perhaps&nbsp;the&nbsp;only&nbsp;way&nbsp;to&nbsp;obtain&nbsp;messages&nbsp;from&nbsp;a&nbsp;queue&nbsp;is&nbsp;to&nbsp;be&nbsp;a&nbsp;proper&nbsp;consumer...?&lt;br&gt;&lt;br&gt;&lt;/div&gt;This&nbsp;is&nbsp;basically&nbsp;the&nbsp;case.&amp;nbsp;&nbsp;Sneak&nbsp;and&nbsp;peek&nbsp;tricks&nbsp;on&nbsp;queues,&nbsp;e.g.&nbsp;by&nbsp;consuming&nbsp;a&nbsp;batch&nbsp;of&lt;br&gt;messages,&nbsp;not&nbsp;ACK-ing&nbsp;them,&nbsp;and&nbsp;then&nbsp;rejecting&nbsp;them&nbsp;so&nbsp;that&nbsp;they&nbsp;requeue&nbsp;can&nbsp;quickly&lt;br&gt;lead&nbsp;to&nbsp;systems&nbsp;whose&nbsp;behavior&nbsp;isn't&nbsp;that&nbsp;easy&nbsp;to&nbsp;reason&nbsp;about.&amp;nbsp;&nbsp;If&nbsp;you&nbsp;think&nbsp;about&nbsp;Rabbit&lt;br&gt;as&nbsp;a&nbsp;way&nbsp;of&nbsp;loosening&nbsp;the&nbsp;coupling&nbsp;between&nbsp;systems&nbsp;that&nbsp;produce&nbsp;and&nbsp;eat&nbsp;data,&nbsp;you'll&nbsp;find&lt;br&gt;your&nbsp;cutting&nbsp;with&nbsp;the&nbsp;grain&nbsp;much&nbsp;more&nbsp;of&nbsp;the&nbsp;time&nbsp;and&nbsp;it&nbsp;will&nbsp;probably&nbsp;become&nbsp;easier&nbsp;to&lt;br&gt;focus&nbsp;on&nbsp;the&nbsp;parts&nbsp;of&nbsp;your&nbsp;system&nbsp;that&nbsp;do&nbsp;the&nbsp;work,&nbsp;as&nbsp;you&nbsp;let&nbsp;Rabbit&nbsp;gracefully&nbsp;move&nbsp;into&lt;br&gt;the&nbsp;background&nbsp;keeping&nbsp;things&nbsp;tied&nbsp;together&nbsp;and&nbsp;running,&nbsp;as&nbsp;producers&nbsp;and&nbsp;consumers&nbsp;may&nbsp;&lt;br&gt;be&nbsp;coming&nbsp;and&nbsp;going,&nbsp;starting&nbsp;and&nbsp;crashing,&nbsp;etc.&lt;br&gt;&lt;br&gt;Best&nbsp;regards,&lt;br&gt;Jerry&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
