<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi&nbsp;Matthew,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Oct&nbsp;13,&nbsp;2011,&nbsp;at&nbsp;12:32&nbsp;AM,&nbsp;Matthew&nbsp;Sackman&nbsp;wrote:&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Huh,&nbsp;that's&nbsp;interesting.&nbsp;I'm&nbsp;curious&nbsp;though&nbsp;-&nbsp;how&nbsp;do&nbsp;the&nbsp;properties&nbsp;of&lt;br&gt;your&nbsp;implementation&nbsp;differ&nbsp;from&nbsp;our&nbsp;default?&nbsp;-&nbsp;I'm&nbsp;not&nbsp;trying&nbsp;to&lt;br&gt;discourage&nbsp;you&nbsp;at&nbsp;all,&nbsp;just&nbsp;curious.&nbsp;Even&nbsp;if&nbsp;it's&nbsp;just&nbsp;for&nbsp;gaining&lt;br&gt;understanding&nbsp;and&nbsp;experience&nbsp;of&nbsp;implementing&nbsp;Rabbit's&nbsp;internal&nbsp;APIs,&lt;br&gt;it's&nbsp;still&nbsp;valuable.&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;my&nbsp;first&nbsp;goal&nbsp;was&nbsp;to&nbsp;learn&nbsp;more&nbsp;about&nbsp;the&nbsp;Rabbit's&nbsp;internal&nbsp;APIs.&nbsp;Besides&nbsp;that&amp;nbsp;I&nbsp;haven't&nbsp;conducted&nbsp;any&nbsp;benchmarks&nbsp;to&nbsp;see&nbsp;what&nbsp;could&nbsp;be&nbsp;the&nbsp;advantage&nbsp;of&nbsp;using&nbsp;Bitcask&nbsp;over&nbsp;ETS.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;According&nbsp;to&nbsp;the&nbsp;Basho&nbsp;devs&nbsp;they&nbsp;wanted&nbsp;to&nbsp;achieve&nbsp;this&nbsp;out&nbsp;of&nbsp;Bitcask:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;low&nbsp;latency&nbsp;per&nbsp;item&nbsp;read&nbsp;or&nbsp;written&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;high&nbsp;throughput,&nbsp;especially&nbsp;when&nbsp;writing&nbsp;an&nbsp;incoming&nbsp;stream&nbsp;of&nbsp;random&nbsp;items&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;ability&nbsp;to&nbsp;handle&nbsp;datasets&nbsp;much&nbsp;larger&nbsp;than&nbsp;RAM&nbsp;w/o&nbsp;degradation&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;crash&nbsp;friendliness,&nbsp;both&nbsp;in&nbsp;terms&nbsp;of&nbsp;fast&nbsp;recovery&nbsp;and&nbsp;not&nbsp;losing&nbsp;data&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;ease&nbsp;of&nbsp;backup&nbsp;and&nbsp;restore&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;a&nbsp;relatively&nbsp;simple,&nbsp;understandable&nbsp;(and&nbsp;thus&nbsp;supportable)&nbsp;code&nbsp;structure&nbsp;and&nbsp;data&nbsp;format&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;predictable&nbsp;behavior&nbsp;under&nbsp;heavy&nbsp;access&nbsp;load&nbsp;or&nbsp;large&nbsp;volume&amp;nbsp;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;10.9px/normal&nbsp;Helvetica;&nbsp;&quot;&gt;-&nbsp;a&nbsp;license&nbsp;that&nbsp;allowed&nbsp;for&nbsp;easy&nbsp;default&nbsp;use&nbsp;in&nbsp;Riak&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;From&nbsp;those&nbsp;items&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;ability&nbsp;to&nbsp;handle&nbsp;datasets&nbsp;much&nbsp;larger&nbsp;than&nbsp;RAM&nbsp;w/o&nbsp;degradation&nbsp;could&nbsp;be&nbsp;an&nbsp;advantage&nbsp;over&nbsp;ETS.&nbsp;Still…&nbsp;If&nbsp;I&nbsp;understand&nbsp;correctly&nbsp;the&nbsp;datastore&nbsp;implementation&nbsp;I&nbsp;think&nbsp;when&nbsp;Rabbit&nbsp;start&nbsp;to&nbsp;get&nbsp;pressure&nbsp;on&nbsp;RAM&nbsp;usage&nbsp;it&nbsp;does&nbsp;some&nbsp;flushes&nbsp;to&nbsp;disk.&nbsp;Perhaps&nbsp;there&nbsp;could&nbsp;be&nbsp;a&nbsp;benefit&nbsp;there…&nbsp;not&nbsp;sure.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;liked&nbsp;from&nbsp;this&nbsp;experiment&nbsp;is&nbsp;that&nbsp;there's&nbsp;no&nbsp;much&nbsp;code&nbsp;needed&nbsp;to&nbsp;have&nbsp;a&nbsp;different&nbsp;index&nbsp;implementation.&nbsp;Basho&nbsp;also&nbsp;created&nbsp;a&nbsp;LevelDB&nbsp;Erlang/C++&nbsp;NIF,&nbsp;I&nbsp;think&nbsp;that&nbsp;can&nbsp;also&nbsp;be&nbsp;made&nbsp;a&nbsp;index&nbsp;quite&nbsp;easy.&nbsp;I've&nbsp;created&nbsp;a&nbsp;wrapper&nbsp;for&nbsp;it&nbsp;for&nbsp;the&nbsp;umbrella&nbsp;but&nbsp;didn't&nbsp;had&nbsp;time&nbsp;to&nbsp;also&nbsp;implement&nbsp;the&nbsp;index&nbsp;behaviour.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Simplest&nbsp;way&nbsp;is&nbsp;to&nbsp;set&nbsp;the&nbsp;msg_store_index_module&nbsp;param&nbsp;in&nbsp;your&lt;br&gt;rabbitmq.config&nbsp;file&nbsp;-&nbsp;check&nbsp;the&nbsp;rabbit.app&nbsp;to&nbsp;see&nbsp;how&nbsp;it's&nbsp;set,&nbsp;but&lt;br&gt;there's&nbsp;nothing&nbsp;unusual&nbsp;there.&nbsp;Also&nbsp;check&nbsp;rabbitmq-toke&nbsp;which&lt;br&gt;(re-)implements&nbsp;the&nbsp;same&nbsp;interface&nbsp;and&nbsp;probably&nbsp;changes&nbsp;the&nbsp;env&nbsp;slightly&lt;br&gt;differently...&nbsp;;)&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;Yes…&nbsp;in&nbsp;my&nbsp;plugin&nbsp;I'm&nbsp;using&nbsp;the&nbsp;rabbit_boot_step&nbsp;thing&nbsp;to&nbsp;set&nbsp;my&nbsp;plugin&nbsp;as&nbsp;the&nbsp;default&nbsp;index.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alvaro&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
