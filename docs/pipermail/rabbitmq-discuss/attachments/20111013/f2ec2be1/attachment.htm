<tt>
I&amp;#39;ve&nbsp;just&nbsp;swapped&nbsp;out&nbsp;the&nbsp;whole&nbsp;amqp_client&nbsp;infrastructure&nbsp;in&nbsp;my&nbsp;erlang&nbsp;application&nbsp;to&nbsp;the&nbsp;latest&nbsp;release.&nbsp;It&nbsp;looks&nbsp;like&nbsp;there&nbsp;were&nbsp;significant&nbsp;changes&nbsp;to&nbsp;the&nbsp;infrastructure&nbsp;but&nbsp;the&nbsp;api&nbsp;remains&nbsp;almost&nbsp;identical&nbsp;(the&nbsp;network&nbsp;vs&nbsp;direct&nbsp;connection&nbsp;being&nbsp;the&nbsp;only&nbsp;exception&nbsp;I&amp;#39;ve&nbsp;found).&nbsp; But&nbsp;now&nbsp;I&amp;#39;m&nbsp;getting&nbsp;an&nbsp;error&nbsp;in&nbsp;code&nbsp;that&nbsp;used&nbsp;to&nbsp;work&nbsp;about&nbsp;my&nbsp;subscription.&nbsp; My&nbsp;code&nbsp;looks&nbsp;like&nbsp;this:&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;%%&nbsp;Queue&nbsp;is&nbsp;a&nbsp;binary&nbsp;name,&nbsp;Listener&nbsp;is&nbsp;a&nbsp;PID&nbsp;and&nbsp;State&nbsp;is&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;various&nbsp;things&nbsp;including&nbsp;the&nbsp;channel&nbsp;PID&lt;/div&gt;&lt;div&gt;&lt;div&gt;subscribe(Queue,Listener,State)&nbsp;-&amp;gt;&lt;/div&gt;&lt;div&gt;  &nbsp; Sub&nbsp;=&nbsp;#&amp;#39;basic.consume&amp;#39;{queue&nbsp;=&nbsp;Queue},&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; #&amp;#39;basic.consume_ok&amp;#39;{consumer_tag&nbsp;=&nbsp;Tag}&nbsp;=&nbsp;amqp_channel:subscribe(State:fetch(amqp_channel_pid),&nbsp;Sub,&nbsp;Listener),&lt;/div&gt;&lt;div&gt;  &nbsp; {ok,&nbsp;Tag}.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;worked&nbsp;with&nbsp;the&nbsp;previous&nbsp;version&nbsp;of&nbsp;the&nbsp;library&nbsp;and&nbsp;I&nbsp;don&amp;#39;t&nbsp;see&nbsp;any&nbsp;difference&nbsp;in&nbsp;the&nbsp;docs&nbsp;(&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/erlang-client-user-guide.html&quot;&gt;http://www.rabbitmq.com/erlang-client-user-guide.html&lt;/a&gt;)&nbsp;now&nbsp;it&nbsp;produces&nbsp;the&nbsp;following&nbsp;error:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; {{function_clause,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [{amqp_selective_consumer,handle_consume_ok,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[{&amp;#39;basic.consume_ok&amp;#39;,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;lt;&amp;lt;&amp;quot;amq.ctag-yC9CxaknYwPrAYj5hCChPQ==&amp;quot;&amp;gt;&amp;gt;},&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&amp;#39;basic.consume&amp;#39;,0,&amp;lt;&amp;lt;&amp;quot;harbinger-dm-hipaa&amp;quot;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&amp;gt;&amp;gt;,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; false,false,false,false,[]},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {state,&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {dict,0,16,16,8,80,48,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[],[],[]},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [],[],[]}}},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hipaa,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {dict,0,16,16,8,80,48,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[],[],[]},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{[],[],[],[],[],[],[],[],[],[],[],[],[],&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [],[],[]}}},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; none}]},&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{amqp_gen_consumer,handle_call,3},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{gen_server2,handle_msg,2},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{proc_lib,init_p_do_apply,3}]},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {gen_server2,call,&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [&amp;lt;0.181.0&amp;gt;,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{consumer_call,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&amp;#39;basic.consume_ok&amp;#39;,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;lt;&amp;lt;&amp;quot;amq.ctag-yC9CxaknYwPrAYj5hCChPQ==&amp;quot;&amp;gt;&amp;gt;},&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{&amp;#39;basic.consume&amp;#39;,0,&amp;lt;&amp;lt;&amp;quot;harbinger-dm-hipaa&amp;quot;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&amp;gt;&amp;gt;,&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;false,false,false,false,[]}},&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;infinity]}}&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;a&nbsp;clause&nbsp;in&nbsp;the&nbsp;new&nbsp;docs&nbsp;that&nbsp;explains&nbsp;the&nbsp;difference&nbsp;between&nbsp;the&nbsp;selective&nbsp;consumer&nbsp;and&nbsp;the&nbsp;direct&nbsp;consumer.&nbsp;Based&nbsp;on&nbsp;that&nbsp;description&nbsp;it&nbsp;seems&nbsp;like&nbsp;everything&nbsp;used&nbsp;to&nbsp;be&nbsp;a&nbsp;direct&nbsp;consumer&nbsp;and&nbsp;that&amp;#39;s&nbsp;what&nbsp;I&nbsp;should&nbsp;be&nbsp;using,&nbsp;but&nbsp;I&nbsp;don&amp;#39;t&nbsp;see&nbsp;any&nbsp;docs&nbsp;on&nbsp;how&nbsp;to&nbsp;use&nbsp;it.&nbsp;I&nbsp;explored&nbsp;the&nbsp;rabbit&nbsp;headers&nbsp;and&nbsp;couldn&amp;#39;t&nbsp;find&nbsp;anything&nbsp;that&nbsp;would&nbsp;let&nbsp;me&nbsp;select&nbsp;it.&nbsp;The&nbsp;only&nbsp;mention&nbsp;of&nbsp;it&nbsp;I&nbsp;found&nbsp;was&nbsp;when&nbsp;selective&nbsp;consumer&nbsp;is&nbsp;set&nbsp;as&nbsp;the&nbsp;default.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;-Max&lt;/div&gt;<br>

</tt>
