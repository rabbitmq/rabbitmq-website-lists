<tt>
We&nbsp;figured&nbsp;it&nbsp;out&nbsp;on&nbsp;our&nbsp;own.&nbsp; The&nbsp;cluster&nbsp;is&nbsp;using&nbsp;short&nbsp;names&nbsp;for&nbsp;node&nbsp;names.&nbsp; For&nbsp;some&nbsp;reason&nbsp;the&nbsp;EC2&nbsp;DHCP&nbsp;client&nbsp;failed&nbsp;to&nbsp;set&nbsp;the&nbsp;domain&nbsp;entry&nbsp;in&nbsp;resolv.conf,&nbsp;thus&nbsp;the&nbsp;restarted&nbsp;node&amp;#39;s&nbsp;mnesia&nbsp;could&nbsp;not&nbsp;communicate&nbsp;with&nbsp;other&nbsp;nodes.&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yet&nbsp;the&nbsp;errors&nbsp;and&nbsp;logs&nbsp;made&nbsp;no&nbsp;mention&nbsp;of&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;node&amp;#39;s&nbsp;IP&nbsp;could&nbsp;not&nbsp;be&nbsp;resolved.&nbsp; Had&nbsp;such&nbsp;an&nbsp;error&nbsp;been&nbsp;printed&nbsp;the&nbsp;problem&nbsp;could&nbsp;have&nbsp;been&nbsp;diagnosed&nbsp;and&nbsp;fixed&nbsp;in&nbsp;a&nbsp;couple&nbsp;of&nbsp;minutes.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;someone&nbsp;please&nbsp;open&nbsp;a&nbsp;trouble&nbsp;ticket&nbsp;to&nbsp;get&nbsp;some&nbsp;sort&nbsp;of&nbsp;error&nbsp;logged&nbsp;for&nbsp;this&nbsp;cases?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;to&nbsp;imagine&nbsp;many&nbsp;of&nbsp;the&nbsp;issues&nbsp;reported&nbsp;as timeout_waiting_for_tables&nbsp;errors&nbsp;are&nbsp;of&nbsp;similar&nbsp;origin.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Dec&nbsp;9,&nbsp;2011&nbsp;at&nbsp;12:33&nbsp;PM,&nbsp;Elias&nbsp;Levy&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:fearsome.lucidity@gmail.com&quot;&gt;fearsome.lucidity@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Last&nbsp;night&nbsp;we&nbsp;had&nbsp;to&nbsp;reboot&nbsp;a&nbsp;RabbitMQ&nbsp;node&nbsp;in&nbsp;a&nbsp;3&nbsp;node&nbsp;cluster&nbsp;within&nbsp;EC2.&nbsp; The&nbsp;node&nbsp;failed&nbsp;to&nbsp;restart&nbsp;with&nbsp;the&nbsp;dreaded timeout_waiting_for_tables&nbsp;error.&nbsp; &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Looking&nbsp;as&nbsp;past&nbsp;discussion&nbsp;on&nbsp;that&nbsp;topic&nbsp;it&nbsp;is&nbsp;clear&nbsp;that&nbsp;the&nbsp;most&nbsp;common&nbsp;reason&nbsp;for&nbsp;it&nbsp;is&nbsp;a&nbsp;node&nbsp;name&nbsp;change,&nbsp;either&nbsp;because&nbsp;the&nbsp;node&nbsp;name&nbsp;contains&nbsp;the&nbsp;IP&nbsp;address,&nbsp;the&nbsp;hostname&nbsp;changed,&nbsp;or&nbsp;a&nbsp;new&nbsp;node&nbsp;is&nbsp;being&nbsp;provisioned&nbsp;on&nbsp;an&nbsp;image&nbsp;with&nbsp;an&nbsp;old&nbsp;mnesia&nbsp;DB&nbsp;with&nbsp;some&nbsp;other&nbsp;nodename.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;None&nbsp;of&nbsp;those&nbsp;appears&nbsp;to&nbsp;apply&nbsp;in&nbsp;our&nbsp;current&nbsp;situation.&nbsp; The&nbsp;node&nbsp;name&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;IP&nbsp;address&nbsp;and&nbsp;the&nbsp;node&nbsp;name&nbsp;did&nbsp;not&nbsp;change,&nbsp;as&nbsp;can&nbsp;be&nbsp;seen&nbsp;in&nbsp;the&nbsp;start&nbsp;up&nbsp;logs.&nbsp; Just&nbsp;to&nbsp;be&nbsp;sure&nbsp;we&nbsp;set&nbsp;the&nbsp;node&nbsp;name&nbsp;in&nbsp;the&nbsp;/etc/rabbitmq/rabbitmq-env.conf&nbsp;file&nbsp;and&nbsp;attempted&nbsp;to&nbsp;restart,&nbsp;again&nbsp;without&nbsp;success.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;enabled&nbsp;mnesia&nbsp;debugging&nbsp;at&nbsp;the&nbsp;trace&nbsp;level&nbsp;and&nbsp;it&nbsp;does&nbsp;not&nbsp;provide&nbsp;any&nbsp;useful&nbsp;information&nbsp;as&nbsp;to&nbsp;what&nbsp;is&nbsp;causing&nbsp;the&nbsp;timeout.&nbsp; The&nbsp;cluster&nbsp;has&nbsp;developed&nbsp;a&nbsp;backlog&nbsp;of&nbsp;persistent&nbsp;messages&nbsp;in&nbsp;two&nbsp;of&nbsp;the&nbsp;queues&nbsp;(about&nbsp;70K&nbsp;in&nbsp;total),&nbsp;but&nbsp;from&nbsp;looking&nbsp;at&nbsp;what&nbsp;tables&nbsp;the&nbsp;system&nbsp;complains&nbsp;about&nbsp;it&nbsp;does&nbsp;not&nbsp;appear&nbsp;those&nbsp;are&nbsp;the&nbsp;tables&nbsp;its&nbsp;trying&nbsp;to&nbsp;sync.&nbsp; All&nbsp;the&nbsp;other&nbsp;metadata&nbsp;(users,&nbsp;exchanges,&nbsp;bindings,&nbsp;queues)&nbsp;is&nbsp;of&nbsp;very&nbsp;small&nbsp;size,&nbsp;so&nbsp;30&nbsp;seconds&nbsp;should&nbsp;be&nbsp;sufficient&nbsp;time.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;While&nbsp;we&nbsp;could&nbsp;wipe&nbsp;the&nbsp;mnesia&nbsp;state&nbsp;from&nbsp;the&nbsp;node,&nbsp;we&amp;#39;d&nbsp;like&nbsp;to&nbsp;find&nbsp;out&nbsp;why&nbsp;this&nbsp;happens&nbsp;and&nbsp;whether&nbsp;it&nbsp;can&nbsp;be&nbsp;repaired,&nbsp;for&nbsp;future&nbsp;reference.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
