<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Dec&nbsp;9,&nbsp;2011&nbsp;at&nbsp;17:13,&nbsp;Michael&nbsp;Klishin&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:michael.s.klishin@gmail.com&quot;&gt;michael.s.klishin@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
Le&nbsp;09/dic/2011&nbsp;à&nbsp;19:41,&nbsp;Busoli,&nbsp;Simone&nbsp;a&nbsp;écrit&nbsp;:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&amp;#39;m&nbsp;dealing&nbsp;with&nbsp;this&nbsp;by&nbsp;having&nbsp;a&nbsp;single&nbsp;channel&nbsp;with&nbsp;one&nbsp;consumer&nbsp;which&nbsp;consumes&nbsp;from&nbsp;all&nbsp;the&nbsp;queues&nbsp;the&nbsp;application&nbsp;needs&nbsp;to&nbsp;read&nbsp;data&nbsp;from.&nbsp;What&nbsp;kind&nbsp;of&nbsp;limitation&nbsp;do&nbsp;you&nbsp;see&nbsp;in&nbsp;keeping&nbsp;it&nbsp;single&nbsp;threaded?&lt;br&gt;<br>
<br>
<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;think&nbsp;it&amp;#39;s&nbsp;fine&nbsp;for&nbsp;many&nbsp;cases,&nbsp;however,&nbsp;I&nbsp;am&nbsp;designing&nbsp;a&nbsp;solution&nbsp;that&nbsp;library&nbsp;will&nbsp;use&nbsp;and&nbsp;there&nbsp;are&nbsp;definitely&nbsp;problems&nbsp;that&nbsp;can&nbsp;be&nbsp;naturally&nbsp;split&nbsp;into&nbsp;many&nbsp;concurrent&nbsp;tasks.&lt;br&gt;<br>
&lt;br&gt;<br>
Currently&nbsp;both&nbsp;Langohr&nbsp;and&nbsp;Hot&nbsp;Bunnies&nbsp;use&nbsp;an&nbsp;executor&nbsp;(basically,&nbsp;submit&nbsp;message&nbsp;handlers&nbsp;to&nbsp;a&nbsp;thread&nbsp;pool)&nbsp;which&nbsp;is&nbsp;single&nbsp;threaded&nbsp;by&nbsp;default&nbsp;but&nbsp;can&nbsp;be&nbsp;swapped&nbsp;with&nbsp;any&nbsp;other.&nbsp;So&nbsp;my&nbsp;thinking&nbsp;is&nbsp;influenced&nbsp;by&nbsp;this&nbsp;scenario,&nbsp;probably&nbsp;too&nbsp;much.&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;not&nbsp;familiar&nbsp;with&nbsp;the&nbsp;executor&nbsp;you&nbsp;mention,&nbsp;but&nbsp;with&nbsp;&amp;quot;submit&nbsp;message&nbsp;handlers&nbsp;to&nbsp;a&nbsp;thread&nbsp;pool&amp;quot;&nbsp;what&nbsp;do&nbsp;you&nbsp;mean&nbsp;exactly?&nbsp;What&nbsp;I&nbsp;mentioned&nbsp;above&nbsp;is&nbsp;just&nbsp;how&nbsp;the&nbsp;library&nbsp;consumes&nbsp;messages&nbsp;from&nbsp;rabbit,&nbsp;how&nbsp;it&nbsp;marshals&nbsp;them&nbsp;to&nbsp;the&nbsp;application&nbsp;code&nbsp;is&nbsp;a&nbsp;different&nbsp;matter.&nbsp;Currently&nbsp;I&amp;#39;m&nbsp;doing&nbsp;the&nbsp;marshaling&nbsp;in&nbsp;the&nbsp;same&nbsp;thread&nbsp;as&nbsp;that&nbsp;which&nbsp;consumes&nbsp;from&nbsp;the&nbsp;rabbit&nbsp;queue,&nbsp;which&nbsp;has&nbsp;the&nbsp;disadvantage&nbsp;of&nbsp;being&nbsp;as&nbsp;blocking&nbsp;as&nbsp;the&nbsp;application&nbsp;code&nbsp;which&nbsp;consumes&nbsp;the&nbsp;message,&nbsp;but&nbsp;also&nbsp;the&nbsp;advantage&nbsp;of&nbsp;being&nbsp;able&nbsp;to&nbsp;intercept&nbsp;exceptions&nbsp;being&nbsp;thrown&nbsp;by&nbsp;the&nbsp;application&nbsp;consuming&nbsp;the&nbsp;message&nbsp;and&nbsp;thus&nbsp;enable&nbsp;policies&nbsp;to&nbsp;retry&nbsp;the&nbsp;consume,&nbsp;for&nbsp;instance.&nbsp;Anyway&nbsp;I&amp;#39;m&nbsp;not&nbsp;sure&nbsp;I&nbsp;understand&nbsp;what&nbsp;you&nbsp;specifically&nbsp;refer&nbsp;to&nbsp;and&nbsp;I&amp;#39;be&nbsp;glad&nbsp;if&nbsp;you&nbsp;could&nbsp;expand&nbsp;as&nbsp;it&nbsp;is&nbsp;something&nbsp;interesting&nbsp;for&nbsp;me&nbsp;too,&nbsp;as&nbsp;I&nbsp;didn&amp;#39;t&nbsp;take&nbsp;much&nbsp;time&nbsp;to&nbsp;look&nbsp;into&nbsp;how&nbsp;other&nbsp;libraries&nbsp;are&nbsp;handling&nbsp;that.&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;3.&nbsp;How&nbsp;do&nbsp;I&nbsp;detect&nbsp;that&nbsp;reconnection&nbsp;has&nbsp;succeeded?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;In&nbsp;the&nbsp;.NET&nbsp;client&nbsp;when&nbsp;you&nbsp;Open&nbsp;the&nbsp;connection&nbsp;and&nbsp;no&nbsp;exception&nbsp;is&nbsp;thrown&nbsp;I&nbsp;think&nbsp;you&nbsp;can&nbsp;safely&nbsp;assume&nbsp;that&nbsp;the&nbsp;connection&nbsp;has&nbsp;been&nbsp;established.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;This&nbsp;is&nbsp;true&nbsp;for&nbsp;the&nbsp;Java&nbsp;client,&nbsp;too.&nbsp;Does&nbsp;this&nbsp;mean&nbsp;that&nbsp;you&nbsp;open&nbsp;all&nbsp;channels&nbsp;in&nbsp;one&nbsp;place&nbsp;in&nbsp;the&nbsp;code?&nbsp;(I&nbsp;find&nbsp;this&nbsp;is&nbsp;a&nbsp;good&nbsp;idea)&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;actually&nbsp;have&nbsp;an&nbsp;IPublishingModule&nbsp;and&nbsp;an&nbsp;IComsumingModule,&nbsp;which&nbsp;are&nbsp;independent&nbsp;of&nbsp;each&nbsp;other.&nbsp;They&nbsp;both&nbsp;subscribe&nbsp;to&nbsp;events&nbsp;fired&nbsp;by&nbsp;a&nbsp;ReliableConnection&nbsp;class&nbsp;I&nbsp;implemented&nbsp;which&nbsp;takes&nbsp;care&nbsp;of&nbsp;spotting&nbsp;connection&nbsp;issues&nbsp;and&nbsp;schedule&nbsp;reconnection&nbsp;the&nbsp;broker&nbsp;when&nbsp;it&nbsp;shuts&nbsp;down,&nbsp;notifying&nbsp;observers&nbsp;about&nbsp;these&nbsp;events.&nbsp;The&nbsp;modules&nbsp;carry&nbsp;out&nbsp;what&nbsp;is&nbsp;sensible&nbsp;for&nbsp;them&nbsp;in&nbsp;response&nbsp;to&nbsp;connection&nbsp;status&nbsp;events.&nbsp;For&nbsp;instance&nbsp;the&nbsp;publishing&nbsp;module&nbsp;stops&nbsp;trying&nbsp;to&nbsp;publish&nbsp;and&nbsp;enqueues&nbsp;publishes&nbsp;requested&nbsp;by&nbsp;the&nbsp;application&nbsp;code&nbsp;(which&nbsp;is&nbsp;thus&nbsp;unaware,&nbsp;to&nbsp;a&nbsp;certain&nbsp;extent,&nbsp;of&nbsp;the&nbsp;temporary&nbsp;connection&nbsp;failure),&nbsp;and&nbsp;then&nbsp;as&nbsp;soon&nbsp;as&nbsp;the&nbsp;connection&nbsp;is&nbsp;restored&nbsp;recreates&nbsp;the&nbsp;channel&nbsp;and&nbsp;resumes&nbsp;publishing.&nbsp;On&nbsp;the&nbsp;other&nbsp;hand&nbsp;the&nbsp;consuming&nbsp;module&nbsp;will&nbsp;just&nbsp;stop&nbsp;receiving&nbsp;and&nbsp;will&nbsp;recreate&nbsp;the&nbsp;amqp&nbsp;entities&nbsp;when&nbsp;the&nbsp;connection&nbsp;is&nbsp;restored.&lt;/div&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&nbsp;HOEnZb&quot;&gt;&lt;br&gt;<br>
MK&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://github.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twitter.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
