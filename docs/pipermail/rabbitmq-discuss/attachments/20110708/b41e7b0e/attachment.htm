<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2011/7/8&nbsp;Michael&nbsp;Klishin&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:michael.s.klishin@gmail.com&quot;&gt;michael.s.klishin@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;2011/7/8&nbsp;Michael&nbsp;Nacos&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:m.nacos@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;m.nacos@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
&lt;div&gt;so,&nbsp;what&amp;#39;s&nbsp;currently&nbsp;the&nbsp;best&nbsp;way&nbsp;to&nbsp;publish&nbsp;messages&nbsp;consumed&nbsp;from&nbsp;one&nbsp;queue&nbsp;into&nbsp;another&nbsp;with&nbsp;the&nbsp;amqp&nbsp;gem?&nbsp;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Just&nbsp;republish&nbsp;them&nbsp;or&nbsp;take&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;Disregard&nbsp;this&nbsp;part.&nbsp;I&nbsp;now&nbsp;understand&nbsp;the&nbsp;question&nbsp;better.&nbsp;With&nbsp;a&nbsp;multi-step&nbsp;workflow,&nbsp;when&nbsp;one&nbsp;application&nbsp;(A1)&nbsp;consumes&nbsp;messages&nbsp;from&nbsp;one&nbsp;queue,&nbsp;processes&nbsp;them&nbsp;and&nbsp;publishes&nbsp;the&nbsp;original&nbsp;message&nbsp;or&nbsp;a&nbsp;different&nbsp;one&nbsp;to&nbsp;another&nbsp;queue,&nbsp;you&nbsp;need&nbsp;to&nbsp;use&nbsp;a&nbsp;combination&nbsp;of&nbsp;features:&lt;br&gt;<br>
<br>
&lt;br&gt;1.&nbsp;Explicit&nbsp;message&nbsp;acknowledgements&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://rubydoc.info/github/ruby-amqp/amqp/master/file/docs/Queues.textile#Message_acknowledgements&quot;&gt;http://rubydoc.info/github/ruby-amqp/amqp/master/file/docs/Queues.textile#Message_acknowledgements&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;br&gt;2.&nbsp;Publisher&nbsp;confirmations&lt;br&gt;&lt;br&gt;The&nbsp;only&nbsp;way&nbsp;to&nbsp;know&nbsp;that&nbsp;your&nbsp;re-published&nbsp;message&nbsp;is&nbsp;received&nbsp;by&nbsp;the&nbsp;broker&nbsp;is&nbsp;to&nbsp;receive&nbsp;an&nbsp;acknowledgement&nbsp;from&nbsp;it.&lt;br&gt;I&nbsp;now&nbsp;realize&nbsp;that&nbsp;documentation&nbsp;section&nbsp;does&nbsp;not&nbsp;provide&nbsp;any&nbsp;code&nbsp;examples.&nbsp;I&nbsp;will&nbsp;put&nbsp;something&nbsp;together&nbsp;later&nbsp;today.&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;a&nbsp;href=&quot;http://rubydoc.info/github/ruby-amqp/amqp/master/file/docs/Exchanges.textile#Using_Publisher_Confirms_extension_to_AMQP_0_9_1&quot;&gt;http://rubydoc.info/github/ruby-amqp/amqp/master/file/docs/Exchanges.textile#Using_Publisher_Confirms_extension_to_AMQP_0_9_1&lt;/a&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;<br>
<br>
&lt;br&gt;&lt;br&gt;So&nbsp;A1&nbsp;would&nbsp;consume&nbsp;a&nbsp;message,&nbsp;process&nbsp;it,&nbsp;republish&nbsp;it&nbsp;and&nbsp;as&nbsp;soon&nbsp;as&nbsp;publishing&nbsp;confirmation&nbsp;arrives,&nbsp;A1&nbsp;acknowledges&nbsp;the&nbsp;original&nbsp;one.&lt;br&gt;--&nbsp;&lt;br&gt;MK&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://github.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;a&nbsp;href=&quot;http://twitter.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/michaelklishin&lt;/a&gt;&lt;br&gt;&lt;br&gt;<br>

</tt>
