<tt>
Hi,&lt;br&gt;&lt;br&gt;I&amp;#39;ve&nbsp;fallowed&nbsp;your&nbsp;instructions&nbsp;and&nbsp;configured&nbsp;my&nbsp;RabbitMQ&nbsp;server&nbsp;under&nbsp;windows&nbsp;to&nbsp;use&nbsp;different&nbsp;configuration&nbsp;setup:&lt;br&gt;&lt;br&gt;1)&nbsp;[{rabbit,&nbsp;[{vm_memory_high_watermark,&nbsp;0.80}]}].&lt;br&gt;2)&nbsp;[{rabbit,&nbsp;[{vm_memory_high_watermark,&nbsp;0.40}]}].&lt;br&gt;<br>
3)&nbsp;[{rabbit,&nbsp;[{vm_memory_high_watermark,&nbsp;0.25}]}].&lt;br&gt;4)&nbsp;[{rabbit,&nbsp;[{vm_memory_high_watermark,&nbsp;0.20}]}].&lt;br&gt;5)&nbsp;[{rabbit,&nbsp;[{vm_memory_high_watermark,&nbsp;0.10}]}].&lt;br&gt;&lt;br&gt;Every&nbsp;time&nbsp;I&amp;#39;ve&nbsp;started&nbsp;RabbiitMQ&nbsp;server&nbsp;with&nbsp;one&nbsp;of&nbsp;the&nbsp;previous&nbsp;configuration&nbsp;and&nbsp;then&nbsp;started&nbsp;my&nbsp;Test&nbsp;application&nbsp;but&nbsp;every&nbsp;time&nbsp;the&nbsp;RabbitMQ&nbsp;server&nbsp;crashed&nbsp;down&nbsp;after&nbsp;a&nbsp;few&nbsp;minutes.I&nbsp;don&amp;#39;t&nbsp;sincerly&nbsp;find&nbsp;any&nbsp;problem&nbsp;in&nbsp;my&nbsp;application&amp;#39;s&nbsp;code&nbsp;and,&nbsp;as&nbsp;I&amp;#39;ve&nbsp;stated&nbsp;in&nbsp;previous&nbsp;e-mail&nbsp;the&nbsp;test&nbsp;is&nbsp;very&nbsp;simple.&nbsp;Anyway&nbsp;I&amp;#39;ve&nbsp;attached&nbsp;my&nbsp;project&nbsp;and&nbsp;hope&nbsp;someone&nbsp;can&nbsp;test&nbsp;my&nbsp;application&nbsp;under&nbsp;different&nbsp;machine&nbsp;then&nbsp;window&nbsp;because&nbsp;for&nbsp;the&nbsp;moment&nbsp;I&amp;#39;m&nbsp;unable&nbsp;to&nbsp;operate&nbsp;this&nbsp;kind&nbsp;of&nbsp;test.&nbsp;Hope&nbsp;to&nbsp;have&nbsp;a&nbsp;response.&nbsp;Thanks,&nbsp;best&nbsp;regards&lt;br&gt;<br>
&lt;br&gt;P.S.&nbsp;(How&nbsp;to&nbsp;use&nbsp;the&nbsp;project):&lt;br&gt;&lt;br&gt;The&nbsp;attached&nbsp;file&nbsp;is&nbsp;a&nbsp;MAVEN&nbsp;project&nbsp;(platform&nbsp;independent)&nbsp;which&nbsp;produces&nbsp;as&nbsp;output&nbsp;an&nbsp;executable&nbsp;project.&nbsp;The&nbsp;project&nbsp;is&nbsp;composed&nbsp;by&nbsp;two&nbsp;sub-modules,&nbsp;one&nbsp;is&nbsp;use&nbsp;to&nbsp;test&nbsp;ActiveMQ&nbsp;and&nbsp;another&nbsp;one&nbsp;is&nbsp;used&nbsp;to&nbsp;test&nbsp;RabbitMQ.&nbsp;Basically&nbsp;the&nbsp;project&nbsp;is&nbsp;a&nbsp;ready&nbsp;to&nbsp;go&nbsp;for&nbsp;running,&nbsp;just&nbsp;configure&nbsp;the&nbsp;properties&nbsp;file&nbsp;(server&nbsp;connection,&nbsp;login,&nbsp;etc.).&nbsp;The&nbsp;configuration&nbsp;files&nbsp;are&nbsp;respectively&nbsp;placed&nbsp;under&nbsp;&amp;quot;${broker_type}mq/publisher/data/publisher.properties&amp;quot;.&nbsp;Both&nbsp;the&nbsp;two&nbsp;sub-modules&nbsp;(and&nbsp;both&nbsp;publisher&nbsp;or&nbsp;subscriber&nbsp;applications)&nbsp;produces&nbsp;as&nbsp;output&nbsp;a&nbsp;.csv&nbsp;file&nbsp;under&nbsp;the&nbsp;folder&nbsp;&amp;quot;${broker_type}mq/${application_type}/results&amp;quot;&nbsp;where&nbsp;are&nbsp;printed&nbsp;some&nbsp;test&nbsp;results.&nbsp;Also&nbsp;the&nbsp;messages&nbsp;number&nbsp;and&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;message&nbsp;can&nbsp;be&nbsp;configured&nbsp;to&nbsp;the&nbsp;publishers&nbsp;by&nbsp;using&nbsp;the&nbsp;file&nbsp;located&nbsp;under&nbsp;the&nbsp;folder&nbsp;&amp;quot;${broker_type}mq/${application_type}/data/${broker_type}MQTesterPublisher.txt&amp;quot;&nbsp;(an&nbsp;example&nbsp;is&nbsp;already&nbsp;provided).&lt;br&gt;<br>
&lt;br&gt;Cristoforo.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2011/1/14&nbsp;Matthew&nbsp;Sackman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthew@rabbitmq.com&quot;&gt;matthew@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;Jan&nbsp;11,&nbsp;2011&nbsp;at&nbsp;12:44:54PM&nbsp;+0100,&nbsp;Crisoforo&nbsp;Seccia&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;.&nbsp;Am&nbsp;I&nbsp;adopting&nbsp;a&nbsp;very&nbsp;strange&nbsp;test&nbsp;case&nbsp;which&nbsp;is&nbsp;not&nbsp;well&nbsp;handled&nbsp;by&lt;br&gt;<br>
&amp;gt;&nbsp;RabbitMQ?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Not&nbsp;really,&nbsp;no.&nbsp;However,&nbsp;there&nbsp;are&nbsp;problems&nbsp;with&nbsp;RabbitMQ&nbsp;under&nbsp;Windows,&lt;br&gt;<br>
and&nbsp;you&nbsp;may&nbsp;have&nbsp;to&nbsp;do&nbsp;some&nbsp;tweaking&nbsp;of&nbsp;the&nbsp;configuration.&nbsp;The&nbsp;fact&nbsp;that&lt;br&gt;<br>
you&nbsp;crashed&nbsp;on&nbsp;an&nbsp;eheap&nbsp;allocation&nbsp;suggests&nbsp;that&nbsp;Rabbit&nbsp;tried&nbsp;to&lt;br&gt;<br>
allocate&nbsp;memory&nbsp;that&nbsp;Windows&nbsp;refused&nbsp;it.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/extensions.html#memsup&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/extensions.html#memsup&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Rabbit&nbsp;by&nbsp;default&nbsp;assumes&nbsp;that&nbsp;it&amp;#39;s&nbsp;the&nbsp;only&nbsp;application&nbsp;running&nbsp;on&nbsp;a&lt;br&gt;<br>
machine,&nbsp;and&nbsp;thus&nbsp;it&nbsp;can&nbsp;expect&nbsp;to&nbsp;be&nbsp;allocated&nbsp;all&nbsp;memory.&nbsp;You&nbsp;may&lt;br&gt;<br>
wish,&nbsp;as&nbsp;suggested&nbsp;in&nbsp;the&nbsp;above&nbsp;page,&nbsp;to&nbsp;try&nbsp;reducing&nbsp;the&lt;br&gt;<br>
vm_memory_high_watermark&nbsp;and&nbsp;repeat&nbsp;the&nbsp;tests.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;.&nbsp;Is&nbsp;there&nbsp;any&nbsp;connection&nbsp;with&nbsp;the&nbsp;solved&nbsp;bug&nbsp;described&nbsp;in&nbsp;the&nbsp;RabbitMQ&nbsp;2.2&lt;br&gt;<br>
&amp;gt;&nbsp;release&nbsp;notes&nbsp;(“fix&nbsp;memory&nbsp;leak&nbsp;when&nbsp;long-running&nbsp;channels&nbsp;consume&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;cancel&nbsp;on&nbsp;many&nbsp;queues”)?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Nope&nbsp;-&nbsp;that&nbsp;bug&nbsp;would&nbsp;have&nbsp;likely&nbsp;taken&nbsp;months&nbsp;of&nbsp;constant&nbsp;tripping&nbsp;to&lt;br&gt;<br>
actually&nbsp;result&nbsp;in&nbsp;any&nbsp;sizable&nbsp;memory&nbsp;leak.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;.&nbsp;How&nbsp;does&nbsp;RabbitMQ&nbsp;handle&nbsp;message&nbsp;flooding?&nbsp;As&nbsp;stated&nbsp;in&nbsp;ActiveMQ&nbsp;official&lt;br&gt;<br>
&amp;gt;&nbsp;page,&nbsp;the&nbsp;flow&nbsp;control,&nbsp;in&nbsp;the&nbsp;current&nbsp;version&nbsp;means&nbsp;that:&nbsp;“if&nbsp;the&nbsp;broker&lt;br&gt;<br>
&amp;gt;&nbsp;detects&nbsp;that&nbsp;the&nbsp;memory&nbsp;limit&nbsp;for&nbsp;the&nbsp;destination,&nbsp;or&nbsp;the&nbsp;temp-&nbsp;or&lt;br&gt;<br>
&amp;gt;&nbsp;file-store&nbsp;limits&nbsp;for&nbsp;the&nbsp;broker,&nbsp;have&nbsp;been&nbsp;exceeded,&nbsp;then&nbsp;the&nbsp;flow&nbsp;of&lt;br&gt;<br>
&amp;gt;&nbsp;messages&nbsp;can&nbsp;be&nbsp;slowed&nbsp;down.&nbsp;The&nbsp;producer&nbsp;will&nbsp;be&nbsp;either&nbsp;blocked&nbsp;until&lt;br&gt;<br>
&amp;gt;&nbsp;resources&nbsp;are&nbsp;available&nbsp;or&nbsp;will&nbsp;receive&nbsp;a&nbsp;JMSException”.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Again,&nbsp;the&nbsp;above&nbsp;link&nbsp;will&nbsp;explain&nbsp;it&nbsp;all,&nbsp;but&nbsp;in&nbsp;short,&nbsp;Rabbit&nbsp;uses&nbsp;TCP&lt;br&gt;<br>
back&nbsp;pressure&nbsp;to&nbsp;prevent&nbsp;producers&nbsp;flooding&nbsp;it&nbsp;with&nbsp;too&nbsp;many&nbsp;messages.&lt;br&gt;<br>
Ultimately,&nbsp;you&amp;#39;re&nbsp;always&nbsp;limited&nbsp;by&nbsp;the&nbsp;rate&nbsp;at&nbsp;which&nbsp;you&nbsp;can&nbsp;get&nbsp;rid&lt;br&gt;<br>
of&nbsp;messages&nbsp;-&nbsp;whether&nbsp;to&nbsp;clients&nbsp;or&nbsp;to&nbsp;disk.&nbsp;In&nbsp;effect,&nbsp;RAM&nbsp;just&nbsp;acts&nbsp;as&lt;br&gt;<br>
a&nbsp;huge&nbsp;(hopefully!)&nbsp;buffer.&lt;br&gt;<br>
&lt;br&gt;<br>
Matthew&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
