<tt>
Hi&nbsp;Matthias,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;limits.conf&nbsp;only&nbsp;takes&nbsp;effect&nbsp;when&nbsp;pam_limits&nbsp;module&nbsp;is&nbsp;run;&nbsp;as&nbsp;described&nbsp;by&nbsp;the&nbsp;small&nbsp;hurdle&nbsp;with&nbsp;Ubuntu&nbsp;in&nbsp;the&nbsp;linked&nbsp;thread.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;start-stop-daemon&nbsp;(at&nbsp;least&nbsp;the&nbsp;version&nbsp;a&nbsp;part&nbsp;of&nbsp;dpkg)&nbsp;only&nbsp;uses&nbsp;setuid(2)&nbsp;to&nbsp;change&nbsp;the&nbsp;uid&nbsp;of&nbsp;the&nbsp;process&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://dpkg.sourcearchive.com/documentation/1.15.5.6ubuntu2/start-stop-daemon_8c-source.html&quot;&gt;http://dpkg.sourcearchive.com/documentation/1.15.5.6ubuntu2/start-stop-daemon_8c-source.html&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(Unfortunately&nbsp;no&nbsp;line&nbsp;numbers,&nbsp;but&nbsp;it&amp;#39;s&nbsp;the&nbsp;2nd&nbsp;to&nbsp;last&nbsp;if&nbsp;clause&nbsp;at&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;file)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree,&nbsp;it&nbsp;is&nbsp;ambiguous&nbsp;and&nbsp;limits&nbsp;should&nbsp;be&nbsp;set&nbsp;in&nbsp;one&nbsp;place&nbsp;for&nbsp;sanity&nbsp;and&nbsp;security.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;found&nbsp;there&amp;#39;s&nbsp;modified&nbsp;version&nbsp;by&nbsp;Scot&nbsp;Dial&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:scot@scottdial.com&quot;&gt;scot@scottdial.com&lt;/a&gt;&amp;gt;&nbsp;in&nbsp;Gentoo&nbsp;that&nbsp;supports&nbsp;PAM,&nbsp;but&nbsp;I&nbsp;suspect&nbsp;it&nbsp;would&nbsp;take&nbsp;far&nbsp;longer&nbsp;to&nbsp;get&nbsp;Debian&nbsp;to&nbsp;adopt&nbsp;the&nbsp;changes.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;John&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Apr&nbsp;18,&nbsp;2012&nbsp;at&nbsp;10:32&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;John,&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;18/04/12&nbsp;22:55,&nbsp;John&nbsp;Watson&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
With&nbsp;the&nbsp;transition&nbsp;to&nbsp;start-stop-daemon,&nbsp;RabbitMQ&nbsp;isn&amp;#39;t&nbsp;started&nbsp;with&lt;br&gt;<br>
pam&nbsp;integration.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Right.&nbsp;See&nbsp;&lt;a&nbsp;href=&quot;http://old.nabble.com/limits.conf-not-working...-td33702428.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://old.nabble.com/limits.&lt;u&gt;&lt;/u&gt;conf-not-working...-&lt;u&gt;&lt;/u&gt;td33702428.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Â Instead,&nbsp;the&nbsp;init&nbsp;script&nbsp;should&nbsp;source&nbsp;/etc/default/&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
rabbitmq-server&nbsp;so&nbsp;we&nbsp;can&nbsp;set&nbsp;ulimit&nbsp;there&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;really&nbsp;no&nbsp;way&nbsp;to&nbsp;let&nbsp;the&nbsp;limits.conf&nbsp;limits&nbsp;take&nbsp;effect?&nbsp;I&nbsp;cannot&nbsp;think&nbsp;of&nbsp;a&nbsp;reason&nbsp;why&nbsp;that&nbsp;ever&nbsp;would&nbsp;be&nbsp;the&nbsp;wrong&nbsp;thing&nbsp;to&nbsp;do.&nbsp;Having&nbsp;a&nbsp;way&nbsp;to&nbsp;override&nbsp;that&nbsp;limit&nbsp;is&nbsp;convenient,&nbsp;but&nbsp;the&nbsp;default&nbsp;surely&nbsp;should&nbsp;be&nbsp;the&nbsp;limit&nbsp;configured&nbsp;for&nbsp;the&nbsp;user.&nbsp;Seems&nbsp;to&nbsp;me&nbsp;that&nbsp;start-stop-daemon&nbsp;is&nbsp;introducing&nbsp;gratuitous&nbsp;complexity&nbsp;here.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
