<tt>
&lt;font&nbsp;face=&quot;arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;Hi&nbsp;Simon,&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;Yup,&nbsp;we&nbsp;are&nbsp;running&nbsp;TCP&nbsp;keepalives&nbsp;on&nbsp;the&nbsp;server...&nbsp;It's&nbsp;the&nbsp;Android&nbsp;side&nbsp;that&nbsp;we&nbsp;are&nbsp;questioning&nbsp;the&nbsp;proper&nbsp;way&nbsp;to&nbsp;implement..&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;We&nbsp;will&nbsp;just&nbsp;&amp;nbsp;implement&amp;nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#cc0000;&nbsp;font-size:&nbsp;12px;&quot;&gt;writeFrame(new&nbsp;Frame(AMQP.FRAME_HEARTBEAT,&nbsp;0));&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;when&nbsp;the&nbsp;service&nbsp;wakes&nbsp;up..&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;thanks&nbsp;very&nbsp;much,&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;Matthew&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;-----Original&nbsp;Message-----&lt;br&nbsp;/&gt;From:&nbsp;&quot;Simon&nbsp;MacMullen&quot;&nbsp;&amp;lt;simon@rabbitmq.com&amp;gt;&lt;br&nbsp;/&gt;Sent:&nbsp;Thursday,&nbsp;April&nbsp;19,&nbsp;2012&nbsp;8:12am&lt;br&nbsp;/&gt;To:&nbsp;m.luchak@smartasking.com&lt;br&nbsp;/&gt;Cc:&nbsp;rabbitmq-discuss@lists.rabbitmq.com&lt;br&nbsp;/&gt;Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ&nbsp;as&nbsp;Android&nbsp;Service&nbsp;-&nbsp;keep-alive/heartbeat&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/p&gt;<br>
&lt;div&nbsp;id=&quot;SafeStyles1334837801&quot;&gt;<br>
&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;On&nbsp;19/04/12&nbsp;12:49,&nbsp;m.luchak@smartasking.com&nbsp;wrote:&lt;br&nbsp;/&gt;&amp;gt;&nbsp;We&nbsp;are&nbsp;running&nbsp;RabbitMQ&nbsp;as&nbsp;a&nbsp;background&nbsp;service&nbsp;on&nbsp;Android&nbsp;to&lt;br&nbsp;/&gt;&amp;gt;&nbsp;prinicpally&nbsp;receive&nbsp;notifications.&nbsp;Is&nbsp;there&nbsp;something&nbsp;similar&nbsp;to&lt;br&nbsp;/&gt;&amp;gt;&nbsp;keep-alive&nbsp;that&nbsp;we&nbsp;can&nbsp;implement&nbsp;to&nbsp;verify&nbsp;if&nbsp;the&nbsp;consumer&nbsp;is&nbsp;still&lt;br&nbsp;/&gt;&amp;gt;&nbsp;connected&nbsp;and&nbsp;reset&nbsp;the&nbsp;connection&nbsp;timeout&nbsp;on&nbsp;the&nbsp;server?&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;It&nbsp;seems&nbsp;that&nbsp;the&nbsp;default&nbsp;method&nbsp;to&nbsp;do&nbsp;this&nbsp;is&nbsp;with&nbsp;heartbeat&nbsp;but&nbsp;the&lt;br&nbsp;/&gt;&amp;gt;&nbsp;timer&nbsp;attribute&nbsp;of&nbsp;heartbeat&nbsp;doesn't&nbsp;work&nbsp;in&nbsp;the&nbsp;Android&nbsp;service&lt;br&nbsp;/&gt;&amp;gt;&nbsp;scenario&nbsp;where&nbsp;the&nbsp;service&nbsp;is&nbsp;&quot;woken&nbsp;up&quot;&nbsp;every&nbsp;X&nbsp;minutes&nbsp;to&nbsp;test&nbsp;the&lt;br&nbsp;/&gt;&amp;gt;&nbsp;connection.&nbsp;Using&nbsp;heartbeat&nbsp;we&nbsp;would&nbsp;need&nbsp;to&nbsp;leave&nbsp;Android&nbsp;running&lt;br&nbsp;/&gt;&amp;gt;&nbsp;constantly&nbsp;and&nbsp;this&nbsp;defeats&nbsp;the&nbsp;purpose...&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;&nbsp;Soo..&nbsp;Is&nbsp;there&nbsp;&quot;The&nbsp;Right&nbsp;Way&quot;&nbsp;to&nbsp;ping&nbsp;the&nbsp;server&nbsp;when&nbsp;a&nbsp;background&lt;br&nbsp;/&gt;&amp;gt;&nbsp;service&nbsp;is&nbsp;woken&nbsp;up&nbsp;or&nbsp;do&nbsp;we&nbsp;need&nbsp;to&nbsp;roll&nbsp;our&nbsp;own?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;It's&nbsp;possible&nbsp;that&nbsp;enabling&nbsp;TCP&nbsp;keepalives&nbsp;will&nbsp;help:&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-January/017138.html&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;But&nbsp;you&nbsp;may&nbsp;need&nbsp;them&nbsp;on&nbsp;the&nbsp;client&nbsp;too,&nbsp;which&nbsp;may&nbsp;in&nbsp;turn&nbsp;require&nbsp;&lt;br&nbsp;/&gt;waking&nbsp;the&nbsp;client&nbsp;up;&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;how&nbsp;that&nbsp;works&nbsp;on&nbsp;Android.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Cheers,&nbsp;Simon&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;--&nbsp;&lt;br&nbsp;/&gt;Simon&nbsp;MacMullen&lt;br&nbsp;/&gt;RabbitMQ,&nbsp;VMware&lt;/p&gt;<br>
&lt;/div&gt;&lt;/font&gt;
</tt>
