<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello&nbsp;All,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;below&nbsp;script&nbsp;wont&nbsp;create&nbsp;a&nbsp;connection&nbsp;for&nbsp;me&nbsp;and&nbsp;I'm&nbsp;a&nbsp;little&nbsp;unsure&nbsp;how&nbsp;to&nbsp;determine&nbsp;what&nbsp;might&nbsp;be&nbsp;causing&nbsp;the&nbsp;issue.&nbsp;Im&nbsp;connecting&nbsp;to&nbsp;a&nbsp;server&nbsp;which&nbsp;im&nbsp;told&nbsp;defo&nbsp;works.&nbsp;As&nbsp;a&nbsp;test&nbsp;I&nbsp;changed&nbsp;the&nbsp;connection&nbsp;host&nbsp;to&nbsp;local/guest/guest&nbsp;and&nbsp;it&nbsp;work&nbsp;fine.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;ideas&nbsp;would&nbsp;be&nbsp;much&nbsp;appriciated&nbsp;as&nbsp;im&nbsp;totally&nbsp;out&nbsp;of&nbsp;ideas.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;?php&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;require_once&nbsp;__DIR__&nbsp;.&nbsp;'/vendor/autoload.php';&lt;/div&gt;&lt;div&gt;use&nbsp;PhpAmqpLib\Connection\AMQPConnection;&lt;/div&gt;&lt;div&gt;use&nbsp;PhpAmqpLib\Message\AMQPMessage;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;$connection&nbsp;=&nbsp;new&nbsp;AMQPConnection('subdomain.somedomain.com',&nbsp;'',&nbsp;'',&nbsp;'');&lt;/div&gt;&lt;div&gt;$channel&nbsp;=&nbsp;$connection-&gt;channel();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;$channel-&gt;exchange_declare('gbs_prod_x2',&nbsp;'direct',&nbsp;false,&nbsp;false,&nbsp;false);&lt;/div&gt;&lt;div&gt;$channel-&gt;queue_declare(&quot;&quot;,&nbsp;false,&nbsp;true,&nbsp;true,&nbsp;false);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;if(!empty($argv[1]))&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;$data&nbsp;=&nbsp;implode('&nbsp;',&nbsp;array_slice($argv,&nbsp;2));&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;else&nbsp;if(isset($_REQUEST['data']))&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;$data&nbsp;=&nbsp;urldecode($_REQUEST['data']);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;else&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;$data&nbsp;=&nbsp;&quot;Hello&nbsp;from&nbsp;Aaron&nbsp;in&nbsp;London&quot;;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;//SET&nbsp;THE&nbsp;SEVERITY&lt;/div&gt;&lt;div&gt;if(empty($severity))&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;if(isset($_REQUEST['severity']))&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;$severity&nbsp;=&nbsp;$_REQUEST['severity'];&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&nbsp;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;else&nbsp;if(!empty($argv[1]))&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;$severity&nbsp;=&nbsp;$argv[1];&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;else&nbsp;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;{&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;$severity&nbsp;=&nbsp;&quot;info&quot;;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;}&lt;/div&gt;&lt;div&gt;}&nbsp;&lt;/div&gt;&lt;div&gt;echo&nbsp;$severity;&lt;/div&gt;&lt;div&gt;$msg&nbsp;=&nbsp;new&nbsp;AMQPMessage($data);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;$channel-&gt;basic_publish($msg,&nbsp;'direct_logs',&nbsp;$severity);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;echo&nbsp;&quot;&nbsp;[x]&nbsp;Sent&nbsp;&quot;,$severity,':',$data,&quot;&nbsp;\n&quot;;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;$channel-&gt;close();&lt;/div&gt;&lt;div&gt;$connection-&gt;close();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;?&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
