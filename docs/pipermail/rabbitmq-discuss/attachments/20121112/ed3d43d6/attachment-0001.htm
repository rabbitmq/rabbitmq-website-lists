<tt>
For&nbsp;what&nbsp;it&amp;#39;s&nbsp;worth,&nbsp;we&nbsp;have&nbsp;a&nbsp;system&nbsp;here&nbsp;that&nbsp;allows&nbsp;us&nbsp;to&nbsp;upgrade&nbsp;clusters&nbsp;without&nbsp;downtime.&nbsp;It&nbsp;works&nbsp;for&nbsp;us,&nbsp;but&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;workable&nbsp;for&nbsp;other&nbsp;teams.&lt;br&gt;&lt;br&gt;Short&nbsp;synopsis&nbsp;is&nbsp;that&nbsp;our&nbsp;cluster&nbsp;is&nbsp;behind&nbsp;a&nbsp;VIP.&nbsp;When&nbsp;we&nbsp;want&nbsp;to&nbsp;upgrade&nbsp;a&nbsp;cluster,&nbsp;we&nbsp;spin&nbsp;up&nbsp;an&nbsp;alternate&nbsp;cluster&nbsp;and&nbsp;switch&nbsp;the&nbsp;VIP&nbsp;over&nbsp;to&nbsp;the&nbsp;alternate&nbsp;cluster.&nbsp;Meanwhile,&nbsp;we&nbsp;have&nbsp;tooling&nbsp;that&nbsp;moves&nbsp;messages&nbsp;between&nbsp;clusters.&nbsp;When&nbsp;the&nbsp;&amp;#39;master&amp;#39;&nbsp;cluster&amp;#39;s&nbsp;update&nbsp;is&nbsp;done,&nbsp;we&nbsp;reverse&nbsp;the&nbsp;process.&lt;br&gt;<br>
&lt;br&gt;This&nbsp;does&nbsp;require&nbsp;that&nbsp;your&nbsp;clients&nbsp;be&nbsp;tolerant&nbsp;to&nbsp;dropped&nbsp;connections.&nbsp;There&amp;#39;s&nbsp;a&nbsp;lot&nbsp;of&nbsp;details&nbsp;not&nbsp;covered&nbsp;in&nbsp;the&nbsp;above&nbsp;description&nbsp;but&nbsp;it&nbsp;gives&nbsp;the&nbsp;basic&nbsp;gist&nbsp;of&nbsp;it.&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;Mon,&nbsp;Nov&nbsp;12,&nbsp;2012&nbsp;at&nbsp;5:46&nbsp;AM,&nbsp;Jean&nbsp;Paul&nbsp;Galea&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ninuhadida@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ninuhadida@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;11/12/2012&nbsp;01:38&nbsp;PM,&nbsp;Emile&nbsp;Joubert&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;12/11/12&nbsp;11:32,&nbsp;Jean&nbsp;Paul&nbsp;Galea&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
The&nbsp;question&nbsp;is,&nbsp;how&nbsp;do&nbsp;we&nbsp;keep&nbsp;these&nbsp;two&nbsp;nodes&nbsp;up&nbsp;to&nbsp;date&nbsp;with&nbsp;the&lt;br&gt;<br>
latest&nbsp;versions,&nbsp;without&nbsp;suffering&nbsp;downtime?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Details&nbsp;on&nbsp;how&nbsp;to&nbsp;upgrade&nbsp;a&nbsp;cluster&nbsp;are&nbsp;relevant&nbsp;in&nbsp;your&nbsp;case:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html#upgrading&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/&lt;u&gt;&lt;/u&gt;clustering.html#upgrading&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;upgrade&nbsp;a&nbsp;cluster&nbsp;without&nbsp;downtime,&nbsp;since&nbsp;all&lt;br&gt;<br>
nodes&nbsp;need&nbsp;to&nbsp;run&nbsp;the&nbsp;same&nbsp;version&nbsp;of&nbsp;RabbitMQ.&nbsp;All&nbsp;the&nbsp;nodes&nbsp;in&nbsp;the&lt;br&gt;<br>
cluster&nbsp;have&nbsp;to&nbsp;be&nbsp;shut&nbsp;down&nbsp;during&nbsp;upgrade,&nbsp;implying&nbsp;downtime.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;interruptions&nbsp;can&nbsp;be&nbsp;as&nbsp;short&nbsp;as&nbsp;a&nbsp;server&nbsp;reboot.&nbsp;The&nbsp;impact&nbsp;of&nbsp;the&lt;br&gt;<br>
broker&nbsp;downtime&nbsp;can&nbsp;also&nbsp;be&nbsp;minimised&nbsp;by&nbsp;having&nbsp;publishers&nbsp;and&nbsp;consumers&lt;br&gt;<br>
automatically&nbsp;retry&nbsp;failed&nbsp;connections&nbsp;to&nbsp;the&nbsp;broker.&nbsp;Persistent&lt;br&gt;<br>
messages&nbsp;that&nbsp;exist&nbsp;in&nbsp;queues&nbsp;are&nbsp;preserved&nbsp;when&nbsp;the&nbsp;broker&nbsp;is&nbsp;upgraded,&lt;br&gt;<br>
so&nbsp;messages&nbsp;won&amp;#39;t&nbsp;be&nbsp;lost&nbsp;due&nbsp;to&nbsp;upgrades.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
OK,&nbsp;thanks&nbsp;for&nbsp;clarifying!&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;u&gt;&lt;/u&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;u&gt;&lt;/u&gt;cgi-bin/mailman/listinfo/&lt;u&gt;&lt;/u&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
