<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;Hi&lt;/font&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;i&gt;could&nbsp;I&nbsp;use&nbsp;a&nbsp;channel&nbsp;for&nbsp;many&nbsp;(about&nbsp;20)&nbsp;producers?&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;i&gt;could&nbsp;I&nbsp;use&nbsp;a&nbsp;channel&nbsp;for&nbsp;many&nbsp;(about&nbsp;20)&nbsp;consumers?&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;<br>
<br>
&lt;li&gt;&lt;span&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;i&gt;&lt;i&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;span&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;How&nbsp;cloud&nbsp;I&nbsp;increase&nbsp;the &lt;/span&gt;socket&nbsp;descriptors&nbsp;from&nbsp;829&nbsp;to&nbsp;2000?&nbsp;(in&nbsp;RHEL&nbsp;5)&lt;/i&gt;<br>
&lt;/i&gt;&lt;/span&gt;&lt;/li&gt;<br>
&lt;/ol&gt;&lt;div&gt;the&nbsp;problem&nbsp;raise&nbsp;from&nbsp;limitations&nbsp;of&nbsp;socket&nbsp;descriptors.&nbsp;I&nbsp;have&nbsp;about&nbsp;50&nbsp;weather&nbsp;evaluation&nbsp;station&nbsp;(there&nbsp;are actually a&nbsp;PC&nbsp;with&nbsp;some&nbsp;stuff)&nbsp;and&nbsp;each&nbsp;station&nbsp;connects&nbsp;to&nbsp;20&nbsp;queue.&nbsp;and&nbsp;a&nbsp;server&nbsp;(a &lt;span&gt;&lt;em&gt;HP&lt;/em&gt;&nbsp;ProLiant&nbsp;&lt;em&gt;DL380&lt;/em&gt;&lt;/span&gt;)&nbsp;that&nbsp;runs&nbsp;the&nbsp;rabbitMQ&nbsp;server.&nbsp;there&nbsp;is&nbsp;also&nbsp;about&nbsp;40&nbsp;consumer&nbsp;(for&nbsp;each&nbsp;queue&nbsp;there&nbsp;is&nbsp;2&nbsp;consumer).&nbsp;at&nbsp;start&nbsp;I&nbsp;create&nbsp;one&nbsp;channel&nbsp;for&nbsp;every&nbsp;connection&nbsp;to&nbsp;every&nbsp;queue.&nbsp;soon&nbsp;I&nbsp;face&nbsp;socket&nbsp;descriptors limitations&nbsp;(it&amp;#39;s&nbsp;actually&nbsp;829).&nbsp;So&nbsp;I&nbsp;share&nbsp;the&nbsp;channel&nbsp;among&nbsp;producers:&lt;/div&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;//in&nbsp;each weather&nbsp;evaluation&nbsp;station&nbsp;this&nbsp;code&nbsp;is&nbsp;running&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;factory.setUri(toURI);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;connection&nbsp;=&nbsp;factory.newConnection();&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;channel&nbsp;=&nbsp;connection.createChannel();&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;for(int&nbsp;i&nbsp;=0;&nbsp;i&amp;lt;&nbsp;20;&nbsp;i++) &lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;<br>
WeatherProducer&nbsp;basicProducer&nbsp;=&nbsp;new <br>
WeatherProducer(i&nbsp;,&nbsp;channel);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;in&nbsp;consumers&nbsp;I&nbsp;do&nbsp;the&nbsp;same.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;//in&nbsp;each weather&nbsp;evaluation&nbsp;station&nbsp;this&nbsp;code&nbsp;is&nbsp;running&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;factory.setUri(toURI);&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;connection&nbsp;=&nbsp;factory.newConnection();&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;channel&nbsp;=&nbsp;connection.createChannel();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;for(int&nbsp;i&nbsp;=0;&nbsp;i&amp;lt;&nbsp;20;&nbsp;i++) <br>
&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;for(int&nbsp;j&nbsp;=0;&nbsp;j&amp;lt;&nbsp;20;&nbsp;i++) &lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000066&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;WeatherConsumer&nbsp;basicConsumer&nbsp;=&nbsp;new  <br>
WeatherConsumer (j&nbsp;,&nbsp;channel);&lt;/font&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;the&nbsp;problem&nbsp;is&nbsp;that&nbsp;in&nbsp;my WeatherConsumer when&nbsp;I&nbsp;try&nbsp;to&nbsp;read&nbsp;a&nbsp;message&nbsp;(with&nbsp;nextDelivery()&nbsp;)&nbsp;the&nbsp;thread&nbsp;go&nbsp;to&nbsp;wait!&nbsp;So&nbsp;I&nbsp;guess&nbsp;the&nbsp;problems&nbsp;raise&nbsp;from&nbsp;using&nbsp;a&nbsp;channel&nbsp;for&nbsp;many&nbsp;consumers.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;thanks&nbsp;for&nbsp;your&nbsp;attention.&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;style=&quot;color:rgb(51,0,153);font-family:tahoma,sans-serif&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;Sincerely&nbsp;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;<br>
<br>
<br>
&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;ML&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
