<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;p&gt;Hi&nbsp;Matthias,&lt;/p&gt;&lt;p&gt;Thanks&nbsp;for&nbsp;responding.&lt;br&gt;&lt;/p&gt;&lt;p&gt;There&nbsp;is&nbsp;a&nbsp;couple&nbsp;of&nbsp;projects&nbsp;at&nbsp;work&nbsp;that&nbsp;will&nbsp;require&nbsp;an&nbsp;async&nbsp;system&nbsp;based&nbsp;on&nbsp;message&nbsp;queues.&nbsp;I&nbsp;don&amp;#39;t&nbsp;want&nbsp;to&nbsp;lose&nbsp;anything&nbsp;and&nbsp;I&nbsp;do&nbsp;want&nbsp;to&nbsp;handle&nbsp;cases&nbsp;in&nbsp;which&nbsp;the&nbsp;message&nbsp;was&nbsp;consumed&nbsp;(and&nbsp;not&nbsp;acked&nbsp;yet)&nbsp;and&nbsp;something&nbsp;bad&nbsp;happend.&nbsp;In&nbsp;which&nbsp;case,&nbsp;I&nbsp;want&nbsp;to&nbsp;ack&nbsp;a&nbsp;message&nbsp;only&nbsp;when&nbsp;I&nbsp;know&nbsp;for&nbsp;sure&nbsp;that&nbsp;the&nbsp;actions&nbsp;that&nbsp;this&nbsp;message&nbsp;triggered&nbsp;finished&nbsp;correctly.&lt;/p&gt;<br>
&lt;p&gt;So,&nbsp;the&nbsp;current&nbsp;behavior&nbsp;is&nbsp;well&nbsp;suite&nbsp;for&nbsp;me.&lt;/p&gt;&lt;p&gt;Regarding&nbsp;the&nbsp;blocking&nbsp;&amp;quot;GET&amp;quot;&nbsp;commands,&nbsp;I&nbsp;read&nbsp;about&nbsp;Kesterl&nbsp;(in&nbsp;the&nbsp;link&nbsp;I&nbsp;gave&nbsp;below)&nbsp;and&nbsp;thought&nbsp;its&nbsp;an&nbsp;interesting&nbsp;approach&nbsp;to&nbsp;make&nbsp;pulling&nbsp;a&nbsp;bit&nbsp;more&nbsp;efficient&nbsp;instead&nbsp;of&nbsp;sending&nbsp;the&nbsp;&amp;quot;puller&amp;quot;&nbsp;back&nbsp;to&nbsp;a&nbsp;short&nbsp;sleep.&lt;/p&gt;<br>
&lt;p&gt;That&amp;#39;s&nbsp;basically&nbsp;the&nbsp;only&nbsp;scenario.&nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;its&nbsp;too&nbsp;important.&nbsp;What&nbsp;was&nbsp;more&nbsp;important&nbsp;to&nbsp;me&nbsp;was&nbsp;understanding&nbsp;the&nbsp;exact&nbsp;Ack&nbsp;semantics&nbsp;(which&nbsp;is&nbsp;implemented&nbsp;exactly&nbsp;as&nbsp;I&nbsp;want&nbsp;it&nbsp;to&nbsp;be&nbsp;:-)&nbsp;).&lt;/p&gt;&lt;p&gt;With&nbsp;the&nbsp;new&nbsp;command&nbsp;line&nbsp;tool&nbsp;that&nbsp;allows&nbsp;getting&nbsp;the&nbsp;queue&nbsp;length,&nbsp;I&nbsp;can&nbsp;easily&nbsp;write&nbsp;a&nbsp;script&nbsp;to&nbsp;let&nbsp;Nagios&nbsp;alert&nbsp;me&nbsp;if&nbsp;the&nbsp;rate&nbsp;of&nbsp;messages&nbsp;going&nbsp;in&nbsp;is&nbsp;higher&nbsp;than&nbsp;the&nbsp;rate&nbsp;of&nbsp;them&nbsp;coming&nbsp;out.&lt;/p&gt;<br>
&lt;p&gt;Eran&lt;/p&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;13,&nbsp;2009&nbsp;at&nbsp;2:24&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@lshift.net&quot;&gt;matthias@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Eran,&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Eran&nbsp;Sandler&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
In&nbsp;a&nbsp;consumer&nbsp;pull&nbsp;model,&nbsp;where&nbsp;consumers&nbsp;pull&nbsp;the&nbsp;queue&nbsp;once&nbsp;in&nbsp;a&nbsp;while&nbsp;(without&nbsp;subscription)&nbsp;and&nbsp;you&nbsp;have&nbsp;multiple&nbsp;consumer,&nbsp;if&nbsp;a&nbsp;consumer&nbsp;pulls&nbsp;a&nbsp;message&nbsp;(without&nbsp;auto&nbsp;ack)&nbsp;and&nbsp;doesn&amp;#39;t&nbsp;ack&nbsp;it&nbsp;can&nbsp;another&nbsp;consumer&nbsp;still&nbsp;get&nbsp;it&nbsp;or&nbsp;is&nbsp;it&nbsp;marked&nbsp;in&nbsp;a&nbsp;certain&nbsp;way&nbsp;until&nbsp;its&nbsp;acked&nbsp;and&nbsp;deleted?&nbsp;&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
The&nbsp;AMQP&nbsp;ack&nbsp;model&nbsp;for&nbsp;subscriptions&nbsp;and&nbsp;&amp;quot;pull&amp;quot;&nbsp;are&nbsp;identical.&nbsp;In&nbsp;both&nbsp;cases&nbsp;the&nbsp;message&nbsp;is&nbsp;kept&nbsp;on&nbsp;the&nbsp;server&nbsp;but&nbsp;is&nbsp;unavailable&nbsp;to&nbsp;other&nbsp;consumers&nbsp;until&nbsp;it&nbsp;either&nbsp;has&nbsp;been&nbsp;ack&amp;#39;ed&nbsp;(and&nbsp;gets&nbsp;removed),&nbsp;nack&amp;#39;ed&nbsp;(with&nbsp;basic.reject;&nbsp;though&nbsp;RabbitMQ&nbsp;does&nbsp;not&nbsp;implement&nbsp;that)&nbsp;or&nbsp;the&nbsp;channel/connection&nbsp;is&nbsp;closed&nbsp;(at&nbsp;which&nbsp;point&nbsp;the&nbsp;message&nbsp;becomes&nbsp;available&nbsp;to&nbsp;other&nbsp;consumers).&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Assuming&nbsp;when&nbsp;a&nbsp;message&nbsp;is&nbsp;pulled&nbsp;and&nbsp;not&nbsp;acked&nbsp;yet&nbsp;and&nbsp;no&nbsp;other&nbsp;consumer&nbsp;can&nbsp;pull&nbsp;it&nbsp;until&nbsp;its&nbsp;either&nbsp;acked&nbsp;or&nbsp;rejected&nbsp;back&nbsp;to&nbsp;the&nbsp;queue,&nbsp;will&nbsp;it&nbsp;have&nbsp;a&nbsp;certain&nbsp;timeout&nbsp;that&nbsp;it&nbsp;was&nbsp;pulled&nbsp;and&nbsp;wasn&amp;#39;t&nbsp;acked&nbsp;for&nbsp;X&nbsp;amount&nbsp;of&nbsp;time?&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
There&nbsp;is&nbsp;no&nbsp;timeout&nbsp;on&nbsp;waiting&nbsp;for&nbsp;acks.&nbsp;Usually&nbsp;that&nbsp;is&nbsp;not&nbsp;a&nbsp;problem&nbsp;since&nbsp;the&nbsp;common&nbsp;cases&nbsp;of&nbsp;a&nbsp;missing&nbsp;ack&nbsp;-&nbsp;network&nbsp;or&nbsp;client&nbsp;failure&nbsp;-&nbsp;will&nbsp;result&nbsp;in&nbsp;the&nbsp;connection&nbsp;getting&nbsp;dropped&nbsp;(and&nbsp;thus&nbsp;trigger&nbsp;the&nbsp;behaviour&nbsp;described&nbsp;above).&nbsp;Still,&nbsp;a&nbsp;timeout&nbsp;could&nbsp;be&nbsp;useful&nbsp;to,&nbsp;say,&nbsp;deal&nbsp;with&nbsp;alive&nbsp;but&nbsp;unresponsive&nbsp;consumers.&nbsp;That&nbsp;has&nbsp;come&nbsp;up&nbsp;in&nbsp;discussion&nbsp;before.&nbsp;Is&nbsp;there&nbsp;a&nbsp;specific&nbsp;use&nbsp;case&nbsp;you&nbsp;have&nbsp;in&nbsp;mind&nbsp;that&nbsp;requires&nbsp;such&nbsp;functionality?&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
