<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Which&nbsp;version&nbsp;of&nbsp;Erlang&nbsp;are&nbsp;you&nbsp;using?&nbsp;32&nbsp;bits&nbsp;or&nbsp;64&nbsp;bits?&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&amp;#39;s&nbsp;the&nbsp;OS?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;ve&nbsp;seen&nbsp;this&nbsp;error&nbsp;on&nbsp;32&nbsp;bits&nbsp;Erlang&nbsp;on&nbsp;Mac.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alvaro&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Oct&nbsp;29,&nbsp;2013&nbsp;at&nbsp;10:10&nbsp;PM,&nbsp;François&nbsp;Beausoleil&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:francois.beausoleil@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;francois.beausoleil@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;all!&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;bare&nbsp;metal&nbsp;server&nbsp;with&nbsp;32&nbsp;GiB&nbsp;of&nbsp;RAM.&nbsp;I&nbsp;installed&nbsp;RabbitMQ&nbsp;3.2.0,&nbsp;Erlang&nbsp;R16B02.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;load&nbsp;increases&nbsp;(publishing&nbsp;over&nbsp;4000&nbsp;msgs/s),&nbsp;RabbitMQ&nbsp;dies&nbsp;with&nbsp;&amp;quot;Could&nbsp;not&nbsp;allocate&nbsp;memory&amp;quot;&nbsp;errors:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Crash&nbsp;dump&nbsp;was&nbsp;written&nbsp;to:&nbsp;erl_crash.dump&lt;/div&gt;&lt;div&gt;eheap_alloc:&nbsp;Cannot&nbsp;allocate&nbsp;529782288&nbsp;bytes&nbsp;of&nbsp;memory&nbsp;(of&nbsp;type&nbsp;&amp;quot;heap&amp;quot;).&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;messages&nbsp;which&nbsp;are&nbsp;published&nbsp;are&nbsp;about&nbsp;4&nbsp;KiB&nbsp;of&nbsp;XML.&nbsp;The&nbsp;persistent&nbsp;option&nbsp;is&nbsp;set&nbsp;to&nbsp;true,&nbsp;to&nbsp;ensure&nbsp;persistence&nbsp;across&nbsp;reboots.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;host&nbsp;has&nbsp;configuration&nbsp;for&nbsp;overcommit:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;#&nbsp;cat&nbsp;/proc/sys/vm/overcommit_ratio&lt;/div&gt;&lt;div&gt;50&lt;/div&gt;&lt;div&gt;#&nbsp;cat&nbsp;/proc/sys/vm/overcommit_memory&lt;/div&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;start,&nbsp;RabbitMQ&nbsp;correctly&nbsp;identifies&nbsp;the&nbsp;total&nbsp;amount&nbsp;of&nbsp;memory:&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Oct-2013::20:58:03&nbsp;===&lt;/div&gt;&lt;div&gt;node&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;:&nbsp;rabbit@skyler&lt;/div&gt;&lt;div&gt;home&nbsp;dir&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp;/var/lib/rabbitmq&lt;/div&gt;&lt;div&gt;config&nbsp;file(s)&nbsp;:&nbsp;(none)&lt;/div&gt;&lt;div&gt;cookie&nbsp;hash&nbsp; &nbsp; :&nbsp;mV5+4OI0hTEXkDPMtOzVdQ==&lt;/div&gt;<br>
&lt;div&gt;log&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :&nbsp;/var/log/rabbitmq/rabbit@skyler.log&lt;/div&gt;&lt;div&gt;sasl&nbsp;log&nbsp; &nbsp; &nbsp; &nbsp;:&nbsp;/var/log/rabbitmq/rabbit@skyler-sasl.log&lt;/div&gt;&lt;div&gt;database&nbsp;dir&nbsp; &nbsp;:&nbsp;/var/lib/rabbitmq/mnesia/rabbit@skyler&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Oct-2013::20:58:04&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;Limiting&nbsp;to&nbsp;approx&nbsp;3996&nbsp;file&nbsp;handles&nbsp;(3594&nbsp;sockets)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Oct-2013::20:58:04&nbsp;===&lt;/div&gt;&lt;div&gt;Memory&nbsp;limit&nbsp;set&nbsp;to&nbsp;12826MB&nbsp;of&nbsp;32066MB&nbsp;total.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;29-Oct-2013::20:58:04&nbsp;===&lt;/div&gt;<br>
&lt;div&gt;Disk&nbsp;free&nbsp;limit&nbsp;set&nbsp;to&nbsp;50MB&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;the&nbsp;same&nbsp;host,&nbsp;I&amp;#39;m&nbsp;also&nbsp;running&nbsp;a&nbsp;Java&nbsp;application.&nbsp;The&nbsp;Java&nbsp;application&amp;#39;s&nbsp;max&nbsp;heap&nbsp;is&nbsp;set&nbsp;to&nbsp;6&nbsp;GiB,&nbsp;through&nbsp;-Xmx6g.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Google&nbsp;and&nbsp;StackOverflow&nbsp;aren&amp;#39;t&nbsp;very&nbsp;helpful:&nbsp;there&nbsp;are&nbsp;a&nbsp;few&nbsp;mentions,&nbsp;but&nbsp;not&nbsp;many&nbsp;apply&nbsp;to&nbsp;RabbitMQ,&nbsp;and&nbsp;the&nbsp;other&nbsp;ones&nbsp;don&amp;#39;t&nbsp;seem&nbsp;to&nbsp;apply&nbsp;or&nbsp;are&nbsp;very&nbsp;old.&lt;/div&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;What&nbsp;can&nbsp;I&nbsp;do&nbsp;to&nbsp;troubleshoot&nbsp;the&nbsp;problem?&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;François&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
