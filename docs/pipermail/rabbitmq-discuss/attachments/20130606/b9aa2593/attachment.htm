<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;Matthias,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;had&nbsp;a&nbsp;problem&nbsp;with&nbsp;the&nbsp;Pika&nbsp;connection&nbsp;negotiation&nbsp;behavior&nbsp;which<br>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;leading&nbsp;to&nbsp;a&nbsp;situation&nbsp;where&nbsp;the&nbsp;heartbeat&nbsp;interval&nbsp;has&nbsp;a&nbsp;maximum<br>
&nbsp;&nbsp;&nbsp;&nbsp;possible&nbsp;value&nbsp;of&nbsp;600s.&nbsp;The&nbsp;problem&nbsp;i&nbsp;had&nbsp;is&nbsp;the&nbsp;following,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;style=&quot;margin:&nbsp;15px&nbsp;0px;&nbsp;padding:&nbsp;0px;&nbsp;border:&nbsp;0px;&nbsp;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(51,&nbsp;51,&nbsp;51);&nbsp;font-family:&nbsp;Helvetica,&nbsp;arial,&nbsp;freesans,&nbsp;clean,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22px;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;start;&nbsp;text-indent:&nbsp;0px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;rgb(251,&nbsp;251,&nbsp;251);&quot;&gt;I&nbsp;am&nbsp;using&nbsp;pika&nbsp;0.9.9&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RabbitMQ&nbsp;3.0.3.&nbsp;Few&nbsp;of&nbsp;the&nbsp;consumers&nbsp;we&nbsp;have&nbsp;are&nbsp;long&nbsp;running,&nbsp;so<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;would&nbsp;want&nbsp;to&nbsp;have&nbsp;a&nbsp;long&nbsp;heartbeat_interval&nbsp;so&nbsp;that&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connections&nbsp;are&nbsp;not&nbsp;removed&nbsp;from&nbsp;either&nbsp;side.&nbsp;But&nbsp;the&nbsp;network<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;infrastructure&nbsp;will&nbsp;not&nbsp;allow&nbsp;long&nbsp;idle&nbsp;connections&nbsp;so&nbsp;I&nbsp;wanted&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set&nbsp;the&nbsp;heartbeat&nbsp;interval&nbsp;to&nbsp;3600s(assuming&nbsp;pika&nbsp;is&nbsp;single<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;threaded&nbsp;and&nbsp;can&nbsp;analyze&nbsp;the&nbsp;heartbeat&nbsp;events&nbsp;only&nbsp;between<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requests).&nbsp;But&nbsp;when&nbsp;I&nbsp;check&nbsp;the&nbsp;Timeout&nbsp;value&nbsp;in&nbsp;the&nbsp;RMQ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Management&nbsp;page,&nbsp;I&nbsp;see&nbsp;it&nbsp;set&nbsp;only&nbsp;to&nbsp;600.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;style=&quot;margin:&nbsp;15px&nbsp;0px;&nbsp;padding:&nbsp;0px;&nbsp;border:&nbsp;0px;&nbsp;color:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rgb(51,&nbsp;51,&nbsp;51);&nbsp;font-family:&nbsp;Helvetica,&nbsp;arial,&nbsp;freesans,&nbsp;clean,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22px;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;start;&nbsp;text-indent:&nbsp;0px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;rgb(251,&nbsp;251,&nbsp;251);&quot;&gt;Any&nbsp;number&nbsp;i&nbsp;try&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;range&nbsp;of&nbsp;(300-600)&nbsp;works&nbsp;but&nbsp;above&nbsp;600,&nbsp;it&nbsp;somehow&nbsp;defaults&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;600.&nbsp;I&nbsp;think&nbsp;I&nbsp;didnt&nbsp;have&nbsp;this&nbsp;problem&nbsp;with&nbsp;RMQ&nbsp;2.8.&nbsp;I&nbsp;am&nbsp;using<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;php-amqplib&nbsp;for&nbsp;other&nbsp;piece&nbsp;of&nbsp;code&nbsp;and&nbsp;it&nbsp;is&nbsp;able&nbsp;to&nbsp;set<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;heartbeat_interval&nbsp;to&nbsp;3600s&nbsp;with&nbsp;RabbitMQ&nbsp;3.0.3.&nbsp;My&nbsp;usage&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;creating&nbsp;a&nbsp;conncetion&nbsp;is&nbsp;as&nbsp;follows:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;my&nbsp;thoughts&nbsp;on&nbsp;why&nbsp;there&nbsp;shouldnt&nbsp;be&nbsp;a&nbsp;maximum&nbsp;value&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;heatbeat&nbsp;interval&nbsp;is&nbsp;the&nbsp;following,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&nbsp;font-family:&nbsp;Helvetica,&nbsp;arial,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freesans,&nbsp;clean,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&nbsp;font-style:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;22px;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;start;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;rgb(251,&nbsp;251,&nbsp;251);&nbsp;display:&nbsp;inline&nbsp;!important;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;none;&quot;&gt;I&nbsp;think&nbsp;the&nbsp;heartbeat&nbsp;interval&nbsp;should&nbsp;be&nbsp;flexible<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enough&nbsp;for&nbsp;different&nbsp;type&nbsp;of&nbsp;workers.&nbsp;For&nbsp;example,&nbsp;we&nbsp;have&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combination&nbsp;of&nbsp;long-running&nbsp;tasks&nbsp;and&nbsp;short-running&nbsp;tasks.&nbsp;The<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;running&nbsp;tasks&nbsp;range&nbsp;from&nbsp;1&nbsp;to&nbsp;10&nbsp;seconds.&nbsp;The&nbsp;long&nbsp;running<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tasks&nbsp;can&nbsp;take&nbsp;anytime&nbsp;depending&nbsp;on&nbsp;the&nbsp;input&nbsp;video&nbsp;size.&nbsp;So,&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;running&nbsp;tasks,&nbsp;if&nbsp;the&nbsp;heartbeat&nbsp;interval&nbsp;set&nbsp;is&nbsp;10&nbsp;minutes,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;client&nbsp;will&nbsp;not&nbsp;respond&nbsp;to&nbsp;the&nbsp;server's&nbsp;heartbeat&nbsp;for&nbsp;a&nbsp;long<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;which&nbsp;will&nbsp;result&nbsp;in&nbsp;the&nbsp;server&nbsp;disconnecting&nbsp;the&nbsp;client.&nbsp;Now<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;problem&nbsp;for&nbsp;disabling&nbsp;the&nbsp;heartbeat&nbsp;is&nbsp;the&nbsp;network<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;infrastructure&nbsp;(like&nbsp;EC2)&nbsp;will&nbsp;kill&nbsp;any&nbsp;connections&nbsp;which&nbsp;are&nbsp;idle<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;more&nbsp;than&nbsp;about&nbsp;a&nbsp;day(dont&nbsp;know&nbsp;the&nbsp;exact&nbsp;time).&nbsp;So&nbsp;if&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;heartbeat&nbsp;is&nbsp;disabled&nbsp;then&nbsp;the&nbsp;connections&nbsp;are&nbsp;gone&nbsp;for&nbsp;good.&nbsp;An<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;application&nbsp;can&nbsp;have&nbsp;a&nbsp;variety&nbsp;of&nbsp;load&nbsp;patterns,&nbsp;mine&nbsp;being&nbsp;short<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bursts&nbsp;with&nbsp;long&nbsp;idle&nbsp;time.&nbsp;So&nbsp;I&nbsp;think&nbsp;the&nbsp;heartbeat&nbsp;should&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flexible&nbsp;enough&nbsp;to&nbsp;support&nbsp;a&nbsp;variety&nbsp;of&nbsp;consumers&nbsp;and&nbsp;different<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;network&nbsp;infrastructures.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;big&gt;&lt;font&nbsp;face=&quot;sans-serif&quot;&gt;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;your&nbsp;thoughts&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;so&nbsp;that&nbsp;there&nbsp;could&nbsp;be&nbsp;a&nbsp;possible&nbsp;change&nbsp;in&nbsp;the&nbsp;client's<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection&nbsp;behavior&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;big&gt;&lt;small&gt;regards,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maitreya&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/small&gt;&lt;/big&gt;&lt;/font&gt;&lt;/big&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
