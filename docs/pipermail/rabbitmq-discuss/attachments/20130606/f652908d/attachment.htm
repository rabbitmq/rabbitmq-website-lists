<tt>
&lt;div&gt;I&nbsp;hit&nbsp;on&nbsp;a&nbsp;scenario&nbsp;where&nbsp;connection.createChannel()&nbsp;may&nbsp;hang&nbsp;forever.&nbsp;The&nbsp;scenario:&nbsp;obtain&nbsp;a&nbsp;channel&nbsp;and&nbsp;attempt&nbsp;to&nbsp;publish&nbsp;to&nbsp;a&nbsp;non-existent&nbsp;exchange.&nbsp;The&nbsp;channel&nbsp;will&nbsp;be&nbsp;shutdown.&nbsp;Attempt&nbsp;to&nbsp;establish&nbsp;a&nbsp;new&nbsp;(replacement)&nbsp;channel&nbsp;via&nbsp;Connection.createChannel(),&nbsp;which&nbsp;hangs&nbsp;forever.&nbsp;A&nbsp;simple&nbsp;version&nbsp;of&nbsp;this&nbsp;scenario:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;public&nbsp;Channel&nbsp;channelFor(final&nbsp;String&nbsp;tenantId)&nbsp;throws&nbsp;Exception&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp;Channel&nbsp;channel&nbsp;=&nbsp;connection.createChannel();&lt;/div&gt;&lt;div&gt; &nbsp;channel.addShutdownListener(new&nbsp;ShutdownListener()&nbsp;{&lt;/div&gt;&lt;div&gt;<br>
 &nbsp; &nbsp;public&nbsp;void&nbsp;shutdownCompleted(ShutdownSignalException&nbsp;e)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;if&nbsp;(!e.isInitiatedByApplication()) &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;channelFor(tenantId);&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt; &nbsp;});&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;return&nbsp;channel;&lt;/div&gt;<br>
&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Channel&nbsp;channel&nbsp;=&nbsp;channelFor(&amp;quot;foo&amp;quot;);&lt;/div&gt;&lt;div&gt;channel.basicPublish(someNonExistentExchange,&nbsp;…&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;From&nbsp;Tracer:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1370554962786:&nbsp;&amp;lt;Tracer-0&amp;gt;&nbsp;ch#1&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;channel.close&amp;gt;(reply-code=404,&nbsp;reply-text=NOT_FOUND&nbsp;-&nbsp;no&nbsp;exchange&nbsp;&amp;#39;foo&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;,&nbsp;class-id=60,&nbsp;method-id=40),&nbsp;null,&nbsp;&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1370554962788:&nbsp;&amp;lt;Tracer-0&amp;gt;&nbsp;ch#1&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;channel.close-ok&amp;gt;(),&nbsp;null,&nbsp;&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;1370554974891:&nbsp;&amp;lt;Tracer-0&amp;gt;&nbsp;ch#1&nbsp;-&amp;gt;&nbsp;{#method&amp;lt;channel.open&amp;gt;(out-of-band=),&nbsp;null,&nbsp;&amp;quot;&amp;quot;}&lt;/div&gt;<br>
&lt;div&gt;1370554974970:&nbsp;&amp;lt;Tracer-0&amp;gt;&nbsp;ch#1&nbsp;&amp;lt;-&nbsp;{#method&amp;lt;channel.open-ok&amp;gt;(channel-id=),&nbsp;null,&nbsp;&amp;quot;&amp;quot;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;ideas&nbsp;why&nbsp;things&nbsp;are&nbsp;hanging?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks &lt;/div&gt;&lt;div&gt;-&nbsp;jonathan&lt;/div&gt;<br>

</tt>
