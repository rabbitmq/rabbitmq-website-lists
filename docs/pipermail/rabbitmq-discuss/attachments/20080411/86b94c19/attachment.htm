<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;html&gt;On&nbsp;11&nbsp;Apr&nbsp;2008,&nbsp;at&nbsp;05:24,&nbsp;Joe&nbsp;Lee&nbsp;wrote:&lt;/html&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hello&nbsp;all,&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Apr&nbsp;10,&nbsp;2008&nbsp;at&nbsp;6:55&nbsp;AM,&nbsp;Ben&nbsp;Hood&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:0x6e6562@gmail.com&quot;&gt;0x6e6562@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&nbsp;You&nbsp;are&nbsp;trying&nbsp;to&nbsp;match&nbsp;this&nbsp;tuple&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;#'queue.declare_ok'{queue&nbsp;=&nbsp;Q,&lt;br&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;message_count&nbsp;=&nbsp;MessageCount,&lt;br&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;consumer_count&nbsp;=&nbsp;ConsumerCount}&lt;br&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;=&nbsp;amqp_channel:call(Channel,QueueDeclare)&lt;br&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&nbsp;with&nbsp;this&nbsp;tuple:&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&nbsp;{'queue.declare_ok',&lt;br&gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;&amp;lt;&quot;amq.q.gen1_rabbit@home_20080409224223_&quot;&gt;&gt;,0,0}&lt;br&gt;&nbsp;&lt;/blockquote&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&nbsp;so&nbsp;that&nbsp;fact&nbsp;that&nbsp;Q,&nbsp;which&nbsp;was&nbsp;previously&nbsp;bound&nbsp;to&nbsp;&amp;lt;&amp;lt;&quot;&quot;&gt;&gt;&nbsp;is&nbsp;being&nbsp;compared&nbsp;to&nbsp;&amp;lt;&quot;amq.q.gen1_rabbit@home_20080409224223_&quot;&gt;&gt;&nbsp;which&nbsp;violates&nbsp;the&nbsp;match&nbsp;condition.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;To&nbsp;fix&nbsp;this,&nbsp;don't&nbsp;re-use&nbsp;the&nbsp;*variable*&nbsp;Q,&nbsp;because&nbsp;in&nbsp;Erlang,&nbsp;it's&nbsp;not&nbsp;really&nbsp;a&nbsp;variable&nbsp;(non-destructive&nbsp;assignment).&lt;br&gt;&nbsp;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;I&nbsp;have&nbsp;tried&nbsp;what&nbsp;Ben&nbsp;suggested&nbsp;and&nbsp;used&nbsp;a&nbsp;new&nbsp;variable&nbsp;called&nbsp;Q1.&amp;nbsp;&nbsp;It&nbsp;helped&nbsp;me&nbsp;get&nbsp;over&nbsp;that&nbsp;problem.&amp;nbsp;&nbsp;Now&nbsp;I&nbsp;have&nbsp;another&nbsp;issue&nbsp;with&nbsp;the&nbsp;consume&nbsp;code.&lt;br&gt;&lt;br&gt;I&nbsp;tried&nbsp;looking&nbsp;into&nbsp;mnesia&nbsp;tables&nbsp;and&nbsp;ets&nbsp;tables,&nbsp;but&nbsp;not&nbsp;much&nbsp;help.&amp;nbsp;&nbsp;Receive&nbsp;is&nbsp;timing&nbsp;out&nbsp;at&nbsp;after&nbsp;2000&nbsp;-&gt;&amp;nbsp;&nbsp;exit(did_not_receive_message)&nbsp;end.&amp;nbsp;&nbsp;Only&nbsp;reason&nbsp;for&nbsp;to&nbsp;get&nbsp;timeout&nbsp;is&nbsp;when&nbsp;there&nbsp;isn't&nbsp;a&nbsp;message&nbsp;in&nbsp;the&nbsp;exchange.&amp;nbsp;&nbsp;This&nbsp;shouldn't&nbsp;be&nbsp;the&nbsp;case&nbsp;because&nbsp;I&nbsp;just&nbsp;published&nbsp;the&nbsp;message.&lt;br&gt;&nbsp;&lt;br&gt;&amp;nbsp;receive&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{#'basic.deliver'{delivery_tag&nbsp;=&nbsp;DeliveryTag},&nbsp;Content}&nbsp;-&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#content{payload_fragments_rev&nbsp;=&nbsp;[Payload]}&nbsp;=&nbsp;Content,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;io:format(&quot;Message&nbsp;received:&nbsp;~p~n&quot;,&nbsp;[Payload])&lt;br&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;after&nbsp;2000&nbsp;-&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;exit(did_not_receive_message)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;end&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;f&nbsp;you&nbsp;are&nbsp;using&nbsp;the&nbsp;same&nbsp;code&nbsp;that&nbsp;you&nbsp;posted&nbsp;yesterday,&nbsp;this&nbsp;won't&nbsp;work&nbsp;because&nbsp;you&nbsp;are&nbsp;consuming&nbsp;from&nbsp;the&nbsp;wrong&nbsp;queue:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;BasicConsume&nbsp;=&nbsp;#'basic.consume'{ticket&nbsp;=&nbsp;Ticket,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;queue&nbsp;=&nbsp;Q,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;consumer_tag&nbsp;=&nbsp;&amp;lt;&amp;lt;&quot;&quot;&gt;&gt;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;no_local&nbsp;=&nbsp;false,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;no_ack&nbsp;=&nbsp;true,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;exclusive&nbsp;=&nbsp;false,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;nowait&nbsp;=&nbsp;false},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#'basic.consume_ok'{consumer_tag&nbsp;=&nbsp;ConsumerTag}&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&nbsp;amqp_channel:call(Channel,&nbsp;BasicConsume,&nbsp;self()),&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;need&nbsp;to&nbsp;consume&nbsp;from&nbsp;the&nbsp;queue&nbsp;whose&nbsp;name&nbsp;you&nbsp;stored&nbsp;in&nbsp;Q1.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTH,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ben&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
