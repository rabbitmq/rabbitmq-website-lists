<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello&nbsp;again,&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; I&nbsp;built&nbsp;a&nbsp;new&nbsp;recommended&nbsp;rabbit&nbsp;mq&nbsp;cluster&nbsp;with&nbsp;version&nbsp;3.2.1&nbsp;(Erlang&nbsp;R16B)&nbsp;to&nbsp;avoid&nbsp;the&nbsp;the&nbsp;memory&nbsp;leak&nbsp;issue&nbsp;that&nbsp;I&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;mail&nbsp;below.&nbsp;After&nbsp;building&nbsp;this&nbsp;cluster,&nbsp;I&nbsp;migrated&nbsp;50%&nbsp;traffic&nbsp;on&nbsp;highest&nbsp;volume&nbsp;queue&nbsp;(this&nbsp;queue&nbsp;constitutes&nbsp;to&nbsp;70%&nbsp;of&nbsp;the&nbsp;total&nbsp;our&nbsp;traffic).&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cluster&nbsp;Version&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;v3.0.2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v3.2.1&lt;/div&gt;&lt;div&gt;Erlang&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;R13B&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;R16B&lt;/div&gt;&lt;div&gt;#&nbsp;nodes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 &lt;/div&gt;<br>
<br>
&lt;div&gt;#&nbsp;Connections&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;850&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 250&lt;/div&gt;<br>
&lt;div&gt;Erlang&nbsp;process&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2900&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1500&lt;/div&gt;&lt;div&gt;Publish/Delivery&nbsp;rate&nbsp; 230&nbsp;/&nbsp;sec&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 160&nbsp;/&nbsp;sec&lt;/div&gt;&lt;div&gt;&lt;b&gt;Cpu&nbsp;Usage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;15%&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 25%&lt;/b&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;b&gt;#&nbsp;Running&nbsp;process&nbsp; &nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3-4&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;the&nbsp;migration,&nbsp;I&nbsp;am&nbsp;noticing&nbsp;higher&nbsp;cpu&nbsp;usage&nbsp;and&nbsp;total&nbsp;number&nbsp;of&nbsp;running&nbsp;processes&nbsp;on&nbsp;new&nbsp;cluster&nbsp;for&nbsp;less&nbsp;traffic&nbsp;than&nbsp;the&nbsp;original&nbsp;cluster.&nbsp; Also,&nbsp;when&nbsp;is&nbsp;there&nbsp;is&nbsp;an&nbsp;increase&nbsp;in&nbsp;traffic&nbsp;on&nbsp;both&nbsp;clusters,&nbsp;cpu&nbsp;on&nbsp;new&nbsp;cluster&nbsp;increases&nbsp;significantly&nbsp;than&nbsp;increase&nbsp;in&nbsp;old&nbsp;cluster.&nbsp;For&nbsp;instance,&nbsp;an&nbsp;increase&nbsp;in&nbsp;0.4&nbsp;MB&nbsp;network&nbsp;traffic&nbsp;over&nbsp;2&nbsp;mins&nbsp;caused&nbsp;an&nbsp;increase&nbsp;in&nbsp;cpu&nbsp;of&nbsp;2%&nbsp;in&nbsp;old&nbsp;cluster&nbsp;vs&nbsp;6%&nbsp;increase&nbsp;in&nbsp;new&nbsp;cluster. &lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;understand&nbsp;why&nbsp;I&nbsp;am&nbsp;noticing&nbsp;increase&nbsp;in&nbsp;cpu&nbsp;and&nbsp;total&nbsp;number&nbsp;of&nbsp;running&nbsp;processes&nbsp;before&nbsp;migration&nbsp;the&nbsp;whole&nbsp;traffic&nbsp;to&nbsp;new&nbsp;cluster.&nbsp;Is&nbsp;this&nbsp;expected&nbsp;with&nbsp;new&nbsp;cluster?&nbsp; I&nbsp;tried&nbsp;searching&nbsp;but&nbsp;couldn&#39;t&nbsp;find&nbsp;any&nbsp;posts/blogs&nbsp;explaining&nbsp;this&nbsp;scenario. &lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Pls&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;you&nbsp;need&nbsp;more&nbsp;info&nbsp;on&nbsp;cluster&nbsp;configs.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Shri&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jan&nbsp;2,&nbsp;2014&nbsp;at&nbsp;6:44&nbsp;AM,&nbsp;Emile&nbsp;Joubert&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;br&gt;<br>
Hi,&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
On&nbsp;27/12/13&nbsp;16:55,&nbsp;shridharan&nbsp;muthu&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;know&nbsp;the&nbsp;quick&nbsp;answer&nbsp;is&nbsp;&quot;upgrade&quot;&nbsp;but&nbsp;is&nbsp;there&nbsp;a&nbsp;short&nbsp;term&nbsp;solution&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;fix&nbsp;this&nbsp;before&nbsp;we&nbsp;upgrade?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Please&nbsp;check&nbsp;whether&nbsp;you&nbsp;can&nbsp;reproduce&nbsp;the&nbsp;problem&nbsp;on&nbsp;the&nbsp;latest&nbsp;version&lt;br&gt;<br>
of&nbsp;the&nbsp;broker.&nbsp;There&nbsp;have&nbsp;been&nbsp;numerous&nbsp;improvements&nbsp;to&nbsp;the&nbsp;broker&nbsp;since&lt;br&gt;<br>
3.0.2.&nbsp;If&nbsp;you&nbsp;can&nbsp;reproduce&nbsp;the&nbsp;problem&nbsp;then&nbsp;please&nbsp;supply&nbsp;the&nbsp;output&nbsp;of&lt;br&gt;<br>
&quot;rabbitmqctl&nbsp;report&quot;&nbsp;while&nbsp;the&nbsp;memory&nbsp;usage&nbsp;is&nbsp;normal&nbsp;and&nbsp;again&nbsp;when&nbsp;it&lt;br&gt;<br>
is&nbsp;abnormal.&lt;br&gt;<br>
&lt;span&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
