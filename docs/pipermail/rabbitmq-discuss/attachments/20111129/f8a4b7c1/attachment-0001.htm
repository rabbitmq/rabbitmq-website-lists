<tt>
Hi&nbsp;Alex,&lt;br&gt;&lt;br&gt;You&nbsp;were&nbsp;right,&nbsp;the&nbsp;problem&nbsp;was&nbsp;not&nbsp;related&nbsp;with&nbsp;the&nbsp;headers.&lt;br&gt;In&nbsp;our&nbsp;custom&nbsp;ejabberd&nbsp;module&nbsp;we&nbsp;were&nbsp;not&nbsp;sending&nbsp;the&nbsp;messages&nbsp;in&nbsp;binary&nbsp;format&nbsp;to&nbsp;RabbitMq.&lt;br&gt;&lt;br&gt;Thank&nbsp;you&nbsp;very&nbsp;much&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;&lt;br&gt;<br>
Alfonso&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;El&nbsp;29&nbsp;de&nbsp;noviembre&nbsp;de&nbsp;2011&nbsp;10:42,&nbsp;Alexandru&nbsp;Scvorţov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:alexandru@rabbitmq.com&quot;&gt;alexandru@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;escribió:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Hi&nbsp;Alfonso,&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;I&amp;#39;ve&nbsp;noticed&nbsp;that&nbsp;the&nbsp;messages&nbsp;created&nbsp;in&nbsp;that&lt;br&gt;<br>
&amp;gt;&nbsp;module&nbsp;can&amp;#39;t&nbsp;be&nbsp;recovered&nbsp;using&nbsp;the&nbsp;.NET&nbsp;API&nbsp;(2.6.1&nbsp;and&nbsp;2.7.0.0)&lt;br&gt;<br>
&amp;gt;&nbsp;because&nbsp;all&nbsp;messages&nbsp;are&nbsp;received&nbsp;as&nbsp;&amp;quot;null&amp;quot;&lt;br&gt;<br>
&amp;gt;&nbsp;(using&nbsp;subscription.Next(millisecondsTimeout,&nbsp;out&nbsp;message))&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;From&nbsp;the&nbsp;docs:&lt;br&gt;<br>
&amp;quot;Returns&nbsp;false&nbsp;only&nbsp;if&nbsp;the&nbsp;timeout&nbsp;expires&nbsp;before&nbsp;either&nbsp;a&nbsp;delivery&lt;br&gt;<br>
appears&nbsp;or&nbsp;the&nbsp;end-of-stream&nbsp;is&nbsp;reached.&nbsp;If&nbsp;false&nbsp;is&nbsp;returned,&nbsp;the&nbsp;out&lt;br&gt;<br>
parameter&nbsp;&amp;quot;result&amp;quot;&nbsp;is&nbsp;set&nbsp;to&nbsp;null,&nbsp;but&nbsp;LatestEvent&nbsp;is&nbsp;not&nbsp;updated.&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;value&nbsp;are&nbsp;you&nbsp;using&nbsp;for&nbsp;the&nbsp;timeout?&nbsp; Does&nbsp;that&nbsp;function&nbsp;return&lt;br&gt;<br>
true&nbsp;when&nbsp;the&nbsp;message&nbsp;is&nbsp;set&nbsp;to&nbsp;null?&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;It&nbsp;seems&nbsp;is&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;way&nbsp;they&nbsp;are&nbsp;sent&nbsp;(maybe&nbsp;AMQP&nbsp;header&nbsp;properties?)...&lt;br&gt;<br>
&lt;br&gt;<br>
It&amp;#39;s&nbsp;probably&nbsp;not&nbsp;related&nbsp;to&nbsp;the&nbsp;headers.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Alex&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
