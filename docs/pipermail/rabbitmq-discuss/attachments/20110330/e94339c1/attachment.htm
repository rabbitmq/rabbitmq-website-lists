<tt>
Hi&nbsp;Guys,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;ve&nbsp;run&nbsp;into&nbsp;an&nbsp;interesting&nbsp;edge&nbsp;case&nbsp;that&nbsp;I&nbsp;don&amp;#39;t&nbsp;seem&nbsp;to&nbsp;have&nbsp;a&nbsp;solution&nbsp;for.&nbsp;I&amp;#39;ve&nbsp;got&nbsp;a&nbsp;local&nbsp;cluster&nbsp;with&nbsp;three&nbsp;nodes&nbsp;(2&nbsp;disk,&nbsp;1&nbsp;RAM)&nbsp;called:&nbsp;rabbit,&nbsp;rabbit_1&nbsp;and&nbsp;rabbit_2.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;attach&nbsp;a&nbsp;consumer&nbsp;(&lt;a&nbsp;href=&quot;https://gist.github.com/895274&quot;&gt;https://gist.github.com/895274&lt;/a&gt;)&nbsp;to&nbsp;rabbit_1&nbsp;(declares&nbsp;queue,&nbsp;exchange&nbsp;and&nbsp;bindings)&nbsp;and&nbsp;start&nbsp;consuming,&nbsp;I&nbsp;can&nbsp;publish&nbsp;(&lt;a&nbsp;href=&quot;https://gist.github.com/895275&quot;&gt;https://gist.github.com/895275&lt;/a&gt;)&nbsp;to&nbsp;rabbit&nbsp;or&nbsp;rabbit_2&nbsp;and&nbsp;the&nbsp;messages&nbsp;are&nbsp;consumed&nbsp;as&nbsp;expected.&nbsp;At&nbsp;this&nbsp;point&nbsp;the&nbsp;queue&nbsp;is&nbsp;living&nbsp;on&nbsp;rabbit&nbsp;and&nbsp;my&nbsp;consumer&nbsp;for&nbsp;it&nbsp;is&nbsp;attached&nbsp;to&nbsp;rabbit_1.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;shutdown&nbsp;rabbit,&nbsp;the&nbsp;queue&nbsp;on&nbsp;it&nbsp;disappears&nbsp;as&nbsp;expected&nbsp;(the&nbsp;queue&nbsp;at&nbsp;this&nbsp;point&nbsp;is&nbsp;non-durable).&nbsp;However,&nbsp;the&nbsp;queue&amp;#39;s&nbsp;consumer&nbsp;on&nbsp;rabbit_1&nbsp;sits&nbsp;there&nbsp;fat&nbsp;dumb&nbsp;and&nbsp;happy&nbsp;even&nbsp;though&nbsp;no&nbsp;queue&nbsp;exists&nbsp;anymore.&nbsp;Is&nbsp;this&nbsp;expected&nbsp;behavior?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;further&nbsp;test,&nbsp;I&nbsp;changed&nbsp;the&nbsp;queue&nbsp;to&nbsp;a&nbsp;durable&nbsp;one&nbsp;and&nbsp;replayed&nbsp;the&nbsp;previous&nbsp;events.&nbsp;Except&nbsp;this&nbsp;time&nbsp;since&nbsp;the&nbsp;consumer&nbsp;was&nbsp;still&nbsp;fat&nbsp;dumb&nbsp;and&nbsp;happy,&nbsp;I&nbsp;restarted&nbsp;the&nbsp;rabbit&nbsp;node.&nbsp;Then&nbsp;I&nbsp;published&nbsp;again.&nbsp;Still&nbsp;nothing&nbsp;on&nbsp;the&nbsp;consumer&nbsp;and&nbsp;the&nbsp;queue&nbsp;(which&nbsp;had&nbsp;returned)&nbsp;had&nbsp;a&nbsp;queue&nbsp;count&nbsp;of&nbsp;0.&nbsp;Doing&nbsp;a&nbsp;list_bindings&nbsp;showed&nbsp;the&nbsp;binding&nbsp;to&nbsp;still&nbsp;exist.&nbsp;But&nbsp;no&nbsp;amount&nbsp;of&nbsp;publishing&nbsp;would&nbsp;end&nbsp;up&nbsp;in&nbsp;the&nbsp;restored&nbsp;queue&nbsp;or&nbsp;the&nbsp;consumer.&nbsp;The&nbsp;only&nbsp;thing&nbsp;that&nbsp;allowed&nbsp;the&nbsp;queue&nbsp;to&nbsp;receive&nbsp;messages&nbsp;again&nbsp;(and&nbsp;the&nbsp;consumer&nbsp;to&nbsp;receive&nbsp;them)&nbsp;was&nbsp;to&nbsp;redeclare&nbsp;the&nbsp;binding.&nbsp;This&nbsp;seems&nbsp;like&nbsp;an&nbsp;error&nbsp;since&nbsp;the&nbsp;binding&nbsp;was&nbsp;reported&nbsp;as&nbsp;still&nbsp;existing.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;help&nbsp;or&nbsp;pointers&nbsp;are&nbsp;greatly&nbsp;appreciated,&nbsp;as&nbsp;with&nbsp;this&nbsp;behavior&nbsp;consumers&nbsp;of&nbsp;queue&nbsp;in&nbsp;a&nbsp;cluster&nbsp;could&nbsp;sit&nbsp;forever&nbsp;and&nbsp;never&nbsp;consume&nbsp;a&nbsp;message&nbsp;after&nbsp;a&nbsp;failed&nbsp;node&nbsp;(and&nbsp;if&nbsp;the&nbsp;queue&nbsp;was&nbsp;durable,&nbsp;messages&nbsp;appear&nbsp;to&nbsp;be&nbsp;blackholed&nbsp;despite&nbsp;the&nbsp;node&nbsp;being&nbsp;restored).&nbsp;This&nbsp;was&nbsp;on&nbsp;RabbitMQ&nbsp;2.4.0&nbsp;on&nbsp;OS&nbsp;X&nbsp;10.6.7.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;in&nbsp;advance.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-J&lt;/div&gt;<br>

</tt>
