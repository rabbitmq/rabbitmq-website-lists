<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;hoping&nbsp;you&nbsp;can&nbsp;help&nbsp;me&nbsp;as&nbsp;no&nbsp;one&nbsp;on&nbsp;the&nbsp;Zenoss&nbsp;forum&nbsp;is.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;learning&nbsp;a&nbsp;lot&nbsp;about&nbsp;RabbitMQ&nbsp;during&nbsp;this&nbsp;troubleshooting&nbsp;process!&nbsp;:-)&lt;br&gt;&lt;br&gt;I&nbsp;setup&nbsp;a&nbsp;two&nbsp;node&nbsp;veritas&nbsp;cluster&nbsp;running&nbsp;Zenoss&nbsp;which&nbsp;uses&nbsp;rabbitmq.&nbsp;In&nbsp;my&nbsp;configuration,&nbsp;i&nbsp;believe&nbsp;RabbitMQ&nbsp;does&nbsp;not&nbsp;know&nbsp;it&nbsp;is&nbsp;a&nbsp;cluster.&lt;br&gt;&lt;br&gt;The&nbsp;cluster&nbsp;consists&nbsp;of&nbsp;a&nbsp;SAN&nbsp;drive&nbsp;this&nbsp;is&nbsp;switches&nbsp;between&nbsp;nodes&nbsp;on&nbsp;failover.&nbsp;Each&nbsp;node&nbsp;had&nbsp;rabbitmq&nbsp;installed&nbsp;then&nbsp;I&nbsp;move&nbsp;the&nbsp;mnesia&nbsp;database&nbsp;to&nbsp;the&nbsp;SAN&nbsp;drive&nbsp;and&nbsp;implemented&nbsp;a&nbsp;rabbitmq-env.conf&lt;br&gt;&lt;br&gt;&amp;nbsp;tail&nbsp;/etc/rabbitmq/rabbitmq-env.conf&lt;br&gt;RABBITMQ_NODENAME=rabbit@localhost&lt;br&gt;RABBITMQ_MNESIA_BASE=/opt/zenoss/rabbitmq&lt;br&gt;RABBITMQ_MNESIA_DIR=/opt/zenoss/rabbitmq/mnesia/rabbit\@localhost&lt;br&gt;&lt;br&gt;By&nbsp;making&nbsp;the&nbsp;rabbitmq&nbsp;nodename&nbsp;localhost,&nbsp;I&nbsp;did&nbsp;not&nbsp;think&nbsp;it&nbsp;would&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;the&nbsp;failover&nbsp;as&nbsp;both&nbsp;hosts&nbsp;are&nbsp;localhost&nbsp;and&nbsp;it&nbsp;does&nbsp;not&nbsp;seem&nbsp;like&nbsp;there&nbsp;is&nbsp;a&nbsp;problem.&lt;br&gt;&lt;br&gt;RabbitMQ&nbsp;runs&nbsp;fine&nbsp;on&nbsp;both&nbsp;hosts&nbsp;and&nbsp;host&nbsp;B&nbsp;gets&nbsp;an&nbsp;error&nbsp;when&nbsp;the&nbsp;Zenoss&nbsp;servers&nbsp;tries&nbsp;to&nbsp;connect&nbsp;to&nbsp;rabbitmq&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;5-Sep-2013::15:11:36&nbsp;===&lt;br&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.470.0&amp;gt;&nbsp;(127.0.0.1:44024&nbsp;-&amp;gt;&nbsp;127.0.0.1:5672)&lt;br&gt;&lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;5-Sep-2013::15:11:36&nbsp;===&lt;br&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.470.0&amp;gt;&nbsp;(127.0.0.1:44024&nbsp;-&amp;gt;&nbsp;127.0.0.1:5672):&lt;br&gt;connection_closed_abruptly&lt;br&gt;&lt;br&gt;service&nbsp;rabbitmq-server&nbsp;status&lt;br&gt;Status&nbsp;of&nbsp;node&nbsp;rabbit@localhost&nbsp;...&lt;br&gt;[{pid,9372},&lt;br&gt;&amp;nbsp;{running_applications,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[{rabbitmq_management,&quot;RabbitMQ&nbsp;Management&nbsp;Console&quot;,&quot;2.8.7&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbitmq_management_agent,&quot;RabbitMQ&nbsp;Management&nbsp;Agent&quot;,&quot;2.8.7&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{amqp_client,&quot;RabbitMQ&nbsp;AMQP&nbsp;Client&quot;,&quot;2.8.7&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbit,&quot;RabbitMQ&quot;,&quot;2.8.7&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{os_mon,&quot;CPO&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.7&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{sasl,&quot;SASL&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;11&quot;,&quot;2.1.10&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{rabbitmq_mochiweb,&quot;RabbitMQ&nbsp;Mochiweb&nbsp;Embedding&quot;,&quot;2.8.7&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{webmachine,&quot;webmachine&quot;,&quot;1.9.1-rmq2.8.7-git52e62bc&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{mochiweb,&quot;MochiMedia&nbsp;Web&nbsp;Server&quot;,&quot;2.3.1-rmq2.8.7-gitd541e9a&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{inets,&quot;INETS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;49&quot;,&quot;5.7.1&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{xmerl,&quot;XML&nbsp;parser&quot;,&quot;1.2.10&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{mnesia,&quot;MNESIA&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;12&quot;,&quot;4.5&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{stdlib,&quot;ERTS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;1.17.5&quot;},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{kernel,&quot;ERTS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;2.14.5&quot;}]},&lt;br&gt;&amp;nbsp;{os,{unix,linux}},&lt;br&gt;&amp;nbsp;{erlang_version,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;Erlang&nbsp;R14B04&nbsp;(erts-5.8.5)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:24:24]&nbsp;[rq:24]&nbsp;[async-threads:30]&nbsp;[kernel-poll:true]\n&quot;},&lt;br&gt;&amp;nbsp;{memory,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[{total,42808712},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{processes,13595840},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{processes_used,13579352},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{system,29212872},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{atom,1538337},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{atom_used,1523802},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{binary,3428320},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{code,17183366},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{ets,3819312}]},&lt;br&gt;&amp;nbsp;{vm_memory_high_watermark,0.4},&lt;br&gt;&amp;nbsp;{vm_memory_limit,60839985152},&lt;br&gt;&amp;nbsp;{disk_free_limit,1000000000},&lt;br&gt;&amp;nbsp;{disk_free,1029454253056},&lt;br&gt;&amp;nbsp;{file_descriptors,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[{total_limit,924},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{total_used,20},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{sockets_limit,829},&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;{sockets_used,10}]},&lt;br&gt;&amp;nbsp;{processes,[{limit,1048576},{used,303}]},&lt;br&gt;&amp;nbsp;{run_queue,0},&lt;br&gt;&amp;nbsp;{uptime,3704}]&lt;br&gt;...done.&lt;br&gt;&lt;br&gt;rabbitmqctl&nbsp;list_connections&lt;br&gt;Listing&nbsp;connections&nbsp;...&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43982&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43981&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43979&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43989&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43994&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43980&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43969&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43988&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;zenoss&amp;nbsp;&nbsp;127.0.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;43985&amp;nbsp;&amp;nbsp;&nbsp;running&lt;br&gt;...done.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;guessing&nbsp;these&nbsp;connections&nbsp;were&nbsp;made&nbsp;originally&nbsp;before&nbsp;the&nbsp;connection&nbsp;was&nbsp;closed&nbsp;abruptly?&lt;br&gt;&lt;br&gt;Can&nbsp;anyone&nbsp;please&nbsp;help?&lt;br&gt;&lt;br&gt;&lt;/div&gt;
</tt>
