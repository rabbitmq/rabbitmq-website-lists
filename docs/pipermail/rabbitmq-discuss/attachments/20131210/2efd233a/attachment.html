<tt>
&lt;html&gt;&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=Windows-1252&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;div&gt;Hi&nbsp;Tim,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;realized&nbsp;I&nbsp;did&nbsp;not&nbsp;address&nbsp;all&nbsp;of&nbsp;your&nbsp;questions.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&nbsp;How&nbsp;long&nbsp;do&nbsp;these&nbsp;hangs&nbsp;take?&nbsp;The&nbsp;shovel&nbsp;workers&nbsp;will&nbsp;wait&nbsp;10&nbsp;seconds&nbsp;for&nbsp;both&nbsp;their&nbsp;inbound&nbsp;and&nbsp;outbound&nbsp;connections&nbsp;to&nbsp;close&nbsp;cleanly.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;one&nbsp;I&nbsp;server&nbsp;I&nbsp;left&nbsp;untouched&nbsp;that&nbsp;hung&nbsp;four&nbsp;days&nbsp;ago,&nbsp;and&nbsp;is&nbsp;still&nbsp;hung&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;If&nbsp;you&nbsp;examine&nbsp;the&nbsp;log&nbsp;files&nbsp;for&nbsp;both&nbsp;the&nbsp;source&nbsp;and&nbsp;destination&nbsp;(i.e.,&nbsp;remote)&nbsp;brokers&nbsp;during&nbsp;the&nbsp;shutdown,&nbsp;there&nbsp;may&nbsp;be&nbsp;some&nbsp;useful&nbsp;indication&nbsp;of&nbsp;whether&nbsp;this&nbsp;is&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;problem&nbsp;or&nbsp;not.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&gt;The&nbsp;destination&nbsp;of&nbsp;the&nbsp;shovel&nbsp;was&nbsp;down&nbsp;at&nbsp;the&nbsp;time&nbsp;so&nbsp;only&nbsp;the&nbsp;source&nbsp;side&nbsp;is&nbsp;relevant.&nbsp;&nbsp;I&nbsp;noticed&nbsp;that&nbsp;the&nbsp;shutdown_log&nbsp;file&nbsp;has&nbsp;the&nbsp;time&nbsp;13:46,&nbsp;with&nbsp;the&nbsp;message&nbsp;&quot;Stopping&nbsp;and&nbsp;halting&nbsp;node&nbsp;'rabbit@vm-ave29'&nbsp;…&quot;,&nbsp;and&nbsp;shutdown_err&nbsp;is&nbsp;empty.&nbsp;&nbsp;The&nbsp;&quot;Halting&nbsp;Erlang&nbsp;VM&quot;&nbsp;message&nbsp;in&nbsp;rabbit@&lt;/span&gt;vm-ave29&lt;span&nbsp;class=&quot;Apple-style-span&quot;&gt;.log&nbsp;is&nbsp;then&nbsp;coming&nbsp;five&nbsp;minutes&nbsp;later&nbsp;at&nbsp;13:51.&nbsp;&nbsp;The&nbsp;messages&nbsp;in&nbsp;rabbit@&lt;/span&gt;vm-ave29&lt;span&nbsp;class=&quot;Apple-style-span&quot;&gt;-sasl.log&nbsp;all&nbsp;seem&nbsp;related&nbsp;to&nbsp;shovel&nbsp;connect&nbsp;attempts.&nbsp;&nbsp;&lt;/span&gt;Also&nbsp;note&nbsp;that&nbsp;the&nbsp;RabbitMQ&nbsp;erlang&nbsp;process&nbsp;is&nbsp;still&nbsp;running.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;We&nbsp;have&nbsp;fixed&nbsp;bugs&nbsp;with&nbsp;shutdown&nbsp;delays&nbsp;and&nbsp;deadlocks&nbsp;in&nbsp;the&nbsp;past,&nbsp;but&nbsp;they're&nbsp;mostly&nbsp;dusted&nbsp;and&nbsp;released&nbsp;now.&nbsp;We&nbsp;do&nbsp;have&nbsp;an&nbsp;open&nbsp;issue&nbsp;that&nbsp;can&nbsp;cause&nbsp;long&nbsp;delays&nbsp;during&nbsp;broker&nbsp;shutdown,&nbsp;which&nbsp;is&nbsp;mediated&nbsp;by&nbsp;having&nbsp;a&nbsp;lot&nbsp;of&nbsp;durable&nbsp;queues&nbsp;(regardless&nbsp;of&nbsp;whether&nbsp;they&nbsp;contain&nbsp;messages&nbsp;or&nbsp;not).&nbsp;Could&nbsp;that&nbsp;be&nbsp;what&nbsp;you're&nbsp;seeing?&nbsp;How&nbsp;many&nbsp;durable&nbsp;queues&nbsp;do&nbsp;these&nbsp;brokers&nbsp;have&nbsp;running&nbsp;on&nbsp;them?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Five&nbsp;durable&nbsp;queues.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Ed&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;id=&quot;OLK_SRC_BODY_SECTION&quot;&gt;&lt;div&nbsp;style=&quot;font-family:Calibri;&nbsp;font-size:11pt;&nbsp;text-align:left;&nbsp;color:black;&nbsp;BORDER-BOTTOM:&nbsp;medium&nbsp;none;&nbsp;BORDER-LEFT:&nbsp;medium&nbsp;none;&nbsp;PADDING-BOTTOM:&nbsp;0in;&nbsp;PADDING-LEFT:&nbsp;0in;&nbsp;PADDING-RIGHT:&nbsp;0in;&nbsp;BORDER-TOP:&nbsp;#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;BORDER-RIGHT:&nbsp;medium&nbsp;none;&nbsp;PADDING-TOP:&nbsp;3pt&quot;&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;From:&nbsp;&lt;/span&gt;&nbsp;&lt;Tyrrill&gt;,&nbsp;Edward&nbsp;Tyrrill&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ed.tyrrill@emc.com&quot;&gt;ed.tyrrill@emc.com&lt;/a&gt;&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Reply-To:&nbsp;&lt;/span&gt;&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Date:&nbsp;&lt;/span&gt;&nbsp;Tuesday,&nbsp;December&nbsp;10,&nbsp;2013&nbsp;10:48&nbsp;AM&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;To:&nbsp;&lt;/span&gt;&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Subject:&nbsp;&lt;/span&gt;&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;rabbitmqctl&nbsp;stop&nbsp;hangs&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;div&gt;Hi&nbsp;Tim,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;quick&nbsp;response.&nbsp;&nbsp;From&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;log&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;shovel&nbsp;plugin&nbsp;was&nbsp;trying&nbsp;to&nbsp;establish&nbsp;the&nbsp;connection&nbsp;to&nbsp;the&nbsp;remote&nbsp;broker,&nbsp;which&nbsp;was&nbsp;down&nbsp;at&nbsp;the&nbsp;time,&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;stop&nbsp;was&nbsp;run:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;=ERROR&nbsp;REPORT====&nbsp;6-Dec-2013::13:51:36&nbsp;===&lt;/div&gt;&lt;div&gt;**&nbsp;Generic&nbsp;server&nbsp;&lt;0.8762.19&gt;&nbsp;terminating&nbsp;&lt;/div&gt;&lt;div&gt;**&nbsp;Last&nbsp;message&nbsp;in&nbsp;was&nbsp;{'EXIT',&lt;0.8759.19&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{badmatch,{error,etimedout}},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{rabbit_shovel_worker,make_conn_and_chan,1,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{rabbit_shovel_worker,handle_cast,2,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{gen_server2,handle_msg,2,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{proc_lib,init_p_do_apply,3,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{file,&quot;proc_lib.erl&quot;},{line,239}]}]}}&lt;/div&gt;&lt;div&gt;**&nbsp;When&nbsp;Server&nbsp;state&nbsp;==&nbsp;{state,amqp_direct_connection,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{state,'rabbit@vm-ave29',&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{user,&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[administrator],&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rabbit_auth_backend_internal,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{internal_user,&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;193,148,73,243,245,222,154,143,19,215,47,234,93,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;175,56,125,17,151,61,97&gt;&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[administrator]}},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&quot;/&quot;&gt;&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{amqp_params_direct,&lt;&lt;&quot;guest&quot;&gt;&gt;,none,&lt;&lt;&quot;/&quot;&gt;&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'rabbit@vm-ave29',none,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{amqp_adapter_info,unknown,unknown,unknown,unknown,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&quot;&lt;&lt;a&nbsp;href=&quot;mailto:'rabbit@vm-ave29'.3.8762.19&quot;&gt;'rabbit@vm-ave29'.3.8762.19&lt;/a&gt;&gt;&quot;&gt;&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'Direct',{0,9,1}},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;0.8765.19&gt;,undefined},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;0.8764.19&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{amqp_params_direct,&lt;&lt;&quot;guest&quot;&gt;&gt;,none,&lt;&lt;&quot;/&quot;&gt;&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'rabbit@vm-ave29',none,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{&lt;&lt;&quot;capabilities&quot;&gt;&gt;,table,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{&lt;&lt;&quot;publisher_confirms&quot;&gt;&gt;,bool,true},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;exchange_exchange_bindings&quot;&gt;&gt;,bool,true},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;basic.nack&quot;&gt;&gt;,bool,true},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;consumer_cancel_notify&quot;&gt;&gt;,bool,true},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;connection.blocked&quot;&gt;&gt;,bool,true},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;consumer_priorities&quot;&gt;&gt;,bool,true},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;authentication_failure_close&quot;&gt;&gt;,bool,true}]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;copyright&quot;&gt;&gt;,longstr,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&quot;Copyright&nbsp;(C)&nbsp;2007-2013&nbsp;GoPivotal,&nbsp;Inc.&quot;&gt;&gt;},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;information&quot;&gt;&gt;,longstr,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&quot;Licensed&nbsp;under&nbsp;the&nbsp;MPL.&nbsp;&nbsp;See&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/&quot;&gt;&gt;&quot;&gt;http://www.rabbitmq.com/&quot;&gt;&gt;&lt;/a&gt;},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;platform&quot;&gt;&gt;,longstr,&lt;&lt;&quot;Erlang/OTP&quot;&gt;&gt;},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;product&quot;&gt;&gt;,longstr,&lt;&lt;&quot;RabbitMQ&quot;&gt;&gt;},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;&lt;&quot;version&quot;&gt;&gt;,longstr,&lt;&lt;&quot;3.2.0&quot;&gt;&gt;}],&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none,false}&lt;/div&gt;&lt;div&gt;**&nbsp;Reason&nbsp;for&nbsp;termination&nbsp;==&nbsp;&lt;/div&gt;&lt;div&gt;**&nbsp;{unexpected_msg,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'EXIT',&lt;0.8759.19&gt;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{badmatch,{error,etimedout}},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{rabbit_shovel_worker,make_conn_and_chan,1,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{rabbit_shovel_worker,handle_cast,2,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{gen_server2,handle_msg,2,[]},&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{proc_lib,init_p_do_apply,3,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{file,&quot;proc_lib.erl&quot;},{line,239}]}]}}}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;6-Dec-2013::13:51:36&nbsp;===&lt;/div&gt;&lt;div&gt;stopped&nbsp;TCP&nbsp;Listener&nbsp;on&nbsp;127.0.0.1:5672&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;6-Dec-2013::13:51:36&nbsp;===&lt;/div&gt;&lt;div&gt;Halting&nbsp;Erlang&nbsp;VM&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;id=&quot;OLK_SRC_BODY_SECTION&quot;&gt;&lt;div&nbsp;style=&quot;font-family:Calibri;&nbsp;font-size:11pt;&nbsp;text-align:left;&nbsp;color:black;&nbsp;BORDER-BOTTOM:&nbsp;medium&nbsp;none;&nbsp;BORDER-LEFT:&nbsp;medium&nbsp;none;&nbsp;PADDING-BOTTOM:&nbsp;0in;&nbsp;PADDING-LEFT:&nbsp;0in;&nbsp;PADDING-RIGHT:&nbsp;0in;&nbsp;BORDER-TOP:&nbsp;#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;BORDER-RIGHT:&nbsp;medium&nbsp;none;&nbsp;PADDING-TOP:&nbsp;3pt&quot;&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;From:&nbsp;&lt;/span&gt;Tim&nbsp;Watson&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:tim@rabbitmq.com&quot;&gt;tim@rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Reply-To:&nbsp;&lt;/span&gt;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Date:&nbsp;&lt;/span&gt;Tuesday,&nbsp;December&nbsp;10,&nbsp;2013&nbsp;1:49&nbsp;AM&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;To:&nbsp;&lt;/span&gt;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Subject:&nbsp;&lt;/span&gt;Re:&nbsp;[rabbitmq-discuss]&nbsp;rabbitmqctl&nbsp;stop&nbsp;hangs&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;<br>
There&nbsp;ought&nbsp;to&nbsp;be&nbsp;further&nbsp;information&nbsp;in&nbsp;the&nbsp;log&nbsp;files&nbsp;from&nbsp;the&nbsp;brokers&nbsp;in&nbsp;question&nbsp;during&nbsp;the&nbsp;stop&nbsp;operation.&nbsp;Can&nbsp;you&nbsp;post&nbsp;that,&nbsp;or&nbsp;put&nbsp;it&nbsp;somewhere&nbsp;accessible&nbsp;please?&nbsp;Why&nbsp;do&nbsp;you&nbsp;have&nbsp;both&nbsp;`rabbitmq-server&nbsp;stop'&nbsp;and&nbsp;`rabbitmqctl&nbsp;stop'&nbsp;running&nbsp;at&nbsp;the&nbsp;same&nbsp;time?<br>
&nbsp;Are&nbsp;those&nbsp;pointing&nbsp;to&nbsp;different&nbsp;rabbits?&nbsp;<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;10&nbsp;Dec&nbsp;2013,&nbsp;at&nbsp;01:32,&nbsp;Tyrrill,&nbsp;Ed&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;Hi&nbsp;All,&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;We&nbsp;are&nbsp;using&nbsp;rabbitmq-server&nbsp;rpms&nbsp;on&nbsp;linux.&nbsp;&nbsp;Recently&nbsp;we&nbsp;upgraded&nbsp;from&nbsp;3.1.1-1&nbsp;to&nbsp;3.2.0-1,&nbsp;and&nbsp;we&nbsp;are&nbsp;seeing&nbsp;intermittent&nbsp;hangs&nbsp;when&nbsp;stopping&nbsp;rabbitmq.&nbsp;&nbsp;Here&nbsp;is&nbsp;the&nbsp;ps&nbsp;output:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Courier&quot;&gt;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;31052&nbsp;31051&nbsp;&nbsp;0&nbsp;Dec06&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:00&nbsp;/bin/sh&nbsp;/sbin/service&nbsp;rabbitmq-server&nbsp;stop&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Courier&quot;&gt;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;31055&nbsp;31052&nbsp;&nbsp;0&nbsp;Dec06&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:00&nbsp;/bin/sh&nbsp;/etc/init.d/rabbitmq-server&nbsp;stop&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Courier&quot;&gt;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;31100&nbsp;31055&nbsp;&nbsp;0&nbsp;Dec06&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:00&nbsp;/bin/sh&nbsp;/usr/sbin/rabbitmqctl&nbsp;stop&nbsp;/var/run/rabbitmq/pid&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Courier&quot;&gt;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;31111&nbsp;31100&nbsp;&nbsp;0&nbsp;Dec06&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:00&nbsp;su&nbsp;rabbitmq&nbsp;-s&nbsp;/bin/sh&nbsp;-c&nbsp;/usr/lib/rabbitmq/bin/rabbitmqctl&nbsp;&nbsp;&quot;stop&quot;&nbsp;&quot;/var/run/rabbitmq/pid&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Courier&quot;&gt;rabbitmq&nbsp;31112&nbsp;31111&nbsp;&nbsp;0&nbsp;Dec06&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:24:10&nbsp;/usr/lib64/erlang/erts-5.10.3/bin/beam.smp&nbsp;--&nbsp;-root&nbsp;/usr/lib64/erlang&nbsp;-progname&nbsp;erl&nbsp;--&nbsp;-home&nbsp;/var/lib/rabbitmq&nbsp;--&nbsp;-pa&nbsp;/usr&lt;/font&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;/lib/rabbitmq/lib/rabbitmq_server-3.2.0/sbin/../ebin<br>
&nbsp;-noshell&nbsp;-noinput&nbsp;-hidden&nbsp;-sname&nbsp;rabbitmqctl31112&nbsp;-boot&nbsp;start_clean&nbsp;-s&nbsp;rabbit_control_main&nbsp;-nodename&nbsp;rabbit@vm-ave29&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;-extra&nbsp;stop&nbsp;/var/run/rabbitmq/pid&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;The&nbsp;CPU&nbsp;time&nbsp;column&nbsp;on&nbsp;the&nbsp;erlang&nbsp;process&nbsp;does&nbsp;slowly&nbsp;go&nbsp;up.&nbsp;&nbsp;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;it&nbsp;plays&nbsp;a&nbsp;factor,&nbsp;but&nbsp;this&nbsp;broker&nbsp;has&nbsp;shovels&nbsp;defined&nbsp;to&nbsp;a&nbsp;remote&nbsp;broker,&nbsp;and&nbsp;the&nbsp;remote&nbsp;broker&nbsp;was&nbsp;down&nbsp;at&nbsp;the&nbsp;time&nbsp;of&nbsp;this&nbsp;stop.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;How&nbsp;long&nbsp;do&nbsp;these&nbsp;hangs&nbsp;take?&nbsp;The&nbsp;shovel&nbsp;workers&nbsp;will&nbsp;wait&nbsp;10&nbsp;seconds&nbsp;for&nbsp;both&nbsp;their&nbsp;inbound&nbsp;and&nbsp;outbound&nbsp;connections&nbsp;to&nbsp;close&nbsp;cleanly.&nbsp;If&nbsp;you&nbsp;examine&nbsp;the&nbsp;log&nbsp;files&nbsp;for&nbsp;both&nbsp;the&nbsp;source&nbsp;and&nbsp;destination&nbsp;(i.e.,&nbsp;remote)&nbsp;brokers&nbsp;during&nbsp;the&nbsp;shutdown,&nbsp;there&nbsp;may<br>
&nbsp;be&nbsp;some&nbsp;useful&nbsp;indication&nbsp;of&nbsp;whether&nbsp;this&nbsp;is&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;problem&nbsp;or&nbsp;not.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;Is&nbsp;this&nbsp;a&nbsp;known&nbsp;issue?&nbsp;&nbsp;We've&nbsp;been&nbsp;seeing&nbsp;this&nbsp;a&nbsp;couple&nbsp;times&nbsp;a&nbsp;week&nbsp;(over&nbsp;&gt;&nbsp;100&nbsp;brokers),&nbsp;and&nbsp;I&nbsp;need&nbsp;to&nbsp;get&nbsp;a&nbsp;fix&nbsp;for&nbsp;this.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;have&nbsp;fixed&nbsp;bugs&nbsp;with&nbsp;shutdown&nbsp;delays&nbsp;and&nbsp;deadlocks&nbsp;in&nbsp;the&nbsp;past,&nbsp;but&nbsp;they're&nbsp;mostly&nbsp;dusted&nbsp;and&nbsp;released&nbsp;now.&nbsp;We&nbsp;do&nbsp;have&nbsp;an&nbsp;open&nbsp;issue&nbsp;that&nbsp;can&nbsp;cause&nbsp;long&nbsp;delays&nbsp;during&nbsp;broker&nbsp;shutdown,&nbsp;which&nbsp;is&nbsp;mediated&nbsp;by&nbsp;having&nbsp;a&nbsp;lot&nbsp;of&nbsp;durable&nbsp;queues&nbsp;(regardless&nbsp;of<br>
&nbsp;whether&nbsp;they&nbsp;contain&nbsp;messages&nbsp;or&nbsp;not).&nbsp;Could&nbsp;that&nbsp;be&nbsp;what&nbsp;you're&nbsp;seeing?&nbsp;How&nbsp;many&nbsp;durable&nbsp;queues&nbsp;do&nbsp;these&nbsp;brokers&nbsp;have&nbsp;running&nbsp;on&nbsp;them?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Tim&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
