<tt>
Hi,&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;been&nbsp;testing&nbsp;rabbitmq&nbsp;for&nbsp;a&nbsp;potential&nbsp;use&nbsp;at&nbsp;work.&nbsp;I&nbsp;am&nbsp;firing&nbsp;about&nbsp;500&nbsp;messages/sec&nbsp;(estimate)&nbsp;from&nbsp;60&nbsp;or&nbsp;so&nbsp;processes.&nbsp;&lt;br&gt;All&nbsp;starts&nbsp;well&nbsp;(I&nbsp;can&nbsp;see&nbsp;all&nbsp;the&nbsp;messages&nbsp;being&nbsp;pumped&nbsp;out,&nbsp;all&nbsp;going&nbsp;quickly)&nbsp;and&nbsp;after&nbsp;a&nbsp;few&nbsp;minutes&nbsp;rabbitmq&nbsp;halts&nbsp;with&nbsp;the&nbsp;error&nbsp;below&nbsp;-&nbsp;&amp;#39;**&nbsp;gen_event&nbsp;handler&nbsp;rabbit_sasl_report_file_h&nbsp;crashed.<br>
<br>
&amp;#39;&lt;br&gt;(same&nbsp;error&nbsp;keeps&nbsp;occuring).&nbsp;&lt;br&gt;&lt;br&gt;Infrastructure&nbsp;wise&nbsp;I&nbsp;have&nbsp;a&nbsp;simple&nbsp;queue&nbsp;setup&nbsp;with&nbsp;one&nbsp;consumer&nbsp;(erlang&nbsp;client) &nbsp;with&nbsp;the&nbsp;producer&nbsp;a&nbsp;java&nbsp;client;&nbsp;sending&nbsp;very&nbsp;short&nbsp;messages&lt;br&gt;The&nbsp;box&nbsp;is&nbsp;running&nbsp;a&nbsp;single&nbsp;rabbitmq&nbsp;server&nbsp;process&nbsp;and&nbsp;is&nbsp;a&nbsp;quad&nbsp;core,&nbsp;2&nbsp;gig&nbsp;box&lt;br&gt;<br>
&lt;br&gt;Things&nbsp;I&nbsp;have&nbsp;tried&nbsp;so&nbsp;far:&lt;br&gt;Increase&nbsp;the&nbsp;ulimit&nbsp;to&nbsp;100,000+&lt;br&gt;Increase&nbsp;the&nbsp;number&nbsp;of&nbsp;consumers&nbsp;to&nbsp;3&nbsp;to&nbsp;try&nbsp;and&nbsp;take&nbsp;any&nbsp;load&nbsp;off&nbsp;the&nbsp;rabbitmq&nbsp;server&lt;br&gt;Use&nbsp;ERL_MAX_PORTS&nbsp;10240&nbsp;/&nbsp;ERL_MAX_ETS_TABLES&nbsp;10240&lt;br&gt;&lt;br&gt;Any&nbsp;help&nbsp;would&nbsp;be&nbsp;great,&lt;br&gt;<br>
&lt;br&gt;thanks&lt;br&gt;&lt;br&gt;Patrick&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;**&nbsp;Generic&nbsp;server&nbsp;&amp;lt;0.141.0&amp;gt;&nbsp;terminating<br>
&lt;br&gt;**&nbsp;Last&nbsp;message&nbsp;in&nbsp;was&nbsp;{inet_async,#Port&amp;lt;0.1999&amp;gt;,16213,{ok,#Port&amp;lt;0.5041&amp;gt;}}<br>
&lt;br&gt;**&nbsp;When&nbsp;Server&nbsp;state&nbsp;==&nbsp;none<br>
&lt;br&gt;**&nbsp;Reason&nbsp;for&nbsp;termination&nbsp;==<br>
&lt;br&gt;**&nbsp;{cannot_accept,{error,emfile}}<br>
&lt;br&gt; &lt;br&gt;=INFO&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.4894.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://192.168.36.72:33078&quot;&gt;192.168.36.72:33078&lt;/a&gt;<br>
&lt;br&gt; &lt;br&gt;=INFO&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;starting&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.4895.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://192.168.36.72:33079&quot;&gt;192.168.36.72:33079&lt;/a&gt;<br>
&lt;br&gt; &lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;emfile.&nbsp;Target:&nbsp;./lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.<br>
&lt;br&gt; &lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;emfile.&nbsp;Target:&nbsp;/usr/lib/erlang/lib/kernel-2.13.2/ebin/lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.<br>
&lt;br&gt; &lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;emfile.&nbsp;Target:&nbsp;/usr/lib/erlang/lib/stdlib-1.16.2/ebin/lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.<br>
&lt;br&gt;&lt;br&gt;....&nbsp;(every&nbsp;lib&nbsp;directory&nbsp;in&nbsp;my&nbsp;install)&lt;br&gt; &lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;emfile.&nbsp;Target:&nbsp;/usr/lib/erlang/lib/appmon-2.1.10.1/ebin/lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.<br>
&lt;br&gt; &lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;emfile.&nbsp;Target:&nbsp;lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.<br>
&lt;br&gt; &lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;5-Aug-2009::01:00:42&nbsp;===<br>
&lt;br&gt;**&nbsp;gen_event&nbsp;handler&nbsp;rabbit_sasl_report_file_h&nbsp;crashed.<br>
&lt;br&gt;**&nbsp;Was&nbsp;installed&nbsp;in&nbsp;error_logger<br>
&lt;br&gt;**&nbsp;Last&nbsp;event&nbsp;was:&nbsp;{error_report,&amp;lt;0.102.0&amp;gt;,<br>
&lt;br&gt;                      &nbsp;{&amp;lt;0.141.0&amp;gt;,crash_report,<br>
&lt;br&gt;                       &nbsp;[[{initial_call,{tcp_acceptor,init,[&amp;#39;Argument__1&amp;#39;]}},<br>
&lt;br&gt;                         &nbsp;{pid,&amp;lt;0.141.0&amp;gt;},<br>
&lt;br&gt;                         &nbsp;{registered_name,[]},<br>
&lt;br&gt;                         &nbsp;{error_info,<br>
&lt;br&gt;                             &nbsp;{exit,<br>
&lt;br&gt;                                 &nbsp;{cannot_accept,{error,emfile}},<br>
&lt;br&gt;                                 &nbsp;[{gen_server,terminate,6},<br>
&lt;br&gt;                                  &nbsp;{proc_lib,init_p_do_apply,3}]}},<br>
&lt;br&gt;                         &nbsp;{ancestors,<br>
&lt;br&gt;                             &nbsp;[&amp;#39;tcp_acceptor_sup_0.0.0.0:5672&amp;#39;,&amp;lt;0.138.0&amp;gt;,<br>
&lt;br&gt;                              &nbsp;rabbit_sup,&amp;lt;0.103.0&amp;gt;]},<br>
&lt;br&gt;                         &nbsp;{messages,[]},<br>
&lt;br&gt;                         &nbsp;{links,[&amp;lt;0.139.0&amp;gt;]},<br>
&lt;br&gt;                         &nbsp;{dictionary,[]},<br>
&lt;br&gt;                         &nbsp;{trap_exit,false},<br>
&lt;br&gt;                         &nbsp;{status,running},<br>
&lt;br&gt;                         &nbsp;{heap_size,987},<br>
&lt;br&gt;                         &nbsp;{stack_size,24},<br>
&lt;br&gt;                         &nbsp;{reductions,147211}],<br>
&lt;br&gt;                        &nbsp;[]]}}<br>
&lt;br&gt;**&nbsp;When&nbsp;handler&nbsp;state&nbsp;==&nbsp;{&amp;lt;0.49.0&amp;gt;,&amp;quot;/var/log/rabbitmq/rabbit-sasl.log&amp;quot;,error}<br>
&lt;br&gt;**&nbsp;Reason&nbsp;==&nbsp;{&amp;#39;module&nbsp;could&nbsp;not&nbsp;be&nbsp;loaded&amp;#39;,<br>
&lt;br&gt;                &nbsp;[{lib,format_exception,<br>
&lt;br&gt;                     &nbsp;[5,exit,<br>
&lt;br&gt;                      &nbsp;{cannot_accept,{error,emfile}},<br>
&lt;br&gt;                      &nbsp;[{gen_server,terminate,6},{proc_lib,init_p_do_apply,3}],<br>
&lt;br&gt;                      &nbsp;#Fun&amp;lt;proc_lib.0.17830618&amp;gt;,#Fun&amp;lt;proc_lib.1.112399459&amp;gt;]},<br>
&lt;br&gt;                 &nbsp;{proc_lib,format_exception,3},<br>
&lt;br&gt;                 &nbsp;{proc_lib,format_rep,1},<br>
&lt;br&gt;                 &nbsp;{proc_lib,format_rep,1},<br>
&lt;br&gt;                 &nbsp;{proc_lib,format_rep,1},<br>
&lt;br&gt;                 &nbsp;{proc_lib,format,1},<br>
&lt;br&gt;                 &nbsp;{sasl_report,write_report2,4},<br>
&lt;br&gt;                 &nbsp;{sasl_report_file_h,handle_event,2}]}<br>
&lt;br&gt; &lt;br&gt;=WARNING&nbsp;REPORT====&nbsp;5-Aug-2009::01:03:19&nbsp;===<br>
&lt;br&gt;exception&nbsp;on&nbsp;TCP&nbsp;connection&nbsp;&amp;lt;0.736.0&amp;gt;&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://192.168.160.203:62435&quot;&gt;192.168.160.203:62435&lt;/a&gt;<br>
&lt;br&gt;connection_closed_abruptly&lt;br&gt;<br>

</tt>
