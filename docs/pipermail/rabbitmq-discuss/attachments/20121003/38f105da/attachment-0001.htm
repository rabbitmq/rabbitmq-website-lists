<tt>
&lt;pre&nbsp;class=&quot;sourcecode&quot;&gt;&lt;br&gt;we&nbsp;are&nbsp;using&nbsp;rabbitmq&nbsp;rpc&nbsp;in&nbsp;java,&nbsp;and&nbsp;using&nbsp;jdk&nbsp;threadpool&nbsp;as&nbsp;following:&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&nbsp;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&quot;&gt;ExecutorService&nbsp;&lt;/span&gt;&lt;b&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&nbsp;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&quot;&gt;es&lt;/b&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&nbsp;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&quot;&gt;&nbsp;=&nbsp;Executors.newFixedThreadPool(20);<br>
Connection&nbsp;conn&nbsp;=&nbsp;factory.newConnection(&lt;/span&gt;&lt;b&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&nbsp;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&quot;&gt;es&lt;/b&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&nbsp;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&quot;&gt;);&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&nbsp;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&nbsp;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&quot;&gt;....&lt;/span&gt;&lt;br&gt;&lt;br&gt;but,&nbsp;for&nbsp;shtutting&nbsp;down&nbsp;rpc&nbsp;server,&nbsp;&nbsp;how&nbsp;can&nbsp;we&nbsp;make&nbsp;sure&nbsp;all&nbsp;messages&nbsp;have&nbsp;been&nbsp;dealt&nbsp;with,&nbsp;and&nbsp;no&nbsp;msg&nbsp;lost.&lt;br&gt;we&nbsp;want&nbsp;a&nbsp;graceful&nbsp;shutdown&nbsp;process,&nbsp;seems&nbsp;no&nbsp;document&nbsp;talking&nbsp;about&nbsp;that.<br>
&lt;br&gt;if&nbsp;we&nbsp;call:&lt;br&gt;&lt;span&nbsp;style=&quot;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;execService.shutdown();&lt;/span&gt;&lt;br&nbsp;style=&quot;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;span&nbsp;style=&quot;background-color:&nbsp;rgb(153,&nbsp;153,&nbsp;153);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&quot;&gt;Consumer.handleDelivery&nbsp;will&nbsp;not&nbsp;be&nbsp;triggerred&nbsp;then?&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;Anyone&nbsp;can&nbsp;help&nbsp;will&nbsp;be&nbsp;very&nbsp;appreciated..&lt;br&gt;&lt;/pre&gt;
</tt>
