<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Hi,&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
I&amp;#39;m&nbsp;interested&nbsp;in&nbsp;knowing&nbsp;how&nbsp;other&nbsp;people&nbsp;handle&nbsp;recovering&nbsp;from&nbsp;a&nbsp;faulty&nbsp;connection&nbsp;using&nbsp;the&nbsp;official&nbsp;RabbitMQ&nbsp;java&nbsp;client&nbsp;library.&nbsp;We&nbsp;are&nbsp;using&nbsp;it&nbsp;to&nbsp;connect&nbsp;our&nbsp;application&nbsp;servers&nbsp;to&nbsp;our&nbsp;RabbitMQ&nbsp;cluster&nbsp;and&nbsp;we&nbsp;have&nbsp;implemented&nbsp;a&nbsp;few&nbsp;different&nbsp;ways&nbsp;to&nbsp;recover&nbsp;from&nbsp;a&nbsp;connection&nbsp;failure,&nbsp;but&nbsp;non&nbsp;of&nbsp;them&nbsp;feel&nbsp;quite&nbsp;right.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Imagine&nbsp;this&nbsp;pseudo&nbsp;application:&lt;/p&gt;&lt;pre&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;10px;padding:5px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(238,238,238);font-family:Consolas,Menlo,Monaco,&amp;#39;Lucida&nbsp;Console&amp;#39;,&amp;#39;Liberation&nbsp;Mono&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&nbsp;Mono&amp;#39;,&amp;#39;Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono&amp;#39;,&amp;#39;Courier&nbsp;New&amp;#39;,monospace,serif;overflow:auto;width:auto;max-height:600px;word-wrap:normal;color:rgb(0,0,0);font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;word-spacing:0px&quot;&gt;<br>
&lt;code&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(238,238,238);font-family:Consolas,Menlo,Monaco,&amp;#39;Lucida&nbsp;Console&amp;#39;,&amp;#39;Liberation&nbsp;Mono&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&nbsp;Mono&amp;#39;,&amp;#39;Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono&amp;#39;,&amp;#39;Courier&nbsp;New&amp;#39;,monospace,serif&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;class&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;OurClassThatStartsConsumers&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;Connection&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;conn&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;void&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;start&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;()&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;ConnectionFactory&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;factory&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;ConnectionFactory&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;();&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;factory&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;setUsername&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(128,0,0)&quot;&gt;&amp;quot;someusername&amp;quot;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;);&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;factory&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;setPassword&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(128,0,0)&quot;&gt;&amp;quot;somepassword&amp;quot;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;);&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;factory&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;setHost&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(128,0,0)&quot;&gt;&amp;quot;somehost&amp;quot;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;);&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;factory&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;newConnection&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;();&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;Thread&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;new&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;Consumer&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;conn&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;createChannel&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;())).&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;start&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;();&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;class&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;Consumer1&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;implements&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;Runnable&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;Consumer1&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(43,145,175)&quot;&gt;Channel&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;channel&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;this&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;channel&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;=&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;channel&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(128,0,0)&quot;&gt;@Override&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;public&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;void&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;run&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;()&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;while&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;(&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,139)&quot;&gt;true&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;)&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;{&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;...&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;&nbsp;consume&nbsp;incoming&nbsp;messages&nbsp;on&nbsp;the&nbsp;channel&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;...&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:gray&quot;&gt;//&nbsp;How&nbsp;do&nbsp;we&nbsp;handle&nbsp;that&nbsp;the&nbsp;connection&nbsp;dies?&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;}&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent;color:rgb(0,0,0)&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
In&nbsp;the&nbsp;real&nbsp;world&nbsp;we&nbsp;have&nbsp;several&nbsp;hundreds&nbsp;of&nbsp;consumers.&nbsp;So&nbsp;what&nbsp;happens&nbsp;if&nbsp;the&nbsp;connection&nbsp;dies?&nbsp;In&nbsp;the&nbsp;above&nbsp;example&nbsp;Consumer1&nbsp;can&nbsp;not&nbsp;recover,&nbsp;when&nbsp;the&nbsp;connection&nbsp;closes,&nbsp;the&nbsp;Channel&nbsp;also&nbsp;closes,&nbsp;a&nbsp;state&nbsp;from&nbsp;which&nbsp;we&nbsp;can&nbsp;not&nbsp;recover.&nbsp;So&nbsp;lets&nbsp;look&nbsp;at&nbsp;some&nbsp;ways&nbsp;to&nbsp;solve&nbsp;this:&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Solution&nbsp;A)&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Let&nbsp;every&nbsp;consumer&nbsp;have&nbsp;their&nbsp;own&nbsp;connection&nbsp;and&nbsp;register&nbsp;the&nbsp;events&nbsp;that&nbsp;triggers&nbsp;when&nbsp;the&nbsp;connection&nbsp;dies&nbsp;and&nbsp;then&nbsp;handle&nbsp;reconnecting.&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Pros:&nbsp;It&nbsp;works&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Cons:&lt;/p&gt;&lt;ul&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em&nbsp;30px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);list-style:disc&nbsp;outside&nbsp;none;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
&lt;li&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent&quot;&gt;Since&nbsp;we&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;consumers,&nbsp;we&nbsp;probably&nbsp;do&nbsp;not&nbsp;want&nbsp;that&nbsp;many&nbsp;connections.&lt;/li&gt;&lt;li&nbsp;style=&quot;margin:0px;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:transparent&quot;&gt;<br>
We&nbsp;might&nbsp;possible&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;duplicated&nbsp;code&nbsp;for&nbsp;reconnecting&nbsp;to&nbsp;rabbit&nbsp;and&nbsp;handle&nbsp;reconnecting&lt;/li&gt;&lt;/ul&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Solution&nbsp;B)&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Have&nbsp;each&nbsp;consumer&nbsp;use&nbsp;the&nbsp;same&nbsp;connection&nbsp;and&nbsp;subscribe&nbsp;to&nbsp;its&nbsp;connection&nbsp;failure&nbsp;events.&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Pros:&nbsp;Less&nbsp;connections&nbsp;than&nbsp;in&nbsp;Solution&nbsp;A&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Cons:&nbsp;Since&nbsp;the&nbsp;connection&nbsp;is&nbsp;closed&nbsp;we&nbsp;need&nbsp;to&nbsp;reopen/replace&nbsp;it.&nbsp;The&nbsp;java&nbsp;client&nbsp;library&nbsp;doesn&amp;#39;t&nbsp;seem&nbsp;to&nbsp;provide&nbsp;a&nbsp;way&nbsp;to&nbsp;reopen&nbsp;the&nbsp;connection,&nbsp;so&nbsp;we&nbsp;would&nbsp;have&nbsp;to&nbsp;replace&nbsp;it&nbsp;with&nbsp;a&nbsp;new&nbsp;connection&nbsp;and&nbsp;then&nbsp;somehow&nbsp;notify&nbsp;all&nbsp;the&nbsp;consumers&nbsp;about&nbsp;this&nbsp;new&nbsp;connection&nbsp;and&nbsp;they&nbsp;would&nbsp;have&nbsp;to&nbsp;recreate&nbsp;the&nbsp;channels&nbsp;and&nbsp;the&nbsp;consumers.&nbsp;Once&nbsp;again,&nbsp;a&nbsp;lot&nbsp;of&nbsp;logic&nbsp;that&nbsp;i&nbsp;don&amp;#39;t&nbsp;want&nbsp;to&nbsp;see&nbsp;in&nbsp;the&nbsp;consumer&nbsp;ends&nbsp;up&nbsp;there.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Solution&nbsp;C)&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Wrap&nbsp;Connection&nbsp;and&nbsp;Channel&nbsp;classes&nbsp;is&nbsp;classes&nbsp;that&nbsp;handle&nbsp;the&nbsp;re-connection&nbsp;logic,&nbsp;the&nbsp;consumer&nbsp;only&nbsp;needs&nbsp;to&nbsp;know&nbsp;about&nbsp;the&nbsp;WrappedChannel&nbsp;class.&nbsp;On&nbsp;a&nbsp;connection&nbsp;failure&nbsp;the&nbsp;WrappedConnection&nbsp;with&nbsp;deal&nbsp;with&nbsp;re-establishing&nbsp;the&nbsp;connection&nbsp;and&nbsp;once&nbsp;connected&nbsp;the&nbsp;WrappedConnection&nbsp;will&nbsp;automatically&nbsp;create&nbsp;new&nbsp;Channels&nbsp;and&nbsp;register&nbsp;consumers.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Pros:&nbsp;It&nbsp;work&nbsp;-&nbsp;this&nbsp;is&nbsp;actually&nbsp;the&nbsp;solution&nbsp;we&nbsp;are&nbsp;using&nbsp;today.&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Cons:&nbsp;It&nbsp;feels&nbsp;like&nbsp;a&nbsp;hack,&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;something&nbsp;that&nbsp;should&nbsp;be&nbsp;handled&nbsp;more&nbsp;elegantly&nbsp;by&nbsp;the&nbsp;underlying&nbsp;library.&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Maybe&nbsp;there&nbsp;is&nbsp;a&nbsp;much&nbsp;better&nbsp;way?&nbsp;The&nbsp;API&nbsp;documentation&nbsp;does&nbsp;not&nbsp;talk&nbsp;that&nbsp;much&nbsp;about&nbsp;recovering&nbsp;from&nbsp;a&nbsp;faulty&nbsp;connection.&nbsp;Any&nbsp;input&nbsp;is&nbsp;appreciated&nbsp;:)&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Thanks,&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px&nbsp;none;font-size:14px;vertical-align:baseline;background-color:rgb(255,255,255);clear:both;color:rgb(0,0,0);font-family:Arial,&amp;#39;Liberation&nbsp;Sans&amp;#39;,&amp;#39;DejaVu&nbsp;Sans&amp;#39;,sans-serif;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:18px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
Peter&lt;br&gt;&lt;/p&gt;&lt;/div&gt;<br>

</tt>
