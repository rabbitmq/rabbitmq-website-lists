<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;p&nbsp;style=&quot;margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:0in;line-height:13.5pt;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Hi,&lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;style=&quot;margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:0in;line-height:13.5pt;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;I&nbsp;am&nbsp;using&nbsp;Rabbit&nbsp;MQ&nbsp;in&nbsp;C#.&nbsp;This&nbsp;is&nbsp;my&nbsp;scenario&lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-left:22.5pt;line-height:13.5pt;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;&lt;span&gt;1.&lt;span&nbsp;style=&quot;font:7.0pt&nbsp;&amp;quot;Times&nbsp;New&nbsp;Roman&amp;quot;&quot;&gt;              <br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;A&nbsp;separate&nbsp;process&nbsp;publishes&nbsp;messages&nbsp;to&nbsp;the&nbsp;queue&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-left:22.5pt;line-height:13.5pt;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;&lt;span&gt;2.&lt;span&nbsp;style=&quot;font:7.0pt&nbsp;&amp;quot;Times&nbsp;New&nbsp;Roman&amp;quot;&quot;&gt;              <br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Client&nbsp;has&nbsp;to&nbsp;read&nbsp;set&nbsp;of&nbsp;N&nbsp;messages&nbsp;from&nbsp;queue&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-left:22.5pt;line-height:13.5pt;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;&lt;span&gt;3.&lt;span&nbsp;style=&quot;font:7.0pt&nbsp;&amp;quot;Times&nbsp;New&nbsp;Roman&amp;quot;&quot;&gt;              <br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Process&nbsp;the&nbsp;N&nbsp;messages&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-left:22.5pt;line-height:13.5pt;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;&lt;span&gt;4.&lt;span&nbsp;style=&quot;font:7.0pt&nbsp;&amp;quot;Times&nbsp;New&nbsp;Roman&amp;quot;&quot;&gt;              <br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Acknowledge&nbsp;the&nbsp;N&nbsp;messages&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-left:22.5pt;line-height:13.5pt;vertical-align:baseline;border-style:initial;border-color:initial;word-wrap:break-word;background-repeat:initial&nbsp;initial&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;&lt;span&gt;5.&lt;span&nbsp;style=&quot;font:7.0pt&nbsp;&amp;quot;Times&nbsp;New&nbsp;Roman&amp;quot;&quot;&gt;              <br>
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Repeat&nbsp;steps&nbsp;2&nbsp;to&nbsp;4&nbsp;continuously&nbsp;to&nbsp;process&nbsp;all&nbsp;sets&nbsp;of&nbsp;messages&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-left:4.5pt;line-height:13.5pt;vertical-align:baseline;border-style:initial;border-color:initial;word-wrap:break-word;background-repeat:initial&nbsp;initial&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Under&nbsp;the&nbsp;same&nbsp;channel,&nbsp;I&nbsp;receive&nbsp;the&nbsp;messages<br>
and&nbsp;then&nbsp;process&nbsp;them&nbsp;and&nbsp;then&nbsp;acknowledge&nbsp;them.&nbsp;The&nbsp;server&nbsp;process&nbsp;keeps<br>
publishing&nbsp;messages.&nbsp;The&nbsp;problem&nbsp;I&nbsp;am&nbsp;facing&nbsp;is,&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;get&nbsp;next&nbsp;set&nbsp;of<br>
messages,&nbsp;they&nbsp;do&nbsp;not&nbsp;come&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;it&nbsp;was&nbsp;published&nbsp;by&nbsp;the<br>
publishing&nbsp;process.&nbsp;The&nbsp;messages&nbsp;come&nbsp;in&nbsp;a&nbsp;random&nbsp;order.&nbsp;Only&nbsp;the&nbsp;first&nbsp;set&nbsp;of<br>
messages&nbsp;comes&nbsp;in&nbsp;the&nbsp;correct&nbsp;order.&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:0in;line-height:13.5pt;vertical-align:baseline;border-style:initial;border-color:initial;word-wrap:break-word;background-repeat:initial&nbsp;initial&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Does&nbsp;any&nbsp;one&nbsp;what&nbsp;is&nbsp;going&nbsp;wrong&nbsp;here?&nbsp;Is&nbsp;creating&nbsp;a&nbsp;new<br>
channel&nbsp;to&nbsp;access&nbsp;the&nbsp;next&nbsp;set&nbsp;of&nbsp;messages&nbsp;not&nbsp;right?&nbsp;Or&nbsp;is&nbsp;there&nbsp;a&nbsp;problem<br>
caused&nbsp;because&nbsp;of&nbsp;acknowledging&nbsp;multiple&nbsp;messages?&nbsp;Please&nbsp;help&nbsp;me&nbsp;understand<br>
why&nbsp;this&nbsp;does&nbsp;not&nbsp;work&nbsp;correctly.&nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;style=&quot;margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:0in;line-height:13.5pt;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial;color:black&quot;&gt;Below&nbsp;is&nbsp;the&nbsp;sample&nbsp;code:&lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-indent:.5in;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;;color:blue&quot;&gt;&lt;/span&gt;while&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&nbsp;(&lt;span&nbsp;style=&quot;color:blue&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;           &nbsp;&lt;/span&gt;{&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/span&gt;&lt;span&nbsp;style=&quot;color:blue&quot;&gt;using&lt;/span&gt;<br>
(&lt;span&nbsp;style=&quot;color:#2B91AF&quot;&gt;IModel&lt;/span&gt;&nbsp;getChannel&nbsp;=<br>
MQConnection.CreateModel())&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;               &nbsp;&lt;/span&gt;{&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/span&gt;&lt;span&nbsp;style=&quot;color:green&quot;&gt;//<br>
Create&nbsp;a&nbsp;consumer&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;                   &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#2B91AF&quot;&gt;QueueingBasicConsumer&lt;/span&gt;<br>
consumer&nbsp;=&nbsp;CreateQueueConsumer(getChannel,&nbsp;exchangeName,&nbsp;queueName); &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;                   &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:blue&quot;&gt;int&lt;/span&gt;<br>
numberOfMessages&nbsp;=&nbsp;100;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;                   &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:green&quot;&gt;//<br>
Next&nbsp;Recieve&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&nbsp;style=&quot;color:green&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,&nbsp;0,&nbsp;0)&quot;&gt;&lt;span&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/span&gt;&lt;span&nbsp;style=&quot;color:#2B91AF&quot;&gt;List&lt;/span&gt;&amp;lt;&lt;span&nbsp;style=&quot;color:blue&quot;&gt;object&lt;/span&gt;&amp;gt;&nbsp;msgSet&nbsp;=&nbsp;GetNextSetOfMessages(consumer,<br>
getChannel,&nbsp;exchangeName,&nbsp;queueName,&nbsp;numberOfMessages,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;span&nbsp;style=&quot;color:blue&quot;&gt;out&lt;/span&gt;<br>
finalDeliverytag); &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;                   &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:green&quot;&gt;//<br>
Do&nbsp;some&nbsp;processing &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;                   &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:green&quot;&gt;//Acknowledge<br>
finished&nbsp;messages&nbsp;by&nbsp;passing&nbsp;in&nbsp;the&nbsp;delivery&nbsp;tag.&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&nbsp;style=&quot;color:green&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,&nbsp;0,&nbsp;0)&quot;&gt;&lt;span&gt;  &nbsp; &nbsp; &nbsp; &lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&nbsp;style=&quot;color:green&quot;&gt;//&nbsp;calls<br>
the&nbsp;method&nbsp;BasicAck&nbsp;with&nbsp;multiple&nbsp;param=true&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;                   &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:blue&quot;&gt;if&lt;/span&gt;<br>
(finalDeliverytag&nbsp;&amp;gt;&nbsp;0)&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/span&gt;AckFinishedMessages(exchangeName,&nbsp;queueName,&nbsp;finalDeliverytag,<br>
getChannel);&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&amp;#39;Courier&nbsp;New&amp;#39;;font-size:13px&quot;&gt;&lt;span&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/span&gt;&lt;span&nbsp;style=&quot;color:blue&quot;&gt;if&lt;/span&gt;<br>
(finalDeliverytag&nbsp;==&nbsp;0)&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;                       &nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:blue&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;text-autospace:none&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;               &nbsp;&lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;<br>
<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt;&lt;span&gt;           &nbsp;&lt;/span&gt;}&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.0pt;font-family:&amp;quot;Courier&nbsp;New&amp;quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial&quot;&gt;Thanks&nbsp;for&nbsp;your&nbsp;help&nbsp;in&nbsp;advance! &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial&quot;&gt;Srijanani&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10.5pt;font-family:Arial&quot;&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;/div&gt;&lt;br&gt;<br>

</tt>
