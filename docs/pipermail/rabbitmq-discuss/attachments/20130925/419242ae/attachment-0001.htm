<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;Jason.&nbsp; The&nbsp;cookies&nbsp;are&nbsp;the&nbsp;same.&nbsp; Running&nbsp;anything&nbsp;from&nbsp;rabbitmqctl&nbsp;to&nbsp;the&nbsp;remote&nbsp;host&nbsp;fails,&nbsp;unfortunately.&nbsp; The&nbsp;list_queues&nbsp;call&nbsp;fails&nbsp;to&nbsp;connect,&nbsp;the&nbsp;same&nbsp;as&nbsp;join_cluster.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;I&nbsp;indicated,&nbsp;the&nbsp;telnets&nbsp;all&nbsp;work&nbsp;just&nbsp;fine,&nbsp;so&nbsp;I&amp;#39;m&nbsp;stuck&nbsp;for&nbsp;what&nbsp;to&nbsp;diagnose&nbsp;next.&nbsp; Any&nbsp;ideas&nbsp;would&nbsp;be&nbsp;great.&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;25&nbsp;September&nbsp;2013&nbsp;09:57,&nbsp;Jason&nbsp;McIntosh&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mcintoshj@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mcintoshj@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Check&nbsp;your&nbsp;erlang&nbsp;cookie&nbsp;on&nbsp;both&nbsp;servers&nbsp;to&nbsp;make&nbsp;sure&nbsp;it&nbsp;matches&nbsp;I&nbsp;think&nbsp;it&amp;#39;s&nbsp;in&nbsp;-&nbsp;/var/lib/rabbitmq/&nbsp;-&nbsp;then&nbsp;you&nbsp;can&nbsp;use&nbsp;rabbitmqctl&nbsp;from&nbsp;one&nbsp;machine&nbsp;and&nbsp;see&nbsp;if&nbsp;you&nbsp;can&nbsp;connect&nbsp;to&nbsp;another&nbsp;to&nbsp;list&nbsp;queues.&nbsp; I&nbsp;THINK&nbsp;that&amp;#39;s&nbsp;rabbitmqctl&nbsp;-n&nbsp;&amp;lt;servernode&amp;gt;&nbsp;list_queues&nbsp;for&nbsp;example.&nbsp; If&nbsp;both&nbsp;servers&nbsp;can&nbsp;talk&nbsp;to&nbsp;each&nbsp;other&nbsp;then&nbsp;it&nbsp;should&nbsp;be&nbsp;rabbitmqctl&nbsp;stop_app,&nbsp;join_cluster,&nbsp;start_app.&lt;br&gt;<br>
<br>
&lt;br&gt;Jason&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Sep&nbsp;25,&nbsp;2013&nbsp;at&nbsp;8:50&nbsp;AM,&nbsp;Derek&nbsp;Wyatt&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:derek@derekwyatt.org&quot;&nbsp;target=&quot;_blank&quot;&gt;derek@derekwyatt.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;ve&nbsp;seen&nbsp;a&nbsp;number&nbsp;of&nbsp;people&nbsp;failing&nbsp;to&nbsp;get&nbsp;clustering&nbsp;running&nbsp;and,&nbsp;unfortunately,&nbsp;I&nbsp;can&amp;#39;t&nbsp;get&nbsp;it&nbsp;going&nbsp;either.&nbsp; Here&amp;#39;s&nbsp;the&nbsp;summary&nbsp;of&nbsp;what&nbsp;I&amp;#39;ve&nbsp;got:&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;div&gt;&lt;ul&gt;<br>
&lt;li&gt;Two&nbsp;nodes&nbsp;-&nbsp;RMQ1&nbsp;and&nbsp;RMQ2&lt;/li&gt;&lt;li&gt;I&nbsp;can&nbsp;ping&nbsp;RMQ1&nbsp;from&nbsp;RMQ2,&nbsp;and&nbsp;vice&nbsp;versa&lt;/li&gt;&lt;li&gt;I&nbsp;can&nbsp;telnet&nbsp;from&nbsp;RMQ1&nbsp;to&nbsp;RMQ2:epmd,&nbsp;and&nbsp;vice&nbsp;versa&lt;/li&gt;&lt;li&gt;I&nbsp;can&nbsp;telnet&nbsp;from&nbsp;RMQ1&nbsp;to&nbsp;RMQ2:amqp,&nbsp;and&nbsp;vice&nbsp;versa&lt;/li&gt;&lt;li&gt;The&nbsp;cookie&nbsp;file&nbsp;is&nbsp;identical,&nbsp;as&nbsp;is&nbsp;clear&nbsp;from&nbsp;the&nbsp;startup&nbsp;INFO&lt;/li&gt;<br>
<br>
<br>
&lt;/ul&gt;&lt;div&gt;My&nbsp;goal&nbsp;is&nbsp;to&nbsp;have&nbsp;RMQ2&nbsp;join&nbsp;RMQ1&nbsp;in&nbsp;a&nbsp;cluster.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;servers&nbsp;are&nbsp;started&nbsp;using&nbsp;the&nbsp;init&nbsp;script&nbsp;in&nbsp;Ubuntu&nbsp;(i.e.&nbsp;service&nbsp;rabbitmq-server&nbsp;start).&nbsp; This&nbsp;is&nbsp;different&nbsp;than&nbsp;the&nbsp;script&nbsp;at &lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/clustering.html&lt;/a&gt;,&nbsp;which&nbsp;says&nbsp;to&nbsp;start&nbsp;with&nbsp;&amp;quot;rabbitmq-server&nbsp;-detached&amp;quot;.&nbsp; I&amp;#39;ve&nbsp;tried&nbsp;that&nbsp;and&nbsp;it&nbsp;doesn&amp;#39;t&nbsp;seem&nbsp;to&nbsp;make&nbsp;any&nbsp;difference&nbsp;so&nbsp;I&nbsp;always&nbsp;use&nbsp;the&nbsp;init&nbsp;script&nbsp;instead.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So,&nbsp;the&nbsp;script&nbsp;says&nbsp;to&nbsp;stop&nbsp;the&nbsp;RMQ2&nbsp;server&nbsp;and&nbsp;then&nbsp;join&nbsp;the&nbsp;cluster.&nbsp; The&nbsp;following&nbsp;transcript&nbsp;shows&nbsp;how&nbsp;well&nbsp;all&nbsp;this&nbsp;goes:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;02:~$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;stop_app&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Stopping&nbsp;node&nbsp;&amp;#39;rabbit@RMQ2&amp;#39;&nbsp;...&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;...done.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;02:~$&nbsp;sudo&nbsp;rabbitmqctl&nbsp;join_cluster&nbsp;--ram&nbsp;rabbit@RMQ1&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Clustering&nbsp;node&nbsp;&amp;#39;rabbit@RMQ2&amp;#39;&nbsp;with&nbsp;&amp;#39;rabbit@RMQ1&amp;#39;&nbsp;...&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Error:&nbsp;{cannot_discover_cluster,&amp;quot;The&nbsp;nodes&nbsp;provided&nbsp;are&nbsp;either&nbsp;offline&nbsp;or&nbsp;not&nbsp;running&amp;quot;}&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;However,&nbsp;as&nbsp;I&nbsp;said&nbsp;above,&nbsp;telnetting&nbsp;to&nbsp;the&nbsp;ports&nbsp;works&nbsp;just&nbsp;fine:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;02:~$&nbsp;telnet&nbsp;RMQ1&nbsp;epmd&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Trying&nbsp;&amp;lt;ip&nbsp;address&amp;gt;...&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Connected&nbsp;to&nbsp;RMQ1&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Escape&nbsp;character&nbsp;is&nbsp;&amp;#39;^]&amp;#39;.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;booger!&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Connection&nbsp;closed&nbsp;by&nbsp;foreign&nbsp;host.&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;02:~$&nbsp;telnet&nbsp;RMQ1&nbsp;amqp&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Trying&nbsp;&amp;lt;ip&nbsp;address&amp;gt;...&lt;/font&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Connected&nbsp;to&nbsp;RMQ1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;Escape&nbsp;character&nbsp;is&nbsp;&amp;#39;^]&amp;#39;.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;booger!&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,&nbsp;monospace&quot;&gt;AMQP&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Connection&nbsp;closed&nbsp;by&nbsp;foreign&nbsp;host.&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;m&nbsp;stuck&nbsp;for&nbsp;what&nbsp;else&nbsp;to&nbsp;test.&nbsp; Does&nbsp;anyone&nbsp;know&nbsp;how&nbsp;to&nbsp;troubleshoot&nbsp;this&nbsp;thing&nbsp;further?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Derek&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;Jason&nbsp;McIntosh&lt;br&gt;&lt;a&nbsp;href=&quot;http://mcintosh.poetshome.com/blog/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://mcintosh.poetshome.com/blog/&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;tel:573-424-7612&quot;&nbsp;value=&quot;+15734247612&quot;&nbsp;target=&quot;_blank&quot;&gt;573-424-7612&lt;/a&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
