<tt>
I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;track&nbsp;down&nbsp;a&nbsp;fun&nbsp;one.&nbsp;This&nbsp;is&nbsp;with&nbsp;2.8.6.&nbsp;(We&amp;#39;re&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;moving&nbsp;these&nbsp;guys&nbsp;to&nbsp;2.8.7,&nbsp;but&nbsp;want&nbsp;to&nbsp;understand&nbsp;what&amp;#39;s&nbsp;happening&nbsp;first.)&lt;br&gt;&lt;br&gt;We&nbsp;have&nbsp;two&nbsp;nodes,&nbsp;mq1&nbsp;and&nbsp;mq2.&nbsp;They&nbsp;simultaneously&nbsp;lose&nbsp;communication&nbsp;with&nbsp;each&nbsp;other, &nbsp;breaking&nbsp;the&nbsp;cluster,&nbsp;although&nbsp;they&nbsp;still&nbsp;continue&nbsp;to&nbsp;function&nbsp;independently.&nbsp;That&nbsp;is,&nbsp;each&nbsp;one&nbsp;things&nbsp;the&nbsp;other&nbsp;is&nbsp;down.&lt;br&gt;<br>
&lt;br&gt;Now&nbsp;the&nbsp;obvious&nbsp;solution&nbsp;is&nbsp;some&nbsp;sort&nbsp;of&nbsp;network&nbsp;partition.&nbsp;However,&nbsp;in&nbsp;all&nbsp;of&nbsp;our&nbsp;extensive&nbsp;logs&nbsp;and&nbsp;by&nbsp;pouring&nbsp;over&nbsp;all&nbsp;sorts&nbsp;of&nbsp;system&nbsp;data,&nbsp;I&nbsp;don&amp;#39;t&nbsp;see&nbsp;any&nbsp;evidence&nbsp;of&nbsp;a&nbsp;a&nbsp;network&nbsp;blip.&nbsp;Not&nbsp;saying&nbsp;it&amp;#39;s&nbsp;not&nbsp;possible,&nbsp;just&nbsp;pretty&nbsp;unlikely.&nbsp;The&nbsp;only&nbsp;thing&nbsp;of&nbsp;note&nbsp;I&nbsp;can&nbsp;think&nbsp;of&nbsp;is&nbsp;that&nbsp;we&nbsp;were&nbsp;in&nbsp;towards&nbsp;the&nbsp;end&nbsp;an&nbsp;&amp;quot;apt-get&nbsp;update&amp;quot;&nbsp;when&nbsp;this&nbsp;happened.&lt;br&gt;<br>
&lt;br&gt;On&nbsp;mq1,&nbsp;the&nbsp;rabbit@mq1.log&nbsp;file&nbsp;is:&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;**&nbsp;Node&nbsp;rabbit@mq2&nbsp;not&nbsp;responding&nbsp;**&lt;br&gt;**&nbsp;Removing&nbsp;(timedout)&nbsp;connection&nbsp;**&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;<br>
webmachine&nbsp;error:&nbsp;path=&amp;quot;/api/overview&amp;quot;&lt;br&gt;{error,&lt;br&gt;   &nbsp;{error,function_clause,&lt;br&gt;       &nbsp;[{rabbit_mgmt_wm_overview,&amp;#39;-contexts/1-lc$^0/1-0-&amp;#39;,&lt;br&gt;            &nbsp;[{badrpc,nodedown},rabbit@mq2],&lt;br&gt;            &nbsp;[]},&lt;br&gt;<br>
        &nbsp;{rabbit_mgmt_wm_overview,&amp;#39;-rabbit_mochiweb_contexts/0-lc$^0/1-0-&amp;#39;,1,&lt;br&gt;            &nbsp;[]},&lt;br&gt;        &nbsp;{rabbit_mgmt_wm_overview,rabbit_mochiweb_contexts,0,[]},&lt;br&gt;        &nbsp;{rabbit_mgmt_wm_overview,to_json,2,[]},&lt;br&gt;<br>
        &nbsp;{webmachine_resource,resource_call,3,[]},&lt;br&gt;        &nbsp;{webmachine_resource,do,3,[]},&lt;br&gt;        &nbsp;{webmachine_decision_core,resource_call,1,[]},&lt;br&gt;        &nbsp;{webmachine_decision_core,decision,1,[]}]}}&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;<br>
webmachine&nbsp;error:&nbsp;path=&amp;quot;/api/overview&amp;quot;&lt;br&gt;{error,&lt;br&gt;   &nbsp;{error,function_clause,&lt;br&gt;       &nbsp;[{rabbit_mgmt_wm_overview,&amp;#39;-contexts/1-lc$^0/1-0-&amp;#39;,&lt;br&gt;            &nbsp;[{badrpc,nodedown},rabbit@mq2],&lt;br&gt;            &nbsp;[]},&lt;br&gt;<br>
        &nbsp;{rabbit_mgmt_wm_overview,&amp;#39;-rabbit_mochiweb_contexts/0-lc$^0/1-0-&amp;#39;,1,&lt;br&gt;            &nbsp;[]},&lt;br&gt;        &nbsp;{rabbit_mgmt_wm_overview,rabbit_mochiweb_contexts,0,[]},&lt;br&gt;        &nbsp;{rabbit_mgmt_wm_overview,to_json,2,[]},&lt;br&gt;<br>
        &nbsp;{webmachine_resource,resource_call,3,[]},&lt;br&gt;        &nbsp;{webmachine_resource,do,3,[]},&lt;br&gt;        &nbsp;{webmachine_decision_core,resource_call,1,[]},&lt;br&gt;        &nbsp;{webmachine_decision_core,decision,1,[]}]}}&lt;br&gt;&amp;lt;&amp;lt;&nbsp;several&nbsp;more&nbsp;of&nbsp;these&nbsp;&amp;gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;The&nbsp;rabbit@mq1-sasl.log&nbsp;has&nbsp;one&nbsp;of&nbsp;these&nbsp;per&nbsp;queue:&lt;br&gt;=CRASH&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt; &nbsp;crasher:&lt;br&gt;   &nbsp;initial&nbsp;call:&nbsp;gen:init_it/6&lt;br&gt;   &nbsp;pid:&nbsp;&amp;lt;0.260.0&amp;gt;&lt;br&gt;   &nbsp;registered_name:&nbsp;[]&lt;br&gt;   &nbsp;exception&nbsp;exit:&nbsp;{function_clause,&lt;br&gt;<br>
                    &nbsp;[{gm,handle_info,&lt;br&gt;                      &nbsp;[{mnesia_locker,rabbit@mq2,granted},&lt;br&gt;                       &nbsp;{state,&lt;br&gt;                        &nbsp;{3,&amp;lt;0.260.0&amp;gt;},&lt;br&gt;                        &nbsp;{{3,&amp;lt;0.260.0&amp;gt;},undefined},&lt;br&gt;<br>
                        &nbsp;{{3,&amp;lt;0.260.0&amp;gt;},undefined},&lt;br&gt;                        &nbsp;{resource,&amp;lt;&amp;lt;&amp;quot;/&amp;quot;&amp;gt;&amp;gt;,queue,&amp;lt;&amp;lt;&amp;quot;charon&amp;quot;&amp;gt;&amp;gt;},&lt;br&gt;                        &nbsp;rabbit_mirror_queue_coordinator,&lt;br&gt;<br>
                        &nbsp;{12,&lt;br&gt;                         &nbsp;[{{3,&amp;lt;0.260.0&amp;gt;},&lt;br&gt;                           &nbsp;{view_member,&lt;br&gt;                            &nbsp;{3,&amp;lt;0.260.0&amp;gt;},&lt;br&gt;                            &nbsp;[],&lt;br&gt;                            &nbsp;{3,&amp;lt;0.260.0&amp;gt;},&lt;br&gt;<br>
                            &nbsp;{3,&amp;lt;0.260.0&amp;gt;}}}]},&lt;br&gt;                        &nbsp;972,[],&lt;br&gt;                        &nbsp;[&amp;lt;0.1073.0&amp;gt;],&lt;br&gt;                        &nbsp;{[],[]},&lt;br&gt;                        &nbsp;[],undefined}],&lt;br&gt;<br>
                      &nbsp;[]},&lt;br&gt;                     &nbsp;{gen_server2,handle_msg,2,[]},&lt;br&gt;                     &nbsp;{proc_lib,wake_up,3,&lt;br&gt;                      &nbsp;[{file,&amp;quot;proc_lib.erl&amp;quot;},{line,237}]}]}&lt;br&gt;     &nbsp;in&nbsp;function &nbsp;gen_server2:terminate/3&nbsp;&lt;br&gt;<br>
   &nbsp;ancestors:&nbsp;[&amp;lt;0.259.0&amp;gt;,rabbit_mirror_queue_slave_sup,rabbit_sup,&lt;br&gt;                 &nbsp;&amp;lt;0.145.0&amp;gt;]&lt;br&gt;   &nbsp;messages:&nbsp;[]&lt;br&gt;   &nbsp;links:&nbsp;[&amp;lt;0.1073.0&amp;gt;]&lt;br&gt;   &nbsp;dictionary:&nbsp;[{random_seed,{986,23084,10363}}]&lt;br&gt;<br>
   &nbsp;trap_exit:&nbsp;false&lt;br&gt;   &nbsp;status:&nbsp;running&lt;br&gt;   &nbsp;heap_size:&nbsp;1597&lt;br&gt;   &nbsp;stack_size:&nbsp;24&lt;br&gt;   &nbsp;reductions:&nbsp;263704&lt;br&gt; &nbsp;neighbours:&lt;br&gt;   &nbsp;neighbour:&nbsp;[{pid,&amp;lt;0.1073.0&amp;gt;},&lt;br&gt;                 &nbsp;{registered_name,[]},&lt;br&gt;<br>
                 &nbsp;{initial_call,{gen,init_it,&lt;br&gt;                                    &nbsp;[&amp;#39;Argument__1&amp;#39;,&amp;#39;Argument__2&amp;#39;,&lt;br&gt;                                     &nbsp;&amp;#39;Argument__3&amp;#39;,&amp;#39;Argument__4&amp;#39;,&lt;br&gt;<br>
                                     &nbsp;&amp;#39;Argument__5&amp;#39;,&amp;#39;Argument__6&amp;#39;]}},&lt;br&gt;                 &nbsp;{current_function,{gen,do_call,4}},&lt;br&gt;                 &nbsp;{ancestors,[&amp;lt;0.259.0&amp;gt;,rabbit_mirror_queue_slave_sup,&lt;br&gt;<br>
                             &nbsp;rabbit_sup,&amp;lt;0.145.0&amp;gt;]},&lt;br&gt;                 &nbsp;{messages,[]},&lt;br&gt;                 &nbsp;{links,[&amp;lt;0.259.0&amp;gt;,&amp;lt;0.260.0&amp;gt;]},&lt;br&gt;                 &nbsp;{dictionary,[]},&lt;br&gt;                 &nbsp;{trap_exit,false},&lt;br&gt;<br>
                 &nbsp;{status,waiting},&lt;br&gt;                 &nbsp;{heap_size,377},&lt;br&gt;                 &nbsp;{stack_size,27},&lt;br&gt;                 &nbsp;{reductions,23907}]&lt;br&gt;&lt;br&gt;Meanwhile,&nbsp;on&nbsp;mq2,&nbsp;the&nbsp;rabbit@mq2.log&nbsp;file&nbsp;is:&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;<br>
rabbit&nbsp;on&nbsp;node&nbsp;rabbit@mq1&nbsp;down&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;Mnesia(rabbit@mq2):&nbsp;**&nbsp;ERROR&nbsp;**&nbsp;mnesia_event&nbsp;got&nbsp;{inconsistent_database,&nbsp;running_partitioned_network,&nbsp;rabbit@mq1}&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;<br>
Mirrored-queue&nbsp;(queue&nbsp;&amp;#39;cmcmd&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;):&nbsp;Slave&nbsp;&amp;lt;rabbit@mq2.2.260.0&amp;gt;&nbsp;saw&nbsp;deaths&nbsp;of&nbsp;mirrors&nbsp;&amp;lt;rabbit@mq1.1.261.0&amp;gt;&nbsp;&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;Mirrored-queue&nbsp;(queue&nbsp;&amp;#39;cmcmd&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;):&nbsp;Promoting&nbsp;slave&nbsp;&amp;lt;rabbit@mq2.2.260.0&amp;gt;&nbsp;to&nbsp;master&lt;br&gt;<br>
&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;Mirrored-queue&nbsp;(queue&nbsp;&amp;#39;charon&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;):&nbsp;Slave&nbsp;&amp;lt;rabbit@mq2.2.258.0&amp;gt;&nbsp;saw&nbsp;deaths&nbsp;of&nbsp;mirrors&nbsp;&amp;lt;rabbit@mq1.1.259.0&amp;gt;&nbsp;&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;<br>
Mirrored-queue&nbsp;(queue&nbsp;&amp;#39;charon&amp;#39;&nbsp;in&nbsp;vhost&nbsp;&amp;#39;/&amp;#39;):&nbsp;Promoting&nbsp;slave&nbsp;&amp;lt;rabbit@mq2.2.258.0&amp;gt;&nbsp;to&nbsp;master&lt;br&gt;&lt;br&gt;=INFO&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;   &nbsp;application:&nbsp;rabbitmq_management&lt;br&gt;   &nbsp;exited:&nbsp;shutdown&lt;br&gt;<br>
   &nbsp;type:&nbsp;permanent&lt;br&gt;&lt;br&gt;and&nbsp;the&nbsp;rabbit@mq2-sasl.log&nbsp;file&nbsp;has:&lt;br&gt;&lt;br&gt;=SUPERVISOR&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;    &nbsp;Supervisor:&nbsp;{local,rabbit_mgmt_sup}&lt;br&gt;    &nbsp;Context:   &nbsp;child_terminated&lt;br&gt;    &nbsp;Reason:    &nbsp;{shutdown,&lt;br&gt;<br>
                    &nbsp;[{killed,&lt;br&gt;                         &nbsp;{child,undefined,rabbit_mgmt_db,&lt;br&gt;                             &nbsp;{rabbit_mgmt_db,start_link,[]},&lt;br&gt;                             &nbsp;permanent,4294967295,worker,&lt;br&gt;<br>
                             &nbsp;[rabbit_mgmt_db]}}]}&lt;br&gt;    &nbsp;Offender:  &nbsp;[{pid,&amp;lt;0.303.0&amp;gt;},&lt;br&gt;                 &nbsp;{name,mirroring},&lt;br&gt;                 &nbsp;{mfa,&lt;br&gt;                     &nbsp;{mirrored_supervisor,start_internal,&lt;br&gt;<br>
                         &nbsp;[rabbit_mgmt_sup,&lt;br&gt;                          &nbsp;[{rabbit_mgmt_db,&lt;br&gt;                               &nbsp;{rabbit_mgmt_db,start_link,[]},&lt;br&gt;                               &nbsp;permanent,4294967295,worker,&lt;br&gt;<br>
                               &nbsp;[rabbit_mgmt_db]}]]}},&lt;br&gt;                 &nbsp;{restart_type,permanent},&lt;br&gt;                 &nbsp;{shutdown,4294967295},&lt;br&gt;                 &nbsp;{child_type,worker}]&lt;br&gt;&lt;br&gt;&lt;br&gt;=SUPERVISOR&nbsp;REPORT====&nbsp;22-Oct-2012::09:40:28&nbsp;===&lt;br&gt;<br>
    &nbsp;Supervisor:&nbsp;{local,rabbit_mgmt_sup}&lt;br&gt;    &nbsp;Context:   &nbsp;shutdown&lt;br&gt;    &nbsp;Reason:    &nbsp;reached_max_restart_intensity&lt;br&gt;    &nbsp;Offender:  &nbsp;[{pid,&amp;lt;0.303.0&amp;gt;},&lt;br&gt;                 &nbsp;{name,mirroring},&lt;br&gt;                 &nbsp;{mfa,&lt;br&gt;<br>
                     &nbsp;{mirrored_supervisor,start_internal,&lt;br&gt;                         &nbsp;[rabbit_mgmt_sup,&lt;br&gt;                          &nbsp;[{rabbit_mgmt_db,&lt;br&gt;                               &nbsp;{rabbit_mgmt_db,start_link,[]},&lt;br&gt;<br>
                               &nbsp;permanent,4294967295,worker,&lt;br&gt;                               &nbsp;[rabbit_mgmt_db]}]]}},&lt;br&gt;                 &nbsp;{restart_type,permanent},&lt;br&gt;                 &nbsp;{shutdown,4294967295},&lt;br&gt;                 &nbsp;{child_type,worker}]&lt;br&gt;
</tt>
