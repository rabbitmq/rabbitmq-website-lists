<tt>
I've&nbsp;been&nbsp;tasked&nbsp;with&nbsp;monitoring&nbsp;a&nbsp;queue&nbsp;used&nbsp;by&nbsp;two&nbsp;applications,&nbsp;which&nbsp;are&nbsp;considered&nbsp;black&nbsp;boxes&nbsp;from&nbsp;my&nbsp;point&nbsp;of&nbsp;view&nbsp;(App&nbsp;A&nbsp;puts&nbsp;messages&nbsp;into&nbsp;a&nbsp;queue,&nbsp;App&nbsp;B&nbsp;consumes&nbsp;them;&nbsp;I&nbsp;have&nbsp;no&nbsp;control&nbsp;over&nbsp;the&nbsp;code&nbsp;for&nbsp;either&nbsp;app).&nbsp;I&nbsp;need&nbsp;to&nbsp;measure&nbsp;the&nbsp;rate&nbsp;of&nbsp;messages&nbsp;(messages/second)&nbsp;moving&nbsp;successfully&nbsp;from&nbsp;App&nbsp;A&nbsp;to&nbsp;App&nbsp;B&nbsp;through&nbsp;the&nbsp;queue.&nbsp;We're&nbsp;concerned&nbsp;with&nbsp;both&nbsp;pileups&nbsp;in&nbsp;the&nbsp;queue&nbsp;(producer&nbsp;working&nbsp;normally,&nbsp;consumer&nbsp;halted)&nbsp;and&nbsp;lack&nbsp;of&nbsp;new&nbsp;messages&nbsp;(producer&nbsp;halted).&nbsp;The&nbsp;end&nbsp;result&nbsp;will&nbsp;be&nbsp;a&nbsp;Nagios&nbsp;check&nbsp;plugin,&nbsp;which&nbsp;alerts&nbsp;when&nbsp;messages/second&nbsp;throughput&nbsp;falls&nbsp;below&nbsp;a&nbsp;given&nbsp;level,&nbsp;and&nbsp;also&nbsp;produces&nbsp;performance&nbsp;data&nbsp;for&nbsp;graphing.&lt;br&gt;&lt;br&gt;I've&nbsp;been&nbsp;examining&nbsp;the&nbsp;JSON&nbsp;results&nbsp;from&nbsp;the&nbsp;management&nbsp;API&nbsp;(/api/queues/vhost_name/queue_name),&nbsp;and&nbsp;have&nbsp;come&nbsp;to&nbsp;the&nbsp;following&nbsp;conclusions:&lt;br&gt;1)&nbsp;There&nbsp;are&nbsp;no&nbsp;monotonically&nbsp;increasing&nbsp;counters&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;in&nbsp;to&nbsp;the&nbsp;queue&nbsp;and&nbsp;number&nbsp;of&nbsp;messages&nbsp;out&nbsp;of&nbsp;the&nbsp;queue.&nbsp;Therefore,&nbsp;there's&nbsp;no&nbsp;way&nbsp;for&nbsp;me&nbsp;to&nbsp;figure&nbsp;the&nbsp;rate&nbsp;on&nbsp;an&nbsp;arbitrary&nbsp;time&nbsp;scale.&lt;br&gt;2)&nbsp;The&nbsp;&quot;messages&quot;&nbsp;element&nbsp;in&nbsp;the&nbsp;JSON&nbsp;array&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;currently&nbsp;sitting&nbsp;in&nbsp;the&nbsp;queue,&nbsp;not&nbsp;a&nbsp;counter&nbsp;of&nbsp;the&nbsp;number&nbsp;that&nbsp;have&nbsp;passed&nbsp;through&nbsp;it.&lt;br&gt;3)&nbsp;The&nbsp;API&nbsp;does&nbsp;provide&nbsp;backing_queue_status.avg_ingress_rate&nbsp;and&nbsp;backing_queue_status.avg_egress_rate.&nbsp;Going&nbsp;by&nbsp;Matthew's&nbsp;post&nbsp;to&nbsp;&quot;Monitoring&nbsp;Message&nbsp;Throughput&quot;&nbsp;(http://rabbitmq.1065348.n5.nabble.com/Monitoring-Message-Throughput-td17436.html#a17438)&nbsp;from&nbsp;February,&nbsp;2010,&nbsp;I&nbsp;gather&nbsp;that&nbsp;these&nbsp;values&nbsp;are&nbsp;averaged&nbsp;over&nbsp;approx.&nbsp;10&nbsp;seconds.&nbsp;I'm&nbsp;also&nbsp;assuming&nbsp;that&nbsp;ingress&nbsp;is&nbsp;*every*&nbsp;message&nbsp;into&nbsp;the&nbsp;queue,&nbsp;and&nbsp;egress&nbsp;is...&nbsp;*every*&nbsp;message&nbsp;grabbed&nbsp;from&nbsp;the&nbsp;queue,&nbsp;regardless&nbsp;of&nbsp;ACK?&nbsp;So&nbsp;even&nbsp;if&nbsp;consumers&nbsp;are&nbsp;not&nbsp;acking&nbsp;any&nbsp;messages,&nbsp;this&nbsp;rate&nbsp;will&nbsp;still&nbsp;show&nbsp;them?&nbsp;&lt;br&gt;&lt;br&gt;Are&nbsp;these&nbsp;correct?&lt;br&gt;&lt;br&gt;It&nbsp;would&nbsp;be&nbsp;really&nbsp;helpful&nbsp;if&nbsp;someone&nbsp;could&nbsp;explain&nbsp;exactly&nbsp;what&nbsp;avg_in/egress_rate&nbsp;and&nbsp;avg_ack_in/egress_rate&nbsp;mean.&lt;br&gt;&lt;br&gt;I&nbsp;also&nbsp;found&nbsp;some&nbsp;reference&nbsp;to&nbsp;a&nbsp;Ticket&nbsp;23&nbsp;(though&nbsp;I&nbsp;don't&nbsp;see&nbsp;any&nbsp;links&nbsp;to&nbsp;the&nbsp;RMQ&nbsp;ticketing&nbsp;system)&nbsp;that&nbsp;dealt&nbsp;with&nbsp;monitoring:&lt;br&gt;http://grokbase.com/t/rabbitmq/rabbitmq-discuss/10ag2hejbb/ticket-23-new-comment-monitoring-message-throughput&lt;br&gt;&lt;br&gt;Any&nbsp;guidance&nbsp;would&nbsp;be&nbsp;greatly&nbsp;appreciated.&nbsp;I've&nbsp;been&nbsp;trying&nbsp;to&nbsp;monitor&nbsp;this&nbsp;for&nbsp;over&nbsp;a&nbsp;day&nbsp;now,&nbsp;and&nbsp;can't&nbsp;seem&nbsp;to&nbsp;figure&nbsp;out&nbsp;the&nbsp;best&nbsp;way&nbsp;to&nbsp;do&nbsp;it...&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Jason&nbsp;Antman&lt;br&gt;
</tt>
