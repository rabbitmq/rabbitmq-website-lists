<tt>
﻿&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;STYLE&gt;<br>
BLOCKQUOTE&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px;&nbsp;MARGIN-LEFT:&nbsp;2em<br>
}<br>
OL&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
UL&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
P&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMARGIN-TOP:&nbsp;0px;&nbsp;MARGIN-BOTTOM:&nbsp;0px<br>
}<br>
BODY&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLINE-HEIGHT:&nbsp;1.5;&nbsp;FONT-FAMILY:&nbsp;宋体;&nbsp;COLOR:&nbsp;#000080;&nbsp;FONT-SIZE:&nbsp;10.5pt<br>
}<br>
&lt;/STYLE&gt;<br>
<br>
&lt;META&nbsp;name=GENERATOR&nbsp;content=&quot;MSHTML&nbsp;8.00.7601.17874&quot;&gt;&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;style=&quot;MARGIN:&nbsp;10px&quot;&gt;<br>
&lt;DIV&gt;Hi&nbsp;Matthias,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Now&nbsp;I&nbsp;am&nbsp;clear&nbsp;about&nbsp;it.&nbsp;So&nbsp;for&nbsp;my&nbsp;scenario,&nbsp;using&nbsp;the&nbsp;token&nbsp;queue&nbsp;is&nbsp;the&nbsp;<br>
better&nbsp;solution.&nbsp;I&nbsp;have&nbsp;tried&nbsp;it&nbsp;and&nbsp;it&nbsp;works&nbsp;fine.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Best&nbsp;Regards&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;HR&nbsp;style=&quot;WIDTH:&nbsp;210px;&nbsp;HEIGHT:&nbsp;1px&quot;&nbsp;align=left&nbsp;color=#b5c4df&nbsp;SIZE=1&gt;<br>
<br>
&lt;DIV&gt;&lt;SPAN&gt;johnson&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-BOTTOM:&nbsp;medium&nbsp;none;&nbsp;BORDER-LEFT:&nbsp;medium&nbsp;none;&nbsp;PADDING-BOTTOM:&nbsp;0cm;&nbsp;PADDING-LEFT:&nbsp;0cm;&nbsp;PADDING-RIGHT:&nbsp;0cm;&nbsp;BORDER-TOP:&nbsp;#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;BORDER-RIGHT:&nbsp;medium&nbsp;none;&nbsp;PADDING-TOP:&nbsp;3pt&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;PADDING-BOTTOM:&nbsp;8px;&nbsp;PADDING-LEFT:&nbsp;8px;&nbsp;PADDING-RIGHT:&nbsp;8px;&nbsp;BACKGROUND:&nbsp;#efefef;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-SIZE:&nbsp;12px;&nbsp;PADDING-TOP:&nbsp;8px&quot;&gt;<br>
&lt;DIV&gt;&lt;B&gt;From:&lt;/B&gt;&amp;nbsp;&lt;A&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&gt;Matthias&nbsp;<br>
Radestock&lt;/A&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;B&gt;Date:&lt;/B&gt;&amp;nbsp;2012-09-05&amp;nbsp;22:14&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;B&gt;To:&lt;/B&gt;&amp;nbsp;&lt;A&nbsp;href=&quot;mailto:johnson@edocom.cn&quot;&gt;johnson&lt;/A&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;B&gt;CC:&lt;/B&gt;&amp;nbsp;&lt;A&nbsp;<br>
href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss&lt;/A&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;B&gt;Subject:&lt;/B&gt;&amp;nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;How&nbsp;to&nbsp;achieve&nbsp;HA&nbsp;<br>
consumers?&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&gt;Johnson,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;On&amp;nbsp;05/09/12&amp;nbsp;14:51,&amp;nbsp;johnson&amp;nbsp;wrote:&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;gt;&amp;nbsp;The&amp;nbsp;message-count&amp;nbsp;is&amp;nbsp;correct&amp;nbsp;but&amp;nbsp;the&amp;nbsp;consumer-count&amp;nbsp;is&amp;nbsp;changed&amp;nbsp;from&amp;nbsp;1&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;gt;&amp;nbsp;to&amp;nbsp;0.&amp;nbsp;I&amp;nbsp;don't&amp;nbsp;know&amp;nbsp;why.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;That&amp;nbsp;is&amp;nbsp;due&amp;nbsp;to&amp;nbsp;a&amp;nbsp;subtlety&amp;nbsp;in&amp;nbsp;the&amp;nbsp;meaning&amp;nbsp;of&amp;nbsp;consumer-count&amp;nbsp;in&amp;nbsp;the&amp;nbsp;AMQP&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;spec.&amp;nbsp;From&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare-ok.consumer-count&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;lt;quote&amp;gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;Reports&amp;nbsp;the&amp;nbsp;number&amp;nbsp;of&amp;nbsp;*active*&amp;nbsp;consumers&amp;nbsp;for&amp;nbsp;the&amp;nbsp;queue.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;lt;/quote&amp;gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Rabbit's&amp;nbsp;interpretation&amp;nbsp;of&amp;nbsp;&quot;active&amp;nbsp;consumer&quot;&amp;nbsp;is&amp;nbsp;&quot;a&amp;nbsp;consumer&amp;nbsp;to&amp;nbsp;which&amp;nbsp;a&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;message&amp;nbsp;can&amp;nbsp;be&amp;nbsp;sent&quot;.&amp;nbsp;Since&amp;nbsp;your&amp;nbsp;consumer&amp;nbsp;channels&amp;nbsp;have&amp;nbsp;a&amp;nbsp;qos&amp;nbsp;prefetch&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;count&amp;nbsp;of&amp;nbsp;1,&amp;nbsp;once&amp;nbsp;a&amp;nbsp;message&amp;nbsp;has&amp;nbsp;been&amp;nbsp;sent&amp;nbsp;to&amp;nbsp;a&amp;nbsp;consumer&amp;nbsp;no&amp;nbsp;further&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;messages&amp;nbsp;can&amp;nbsp;be&amp;nbsp;sent&amp;nbsp;to&amp;nbsp;it&amp;nbsp;until&amp;nbsp;it&amp;nbsp;acks&amp;nbsp;the&amp;nbsp;message.&amp;nbsp;Until&amp;nbsp;then&amp;nbsp;the&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;consumer&amp;nbsp;is&amp;nbsp;inactive&amp;nbsp;and&amp;nbsp;hence&amp;nbsp;won't&amp;nbsp;be&amp;nbsp;included&amp;nbsp;in&amp;nbsp;the&amp;nbsp;consumer-count&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;returned&amp;nbsp;by&amp;nbsp;queue.declare-ok.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;The&amp;nbsp;RabbitMQ&amp;nbsp;management&amp;nbsp;API/UI&amp;nbsp;isn't&amp;nbsp;bound&amp;nbsp;by&amp;nbsp;AMQP&amp;nbsp;semantics,&amp;nbsp;so&amp;nbsp;it&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;always&amp;nbsp;reports&amp;nbsp;all&amp;nbsp;consumers,&amp;nbsp;active&amp;nbsp;or&amp;nbsp;not.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Regards,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Matthias.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
