<tt>
&lt;p&gt;Hi&nbsp;Mike,&nbsp;this&nbsp;has&nbsp;been&nbsp;asked&nbsp;several&nbsp;times&nbsp;on&nbsp;the&nbsp;list&nbsp;recently,&nbsp;I&nbsp;think&nbsp;you&nbsp;will&nbsp;find&nbsp;your&nbsp;answer&nbsp;by&nbsp;searching&nbsp;the&nbsp;archives.&lt;br&gt;<br>
By&nbsp;the&nbsp;way,&nbsp;I&nbsp;am&nbsp;curious&nbsp;why&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;everything&nbsp;synchronously&nbsp;as&nbsp;you&nbsp;wouldn&amp;#39;t&nbsp;need&nbsp;Rabbit&nbsp;for&nbsp;that.&lt;/p&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Oct&nbsp;18,&nbsp;2011&nbsp;4:32&nbsp;PM,&nbsp;&amp;quot;Matt&nbsp;G&amp;quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mattgurney@gmail.com&quot;&gt;mattgurney@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&nbsp;type=&quot;attribution&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;a&nbsp;simple&nbsp;scenario&nbsp;where&nbsp;a&nbsp;web&nbsp;service&nbsp;will&nbsp;receive&nbsp;a&nbsp;http&lt;br&gt;<br>
request&nbsp;and&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;insert&nbsp;the&nbsp;request&nbsp;into&nbsp;a&nbsp;queue,&nbsp;and&nbsp;be&lt;br&gt;<br>
sure&nbsp;the&nbsp;message&nbsp;has&nbsp;arrived&nbsp;on&nbsp;the&nbsp;queue&nbsp;before&nbsp;synchronously&lt;br&gt;<br>
responding&nbsp;to&nbsp;the&nbsp;http&nbsp;request.&lt;br&gt;<br>
&lt;br&gt;<br>
Ideally&nbsp;I&nbsp;would&nbsp;like&nbsp;RMQ&nbsp;to&nbsp;&amp;quot;guarantee&amp;quot;&nbsp;that&nbsp;the&nbsp;message&nbsp;has&nbsp;been&lt;br&gt;<br>
delivered&nbsp;to&nbsp;the&nbsp;queue.&nbsp;I&nbsp;have&nbsp;been&nbsp;using&nbsp;IBM&nbsp;MQ&nbsp;and&nbsp;TIBCO&nbsp;EMS&nbsp;(JMS&lt;br&gt;<br>
implementation)&nbsp;for&nbsp;many&nbsp;years,&nbsp;but&nbsp;I&nbsp;am&nbsp;new&nbsp;to&nbsp;RMQ.&lt;br&gt;<br>
&lt;br&gt;<br>
Performance&nbsp;is&nbsp;not&nbsp;an&nbsp;issue,&nbsp;the&nbsp;volume&nbsp;will&nbsp;not&nbsp;be&nbsp;an&nbsp;issue.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;using&nbsp;c#&nbsp;with&nbsp;latest&nbsp;AMQ&nbsp;versions&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Linux.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;far&nbsp;it&nbsp;appears&nbsp;to&nbsp;me&nbsp;that&nbsp;I&nbsp;should&nbsp;use&nbsp;the&nbsp;following,&nbsp;can&nbsp;you&lt;br&gt;<br>
review&nbsp;my&nbsp;list&nbsp;and&nbsp;edit&nbsp;as&nbsp;necessary:&lt;br&gt;<br>
Durable&nbsp;exchange&lt;br&gt;<br>
ExchangeType.Direct&lt;br&gt;<br>
Durable&nbsp;queue&lt;br&gt;<br>
Persistent&nbsp;message&nbsp;(Delivery&nbsp;Mode&nbsp;=&nbsp;2)&lt;br&gt;<br>
Mandatory&nbsp;message&lt;br&gt;<br>
Model/Channel.ConfirmSelect&nbsp;&amp;amp;&nbsp; Model.WaitForConfirmsOrDie();&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;also&nbsp;setup&nbsp;event&nbsp;handlers&nbsp;BasicAcks,&nbsp;BasicNacks&nbsp;&amp;amp;&nbsp;BasicReturn.&lt;br&gt;<br>
If&nbsp;for&nbsp;testing&nbsp;purposes&nbsp;I&nbsp;unbind&nbsp;the&nbsp;queue&nbsp;from&nbsp;the&nbsp;exchange,&nbsp;and&nbsp;send&lt;br&gt;<br>
a&nbsp;single&nbsp;message,&nbsp; I&nbsp;get&nbsp;a&nbsp;BasicAck&nbsp;and&nbsp;a&nbsp;BasicReturn(NO_ROUTE)&nbsp;back,&lt;br&gt;<br>
however&nbsp;the&nbsp;Model.WaitForConfirmsOrDie()&nbsp;returns&nbsp;without&nbsp;error.&nbsp;This&lt;br&gt;<br>
seems&nbsp;inconsistent&nbsp;in&nbsp;that&nbsp;my&nbsp;message&nbsp;has&nbsp;been&nbsp;lost&nbsp;as&nbsp;there&nbsp;is&nbsp;no&lt;br&gt;<br>
queue&nbsp;bound&nbsp;to&nbsp;the&nbsp;exchange&nbsp;and&nbsp;I&nbsp;have&nbsp;specified&nbsp;mandatory&nbsp;and&nbsp;every&lt;br&gt;<br>
persistent&nbsp;option&nbsp;I&nbsp;can&nbsp;find.&nbsp;Is&nbsp;this&nbsp;correct,&nbsp;or&nbsp;am&nbsp;I&nbsp;doing&nbsp;something&lt;br&gt;<br>
wrong?&nbsp;Do&nbsp;I&nbsp;need&nbsp;to&nbsp;do/check&nbsp;both&nbsp;(WaitForConfirms&nbsp;&amp;amp;&nbsp;BasicReturn&nbsp;event&lt;br&gt;<br>
msg)&nbsp;to&nbsp;be&nbsp;sure&nbsp;the&nbsp;message&nbsp;was&nbsp;successfully&nbsp;delivered&nbsp;to&nbsp;the&nbsp;queue?&lt;br&gt;<br>
&lt;br&gt;<br>
Where&nbsp;is&nbsp;the&nbsp;documentation&nbsp;for&nbsp;API&nbsp;calls&nbsp;which&nbsp;are&nbsp;not&nbsp;documented&nbsp;in&lt;br&gt;<br>
the&nbsp;API&nbsp;doc,&nbsp;an&nbsp;example&nbsp;is&nbsp;WaitForConfirmsOrDie,&nbsp;but&nbsp;there&nbsp;are&nbsp;many&lt;br&gt;<br>
others?&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;read&nbsp;one&nbsp;of&nbsp;the&nbsp;other&nbsp;posts&nbsp;directing&nbsp;people&nbsp;away&nbsp;from&nbsp;transactions&lt;br&gt;<br>
and&nbsp;towards&nbsp;the&nbsp;Model/Channel.ConfirmSelect&nbsp;&amp;amp;&lt;br&gt;<br>
Model.WaitForConfirmsOrDie()&nbsp;model,&nbsp;so&nbsp;I&nbsp;have&nbsp;not&nbsp;investigated&lt;br&gt;<br>
transactions.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;about&nbsp;connection&nbsp;heart&nbsp;beating?&nbsp;I&nbsp;know&nbsp;from&nbsp;my&nbsp;experience&nbsp;with&lt;br&gt;<br>
other&nbsp;products&nbsp;HB&amp;#39;s&nbsp;are&nbsp;good&nbsp;way&nbsp;to&nbsp;keep&nbsp;the&nbsp;client&nbsp;and&nbsp;server&nbsp;in-sync&lt;br&gt;<br>
and&nbsp;aware&nbsp;if&nbsp;the&nbsp;other&nbsp;party&nbsp;has&nbsp;gone&nbsp;off&nbsp;line.&nbsp;Should&nbsp;I&nbsp;overwrite&nbsp;the&lt;br&gt;<br>
default&nbsp;which&nbsp;appears&nbsp;to&nbsp;be&nbsp;no&nbsp;heartbeats?&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;not&nbsp;currently&nbsp;using&nbsp;any&nbsp;of&nbsp;the&nbsp;helper/pattern&nbsp;classes,&nbsp;would&nbsp;one&lt;br&gt;<br>
of&nbsp;those&nbsp;be&nbsp;suitable&nbsp;for&nbsp;my&nbsp;requirements&nbsp;for&nbsp;high&nbsp;reliability.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
Matt.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
