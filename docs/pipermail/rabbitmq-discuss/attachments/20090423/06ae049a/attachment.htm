<tt>
Hello,&lt;br&gt;&lt;br&gt;I&nbsp;just&nbsp;wanted&nbsp;to&nbsp;contribute&nbsp;some&nbsp;code&nbsp;I&nbsp;recently&nbsp;changes&nbsp;if&nbsp;anyone&nbsp;needs&nbsp;it.&nbsp;We&nbsp;have&nbsp;a&nbsp;use-case&nbsp;where&nbsp;I&amp;#39;m&nbsp;using&nbsp;STOMP&nbsp;with&nbsp;RabbitMQ&amp;#39;s&nbsp;STOMP&nbsp;adapter&nbsp;and&nbsp;Orbited&nbsp;to&nbsp;push&nbsp;updates&nbsp;to&nbsp;a&nbsp;browser,&nbsp;or&nbsp;maybe&nbsp;even&nbsp;allow&nbsp;clients&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;STOMP&nbsp;server,&nbsp;not&nbsp;sure&nbsp;yet.&nbsp;Anyway,&nbsp;we&nbsp;need&nbsp;to&nbsp;ensure&nbsp;that&nbsp;only&nbsp;certain&nbsp;users&nbsp;get&nbsp;pushed&nbsp;certain&nbsp;content,&nbsp;hence&nbsp;authentication.&lt;br&gt;<br>
&lt;br&gt;The&nbsp;way&nbsp;I&nbsp;have&nbsp;this&nbsp;working&nbsp;is:&nbsp;client&nbsp;connects&nbsp;to&nbsp;STOMP&nbsp;with&nbsp;generic&nbsp;just-TLD&nbsp;cookie&nbsp;(so&nbsp;it&nbsp;can&nbsp;be&nbsp;passed&nbsp;also&nbsp;to&nbsp;STOMP&nbsp;server&nbsp;which&nbsp;would&nbsp;run&nbsp;on&nbsp;another&nbsp;subdomain)&nbsp;and&nbsp;Orbited&amp;#39;s&nbsp;io.js&nbsp;can&nbsp;read&nbsp;the&nbsp;cookie&nbsp;and&nbsp;send&nbsp;it&nbsp;up&nbsp;to&nbsp;the&nbsp;STOMP&nbsp;adapter&nbsp;as&nbsp;a&nbsp;&amp;#39;cookie&amp;#39;&nbsp;header.&nbsp;It&nbsp;(the&nbsp;JS)&nbsp;also&nbsp;generates&nbsp;a&nbsp;random&nbsp;ID&nbsp;for&nbsp;the&nbsp;queue-name&nbsp;for&nbsp;that&nbsp;connection.&nbsp;This&nbsp;is&nbsp;all&nbsp;assuming&nbsp;I&nbsp;have&nbsp;1&nbsp;queue&nbsp;per&nbsp;connection&nbsp;as&nbsp;per&nbsp;the&nbsp;broadcast-style&nbsp;suggestion&nbsp;for&nbsp;STOMP&nbsp;adapter.&lt;br&gt;<br>
&lt;br&gt;So&nbsp;now&nbsp;the&nbsp;STOMP&nbsp;adapter&nbsp;reads&nbsp;that&nbsp;cookie&nbsp;header&nbsp;and&nbsp;hits&nbsp;a&nbsp;page&nbsp;using&nbsp;http:request&nbsp;(via&nbsp;inets)&nbsp;with&nbsp;that&nbsp;cookie&nbsp;and&nbsp;passes&nbsp;in&nbsp;the&nbsp;queue&nbsp;name&nbsp;too.&nbsp;The&nbsp;web-app&nbsp;will&nbsp;recognize&nbsp;the&nbsp;cookie&nbsp;as&nbsp;belonging&nbsp;to&nbsp;a&nbsp;user&nbsp;and&nbsp;read&nbsp;the&nbsp;queue&nbsp;name.&nbsp;It&nbsp;(the&nbsp;web-app)&nbsp;will&nbsp;then&nbsp;set&nbsp;the&nbsp;appropriate&nbsp;bindings&nbsp;for&nbsp;that&nbsp;user.&nbsp;Since&nbsp;this&nbsp;is&nbsp;a&nbsp;topic&nbsp;exchange,&nbsp;the&nbsp;bindings&nbsp;would&nbsp;be&nbsp;for&nbsp;the&nbsp;topics&nbsp;updates&nbsp;the&nbsp;user&nbsp;will&nbsp;receive&nbsp;on&nbsp;her&nbsp;browser.&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;cookie&nbsp;or&nbsp;the&nbsp;cookie&nbsp;is&nbsp;invalid,&nbsp;the&nbsp;web-app&nbsp;can&nbsp;take&nbsp;care&nbsp;of&nbsp;all&nbsp;that&nbsp;and&nbsp;just&nbsp;assign&nbsp;some&nbsp;default&nbsp;bindings&nbsp;for&nbsp;guests.&lt;br&gt;<br>
&lt;br&gt;This&nbsp;is&nbsp;all&nbsp;working&nbsp;pretty&nbsp;well,&nbsp;except&nbsp;that&nbsp;I&nbsp;have&nbsp;to&nbsp;start&nbsp;&amp;#39;inets:start()&amp;#39;&nbsp;manually&nbsp;in&nbsp;the&nbsp;erl&nbsp;command&nbsp;prompt.&nbsp;I&nbsp;was&nbsp;wondering&nbsp;how&nbsp;could&nbsp;I&nbsp;get&nbsp;this&nbsp;to&nbsp;be&nbsp;done&nbsp;on&nbsp;startup&nbsp;when&nbsp;the&nbsp;STOMP&nbsp;adapter&nbsp;starts?&lt;br&gt;&lt;br&gt;<br>
I&amp;#39;ve&nbsp;attached&nbsp;the&nbsp;code&nbsp;and&nbsp;a&nbsp;diff&nbsp;(based&nbsp;on&nbsp;the&nbsp;tip&nbsp;of&nbsp;STOMP&nbsp;adapter&nbsp;from&nbsp;hg).&nbsp;Right&nbsp;now&nbsp;the&nbsp;URL&nbsp;is&nbsp;hardcoded&nbsp;but&nbsp;I&nbsp;plan&nbsp;to&nbsp;make&nbsp;that&nbsp;more&nbsp;configurable&nbsp;later.&lt;br&gt;&lt;br&gt;Anyway,&nbsp;I&nbsp;hope&nbsp;maybe&nbsp;it&nbsp;can&nbsp;be&nbsp;of&nbsp;some&nbsp;use&nbsp;to&nbsp;someone&nbsp;who&nbsp;might&nbsp;need&nbsp;similar&nbsp;functionality.&lt;br&gt;<br>
&lt;br&gt;-Nemanja&lt;br&gt;<br>

</tt>
