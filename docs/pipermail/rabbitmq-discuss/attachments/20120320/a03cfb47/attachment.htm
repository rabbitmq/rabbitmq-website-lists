<tt>
&lt;div&gt;My&nbsp;exchange&nbsp;is&nbsp;set&nbsp;with&nbsp;auto_delete&nbsp;to&nbsp;false&nbsp;non-persistent&lt;/div&gt;&lt;div&gt;My&nbsp;queue&nbsp;matches&nbsp;the&nbsp;exchange-it&amp;#39;s&nbsp;auto_delete&nbsp;is&nbsp;false&nbsp;again&nbsp;non-persistent&lt;/div&gt;&lt;div&gt;&lt;br&gt;My&nbsp;messages&nbsp;have&nbsp;a&nbsp;120&nbsp;second&nbsp;expire&nbsp;time&nbsp;and&nbsp;delivery&nbsp;mode&nbsp;is&nbsp;set&nbsp;to&nbsp;1&nbsp;which&nbsp;means&nbsp;the&nbsp;message&nbsp;is&nbsp;non-persistent.&nbsp;(Note&nbsp;I&nbsp;tried&nbsp;the&nbsp;combo&nbsp;of&nbsp;setting&nbsp;this&nbsp;to&nbsp;2&nbsp;with&nbsp;non-persistent&nbsp;queues&nbsp;and&nbsp;exchanges)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;the&nbsp;consumer&nbsp;goes&nbsp;away,&nbsp;yet&nbsp;the&nbsp;queue&nbsp;exists&nbsp;shouldn&amp;#39;t&nbsp;the&nbsp;message&nbsp;queue&nbsp;until&nbsp;the&nbsp;consumer&nbsp;comes&nbsp;online?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;my&nbsp;case&nbsp;the&nbsp;message&nbsp;seems&nbsp;to&nbsp;just&nbsp;drop.&nbsp;Below&nbsp;are&nbsp;some&nbsp;admin&nbsp;commands&nbsp;illustrating&nbsp;what&nbsp;I&nbsp;perceive&nbsp;is&nbsp;my&nbsp;problem.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;./rabbitmqadmin.py&nbsp;list&nbsp;exchanges&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+-------+--------------------+---------+-------------+---------+----------+&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;vhost&nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; name&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; type&nbsp; &nbsp;|&nbsp;auto_delete&nbsp;|&nbsp;durable&nbsp;|&nbsp;internal&nbsp;|&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+-------+--------------------+---------+-------------+---------+----------+&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;direct&nbsp; |&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;&lt;b&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;53613981&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;direct&nbsp; |&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;False&nbsp; &nbsp;|&nbsp;False&nbsp; &nbsp; |&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;amq.direct&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;direct&nbsp; |&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;amq.fanout&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;fanout&nbsp; |&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;amq.headers&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;headers&nbsp;|&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;amq.match&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;headers&nbsp;|&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;amq.rabbitmq.log&nbsp; &nbsp;|&nbsp;topic&nbsp; &nbsp;|&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;amq.rabbitmq.trace&nbsp;|&nbsp;topic&nbsp; &nbsp;|&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;amq.topic&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;topic&nbsp; &nbsp;|&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;True&nbsp; &nbsp; |&nbsp;False&nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+-------+--------------------+---------+-------------+---------+----------+&lt;/font&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Notice&nbsp;the&nbsp;bold&nbsp;that&nbsp;is&nbsp;the&nbsp;exchange&nbsp;in&nbsp;question&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;./rabbitmqadmin.py&nbsp;list&nbsp;bindings&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+-------+----------+---------------+------------------+---------------+-----------------+&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;vhost&nbsp;|&nbsp; source&nbsp; |&nbsp; destination&nbsp; |&nbsp;destination_type&nbsp;|&nbsp; routing_key&nbsp; |&nbsp;properties_key&nbsp; |&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+-------+----------+---------------+------------------+---------------+-----------------+&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;53613981&nbsp;|&nbsp;feed_53598242&nbsp;|&nbsp;queue&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;53613981&nbsp;|&nbsp;feed_53712882&nbsp;|&nbsp;queue&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed_53598242&nbsp;|&nbsp;queue&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed_53598242&nbsp;|&nbsp;feed%5F53598242&nbsp;|&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed_53712882&nbsp;|&nbsp;queue&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;feed_53712882&nbsp;|&nbsp;feed%5F53712882&nbsp;|&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;+-------+----------+---------------+------------------+---------------+-----------------+&lt;/font&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;&amp;#39;courier&nbsp;new&amp;#39;,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;./rabbitmqadmin.py&nbsp;list&nbsp;queues&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;<br>
+-------+---------------+-------------+-----------+---------+------------------------+--------------------+--------+----------+----------------+-------------------------+------------+-------------+&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;<br>
|&nbsp;vhost&nbsp;|&nbsp; &nbsp; &nbsp;name&nbsp; &nbsp; &nbsp; |&nbsp;auto_delete&nbsp;|&nbsp;consumers&nbsp;|&nbsp;durable&nbsp;|&nbsp;exclusive_consumer_tag&nbsp;|&nbsp; &nbsp; &nbsp;idle_since&nbsp; &nbsp; &nbsp;|&nbsp;memory&nbsp;|&nbsp;messages&nbsp;|&nbsp;messages_ready&nbsp;|&nbsp;messages_unacknowledged&nbsp;|&nbsp; &nbsp; node&nbsp; &nbsp; |&nbsp;slave_nodes&nbsp;|&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;<br>
+-------+---------------+-------------+-----------+---------+------------------------+--------------------+--------+----------+----------------+-------------------------+------------+-------------+&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;<br>
|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;feed_53598242&nbsp;|&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;False&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;2012-3-20&nbsp;16:49:28&nbsp;|&nbsp;6568&nbsp; &nbsp;|&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;rabbit@dev&nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;<br>
|&nbsp;/&nbsp; &nbsp; &nbsp;|&nbsp;feed_53712882&nbsp;|&nbsp;False&nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;False&nbsp; &nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;2012-3-20&nbsp;16:49:28&nbsp;|&nbsp;6568&nbsp; &nbsp;|&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;rabbit@dev&nbsp;|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;<br>
+-------+---------------+-------------+-----------+---------+------------------------+--------------------+--------+----------+----------------+-------------------------+------------+-------------+&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&amp;#39;courier&nbsp;new&amp;#39;,monospace&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Publishing&nbsp;the&nbsp;message&nbsp;succeeds&nbsp;yet&nbsp;the&nbsp;message&nbsp;does&nbsp;not&nbsp;queue&nbsp;it&nbsp;gets&nbsp;discarded.&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;If&nbsp;the&nbsp;consumer&nbsp;is&nbsp;connected&nbsp;then&nbsp;the&nbsp;message&nbsp;flows&nbsp;as&nbsp;normal&nbsp;and&nbsp;I&nbsp;can&nbsp;see&nbsp;rabbit&nbsp;work&nbsp;its&nbsp;magic.&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;How&nbsp;can&nbsp;I&nbsp;force&nbsp;rabbit&nbsp;to&nbsp;queue&nbsp;when&nbsp;the&nbsp;consumer&nbsp;is&nbsp;offline&nbsp;and&nbsp;the&nbsp;queue/exchange&nbsp;exists&nbsp;on&nbsp;the&nbsp;server?&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Note:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;I&nbsp;made&nbsp;the&nbsp;exchange&nbsp;durable,&nbsp;the&nbsp;queue&nbsp;durable,&nbsp;and&nbsp;delivery_mode&nbsp;=&amp;gt;&nbsp;2&nbsp;still&nbsp;I&nbsp;can&amp;#39;t&nbsp;get&nbsp;rabbit&nbsp;to&nbsp;queue.&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;<br>

</tt>
