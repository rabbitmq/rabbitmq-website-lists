<tt>
&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Hi,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;When&nbsp;passively&nbsp;declaring&nbsp;a&nbsp;queue,&nbsp;the&nbsp;returned&nbsp;consumer&nbsp;count&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;consumer&nbsp;count&nbsp;via&nbsp;the&nbsp;management&nbsp;plugin&nbsp;/&nbsp;http&nbsp;API.&nbsp;Turns&nbsp;out,&nbsp;rabbitmq&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;consumers&nbsp;that&nbsp;are&nbsp;ready&nbsp;to&nbsp;receive&nbsp;a&nbsp;message.&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;As&nbsp;an&nbsp;example:&nbsp;there&nbsp;are&nbsp;5&nbsp;(manually&nbsp;acknowledging)&nbsp;consumers,&nbsp;3&nbsp;of&nbsp;which&nbsp;have&nbsp;consumed&nbsp;a&nbsp;message&nbsp;from&nbsp;the&nbsp;queue,&nbsp;but&nbsp;have&nbsp;not&nbsp;sent&nbsp;an&nbsp;ACK&nbsp;for&nbsp;the&nbsp;respective&nbsp;messages&nbsp;to&nbsp;the&nbsp;broker.&nbsp;Declaring&nbsp;a&nbsp;queue&nbsp;now&nbsp;returns&nbsp;a&nbsp;declare-ok&nbsp;with&nbsp;consumer-count&nbsp;==&nbsp;2,&nbsp;whereas&nbsp;I&nbsp;would&nbsp;have&nbsp;expected&nbsp;it&nbsp;to&nbsp;be&nbsp;5.&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Looking&nbsp;at&nbsp;the&nbsp;rabbitmq-server&nbsp;code&nbsp;reveals&nbsp;that&nbsp;the&nbsp;&amp;quot;active&nbsp;consumer&amp;quot;&nbsp;part&nbsp;of&nbsp;the&nbsp;state&nbsp;is&nbsp;used&nbsp;for&nbsp;getting&nbsp;the&nbsp;next&nbsp;consumer&nbsp;for&nbsp;round&nbsp;robin&nbsp;delivery&nbsp;and&nbsp;returning&nbsp;the&nbsp;number&nbsp;of&nbsp;consumers&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;declare-ok&nbsp;message.&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Since&nbsp;I&nbsp;don&amp;#39;t&nbsp;suspect&nbsp;this&nbsp;to&nbsp;be&nbsp;an&nbsp;oversight&nbsp;but&nbsp;rather&nbsp;a&nbsp;conscious&nbsp;decision,&nbsp;I&amp;#39;m&nbsp;interested&nbsp;in&nbsp;the&nbsp;rationale&nbsp;behind&nbsp;it.&nbsp;I&amp;#39;m&nbsp;aware&nbsp;that&nbsp;changing&nbsp;the&nbsp;semantics&nbsp;at&nbsp;this&nbsp;point&nbsp;is&nbsp;probably&nbsp;not&nbsp;possible&nbsp;and&nbsp;I&nbsp;may&nbsp;have&nbsp;to&nbsp;resort&nbsp;to&nbsp;fetching&nbsp;the&nbsp;consumer&nbsp;count&nbsp;via&nbsp;the&nbsp;http&nbsp;api&nbsp;(which&nbsp;brings&nbsp;some&nbsp;organizational&nbsp;overhead).&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Can&nbsp;anybody&nbsp;shed&nbsp;some&nbsp;light&nbsp;on&nbsp;this?&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Cheers,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222222&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Â &nbsp;Gerolf&lt;/font&gt;&lt;/div&gt;<br>

</tt>
