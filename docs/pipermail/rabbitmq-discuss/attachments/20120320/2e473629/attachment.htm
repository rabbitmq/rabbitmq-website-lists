<tt>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;for&nbsp;the&nbsp;indirect&nbsp;heads&nbsp;up&nbsp;on&nbsp;this&nbsp;;-)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;style=&quot;color:&nbsp;#A0A0A8;&quot;&gt;On&nbsp;Tuesday,&nbsp;March&nbsp;20,&nbsp;2012&nbsp;at&nbsp;8:52&nbsp;AM,&nbsp;Aaron&nbsp;Westendorf&nbsp;wrote:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;I&nbsp;looked&nbsp;at&nbsp;the&nbsp;changes&nbsp;and&nbsp;in&nbsp;addition&nbsp;to&nbsp;those,&nbsp;I&nbsp;recommend&nbsp;using&lt;/div&gt;&lt;div&gt;the&nbsp;Python&nbsp;deque&nbsp;class&nbsp;for&nbsp;your&nbsp;buffers.&nbsp;I&nbsp;noticed&nbsp;a&nbsp;significant&lt;/div&gt;&lt;div&gt;improvement&nbsp;in&nbsp;performance&nbsp;when&nbsp;I&nbsp;switched&nbsp;to&nbsp;them&nbsp;in&nbsp;haigha.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cheers,&lt;/div&gt;&lt;div&gt;Aaron&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;20,&nbsp;2012&nbsp;at&nbsp;6:41&nbsp;AM,&nbsp;Marek&nbsp;Majkowski&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Wed,&nbsp;Mar&nbsp;14,&nbsp;2012&nbsp;at&nbsp;18:59,&nbsp;Marek&nbsp;Majkowski&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Wed,&nbsp;Mar&nbsp;14,&nbsp;2012&nbsp;at&nbsp;18:42,&nbsp;Marek&nbsp;Majkowski&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Wed,&nbsp;Mar&nbsp;14,&nbsp;2012&nbsp;at&nbsp;12:31,&nbsp;Christos&nbsp;Stavrakakis&lt;/div&gt;&lt;div&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:stavr.chris@gmail.com&quot;&gt;stavr.chris@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;Puka&nbsp;client&nbsp;[1]&nbsp;in&nbsp;order&nbsp;to&nbsp;send&nbsp;messages&nbsp;with&nbsp;guaranteed&lt;/div&gt;&lt;div&gt;delivery&nbsp;using&nbsp;publisher&nbsp;confirms.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Trying&nbsp;to&nbsp;send&nbsp;200.000&nbsp;messages&nbsp;I&nbsp;see&nbsp;that&nbsp;waiting&nbsp;for&nbsp;the&nbsp;confirms,&nbsp;takes&nbsp;a&lt;/div&gt;&lt;div&gt;lot&nbsp;of&nbsp;time.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;be&nbsp;more&nbsp;specific:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;promises&nbsp;=&nbsp;[]&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;t0&nbsp;=&nbsp;time.time()&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(0,200000):&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;promise&nbsp;=&nbsp;client.basic_publish(exchange='test_exchange',&lt;/div&gt;&lt;div&gt;routing_key='test',&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;body=&quot;Hello&lt;/div&gt;&lt;div&gt;world!&quot;)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;promises.append(promise)&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Right,&nbsp;there&nbsp;is&nbsp;a&nbsp;performance&nbsp;problem&nbsp;with&nbsp;handling&nbsp;pubacks.&nbsp;The&nbsp;complexity&lt;/div&gt;&lt;div&gt;grows&nbsp;with&nbsp;n^2&nbsp;of&nbsp;unacked&nbsp;messages&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Good&nbsp;news:&nbsp;the&nbsp;problem&nbsp;is&nbsp;in&nbsp;this&nbsp;line:&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;https://github.com/majek/puka/blob/master/puka/machine.py#L147-148&quot;&gt;https://github.com/majek/puka/blob/master/puka/machine.py#L147-148&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Bad&nbsp;news:&nbsp;I&nbsp;have&nbsp;no&nbsp;clue&nbsp;how&nbsp;to&nbsp;fix&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I've&nbsp;rised&nbsp;an&nbsp;issue&nbsp;on&nbsp;github:&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;https://github.com/majek/puka/issues/12&quot;&gt;https://github.com/majek/puka/issues/12&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Christos,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;report&nbsp;and&nbsp;for&nbsp;the&nbsp;pull&nbsp;request!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;just&nbsp;uploaded&nbsp;puka&nbsp;0.0.4&nbsp;to&nbsp;pypi,&nbsp;which&nbsp;solves&nbsp;the&nbsp;problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;Marek&lt;/div&gt;&lt;div&gt;_______________________________________________&lt;/div&gt;&lt;div&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&nbsp;&lt;/div&gt;&lt;div&gt;Aaron&nbsp;Westendorf&lt;/div&gt;&lt;div&gt;Senior&nbsp;Software&nbsp;Engineer&lt;/div&gt;&lt;div&gt;Agora&nbsp;Games&lt;/div&gt;&lt;div&gt;359&nbsp;Broadway&lt;/div&gt;&lt;div&gt;Troy,&nbsp;NY&nbsp;12180&lt;/div&gt;&lt;div&gt;Phone:&nbsp;518.268.1000&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;mailto:aaron@agoragames.com&quot;&gt;aaron@agoragames.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://www.agoragames.com&quot;&gt;www.agoragames.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;_______________________________________________&lt;/div&gt;&lt;div&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt>
