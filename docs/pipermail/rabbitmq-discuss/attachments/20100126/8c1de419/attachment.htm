<tt>
Wouldn&amp;#39;t&nbsp;a&nbsp;dead&nbsp;letter&nbsp;queue&nbsp;approach&nbsp;work&nbsp;in&nbsp;this&nbsp;case?&nbsp;I.e&nbsp;if&nbsp;your&nbsp;consumer&nbsp;gets&nbsp;an&nbsp;unprocessable&nbsp;message,&nbsp;stop&nbsp;the&nbsp;consumer&nbsp;and&nbsp;publish&nbsp;the&nbsp;message&nbsp;to&nbsp;some&nbsp;other&nbsp;queue.&nbsp;Then,&nbsp;when&nbsp;restarting&nbsp;the&nbsp;application&nbsp;first&nbsp;consume&nbsp;the&nbsp;message(s)&nbsp;from&nbsp;the&nbsp;DLQ&lt;div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;/Marcus&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://developian.blogspot.com&quot;&gt;http://developian.blogspot.com&lt;/a&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Jan&nbsp;26,&nbsp;2010&nbsp;at&nbsp;9:31&nbsp;AM,&nbsp;alex&nbsp;chen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:chen650@yahoo.com&quot;&gt;chen650@yahoo.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Thanks&nbsp;Matthias&nbsp;for&nbsp;the&nbsp;quick&nbsp;response!&nbsp; Our&nbsp;application&nbsp;processes&nbsp;time&nbsp;series&nbsp;data&nbsp;so&nbsp;it&nbsp;is&nbsp;crucial&nbsp;to&nbsp;keep&nbsp;the&nbsp;message&nbsp;order.&nbsp; It&nbsp;has&nbsp;one&nbsp;exclusive&nbsp;consumer&nbsp;only.&nbsp; It&nbsp;would&nbsp;be&nbsp;really&nbsp;nice&nbsp;if&nbsp;rabbitmq&nbsp;could&nbsp;send&nbsp;the&nbsp;unacked&nbsp;messages&nbsp;first&nbsp;for&nbsp;this&nbsp;use&nbsp;case.&lt;br&gt;<br>
<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
-alex&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-----&nbsp;Original&nbsp;Message&nbsp;----&lt;br&gt;<br>
From:&nbsp;Matthias&nbsp;Radestock&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@lshift.net&quot;&gt;matthias@lshift.net&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
To:&nbsp;alex&nbsp;chen&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:chen650@yahoo.com&quot;&gt;chen650@yahoo.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Cc:&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
Sent:&nbsp;Mon,&nbsp;January&nbsp;25,&nbsp;2010&nbsp;11:23:23&nbsp;PM&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;keep&nbsp;unacked&nbsp;message&nbsp;at&nbsp;the&nbsp;head&nbsp;of&nbsp;queue&lt;br&gt;<br>
&lt;br&gt;<br>
Alex,&lt;br&gt;<br>
&lt;br&gt;<br>
alex&nbsp;chen&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Currently&nbsp;rabbitmq&nbsp;re-queues&nbsp;the&nbsp;unacked&nbsp;messages&nbsp;to&nbsp;the&nbsp;end&nbsp;of&lt;br&gt;<br>
&amp;gt;&nbsp;queue.&nbsp; Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;keep&nbsp;those&nbsp;messages&nbsp;at&nbsp;the&nbsp;head&nbsp;of&nbsp;queue&lt;br&gt;<br>
&amp;gt;&nbsp;instead?&lt;br&gt;<br>
&lt;br&gt;<br>
No,&nbsp;that&nbsp;isn&amp;#39;t&nbsp;possible.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Our&nbsp;application&nbsp;needs&nbsp;to&nbsp;keep&nbsp;the&nbsp;ordering&nbsp;of&nbsp;the&nbsp;messages.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;ordering&nbsp;guarantees&nbsp;provided&nbsp;by&nbsp;AMQP&nbsp;are&nbsp;very&nbsp;constrained.&nbsp;See&nbsp;section&nbsp;4.7&nbsp;of&nbsp;the&nbsp;AMQP&nbsp;0-9-1&nbsp;spec&nbsp;which,&nbsp;for&nbsp;example,&nbsp;states&nbsp;that&nbsp;all&nbsp;bets&nbsp;are&nbsp;off&nbsp;when&nbsp;messages&nbsp;get&nbsp;redelivered.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;are&nbsp;good&nbsp;reasons&nbsp;for&nbsp;being&nbsp;so&nbsp;restrictive:&nbsp;excessive&nbsp;ordering&nbsp;guarantees&nbsp;are&nbsp;bad&nbsp;for&nbsp;scalability.&nbsp;Also,&nbsp;it&nbsp;is&nbsp;actually&nbsp;logically&nbsp;impossible&nbsp;to&nbsp;maintain&nbsp;message&nbsp;order&nbsp;in&nbsp;all&nbsp;but&nbsp;the&nbsp;simplest&nbsp;scenarios.&nbsp;For&nbsp;example,&nbsp;even&nbsp;just&nbsp;adding&nbsp;a&nbsp;second&nbsp;consumer&nbsp;to&nbsp;a&nbsp;queue&nbsp;necessarily&nbsp;breaks&nbsp;the&nbsp;order&nbsp;of&nbsp;redeliveries&nbsp;wrt&nbsp;other&nbsp;messages.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
