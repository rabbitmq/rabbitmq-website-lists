<tt>
Matthias,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Your&nbsp;are&nbsp;right&nbsp;Windows&nbsp;have&nbsp;a&nbsp;limitation&nbsp;to&nbsp;memory&nbsp;allocation&nbsp;per&nbsp;process,&nbsp;and&nbsp;some&nbsp;versions&nbsp;of&nbsp;Windows&nbsp;is&nbsp;2Gb&nbsp;the&nbsp;limitation,&nbsp;a&nbsp;long&nbsp;time&nbsp;ago&nbsp;I&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;problems&nbsp;with&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;what&nbsp;type&nbsp;of&nbsp;windows&nbsp;John&nbsp;are&nbsp;using&nbsp;but&nbsp;this&nbsp;is&nbsp;a&nbsp;link&nbsp;of&nbsp;Microsoft&nbsp;to&nbsp;talk&nbsp;about&nbsp;this&nbsp;limitations&nbsp;in&nbsp;all&nbsp;versions&nbsp;of&nbsp;windows.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://msdn.microsoft.com/en-us/library/aa366778(VS.85).aspx&quot;&gt;http://msdn.microsoft.com/en-us/library/aa366778(VS.85).aspx&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Jan&nbsp;26,&nbsp;2010&nbsp;at&nbsp;5:32&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@lshift.net&quot;&gt;matthias@lshift.net&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;John,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
John&nbsp;Apps&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Here&nbsp;are&nbsp;two&nbsp;runs,&nbsp;one&nbsp;with&nbsp;0.4&nbsp;and&nbsp;the&nbsp;other,&nbsp;below,&nbsp;with&nbsp;0.3.&nbsp;Both&lt;br&gt;<br>
&amp;gt;&nbsp;crash.&nbsp;The&nbsp;rabbit.log&nbsp;for&nbsp;the&nbsp;0.3&nbsp;test&nbsp;is&nbsp;attached.&nbsp;The&nbsp;0.4&nbsp;test&nbsp;did&nbsp;not&lt;br&gt;<br>
&amp;gt;&nbsp;log&nbsp;any&nbsp;memory&nbsp;watermark&nbsp;messages,&nbsp;only&nbsp;the&nbsp;0.3&nbsp;test.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;cannot&nbsp;see&nbsp;any&nbsp;memory&nbsp;alerts&nbsp;in&nbsp;the&nbsp;0.3&nbsp;test&nbsp;log&nbsp;either.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;earlier&nbsp;0.2&nbsp;log,&nbsp;showed&nbsp;a&nbsp;limit&nbsp;of&nbsp;817MB&nbsp;and&nbsp;a&nbsp;max&nbsp;value&nbsp;of&nbsp;~1.3G.&lt;br&gt;<br>
Assuming&nbsp;those&nbsp;ratios&nbsp;are&nbsp;similar&nbsp;for&nbsp;the&nbsp;0.3&nbsp;case&nbsp;(1225MB),&nbsp;it&nbsp;would&lt;br&gt;<br>
indicate&nbsp;the&nbsp;O/S&nbsp;isn&amp;#39;t&nbsp;happy&nbsp;with&nbsp;Rabbit&nbsp;asking&nbsp;for&nbsp;more&nbsp;than&nbsp;~2GB&nbsp;of&lt;br&gt;<br>
memory.&lt;br&gt;<br>
&lt;br&gt;<br>
Some&nbsp;quick&nbsp;googling&nbsp;on&nbsp;Erlang&nbsp;under&nbsp;Windows&nbsp;suggests&nbsp;that&nbsp;2GB&nbsp;may&nbsp;in&lt;br&gt;<br>
fact&nbsp;be&nbsp;a&nbsp;limit&nbsp;imposed&nbsp;by&nbsp;some&nbsp;flavours&nbsp;of&nbsp;Windows.&nbsp;Different&nbsp;flavours&lt;br&gt;<br>
have&nbsp;different&nbsp;limits;&nbsp;somebody&nbsp;more&nbsp;familiar&nbsp;with&nbsp;Windows&nbsp;might&nbsp;be&nbsp;able&lt;br&gt;<br>
to&nbsp;provide&nbsp;more&nbsp;precise&nbsp;information.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;guess&nbsp;you&amp;#39;ll&nbsp;have&nbsp;to&nbsp;stick&nbsp;to&nbsp;a&nbsp;limit&nbsp;of&nbsp;0.2,&nbsp;or&nbsp;perhaps&nbsp;try&nbsp;0.25.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;/&amp;gt;&amp;gt;&amp;gt;That&amp;#39;s&nbsp;exactly&nbsp;what&nbsp;is&nbsp;supposed&nbsp;to&nbsp;happen.&nbsp;Rabbit&nbsp;has&nbsp;told&nbsp;the&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&amp;gt;&nbsp;producer&nbsp;to&nbsp;stop&nbsp;sending&nbsp;messages&nbsp;since&nbsp;it&nbsp;is&nbsp;under&nbsp;memory&nbsp;pressure.&lt;br&gt;<br>
&amp;gt;&nbsp;Once&nbsp;memory&nbsp;becomes&nbsp;available&nbsp;again,&nbsp;e.g.&nbsp;when&nbsp;a&nbsp;consumer&nbsp;consumes&lt;br&gt;<br>
&amp;gt;&nbsp;enough&nbsp;messages,&nbsp;or&nbsp;some&nbsp;queues&nbsp;get&nbsp;deleted/purged,&nbsp;or&nbsp;as&nbsp;a&nbsp;result&nbsp;of&lt;br&gt;<br>
&amp;gt;&nbsp;internal&nbsp;garbage&nbsp;collection,&nbsp;Rabbit&nbsp;will&nbsp;tell&nbsp;the&nbsp;producer&nbsp;that&nbsp;it&nbsp;may&lt;br&gt;<br>
&amp;gt;&nbsp;resume.&lt;br&gt;<br>
&amp;gt;&nbsp;/&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;The&nbsp;funny&nbsp;thing&nbsp;is&nbsp;that&nbsp;rabbitmqctl&nbsp;status&nbsp;returned&nbsp;a&nbsp;&amp;#39;node&nbsp;down&amp;#39;&lt;br&gt;<br>
&amp;gt;&nbsp;message.&nbsp;I&nbsp;suppose&nbsp;that&nbsp;is&nbsp;OK?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;No,&nbsp;that&amp;#39;s&nbsp;not&nbsp;ok.&nbsp;Presumably&nbsp;rabbitmqctl&nbsp;normally&nbsp;works&nbsp;fine,&nbsp;right?&lt;br&gt;<br>
&lt;br&gt;<br>
Next&nbsp;time&nbsp;this&nbsp;happens,&nbsp;please&nbsp;do&nbsp;the&nbsp;following:&lt;br&gt;<br>
-&nbsp;capture&nbsp;&amp;amp;&nbsp;report&nbsp;the&nbsp;complete&nbsp;output&nbsp;of&nbsp;rabbitmqctl&lt;br&gt;<br>
-&nbsp;check&nbsp;whether&nbsp;the&nbsp;rabbit&nbsp;process&nbsp;is&nbsp;alive&lt;br&gt;<br>
-&nbsp;assuming&nbsp;it&nbsp;is,&nbsp;report&nbsp;whether&nbsp;it&amp;#39;s&nbsp;busy&nbsp;or&nbsp;idle&lt;br&gt;<br>
-&nbsp;terminate&nbsp;the&nbsp;test&nbsp;program&lt;br&gt;<br>
-&nbsp;try&nbsp;running&nbsp;rabbitmqctl&nbsp;again&nbsp;and&nbsp;report&nbsp;the&nbsp;results&lt;br&gt;<br>
-&nbsp;post&nbsp;the&nbsp;complete&nbsp;rabbit.log&nbsp;and&nbsp;rabbit-sasl.log&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
