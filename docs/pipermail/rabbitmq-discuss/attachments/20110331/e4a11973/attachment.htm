<tt>
&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;p&nbsp;style=&quot;color:&nbsp;#a0a0a0;&quot;&gt;On&nbsp;Thursday,&nbsp;March&nbsp;31,&nbsp;2011&nbsp;at&nbsp;11:00&nbsp;PM,&nbsp;can&nbsp;xiang&nbsp;wrote:&lt;/p&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;I'm&nbsp;evaluating&nbsp;a&nbsp;messaging&nbsp;system&nbsp;for&nbsp;my&nbsp;web&nbsp;project.&nbsp;I&nbsp;give&nbsp;rabbitmq&nbsp;2.4.0&nbsp;and&nbsp;pika&nbsp;0.9.5&nbsp;a&nbsp;try,&nbsp;today.&nbsp;It&nbsp;works&nbsp;unbelievably&nbsp;fine.&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Glad&nbsp;to&nbsp;hear&nbsp;it&nbsp;:)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;Below&nbsp;is&nbsp;what&nbsp;I'm&nbsp;doing:&lt;br&gt;&lt;br&gt;1.&nbsp;Use&nbsp;pika&nbsp;with&nbsp;tornado&nbsp;1.0,&amp;nbsp;&nbsp;which&nbsp;uses&nbsp;TornadoConnection&nbsp;adapter&lt;br&gt;<br>
2.&nbsp;only&nbsp;produce&nbsp;message&nbsp;in&nbsp;tornado&nbsp;handler,&nbsp;no&nbsp;consumer&nbsp;in&nbsp;tornado&lt;br&gt;3.&nbsp;use&nbsp;3&nbsp;standalone&nbsp;round-robin&nbsp;worker&nbsp;as&nbsp;consumer&lt;br&gt;&lt;br&gt;I&nbsp;did&nbsp;a&nbsp;1million&nbsp;&quot;hello&nbsp;word&quot;&nbsp;test&nbsp;with&nbsp;&quot;ab&nbsp;-n&nbsp;1000000&nbsp;-c&nbsp;10&nbsp;&lt;a&nbsp;href=&quot;http://localhost/helloword&quot;&gt;http://localhost/helloword&lt;/a&gt;&quot;.&nbsp;Message&nbsp;flows&nbsp;at&nbsp;2000+message/s&nbsp;and&nbsp;100%&nbsp;message&nbsp;receive,&nbsp;all&nbsp;good&nbsp;except&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;warning&nbsp;in&nbsp;tornado&nbsp;process:&lt;br&gt;<br>
&lt;i&gt;&lt;br&gt;&amp;nbsp;/usr/local/lib/python2.6/dist-packages/pika-0.9.5-py2.6.egg/pika/connection.py:642:&nbsp;UserWarning:&nbsp;Pika:&nbsp;Write&nbsp;buffer&nbsp;exceeded&nbsp;warning&nbsp;threshold&nbsp;at&nbsp;1271&nbsp;bytes&nbsp;and&nbsp;an&nbsp;estimated&nbsp;21&nbsp;frames&nbsp;behind&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;Pika&nbsp;attempts&nbsp;to&nbsp;detect&nbsp;TCP&nbsp;Back-pressure&nbsp;by&nbsp;watching&nbsp;your&nbsp;average&nbsp;frame&nbsp;size&nbsp;over&nbsp;a&nbsp;rolling&nbsp;window&nbsp;and&nbsp;then&nbsp;detecting&nbsp;when&nbsp;the&nbsp;output&nbsp;buffer&nbsp;exceeds&nbsp;the&nbsp;average&nbsp;frame&nbsp;size&nbsp;multiplied&nbsp;by&nbsp;a&nbsp;configurable&nbsp;multiplier&nbsp;which&nbsp;is&nbsp;10&nbsp;by&nbsp;default.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://pika.github.com/connecting.html#tcp-backpressure&quot;&gt;http://pika.github.com/connecting.html#tcp-backpressure&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;is&nbsp;happening&nbsp;is&nbsp;you're&nbsp;publishing&nbsp;faster&nbsp;than&nbsp;you're&nbsp;consuming&nbsp;(since&nbsp;you're&nbsp;not&nbsp;consuming)&nbsp;and&nbsp;RabbitMQ&nbsp;is&nbsp;throttling&nbsp;you.&nbsp;Pika&nbsp;is&nbsp;raising&nbsp;warnings&nbsp;so&nbsp;you&nbsp;can&nbsp;respond&nbsp;accordingly&nbsp;in&nbsp;your&nbsp;code.&nbsp;&amp;nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;ignore&nbsp;these&nbsp;warnings&nbsp;you&nbsp;can&nbsp;do&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;from&nbsp;warnings&nbsp;import&nbsp;simplefilter&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;simplefilter(&quot;ignore&quot;,&nbsp;&quot;user&quot;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alternatively&nbsp;you&nbsp;can&nbsp;increase&nbsp;the&nbsp;multiplier&nbsp;to&nbsp;delay&nbsp;when&nbsp;you'll&nbsp;be&nbsp;notified&nbsp;via&nbsp;warning:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;connection.set_backpressure_multiplier(100)&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Where&nbsp;100&nbsp;is&nbsp;the&nbsp;value&nbsp;you&nbsp;want&nbsp;the&nbsp;multiplier&nbsp;to&nbsp;be.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However.&nbsp;if&nbsp;you&nbsp;do&nbsp;this&nbsp;and&nbsp;put&nbsp;too&nbsp;many&nbsp;messages&nbsp;into&nbsp;RabbitMQ&nbsp;without&nbsp;consuming,&nbsp;you&nbsp;will&nbsp;run&nbsp;into&nbsp;problems&nbsp;with&nbsp;RabbitMQ&nbsp;and&nbsp;your&nbsp;messages&nbsp;will&nbsp;not&nbsp;be&nbsp;sent.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;would&nbsp;do&nbsp;is&nbsp;warnings.catch_warnings&nbsp;to&nbsp;respond&nbsp;in&nbsp;your&nbsp;application&nbsp;appropriately:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://docs.python.org/library/warnings.html#warnings.catch_warnings&quot;&gt;http://docs.python.org/library/warnings.html#warnings.catch_warnings&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;hope&nbsp;this&nbsp;helps!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Gavin&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;
</tt>
