<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&lt;br&gt;<br>
Indeed,&nbsp;upgrading&nbsp;just&nbsp;the&nbsp;client(s)&nbsp;will&nbsp;break&nbsp;things&nbsp;for&nbsp;sure,&nbsp;since<br>
the&nbsp;clients&nbsp;now&nbsp;speak&nbsp;AMQP&nbsp;0-9-1.&lt;br&gt;<br>
We&nbsp;do&nbsp;recommend&nbsp;upgrading&nbsp;all&nbsp;clients&nbsp;plus&nbsp;the&nbsp;server&nbsp;to&nbsp;version&nbsp;2.0.0.<br>
There&nbsp;are&nbsp;many&nbsp;new&nbsp;features&nbsp;in&nbsp;it;&nbsp;including&nbsp;persistence&nbsp;to&nbsp;disk.&lt;br&gt;<br>
Note&nbsp;that&nbsp;the&nbsp;latest&nbsp;versions&nbsp;of&nbsp;broker&nbsp;and&nbsp;erlang&nbsp;client&nbsp;on&nbsp;default&nbsp;do<br>
not&nbsp;work&nbsp;together.&nbsp;We&nbsp;are&nbsp;working&nbsp;on&nbsp;fixing&nbsp;it.&nbsp;Use&nbsp;tag&nbsp;rabbitmq_v2_0_0<br>
instead,&nbsp;if&nbsp;you&nbsp;check&nbsp;source&nbsp;out&nbsp;from&nbsp;hg.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Rgds,&lt;br&gt;<br>
Vlad.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;09/02/2010&nbsp;02:03&nbsp;PM,&nbsp;Guillaume&nbsp;Perrot&nbsp;wrote:<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:AANLkTi=mxT0MZ+cg-zVqD6Thu-ey=Hyg5qMSyNRdqsZ8@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;Hi,&lt;br&gt;<br>
I&nbsp;already&nbsp;use&nbsp;#amqp_params,&nbsp;but&nbsp;the&nbsp;record&nbsp;definition&nbsp;is&nbsp;missing&nbsp;the<br>
heartbeat&nbsp;field:&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
-record(amqp_params,&nbsp;{username&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&nbsp;&amp;lt;&amp;lt;&quot;guest&quot;&amp;gt;&amp;gt;,&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;password&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&nbsp;&amp;lt;&amp;lt;&quot;guest&quot;&amp;gt;&amp;gt;,&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;virtual_host&nbsp;=&nbsp;&amp;lt;&amp;lt;&quot;/&quot;&amp;gt;&amp;gt;,&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;host&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&nbsp;&quot;localhost&quot;,&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;port&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;=&nbsp;?PROTOCOL_PORT,&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ssl_options&amp;nbsp;&nbsp;=&nbsp;none}).&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
Apparently&nbsp;I&nbsp;use&nbsp;an&nbsp;outdated&nbsp;version&nbsp;of&nbsp;the&nbsp;client&nbsp;(hg&nbsp;clone&nbsp;--rev<br>
825eceaca84c&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-erlang-client/&quot;&gt;http://hg.rabbitmq.com/rabbitmq-erlang-client/&lt;/a&gt;)<br>
and&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;I&nbsp;can&nbsp;upgrade&nbsp;it&nbsp;without&nbsp;upgrading&nbsp;the&nbsp;server&nbsp;and<br>
codegen.&lt;br&gt;<br>
(hg&nbsp;clone&nbsp;--rev&nbsp;b1089fcc31b7&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-server/&quot;&gt;http://hg.rabbitmq.com/rabbitmq-server/&lt;/a&gt;&amp;nbsp;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
hg&nbsp;clone&nbsp;--rev&nbsp;a62e87645861&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;http://hg.rabbitmq.com/rabbitmq-codegen/&quot;&gt;http://hg.rabbitmq.com/rabbitmq-codegen/&lt;/a&gt;)&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
I'll&nbsp;try&nbsp;to&nbsp;update&nbsp;the&nbsp;whole,&nbsp;hoping&nbsp;migrating&nbsp;from&nbsp;the&nbsp;time&nbsp;rabbitmq<br>
implemented&nbsp;the&nbsp;0.8&nbsp;version&nbsp;of&nbsp;the&nbsp;spec&nbsp;does&nbsp;not&nbsp;break&nbsp;anything&nbsp;(we<br>
also&nbsp;have&nbsp;Java&nbsp;clients&nbsp;to&nbsp;update).&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2010/9/2&nbsp;Vlad&nbsp;Alexandru&nbsp;Ionescu&nbsp;&lt;span<br>
&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;&nbsp;href=&quot;mailto:vlad@rabbitmq.com&quot;&gt;vlad@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;<br>
&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Hi,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
You&nbsp;can&nbsp;use&nbsp;the&nbsp;amqp_connection:start_network/1&nbsp;function.&nbsp;You&nbsp;pass&nbsp;an<br>
#amqp_params{heartbeat&nbsp;=&nbsp;TimeoutSec}&nbsp;parameter.&nbsp;For&nbsp;example:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Connection&nbsp;=&nbsp;amqp_connection:start_network(#amqp_params{heartbeat&nbsp;=&nbsp;5}).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
...&nbsp;to&nbsp;start&nbsp;a&nbsp;network&nbsp;connection&nbsp;with&nbsp;5&nbsp;seconds&nbsp;heartbeat.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Make&nbsp;sure&nbsp;you&nbsp;include&nbsp;amqp_client.hrl.&lt;br&gt;<br>
There&nbsp;are&nbsp;quite&nbsp;a&nbsp;few&nbsp;things&nbsp;you&nbsp;can&nbsp;tweak&nbsp;through&nbsp;#amqp_params{}.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Rgds,&lt;br&gt;<br>
Vlad.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
On&nbsp;09/02/2010&nbsp;01:47&nbsp;PM,&nbsp;Guillaume&nbsp;Perrot&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;h5&quot;&gt;Hello,&lt;br&gt;<br>
I&nbsp;could'nt&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;configure&nbsp;the&nbsp;connection's&nbsp;heartbeat&nbsp;using<br>
rabbitmq-erlang-client.&lt;br&gt;<br>
In&nbsp;the&nbsp;Java&nbsp;lib&nbsp;it&nbsp;was&nbsp;easy&nbsp;to&nbsp;do&nbsp;so&nbsp;by&nbsp;calling<br>
ConnectionParams.setRequestedHeartbeat(),&nbsp;I&nbsp;did&nbsp;not&nbsp;find&nbsp;an&nbsp;equivalent<br>
feature&nbsp;in&nbsp;rabbitmq-erlang-client.&lt;br&gt;<br>
Thanks&nbsp;in&nbsp;advance.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;&lt;fieldset&gt;&lt;/fieldset&gt;<br>
_______________________________________________<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;<br>
&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;<br>
&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
