<tt>
Jiri&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank-you&nbsp;for&nbsp;bringing&nbsp;this&nbsp;up.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;two&nbsp;(initial)&nbsp;questions:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;How&nbsp;will&nbsp;out-of-order&nbsp;behaviour&nbsp;be&nbsp;observed&nbsp;in&nbsp;your&nbsp;use&nbsp;case?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;2.&nbsp;Do&nbsp;you&nbsp;plan&nbsp;to&nbsp;use&nbsp;shared&nbsp;queues,&nbsp;or&nbsp;will&nbsp;each&nbsp;queue&nbsp;have&nbsp;just&nbsp;one&nbsp;consumer&nbsp;client&nbsp;so&nbsp;that&nbsp;all&nbsp;pubsub&nbsp;happens&nbsp;using&nbsp;the&nbsp;exchange?&nbsp; &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best&nbsp;wishes&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;alexis&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Sep&nbsp;2,&nbsp;2010&nbsp;at&nbsp;4:09&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jiri@krutil.com&quot;&gt;jiri@krutil.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Hello&nbsp;together&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;are&nbsp;considering&nbsp;an&nbsp;active-active&nbsp;high&nbsp;availability&nbsp;broker&nbsp;setup&nbsp;and&nbsp;I&nbsp;wanted&nbsp;to&nbsp;check&nbsp;if&nbsp;there&nbsp;is&nbsp;someone&nbsp;here&nbsp;who&nbsp;could&nbsp;help&nbsp;with&nbsp;experience/advice.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;plan&nbsp;to&nbsp;run&nbsp;two&nbsp;RabbitMQ&nbsp;brokers&nbsp;with&nbsp;the&nbsp;same&nbsp;setup&nbsp;(same&nbsp;queues,&nbsp;exchanges,&nbsp;bindings),&nbsp;which&nbsp;are&nbsp;independent&nbsp;and&nbsp;not&nbsp;aware&nbsp;of&nbsp;each&nbsp;other.&nbsp;These&nbsp;would&nbsp;be&nbsp;behind&nbsp;a&nbsp;load&nbsp;balancer,&nbsp;so&nbsp;this&nbsp;should&nbsp;be&nbsp;transparent&nbsp;to&nbsp;client&nbsp;applications.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
We&nbsp;use&nbsp;AMQP&nbsp;for&nbsp;two&nbsp;things:&lt;br&gt;<br>
-&nbsp;pub/sub&nbsp;broadcasts&nbsp;from&nbsp;back-end&nbsp;to&nbsp;clients&nbsp;(all&nbsp;clients&nbsp;bind&nbsp;to&nbsp;the&nbsp;same&nbsp;topic&nbsp;exchange)&lt;br&gt;<br>
-&nbsp;P2P&nbsp;request-response,&nbsp;where&nbsp;back-end&nbsp;responds&nbsp;to&nbsp;client&nbsp;requests&nbsp;(all&nbsp;clients&nbsp;send&nbsp;to&nbsp;the&nbsp;same&nbsp;request&nbsp;queue)&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;have&nbsp;only&nbsp;one&nbsp;back-end&nbsp;server&nbsp;that&nbsp;serves&nbsp;the&nbsp;clients.&nbsp;Of&nbsp;course&nbsp;the&nbsp;back-end&nbsp;would&nbsp;have&nbsp;to&nbsp;publish&nbsp;broadcasts&nbsp;to&nbsp;and&nbsp;consume&nbsp;requests&nbsp;from&nbsp;both&nbsp;brokers.&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;one&nbsp;broker&nbsp;dies,&nbsp;the&nbsp;clients&nbsp;will&nbsp;re-connect&nbsp;via&nbsp;load&nbsp;balancer&nbsp;to&nbsp;the&nbsp;other&nbsp;broker&nbsp;and&nbsp;continue.&nbsp;Of&nbsp;course&nbsp;any&nbsp;messages&nbsp;on&nbsp;the&nbsp;dead&nbsp;broker&nbsp;will&nbsp;be&nbsp;lost.&nbsp;We&nbsp;don&amp;#39;t&nbsp;use&nbsp;persistent&nbsp;messages&nbsp;and&nbsp;can&nbsp;live&nbsp;with&nbsp;messages&nbsp;being&nbsp;lost.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
So&nbsp;far&nbsp;I&nbsp;have&nbsp;only&nbsp;identified&nbsp;one&nbsp;problem&nbsp;-&nbsp;the&nbsp;order&nbsp;of&nbsp;message&nbsp;delivery&nbsp;across&nbsp;brokers.&nbsp;Since&nbsp;the&nbsp;design&nbsp;of&nbsp;our&nbsp;client-server&nbsp;interface&nbsp;relies&nbsp;on&nbsp;the&nbsp;guaranteed&nbsp;order&nbsp;of&nbsp;message&nbsp;delivery,&nbsp;we&nbsp;would&nbsp;probably&nbsp;have&nbsp;to&nbsp;force&nbsp;clients&nbsp;to&nbsp;put&nbsp;request&nbsp;sequence&nbsp;numbers&nbsp;to&nbsp;message&nbsp;headers,&nbsp;remember&nbsp;the&nbsp;last&nbsp;seen&nbsp;request&nbsp;number&nbsp;on&nbsp;the&nbsp;back-end&nbsp;for&nbsp;each&nbsp;client,&nbsp;and&nbsp;throw&nbsp;away&nbsp;any&nbsp;requests&nbsp;out&nbsp;of&nbsp;order.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Any&nbsp;ideas&nbsp;or&nbsp;hints&nbsp;will&nbsp;be&nbsp;much&nbsp;appreciated.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers&lt;br&gt;<br>
&lt;br&gt;<br>
Jiri&lt;br&gt;<br>
Deutsche&nbsp;Boerse&nbsp;Systems&nbsp;AG&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
