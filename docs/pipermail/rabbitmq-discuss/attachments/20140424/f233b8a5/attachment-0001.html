<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;We&nbsp;have&nbsp;a&nbsp;similar&nbsp;setup&nbsp;with&nbsp;our&nbsp;F5&nbsp;LB&nbsp;-&nbsp;exposing&nbsp;a&nbsp;VIP&nbsp;to&nbsp;the&nbsp;application&nbsp;and&nbsp;checking&nbsp;the&nbsp;health&nbsp;of&nbsp;the&nbsp;nodes&nbsp;from&nbsp;the&nbsp;F5&nbsp;by&nbsp;querying&nbsp;the&nbsp;api.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-ronc&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Apr&nbsp;24,&nbsp;2014&nbsp;at&nbsp;11:52&nbsp;AM,&nbsp;Arun&nbsp;Rao&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:arunrao.seattle@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;arunrao.seattle@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;am&nbsp;using&nbsp;Load&nbsp;Balancer&nbsp;(F5).&nbsp;I&nbsp;am&nbsp;using&nbsp;Producer&nbsp;VIP&nbsp;separately&nbsp;from&nbsp;Consumer&nbsp;VIP.&nbsp;This&nbsp;gives&nbsp;me&nbsp;a&nbsp;lot&nbsp;of&nbsp;flexibility&nbsp;when&nbsp;doing&nbsp;maintenance.&nbsp;For&nbsp;Producer&nbsp;VIP,&nbsp;I&nbsp;am&nbsp;using&nbsp;a&nbsp;API&nbsp;health&nbsp;http://&lt;hostname&gt;:15672/api/aliveness-test/&lt;vhost&gt;&nbsp;and&nbsp;looking&nbsp;for&nbsp;&quot;status&quot;:&quot;ok&quot;&nbsp;result.Â &lt;div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;consumer&nbsp;VIP,&nbsp;I&nbsp;am&nbsp;just&nbsp;using&nbsp;TCP&nbsp;Half-open.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTH,&lt;/div&gt;&lt;div&gt;-arun.&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Apr&nbsp;24,&nbsp;2014&nbsp;at&nbsp;10:01&nbsp;AM,&nbsp;vish.ramachandran&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:vish.ramachandran@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;vish.ramachandran@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hello&nbsp;RabbitMq&nbsp;Team,&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;are&nbsp;caught&nbsp;in&nbsp;a&nbsp;decision&nbsp;point&nbsp;on&nbsp;whether&nbsp;to&nbsp;choose&nbsp;a&nbsp;load&nbsp;balancer&nbsp;in&lt;br&gt;<br>
front&nbsp;of&nbsp;cluster&nbsp;members&nbsp;or&nbsp;to&nbsp;choose&nbsp;a&nbsp;setup&nbsp;where&nbsp;the&nbsp;list&nbsp;of&nbsp;cluster&lt;br&gt;<br>
members&nbsp;is&nbsp;baked&nbsp;into&nbsp;client&nbsp;configuration.&lt;br&gt;<br>
&lt;br&gt;<br>
Data&nbsp;points:&lt;br&gt;<br>
&lt;br&gt;<br>
1.&nbsp;We&nbsp;are&nbsp;using&nbsp;clustered&nbsp;rmqs&nbsp;mainly&nbsp;for&nbsp;high&nbsp;availability.&nbsp;Our&nbsp;queues&nbsp;are&lt;br&gt;<br>
set&nbsp;up&nbsp;for&nbsp;HA&nbsp;in&nbsp;this&nbsp;setup.&lt;br&gt;<br>
&lt;br&gt;<br>
2.&nbsp;Scalability&nbsp;is&nbsp;not&nbsp;a&nbsp;concern&nbsp;yet.&nbsp;We&nbsp;don&#39;t&nbsp;expect&nbsp;to&nbsp;add&nbsp;new&nbsp;members&nbsp;to&lt;br&gt;<br>
the&nbsp;cluster&nbsp;dynamically.&nbsp;Dynamic&nbsp;DNS&nbsp;is&nbsp;a&nbsp;possibility&nbsp;for&nbsp;recovering&nbsp;any&lt;br&gt;<br>
failed&nbsp;nodes.&lt;br&gt;<br>
&lt;br&gt;<br>
3.&nbsp;We&nbsp;are&nbsp;using&nbsp;libraries&nbsp;like&nbsp;Spring&nbsp;AMQP&nbsp;and&nbsp;SStone&nbsp;that&nbsp;provide&nbsp;for&lt;br&gt;<br>
automatic&nbsp;reconnect/failover.&nbsp;This&nbsp;takes&nbsp;care&nbsp;of&nbsp;consumption.&nbsp;We&nbsp;also&nbsp;plan&lt;br&gt;<br>
to&nbsp;design&nbsp;clients&nbsp;to&nbsp;retry&nbsp;publishing&nbsp;upon&nbsp;failure.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Questions:&lt;br&gt;<br>
&lt;br&gt;<br>
1.&nbsp;We&nbsp;would&nbsp;like&nbsp;to&nbsp;detect&nbsp;failed&nbsp;connections&nbsp;quickly&nbsp;on&nbsp;the&nbsp;client&nbsp;side.&nbsp;We&lt;br&gt;<br>
wonder&nbsp;whether&nbsp;TCP&nbsp;load&nbsp;balancers&nbsp;do&nbsp;a&nbsp;good&nbsp;job&nbsp;of&nbsp;detecting&nbsp;failed&lt;br&gt;<br>
connections&nbsp;or&nbsp;sit&nbsp;on&nbsp;a&nbsp;bad&nbsp;connection&nbsp;till&nbsp;a&nbsp;real&nbsp;problem&nbsp;is&nbsp;seen.&lt;br&gt;<br>
&lt;br&gt;<br>
2.&nbsp;If&nbsp;clients&nbsp;deal&nbsp;with&nbsp;the&nbsp;cluster&nbsp;members&nbsp;directly,&nbsp;is&nbsp;it&nbsp;any&nbsp;better?&nbsp;Can&lt;br&gt;<br>
the&nbsp;RMQ&nbsp;client&nbsp;library&nbsp;(like&nbsp;sstone&nbsp;or&nbsp;spring&nbsp;amqp)&nbsp;do&nbsp;a&nbsp;better&nbsp;job&nbsp;at&lt;br&gt;<br>
detecting&nbsp;failures&nbsp;quicker&nbsp;than&nbsp;load&nbsp;balancers?&lt;br&gt;<br>
&lt;br&gt;<br>
3.&nbsp;Can&nbsp;the&nbsp;actual&nbsp;consumers&nbsp;and&nbsp;publishers&nbsp;(clients&nbsp;of&nbsp;the&nbsp;RMQ&nbsp;libraries)&lt;br&gt;<br>
take&nbsp;any&nbsp;special&nbsp;action&nbsp;to&nbsp;detect&nbsp;and&nbsp;recover&nbsp;from&nbsp;failures&nbsp;quickly?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&lt;br&gt;<br>
Vish&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&lt;br&gt;<br>
Vish&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/High-Availability-and-Load-Balancers-tp35058.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://rabbitmq.1065348.n5.nabble.com/High-Availability-and-Load-Balancers-tp35058.html&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
Sent&nbsp;from&nbsp;the&nbsp;RabbitMQ&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
