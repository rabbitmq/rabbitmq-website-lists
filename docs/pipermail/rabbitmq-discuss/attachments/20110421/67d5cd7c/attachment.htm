<tt>
Hello,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;ve&nbsp;a&nbsp;stock&nbsp;installation&nbsp;of&nbsp;rabbitmq&nbsp;using&nbsp;apt-get&nbsp;on&nbsp;Ubuntu&nbsp;11.04&nbsp;and&nbsp;I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;run&nbsp;a&nbsp;simple&nbsp;producer/consumer&nbsp;performance&nbsp;test. You&nbsp;can&nbsp;see&nbsp;the&nbsp;Scala&nbsp;code&nbsp;at &lt;a&nbsp;href=&quot;https://gist.github.com/935196&quot;&gt;https://gist.github.com/935196&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;one&nbsp;producer&nbsp;thread&nbsp;which&nbsp;sleeps&nbsp;for&nbsp;a&nbsp;second&nbsp;after&nbsp;publishing&nbsp;2K&nbsp;messages&nbsp;and&nbsp;4&nbsp;consumer&nbsp;threads&nbsp;which&nbsp;are&nbsp;all&nbsp;waiting&nbsp;for&nbsp;messages&nbsp;to&nbsp;arrive.&nbsp;Running&nbsp;the&nbsp;program&nbsp;on&nbsp;the&nbsp;same&nbsp;host&nbsp;as&nbsp;rabbitmq,&nbsp;I&nbsp;see&nbsp;the&nbsp;following&nbsp;numbers:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Produced:&nbsp;20000&nbsp;throughput:&nbsp;1966.955153422502&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Consumed:&nbsp;17410&nbsp;throughput:&nbsp;1712.234461054288&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Produced:&nbsp;40000&nbsp;throughput:&nbsp;1982.6517967781908&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Consumed:&nbsp;31624&nbsp;throughput:&nbsp;1567.4845105328377&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Produced:&nbsp;60000&nbsp;throughput:&nbsp;1988.3351007423119&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Consumed:&nbsp;45201&nbsp;throughput:&nbsp;1497.9122481442207&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Produced:&nbsp;78000&nbsp;throughput:&nbsp;1941.4575866188768&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Consumed:&nbsp;45221&nbsp;throughput:&nbsp;1125.5724810832337&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Produced:&nbsp;98000&nbsp;throughput:&nbsp;1953.125&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Consumed:&nbsp;60884&nbsp;throughput:&nbsp;1213.4088010204082&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Produced:&nbsp;118000&nbsp;throughput:&nbsp;1960.882064576167&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Consumed:&nbsp;62019&nbsp;throughput:&nbsp;1030.6097013809263&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Produced:&nbsp;138000&nbsp;throughput:&nbsp;1966.4562463485186&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;Consumed:&nbsp;62023&nbsp;throughput:&nbsp;883.8080852701027&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;rate&nbsp;of&nbsp;consumption&nbsp;keeps&nbsp;dropping.&nbsp;CPU&nbsp;usage&nbsp;of&nbsp;rabbitmq&nbsp;is&nbsp;constant&nbsp;at&nbsp;approx&nbsp;170%.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;remove&nbsp;throttling&nbsp;from&nbsp;the&nbsp;producers,&nbsp;the&nbsp;rate&nbsp;of&nbsp;consumption&nbsp;becomes abysmally low. Is&nbsp;the&nbsp;default&nbsp;rabbitmq&nbsp;configuration&nbsp;very&nbsp;slow?&nbsp;Am&nbsp;I&nbsp;doing&nbsp;something&nbsp;wrong?&lt;/div&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;div&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Regards,&lt;br&gt;Shalin&nbsp;Shekhar&nbsp;Mangar.&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
