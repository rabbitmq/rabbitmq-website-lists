<tt>
&lt;div&gt;Regarding:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&amp;quot;I&nbsp;recreated&nbsp;some&nbsp;bindings&nbsp;from&nbsp;within&nbsp;the&nbsp;broker&nbsp;(directly&nbsp;in&nbsp;mnesia)&nbsp;and&nbsp;now&nbsp;things&nbsp;started&nbsp;working&nbsp;again.&nbsp;Is&nbsp;there&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;re-create&nbsp;the&nbsp;binding&nbsp;to&nbsp;the&nbsp;default&nbsp;exchange&nbsp;without&nbsp;having&nbsp;to&nbsp;re-create&nbsp;the&nbsp;queue?&amp;quot;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;should&nbsp;probably&nbsp;mention&nbsp;that&nbsp;sending&nbsp;the&nbsp;following&nbsp;queue.bind&nbsp;packet&nbsp;didn&amp;#39;t&nbsp;seem&nbsp;to&nbsp;help&nbsp;(rabbitmqctl&nbsp;list_bindings&nbsp;still&nbsp;shows&nbsp;the&nbsp;binding&nbsp;missing).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;[:sending,&lt;/div&gt;&lt;div&gt;<br>
 #&amp;lt;AMQP::Protocol::Queue::Bind:0x9b26778&lt;/div&gt;&lt;div&gt;  @arguments=nil,&lt;/div&gt;&lt;div&gt;  @debug=1,&lt;/div&gt;&lt;div&gt;  @exchange=&lt;/div&gt;&lt;div&gt;  &nbsp;&amp;quot;nanite-rs-instance-fd0416fe31d7b019112c2c0adce9b4e4a261bab1-1094976&amp;quot;,&lt;/div&gt;&lt;div&gt;<br>
  @nowait=true,&lt;/div&gt;&lt;div&gt;  @queue=&amp;quot;nanite-rs-instance-fd0416fe31d7b019112c2c0adce9b4e4a261bab1-1094976&amp;quot;,&lt;/div&gt;&lt;div&gt;  @routing_key=nil,&lt;/div&gt;&lt;div&gt;  @ticket=1&amp;gt;]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;Raphael&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jun&nbsp;17,&nbsp;2010&nbsp;at&nbsp;11:34&nbsp;PM,&nbsp;Raphael&nbsp;Simon&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:raphael@rightscale.com&quot;&gt;raphael@rightscale.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Matthias,&nbsp;thanks&nbsp;for&nbsp;following&nbsp;up.&nbsp; Please&nbsp;see&nbsp;my&nbsp;answers&nbsp;inline.&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Thu,&nbsp;Jun&nbsp;17,&nbsp;2010&nbsp;at&nbsp;10:52&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Raphael,&lt;br&gt;<br>
&lt;br&gt;<br>
Raphael&nbsp;Simon&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Running&nbsp;some&nbsp;queries&nbsp;on&nbsp;the&nbsp;broker&nbsp;shows&nbsp;that&nbsp;the&nbsp;queue&nbsp;route&nbsp;is&nbsp;indeed&nbsp;gone&nbsp;from&nbsp;mnesia&nbsp;while&nbsp;the&nbsp;exchange&nbsp;route&nbsp;still&nbsp;exists:&nbsp; [...]&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Simply&nbsp;running&nbsp;&amp;#39;rabbitmqctl&nbsp;list_bindings&amp;#39;&nbsp;should&nbsp;give&nbsp;the&nbsp;same&nbsp;results.&nbsp;Please&nbsp;do&nbsp;that,&nbsp;just&nbsp;to&nbsp;check.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Yes&nbsp;indeed&nbsp;but&nbsp;where&nbsp;is&nbsp;the&nbsp;fun&nbsp;in&nbsp;doing&nbsp;that?&nbsp;OK&nbsp;more&nbsp;seriously&nbsp;I&nbsp;did&nbsp;not&nbsp;understand&nbsp;the&nbsp;subtlety&nbsp;of&nbsp;the&nbsp;empty&nbsp;spaces,&nbsp;now&nbsp;I&nbsp;do&nbsp;(as&nbsp;a&nbsp;side&nbsp;note&nbsp;it&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;have&nbsp;something&nbsp;rather&nbsp;than&nbsp;blank&nbsp;in&nbsp;this&nbsp;case&nbsp;maybe&nbsp;***&nbsp;or&nbsp;---).&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;div&gt;  &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
It&nbsp;looks&nbsp;like&nbsp;the&nbsp;binding&nbsp;to&nbsp;the&nbsp;default&nbsp;exchange&nbsp;has&nbsp;vanished.&nbsp;That&nbsp;really&nbsp;should&nbsp;only&nbsp;ever&nbsp;happen&nbsp;if&nbsp;the&nbsp;queue&nbsp;is&nbsp;deleted&nbsp;or&nbsp;that&nbsp;binding&nbsp;is&nbsp;removed&nbsp;explicitly.&nbsp;Could&nbsp;the&nbsp;latter&nbsp;have&nbsp;happened?&nbsp;It&amp;#39;s&nbsp;actually&nbsp;a&nbsp;grey&nbsp;area&nbsp;of&nbsp;the&nbsp;spec;&nbsp;imo&nbsp;it&nbsp;should&nbsp;not&nbsp;be&nbsp;allowed,&nbsp;but&nbsp;rabbit&nbsp;does&nbsp;currently&nbsp;permit&nbsp;it.&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;No&nbsp;I&nbsp;can&amp;#39;t&nbsp;think&nbsp;of&nbsp;a&nbsp;place&nbsp;where&nbsp;we&nbsp;would&nbsp;delete&nbsp;a&nbsp;binding.&nbsp;We&nbsp;only&nbsp;ever&nbsp;delete&nbsp;queues.&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Is&nbsp;the&nbsp;default&nbsp;exchange&nbsp;itself&nbsp;still&nbsp;there?&nbsp;Check&nbsp;with&nbsp;&amp;#39;rabbitmqctl&nbsp;list_exchanges&amp;#39;.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Yes&nbsp;the&nbsp;exchange&nbsp;still&nbsp;exists.&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Is&nbsp;this&nbsp;reproducible&nbsp;at&nbsp;all?&nbsp;I&nbsp;suspect&nbsp;not&nbsp;:(&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;No&nbsp;it&nbsp;has&nbsp;only&nbsp;happens&nbsp;about&nbsp;15&nbsp;times&nbsp;on&nbsp;the&nbsp;course&nbsp;of&nbsp;two&nbsp;days.&nbsp;During&nbsp;these&nbsp;two&nbsp;days&nbsp;our&nbsp;system&nbsp;was&nbsp;having&nbsp;issues&nbsp;and&nbsp;weird&nbsp;things&nbsp;could&nbsp;have&nbsp;happened&nbsp;on&nbsp;the&nbsp;broker&nbsp;(e.g.&nbsp;the&nbsp;queue&nbsp;could&nbsp;have&nbsp;been&nbsp;deleted&nbsp;and&nbsp;recreated).&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
What&nbsp;version&nbsp;of&nbsp;rabbit&nbsp;are&nbsp;you&nbsp;running?&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;1.7.2&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;still&nbsp;don&amp;#39;t&nbsp;understand&nbsp;what&nbsp;scenario&nbsp;could&nbsp;cause&nbsp;this&nbsp;to&nbsp;happen&nbsp;though&nbsp;especially&nbsp;since&nbsp;the&nbsp;exchange&nbsp;is&nbsp;auto-delete&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Interesting.&nbsp;auto-delete&nbsp;exchanges&nbsp;are&nbsp;very&nbsp;rare.&nbsp;In&nbsp;fact&nbsp;I&nbsp;do&nbsp;not&nbsp;know&nbsp;of&nbsp;anybody&nbsp;else&nbsp;using&nbsp;them.&nbsp;So&nbsp;it&amp;#39;s&nbsp;possible&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;that&nbsp;code&nbsp;that&nbsp;has&nbsp;laid&nbsp;dormant&nbsp;for&nbsp;years.&nbsp;Can&nbsp;you&nbsp;explain&nbsp;your&nbsp;use-case&nbsp;for&nbsp;auto-delete&nbsp;exchanges?&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Embarrassingly&nbsp;enough,&nbsp;I&nbsp;can&amp;#39;t&nbsp;:)&nbsp;The&nbsp;fact&nbsp;that&nbsp;we&nbsp;are&nbsp;using&nbsp;direct&nbsp;exchanges&nbsp;for&nbsp;these&nbsp;queues&nbsp;was&nbsp;a&nbsp;bug&nbsp;we&nbsp;introduced,&nbsp;we&nbsp;will&nbsp;be&nbsp;removing&nbsp;them.&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt; &lt;/div&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;br&gt;<br>
Also,&nbsp;what&nbsp;version&nbsp;of&nbsp;rabbit&nbsp;are&nbsp;you&nbsp;running?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;1.7.2&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;recreated&nbsp;some&nbsp;bindings&nbsp;from&nbsp;within&nbsp;the&nbsp;broker&nbsp;(directly&nbsp;in&nbsp;mnesia)&nbsp;and&nbsp;now&nbsp;things&nbsp;started&nbsp;working&nbsp;again.&nbsp;Is&nbsp;there&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;re-create&nbsp;the&nbsp;binding&nbsp;to&nbsp;the&nbsp;default&nbsp;exchange&nbsp;without&nbsp;having&nbsp;to&nbsp;re-create&nbsp;the&nbsp;queue?&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Obviously&nbsp;I&amp;#39;m&nbsp;still&nbsp;very&nbsp;much&nbsp;interested&nbsp;in&nbsp;finding&nbsp;out&nbsp;what&nbsp;could&nbsp;have&nbsp;caused&nbsp;the&nbsp;binding&nbsp;to&nbsp;be&nbsp;deleted&nbsp;in&nbsp;the&nbsp;first&nbsp;place.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;<br>
Raphael. &lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
