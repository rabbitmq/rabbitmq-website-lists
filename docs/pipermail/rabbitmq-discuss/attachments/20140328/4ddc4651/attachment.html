<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;style=&quot;word-wrap:break-word;&nbsp;color:rgb(0,0,0);&nbsp;font-size:14px;&nbsp;font-family:Calibri,sans-serif&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;quick&nbsp;response.&nbsp;That&nbsp;is&nbsp;exactly&nbsp;what&nbsp;I&nbsp;am&nbsp;facing&nbsp;right&nbsp;now.&nbsp;Will&nbsp;try&nbsp;the&nbsp;ack&nbsp;mode&nbsp;to&nbsp;None.&nbsp;Thank&nbsp;you.&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-size:14px;&nbsp;line-height:normal&quot;&gt;<br>
&lt;div&gt;&lt;/div&gt;<br>
&lt;/span&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;font-size:14px&quot;&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;span&nbsp;id=&quot;OLK_SRC_BODY_SECTION&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri;&nbsp;font-size:11pt;&nbsp;text-align:left;&nbsp;color:black;&nbsp;border-bottom:medium&nbsp;none;&nbsp;border-left:medium&nbsp;none;&nbsp;padding-bottom:0in;&nbsp;padding-left:0in;&nbsp;padding-right:0in;&nbsp;border-top:#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;border-right:medium&nbsp;none;&nbsp;padding-top:3pt&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;From:&nbsp;&lt;/span&gt;Gary&nbsp;Russell&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:grussell@gopivotal.com&quot;&gt;grussell@gopivotal.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Reply-To:&nbsp;&lt;/span&gt;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Date:&nbsp;&lt;/span&gt;Thursday,&nbsp;March&nbsp;27,&nbsp;2014&nbsp;8:53&nbsp;PM&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;To:&nbsp;&lt;/span&gt;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Subject:&nbsp;&lt;/span&gt;Re:&nbsp;[rabbitmq-discuss]&nbsp;Spring&nbsp;amqp&nbsp;-&nbsp;auto&nbsp;acknowledge&nbsp;from&nbsp;consumer&nbsp;taking&nbsp;almost&nbsp;a&nbsp;minute&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Yes;&nbsp;that&nbsp;assumption&nbsp;is&nbsp;wrong;&nbsp;in&nbsp;Spring-AMQP,&nbsp;ack&nbsp;mode&nbsp;AUTO&nbsp;means&nbsp;the&nbsp;container&nbsp;will&nbsp;automatically&nbsp;ack&nbsp;the&nbsp;message&nbsp;on&nbsp;completion.&nbsp;NONE&nbsp;is&nbsp;the&nbsp;equivalent&nbsp;of&nbsp;rabbit&nbsp;auto-ack.<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Be&nbsp;aware&nbsp;that&nbsp;this&nbsp;can&nbsp;cause&nbsp;OOM&nbsp;issues&nbsp;with&nbsp;spring-AMQP&nbsp;versions&nbsp;prior&nbsp;to&nbsp;1.3.0,&nbsp;if&nbsp;the&nbsp;consumers&nbsp;can't&nbsp;keep&nbsp;up&nbsp;with&nbsp;the&nbsp;workload&nbsp;because&nbsp;the&nbsp;broker&nbsp;will&nbsp;keep&nbsp;pumping&nbsp;messages&nbsp;to&nbsp;the&nbsp;client.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Gary&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;27,&nbsp;2014&nbsp;at&nbsp;11:45&nbsp;PM,&nbsp;Anita&nbsp;Yip&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;&lt;a&nbsp;href=&quot;mailto:Anita.Yip@realpage.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Anita.Yip@realpage.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;&nbsp;border-left:1px&nbsp;#ccc&nbsp;solid;&nbsp;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-size:14px;&nbsp;font-family:Calibri,sans-serif;&nbsp;word-wrap:break-word&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;spring&nbsp;amqp&nbsp;based&nbsp;application&nbsp;where&nbsp;the&nbsp;consumer&nbsp;is&nbsp;taking&nbsp;very&nbsp;long&nbsp;time&nbsp;to&nbsp;send&nbsp;acknowledgement.&nbsp;In&nbsp;RabbitMq&nbsp;management&nbsp;plugin,&nbsp;I&nbsp;see&nbsp;it&nbsp;in&nbsp;Unacknowledged&nbsp;state&nbsp;for&nbsp;almost&nbsp;a&nbsp;whole&nbsp;minute.I&nbsp;am&nbsp;currently&nbsp;testing&nbsp;this&nbsp;code&nbsp;by&nbsp;publishing&nbsp;only&nbsp;one<br>
&nbsp;message.&nbsp;But&nbsp;my&nbsp;prefetch&nbsp;count&nbsp;and&nbsp;transaction&nbsp;size&nbsp;are&nbsp;a&nbsp;50&nbsp;and&nbsp;30&nbsp;respectively.&nbsp;Could&nbsp;this&nbsp;be&nbsp;any&nbsp;reason&nbsp;for&nbsp;the&nbsp;issue?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;My&nbsp;consumer&nbsp;has&nbsp;heavy&nbsp;processing.&nbsp;But&nbsp;since&nbsp;it&nbsp;is&nbsp;in&nbsp;auto&nbsp;acknowledge&nbsp;mode,&nbsp;I&nbsp;believe,&nbsp;the&nbsp;message&nbsp;will&nbsp;be&nbsp;acknowledged&nbsp;immediately&nbsp;after&nbsp;the&nbsp;consumer&nbsp;receives&nbsp;it&nbsp;and&nbsp;before&nbsp;it&nbsp;start&nbsp;processing&nbsp;the&nbsp;message.&nbsp;Is&nbsp;this&nbsp;assumption&nbsp;wrong?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Thanks,&lt;/div&gt;<br>
&lt;div&gt;Anita&nbsp;&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin-bottom:0.0001pt;&nbsp;font-family:Calibri,sans-serif&quot;&gt;<br>
&lt;/p&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;span&nbsp;style=&quot;font-size:14px;&nbsp;line-height:normal&quot;&gt;<br>
&lt;div&gt;&lt;/div&gt;<br>
&lt;/span&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;font-size:14px&quot;&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;hr&gt;<br>
&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;color=&quot;Gray&quot;&nbsp;size=&quot;1&quot;&gt;&lt;br&gt;<br>
This&nbsp;message&nbsp;is&nbsp;intended&nbsp;only&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;individual(s)&nbsp;or&nbsp;entity&nbsp;to&nbsp;which&nbsp;it&nbsp;is&nbsp;addressed&nbsp;and&nbsp;may&nbsp;contain&nbsp;information&nbsp;that&nbsp;is&nbsp;privileged,&nbsp;confidential,&nbsp;and/or&nbsp;proprietary&nbsp;to&nbsp;RealPage&nbsp;and&nbsp;its&nbsp;affiliated&nbsp;companies.&nbsp;If&nbsp;the&nbsp;reader&nbsp;of&nbsp;this&nbsp;message&nbsp;is&nbsp;not<br>
&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;you&nbsp;are&nbsp;hereby&nbsp;notified&nbsp;that&nbsp;any&nbsp;dissemination,&nbsp;distribution,&nbsp;forwarding&nbsp;or&nbsp;copying&nbsp;of&nbsp;this&nbsp;communication&nbsp;is&nbsp;prohibited&nbsp;without&nbsp;the&nbsp;express&nbsp;permission&nbsp;of&nbsp;the&nbsp;sender.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;communication&nbsp;in&nbsp;error,&nbsp;please&nbsp;notify&nbsp;the<br>
&nbsp;sender&nbsp;immediately&nbsp;and&nbsp;delete&nbsp;the&nbsp;original&nbsp;message.&lt;br&gt;<br>
&lt;/font&gt;&lt;/div&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/span&gt;&lt;br&gt;<br>
&lt;hr&gt;<br>
&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;color=&quot;Gray&quot;&nbsp;size=&quot;1&quot;&gt;&lt;br&gt;<br>
This&nbsp;message&nbsp;is&nbsp;intended&nbsp;only&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;individual(s)&nbsp;or&nbsp;entity&nbsp;to&nbsp;which&nbsp;it&nbsp;is&nbsp;addressed&nbsp;and&nbsp;may&nbsp;contain&nbsp;information&nbsp;that&nbsp;is&nbsp;privileged,&nbsp;confidential,&nbsp;and/or&nbsp;proprietary&nbsp;to&nbsp;RealPage&nbsp;and&nbsp;its&nbsp;affiliated&nbsp;companies.&nbsp;If&nbsp;the&nbsp;reader&nbsp;of&nbsp;this&nbsp;message&nbsp;is&nbsp;not<br>
&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;you&nbsp;are&nbsp;hereby&nbsp;notified&nbsp;that&nbsp;any&nbsp;dissemination,&nbsp;distribution,&nbsp;forwarding&nbsp;or&nbsp;copying&nbsp;of&nbsp;this&nbsp;communication&nbsp;is&nbsp;prohibited&nbsp;without&nbsp;the&nbsp;express&nbsp;permission&nbsp;of&nbsp;the&nbsp;sender.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;communication&nbsp;in&nbsp;error,&nbsp;please&nbsp;notify&nbsp;the<br>
&nbsp;sender&nbsp;immediately&nbsp;and&nbsp;delete&nbsp;the&nbsp;original&nbsp;message.&lt;br&gt;<br>
&lt;/font&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
