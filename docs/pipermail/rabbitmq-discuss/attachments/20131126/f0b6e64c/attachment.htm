<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;Hello&nbsp;Everyone,&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;a&nbsp;small&nbsp;problem&nbsp;with&nbsp;RMQ&nbsp;and&nbsp;pika&nbsp;client&nbsp;and&nbsp;would&nbsp;like&nbsp;to&nbsp;ask&nbsp;guyz&nbsp;here&nbsp;for&nbsp;some&nbsp;help.&nbsp;The&nbsp;situation&nbsp;is&nbsp;as&nbsp;below,&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;using&nbsp;RabbitMQ&nbsp;with&nbsp;the&nbsp;pika&nbsp;clients&nbsp;in&nbsp;a&nbsp;scalable&nbsp;solution.&nbsp;The&nbsp;solution&nbsp;requires&nbsp;messaging&nbsp;with&nbsp;two&nbsp;priorities.&nbsp;So&nbsp;every&nbsp;worker&nbsp;(through&nbsp;pika&nbsp;client)&nbsp;gets&nbsp;messages&nbsp;from&nbsp;the&nbsp;HighPriority&nbsp;Queue&nbsp;first&nbsp;and&nbsp;then&nbsp;goes&nbsp;to&nbsp;the&nbsp;Low&nbsp;Priority&nbsp;queue&nbsp;if&nbsp;there&nbsp;are&nbsp;no&nbsp;messages&nbsp;left&nbsp;in&nbsp;the&nbsp;HP&nbsp;Queue.&nbsp;I&nbsp;decide&nbsp;to&nbsp;scale&nbsp;the&nbsp;number&nbsp;of&nbsp;workers&nbsp;according&nbsp;to&nbsp;the&nbsp;number&nbsp;of&nbsp;ready&nbsp;messages&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;consumers&nbsp;attached&nbsp;to&nbsp;the&nbsp;queue.&nbsp;So&nbsp;the&nbsp;following&nbsp;is&nbsp;the&nbsp;workflow&nbsp;i&nbsp;follow&nbsp;to&nbsp;achieve&nbsp;the&nbsp;above.&lt;br&gt;&lt;br&gt;1)&nbsp;Register&nbsp;using&amp;nbsp;&nbsp;basic_consume&nbsp;on&nbsp;the&nbsp;queue.&lt;br&gt;2)&nbsp;Do&nbsp;basic_get&nbsp;from&nbsp;HP&nbsp;Queue&lt;br&gt;3)If&nbsp;no&nbsp;messages&nbsp;in&nbsp;HP&nbsp;Queue&nbsp;do&nbsp;a&nbsp;basic_get&nbsp;from&nbsp;LP&nbsp;Queue.&lt;br&gt;&lt;br&gt;I&nbsp;donot&nbsp;execute&nbsp;start_consuming()&nbsp;so<br>
&nbsp;the&nbsp;basic_consume&nbsp;is&nbsp;just&nbsp;for&nbsp;the&nbsp;number&nbsp;of&nbsp;consumers&nbsp;count&nbsp;in&nbsp;the&nbsp;RMQ&nbsp;server.&lt;br&gt;&lt;br&gt;This&nbsp;logic&nbsp;works&nbsp;perfectly&nbsp;fine&nbsp;with&nbsp;the&nbsp;standard&nbsp;Java&nbsp;Client.&nbsp;But&nbsp;when&nbsp;i&nbsp;try&nbsp;to&nbsp;do&nbsp;the&nbsp;same&nbsp;with&nbsp;the&nbsp;Pika&nbsp;Client,&nbsp;the&nbsp;moment&nbsp;the&nbsp;basic_consume&nbsp;is&nbsp;called&nbsp;the&nbsp;data&nbsp;events&nbsp;are&nbsp;processed&nbsp;and&nbsp;the&nbsp;callback&nbsp;function&nbsp;is&nbsp;executed&nbsp;on&nbsp;the&nbsp;incoming&nbsp;message,&nbsp;eventhough&nbsp;the&nbsp;start_consuming()&nbsp;function&nbsp;is&nbsp;not&nbsp;called.&lt;br&gt;&lt;br&gt;So,&nbsp;a&nbsp;couple&nbsp;of&nbsp;questions&nbsp;here,&lt;br&gt;&lt;br&gt;1.&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;register&nbsp;as&nbsp;a&nbsp;consumer&nbsp;to&nbsp;a&nbsp;queue&nbsp;without&nbsp;actually&nbsp;starting&nbsp;to&nbsp;consume&nbsp;from&nbsp;the&nbsp;queue&nbsp;(even&nbsp;a&nbsp;hack&nbsp;into&nbsp;the&nbsp;code&nbsp;is&nbsp;fine)&lt;br&gt;2.&nbsp;Is&nbsp;it&nbsp;bug&nbsp;that&nbsp;basic_consume()&nbsp;starts&nbsp;consuming&nbsp;without&nbsp;actually&nbsp;calling&nbsp;start_consuming()&nbsp;(the&nbsp;actual&nbsp;blocking&nbsp;function),&nbsp;and&nbsp;should&nbsp;i&nbsp;raise&nbsp;an&nbsp;issue&nbsp;in&nbsp;github&nbsp;regarding&nbsp;this&nbsp;?&lt;br&gt;&lt;br&gt;Last&nbsp;but&nbsp;not&nbsp;the&nbsp;least,&nbsp;the&nbsp;version&nbsp;of&nbsp;the&nbsp;rabbitMQ&nbsp;server&nbsp;is&nbsp;3.1.2&nbsp;and&nbsp;the&nbsp;pika&nbsp;client,&nbsp;i&nbsp;have&nbsp;tried&nbsp;both&nbsp;0.9.6&nbsp;and&nbsp;0.9.13&nbsp;with&nbsp;the&nbsp;above&nbsp;scenario.&lt;br&gt;&lt;br&gt;Thankyou<br>
&nbsp;everyone,&lt;br&gt;Maitreya&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
