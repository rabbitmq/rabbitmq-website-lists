<tt>
&lt;div&gt;Hi&nbsp;everybody,&nbsp;carrot&nbsp;eaters!&nbsp;:)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;am&nbsp;using&nbsp;rabbitmq-c&nbsp;driver.&lt;div&gt;&lt;br&gt;&lt;div&gt;Sometimes&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;publish&nbsp;a&nbsp;message&nbsp;(using&nbsp;basic&nbsp;publish&nbsp;method)&nbsp;from&nbsp;a&nbsp;thread&nbsp;that&nbsp;is&nbsp;acting&nbsp;like&nbsp;worker&nbsp;for&nbsp;sending&nbsp;messages,&nbsp;I&nbsp;am&nbsp;geting&nbsp;an&nbsp;error&nbsp;due&nbsp;to&nbsp;connection&nbsp;time&nbsp;out.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;try&nbsp;to&nbsp;close&nbsp;channel&nbsp;and&nbsp;connection&nbsp;to&nbsp;restablishing&nbsp;connection,&nbsp;I&nbsp;get&nbsp;broken&nbsp;pipe&nbsp;exception&nbsp;and&nbsp;consecuently&nbsp;I&nbsp;can&nbsp;not&nbsp;close&nbsp;the&nbsp;connection.&nbsp;After&nbsp;that,&nbsp;the&nbsp;worker&nbsp;enters&nbsp;in&nbsp;a&nbsp;new&nbsp;loop&nbsp;iteration&nbsp;and&nbsp;create&nbsp;a&nbsp;new&nbsp;socket,&nbsp;a&nbsp;new&nbsp;channel,&nbsp;a&nbsp;new&nbsp;connection&nbsp;...&nbsp;It&nbsp;seems&nbsp;that&nbsp;the&nbsp;server,&nbsp;due&nbsp;to&nbsp;exists&nbsp;two&nbsp;connections,&nbsp;does&nbsp;not&nbsp;send&nbsp;the&nbsp;messages&nbsp;to&nbsp;clients&nbsp;through&nbsp;the&nbsp;right&nbsp;connection&nbsp;and&nbsp;the&nbsp;messages&nbsp;never&nbsp;reaches&nbsp;the&nbsp;clients.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;the&nbsp;pseudocode&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;worker_sender()&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;while(1)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;opening_socket&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;logging_in&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;opening_channel&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;while(1)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;if(error(basic_publish())&nbsp;//here&nbsp;connection&nbsp;timeout&nbsp;error&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;break;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;closing_channel&nbsp;//here&nbsp;broken&nbsp;pipe&nbsp;exception&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;closing_connection&nbsp;//here&nbsp;broken&nbsp;pipe&nbsp;exception&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;destroy_connection&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;}&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;return&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;would&nbsp;be&nbsp;possible&nbsp;to&nbsp;solve&nbsp;this&nbsp;issue&nbsp;with&nbsp;other&nbsp;approach&nbsp;or&nbsp;some&nbsp;adjustment&nbsp;to&nbsp;the&nbsp;showed&nbsp;solution?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;in&nbsp;advance!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
