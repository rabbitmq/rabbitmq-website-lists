<tt>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;looks&nbsp;like&nbsp;to&nbsp;me&nbsp;that&nbsp;you&nbsp;have&nbsp;a&nbsp;non-standard&nbsp;pika&nbsp;install,&nbsp;perhaps&nbsp;the&nbsp;new&nbsp;debian&nbsp;package?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;say&nbsp;that&nbsp;because&nbsp;I&nbsp;see:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:&nbsp;solid;&nbsp;border-left-color:&nbsp;rgb(0,&nbsp;33,&nbsp;98);&nbsp;color:&nbsp;rgb(0,&nbsp;33,&nbsp;98);&nbsp;border-top-width:&nbsp;1px;&nbsp;border-right-width:&nbsp;1px;&nbsp;border-bottom-width:&nbsp;1px;&nbsp;border-left-width:&nbsp;1px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-left:&nbsp;10px;&nbsp;padding-right:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;&quot;&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:&nbsp;solid;&nbsp;border-left-color:&nbsp;rgb(0,&nbsp;33,&nbsp;98);&nbsp;color:&nbsp;rgb(0,&nbsp;33,&nbsp;98);&nbsp;border-top-width:&nbsp;1px;&nbsp;border-right-width:&nbsp;1px;&nbsp;border-bottom-width:&nbsp;1px;&nbsp;border-left-width:&nbsp;1px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-left:&nbsp;10px;&nbsp;padding-right:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:&nbsp;solid;&nbsp;border-left-color:&nbsp;rgb(0,&nbsp;33,&nbsp;98);&nbsp;color:&nbsp;rgb(0,&nbsp;33,&nbsp;98);&nbsp;border-top-width:&nbsp;1px;&nbsp;border-right-width:&nbsp;1px;&nbsp;border-bottom-width:&nbsp;1px;&nbsp;border-left-width:&nbsp;1px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-left:&nbsp;10px;&nbsp;padding-right:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&gt;/usr/local/lib/python2.7/dist-packages/pika/connection.py&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;And&nbsp;I'd&nbsp;expect&nbsp;something&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;/usr/lib/python2.7/site-packages/pika/connection.py&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;you&nbsp;use&nbsp;slocate&nbsp;or&nbsp;find&nbsp;to&nbsp;see&nbsp;if&nbsp;you&nbsp;have&nbsp;more&nbsp;than&nbsp;one&nbsp;version&nbsp;of&nbsp;pika&nbsp;installed?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;happens&nbsp;when&nbsp;you&nbsp;run&nbsp;the&nbsp;following&nbsp;in&nbsp;python2.7&nbsp;interactively?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;import&nbsp;pika&lt;/div&gt;&lt;div&gt;pika.__version__&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;style=&quot;color:&nbsp;#A0A0A8;&quot;&gt;On&nbsp;Tuesday,&nbsp;August&nbsp;16,&nbsp;2011&nbsp;at&nbsp;12:18&nbsp;PM,&nbsp;Matt&nbsp;Pietrek&nbsp;wrote:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;&lt;div&gt;&lt;div&gt;Alas,&nbsp;no&nbsp;luck&nbsp;with&nbsp;a&nbsp;Pika&nbsp;reinstall.&nbsp;I&nbsp;did&nbsp;a&nbsp;&quot;pip&nbsp;uninstall&quot;&nbsp;of&nbsp;what&nbsp;was&lt;br&gt;there,&nbsp;verified&nbsp;the&nbsp;files&nbsp;were&nbsp;removed,&nbsp;then&nbsp;&quot;pip&nbsp;install&quot;.&lt;br&gt;&lt;br&gt;All&nbsp;other&nbsp;aspects&nbsp;of&nbsp;my&nbsp;Pika-based&nbsp;code&nbsp;seem&nbsp;to&nbsp;work.&nbsp;I'm&nbsp;sending&nbsp;and&lt;br&gt;receiving&nbsp;1000's&nbsp;of&nbsp;messages&nbsp;before&nbsp;shutting&nbsp;down.&nbsp;It's&nbsp;only&nbsp;at&nbsp;shutdown&lt;br&gt;where&nbsp;the&nbsp;problem&nbsp;occurs.&lt;br&gt;&lt;br&gt;Does&nbsp;my&nbsp;shutdown&nbsp;sequence&nbsp;look&nbsp;OK?&nbsp;That&nbsp;is,&nbsp;calling&lt;br&gt;channel.stop_consuming()&nbsp;from&nbsp;a&nbsp;different&nbsp;thread&nbsp;than&nbsp;I&nbsp;called&lt;br&gt;.start_consuming&nbsp;on?&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;On&nbsp;8/16/11&nbsp;4:29&nbsp;AM,&nbsp;&quot;Marek&nbsp;Majkowski&quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;16,&nbsp;2011&nbsp;at&nbsp;00:36,&nbsp;Matt&nbsp;Pietrek&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mpietrek@hotmail.com&quot;&gt;mpietrek@hotmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;I'm&nbsp;getting&nbsp;the&nbsp;following&nbsp;error&nbsp;from&nbsp;code&nbsp;that&nbsp;used&nbsp;to&nbsp;work&nbsp;without&lt;br&gt;error&nbsp;until&nbsp;I&nbsp;did&nbsp;an&nbsp;&quot;apt-get&nbsp;upgrade&quot;&nbsp;today.&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;an&nbsp;Ubuntu&nbsp;11.04&nbsp;system&nbsp;running&nbsp;Python&nbsp;2.7&nbsp;and&nbsp;Pika&nbsp;0.95.&nbsp;Any&lt;br&gt;clues&nbsp;what's&nbsp;happening?&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;Nope.&nbsp;Maybe&nbsp;it's&nbsp;just&nbsp;a&nbsp;python&nbsp;installation&nbsp;issue?&lt;br&gt;&lt;br&gt;Can&nbsp;you&nbsp;try&nbsp;removing&nbsp;pika&nbsp;and&nbsp;installing&nbsp;it&nbsp;again?&nbsp;Or&nbsp;maybe&lt;br&gt;installing&nbsp;a&nbsp;fresh&nbsp;local&nbsp;copy&nbsp;(for&nbsp;example&nbsp;using&nbsp;venv)?&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;&nbsp;Marek&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/lib/python2.7/threading.py&quot;,&nbsp;line&nbsp;552,&nbsp;in&lt;br&gt;__bootstrap_inner&lt;br&gt;&nbsp;&nbsp;&nbsp;self.run()&lt;br&gt;&nbsp;File&nbsp;&quot;ConfigMgr.py&quot;,&nbsp;line&nbsp;101,&nbsp;in&nbsp;run&lt;br&gt;&nbsp;&nbsp;&nbsp;self.channel.start_consuming()&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/pika/adapters/&lt;br&gt;blocking_connection.py&quot;,&nbsp;line&nbsp;293,&nbsp;in&nbsp;start_consuming&lt;br&gt;&nbsp;&nbsp;&nbsp;self.transport.connection.process_data_events()&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/pika/adapters/&lt;br&gt;blocking_connection.py&quot;,&nbsp;line&nbsp;94,&nbsp;in&nbsp;process_data_events&lt;br&gt;&nbsp;&nbsp;&nbsp;self._handle_read()&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/pika/adapters/&lt;br&gt;base_connection.py&quot;,&nbsp;line&nbsp;162,&nbsp;in&nbsp;_handle_read&lt;br&gt;&nbsp;&nbsp;&nbsp;self._on_data_available(data)&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/pika/connection.py&quot;,&lt;br&gt;line&nbsp;599,&nbsp;in&nbsp;_on_data_available&lt;br&gt;&nbsp;&nbsp;&nbsp;self._channels[frame.channel_number].transport.deliver(frame)&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/pika/channel.py&quot;,&nbsp;line&lt;br&gt;64,&nbsp;in&nbsp;deliver&lt;br&gt;&nbsp;&nbsp;&nbsp;self.frame_dispatcher.process(frame)&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/pika/frame.py&quot;,&nbsp;line&lt;br&gt;202,&nbsp;in&nbsp;process&lt;br&gt;&nbsp;&nbsp;&nbsp;self._handler(frame)&lt;br&gt;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/pika/frame.py&quot;,&nbsp;line&lt;br&gt;220,&nbsp;in&nbsp;_handle_method_frame&lt;br&gt;&nbsp;&nbsp;&nbsp;raise&nbsp;NotImplementedError(frame.method.__class__)&lt;br&gt;NotImplementedError:&nbsp;&amp;lt;class&nbsp;'pika.spec.CancelOk'&amp;gt;&lt;br&gt;&lt;br&gt;Here's&nbsp;what&nbsp;my&nbsp;code&nbsp;looks&nbsp;like:&lt;br&gt;&lt;br&gt;class&nbsp;ListenForLongRunningEventCompletion(threading.Thread):&lt;br&gt;&nbsp;&nbsp;&nbsp;def&nbsp;run(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.connection&nbsp;=&lt;br&gt;pika.BlockingConnection(pika.ConnectionParameters(host=MQ_BINDING))&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channel&nbsp;=&nbsp;self.connection.channel()&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channel.queue_declare(queue=RESPONSE_QUEUE_NAME)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channel.basic_consume(ResponseCallback,&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;queue=RESPONSE_QUEUE_NAME,&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_ack=True)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channel.start_consuming()&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;def&nbsp;shutdown(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channel.stop_consuming()&lt;br&gt;&lt;br&gt;def&nbsp;ResponseCallback(ch,&nbsp;method,&nbsp;properties,&nbsp;body):&lt;br&gt;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;Long&nbsp;Running&nbsp;Task&nbsp;response({0})&quot;.format(body)&lt;br&gt;&lt;br&gt;&lt;br&gt;#========================================================================&lt;br&gt;======&lt;br&gt;#&lt;br&gt;#&nbsp;Main&nbsp;program&lt;br&gt;#&lt;br&gt;&lt;br&gt;#========================================================================&lt;br&gt;======&lt;br&gt;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;'__main__':&lt;br&gt;&nbsp;&nbsp;&nbsp;listener&nbsp;=&nbsp;ListenForLongRunningEventCompletion()&lt;br&gt;&nbsp;&nbsp;&nbsp;listener.start()&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;#&nbsp;Main&nbsp;app&nbsp;logic&nbsp;-&nbsp;not&nbsp;important&nbsp;here&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;#&nbsp;Shut&nbsp;down&nbsp;the&nbsp;connections&nbsp;we've&nbsp;opened&nbsp;up&lt;br&gt;&nbsp;&nbsp;&nbsp;listener.shutdown()&lt;br&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt>
