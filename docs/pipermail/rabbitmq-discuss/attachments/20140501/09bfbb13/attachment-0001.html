<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;Hi&nbsp;All,&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;<br>
<br>
I&nbsp;have&nbsp;a&nbsp;requirement&nbsp;where&nbsp;I&nbsp;need&nbsp;to&nbsp;develop&nbsp;an&nbsp;ruby&nbsp;library&nbsp;which&nbsp;needs&nbsp;to&nbsp;listen&nbsp;to&nbsp;RabbitMQ&nbsp;messages&nbsp;and&nbsp;forward&nbsp;the&nbsp;messages&nbsp;to&nbsp;some&nbsp;other&nbsp;applications&nbsp;with&nbsp;some&nbsp;additional&nbsp;changes&nbsp;in&nbsp;message.&nbsp;This&nbsp;library&nbsp;needs&nbsp;to&lt;b&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif;display:inline&quot;&gt;<br>
<br>
​​&lt;/div&gt;&nbsp;run&nbsp;always&nbsp;and&nbsp;should&nbsp;not&nbsp;close&nbsp;the&nbsp;connection&nbsp;at&nbsp;all&lt;/b&gt;,&nbsp;hence&nbsp;it&nbsp;needs&nbsp;to&nbsp;listen&nbsp;&amp;&nbsp;publish&nbsp;messages&nbsp;always,&nbsp;also&nbsp;this&nbsp;library&nbsp;is&nbsp;running&nbsp;to&nbsp;of&nbsp;ROR&nbsp;application.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;For&nbsp;this&nbsp;requirement&nbsp;I&nbsp;have&nbsp;build&nbsp;an&nbsp;rake&nbsp;task&nbsp;to&nbsp;start&nbsp;listening&nbsp;to&nbsp;RabbitMQ,&nbsp;also&nbsp;I&nbsp;have&nbsp;placed&nbsp;the&nbsp;same&nbsp;code&nbsp;in&nbsp;initializers&nbsp;file&nbsp;in&nbsp;order&nbsp;to&nbsp;start&nbsp;the&nbsp;library&nbsp;along&nbsp;with&nbsp;Apache&nbsp;server&nbsp;in&nbsp;production&nbsp;mode.&nbsp;In&nbsp;production&nbsp;mode&nbsp;initializer&nbsp;file&nbsp;is&nbsp;starting&nbsp;my&nbsp;library&nbsp;to&nbsp;listen&nbsp;&amp;&nbsp;publish&nbsp;the&nbsp;messages&nbsp;to&nbsp;RabbitMq.&nbsp; I&nbsp;have&nbsp;noticed&nbsp;that&nbsp;connectiong&nbsp;to&nbsp;RabbitMq&nbsp;behaves differently via&nbsp;rake&nbsp;task&nbsp;&amp;&nbsp;initilazer&nbsp;file,&nbsp;copied&nbsp;below&nbsp;the&nbsp;rabbitmq&nbsp;log&nbsp;for&nbsp;your&nbsp;reference.&lt;/font&gt;&lt;br&gt;<br>
<br>
<br>
<br>
<br>
&lt;br&gt;&lt;b&gt;&lt;u&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;RABBITMQ&nbsp;LOG&nbsp;WHILE RUNNING THE&nbsp;RUBY&nbsp;LIBRARY&nbsp;VIA&nbsp;RAKE&nbsp;TASK:&nbsp;&lt;font&nbsp;color=&quot;#38761d&quot;&gt;(Connection&nbsp;made&nbsp;one&nbsp;time&nbsp;only)&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/u&gt;&lt;/b&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;<br>
<br>
<br>
&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;font&nbsp;color=&quot;#999999&quot;&gt;=INFO&nbsp;REPORT====&nbsp;30-Apr-2014::20:43:24&nbsp;===&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#999999&quot;&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.7409.18&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://10.146.14.118:54932/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.146.14.118:54932&lt;/a&gt; -&gt; &lt;a&nbsp;href=&quot;http://10.112.187.58:5671/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.112.187.58:5671&lt;/a&gt;)&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;u&gt;&lt;b&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;RABBITMQ&nbsp;LOG&nbsp;WHILE RUNNING THE&nbsp;RUBY&nbsp;LIBRARY&nbsp;VIA&nbsp;INITIALIZER&nbsp;FILE:&lt;/font&gt;&lt;/b&gt;&lt;b&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#cc0000&quot;&gt;(Connection&nbsp;made&nbsp;multiple&nbsp;times)&lt;/font&gt;&lt;/b&gt;&lt;/u&gt;&lt;b&gt;&lt;br&gt;<br>
<br>
<br>
<br>
<br>
&lt;/b&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=INFO&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:35&nbsp;===&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6325.18&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://10.146.14.118:54928/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.146.14.118:54928&lt;/a&gt; -&gt; &lt;a&nbsp;href=&quot;http://10.112.187.58:5671/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.112.187.58:5671&lt;/a&gt;)&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=INFO&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:35&nbsp;===&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6329.18&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://10.146.14.118:54929/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.146.14.118:54929&lt;/a&gt; -&gt; &lt;a&nbsp;href=&quot;http://10.112.187.58:5671/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.112.187.58:5671&lt;/a&gt;)&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=WARNING&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:37&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;<br>
<br>
<br>
&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6325.18&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://10.146.14.118:54928/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.146.14.118:54928&lt;/a&gt; -&gt; &lt;a&nbsp;href=&quot;http://10.112.187.58:5671/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.112.187.58:5671&lt;/a&gt;):&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;connection_closed_abruptly&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;<br>
<br>
&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=INFO&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:37&nbsp;===&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6368.18&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://10.146.14.118:54930/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.146.14.118:54930&lt;/a&gt; -&gt; &lt;a&nbsp;href=&quot;http://10.112.187.58:5671/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.112.187.58:5671&lt;/a&gt;)&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=WARNING&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:37&nbsp;===&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6329.18&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://10.146.14.118:54929/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.146.14.118:54929&lt;/a&gt; -&gt; &lt;a&nbsp;href=&quot;http://10.112.187.58:5671/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.112.187.58:5671&lt;/a&gt;):&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;connection_closed_abruptly&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=INFO&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:37&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;<br>
<br>
<br>
&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6373.18&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://10.146.14.118:54931/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.146.14.118:54931&lt;/a&gt; -&gt; &lt;a&nbsp;href=&quot;http://10.112.187.58:5671/&quot;&nbsp;target=&quot;_blank&quot;&gt;10.112.187.58:5671&lt;/a&gt;)&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;<br>
<br>
<br>
&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=ERROR&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:42&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;error&nbsp;on&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6368.18&gt;:&nbsp;{ssl_upgrade_error,timeout}&nbsp;(unknown&nbsp;POSIX&nbsp;error)&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;=ERROR&nbsp;REPORT====&nbsp;30-Apr-2014::20:28:42&nbsp;===&lt;/font&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&nbsp;color=&quot;#666666&quot;&gt;error&nbsp;on&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.6373.18&gt;:&nbsp;{ssl_upgrade_error,timeout}&nbsp;(unknown&nbsp;POSIX&nbsp;error)&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;Can&nbsp;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif;display:inline&quot;&gt;​anybody&lt;/div&gt; &nbsp;let&nbsp;me&nbsp;know&nbsp;whether&nbsp;the&nbsp;issue&nbsp;with&nbsp;my&nbsp;code&nbsp;or&nbsp;with&nbsp;RabbitMq&nbsp;configuration,&nbsp; you&nbsp;can&nbsp;see&nbsp;my&nbsp;code &lt;a&nbsp;href=&quot;https://gist.github.com/loganathan-s/22256c01127065c9d659&quot;&nbsp;target=&quot;_blank&quot;&gt;HERE&lt;/a&gt;.&nbsp;While&nbsp;re&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif;display:inline&quot;&gt;<br>
<br>
​-​&lt;/div&gt;connecting&nbsp;on&nbsp;tcp&nbsp;connection&nbsp;loss&nbsp;AMQP&nbsp;gem&nbsp;passes&nbsp;guest&nbsp;as&nbsp;username&nbsp;&amp;&nbsp;password&nbsp;even&nbsp;though&nbsp;I&nbsp;am&nbsp;connecting&nbsp;to&nbsp;RabbitMq&nbsp;via&nbsp;SSL&nbsp;certificates. &lt;/div&gt;<br>
<br>
<br>
&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;regards,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;Loganathan&lt;br&gt;<br>
<br>
<br>
Mob:&nbsp;&lt;a&nbsp;href=&quot;tel:%2B91%207760780741&quot;&nbsp;value=&quot;+917760780741&quot;&nbsp;target=&quot;_blank&quot;&gt;+91&nbsp;7760780741&lt;/a&gt;&nbsp;|&nbsp;&lt;a&nbsp;href=&quot;tel:%2B91%209944414388&quot;&nbsp;value=&quot;+919944414388&quot;&nbsp;target=&quot;_blank&quot;&gt;+91&nbsp;9944414388&lt;/a&gt;&lt;br&gt;<br>
Skype:&nbsp;loganathan.sellappa&lt;br&gt;&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;a&nbsp;href=&quot;http://vizualize.me/loganathan&quot;&nbsp;target=&quot;_blank&quot;&gt;ViewMe&lt;/a&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
