<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Also&nbsp;,&nbsp;we&nbsp;are&nbsp;trying&nbsp;to&nbsp;use&nbsp;2DISC&nbsp;1RAM&nbsp;in&nbsp;the&nbsp;cluster&nbsp;.&nbsp;Is&nbsp;this&nbsp;good&nbsp;enough&nbsp;?&nbsp;Also&nbsp;which&nbsp;node&nbsp;should&nbsp;be&nbsp;set&nbsp;as&nbsp;RAM&nbsp;,&nbsp;is&nbsp;there&nbsp;any&nbsp;preference&nbsp;to&nbsp;set&nbsp;only&nbsp;a&nbsp;particular&nbsp;node&nbsp;the&nbsp;cluster&nbsp;to&nbsp;be&nbsp;RAM&nbsp;?&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;Srikanth&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Apr&nbsp;30,&nbsp;2014&nbsp;at&nbsp;1:48&nbsp;PM,&nbsp;srikanth&nbsp;tns&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:srikanthtns@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;srikanthtns@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;Micheal&nbsp;,&nbsp;here&nbsp;is&nbsp;the&nbsp;settings&nbsp;we&nbsp;are&nbsp;doing&nbsp;on&nbsp;rabbitmq&nbsp;cluster&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;{rabbit,&nbsp;[{vm_memory_high_watermark_paging_ratio,&nbsp;0.8},{vm_memory_high_watermark,&nbsp;0.9},{disk_free_limit,&nbsp;1000000000}]}&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Apart&nbsp;from&nbsp;this&nbsp;,is&nbsp;there&nbsp;any&nbsp;QoS&nbsp;value&nbsp;that&nbsp;we&nbsp;need&nbsp;to&nbsp;set&nbsp;?&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Apr&nbsp;29,&nbsp;2014&nbsp;at&nbsp;1:13&nbsp;AM,&nbsp;Michael&nbsp;Klishin&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:mklishin@gopivotal.com&quot;&nbsp;target=&quot;_blank&quot;&gt;mklishin@gopivotal.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;29&nbsp;April&nbsp;2014&nbsp;at&nbsp;07:22:03,&nbsp;srikanth&nbsp;tns&nbsp;(&lt;a&nbsp;href=&quot;mailto:srikanthtns@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;srikanthtns@gmail.com&lt;/a&gt;)&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Can&nbsp;you&nbsp;let&nbsp;us&nbsp;know&nbsp;what&nbsp;would&nbsp;be&nbsp;optimal&nbsp;settings&nbsp;on&nbsp;rabbitmq&lt;br&gt;<br>
&gt;&nbsp;cluster&nbsp;to&nbsp;prevent&nbsp;it&nbsp;from&nbsp;crashing&nbsp;and&nbsp;having&nbsp;reliable&nbsp;messaging?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;It&#39;s&nbsp;really&nbsp;hard&nbsp;to&nbsp;make&nbsp;general&nbsp;recommendations&nbsp;without&nbsp;knowing&nbsp;what&lt;br&gt;<br>
kind&nbsp;of&nbsp;workload&nbsp;you&nbsp;use.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;1)&nbsp;sysctl&nbsp;configurations&lt;br&gt;<br>
&lt;br&gt;<br>
nlimit&nbsp;&gt;&nbsp;20,000&nbsp;or&nbsp;so&nbsp;(definitely&nbsp;can&#39;t&nbsp;be&nbsp;less&nbsp;than&nbsp;~&nbsp;6K)&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&gt;&nbsp;2)&nbsp;Disk&nbsp;limitations&nbsp;to&nbsp;setup&nbsp;on&nbsp;cluster&nbsp;.&nbsp;the&nbsp;default&nbsp;is&nbsp;50MB&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&#39;d&nbsp;use&nbsp;500&nbsp;MB&nbsp;or&nbsp;so&nbsp;if&nbsp;RabbitMQ&nbsp;is&nbsp;the&nbsp;primary&nbsp;thing&nbsp;that&nbsp;runs&nbsp;on&nbsp;the&nbsp;machine.&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&gt;&nbsp;3)&nbsp;Memory&nbsp;to&nbsp;used&nbsp;,&nbsp;right&nbsp;now&nbsp;its&nbsp;default&nbsp;40%&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Can&nbsp;be&nbsp;up&nbsp;to&nbsp;90%,&nbsp;again,&nbsp;depending&nbsp;on&nbsp;what&nbsp;else&nbsp;may&nbsp;run&nbsp;on&nbsp;the&nbsp;same&nbsp;machine.&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;6)&nbsp;any&nbsp;disk&nbsp;space&nbsp;limitation&nbsp;on&nbsp;the&nbsp;hosts&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Host&nbsp;is&nbsp;this&nbsp;different&nbsp;from&nbsp;2)&nbsp;above?&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&gt;&nbsp;For&nbsp;HA&nbsp;,&nbsp;we&nbsp;are&nbsp;using&nbsp;ha-mode&nbsp;all&nbsp;to&nbsp;duplicate&nbsp;the&nbsp;queues&nbsp;across&lt;br&gt;<br>
&gt;&nbsp;all&nbsp;nodes&nbsp;in&nbsp;the&nbsp;cluster.&nbsp;Do&nbsp;you&nbsp;think&nbsp;its&nbsp;reliable&nbsp;during&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;failover&nbsp;scenario&nbsp;?During&nbsp;the&nbsp;failover&nbsp;it&nbsp;would&nbsp;like&nbsp;100k&nbsp;queues&lt;br&gt;<br>
&gt;&nbsp;on&nbsp;nthe&nbsp;new&nbsp;master?&nbsp;Or&nbsp;should&nbsp;we&nbsp;use&nbsp;ha-mode&nbsp;=&nbsp;exactly/nodes&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;With&nbsp;3&nbsp;nodes&nbsp;ha-mode=all&nbsp;is&nbsp;a&nbsp;reasonable&nbsp;amount&nbsp;of&nbsp;duplication.&nbsp;If&nbsp;you&nbsp;are&nbsp;confident&lt;br&gt;<br>
you&nbsp;will&nbsp;never&nbsp;lose&nbsp;more&nbsp;than&nbsp;1&nbsp;node&nbsp;at&nbsp;a&nbsp;time,&nbsp;use&nbsp;ha-mode=exactly&nbsp;with&nbsp;2&nbsp;nodes.&lt;br&gt;<br>
Less&nbsp;duplication&nbsp;means&nbsp;better&nbsp;throughput.&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;to&nbsp;how&nbsp;well&nbsp;new&nbsp;master&nbsp;election&nbsp;will&nbsp;work&nbsp;with&nbsp;100K&nbsp;queues,&nbsp;try&nbsp;it.Â &lt;br&gt;<br>
--&lt;br&gt;<br>
MK&lt;br&gt;<br>
&lt;br&gt;<br>
Software&nbsp;Engineer,&nbsp;Pivotal/RabbitMQ&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
