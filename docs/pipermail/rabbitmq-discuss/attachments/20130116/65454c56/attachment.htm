<tt>
&lt;div&gt;Hi&nbsp;Michael,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;First&nbsp;of&nbsp;all:&nbsp;this&nbsp;is&nbsp;a&nbsp;fantastic&nbsp;addition.&nbsp;Thank&nbsp;you&nbsp;so&nbsp;much.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Just&nbsp;one&nbsp;thing&nbsp;though:&nbsp;is&nbsp;network&nbsp;failure&nbsp;recovery&nbsp;supposed&nbsp;to&nbsp;work&nbsp;with&nbsp;q.pop&nbsp;as&nbsp;well?&nbsp;The&nbsp;reason&nbsp;I&nbsp;am&nbsp;asking&nbsp;is&nbsp;I&nbsp;can't&nbsp;get&nbsp;it&nbsp;to&nbsp;work.&nbsp;I&nbsp;modified&nbsp;slightly&nbsp;one&nbsp;of&nbsp;your&nbsp;examples:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;require&nbsp;'bunny'&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;broker&nbsp;=&nbsp;Bunny.new&lt;/div&gt;&lt;div&gt;broker.start&lt;/div&gt;&lt;div&gt;channel&nbsp;=&nbsp;broker.create_channel&lt;/div&gt;&lt;div&gt;exchange&nbsp;=&nbsp;channel.default_exchange&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;loop&nbsp;do&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;sleep&nbsp;2&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;puts&nbsp;&quot;Tick&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;q&nbsp;=&nbsp;channel.queue(&quot;foo&quot;)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;delivery_info,&nbsp;properties,&nbsp;payload&nbsp;=&nbsp;q.pop&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;end&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;If&nbsp;you&nbsp;run&nbsp;the&nbsp;script&nbsp;and&nbsp;stop&nbsp;the&nbsp;RabbitMQ&nbsp;server&nbsp;while&nbsp;the&nbsp;script&nbsp;is&nbsp;executing,&nbsp;the&nbsp;script&nbsp;hangs&nbsp;on&nbsp;q.pop.&lt;div&gt;If&nbsp;you&nbsp;then&nbsp;restart&nbsp;the&nbsp;server,&nbsp;the&nbsp;script&nbsp;will&nbsp;pass&nbsp;the&nbsp;q.pop&nbsp;once,&nbsp;then&nbsp;hang&nbsp;again&nbsp;and&nbsp;nothing&nbsp;happens&nbsp;anymore.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;expected?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot&lt;/div&gt;&lt;div&gt;PJ&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;Monday,&nbsp;January&nbsp;14,&nbsp;2013&nbsp;5:48:15&nbsp;PM&nbsp;UTC,&nbsp;Michael&nbsp;Klishin&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;TL;DR&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;------------------------------&lt;wbr&gt;------------------------------&lt;wbr&gt;------------------------------&lt;wbr&gt;-----------------------------&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,255,204);font-family:arial,sans-serif;font-size:13px&quot;&gt;Bunny&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,255,204);font-family:arial,sans-serif;font-size:13px&quot;&gt;0.9&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;.0.pre6&nbsp;is&nbsp;released&nbsp;to&amp;nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;http://rubygems.org/&quot;&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&nbsp;target=&quot;_blank&quot;&gt;rubygems.org&lt;/a&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&amp;nbsp;[1].&lt;/span&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;This&nbsp;release&nbsp;includes&nbsp;one&nbsp;major&nbsp;feature&nbsp;and&nbsp;a&nbsp;few&nbsp;bug&nbsp;fixes.&nbsp;It&nbsp;is&nbsp;100%&nbsp;backwards&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;compatible.&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;The&nbsp;major&nbsp;feature&nbsp;is&nbsp;automatic&nbsp;network&nbsp;failure&nbsp;recovery.&nbsp;This&nbsp;includes&nbsp;recovery&nbsp;of&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
exchanges,&nbsp;queues,&nbsp;bindings&nbsp;and&nbsp;consumers&nbsp;that&nbsp;were&nbsp;declared/added&nbsp;on&nbsp;the&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;recovered&nbsp;Bunny&nbsp;connection.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;In&nbsp;addition,&nbsp;documentation&nbsp;guides&nbsp;on&nbsp;error&nbsp;handling&nbsp;and&nbsp;recovery&nbsp;is&nbsp;now&nbsp;up&nbsp;online:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;a&nbsp;href=&quot;http://rubybunny.info/articles/exchanges.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://rubybunny.info/&lt;wbr&gt;articles/error_handling.html&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Change&nbsp;log&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;------------------------------&lt;wbr&gt;------------------------------&lt;wbr&gt;------------------------------&lt;wbr&gt;-----------------------------&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Change&nbsp;log&nbsp;is&nbsp;available&nbsp;on&nbsp;GitHub:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;a&nbsp;href=&quot;https://github.com/ruby-amqp/bunny/blob/master/ChangeLog.md#changes-between-bunny-090pre4-and-090pre5&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/ruby-amqp/&lt;span&nbsp;style=&quot;background-color:rgb(255,255,204);color:rgb(34,34,34)&quot;&gt;b&lt;wbr&gt;unny&lt;/span&gt;/blob/master/ChangeLog.md#&lt;wbr&gt;changes-between-&lt;span&nbsp;style=&quot;background-color:rgb(255,255,204);color:rgb(34,34,34)&quot;&gt;bunny&lt;/span&gt;-090pre5-&lt;wbr&gt;and-090pre&lt;/a&gt;6&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Plans&nbsp;for&nbsp;0.9.0&nbsp;Final&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;------------------------------&lt;wbr&gt;------------------------------&lt;wbr&gt;------------------------------&lt;wbr&gt;-----------------------------&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;There&nbsp;is&nbsp;still&nbsp;a&nbsp;few&nbsp;things&nbsp;we&nbsp;need&nbsp;to&nbsp;do&nbsp;before&nbsp;Bunny&nbsp;0.9&nbsp;can&nbsp;be&nbsp;declared&nbsp;complete:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&amp;nbsp;*&nbsp;Make&nbsp;network&nbsp;failure&nbsp;recovery&nbsp;configurable&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&amp;nbsp;*&nbsp;Bring&nbsp;back&nbsp;TLS&nbsp;support&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&amp;nbsp;*&nbsp;Add&nbsp;logging&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&amp;nbsp;*&nbsp;API&nbsp;reference&nbsp;documentation&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
Changes&nbsp;are,&nbsp;the&nbsp;next&nbsp;release&nbsp;will&nbsp;be&nbsp;RC1.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&amp;nbsp;&lt;a&nbsp;href=&quot;https://rubygems.org/gems/bunny/versions/0.9.0.pre5&quot;&nbsp;target=&quot;_blank&quot;&gt;https://rubygems.org/gems/&lt;span&nbsp;style=&quot;background-color:rgb(255,255,204);color:rgb(34,34,34)&quot;&gt;b&lt;wbr&gt;unny&lt;/span&gt;/versions/&lt;span&nbsp;style=&quot;background-color:rgb(255,255,204);color:rgb(34,34,34)&quot;&gt;0.9&lt;/span&gt;.0.pre&lt;/a&gt;6&lt;/div&gt;<br>
<br>
&lt;/div&gt;--&nbsp;&lt;br&gt;MK&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://github.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/&lt;wbr&gt;michaelklishin&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twitter.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/&lt;wbr&gt;michaelklishin&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;
</tt>
