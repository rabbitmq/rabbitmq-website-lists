<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Hi&nbsp;all,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;Up&nbsp;to&nbsp;recently&nbsp;we've&nbsp;been&nbsp;using&nbsp;RabbitMQ&nbsp;3.2.3/Erlang&nbsp;R15B01&nbsp;with&nbsp;the&nbsp;web_Stomp&nbsp;plugin&nbsp;over&nbsp;SSL.&nbsp;&nbsp;Since&nbsp;this&nbsp;was&nbsp;not&nbsp;supported,&nbsp;we&nbsp;had&nbsp;to&nbsp;rebuilt&nbsp;the&nbsp;web_stomp&nbsp;plugin&nbsp;using&nbsp;a&nbsp;patched&nbsp;branch&nbsp;as&nbsp;described&nbsp;at&nbsp;https://gist.github.com/berico-rclayton/5475365&nbsp;(also&nbsp;see&nbsp;https://github.com/rabbitmq/rabbitmq-web-stomp/pull/3).&nbsp;&nbsp;This&nbsp;has&nbsp;been&nbsp;working&nbsp;fine&nbsp;for&nbsp;months.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;We&nbsp;recently&nbsp;realized&nbsp;that&nbsp;the&nbsp;fix&nbsp;for&nbsp;SSL&nbsp;support&nbsp;in&nbsp;web_stomp&nbsp;was&nbsp;systemized&nbsp;in&nbsp;RabbitMQ&nbsp;3.3.0/Erlang&nbsp;R16B03.&nbsp;&nbsp;So&nbsp;we&nbsp;installed&nbsp;it&nbsp;and&nbsp;updated&nbsp;our&nbsp;configuration.&nbsp;&nbsp;However,&nbsp;using&nbsp;the&nbsp;exact&nbsp;same&nbsp;setup&nbsp;and&nbsp;self-signed&nbsp;keys/certificates,&nbsp;we&nbsp;cannot&nbsp;get&nbsp;the&nbsp;new&nbsp;version&nbsp;to&nbsp;work&nbsp;properly&nbsp;while&nbsp;using&nbsp;SSL&nbsp;over&nbsp;stomp.&nbsp;&nbsp;Connecting&nbsp;to&nbsp;https://&lt;rabbit&nbsp;server&nbsp;IP&gt;:15678/stomp&nbsp;just&nbsp;fails,&nbsp;although&nbsp;from&nbsp;the&nbsp;log&nbsp;web_stomp&nbsp;seems&nbsp;to&nbsp;be&nbsp;listening&nbsp;correctly&nbsp;on&nbsp;port&nbsp;15678.&nbsp;&nbsp;We&nbsp;tried&nbsp;to&nbsp;regenerate&nbsp;a&nbsp;new&nbsp;set&nbsp;of&nbsp;keys,&nbsp;but&nbsp;it&nbsp;did&nbsp;not&nbsp;do&nbsp;anything.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Our&nbsp;old&nbsp;rabbitMQ&nbsp;config&nbsp;(patched&nbsp;3.2.3&nbsp;web_stomp)&nbsp;was:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;{rabbitmq_web_stomp,&nbsp;[&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{ssl_enabled,&nbsp;true},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{https_port,&nbsp;15678},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{ssl_key_file,&nbsp;&quot;/usr/local/ssl/private/server.key&quot;},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{ssl_key_password,&nbsp;&quot;password&quot;},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{ssl_ca_certificate_file,&nbsp;&quot;/usr/local/ssl/crt/public.crt&quot;},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{ssl_certificate_file,&nbsp;&quot;/usr/local/ssl/crt/public.crt&quot;}&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;]&nbsp;},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;And&nbsp;the&nbsp;corresponding&nbsp;new&nbsp;config&nbsp;on&nbsp;RabbitMQ&nbsp;3.3.0&nbsp;is&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;{rabbitmq_web_stomp,&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{ssl_config,<br>
[{port,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15678},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{backlog,&nbsp;&nbsp;&nbsp;&nbsp;1024},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{certfile,&nbsp;&nbsp;&nbsp;&quot;/usr/local/ssl/crt/public.crt&quot;},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{keyfile,&nbsp;&nbsp;&nbsp;&nbsp;&quot;/usr/local/ssl/private/server.key&quot;},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
{cacertfile,&nbsp;&quot;/usr/local/ssl/crt/public.crt&quot;},&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&nbsp;white-space:&nbsp;pre;&nbsp;background-color:&nbsp;rgb(238,&nbsp;238,&nbsp;238);&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{password,&nbsp;&nbsp;&nbsp;&quot;password&quot;}&lt;/font&gt;&lt;/span&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]}&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&nbsp;]},&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Is&nbsp;our&nbsp;config&nbsp;ok?&nbsp;&nbsp;does&nbsp;anybody&nbsp;experienced&nbsp;similar&nbsp;problems&nbsp;or&nbsp;have&nbsp;any&nbsp;idea&nbsp;what&nbsp;we&nbsp;could&nbsp;be&nbsp;doing&nbsp;wrong?&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Thanks&nbsp;in&nbsp;advance,&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;/Sebas&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;
</tt>
