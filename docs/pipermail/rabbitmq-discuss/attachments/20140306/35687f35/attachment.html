<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;for&nbsp;your&nbsp;quick&nbsp;response.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:13px;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif&quot;&gt;&quot;Down&quot;&nbsp;as&nbsp;in&nbsp;the&nbsp;Erlang&nbsp;VM&nbsp;had&nbsp;exited,&nbsp;or&nbsp;&quot;down&quot;&nbsp;as&nbsp;in&nbsp;the&nbsp;Erlang&nbsp;VM&nbsp;was&nbsp;still&nbsp;running&nbsp;but&nbsp;the&nbsp;RabbitMQ&nbsp;application&nbsp;had&nbsp;stopped?&lt;/span&gt;&lt;/blockquote&gt;<br>
<br>
&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif;font-size:13px&quot;&gt;That&#39;s&nbsp;a&nbsp;good&nbsp;question.&nbsp;I&nbsp;didn&#39;t&nbsp;even&nbsp;check.&nbsp;I&nbsp;only&nbsp;looked&nbsp;at&nbsp;it&nbsp;from&nbsp;Windows&nbsp;services&nbsp;and&nbsp;restarted&nbsp;from&nbsp;there.&nbsp; But&nbsp;both&nbsp;nodes&nbsp;are&nbsp;definitely&nbsp;running&nbsp;3.2.2.&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif;font-size:13px&quot;&gt;I&nbsp;don&#39;t&nbsp;see&nbsp;anything&nbsp;about&nbsp;autoheal&nbsp;in&nbsp;the&nbsp;logs.&nbsp;The&nbsp;first&nbsp;log&nbsp;I&nbsp;sent&nbsp;was&nbsp;from&nbsp;the&nbsp;node&nbsp;that&nbsp;went&nbsp;down,&nbsp;right&nbsp;at&nbsp;the&nbsp;time&nbsp;I&nbsp;lost&nbsp;connection&nbsp;to&nbsp;that&nbsp;node.&nbsp;This&nbsp;is&nbsp;from&nbsp;the&nbsp;other&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster.&nbsp;So&nbsp;a&nbsp;partition&nbsp;definitely&nbsp;occurred,&nbsp;but&nbsp;there&#39;s&nbsp;nothing&nbsp;about&nbsp;autohealing.&nbsp;Maybe&nbsp;I&nbsp;should&nbsp;upgrade&nbsp;to&nbsp;3.2.4&nbsp;and&nbsp;see&nbsp;if&nbsp;it&nbsp;happens&nbsp;again?&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;=ERROR&nbsp;REPORT====&nbsp;6-Mar-2014::09:49:24&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;AMQP&nbsp;connection&nbsp;&lt;0.63.92&gt;&nbsp;(running),&nbsp;channel&nbsp;0&nbsp;-&nbsp;error:&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;{amqp_error,connection_forced,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;broker&nbsp;forced&nbsp;connection&nbsp;closure&nbsp;with&nbsp;reason&nbsp;&#39;shutdown&#39;&quot;,none}&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;=INFO&nbsp;REPORT====&nbsp;6-Mar-2014::09:49:24&nbsp;===&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;<br>
<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;Halting&nbsp;Erlang&nbsp;VM&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;br&gt;<br>
<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;=ERROR&nbsp;REPORT====&nbsp;6-Mar-2014::09:49:30&nbsp;===&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline&quot;&gt;Mnesia(rabbit@BOSRISDEVFAB201):&nbsp;**&nbsp;ERROR&nbsp;**&nbsp;mnesia_event&nbsp;got&nbsp;{inconsistent_database,&nbsp;starting_partitioned_network,&nbsp;rabbit@MARRISDEVFAB201}&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-size:13px;font-family:arial,sans-serif&quot;&gt;Thanks,&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:0px;padding:0px;border:0px;vertical-align:baseline;font-size:13px;font-family:arial,sans-serif&quot;&gt;<br>
<br>
Andy&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;6,&nbsp;2014&nbsp;at&nbsp;10:19&nbsp;AM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;06/03/14&nbsp;15:04,&nbsp;Andy&nbsp;Martin&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
**&nbsp;{{badmatch,{error,not_found}},&lt;br&gt;<br>
 &nbsp; &nbsp; [{rabbit_amqqueue_process,i,2,&lt;u&gt;&lt;/u&gt;[]},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;{rabbit_amqqueue_process,&#39;-&lt;u&gt;&lt;/u&gt;infos/2-lc$^0/1-0-&#39;,2,[]},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;{rabbit_amqqueue_process,&#39;-&lt;u&gt;&lt;/u&gt;infos/2-lc$^0/1-0-&#39;,2,[]},&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;{rabbit_amqqueue_process,emit_&lt;u&gt;&lt;/u&gt;stats,2,[]},&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
That&#39;s&nbsp;the&nbsp;exact&nbsp;stack&nbsp;trace&nbsp;of&nbsp;a&nbsp;bug&nbsp;we&nbsp;fixed&nbsp;in&nbsp;3.2.1.&nbsp;Are&nbsp;you&nbsp;completely&nbsp;sure&nbsp;that&nbsp;both&nbsp;nodes&nbsp;are&nbsp;running&nbsp;3.2.2?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;have&nbsp;a&nbsp;two-node&nbsp;autoheal&nbsp;cluster.&nbsp;Yesterday&nbsp;I&nbsp;came&nbsp;in&nbsp;to&nbsp;find&nbsp;out&lt;br&gt;<br>
that&nbsp;neither&nbsp;server&nbsp;in&nbsp;the&nbsp;cluster&nbsp;was&nbsp;seeing&nbsp;the&nbsp;other,&nbsp;but&nbsp;there&lt;br&gt;<br>
was&nbsp;no&nbsp;message&nbsp;about&nbsp;a&nbsp;partition&nbsp;having&nbsp;occurred.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
You&nbsp;will&nbsp;only&nbsp;be&nbsp;notified&nbsp;about&nbsp;the&nbsp;partition&nbsp;once&nbsp;the&nbsp;servers&nbsp;can&nbsp;see&nbsp;each&nbsp;other&nbsp;again&nbsp;-&nbsp;until&nbsp;that&nbsp;happens,&nbsp;A&nbsp;thinks&nbsp;B&nbsp;is&nbsp;down,&nbsp;and&nbsp;B&nbsp;thinks&nbsp;A&nbsp;is&nbsp;down;&nbsp;they&nbsp;have&nbsp;no&nbsp;way&nbsp;to&nbsp;know&nbsp;it&#39;s&nbsp;a&nbsp;partition.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Today&nbsp;I&nbsp;came&nbsp;in&nbsp;to&lt;br&gt;<br>
find&nbsp;one&nbsp;of&nbsp;the&nbsp;servers&nbsp;down.&nbsp;I&nbsp;can&#39;t&nbsp;find&nbsp;anything&nbsp;in&nbsp;the&nbsp;logs&nbsp;that&lt;br&gt;<br>
would&nbsp;indicate&nbsp;why&nbsp;this&nbsp;is&nbsp;happening.&nbsp;What&nbsp;should&nbsp;I&nbsp;be&nbsp;looking&nbsp;for&nbsp;in&lt;br&gt;<br>
the&nbsp;logs?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&quot;Down&quot;&nbsp;as&nbsp;in&nbsp;the&nbsp;Erlang&nbsp;VM&nbsp;had&nbsp;exited,&nbsp;or&nbsp;&quot;down&quot;&nbsp;as&nbsp;in&nbsp;the&nbsp;Erlang&nbsp;VM&nbsp;was&nbsp;still&nbsp;running&nbsp;but&nbsp;the&nbsp;RabbitMQ&nbsp;application&nbsp;had&nbsp;stopped?&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;the&nbsp;former,&nbsp;then&nbsp;it&nbsp;can&#39;t&nbsp;be&nbsp;anything&nbsp;to&nbsp;do&nbsp;with&nbsp;autoheal&nbsp;since&nbsp;that&nbsp;doesn&#39;t&nbsp;attempt&nbsp;to&nbsp;stop&nbsp;the&nbsp;node&nbsp;completely.&nbsp;You&nbsp;might&nbsp;want&nbsp;to&nbsp;look&nbsp;for&nbsp;&quot;Halting&nbsp;Erlang&nbsp;VM&quot;&nbsp;in&nbsp;the&nbsp;logs;&nbsp;that&nbsp;would&nbsp;imply&nbsp;the&nbsp;broker&nbsp;was&nbsp;shut&nbsp;down&nbsp;deliberately.&nbsp;If&nbsp;that&#39;s&nbsp;not&nbsp;there&nbsp;then&nbsp;please&nbsp;post&nbsp;the&nbsp;logs&nbsp;somewhere&nbsp;with&nbsp;an&nbsp;indication&nbsp;of&nbsp;when&nbsp;you&nbsp;became&nbsp;aware&nbsp;the&nbsp;server&nbsp;was&nbsp;down.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
If&nbsp;the&nbsp;latter,&nbsp;it&#39;s&nbsp;possible&nbsp;that&nbsp;you&nbsp;ran&nbsp;into&nbsp;one&nbsp;of&nbsp;the&nbsp;bugs&nbsp;we&nbsp;fixed&nbsp;in&nbsp;3.2.4,&nbsp;where&nbsp;an&nbsp;attempt&nbsp;at&nbsp;autoheal&nbsp;can&nbsp;get&nbsp;stuck.&nbsp;There&nbsp;should&nbsp;still&nbsp;be&nbsp;messages&nbsp;about&nbsp;autoheal&nbsp;in&nbsp;the&nbsp;logs&nbsp;in&nbsp;that&nbsp;case&nbsp;though.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;Pivotal&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
