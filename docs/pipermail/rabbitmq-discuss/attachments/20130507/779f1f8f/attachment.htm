<tt>
&lt;html&gt;&lt;head&gt;&lt;base&nbsp;href=&quot;x-msg://8/&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;According&nbsp;to&nbsp;the&nbsp;spring-amqp&nbsp;docs,&nbsp;the&nbsp;CachingConnectionFactory&nbsp;will&nbsp;create&nbsp;a&nbsp;proxy&nbsp;to&nbsp;a&nbsp;single&nbsp;connection&nbsp;only,&nbsp;so&nbsp;you'll&nbsp;either&nbsp;need&nbsp;to&nbsp;have&nbsp;two&nbsp;connection&nbsp;factory&nbsp;beans&nbsp;in&nbsp;your&nbsp;configuration&nbsp;or&nbsp;inherit&nbsp;AbstractConnectionFactory&nbsp;and&nbsp;create&nbsp;your&nbsp;own&nbsp;using&nbsp;Rabbit's&nbsp;own&nbsp;client&nbsp;APIs.&amp;nbsp;You&nbsp;might&nbsp;also&nbsp;want&nbsp;to&nbsp;consider&nbsp;using&nbsp;a&nbsp;MessageListenerContainer&nbsp;bean&nbsp;to&nbsp;consume&nbsp;asynchronously,&nbsp;but&nbsp;even&nbsp;if&nbsp;you&nbsp;stick&nbsp;with&nbsp;AmqpTemplate,&nbsp;you'll&nbsp;need&nbsp;to&nbsp;configure&nbsp;another&nbsp;bean&nbsp;for&nbsp;consuming&nbsp;so&nbsp;that&nbsp;it&nbsp;will&nbsp;use&nbsp;another&nbsp;(different)&nbsp;connection&nbsp;factory&nbsp;bean&nbsp;and&nbsp;thereby&nbsp;ensure&nbsp;a&nbsp;second&nbsp;connection&nbsp;is&nbsp;used.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'd&nbsp;suggest&nbsp;asking&nbsp;on&nbsp;a&nbsp;spring-amqp&nbsp;forum&nbsp;or&nbsp;mailing&nbsp;list&nbsp;if&nbsp;you&nbsp;need&nbsp;more&nbsp;detailed&nbsp;assistance.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Tim&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;7&nbsp;May&nbsp;2013,&nbsp;at&nbsp;00:58,&nbsp;Kapil&nbsp;Goyal&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;-webkit-auto;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;div&nbsp;lang=&quot;EN-US&quot;&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&gt;&lt;div&nbsp;class=&quot;WordSection1&quot;&nbsp;style=&quot;page:&nbsp;WordSection1;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;Hi,&lt;o:p&gt;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;While&nbsp;exploring&nbsp;flow-control&nbsp;in&nbsp;RabbitMQ,&nbsp;I&nbsp;found&nbsp;this:&lt;o:p&gt;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;“The&nbsp;intent&nbsp;here&nbsp;is&nbsp;to&nbsp;introduce&nbsp;a&nbsp;flow&nbsp;control&nbsp;mechanism&nbsp;that&nbsp;throttles&nbsp;producers&nbsp;but&nbsp;lets&nbsp;consumers&nbsp;continue&nbsp;unaffected.&nbsp;However,&nbsp;since&nbsp;AMQP&nbsp;permits&nbsp;producers&nbsp;and&nbsp;consumers&nbsp;to&nbsp;operate&nbsp;on&nbsp;the&nbsp;same&nbsp;channel,&nbsp;and&nbsp;on&nbsp;different&nbsp;channels&nbsp;of&nbsp;a&nbsp;single&nbsp;connection,&nbsp;this&nbsp;logic&nbsp;is&nbsp;necessarily&nbsp;imperfect.&nbsp;In&nbsp;practice&nbsp;that&nbsp;does&nbsp;not&nbsp;pose&nbsp;any&nbsp;problems&nbsp;for&nbsp;most&nbsp;applications&nbsp;since&nbsp;the&nbsp;throttling&nbsp;is&nbsp;observable&nbsp;merely&nbsp;as&nbsp;a&nbsp;delay.&nbsp;Nevertheless,&nbsp;other&nbsp;design&nbsp;considerations&nbsp;permitting,&nbsp;it&nbsp;is&nbsp;advisable&nbsp;to&nbsp;only&nbsp;use&nbsp;individual&nbsp;AMQP&nbsp;connections&nbsp;for&nbsp;either&nbsp;producing&nbsp;or&nbsp;consuming.”&lt;o:p&gt;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;I&nbsp;am&nbsp;using&nbsp;Spring&nbsp;Integration&nbsp;in&nbsp;my&nbsp;web-application&nbsp;to&nbsp;send/receive&nbsp;data&nbsp;to/from&nbsp;RabbitMQ&nbsp;broker.&nbsp;I&nbsp;declare&nbsp;connection-factory,&nbsp;amqp-template,&nbsp;rabbit-admin,&nbsp;channels&nbsp;and&nbsp;inbound/outbound&nbsp;adapters&nbsp;using&nbsp;XML.&nbsp;What&nbsp;is&nbsp;the&nbsp;recommended&nbsp;way&nbsp;to&nbsp;ensure&nbsp;separate&nbsp;connections&nbsp;are&nbsp;used&nbsp;for&nbsp;sending&nbsp;and&nbsp;receiving?&nbsp;My&nbsp;observation&nbsp;is&nbsp;that&nbsp;by&nbsp;default,&nbsp;both&nbsp;sending&nbsp;and&nbsp;receiving&nbsp;are&nbsp;done&nbsp;on&nbsp;the&nbsp;same&nbsp;connection&nbsp;but&nbsp;on&nbsp;different&nbsp;channels.&lt;o:p&gt;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;Thanks&lt;o:p&gt;&lt;/o:p&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0in;&nbsp;margin-right:&nbsp;0in;&nbsp;margin-left:&nbsp;0in;&nbsp;margin-bottom:&nbsp;0.0001pt;&nbsp;font-size:&nbsp;11pt;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;Kapil&lt;o:p&gt;&lt;/o:p&gt;&lt;/div&gt;&lt;/div&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;style=&quot;color:&nbsp;blue;&nbsp;text-decoration:&nbsp;underline;&nbsp;&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;style=&quot;color:&nbsp;blue;&nbsp;text-decoration:&nbsp;underline;&nbsp;&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
