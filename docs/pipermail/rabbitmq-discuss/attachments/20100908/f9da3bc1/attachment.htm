<tt>
Thanks&nbsp;for&nbsp;the&nbsp;reply.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;are&nbsp;just&nbsp;making&nbsp;a&nbsp;POC&nbsp;of&nbsp;how&nbsp;to&nbsp;use&nbsp;new&nbsp;Amazon&amp;#39;s&nbsp;autoescale&nbsp;feature,&nbsp;so&nbsp;we&nbsp;can&nbsp;add&nbsp;instances&nbsp;based&nbsp;on&nbsp;rules.&nbsp;Those&nbsp;instances&nbsp;must&nbsp;contain&nbsp;rabbitmq&nbsp;servers&nbsp;in&nbsp;a&nbsp;cluster,&nbsp;all&nbsp;in&nbsp;the&nbsp;same&nbsp;cluster.&lt;/div&gt;<br>
&lt;div&gt;From&nbsp;what&nbsp;I&nbsp;read,&nbsp;and&nbsp;what&nbsp;you&amp;#39;re&nbsp;confirming,&nbsp;it&nbsp;looks&nbsp;like&nbsp;there&amp;#39;s&nbsp;no&nbsp;starightforward&nbsp;way&nbsp;of&nbsp;making&nbsp;it&nbsp;automatically.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;ideas?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;With&nbsp;regards &lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;Wed,&nbsp;Sep&nbsp;8,&nbsp;2010&nbsp;at&nbsp;11:45&nbsp;AM,&nbsp;Marek&nbsp;Majkowski&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:majek04@gmail.com&quot;&gt;majek04@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Jaime,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;Fri,&nbsp;Sep&nbsp;3,&nbsp;2010&nbsp;at&nbsp;11:22,&nbsp;Jaime&nbsp;Martinez&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jaimemm@gmail.com&quot;&gt;jaimemm@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Here&nbsp;is&nbsp;the&nbsp;scenario:&lt;br&gt;<br>
&amp;gt;&nbsp;-&nbsp;More&nbsp;than&nbsp;1&nbsp;pair&nbsp;of&nbsp;Active&nbsp;+&nbsp;Passive&nbsp;RabbitMQ&nbsp;servers&nbsp;per&nbsp;EC2&nbsp;instance,&lt;br&gt;<br>
&amp;gt;&nbsp;all&nbsp;of&nbsp;them&nbsp;in&nbsp;cluster.&lt;br&gt;<br>
&amp;gt;&nbsp;-&nbsp;Autoescale&nbsp;will&nbsp;start&nbsp;a&nbsp;new&nbsp;EC2&nbsp;instances&nbsp;and&nbsp;has&nbsp;to&nbsp;add&nbsp;the&nbsp;new&nbsp;RabbitMQ&lt;br&gt;<br>
&amp;gt;&nbsp;HA&nbsp;servers&nbsp;to&nbsp;the&nbsp;same&nbsp;cluster&nbsp;as&nbsp;the&nbsp;previous&nbsp;instances&lt;br&gt;<br>
&amp;gt;&nbsp;It&nbsp;looks&nbsp;pretty&nbsp;tricky&nbsp;since&nbsp;to&nbsp;add&nbsp;server&nbsp;instances&nbsp;to&nbsp;a&nbsp;cluster&nbsp;is&lt;br&gt;<br>
&amp;gt;&nbsp;necessary&nbsp;to&nbsp;know&nbsp;their&nbsp;identifiers.&nbsp;Did&nbsp;anyone&nbsp;tried&nbsp;this?&nbsp;What&nbsp;would&nbsp;it&nbsp;be&lt;br&gt;<br>
&amp;gt;&nbsp;the&nbsp;right&nbsp;way&nbsp;of&nbsp;doing&nbsp;it?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Yes,&nbsp;in&nbsp;order&nbsp;to&nbsp;join&nbsp;RabbitMQ&nbsp;nodes&nbsp;into&nbsp;a&nbsp;cluster&nbsp;you&nbsp;need&nbsp;to&nbsp;know&nbsp;the&nbsp;shared&lt;br&gt;<br>
cookie&nbsp;and&nbsp;the&nbsp;addresses&nbsp;of&nbsp;all&nbsp;hosts&nbsp;in&nbsp;the&nbsp;cluster,&nbsp;as&nbsp;described&nbsp;here:&lt;br&gt;<br>
&nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/clustering.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;my&nbsp;opinion&nbsp;clustering&nbsp;is&nbsp;not&nbsp;perfect.&nbsp;It&nbsp;helps&nbsp;scaling&nbsp;only&nbsp;for&nbsp;a&nbsp;set&nbsp;of&nbsp;use&lt;br&gt;<br>
cases.&nbsp;Basically,&nbsp;to&nbsp;exploit&nbsp;the&nbsp;benefits&nbsp;you&nbsp;need&nbsp;to&nbsp;really&nbsp;know&nbsp;what&nbsp;you&amp;#39;re&lt;br&gt;<br>
doing.&nbsp;Generally,&nbsp;I&nbsp;wouldn&amp;#39;t&nbsp;recommend&nbsp;it.&nbsp;Also,&nbsp;correctly&nbsp;configuring&lt;br&gt;<br>
clustering&nbsp;with&nbsp;HA&nbsp;is&nbsp;really&nbsp;tricky.&lt;br&gt;<br>
&lt;br&gt;<br>
Saying&nbsp;that,&nbsp;I&amp;#39;d&nbsp;recommend&nbsp;just&nbsp;upgrading&nbsp;EC2&nbsp;host&nbsp;if&nbsp;you&nbsp;need&nbsp;more&nbsp;capacity.&lt;br&gt;<br>
Store&nbsp;the&nbsp;persistent&nbsp;data&nbsp;on&nbsp;EBS&nbsp;and&nbsp;when&nbsp;you&nbsp;need&nbsp;more&nbsp;power&nbsp;-&nbsp;just&lt;br&gt;<br>
reattach&nbsp;EBS&nbsp;to&nbsp;a&nbsp;host&nbsp;with&nbsp;more&nbsp;CPU&nbsp;power.&nbsp;Sure,&nbsp;that&amp;#39;s&nbsp;not&nbsp;zero-downtime,&lt;br&gt;<br>
but&nbsp;at&nbsp;least&nbsp;it&amp;#39;s&nbsp;simple&nbsp;and&nbsp;manageable.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&nbsp; Marek&nbsp;Majkowski&lt;br&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
