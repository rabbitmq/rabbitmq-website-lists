<tt>
Hi&lt;br&gt;&lt;br&gt;We&nbsp;are&nbsp;currently&nbsp;using&nbsp;RabbitMQ&nbsp;1.7.0&nbsp;and&nbsp;we&amp;#39;d&nbsp;like&nbsp;to&nbsp;move&nbsp;to&nbsp;1.7.2&nbsp;but&nbsp;we&nbsp;have&nbsp;noticed&nbsp;a&nbsp;fundamental&nbsp;behavior&nbsp;change&nbsp;across&nbsp;these&nbsp;versions.&nbsp;Let&nbsp;me&nbsp;explain:&lt;br&gt;&lt;br&gt;1)&nbsp;Assume&nbsp;we&nbsp;have&nbsp;a&nbsp;cluster&nbsp;of&nbsp;RabbitMQ&nbsp;nodes...&nbsp;&amp;#39;rabbit@host1&amp;#39;&nbsp;and&nbsp;&amp;#39;rabbit@host2&amp;#39;&lt;br&gt;<br>
2)&nbsp;&amp;#39;client1&amp;#39;&nbsp;connects&nbsp;to&nbsp;&amp;#39;rabbit@host1&amp;#39;,&nbsp;declares&nbsp;an&nbsp;exchange&nbsp;&amp;#39;test_x&amp;#39;&nbsp;and&nbsp;then&nbsp;declares&nbsp;a&nbsp;q&nbsp;&amp;#39;test_queue&amp;#39;&nbsp;and&nbsp;binds&nbsp;to&nbsp;it.&lt;br&gt;3)&nbsp;&amp;#39;client2&amp;#39;&nbsp;being&nbsp;of&nbsp;the&nbsp;same&nbsp;codebase&nbsp;as&nbsp;&amp;#39;client1&amp;#39;&nbsp;on&nbsp;starting&nbsp;up&nbsp;connects&nbsp;to&nbsp;&amp;#39;rabbit@host2&amp;#39;&nbsp;and&nbsp;does&nbsp;the&nbsp;same&nbsp;thing&nbsp;as&nbsp;&amp;#39;client1&amp;#39;.&lt;br&gt;<br>
&lt;br&gt;At&nbsp;this&nbsp;point&nbsp;of&nbsp;time,&nbsp;If&nbsp;we&nbsp;do&nbsp;a&nbsp;&amp;#39;rabbitmqctl&nbsp;list_queues&nbsp;consumers&nbsp;name&nbsp;node&amp;#39;&nbsp;the&nbsp;response&nbsp;we&nbsp;get&nbsp;is:&lt;br&gt;&lt;br&gt;2       &nbsp;test_queue        &nbsp;rabbit@host1&lt;br&gt;&lt;br&gt;Our&nbsp;reason&nbsp;for&nbsp;doing&nbsp;this&nbsp;was&nbsp;that&nbsp;a&nbsp;message&nbsp;sent&nbsp;to&nbsp;the&nbsp;&amp;#39;test_x&amp;#39;&nbsp;exchange&nbsp;would&nbsp;be&nbsp;consumed&nbsp;by&nbsp;either&nbsp;of&nbsp;the&nbsp;clients.&lt;br&gt;<br>
&lt;br&gt;Now..&nbsp;&lt;br&gt;&lt;br&gt;4)&nbsp;Assume&nbsp;&amp;#39;rabbit@host1&amp;#39;&nbsp;node&nbsp;goes&nbsp;down&nbsp;(machine&nbsp;crash,&nbsp;becomes&nbsp;unreachable...&nbsp;whatever)&lt;br&gt;5)&nbsp;&amp;#39;client1&amp;#39;&nbsp;detects&nbsp;the&nbsp;outage&nbsp;and&nbsp;tries&nbsp;connecting&nbsp;to&nbsp;&amp;#39;rabbit@host2&amp;#39;...&nbsp;and&nbsp;the&nbsp;mq&nbsp;connection&nbsp;startup&nbsp;code&nbsp;kicks&nbsp;in..&nbsp;thus..&nbsp;the&nbsp;queue&nbsp;&amp;#39;test_queue&amp;#39;&nbsp;is&nbsp;recreated&nbsp;on&nbsp;&amp;#39;rabbit@host2&amp;#39;&lt;br&gt;<br>
&lt;br&gt;Now...&nbsp;If&nbsp;we&nbsp;do&nbsp;a&nbsp;&amp;#39;rabbitmqctl&nbsp;list_queues&nbsp;consumers&nbsp;<br>
name&nbsp;node&amp;#39;&nbsp;the&nbsp;response&nbsp;we&nbsp;get&nbsp;is:&lt;br&gt;<br>
&lt;br&gt;<br>
1&nbsp;      &nbsp;test_queue        &nbsp;rabbit@host2&lt;br&gt;&lt;br&gt;As&nbsp;u&nbsp;can&nbsp;see&nbsp;we&nbsp;have&nbsp;only&nbsp;one&nbsp;consumer...&lt;br&gt;&lt;br&gt;To&nbsp;fix&nbsp;this&nbsp;isuue...&nbsp;we&nbsp;get&nbsp;&amp;#39;client1&amp;#39;&nbsp;to&nbsp;notify&nbsp;all&nbsp;other&nbsp;clients&nbsp;of&nbsp;a&nbsp;network&nbsp;outage..&nbsp;&amp;#39;client2&amp;#39;&nbsp;intercepts&nbsp;this&nbsp;message&nbsp;and&nbsp;promptly&nbsp;reconnects&nbsp;to&nbsp;&amp;#39;rabbit@host2&amp;#39;&nbsp;and&nbsp;again&nbsp;binds&nbsp;to&nbsp;&amp;#39;test_queue&amp;#39;.&lt;br&gt;<br>
Everyone&nbsp;is&nbsp;happy...&lt;br&gt;&lt;br&gt;Unfortunately...&nbsp;we&nbsp;have&nbsp;noticed&nbsp;that&nbsp;from&nbsp;1.7.1,&nbsp;step&nbsp;4&nbsp;goes&nbsp;for&nbsp;a&nbsp;toss..&lt;br&gt;&lt;br&gt;if&nbsp;&amp;#39;rabbit@host1&amp;#39;&nbsp;goes&nbsp;down,&nbsp;&amp;#39;client1&amp;#39;&nbsp;cannot&nbsp;recreate&nbsp;&amp;#39;test_queue&amp;#39;&nbsp;on&nbsp;&amp;#39;rabbit@host2&amp;#39;.&lt;br&gt;<br>
Do&nbsp;this&nbsp;imply&nbsp;that...&nbsp;all&nbsp;queues&nbsp;created&nbsp;on&nbsp;the&nbsp;node&nbsp;WILL&nbsp;be&nbsp;unavailable&nbsp;for&nbsp;the&nbsp;duration&nbsp;of&nbsp;the&nbsp;nodes&nbsp;outage&nbsp;??&lt;br&gt;Which&nbsp;means&nbsp;there&nbsp;wont&nbsp;be&nbsp;any&nbsp;consumers&nbsp;for&nbsp;messages&nbsp;sent&nbsp;to&nbsp;the&nbsp;exchange&nbsp;for&nbsp;the&nbsp;duration&nbsp;of&nbsp;the&nbsp;outage..&lt;br&gt;<br>
&lt;br&gt;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;anybody&nbsp;could&nbsp;probably&nbsp;shed&nbsp;some&nbsp;light&nbsp;on&nbsp;:&lt;br&gt;1)&nbsp;Why&nbsp;this&nbsp;change&nbsp;in&nbsp;behaviour&nbsp;?&lt;br&gt;2)&nbsp;What&nbsp;is&nbsp;the&nbsp;suggested&nbsp;approach&nbsp;to&nbsp;tackle&nbsp;these&nbsp;types&nbsp;of&nbsp;availability&nbsp;issues&nbsp;in&nbsp;rabbitMQ&nbsp;?&lt;br&gt;&lt;br&gt;Thanx&nbsp;in&nbsp;advance&lt;br&gt;<br>
-Arun&nbsp;Suresh&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>

</tt>
