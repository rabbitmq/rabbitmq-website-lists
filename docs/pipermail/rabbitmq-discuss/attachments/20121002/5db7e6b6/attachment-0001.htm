<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;28&nbsp;Sep&nbsp;2012,&nbsp;at&nbsp;20:34,&nbsp;&lt;a&nbsp;href=&quot;mailto:m.luchak@smartasking.com&quot;&gt;m.luchak@smartasking.com&lt;/a&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;font&nbsp;face=&quot;arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Hi&nbsp;All,&lt;/div&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;We&nbsp;are&nbsp;running&nbsp;rabbitmq&nbsp;on&nbsp;Android&nbsp;and&nbsp;continue&nbsp;to&nbsp;have&nbsp;serious&nbsp;problems&nbsp;with&nbsp;maintaining&nbsp;a&nbsp;3G&nbsp;tcp&nbsp;consumer&nbsp;connection.&nbsp;&amp;nbsp;We&nbsp;have&nbsp;implemented&nbsp;heartbeats&nbsp;but&nbsp;I&nbsp;am&nbsp;struggling&nbsp;to&nbsp;understand&nbsp;the&nbsp;flow&nbsp;to&nbsp;monitor&nbsp;and&nbsp;re-establish&nbsp;connections.&nbsp;&amp;nbsp;If&nbsp;I&nbsp;understand&nbsp;correctly:&lt;/div&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Enabling&nbsp;heartbeats&nbsp;WITHOUT&nbsp;handling&amp;nbsp;ShutdownSignalException&nbsp;would&nbsp;actually&nbsp;be&nbsp;counter&nbsp;productive&nbsp;as&nbsp;a&nbsp;number&nbsp;of&nbsp;missed&nbsp;heartbeats&nbsp;would&nbsp;close&nbsp;the&nbsp;connection.&lt;/div&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Is&nbsp;the&nbsp;&quot;right&nbsp;way&nbsp;to&nbsp;do&nbsp;it&quot;&nbsp;:&lt;/div&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Enable&nbsp;heartbeats&nbsp;on&nbsp;the&nbsp;server&lt;/div&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Setting&nbsp;(in&nbsp;Java)&amp;nbsp;factory.setRequestedHeartbeat(HEARTBEAT_TIMEOUT);&nbsp;&amp;nbsp;will&nbsp;&quot;auto-magically&quot;&nbsp;enable&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;heartbeats&nbsp;on&nbsp;the&nbsp;client&nbsp;and&nbsp;no&nbsp;other&nbsp;call&nbsp;is&nbsp;neccessary&nbsp;to&nbsp;send&nbsp;heartbeats&nbsp;&amp;lt;-&nbsp;(big&nbsp;doubt&nbsp;here)&lt;/div&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;this&nbsp;is&nbsp;enough&nbsp;to&nbsp;set&nbsp;up&nbsp;heartbeats.&nbsp;The&nbsp;connection&nbsp;factory&nbsp;passes&nbsp;the&nbsp;heartbeat&nbsp;settings&nbsp;to&nbsp;the&nbsp;underlying&nbsp;connection,&nbsp;which&nbsp;in&nbsp;turn&nbsp;configures&nbsp;heartbeats.&nbsp;These&nbsp;are&nbsp;enabled&nbsp;on&nbsp;the&nbsp;client&nbsp;*and*&nbsp;the&nbsp;server,&nbsp;so&nbsp;that&nbsp;both&nbsp;ends&nbsp;can&nbsp;know&nbsp;about&nbsp;the&nbsp;other&nbsp;one&nbsp;going&nbsp;away&nbsp;unexpectedly.&amp;nbsp;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;font&nbsp;face=&quot;arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;Handle&amp;nbsp;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;ShutdownSignalException&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;&nbsp;cause&nbsp;and&nbsp;reconnect&nbsp;if&nbsp;it&nbsp;was&nbsp;a&nbsp;hard&nbsp;close..&lt;/span&gt;&lt;/div&gt;&lt;p&nbsp;style=&quot;margin:0;padding:0;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;font&nbsp;face=&quot;arial&quot;&nbsp;size=&quot;2&quot;&gt;&lt;div&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;10pt;&quot;&gt;Does&nbsp;that&nbsp;sound&nbsp;about&nbsp;right?&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yep,&nbsp;that&nbsp;should&nbsp;do&nbsp;what&nbsp;you're&nbsp;after.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
