<tt>
I&nbsp;have&nbsp;the&nbsp;following&nbsp;code&nbsp;to&nbsp;declare&nbsp;a&nbsp;queue:&lt;br&gt;&lt;br&gt;Connection&nbsp;connection&nbsp;=&nbsp;RabbitConnection.getConnection();&lt;br&gt;Channel&nbsp;channel&nbsp;=&nbsp;connection.createChannel();&lt;br&gt;channel.queueDeclare(getQueueName(),&nbsp;false,&nbsp;false,&nbsp;false,&nbsp;null);&lt;br&gt;consumer&nbsp;=&nbsp;new&nbsp;QueueingConsumer(channel);&lt;br&gt;channel.basicConsume(getQueueName(),&nbsp;true,consumer);&lt;br&gt;&lt;br&gt;and&nbsp;the&nbsp;following&nbsp;to&nbsp;get&nbsp;the&nbsp;next&nbsp;Delivery&nbsp;object&nbsp;and&nbsp;process&nbsp;it:&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Delivery&nbsp;delivery&nbsp;=&nbsp;null;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;T&nbsp;queue&nbsp;=&nbsp;null;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;//loop&nbsp;over,&nbsp;continuously&nbsp;retrieving&nbsp;messages&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while(true)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;try&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;delivery&nbsp;=&nbsp;consumer.nextDelivery();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;queue&nbsp;=&nbsp;deserialise(delivery.getBody());&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;process(queue);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&nbsp;catch&nbsp;(ShutdownSignalException&nbsp;e)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;logger.warn(&quot;Shutodwon&nbsp;signal&nbsp;received.&quot;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;break;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&nbsp;catch&nbsp;(ConsumerCancelledException&nbsp;e)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;logger.warn(&quot;Consumer&nbsp;cancelled&nbsp;exception:&nbsp;{}&quot;,e.getMessage());&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;break;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&nbsp;catch&nbsp;(InterruptedException&nbsp;e)&nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;logger.warn(&quot;Interuption&nbsp;exception:&nbsp;{}&quot;,&nbsp;e);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;break;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;}&lt;br&gt;&lt;br&gt;If&nbsp;I&nbsp;run&nbsp;this&nbsp;with&nbsp;a&nbsp;queue&nbsp;containing&nbsp;a&nbsp;large&nbsp;number&nbsp;of&nbsp;objects,&nbsp;after&nbsp;approximatelly&nbsp;2.7&nbsp;million&nbsp;objects&nbsp;I&nbsp;get&nbsp;an&nbsp;out&nbsp;of&nbsp;memory&nbsp;exception.&amp;nbsp;&nbsp;I&nbsp;found&nbsp;this&nbsp;originally&nbsp;by&nbsp;running&nbsp;it&nbsp;over&nbsp;night&nbsp;with&nbsp;data&nbsp;going&nbsp;in&nbsp;from&nbsp;JMeter&nbsp;at&nbsp;a&nbsp;rate&nbsp;~90/s&nbsp;which&nbsp;at&nbsp;first&nbsp;it&nbsp;is&nbsp;consuming&nbsp;without&nbsp;any&nbsp;trouble,&nbsp;but&nbsp;in&nbsp;the&nbsp;morning&nbsp;I&nbsp;noticed&nbsp;a&nbsp;large&nbsp;number&nbsp;in&nbsp;RabbitMQ&nbsp;and&nbsp;an&nbsp;out&nbsp;of&nbsp;memory&nbsp;exception&nbsp;on&nbsp;the&nbsp;consumer.&amp;nbsp;&nbsp;I&nbsp;ran&nbsp;it&nbsp;up&nbsp;again&nbsp;and&nbsp;used&nbsp;the&nbsp;Eclipse&nbsp;Memory&nbsp;Analyzer&nbsp;to&nbsp;determine&nbsp;where&nbsp;this&nbsp;memory&nbsp;was&nbsp;being&nbsp;used.&amp;nbsp;&nbsp;From&nbsp;this&nbsp;I&nbsp;can&nbsp;see&nbsp;that&nbsp;the&nbsp;java.util.concurrent.LinkedBlockingQueue&nbsp;that&nbsp;is&nbsp;referenced&nbsp;by&nbsp;com.rabbitmq.client.QueueingConsumer&nbsp;is&nbsp;growing&nbsp;and&nbsp;growing&nbsp;until&nbsp;it&nbsp;runs&nbsp;out&nbsp;of&nbsp;memory.&lt;br&gt;&lt;br&gt;&lt;p&gt;Do&nbsp;I&nbsp;need&nbsp;to&nbsp;do&nbsp;anything&nbsp;to&nbsp;tell&nbsp;Rabbit&nbsp;to&nbsp;release&nbsp;resources?&lt;/p&gt;<br>
<br>
&lt;p&gt;I&nbsp;could&nbsp;increase&nbsp;the&nbsp;heap&nbsp;size&nbsp;but&nbsp;I'm&nbsp;concerned&nbsp;that&nbsp;this&nbsp;is&nbsp;just&nbsp;a&nbsp;<br>
short&nbsp;term&nbsp;fix&nbsp;and&nbsp;there&nbsp;might&nbsp;be&nbsp;something&nbsp;in&nbsp;my&nbsp;code&nbsp;that&nbsp;could&nbsp;bite&nbsp;<br>
me&nbsp;with&nbsp;a&nbsp;memory&nbsp;leak&nbsp;a&nbsp;few&nbsp;months&nbsp;into&nbsp;production&nbsp;deployment.&lt;/p&gt;I&nbsp;have&nbsp;also&nbsp;posted&nbsp;this&nbsp;to&nbsp;StackOverflow:&amp;nbsp;&nbsp;http://stackoverflow.com/questions/12687368/rabbitmq-queueingconsumer-possible-memory-leak&lt;br&gt;
</tt>
