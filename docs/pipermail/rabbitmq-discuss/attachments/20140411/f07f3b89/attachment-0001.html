<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;----------&nbsp;Forwarded&nbsp;message&nbsp;----------&lt;br&gt;From:&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;joseph&nbsp;rouphael&lt;/b&gt;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:josephrouphael@gmail.com&quot;&gt;josephrouphael@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;<br>
Date:&nbsp;Fri,&nbsp;Apr&nbsp;11,&nbsp;2014&nbsp;at&nbsp;4:11&nbsp;PM&lt;br&gt;Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;Performance&nbsp;bottleneck&nbsp;on&nbsp;inter-node&nbsp;connection&lt;br&gt;To:&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Thu,&nbsp;Apr&nbsp;10,&nbsp;2014&nbsp;at&nbsp;7:01&nbsp;PM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;(re-adding&nbsp;the&nbsp;list)&lt;div&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;10/04/14&nbsp;16:42,&nbsp;joseph&nbsp;rouphael&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;<br>
On&nbsp;Thu,&nbsp;Apr&nbsp;10,&nbsp;2014&nbsp;at&nbsp;11:57&nbsp;AM,&nbsp;Matthias&nbsp;Radestock&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&nbsp;&lt;mailto:&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&gt;&lt;u&gt;&lt;/u&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
 &nbsp; &nbsp;Have&nbsp;you&nbsp;tried&nbsp;this&nbsp;w/o&nbsp;hipe?&lt;br&gt;<br>
In&nbsp;fact,&nbsp;HIPE&nbsp;is&nbsp;not&nbsp;enabled&nbsp;in&nbsp;Erlang,&nbsp;so&nbsp;this&nbsp;config&nbsp;has&nbsp;no&nbsp;effect.&lt;br&gt;<br>
(You&nbsp;can&nbsp;consider&nbsp;Hipe&nbsp;off)&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
ok,&nbsp;I&#39;d&nbsp;still&nbsp;prefer&nbsp;if&nbsp;you&nbsp;took&nbsp;out&nbsp;that&nbsp;setting.&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;OK,&nbsp;setting&nbsp;removed.&nbsp;(Test&nbsp;re-done&nbsp;with&nbsp;same&nbsp;result)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;{delegate_count,&nbsp;32},&lt;br&gt;<br>
 &nbsp; &nbsp;Why&nbsp;did&nbsp;you&nbsp;set&nbsp;this?&lt;br&gt;<br>
I&nbsp;have&nbsp;used&nbsp;this&nbsp;in&nbsp;a&nbsp;try&nbsp;to&nbsp;increase&nbsp;the&nbsp;number&nbsp;of&nbsp;delegate&nbsp;processes&lt;br&gt;<br>
used&nbsp;for&nbsp;intra-cluster&nbsp;configuration.&nbsp;Hoping&nbsp;that&nbsp;will&nbsp;increase&lt;br&gt;<br>
inter-node&nbsp;communication&nbsp;performance&nbsp;(But&nbsp;this&nbsp;had&nbsp;no&nbsp;effect)&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Ditto.&lt;div&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
In&nbsp;fact,&nbsp;I&nbsp;am&nbsp;not&nbsp;using&nbsp;any&nbsp;synchronous&nbsp;mechanism.&nbsp;I&nbsp;am&nbsp;publishing&lt;br&gt;<br>
messages&nbsp;with&nbsp;no&nbsp;confirm.select.&lt;br&gt;<br>
I&nbsp;am&nbsp;using&nbsp;a&nbsp;c&nbsp;client&nbsp;(based&nbsp;on&nbsp;rabbitmq-c)&nbsp;to&nbsp;publish&nbsp;messages&nbsp;with&nbsp;the&lt;br&gt;<br>
following&nbsp;config:&lt;br&gt;<br>
-&nbsp;Non&nbsp;persistent&lt;br&gt;<br>
-&nbsp;No&nbsp;confirm.select&lt;br&gt;<br>
-&nbsp;Default&nbsp;Direct&nbsp;exchange&lt;br&gt;<br>
-&nbsp;Routing&nbsp;key&nbsp;equal&nbsp;to&nbsp;queue_name&lt;br&gt;<br>
-&nbsp;Message&nbsp;size&nbsp;1KB&lt;br&gt;<br>
I&nbsp;am&nbsp;running&nbsp;10&nbsp;client&nbsp;processes&nbsp;which&nbsp;are&nbsp;publishing&nbsp;in&nbsp;parallel&nbsp;to&nbsp;10&lt;br&gt;<br>
different&nbsp;queues.&lt;br&gt;<br>
Rate&nbsp;is&nbsp;regulated&nbsp;on&nbsp;the&nbsp;client,&nbsp;I&nbsp;can&nbsp;force&nbsp;the&nbsp;publsih&nbsp;rate&nbsp;in&nbsp;the&nbsp;C&lt;br&gt;<br>
client.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;running&nbsp;as&nbsp;well&nbsp;10&nbsp;other&nbsp;client&nbsp;processes&nbsp;to&nbsp;consume&nbsp;full-speed&nbsp;(no&lt;br&gt;<br>
rate&nbsp;regulation)&nbsp;from&nbsp;the&nbsp;10&nbsp;queues.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Do&nbsp;the&nbsp;consumers&nbsp;use&nbsp;acknowledgements?&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;Yes.&nbsp;Consumers&nbsp;are&nbsp;acknowledging&nbsp;the&nbsp;messages&nbsp;as&nbsp;soon&nbsp;as&nbsp;they&nbsp;are&nbsp;received&nbsp;(No&nbsp;processing&nbsp;in&nbsp;between)&lt;/div&gt;&lt;div&gt; I&nbsp;have&nbsp;re-done&nbsp;the&nbsp;test&nbsp;with&nbsp;no-ack&nbsp;and&nbsp;I&nbsp;have&nbsp;encountered&nbsp;the&nbsp;same&nbsp;bottleneck.The&nbsp;rate&nbsp;achieved&nbsp;with&nbsp;no-ack&nbsp;was&nbsp;fluctuating&nbsp;between&nbsp;18KHZ&nbsp;and&nbsp;27KHZ&nbsp;(The&nbsp;expected&nbsp;rate&nbsp;is&nbsp;100KHZ)&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;am&nbsp;using&nbsp;the&nbsp;same&nbsp;setup&nbsp;to&nbsp;publish/consume&nbsp;messages&nbsp;on&nbsp;one&nbsp;node&nbsp;(node&lt;br&gt;<br>
1&nbsp;where&nbsp;queues&nbsp;are&nbsp;created),&nbsp;with&nbsp;no&nbsp;issue.&nbsp;I&nbsp;can&nbsp;hit&nbsp;up&nbsp;to&nbsp;100K&nbsp;TPS&nbsp;(5K&lt;br&gt;<br>
TPS&nbsp;on&nbsp;each&nbsp;client&nbsp;process).&lt;br&gt;<br>
The&nbsp;problem&nbsp;appears&nbsp;only&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;publish&nbsp;on&nbsp;node1&nbsp;and&nbsp;consume&nbsp;from&lt;br&gt;<br>
node2&nbsp;(or&nbsp;publish&nbsp;on&nbsp;node2&nbsp;and&nbsp;consume&nbsp;from&nbsp;node1).&nbsp;The&nbsp;problem&nbsp;appears&lt;br&gt;<br>
only&nbsp;when&nbsp;there&nbsp;is&nbsp;an&nbsp;inter-node&nbsp;activity.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
So&nbsp;the&nbsp;100kHz&nbsp;is&nbsp;the&nbsp;aggregate&nbsp;publishing&nbsp;and&nbsp;consuming&nbsp;rate,&nbsp;i.e.&nbsp;10&nbsp;x&nbsp;5kHz&nbsp;publishing&nbsp;and&nbsp;10&nbsp;x&nbsp;5kHz&nbsp;consuming?&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;my&nbsp;mistake,&nbsp;there&nbsp;are&nbsp;20&nbsp;processes&nbsp;with&nbsp;20&nbsp;queues&nbsp;(Not&nbsp;10).&nbsp;So&nbsp;100KHZ&nbsp;(20&nbsp;x&nbsp;5)&nbsp;producing&nbsp;and&nbsp;100KHZ&nbsp;(20&nbsp;x&nbsp;5)&nbsp;consuming &lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
What&nbsp;results&nbsp;do&nbsp;you&nbsp;get&nbsp;in&nbsp;the&nbsp;single-node&nbsp;and&nbsp;multi-node&nbsp;scenarios&nbsp;when&nbsp;running&nbsp;the&nbsp;tests&nbsp;with&nbsp;just&nbsp;a&nbsp;single&nbsp;queue&nbsp;and&nbsp;single&nbsp;producer&nbsp;and&nbsp;single&nbsp;consumer?&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;Single&nbsp;producer/consumer/queue&nbsp;on&nbsp;single&nbsp;node&nbsp;max&nbsp;rate&nbsp;achieved:&nbsp;11KHZ &lt;/div&gt;&lt;div&gt;Single&nbsp;producer/consumer/queue&nbsp;on&nbsp;dual&nbsp;nodes&nbsp;max&nbsp;rate&nbsp;achieved:&nbsp;~&nbsp;11KHZ &lt;/div&gt;<br>
&lt;div&gt;The&nbsp;impact&nbsp;of&nbsp;inter-node&nbsp;is&nbsp;not&nbsp;seen&nbsp;here&nbsp;because&nbsp;the&nbsp;traffic&nbsp;is&nbsp;limited&nbsp;by&nbsp;the&nbsp;single&nbsp;client&nbsp;connection/process. In&nbsp;single&nbsp;consumer/producer&nbsp;connection,&nbsp;the&nbsp;throughput&nbsp;is&nbsp;limited&nbsp;by&nbsp;the&nbsp;client&nbsp;connection&nbsp;itself&nbsp;not&nbsp;by&nbsp;the&nbsp;inter-node&nbsp;connection. &lt;/div&gt;<br>
<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;are&nbsp;below&nbsp;a&nbsp;summary&nbsp;of&nbsp;the&nbsp;tests&nbsp;performed:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Test1:&nbsp;Single&nbsp;node,&nbsp;20&nbsp;queues,&nbsp;ACK&nbsp;on&lt;/div&gt;&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div&gt;Nodes:&nbsp;Single&nbsp;node&lt;/div&gt;&lt;div&gt;<br>
<br>
Producer&nbsp;Processes:&nbsp;20&lt;/div&gt;&lt;div&gt;Producer&nbsp;process&nbsp;regulate&nbsp;rate:&nbsp;5KHZ&lt;/div&gt;&lt;div&gt;Acknowledgment:&nbsp;ON&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;100&nbsp;KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Steady&nbsp;at&nbsp;100&nbsp;KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;33%&lt;/div&gt;&lt;div&gt;Note:&nbsp;No&nbsp;bottleneck&nbsp;detected&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Test&nbsp;2:&nbsp;Single&nbsp;node,&nbsp;20&nbsp;queues,&nbsp;ACK&nbsp;off&lt;/div&gt;&lt;div&gt;---------------------------------------&lt;/div&gt;&lt;div&gt;Nodes:&nbsp;Single&nbsp;node&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;20&lt;/div&gt;&lt;div&gt;Producer&nbsp;process&nbsp;regulate&nbsp;rate:&nbsp;5KHZ&lt;/div&gt;<br>
<br>
&lt;div&gt;Acknowledgment:&nbsp;OFF&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;100&nbsp;KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Steady&nbsp;at&nbsp;100&nbsp;KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;57%&lt;/div&gt;&lt;div&gt;Note:&nbsp;No&nbsp;bottleneck&nbsp;detected&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Test&nbsp;3:&nbsp;Single&nbsp;node,&nbsp;1&nbsp;queue,&nbsp;ACK&nbsp;on&lt;/div&gt;<br>
<br>
&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div&gt;Nodes:&nbsp;Single&nbsp;node&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;process&nbsp;regulate&nbsp;rate:&nbsp;20KHZ&lt;/div&gt;&lt;div&gt;Acknowledgment:&nbsp;ON&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;20&nbsp;KHZ&lt;/div&gt;&lt;div&gt;<br>
<br>
Achieved&nbsp;rate:&nbsp;Steady&nbsp;11&nbsp;KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;94%&lt;/div&gt;&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;single&nbsp;client&nbsp;connection&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Test&nbsp;4:&nbsp;Single&nbsp;node,&nbsp;1&nbsp;queue,&nbsp;ACK&nbsp;off&lt;/div&gt;&lt;div&gt;------------------------------------&lt;/div&gt;<br>
<br>
&lt;div&gt;Nodes:&nbsp;Single&nbsp;node&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;process&nbsp;regulate&nbsp;rate:&nbsp;20KHZ&lt;/div&gt;&lt;div&gt;Acknowledgment:&nbsp;OFF&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;20&nbsp;KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Steady&nbsp;11&nbsp;KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;96%&lt;/div&gt;<br>
<br>
&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;single&nbsp;client&nbsp;connection&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Test&nbsp;5:&nbsp;Dual&nbsp;node,&nbsp;Queues/Producers&nbsp;on&nbsp;same&nbsp;node,&nbsp;20&nbsp;queue,&nbsp;ACK&nbsp;on&lt;/div&gt;&lt;div&gt;------------------------------------------------------------------&lt;/div&gt;<br>
<br>
&lt;div&gt;Nodes:&nbsp;Double&nbsp;node&lt;/div&gt;&lt;div&gt;Queues&nbsp;created&nbsp;on:&nbsp;Node1&lt;/div&gt;&lt;div&gt;Producers&nbsp;on:&nbsp;node&nbsp;1&lt;/div&gt;&lt;div&gt;Consumers&nbsp;on:&nbsp;node&nbsp;2&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;20&lt;/div&gt;&lt;div&gt;Producer&nbsp;regulate&nbsp;rate&nbsp;per&nbsp;process:&nbsp;5KHZ&lt;/div&gt;&lt;div&gt;Acknowledgment:&nbsp;ON&lt;/div&gt;<br>
<br>
&lt;div&gt;Expected&nbsp;rate:&nbsp;100KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Fluctuating&nbsp;between&nbsp;12KHZ&nbsp;and&nbsp;21KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;88%&lt;/div&gt;&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;inter-node&nbsp;connection&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Test&nbsp;6:&nbsp;Dual&nbsp;node,&nbsp;Queues/Producers&nbsp;on&nbsp;same&nbsp;node,&nbsp;20&nbsp;queue,&nbsp;ACK&nbsp;off&lt;/div&gt;<br>
<br>
&lt;div&gt;-------------------------------------------------------------------&lt;/div&gt;&lt;div&gt;Nodes:&nbsp;Double&nbsp;node&lt;/div&gt;&lt;div&gt;Queues&nbsp;created&nbsp;on:&nbsp;Node1&lt;/div&gt;&lt;div&gt;Producers&nbsp;on:&nbsp;node&nbsp;1&lt;/div&gt;&lt;div&gt;Consumers&nbsp;on:&nbsp;node&nbsp;2&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;20&lt;/div&gt;<br>
<br>
&lt;div&gt;Producer&nbsp;regulate&nbsp;rate&nbsp;per&nbsp;process:&nbsp;5KHZ&lt;/div&gt;&lt;div&gt;Acknowledgment:&nbsp;OFF&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;100KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Fluctuating&nbsp;between&nbsp;18KHZ&nbsp;and&nbsp;27KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;91%&lt;/div&gt;&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;inter-node&nbsp;connection&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Test&nbsp;7:&nbsp;Dual&nbsp;node,&nbsp;Queues/Consumers&nbsp;on&nbsp;same&nbsp;node,&nbsp;20&nbsp;queue,&nbsp;ACK&nbsp;on&lt;/div&gt;&lt;div&gt;------------------------------------------------------------------&lt;/div&gt;&lt;div&gt;Nodes:&nbsp;Double&nbsp;node&lt;/div&gt;&lt;div&gt;Queues&nbsp;created&nbsp;on:&nbsp;Node1&lt;/div&gt;<br>
<br>
&lt;div&gt;Producers&nbsp;on:&nbsp;node&nbsp;2&lt;/div&gt;&lt;div&gt;Consumers&nbsp;on:&nbsp;node&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;20&lt;/div&gt;&lt;div&gt;Producer&nbsp;regulate&nbsp;rate&nbsp;per&nbsp;process:&nbsp;5KHZ&lt;/div&gt;&lt;div&gt;Acknowledgment:&nbsp;ON&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;100KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Fluctuating&nbsp;between&nbsp;10KHZ&nbsp;and&nbsp;20KHZ&lt;/div&gt;<br>
<br>
&lt;div&gt;CPU&nbsp;idle:&nbsp;91%&lt;/div&gt;&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;inter-node&nbsp;connection&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Test&nbsp;8:&nbsp;Dual&nbsp;node,&nbsp;Queues/Consumers&nbsp;on&nbsp;same&nbsp;node,&nbsp;20&nbsp;queue,&nbsp;ACK&nbsp;off&lt;/div&gt;&lt;div&gt;-------------------------------------------------------------------&lt;/div&gt;<br>
<br>
&lt;div&gt;Nodes:&nbsp;Double&nbsp;node&lt;/div&gt;&lt;div&gt;Queues&nbsp;created&nbsp;on:&nbsp;Node1&lt;/div&gt;&lt;div&gt;Producers&nbsp;on:&nbsp;node&nbsp;2&lt;/div&gt;&lt;div&gt;Consumers&nbsp;on:&nbsp;node&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;20&lt;/div&gt;&lt;div&gt;Producer&nbsp;regulate&nbsp;rate&nbsp;per&nbsp;process:&nbsp;5KHZ&lt;/div&gt;&lt;div&gt;Acknowledgment:&nbsp;OFF&lt;/div&gt;<br>
<br>
&lt;div&gt;Expected&nbsp;rate:&nbsp;100KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Fluctuating&nbsp;between&nbsp;10KHZ&nbsp;and&nbsp;20KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;95%&lt;/div&gt;&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;inter-node&nbsp;connection&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Test&nbsp;9:&nbsp;Dual&nbsp;node,&nbsp;1&nbsp;queue,&nbsp;ACK&nbsp;off&lt;/div&gt;<br>
<br>
&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div&gt;Nodes:&nbsp;Double&nbsp;node&lt;/div&gt;&lt;div&gt;Queues&nbsp;created&nbsp;on:&nbsp;Node1&lt;/div&gt;&lt;div&gt;Producers&nbsp;on:&nbsp;node&nbsp;2&lt;/div&gt;&lt;div&gt;Consumers&nbsp;on:&nbsp;node&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;regulate&nbsp;rate&nbsp;per&nbsp;process:&nbsp;20KHZ&lt;/div&gt;<br>
<br>
&lt;div&gt;Acknowledgment:&nbsp;OFF&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;20KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Steady&nbsp;10.5KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;96%&lt;/div&gt;&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;single&nbsp;client&nbsp;connection&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Test&nbsp;10:&nbsp;Dual&nbsp;node,&nbsp;1&nbsp;queue,&nbsp;ACK&nbsp;on&lt;/div&gt;<br>
<br>
&lt;div&gt;------------------------------------&lt;/div&gt;&lt;div&gt;Nodes:&nbsp;Double&nbsp;node&lt;/div&gt;&lt;div&gt;Queues&nbsp;created&nbsp;on:&nbsp;Node1&lt;/div&gt;&lt;div&gt;Producers&nbsp;on:&nbsp;node&nbsp;2&lt;/div&gt;&lt;div&gt;Consumers&nbsp;on:&nbsp;node&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;Processes:&nbsp;1&lt;/div&gt;&lt;div&gt;Producer&nbsp;regulate&nbsp;rate&nbsp;per&nbsp;process:&nbsp;20KHZ&lt;/div&gt;<br>
<br>
&lt;div&gt;Acknowledgment:&nbsp;ON&lt;/div&gt;&lt;div&gt;Expected&nbsp;rate:&nbsp;20KHZ&lt;/div&gt;&lt;div&gt;Achieved&nbsp;rate:&nbsp;Steady&nbsp;10.5KHZ&lt;/div&gt;&lt;div&gt;CPU&nbsp;idle:&nbsp;95%&lt;/div&gt;&lt;div&gt;Note:&nbsp;Bottleneck&nbsp;on&nbsp;single&nbsp;client&nbsp;connection&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
