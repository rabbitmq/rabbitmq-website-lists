<tt>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;13px;&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(160,&nbsp;160,&nbsp;168);&nbsp;&quot;&gt;On&nbsp;Saturday,&nbsp;29.&nbsp;December&nbsp;2012&nbsp;at&nbsp;14:51,&nbsp;Francesco&nbsp;Mazzoli&nbsp;wrote:&lt;/span&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;I’m&nbsp;not&nbsp;sure&nbsp;what&nbsp;you&nbsp;mean&nbsp;here.&nbsp;&nbsp;What&nbsp;does&nbsp;“RabbitMQ&nbsp;package”&nbsp;refers&nbsp;to?&nbsp;&nbsp;Can&lt;/div&gt;&lt;div&gt;you&nbsp;be&nbsp;more&nbsp;clear&nbsp;on&nbsp;why&nbsp;“they&nbsp;converge&nbsp;into&nbsp;the&nbsp;same&nbsp;issue”?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;The&nbsp;package&nbsp;I&nbsp;mention&nbsp;refers&nbsp;to&nbsp;the&nbsp;package&nbsp;available&nbsp;on&nbsp;the&nbsp;RabbitMQ&nbsp;website.&nbsp;In&nbsp;this&nbsp;case&nbsp;I'm&nbsp;installing&nbsp;a&nbsp;Ubuntu&nbsp;package,&nbsp;which&nbsp;generates&nbsp;all&nbsp;its&nbsp;configuration&nbsp;files&nbsp;when&nbsp;installed&nbsp;and&nbsp;starts&nbsp;the&nbsp;service&nbsp;too.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;problems&nbsp;outlined&nbsp;converge&nbsp;into&nbsp;the&nbsp;same&nbsp;issue&nbsp;because&nbsp;of&nbsp;this&nbsp;last&nbsp;bit.&nbsp;It&nbsp;might&nbsp;seem&nbsp;like&nbsp;a&nbsp;useful&nbsp;feature&nbsp;of&nbsp;the&nbsp;package,&nbsp;but&nbsp;given&nbsp;that&nbsp;a&nbsp;node&nbsp;that&nbsp;should&nbsp;enter&nbsp;the&nbsp;cluster&nbsp;needs&nbsp;to&nbsp;be&nbsp;fresh&nbsp;and&nbsp;untouched,&nbsp;this&nbsp;is&nbsp;practically&nbsp;impossible&nbsp;to&nbsp;achieve&nbsp;with&nbsp;the&nbsp;cluster_nodes&nbsp;section&nbsp;in&nbsp;the&nbsp;configuration,&nbsp;at&nbsp;least&nbsp;when&nbsp;trying&nbsp;to&nbsp;avoid&nbsp;hacks&nbsp;that&nbsp;generate&nbsp;the&nbsp;configuration&nbsp;beforehand,&nbsp;where&nbsp;users&nbsp;and&nbsp;directories&nbsp;don't&nbsp;yet&nbsp;exist.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;the&nbsp;package&nbsp;installation,&nbsp;the&nbsp;node&nbsp;that&nbsp;was&nbsp;just&nbsp;freshly&nbsp;installed&nbsp;needs&nbsp;to&nbsp;be&nbsp;reset&nbsp;for&nbsp;these&nbsp;things&nbsp;to&nbsp;fully&nbsp;work.&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Well,&nbsp;here&nbsp;to&nbsp;change&nbsp;clustering&nbsp;behavior&nbsp;you&nbsp;would&nbsp;probably&nbsp;have&nbsp;to&nbsp;force&lt;/div&gt;&lt;div&gt;things&nbsp;a&nbsp;bit,&nbsp;either&nbsp;with&nbsp;“dangerous”&nbsp;commands&nbsp;or&nbsp;by&nbsp;`eval'ing&nbsp;Erlang&lt;/div&gt;&lt;div&gt;expressions&nbsp;-&nbsp;so&nbsp;you’d&nbsp;be&nbsp;delving&nbsp;into&nbsp;clustering&nbsp;internals&nbsp;that,&nbsp;as&lt;/div&gt;&lt;div&gt;implementation&nbsp;details,&nbsp;are&nbsp;not&nbsp;documented.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Note&nbsp;that&nbsp;you&nbsp;can&nbsp;also&nbsp;deploy&nbsp;some&nbsp;gentler&nbsp;measures&nbsp;like&nbsp;“check&nbsp;that&nbsp;the&nbsp;node&lt;/div&gt;&lt;div&gt;has&nbsp;clustered,&nbsp;try&nbsp;again&nbsp;in&nbsp;5&nbsp;minutes&nbsp;if&nbsp;it&nbsp;didn’t”,&nbsp;but&nbsp;those&nbsp;would&nbsp;be&nbsp;ad-hoc&lt;/div&gt;&lt;div&gt;measures&nbsp;that&nbsp;we&nbsp;can’t&nbsp;generalize&nbsp;as&nbsp;default&nbsp;behaviour.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;Sure,&nbsp;but&nbsp;I'm&nbsp;still&nbsp;interested&nbsp;in&nbsp;these,&nbsp;as&nbsp;odd&nbsp;as&nbsp;they&nbsp;may&nbsp;seem.&nbsp;My&nbsp;intent&nbsp;is&nbsp;to&nbsp;have&nbsp;an&nbsp;automated&nbsp;cluster&nbsp;setup,&nbsp;and&nbsp;for&nbsp;that&nbsp;to&nbsp;fully&nbsp;work,&nbsp;I&nbsp;need&nbsp;to&nbsp;know&nbsp;the&nbsp;oddities&nbsp;and&nbsp;ways&nbsp;to&nbsp;work&nbsp;around&nbsp;them.&nbsp;A&nbsp;lot&nbsp;of&nbsp;the&nbsp;documentation&nbsp;is&nbsp;aimed&nbsp;at&nbsp;setting&nbsp;up&nbsp;a&nbsp;cluster&nbsp;manually,&nbsp;which&nbsp;to&nbsp;me&nbsp;is&nbsp;a&nbsp;practice&nbsp;to&nbsp;be&nbsp;avoided&nbsp;in&nbsp;production.&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Netsplits&nbsp;are&nbsp;tolerated&nbsp;to&nbsp;a&nbsp;certain&nbsp;extent,&nbsp;but&nbsp;currently&nbsp;we&nbsp;don’t&nbsp;precisely&lt;/div&gt;&lt;div&gt;specify&nbsp;the&nbsp;semantics&nbsp;of&nbsp;the&nbsp;recovery&nbsp;mechanisms.&nbsp;&nbsp;What’s&nbsp;surely&nbsp;the&nbsp;case&nbsp;is&lt;/div&gt;&lt;div&gt;that&nbsp;to&nbsp;use&nbsp;`join_cluster'&nbsp;both&nbsp;nodes&nbsp;have&nbsp;to&nbsp;be&nbsp;online&nbsp;-&nbsp;this&nbsp;is&nbsp;not&nbsp;that&nbsp;much&lt;/div&gt;&lt;div&gt;about&nbsp;netsplits&nbsp;but&nbsp;about&nbsp;`join_cluster'&nbsp;being&nbsp;an&nbsp;operation&nbsp;that&nbsp;requires&lt;/div&gt;&lt;div&gt;agreement&nbsp;from&nbsp;2&nbsp;parties.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;That's&nbsp;understandable&nbsp;behaviour,&nbsp;though&nbsp;I'd&nbsp;suggest&nbsp;considering&nbsp;some&nbsp;sort&nbsp;of&nbsp;retry&nbsp;in&nbsp;either&nbsp;scenario.&nbsp;Which&nbsp;might&nbsp;reduce&nbsp;the&nbsp;issues&nbsp;with&nbsp;the&nbsp;overall&nbsp;setup&nbsp;I've&nbsp;described&nbsp;here&nbsp;so&nbsp;far&nbsp;significantly.&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-style:solid;border-width:1px;margin-left:0px;padding-left:10px;&quot;&gt;&lt;span&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;I’m&nbsp;still&nbsp;not&nbsp;sure&nbsp;what&nbsp;your&nbsp;problem&nbsp;is&nbsp;exactly.&nbsp;&nbsp;If&nbsp;the&nbsp;above&nbsp;makes&nbsp;sense,&lt;/div&gt;&lt;div&gt;`join_cluster'&nbsp;should&nbsp;serve&nbsp;your&nbsp;needs.&nbsp;&nbsp;For&nbsp;what&nbsp;concerns&nbsp;the&nbsp;hostname&lt;/div&gt;&lt;div&gt;problems,&nbsp;I’m&nbsp;waiting&nbsp;for&nbsp;more&nbsp;details.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;join_cluster&nbsp;does&nbsp;fit&nbsp;my&nbsp;needs,&nbsp;but&nbsp;in&nbsp;an&nbsp;automated&nbsp;environment,&nbsp;e.g.&nbsp;with&nbsp;Chef,&nbsp;that&nbsp;command&nbsp;would&nbsp;be&nbsp;triggered&nbsp;every&nbsp;30&nbsp;minutes.&nbsp;Would&nbsp;you&nbsp;consider&nbsp;that&nbsp;a&nbsp;good&nbsp;practice&nbsp;to&nbsp;do?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hence&nbsp;me&nbsp;asking&nbsp;about&nbsp;experiences&nbsp;of&nbsp;automating&nbsp;a&nbsp;cluster&nbsp;setup&nbsp;in&nbsp;production.&nbsp;How&nbsp;people&nbsp;work&nbsp;to&nbsp;make&nbsp;it&nbsp;work,&nbsp;how&nbsp;people&nbsp;make&nbsp;sure&nbsp;a&nbsp;node&nbsp;joins&nbsp;the&nbsp;cluster,&nbsp;how&nbsp;to&nbsp;make&nbsp;sure&nbsp;resources&nbsp;aren't&nbsp;overused&nbsp;where&nbsp;not&nbsp;necessary,&nbsp;e.g.&nbsp;by&nbsp;triggering&nbsp;commands&nbsp;that&nbsp;don't&nbsp;need&nbsp;to&nbsp;be&nbsp;triggered,&nbsp;et.c&lt;/div&gt;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;Cheers,&nbsp;Mathias&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt>
