<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Roy,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Typical&nbsp;job&nbsp;processing&nbsp;time&nbsp;is&nbsp;24&nbsp;hours.&nbsp;I&nbsp;set&nbsp;up&nbsp;heartbeat_interval&nbsp;=&nbsp;432000&nbsp;(5&nbsp;days)&nbsp;.&nbsp;When&nbsp;I&nbsp;tried&nbsp;this&nbsp;earlier,&nbsp;connection&nbsp;dropped&nbsp;off&nbsp;approximately&nbsp;after&nbsp;10&nbsp;mins. &lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;with&nbsp;heartbeat=0&nbsp;and&nbsp;looks&nbsp;like&nbsp;it&nbsp;is&nbsp;working.&nbsp;I&nbsp;find&nbsp;the&nbsp;connection&nbsp;active&nbsp;after&nbsp;90&nbsp;minutes&nbsp;since&nbsp;the&nbsp;message&nbsp;processing&nbsp;started.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;I&nbsp;am&nbsp;now&nbsp;testing&nbsp;with&nbsp;jobs&nbsp;that&nbsp;would&nbsp;take&nbsp;about&nbsp;1-2&nbsp;days&nbsp;to&nbsp;complete&nbsp;processing.&nbsp;Will&nbsp;update&nbsp;you&nbsp;once&nbsp;the&nbsp;testing&nbsp;is&nbsp;complete.&lt;/div&gt;<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Thank&nbsp;you&nbsp;so&nbsp;much&nbsp;for&nbsp;your&nbsp;help!&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Nishanth&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;8,&nbsp;2013&nbsp;at&nbsp;12:13&nbsp;PM,&nbsp;Gavin&nbsp;M.&nbsp;Roy&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:gmr@meetme.com&quot;&nbsp;target=&quot;_blank&quot;&gt;gmr@meetme.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;8,&nbsp;2013&nbsp;at&nbsp;2:59&nbsp;PM,&nbsp;Nishanth&nbsp;Babu&nbsp;Achuthan&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:nishanth@urbanmapping.com&quot;&nbsp;target=&quot;_blank&quot;&gt;nishanth@urbanmapping.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Roy,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;not&nbsp;using&nbsp;time.sleep&nbsp;in&nbsp;my&nbsp;app.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Worker&nbsp;consumes&nbsp;message&nbsp;from&nbsp;the&nbsp;queue.&nbsp;It&nbsp;then&nbsp;starts&nbsp;processing&nbsp;it&nbsp;which&nbsp;takes&nbsp;several&nbsp;hours&nbsp;to&nbsp;complete.&nbsp;&lt;/div&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Perhaps&nbsp;this&nbsp;is&nbsp;a&nbsp;key&nbsp;point.&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&gt;In&nbsp;the&nbsp;meantime,&nbsp;the&nbsp;connection&nbsp;is&nbsp;dropped&nbsp;off&nbsp;due&nbsp;to&nbsp;timeout.&nbsp;Once&nbsp;the&nbsp;processing&nbsp;is&nbsp;complete,&nbsp;the&nbsp;worker&nbsp;tries&nbsp;to&nbsp;send&nbsp;ACK.&nbsp;While&nbsp;doing&nbsp;so,&nbsp;it&nbsp;fails&nbsp;with&nbsp;the&nbsp;error&nbsp;below&nbsp;and&nbsp;the&nbsp;worker&nbsp;shuts&nbsp;down.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;&lt;div&gt;render_jobs_consumer&nbsp;-&nbsp;INFO&nbsp;-&nbsp;tableau-classic-admin0-borders-en-us-extent-101.mbtiles&nbsp;published&nbsp;for&nbsp;merging&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;render_jobs_consumer&nbsp;-&nbsp;INFO&nbsp;-&nbsp;tableau-classic-admin0-borders-en-us-extent-101.mbtiles&nbsp;rendering&nbsp;completed&nbsp;in&nbsp;334.802966833.&nbsp;Sending&nbsp;acknowledgement&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;this&nbsp;shows&nbsp;it&nbsp;takes&nbsp;over&nbsp;5&nbsp;minutes&nbsp;to&nbsp;process&nbsp;a&nbsp;message.&nbsp;If&nbsp;heartbeats&nbsp;are&nbsp;less&nbsp;than&nbsp;that,&nbsp;it&nbsp;will&nbsp;time&nbsp;out&nbsp;unless&nbsp;your&nbsp;consumer&nbsp;app&nbsp;that&nbsp;is&nbsp;doing&nbsp;rendering&nbsp;is&nbsp;making&nbsp;pika&nbsp;process&nbsp;data&nbsp;events.&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Since&nbsp;pika&nbsp;is&nbsp;not&nbsp;running&nbsp;in&nbsp;a&nbsp;thread&nbsp;or&nbsp;isolated&nbsp;runtime,&nbsp;the&nbsp;things&nbsp;your&nbsp;consumer&nbsp;does&nbsp;impact&nbsp;its&nbsp;ability&nbsp;to&nbsp;read&nbsp;and&nbsp;respond&nbsp;to&nbsp;frames&nbsp;from&nbsp;RabbitMQ.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Quick&nbsp;fix&nbsp;is&nbsp;most&nbsp;likely&nbsp;to&nbsp;turn&nbsp;heartbeats&nbsp;off&nbsp;(forcing&nbsp;a&nbsp;heartbeat=0&nbsp;in&nbsp;your&nbsp;connection&nbsp;parameters)&nbsp;or&nbsp;set&nbsp;it&nbsp;to&nbsp;4-5x&nbsp;your&nbsp;average&nbsp;processing&nbsp;time.&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;pika.adapters.base_connection&nbsp;-&nbsp;ERROR&nbsp;-&nbsp;Read&nbsp;empty&nbsp;data,&nbsp;calling&nbsp;disconnect&lt;/div&gt;<br>
<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;pika.adapters.base_connection&nbsp;-&nbsp;WARNING&nbsp;-&nbsp;Unknown&nbsp;state&nbsp;on&nbsp;disconnect:&nbsp;5&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;pika.connection&nbsp;-&nbsp;WARNING&nbsp;-&nbsp;Disconnected&nbsp;from&nbsp;RabbitMQ&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;http://192.168.2.182:5672&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.2.182:5672&lt;/a&gt;&nbsp;(0): &lt;/div&gt;<br>
<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;pika.adapters.select_connection&nbsp;-&nbsp;INFO&nbsp;-&nbsp;Unregistering&nbsp;poller&nbsp;on&nbsp;fd&nbsp;3&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;let&nbsp;us&nbsp;know&nbsp;if&nbsp;this&nbsp;addresses&nbsp;your&nbsp;issue,&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;Gavin &lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
