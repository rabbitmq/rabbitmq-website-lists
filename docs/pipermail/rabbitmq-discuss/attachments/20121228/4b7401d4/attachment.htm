<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;<br>
&lt;div&gt;I'm&nbsp;currently&nbsp;running&nbsp;2.8.7&nbsp;in&nbsp;a&nbsp;cluster&nbsp;of&nbsp;2&nbsp;disk&nbsp;nodes&nbsp;and&nbsp;1&nbsp;ram&nbsp;node&nbsp;with&nbsp;a&nbsp;load&nbsp;balancer.&lt;/div&gt;<br>
&lt;span&nbsp;id=&quot;OLK_SRC_BODY_SECTION&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;<br>
&lt;div&gt;We&nbsp;have&nbsp;a&nbsp;dev&nbsp;and&nbsp;a&nbsp;test&nbsp;env&nbsp;pointing&nbsp;at&nbsp;the&nbsp;same&nbsp;rabbit&nbsp;cluster&nbsp;using&nbsp;'/dev'&nbsp;and&nbsp;'/'&nbsp;for&nbsp;vhosts.&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;In&nbsp;test&nbsp;we&nbsp;have&nbsp;long&nbsp;lived&nbsp;queues&nbsp;(per&nbsp;app)&nbsp;to&nbsp;start&nbsp;simulating&nbsp;our&nbsp;prod&nbsp;env&nbsp;and&nbsp;in&nbsp;dev&nbsp;we&nbsp;spin&nbsp;up&nbsp;auto&nbsp;delete&nbsp;queues(differing&nbsp;queue&nbsp;names&nbsp;based&nbsp;on&nbsp;the&nbsp;appVimId)&nbsp;to&nbsp;avoid&nbsp;the&nbsp;clutter&nbsp;of&nbsp;multiple&nbsp;people&nbsp;testing.&lt;/div&gt;<br>
&lt;div&gt;I'm&nbsp;trying&nbsp;to&nbsp;push&nbsp;HA&nbsp;queues&nbsp;out&nbsp;and&nbsp;am&nbsp;running&nbsp;into&nbsp;a&nbsp;start&nbsp;up&nbsp;error.&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;For&nbsp;/dev&nbsp;it&nbsp;works&nbsp;great,&nbsp;the&nbsp;app&nbsp;spins&nbsp;up&nbsp;the&nbsp;HA&nbsp;queues,&nbsp;finishes&nbsp;the&nbsp;tests&nbsp;and&nbsp;then&nbsp;they&nbsp;auto&nbsp;delete&nbsp;themselves.&lt;/div&gt;<br>
&lt;div&gt;When&nbsp;I&nbsp;try&nbsp;pushing&nbsp;it&nbsp;out&nbsp;to&nbsp;our&nbsp;test&nbsp;env&nbsp;I&nbsp;get&nbsp;this&nbsp;error&nbsp;from&nbsp;the&nbsp;rabbit&nbsp;logs:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;connection&nbsp;&amp;lt;0.15043.4&amp;gt;,&nbsp;channel&nbsp;1&nbsp;-&nbsp;error:&lt;/div&gt;<br>
&lt;div&gt;{amqp_error,precondition_failed,&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;quot;inequivalent&nbsp;arg&nbsp;'x-ha-policy'for&nbsp;queue&nbsp;'queue.name'&nbsp;in&nbsp;vhost&nbsp;'/':&nbsp;received&nbsp;the&nbsp;value&nbsp;'all'&nbsp;of&nbsp;type&nbsp;'longstr'&nbsp;but&nbsp;current&nbsp;is&nbsp;none&amp;quot;,&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;'queue.declare'}&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;I've&nbsp;tried&nbsp;pushing&nbsp;it&nbsp;out&nbsp;with&nbsp;the&nbsp;non&nbsp;HA&nbsp;queues&nbsp;still&nbsp;up,&nbsp;and&nbsp;also&nbsp;with&nbsp;deleting&nbsp;them&nbsp;before&nbsp;trying&nbsp;to&nbsp;spin&nbsp;up&nbsp;the&nbsp;new&nbsp;ones&nbsp;and&nbsp;no&nbsp;dice&nbsp;still&nbsp;can't&nbsp;create&nbsp;these&nbsp;queues.&amp;nbsp;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;its&nbsp;worth&nbsp;noting&nbsp;that&nbsp;the&nbsp;queue&nbsp;names&nbsp;are&nbsp;still&nbsp;the&nbsp;same&nbsp;all&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;do&nbsp;is&nbsp;simply&nbsp;declare&nbsp;them&nbsp;with&nbsp;the&nbsp;x-ha-policy&nbsp;=&nbsp;all&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;p&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;<br>
Map&amp;lt;String,Object&amp;gt;&nbsp;params&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#941c64&quot;&gt;new&lt;/span&gt;&nbsp;HashMap&amp;lt;String,&nbsp;Object&amp;gt;();&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;<br>
params.put(&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(58,&nbsp;64,&nbsp;244);&nbsp;&quot;&gt;&amp;quot;x-ha-policy&amp;quot;&lt;/span&gt;,&amp;nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(58,&nbsp;64,&nbsp;244);&nbsp;&quot;&gt;&amp;quot;all&amp;quot;&lt;/span&gt;);&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;params.put(&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(58,&nbsp;64,&nbsp;244);&nbsp;&quot;&gt;&amp;quot;x-expires&amp;quot;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(4,&nbsp;49,&nbsp;195);&nbsp;&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;#000000&quot;&gt;,&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;TimeUnit.&lt;span&nbsp;style=&quot;color:&nbsp;#0431c3&quot;&gt;HOURS&lt;/span&gt;.toMillis(24)&lt;/span&gt;);&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;font:&nbsp;normal&nbsp;normal&nbsp;normal&nbsp;11px/normal&nbsp;Monaco;&nbsp;&quot;&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;Queue&nbsp;queue&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#941c64&quot;&gt;<br>
new&lt;/span&gt;&nbsp;Queue(queueName,&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#941c64&quot;&gt;true&lt;/span&gt;,&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;#941c64&quot;&gt;<br>
false&lt;/span&gt;,&nbsp;isAutoDelete,&nbsp;params);&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;Has&nbsp;anyone&nbsp;else&nbsp;run&nbsp;into&nbsp;this&nbsp;problem?&nbsp;I&nbsp;realize&nbsp;I&nbsp;can&nbsp;upgrade&nbsp;to&nbsp;3.0.1&nbsp;and&nbsp;implement&nbsp;HA&nbsp;queues&nbsp;at&nbsp;the&nbsp;broker&nbsp;level&nbsp;but&nbsp;at&nbsp;this&nbsp;point&nbsp;I&nbsp;want&nbsp;to&nbsp;try&nbsp;and&nbsp;get&nbsp;this&nbsp;to&nbsp;work&nbsp;without&nbsp;having&nbsp;to&nbsp;go&nbsp;through<br>
&nbsp;and&nbsp;upgrade&nbsp;all&nbsp;of&nbsp;our&nbsp;envs.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;Let&nbsp;me&nbsp;know&nbsp;if&nbsp;you&nbsp;need&nbsp;any&nbsp;more&nbsp;log&nbsp;info&nbsp;or&nbsp;code&nbsp;snippets&nbsp;or&nbsp;elaboration.&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;Thanks&lt;/p&gt;<br>
&lt;p&nbsp;style=&quot;margin:&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px&nbsp;0.0px;&nbsp;font:&nbsp;11.0px&nbsp;Monaco&quot;&gt;-Quinn&amp;nbsp;&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/span&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
