<tt>
&lt;html&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;style&nbsp;id=&quot;owaParaStyle&quot;&nbsp;type=&quot;text/css&quot;&gt;<br>
&lt;!--<br>
p<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin-top:0;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:0}<br>
p<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin-top:0;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:0}<br>
p<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin-top:0;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:0}<br>
--&gt;<br>
&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;div&nbsp;style=&quot;direction:ltr;&nbsp;font-family:Tahoma;&nbsp;color:#000000;&nbsp;font-size:10pt&quot;&gt;Dear&nbsp;Alan,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;download&nbsp;rabbitmq-c&nbsp;master&nbsp;package&nbsp;from&nbsp;and&nbsp;tried&nbsp;newly&nbsp;added&nbsp;&lt;span&nbsp;class=&quot;nf&quot;&gt;<br>
&lt;b&gt;amqp_simple_wait_frame_noblock&lt;/b&gt;&nbsp;API.&nbsp;I&nbsp;modified&nbsp;amqp_listen.c&nbsp;example&nbsp;and&nbsp;instead&nbsp;of&nbsp;amqp_simple_wait_frame&nbsp;I&nbsp;used<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;nf&quot;&gt;&lt;b&gt;amqp_simple_wait_frame_noblock&nbsp;&lt;/b&gt;with&nbsp;different&nbsp;timeout&nbsp;values.&nbsp;However&nbsp;this&nbsp;API&nbsp;is&nbsp;failing&nbsp;immediately&nbsp;with&nbsp;return&nbsp;value&nbsp;as&nbsp;-13.&nbsp;What&nbsp;this&nbsp;return&nbsp;value&nbsp;means?&nbsp;Is&nbsp;there&nbsp;any&nbsp;other&nbsp;way&nbsp;of&nbsp;using&nbsp;timeout&nbsp;so&nbsp;that&nbsp;if&nbsp;I&nbsp;don't&nbsp;receive&nbsp;a<br>
&nbsp;frame&nbsp;within&nbsp;say&nbsp;10ms&nbsp;I&nbsp;can&nbsp;reject&nbsp;that&nbsp;message.&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;problem&nbsp;I&nbsp;am&nbsp;facing&nbsp;with&nbsp;&lt;b&gt;amqp_basic_reject&lt;/b&gt;&nbsp;API.&nbsp;In&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;nf&quot;&gt;&lt;span&nbsp;class=&quot;nf&quot;&gt;amqp_listen.c&nbsp;example&nbsp;I&nbsp;called&nbsp;this&nbsp;API&nbsp;(with&nbsp;requeue=1)&nbsp;and&nbsp;I&nbsp;got&nbsp;following&nbsp;console&nbsp;output.&nbsp;After&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;able&nbsp;to&nbsp;receive&nbsp;any&nbsp;message&nbsp;sent&nbsp;by<br>
&nbsp;amqp_send_string&nbsp;example.&lt;br&gt;<br>
&lt;br&gt;<br>
00000000:&nbsp;48&nbsp;65&nbsp;6C&nbsp;6C&nbsp;6F&nbsp;20&nbsp;57&nbsp;6F&nbsp;:&nbsp;72&nbsp;6C&nbsp;64&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Hello&nbsp;World&lt;br&gt;<br>
0000000B:&lt;br&gt;<br>
Result&nbsp;0&lt;br&gt;<br>
Frame&nbsp;type&nbsp;1,&nbsp;channel&nbsp;1&lt;br&gt;<br>
Method&nbsp;AMQP_CHANNEL_CLOSE_METHOD&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;One&nbsp;more&nbsp;problem&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;report.&nbsp;I&nbsp;have&nbsp;created&nbsp;a&nbsp;client&nbsp;7&nbsp;different&nbsp;queues&nbsp;with&nbsp;7&nbsp;different&nbsp;channels&nbsp;and&nbsp;bound&nbsp;with&nbsp;7&nbsp;different&nbsp;binding&nbsp;keys&nbsp;on&nbsp;the&nbsp;same&nbsp;connection&nbsp;with&nbsp;direct&nbsp;exchange.&nbsp;The&nbsp;listening&nbsp;part&nbsp;of&nbsp;these&nbsp;7&nbsp;queues&nbsp;are&nbsp;with&nbsp;7&nbsp;different<br>
&nbsp;threads&nbsp;listening&nbsp;for&nbsp;server&nbsp;input.&nbsp;When&nbsp;I&nbsp;am&nbsp;sending&nbsp;message&nbsp;from&nbsp;server&nbsp;with&nbsp;corresponding&nbsp;routing&nbsp;keys&nbsp;the&nbsp;messages&nbsp;are&nbsp;delivered&nbsp;to&nbsp;different&nbsp;queue&nbsp;than&nbsp;the&nbsp;expected&nbsp;queue.&nbsp;(I&nbsp;believe&nbsp;it&nbsp;is&nbsp;called<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;nf&quot;&gt;Shunting&nbsp;messages&nbsp;from&nbsp;one&nbsp;queue&nbsp;to&nbsp;another).&nbsp;What&nbsp;could&nbsp;be&nbsp;the&nbsp;problem?&nbsp;Do&nbsp;I&nbsp;have&nbsp;to&nbsp;do&nbsp;something&nbsp;from&nbsp;rabbitmq&nbsp;server&nbsp;to&nbsp;targeted&nbsp;delivery?&nbsp;I&nbsp;tried&nbsp;by&nbsp;making&nbsp;queues&nbsp;exclusive&nbsp;but&nbsp;got&nbsp;the&nbsp;same&nbsp;result.&lt;br&gt;<br>
&lt;br&gt;<br>
Please&nbsp;help.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;and&nbsp;regards,&lt;br&gt;<br>
Shashank&lt;br&gt;<br>
&lt;/span&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Times&nbsp;New&nbsp;Roman;&nbsp;color:#000000;&nbsp;font-size:16px&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;style=&quot;direction:ltr;&nbsp;font-family:Tahoma;&nbsp;color:#000000;&nbsp;font-size:10pt&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Times&nbsp;New&nbsp;Roman;&nbsp;color:#000000;&nbsp;font-size:16px&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;style=&quot;direction:ltr;&nbsp;font-family:Tahoma;&nbsp;color:#000000;&nbsp;font-size:10pt&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Times&nbsp;New&nbsp;Roman;&nbsp;color:#000000;&nbsp;font-size:16px&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;----------&nbsp;Forwarded&nbsp;message&nbsp;----------&lt;br&gt;<br>
From:&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;&lt;/b&gt;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss-request@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss-request@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;Jun&nbsp;26,&nbsp;2013&nbsp;at&nbsp;4:30&nbsp;PM&lt;br&gt;<br>
Subject:&nbsp;rabbitmq-discuss&nbsp;Digest,&nbsp;Vol&nbsp;73,&nbsp;Issue&nbsp;27&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Send&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&nbsp;submissions&nbsp;to&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;subscribe&nbsp;or&nbsp;unsubscribe&nbsp;via&nbsp;the&nbsp;World&nbsp;Wide&nbsp;Web,&nbsp;visit&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;<br>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
or,&nbsp;via&nbsp;email,&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;subject&nbsp;or&nbsp;body&nbsp;'help'&nbsp;to&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss-request@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;<br>
rabbitmq-discuss-request@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reach&nbsp;the&nbsp;person&nbsp;managing&nbsp;the&nbsp;list&nbsp;at&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss-owner@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;<br>
rabbitmq-discuss-owner@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;replying,&nbsp;please&nbsp;edit&nbsp;your&nbsp;Subject&nbsp;line&nbsp;so&nbsp;it&nbsp;is&nbsp;more&nbsp;specific&lt;br&gt;<br>
than&nbsp;&amp;quot;Re:&nbsp;Contents&nbsp;of&nbsp;rabbitmq-discuss&nbsp;digest...&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Today's&nbsp;Topics:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;1.&nbsp;Determining&nbsp;Required&nbsp;Erlang&nbsp;Version&nbsp;for&nbsp;Upgrade&nbsp;(Richard&nbsp;Raseley)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;2.&nbsp;Re:&nbsp;RabbitMQ&nbsp;Consumer&nbsp;timeout&nbsp;(Alan&nbsp;Antonuk)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;3.&nbsp;Re:&nbsp;RabbitMQ's&nbsp;Mirroring&nbsp;results&nbsp;in&nbsp;weird&nbsp;behavior&nbsp;when&nbsp;slave&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;goes&nbsp;down&nbsp;(thomas)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;4.&nbsp;Re:&nbsp;Determining&nbsp;Required&nbsp;Erlang&nbsp;Version&nbsp;for&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Upgrade&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;(Michael&nbsp;Klishin)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;5.&nbsp;Re:&nbsp;rabbitmq&nbsp;Error:{cannot_discover_cluster,&nbsp;&amp;quot;the&nbsp;nodes&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;provided&nbsp;are&nbsp;either&nbsp;offline&nbsp;or&nbsp;not&nbsp;running&amp;quot;}&nbsp;(Emile&nbsp;Joubert)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;6.&nbsp;Re:&nbsp;Determining&nbsp;Required&nbsp;Erlang&nbsp;Version&nbsp;for&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Upgrade&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;(Emile&nbsp;Joubert)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;7.&nbsp;Re:&nbsp;RabbitMQ&nbsp;won't&nbsp;start&nbsp;after&nbsp;the&nbsp;disk&nbsp;went&nbsp;full&nbsp;(Emile&nbsp;Joubert)&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;8.&nbsp;Re:&nbsp;RabbitMQ's&nbsp;Mirroring&nbsp;results&nbsp;in&nbsp;weird&nbsp;behavior&nbsp;when&nbsp;slave&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;goes&nbsp;down&nbsp;(Tim&nbsp;Watson)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
----------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;1&lt;br&gt;<br>
Date:&nbsp;Tue,&nbsp;25&nbsp;Jun&nbsp;2013&nbsp;12:39:15&nbsp;-0700&lt;br&gt;<br>
From:&nbsp;Richard&nbsp;Raseley&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:richard@raseley.com&quot;&nbsp;target=&quot;_blank&quot;&gt;richard@raseley.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;[rabbitmq-discuss]&nbsp;Determining&nbsp;Required&nbsp;Erlang&nbsp;Version&nbsp;for&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Upgrade&lt;br&gt;<br>
To:&nbsp;RabbitMQ-Discuss&nbsp;Mailing&nbsp;List&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;CAO=&lt;a&nbsp;href=&quot;mailto:6ox_tTVUHNnd4VwPr2zO%2BiGnjb1Kr5fYT0OEadj-urYRiAA@mail.gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;6ox_tTVUHNnd4VwPr2zO&amp;#43;iGnjb1Kr5fYT0OEadj-urYRiAA@mail.gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&amp;quot;iso-8859-1&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;drafting&nbsp;a&nbsp;plan&nbsp;to&nbsp;upgrade&nbsp;several&nbsp;3.0.x&nbsp;instances&lt;br&gt;<br>
to&nbsp;3.1.2.&nbsp;I&nbsp;cannot&nbsp;seem&nbsp;to&nbsp;find&nbsp;in&nbsp;the&nbsp;release&nbsp;notes&nbsp;the&nbsp;specific&nbsp;version&lt;br&gt;<br>
of&nbsp;Erlang&nbsp;that&nbsp;is&nbsp;required&nbsp;for&nbsp;the&nbsp;new&nbsp;versions.&lt;br&gt;<br>
&lt;br&gt;<br>
Would&nbsp;someone&nbsp;please&nbsp;direct&nbsp;me&nbsp;to&nbsp;a&nbsp;version&nbsp;requirement&nbsp;matrix&nbsp;(assuming&lt;br&gt;<br>
one&nbsp;exists)?&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Richard&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130625/196f9e67/attachment.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130625/196f9e67/attachment.html&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;2&lt;br&gt;<br>
Date:&nbsp;Tue,&nbsp;25&nbsp;Jun&nbsp;2013&nbsp;17:36:48&nbsp;-0700&lt;br&gt;<br>
From:&nbsp;Alan&nbsp;Antonuk&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:alan.antonuk@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;alan.antonuk@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ&nbsp;Consumer&nbsp;timeout&lt;br&gt;<br>
To:&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;CAAt2poJAP5z0-gsdNFaNaH0qzR_FLcxwK_tQEA_tmb=&lt;a&nbsp;href=&quot;mailto:d2CoZiA@mail.gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;d2CoZiA@mail.gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&amp;quot;iso-8859-1&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Antony;&lt;br&gt;<br>
&lt;br&gt;<br>
rabbitmq-c&nbsp;has&nbsp;very&nbsp;recently&nbsp;added&nbsp;an&nbsp;API&nbsp;that&nbsp;allows&nbsp;for&nbsp;specifying&nbsp;a&lt;br&gt;<br>
timeout&nbsp;when&nbsp;waiting&nbsp;for&nbsp;frames&nbsp;from&nbsp;the&nbsp;broker&nbsp;(see&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp.h#L495&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp.h#L495&lt;/a&gt;&nbsp;).&lt;br&gt;<br>
&amp;nbsp;With&nbsp;this&nbsp;API&nbsp;is&nbsp;possible&nbsp;to&nbsp;implement&nbsp;something&nbsp;with&nbsp;a&nbsp;similar&nbsp;effect.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;will&nbsp;warn&nbsp;you&nbsp;that&nbsp;this&nbsp;is&nbsp;only&nbsp;in&nbsp;the&nbsp;development&nbsp;branch&nbsp;and&nbsp;thus&nbsp;hasn't&lt;br&gt;<br>
received&nbsp;the&nbsp;same&nbsp;amount&nbsp;of&nbsp;testing&nbsp;that&nbsp;tagged&nbsp;versions&nbsp;have,&nbsp;but&nbsp;I&nbsp;would&lt;br&gt;<br>
encourage&nbsp;you&nbsp;to&nbsp;try&nbsp;it&nbsp;out&nbsp;and&nbsp;report&nbsp;back&nbsp;any&nbsp;issues&nbsp;that&nbsp;come&nbsp;up.&lt;br&gt;<br>
&lt;br&gt;<br>
-Alan&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Tue,&nbsp;Jun&nbsp;25,&nbsp;2013&nbsp;at&nbsp;4:56&nbsp;AM,&nbsp;antony&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:antony.pulicken@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;antony.pulicken@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Hi,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;This&nbsp;is&nbsp;my&nbsp;scenario:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;have&nbsp;multiple&nbsp;instances&nbsp;of&nbsp;listeners&nbsp;waiting&nbsp;on&nbsp;different&nbsp;temp&nbsp;queues.&nbsp;In&lt;br&gt;<br>
&amp;gt;&nbsp;some&nbsp;of&nbsp;the&nbsp;cases,&nbsp;there&nbsp;won't&nbsp;be&nbsp;any&nbsp;messages&nbsp;published&nbsp;to&nbsp;these&nbsp;temp&lt;br&gt;<br>
&amp;gt;&nbsp;queues&nbsp;and&nbsp;I&nbsp;want&nbsp;these&nbsp;listeners&nbsp;to&nbsp;timeout&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;free&nbsp;up&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;connections.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;guess&nbsp;in&nbsp;Java,&nbsp;we&nbsp;can&nbsp;achieve&nbsp;this&nbsp;by&nbsp;using&nbsp;the&nbsp;overloaded&nbsp;method&nbsp;in&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;QueueingConsumer&nbsp;class&nbsp;that&nbsp;takes&nbsp;timeout&nbsp;as&nbsp;a&nbsp;parameter&nbsp;as&nbsp;shown&nbsp;below:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;/QueueingConsumer.Delivery&nbsp;delivery&nbsp;=&nbsp;null;&lt;br&gt;<br>
&amp;gt;&nbsp;long&nbsp;timeout&nbsp;=&nbsp;2&nbsp;*&nbsp;60&nbsp;*&nbsp;1000;&nbsp;//&nbsp;2&nbsp;minutes&nbsp;in&nbsp;milliseconds&lt;br&gt;<br>
&amp;gt;&nbsp;delivery&nbsp;=&nbsp;queuingConsumer.nextDelivery(*timeout*);&lt;br&gt;<br>
&amp;gt;&nbsp;if&nbsp;(delivery&nbsp;==&nbsp;null)&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;//&nbsp;shut&nbsp;down&nbsp;your&nbsp;consumer&nbsp;here&nbsp;-&nbsp;no&nbsp;events&nbsp;arrived&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;//&nbsp;before&nbsp;the&nbsp;timeout&nbsp;was&nbsp;reached&lt;br&gt;<br>
&amp;gt;&nbsp;}&lt;br&gt;<br>
&amp;gt;&nbsp;else&nbsp;{&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;//&nbsp;process&nbsp;the&nbsp;delivered&nbsp;message&nbsp;here&lt;br&gt;<br>
&amp;gt;&nbsp;}/&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;1)&nbsp;Does&nbsp;RabbitMQ&nbsp;C&nbsp;client&nbsp;also&nbsp;has&nbsp;a&nbsp;similar&nbsp;feature&nbsp;?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;2)&nbsp;Are&nbsp;there&nbsp;better&nbsp;approaches&nbsp;to&nbsp;handle&nbsp;this&nbsp;timeouts&nbsp;?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Please&nbsp;let&nbsp;me&nbsp;know.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks&nbsp;and&nbsp;Regards,&lt;br&gt;<br>
&amp;gt;&nbsp;Antony.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;--&lt;br&gt;<br>
&amp;gt;&nbsp;View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-Consumer-timeout-tp27590.html&quot;&nbsp;target=&quot;_blank&quot;&gt;<br>
http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-Consumer-timeout-tp27590.html&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Sent&nbsp;from&nbsp;the&nbsp;RabbitMQ&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;<br>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130625/3468600c/attachment-0001.htm&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130625/3468600c/attachment-0001.htm&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;3&lt;br&gt;<br>
Date:&nbsp;Tue,&nbsp;25&nbsp;Jun&nbsp;2013&nbsp;22:24:26&nbsp;-0700&nbsp;(PDT)&lt;br&gt;<br>
From:&nbsp;thomas&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:taihock@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;taihock@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ's&nbsp;Mirroring&nbsp;results&nbsp;in&nbsp;weird&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;behavior&nbsp;when&nbsp;slave&nbsp;goes&nbsp;down&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
Message-ID:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:1372224266044-27611.post@n5.nabble.com&quot;&nbsp;target=&quot;_blank&quot;&gt;1372224266044-27611.post@n5.nabble.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=us-ascii&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Tim,&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;the&nbsp;reply.&nbsp;I&nbsp;am&nbsp;using&nbsp;rabbitmq&nbsp;3.1.1&nbsp;with&nbsp;autoheal&nbsp;for&lt;br&gt;<br>
cluster_partition_handling.&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;test&nbsp;is&nbsp;just&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;behavior&nbsp;of&nbsp;rabbitmq&nbsp;master&nbsp;should&nbsp;its&nbsp;slave&lt;br&gt;<br>
goes&nbsp;down.&nbsp;For&nbsp;my&nbsp;case,&nbsp;initially&nbsp;I&nbsp;will&nbsp;have&nbsp;rabbit@A,&nbsp;rabbit@B&nbsp;and&lt;br&gt;<br>
rabbit@C&nbsp;running.&nbsp;Then&nbsp;I&nbsp;will&nbsp;send&nbsp;out&nbsp;messages&nbsp;from&nbsp;client&nbsp;to&nbsp;rabbit@A&lt;br&gt;<br>
which&nbsp;is&nbsp;the&nbsp;master&nbsp;throughout&nbsp;the&nbsp;test.&nbsp;Soon&nbsp;after&nbsp;the&nbsp;client&nbsp;started&nbsp;to&lt;br&gt;<br>
send&nbsp;out&nbsp;messages,&nbsp;I&nbsp;will&nbsp;bring&nbsp;down&nbsp;a&nbsp;slave&nbsp;which&nbsp;in&nbsp;my&nbsp;case&nbsp;is&nbsp;rabbit@B&nbsp;by&lt;br&gt;<br>
closing&nbsp;its&nbsp;network&nbsp;connection.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;changed&nbsp;the&nbsp;net_ticktime&nbsp;to&nbsp;60&nbsp;and&nbsp;carry&nbsp;out&nbsp;the&nbsp;same&nbsp;test&nbsp;using&nbsp;the&lt;br&gt;<br>
same&nbsp;code&nbsp;but&nbsp;this&nbsp;time&nbsp;round&nbsp;i&nbsp;increases&nbsp;the&nbsp;number&nbsp;of&nbsp;messages&nbsp;to&nbsp;500,000&lt;br&gt;<br>
so&nbsp;as&nbsp;to&nbsp;better&nbsp;observe&nbsp;the&nbsp;behavior&nbsp;of&nbsp;sending&nbsp;messages&nbsp;for&nbsp;more&nbsp;than&nbsp;a&lt;br&gt;<br>
minute.&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;observation&nbsp;is&nbsp;still&nbsp;similar&nbsp;to&nbsp;that&nbsp;of&nbsp;my&nbsp;previous&nbsp;test&nbsp;where&lt;br&gt;<br>
net_ticktime&nbsp;is&nbsp;2.&lt;br&gt;<br>
Approximately&nbsp;10&nbsp;seconds&nbsp;after&nbsp;I&nbsp;shut&nbsp;down&nbsp;the&nbsp;network&nbsp;connection&nbsp;of&lt;br&gt;<br>
rabbit@B,&nbsp;the&nbsp;sending&nbsp;of&nbsp;messages&nbsp;to&nbsp;rabbit@A&nbsp;comes&nbsp;to&nbsp;a&nbsp;pause&nbsp;for&nbsp;close&nbsp;to&lt;br&gt;<br>
a&nbsp;minute&nbsp;and&nbsp;then&nbsp;continues&nbsp;as&nbsp;per&nbsp;normal.&lt;br&gt;<br>
&lt;br&gt;<br>
Trying&nbsp;the&nbsp;same&nbsp;test&nbsp;but&nbsp;with&nbsp;no&nbsp;mirroring&nbsp;does&nbsp;not&nbsp;have&nbsp;any&nbsp;disruption.&lt;br&gt;<br>
&lt;br&gt;<br>
By&nbsp;the&nbsp;way,&nbsp;I&nbsp;have&nbsp;try&nbsp;out&nbsp;the&nbsp;same&nbsp;test&nbsp;for&nbsp;rabbitmq&nbsp;mirroring&nbsp;except&nbsp;that&lt;br&gt;<br>
there&nbsp;will&nbsp;be&nbsp;a&nbsp;delay&nbsp;of&nbsp;10ms&nbsp;between&nbsp;sending&nbsp;every&nbsp;message&nbsp;and&nbsp;there&nbsp;was&nbsp;no&lt;br&gt;<br>
disruption.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;From&nbsp;my&nbsp;observation&nbsp;it&nbsp;can&nbsp;be&nbsp;seen&nbsp;that&nbsp;RabbitMQ&nbsp;server&nbsp;will&nbsp;exhibit&nbsp;weird&lt;br&gt;<br>
behavior&nbsp;under&nbsp;stress&nbsp;condition&nbsp;when&nbsp;a&nbsp;slave&nbsp;goes&nbsp;down.&nbsp;I&nbsp;presume&nbsp;this&nbsp;weird&lt;br&gt;<br>
behavior&nbsp;will&nbsp;only&nbsp;surface&nbsp;under&nbsp;stress&nbsp;condition.&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;a&nbsp;rough&nbsp;estimate&nbsp;for&nbsp;the&nbsp;maximum&nbsp;load&nbsp;that&nbsp;a&nbsp;RabbitMQ&nbsp;server&nbsp;can&lt;br&gt;<br>
take&nbsp;per&nbsp;second&nbsp;for&nbsp;mirroring?&nbsp;Thanks.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-s-Mirroring-results-in-weird-behavior-when-slave-goes-down-tp27572p27611.html&quot;&nbsp;target=&quot;_blank&quot;&gt;<br>
http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-s-Mirroring-results-in-weird-behavior-when-slave-goes-down-tp27572p27611.html&lt;/a&gt;&lt;br&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;RabbitMQ&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;4&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;26&nbsp;Jun&nbsp;2013&nbsp;12:19:53&nbsp;&amp;#43;0400&lt;br&gt;<br>
From:&nbsp;Michael&nbsp;Klishin&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:michael.s.klishin@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;michael.s.klishin@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;Determining&nbsp;Required&nbsp;Erlang&nbsp;Version&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;for&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Upgrade&lt;br&gt;<br>
To:&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:CAE3HoVQG8o6uiMGCU2RmasAv3qVObSF9EdN-%2BYKqe6-Scjd%2B-w@mail.gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;CAE3HoVQG8o6uiMGCU2RmasAv3qVObSF9EdN-&amp;#43;YKqe6-Scjd&amp;#43;-w@mail.gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&amp;quot;utf-8&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
2013/6/25&nbsp;Richard&nbsp;Raseley&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:richard@raseley.com&quot;&nbsp;target=&quot;_blank&quot;&gt;richard@raseley.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;am&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;drafting&nbsp;a&nbsp;plan&nbsp;to&nbsp;upgrade&nbsp;several&nbsp;3.0.x&nbsp;instances&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;3.1.2.&nbsp;I&nbsp;cannot&nbsp;seem&nbsp;to&nbsp;find&nbsp;in&nbsp;the&nbsp;release&nbsp;notes&nbsp;the&nbsp;specific&nbsp;version&lt;br&gt;<br>
&amp;gt;&nbsp;of&nbsp;Erlang&nbsp;that&nbsp;is&nbsp;required&nbsp;for&nbsp;the&nbsp;new&nbsp;versions.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Richard,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;don't&nbsp;think&nbsp;the&nbsp;version&nbsp;requirement&nbsp;changed&nbsp;between&nbsp;3.0.x&nbsp;and&nbsp;3.1.x.&lt;br&gt;<br>
--&lt;br&gt;<br>
MK&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://github.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twitter.com/michaelklishin&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twitter.com/michaelklishin&lt;/a&gt;&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130626/45de3926/attachment-0001.htm&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130626/45de3926/attachment-0001.htm&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;5&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;26&nbsp;Jun&nbsp;2013&nbsp;10:22:40&nbsp;&amp;#43;0100&lt;br&gt;<br>
From:&nbsp;Emile&nbsp;Joubert&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;rabbitmq&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Error:{cannot_discover_cluster,&nbsp;&amp;quot;the&nbsp;nodes&nbsp;provided&nbsp;are&nbsp;either&nbsp;offline&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;or&nbsp;not&nbsp;running&amp;quot;}&lt;br&gt;<br>
To:&nbsp;Luis&nbsp;Rodriguez&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:lrodriguez1995@yahoo.com&quot;&nbsp;target=&quot;_blank&quot;&gt;lrodriguez1995@yahoo.com&lt;/a&gt;&amp;gt;,&nbsp;&amp;nbsp;Discussions&nbsp;about&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;RabbitMQ&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:51CAB2E0.9010805@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;51CAB2E0.9010805@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;25/06/13&nbsp;18:38,&nbsp;Luis&nbsp;Rodriguez&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;am&nbsp;running&nbsp;a&nbsp;windows&nbsp;host&nbsp;machine&nbsp;along&nbsp;with&nbsp;three&nbsp;vm's&nbsp;with&nbsp;centos&lt;br&gt;<br>
&amp;gt;&nbsp;5.9&nbsp;,&nbsp;rabbitmq-server-3.0.3,&nbsp;and&nbsp;erlang&nbsp;installed&nbsp;on&nbsp;all&nbsp;three&nbsp;nodes.&lt;br&gt;<br>
&lt;br&gt;<br>
Make&nbsp;sure&nbsp;all&nbsp;nodes&nbsp;are&nbsp;using&nbsp;the&nbsp;same&nbsp;version&nbsp;of&nbsp;Erlang.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;(I&nbsp;am&nbsp;able&nbsp;to&nbsp;ping&nbsp;between&nbsp;nodes&nbsp;fine)&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;number&nbsp;of&nbsp;TCP&nbsp;ports&nbsp;need&nbsp;to&nbsp;be&nbsp;open&nbsp;between&nbsp;cluster&nbsp;nodes,&nbsp;which&nbsp;ping&lt;br&gt;<br>
doesn't&nbsp;guarantee.&nbsp;See&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/clustering.html#firewall&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/clustering.html#firewall&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;the&nbsp;cookie&nbsp;hash&nbsp;however,&nbsp;doesn't&nbsp;change&nbsp;regardless&nbsp;of&nbsp;how&nbsp;many&nbsp;times&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;stop&nbsp;(rabbitmqctl&nbsp;stop)&nbsp;and&nbsp;start..&nbsp;I&nbsp;don't&nbsp;really&nbsp;know&nbsp;what&nbsp;I'm&lt;br&gt;<br>
&amp;gt;&nbsp;missing.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;change&nbsp;the&nbsp;.erlang.cookie&nbsp;and&nbsp;the&nbsp;cookie&nbsp;hash&nbsp;doesn't&nbsp;change&nbsp;then&lt;br&gt;<br>
you&nbsp;are&nbsp;probably&nbsp;copying&nbsp;to&nbsp;the&nbsp;wrong&nbsp;directory.&nbsp;You&nbsp;can&nbsp;discover&nbsp;a&lt;br&gt;<br>
running&nbsp;node's&nbsp;own&nbsp;idea&nbsp;of&nbsp;where&nbsp;its&nbsp;home&nbsp;directory&nbsp;is&nbsp;by&nbsp;executing&lt;br&gt;<br>
&lt;br&gt;<br>
rabbitmqctl&nbsp;eval&nbsp;'init:get_argument(home).'&lt;br&gt;<br>
&lt;br&gt;<br>
Also&nbsp;take&nbsp;note&nbsp;that&nbsp;the&nbsp;cookie&nbsp;and&nbsp;the&nbsp;cookie&nbsp;hash&nbsp;will&nbsp;not&nbsp;be&nbsp;the&nbsp;same.&lt;br&gt;<br>
The&nbsp;hash&nbsp;is&nbsp;displayed&nbsp;in&nbsp;diagnostic&nbsp;output&nbsp;instead&nbsp;of&nbsp;the&nbsp;cookie&nbsp;as&nbsp;a&lt;br&gt;<br>
security&nbsp;precaution.&nbsp;If&nbsp;you&nbsp;have&nbsp;all&nbsp;the&nbsp;cookies&nbsp;synchronised&nbsp;correctly&lt;br&gt;<br>
then&nbsp;the&nbsp;hashes&nbsp;will&nbsp;also&nbsp;be&nbsp;the&nbsp;same.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;when&nbsp;I&nbsp;do&nbsp;rabbitctl&nbsp;join_cluster&nbsp;I&nbsp;get:&nbsp;rabbitmq&lt;br&gt;<br>
&amp;gt;&nbsp;Error:{cannot_discover_cluster,&amp;quot;the&nbsp;nodes&nbsp;provided&nbsp;are&nbsp;either&nbsp;offline&lt;br&gt;<br>
&amp;gt;&nbsp;or&nbsp;not&nbsp;running&amp;quot;}&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;per&nbsp;the&nbsp;troubleshooting&nbsp;guide&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/troubleshooting.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/troubleshooting.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
if&nbsp;that&nbsp;message&nbsp;is&nbsp;accompanied&nbsp;by&nbsp;a&nbsp;broker&nbsp;logfile&nbsp;entry&nbsp;&amp;quot;Connection&lt;br&gt;<br>
attempt&nbsp;from&nbsp;disallowed&nbsp;node&amp;quot;&nbsp;then&nbsp;the&nbsp;erlang&nbsp;cookies&nbsp;are&nbsp;not&nbsp;set&nbsp;up&lt;br&gt;<br>
correctly.&nbsp;Otherwise&nbsp;the&nbsp;problem&nbsp;is&nbsp;network&nbsp;related.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;6&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;26&nbsp;Jun&nbsp;2013&nbsp;10:25:52&nbsp;&amp;#43;0100&lt;br&gt;<br>
From:&nbsp;Emile&nbsp;Joubert&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;Determining&nbsp;Required&nbsp;Erlang&nbsp;Version&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;for&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;Upgrade&lt;br&gt;<br>
To:&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:51CAB3A0.8070707@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;51CAB3A0.8070707@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Richard,&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;25/06/13&nbsp;20:39,&nbsp;Richard&nbsp;Raseley&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Would&nbsp;someone&nbsp;please&nbsp;direct&nbsp;me&nbsp;to&nbsp;a&nbsp;version&nbsp;requirement&nbsp;matrix&nbsp;(assuming&lt;br&gt;<br>
&amp;gt;&nbsp;one&nbsp;exists)?&lt;br&gt;<br>
&lt;br&gt;<br>
See&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/which-erlang.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/which-erlang.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;7&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;26&nbsp;Jun&nbsp;2013&nbsp;10:35:45&nbsp;&amp;#43;0100&lt;br&gt;<br>
From:&nbsp;Emile&nbsp;Joubert&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:emile@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;emile@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ&nbsp;won't&nbsp;start&nbsp;after&nbsp;the&nbsp;disk&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;went&nbsp;full&lt;br&gt;<br>
To:&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Cc:&nbsp;photon&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:faycal.noushi@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;faycal.noushi@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:51CAB5F1.20202@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;51CAB5F1.20202@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;25/06/13&nbsp;14:38,&nbsp;photon&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;I&nbsp;have&nbsp;an&nbsp;issue&nbsp;concerning&nbsp;RabbitMQ.&nbsp;Once&nbsp;my&nbsp;disk&nbsp;got&nbsp;full,&nbsp;RabbitMQ&nbsp;became&lt;br&gt;<br>
&amp;gt;&nbsp;unusable.&nbsp;This&nbsp;didn't&nbsp;change&nbsp;even&nbsp;after&nbsp;i&nbsp;made&nbsp;the&nbsp;disk&nbsp;usage&nbsp;drop&lt;br&gt;<br>
&amp;gt;&nbsp;dramatically.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;either&nbsp;need&nbsp;to&nbsp;free&nbsp;up&nbsp;more&nbsp;space&nbsp;or&nbsp;lower&nbsp;the&nbsp;disk_free_limit.&nbsp;See&lt;br&gt;<br>
the&nbsp;configuration&nbsp;guide:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/configure.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/configure.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Error&nbsp;description:&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;{error,corrupt_cluster_status_files,[]}&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;a&nbsp;separate&nbsp;problem&nbsp;and&nbsp;can&nbsp;be&nbsp;solved&nbsp;either&nbsp;by&nbsp;removing&nbsp;the&lt;br&gt;<br>
entire&nbsp;Mnesia&nbsp;directory&nbsp;or&nbsp;by&nbsp;removing&nbsp;the&nbsp;cluster_nodes.config&nbsp;file&nbsp;in&lt;br&gt;<br>
the&nbsp;Mnesia&nbsp;directory&nbsp;and&nbsp;reclustering&nbsp;if&nbsp;necessary.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;=INFO&nbsp;REPORT====&nbsp;25-Jun-2013::09:10:49&nbsp;===&lt;br&gt;<br>
&amp;gt;&nbsp;Disk&nbsp;free&nbsp;space&nbsp;insufficient.&nbsp;Free&nbsp;bytes:645095424&nbsp;Limit:1000000000&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;shows&nbsp;that&nbsp;there&nbsp;is&nbsp;insufficient&nbsp;free&nbsp;disk&nbsp;space.&nbsp;The&nbsp;broker&nbsp;will&lt;br&gt;<br>
not&nbsp;accept&nbsp;any&nbsp;messages&nbsp;until&nbsp;there&nbsp;is&nbsp;enough&nbsp;free&nbsp;disk&nbsp;space.&nbsp;See&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/memory.html#diskfreesup&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/memory.html#diskfreesup&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
-Emile&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;8&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;26&nbsp;Jun&nbsp;2013&nbsp;11:38:36&nbsp;&amp;#43;0100&lt;br&gt;<br>
From:&nbsp;Tim&nbsp;Watson&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tim@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;tim@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;RabbitMQ's&nbsp;Mirroring&nbsp;results&nbsp;in&nbsp;weird&lt;br&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;behavior&nbsp;when&nbsp;slave&nbsp;goes&nbsp;down&lt;br&gt;<br>
To:&nbsp;Discussions&nbsp;about&nbsp;RabbitMQ&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:2F050250-E7F1-4543-B3C3-239885F7C9CB@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;2F050250-E7F1-4543-B3C3-239885F7C9CB@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=us-ascii&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Thomas,&lt;br&gt;<br>
&lt;br&gt;<br>
Here&nbsp;are&nbsp;my&nbsp;thoughts&nbsp;(inline&nbsp;below).&nbsp;I'm&nbsp;not&nbsp;the&nbsp;greatest&nbsp;clustering/HA&nbsp;expert,&nbsp;but&nbsp;from&nbsp;what&nbsp;I&nbsp;can&nbsp;gather,&nbsp;I&nbsp;think&nbsp;what&nbsp;you're&nbsp;seeing&nbsp;might&nbsp;be&nbsp;a&nbsp;result&nbsp;of&nbsp;the&nbsp;combination&nbsp;of&nbsp;a&nbsp;network&nbsp;partition&nbsp;and&nbsp;the&nbsp;`autoheal'&nbsp;mode.&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;26&nbsp;Jun&nbsp;2013,&nbsp;at&nbsp;06:24,&nbsp;thomas&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Hi&nbsp;Tim,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks&nbsp;for&nbsp;the&nbsp;reply.&nbsp;I&nbsp;am&nbsp;using&nbsp;rabbitmq&nbsp;3.1.1&nbsp;with&nbsp;autoheal&nbsp;for&lt;br&gt;<br>
&amp;gt;&nbsp;cluster_partition_handling.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;My&nbsp;test&nbsp;is&nbsp;just&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;behavior&nbsp;of&nbsp;rabbitmq&nbsp;master&nbsp;should&nbsp;its&nbsp;slave&lt;br&gt;<br>
&amp;gt;&nbsp;goes&nbsp;down.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;clearly&nbsp;documented&nbsp;on&nbsp;the&nbsp;website&nbsp;-&nbsp;RabbitMQ&nbsp;clusters&nbsp;/do&nbsp;not/&nbsp;handle&nbsp;network&nbsp;partitions&nbsp;well.&nbsp;Things&nbsp;will&nbsp;probably&nbsp;go&nbsp;wrong.&nbsp;If&nbsp;the&nbsp;only&nbsp;issue&nbsp;you're&nbsp;running&nbsp;into&nbsp;is&nbsp;a&nbsp;busy&nbsp;producer&nbsp;getting&nbsp;blocked&nbsp;then&nbsp;that's&nbsp;great&nbsp;-&nbsp;the&nbsp;worst&nbsp;cases&nbsp;could&nbsp;have&nbsp;involved<br>
&nbsp;lost&nbsp;messages&nbsp;and&nbsp;all&nbsp;sorts.&lt;br&gt;<br>
&lt;br&gt;<br>
Now,&nbsp;the&nbsp;intention&nbsp;with&nbsp;HA&nbsp;is&nbsp;*not*&nbsp;to&nbsp;go&nbsp;belly&nbsp;up&nbsp;in&nbsp;the&nbsp;face&nbsp;of&nbsp;disappearing&nbsp;slaves&nbsp;-&nbsp;quite&nbsp;the&nbsp;opposite.&nbsp;Quite&nbsp;why&nbsp;the&nbsp;master&nbsp;is&nbsp;suddenly&nbsp;blocking&nbsp;the&nbsp;producer&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;-&nbsp;I'll&nbsp;discuss&nbsp;this&nbsp;with&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;team&nbsp;but&nbsp;it&nbsp;doesn't&nbsp;sound&nbsp;quite&nbsp;right&nbsp;to<br>
&nbsp;me.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Approximately&nbsp;10&nbsp;seconds&nbsp;after&nbsp;I&nbsp;shut&nbsp;down&nbsp;the&nbsp;network&nbsp;connection&nbsp;of&lt;br&gt;<br>
&amp;gt;&nbsp;rabbit@B,&nbsp;the&nbsp;sending&nbsp;of&nbsp;messages&nbsp;to&nbsp;rabbit@A&nbsp;comes&nbsp;to&nbsp;a&nbsp;pause&nbsp;for&nbsp;close&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;a&nbsp;minute&nbsp;and&nbsp;then&nbsp;continues&nbsp;as&nbsp;per&nbsp;normal.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Just&nbsp;to&nbsp;be&nbsp;clear,&nbsp;in&nbsp;a&nbsp;RabbitMQ&nbsp;cluster&nbsp;there&nbsp;is&nbsp;no&nbsp;concept&nbsp;of&nbsp;a&nbsp;master&nbsp;node&nbsp;-&nbsp;only&nbsp;mirror&nbsp;queues&nbsp;introduce&nbsp;the&nbsp;master/slave&nbsp;concept,&nbsp;and&nbsp;then&nbsp;only&nbsp;for&nbsp;queues&nbsp;that&nbsp;are&nbsp;mirrored.&nbsp;Each&nbsp;mirrored&nbsp;queue's&nbsp;master&nbsp;can&nbsp;end&nbsp;up&nbsp;on&nbsp;different&nbsp;nodes,&nbsp;depending&nbsp;on&nbsp;which<br>
&nbsp;you&nbsp;were&nbsp;connect&nbsp;to&nbsp;when&nbsp;it&nbsp;was&nbsp;declared.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Trying&nbsp;the&nbsp;same&nbsp;test&nbsp;but&nbsp;with&nbsp;no&nbsp;mirroring&nbsp;does&nbsp;not&nbsp;have&nbsp;any&nbsp;disruption.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
That&nbsp;is&nbsp;not&nbsp;surprising,&nbsp;since&nbsp;the&nbsp;queue&nbsp;you're&nbsp;connected&nbsp;to&nbsp;isn't&nbsp;trying&nbsp;to&nbsp;replicate&nbsp;to&nbsp;any&nbsp;other&nbsp;nodes.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;By&nbsp;the&nbsp;way,&nbsp;I&nbsp;have&nbsp;try&nbsp;out&nbsp;the&nbsp;same&nbsp;test&nbsp;for&nbsp;rabbitmq&nbsp;mirroring&nbsp;except&nbsp;that&lt;br&gt;<br>
&amp;gt;&nbsp;there&nbsp;will&nbsp;be&nbsp;a&nbsp;delay&nbsp;of&nbsp;10ms&nbsp;between&nbsp;sending&nbsp;every&nbsp;message&nbsp;and&nbsp;there&nbsp;was&nbsp;no&lt;br&gt;<br>
&amp;gt;&nbsp;disruption.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Can&nbsp;you&nbsp;share&nbsp;your&nbsp;test&nbsp;code?&nbsp;I'm&nbsp;surprised&nbsp;there&nbsp;is&nbsp;such&nbsp;a&nbsp;big&nbsp;difference,&nbsp;but&nbsp;still...&nbsp;If&nbsp;you've&nbsp;got&nbsp;a&nbsp;decent&nbsp;automated&nbsp;test&nbsp;that&nbsp;consistently&nbsp;replicates&nbsp;this&nbsp;failure&nbsp;mode&nbsp;and&nbsp;you're&nbsp;able&nbsp;to&nbsp;share&nbsp;it,&nbsp;we&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;use&nbsp;it&nbsp;to&nbsp;make&nbsp;improvements&nbsp;to&nbsp;partition<br>
&nbsp;handling&nbsp;in&nbsp;the&nbsp;future.&nbsp;If&nbsp;not&nbsp;code,&nbsp;a&nbsp;test&nbsp;script&nbsp;(and&nbsp;description&nbsp;of&nbsp;how&nbsp;you're&nbsp;disabling&nbsp;the&nbsp;network&nbsp;link)&nbsp;with&nbsp;precise&nbsp;steps&nbsp;would&nbsp;do.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;From&nbsp;my&nbsp;observation&nbsp;it&nbsp;can&nbsp;be&nbsp;seen&nbsp;that&nbsp;RabbitMQ&nbsp;server&nbsp;will&nbsp;exhibit&nbsp;weird&lt;br&gt;<br>
&amp;gt;&nbsp;behavior&nbsp;under&nbsp;stress&nbsp;condition&nbsp;when&nbsp;a&nbsp;slave&nbsp;goes&nbsp;down.&nbsp;I&nbsp;presume&nbsp;this&nbsp;weird&lt;br&gt;<br>
&amp;gt;&nbsp;behavior&nbsp;will&nbsp;only&nbsp;surface&nbsp;under&nbsp;stress&nbsp;condition.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;I've&nbsp;stated&nbsp;before,&nbsp;clustering&nbsp;is&nbsp;not&nbsp;designed&nbsp;to&nbsp;handle&nbsp;network&nbsp;partitions.&nbsp;In&nbsp;previous&nbsp;versions&nbsp;of&nbsp;rabbit,&nbsp;when&nbsp;a&nbsp;partition&nbsp;occurred&nbsp;it&nbsp;was&nbsp;up&nbsp;to&nbsp;a&nbsp;system&nbsp;administrator&nbsp;to&nbsp;handle&nbsp;it.&nbsp;This&nbsp;usually&nbsp;involved&nbsp;stopping&nbsp;some&nbsp;(or&nbsp;all)&nbsp;of&nbsp;the&nbsp;nodes&nbsp;and&nbsp;restarting<br>
&nbsp;them.&nbsp;The&nbsp;'autoheal'&nbsp;feature&nbsp;simply&nbsp;attempts&nbsp;to&nbsp;replicate&nbsp;what&nbsp;a&nbsp;sysadmin&nbsp;might&nbsp;do,&nbsp;and&nbsp;therefore&nbsp;(whilst&nbsp;cluster&nbsp;nodes&nbsp;are&nbsp;restarting)&nbsp;there&nbsp;can&nbsp;be&nbsp;delays.&nbsp;The&nbsp;intention&nbsp;is&nbsp;not&nbsp;to&nbsp;block&nbsp;the&nbsp;master&nbsp;(or&nbsp;producers),&nbsp;but&nbsp;depending&nbsp;on&nbsp;how&nbsp;the&nbsp;cluster&nbsp;partition<br>
&nbsp;is&nbsp;handled,&nbsp;that&nbsp;might&nbsp;be&nbsp;one&nbsp;of&nbsp;the&nbsp;potential&nbsp;side&nbsp;effects.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;will&nbsp;certainly&nbsp;take&nbsp;a&nbsp;look&nbsp;to&nbsp;see&nbsp;if&nbsp;this&nbsp;is&nbsp;avoidable&nbsp;-&nbsp;I&nbsp;can't&nbsp;comment&nbsp;on&nbsp;that&nbsp;right&nbsp;now&nbsp;-&nbsp;and&nbsp;being&nbsp;able&nbsp;to&nbsp;repeat&nbsp;the&nbsp;tests&nbsp;could&nbsp;help&nbsp;with&nbsp;that&nbsp;too.&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;Is&nbsp;there&nbsp;a&nbsp;rough&nbsp;estimate&nbsp;for&nbsp;the&nbsp;maximum&nbsp;load&nbsp;that&nbsp;a&nbsp;RabbitMQ&nbsp;server&nbsp;can&lt;br&gt;<br>
&amp;gt;&nbsp;take&nbsp;per&nbsp;second&nbsp;for&nbsp;mirroring?&nbsp;Thanks.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
I'm&nbsp;not&nbsp;sure&nbsp;whether&nbsp;mirroring&nbsp;is&nbsp;really&nbsp;the&nbsp;problem&nbsp;here.&nbsp;Mirrored&nbsp;queues&nbsp;can&nbsp;handle&nbsp;plenty&nbsp;of&nbsp;load,&nbsp;although&nbsp;there&nbsp;/is/&nbsp;some&nbsp;performance&nbsp;slow&nbsp;down&nbsp;due&nbsp;to&nbsp;replication&nbsp;(and&nbsp;esp.&nbsp;so&nbsp;if&nbsp;you're&nbsp;using&nbsp;publisher&nbsp;confirms)&nbsp;but&nbsp;there&nbsp;is&nbsp;a&nbsp;not&nbsp;a&nbsp;specific&nbsp;limit&nbsp;-&nbsp;this<br>
&nbsp;is&nbsp;hardware/resource&nbsp;and&nbsp;use-case&nbsp;dependent.&nbsp;I&nbsp;suspect&nbsp;the&nbsp;problem&nbsp;/you/&nbsp;have&nbsp;could&nbsp;be&nbsp;a&nbsp;combination&nbsp;of&nbsp;network&nbsp;partition&nbsp;and&nbsp;cluster&nbsp;partition&nbsp;resolution&nbsp;(i.e.,&nbsp;autoheal)&nbsp;mode.&lt;br&gt;<br>
&lt;br&gt;<br>
Based&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/partitions.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/partitions.html&lt;/a&gt;,&nbsp;what&nbsp;I'd&nbsp;suggest&nbsp;is&nbsp;that&nbsp;you&nbsp;change&nbsp;'autoheal'&nbsp;to&nbsp;'ignore'&nbsp;and&nbsp;try&nbsp;your&nbsp;test&nbsp;again.&nbsp;That&nbsp;will&nbsp;either&nbsp;confirm&nbsp;or&nbsp;eliminate&nbsp;my&nbsp;suspicion&nbsp;quickly<br>
&nbsp;enough.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Tim&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
End&nbsp;of&nbsp;rabbitmq-discuss&nbsp;Digest,&nbsp;Vol&nbsp;73,&nbsp;Issue&nbsp;27&lt;br&gt;<br>
************************************************&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;hr&gt;<br>
&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;color=&quot;Navy&quot;&nbsp;size=&quot;2&quot;&gt;&lt;br&gt;<br>
DISCLAIMER:&lt;br&gt;<br>
This&nbsp;email&nbsp;(including&nbsp;any&nbsp;attachments)&nbsp;is&nbsp;intended&nbsp;for&nbsp;the&nbsp;sole&nbsp;use&nbsp;of&nbsp;the&nbsp;intended&nbsp;recipient/s&nbsp;and&nbsp;may&nbsp;contain&nbsp;material&nbsp;that&nbsp;is&nbsp;CONFIDENTIAL&nbsp;AND&nbsp;PRIVATE&nbsp;COMPANY&nbsp;INFORMATION.&nbsp;Any&nbsp;review&nbsp;or&nbsp;reliance&nbsp;by&nbsp;others&nbsp;or&nbsp;copying&nbsp;or&nbsp;distribution&nbsp;or&nbsp;forwarding&nbsp;of&nbsp;any&nbsp;or<br>
&nbsp;all&nbsp;of&nbsp;the&nbsp;contents&nbsp;in&nbsp;this&nbsp;message&nbsp;is&nbsp;STRICTLY&nbsp;PROHIBITED.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;please&nbsp;contact&nbsp;the&nbsp;sender&nbsp;by&nbsp;email&nbsp;and&nbsp;delete&nbsp;all&nbsp;copies;&nbsp;your&nbsp;cooperation&nbsp;in&nbsp;this&nbsp;regard&nbsp;is&nbsp;appreciated.&lt;br&gt;<br>
&lt;/font&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
