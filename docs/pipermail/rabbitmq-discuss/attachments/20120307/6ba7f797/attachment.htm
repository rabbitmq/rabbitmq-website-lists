<tt>
Makes&nbsp;perfect&nbsp;sens.&lt;br&gt;&lt;br&gt;Thx&lt;br&gt;&lt;br&gt;On&nbsp;Wednesday,&nbsp;March&nbsp;7,&nbsp;2012&nbsp;3:03:48&nbsp;PM&nbsp;UTC+1,&nbsp;Marek&nbsp;Majkowski&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;On&nbsp;Wed,&nbsp;Mar&nbsp;7,&nbsp;2012&nbsp;at&nbsp;13:52,&nbsp;Greg&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:gregory.sainson@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;gregory.sainson@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Hi,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;can't&nbsp;find&nbsp;any&nbsp;info&nbsp;on&nbsp;the&nbsp;web&nbsp;about&nbsp;it.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;currently&nbsp;have&nbsp;different&nbsp;programs&nbsp;that&nbsp;consumes&nbsp;the&nbsp;same&nbsp;queue.&lt;br&gt;&amp;gt;&nbsp;One&nbsp;program&nbsp;is&nbsp;registered&nbsp;to&nbsp;the&nbsp;queue&nbsp;with&nbsp;a&nbsp;basic.Consume.&lt;br&gt;&amp;gt;&nbsp;The&nbsp;other&nbsp;one&nbsp;is&nbsp;receiving&nbsp;messages&nbsp;with&nbsp;basic.Get.&nbsp;Unfortunately,&nbsp;It&lt;br&gt;&amp;gt;&nbsp;doesn't&nbsp;get&nbsp;any&nbsp;messages,&nbsp;basic.Get&nbsp;always&nbsp;returns&nbsp;null,&nbsp;like&nbsp;the&nbsp;queue&nbsp;is&lt;br&gt;&amp;gt;&nbsp;empty.&lt;br&gt;&amp;gt;&nbsp;If&nbsp;I&nbsp;change&nbsp;it&nbsp;with&nbsp;a&nbsp;basic.Consume,&nbsp;it&nbsp;works&nbsp;fine.&nbsp;I'm&nbsp;using&nbsp;the&nbsp;Java&lt;br&gt;&amp;gt;&nbsp;client&nbsp;of&nbsp;RabbitMQ.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Anyone&nbsp;has&nbsp;any&nbsp;idea&nbsp;with&nbsp;this&nbsp;happens?&lt;p&gt;If&nbsp;you're&nbsp;using&nbsp;Basic.Consume&nbsp;without&nbsp;setting&nbsp;Basic.QOS,&nbsp;Rabbit&lt;br&gt;sends&nbsp;a&nbsp;bulk&nbsp;of&nbsp;messages&nbsp;to&nbsp;the&nbsp;consumer.&nbsp;(in&nbsp;hundreds&nbsp;of&nbsp;messages).&lt;/p&gt;&lt;p&gt;Assuming&nbsp;the&nbsp;consumer&nbsp;uses&nbsp;Acks,&nbsp;the&nbsp;messages&nbsp;are&nbsp;then&nbsp;slowly&lt;br&gt;marked&nbsp;as&nbsp;Acknowledged&nbsp;and&nbsp;deleted.&lt;/p&gt;&lt;p&gt;But&nbsp;in&nbsp;the&nbsp;meantime&nbsp;all&nbsp;the&nbsp;messages&nbsp;were&nbsp;already&nbsp;sent&nbsp;to&nbsp;the&lt;br&gt;BasicConsume&nbsp;client&nbsp;-&nbsp;thus&nbsp;Basic.Get&nbsp;will&nbsp;find&nbsp;that&nbsp;there&lt;br&gt;aren't&nbsp;any&nbsp;messages&nbsp;ready!&lt;/p&gt;&lt;p&gt;The&nbsp;solution&nbsp;is&nbsp;to&nbsp;configure&nbsp;prefetch&nbsp;count&nbsp;using&nbsp;Basic.Qos&lt;br&gt;and&nbsp;also&nbsp;you&nbsp;must&nbsp;use&nbsp;Acknowledgments.&nbsp;(Basic.Qos&nbsp;without&lt;br&gt;acks&nbsp;makes&nbsp;no&nbsp;sense).&lt;/p&gt;&lt;p&gt;When&nbsp;you&nbsp;change&nbsp;second&nbsp;consumer&nbsp;to&nbsp;use&nbsp;BasicConsume,&lt;br&gt;it&nbsp;will&nbsp;hang&nbsp;and&nbsp;wait&nbsp;for&nbsp;mesages.&nbsp;Rabbit&nbsp;than&nbsp;sees:&lt;br&gt;okay,&nbsp;there&nbsp;are&nbsp;two&nbsp;consumes&nbsp;waiting&nbsp;on&nbsp;that&nbsp;queue.&lt;br&gt;When&nbsp;a&nbsp;new&nbsp;message&nbsp;arrives&nbsp;Rabbit&nbsp;will&nbsp;make&nbsp;a&nbsp;decision&lt;br&gt;where&nbsp;to&nbsp;send&nbsp;the&nbsp;message.&nbsp;It&nbsp;will&nbsp;try&nbsp;to&nbsp;do&nbsp;something&lt;br&gt;like&nbsp;round-robin.&nbsp;Thus&nbsp;-&nbsp;your&nbsp;second&nbsp;consumer&nbsp;will&lt;br&gt;receive&nbsp;some&nbsp;messages&nbsp;(every&nbsp;second&nbsp;one&nbsp;in&nbsp;a&nbsp;perfect&lt;br&gt;world).&lt;/p&gt;&lt;p&gt;Hope&nbsp;that&nbsp;helps,&lt;br&gt;&amp;nbsp;Marek&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;wbr&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;wbr&gt;cgi-bin/mailman/listinfo/&lt;wbr&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</tt>
