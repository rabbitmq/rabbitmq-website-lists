<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Currently&nbsp;working&nbsp;with&nbsp;an&nbsp;architecture&nbsp;as&nbsp;follows:&lt;br&gt;&lt;br&gt;1)&nbsp;A&nbsp;topic&nbsp;exchange&nbsp;is&nbsp;bound&nbsp;to&nbsp;3&nbsp;consistent&nbsp;hash&nbsp;exchanges&nbsp;with&nbsp;routing&nbsp;keys&nbsp;that&nbsp;match&nbsp;3&nbsp;distinct&nbsp;types&nbsp;of&nbsp;messages&nbsp;(e.g.&nbsp;type-a,&nbsp;type-b,&nbsp;type-c).&nbsp;&lt;br&gt;<br>
&lt;br&gt;2)&nbsp;Each&nbsp;of&nbsp;these&nbsp;type-specific&nbsp;consistent&nbsp;hash&nbsp;exchanges&nbsp;is,&nbsp;in&nbsp;turn&nbsp;bound&nbsp;to&nbsp;16&nbsp;type-specific&nbsp;queues&nbsp;(e.g.&nbsp;type-a-01,&nbsp;...&nbsp;,&nbsp;type-a-16)&nbsp;with&nbsp;a&nbsp;weight&nbsp;of&nbsp;100.&lt;br&gt;&lt;br&gt;3)&nbsp;Three&nbsp;consumers&nbsp;are&nbsp;configured&nbsp;to&nbsp;consume&nbsp;messages&nbsp;specific&nbsp;to&nbsp;that&nbsp;type&nbsp;-&nbsp;each&nbsp;consumer&nbsp;connects&nbsp;to&nbsp;all&nbsp;of&nbsp;the&nbsp;16&nbsp;queues&nbsp;for&nbsp;it&#39;s&nbsp;type.&lt;br&gt;<br>
&lt;br&gt;4)&nbsp;Producers&nbsp;connect&nbsp;to&nbsp;the&nbsp;broker&nbsp;and&nbsp;send&nbsp;messages&nbsp;to&nbsp;the&nbsp;topic&nbsp;exchange&nbsp;with&nbsp;a&nbsp;routing&nbsp;key&nbsp;that&nbsp;matches&nbsp;the&nbsp;type&nbsp;of&nbsp;message&nbsp;they&nbsp;are&nbsp;sending.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;5)&nbsp;Only&nbsp;one&nbsp;type&nbsp;is&nbsp;active&nbsp;at&nbsp;this&nbsp;time.&lt;br&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;The&nbsp;reason&nbsp;we&nbsp;went&nbsp;down&nbsp;this&nbsp;path&nbsp;was&nbsp;to&nbsp;mitigate&nbsp;the&nbsp;1&nbsp;queue&nbsp;:&nbsp;1&nbsp;cpu&nbsp;core&nbsp;limitation&nbsp;within&nbsp;RabbitMQ&nbsp;(or&nbsp;Erlange&nbsp;in&nbsp;general?).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;*are*&nbsp;seeing&nbsp;(relatively)&nbsp;even&nbsp;message&nbsp;distribution&nbsp;across&nbsp;the&nbsp;queues&nbsp;for&nbsp;the&nbsp;on&nbsp;message&nbsp;type&nbsp;that&nbsp;is&nbsp;current&nbsp;active&nbsp;(yay),&nbsp;however&nbsp;I&nbsp;am&nbsp;only&nbsp;seeing&nbsp;utilization&nbsp;on&nbsp;between&nbsp;4-6&nbsp;(depending&nbsp;on&nbsp;the&nbsp;time)&nbsp;out&nbsp;of&nbsp;the&nbsp;16&nbsp;total&nbsp;cores&nbsp;(others&nbsp;are&nbsp;100%&nbsp;idle).&nbsp;This&nbsp;wasn&#39;t&nbsp;the&nbsp;behavior&nbsp;in&nbsp;my&nbsp;initial&nbsp;testing&nbsp;(I&nbsp;saw&nbsp;relatively&nbsp;equal&nbsp;load&nbsp;across&nbsp;all&nbsp;cores). &lt;br&gt;<br>
&lt;br&gt;Can&nbsp;someone&nbsp;confirm&nbsp;that&nbsp;in&nbsp;the&nbsp;architecture&nbsp;outlined&nbsp;above&nbsp;I&nbsp;would&nbsp;expect&nbsp;to&nbsp;see&nbsp;(relatively)&nbsp;equal&nbsp;distribution&nbsp;across&nbsp;all&nbsp;available&nbsp;cores?&nbsp;Furthermore,&nbsp;if&nbsp;my&nbsp;expectation&nbsp;is&nbsp;correct,&nbsp;are&nbsp;there&nbsp;Erlang&nbsp;/&nbsp;RabbitMQ&nbsp;specific&nbsp;configurations&nbsp;that&nbsp;would&nbsp;impact&nbsp;things&nbsp;like&nbsp;core&nbsp;distribution&nbsp;/&nbsp;affinity?&nbsp;I&nbsp;am&nbsp;also&nbsp;currently&nbsp;pursuing&nbsp;the&nbsp;idea&nbsp;that&nbsp;it&nbsp;might&nbsp;be&nbsp;some&nbsp;hypervisor-specific&nbsp;setting&nbsp;that&nbsp;is&nbsp;causing&nbsp;this&nbsp;(no&nbsp;good&nbsp;info&nbsp;on&nbsp;that&nbsp;as&nbsp;of&nbsp;yet).&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;in&nbsp;advance&nbsp;for&nbsp;any&nbsp;assistance.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Richard&nbsp;Raseley&lt;/div&gt;&lt;/div&gt;<br>

</tt>
