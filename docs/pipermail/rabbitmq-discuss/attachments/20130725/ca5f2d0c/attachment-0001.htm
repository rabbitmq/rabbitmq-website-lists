<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;So,&nbsp;actually&nbsp;I&nbsp;have&nbsp;just&nbsp;to&nbsp;tune sample_retention_policies&nbsp;to&nbsp;keep&nbsp;and&nbsp;aggregate&nbsp;statistics&nbsp;as&nbsp;long&nbsp;as&nbsp;I&nbsp;need!&lt;div&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;reset&nbsp;those&nbsp;statistics&nbsp;(during&nbsp;development&nbsp;I&nbsp;think&nbsp;I&nbsp;will&nbsp;make&nbsp;several&nbsp;tests&nbsp;in&nbsp;a&nbsp;day,&nbsp;but&nbsp;I&nbsp;think&nbsp;I&amp;#39;ll&nbsp;keep&nbsp;stats&nbsp;for&nbsp;a&nbsp;day&nbsp;so&nbsp;I&nbsp;need&nbsp;to&nbsp;reset&nbsp;those&nbsp;couters..)?&lt;/div&gt;<br>
<br>
&lt;div&gt;Moreover,&nbsp;I&nbsp;saw&nbsp;that&nbsp;detailed&nbsp;stats&nbsp;are&nbsp;available&nbsp;only&nbsp;for&nbsp;10&nbsp;seconds..do&nbsp;you&nbsp;think&nbsp;it&nbsp;could&nbsp;be&nbsp;feasible&nbsp;to&nbsp;keep&nbsp;detailed&nbsp;data&nbsp;for&nbsp;an&nbsp;entire&nbsp;day&nbsp;or&nbsp;does&nbsp;it&nbsp;occupy&nbsp;too&nbsp;much&nbsp;space&nbsp;on&nbsp;disk?&lt;/div&gt;&lt;div&gt;For&nbsp;example,&nbsp;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;do&nbsp;something&nbsp;like:&lt;/div&gt;<br>
<br>
&lt;br&gt;{rabbitmq_management,&nbsp;[{sample_retention_policies,&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[{global,&nbsp; &nbsp;[{60,&nbsp;5},&nbsp;{3600,&nbsp;60},&nbsp;{86400,&nbsp;1200}]},&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {basic,&nbsp; &nbsp; [{60,&nbsp;5},{3600,&nbsp;60},&nbsp;{86400,&nbsp;1200}]},&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {detailed,&nbsp;[{10,&nbsp;5},{3600,&nbsp;60},&nbsp;{86400,&nbsp;1200}]}&lt;br&gt;<br>
<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;]},&lt;br&gt;&lt;br&gt;What&nbsp;is&nbsp;not&nbsp;clear&nbsp;to&nbsp;me&nbsp;is&nbsp;which&nbsp;statistics&nbsp;provides&nbsp;each&nbsp;category..for&nbsp;example,&nbsp;detailed&nbsp;what&nbsp;information&nbsp;does&nbsp;affects?&lt;div&gt;If&nbsp;i&nbsp;ask&nbsp;for&nbsp;/api/queues,&nbsp;will&nbsp;I&nbsp;receive&nbsp;more&nbsp;or&nbsp;less&nbsp;data&nbsp;if&nbsp;I&nbsp;had&nbsp;also&nbsp;detailed&nbsp;infos?&lt;/div&gt;<br>
<br>
&lt;div&gt;Resolution&nbsp;defined&nbsp;in&nbsp;sample_retention_policies&nbsp;have&nbsp;different&nbsp;granularities&nbsp;in&nbsp;order&nbsp;to&nbsp;perform&nbsp;cumulative&nbsp;stats&nbsp;faster&nbsp;and&nbsp;save&nbsp;disk,&nbsp;right?&lt;/div&gt;&lt;div&gt;Because&nbsp;I&nbsp;could&nbsp;configure&nbsp;{basic,&nbsp;[{{86400,&nbsp;5}]}&nbsp;but&nbsp;then&nbsp;I&nbsp;keep&nbsp;all&nbsp;5-secs&nbsp;samples&nbsp;for&nbsp;all&nbsp;the&nbsp;day&nbsp;and&nbsp;also&nbsp;compute&nbsp;aggregate&nbsp;stats&nbsp;will&nbsp;require&nbsp;to&nbsp;pass&nbsp;all&nbsp;the&nbsp;samples..(correct&nbsp;me&nbsp;if&nbsp;I&amp;#39;m&nbsp;wrong).&lt;/div&gt;<br>
<br>
&lt;div&gt;Will&nbsp;HTTP&nbsp;api&nbsp;returns&nbsp;cumulative&nbsp;stats&nbsp;only?&nbsp;sample_age&nbsp;and&nbsp;sample_incr&nbsp;parameters&nbsp;are&nbsp;useful&nbsp;only&nbsp;I&nbsp;want&nbsp;all&nbsp;samples,&nbsp;right?&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;support,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
<br>
Flavio&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;25,&nbsp;2013&nbsp;at&nbsp;1:28&nbsp;PM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;25/07/2013&nbsp;10:45AM,&nbsp;Flavio&nbsp;Pompermaier&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
Yes,&nbsp;probably&nbsp;what&nbsp;I&nbsp;need&nbsp;is&nbsp;to&nbsp;correctly&nbsp;set&nbsp;those&nbsp;two&nbsp;parameters:&lt;br&gt;<br>
 &nbsp;-&nbsp;sample_retention_policies&lt;br&gt;<br>
 &nbsp;-&nbsp;collect_statistics_interval&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
It&amp;#39;s&nbsp;not&nbsp;obvious&nbsp;to&nbsp;me&nbsp;that&nbsp;you&nbsp;want&nbsp;to&nbsp;change&nbsp;collect_statistics_interval.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
Are&nbsp;they&nbsp;strictly&nbsp;related&nbsp;or&nbsp;they&nbsp;serve&nbsp;different&nbsp;purposes?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Well,&nbsp;they&nbsp;both&nbsp;have&nbsp;to&nbsp;do&nbsp;with&nbsp;statistics.&lt;br&gt;<br>
&lt;br&gt;<br>
collect_statistics_interval&nbsp;controls&nbsp;how&nbsp;frequently&nbsp;the&nbsp;various&nbsp;components&nbsp;in&nbsp;RabbitMQ&nbsp;emit&nbsp;stats&nbsp;events.&nbsp;It&nbsp;therefore&nbsp;controls&nbsp;the&nbsp;maximum&nbsp;possible&nbsp;resolution&nbsp;of&nbsp;stats&nbsp;you&nbsp;can&nbsp;get.&nbsp;The&nbsp;expectation&nbsp;is&nbsp;usually&nbsp;that&nbsp;you&nbsp;would&nbsp;leave&nbsp;it&nbsp;alone,&nbsp;but&nbsp;if&nbsp;you&nbsp;had&nbsp;a&nbsp;huge&nbsp;number&nbsp;of&nbsp;not-quite-idle&nbsp;queues&nbsp;/&nbsp;channels&nbsp;/&nbsp;connections&nbsp;you&nbsp;might&nbsp;want&nbsp;to&nbsp;increase&nbsp;it&nbsp;so&nbsp;that&nbsp;your&nbsp;server&nbsp;does&nbsp;not&nbsp;spend&nbsp;all&nbsp;its&nbsp;time&nbsp;emitting&nbsp;stats&nbsp;events.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
sample_retention_policies&nbsp;controls&nbsp;how&nbsp;long&nbsp;the&nbsp;management&nbsp;plugin&nbsp;holds&nbsp;onto&nbsp;statistics,&nbsp;and&nbsp;with&nbsp;what&nbsp;resolution.&nbsp;You&nbsp;might&nbsp;want&nbsp;to&nbsp;change&nbsp;this&nbsp;if&nbsp;you&nbsp;want&nbsp;it&nbsp;to&nbsp;hold&nbsp;statistics&nbsp;for&nbsp;longer.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
How&nbsp;do&nbsp;I&nbsp;ask&nbsp;for&nbsp;global/basic/detailed&nbsp;cumulative&nbsp;stats&nbsp;(like&nbsp;those&lt;br&gt;<br>
collected&nbsp;by&nbsp;sample_retention_policies)?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Those&nbsp;names&nbsp;refer&nbsp;to&nbsp;different&nbsp;classes&nbsp;of&nbsp;stats&nbsp;you&nbsp;can&nbsp;get&nbsp;through&nbsp;the&nbsp;web&nbsp;UI&nbsp;/&nbsp;HTTP&nbsp;API.&nbsp;See&nbsp;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/management.html#sample-retention&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/&lt;u&gt;&lt;/u&gt;management.html#sample-&lt;u&gt;&lt;/u&gt;retention&lt;/a&gt;&nbsp;for&nbsp;the&nbsp;mapping.&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;think&nbsp;that&nbsp;I&nbsp;need&nbsp;those&nbsp;metrics..&lt;br&gt;<br>
With&nbsp;a&nbsp;small&nbsp;collect_statistics_interval&nbsp;(1&nbsp;s)&nbsp;I&nbsp;have&nbsp;more&nbsp;precise&nbsp;data&lt;br&gt;<br>
but&nbsp;more&nbsp;overhead&nbsp;on&nbsp;the&nbsp;broker,&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Yes.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
but&nbsp;changing&nbsp;this&nbsp;parameters&nbsp;require&nbsp;also&nbsp;to&nbsp;change&lt;br&gt;<br>
sample_retention_policies&nbsp;right?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
No.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
Or&nbsp;it&nbsp;just&nbsp;run&nbsp;every&nbsp;5&nbsp;s&nbsp;and&nbsp;thus&nbsp;collects&nbsp;5&nbsp;samples&nbsp;(for&nbsp;default&nbsp;global&lt;br&gt;<br>
conf&nbsp;for&nbsp;example)..?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Not&nbsp;sure&nbsp;what&nbsp;you&nbsp;mean.&nbsp;If&nbsp;collect_statistics_interval&nbsp;is&nbsp;shorter&nbsp;than&nbsp;the&nbsp;shortest&nbsp;resolution&nbsp;in&nbsp;sample_retention_policies&nbsp;you&amp;#39;ll&nbsp;be&nbsp;doing&nbsp;more&nbsp;work&nbsp;for&nbsp;no&nbsp;gain.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
Best,&lt;br&gt;<br>
Flavio&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Thu,&nbsp;Jul&nbsp;25,&nbsp;2013&nbsp;at&nbsp;11:28&nbsp;AM,&nbsp;Simon&nbsp;MacMullen&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&amp;lt;mailto:&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;On&nbsp;24/07/2013&nbsp;6:17PM,&nbsp;Flavio&nbsp;Pompermaier&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;have&nbsp;you&nbsp;ever&nbsp;tried&nbsp;to&nbsp;set&nbsp;statistics&nbsp;interval&nbsp;to&nbsp;something&nbsp;like&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;a&nbsp;week?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;I&nbsp;assume&nbsp;you&nbsp;mean&nbsp;sample_retention_policies&nbsp;(i.e.&nbsp;how&nbsp;long&nbsp;we&nbsp;hold&lt;br&gt;<br>
 &nbsp; &nbsp;stats&nbsp;for)&nbsp;rather&nbsp;than&nbsp;collect_statistics_interval&nbsp;(i.e.&nbsp;how&lt;br&gt;<br>
 &nbsp; &nbsp;frequently&nbsp;the&nbsp;broker&nbsp;should&nbsp;emit&nbsp;stats&nbsp;for&nbsp;the&nbsp;management&nbsp;plugin&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp;collect).&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;No&nbsp;I&nbsp;haven&amp;#39;t,&nbsp;although&nbsp;you&nbsp;should&nbsp;be&nbsp;fine&nbsp;as&nbsp;long&nbsp;as&nbsp;you&nbsp;reduce&nbsp;the&lt;br&gt;<br>
 &nbsp; &nbsp;resolution&nbsp;for&nbsp;data&nbsp;that&amp;#39;s&nbsp;held&nbsp;for&nbsp;longer.&nbsp;Or&nbsp;put&nbsp;up&nbsp;with&nbsp;increased&lt;br&gt;<br>
 &nbsp; &nbsp;memory&nbsp;use.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;Does&nbsp;it&nbsp;affect&nbsp;performance?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Shouldn&amp;#39;t&nbsp;do&nbsp;particularly.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;Cheers,&nbsp;Simon&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
