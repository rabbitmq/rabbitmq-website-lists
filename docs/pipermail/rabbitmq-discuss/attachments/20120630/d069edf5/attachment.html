<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Jun&nbsp;30,&nbsp;2012&nbsp;at&nbsp;12:42&nbsp;AM,&nbsp;Eric&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ejarendt@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ejarendt@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;thought&nbsp;I&nbsp;sent&nbsp;along&nbsp;another&nbsp;message,&nbsp;but&nbsp;apparently&nbsp;it&nbsp;didn&amp;#39;t&nbsp;go&lt;br&gt;<br>
through.&nbsp; Viewing&nbsp;this&nbsp;group&nbsp;through&nbsp;the&nbsp;new&nbsp;Google&nbsp;Groups&nbsp;UI&nbsp;is&lt;br&gt;<br>
confusing.&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;find&nbsp;it&amp;#39;s&nbsp;better&nbsp;to&nbsp;avoid&nbsp;the&nbsp;Google&nbsp;Group,&nbsp;and&nbsp;just&nbsp;use&nbsp;the&nbsp;mailing&nbsp;list&nbsp;directly.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
I&nbsp;misunderstood&nbsp;the&nbsp;federation&nbsp;configuration;&nbsp;I&nbsp;see&nbsp;now&nbsp;that&nbsp;you&lt;br&gt;<br>
declare&nbsp;a&nbsp;backing&nbsp;type&nbsp;when&nbsp;you&nbsp;declare&nbsp;the&nbsp;federated&nbsp;exchange,&nbsp;which&lt;br&gt;<br>
makes&nbsp;sense.&nbsp; I&nbsp;thought&nbsp;the&nbsp;backing&nbsp;type&nbsp;was&nbsp;based&nbsp;on&nbsp;the&nbsp;upstream&lt;br&gt;<br>
exchange.&lt;br&gt;<br>
&lt;br&gt;<br>
Going&nbsp;back&nbsp;to&nbsp;shovel&nbsp;for&nbsp;a&nbsp;second...&nbsp;if&nbsp;I&nbsp;have&nbsp;two&nbsp;shovels&nbsp;running&nbsp;in&lt;br&gt;<br>
a&nbsp;cluster,&nbsp;one&nbsp;on&nbsp;each&nbsp;broker,&nbsp;and&nbsp;they&nbsp;connect&nbsp;to&nbsp;their&nbsp;host&nbsp;broker&lt;br&gt;<br>
and&nbsp;consume&nbsp;from&nbsp;the&nbsp;same&nbsp;mirrored&nbsp;queue&nbsp;(the&nbsp;queue&nbsp;is&nbsp;&amp;#39;shared&amp;#39;&nbsp;across&lt;br&gt;<br>
the&nbsp;cluster)&nbsp;will&nbsp;they&nbsp;simply&nbsp;behave&nbsp;like&nbsp;two&nbsp;consumers&nbsp;on&nbsp;the&nbsp;same&lt;br&gt;<br>
queue,&nbsp;and&nbsp;basically&nbsp;receive&nbsp;messages&nbsp;round-robin?&nbsp; Because&nbsp;that&nbsp;would&lt;br&gt;<br>
work&nbsp;fine&nbsp;for&nbsp;my&nbsp;scenario.&nbsp; They&amp;#39;ll&nbsp;share&nbsp;the&nbsp;workload&nbsp;unless&nbsp;one&nbsp;of&lt;br&gt;<br>
the&nbsp;brokers&nbsp;in&nbsp;the&nbsp;cluster&nbsp;dies,&nbsp;after&nbsp;which&nbsp;one&nbsp;shovel&nbsp;would&nbsp;be&nbsp;doing&lt;br&gt;<br>
all&nbsp;the&nbsp;work.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Correct,&nbsp;the&nbsp;shovels&nbsp;will&nbsp;behave&nbsp;as&nbsp;you&nbsp;outlined&nbsp;when&nbsp;consuming.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
On&nbsp;Jun&nbsp;29,&nbsp;9:00 am,&nbsp;Eric&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:ejare...@gmail.com&quot;&gt;ejare...@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks&nbsp;for&nbsp;the&nbsp;reply.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;The&nbsp;odd&nbsp;thing&nbsp;about&nbsp;the&nbsp;federation&nbsp;plugin&nbsp;is&nbsp;that&nbsp;the&nbsp;downstream&nbsp;broker,&lt;br&gt;<br>
&amp;gt;&nbsp;which&nbsp;is&nbsp;the&nbsp;&amp;#39;master&amp;#39;&nbsp;conceptually&nbsp;in&nbsp;my&nbsp;case,&nbsp;has&nbsp;to&nbsp;declare&nbsp;its&nbsp;exchange&lt;br&gt;<br>
&amp;gt;&nbsp;type&nbsp;as&nbsp;&amp;#39;federation&amp;#39;,&nbsp;which&nbsp;means&nbsp;the&nbsp;actual&nbsp;type&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;upstream&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;#39;slave&amp;#39;&nbsp;exchange.&nbsp; That&nbsp;feels&nbsp;strange&nbsp;to&nbsp;me,&nbsp;because&nbsp;I&nbsp;don&amp;#39;t&nbsp;want&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;master&nbsp;to&nbsp;really&nbsp;care&nbsp;about&nbsp;the&nbsp;upstream&nbsp;exchange&nbsp;-&nbsp;it&amp;#39;s&nbsp;sort&nbsp;of&nbsp;optional.&lt;br&gt;<br>
&amp;gt;&nbsp; If&nbsp;the&nbsp;upstream&nbsp;broker&nbsp;is&nbsp;alive&nbsp;that&amp;#39;s&nbsp;great,&nbsp;and&nbsp;I&nbsp;want&nbsp;it&nbsp;to&nbsp;forward&lt;br&gt;<br>
&amp;gt;&nbsp;messages&nbsp;along&nbsp;to&nbsp;the&nbsp;master.&nbsp; If&nbsp;it&amp;#39;s&nbsp;not,&nbsp;or&nbsp;isn&amp;#39;t&nbsp;present&nbsp;when&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;master&nbsp;starts,&nbsp;I&nbsp;don&amp;#39;t&nbsp;want&nbsp;that&nbsp;to&nbsp;be&nbsp;a&nbsp;problem.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Maybe&nbsp;I&amp;#39;m&nbsp;not&nbsp;understanding&nbsp;federation&nbsp;correctly?&nbsp; It&nbsp;just&nbsp;struck&nbsp;me&nbsp;as&nbsp;odd&lt;br&gt;<br>
&amp;gt;&nbsp;that&nbsp;the&nbsp;master&nbsp;has&nbsp;to&nbsp;go&nbsp;declaring&nbsp;all&nbsp;of&nbsp;the&nbsp;upstream&nbsp;sources&nbsp;it&nbsp;expects,&lt;br&gt;<br>
&amp;gt;&nbsp;and&nbsp;the&nbsp;other&nbsp;way&nbsp;(with&nbsp;shovel)&nbsp;seemed&nbsp;more&nbsp;natural.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;understand&nbsp;that&nbsp;the&nbsp;sources&nbsp;and&nbsp;destination&nbsp;fields&nbsp;accept&nbsp;a&nbsp;list&nbsp;for&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;purpose&nbsp;of&nbsp;failover.&nbsp; I&nbsp;could&nbsp;configure&nbsp;a&nbsp;single&nbsp;shovel&nbsp;that&nbsp;consumes&nbsp;from&lt;br&gt;<br>
&amp;gt;&nbsp;either&nbsp;broker&nbsp;in&nbsp;the&nbsp;&amp;#39;slave&amp;#39;&nbsp;cluster&nbsp;and&nbsp;publishes&nbsp;to&nbsp;either&nbsp;broker&nbsp;on&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;master&nbsp;cluster,&nbsp;but&nbsp;I&amp;#39;m&nbsp;worried&nbsp;about&nbsp;the&nbsp;shovel&amp;#39;s&nbsp;host&nbsp;broker&nbsp;failing&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;taking&nbsp;the&nbsp;shovel&nbsp;down.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;Friday,&nbsp;June&nbsp;29,&nbsp;2012&nbsp;12:31:41&nbsp;AM&nbsp;UTC-7,&nbsp;Brendan&nbsp;Hay&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Hi&nbsp;Eric,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;FYI:&nbsp;The&nbsp;&amp;#39;sources&amp;#39;&nbsp;and&nbsp;&amp;#39;destinations&amp;#39;&nbsp;configuration&nbsp;fields&nbsp;both&nbsp;accept&nbsp;a&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;list.&nbsp;The&nbsp;shovel&nbsp;plugin&nbsp;doesn&amp;#39;t&nbsp;actually&nbsp;pull/push&nbsp;to/from&nbsp;all&nbsp;of&nbsp;these&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;simultaneously,&nbsp;it&nbsp;uses&nbsp;them&nbsp;as&nbsp;a&nbsp;form&nbsp;of&nbsp;simple&nbsp;failover&nbsp;-&nbsp;if&nbsp;a&nbsp;connection&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;fails,&nbsp;it&nbsp;uses&nbsp;the&nbsp;next&nbsp;one&nbsp;in&nbsp;the&nbsp;list.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;It&nbsp;sounds&nbsp;like&nbsp;for&nbsp;your&nbsp;scenario&nbsp;(when&nbsp;clustering&nbsp;in&nbsp;general),&nbsp;it&nbsp;would&nbsp;be&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;easier&nbsp;to&nbsp;use&nbsp;the&nbsp;federation&nbsp;plugin&nbsp;(&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/federation.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.rabbitmq.com/federation.html&lt;/a&gt;).&nbsp;When&nbsp;you&nbsp;declare&nbsp;a&nbsp;federated&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;exchange&nbsp;on&nbsp;the&nbsp;downstream/master&nbsp;cluster,&nbsp;the&nbsp;plugin&nbsp;auto-magically&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;declares&nbsp;queues&nbsp;(mirrored&nbsp;if&nbsp;configured)&nbsp;on&nbsp;the&nbsp;upstream/AWS&nbsp;cluster&nbsp;..&nbsp;you&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;would&nbsp;then&nbsp;bind&nbsp;a&nbsp;mirrored&nbsp;queue&nbsp;to&nbsp;the&nbsp;federated&nbsp;exchange&nbsp;on&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;downstream/master&nbsp;cluster&nbsp;to&nbsp;cause&nbsp;messages&nbsp;to&nbsp;be&nbsp;routed&nbsp;across&nbsp;the&nbsp;link&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;that&nbsp;queue.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;The&nbsp;plugin&nbsp;will&nbsp;then&nbsp;stay&nbsp;connected&nbsp;even&nbsp;if&nbsp;one&nbsp;of&nbsp;your&nbsp;nodes&nbsp;on&nbsp;either&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;cluster&nbsp;go&nbsp;down&nbsp;..&nbsp;if&nbsp;the&nbsp;whole&nbsp;downstream/master&nbsp;cluster&nbsp;goes&nbsp;away/down,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;then&nbsp;messages&nbsp;will&nbsp;pile&nbsp;up&nbsp;in&nbsp;the&nbsp;upstream/AWS&nbsp;queues,&nbsp;and&nbsp;be&nbsp;transfered&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;once&nbsp;the&nbsp;link&nbsp;is&nbsp;re-established.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Does&nbsp;that&nbsp;solve&nbsp;your&nbsp;use-case?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Regards,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Brendan&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
