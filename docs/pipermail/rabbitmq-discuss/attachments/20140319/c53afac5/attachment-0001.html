<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;During&nbsp;our&nbsp;performance&nbsp;testing&nbsp;yesterday&nbsp;we&nbsp;saw&nbsp;some&nbsp;interesting&nbsp;behavior.&nbsp;The&nbsp;setup&nbsp;is:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;RabbitMQ&nbsp;x&nbsp;3&nbsp;nodes,&nbsp;clustered,&nbsp;behind&nbsp;a&nbsp;load&nbsp;balancer,&nbsp;running&nbsp;on&nbsp;Linux,&nbsp;Erlang&nbsp;16B03,&nbsp;Rabbit&nbsp;3.2.3.&nbsp;RabbitMQ&nbsp;nodes&nbsp;running&nbsp;on&nbsp;VMWare&nbsp;ESX&nbsp;4.5&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;we&nbsp;observed&nbsp;was&nbsp;a&nbsp;run&nbsp;in&nbsp;the&nbsp;morning&nbsp;publishing&nbsp;and&nbsp;consuming&nbsp;a&nbsp;sustained&nbsp;rate&nbsp;of&nbsp;140K&nbsp;messages/hour&nbsp;across&nbsp;150&nbsp;mirrored&nbsp;queues&nbsp;(good).&lt;/div&gt;&lt;div&gt;The&nbsp;application&nbsp;was&nbsp;shut&nbsp;down,&nbsp;all&nbsp;connections&nbsp;to&nbsp;Rabbit&nbsp;were&nbsp;observed&nbsp;to&nbsp;drop&nbsp;to&nbsp;0.&lt;/div&gt;<br>
&lt;div&gt;An&nbsp;hour&nbsp;or&nbsp;two&nbsp;passes&nbsp;while&nbsp;the&nbsp;team&nbsp;does&nbsp;other&nbsp;things.&lt;/div&gt;&lt;div&gt;The&nbsp;application&nbsp;was&nbsp;brought&nbsp;back&nbsp;up,&nbsp;connections&nbsp;re-established,&nbsp;and&nbsp;another&nbsp;test&nbsp;run&nbsp;kicked&nbsp;off.&lt;/div&gt;&lt;div&gt;This&nbsp;time&nbsp;the&nbsp;max&nbsp;sustained&nbsp;rate&nbsp;is&nbsp;about&nbsp;65K&nbsp;messages/hour&nbsp;(bad).&nbsp;The&nbsp;reason&nbsp;was&nbsp;narrowed&nbsp;down&nbsp;to&nbsp;Rabbit&nbsp;not&nbsp;accepting&nbsp;published&nbsp;messages&nbsp;any&nbsp;faster&nbsp;than&nbsp;that.&lt;/div&gt;<br>
&lt;div&gt;Disk&nbsp;I/O&nbsp;was&nbsp;checked&nbsp;-&nbsp;we&#39;re&nbsp;on&nbsp;a&nbsp;very&nbsp;fast&nbsp;SAN&nbsp;and&nbsp;there&nbsp;was&nbsp;no&nbsp;issue.&lt;/div&gt;&lt;div&gt;Load&nbsp;balancer&nbsp;was&nbsp;checked,&nbsp;it&#39;s&nbsp;not&nbsp;preventing&nbsp;the&nbsp;issue.&lt;/div&gt;&lt;div&gt;Finally,&nbsp;the&nbsp;RabbitMQ&nbsp;nodes&nbsp;were&nbsp;stopped&nbsp;and&nbsp;restarted&nbsp;and&nbsp;another&nbsp;test&nbsp;run&nbsp;was&nbsp;made,&nbsp;and&nbsp;suddenly&nbsp;we&nbsp;are&nbsp;back&nbsp;up&nbsp;to&nbsp;140K&nbsp;messages/hour.&lt;/div&gt;<br>
&lt;div&gt;The&nbsp;logs&nbsp;show&nbsp;no&nbsp;memory&nbsp;alarms&nbsp;or&nbsp;flow&nbsp;control&nbsp;messages&nbsp;-&nbsp;in&nbsp;fact&nbsp;the&nbsp;logs&nbsp;are&nbsp;&quot;clean&quot;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;suggestions&nbsp;on&nbsp;places&nbsp;to&nbsp;look&nbsp;to&nbsp;see&nbsp;what&nbsp;the&nbsp;underlying&nbsp;issue&nbsp;might&nbsp;be?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;In&nbsp;real&nbsp;life&nbsp;I&nbsp;don&#39;t&nbsp;expect&nbsp;to&nbsp;start&nbsp;and&nbsp;stop&nbsp;applications,&nbsp;so&nbsp;this&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;a&nbsp;concern,&nbsp;but&nbsp;we&nbsp;are&nbsp;very&nbsp;curious&nbsp;about&nbsp;the&nbsp;observed&nbsp;behavior.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ron&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
