<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;believe&nbsp;this&nbsp;is&nbsp;because&nbsp;webstomp&nbsp;creates&nbsp;exclusive&nbsp;queues&nbsp;which&nbsp;do&nbsp;not&nbsp;get&nbsp;replicated&nbsp;regardless&nbsp;of&nbsp;policy.&nbsp;The&nbsp;issue&nbsp;is&nbsp;this&nbsp;means&nbsp;any&nbsp;non&nbsp;socket&nbsp;client&nbsp;has&nbsp;to&nbsp;poll&nbsp;the&nbsp;exact&nbsp;node&nbsp;where&nbsp;their&nbsp;queue&nbsp;is&nbsp;located.&lt;br&gt;&lt;br&gt;On&nbsp;Wednesday,&nbsp;19&nbsp;March&nbsp;2014&nbsp;11:04:48&nbsp;UTC,&nbsp;Steve&nbsp;Flitcroft&nbsp;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Having&nbsp;trouble&nbsp;getting&nbsp;the&nbsp;queues&nbsp;that&nbsp;are&nbsp;created&nbsp;via&nbsp;sockjs&nbsp;&amp;&nbsp;webstomp&nbsp;being&nbsp;replicated&nbsp;across&nbsp;nodes.&lt;div&gt;&lt;br&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;policy&nbsp;set&nbsp;for&nbsp;any&nbsp;queues&nbsp;that&nbsp;start&nbsp;with&nbsp;amq&nbsp;to&nbsp;be&nbsp;replicated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;can&nbsp;see&nbsp;this&nbsp;here&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://gyazo.com/b0e3fbac0d1a1d0baabc25c5f43499f0&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onmousedown=&quot;this.href='http://www.google.com/url?q\75http%3A%2F%2Fgyazo.com%2Fb0e3fbac0d1a1d0baabc25c5f43499f0\46sa\75D\46sntz\0751\46usg\75AFQjCNGYHm3QD5TOykzGr4NNKniKUZtOnQ';return&nbsp;true;&quot;&nbsp;onclick=&quot;this.href='http://www.google.com/url?q\75http%3A%2F%2Fgyazo.com%2Fb0e3fbac0d1a1d0baabc25c5f43499f0\46sa\75D\46sntz\0751\46usg\75AFQjCNGYHm3QD5TOykzGr4NNKniKUZtOnQ';return&nbsp;true;&quot;&gt;http://gyazo.com/&lt;wbr&gt;b0e3fbac0d1a1d0baabc25c5f43499&lt;wbr&gt;f0&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;the&nbsp;amq.gen&nbsp;queue&nbsp;created&nbsp;by&nbsp;webstomp&nbsp;does&nbsp;not&nbsp;replicate&nbsp;to&nbsp;the&nbsp;other&nbsp;node,&nbsp;the&nbsp;queue&nbsp;I&nbsp;created&nbsp;called&nbsp;amqsteve&nbsp;does.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;policy&nbsp;is&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://gyazo.com/2ab0f414a83a529e3142d30988d003fe&quot;&nbsp;target=&quot;_blank&quot;&nbsp;onmousedown=&quot;this.href='http://www.google.com/url?q\75http%3A%2F%2Fgyazo.com%2F2ab0f414a83a529e3142d30988d003fe\46sa\75D\46sntz\0751\46usg\75AFQjCNFAm5oMLVdjZzv3H4fXJDrDzyLY9g';return&nbsp;true;&quot;&nbsp;onclick=&quot;this.href='http://www.google.com/url?q\75http%3A%2F%2Fgyazo.com%2F2ab0f414a83a529e3142d30988d003fe\46sa\75D\46sntz\0751\46usg\75AFQjCNFAm5oMLVdjZzv3H4fXJDrDzyLY9g';return&nbsp;true;&quot;&gt;http://gyazo.com/&lt;wbr&gt;2ab0f414a83a529e3142d30988d003&lt;wbr&gt;fe&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;result&nbsp;of&nbsp;this&nbsp;is&nbsp;that&nbsp;any&nbsp;non&nbsp;websocket&nbsp;browsers&nbsp;have&nbsp;to&nbsp;be&nbsp;routed&nbsp;to&nbsp;exactly&nbsp;the&nbsp;same&nbsp;node&nbsp;otherwise&nbsp;they&nbsp;get&nbsp;a&nbsp;404&nbsp;on&nbsp;the&nbsp;xhr_send&nbsp;method&nbsp;and&nbsp;lose&nbsp;connection.&nbsp;I&nbsp;can&nbsp;fix&nbsp;this&nbsp;by&nbsp;routing&nbsp;all&nbsp;non&nbsp;socket&nbsp;browsers&nbsp;to&nbsp;one&nbsp;node&nbsp;but&nbsp;this&nbsp;defeats&nbsp;the&nbsp;point&nbsp;of&nbsp;a&nbsp;cluster&nbsp;and&nbsp;load&nbsp;balancing.&nbsp;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
