<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;div&gt;You&nbsp;should&nbsp;upgrade&nbsp;to&nbsp;pika&nbsp;0.9.6&nbsp;using&nbsp;pip.&nbsp;Also&nbsp;rabbitmq&nbsp;to&nbsp;2.8.7&nbsp;if&nbsp;you&nbsp;can.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;'heartbeat'&nbsp;should&nbsp;be&nbsp;'heartbeat_interval',&nbsp;at&nbsp;least&nbsp;in&nbsp;0.9.6.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;need&nbsp;to&nbsp;import&nbsp;sys.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;works.&nbsp;I&nbsp;stopped&nbsp;it&nbsp;after&nbsp;a&nbsp;few&nbsp;seconds&nbsp;and&nbsp;40,000&nbsp;messages&nbsp;into&nbsp;my&nbsp;local&nbsp;cluster.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;will&nbsp;need&nbsp;to&nbsp;create&nbsp;the&nbsp;exchange&nbsp;and&nbsp;tap&nbsp;it&nbsp;with&nbsp;a&nbsp;queue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Michael&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;import&nbsp;sys&nbsp;#&nbsp;add&nbsp;this&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;import&nbsp;pika,&nbsp;json&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;amqpUser&nbsp;=&nbsp;'guest'&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;amqpPassword&nbsp;=&nbsp;'guest'&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;amqpHost&nbsp;=&nbsp;'localhost'&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;amqpPort&nbsp;=&nbsp;5672&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;amqpVHost&nbsp;=&nbsp;'/'&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;amqpHeartbeat&nbsp;=&nbsp;10&nbsp;#&nbsp;interval&nbsp;in&nbsp;seconds&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;msgDeliveryMode&nbsp;=&nbsp;1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;exchangeName&nbsp;=&nbsp;'my_log_exchange'&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;routingKey&nbsp;=&nbsp;'rk'&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;parameterKeys&nbsp;=&nbsp;['first&nbsp;line',&nbsp;'second&nbsp;line']&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;test_data&nbsp;in&nbsp;a&nbsp;file:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;test&nbsp;log&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;another&nbsp;line&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;credentials&nbsp;=&nbsp;pika.PlainCredentials(amqpUser,&nbsp;amqpPassword)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;connParameters&nbsp;=&nbsp;pika.ConnectionParameters(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;amqpHost,&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;port&nbsp;=&nbsp;amqpPort,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;virtual_host&nbsp;=&nbsp;amqpVHost,&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;credentials&nbsp;=&nbsp;credentials,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;heartbeat_interval&nbsp;=&nbsp;amqpHeartbeat&nbsp;#&nbsp;change&nbsp;this&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;msgProperties&nbsp;=&nbsp;pika.BasicProperties(content_type&nbsp;=&nbsp;'application/json',&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;delivery_mode&nbsp;=&nbsp;msgDeliveryMode)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;while&nbsp;1:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;conn&nbsp;=&nbsp;pika.BlockingConnection(connParameters)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;channel&nbsp;=&nbsp;conn.channel()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;while&nbsp;1:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;logrecord&nbsp;=&nbsp;{}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;for&nbsp;parameterKey&nbsp;in&nbsp;parameterKeys:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;line&nbsp;=&nbsp;sys.stdin.readline().rstrip('\n')&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;logrecord[parameterKey]&nbsp;=&nbsp;line&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;msg&nbsp;=&nbsp;json.dumps(logrecord)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;channel.basic_publish(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;body&nbsp;=&nbsp;msg,&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;exchange&nbsp;=&nbsp;exchangeName,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;properties&nbsp;=&nbsp;msgProperties,&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;routing_key&nbsp;=&nbsp;routingKey&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;Courier;&nbsp;&quot;&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;11/4/12&nbsp;5:04&nbsp;PM,&nbsp;&quot;Daniel&nbsp;Neugebauer&quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:mailinglists@energiequant.de&quot;&gt;mailinglists@energiequant.de&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;id=&quot;MAC_OUTLOOK_ATTRIBUTION_BLOCKQUOTE&quot;&nbsp;style=&quot;BORDER-LEFT:&nbsp;#b5c4df&nbsp;5&nbsp;solid;&nbsp;PADDING:0&nbsp;0&nbsp;0&nbsp;5;&nbsp;MARGIN:0&nbsp;0&nbsp;0&nbsp;5;&quot;&gt;&lt;div&gt;Preparing&nbsp;my&nbsp;code&nbsp;for&nbsp;this&nbsp;post,&nbsp;I&nbsp;think&nbsp;I&nbsp;now&nbsp;figured&nbsp;out&nbsp;what&nbsp;was&lt;/div&gt;&lt;div&gt;wrong&nbsp;with&nbsp;my&nbsp;Python&nbsp;scripts.&nbsp;I&nbsp;found&nbsp;some&nbsp;confused&nbsp;code&nbsp;in&nbsp;my&nbsp;attempts&lt;/div&gt;&lt;div&gt;to&nbsp;use&nbsp;amqplib&nbsp;which&nbsp;now&nbsp;appears&nbsp;to&nbsp;work&nbsp;fine&nbsp;for&nbsp;my&nbsp;purpose&nbsp;(I&nbsp;messed&lt;/div&gt;&lt;div&gt;up&nbsp;error&nbsp;handling;&nbsp;I&nbsp;really&nbsp;should&nbsp;not&nbsp;implement&nbsp;at&nbsp;11pm&nbsp;after&nbsp;a&nbsp;busy&lt;/div&gt;&lt;div&gt;work&nbsp;day...).&nbsp;Sorry.&nbsp;:(&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kombu&nbsp;now&nbsp;works&nbsp;as&nbsp;well&nbsp;and&nbsp;indeed&nbsp;appears&nbsp;to&nbsp;reconnect&nbsp;automatically&nbsp;-&lt;/div&gt;&lt;div&gt;just&nbsp;what&nbsp;I&nbsp;wanted.&nbsp;I&nbsp;must&nbsp;have&nbsp;had&nbsp;some&nbsp;version&nbsp;conflict&nbsp;running&nbsp;it&lt;/div&gt;&lt;div&gt;from&nbsp;Apache&nbsp;as&nbsp;1.5.1&nbsp;was&nbsp;installed&nbsp;globally&nbsp;as&nbsp;well&nbsp;(unfortunately,&lt;/div&gt;&lt;div&gt;another&nbsp;application&nbsp;required&nbsp;it).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;still&nbsp;appreciate&nbsp;if&nbsp;you&nbsp;could&nbsp;take&nbsp;a&nbsp;few&nbsp;moments&nbsp;to&nbsp;scan&nbsp;over&nbsp;my&lt;/div&gt;&lt;div&gt;assumptions&nbsp;about&nbsp;what&nbsp;I've&nbsp;done&nbsp;wrong&nbsp;with&nbsp;Pika&nbsp;and&nbsp;why&nbsp;my&nbsp;Erlang&nbsp;code&lt;/div&gt;&lt;div&gt;doesn't&nbsp;work.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;First,&nbsp;my&nbsp;setup:&nbsp;I'm&nbsp;running&nbsp;Python&nbsp;2.7,&nbsp;Erlang&nbsp;R15B&nbsp;and&nbsp;RabbitMQ&nbsp;2.8.4&lt;/div&gt;&lt;div&gt;on&nbsp;Linux,&nbsp;connections&nbsp;are&nbsp;only&nbsp;machine-local&nbsp;(localhost)&nbsp;so&nbsp;far&nbsp;(I'm&lt;/div&gt;&lt;div&gt;planning&nbsp;to&nbsp;centralize&nbsp;logs&nbsp;via&nbsp;shovels&nbsp;later&nbsp;on).&nbsp;The&nbsp;script&nbsp;should&nbsp;be&lt;/div&gt;&lt;div&gt;run&nbsp;via&nbsp;a&nbsp;piped&nbsp;CustomLog&nbsp;in&nbsp;Apache&nbsp;2.2.&nbsp;Pika&nbsp;is&nbsp;at&nbsp;version&nbsp;0.9.5,&lt;/div&gt;&lt;div&gt;amqplib&nbsp;at&nbsp;1.0.2&nbsp;-&nbsp;these&nbsp;versions&nbsp;may&nbsp;be&nbsp;a&nbsp;bit&nbsp;older&nbsp;now&nbsp;but&nbsp;were&nbsp;recent&lt;/div&gt;&lt;div&gt;(or&nbsp;appeared&nbsp;to&nbsp;be&nbsp;so)&nbsp;when&nbsp;I&nbsp;started&nbsp;trying&nbsp;to&nbsp;get&nbsp;this&nbsp;working&nbsp;in&nbsp;August.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;messages&nbsp;I&nbsp;got&nbsp;from&nbsp;Pika&nbsp;were&nbsp;randomly&nbsp;spamming&nbsp;Apache's&nbsp;error_log:&lt;/div&gt;&lt;div&gt;(with&nbsp;increasing&nbsp;byte&nbsp;and&nbsp;frame&nbsp;counts)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;/usr/lib64/python2.7/site-packages/pika/connection.py:642:&nbsp;UserWarning:&lt;/div&gt;&lt;div&gt;Pika:&nbsp;Write&nbsp;buffer&nbsp;exceeded&nbsp;warning&nbsp;threshold&nbsp;at&nbsp;2020&nbsp;bytes&nbsp;and&nbsp;an&lt;/div&gt;&lt;div&gt;estimated&nbsp;11&nbsp;frames&nbsp;behind&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;warn(message&nbsp;%&nbsp;(self.outbound_buffer.size,&nbsp;est_frames_behind))&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;They&nbsp;can&nbsp;be&nbsp;reproduced&nbsp;by&nbsp;running&nbsp;the&nbsp;following&nbsp;script&nbsp;(set/substitute&lt;/div&gt;&lt;div&gt;variables&nbsp;to&nbsp;connection&nbsp;data&nbsp;and&nbsp;parameterKeys&nbsp;with&nbsp;a&nbsp;list&nbsp;of&nbsp;strings)&lt;/div&gt;&lt;div&gt;and&nbsp;then&nbsp;stopping&nbsp;the&nbsp;RabbitMQ&nbsp;server.&nbsp;In&nbsp;August,&nbsp;I&nbsp;was&nbsp;getting&nbsp;them&lt;/div&gt;&lt;div&gt;randomly&nbsp;after&nbsp;some&nbsp;uptime&nbsp;as&nbsp;well&nbsp;but&nbsp;I&nbsp;couldn't&nbsp;reproduce&nbsp;that&nbsp;now.&nbsp;As&lt;/div&gt;&lt;div&gt;I'm&nbsp;digging&nbsp;deeper&nbsp;into&nbsp;it&nbsp;now,&nbsp;the&nbsp;client&nbsp;does&nbsp;not&nbsp;notice&nbsp;that&nbsp;the&lt;/div&gt;&lt;div&gt;connection&nbsp;was&nbsp;lost&nbsp;and&nbsp;starts&nbsp;queueing&nbsp;messages.&nbsp;I&nbsp;don't&nbsp;get&nbsp;any&lt;/div&gt;&lt;div&gt;exceptions&nbsp;thrown,&nbsp;so&nbsp;I'm&nbsp;unable&nbsp;to&nbsp;detect&nbsp;that&nbsp;as&nbsp;I&nbsp;thought&nbsp;hook&lt;/div&gt;&lt;div&gt;functions&nbsp;for&nbsp;connection&nbsp;handling&nbsp;were&nbsp;optional.&nbsp;When&nbsp;enabling&lt;/div&gt;&lt;div&gt;heartbeats,&nbsp;the&nbsp;connection&nbsp;closes&nbsp;as&nbsp;soon&nbsp;as&nbsp;the&nbsp;client&nbsp;is&nbsp;sleeping&nbsp;for&lt;/div&gt;&lt;div&gt;2-3&nbsp;seconds&nbsp;which&nbsp;causes&nbsp;the&nbsp;same&nbsp;error&nbsp;messages.&nbsp;As&nbsp;I'm&nbsp;thinking&nbsp;about&lt;/div&gt;&lt;div&gt;it&nbsp;now,&nbsp;maybe&nbsp;my&nbsp;use&nbsp;case&nbsp;strictly&nbsp;requires&nbsp;spawning&nbsp;a&nbsp;thread&nbsp;for&nbsp;async&lt;/div&gt;&lt;div&gt;handling&nbsp;as&nbsp;I'm&nbsp;preventing&nbsp;heartbeats&nbsp;(and&nbsp;what&nbsp;not)&nbsp;from&nbsp;being&lt;/div&gt;&lt;div&gt;processed&nbsp;when&nbsp;blocking&nbsp;on&nbsp;readline()?&nbsp;It&nbsp;wasn't&nbsp;clear&nbsp;to&nbsp;me&nbsp;when&lt;/div&gt;&lt;div&gt;reading&nbsp;the&nbsp;documentation&nbsp;that&nbsp;this&nbsp;would&nbsp;be&nbsp;required&nbsp;(it&nbsp;would&nbsp;be&lt;/div&gt;&lt;div&gt;reasonable&nbsp;for&nbsp;Pika&nbsp;to&nbsp;spawn&nbsp;a&nbsp;thread&nbsp;for&nbsp;heartbeats&nbsp;itself)&nbsp;but&nbsp;it&lt;/div&gt;&lt;div&gt;would&nbsp;make&nbsp;sense.&nbsp;Anyway,&nbsp;closing&nbsp;connections&nbsp;after&nbsp;only&nbsp;a&nbsp;few&nbsp;seconds&lt;/div&gt;&lt;div&gt;seems&nbsp;a&nbsp;bit&nbsp;radical&nbsp;considering&nbsp;messages&nbsp;could&nbsp;be&nbsp;easily&nbsp;delayed&nbsp;on&lt;/div&gt;&lt;div&gt;public&nbsp;networks,&nbsp;although&nbsp;I'm&nbsp;sure&nbsp;that's&nbsp;configurable&nbsp;somewhere.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;guess&nbsp;I&nbsp;should&nbsp;write&nbsp;an&nbsp;async&nbsp;client&nbsp;instead.&nbsp;I&nbsp;thought&nbsp;I&nbsp;could&nbsp;avoid&lt;/div&gt;&lt;div&gt;that&nbsp;since&nbsp;I'm&nbsp;fine&nbsp;with&nbsp;a&nbsp;blocking&nbsp;connection&nbsp;(Apache&nbsp;queues&nbsp;log&lt;/div&gt;&lt;div&gt;messages&nbsp;internally&nbsp;and&nbsp;replays&nbsp;messages&nbsp;after&nbsp;a&nbsp;crash)&nbsp;but&nbsp;I&nbsp;must&nbsp;have&lt;/div&gt;&lt;div&gt;misunderstood&nbsp;the&nbsp;documentation&nbsp;and&nbsp;Pika's&nbsp;blocking&nbsp;connections&nbsp;are&nbsp;only&lt;/div&gt;&lt;div&gt;suitable&nbsp;for&nbsp;very&nbsp;simple,&nbsp;&quot;one&nbsp;shot&quot;&nbsp;messaging&nbsp;without&nbsp;(too&nbsp;large)&lt;/div&gt;&lt;div&gt;delays&nbsp;in&nbsp;between.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---&amp;gt;&lt;/div&gt;&lt;div&gt;import&nbsp;pika,&nbsp;json&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;credentials&nbsp;=&nbsp;pika.PlainCredentials(amqpUser,&nbsp;amqpPassword)&lt;/div&gt;&lt;div&gt;connParameters&nbsp;=&nbsp;pika.ConnectionParameters(amqpHost,&nbsp;port&nbsp;=&nbsp;amqpPort,&lt;/div&gt;&lt;div&gt;virtual_host&nbsp;=&nbsp;amqpVHost,&nbsp;credentials&nbsp;=&nbsp;credentials,&nbsp;heartbeat&nbsp;=&lt;/div&gt;&lt;div&gt;amqpHeartbeat)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;msgProperties&nbsp;=&nbsp;pika.BasicProperties(content_type&nbsp;=&nbsp;'application/json',&lt;/div&gt;&lt;div&gt;delivery_mode&nbsp;=&nbsp;msgDeliveryMode)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;while&nbsp;1:&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;conn&nbsp;=&nbsp;pika.BlockingConnection(connParameters)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;channel&nbsp;=&nbsp;conn.channel()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&nbsp;1:&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logrecord&nbsp;=&nbsp;{}&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for&nbsp;parameterKey&nbsp;in&nbsp;parameterKeys:&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;line&nbsp;=&nbsp;sys.stdin.readline().rstrip('\n')&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;logrecord[parameterKey]&nbsp;=&nbsp;line&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;msg&nbsp;=&nbsp;json.dumps(logrecord)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;channel.basic_publish(body&nbsp;=&nbsp;msg,&nbsp;exchange&nbsp;=&nbsp;exchangeName,&lt;/div&gt;&lt;div&gt;properties&nbsp;=&nbsp;msgProperties,&nbsp;routing_key&nbsp;=&nbsp;routingKey)&lt;/div&gt;&lt;div&gt;&amp;lt;---&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;With&nbsp;heartbeat&nbsp;set&nbsp;to&nbsp;True,&nbsp;RabbitMQ&nbsp;says:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---&amp;gt;&lt;/div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;4-Nov-2012::21:08:48&nbsp;===&lt;/div&gt;&lt;div&gt;accepting&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.1809.0&amp;gt;&nbsp;(127.0.0.1:58931&nbsp;-&amp;gt;&nbsp;127.0.0.1:5672)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=ERROR&nbsp;REPORT====&nbsp;4-Nov-2012::21:09:02&nbsp;===&lt;/div&gt;&lt;div&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.1809.0&amp;gt;&nbsp;(127.0.0.1:58931&nbsp;-&amp;gt;&nbsp;127.0.0.1:5672):&lt;/div&gt;&lt;div&gt;{timeout,running}&lt;/div&gt;&lt;div&gt;&amp;lt;---&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;attempt&nbsp;to&nbsp;connect&nbsp;via&nbsp;Erlang&nbsp;looks&nbsp;as&nbsp;follows:&nbsp;(removed&nbsp;config&nbsp;loading)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---&amp;gt;&lt;/div&gt;&lt;div&gt;-module(stdin2amqp).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-include(&quot;amqp_client.hrl&quot;).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-export([main/1]).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-record(config,&nbsp;{&nbsp;amqpHost&nbsp;=&nbsp;&quot;localhost&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amqpPort&nbsp;=&nbsp;5670,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amqpVHost&nbsp;=&nbsp;&quot;/&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amqpUser&nbsp;=&nbsp;&quot;guest&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amqpPassword&nbsp;=&nbsp;&quot;guest&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amqpHeartbeat&nbsp;=&nbsp;true,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;exchangeName&nbsp;=&nbsp;&quot;logs&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;routingKeyFormat&nbsp;=&nbsp;&quot;apache.access.%{vhost}&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;msgDeliveryMode&nbsp;=&nbsp;2,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;parameterKeys&nbsp;=&nbsp;[]&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;main(ConfigPath)&nbsp;-&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{ok,&nbsp;Config}&nbsp;=&nbsp;omitted_config_loading(ConfigPath),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{ok,&nbsp;Connection}&nbsp;=&lt;/div&gt;&lt;div&gt;amqp_connection:start(build_amqp_params_network(Config)),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{ok,&nbsp;Channel}&nbsp;=&nbsp;amqp_connection:open_channel(Connection),&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Payload&nbsp;=&nbsp;&quot;Test&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Publish&nbsp;=&nbsp;#'basic.publish'{exchange&nbsp;=&nbsp;&amp;lt;&amp;lt;&quot;apache-logs&quot;&amp;gt;&amp;gt;,&lt;/div&gt;&lt;div&gt;routing_key&nbsp;=&nbsp;&amp;lt;&amp;lt;&quot;test&quot;&amp;gt;&amp;gt;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amqp_channel:cast(Channel,&nbsp;Publish,&nbsp;#amqp_msg{payload&nbsp;=&nbsp;Payload}),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ok.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;build_amqp_params_network(Config)&nbsp;-&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#amqp_params_network{&nbsp;username&nbsp;=&lt;/div&gt;&lt;div&gt;list_to_bitstring(Config#config.amqpUser),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;password&nbsp;=&lt;/div&gt;&lt;div&gt;list_to_bitstring(Config#config.amqpPassword),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;virtual_host&nbsp;=&lt;/div&gt;&lt;div&gt;list_to_bitstring(Config#config.amqpVHost),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;host&nbsp;=&lt;/div&gt;&lt;div&gt;list_to_bitstring(Config#config.amqpHost),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;port&nbsp;=&nbsp;Config#config.amqpPort&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}.&lt;/div&gt;&lt;div&gt;&amp;lt;---&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;comment&nbsp;the&nbsp;assignment&nbsp;of&nbsp;#amqp_params_network.host&nbsp;out,&nbsp;I&nbsp;can&nbsp;get&lt;/div&gt;&lt;div&gt;a&nbsp;connection&nbsp;that&nbsp;instantly&nbsp;fails&nbsp;with&nbsp;&quot;Connection&nbsp;(&amp;lt;0.35.0&amp;gt;)&nbsp;closing:&lt;/div&gt;&lt;div&gt;internal&nbsp;error&nbsp;in&nbsp;channel&nbsp;(&amp;lt;0.45.0&amp;gt;):&nbsp;shutdown&quot;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;try&nbsp;to&nbsp;set&nbsp;any&nbsp;hostname,&nbsp;I&nbsp;only&nbsp;get:&nbsp;{&quot;init&nbsp;terminating&nbsp;in&lt;/div&gt;&lt;div&gt;do_boot&quot;,{{badmatch,{error,unknown_host}},[{stdin2amqp,main,1,[{file,&quot;src/stdin2amqp.erl&quot;},{line,24}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;doesn't&nbsp;make&nbsp;a&nbsp;difference&nbsp;if&nbsp;I&nbsp;pass&nbsp;a&nbsp;string&nbsp;through&lt;/div&gt;&lt;div&gt;list_to_bitstring&nbsp;or&nbsp;enter&nbsp;it&nbsp;directly&nbsp;as&nbsp;&amp;lt;&amp;lt;&quot;localhost&quot;&amp;gt;&amp;gt;.&nbsp;The&nbsp;local&lt;/div&gt;&lt;div&gt;machine's&nbsp;hostname&nbsp;(short&nbsp;or&nbsp;full)&nbsp;or&nbsp;FQDNs&nbsp;(terminated&nbsp;by&nbsp;a&nbsp;dot)&nbsp;don't&lt;/div&gt;&lt;div&gt;work&nbsp;either.&nbsp;Neither&nbsp;do&nbsp;IPs&nbsp;(I&nbsp;even&nbsp;tried&nbsp;&amp;lt;&amp;lt;127,&nbsp;0,&nbsp;0,&nbsp;1&amp;gt;&amp;gt;&nbsp;and&nbsp;&amp;lt;&amp;lt;1,&nbsp;0,&lt;/div&gt;&lt;div&gt;0,&nbsp;127&amp;gt;&amp;gt;&nbsp;hoping&nbsp;that&nbsp;maybe&nbsp;I&nbsp;would&nbsp;need&nbsp;the&nbsp;IP&nbsp;address&nbsp;as&nbsp;4&nbsp;bytes&nbsp;in&lt;/div&gt;&lt;div&gt;either&nbsp;endianess).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;suppose&nbsp;it's&nbsp;something&nbsp;very&nbsp;basic&nbsp;that&nbsp;I'm&nbsp;doing&nbsp;wrong&nbsp;here&nbsp;but&nbsp;I&lt;/div&gt;&lt;div&gt;don't&nbsp;see&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Daniel&lt;/div&gt;&lt;div&gt;_______________________________________________&lt;/div&gt;&lt;div&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
