<tt>
Response&nbsp;inlined:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Alan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Feb&nbsp;16,&nbsp;2012&nbsp;at&nbsp;7:13&nbsp;AM,&nbsp;Eric&nbsp;J.&nbsp;Holtman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:eric@holtmans.com&quot;&gt;eric@holtmans.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;I&amp;#39;ve&nbsp;been&nbsp;hoping&nbsp;to&nbsp;get&nbsp;rabbitmq&nbsp;integrated&nbsp;into&nbsp;some&lt;br&gt;<br>
of&nbsp;my&nbsp;applications.&nbsp; I&amp;#39;ve&nbsp;read&nbsp;a&nbsp;few&nbsp;books&nbsp;and&nbsp;web&lt;br&gt;<br>
articles.&nbsp; I&amp;#39;ve&nbsp;wrangled&nbsp;the&nbsp;source&nbsp;into&nbsp;compiling&nbsp;and&lt;br&gt;<br>
working&nbsp;under&nbsp;Windows.&nbsp; The&nbsp;examples&nbsp;run&nbsp;fine.&lt;br&gt;<br>
&lt;br&gt;<br>
I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;run&nbsp;under&nbsp;a&nbsp;multithreaded&lt;br&gt;<br>
environment.&nbsp; As&nbsp;I&nbsp;understood&nbsp;it,&nbsp;the&nbsp;whole&nbsp;point&nbsp;of&nbsp;having&lt;br&gt;<br>
a&nbsp;multiplexed&nbsp;connection&nbsp;was&nbsp;so&nbsp;that&nbsp;I&nbsp;didn&amp;#39;t&nbsp;have&nbsp;to&lt;br&gt;<br>
burn&nbsp;an&nbsp;actual&nbsp;TCP&nbsp;connection&nbsp;for&nbsp;every&nbsp;channel.&lt;br&gt;<br>
&lt;br&gt;<br>
However,&nbsp;that&nbsp;doesn&amp;#39;t&nbsp;seem&nbsp;to&nbsp;be&nbsp;how&nbsp;rabbitmq-c&nbsp;is&lt;br&gt;<br>
set&nbsp;up.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;fact,&nbsp;a&nbsp;recent&nbsp;question&nbsp;from&nbsp;the&nbsp;archives,&nbsp;answered&lt;br&gt;<br>
by&nbsp;Alan&nbsp;says:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;You&nbsp;have&nbsp;interpreted&nbsp;the&nbsp;documentation&nbsp;correctly:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;amqp_connection_state_t,&nbsp;its&nbsp;socket,&nbsp;and&nbsp;all&nbsp;associated&nbsp;amqp_channel_t&amp;#39;s&lt;br&gt;<br>
&amp;gt;&nbsp;must&nbsp;not&nbsp;be&nbsp;shared&nbsp;between&nbsp;threads.&nbsp; Its&nbsp;ok&nbsp;to&nbsp;have&nbsp;separate&nbsp;instances&nbsp;of&lt;br&gt;<br>
&amp;gt;&nbsp;these&nbsp;objects&nbsp;used&nbsp;in&nbsp;different&nbsp;threads.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;if&nbsp;I&nbsp;want&nbsp;to&nbsp;consume&nbsp;on&nbsp;4&nbsp;queues,&nbsp;and&nbsp;the&nbsp;natural&lt;br&gt;<br>
solution&nbsp;would&nbsp;be&nbsp;to&nbsp;have&nbsp;4&nbsp;threads&nbsp;doing&nbsp;a&nbsp;blocking&lt;br&gt;<br>
wait&nbsp;(like&nbsp;&amp;quot;run&amp;quot;&nbsp;in&nbsp;the&nbsp;amqp_consumer&nbsp;example),&nbsp;I&nbsp;have&lt;br&gt;<br>
to&nbsp;have&nbsp;a&nbsp;separate&nbsp;TCP&nbsp;connection&nbsp;for&nbsp;each&nbsp;one?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thats&nbsp;one&nbsp;way&nbsp;to&nbsp;do&nbsp;it.&nbsp; Another&nbsp;would&nbsp;be&nbsp;to&nbsp;a&nbsp;have&nbsp;a&nbsp;&amp;quot;connection&nbsp;thread&amp;quot;&nbsp;that&nbsp;would&nbsp;own&nbsp;the&nbsp;non-thread-safe&nbsp;objects,&nbsp;and&nbsp;would&nbsp;dispatch&nbsp;the&nbsp;messages&nbsp;to&nbsp;the&nbsp;worker&nbsp;threads.&nbsp; It&nbsp;takes&nbsp;a&nbsp;bit&nbsp;more&nbsp;code&nbsp;to&nbsp;accomplish&nbsp;it&nbsp;but&nbsp;its&nbsp;similar&nbsp;to&nbsp;how&nbsp;the&nbsp;Java&nbsp;and&nbsp;.NET&nbsp;clients&nbsp;work,&nbsp;which&nbsp;have&nbsp;a&nbsp;thread&nbsp;that&nbsp;handles&nbsp;events&nbsp;on&nbsp;a&nbsp;connection&nbsp;level,&nbsp;then&nbsp;the&nbsp;Channel&nbsp;objects&nbsp;associated&nbsp;with&nbsp;the&nbsp;Connection&nbsp;object&nbsp;can&nbsp;be&nbsp;on&nbsp;different&nbsp;threads.&lt;/div&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;I&nbsp;assume&nbsp;if&nbsp;I&amp;#39;m&nbsp;going&nbsp;to&nbsp;use&nbsp;a&nbsp;c++&nbsp;wrapper&nbsp;like&lt;br&gt;<br>
amqpcpp&nbsp;or&nbsp;rabbitcpp&nbsp;I&amp;#39;m&nbsp;going&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;issue,&lt;br&gt;<br>
since&nbsp;they&amp;#39;re&nbsp;using&nbsp;rabbitmq-c&nbsp;as&nbsp;the&nbsp;lower&nbsp;layer?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Having&nbsp;not&nbsp;used&nbsp;either&nbsp;of&nbsp;those&nbsp;C++&nbsp;wrappers&nbsp;I&nbsp;believe&nbsp;your&nbsp;assumption&nbsp;is&nbsp;correct,&nbsp;unless&nbsp;the&nbsp;implement&nbsp;their&nbsp;own&nbsp;event-loop&nbsp;or&nbsp;thread&nbsp;that&nbsp;dispatches&nbsp;consumed&nbsp;messages.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;a&nbsp;self-less&nbsp;plug,&nbsp;if&nbsp;you&amp;#39;re&nbsp;looking&nbsp;for&nbsp;a&nbsp;C++&nbsp;wrapper&nbsp;-&nbsp;I&amp;#39;d&nbsp;encourage&nbsp;you&nbsp;to&nbsp;checkout&nbsp;SimpleAmqpClient&nbsp;&lt;a&nbsp;href=&quot;https://github.com/alanxz/SimpleAmqpClient&quot;&gt;https://github.com/alanxz/SimpleAmqpClient&lt;/a&gt;,&nbsp;which&nbsp;is&nbsp;Yet&nbsp;Another&nbsp;rabbitmq-c&nbsp;wrapper.&nbsp; It&nbsp;won&amp;#39;t&nbsp;necessarily&nbsp;solve&nbsp;your&nbsp;threading&nbsp;question&nbsp;though.&lt;/div&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
&lt;br&gt;<br>
Eric&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
