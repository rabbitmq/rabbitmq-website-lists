<tt>
&lt;DIV&gt;runjava.bat&nbsp;com.rabbitmq.examples.PerfTest&nbsp;-y&nbsp;0&nbsp;-t&nbsp;&quot;fanout&quot;&lt;BR&gt;starting&nbsp;producer&nbsp;#0&lt;BR&gt;time:&nbsp;1.000s,&nbsp;sent:&nbsp;31063&nbsp;msg/s&lt;BR&gt;time:&nbsp;2.001s,&nbsp;sent:&nbsp;59184&nbsp;msg/s&lt;BR&gt;time:&nbsp;3.001s,&nbsp;sent:&nbsp;61560&nbsp;msg/s&lt;BR&gt;time:&nbsp;4.001s,&nbsp;sent:&nbsp;62564&nbsp;msg/s&lt;BR&gt;time:&nbsp;5.001s,&nbsp;sent:&nbsp;59613&nbsp;msg/s&lt;BR&gt;time:&nbsp;6.002s,&nbsp;sent:&nbsp;38134&nbsp;msg/s&lt;BR&gt;time:&nbsp;7.002s,&nbsp;sent:&nbsp;53956&nbsp;msg/s&lt;/DIV&gt;<br>
&lt;DIV&gt;connection:&nbsp;5.7MB/s,&nbsp;flow&nbsp;state&lt;BR&gt;channel:&nbsp;62,706/s,&nbsp;running&nbsp;state&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;BR&gt;runjava.bat&nbsp;com.rabbitmq.examples.PerfTest&nbsp;-y&nbsp;0&nbsp;-t&nbsp;&quot;fanout&quot;&nbsp;-s&nbsp;200&nbsp;-r&nbsp;2000&lt;BR&gt;starting&nbsp;producer&nbsp;#0&lt;BR&gt;time:&nbsp;1.000s,&nbsp;sent:&nbsp;1655&nbsp;msg/s&lt;BR&gt;time:&nbsp;2.000s,&nbsp;sent:&nbsp;2000&nbsp;msg/s&lt;BR&gt;time:&nbsp;3.000s,&nbsp;sent:&nbsp;2000&nbsp;msg/s&lt;BR&gt;time:&nbsp;4.000s,&nbsp;sent:&nbsp;2000&nbsp;msg/s&lt;BR&gt;time:&nbsp;5.000s,&nbsp;sent:&nbsp;2000&nbsp;msg/s&lt;BR&gt;time:&nbsp;6.000s,&nbsp;sent:&nbsp;2000&nbsp;msg/s&lt;BR&gt;time:&nbsp;7.000s,&nbsp;sent:&nbsp;2000&nbsp;msg/s&lt;/DIV&gt;<br>
&lt;DIV&gt;connection:&nbsp;563kB/s,&nbsp;running&nbsp;state(never&nbsp;see&nbsp;flow&nbsp;state)&lt;BR&gt;channel:&nbsp;2,000/s,&nbsp;running&nbsp;state&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;This&nbsp;is&nbsp;my&nbsp;test&nbsp;result,&nbsp;it&nbsp;really&nbsp;very&nbsp;faster&nbsp;than&nbsp;my&nbsp;applicaion.&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;use&nbsp;rabbbitmq-c(a&nbsp;c&nbsp;language&nbsp;lib),&nbsp;i&nbsp;found&nbsp;it&nbsp;demo&nbsp;is&nbsp;also&nbsp;faster&nbsp;than&nbsp;my&nbsp;app.&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;have&nbsp;add&nbsp;a&nbsp;rate&nbsp;limit&nbsp;to&nbsp;my&nbsp;app,&nbsp;my&nbsp;msg&nbsp;size&nbsp;is&nbsp;about&nbsp;100~200&nbsp;byte,&nbsp;i&nbsp;found&nbsp;if&nbsp;message&nbsp;rate&nbsp;&gt;&nbsp;2000,&nbsp;the&nbsp;connection&nbsp;is&nbsp;always&nbsp;going&nbsp;to&nbsp;flow&nbsp;state(&lt;500KB/s).&lt;/DIV&gt;<br>
&lt;DIV&gt;It&nbsp;really&nbsp;strange,&nbsp;the&nbsp;different&nbsp;my&nbsp;app&nbsp;with&nbsp;this&nbsp;demo&nbsp;is&nbsp;my&nbsp;app&nbsp;is&nbsp;a&nbsp;tcp&nbsp;client,&nbsp;it&nbsp;receive&nbsp;msg&nbsp;from&nbsp;a&nbsp;tcp&nbsp;server,&nbsp;do&nbsp;some&nbsp;convert&nbsp;and&nbsp;publish&nbsp;to&nbsp;RabbitMQ.&lt;/DIV&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:&nbsp;12px;font-family:&nbsp;Arial&nbsp;Narrow;padding:2px&nbsp;0&nbsp;2px&nbsp;0;&quot;&gt;------------------&nbsp;Original&nbsp;message&nbsp;------------------&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:&nbsp;12px;background:#efefef;padding:8px;&quot;&gt;&lt;div&gt;&lt;b&gt;From:&lt;/b&gt;&nbsp;&quot;Michael&nbsp;Klishin&quot;&lt;mklishin@gopivotal.com&gt;;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Sendtime:&lt;/b&gt;&nbsp;Tuesday,&nbsp;Jul&nbsp;8,&nbsp;2014&nbsp;6:07&nbsp;PM&lt;/div&gt;&lt;div&gt;&lt;b&gt;To:&lt;/b&gt;&nbsp;&quot;Lost&quot;&lt;w_pg@qq.com&gt;;&nbsp;&quot;rabbitmq-discuss&quot;&lt;rabbitmq-discuss@lists.rabbitmq.com&gt;;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Subject:&lt;/b&gt;&nbsp;Re:&nbsp;[rabbitmq-discuss]&nbsp;Connection&nbsp;is&nbsp;always&nbsp;in&nbsp;&quot;flow&quot;&nbsp;State.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;On&nbsp;8&nbsp;July&nbsp;2014&nbsp;at&nbsp;13:39:59,&nbsp;Lost&nbsp;(&lt;A&nbsp;href=&quot;mailto:w_pg@qq.com&quot;&nbsp;target=_blank&gt;w_pg@qq.com&lt;/A&gt;)&nbsp;wrote:&lt;BR&gt;&gt;&nbsp;&gt;&nbsp;Yes,&nbsp;just&nbsp;one&nbsp;connection,&nbsp;one&nbsp;channel&nbsp;and&nbsp;publish&nbsp;to&nbsp;a&nbsp;exchange(no&nbsp;&lt;BR&gt;&gt;&nbsp;any&nbsp;queues&nbsp;to&nbsp;bind&nbsp;it.)&lt;BR&gt;&lt;BR&gt;You&nbsp;can&nbsp;simulate&nbsp;this&nbsp;setup&nbsp;with&nbsp;PerfTest&nbsp;[1]:&lt;BR&gt;&lt;BR&gt;./runjava.sh&nbsp;com.rabbitmq.examples.PerfTest&nbsp;-y&nbsp;0&nbsp;-t&nbsp;&quot;fanout&quot;&lt;BR&gt;&lt;BR&gt;and&nbsp;tweak&nbsp;various&nbsp;options&nbsp;such&nbsp;as&nbsp;message&nbsp;size.&lt;BR&gt;&lt;BR&gt;For&nbsp;example,&nbsp;running&nbsp;PerfTest&nbsp;with&nbsp;the&nbsp;options&nbsp;above&nbsp;stabilizes&lt;BR&gt;at&nbsp;about&nbsp;65-70&nbsp;K&nbsp;messages&nbsp;per&nbsp;second&nbsp;on&nbsp;my&nbsp;(1&nbsp;gen&nbsp;old,&nbsp;not&nbsp;maxed-out)&lt;BR&gt;MacBook&nbsp;Pro.&lt;BR&gt;&lt;BR&gt;1.&nbsp;&lt;A&nbsp;href=&quot;http://www.rabbitmq.com/java-tools.html&quot;&nbsp;target=_blank&gt;http://www.r&lt;WBR&gt;abbitmq.com/&lt;WBR&gt;java-tools.h&lt;WBR&gt;tml&lt;/A&gt;&lt;BR&gt;--&lt;BR&gt;MK&nbsp;&lt;BR&gt;&lt;BR&gt;Staff&nbsp;Software&nbsp;Engineer,&nbsp;Pivotal/RabbitMQ
</tt>
