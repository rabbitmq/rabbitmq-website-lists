<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi&nbsp;Eric,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;insight&nbsp;Tim.&nbsp;I&nbsp;ended&nbsp;up&nbsp;killing&nbsp;the&nbsp;the&nbsp;process&nbsp;before&nbsp;receiving&nbsp;your&nbsp;email&nbsp;so&nbsp;I&nbsp;was&nbsp;unable&nbsp;to&nbsp;take&nbsp;advantage&nbsp;of&nbsp;your&nbsp;pro&nbsp;tips.&nbsp;We&nbsp;subsequently&nbsp;upgraded&nbsp;our&nbsp;cluster&nbsp;to&nbsp;3.1.0&nbsp;on&nbsp;Erlang&nbsp;R15B03,&nbsp;and&nbsp;have&nbsp;run&nbsp;into&nbsp;a&nbsp;slightly&nbsp;different&nbsp;problem.&nbsp;This&nbsp;appears&nbsp;to&nbsp;be&nbsp;unrelated,&nbsp;but&nbsp;I&nbsp;did&nbsp;use&nbsp;your&nbsp;tips&nbsp;to&nbsp;gather&nbsp;as&nbsp;much&nbsp;information&nbsp;as&nbsp;possible.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Scenario:&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;producer&nbsp;is&nbsp;sending&nbsp;messages&nbsp;to&nbsp;rabbit&nbsp;faster&nbsp;than&nbsp;they&nbsp;can&nbsp;be&nbsp;routed&nbsp;so&nbsp;the&nbsp;connection&nbsp;goes&nbsp;under&nbsp;flow&nbsp;control.&nbsp;The&nbsp;flow&nbsp;control&nbsp;lasts&nbsp;long&nbsp;enough&nbsp;so&nbsp;that&nbsp;our&nbsp;load&nbsp;balancer&nbsp;severs&nbsp;the&nbsp;connection.&nbsp;Before&nbsp;we&nbsp;understood&nbsp;that&nbsp;the&nbsp;LB&nbsp;was&nbsp;our&nbsp;problem&nbsp;we&nbsp;would&nbsp;just&nbsp;retry&nbsp;socket&nbsp;write&nbsp;up&nbsp;to&nbsp;10&nbsp;times&nbsp;before&nbsp;throwing&nbsp;an&nbsp;exception.&nbsp;In&nbsp;the&nbsp;end,&nbsp;our&nbsp;cluster&nbsp;now&nbsp;has&nbsp;0&nbsp;connections&nbsp;yet&nbsp;it&nbsp;still&nbsp;has&nbsp;nearly&nbsp;4000&nbsp;channels&nbsp;(screen&nbsp;grab&nbsp;attached).&nbsp;Also,&nbsp;now&nbsp;I&nbsp;am&nbsp;unable&nbsp;to&nbsp;stop_app&nbsp;on&nbsp;any&nbsp;node&nbsp;in&nbsp;the&nbsp;cluster&nbsp;without&nbsp;it&nbsp;hanging&nbsp;for,&nbsp;at&nbsp;this&nbsp;point,&nbsp;over&nbsp;an&nbsp;hour.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&nbsp;looks&nbsp;and&nbsp;sounds&nbsp;like&nbsp;a&nbsp;seriously&nbsp;unhappy&nbsp;Rabbit&nbsp;-&nbsp;I'm&nbsp;very&nbsp;concerned,&nbsp;especially&nbsp;about&nbsp;those&nbsp;open&nbsp;channels,&nbsp;but&nbsp;it's&nbsp;quite&nbsp;late,&nbsp;so&nbsp;I'll&nbsp;need&nbsp;to&nbsp;get&nbsp;into&nbsp;this&nbsp;properly&nbsp;in&nbsp;the&nbsp;morning.&nbsp;For&nbsp;the&nbsp;time&nbsp;being&nbsp;though,&nbsp;it&nbsp;looks&nbsp;a&nbsp;lot&nbsp;like&nbsp;something&nbsp;has&nbsp;gone&nbsp;horribly&nbsp;wrong&nbsp;with&nbsp;your&nbsp;Erlang&nbsp;installation.&nbsp;What&nbsp;happens&nbsp;if&nbsp;you&nbsp;start&nbsp;up&nbsp;Erlang&nbsp;by&nbsp;itself,&nbsp;using&nbsp;`erl&nbsp;-sname&nbsp;test`&nbsp;-&nbsp;do&nbsp;you&nbsp;still&nbsp;see&nbsp;all&nbsp;those&nbsp;screwy&nbsp;warnings?&nbsp;It&nbsp;seems&nbsp;as&nbsp;though&nbsp;the&nbsp;emulator's&nbsp;code&nbsp;server&nbsp;is&nbsp;unable&nbsp;to&nbsp;read&nbsp;from&nbsp;the&nbsp;file&nbsp;system&nbsp;-&nbsp;this&nbsp;could&nbsp;be&nbsp;due&nbsp;to&nbsp;a&nbsp;change&nbsp;in&nbsp;permissions&nbsp;somewhere&nbsp;on&nbsp;the&nbsp;host's&nbsp;file&nbsp;system,&nbsp;*or*&nbsp;it&nbsp;could&nbsp;be&nbsp;that&nbsp;you're&nbsp;running&nbsp;the&nbsp;`erl&nbsp;-sname&nbsp;debug&nbsp;-remsh&nbsp;rabbit@rabbit-box`&nbsp;command&nbsp;from&nbsp;a&nbsp;user&nbsp;account&nbsp;with&nbsp;insufficient&nbsp;permissions.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;you&nbsp;run&nbsp;`lsof`&nbsp;and&nbsp;let&nbsp;us&nbsp;know&nbsp;what&nbsp;the&nbsp;hosts&nbsp;use&nbsp;of&nbsp;file&nbsp;descriptors&nbsp;looks&nbsp;like&nbsp;please.&nbsp;A&nbsp;Rabbit&nbsp;should&nbsp;never&nbsp;have&nbsp;open&nbsp;channels&nbsp;that&nbsp;aren't&nbsp;tied&nbsp;to&nbsp;a&nbsp;connection.&nbsp;It&nbsp;looks&nbsp;to&nbsp;me&nbsp;like&nbsp;your&nbsp;rabbit&nbsp;is&nbsp;stuck&nbsp;either&nbsp;starting&nbsp;up&nbsp;or&nbsp;shutting&nbsp;down&nbsp;-&nbsp;that's&nbsp;why&nbsp;the&nbsp;application&nbsp;controller&nbsp;isn't&nbsp;responding&nbsp;to&nbsp;calls&nbsp;(or&nbsp;is&nbsp;timing&nbsp;out).&nbsp;In&nbsp;fact,&nbsp;general&nbsp;stats&nbsp;about&nbsp;the&nbsp;state&nbsp;of&nbsp;your&nbsp;OS&nbsp;would&nbsp;be&nbsp;really&nbsp;useful&nbsp;-&nbsp;file&nbsp;descriptor&nbsp;usage,&nbsp;current&nbsp;disk&nbsp;io,&nbsp;cpu&nbsp;and&nbsp;memory&nbsp;use&nbsp;would&nbsp;all&nbsp;help.&nbsp;If&nbsp;you've&nbsp;got&nbsp;historic&nbsp;data&nbsp;about&nbsp;these&nbsp;too,&nbsp;especially&nbsp;around&nbsp;the&nbsp;time&nbsp;of&nbsp;your&nbsp;traffic&nbsp;spike,&nbsp;all&nbsp;the&nbsp;better.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;would&nbsp;be&nbsp;*very*&nbsp;helpful&nbsp;if&nbsp;you'd&nbsp;be&nbsp;able&nbsp;to&nbsp;grant&nbsp;us&nbsp;ssh&nbsp;access&nbsp;to&nbsp;this&nbsp;machine&nbsp;-&nbsp;we&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;sign&nbsp;some&nbsp;legal&nbsp;stuff&nbsp;if&nbsp;that&nbsp;helps.&nbsp;Without&nbsp;access&nbsp;to&nbsp;the&nbsp;machine,&nbsp;the&nbsp;diagnostic&nbsp;process&nbsp;is&nbsp;going&nbsp;to&nbsp;involve&nbsp;a&nbsp;fair&nbsp;bit&nbsp;of&nbsp;to-ing&nbsp;and&nbsp;fro-ing.&nbsp;We&nbsp;could&nbsp;make&nbsp;use&nbsp;of&nbsp;IM/IRC&nbsp;if&nbsp;that&nbsp;helps&nbsp;too.&nbsp;Drop&nbsp;me&nbsp;a&nbsp;note&nbsp;and&nbsp;let&nbsp;me&nbsp;know&nbsp;what's&nbsp;likely&nbsp;to&nbsp;work&nbsp;best&nbsp;for&nbsp;you.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;clarify&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Questions:&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;Should&nbsp;rabbit&nbsp;maintain&nbsp;channels&nbsp;without&nbsp;active&nbsp;connections?&nbsp;If&nbsp;not,&nbsp;has&nbsp;anyone&nbsp;run&nbsp;into&nbsp;this&nbsp;before?&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;No,&nbsp;never.&nbsp;I've&nbsp;not&nbsp;seen&nbsp;this&nbsp;one&nbsp;before,&nbsp;but&nbsp;I'll&nbsp;do&nbsp;some&nbsp;archeology&nbsp;in&nbsp;our&nbsp;bug&nbsp;tracker&nbsp;and&nbsp;the&nbsp;mailing&nbsp;list&nbsp;to&nbsp;see&nbsp;if&nbsp;there's&nbsp;anything&nbsp;that&nbsp;might&nbsp;help.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;2.&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;force&nbsp;kill&nbsp;these&nbsp;channels?&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;do&nbsp;that,&nbsp;but&nbsp;TBH&nbsp;the&nbsp;state&nbsp;your&nbsp;rabbit&nbsp;is&nbsp;in,&nbsp;I&nbsp;think&nbsp;it'll&nbsp;need&nbsp;to&nbsp;be&nbsp;killed.&nbsp;BUT&nbsp;PLEASE&nbsp;don't&nbsp;do&nbsp;that.&nbsp;It's&nbsp;really&nbsp;important&nbsp;that&nbsp;we&nbsp;understand&nbsp;how&nbsp;your&nbsp;system&nbsp;got&nbsp;into&nbsp;this&nbsp;state,&nbsp;because&nbsp;it&nbsp;represents&nbsp;a&nbsp;really&nbsp;nasty&nbsp;bug&nbsp;that&nbsp;we&nbsp;should&nbsp;fix&nbsp;asap,&nbsp;and&nbsp;having&nbsp;a&nbsp;running&nbsp;Rabbit&nbsp;in&nbsp;this&nbsp;state&nbsp;represents&nbsp;our&nbsp;best&nbsp;chance&nbsp;at&nbsp;understanding&nbsp;what's&nbsp;going&nbsp;on..&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;3.&nbsp;Is&nbsp;it&nbsp;a&nbsp;good&nbsp;practice&nbsp;for&nbsp;consumers&nbsp;to&nbsp;connect&nbsp;to&nbsp;rabbit&nbsp;via&nbsp;a&nbsp;load&nbsp;balancer,&nbsp;or&nbsp;should&nbsp;that&nbsp;be&nbsp;for&nbsp;producers&nbsp;only?&nbsp;Are&nbsp;there&nbsp;any&nbsp;recommended&nbsp;timeout&nbsp;settings?&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;use&nbsp;a&nbsp;LB&nbsp;for&nbsp;either&nbsp;kind&nbsp;of&nbsp;client,&nbsp;the&nbsp;choice&nbsp;of&nbsp;timeout&nbsp;should&nbsp;be&nbsp;application&nbsp;and&nbsp;infrastructure&nbsp;dependent&nbsp;-&nbsp;i.e.,&nbsp;whatever&nbsp;makes&nbsp;sense&nbsp;for&nbsp;your&nbsp;use&nbsp;case&nbsp;-&nbsp;and&nbsp;doing&nbsp;so&nbsp;should&nbsp;*not*&nbsp;get&nbsp;you&nbsp;into&nbsp;this&nbsp;state,&nbsp;ever.&nbsp;We&nbsp;*will*&nbsp;find&nbsp;out&nbsp;what's&nbsp;gone&nbsp;on&nbsp;here&nbsp;and&nbsp;fix&nbsp;it,&nbsp;asap.&nbsp;The&nbsp;*only*&nbsp;caveat&nbsp;here&nbsp;is&nbsp;that,&nbsp;if&nbsp;something&nbsp;catastrophic&nbsp;has&nbsp;gone&nbsp;wrong&nbsp;with&nbsp;our&nbsp;host&nbsp;machine&nbsp;(e.g.,&nbsp;the&nbsp;file&nbsp;system&nbsp;has&nbsp;bombed&nbsp;out,&nbsp;or&nbsp;something&nbsp;like&nbsp;that)&nbsp;then&nbsp;it&nbsp;might&nbsp;be&nbsp;that&nbsp;no&nbsp;application&nbsp;would&nbsp;stand&nbsp;any&nbsp;chance&nbsp;of&nbsp;surviving&nbsp;intact,&nbsp;but&nbsp;we&nbsp;need&nbsp;to&nbsp;understand&nbsp;what's&nbsp;gone&nbsp;on&nbsp;here&nbsp;either&nbsp;way.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Tim&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;16&nbsp;May&nbsp;2013,&nbsp;at&nbsp;20:09,&nbsp;Eric&nbsp;Berg&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;are&nbsp;the&nbsp;results&nbsp;of&nbsp;some&nbsp;commands&nbsp;on&nbsp;the&nbsp;shell&nbsp;to&nbsp;the&nbsp;broker:&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;bash-4.1$&nbsp;erl&nbsp;-sname&nbsp;debug&nbsp;-remsh&nbsp;rabbit@rabbit-box&lt;br&gt;{error_logger,{{2013,5,16},{14,44,36}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;..&nbsp;Function:&nbsp;read_file_info.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./beam_lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./ram_file.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./standard_error.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./supervisor_bridge.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./user_sup.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./user_drv.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./group.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./edlin.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./io_lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./proplists.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./io_lib_format.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
Erlang&nbsp;R15B03&nbsp;(erts-5.9.3.1)&nbsp;[source]&nbsp;[64-bit]&nbsp;[smp:16:16]&nbsp;[async-threads:0]&nbsp;[hipe]&nbsp;[kernel-poll:false]&lt;br&gt;&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./net.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./inet_gethost_native.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;{error_logger,{{2013,5,16},{14,44,37}},std_error,&quot;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./kernel_config.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&quot;}&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:36&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;..&nbsp;Function:&nbsp;read_file_info.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./beam_lib.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./ram_file.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./standard_error.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./supervisor_bridge.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./user_sup.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./user_drv.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./group.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./edlin.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::10:44:37&nbsp;===&lt;br&gt;{lost_messages,6}&lt;br&gt;&lt;br&gt;<br>
=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./error_logger_tty_h.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./calendar.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./io_lib_pretty.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./io.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./erl_scan.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./c.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./erl_eval.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./orddict.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./file_io_server.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./erl_posix_msg.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;file:path_eval([&quot;.&quot;,&quot;/var/lib/rabbitmq&quot;],&quot;.erlang&quot;):&nbsp;permission&nbsp;denied&lt;br&gt;&lt;br&gt;=ERROR&nbsp;REPORT====&nbsp;16-May-2013::14:44:37&nbsp;===&lt;br&gt;File&nbsp;operation&nbsp;error:&nbsp;eacces.&nbsp;Target:&nbsp;./dist_util.beam.&nbsp;Function:&nbsp;get_file.&nbsp;Process:&nbsp;code_server.&lt;br&gt;<br>
Eshell&nbsp;V5.9.3.1&amp;nbsp;&nbsp;(abort&nbsp;with&nbsp;^G)&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------------------&lt;br&gt;&lt;br&gt;(rabbit@rabbit-box)1&amp;gt;&nbsp;whereis(rabbit).&lt;br&gt;&amp;lt;0.251.0&amp;gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;-------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;(rabbit@rabbit-box)2&amp;gt;&nbsp;application:loaded_applications().&lt;br&gt;[{public_key,&quot;Public&nbsp;key&nbsp;infrastructure&quot;,&quot;0.17&quot;},&lt;br&gt;&amp;nbsp;{rabbitmq_management_agent,&quot;RabbitMQ&nbsp;Management&nbsp;Agent&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;3.1.0&quot;},&lt;br&gt;<br>
&amp;nbsp;{os_mon,&quot;CPO&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.10&quot;},&lt;br&gt;&amp;nbsp;{amqp_client,&quot;RabbitMQ&nbsp;AMQP&nbsp;Client&quot;,&quot;3.1.0&quot;},&lt;br&gt;&amp;nbsp;{mnesia,&quot;MNESIA&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;12&quot;,&quot;4.7.1&quot;},&lt;br&gt;&amp;nbsp;{rabbitmq_shovel,&quot;Data&nbsp;Shovel&nbsp;for&nbsp;RabbitMQ&quot;,&quot;3.1.0&quot;},&lt;br&gt;<br>
&amp;nbsp;{inets,&quot;INETS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;49&quot;,&quot;5.9.2&quot;},&lt;br&gt;&amp;nbsp;{rabbitmq_federation,&quot;RabbitMQ&nbsp;Federation&quot;,&quot;3.1.0&quot;},&lt;br&gt;&amp;nbsp;{rabbitmq_web_dispatch,&quot;RabbitMQ&nbsp;Web&nbsp;Dispatcher&quot;,&quot;3.1.0&quot;},&lt;br&gt;<br>
&amp;nbsp;{rabbitmq_federation_management,&quot;RabbitMQ&nbsp;Federation&nbsp;Management&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;3.1.0&quot;},&lt;br&gt;&amp;nbsp;{rabbitmq_management_visualiser,&quot;RabbitMQ&nbsp;Visualiser&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;3.1.0&quot;},&lt;br&gt;<br>
&amp;nbsp;{kernel,&quot;ERTS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;2.15.3&quot;},&lt;br&gt;&amp;nbsp;{crypto,&quot;CRYPTO&nbsp;version&nbsp;2&quot;,&quot;2.2&quot;},&lt;br&gt;&amp;nbsp;{ssl,&quot;Erlang/OTP&nbsp;SSL&nbsp;application&quot;,&quot;5.1.2&quot;},&lt;br&gt;&amp;nbsp;{sasl,&quot;SASL&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;11&quot;,&quot;2.2.1&quot;},&lt;br&gt;<br>
&amp;nbsp;{rabbitmq_management,&quot;RabbitMQ&nbsp;Management&nbsp;Console&quot;,&quot;3.1.0&quot;},&lt;br&gt;&amp;nbsp;{mochiweb,&quot;MochiMedia&nbsp;Web&nbsp;Server&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&quot;2.3.1-rmq3.1.0-gitd541e9a&quot;},&lt;br&gt;&amp;nbsp;{xmerl,&quot;XML&nbsp;parser&quot;,&quot;1.3.2&quot;},&lt;br&gt;<br>
&amp;nbsp;{rabbit,&quot;RabbitMQ&quot;,&quot;3.1.0&quot;},&lt;br&gt;&amp;nbsp;{stdlib,&quot;ERTS&amp;nbsp;&nbsp;CXC&nbsp;138&nbsp;10&quot;,&quot;1.18.3&quot;},&lt;br&gt;&amp;nbsp;{webmachine,&quot;webmachine&quot;,&quot;1.9.1-rmq3.1.0-git52e62bc&quot;}]&lt;br&gt;&lt;br&gt;&lt;br&gt;------------------------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;(rabbit@rabbit-box)3&amp;gt;&nbsp;application:which_applications().&nbsp;&lt;br&gt;**&nbsp;exception&nbsp;exit:&nbsp;{timeout,{gen_server,call,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;[application_controller,which_applications]}}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;in&nbsp;function&amp;nbsp;&nbsp;gen_server:call/2&nbsp;(gen_server.erl,&nbsp;line&nbsp;180)&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;-----------------------------------------------------------------------------------&lt;br&gt;&lt;br&gt;(rabbit@rabbit-box)4&amp;gt;&nbsp;rabbit:stop().&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&nbsp;This&nbsp;hangs&nbsp;indefinitely&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;------------------------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Perms&nbsp;on&nbsp;/var/lib/rabbitmq&lt;br&gt;drwxr-xr-x&amp;nbsp;&nbsp;3&nbsp;rabbitmq&nbsp;rabbitmq&nbsp;4096&nbsp;May&amp;nbsp;&nbsp;1&nbsp;07:15&nbsp;rabbitmq&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;Tim&nbsp;et&nbsp;al.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;Thu,&nbsp;May&nbsp;9,&nbsp;2013&nbsp;at&nbsp;10:00&nbsp;AM,&nbsp;Tim&nbsp;Watson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tim@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;tim@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;8&nbsp;May&nbsp;2013,&nbsp;at&nbsp;18:22,&nbsp;Eric&nbsp;Berg&nbsp;wrote:&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;have&nbsp;ready&nbsp;through&nbsp;many&nbsp;of&nbsp;these&nbsp;nodedown&nbsp;error&nbsp;emails&nbsp;and&nbsp;of&nbsp;course&nbsp;none&nbsp;of&nbsp;them&nbsp;seem&nbsp;to&nbsp;be&nbsp;exactly&nbsp;what&nbsp;I&nbsp;am&nbsp;experiencing.&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;4&nbsp;node&nbsp;cluster,&nbsp;and&nbsp;one&nbsp;of&nbsp;the&nbsp;nodes&nbsp;went&nbsp;offline&nbsp;according&nbsp;to&nbsp;the&nbsp;cluster.&nbsp;This&nbsp;box&nbsp;has&nbsp;the&nbsp;following&nbsp;in&nbsp;the&nbsp;sasl&nbsp;log:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;=SUPERVISOR&nbsp;REPORT====&nbsp;7-May-2013::14:37:22&nbsp;===&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Supervisor:&nbsp;{&amp;lt;0.11197.1096&amp;gt;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;rabbit_channel_sup_sup}&lt;/div&gt;&lt;div&gt;<br>
&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Context:&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;shutdown_error&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Reason:&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;noproc&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;Offender:&nbsp;&amp;nbsp;&nbsp;[{pid,&amp;lt;0.11199.1096&amp;gt;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{name,channel_sup},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{mfa,{rabbit_channel_sup,start_link,[]}},&lt;/div&gt;<br>
<br>
&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{restart_type,temporary},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{shutdown,infinity},&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;{child_type,supervisor}]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;simply&nbsp;indicates&nbsp;that&nbsp;and&nbsp;error&nbsp;occurred&nbsp;whilst&nbsp;a&nbsp;supervised&nbsp;process&nbsp;was&nbsp;shutting&nbsp;down.&nbsp;It's&nbsp;not&nbsp;indicative&nbsp;of&nbsp;the&nbsp;whole&nbsp;node&nbsp;going&nbsp;down&nbsp;-&nbsp;Erlang&nbsp;allows&nbsp;processes&nbsp;to&nbsp;crash&nbsp;and&nbsp;be&nbsp;restarted&nbsp;whilst&nbsp;the&nbsp;system&nbsp;is&nbsp;running.&lt;/div&gt;<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;Yet&nbsp;in&nbsp;the&nbsp;regular&nbsp;rabbit&nbsp;log&nbsp;i&nbsp;can&nbsp;see&nbsp;that&nbsp;it&nbsp;was&nbsp;still&nbsp;accepting&nbsp;connections&nbsp;up&nbsp;until&nbsp;2:22AM&nbsp;the&nbsp;next&nbsp;day:&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(last&nbsp;log&nbsp;entry)&lt;/div&gt;&lt;div&gt;&lt;div&gt;=INFO&nbsp;REPORT====&nbsp;8-May-2013::02:22:26&nbsp;===&lt;/div&gt;&lt;div&gt;closing&nbsp;AMQP&nbsp;connection&nbsp;&amp;lt;0.18267.1145&amp;gt;&nbsp;(IPADDRESS:PORT&nbsp;-&amp;gt;&amp;nbsp;IPADDRESS:PORT)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;clearly&nbsp;that&nbsp;node&nbsp;didn't&nbsp;actually&nbsp;go&nbsp;offline.&nbsp;The&nbsp;'nodedown'&nbsp;message&nbsp;in&nbsp;the&nbsp;other&nbsp;clustered&nbsp;broker's&nbsp;logs&nbsp;does&nbsp;not&nbsp;necessarily&nbsp;mean&nbsp;that&nbsp;the&nbsp;node&nbsp;in&nbsp;question&nbsp;crashed;&nbsp;This&nbsp;could,&nbsp;for&nbsp;example,&nbsp;be&nbsp;indicative&nbsp;of&nbsp;a&nbsp;net-split&nbsp;or&nbsp;other&nbsp;connectivity&nbsp;failure.&amp;nbsp;&lt;/div&gt;<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;<br>
&lt;div&gt;&lt;b&gt;Running&nbsp;rabbitmqctl&nbsp;status&nbsp;returns:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;[root@rabbit-box&amp;nbsp;rabbitmq]#&nbsp;rabbitmqctl&nbsp;status&lt;/div&gt;&lt;div&gt;Status&nbsp;of&nbsp;node&nbsp;'rabbit@rabbit-box'&nbsp;...&lt;/div&gt;&lt;div&gt;Error:&nbsp;unable&nbsp;to&nbsp;connect&nbsp;to&nbsp;node&nbsp;'rabbit@rabbit-box':&nbsp;nodedown&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;DIAGNOSTICS&lt;/div&gt;&lt;div&gt;===========&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;nodes&nbsp;in&nbsp;question:&nbsp;['rabbit@rabbit-box']&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;hosts,&nbsp;their&nbsp;running&nbsp;nodes&nbsp;and&nbsp;ports:&lt;/div&gt;&lt;div&gt;-&amp;nbsp;rabbit-box:&nbsp;[{rabbit,13957},{rabbitmqctl2301,16508}]&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;current&nbsp;node&nbsp;details:&lt;/div&gt;&lt;div&gt;-&nbsp;node&nbsp;name:&nbsp;'rabbitmqctl2301@rabbit-box'&lt;/div&gt;&lt;div&gt;-&nbsp;home&nbsp;dir:&nbsp;/var/lib/rabbitmq&lt;/div&gt;&lt;div&gt;-&nbsp;cookie&nbsp;hash:&nbsp;qQwyFW90ZNbbrFvX1AtrxQ==&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Have&nbsp;you&nbsp;tried&nbsp;running&nbsp;this&nbsp;using&nbsp;`sudo'&nbsp;instead&nbsp;of&nbsp;as&nbsp;root?&nbsp;Is&nbsp;the&nbsp;rabbitmq&nbsp;user's&nbsp;account&nbsp;and&nbsp;home&nbsp;folder&nbsp;in&nbsp;a&nbsp;consistent&nbsp;state?&nbsp;The&nbsp;security&nbsp;cookie&nbsp;used&nbsp;for&nbsp;inter-node&nbsp;communications,&nbsp;which&nbsp;includes&nbsp;communication&nbsp;between&nbsp;the&nbsp;temporary&nbsp;`rabbitmqctl'&nbsp;node&nbsp;and&nbsp;the&nbsp;broker,&nbsp;has&nbsp;to&nbsp;be&nbsp;the&nbsp;same&nbsp;for&nbsp;all&nbsp;the&nbsp;peers.&lt;/div&gt;<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;A&nbsp;couple&nbsp;of&nbsp;notes:&lt;/div&gt;&lt;div&gt;-&nbsp;Looking&nbsp;for&nbsp;a&nbsp;process&nbsp;run&nbsp;by&nbsp;rabbit&nbsp;show&nbsp;that&nbsp;it&nbsp;appears&nbsp;to&nbsp;still&nbsp;be&nbsp;running&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;Yes&nbsp;-&nbsp;as&nbsp;I&nbsp;said,&nbsp;there's&nbsp;no&nbsp;indication&nbsp;that&nbsp;this&nbsp;node&nbsp;actually&nbsp;died&nbsp;from&nbsp;what&nbsp;you've&nbsp;said.&nbsp;However&nbsp;`rabbitmqctl`&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;connect&nbsp;to&nbsp;rabbit@rabbit-box&nbsp;at&nbsp;the&nbsp;very&nbsp;least.&amp;nbsp;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;-&nbsp;Erlang&nbsp;cookie&nbsp;is&nbsp;the&nbsp;same&nbsp;on&nbsp;all&nbsp;nodes&nbsp;of&nbsp;the&nbsp;cluster,&nbsp;the&nbsp;cookie&nbsp;hash&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;well&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;it's&nbsp;not&nbsp;the&nbsp;cookies&nbsp;then....&lt;/div&gt;<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;-&nbsp;A&nbsp;traffic&nbsp;spike&nbsp;occurred&nbsp;right&nbsp;around&nbsp;the&nbsp;time&nbsp;of&nbsp;the&nbsp;last&nbsp;entry&nbsp;in&nbsp;the&nbsp;rabbit&nbsp;log&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;sounds&nbsp;like&nbsp;this&nbsp;could&nbsp;be&nbsp;a&nbsp;potential&nbsp;culprit.&nbsp;Can&nbsp;you&nbsp;provide&nbsp;any&nbsp;more&nbsp;information&nbsp;about&nbsp;what&nbsp;happened?&nbsp;It&nbsp;could&nbsp;be&nbsp;that&nbsp;whilst&nbsp;the&nbsp;network&nbsp;was&nbsp;saturated,&nbsp;the&nbsp;node&nbsp;in&nbsp;question&nbsp;got&nbsp;disconnected&nbsp;from&nbsp;the&nbsp;other&nbsp;nodes&nbsp;in&nbsp;the&nbsp;cluster&nbsp;because&nbsp;it&nbsp;exceeded&nbsp;the&nbsp;&quot;net&nbsp;tick&nbsp;time&quot;&nbsp;and&nbsp;subsequently&nbsp;things&nbsp;have&nbsp;started&nbsp;to&nbsp;go&nbsp;wrong.&nbsp;That&nbsp;shouldn't&nbsp;happen,&nbsp;viz&nbsp;the&nbsp;node&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;re-establish&nbsp;connectivity,&nbsp;but&nbsp;it's&nbsp;possible&nbsp;that&nbsp;something's&nbsp;gone&nbsp;wrong&nbsp;here.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;that&nbsp;doesn't&nbsp;explain&nbsp;is&nbsp;why&nbsp;you&nbsp;can't&nbsp;connect&nbsp;from&nbsp;rabbitmqctl.&nbsp;If&nbsp;you&nbsp;`su&nbsp;rabbitmq',&nbsp;can&nbsp;you&nbsp;then&nbsp;run&nbsp;`erl&nbsp;-sname&nbsp;debug&nbsp;-remsh&nbsp;rabbit@rabbit-box'&nbsp;to&nbsp;establish&nbsp;a&nbsp;shell&nbsp;into&nbsp;the&nbsp;running&nbsp;broker?&nbsp;If&nbsp;that&nbsp;does&nbsp;work,&nbsp;then&nbsp;you&nbsp;can&nbsp;stop&nbsp;the&nbsp;rabbit&nbsp;application&nbsp;and&nbsp;then&nbsp;the&nbsp;node,&nbsp;as&nbsp;follows:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;gt;&nbsp;rabbit:stop().&lt;/div&gt;&lt;div&gt;ok&lt;/div&gt;&lt;div&gt;&amp;gt;&nbsp;init:stop().&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;before&nbsp;you&nbsp;do,&nbsp;it&nbsp;might&nbsp;be&nbsp;worth&nbsp;evaluating&nbsp;a&nbsp;couple&nbsp;of&nbsp;other&nbsp;things&nbsp;that&nbsp;might&nbsp;help&nbsp;us&nbsp;identify&nbsp;what's&nbsp;going&nbsp;on:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(rabbit@iske)1&amp;gt;&nbsp;whereis(rabbit).&lt;/div&gt;&lt;div&gt;&amp;lt;0.152.0&amp;gt;&lt;/div&gt;&lt;div&gt;(rabbit@iske)2&amp;gt;&nbsp;application:loaded_applications().&lt;/div&gt;&lt;div&gt;[{os_mon,&quot;CPO&nbsp;&amp;nbsp;CXC&nbsp;138&nbsp;46&quot;,&quot;2.2.9&quot;},&lt;/div&gt;&lt;div&gt;<br>
&amp;nbsp;{rabbitmq_management_agent,&quot;RabbitMQ&nbsp;Management&nbsp;Agent&quot;,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&quot;0.0.0&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;{amqp_client,&quot;RabbitMQ&nbsp;AMQP&nbsp;Client&quot;,&quot;0.0.0&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;etc&nbsp;...&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;]&lt;/div&gt;&lt;div&gt;(rabbit@iske)3&amp;gt;&nbsp;application:which_applications().&amp;nbsp;&lt;/div&gt;&lt;div&gt;[{rabbitmq_shovel_management,&quot;Shovel&nbsp;Status&quot;,&quot;0.0.0&quot;},&lt;/div&gt;&lt;div&gt;&amp;nbsp;etc&nbsp;...&lt;/div&gt;&lt;div&gt;]&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;If&nbsp;during&nbsp;any&nbsp;of&nbsp;these&nbsp;you&nbsp;get&nbsp;stuck,&nbsp;CTRL-C&nbsp;(and&nbsp;press&nbsp;the&nbsp;key&nbsp;for&nbsp;'abort')&nbsp;should&nbsp;get&nbsp;you&nbsp;back&nbsp;out&nbsp;again&nbsp;without&nbsp;incident.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;-&nbsp;I&nbsp;can&nbsp;find&nbsp;no&nbsp;other&nbsp;errors&nbsp;in&nbsp;any&nbsp;logs&nbsp;that&nbsp;relate&nbsp;to&nbsp;rabbit&nbsp;or&nbsp;erlang&lt;/div&gt;&lt;div&gt;-&nbsp;Up&nbsp;until&nbsp;this&nbsp;point&nbsp;the&nbsp;cluster&nbsp;has&nbsp;been&nbsp;running&nbsp;fine&nbsp;for&nbsp;over&nbsp;40&nbsp;days.&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;-&amp;nbsp;telnet&nbsp;IP_ADDRESS&nbsp;5672&nbsp;times&nbsp;out&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;the&nbsp;broker&nbsp;is&nbsp;no&nbsp;longer&nbsp;accepting&nbsp;new&nbsp;AMQP&nbsp;connections&nbsp;then.&nbsp;Something's&nbsp;clearly&nbsp;quite&nbsp;wrong&nbsp;with&nbsp;this&nbsp;node.&lt;/div&gt;<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;-&nbsp;I&nbsp;have&nbsp;not&nbsp;restarted&nbsp;the&nbsp;box,&nbsp;erlang&nbsp;node,&nbsp;or&nbsp;entire&nbsp;rabbitmq-server&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;anywhere&nbsp;else&nbsp;I&nbsp;can&nbsp;go&nbsp;looking&nbsp;for&nbsp;errors?&nbsp;I&nbsp;am&nbsp;about&nbsp;to&nbsp;start&nbsp;killing&nbsp;processs,&nbsp;but&nbsp;Im&nbsp;not&nbsp;sure&nbsp;that&nbsp;will&nbsp;solve&nbsp;anything.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Did&nbsp;you&nbsp;do&nbsp;that&nbsp;in&nbsp;the&nbsp;end?&nbsp;If&nbsp;not,&nbsp;I&nbsp;would&nbsp;really&nbsp;like&nbsp;to&nbsp;get&nbsp;to&nbsp;the&nbsp;bottom&nbsp;of&nbsp;what's&nbsp;wrong&nbsp;with&nbsp;this&nbsp;node.&nbsp;I&nbsp;don't&nbsp;suppose&nbsp;it&nbsp;would&nbsp;be&nbsp;possible&nbsp;for&nbsp;you&nbsp;to&nbsp;give&nbsp;us&nbsp;access&nbsp;to&nbsp;this&nbsp;machine&nbsp;would&nbsp;it?&nbsp;If&nbsp;necessary,&nbsp;we&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;get&nbsp;some&nbsp;kind&nbsp;of&nbsp;confidentiality&nbsp;agreement&nbsp;signed&nbsp;if&nbsp;that'd&nbsp;help.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Tim&nbsp;Watson&lt;/div&gt;&lt;div&gt;Staff&nbsp;Engineer&lt;/div&gt;&lt;div&gt;RabbitMQ&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;span&gt;&amp;lt;rabbit-manychannels.png&amp;gt;&lt;/span&gt;_______________________________________________&lt;br&gt;rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;&lt;br&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
