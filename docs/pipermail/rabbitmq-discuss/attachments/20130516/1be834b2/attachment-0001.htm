<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Hi&nbsp;Michael,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;15&nbsp;May&nbsp;2013,&nbsp;at&nbsp;21:51,&nbsp;Michael&nbsp;Klishin&nbsp;wrote:&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I'm&nbsp;investigating&nbsp;an&nbsp;issue&nbsp;report&nbsp;for&nbsp;Langohr:&lt;div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/michaelklishin/langohr/issues/16#issuecomment-17964559&quot;&gt;https://github.com/michaelklishin/langohr/issues/16#issuecomment-17964559&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;and&nbsp;not&nbsp;entirely&nbsp;sure&nbsp;when&nbsp;SignalShutdownException#isInitiatedByApplication&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;returns&nbsp;true&nbsp;and&nbsp;if&nbsp;it&nbsp;can&nbsp;really&nbsp;be&nbsp;used&nbsp;to&nbsp;tell&nbsp;a&nbsp;clean&nbsp;shutdown&nbsp;(e.g.&nbsp;when&nbsp;you&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;<br>
<br>
voluntarily&nbsp;close&nbsp;channels).&lt;/div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&nbsp;property&nbsp;will&nbsp;evaluate&nbsp;to&nbsp;true&nbsp;whenever&nbsp;the&nbsp;source&nbsp;of&nbsp;the&nbsp;shutdown&nbsp;originated&nbsp;in&nbsp;the&nbsp;client&nbsp;application,&nbsp;whether&nbsp;by&nbsp;deliberate&nbsp;closure&nbsp;or&nbsp;application&nbsp;error.&nbsp;So&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;that&nbsp;you&nbsp;can&nbsp;differentiate&nbsp;based&nbsp;on&nbsp;that&nbsp;properly&nbsp;alone.&nbsp;Certainly&nbsp;the&nbsp;property&nbsp;will&nbsp;always&nbsp;be&nbsp;set&nbsp;to&nbsp;true&nbsp;when&nbsp;a&nbsp;channel&nbsp;is&nbsp;deliberately&nbsp;closed&nbsp;by&nbsp;the&nbsp;application,&nbsp;via&nbsp;a&nbsp;call&nbsp;to&nbsp;#close()&nbsp;or&nbsp;#waitForConfirmsOrDie&nbsp;and&nbsp;so&nbsp;on.&nbsp;However&nbsp;the&nbsp;comment&nbsp;at&amp;nbsp;&lt;a&nbsp;href=&quot;https://github.com/michaelklishin/langohr/issues/16#issuecomment-17964103&quot;&gt;https://github.com/michaelklishin/langohr/issues/16#issuecomment-17964103&lt;/a&gt;&nbsp;is&nbsp;correct,&nbsp;in&nbsp;that&nbsp;an&nbsp;exception&nbsp;in&nbsp;the&nbsp;consumer&nbsp;code&nbsp;will&nbsp;still&nbsp;set&nbsp;#isInitiatedByApplication&nbsp;to&nbsp;true.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;IMO,&nbsp;even&nbsp;when&nbsp;#isInitiatedByApplication&nbsp;is&nbsp;true,&amp;nbsp;we&nbsp;should&nbsp;probably&nbsp;make&nbsp;it&nbsp;easier&nbsp;to&nbsp;determine&nbsp;whether&nbsp;a&nbsp;channel&nbsp;close&nbsp;was&nbsp;a&nbsp;deliberate&nbsp;action&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;an&nbsp;application&nbsp;error.&nbsp;I'll&nbsp;file&nbsp;a&nbsp;bug&nbsp;for&nbsp;that.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;What's&nbsp;the&nbsp;recommended&nbsp;way&nbsp;to&nbsp;detect&nbsp;network&nbsp;errors&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;these,&nbsp;#isInitiatedByApplication&nbsp;will&nbsp;be&nbsp;false.&nbsp;You&nbsp;can&nbsp;also&nbsp;look&nbsp;at&nbsp;the&nbsp;exception&nbsp;tucked&nbsp;away&nbsp;in&nbsp;#getReason&nbsp;to&nbsp;determine&nbsp;this,&nbsp;at&nbsp;least&nbsp;to&nbsp;some&nbsp;extent.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;&quot;&gt;,&nbsp;channel&nbsp;AND&nbsp;consumer-level&amp;nbsp;exceptions&nbsp;vs&nbsp;clean&nbsp;termination?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;no&nbsp;clean&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;atm&nbsp;afaict&nbsp;-&nbsp;I&nbsp;think&amp;nbsp;Ian&nbsp;Eure's&nbsp;analysis&nbsp;is&nbsp;correct&nbsp;and&nbsp;the&nbsp;the&nbsp;only&nbsp;way&nbsp;to&nbsp;differentiate&nbsp;between&nbsp;the&nbsp;two&nbsp;right&nbsp;now&nbsp;would&nbsp;be&nbsp;to&nbsp;&quot;go&nbsp;spelunking&nbsp;through&nbsp;the&nbsp;object&nbsp;tree&nbsp;looking&nbsp;for&nbsp;the&nbsp;text&nbsp;'Closed&nbsp;due&nbsp;to&nbsp;exception'&quot;&nbsp;in&nbsp;Exception#getMessage.&nbsp;As&nbsp;I&nbsp;said,&nbsp;we'll&nbsp;fix&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Tim&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
