<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Sorry&nbsp;for&nbsp;the&nbsp;delay.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;current&nbsp;spring-amqp&nbsp;(1.1.1)&nbsp;now&nbsp;supports&nbsp;a&nbsp;'fixed'&nbsp;reply&nbsp;queue<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;request/reply&nbsp;scenarios.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;See&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a<br>
href=&quot;http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#request-reply&quot;&gt;http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#request-reply&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;added&nbsp;this&nbsp;specifically&nbsp;for&nbsp;the&nbsp;performance&nbsp;impact&nbsp;you&nbsp;cite.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Gary&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;On&nbsp;07/11/2012&nbsp;05:38&nbsp;PM,&nbsp;cogitate&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:1342042707718-20725.post@n5.nabble.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Thanks&nbsp;Gary!&nbsp;<br>
i&nbsp;also&nbsp;use&nbsp;spring-amqp&nbsp;and&nbsp;amqp&nbsp;inbound&nbsp;listener&nbsp;in&nbsp;spring-integration.<br>
however,&nbsp;my&nbsp;issue&nbsp;is&nbsp;with&nbsp;reply-queue&nbsp;implementation&nbsp;of&nbsp;spring-amqp.&nbsp;i&nbsp;need<br>
pre-made&nbsp;reply-queues&nbsp;that&nbsp;can&nbsp;be&nbsp;re-used&nbsp;(setup&nbsp;by&nbsp;configuration)&nbsp;even&nbsp;for<br>
RPC&nbsp;semantics.&nbsp;i&nbsp;believe&nbsp;spring-amqp&nbsp;for&nbsp;RPC&nbsp;uses&nbsp;anonymous&nbsp;reply-queues&nbsp;and<br>
also&nbsp;does&nbsp;consumer.cancel(benchmarks&nbsp;showed&nbsp;a&nbsp;5ms&nbsp;delay&nbsp;for&nbsp;this&nbsp;on&nbsp;24&nbsp;core<br>
cpu&nbsp;with&nbsp;broker&nbsp;and&nbsp;client&nbsp;running&nbsp;on&nbsp;the&nbsp;same&nbsp;box),&nbsp;which&nbsp;turns&nbsp;out&nbsp;to&nbsp;have<br>
performance&nbsp;impact.&nbsp;thus,&nbsp;this&nbsp;rules&nbsp;out&nbsp;use&nbsp;of&nbsp;RabbitTemplate&nbsp;(&nbsp;i&nbsp;wish&nbsp;it<br>
had&nbsp;a&nbsp;way&nbsp;to&nbsp;use&nbsp;pre-made&nbsp;reply-queues&nbsp;that&nbsp;could&nbsp;be&nbsp;re-used).<br>
<br>
thus,&nbsp;my&nbsp;wrappers&nbsp;around&nbsp;raw&nbsp;rabbitmq&nbsp;apis&nbsp;and&nbsp;even&nbsp;if&nbsp;i&nbsp;use<br>
CachingConnectionFactory,&nbsp;i'd&nbsp;need&nbsp;to&nbsp;register&nbsp;a&nbsp;callback&nbsp;listener&nbsp;to<br>
re-register&nbsp;my&nbsp;channels&nbsp;and&nbsp;reply-queues.<br>
<br>
will&nbsp;definitely&nbsp;look&nbsp;at&nbsp;RabbitAdmin&nbsp;to&nbsp;learn&nbsp;how&nbsp;to&nbsp;do&nbsp;this.<br>
<br>
thanks&nbsp;and&nbsp;regards,<br>
-monish<br>
<br>
<br>
Gary&nbsp;Russell&nbsp;wrote<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
See<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#d0e999&quot;&gt;http://static.springsource.org/spring-amqp/docs/1.1.1.RELEASE/reference/html/#d0e999&lt;/a&gt;<br>
<br>
It&nbsp;shouldn't&nbsp;take&nbsp;much&nbsp;heavy&nbsp;lifting&nbsp;to&nbsp;use&nbsp;spring-amqp&nbsp;instead&nbsp;of&nbsp;the&nbsp;raw<br>
apis,&nbsp;and&nbsp;it&nbsp;will&nbsp;take&nbsp;care&nbsp;of&nbsp;reconnecting,&nbsp;setting&nbsp;up&nbsp;queues&nbsp;etc,&nbsp;via<br>
the&nbsp;ConnectionListener&nbsp;callback&nbsp;in&nbsp;the&nbsp;RabbitAdmin&nbsp;class.<br>
<br>
On&nbsp;the&nbsp;receiving&nbsp;side,&nbsp;you&nbsp;don't&nbsp;have&nbsp;to&nbsp;write&nbsp;any&nbsp;special&nbsp;listeners&nbsp;etc<br>
to&nbsp;use&nbsp;spring-amqp;&nbsp;you&nbsp;can&nbsp;just&nbsp;write&nbsp;your&nbsp;code&nbsp;as&nbsp;a&nbsp;POJO&nbsp;and&nbsp;the<br>
container&nbsp;uses&nbsp;an&nbsp;adapter&nbsp;to&nbsp;call&nbsp;your&nbsp;code.&nbsp;On&nbsp;the&nbsp;outbound&nbsp;side&nbsp;just&nbsp;use<br>
a&nbsp;RabbitTemplate;&nbsp;in&nbsp;most&nbsp;cases&nbsp;you&nbsp;can&nbsp;use&nbsp;high-level&nbsp;APIs,&nbsp;while&nbsp;still<br>
having&nbsp;access&nbsp;to&nbsp;the&nbsp;low&nbsp;level&nbsp;APIs&nbsp;(channel)&nbsp;if&nbsp;you&nbsp;ever&nbsp;need&nbsp;them.<br>
<br>
If&nbsp;you&nbsp;can't&nbsp;move&nbsp;to&nbsp;spring-amqp,&nbsp;you&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;leverage&nbsp;some&nbsp;of<br>
the&nbsp;code&nbsp;from&nbsp;RabbitAdmin.<br>
<br>
Gary<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
<br>
--<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://rabbitmq.1065348.n5.nabble.com/Handle-Stale-Connections-on-Clients-tp20687p20725.html&quot;&gt;http://rabbitmq.1065348.n5.nabble.com/Handle-Stale-Connections-on-Clients-tp20687p20725.html&lt;/a&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;RabbitMQ&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.<br>
_______________________________________________<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&gt;rabbitmq-discuss@lists.rabbitmq.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&gt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&lt;/a&gt;<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
