<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-2022-JP&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;Emile,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;one&nbsp;of&nbsp;Anthony's&nbsp;Colleagues&nbsp;here&nbsp;at&nbsp;LShift,&nbsp;who&nbsp;assisted&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;initial&nbsp;investigation.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Thanks&nbsp;for&nbsp;this&nbsp;very&nbsp;detailed&nbsp;diagnostic&nbsp;information.&nbsp;Could&nbsp;you&nbsp;perhaps<br>
supply&nbsp;the&nbsp;output&nbsp;of&nbsp;&quot;rabbitmqctl&nbsp;report&quot;&nbsp;as&nbsp;well?&nbsp;Feel&nbsp;free&nbsp;to&nbsp;compress<br>
and&nbsp;send&nbsp;to&nbsp;me&nbsp;directly&nbsp;if&nbsp;it&nbsp;is&nbsp;too&nbsp;large.<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Size&nbsp;of&nbsp;the&nbsp;report&nbsp;isn't&nbsp;the&nbsp;main&nbsp;issue&nbsp;in&nbsp;this&nbsp;case--sadly,&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;looks&nbsp;like&nbsp;even&nbsp;the&nbsp;process&nbsp;of&nbsp;getting&nbsp;a&nbsp;queue&nbsp;listing&nbsp;wasn't&nbsp;going<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;terminate&nbsp;any&nbsp;time&nbsp;soon&nbsp;(I&nbsp;gave&nbsp;up&nbsp;after&amp;nbsp;&nbsp;~10&nbsp;minutes).&nbsp;I've<br>
&nbsp;&nbsp;&nbsp;&nbsp;attached&nbsp;the&nbsp;output&nbsp;from&nbsp;a&nbsp;broken&nbsp;rabbit&nbsp;(although&nbsp;that&nbsp;only&nbsp;lists&nbsp;&quot;&lt;tt&gt;rabbitmqctl<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status&lt;/tt&gt;&quot;)&nbsp;and&nbsp;a&nbsp;report&nbsp;from&nbsp;the&nbsp;same&nbsp;rabbit&nbsp;with&nbsp;an&nbsp;increased<br>
&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;descriptor&nbsp;limit.&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;<br>
&amp;nbsp;I&nbsp;have&nbsp;not&nbsp;been&nbsp;able&nbsp;to&nbsp;reproduce&nbsp;the&nbsp;problem&nbsp;-&nbsp;does&nbsp;this&nbsp;happen&nbsp;each<br>
time&nbsp;you&nbsp;start&nbsp;the&nbsp;cluster?&nbsp;does&nbsp;stopping&nbsp;and&nbsp;starting&nbsp;the&nbsp;slave&nbsp;nodes<br>
make&nbsp;any&nbsp;difference?&nbsp;Have&nbsp;you&nbsp;discovered&nbsp;a&nbsp;sequence&nbsp;of&nbsp;actions&nbsp;that&nbsp;is<br>
likely&nbsp;to&nbsp;reproduce&nbsp;the&nbsp;problem?<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;example&nbsp;I'm&nbsp;seeing&nbsp;(on&nbsp;our&nbsp;internal&nbsp;build&nbsp;slaves&nbsp;that&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;earlier&nbsp;etop&nbsp;results&nbsp;were&nbsp;derived&nbsp;from),&nbsp;we&nbsp;have&nbsp;about&nbsp;1400&nbsp;queues<br>
&nbsp;&nbsp;&nbsp;&nbsp;left&nbsp;over&nbsp;from&nbsp;a&nbsp;set&nbsp;of&nbsp;rather&nbsp;unhygenic&nbsp;integration&nbsp;tests,&nbsp;so&nbsp;I'd<br>
&nbsp;&nbsp;&nbsp;&nbsp;infer&nbsp;that&nbsp;there's&nbsp;some&nbsp;kind&nbsp;of&nbsp;pathological&nbsp;interaction&nbsp;between&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;mnesia&nbsp;queue&nbsp;configuration&nbsp;database&nbsp;resource&nbsp;management&nbsp;and&nbsp;the&nbsp;&lt;tt&gt;file_handle_cache&lt;/tt&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;module.&nbsp;So,&nbsp;it&nbsp;does&nbsp;indeed&nbsp;happen&nbsp;every&nbsp;time&nbsp;we&nbsp;restart&nbsp;the&nbsp;single<br>
&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;(on&nbsp;our&nbsp;CI&nbsp;machines,&nbsp;they're&nbsp;single&nbsp;instances).&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;this&nbsp;hunch,&nbsp;I've&nbsp;bumped&nbsp;our&nbsp;file&nbsp;descriptor&nbsp;limit&nbsp;on&nbsp;one&nbsp;machine<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;8192&nbsp;from&nbsp;1024&nbsp;files,&nbsp;and&nbsp;it&nbsp;does&nbsp;indeed&nbsp;that&nbsp;the&nbsp;resource&nbsp;usage<br>
&nbsp;&nbsp;&nbsp;&nbsp;does&nbsp;drop&nbsp;dramatically&nbsp;once&nbsp;the&nbsp;instance&nbsp;has&nbsp;started&nbsp;up.&nbsp;So,&nbsp;I&nbsp;think<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;brings&nbsp;us&nbsp;to&nbsp;a&nbsp;work&nbsp;around&nbsp;for&nbsp;one&nbsp;case,&nbsp;if&nbsp;not&nbsp;an&nbsp;explanation<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;underlying&nbsp;behaviour.&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
