<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;Hi&nbsp;Simon,&lt;br&gt;&lt;br&gt;Yes,&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;EXTERNAL&nbsp;authentication&nbsp;by&nbsp;giving&nbsp;SSL&nbsp;certificates&nbsp;instead&nbsp;of&nbsp;username&nbsp;&amp;&nbsp;password.&nbsp;Can&nbsp;you&nbsp;let&nbsp;me&nbsp; know&nbsp;the&nbsp;way&nbsp;to&nbsp;set&nbsp;user&nbsp;name&nbsp;while&nbsp;generating&nbsp;the&nbsp;SSL&nbsp;certificates,&nbsp;since&nbsp;I&nbsp;didnt&nbsp;find&nbsp;any&nbsp;steps&nbsp;for&nbsp;this&nbsp;inhttps://&lt;a&nbsp;href=&quot;http://www.rabbitmq.com/ssl.html&quot;&gt;www.rabbitmq.com/ssl.html&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;font&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;regards,&lt;br&gt;Loganathan&lt;br&gt;Mob:&nbsp;+91&nbsp;7760780741&nbsp;|&nbsp;+91&nbsp;9944414388&lt;br&gt;Skype:&nbsp;loganathan.sellappa&lt;br&gt;&lt;/font&gt;&lt;span&nbsp;style=&quot;font-family:tahoma,sans-serif&quot;&gt;&lt;a&nbsp;href=&quot;http://vizualize.me/loganathan&quot;&nbsp;target=&quot;_blank&quot;&gt;ViewMe&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Apr&nbsp;29,&nbsp;2014&nbsp;at&nbsp;2:13&nbsp;PM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;29/04/2014&nbsp;09:05,&nbsp;Loganathan&nbsp;Sellapa&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
After&nbsp;restarting&nbsp;the&nbsp;rabbitmq&nbsp;server&nbsp;I&nbsp;tried&nbsp;to&nbsp;connect&nbsp;to&nbsp;RabbitMq&nbsp;via&lt;br&gt;<br>
AMQP&nbsp;Gem&nbsp;with&nbsp;the&nbsp;below&nbsp;code,&nbsp;but&nbsp;I&nbsp;am&nbsp;getting&nbsp;authentication&nbsp;failure&nbsp;error.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
*_RUBY&nbsp;CODE:_*&lt;br&gt;<br>
*&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
*&lt;br&gt;<br>
RMQ_CONFIGURATIONS&nbsp;=&nbsp;{:host=&gt;&quot;127.0.0.1&quot;,&nbsp;:port=&gt;5671,&nbsp;:vhost=&gt;&quot;/&quot;,&lt;br&gt;<br>
:auth_mechanism=&gt;&quot;EXTERNAL&quot;,&lt;br&gt;<br>
:ssl=&gt;{:cert_chain_file=&gt;&quot;/&lt;u&gt;&lt;/u&gt;opt/ssl/client/cert.pem&quot;,&lt;br&gt;<br>
:private_key_file=&gt;&quot;/opt/ssl/&lt;u&gt;&lt;/u&gt;client/key.pem&quot;}}&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Do&nbsp;you&nbsp;actually&nbsp;want&nbsp;to&nbsp;use&nbsp;EXTERNAL&nbsp;authentication?&nbsp;That&#39;s&nbsp;the&nbsp;authentication&nbsp;mode&nbsp;where&nbsp;you&nbsp;do&nbsp;not&nbsp;specify&nbsp;a&nbsp;username&nbsp;and&nbsp;password,&nbsp;but&nbsp;the&nbsp;authentication&nbsp;is&nbsp;done&nbsp;via&nbsp;SSL&nbsp;client&nbsp;certs&nbsp;and&nbsp;the&nbsp;username&nbsp;comes&nbsp;from&nbsp;the&nbsp;client&nbsp;cert&nbsp;DN&nbsp;/&nbsp;CN.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;<br>
=ERROR&nbsp;REPORT====&nbsp;29-Apr-2014::13:26:22&nbsp;===&lt;br&gt;<br>
closing&nbsp;AMQP&nbsp;connection&nbsp;&lt;0.862.0&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://127.0.0.1:40657&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:40657&lt;/a&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://127.0.0.1:40657&quot;&nbsp;target=&quot;_blank&quot;&gt;http://127.0.0.1:40657&lt;/a&gt;&gt;&nbsp;-&gt;&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:5671&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:5671&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://127.0.0.1:5671&quot;&nbsp;target=&quot;_blank&quot;&gt;http://127.0.0.1:5671&lt;/a&gt;&gt;):&lt;br&gt;<br>
<br>
<br>
{handshake_error,starting,0,&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{amqp_error,access_refused,&lt;br&gt;<br>
*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;EXTERNAL&nbsp;login&nbsp;refused:&nbsp;user&nbsp;&#39;ubuntu&#39;&nbsp;-&nbsp;invalid&nbsp;credentials&quot;,*&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#39;connection.start_ok&#39;}}&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Note&nbsp;that&nbsp;the&nbsp;user&nbsp;is&nbsp;&#39;ubuntu&#39;&nbsp;here,&nbsp;not&nbsp;&#39;guest&#39;.&nbsp;I&nbsp;guess&nbsp;that&#39;s&nbsp;the&nbsp;CN&nbsp;of&nbsp;your&nbsp;client&nbsp;cert.&nbsp;RabbitMQ&nbsp;is&nbsp;complianing&nbsp;because&nbsp;although&nbsp;the&nbsp;SSL-based&nbsp;auth&nbsp;succeeded,&nbsp;it&nbsp;then&nbsp;couldn&#39;t&nbsp;find&nbsp;the&nbsp;user&nbsp;in&nbsp;the&nbsp;internal&nbsp;database&nbsp;(to&nbsp;find&nbsp;out&nbsp;what&nbsp;permissions&nbsp;it&nbsp;has).&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
So&nbsp;if&nbsp;you&nbsp;*do*&nbsp;want&nbsp;to&nbsp;use&nbsp;EXTERNAL,&nbsp;you&nbsp;need&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;the&nbsp;user&nbsp;&#39;ubuntu&#39;&nbsp;exists&nbsp;in&nbsp;the&nbsp;user&nbsp;database.&nbsp;The&nbsp;user&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;have&nbsp;no&nbsp;password.&nbsp;You&nbsp;can&nbsp;also&nbsp;remove&nbsp;the&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;do&nbsp;*not*&nbsp;want&nbsp;to&nbsp;use&nbsp;EXTERNAL&nbsp;and&nbsp;instead&nbsp;wanted&nbsp;to&nbsp;log&nbsp;in&nbsp;as&nbsp;&#39;guest&#39;&nbsp;secured&nbsp;by&nbsp;SSL,&nbsp;remove&nbsp;&#39;auth_mechanisms&#39;&nbsp;and&nbsp;&#39;ssl_cert_login_from&#39;&nbsp;from&nbsp;the&nbsp;config.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
