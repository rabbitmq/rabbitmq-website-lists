<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;am&nbsp;really&nbsp;appreciated&nbsp;for&nbsp;yourÂ enthusiastic&nbsp;reply,&nbsp;guys!&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Dec&nbsp;22,&nbsp;2012&nbsp;at&nbsp;3:54&nbsp;AM,&nbsp;Matthias&nbsp;Radestock&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:matthias@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;matthias@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;21/12/12&nbsp;02:02,&nbsp;javaLee&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
/*M*//y&nbsp;understanding/:&nbsp;Queue&nbsp;in&nbsp;rabbitmq&nbsp;broker&nbsp;will&nbsp;never&nbsp;drop&nbsp;the&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
unacknowledged&nbsp;message&nbsp;before&nbsp;client&nbsp;ack-or-reject&nbsp;it,&lt;br&gt;<br>
ack-or-reject-operationing&nbsp;on&nbsp;the&nbsp;client&nbsp;side&nbsp;do&nbsp;not&nbsp;need&nbsp;resend&nbsp;the&lt;br&gt;<br>
message&nbsp;to&nbsp;rabbitmq&nbsp;broker,&nbsp;that&amp;#39;s&nbsp;why&nbsp;client&nbsp;side&nbsp;cannot&nbsp;modify&nbsp;the&lt;br&gt;<br>
message,&nbsp;is&nbsp;that&nbsp;true?&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Correct.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;really&nbsp;need&nbsp;the&nbsp;requeue&nbsp;function,&nbsp;because&nbsp;on&nbsp;client&nbsp;side&nbsp;i&nbsp;want&nbsp;do&lt;br&gt;<br>
some&nbsp;retry&nbsp;operation&nbsp;with&nbsp;spring-retry.&nbsp;if&nbsp;max-retry-count&nbsp;is&nbsp;exhausted&lt;br&gt;<br>
&amp;amp;&nbsp;the&nbsp;message&nbsp;is&nbsp;still&nbsp;not&nbsp;be&nbsp;processing&nbsp;appropriately,&nbsp;i&nbsp;will&nbsp;not&lt;br&gt;<br>
requeue&nbsp;it&nbsp;(to&nbsp;the&nbsp;original&nbsp;queue)&nbsp;any&nbsp;more&nbsp;&amp;amp;&nbsp;put&nbsp;it&nbsp;to&nbsp;the&lt;br&gt;<br>
dead-letter-exchange.&lt;br&gt;<br>
But&nbsp;before&nbsp;put&nbsp;it&nbsp;to&nbsp;the&nbsp;DLX,&nbsp;i&nbsp;really&nbsp;want&nbsp;add&nbsp;some&nbsp;error-description&lt;br&gt;<br>
to&nbsp;this&nbsp;message,&nbsp;So&nbsp;another&nbsp;consumer&nbsp;that&nbsp;listening&nbsp;to&nbsp;the&nbsp;DLX&nbsp;can&lt;br&gt;<br>
retrieve&nbsp;&amp;amp;&nbsp;analysis&nbsp;&amp;amp;&nbsp;process&nbsp;it&nbsp;according&nbsp;to&nbsp;the&nbsp;error-description,&lt;br&gt;<br>
that&amp;#39;s&nbsp;why&nbsp;i&nbsp;want&nbsp;modify&nbsp;message&nbsp;before&nbsp;reject&nbsp;it.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
So&nbsp;don&amp;#39;t&nbsp;use&nbsp;reject.&nbsp;Instead&nbsp;publish&nbsp;the&nbsp;modified&nbsp;message&nbsp;to&nbsp;the&nbsp;original&nbsp;queue&nbsp;or&nbsp;DLX&nbsp;-&nbsp;depending&nbsp;on&nbsp;the&nbsp;retry-count&nbsp;-&nbsp;and&nbsp;ack&nbsp;the&nbsp;original&nbsp;message.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Matthias&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
