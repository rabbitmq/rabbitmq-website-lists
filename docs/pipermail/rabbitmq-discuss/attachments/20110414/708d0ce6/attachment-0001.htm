<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;Nice&nbsp;summary.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-style:&nbsp;solid;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
2.&nbsp;To&nbsp;instance&nbsp;your&nbsp;handlers&nbsp;with&nbsp;IoC&nbsp; (using&nbsp;Castle&nbsp;Project&nbsp;for&lt;br&gt;<br>
example)&nbsp;depending&nbsp;on&nbsp;your&nbsp;routing&nbsp;keys.&nbsp;This&nbsp;is&nbsp;the&nbsp;choice&nbsp;I&nbsp;tested&lt;br&gt;<br>
and&nbsp;works&nbsp;good.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;Not&nbsp;sure&nbsp;what&nbsp;you&nbsp;mean&nbsp;here. &nbsp;Like&nbsp;with&nbsp;a&nbsp;property&nbsp;of&nbsp;some&nbsp;kind? &nbsp;What&nbsp;configuration&nbsp;mechanism&nbsp;are&nbsp;you&nbsp;plugging&nbsp;in&nbsp;via&nbsp;IoC. &nbsp;How&nbsp;is&nbsp;it&nbsp;selected?&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-style:&nbsp;solid;&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
4.&nbsp;Not&nbsp;using&nbsp;routing&nbsp;keys:&nbsp;To&nbsp;send&nbsp;your&nbsp;entities&nbsp;encapsulated&nbsp;in&nbsp;a&lt;br&gt;<br>
fixed&nbsp;container&nbsp;with&nbsp;at&nbsp;least&nbsp;2&nbsp;fields&nbsp;(messageBody,&nbsp;messageType).&lt;br&gt;<br>
Every&nbsp;time&nbsp;you&nbsp;receive&nbsp;a&nbsp;message&nbsp;you&nbsp;need&nbsp;to&nbsp;deserialize&nbsp;the&nbsp;envelope&lt;br&gt;<br>
and&nbsp;read&nbsp;the&nbsp;&amp;quot;messageType&amp;quot;&nbsp;field&nbsp;and&nbsp;deserialize&nbsp;the&nbsp;messageBody&nbsp;(it&lt;br&gt;<br>
should&nbsp;be&nbsp;an&nbsp;array&nbsp;of&nbsp;bytes)&nbsp;which&nbsp;holds&nbsp;your&nbsp;business&nbsp;entity.&nbsp;This&lt;br&gt;<br>
approach&nbsp;is&nbsp;not&nbsp;faster&nbsp;as&nbsp;others&nbsp;due&nbsp;to&nbsp;the&nbsp;need&nbsp;of&nbsp;deserialize&nbsp;twice.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;you&nbsp;could&nbsp;always&nbsp;do&nbsp;both,&nbsp;and&nbsp;deserialising&nbsp;a&nbsp;messageType&nbsp;could&nbsp;be&nbsp;very&nbsp;fast. &nbsp;For&nbsp;example,&nbsp;a&nbsp;4&nbsp;byte&nbsp;short&nbsp;integer&nbsp;could&nbsp;be:&nbsp;a. unencoded, &nbsp;b.&nbsp;we&nbsp;know&nbsp;that&nbsp;it&nbsp;starts&nbsp;in&nbsp;byte&nbsp;array&nbsp;position&nbsp;zero,&nbsp;and &nbsp;c.&nbsp;the&nbsp;messageBody&nbsp;starts&nbsp;in&nbsp;position&nbsp;4&nbsp;and&nbsp;stops&nbsp;at&nbsp;length-1. &nbsp;Sounds&nbsp;fast. &nbsp;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;Likewise&nbsp;a&nbsp;fixed&nbsp;length&nbsp;string&nbsp;of&nbsp;10&nbsp;or&nbsp;20&nbsp;chars&nbsp;is&nbsp;going&nbsp;to&nbsp;be&nbsp;fast&nbsp;too&nbsp;if&nbsp;an&nbsp;int&nbsp;isn&amp;#39;t&nbsp;meaningful&nbsp;enough.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Maybe&nbsp;version&nbsp;the&nbsp;message&nbsp;in&nbsp;an&nbsp;AQMP&nbsp;header... or&nbsp;version&nbsp;it&nbsp;yourself&nbsp;(byte&nbsp;0).&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;This&nbsp;&amp;quot;packet&amp;quot;&nbsp;approach&nbsp;worked&nbsp;for&nbsp;TCP/IP...&nbsp;and&nbsp;I&nbsp;*think*&nbsp;TCP/IP&nbsp;did&nbsp;okay&nbsp;in&nbsp;the&nbsp;end. &nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Once&nbsp;you&nbsp;decide,&nbsp;you&amp;#39;ve&nbsp;got&nbsp;to&nbsp;leave&nbsp;it&nbsp;baked&nbsp;in. &nbsp;Otherwise,&nbsp;you&amp;#39;ve&nbsp;only&nbsp;got&nbsp;(2^8)&nbsp;chances&nbsp;to&nbsp;change&nbsp;your&nbsp;mind&nbsp;assuming&nbsp;a&nbsp;1&nbsp;byte&nbsp;version&nbsp;number. &nbsp;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;The&nbsp;advantage&nbsp;of&nbsp;not&nbsp;using&nbsp;an&nbsp;AQMP&nbsp;header&nbsp;is&nbsp;just&nbsp;that&nbsp;my&nbsp;read&nbsp;on&nbsp;the&nbsp;spec&nbsp;was&nbsp;that&nbsp;they&nbsp;only&nbsp;guaranteed&nbsp;that&nbsp;the&nbsp;body&nbsp;field&nbsp;would&nbsp;be&nbsp;there&nbsp;in&nbsp;the&nbsp;future. &nbsp;Are&nbsp;these&nbsp;tags&nbsp;getting&nbsp;more&nbsp;cetain&nbsp;yet?&lt;/div&gt;&lt;div&gt;<br>
 &lt;/div&gt;&lt;div&gt;-Steven&lt;/div&gt;&lt;/div&gt;<br>

</tt>
