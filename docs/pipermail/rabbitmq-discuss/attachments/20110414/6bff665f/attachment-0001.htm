<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;!--&nbsp;DIV&nbsp;{margin:0px;}&nbsp;--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:10pt&quot;&gt;&lt;DIV&gt;John,&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;gt;&nbsp;In&nbsp;many&nbsp;of&nbsp;my&nbsp;tests,&nbsp;I&nbsp;ran&nbsp;with&nbsp;a&nbsp;32-bit&nbsp;Erlang,&nbsp;and&nbsp;with&nbsp;a&nbsp;relatively&nbsp;small&nbsp;amount&nbsp;of&nbsp;RAM.&nbsp;RabbitMQ&nbsp;had&nbsp;to&nbsp;do&nbsp;quite&nbsp;a&nbsp;lot&nbsp;more&nbsp;work&nbsp;to&nbsp;conserve&nbsp;RAM,&nbsp;and&nbsp;sometimes&nbsp;it&nbsp;failed&nbsp;to&nbsp;do&nbsp;so&nbsp;fast&nbsp;enough,&nbsp;and&nbsp;Erlang&nbsp;couldn't&nbsp;allocate&nbsp;more&nbsp;memory,&nbsp;and&nbsp;crashed.&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;that&nbsp;is&nbsp;exactly&nbsp;what&nbsp;happened&nbsp;in&nbsp;our&nbsp;tests.&amp;nbsp;&nbsp;the&nbsp;broker's&nbsp;memory&nbsp;keeps&nbsp;on&nbsp;increasing&nbsp;until&nbsp;it&nbsp;reaches&nbsp;near&nbsp;4GB&nbsp;(32&nbsp;bit&nbsp;limit),&nbsp;then&nbsp;it&nbsp;crashes.&amp;nbsp;&nbsp;i&nbsp;think&nbsp;if&nbsp;you&nbsp;increase&nbsp;the&nbsp;RAM,&nbsp;cpu&nbsp;cores&nbsp;(we&nbsp;use&nbsp;8&nbsp;core)&nbsp;and&nbsp;disk&nbsp;speed&nbsp;(RAID),&nbsp;the&nbsp;broker&nbsp;is&nbsp;more&nbsp;likely&nbsp;to&nbsp;crash,&nbsp;because&nbsp;the&nbsp;memory&nbsp;leak&nbsp;increases&nbsp;as&nbsp;messagne&nbsp;consuming&nbsp;rate&nbsp;increases.&amp;nbsp;&nbsp;you&nbsp;can&nbsp;move&nbsp;the&nbsp;consumers&nbsp;to&nbsp;other&nbsp;machines.&nbsp;as&nbsp;long&nbsp;as&nbsp;they&nbsp;are&nbsp;close&nbsp;to&nbsp;the&nbsp;broker,&nbsp;the&nbsp;consuming&nbsp;rate&nbsp;will&nbsp;still&nbsp;be&nbsp;very&nbsp;high,&nbsp;and&nbsp;broker&amp;nbsp;would&nbsp;crash.&amp;nbsp;&nbsp;you&nbsp;mentioned&nbsp;that&nbsp;your&nbsp;machine&nbsp;started&nbsp;swaping&nbsp;while&nbsp;running&nbsp;the&nbsp;tests.&amp;nbsp;&nbsp;this&nbsp;swaping&nbsp;actually&nbsp;could&nbsp;slow&nbsp;down&nbsp;the&nbsp;messages&nbsp;reads&nbsp;from&nbsp;disk,&nbsp;so&nbsp;broker&nbsp;is&nbsp;less&nbsp;likely&nbsp;to&nbsp;crash.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;thanks.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;-alex&lt;/DIV&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
