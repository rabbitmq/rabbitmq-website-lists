<tt>
I'm&nbsp;trying&nbsp;to&nbsp;use&nbsp;RabbitMQ&nbsp;with&nbsp;Storm&nbsp;(for&nbsp;processing&nbsp;a&nbsp;stream&nbsp;of&nbsp;messages)&nbsp;using&nbsp;Trident&nbsp;(a&nbsp;high&nbsp;level&nbsp;abstraction&nbsp;on&nbsp;top&nbsp;of&nbsp;Storm).&nbsp;In&nbsp;order&nbsp;to&nbsp;gain&nbsp;exactly-once&nbsp;processing&nbsp;of&nbsp;messages&nbsp;with&nbsp;Storm,&nbsp;I&nbsp;need&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;create&nbsp;a&nbsp;Storm&nbsp;spout&nbsp;that&nbsp;can&nbsp;retrieve&nbsp;a&nbsp;batch&nbsp;of&nbsp;messages&nbsp;from&nbsp;RabbitMQ&nbsp;and&nbsp;ack/fail&nbsp;them&nbsp;as&nbsp;a&nbsp;batch&nbsp;as&nbsp;an&nbsp;atomic&nbsp;unit.&nbsp;While&nbsp;amqp&nbsp;protocol&nbsp;or&nbsp;rabbitmq&nbsp;specific&nbsp;extensions&nbsp;to&nbsp;it&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;support&nbsp;this&nbsp;in&nbsp;an&nbsp;obvious&nbsp;manner,&nbsp;is&nbsp;there&nbsp;some&nbsp;pattern&nbsp;I&nbsp;could&nbsp;implement&nbsp;using&nbsp;what&nbsp;RabbitMQ&nbsp;provides&nbsp;to&nbsp;achieve&nbsp;this?&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;flag&nbsp;to&nbsp;indicate&nbsp;you're&nbsp;acking&nbsp;multiple&nbsp;messages&nbsp;will&nbsp;not&nbsp;work&nbsp;as&nbsp;that&nbsp;limits&nbsp;you&nbsp;to&nbsp;work&nbsp;with&nbsp;just&nbsp;one&nbsp;batch,&nbsp;right?&nbsp;And&nbsp;you&nbsp;cannot&nbsp;pick&nbsp;and&nbsp;choose&nbsp;which&nbsp;batch&nbsp;of&nbsp;messages&nbsp;you&nbsp;can&nbsp;or&nbsp;cannot&nbsp;ack&nbsp;with&nbsp;that&nbsp;mode&nbsp;(i.e.&nbsp;batch&nbsp;2&nbsp;might&nbsp;succeed,&nbsp;batch&nbsp;3&nbsp;might&nbsp;fail&nbsp;and&nbsp;batch&nbsp;4&nbsp;might&nbsp;succeed.&nbsp;so&nbsp;if&nbsp;you&nbsp;ack&nbsp;batch&nbsp;4,&nbsp;everything&nbsp;will&nbsp;be&nbsp;acked).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;I&nbsp;use&nbsp;a&nbsp;consistent&nbsp;hashing&nbsp;exchange&nbsp;(or&nbsp;something&nbsp;to&nbsp;the&nbsp;effect&nbsp;by&nbsp;writing&nbsp;my&nbsp;own&nbsp;exchange&nbsp;plugin)&nbsp;to&nbsp;a&nbsp;select&nbsp;a&nbsp;batch&nbsp;of&nbsp;messages&nbsp;and&nbsp;route&nbsp;them&nbsp;to&nbsp;a&nbsp;specific&nbsp;queue&nbsp;and&nbsp;once&nbsp;all&nbsp;the&nbsp;messages&nbsp;in&nbsp;that&nbsp;queue&nbsp;(i.e.&nbsp;the&nbsp;queue&nbsp;is&nbsp;the&nbsp;batch),&nbsp;then&nbsp;the&nbsp;queue&nbsp;is&nbsp;discarded?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;key&nbsp;here&nbsp;is&nbsp;treat&nbsp;a&nbsp;batch&nbsp;of&nbsp;messages&nbsp;as&nbsp;an&nbsp;atomic&nbsp;unit&nbsp;so&nbsp;if&nbsp;a&nbsp;single&nbsp;message&nbsp;consumer&nbsp;node&nbsp;dies&nbsp;or&nbsp;all&nbsp;message&nbsp;consumer&nbsp;nodes&nbsp;die&nbsp;or&nbsp;a&nbsp;rabbitmq&nbsp;node&nbsp;dies,&nbsp;then&nbsp;the&nbsp;whole&nbsp;batch&nbsp;can&nbsp;be&nbsp;failed&nbsp;to&nbsp;be&nbsp;re-tried&nbsp;later.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thoughts?&amp;nbsp;&lt;/div&gt;
</tt>
