<tt>
Hrmm! &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Not&nbsp;entirely&nbsp;ideal&nbsp;..&nbsp;I&amp;#39;d&nbsp;had&nbsp;visions&nbsp;of&nbsp;hacking&nbsp;this&nbsp;wee&nbsp;beastie&nbsp;to&nbsp;be&nbsp;overridable/configurable:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/rabbitmq/rabbitmq-federation/blob/master/src/rabbit_federation_link.erl#L520&quot;&gt;https://github.com/rabbitmq/rabbitmq-federation/blob/master/src/rabbit_federation_link.erl#L520&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Going&nbsp;the&nbsp;route&nbsp;of&nbsp;changing&nbsp;exchange&nbsp;types&nbsp;and&nbsp;other&nbsp;upstream&nbsp;finger&nbsp;pokery&nbsp;is&nbsp;not&nbsp;an&nbsp;option,&nbsp;unfortunately.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;ll&nbsp;stick&nbsp;to&nbsp;using&nbsp;an insentient shovel&nbsp;config,&nbsp;to&nbsp;ensure&nbsp;sharing&nbsp;upstream&nbsp;queues&nbsp;in&nbsp;the&nbsp;meantime.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Brendan&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Sep&nbsp;21,&nbsp;2012&nbsp;at&nbsp;12:11&nbsp;PM,&nbsp;Simon&nbsp;MacMullen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:simon@rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;simon@rabbitmq.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;21/09/12&nbsp;09:01,&nbsp;Brendan&nbsp;Hay&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Hi.&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Say&nbsp;I&nbsp;have&nbsp;two&nbsp;downstream&nbsp;brokers&nbsp;connected&nbsp;to&nbsp;a&nbsp;single&nbsp;upstream,&lt;br&gt;<br>
upon&nbsp;which&nbsp;lives&nbsp;a&nbsp;single&nbsp;exchange.&lt;br&gt;<br>
&lt;br&gt;<br>
Can&nbsp;I&nbsp;configure&nbsp;the&nbsp;plugin,&nbsp;to&nbsp;create&nbsp;the&nbsp;upstream&nbsp;federation&nbsp;queues,&lt;br&gt;<br>
with&nbsp;the&nbsp;same&nbsp;name&nbsp;so&nbsp;that&nbsp;they&nbsp;round-robin&nbsp;over&nbsp;messages&nbsp;coming&lt;br&gt;<br>
off&nbsp;the&nbsp;upstream&nbsp;exchange,&nbsp;to&nbsp;ensure&nbsp;messages&nbsp;are&nbsp;delivered&nbsp;to&lt;br&gt;<br>
_either_&nbsp;of&nbsp;the&nbsp;downstream&nbsp;pair&nbsp;(rather&nbsp;than&nbsp;both)?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
Sort&nbsp;of.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;could&nbsp;set&nbsp;the&nbsp;&amp;#39;local_nodename&amp;#39;&nbsp;for&nbsp;each&nbsp;broker&nbsp;to&nbsp;the&nbsp;same&nbsp;value.&nbsp;They&nbsp;will&nbsp;both&nbsp;identify&nbsp;themselves&nbsp;the&nbsp;same&nbsp;way&nbsp;to&nbsp;the&nbsp;upstream,&nbsp;and&nbsp;thus&nbsp;share&nbsp;queues.&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;they&nbsp;won&amp;#39;t&nbsp;be&nbsp;aware&nbsp;of&nbsp;each&nbsp;other,&nbsp;and&nbsp;they&nbsp;will&nbsp;thus&nbsp;stomp&nbsp;on&nbsp;each&nbsp;other&amp;#39;s&nbsp;bindings&nbsp;upstream.&nbsp;So&nbsp;that&amp;#39;s&nbsp;not&nbsp;good.&lt;br&gt;<br>
&lt;br&gt;<br>
Maybe&nbsp;we&nbsp;need&nbsp;to&nbsp;separate&nbsp;the&nbsp;federation&nbsp;from&nbsp;the&nbsp;round-robinning?&nbsp;You&nbsp;could&nbsp;use&nbsp;the&nbsp;consistent&nbsp;hash&nbsp;exchange&nbsp;upstream&nbsp;as&nbsp;a&nbsp;source,&nbsp;and&nbsp;then&nbsp;bind&nbsp;two&nbsp;exchanges&nbsp;as&nbsp;local&nbsp;destinations&nbsp;to&nbsp;that,&nbsp;and&nbsp;then&nbsp;federate&nbsp;with&nbsp;those&nbsp;two&nbsp;exchanges.&nbsp;You&nbsp;won&amp;#39;t&nbsp;share&nbsp;the&nbsp;upstream&nbsp;queues&nbsp;but&nbsp;you&amp;#39;ll&nbsp;get&nbsp;a&nbsp;similar&nbsp;round-robinning&nbsp;effect&nbsp;(the&nbsp;difference&nbsp;being&nbsp;that&nbsp;if&nbsp;one&nbsp;link&nbsp;goes&nbsp;down&nbsp;messages&nbsp;will&nbsp;back&nbsp;up&nbsp;for&nbsp;it,&nbsp;rather&nbsp;than&nbsp;the&nbsp;other&nbsp;link&nbsp;taking&nbsp;the&nbsp;strain).&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Cheers,&nbsp;Simon&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Simon&nbsp;MacMullen&lt;br&gt;<br>
RabbitMQ,&nbsp;VMware&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
rabbitmq-discuss&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:rabbitmq-discuss@lists.rabbitmq.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq-discuss@lists.&lt;u&gt;&lt;/u&gt;rabbitmq.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.rabbitmq.com/&lt;u&gt;&lt;/u&gt;cgi-bin/mailman/listinfo/&lt;u&gt;&lt;/u&gt;rabbitmq-discuss&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
