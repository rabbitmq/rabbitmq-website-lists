# HG changeset patch
# User Valentino Volonghi aka dialtone <valentino@adroll.com>
# Date 1228356904 28800
# Node ID 25c22ea30d09b4c437bedf13d66c4d3ec3f50108
# Parent  9100654b9cc2cef3223fa2a09c2b5fc05133bd3c
Allow creation of durable queues from the API.

diff -r 9100654b9cc2 -r 25c22ea30d09 src/lib_amqp.erl
--- a/src/lib_amqp.erl	Wed Dec 03 18:14:41 2008 -0800
+++ b/src/lib_amqp.erl	Wed Dec 03 18:15:04 2008 -0800
@@ -122,8 +122,11 @@
     ok.
 
 declare_queue(Channel, Q) ->
+    declare_queue(Channel, Q, false).
+
+declare_queue(Channel, Q, Durable) ->
     QueueDeclare = #'queue.declare'{queue = Q,
-                                    passive = false, durable = false,
+                                    passive = false, durable = Durable,
                                     exclusive = false, auto_delete = false,
                                     nowait = false, arguments = []},
     #'queue.declare_ok'{queue = Q1}
