# HG changeset patch
# User Valentino Volonghi aka dialtone <valentino@adroll.com>
# Date 1228356777 28800
# Node ID d8df7adac83d5bd99b6b95566d9f3ea12f41741b
# Parent  79f01d84832ce5fae1cdc5e7e907093dd6157729
More flexible connection API

diff -r 79f01d84832c -r d8df7adac83d src/lib_amqp.erl
--- a/src/lib_amqp.erl	Wed Dec 03 18:11:22 2008 -0800
+++ b/src/lib_amqp.erl	Wed Dec 03 18:12:57 2008 -0800
@@ -7,10 +7,16 @@
 -compile(export_all).
 
 start_connection() ->
-    amqp_connection:start("guest", "guest").
+    start_connection("guest", "guest", direct).
 
 start_connection(Host) ->
-    amqp_connection:start("guest", "guest", Host).
+    start_connection("guest", "guest", Host).
+
+start_connection(User, Password, Host) ->
+    case Host of
+        direct -> amqp_connection:start(User, Password);
+        _ -> amqp_connection:start(User, Password, Host)
+    end.
 
 start_channel(Connection) ->
     amqp_connection:open_channel(Connection).
