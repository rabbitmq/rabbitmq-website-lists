# HG changeset patch
# User Valentino Volonghi aka dialtone <valentino@adroll.com>
# Date 1228356812 28800
# Node ID 429359e784189b58ce7a0b788908af538ab48de8
# Parent  d8df7adac83d5bd99b6b95566d9f3ea12f41741b
Support durable exchange

diff -r d8df7adac83d -r 429359e78418 src/lib_amqp.erl
--- a/src/lib_amqp.erl	Wed Dec 03 18:12:57 2008 -0800
+++ b/src/lib_amqp.erl	Wed Dec 03 18:13:32 2008 -0800
@@ -25,9 +25,12 @@
     declare_exchange(Channel, X, <<"direct">>).
 
 declare_exchange(Channel, X, Type) ->
+    declare_exchange(Channel, X, Type, false).
+
+declare_exchange(Channel, X, Type, Durable) ->
     ExchangeDeclare = #'exchange.declare'{exchange = X,
                                           type = Type,
-                                          passive = false, durable = false,
+                                          passive = false, durable = Durable,
                                           auto_delete = false, internal = false,
                                           nowait = false, arguments = []},
     amqp_channel:call(Channel, ExchangeDeclare).
