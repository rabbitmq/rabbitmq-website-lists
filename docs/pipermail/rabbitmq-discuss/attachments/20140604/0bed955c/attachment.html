<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;use&nbsp;the&nbsp;autorecovery&nbsp;feature.. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;public&nbsp;ConnectToRabbitMq(String&nbsp;sServeltName,&nbsp;String&nbsp;sDeviceName,&nbsp;Object&nbsp;oStreamType)&nbsp;throws&nbsp;IOException&nbsp;{&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;/*&nbsp;*****create&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;server/broker:******************/&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;ConnectionFactory&nbsp;factory&nbsp;=&nbsp;new&nbsp;ConnectionFactory();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;factory.setAutomaticRecoveryEnabled(true);&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;factory.setUsername(USERNAME);//the&nbsp;AMQP&nbsp;user&nbsp;name&nbsp;used&nbsp;when&nbsp;connecting&nbsp;to&nbsp;the&nbsp;broker&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;factory.setPassword(PASSWORD);//the&nbsp;password&nbsp;used&nbsp;when&nbsp;connecting&nbsp;to&nbsp;the&nbsp;broker&lt;/div&gt;&lt;div&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;factory.setVirtualHost(VHOST);//the&nbsp;virtual&nbsp;host&nbsp;used&nbsp;when&nbsp;connecting&nbsp;to&nbsp;the&nbsp;broker&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;factory.setHost(HOST);//connect&nbsp;to&nbsp;a&nbsp;broker&nbsp;on&nbsp;the&nbsp;local&nbsp;machine&nbsp;-&nbsp;hence&nbsp;the&nbsp;localhost.&nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;factory.setPort(PORT);//the&nbsp;default&nbsp;port&nbsp;used&nbsp;for&nbsp;connections&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;connection&nbsp;=&nbsp;factory.newConnection(); &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;channel&nbsp;=&nbsp;connection.createChannel();//&nbsp;data&nbsp;channel,&nbsp;opens&nbsp;channel&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;/*&nbsp;*****create&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;server/broker:******************/&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/*&nbsp;******declare&nbsp;que&nbsp;and&nbsp;exch******************/&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;exchangeName&nbsp;=&nbsp;sDeviceName;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;queueName&nbsp;=&nbsp;new&nbsp;StringBuffer(sServeltName).append(&#39;_&#39;).append(exchangeName).toString();&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.exchangeDeclare(exchangeName,&nbsp;&quot;topic&quot;,&nbsp;false,&nbsp;false,&nbsp;null); &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.queueDeclare(queueName,&nbsp;false,&nbsp;false,&nbsp;true,&nbsp;null);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/*&nbsp;******declare&nbsp;que&nbsp;and&nbsp;exch******************/&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;String&nbsp;replytoBindinKey&nbsp;=&nbsp;SOMEKEY;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.queueBind(queueName,&nbsp;exchangeName,&nbsp;replytoBindinKey);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;consumer&nbsp;=&nbsp;new&nbsp;QueueingConsumer(channel);&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;channel.basicConsume(queueName,&nbsp;true,&nbsp;consumer);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;do&nbsp;is.., &lt;/div&gt;&lt;div&gt;I&nbsp;publish&nbsp;a&nbsp;message(request)&nbsp;to&nbsp;a&nbsp;particular&nbsp;exchange..,&nbsp;it&nbsp;goes&nbsp;to&nbsp;server&nbsp;and&nbsp;in&nbsp;server&nbsp;side..,&nbsp;based&nbsp;on&nbsp;request&nbsp;published&nbsp;and&nbsp;routingkey,,&nbsp;response&nbsp;is&nbsp;published&nbsp;from&nbsp;server&nbsp;side..&lt;/div&gt;<br>
&lt;div&gt;and&nbsp;I&nbsp;receive&nbsp;the&nbsp;response..&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;publish&nbsp;I&nbsp;use&nbsp; --&gt;&nbsp;channel.basicPublish&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;to&nbsp;receive&nbsp;message&nbsp;what&nbsp;I&nbsp;do&nbsp;is&nbsp;--&gt; &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;while(true){&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;QueueingConsumer.Delivery&nbsp;delivery&nbsp;=&nbsp;consumer.nextDelivery();&lt;/div&gt;&lt;div&gt;..&lt;/div&gt;&lt;div&gt;..&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;when&nbsp;I&nbsp;disconnect&nbsp;the&nbsp;network&nbsp;cable,&nbsp;say&nbsp;it&nbsp;gets&nbsp;disconnected&nbsp;when&nbsp;both&nbsp;receiving&nbsp;and&nbsp;publishing&nbsp;takes&nbsp;place..&nbsp;(Message&nbsp;published&nbsp;and&nbsp;received&nbsp;are&nbsp;different&nbsp;messages(same&nbsp;exchange))&lt;/div&gt;<br>
&lt;div&gt; I&nbsp;get&nbsp;the&nbsp;following&nbsp;message.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Caught&nbsp;an&nbsp;exception&nbsp;during&nbsp;connection&nbsp;recovery!&lt;/div&gt;&lt;div&gt;java.net.NoRouteToHostException:&nbsp;No&nbsp;route&nbsp;to&nbsp;host:&nbsp;connect&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.PlainSocketImpl.socketConnect(Native&nbsp;Method)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.Socket.connect(Socket.java:519)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.FrameHandlerFactory.create(FrameHandlerFactory.java:32)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.recovery.RecoveryAwareAMQConnectionFactory.newConnection(RecoveryAwareAMQConnectionFactory.java:34)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.recovery.AutorecoveringConnection.recoverConnection(AutorecoveringConnection.java:388)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.recovery.AutorecoveringConnection.beginAutomaticRecovery(AutorecoveringConnection.java:360)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.recovery.AutorecoveringConnection.access$000(AutorecoveringConnection.java:48)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.recovery.AutorecoveringConnection$1.shutdownCompleted(AutorecoveringConnection.java:345)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.ShutdownNotifierComponent.notifyListeners(ShutdownNotifierComponent.java:75)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:572)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.lang.Thread.run(Thread.java:619)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;on&nbsp;connecting&nbsp;back..,&nbsp;if&nbsp;server&nbsp;side&nbsp;publish&nbsp;message&nbsp;to&nbsp;tat&nbsp;particular&nbsp;exchange..,&nbsp;wont&nbsp;receive&nbsp;any&nbsp;message&nbsp;in&nbsp;my&nbsp;application,,&nbsp;and&nbsp;I&nbsp;get&nbsp;this&nbsp;error&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;DefaultExceptionHandler:&nbsp;Consumer&nbsp;com.rabbitmq.client.QueueingConsumer@137d090&nbsp;(amq.ctag-gl009sKgA7rr2PyKA1MxAS)&nbsp;method&nbsp;handleDelivery&nbsp;for&nbsp;channel&nbsp;AMQChannel(amqp://guest@localhost:5672/,1)&nbsp;threw&nbsp;an&nbsp;exception&nbsp;for&nbsp;channel&nbsp;AMQChannel(amqp://guest@localhost:5672/,1):&lt;/div&gt;<br>
&lt;div&gt;com.rabbitmq.client.ShutdownSignalException:&nbsp;connection&nbsp;error&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.QueueingConsumer.checkShutdown(QueueingConsumer.java:172)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.QueueingConsumer.handleDelivery(QueueingConsumer.java:124)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.ConsumerDispatcher$5.run(ConsumerDispatcher.java:140)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:85)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.lang.Thread.run(Thread.java:619)&lt;/div&gt;&lt;div&gt;Caused&nbsp;by:&nbsp;java.net.SocketException:&nbsp;Software&nbsp;caused&nbsp;connection&nbsp;abort:&nbsp;recv&nbsp;failed&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.SocketInputStream.socketRead0(Native&nbsp;Method)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.net.SocketInputStream.read(SocketInputStream.java:129)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.io.BufferedInputStream.fill(BufferedInputStream.java:218)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.io.BufferedInputStream.read(BufferedInputStream.java:237)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;java.io.DataInputStream.readUnsignedByte(DataInputStream.java:271)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.Frame.readFrom(Frame.java:95)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:139)&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;at&nbsp;com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:532)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;...&nbsp;1&nbsp;more&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;On&nbsp;connecting&nbsp;back&nbsp;the&nbsp;network&nbsp;cable..,&nbsp;connection&nbsp;,&nbsp;channel,&nbsp;exchange,&nbsp;que&nbsp;and&nbsp;binding&nbsp;cant&nbsp;be&nbsp;recovered?&nbsp;Not&nbsp;getting&nbsp;where&nbsp;I&nbsp;am&nbsp;going&nbsp;wrong..&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
