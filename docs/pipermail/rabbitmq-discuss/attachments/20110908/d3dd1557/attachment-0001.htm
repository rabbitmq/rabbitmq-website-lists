<tt>
&lt;br&gt;&lt;br&gt;On&nbsp;Thursday,&nbsp;September&nbsp;8,&nbsp;2011&nbsp;8:07:12&nbsp;AM&nbsp;UTC-4,&nbsp;Matthew&nbsp;Sackman&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;p&gt;Rabbit&nbsp;shouldn't&nbsp;continue&nbsp;to&nbsp;chew&nbsp;up&nbsp;more&nbsp;and&nbsp;more&nbsp;memory&nbsp;so&nbsp;I&nbsp;suspect&lt;br&gt;some&nbsp;sort&nbsp;of&nbsp;resource&nbsp;is&nbsp;being&nbsp;created&nbsp;and&nbsp;not&nbsp;destroyed.&nbsp;Could&nbsp;you&lt;br&gt;check&nbsp;things&nbsp;like&nbsp;the&nbsp;number&nbsp;of&nbsp;queues,&nbsp;the&nbsp;number&nbsp;of&nbsp;connections&nbsp;and&lt;br&gt;channels&nbsp;etc&nbsp;and&nbsp;that&nbsp;those&nbsp;numbers&nbsp;are&nbsp;not&nbsp;growing&nbsp;constantly?&lt;/p&gt;&lt;/blockquote&gt;&lt;div&gt;Connections&nbsp;remain&nbsp;constant&nbsp;at&nbsp;50.&nbsp;I&nbsp;only&nbsp;create&nbsp;about&nbsp;a&nbsp;dozen&nbsp;or&nbsp;so&nbsp;queues.&nbsp;Channels&nbsp;do&nbsp;increase&nbsp;over&nbsp;time.&nbsp;They&nbsp;start&nbsp;at&nbsp;386&nbsp;and&nbsp;grow&nbsp;to&nbsp;445&nbsp;by&nbsp;the&nbsp;time&nbsp;I&nbsp;hit&nbsp;the&nbsp;high&nbsp;memory&nbsp;mark.&nbsp;Despite&nbsp;the&nbsp;fact&nbsp;that&nbsp;that&nbsp;number&nbsp;does&nbsp;grow,&nbsp;it&nbsp;doesn't&nbsp;SEEM&nbsp;unreasonable.&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;p&gt;96GB&nbsp;is&nbsp;an&nbsp;awful&nbsp;lot&nbsp;of&nbsp;memory!&lt;/p&gt;&lt;/blockquote&gt;&lt;div&gt;:-D&amp;nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;p&gt;Agreed.&nbsp;If&nbsp;you&nbsp;can&nbsp;provoke&nbsp;this&nbsp;to&nbsp;happen&nbsp;again,&nbsp;then&nbsp;when&nbsp;you&nbsp;reach&lt;br&gt;&lt;/p&gt;&lt;p&gt;that&nbsp;point&nbsp;could&nbsp;you&nbsp;run&nbsp;&quot;rabbitmqctl&nbsp;report&quot;&nbsp;and&nbsp;send&nbsp;us&nbsp;the&nbsp;output&lt;br&gt;(maybe&nbsp;off&nbsp;list&nbsp;if&nbsp;you&nbsp;see&nbsp;anything&nbsp;sensitive&nbsp;in&nbsp;there&nbsp;and/or&nbsp;it's&lt;br&gt;huge).&lt;/p&gt;&lt;/blockquote&gt;&lt;div&gt;Unfortunately,&nbsp;I'm&nbsp;unable&nbsp;to&nbsp;send&nbsp;the&nbsp;output&nbsp;of&nbsp;that.&nbsp;But&nbsp;I&nbsp;did&nbsp;generate&nbsp;it.&nbsp;Is&nbsp;there&nbsp;anything&nbsp;in&nbsp;particular&nbsp;I&nbsp;should&nbsp;be&nbsp;looking&nbsp;for?&nbsp;I&nbsp;looked&nbsp;through&nbsp;it&nbsp;and&nbsp;I&nbsp;don't&nbsp;see&nbsp;anything&nbsp;that&nbsp;looks&nbsp;out&nbsp;of&nbsp;the&nbsp;ordinary,&nbsp;at&nbsp;least&nbsp;as&nbsp;far&nbsp;as&nbsp;I'm&nbsp;concerned&nbsp;:)&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;reports&nbsp;that&nbsp;rabbit&nbsp;is&nbsp;using&nbsp;about&nbsp;70G&nbsp;of&nbsp;memory&nbsp;(which&nbsp;is&nbsp;where&nbsp;the&nbsp;high&nbsp;watermark&nbsp;is&nbsp;set),&nbsp;I&nbsp;think&nbsp;around&nbsp;20G&nbsp;are&nbsp;used&nbsp;by&nbsp;'processes'&nbsp;and&nbsp;another&nbsp;40G+&nbsp;are&nbsp;used&nbsp;by&nbsp;'binary'&nbsp;I&nbsp;think?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;never&nbsp;mentioned&nbsp;what&nbsp;versions&nbsp;I'm&nbsp;using:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;RabbitMQ:&nbsp;2.5.1&lt;/div&gt;&lt;div&gt;Erlang:&nbsp;R14B03&lt;/div&gt;&lt;div&gt;Spring&nbsp;AMQP:&nbsp;1.0.0.RC2&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;previously&nbsp;using&nbsp;R13B03&nbsp;(or&nbsp;04)&nbsp;and&nbsp;that&nbsp;displayed&nbsp;the&nbsp;problem&nbsp;much&nbsp;faster&nbsp;and&nbsp;additionally&nbsp;would&nbsp;crash&nbsp;RabbitMQ&nbsp;when&nbsp;I&nbsp;started&nbsp;hitting&nbsp;that&nbsp;watermark&nbsp;--&nbsp;probably&nbsp;because&nbsp;I&nbsp;had&nbsp;it&nbsp;set&nbsp;so&nbsp;high&nbsp;(0.75).&nbsp;Using&nbsp;R14B03,&nbsp;I&nbsp;can&nbsp;survive&nbsp;much&nbsp;much&nbsp;longer&nbsp;and&nbsp;rabbit&nbsp;no&nbsp;longer&nbsp;crashes.&nbsp;It&nbsp;just&nbsp;sits&nbsp;there&nbsp;blocking&nbsp;producers,&nbsp;waiting&nbsp;for&nbsp;consumers&nbsp;to&nbsp;consume,&nbsp;yet&nbsp;there's&nbsp;nothing&nbsp;to&nbsp;consume!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Justin&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</tt>
