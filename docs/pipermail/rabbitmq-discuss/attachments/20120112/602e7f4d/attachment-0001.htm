<tt>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Hi,&nbsp;I&nbsp;was&nbsp;hoping&nbsp;you&nbsp;guys&nbsp;would&nbsp;be&nbsp;able&nbsp;to&nbsp;answer&nbsp;some&nbsp;quick&nbsp;questions&nbsp;about&nbsp;an&nbsp;issue&nbsp;we're&nbsp;having.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We've&nbsp;recently&nbsp;started&nbsp;using&nbsp;mirrored&nbsp;queues&nbsp;across&nbsp;two&nbsp;RabbitMQ&nbsp;instances&nbsp;on&nbsp;two&nbsp;servers,&nbsp;and&nbsp;it's&nbsp;working&nbsp;really&nbsp;well&nbsp;except&nbsp;for&nbsp;when&nbsp;publish&nbsp;rates&nbsp;are&nbsp;really&nbsp;high&nbsp;for&nbsp;a&nbsp;longer&nbsp;period&nbsp;of&nbsp;time.&nbsp;At&nbsp;that&nbsp;point&nbsp;RabbitMQ&nbsp;starts&nbsp;eating&nbsp;a&nbsp;lot&nbsp;of&nbsp;memory&nbsp;on&nbsp;the&nbsp;master&nbsp;node&nbsp;until&nbsp;it&nbsp;hits&nbsp;our&nbsp;high&nbsp;watermark&nbsp;limit&nbsp;of&nbsp;18.9GB,&nbsp;at&nbsp;which&nbsp;point&nbsp;things&nbsp;basically&nbsp;stop&nbsp;working.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;theory&nbsp;of&nbsp;what&nbsp;is&nbsp;happening&nbsp;is&nbsp;that&nbsp;when&nbsp;RabbitMQ&nbsp;can't&nbsp;process&nbsp;incoming&nbsp;publish&nbsp;requests&nbsp;fast&nbsp;enough,&nbsp;it&nbsp;caches&nbsp;the&nbsp;raw&nbsp;TCP&nbsp;packets&nbsp;in&nbsp;memory&nbsp;until&nbsp;it&nbsp;can&nbsp;deal&nbsp;with&nbsp;them&nbsp;and&nbsp;direct&nbsp;it&nbsp;to&nbsp;the&nbsp;queue(s)&nbsp;in&nbsp;question.&nbsp;And&nbsp;I'm&nbsp;assuming&nbsp;the&nbsp;fact&nbsp;that&nbsp;we&nbsp;are&nbsp;using&nbsp;mirrored&nbsp;queues&nbsp;adds&nbsp;overhead&nbsp;in&nbsp;dealing&nbsp;with&nbsp;a&nbsp;publish&nbsp;request&nbsp;as&nbsp;it&nbsp;needs&nbsp;to&nbsp;be&nbsp;synced&nbsp;to&nbsp;the&nbsp;other&nbsp;node(s).&nbsp;Am&nbsp;I&nbsp;right?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;theory&nbsp;is&nbsp;based&nbsp;on&nbsp;the&nbsp;fact&nbsp;that&nbsp;we&nbsp;could&nbsp;deal&nbsp;with&nbsp;much&nbsp;higher&nbsp;publish&nbsp;rates&nbsp;without&nbsp;and&nbsp;problems&nbsp;before&nbsp;we&nbsp;switched&nbsp;to&nbsp;mirrored&nbsp;queues.&nbsp;And&nbsp;the&nbsp;fact&nbsp;that&nbsp;we've&nbsp;had&nbsp;a&nbsp;few&nbsp;points&nbsp;when&nbsp;memory&nbsp;usage&nbsp;has&nbsp;been&nbsp;excessive&nbsp;we've&nbsp;seen&nbsp;queues&nbsp;that&nbsp;were&nbsp;completely&nbsp;empty&nbsp;according&nbsp;to&nbsp;the&nbsp;management&nbsp;plugin,&nbsp;but&nbsp;our&nbsp;workers&nbsp;were&nbsp;still&nbsp;processing&nbsp;+1000&nbsp;messages/sec&nbsp;for&nbsp;a&nbsp;good&nbsp;hour,&nbsp;all&nbsp;the&nbsp;while&nbsp;the&nbsp;management&nbsp;plugin&nbsp;said&nbsp;no&nbsp;incoming&nbsp;messages,&nbsp;and&nbsp;+1000&nbsp;msg/s&nbsp;get/acks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;:)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-jim&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt>
