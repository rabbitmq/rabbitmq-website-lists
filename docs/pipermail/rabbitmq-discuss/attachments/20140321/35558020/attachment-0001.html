<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hello,&lt;br&gt;&lt;/div&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;decide&nbsp;between&nbsp;using&nbsp;Shovel&nbsp;or&nbsp;Federation.&nbsp;Our&nbsp;use&nbsp;case&nbsp;is&nbsp;as&nbsp;follows:&lt;br&gt;&lt;/div&gt;We&nbsp;have&nbsp;two&nbsp;datacenters:&nbsp;east&nbsp;coast&nbsp;and&nbsp;west&nbsp;coast&nbsp;in&nbsp;the&nbsp;US.&nbsp;We&nbsp;have&nbsp;two&nbsp;clustered&nbsp;rabbitmq&nbsp;nodes&nbsp;in&nbsp;each&nbsp;site.&nbsp;We&nbsp;have&nbsp;messages&nbsp;which&nbsp;are&nbsp;published&nbsp;at&nbsp;each&nbsp;site&nbsp;which&nbsp;need&nbsp;to&nbsp;be&nbsp;reliably&nbsp;consumed&nbsp;at&nbsp;both&nbsp;sites.&nbsp;For&nbsp;example,&nbsp;a&nbsp;message&nbsp;published&nbsp;to&nbsp;exchange&nbsp;A&nbsp;at&nbsp;Site&nbsp;A&nbsp;will&nbsp;need&nbsp;to&nbsp;be&nbsp;consumed&nbsp;at&nbsp;both&nbsp;site&nbsp;A&nbsp;and&nbsp;site&nbsp;B.&nbsp;The&nbsp;messages,&nbsp;exchanges,&nbsp;and&nbsp;queues&nbsp;involved&nbsp;need&nbsp;to&nbsp;be&nbsp;durable,&nbsp;mirrored,&nbsp;etc.&nbsp;in&nbsp;order&nbsp;to&nbsp;ensure&nbsp;reliable&nbsp;delivery&nbsp;of&nbsp;each&nbsp;and&nbsp;every&nbsp;message.&nbsp;&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;Initially,&nbsp;I&nbsp;had&nbsp;leaned&nbsp;toward&nbsp;the&nbsp;shovel&nbsp;plugin&nbsp;for&nbsp;a&nbsp;couple&nbsp;of&nbsp;reasons.&lt;br&gt;&lt;/div&gt;1)&nbsp;The&nbsp;documentation&nbsp;for&nbsp;shovel&nbsp;seems&nbsp;for&nbsp;straightforward.&nbsp;Using&nbsp;Shovel,&nbsp;I&nbsp;know&nbsp;what&nbsp;happens&nbsp;to&nbsp;the&nbsp;messages&nbsp;in&nbsp;transit&nbsp;because&nbsp;they&nbsp;follow&nbsp;the&nbsp;same&nbsp;message&nbsp;flow&nbsp;as&nbsp;&quot;normal&quot;&nbsp;messages.&nbsp;The&nbsp;plan&nbsp;is&nbsp;to&nbsp;have&nbsp;a&nbsp;fanout&nbsp;exchange&nbsp;at&nbsp;each&nbsp;site&nbsp;which&nbsp;publishes&nbsp;to&nbsp;both&nbsp;a&nbsp;queue&nbsp;for&nbsp;local&nbsp;consumption&nbsp;and&nbsp;a&nbsp;queue&nbsp;that&nbsp;is&nbsp;then&nbsp;shoveled&nbsp;across&nbsp;the&nbsp;WAN&nbsp;to&nbsp;an&nbsp;exchange&nbsp;than&nbsp;points&nbsp;to&nbsp;just&nbsp;the&nbsp;queue&nbsp;for&nbsp;local&nbsp;consumption&nbsp;and&nbsp;vice&nbsp;versa.&nbsp;&lt;br&gt;<br>
&lt;/div&gt;Using&nbsp;Federation,&nbsp;I&nbsp;am&nbsp;not&nbsp;fully&nbsp;aware&nbsp;of&nbsp;what&nbsp;would&nbsp;happen.&nbsp;Say&nbsp;I&nbsp;have&nbsp;a&nbsp;fanout&nbsp;exchange&nbsp;configured&nbsp;at&nbsp;Site&nbsp;A.&nbsp;A&nbsp;queue&nbsp;at&nbsp;Site&nbsp;A&nbsp;connects&nbsp;to&nbsp;this&nbsp;queue&nbsp;for&nbsp;local&nbsp;consumption&nbsp;of&nbsp;the&nbsp;messages.&nbsp;Site&nbsp;B&nbsp;then&nbsp;attaches&nbsp;to&nbsp;the&nbsp;exchange&nbsp;via&nbsp;federation.&nbsp;My&nbsp;understanding&nbsp;is&nbsp;that&nbsp;there&nbsp;is&nbsp;then&nbsp;an&nbsp;upstream&nbsp;queue&nbsp;created.&nbsp;If&nbsp;Site&nbsp;B&nbsp;then&nbsp;goes&nbsp;offline,&nbsp;what&nbsp;happens&nbsp;to&nbsp;the&nbsp;messages&nbsp;published&nbsp;to&nbsp;the&nbsp;fanout&nbsp;exchange&nbsp;in&nbsp;Site&nbsp;A.&nbsp;Will&nbsp;the&nbsp;messages&nbsp;sit&nbsp;in&nbsp;the&nbsp;upstream&nbsp;queue&nbsp;until&nbsp;both&nbsp;the&nbsp;queue&nbsp;and&nbsp;the&nbsp;remote&nbsp;are&nbsp;available&nbsp;to&nbsp;fanout&nbsp;messages&nbsp;to?&nbsp;&lt;br&gt;<br>
&lt;br&gt;2)&nbsp;Shovel&nbsp;has&nbsp;&quot;More&nbsp;Control&quot;&nbsp;according&nbsp;to&nbsp;the&nbsp;documentation.&lt;br&gt;&lt;br&gt;&lt;/div&gt;My&nbsp;questions&nbsp;are:&nbsp;Am&nbsp;I&nbsp;missing&nbsp;the&nbsp;boat?&nbsp;Would&nbsp;Federation&nbsp;be&nbsp;much&nbsp;more&nbsp;simple&nbsp;to&nbsp;setup?&nbsp;Would&nbsp;Federation&nbsp;even&nbsp;work&nbsp;in&nbsp;this&nbsp;scenario?&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;In&nbsp;addition:&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;configure&nbsp;this&nbsp;whole&nbsp;thing&nbsp;via&nbsp;Puppet.&nbsp;I&nbsp;know&nbsp;how&nbsp;to&nbsp;do&nbsp;it&nbsp;in&nbsp;the&nbsp;rabbitmq&nbsp;config&nbsp;for&nbsp;shovel&nbsp;but&nbsp;wouldn&#39;t&nbsp;this&nbsp;require&nbsp;a&nbsp;restart&nbsp;when&nbsp;configuration&nbsp;changes&nbsp;are&nbsp;made?&nbsp;Also,&nbsp;would&nbsp;the&nbsp;federation&nbsp;configuration&nbsp;methods&nbsp;via&nbsp;the&nbsp;API&nbsp;lend&nbsp;itself&nbsp;to&nbsp;more&nbsp;simple&nbsp;Puppetization&nbsp;through&nbsp;simple&nbsp;API&nbsp;calls&nbsp;for&nbsp;Federation&nbsp;setup?&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;Thanks,&lt;br&gt;Danny&lt;br&gt;&lt;/div&gt;<br>

</tt>
