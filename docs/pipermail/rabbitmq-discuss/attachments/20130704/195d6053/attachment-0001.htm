<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;all,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;ubuntu&nbsp;boxes&nbsp;which,&nbsp;for&nbsp;disk&nbsp;life&nbsp;consideration,&nbsp;I&nbsp;have&nbsp;set&nbsp;the&nbsp;vm.dirty_writeback_centisecs&nbsp;from&nbsp;5sec&nbsp;to&nbsp;30min.&nbsp;However,&nbsp;when&nbsp;the&nbsp;boxes&nbsp;have&nbsp;power&nbsp;outage&nbsp;and&nbsp;restored,&nbsp;rabbitmq&nbsp;refused&nbsp;to&nbsp;start&nbsp;up,&nbsp;giving&nbsp;error&nbsp;message&nbsp;in&nbsp;log:&nbsp;mnesia_recover&nbsp;crashed.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;had&nbsp;to&nbsp;delete&nbsp;schema.DAT&nbsp;under&nbsp;mnesia&nbsp;directory&nbsp;before&nbsp;I&nbsp;can&nbsp;start&nbsp;it&nbsp;again&nbsp;but&nbsp;then&nbsp;all&nbsp;my&nbsp;stored&nbsp;messages&nbsp;in&nbsp;persistent&nbsp;queues&nbsp;are&nbsp;lost.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;do&nbsp;disk&nbsp;sync&nbsp;every&nbsp;minute&nbsp;or&nbsp;two,&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;issue&nbsp;-&nbsp;rabbitmq&nbsp;can&nbsp;survive&nbsp;every&nbsp;power&nbsp;cycle.&nbsp;I&nbsp;like&nbsp;to&nbsp;understand&nbsp;how&nbsp;rabbitmq&nbsp;works&nbsp;to&nbsp;survive&nbsp;power&nbsp;cycle&nbsp;and&nbsp;if&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;tune&nbsp;it&nbsp;to&nbsp;survive&nbsp;with&nbsp;longer&nbsp;sync&nbsp;time&nbsp;without&nbsp;losing&nbsp;any&nbsp;stored&nbsp;messages&nbsp;in&nbsp;queue.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;system:&lt;/div&gt;&lt;div&gt;Ubuntu&nbsp;10.04.4&nbsp;with&nbsp;kernel&nbsp;2.6.32-24-generic-pae&lt;/div&gt;&lt;div&gt;rabbitmq-server&nbsp;3.1.1&nbsp;installed&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://rabbitmq.com/debian&quot;&nbsp;target=&quot;_blank&quot;&gt;rabbitmq.com/debian&lt;/a&gt;&nbsp;testing&nbsp;main&nbsp;repository.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;erlang&nbsp;R13B03&nbsp;(erts-5.7.4)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;in&nbsp;advance.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif&quot;&gt;--&lt;/span&gt;&lt;div&gt;<br>
&lt;span&nbsp;style=&quot;color:rgb(34,34,34);font-size:13px;font-family:arial,sans-serif&quot;&gt;Tao&nbsp;Fan&lt;/span&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
