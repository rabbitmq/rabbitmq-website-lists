<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] basic design question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20basic%20design%20question&In-Reply-To=42fa2da60904212033r4357a442n1c4f9ba684897722%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003383.html">
   <LINK REL="Next"  HREF="003401.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] basic design question</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20basic%20design%20question&In-Reply-To=42fa2da60904212033r4357a442n1c4f9ba684897722%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] basic design question">matthias at lshift.net
       </A><BR>
    <I>Wed Apr 22 07:29:24 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003383.html">[rabbitmq-discuss] basic design question
</A></li>
        <LI>Next message: <A HREF="003401.html">[rabbitmq-discuss] basic design question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3385">[ date ]</a>
              <a href="thread.html#3385">[ thread ]</a>
              <a href="subject.html#3385">[ subject ]</a>
              <a href="author.html#3385">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Isaac,

Isaac Cambron wrote:
&gt;<i> I did get the tip revision to work
</I>
Careful. Please make sure you use the default branch, i.e. do
   hg update -C default

&gt;<i>                 ch.BasicConsume(&quot;myqueue&quot;, true, null, consumer);
</I>&gt;<i>                 ch.BasicQos(0, 1, false);
</I>
There's your problem:

1) I wrote &quot;set the basic.qos prefetch count to 1, *and then* subscribe 
to [...] the queues&quot;, i.e. you need to issue the BasicQos *before* the 
BasicConsume.

2) The second parameter to basicConsume, noAck, must be set to false, 
otherwise the server will automatically ack the messages as soon as it 
sends them, which makes the qos settings ineffective - I suggest you 
simply use the three-arg version of BasicConsume, which sets noAck=false.


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003383.html">[rabbitmq-discuss] basic design question
</A></li>
	<LI>Next message: <A HREF="003401.html">[rabbitmq-discuss] basic design question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3385">[ date ]</a>
              <a href="thread.html#3385">[ thread ]</a>
              <a href="subject.html#3385">[ subject ]</a>
              <a href="author.html#3385">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
