<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] millions of unack'd messages in a day --	disk store instead of ram?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20millions%20of%20unack%27d%20messages%20in%20a%20day%20--%0A%09disk%20store%20instead%20of%20ram%3F&In-Reply-To=dbd9700a0904270851h2c89488es3a41877e2c390b0c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003461.html">
   <LINK REL="Next"  HREF="003485.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] millions of unack'd messages in a day --	disk store instead of ram?</H1>
    <B>Brian Whitman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20millions%20of%20unack%27d%20messages%20in%20a%20day%20--%0A%09disk%20store%20instead%20of%20ram%3F&In-Reply-To=dbd9700a0904270851h2c89488es3a41877e2c390b0c%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] millions of unack'd messages in a day --	disk store instead of ram?">brian at echonest.com
       </A><BR>
    <I>Thu Apr 30 16:11:08 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003461.html">[rabbitmq-discuss] millions of unack'd messages in a day --	disk store instead of ram?
</A></li>
        <LI>Next message: <A HREF="003485.html">[rabbitmq-discuss] millions of unack'd messages in a day --	disk store instead of ram?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3484">[ date ]</a>
              <a href="thread.html#3484">[ thread ]</a>
              <a href="subject.html#3484">[ subject ]</a>
              <a href="author.html#3484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just fyi to follow up to this
I created a 32GB swap on an EBS volume on an amzn mid-level instance (8GB
RAM)

I was able to hammer rabbit with far more messages than I've ever been able
to store. Once it crossed into swap amazingly write speed only suffered
slightly (probably because the old messages were swapped out, not the new
ones), but get speed did suffer. The important part is that the server
stayed up, even after using 20GB of virtual RAM (millions of large messages)

I did not alter rabbit or the configuration in any way. I am using the
version in apt. As a matter of fact, that memory warn config parameter was
not recognized by rabbit and would put a warning in the log when it started.




On Mon, Apr 27, 2009 at 11:51 AM, Brian Whitman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">brian at echonest.com</A>&gt; wrote:

&gt;<i> On Mon, Apr 27, 2009 at 10:04 AM, Alexis Richardson &lt;
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis.richardson at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Brian
</I>&gt;&gt;<i> You may find this blog post relevant:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.lshift.net/blog/2009/04/02/cranial-surgery-giving-rabbit-more-memory">http://www.lshift.net/blog/2009/04/02/cranial-surgery-giving-rabbit-more-memory</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ah great, putting an EBS swap behind it is probably a good temp solution.
</I>&gt;<i> I'll give that a go and run some tests. Thanks for the pointer. I wouldn't
</I>&gt;<i> recommend anyone use S3 for this-- we max out at about 40-50 &quot;keys&quot;/files a
</I>&gt;<i> second from other ec2 instances.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090430/3bd05d3a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090430/3bd05d3a/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003461.html">[rabbitmq-discuss] millions of unack'd messages in a day --	disk store instead of ram?
</A></li>
	<LI>Next message: <A HREF="003485.html">[rabbitmq-discuss] millions of unack'd messages in a day --	disk store instead of ram?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3484">[ date ]</a>
              <a href="thread.html#3484">[ thread ]</a>
              <a href="subject.html#3484">[ subject ]</a>
              <a href="author.html#3484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
