<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Flow Control in RabbitMQ 1.5.3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Flow%20Control%20in%20RabbitMQ%201.5.3&In-Reply-To=49D2A5A2.3080408%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003258.html">
   <LINK REL="Next"  HREF="003260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Flow Control in RabbitMQ 1.5.3</H1>
    <B>Chris Pettitt</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Flow%20Control%20in%20RabbitMQ%201.5.3&In-Reply-To=49D2A5A2.3080408%40lshift.net"
       TITLE="[rabbitmq-discuss] Flow Control in RabbitMQ 1.5.3">cpettitt at gmail.com
       </A><BR>
    <I>Wed Apr  1 18:07:58 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003258.html">[rabbitmq-discuss] Flow Control in RabbitMQ 1.5.3
</A></li>
        <LI>Next message: <A HREF="003260.html">[rabbitmq-discuss] Flow Control in RabbitMQ 1.5.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3259">[ date ]</a>
              <a href="thread.html#3259">[ thread ]</a>
              <a href="subject.html#3259">[ subject ]</a>
              <a href="author.html#3259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

I tried MulticastMain with almost the same settings (except we're
using 2K messages) and a high water mark of 70%. With this
configuration, RabbitMQ stayed up for for much longer and I didn't see
the erlang node crash.

The difference in my producer is that it uses persistence. I see the
same crash (at 70% high water mark), using these settings with
MulticastMain: -a -x 10 -s 2048 -f persistent

Is persistent messaging compatible/supported with producer flow control?

Thanks for your help! If any specific observations, instrumentation,
logging, etc would be helpful, please let me know.

Thanks,
Chris

On Tue, Mar 31, 2009 at 4:22 PM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt; wrote:
&gt;<i> Chris,
</I>&gt;<i>
</I>&gt;<i> I have tried to reproduce the above by running the
</I>&gt;<i> com.rabbitmq.examples.MulticastMain test with the args &quot;-a -x 10 -s 1024&quot;,
</I>&gt;<i> and while I can make RabbitMQ crash with the default 95% limit, once I
</I>&gt;<i> lowered the limit to 70% it kept going.
</I>&gt;<i>
</I>&gt;<i> That's on an old-ish machine with only 4GB of memory though. It's
</I>&gt;<i> conceivable that a faster machine with more memory requires more of a
</I>&gt;<i> margin. 40%, which is the lowest limit you tried, is quite low, but it may
</I>&gt;<i> be worth trying even lower limits.
</I>&gt;<i>
</I>&gt;<i> Can you send us the code for your tests? I'd like to gain a better
</I>&gt;<i> understanding of exactly what parts of RabbitMQ get stressed, and how your
</I>&gt;<i> test differs from what MulticastMain with the above params does.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Also, what version of Erlang are you running?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003258.html">[rabbitmq-discuss] Flow Control in RabbitMQ 1.5.3
</A></li>
	<LI>Next message: <A HREF="003260.html">[rabbitmq-discuss] Flow Control in RabbitMQ 1.5.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3259">[ date ]</a>
              <a href="thread.html#3259">[ thread ]</a>
              <a href="subject.html#3259">[ subject ]</a>
              <a href="author.html#3259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
