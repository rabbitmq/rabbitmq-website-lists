<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] channel.flow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20channel.flow&In-Reply-To=49E583F1.3040405%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003354.html">
   <LINK REL="Next"  HREF="003357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] channel.flow</H1>
    <B>Aman Gupta</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20channel.flow&In-Reply-To=49E583F1.3040405%40lshift.net"
       TITLE="[rabbitmq-discuss] channel.flow">rabbitmq at tmm1.net
       </A><BR>
    <I>Wed Apr 15 09:24:49 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003354.html">[rabbitmq-discuss] channel.flow
</A></li>
        <LI>Next message: <A HREF="003357.html">[rabbitmq-discuss] channel.flow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3356">[ date ]</a>
              <a href="thread.html#3356">[ thread ]</a>
              <a href="subject.html#3356">[ subject ]</a>
              <a href="author.html#3356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks! I'm trying to figure out what the behavior should be in the
async ruby library, since blocking is not possible. I probably need to
maintain a local queue per channel..

Is there something like Basic.PublishOk that I can hook up to a
callback on MQ::Queue#publish?

mq = MQ.new
mq.queue('name').publish('hi') do
  puts 'message was received!'
end

This way the user can atleast keep track of published messages to
ensure none are lost by the local process and channel queues.

  Aman

On Tue, Apr 14, 2009 at 11:51 PM, Matthias Radestock
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt; wrote:
&gt;<i> Amos,
</I>&gt;<i>
</I>&gt;<i> Amos Elliston wrote:
</I>&gt;&gt;<i> On Apr 14, 2009, at 1:09 AM, Matthias Radestock wrote:
</I>&gt;&gt;&gt;<i> It shouldn't be hard to add support for channel.flow to your lib. I'd
</I>&gt;&gt;&gt;<i> be happy to answer any questions on how it should work.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> i was going to add it to mine. do you know of a good way to test
</I>&gt;&gt;<i> channel.flow. can i force rabbit to send it?
</I>&gt;<i>
</I>&gt;<i> At the rabbit erlang prompt, evaluate
</I>&gt;<i> &#160; memsup:set_sysmem_high_watermark(0.01).
</I>&gt;<i> to lower the memory threshold. You should see a message
</I>&gt;<i> &#160; alarm_handler: {set,{system_memory_high_watermark,[]}}
</I>&gt;<i> appear in the rabbit.log.
</I>&gt;<i>
</I>&gt;<i> To raise the threshold again, evaluate
</I>&gt;<i> &#160; memsup:set_sysmem_high_watermark(0.95).
</I>&gt;<i> at which point you should see
</I>&gt;<i> &#160; alarm_handler: {clear,system_memory_high_watermark}
</I>&gt;<i> in the logs.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003354.html">[rabbitmq-discuss] channel.flow
</A></li>
	<LI>Next message: <A HREF="003357.html">[rabbitmq-discuss] channel.flow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3356">[ date ]</a>
              <a href="thread.html#3356">[ thread ]</a>
              <a href="subject.html#3356">[ subject ]</a>
              <a href="author.html#3356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
