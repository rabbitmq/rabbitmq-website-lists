<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Temp Queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Temp%20Queues&In-Reply-To=%3C914b51ba-a2f7-42c0-b3c2-f7cc28b56490%40m1g2000vbm.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015689.html">
   <LINK REL="Next"  HREF="015691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Temp Queues</H1>
    <B>Gil Strauss</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Temp%20Queues&In-Reply-To=%3C914b51ba-a2f7-42c0-b3c2-f7cc28b56490%40m1g2000vbm.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Temp Queues">gil.strauss at gmail.com
       </A><BR>
    <I>Sun Oct 23 19:31:09 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015689.html">[rabbitmq-discuss] Temp Queues
</A></li>
        <LI>Next message: <A HREF="015691.html">[rabbitmq-discuss] Temp Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15690">[ date ]</a>
              <a href="thread.html#15690">[ thread ]</a>
              <a href="subject.html#15690">[ subject ]</a>
              <a href="author.html#15690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

Thank you for the very quick reply.

I ran the following scenario:

On publisher:
1.
    channel.exchangeDeclare(exchangeName, &quot;direct&quot;)

    val queueName = channel.queueDeclare().getQueue()

    channel.queueBind(queueName, exchangeName, routingKey)
2.
 Publish message

3.
On subscriber:
    channel.exchangeDeclare(exchangeName, &quot;direct&quot;)

    val queueName = channel.queueDeclare().getQueue()

    channel.queueBind(queueName, exchangeName, routingKey)

4.
Result: Subscriber is not getting the message

On the other hand, if I do 3 and only then 1 and 2: the subscriber is
getting the message.

So the questions are:
a. Am I doing something wrong
b. How can I ensure that the subscriber gets the message even if it
was published before it subscribed to it?

Thanks again.

Gil






On Oct 23, 6:11&#160;pm, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalv... at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> When you publish to an AMQP exchange it doesn't uses &quot;temp queues&quot;.
</I>&gt;<i>
</I>&gt;<i> An AMQP Exchange will check the bindings it has and then it will route messages to the destinations that match those bindings. So if you want that your messages to go somewhere then you need to have queues bound to the exchange _before_ you publish messages through it.
</I>&gt;<i>
</I>&gt;<i> <A HREF="Seehttp://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_MRG/1.3/html-sin...">Seehttp://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_MRG/1.3/html-sin...</A>
</I>&gt;<i>
</I>&gt;<i> So if you have exchanges but you don't have any queues bound to it, then the exchange will act as a black hole for the messages you publish through it.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Alvaro
</I>&gt;<i>
</I>&gt;<i> On Oct 23, 2011, at 6:03 PM, Gil Strauss wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Hello
</I>&gt;<i>
</I>&gt;<i> &gt; I'm using exchange for pub-sub method and noticed that it uses temp
</I>&gt;<i> &gt; queues, hence if a publisher propagates a message before a listener is
</I>&gt;<i> &gt; subscribing to it, the latter won't receive that message.
</I>&gt;<i>
</I>&gt;<i> &gt; What I need for my application is to keep published message for a
</I>&gt;<i> &gt; period of time and send the to new subscriber even after the message
</I>&gt;<i> &gt; was originally published.
</I>&gt;<i>
</I>&gt;<i> &gt; Is it doable without doing it manually programmatically?
</I>&gt;<i>
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i>
</I>&gt;<i> &gt; Gil
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i> Sent form my Nokia 1100
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015689.html">[rabbitmq-discuss] Temp Queues
</A></li>
	<LI>Next message: <A HREF="015691.html">[rabbitmq-discuss] Temp Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15690">[ date ]</a>
              <a href="thread.html#15690">[ thread ]</a>
              <a href="subject.html#15690">[ subject ]</a>
              <a href="author.html#15690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
