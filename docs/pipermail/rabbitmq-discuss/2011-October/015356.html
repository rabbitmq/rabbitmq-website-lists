<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can a Publish be acknowledged.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20a%20Publish%20be%20acknowledged.&In-Reply-To=%3Cloom.20111004T085828-484%40post.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015359.html">
   <LINK REL="Next"  HREF="015357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can a Publish be acknowledged.</H1>
    <B>Tim Yen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20a%20Publish%20be%20acknowledged.&In-Reply-To=%3Cloom.20111004T085828-484%40post.gmane.org%3E"
       TITLE="[rabbitmq-discuss] Can a Publish be acknowledged.">tim.yen at gmail.com
       </A><BR>
    <I>Tue Oct  4 08:10:27 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015359.html">[rabbitmq-discuss] RabbitMQ did not send messages to AMQP	consumers
</A></li>
        <LI>Next message: <A HREF="015357.html">[rabbitmq-discuss] Can a Publish be acknowledged.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15356">[ date ]</a>
              <a href="thread.html#15356">[ thread ]</a>
              <a href="subject.html#15356">[ subject ]</a>
              <a href="author.html#15356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alexandru Scvor&#355;ov &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexandru at ...</A>&gt; writes:

&gt;<i> 
</I>&gt;<i> &gt; I'd effectively like an acknowledgment to say &quot;this message was put on to at
</I>&gt;<i> &gt; least one queue&quot;.
</I>
&gt;<i> To get the acknowledgement you want, you need to publish both with
</I>&gt;<i> mandatory set and to a confirm channel.  If you get a basic.return and
</I>&gt;<i> an acknowledgement, that means the message was not delivered to any
</I>&gt;<i> queues; if you get just an acknowledgement, that means the broker has
</I>&gt;<i> handled the message somehow; if you get a nack, that means the message
</I>&gt;<i> was probably lost in some way, so you need to resend it or something.
</I>&gt;<i> The broker guarantees that it will eventually acknowledge or nack all
</I>&gt;<i> messages published to confirm channels.
</I>&gt;<i>  
</I>
&gt;<i> Alternatively, if you're feeling lazy, you can use the new (introduced
</I>&gt;<i> in 2.6.0) IModel.WaitForConfirms.  The function waits for all messages
</I>&gt;<i> 
</I>&gt;<i> Hope this helps.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Alex
</I>&gt;<i> 
</I>
Thanks Alex,

After enabling confirm select how can I know which message is being confirmed or
nacked by the various callbacks assuming that its all asynchronous?

The BasicAckEvent and Nack event handlers have the DeliveryTag but how do i get
this number on BasicPublish?

Also the BasicReturnEventArgs has no DeliveryTag.  Can I just ignore the
BasicReturn and rely on only the Ack and Nack event handlers?

As I dont need the performance WaitForConfirms seems to be the go but it doesn't
appear to be implemented in the .net code.  It seems to
be Java only.  Maybe its hidden somewhere anybody know?

Maybe someone can post the Java for the WaitForConfirms and I can morph it to c#




</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015359.html">[rabbitmq-discuss] RabbitMQ did not send messages to AMQP	consumers
</A></li>
	<LI>Next message: <A HREF="015357.html">[rabbitmq-discuss] Can a Publish be acknowledged.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15356">[ date ]</a>
              <a href="thread.html#15356">[ thread ]</a>
              <a href="subject.html#15356">[ subject ]</a>
              <a href="author.html#15356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
