<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue.declare arguments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue.declare%20arguments&In-Reply-To=%3C4E941189.8000408%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015435.html">
   <LINK REL="Next"  HREF="015446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue.declare arguments</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue.declare%20arguments&In-Reply-To=%3C4E941189.8000408%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Queue.declare arguments">simon at rabbitmq.com
       </A><BR>
    <I>Tue Oct 11 10:51:05 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015435.html">[rabbitmq-discuss] Queue.declare arguments
</A></li>
        <LI>Next message: <A HREF="015446.html">[rabbitmq-discuss] Queue.declare arguments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15445">[ date ]</a>
              <a href="thread.html#15445">[ thread ]</a>
              <a href="subject.html#15445">[ subject ]</a>
              <a href="author.html#15445">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/10/11 07:37, Pieter de Zwart wrote:
&gt;<i> I am trying to implement support for passing arguments to queue.declare
</I>&gt;<i> in the PHP extension for AMQP. Based on the docs, arguments are up to
</I>&gt;<i> the server to implement, but are based on an amqp_table_t structure.
</I>&gt;<i> Based on previous email threads and some basic research, the full list
</I>&gt;<i> of supported keys for the table seem to be: x-expires, x-message-ttl,
</I>&gt;<i> x-ha-policyand x-ha-policy-params. Is this still the complete list?
</I>
It is today. And I don't think any more arguments are on the drawing 
board right now, but we may well introduce more in the future.

It's worth pointing out that arguments matter for more than just queues, 
they can be used with exchanges (we implement one extension argument, 
&quot;alternate-exchange&quot;) and also as part of routing with the headers 
exchange type (for which you need to be able to set arbitrary arguments 
on bindings).

&gt;<i> It
</I>&gt;<i> seems like I should just give people the ability to set any key they want.
</I>
That is the right thing to do, and it's what we do in our clients.

&gt;<i> The definition of an amqp_table_entry is a key (amqp_bytes) and value
</I>&gt;<i> (amqp_field_value_t). The latter has a definition of:
</I>&gt;<i>
</I>&gt;<i> typedef struct amqp_field_value_t_ { char kind; union { amqp_boolean_t
</I>&gt;<i> boolean; int8_t i8; uint8_t u8; int16_t i16; uint16_t u16; int32_t i32;
</I>&gt;<i> uint32_t u32; int64_t i64; uint64_t u64; float f32; double f64;
</I>&gt;<i> amqp_decimal_t decimal; amqp_bytes_t bytes; amqp_table_t table;
</I>&gt;<i> amqp_array_t array; } value; } amqp_field_value_t;
</I>&gt;<i>
</I>&gt;<i> Im assuming therefore that I can shove any kind/value combo for any key,
</I>&gt;<i> and let the rabbitmq-c client/broker figure out the details. Is that
</I>&gt;<i> correct?
</I>
Not really - the values in AMQP are typed. These types will be pushed 
through unchanged by the C client, but the broker will want you to set 
sensible types. We try to be reasonably flexible, but if you're setting 
the x-expires argument for example then we'll expect one of the integer 
types; we won't just parse a string.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015435.html">[rabbitmq-discuss] Queue.declare arguments
</A></li>
	<LI>Next message: <A HREF="015446.html">[rabbitmq-discuss] Queue.declare arguments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15445">[ date ]</a>
              <a href="thread.html#15445">[ thread ]</a>
              <a href="subject.html#15445">[ subject ]</a>
              <a href="author.html#15445">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
