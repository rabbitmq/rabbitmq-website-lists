<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] IModel thread safety in.NET client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20IModel%20thread%20safety%20in.NET%20client&In-Reply-To=%3C4E971C9A.5050801%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015509.html">
   <LINK REL="Next"  HREF="015476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] IModel thread safety in.NET client</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20IModel%20thread%20safety%20in.NET%20client&In-Reply-To=%3C4E971C9A.5050801%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] IModel thread safety in.NET client">emile at rabbitmq.com
       </A><BR>
    <I>Thu Oct 13 18:15:06 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015509.html">[rabbitmq-discuss] IModel thread safety in.NET client
</A></li>
        <LI>Next message: <A HREF="015476.html">[rabbitmq-discuss] [announcement] amqp gem 0.8.1 is released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15510">[ date ]</a>
              <a href="thread.html#15510">[ thread ]</a>
              <a href="subject.html#15510">[ subject ]</a>
              <a href="author.html#15510">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 13/10/11 17:17, TrueWill wrote:
&gt;<i> Thank you for your response.
</I>&gt;<i> 
</I>&gt;<i> I'm still confused, though. The rabbitmq-dotnet-client-2.6.1-user-guide
</I>&gt;<i> states (p. 11):
</I>&gt;<i> 
</I>&gt;<i> &quot;Application callback handlers /must not/ invoke blocking AMQP
</I>&gt;<i> operations (such as
</I>&gt;<i> IModel.QueueDeclare, IModel.BasicCancel or IModel.BasicPublish). If they
</I>&gt;<i> do, the channel
</I>&gt;<i> will deadlock.&quot;
</I>&gt;<i> 
</I>&gt;<i> Could you please clarify?
</I>
Yes. If you issue any synchronous commands from a handler then the
channel will immediately deadlock. Publish could deadlock only if
channel flow was asserted by the broker, but recent versions of the
broker (since 2.0.0) use TCP back pressure instead of channel
flow-control. If you want interoperability with other brokers that might
use channel flow-control then you should avoid publish within a handler.

Be aware that TCP back pressure will block asynchronous methods like
ack, without causing the channel to deadlock, and back pressure affects
all channels sharing the connection.

The safest approach is to use the QueueingBasicConsumer with BasicQos to
prevent the client from receiving too many messages at once.



-Emile
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015509.html">[rabbitmq-discuss] IModel thread safety in.NET client
</A></li>
	<LI>Next message: <A HREF="015476.html">[rabbitmq-discuss] [announcement] amqp gem 0.8.1 is released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15510">[ date ]</a>
              <a href="thread.html#15510">[ thread ]</a>
              <a href="subject.html#15510">[ subject ]</a>
              <a href="author.html#15510">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
