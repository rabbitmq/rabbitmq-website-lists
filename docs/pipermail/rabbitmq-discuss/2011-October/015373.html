<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20there%20a%20channel%20publish%20throughput%20limit%0A%20to%20a%20queue%3F&In-Reply-To=%3C4E8C24F4.4020903%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015371.html">
   <LINK REL="Next"  HREF="015375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20there%20a%20channel%20publish%20throughput%20limit%0A%20to%20a%20queue%3F&In-Reply-To=%3C4E8C24F4.4020903%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Oct  5 10:35:48 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015371.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
        <LI>Next message: <A HREF="015375.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15373">[ date ]</a>
              <a href="thread.html#15373">[ thread ]</a>
              <a href="subject.html#15373">[ subject ]</a>
              <a href="author.html#15373">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Allen,

On 05/10/11 10:13, Tim Fox wrote:
&gt;<i> On 04/10/11 19:00, Allen Kim wrote:
</I>&gt;&gt;<i> Thanks for your reply. I have been waiting for someone to reply.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. They are persistent messages (disk writing speed could slow down that
</I>&gt;&gt;<i> much?)
</I>&gt;<i>
</I>&gt;<i> A good disk can sync at about 200-300 syncs per second. If each
</I>&gt;<i> published message is being synced to disk you should expect that level
</I>&gt;<i> of performance.
</I>
Alas rabbit doesn't generally fsync per message. Except when using tx 
and committing after every message, or using confirms and waiting for 
confirmation after every message. Or when the sending rate is quite low.

On my desktop I can get &gt;7kHz persistent messages routed.

&gt;&gt;<i> 2. NOT large message (it's around two lines 200-400 bytes)
</I>&gt;&gt;<i> 3. routing to only one queue
</I>&gt;&gt;<i> 4. NO transaction
</I>&gt;&gt;<i> 5. 3-4 consumers with basic.qos prefetch to 100.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So, #1 and #5 matters?
</I>
Possibly. Though I'd still expect to see significantly higher rates.

You can approximate the above setup by running the MulticastMain test 
program we ship with the java client and invoking it with the options

-f persistent -s 400 -y 3 -u q -q 100 -r 3000

The last figure is the target send rate. Watch the reported latencies. 
If they are stable, try a higher rate. The max rate at which the 
latencies are stable is the max throughput Rabbit can handle in that 
configuration.

On my machine the above test can easily get 6kHz with RabbitMQ 2.6.1.


Matthias.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015371.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
	<LI>Next message: <A HREF="015375.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15373">[ date ]</a>
              <a href="thread.html#15373">[ thread ]</a>
              <a href="subject.html#15373">[ subject ]</a>
              <a href="author.html#15373">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
