<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] DTrace and Erlang: an update
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20DTrace%20and%20Erlang%3A%20an%20update&In-Reply-To=%3C0b4cd3e0-41d1-405d-a199-86e1033360d3%40CoachZ.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015708.html">
   <LINK REL="Next"  HREF="015711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] DTrace and Erlang: an update</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20DTrace%20and%20Erlang%3A%20an%20update&In-Reply-To=%3C0b4cd3e0-41d1-405d-a199-86e1033360d3%40CoachZ.local%3E"
       TITLE="[rabbitmq-discuss] DTrace and Erlang: an update">jerryk at vmware.com
       </A><BR>
    <I>Mon Oct 24 19:50:47 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015708.html">[rabbitmq-discuss] DTrace and Erlang: an update
</A></li>
        <LI>Next message: <A HREF="015711.html">[rabbitmq-discuss] DTrace and Erlang: an update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15709">[ date ]</a>
              <a href="thread.html#15709">[ thread ]</a>
              <a href="subject.html#15709">[ subject ]</a>
              <a href="author.html#15709">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Scott... 



I've been working with Dustin Sallings and Michal Ptaszek to expand the 
work that they've done on adding DTrace probes to the Erlang virtual 
machine. We have started preliminary, *informal*, **no-promises-yet** 
talks with Ericsson's OTP team. Our goal (and not yet the OTP team's, I 
*cannot* speak for them) is to get these probes &amp; NIF code into the R15 
release cycle. 

I've recently started messing with DTrace on Erlang/OTP in the context of 
RabbitMQ performance and am very interested in learning more about what 
you're doing. 


I'll be speaking about this DTrace work at the Erlang User Conference in 
Stockholm, Sweden on Thursday, November 4th. If you're going to be at 
the EUC and you're interested in DTrace, I'd love to talk to you. If 
you have a war story about RabbitMQ that you'd like me to share at the 
EUC (perhaps as part of my presentation), please contact me directly. 
FWIW, I'll also be attending the tutorial &amp; hack-a-thon day on Friday 
05 November. 

Alas, I'm in North America and won't be there... will your presentation be 
recorded and put on the web afterward? 


If you like DTrace but you're not going to be at EUC, then ... I'd like 
to start some email correspondence. Specifically, what do you need to 
make RabbitMQ's workings visible to the outside world via DTrace? 

Great... I've just recently returned to the perf stuff after some product launch 
related turbulence that had vacuumed my attention entirely away from it. I'm 
currently messing around with the OTP fork that's on Github and trying to get 
a sense for what the existing family of probes can tell me about Rabbit behavior. 
I'm also sort of learning how to use DTrace in a grown-up manner as I go, so 
it's likely that my intuition for what is possible and what should be attempted 
is very poorly honed at this point. 


If we actually meet our goal of getting the probes + NIF into the 
official R15 source distribution ... then the evolution of the probes 
will probably be slow. Why? Because it'll be tied to Ericsson's 
release schedule. The more input we get from users of *real* apps 
(RabbitMQ, Riak, Ejabberd, et al.) now, the better the initial probes 
will be, and the fewer iterations it will take to make them &quot;perfect&quot;. 

Are you up for phone or Skype chat on this sometime in the next week or so? 
I'd be curious to learn more about the probe wish lists for non-Rabbit apps is, 
assuming that picture has started to come together? 


In addition, I've added a NIF that allows Erlang code to trigger a 
probe. See the EDoc comments at the top of this source file for some 
background: 

<A HREF="https://github.com/slfritchie/otp/blob/dtrace-experiment+michal2/lib/dtrace/src/dtrace.erl">https://github.com/slfritchie/otp/blob/dtrace-experiment+michal2/lib/dtrace/src/dtrace.erl</A> 

Ah this piece looks very interesting... 

Jerry 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111024/d891aaf3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111024/d891aaf3/attachment.htm</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015708.html">[rabbitmq-discuss] DTrace and Erlang: an update
</A></li>
	<LI>Next message: <A HREF="015711.html">[rabbitmq-discuss] DTrace and Erlang: an update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15709">[ date ]</a>
              <a href="thread.html#15709">[ thread ]</a>
              <a href="subject.html#15709">[ subject ]</a>
              <a href="author.html#15709">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
