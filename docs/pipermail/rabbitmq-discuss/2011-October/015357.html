<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can a Publish be acknowledged.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20a%20Publish%20be%20acknowledged.&In-Reply-To=%3C4E8AB656.9030505%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015356.html">
   <LINK REL="Next"  HREF="015358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can a Publish be acknowledged.</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20a%20Publish%20be%20acknowledged.&In-Reply-To=%3C4E8AB656.9030505%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Can a Publish be acknowledged.">matthias at rabbitmq.com
       </A><BR>
    <I>Tue Oct  4 08:31:34 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015356.html">[rabbitmq-discuss] Can a Publish be acknowledged.
</A></li>
        <LI>Next message: <A HREF="015358.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a	queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15357">[ date ]</a>
              <a href="thread.html#15357">[ thread ]</a>
              <a href="subject.html#15357">[ subject ]</a>
              <a href="author.html#15357">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tim,

On 04/10/11 08:10, Tim Yen wrote:
&gt;<i> After enabling confirm select how can I know which message is being confirmed or
</I>&gt;<i> nacked by the various callbacks assuming that its all asynchronous?
</I>&gt;<i>
</I>&gt;<i> The BasicAckEvent and Nack event handlers have the DeliveryTag but how do i get
</I>&gt;<i> this number on BasicPublish?
</I>
Publishes are numbered sequentially. The BasicAck/Nack delivery tag 
contains that sequence number.

In the RabbitMQ clients the channel (&quot;IModel&quot; in the .net client 
terminology) keeps track of the sequence number. See 
<A HREF="http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.6.1/rabbitmq-dotnet-client-2.6.1-client-htmldoc/html/type-RabbitMQ.Client.IModel.html#property-P:RabbitMQ.Client.IModel.NextPublishSeqNo">http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.6.1/rabbitmq-dotnet-client-2.6.1-client-htmldoc/html/type-RabbitMQ.Client.IModel.html#property-P:RabbitMQ.Client.IModel.NextPublishSeqNo</A>

&gt;<i> Also the BasicReturnEventArgs has no DeliveryTag.  Can I just ignore the
</I>&gt;<i> BasicReturn and rely on only the Ack and Nack event handlers?
</I>
You cannot. When a broker confirms a message it is telling the client 
that it has taken responsibility for it. One way the broker can 
discharge its responsibility is by returning the message. Hence messages 
returned with basic.return are *ack*ed, not nack'ed.

&gt;<i> As I dont need the performance WaitForConfirms seems to be the go but it doesn't
</I>&gt;<i> appear to be implemented in the .net code.  It seems to
</I>&gt;<i> be Java only.  Maybe its hidden somewhere anybody know?
</I>
It's not exactly hidden:

<A HREF="http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.6.1/rabbitmq-dotnet-client-2.6.1-client-htmldoc/html/type-RabbitMQ.Client.IModel.html#method-M:RabbitMQ.Client.IModel.WaitForConfirms">http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.6.1/rabbitmq-dotnet-client-2.6.1-client-htmldoc/html/type-RabbitMQ.Client.IModel.html#method-M:RabbitMQ.Client.IModel.WaitForConfirms</A>


Matthias.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015356.html">[rabbitmq-discuss] Can a Publish be acknowledged.
</A></li>
	<LI>Next message: <A HREF="015358.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a	queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15357">[ date ]</a>
              <a href="thread.html#15357">[ thread ]</a>
              <a href="subject.html#15357">[ subject ]</a>
              <a href="author.html#15357">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
