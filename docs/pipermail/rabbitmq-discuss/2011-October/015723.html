<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] maximum connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20maximum%20connections&In-Reply-To=%3C20111025071752.GC3367%40southbank.Home%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015722.html">
   <LINK REL="Next"  HREF="015725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] maximum connections</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20maximum%20connections&In-Reply-To=%3C20111025071752.GC3367%40southbank.Home%3E"
       TITLE="[rabbitmq-discuss] maximum connections">alexandru at rabbitmq.com
       </A><BR>
    <I>Tue Oct 25 08:17:52 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015722.html">[rabbitmq-discuss] maximum connections
</A></li>
        <LI>Next message: <A HREF="015725.html">[rabbitmq-discuss] maximum connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15723">[ date ]</a>
              <a href="thread.html#15723">[ thread ]</a>
              <a href="subject.html#15723">[ subject ]</a>
              <a href="author.html#15723">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I'm testing out a new rabbitMQ system and noticed that the system seems to stop accepting new connections after around 830 get opened.  Can anyone tell me what would cause it to stop at that point? 
</I>
It ran out of socket descriptors probably (or was getting close to the
limit and the internal descriptor limiter kicked in).  On my system,
this limit is 829, by default, so this is likely the cause.

This is calculated as a fixed fraction of the file descriptor limit.

&gt;<i> The system ulimit on open files is 4096 (soft &amp; hard) and the rabbitMQ user isn't anywhere near using that many.  Is there anything else that could be responsible for this limit?
</I>
Huh.  Are you sure?  A 830 socket limit corresponds to a 1024 file
descriptor limit.

Try enabling the management plugin to see if what the limits are what
you think they are (the overview page gives a breakdown of the limits
RabbitMQ knows about).

What is the output of `ulimit -a`?  What happens if you do a `ulimit -n
4096` in the shell before starting rabbitmq-server in the same shell?
That should increase the maximum number of connection to 3594.

Cheers,
Alex

On Mon, Oct 24, 2011 at 09:04:38PM -0700, Michael Barrett wrote:
&gt;<i> I'm testing out a new rabbitMQ system and noticed that the system seems to stop accepting new connections after around 830 get opened.  Can anyone tell me what would cause it to stop at that point?  The system ulimit on open files is 4096 (soft &amp; hard) and the rabbitMQ user isn't anywhere near using that many.  Is there anything else that could be responsible for this limit?
</I>&gt;<i> 
</I>&gt;<i> Thanks!
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Michael Barrett
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">loki77 at gmail.com</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>





















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015722.html">[rabbitmq-discuss] maximum connections
</A></li>
	<LI>Next message: <A HREF="015725.html">[rabbitmq-discuss] maximum connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15723">[ date ]</a>
              <a href="thread.html#15723">[ thread ]</a>
              <a href="subject.html#15723">[ subject ]</a>
              <a href="author.html#15723">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
