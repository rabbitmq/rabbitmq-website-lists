<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Java RabbitMQ API bug in	response.getHeaders()?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20RabbitMQ%20API%20bug%20in%0A%09response.getHeaders%28%29%3F&In-Reply-To=%3C4EA9969F.70906%40niclabs.cl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015828.html">
   <LINK REL="Next"  HREF="015831.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Java RabbitMQ API bug in	response.getHeaders()?</H1>
    <B>Mario Leyton</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20RabbitMQ%20API%20bug%20in%0A%09response.getHeaders%28%29%3F&In-Reply-To=%3C4EA9969F.70906%40niclabs.cl%3E"
       TITLE="[rabbitmq-discuss] Java RabbitMQ API bug in	response.getHeaders()?">mleyton at niclabs.cl
       </A><BR>
    <I>Thu Oct 27 18:36:31 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015828.html">[rabbitmq-discuss] Java RabbitMQ API bug in	response.getHeaders()?
</A></li>
        <LI>Next message: <A HREF="015831.html">[rabbitmq-discuss] Java RabbitMQ API bug in	response.getHeaders()?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15830">[ date ]</a>
              <a href="thread.html#15830">[ thread ]</a>
              <a href="subject.html#15830">[ subject ]</a>
              <a href="author.html#15830">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a nice discussion, though I want to remark that I am
specifically discussing the List/Map issues, not the single attributes.

The core of it I think is reduced into whether one would:

A. Want all client library (C, Java, Erlang, etc... ) to operate more or
less the same, or
B. Want all client library users to feel &quot;at home&quot; with the library's &quot;API&quot;.

As a Java programmer, I don't really care if the library are used in
exactly the same way in C, Python or Erlang. I actually don't expect it.
For me it is very strange to have this semantic overload in the null
reference, which, as I mentioned in the previous post is actually very
annoying as  does not depend on the coding style but on the message
being sent and pollutes the user's code.

My feeling is that the rabbitmq teams is trying to aim for option A,
while for me, as a user of the java client library it is easier to adopt
rabbitmq client if it where built in terms of B.

Finally I just want to quote that I believe the RabbitMQ Team is doing a
good job and I'm happy to provide feedback as one of their users.

Mario Leyton
--
NIC Chile Research Labs
 
On 10/27/11 1:51 PM, Tony Garnock-Jones wrote:
&gt;<i> On 27 October 2011 12:23, Mario Leyton &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mleyton at niclabs.cl</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> If there are no headers, it doesn't matter why, a good API should always
</I>&gt;&gt;<i> return an empty Map o List and not null because it contaminates the API
</I>&gt;&gt;<i> user's code.
</I>&gt;<i>
</I>&gt;<i> It may do so for Java. Other languages do things like this differently.
</I>&gt;<i> AMQP is language-neutral, and has its own semantics. The API should make it
</I>&gt;<i> easy for the user to work with AMQP semantics, and should not, for example,
</I>&gt;<i> lull the user into a false sense that all the world is a Java program. If a
</I>&gt;<i> sender sent a message with a missing username header, for instance, that
</I>&gt;<i> should be hard to misinterpret as the sender having sent a message with an
</I>&gt;<i> empty-string username header. IMO, the same applies to maps, integers,
</I>&gt;<i> booleans, timestamps etc. (I'm not even sure what a sensible
</I>&gt;<i> &quot;default&quot;/&quot;missing&quot; value for a timestamp would be.)
</I>&gt;<i>
</I>&gt;<i> You're right that we could do what the C library does, and use a separate
</I>&gt;<i> flag, but I believe this would make it more likely that subtle
</I>&gt;<i> interoperability issues would arise. At least with the NPE you get rapid
</I>&gt;<i> feedback that someone isn't following the communication contract; either
</I>&gt;<i> the local Java code, in which case adding a null check lets you conform to
</I>&gt;<i> the language being spoken by the remote party, or the remote party's code,
</I>&gt;<i> in which case you can either choose to work around the difference locally
</I>&gt;<i> or get the remote party to change. Papering over the difference at the API
</I>&gt;<i> level masks the underlying problem.
</I>&gt;<i>
</I>&gt;<i> If you are working in an all-java environment, a good choice for your code
</I>&gt;<i> might be to abstract away the difference between a missing map and an empty
</I>&gt;<i> map.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>   Tony
</I>&gt;<i>
</I>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015828.html">[rabbitmq-discuss] Java RabbitMQ API bug in	response.getHeaders()?
</A></li>
	<LI>Next message: <A HREF="015831.html">[rabbitmq-discuss] Java RabbitMQ API bug in	response.getHeaders()?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15830">[ date ]</a>
              <a href="thread.html#15830">[ thread ]</a>
              <a href="subject.html#15830">[ subject ]</a>
              <a href="author.html#15830">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
