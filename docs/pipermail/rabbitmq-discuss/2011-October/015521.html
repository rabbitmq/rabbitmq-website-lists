<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consume
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consume&In-Reply-To=%3C4E9801CF.8080607%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015514.html">
   <LINK REL="Next"  HREF="015533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consume</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consume&In-Reply-To=%3C4E9801CF.8080607%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Consume">emile at rabbitmq.com
       </A><BR>
    <I>Fri Oct 14 10:33:03 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015514.html">[rabbitmq-discuss] Consume
</A></li>
        <LI>Next message: <A HREF="015533.html">[rabbitmq-discuss] Consume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15521">[ date ]</a>
              <a href="thread.html#15521">[ thread ]</a>
              <a href="subject.html#15521">[ subject ]</a>
              <a href="author.html#15521">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Yann,

On 13/10/11 20:00, Yann Luppo wrote:

&gt;<i> To clarify, in our current scenario after processing, the consumer logic
</I>&gt;<i> requeues the message. The goal is to have a given set of messages being
</I>&gt;<i> processed over and over again in a cycle.
</I>
That sounds unusual. What is the criteria for stopping processing? A
different pattern for multiple rounds of processing is to have a queue
for each round of processing and for consumers to republish the message
to the next queue in a chain.

You should also avoid relying on the current (v 2.6.1) requeue behaviour
of rabbit which requeues messages at the back of the queue. To guarantee
that messages return to the back of the queue you should acknowledge and
republish instead of requeue.

&gt;<i> After a while I decided that my implementation was flawed somewhere, so
</I>&gt;<i> for a test I simplified the code and started using the Subscription object:
</I>
[...]

&gt;<i> The problem w/ this approach is all our consumers read all the
</I>&gt;<i> messages&#8230;. Instead of just dequeuing in a round-robin fashion.
</I>&gt;<i> 
</I>&gt;<i> Could someone point me in the right direction for using RabbitMQ to do a
</I>&gt;<i> round-robin-like distribution?
</I>
If you have multiple subscriptions to the same queue then consider
setting qos on the channel before creating the Subscription (see
IModel.BasicQos). Internally Subscription uses a QueueingBasicConsumer
which will receive all the messages in the queue unless qos is set.



-Emile
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015514.html">[rabbitmq-discuss] Consume
</A></li>
	<LI>Next message: <A HREF="015533.html">[rabbitmq-discuss] Consume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15521">[ date ]</a>
              <a href="thread.html#15521">[ thread ]</a>
              <a href="subject.html#15521">[ subject ]</a>
              <a href="author.html#15521">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
