<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Interesting Active-Active error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Interesting%20Active-Active%20error&In-Reply-To=%3CCAHZAEpceFDohaB6Pf0vBTBW-W8O8dURJ2mmabrejyi0NfN4HRg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015713.html">
   <LINK REL="Next"  HREF="015715.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Interesting Active-Active error</H1>
    <B>Jason J. W. Williams</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Interesting%20Active-Active%20error&In-Reply-To=%3CCAHZAEpceFDohaB6Pf0vBTBW-W8O8dURJ2mmabrejyi0NfN4HRg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Interesting Active-Active error">jasonjwwilliams at gmail.com
       </A><BR>
    <I>Mon Oct 24 23:52:57 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015713.html">[rabbitmq-discuss] Cluster Join Failure
</A></li>
        <LI>Next message: <A HREF="015715.html">[rabbitmq-discuss] Interesting Active-Active error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15714">[ date ]</a>
              <a href="thread.html#15714">[ thread ]</a>
              <a href="subject.html#15714">[ subject ]</a>
              <a href="author.html#15714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Been messing around with mirrored queues in 2.6.1 on OS X 10.7.2
today. I initially created a queue called &quot;hello-queue&quot; with an
&quot;x-ha-policy&quot; of &quot;all&quot;. This worked as expected. I then deleted the
queue through the management web UI and tried recreating it now with
the following arg dict:

{&quot;x-ha-policy&quot; : &quot;nodes&quot;, &quot;x-ha-policy-params&quot; , [&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at Phantome</A>,
&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit2 at Phantome</A>&quot;]}

This triggered an AMQP 404 error when trying to create the queue:
pika.exceptions.AMQPChannelError: (404, &quot;NOT_FOUND - no queue
'hello-queue' in vhost '/'&quot;)

I've attached the sample program. What was more curious however, is
that the web UI shows the queue existing but in some sort of broken
state, to the effect that when you try to delete the queue through the
web UI you get the same AMQP 404 error. Here is a screencast showing
the state of the queue in the web UI and the effect of trying to
delete it: <A HREF="http://screencast.com/t/f7PVpPflyUu4">http://screencast.com/t/f7PVpPflyUu4</A>

Any pointers are greatly appreciated.

-J
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hello_world_mirrored_queue_consumer.py
Type: application/octet-stream
Size: 1984 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111024/f5bbb21c/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111024/f5bbb21c/attachment.obj</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015713.html">[rabbitmq-discuss] Cluster Join Failure
</A></li>
	<LI>Next message: <A HREF="015715.html">[rabbitmq-discuss] Interesting Active-Active error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15714">[ date ]</a>
              <a href="thread.html#15714">[ thread ]</a>
              <a href="subject.html#15714">[ subject ]</a>
              <a href="author.html#15714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
