<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consume
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consume&In-Reply-To=%3C8882CFE4FFAF3F4E8814F0E61F2919A30ABF7E27%40l360xch01.office.leads360.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015521.html">
   <LINK REL="Next"  HREF="015518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consume</H1>
    <B>Yann Luppo</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consume&In-Reply-To=%3C8882CFE4FFAF3F4E8814F0E61F2919A30ABF7E27%40l360xch01.office.leads360.com%3E"
       TITLE="[rabbitmq-discuss] Consume">yluppo at leads360.com
       </A><BR>
    <I>Fri Oct 14 17:40:28 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015521.html">[rabbitmq-discuss] Consume
</A></li>
        <LI>Next message: <A HREF="015518.html">[rabbitmq-discuss]  Getting Error with management plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15533">[ date ]</a>
              <a href="thread.html#15533">[ thread ]</a>
              <a href="subject.html#15533">[ subject ]</a>
              <a href="author.html#15533">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Perfect! Merci Emile! :)

-----Original Message-----
From: Emile Joubert [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>] 
Sent: Friday, October 14, 2011 2:33 AM
To: Yann Luppo
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Consume

Hi Yann,

On 13/10/11 20:00, Yann Luppo wrote:

&gt;<i> To clarify, in our current scenario after processing, the consumer
</I>logic
&gt;<i> requeues the message. The goal is to have a given set of messages
</I>being
&gt;<i> processed over and over again in a cycle.
</I>
That sounds unusual. What is the criteria for stopping processing? A
different pattern for multiple rounds of processing is to have a queue
for each round of processing and for consumers to republish the message
to the next queue in a chain.

You should also avoid relying on the current (v 2.6.1) requeue behaviour
of rabbit which requeues messages at the back of the queue. To guarantee
that messages return to the back of the queue you should acknowledge and
republish instead of requeue.

&gt;<i> After a while I decided that my implementation was flawed somewhere,
</I>so
&gt;<i> for a test I simplified the code and started using the Subscription
</I>object:

[...]

&gt;<i> The problem w/ this approach is all our consumers read all the
</I>&gt;<i> messages.... Instead of just dequeuing in a round-robin fashion.
</I>&gt;<i> 
</I>&gt;<i> Could someone point me in the right direction for using RabbitMQ to do
</I>a
&gt;<i> round-robin-like distribution?
</I>
If you have multiple subscriptions to the same queue then consider
setting qos on the channel before creating the Subscription (see
IModel.BasicQos). Internally Subscription uses a QueueingBasicConsumer
which will receive all the messages in the queue unless qos is set.



-Emile
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015521.html">[rabbitmq-discuss] Consume
</A></li>
	<LI>Next message: <A HREF="015518.html">[rabbitmq-discuss]  Getting Error with management plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15533">[ date ]</a>
              <a href="thread.html#15533">[ thread ]</a>
              <a href="subject.html#15533">[ subject ]</a>
              <a href="author.html#15533">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
