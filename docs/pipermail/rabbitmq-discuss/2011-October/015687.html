<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Limiting the number of non-ack messages	cause of subsystem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Limiting%20the%20number%20of%20non-ack%20messages%0A%09cause%20of%20subsystem&In-Reply-To=%3C587c2f4f-7ea6-4f49-97f0-4d19a2a14bbd%40j20g2000vby.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015686.html">
   <LINK REL="Next"  HREF="015775.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Limiting the number of non-ack messages	cause of subsystem</H1>
    <B>jhiemer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Limiting%20the%20number%20of%20non-ack%20messages%0A%09cause%20of%20subsystem&In-Reply-To=%3C587c2f4f-7ea6-4f49-97f0-4d19a2a14bbd%40j20g2000vby.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Limiting the number of non-ack messages	cause of subsystem">jvhiemer at googlemail.com
       </A><BR>
    <I>Sun Oct 23 10:59:25 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015686.html">[rabbitmq-discuss] Limiting the number of non-ack messages cause of subsystem
</A></li>
        <LI>Next message: <A HREF="015775.html">[rabbitmq-discuss] Limiting the number of non-ack messages cause of subsystem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15687">[ date ]</a>
              <a href="thread.html#15687">[ thread ]</a>
              <a href="subject.html#15687">[ subject ]</a>
              <a href="author.html#15687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthew,
yeah that's the other way I was thinking about. The problem is, that
there might be different execution times for each thread. So imagine
the following situation:

- 3 Threads runtime 10 seconds
- 4 Threads runtime 25 seconds
- 3 Threats runtime 200 seconds

Discarding the Consumer for the time till all the Threads are finally
executed would result in an waiting time of 200 seconds. With the ACK
approach I could automatically assign an new thread after 10 seconds.
So from your side, that would be proper way? Are there any samples for
it?

Regards Johannes

On Oct 23, 12:42&#160;am, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt... at rabbitmq.com</A>&gt; wrote:
&gt;<i> On Sat, Oct 22, 2011 at 02:08:40PM -0700, jhiemer wrote:
</I>&gt;<i> &gt; I am currently facing the following situation:
</I>&gt;<i> &gt; My setup has a Topic Exchange, wherein all messages are stored. The
</I>&gt;<i> &gt; problem is: the messages consumed are limited by the backend-system.
</I>&gt;<i> &gt; The backend-system is only able to process 10 message at the same
</I>&gt;<i> &gt; time. Each of this messages is bound to a separate thread and I need
</I>&gt;<i> &gt; to wait for its execution until a &quot;slot&quot; is free again. The execution
</I>&gt;<i> &gt; time may vary between 10 seconds and 10 minutes. Is it reasonable to
</I>&gt;<i> &gt; send ACKs just after this amount of time, for acceptance of new
</I>&gt;<i> &gt; messages?
</I>&gt;<i>
</I>&gt;<i> Yes, that will be fine, but you might want to consider some other
</I>&gt;<i> approaches. You could cancel the consumer, then ack all of the msgs. At
</I>&gt;<i> that point you'll receive no further msgs. Then, when you're ready
</I>&gt;<i> again, recreate the consumer and grab the next 10 msgs. This will only
</I>&gt;<i> work effectively if you set basic.qos prefetch count to 10 also.
</I>&gt;<i>
</I>&gt;<i> However, thinking about it, there may not really be much advantage
</I>&gt;<i> between what I'm suggesting and just delaying the acks. Especially if
</I>&gt;<i> you still do the basic.qos prefetch = 10 even in the ack-only version.
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015686.html">[rabbitmq-discuss] Limiting the number of non-ack messages cause of subsystem
</A></li>
	<LI>Next message: <A HREF="015775.html">[rabbitmq-discuss] Limiting the number of non-ack messages cause of subsystem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15687">[ date ]</a>
              <a href="thread.html#15687">[ thread ]</a>
              <a href="subject.html#15687">[ subject ]</a>
              <a href="author.html#15687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
