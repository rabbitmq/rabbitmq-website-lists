<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Shovel Connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Shovel%20Connections&In-Reply-To=%3C005401cc9755%248bc06d40%24a34147c0%24%40omc-international.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015740.html">
   <LINK REL="Next"  HREF="015638.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Shovel Connections</H1>
    <B>Mihir Mone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Shovel%20Connections&In-Reply-To=%3C005401cc9755%248bc06d40%24a34147c0%24%40omc-international.com.au%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Shovel Connections">mihirm at omc-international.com.au
       </A><BR>
    <I>Sun Oct 30 22:44:55 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015740.html">[rabbitmq-discuss] RabbitMQ Shovel Connections
</A></li>
        <LI>Next message: <A HREF="015638.html">[rabbitmq-discuss] pika and node.amqp interop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15886">[ date ]</a>
              <a href="thread.html#15886">[ thread ]</a>
              <a href="subject.html#15886">[ subject ]</a>
              <a href="author.html#15886">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

I have just updated rabbit from 2.4.1 to 2.6.1 and this issue seems to have
been addressed. It looks like now the shovel plugin only establishes
connections if there are any messages on the queue to be shovelled. This is
exactly what I was looking for.

Kudos and thanks to the rabbiters.

Regards,
Mihir

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>
[mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Alexandru
Scvortov
Sent: Tuesday, 25 October 2011 11:15 PM
To: Jelle Smet
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] RabbitMQ Shovel Connections

Hi Jelle,

Sorry for the late reply.

&gt;<i> When the broker is in such a situation, I have found that restarting 
</I>&gt;<i> RabbitMQ with the init scripts is not possible.
</I>
That's interesting.

When the broker reaches the situation, could you try running:
  &gt; rabbitmqctl status
  &gt; rabbitmqclt report
and post the output here?

Could you also check if any errors are being reported in the rabbit and sasl
logs?

Once you do this, could you try stopping rabbit with
  &gt; rabbitmqctl stop
?

All of the above is geared towards finding out why the broker isn't shutting
down.

Cheers,
Alex

On Thu, Oct 20, 2011 at 08:51:10AM -0700, Jelle Smet wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have a newly installed setup running RabbitMQ version 2.6.1 and the 
</I>&gt;<i> Shovel plugin downloaded from:
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_shovel-2.6.1.ez.">http://www.rabbitmq.com/releases/plugins/v2.6.1/rabbitmq_shovel-2.6.1.ez.</A>
</I>&gt;<i> I came across a few occasions which look similar to Mihir's situation.
</I>&gt;<i> On my side no messages are lost, but they just keep sitting 
</I>&gt;<i> unacknowledged in the source broker. Restarting the source broker 
</I>&gt;<i> RabbitMQ the solves the problem.
</I>&gt;<i> When the broker is in such a situation, I have found that restarting 
</I>&gt;<i> RabbitMQ with the init scripts is not possible.  I have to sigkill it 
</I>&gt;<i> and start it again after which everything works again.
</I>&gt;<i> 
</I>&gt;<i> Which output and information I can submit to further troubleshoot this?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Jelle
</I>&gt;<i> 
</I>&gt;<i> 
</I>
&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015740.html">[rabbitmq-discuss] RabbitMQ Shovel Connections
</A></li>
	<LI>Next message: <A HREF="015638.html">[rabbitmq-discuss] pika and node.amqp interop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15886">[ date ]</a>
              <a href="thread.html#15886">[ thread ]</a>
              <a href="subject.html#15886">[ subject ]</a>
              <a href="author.html#15886">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
