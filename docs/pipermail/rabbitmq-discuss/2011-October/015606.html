<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Possible clustering layout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Possible%20clustering%20layout&In-Reply-To=%3C71b8d207-e108-46e6-aea0-c99f9df58d37%40CoachZ.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015603.html">
   <LINK REL="Next"  HREF="015599.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Possible clustering layout</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Possible%20clustering%20layout&In-Reply-To=%3C71b8d207-e108-46e6-aea0-c99f9df58d37%40CoachZ.local%3E"
       TITLE="[rabbitmq-discuss] Possible clustering layout">jerryk at vmware.com
       </A><BR>
    <I>Wed Oct 19 19:35:52 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015603.html">[rabbitmq-discuss] Possible clustering layout
</A></li>
        <LI>Next message: <A HREF="015599.html">[rabbitmq-discuss] Invitation to Keeping It Realtime conference,	Portland, OR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15606">[ date ]</a>
              <a href="thread.html#15606">[ thread ]</a>
              <a href="subject.html#15606">[ subject ]</a>
              <a href="author.html#15606">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: &quot;Adam Rabung&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">adamrabung at gmail.com</A>&gt;
</I>&gt;<i> Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Sent: Wednesday, October 19, 2011 11:16:24 AM
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] Possible clustering layout
</I>&gt;<i>
</I>&gt;<i> Don't worry, I'm definitely the confused one :)
</I>
Hi, Adam... no worries.  The language around the words &quot;clustering&quot;
and &quot;HA&quot; in the Rabbit world is tricky and has a complex history. :-)

&gt;<i> I'm having a hard time finding info on the Active/Active HA in
</I>&gt;<i> 2.6. The FAQ and Clustering Guide led me to believe this feature
</I>&gt;<i> didn't exist yet. Do you know where I can find good info on this new
</I>&gt;<i> feature?
</I>
It's pretty much brand new, having appeared in the most recent
releases.  You can read details here:

<A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A>

This describes the mirrored queue functionality and how to request and
specify mirroring for your queues.

Release notes for RabbitMQ 2.6.1 are here:

<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110912/35da167c/attachment.txt">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110912/35da167c/attachment.txt</A>

The active/active, mirrored queues flavor of HA actually first
appeared immediately previous in 2.6.0, with release notes here:

<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110831/36015373/attachment.txt">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110831/36015373/attachment.txt</A>

Look for the word &quot;mirrored&quot; in that write up.

&gt;<i> I'd say our main goal is horizontal scalability for performance
</I>&gt;<i> sake. We've come to the conclusion that we can RAID disks, and if a
</I>&gt;<i> queue node goes down, we can bring up a new node with the old disk in
</I>&gt;<i> human-scale times.
</I>&gt;<i>
</I>&gt;<i> What do you think? Thank you for any feedback.
</I>
The new active/active, mirrored queue HA is something you likely want
to investigate.  The older RabbitMQ clustering for capacity involved
building a cluster of RabbitMQ nodes, although for implementation
reasons each queue really only existed on one of the nodes, and would
become unavailable with that node's failure.  Thus, you could get greater
throughput overall, but not greater throughput through any particular
queue, which is probably roughly the type of horizontal scalability
you're after.  On the downside, with clustering alone you'd be
vulnerable to that queue's host node failing.  The remedy in those
times was to back queues by shared storage (preferably a decent SAN
solution or the like) and run a hot standby of each node, using
something like Pacemaker to detect failure and do the switch over from
passive to active.  Should you prefer that approach to the new one,
you can still do it, but the new model has fewer moving parts to set
up.

Also, be mindful that with the new active/active HA being so recently
released, you'll have to apply a careful eye to any documentation you
read, since most of it will still refer to the old model.

Best regards,
Jerry
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015603.html">[rabbitmq-discuss] Possible clustering layout
</A></li>
	<LI>Next message: <A HREF="015599.html">[rabbitmq-discuss] Invitation to Keeping It Realtime conference,	Portland, OR
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15606">[ date ]</a>
              <a href="thread.html#15606">[ thread ]</a>
              <a href="subject.html#15606">[ subject ]</a>
              <a href="author.html#15606">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
