<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Highest Reliability simple publish to a queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Highest%20Reliability%20simple%20publish%20to%20a%20queue&In-Reply-To=%3C0b4cc204-d344-4735-9cd4-fc5108263db3%40e25g2000pri.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015582.html">
   <LINK REL="Next"  HREF="015585.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Highest Reliability simple publish to a queue</H1>
    <B>Matt G</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Highest%20Reliability%20simple%20publish%20to%20a%20queue&In-Reply-To=%3C0b4cc204-d344-4735-9cd4-fc5108263db3%40e25g2000pri.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Highest Reliability simple publish to a queue">mattgurney at gmail.com
       </A><BR>
    <I>Tue Oct 18 15:16:24 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015582.html">[rabbitmq-discuss] AMQP 1.0 Specifications
</A></li>
        <LI>Next message: <A HREF="015585.html">[rabbitmq-discuss] Highest Reliability simple publish to a queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15583">[ date ]</a>
              <a href="thread.html#15583">[ thread ]</a>
              <a href="subject.html#15583">[ subject ]</a>
              <a href="author.html#15583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have a simple scenario where a web service will receive a http
request and I would like to insert the request into a queue, and be
sure the message has arrived on the queue before synchronously
responding to the http request.

Ideally I would like RMQ to &quot;guarantee&quot; that the message has been
delivered to the queue. I have been using IBM MQ and TIBCO EMS (JMS
implementation) for many years, but I am new to RMQ.

Performance is not an issue, the volume will not be an issue.

I am using c# with latest AMQ versions on Windows and Linux.

So far it appears to me that I should use the following, can you
review my list and edit as necessary:
Durable exchange
ExchangeType.Direct
Durable queue
Persistent message (Delivery Mode = 2)
Mandatory message
Model/Channel.ConfirmSelect &amp;  Model.WaitForConfirmsOrDie();

I also setup event handlers BasicAcks, BasicNacks &amp; BasicReturn.
If for testing purposes I unbind the queue from the exchange, and send
a single message,  I get a BasicAck and a BasicReturn(NO_ROUTE) back,
however the Model.WaitForConfirmsOrDie() returns without error. This
seems inconsistent in that my message has been lost as there is no
queue bound to the exchange and I have specified mandatory and every
persistent option I can find. Is this correct, or am I doing something
wrong? Do I need to do/check both (WaitForConfirms &amp; BasicReturn event
msg) to be sure the message was successfully delivered to the queue?

Where is the documentation for API calls which are not documented in
the API doc, an example is WaitForConfirmsOrDie, but there are many
others?

I read one of the other posts directing people away from transactions
and towards the Model/Channel.ConfirmSelect &amp;
Model.WaitForConfirmsOrDie() model, so I have not investigated
transactions.

What about connection heart beating? I know from my experience with
other products HB's are good way to keep the client and server in-sync
and aware if the other party has gone off line. Should I overwrite the
default which appears to be no heartbeats?

I am not currently using any of the helper/pattern classes, would one
of those be suitable for my requirements for high reliability.

Thanks,
Matt.
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015582.html">[rabbitmq-discuss] AMQP 1.0 Specifications
</A></li>
	<LI>Next message: <A HREF="015585.html">[rabbitmq-discuss] Highest Reliability simple publish to a queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15583">[ date ]</a>
              <a href="thread.html#15583">[ thread ]</a>
              <a href="subject.html#15583">[ subject ]</a>
              <a href="author.html#15583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
