<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consume
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consume&In-Reply-To=%3C8882CFE4FFAF3F4E8814F0E61F2919A30ABF7B2D%40l360xch01.office.leads360.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015525.html">
   <LINK REL="Next"  HREF="015521.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consume</H1>
    <B>Yann Luppo</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consume&In-Reply-To=%3C8882CFE4FFAF3F4E8814F0E61F2919A30ABF7B2D%40l360xch01.office.leads360.com%3E"
       TITLE="[rabbitmq-discuss] Consume">yluppo at leads360.com
       </A><BR>
    <I>Thu Oct 13 20:00:18 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015525.html">[rabbitmq-discuss] problems updating to new client library
</A></li>
        <LI>Next message: <A HREF="015521.html">[rabbitmq-discuss] Consume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15514">[ date ]</a>
              <a href="thread.html#15514">[ thread ]</a>
              <a href="subject.html#15514">[ subject ]</a>
              <a href="author.html#15514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

 

I'm currently trying to setup RabbitMQ for my company and we have 1
publisher pushing to 1 queue, pretty simple so far. 

But we have lots of consumers, potentially up to a hundred, reading that
queue. Reason being the processing of each of those messages can take a
long time.

 

To clarify, in our current scenario after processing, the consumer logic
requeues the message. The goal is to have a given set of messages being
processed over and over again in a cycle.

 

We're using the .Net client library and we quickly favored the consumer
approach:

 

QueueingBasicConsumer consumer = new
QueueingBasicConsumer(this.channel);

string consumerTag = this.channel.BasicConsume(this.queueName, noAck,
consumer);

 

But we ran into issues where the messages were getting dropped. I payed
attention to make sure we were doing the necessary ACK and/or NACK to
make sure a message always gets processed.

After a while I decided that my implementation was flawed somewhere, so
for a test I simplified the code and started using the Subscription
object:

 

Subscription subscription = new Subscription(this.channel,
this.queueName, false);

 

foreach (BasicDeliverEventArgs e in subscription)
{
  if (!e.Redelivered)
    ...
}
 
 

The problem w/ this approach is all our consumers read all the
messages.... Instead of just dequeuing in a round-robin fashion.

 

Could someone point me in the right direction for using RabbitMQ to do a
round-robin-like distribution?

 

Thanks,

Yann

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111013/66544771/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20111013/66544771/attachment.htm</A>&gt;
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015525.html">[rabbitmq-discuss] problems updating to new client library
</A></li>
	<LI>Next message: <A HREF="015521.html">[rabbitmq-discuss] Consume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15514">[ date ]</a>
              <a href="thread.html#15514">[ thread ]</a>
              <a href="subject.html#15514">[ subject ]</a>
              <a href="author.html#15514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
