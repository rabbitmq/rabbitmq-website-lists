<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20there%20a%20channel%20publish%20throughput%20limit%0A%20to%20a%20queue%3F&In-Reply-To=%3C4E8C1FB1.9090307%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015366.html">
   <LINK REL="Next"  HREF="015373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?</H1>
    <B>Tim Fox</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20there%20a%20channel%20publish%20throughput%20limit%0A%20to%20a%20queue%3F&In-Reply-To=%3C4E8C1FB1.9090307%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?">tim at rabbitmq.com
       </A><BR>
    <I>Wed Oct  5 10:13:21 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015366.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
        <LI>Next message: <A HREF="015373.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15371">[ date ]</a>
              <a href="thread.html#15371">[ thread ]</a>
              <a href="subject.html#15371">[ subject ]</a>
              <a href="author.html#15371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/10/11 19:00, Allen Kim wrote:
&gt;<i> Thanks for your reply. I have been waiting for someone to reply.
</I>&gt;<i>
</I>&gt;<i> 1. They are persistent messages (disk writing speed could slow down that
</I>&gt;<i> much?)
</I>
A good disk can sync at about 200-300 syncs per second. If each 
published message is being synced to disk you should expect that level 
of performance. That's a hardware limit, not RabbitMQ related.

If you want to go above that and still have your data actually persisted 
when you think it is (i.e. when the confirm is returned), then you 
either need to get a solid state disk, SAN, or disks with non volatile 
cache.

Most desktop setups have disk write cache enabled by default, so you can 
get falsely highly rates of several thousand &quot;syncs&quot; per second when 
running on your cheap desktop/laptop only to be surprised when the rate 
goes down when you deploy to your production servers (since prod servers 
generally don't have cache enabled by default).

&gt;<i> 2. NOT large message (it's around two lines 200-400 bytes)
</I>&gt;<i> 3. routing to only one queue
</I>&gt;<i> 4. NO transaction
</I>&gt;<i> 5. 3-4 consumers with basic.qos prefetch to 100.
</I>&gt;<i>
</I>&gt;<i> So, #1 and #5 matters?
</I>&gt;<i>
</I>&gt;<i> Allen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 11-10-04 4:37 AM, &quot;Matthias Radestock&quot;&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;  wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 29/09/11 21:47, Allen Kim wrote:
</I>&gt;&gt;&gt;<i> I checked the channel, and found out that the channel was still
</I>&gt;&gt;&gt;<i> publishing to a queue.
</I>&gt;&gt;<i> Looks like the queues couldn't keep up with the inbound publishing rate,
</I>&gt;&gt;<i> so rabbit ended up buffering messages in the channel.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The speed of publishing was around 700/s to 800/s, which is definitely
</I>&gt;&gt;&gt;<i> not 2000/s.
</I>&gt;&gt;<i> ...which is another indication of the above.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I was wondering if there is limit that affects publishing speed.
</I>&gt;&gt;<i> Well, obviously rabbit cannot process messages at an infinite rate, so
</I>&gt;&gt;<i> clearly there has to be a limit ;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However, 700Hz sounds quite low. On my desktop I can get more than 20
</I>&gt;&gt;<i> times that. But there are many factors which can reduce that rate:
</I>&gt;&gt;<i> - persistent messages
</I>&gt;&gt;<i> - large messages
</I>&gt;&gt;<i> - routing messages to lots of queues
</I>&gt;&gt;<i> - using transactions
</I>&gt;&gt;<i> - having lots of consumers with basic.qos prefetch
</I>&gt;&gt;<i> etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Matthias.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015366.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
	<LI>Next message: <A HREF="015373.html">[rabbitmq-discuss] Is there a channel publish throughput limit to a queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15371">[ date ]</a>
              <a href="thread.html#15371">[ thread ]</a>
              <a href="subject.html#15371">[ subject ]</a>
              <a href="author.html#15371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
