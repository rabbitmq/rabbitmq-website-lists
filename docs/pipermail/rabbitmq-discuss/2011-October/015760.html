<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] maximum connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20maximum%20connections&In-Reply-To=%3CEA9A89D5-DDBE-4592-902F-7E06038BA4E1%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015725.html">
   <LINK REL="Next"  HREF="015728.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] maximum connections</H1>
    <B>Michael Barrett</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20maximum%20connections&In-Reply-To=%3CEA9A89D5-DDBE-4592-902F-7E06038BA4E1%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] maximum connections">loki77 at gmail.com
       </A><BR>
    <I>Tue Oct 25 18:43:43 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015725.html">[rabbitmq-discuss] maximum connections
</A></li>
        <LI>Next message: <A HREF="015728.html">[rabbitmq-discuss] JSonRpc Client/Server - when exception occurs...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15760">[ date ]</a>
              <a href="thread.html#15760">[ thread ]</a>
              <a href="subject.html#15760">[ subject ]</a>
              <a href="author.html#15760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahh, sorry - you're correct.  The ulimit for that user wasn't following what was declared in /etc/security/limits.conf (Ubuntu).  It looks like this is because pam isn't enabling limits for that user.

Thanks!

On Oct 25, 2011, at 12:17 AM, Alexandru Scvor&#355;ov wrote:

&gt;&gt;<i> I'm testing out a new rabbitMQ system and noticed that the system seems to stop accepting new connections after around 830 get opened.  Can anyone tell me what would cause it to stop at that point? 
</I>&gt;<i> 
</I>&gt;<i> It ran out of socket descriptors probably (or was getting close to the
</I>&gt;<i> limit and the internal descriptor limiter kicked in).  On my system,
</I>&gt;<i> this limit is 829, by default, so this is likely the cause.
</I>&gt;<i> 
</I>&gt;<i> This is calculated as a fixed fraction of the file descriptor limit.
</I>&gt;<i> 
</I>&gt;&gt;<i> The system ulimit on open files is 4096 (soft &amp; hard) and the rabbitMQ user isn't anywhere near using that many.  Is there anything else that could be responsible for this limit?
</I>&gt;<i> 
</I>&gt;<i> Huh.  Are you sure?  A 830 socket limit corresponds to a 1024 file
</I>&gt;<i> descriptor limit.
</I>&gt;<i> 
</I>&gt;<i> Try enabling the management plugin to see if what the limits are what
</I>&gt;<i> you think they are (the overview page gives a breakdown of the limits
</I>&gt;<i> RabbitMQ knows about).
</I>&gt;<i> 
</I>&gt;<i> What is the output of `ulimit -a`?  What happens if you do a `ulimit -n
</I>&gt;<i> 4096` in the shell before starting rabbitmq-server in the same shell?
</I>&gt;<i> That should increase the maximum number of connection to 3594.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Alex
</I>&gt;<i> 
</I>&gt;<i> On Mon, Oct 24, 2011 at 09:04:38PM -0700, Michael Barrett wrote:
</I>&gt;&gt;<i> I'm testing out a new rabbitMQ system and noticed that the system seems to stop accepting new connections after around 830 get opened.  Can anyone tell me what would cause it to stop at that point?  The system ulimit on open files is 4096 (soft &amp; hard) and the rabbitMQ user isn't anywhere near using that many.  Is there anything else that could be responsible for this limit?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Michael Barrett
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">loki77 at gmail.com</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
--
Michael Barrett
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">loki77 at gmail.com</A>




</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015725.html">[rabbitmq-discuss] maximum connections
</A></li>
	<LI>Next message: <A HREF="015728.html">[rabbitmq-discuss] JSonRpc Client/Server - when exception occurs...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15760">[ date ]</a>
              <a href="thread.html#15760">[ thread ]</a>
              <a href="subject.html#15760">[ subject ]</a>
              <a href="author.html#15760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
