From 314992959 at qq.com  Mon Jul  1 02:45:54 2013
From: 314992959 at qq.com (3k4b251)
Date: Sun, 30 Jun 2013 18:45:54 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
Message-ID: <1372643154087-27699.post@n5.nabble.com>

I  want  to  Write a  online server.  I  need  it  to   server    a  lot  of
consumers.   In my idea, when one consumer  login, I try to request a
consumer in rabbitmq-server for him.   So   I  can't  make sure  how many
consumers there  before  I   start  receive  message  sometimes.  I  just  
want  to  declare consumer  after  I  wait  message.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27699.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2010 at gmail.com  Mon Jul  1 07:34:36 2013
From: haster2010 at gmail.com (haster2010 at gmail.com)
Date: Sun, 30 Jun 2013 23:34:36 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ transaction mode and mandatory bit
Message-ID: <1bf7f841-4cfd-4715-adeb-5f80371d2a68@googlegroups.com>



Hello!

I have a declared durable exchange and no one queue (so exchange hasn't 
bound to any queue) I create channel in transaction mode and publish 
durable message with set mandatory bit.

After that I call commit method, which hasn't returned any error...

Do you know where my message is after that? Why there is no any error 
(queue is absent)?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130630/9f5f899d/attachment.htm>

From emile at rabbitmq.com  Mon Jul  1 09:01:38 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 01 Jul 2013 09:01:38 +0100
Subject: [rabbitmq-discuss] RabbitMQ transaction mode and mandatory bit
In-Reply-To: <1bf7f841-4cfd-4715-adeb-5f80371d2a68@googlegroups.com>
References: <1bf7f841-4cfd-4715-adeb-5f80371d2a68@googlegroups.com>
Message-ID: <51D13762.7060702@rabbitmq.com>

On 01/07/13 07:34, haster2010 at gmail.com wrote:

> Do you know where my message is after that? 

The message will be dropped. If you don't want that then consider
setting up an alternate exchange:

http://www.rabbitmq.com/ae.html

> Why there is no any error (queue is absent)?

You should receive a basic.return before tx.commit-ok rather than an
error due to publishing an mandatory unroutable message in a
transaction. See

http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.publish.mandatory

http://www.rabbitmq.com/semantics.html


-Emile



From sgnayagam at gmail.com  Mon Jul  1 09:33:24 2013
From: sgnayagam at gmail.com (Gomathi Nayagam)
Date: Mon, 1 Jul 2013 14:03:24 +0530
Subject: [rabbitmq-discuss] Active-Active implementation issues
Message-ID: <CAO68Yr+ea2k0+GuHD48Z36KY7M-hOKvrr4+7207umBrNmZKaVA@mail.gmail.com>

I am trying to implement the active-active High availability Queue and i
have some issues in the implementation. The problem is when we consume
messages from the Mirrored queue if any one of the node is down, we can
able to consume the messages after the node failure. But the consumed
messages after the node failure are still available in the rabbitmq console
even after acking all of the messages.

Some information about the overview of the configuration to test
active-active queues

I have NODE1 in Host1 and NODE2 in Host2. Both of the nodes are in cluster.
I have a Queue named TestQ in NODE1, since i have made this queue (TestQ)
as Mirrored Queue through the policies it is available in Node2 which is
running in Host2.

I am passing the array of Address(Host1, Host2) to get the connection in my
consumer. the code snippet is

Address address1 = new Address(Host1, 5672);
Address address2 = new Address(Host2, 5672);

RabbitmqConsumer consumer = new RabbitmqConsumer(new Address[]{address1,
address2}, queue);

While getting the connection,
Connection conn = connectionFactory.newConnection(addresses);

My use case is as below.

I have 30 messages in TestQ and i can see it in the RabbitMQ console of
Host1,Host2 looks like below

Host1:
Name    Node
TestQ    rabbit at Node2

Host2:
Name    Node
TestQ    rabbit at Node2

In my consumer, I have implemented my own consumer as below.

class MyConsumer extends QueueingConsumer{

    Channel channel;
    public MyConsumer(Channel ch) {
        super(ch);
        this.channel = ch;
    }

    @Override
    public void handleCancel(String consumerTag)  {
        System.out.println("handleCancel :: consumertag "+consumerTag+"
channel opened "+channel.isOpen()+",channel "+channel+", rabbitmq consumer
ch "+RabbitmqConsumer.ch);

    }
}

If i run my consumer, it creates a channel with the reference of
AMQChannel(amqp://guest at Host1:5672/,1) and it consumes the messasges from
the TestQ. I have checked the consumer tag of the channel in both of the
host and both are same.

After some of the messages (assume 10 messages) are consumed, i explicitly
down the Node2 by giving the below command

node2$ ./rabbitmqctl stop_app

After the failure of Node2, i can see the print statements which i added in
the handleCancel() method and consumer consumes all of the messages with
out any error. The problem is the even though the remaining 20 messages are
consumed and acked in the consumer, but if i check it in the rabbitmq
console, the 20 messages are still exists in the TestQ.

What i have to do in this scenario to overcome this issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/24ad62a2/attachment.htm>

From emile at rabbitmq.com  Mon Jul  1 10:11:07 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 01 Jul 2013 10:11:07 +0100
Subject: [rabbitmq-discuss] HiPE compilation error with rabbitmq 3.1.3
 and erlang R16B01: Cannot find ssl_record.beam file.
In-Reply-To: <CAMbH-oz5z5jyG2EAu__LOaV7cD25iXK1Vbk_XjwnaU0+H1f+0A@mail.gmail.com>
References: <1372335488.2476.90.camel@CLM3X4J.systran.local>
	<CAGrdgiUazP_DU7Dw4Zog6qVk3r5DNvq6ziLxSH2hL+sKs15zTg@mail.gmail.com>
	<51CC33DA.5060708@rabbitmq.com>
	<CAMbH-oz5z5jyG2EAu__LOaV7cD25iXK1Vbk_XjwnaU0+H1f+0A@mail.gmail.com>
Message-ID: <51D147AB.8060308@rabbitmq.com>

On 28/06/13 15:38, Daniel Luna wrote:

> Are any of these crashes reproducible?  Do you know which modules are
> the cause of the crashes.


AMQP methods are a long way removed from the CPU instruction set, but
there may be broker stress tests that eventually trigger HiPE crashes.


> I know that the HiPE team (as small as it may be nowadays) would love to
> get bug reports regarding anything that's broken. 

Thanks for inviting feedback. How should someone who wishes to assist go
about this? Does the Erlang VM need to be built in a particular way for
the HiPE team to be able to use the stacktraces?


-Emile



From simon at rabbitmq.com  Mon Jul  1 10:14:15 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 01 Jul 2013 10:14:15 +0100
Subject: [rabbitmq-discuss] Active-Active implementation issues
In-Reply-To: <CAO68Yr+ea2k0+GuHD48Z36KY7M-hOKvrr4+7207umBrNmZKaVA@mail.gmail.com>
References: <CAO68Yr+ea2k0+GuHD48Z36KY7M-hOKvrr4+7207umBrNmZKaVA@mail.gmail.com>
Message-ID: <51D14867.9000203@rabbitmq.com>

Hi. Couple of points:

1) It's not *guaranteed* that after you acknowledge a message you will 
never see it again after failover - the ack has to travel across the 
network and be received by the broker, and if failover happens between 
the broker sending the message out and receiving an ack then you will 
see the message again.

2) If this is not happening, make sure you are acknowledging the 
messages correctly - make sure they vanish from the console when 
failover is not an issue.

Cheers, Simon

On 01/07/2013 09:33, Gomathi Nayagam wrote:
> I am trying to implement the active-active High availability Queue and i
> have some issues in the implementation. The problem is when we consume
> messages from the Mirrored queue if any one of the node is down, we can
> able to consume the messages after the node failure. But the consumed
> messages after the node failure are still available in the rabbitmq
> console even after acking all of the messages.
>
> Some information about the overview of the configuration to test
> active-active queues
>
> I have NODE1 in Host1 and NODE2 in Host2. Both of the nodes are in
> cluster. I have a Queue named TestQ in NODE1, since i have made this
> queue (TestQ) as Mirrored Queue through the policies it is available in
> Node2 which is running in Host2.
>
> I am passing the array of Address(Host1, Host2) to get the connection in
> my consumer. the code snippet is
>
> Address address1 = new Address(Host1, 5672);
> Address address2 = new Address(Host2, 5672);
>
> RabbitmqConsumer consumer = new RabbitmqConsumer(new Address[]{address1,
> address2}, queue);
>
> While getting the connection,
> Connection conn = connectionFactory.newConnection(addresses);
>
> My use case is as below.
>
> I have 30 messages in TestQ and i can see it in the RabbitMQ console of
> Host1,Host2 looks like below
>
> Host1:
> Name    Node
> TestQ    rabbit at Node2
>
> Host2:
> Name    Node
> TestQ    rabbit at Node2
>
> In my consumer, I have implemented my own consumer as below.
>
> class MyConsumer extends QueueingConsumer{
>
>      Channel channel;
>      public MyConsumer(Channel ch) {
>          super(ch);
>          this.channel = ch;
>      }
>
>      @Override
>      public void handleCancel(String consumerTag)  {
>          System.out.println("handleCancel :: consumertag "+consumerTag+"
> channel opened "+channel.isOpen()+",channel "+channel+", rabbitmq
> consumer ch "+RabbitmqConsumer.ch);
>
>      }
> }
>
> If i run my consumer, it creates a channel with the reference of
> AMQChannel(amqp://guest at Host1:5672/,1) and it consumes the messasges
> from the TestQ. I have checked the consumer tag of the channel in both
> of the host and both are same.
>
> After some of the messages (assume 10 messages) are consumed, i
> explicitly down the Node2 by giving the below command
>
> node2$ ./rabbitmqctl stop_app
>
> After the failure of Node2, i can see the print statements which i added
> in the handleCancel() method and consumer consumes all of the messages
> with out any error. The problem is the even though the remaining 20
> messages are consumed and acked in the consumer, but if i check it in
> the rabbitmq console, the 20 messages are still exists in the TestQ.
>
> What i have to do in this scenario to overcome this issue.
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


From ankit.ag2010 at gmail.com  Mon Jul  1 10:50:10 2013
From: ankit.ag2010 at gmail.com (ankitag2010)
Date: Mon, 1 Jul 2013 02:50:10 -0700 (PDT)
Subject: [rabbitmq-discuss] AMQP connections closing very frequently
In-Reply-To: <51CFDF13.1070800@rabbitmq.com>
References: <8c0d3987-774e-4a4a-8054-b6b7c8a67e47@googlegroups.com>
	<51C80B50.2090104@rabbitmq.com>
	<CALyoCeMg0su9hzSaERZrazxMpmOJ7KyBF=V=VA4gubUytUBYHA@mail.gmail.com>
	<249AB275-3EF3-450F-B016-7D30BDB9D9ED@rabbitmq.com>
	<1372532519918-27690.post@n5.nabble.com>
	<1372565267881-27693.post@n5.nabble.com>
	<1372569073924-27694.post@n5.nabble.com>
	<51CFDF13.1070800@rabbitmq.com>
Message-ID: <1372672210817-27705.post@n5.nabble.com>

Got the following error when hard-coded :-

RABBITMQ_CONFIG_ARG="-config /etc/rabbitmq/rabbitm" 

in file "/usr/lib/rabbitmq/lib/rabbitmq_server-3.1.3/sbin/rabbitmq-server"

Error:-

{"could not start kernel pid",application_controller,"error in config file
\"/etc/rabbitmq/rabbitm.config\" (none): configuration file not found"}

Why am i not even getting entry stating:-

config file(s) : (none) 


Could there be any problem with the format of the configuration file?

[ {rabbit, [{frame_max, 0}]} ].




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/AMQP-connections-closing-very-frequently-tp27552p27705.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Mon Jul  1 10:52:13 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 1 Jul 2013 02:52:13 -0700 (PDT)
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
Message-ID: <1372672333880-27706.post@n5.nabble.com>

Hi there!

I open channel in transaction mode and try to publish some message to
exchange, that doesn't bind to any queue.
And after commit I have no any error...

I expected that commit will return some error...

Do you know where my message is after that? Is it dropped and if so why I
doesn't receive any error?


Pseudo code:
 amqp_new_connection();
amqp_open_socket(host, port); 
amqp_set_sockfd(conn, sockfd);
amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, user, pass);
amqp_channel_open(conn, channel_exchange);
amqp_rpc_reply_t res = amqp_get_rpc_reply(conn);
amqp_tx_select(conn, channel_exchange);
res = amqp_get_rpc_reply(conn);
... form message ...
  int r = amqp_basic_publish(conn, channel_exchange, exchange_bytes,
routingKey_bytes,  1, 0, &props, message_bytes);
  if (r < 0) {
    char *errstr = amqp_error_string(-r);
    cout << errstr;
    free(errstr);
    char ch;
    cin >> ch;
  }


  amqp_tx_commit(conn, channel_exchange);
  die_on_amqp_error(amqp_get_rpc_reply(conn), "Commit error");

  cout << "Publish = " << r << endl;
  char ch;
  cin >> ch;



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Publish-to-exchange-that-doesn-t-bind-to-any-queue-in-trunsaction-mode-tp27706.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Mon Jul  1 11:07:20 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 01 Jul 2013 11:07:20 +0100
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <1372672333880-27706.post@n5.nabble.com>
References: <1372672333880-27706.post@n5.nabble.com>
Message-ID: <51D154D8.2090108@rabbitmq.com>

On 01/07/13 10:52, Haster wrote:

> I expected that commit will return some error...

If your expectation is based on documentation then please let us know
the location so that it can be corrected.

Please see my previous answer to the same question:

http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-July/028192.html




-Emile





From matthias at rabbitmq.com  Mon Jul  1 11:08:10 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 01 Jul 2013 11:08:10 +0100
Subject: [rabbitmq-discuss] AMQP connections closing very frequently
In-Reply-To: <1372672210817-27705.post@n5.nabble.com>
References: <8c0d3987-774e-4a4a-8054-b6b7c8a67e47@googlegroups.com>
	<51C80B50.2090104@rabbitmq.com>
	<CALyoCeMg0su9hzSaERZrazxMpmOJ7KyBF=V=VA4gubUytUBYHA@mail.gmail.com>
	<249AB275-3EF3-450F-B016-7D30BDB9D9ED@rabbitmq.com>
	<1372532519918-27690.post@n5.nabble.com>
	<1372565267881-27693.post@n5.nabble.com>
	<1372569073924-27694.post@n5.nabble.com>
	<51CFDF13.1070800@rabbitmq.com>
	<1372672210817-27705.post@n5.nabble.com>
Message-ID: <51D1550A.5020807@rabbitmq.com>

On 01/07/13 10:50, ankitag2010 wrote:
> Got the following error when hard-coded :-
>
> RABBITMQ_CONFIG_ARG="-config /etc/rabbitmq/rabbitm"
>
> in file "/usr/lib/rabbitmq/lib/rabbitmq_server-3.1.3/sbin/rabbitmq-server"
>
> Error:-
>
> {"could not start kernel pid",application_controller,"error in config file
> \"/etc/rabbitmq/rabbitm.config\" (none): configuration file not found"}

That is what I expected to see. good.

So if you are *not* seeing that error when setting the value to "-config 
/etc/rabbitmq/rabbitmq" then that means the config file must have been 
read. And it should show up in the log message (the "config file(s): 
..." line). Is that the case?

> Could there be any problem with the format of the configuration file?
>
> [ {rabbit, [{frame_max, 0}]} ].

That looks fine. Certainly works for me.

You can check whether the settings have taken effect by inspecting the 
output of 'rabbitmqctl environment'.


Matthias.


From matthias at rabbitmq.com  Mon Jul  1 11:10:04 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 01 Jul 2013 11:10:04 +0100
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <1372672333880-27706.post@n5.nabble.com>
References: <1372672333880-27706.post@n5.nabble.com>
Message-ID: <51D1557C.7010606@rabbitmq.com>

On 01/07/13 10:52, Haster wrote:
> I open channel in transaction mode and try to publish some message to
> exchange, that doesn't bind to any queue.
> And after commit I have no any error...

My colleague Emile already answered your earlier post on the same 
subject here: 
http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-transaction-mode-and-mandatory-bit-tp27700p27701.html

Matthias.

From haster2004 at yandex.ru  Mon Jul  1 11:16:56 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 1 Jul 2013 03:16:56 -0700 (PDT)
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <51D154D8.2090108@rabbitmq.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
Message-ID: <1372673816421-27710.post@n5.nabble.com>

Emile, thanks for answers.

I hope that if I use transactions - I wouldn't lost my message.
In my case I send message and doesn't have any error => so I think that
message was successfully
processed by RabbitMQ but in true - my message is dropped.

Do you know any method how to be sure what message was send to any queue?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Publish-to-exchange-that-doesn-t-bind-to-any-queue-in-trunsaction-mode-tp27706p27710.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Mon Jul  1 11:53:23 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 01 Jul 2013 11:53:23 +0100
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <1372673816421-27710.post@n5.nabble.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
	<1372673816421-27710.post@n5.nabble.com>
Message-ID: <51D15FA3.9010306@rabbitmq.com>



Hi

On 01/07/13 11:16, Haster wrote:

> so I think that message was successfully processed by RabbitMQ but in
> true - my message is dropped.

In this context successful processing means dropping the message.

> Do you know any method how to be sure what message was send to any queue?

If a message published with a mandatory flag cannot be routed to a queue
then it will be returned to the publisher using basic.return.



-Emile




From sgnayagam at gmail.com  Mon Jul  1 11:57:22 2013
From: sgnayagam at gmail.com (Gomathi Nayagam)
Date: Mon, 1 Jul 2013 16:27:22 +0530
Subject: [rabbitmq-discuss] Active-Active implementation issues
In-Reply-To: <CAO68YrLLXkWO7q3PLwzD2DZ9kHgNEwKd=vEB17A+yFQYyVGg1Q@mail.gmail.com>
References: <CAO68Yr+ea2k0+GuHD48Z36KY7M-hOKvrr4+7207umBrNmZKaVA@mail.gmail.com>
	<51D14867.9000203@rabbitmq.com>
	<CAO68YrLLXkWO7q3PLwzD2DZ9kHgNEwKd=vEB17A+yFQYyVGg1Q@mail.gmail.com>
Message-ID: <CAO68YrLA1-D641E5v0xQz4+qMW=Obe31mXi2dmFvZVmn7R37WQ@mail.gmail.com>

Hi

Thanks for the reply.

My inline response are below.

---------- Forwarded message ----------
From: Simon MacMullen <simon at rabbitmq.com>
Date: Mon, Jul 1, 2013 at 2:44 PM
Subject: Re: [rabbitmq-discuss] Active-Active implementation issues
To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com>
Cc: Gomathi Nayagam <sgnayagam at gmail.com>


Hi. Couple of points:

1) It's not *guaranteed* that after you acknowledge a message you will
never see it again after failover - the ack has to travel across the
network and be received by the broker, and if failover happens between the
broker sending the message out and receiving an ack then you will see the
message again.

[Reply] I agree with this point.


2) If this is not happening, make sure you are acknowledging the messages
correctly - make sure they vanish from the console when failover is not an
issue.

[Reply] Let's take the below example, the queue has 20 messages and after
13 messages are consumed (11 messages are acked, 2 messages ack are not
reached to broker) Node1 is down. So in the Node2 we could see 9 messages.
But the consumer consumes and acked all 9 messages (i can get the print
statements inside handleCancel()) during the fail over, but the messages
are not vanishing from the console. It leads to duplication of messages.

Thanks



On Mon, Jul 1, 2013 at 3:31 PM, Gomathi Nayagam <sgnayagam at gmail.com> wrote:

> Hi
>
> Thanks for the reply.
>
> My inline response are below.
>
> ---------- Forwarded message ----------
> From: Simon MacMullen <simon at rabbitmq.com>
> Date: Mon, Jul 1, 2013 at 2:44 PM
> Subject: Re: [rabbitmq-discuss] Active-Active implementation issues
> To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com>
> Cc: Gomathi Nayagam <sgnayagam at gmail.com>
>
>
> Hi. Couple of points:
>
> 1) It's not *guaranteed* that after you acknowledge a message you will
> never see it again after failover - the ack has to travel across the
> network and be received by the broker, and if failover happens between the
> broker sending the message out and receiving an ack then you will see the
> message again.
>
> [Reply] I agree with this point.
>
>
> 2) If this is not happening, make sure you are acknowledging the messages
> correctly - make sure they vanish from the console when failover is not an
> issue.
>
> [Reply] Let's take the below example, the queue has 20 messages and after
> 13 messages are consumed (11 messages are acked, 2 messages ack are not
> reached to broker) Node1 is down. So in the Node2 we could see 9 messages.
> But the consumer consumes and acked all 9 messages (i can get the print
> statements inside handleCancel()) during the fail over, but the messages
> are not vanishing from the console. It leads to duplication of messages.
>
> Thanks
>
> Cheers, Simon
>
>
> On 01/07/2013 09:33, Gomathi Nayagam wrote:
>
>> I am trying to implement the active-active High availability Queue and i
>> have some issues in the implementation. The problem is when we consume
>> messages from the Mirrored queue if any one of the node is down, we can
>> able to consume the messages after the node failure. But the consumed
>> messages after the node failure are still available in the rabbitmq
>> console even after acking all of the messages.
>>
>> Some information about the overview of the configuration to test
>> active-active queues
>>
>> I have NODE1 in Host1 and NODE2 in Host2. Both of the nodes are in
>> cluster. I have a Queue named TestQ in NODE1, since i have made this
>> queue (TestQ) as Mirrored Queue through the policies it is available in
>> Node2 which is running in Host2.
>>
>> I am passing the array of Address(Host1, Host2) to get the connection in
>> my consumer. the code snippet is
>>
>> Address address1 = new Address(Host1, 5672);
>> Address address2 = new Address(Host2, 5672);
>>
>> RabbitmqConsumer consumer = new RabbitmqConsumer(new Address[]{address1,
>> address2}, queue);
>>
>> While getting the connection,
>> Connection conn = connectionFactory.**newConnection(addresses);
>>
>> My use case is as below.
>>
>> I have 30 messages in TestQ and i can see it in the RabbitMQ console of
>> Host1,Host2 looks like below
>>
>> Host1:
>> Name    Node
>> TestQ    rabbit at Node2
>>
>> Host2:
>> Name    Node
>> TestQ    rabbit at Node2
>>
>> In my consumer, I have implemented my own consumer as below.
>>
>> class MyConsumer extends QueueingConsumer{
>>
>>      Channel channel;
>>      public MyConsumer(Channel ch) {
>>          super(ch);
>>          this.channel = ch;
>>      }
>>
>>      @Override
>>      public void handleCancel(String consumerTag)  {
>>          System.out.println("**handleCancel :: consumertag
>> "+consumerTag+"
>> channel opened "+channel.isOpen()+",channel "+channel+", rabbitmq
>> consumer ch "+RabbitmqConsumer.ch);
>>
>>      }
>> }
>>
>> If i run my consumer, it creates a channel with the reference of
>> AMQChannel(amqp://guest at Host1:**5672/,1) and it consumes the messasges
>> from the TestQ. I have checked the consumer tag of the channel in both
>> of the host and both are same.
>>
>> After some of the messages (assume 10 messages) are consumed, i
>> explicitly down the Node2 by giving the below command
>>
>> node2$ ./rabbitmqctl stop_app
>>
>> After the failure of Node2, i can see the print statements which i added
>> in the handleCancel() method and consumer consumes all of the messages
>> with out any error. The problem is the even though the remaining 20
>> messages are consumed and acked in the consumer, but if i check it in
>> the rabbitmq console, the 20 messages are still exists in the TestQ.
>>
>> What i have to do in this scenario to overcome this issue.
>>
>>
>> ______________________________**_________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
>> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/614d0894/attachment.htm>

From mklishin at gopivotal.com  Mon Jul  1 12:18:22 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 1 Jul 2013 15:18:22 +0400
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
	queue in trunsaction mode
In-Reply-To: <1372673816421-27710.post@n5.nabble.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
	<1372673816421-27710.post@n5.nabble.com>
Message-ID: <B9A6F0C2-CE80-4E68-B52F-2A030EFB00A7@gopivotal.com>

Haster:

> Do you know any method how to be sure what message was send to any queue?

You probably want Publisher Confirms:
http://www.rabbitmq.com/confirms.html

in combination with basic.return (which will cause messages that cannot be
routed returned).

MK

From haster2004 at yandex.ru  Mon Jul  1 12:11:24 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 1 Jul 2013 04:11:24 -0700 (PDT)
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <51D15FA3.9010306@rabbitmq.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
	<1372673816421-27710.post@n5.nabble.com>
	<51D15FA3.9010306@rabbitmq.com>
Message-ID: <1372677084982-27713.post@n5.nabble.com>

Emile, 

and what is the flow:
I need set mandatory flag, publish message and than start any thread what
will check return method?
So if I receive it - it's all right, but If my message will send
successfully I will have to drop this thread after some time... I think this
behavior isn't simple (also I don't see any API in rabbitmq-c client).
Also I found such words in documentation (Full Protocol Reference)

Applications MUST NOT rely on the atomicity of transactions that affect more
than one queue.
Applications MUST NOT rely on the behaviour of transactions that include
messages published with the immediate option.
*Applications MUST NOT rely on the behaviour of transactions that include
messages published with the mandatory option.*

As I understand it is a bad idea to use mandatory bit with transactions or I
am not right?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Publish-to-exchange-that-doesn-t-bind-to-any-queue-in-trunsaction-mode-tp27706p27713.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Mon Jul  1 13:37:36 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Mon, 01 Jul 2013 13:37:36 +0100
Subject: [rabbitmq-discuss] LDAP authentication without authorization
In-Reply-To: <e15c15f4-9a25-4c6f-b8c5-7a612614d6bb@googlegroups.com>
References: <e15c15f4-9a25-4c6f-b8c5-7a612614d6bb@googlegroups.com>
Message-ID: <51D17810.7020302@rabbitmq.com>

On 27/06/13 16:13, Steve V wrote:
> Is it possible to only do authentication through LDAP, and setup
> authorization on my own within Rabbit?

Hmm. I don't think so at the moment. That might be quite easy to add 
though - I'll file a bug for this.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From emile at rabbitmq.com  Mon Jul  1 13:57:59 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 01 Jul 2013 13:57:59 +0100
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <1372677084982-27713.post@n5.nabble.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
	<1372673816421-27710.post@n5.nabble.com>
	<51D15FA3.9010306@rabbitmq.com>
	<1372677084982-27713.post@n5.nabble.com>
Message-ID: <51D17CD7.7030707@rabbitmq.com>


On 01/07/13 12:11, Haster wrote:

> I need set mandatory flag, publish message and than start any thread what
> will check return method?

If a basic.return is received before tx.commit-ok then the message was
not routed to any queues. If no basic.return was received before
tx.commit-ok then the message was routed to at least one queue.

> (also I don't see any API in rabbitmq-c client).

The framing layer certainly appears to support AMQP_BASIC_RETURN_METHOD.

> Applications MUST NOT rely on the behaviour of transactions that include
> messages published with the mandatory option.

See http://www.rabbitmq.com/semantics.html:
"You will always receive any basic.returns before the tx.commit-ok."




-Emile




From haster2004 at yandex.ru  Mon Jul  1 14:08:19 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 1 Jul 2013 06:08:19 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c amqp_tx_commit leak memory
Message-ID: <1372684099202-27717.post@n5.nabble.com>

Hi there!

I try to use transactions in my producer. And I found that when I send many
messages - my app eat a lot of memory.

If I dismiss transaction feature - memory consumption is normal

Maybe there is memory leak in amqp_tx_commit? Or maybe I have to call some
function to clean something?

my test case is below:
const char * const host = "localhost";
int port = 5672;
const char * const user = "admin";
const char * const pass = "password";
amqp_channel_t channel_exchange = 4;
amqp_channel_t channel_queue = 5;
const char *exchange = "haster_ex";  

void main () {
  amqp_connection_state_t conn = amqp_new_connection();
  if (!conn) { cout << "Connection error\n"; return;
  }

  int sockfd = amqp_open_socket(host, port);  //5672
  if (sockfd < 0) { cout << "Opening socket error\n"; return;  }

  amqp_set_sockfd(conn, sockfd);
  
  amqp_rpc_reply_t reply = amqp_login(conn, "/", 0, 131072, 0,
AMQP_SASL_METHOD_PLAIN, user, pass);
  if (reply.reply_type != AMQP_RESPONSE_NORMAL)
{amqp_destroy_connection(conn); cout << "Login error\n"; return;}

  amqp_channel_open(conn, channel_exchange);
  amqp_rpc_reply_t res = amqp_get_rpc_reply(conn);
  if (res.reply_type != AMQP_RESPONSE_NORMAL) {cout << "Channel open
error\n"; amqp_connection_close(conn, AMQP_REPLY_SUCCESS);
amqp_destroy_connection(conn);return;}


*  amqp_tx_select(conn, channel_exchange);   // If comment this - all is OK*
  res = amqp_get_rpc_reply(conn);
  if (res.reply_type != AMQP_RESPONSE_NORMAL) {cout << "Select error\n";
amqp_connection_close(conn, AMQP_REPLY_SUCCESS);
amqp_destroy_connection(conn);return;}

  amqp_bytes_t message_bytes, routingKey_bytes, exchange_bytes;
  exchange_bytes.bytes = (void*)exchange;
  exchange_bytes.len = strlen(exchange);
  message_bytes.bytes = (void*)"Privrr";
  message_bytes.len = 6;
  routingKey_bytes.bytes = (void*)"key";
  routingKey_bytes.len = 3;
  amqp_basic_properties_t props;
  props._flags |= AMQP_BASIC_DELIVERY_MODE_FLAG;
  props.delivery_mode = 2;
  props._flags = AMQP_BASIC_CONTENT_TYPE_FLAG;
  props.content_type = amqp_cstring_bytes("text/plain");

  amqp_bytes_t expiration;
  expiration.bytes = (void*)"1000";
  expiration.len = 4;
  props.expiration = expiration;
  props._flags |= AMQP_BASIC_EXPIRATION_FLAG;

  while (1) {
    int r = amqp_basic_publish(conn, channel_exchange, exchange_bytes,
routingKey_bytes,  1, 0, &props, message_bytes);

*    amqp_tx_commit(conn, channel_exchange);  // if comment it - all is OK
    amqp_get_rpc_reply(conn);*
    //die_on_amqp_error(amqp_get_rpc_reply(conn), "Commit error");
  }
  char ch;
  cin >> ch;
}





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-amqp-tx-commit-leak-memory-tp27717.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Mon Jul  1 14:20:15 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 1 Jul 2013 06:20:15 -0700 (PDT)
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <51D17CD7.7030707@rabbitmq.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
	<1372673816421-27710.post@n5.nabble.com>
	<51D15FA3.9010306@rabbitmq.com>
	<1372677084982-27713.post@n5.nabble.com>
	<51D17CD7.7030707@rabbitmq.com>
Message-ID: <1372684815890-27718.post@n5.nabble.com>

Emile, thanks a lot for your help.

I understand all your explanations except how can I get basic.return.

As I know in rabbitmq-c there is only one function that can receive
something async from server: amqp_get_rpc_reply. But it use only for methods
that have to have answers. And how can I proceed basic.return, which is
fully async?

In any case after method publish I call amqp_tx_commit ... and after that
amqp_get_rpc_reply for answer from server...

As I understand from your replies if there is no some binding rule
amqp_get_rpc_reply should return to me basic.return? Is it true? 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Publish-to-exchange-that-doesn-t-bind-to-any-queue-in-trunsaction-mode-tp27706p27718.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Mon Jul  1 14:42:46 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 01 Jul 2013 14:42:46 +0100
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <1372684815890-27718.post@n5.nabble.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
	<1372673816421-27710.post@n5.nabble.com>
	<51D15FA3.9010306@rabbitmq.com>
	<1372677084982-27713.post@n5.nabble.com>
	<51D17CD7.7030707@rabbitmq.com>
	<1372684815890-27718.post@n5.nabble.com>
Message-ID: <51D18756.5060406@rabbitmq.com>

On 01/07/13 14:20, Haster wrote:

> I understand all your explanations except how can I get basic.return.

Does this example answer your question?

https://github.com/alanxz/SimpleAmqpClient/blob/master/examples/basic_return_test.cpp





-Emile




From haster2004 at yandex.ru  Mon Jul  1 15:10:19 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 1 Jul 2013 07:10:19 -0700 (PDT)
Subject: [rabbitmq-discuss] Publish to exchange that doesn't bind to any
 queue in trunsaction mode
In-Reply-To: <51D18756.5060406@rabbitmq.com>
References: <1372672333880-27706.post@n5.nabble.com>
	<51D154D8.2090108@rabbitmq.com>
	<1372673816421-27710.post@n5.nabble.com>
	<51D15FA3.9010306@rabbitmq.com>
	<1372677084982-27713.post@n5.nabble.com>
	<51D17CD7.7030707@rabbitmq.com>
	<1372684815890-27718.post@n5.nabble.com>
	<51D18756.5060406@rabbitmq.com>
Message-ID: <1372687819003-27720.post@n5.nabble.com>

All magic is in function GetMethodOnChannel that is called from BasicPublish:

void Channel::BasicPublish(const std::string& exchange_name,
                           const std::string& routing_key,
                           const BasicMessage::ptr_t message,
                           bool mandatory,
                           bool immediate)
{
  m_impl->CheckIsConnected();
  amqp_channel_t channel = m_impl->GetChannel();

  m_impl->CheckForError(amqp_basic_publish(m_impl->m_connection, channel,
                       amqp_cstring_bytes(exchange_name.c_str()),
                       amqp_cstring_bytes(routing_key.c_str()),
                       mandatory,
                       immediate,
                       message->getAmqpProperties(),
                       message->getAmqpBody()));

  // If we've done things correctly we can get one of 4 things back from the
broker
  // - basic.ack - our channel is in confirm mode, messsage was 'dealt with'
by the broker
  // - basic.return then basic.ack - the message wasn't delievered, but was
dealt with
  // - channel.close - probably tried to publish to a non-existant exchange,
in any case error!
  // - connection.clsoe - something really bad happened
  const boost::array<boost::uint32_t, 2> PUBLISH_ACK = { {
AMQP_BASIC_ACK_METHOD, AMQP_BASIC_RETURN_METHOD } };
  amqp_frame_t response;
  m_impl->GetMethodOnChannel(channel, response, PUBLISH_ACK);

  if (AMQP_BASIC_RETURN_METHOD == response.payload.method.id)
  {
    MessageReturnedException message_returned =
     
m_impl->CreateMessageReturnedException(*(reinterpret_cast<amqp_basic_return_t*>(response.payload.method.decoded)),
channel);

    const boost::array<boost::uint32_t, 1> BASIC_ACK = { {
AMQP_BASIC_ACK_METHOD } };
    m_impl->GetMethodOnChannel(channel, response, BASIC_ACK);
    m_impl->ReturnChannel(channel);
    m_impl->MaybeReleaseBuffers();
    throw message_returned;
  }

  m_impl->ReturnChannel(channel);
  m_impl->MaybeReleaseBuffers();
}

I will try to understand, thanks a lot !!!




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Publish-to-exchange-that-doesn-t-bind-to-any-queue-in-trunsaction-mode-tp27706p27720.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From alan.antonuk at gmail.com  Mon Jul  1 16:08:42 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 1 Jul 2013 08:08:42 -0700
Subject: [rabbitmq-discuss] rabbitmq-c amqp_tx_commit leak memory
In-Reply-To: <1372684099202-27717.post@n5.nabble.com>
References: <1372684099202-27717.post@n5.nabble.com>
Message-ID: <CAAt2po+bkU5qVm3s_Fc5cXo9uLmU23VnoGiVFA81HA1jAoF94w@mail.gmail.com>

You need to call amqp_maybe_releae_buffers() after amqp_tx_commit().

The rule of thumb for rabbitmq-c is if the library returns something to
you, you should release it when you're done with it by calling that
function.


On Mon, Jul 1, 2013 at 6:08 AM, Haster <haster2004 at yandex.ru> wrote:

> Hi there!
>
> I try to use transactions in my producer. And I found that when I send many
> messages - my app eat a lot of memory.
>
> If I dismiss transaction feature - memory consumption is normal
>
> Maybe there is memory leak in amqp_tx_commit? Or maybe I have to call some
> function to clean something?
>
> my test case is below:
> const char * const host = "localhost";
> int port = 5672;
> const char * const user = "admin";
> const char * const pass = "password";
> amqp_channel_t channel_exchange = 4;
> amqp_channel_t channel_queue = 5;
> const char *exchange = "haster_ex";
>
> void main () {
>   amqp_connection_state_t conn = amqp_new_connection();
>   if (!conn) { cout << "Connection error\n"; return;
>   }
>
>   int sockfd = amqp_open_socket(host, port);  //5672
>   if (sockfd < 0) { cout << "Opening socket error\n"; return;  }
>
>   amqp_set_sockfd(conn, sockfd);
>
>   amqp_rpc_reply_t reply = amqp_login(conn, "/", 0, 131072, 0,
> AMQP_SASL_METHOD_PLAIN, user, pass);
>   if (reply.reply_type != AMQP_RESPONSE_NORMAL)
> {amqp_destroy_connection(conn); cout << "Login error\n"; return;}
>
>   amqp_channel_open(conn, channel_exchange);
>   amqp_rpc_reply_t res = amqp_get_rpc_reply(conn);
>   if (res.reply_type != AMQP_RESPONSE_NORMAL) {cout << "Channel open
> error\n"; amqp_connection_close(conn, AMQP_REPLY_SUCCESS);
> amqp_destroy_connection(conn);return;}
>
>
> *  amqp_tx_select(conn, channel_exchange);   // If comment this - all is
> OK*
>   res = amqp_get_rpc_reply(conn);
>   if (res.reply_type != AMQP_RESPONSE_NORMAL) {cout << "Select error\n";
> amqp_connection_close(conn, AMQP_REPLY_SUCCESS);
> amqp_destroy_connection(conn);return;}
>
>   amqp_bytes_t message_bytes, routingKey_bytes, exchange_bytes;
>   exchange_bytes.bytes = (void*)exchange;
>   exchange_bytes.len = strlen(exchange);
>   message_bytes.bytes = (void*)"Privrr";
>   message_bytes.len = 6;
>   routingKey_bytes.bytes = (void*)"key";
>   routingKey_bytes.len = 3;
>   amqp_basic_properties_t props;
>   props._flags |= AMQP_BASIC_DELIVERY_MODE_FLAG;
>   props.delivery_mode = 2;
>   props._flags = AMQP_BASIC_CONTENT_TYPE_FLAG;
>   props.content_type = amqp_cstring_bytes("text/plain");
>
>   amqp_bytes_t expiration;
>   expiration.bytes = (void*)"1000";
>   expiration.len = 4;
>   props.expiration = expiration;
>   props._flags |= AMQP_BASIC_EXPIRATION_FLAG;
>
>   while (1) {
>     int r = amqp_basic_publish(conn, channel_exchange, exchange_bytes,
> routingKey_bytes,  1, 0, &props, message_bytes);
>
> *    amqp_tx_commit(conn, channel_exchange);  // if comment it - all is OK
>     amqp_get_rpc_reply(conn);*
>     //die_on_amqp_error(amqp_get_rpc_reply(conn), "Commit error");
>   }
>   char ch;
>   cin >> ch;
> }
>
>
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-amqp-tx-commit-leak-memory-tp27717.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/9155c040/attachment.htm>

From alan.antonuk at gmail.com  Mon Jul  1 19:40:04 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 1 Jul 2013 11:40:04 -0700
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <1372643154087-27699.post@n5.nabble.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
Message-ID: <CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>

Could you describe a bit more about how this server is supposed to work
from a messaging standpoint?

Does it fit with any of these design patterns?
http://www.rabbitmq.com/getstarted.html

-Alan


On Sun, Jun 30, 2013 at 6:45 PM, 3k4b251 <314992959 at qq.com> wrote:

> I  want  to  Write a  online server.  I  need  it  to   server    a  lot
>  of
> consumers.   In my idea, when one consumer  login, I try to request a
> consumer in rabbitmq-server for him.   So   I  can't  make sure  how many
> consumers there  before  I   start  receive  message  sometimes.  I  just
> want  to  declare consumer  after  I  wait  message.
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27699.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/0e73eed4/attachment.htm>

From steve at digitalnothing.com  Mon Jul  1 19:52:22 2013
From: steve at digitalnothing.com (Steve Valaitis)
Date: Mon, 1 Jul 2013 13:52:22 -0500
Subject: [rabbitmq-discuss] LDAP authentication without authorization
In-Reply-To: <51D17810.7020302@rabbitmq.com>
References: <e15c15f4-9a25-4c6f-b8c5-7a612614d6bb@googlegroups.com>
	<51D17810.7020302@rabbitmq.com>
Message-ID: <CALQig897bzVOtOUuQGR9zRQdHXoDZ=9cDS3mbr-q1n8x=yZ=0A@mail.gmail.com>

On Mon, Jul 1, 2013 at 7:37 AM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 27/06/13 16:13, Steve V wrote:
>
>> Is it possible to only do authentication through LDAP, and setup
>> authorization on my own within Rabbit?
>>
>
> Hmm. I don't think so at the moment. That might be quite easy to add
> though - I'll file a bug for this.
>

Where is the official issue tracker(github?)? If I knew Erlang I would
contribute. What kind of timeframe might there be for this feature, and is
there anything I can do to help the process?

Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/a40e70e5/attachment.htm>

From steve at digitalnothing.com  Mon Jul  1 20:26:16 2013
From: steve at digitalnothing.com (Steve Valaitis)
Date: Mon, 1 Jul 2013 14:26:16 -0500
Subject: [rabbitmq-discuss] Write access required to read from queue?
Message-ID: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>

My question is similar to what was being asked in this thread a year
and a half ago:
https://groups.google.com/d/msg/rabbitmq-discuss/K0HNxat1x1k/zT21tfic_gwJ

I want certain users that are authenticated to be able to be able to
create transient queues to read from specific exchanges. What I have
had to do for permissions to get things working is something like the
following:

app_user1 "^amq.gen-.*" "^amq.gen-.*" "^public.*|^amq.gen-.*"

Why do I have to give write permissions to amq.gen? The user isn't
actually writing to the queue, but if I leave write perms empty I get
ACCESS_REFUSED. Is it because of the need to acknowledge? If so,
shouldn't that be automatic with read access?

I'm using the Ruby Bunny client. I have tried specifying `:ack =>
true` and leaving it blank, which I believe should auto-ack, but that
doesn't change anything.

Also, can I prevent durable queues from being created by these users?

Thanks,
Steve

From steve at digitalnothing.com  Mon Jul  1 20:42:41 2013
From: steve at digitalnothing.com (Steve Valaitis)
Date: Mon, 1 Jul 2013 14:42:41 -0500
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
Message-ID: <CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>

On Mon, Jul 1, 2013 at 2:26 PM, Steve Valaitis <steve at digitalnothing.com> wrote:
> My question is similar to what was being asked in this thread a year
> and a half ago:
> https://groups.google.com/d/msg/rabbitmq-discuss/K0HNxat1x1k/zT21tfic_gwJ

Apologies for the wrong link. This is the one I meant to paste:

https://groups.google.com/d/msg/rabbitmq-discuss/tTlPKiNH2uM/UUbyKB4l6jgJ

From jkuch at gopivotal.com  Mon Jul  1 20:56:23 2013
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Mon, 1 Jul 2013 12:56:23 -0700
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
	<CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
Message-ID: <CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>

A nice summary of which things you need which permissions on for which amqp
operations can be found here:

http://www.rabbitmq.com/access-control.html

On Mon, Jul 1, 2013 at 12:42 PM, Steve Valaitis <steve at digitalnothing.com>wrote:

> On Mon, Jul 1, 2013 at 2:26 PM, Steve Valaitis <steve at digitalnothing.com>
> wrote:
> > My question is similar to what was being asked in this thread a year
> > and a half ago:
> >
> https://groups.google.com/d/msg/rabbitmq-discuss/K0HNxat1x1k/zT21tfic_gwJ
>
> Apologies for the wrong link. This is the one I meant to paste:
>
> https://groups.google.com/d/msg/rabbitmq-discuss/tTlPKiNH2uM/UUbyKB4l6jgJ
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/8a38849c/attachment.htm>

From steve at digitalnothing.com  Mon Jul  1 21:21:53 2013
From: steve at digitalnothing.com (Steve Valaitis)
Date: Mon, 1 Jul 2013 15:21:53 -0500
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
	<CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
	<CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>
Message-ID: <CALQig88RG1o0nki8R6iKH2W3MsLizpZEc0sq4WWu0RwOyHLsKg@mail.gmail.com>

On Mon, Jul 1, 2013 at 2:56 PM, Jerry Kuch <jkuch at gopivotal.com> wrote:
> A nice summary of which things you need which permissions on for which amqp
> operations can be found here:
>
> http://www.rabbitmq.com/access-control.html

I had looked at that before, but maybe not put 2 & 2 together. So the
queue.bind command is what's causing the ^amq\.gen-.* write permission
to be required? In my use case I suppose it doesn't matter much since
just generic queues are being created.

What if I had a durable queue that multiple processes were connecting
to. With that scenario wouldn't anyone connecting to that queue also
be able to publish new messages to it?

From michael.s.klishin at gmail.com  Tue Jul  2 02:24:31 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 2 Jul 2013 05:24:31 +0400
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <CALQig88RG1o0nki8R6iKH2W3MsLizpZEc0sq4WWu0RwOyHLsKg@mail.gmail.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
	<CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
	<CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>
	<CALQig88RG1o0nki8R6iKH2W3MsLizpZEc0sq4WWu0RwOyHLsKg@mail.gmail.com>
Message-ID: <CAE3HoVRP9DPFjCCw0NJiKW2+7VmVoLczeFvxr-LPRp_CAFaf2A@mail.gmail.com>

2013/7/2 Steve Valaitis <steve at digitalnothing.com>

> So the
> queue.bind command is what's causing the ^amq\.gen-.* write permission
> to be required?
>

Either queue.bind or queue.declare without passive = true.

With Bunny 0.9, it should be pretty clear what line causes the
authorization exception.


>
> What if I had a durable queue that multiple processes were connecting
> to. With that scenario wouldn't anyone connecting to that queue also
> be able to publish new messages to it?
>

You can have a durable shared queue with multiple consumers.

Here is an example of a read-only consumer connection. Note that in order
to avoid declaring
the queue, you just get a reference to it with :passive => true:

https://github.com/ruby-amqp/bunny/commit/ea05c4eba9a063615e41bd0cb126abbe04ded91f
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/ece12b2b/attachment.htm>

From 314992959 at qq.com  Tue Jul  2 03:38:46 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 1 Jul 2013 19:38:46 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
Message-ID: <1372732726822-27729.post@n5.nabble.com>

for  example.   here  is   a    simple   receive server  code.

//connection
amqp_connection_state_t    conn  =   amqp_new_connection(); 

//socket 
amqp_socket_t *socket  = amqp_tcp_socket_new();

//login
amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest",
"guest")

//open socket
amqp_socket_open(socket, hostname, port)

//set soket for connection
amqp_set_socket(conn, socket);




//after  link  to  rabbitmq server. we  start  to  listen  to the  queue   
consumer_1



//open  one  channel       one question:  why we need channel....  
amqp_channel_open(conn, 1);

//declare queue  "test_1"   .   I   usually try to  declare  queue  before  
declare consumer   to make sure the queue  already  be  there.

amqp_queue_declare(conn,1,amqp_cstring_bytes("consumer_1"),0,0,0,1,amqp_empty_table);

//request  consume
amqp_basic_consume(conn, 1, amqp_cstring_bytes("consumer_1"), 
amqp_cstring_bytes("consumer_1"),  0, 1, 0, amqp_empty_table);

// now  I  will  try  to receive  message 
while(1)
{
amqp_frame_t frame;
amqp_simple_wait_frame(conn,&frame);
.........................
........................
...................
}

//So   when  the  client  send  message  to  the  queue   "consumer_1",  I
will   receive  the message. And if there  is no message,  it will block  at
amqp_simple_wait_frame();  


//but  what  I want to do  in  online server is that   one  consumer 
login,I  create a  queue  "consumer_1"  for him,  and  request queue
listener  by  amqp_basic_consume().  when  the consumer quit, I  want  to  
remove  the listener  by amqp_basic_cancel().    but  I can't  do this  in 
the simple  example.  I  will  block  in  the amqp_simple_wait_frame(). I
could  just  wait  the someone  send  message to queue "consumer_1"So  I try 
to  start    thread  for   message receving.  if  I do  like  this, I share
connection in two  threads.   I feel very confused .........



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27729.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From alan.antonuk at gmail.com  Tue Jul  2 06:40:13 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 1 Jul 2013 22:40:13 -0700
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <1372732726822-27729.post@n5.nabble.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
Message-ID: <CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>

The easiest way to accomplish what you're trying to do is to run each
consumer in its own connection, which is running in its own thread.

So for each consumer you want to start, do the following:
- Create a new thread
- Create a new connection
- Declare your queue
- Start the consumer
- Consume messages

To deal with canceling the consumer I see two ways to go:
- Have the entity that is sending messages to the queue send a "stop
message", so that when you receive that message you know to call
amqp_basic_cancel() before calling amqp_simple_wait_frame() to start
waiting for your next message.
- Enable Consumer Cancellation notifications (
http://www.rabbitmq.com/consumer-cancel.html), then have some other entity
delete the queue that the consumer is attached to. Then in your message
read loop, when you receive a AMQP_BASIC_CANCEL_METHOD you know to stop
reading.


Note that this is likely far from an optimal solution to what your problem
is. I probably can give you a better solution if you can describe to me at
a high-level what message pattern you're trying to implement (again here
are some examples: http://www.rabbitmq.com/getstarted.html). When I say
message pattern I don't mean rabbitmq-c code, I mean a description of how
clients and servers in your environment want to talk to each other.

-Alan


On Mon, Jul 1, 2013 at 7:38 PM, 3k4b251 <314992959 at qq.com> wrote:

> for  example.   here  is   a    simple   receive server  code.
>
> //connection
> amqp_connection_state_t    conn  =   amqp_new_connection();
>
> //socket
> amqp_socket_t *socket  = amqp_tcp_socket_new();
>
> //login
> amqp_login(conn, "/", 0, 131072, 0, AMQP_SASL_METHOD_PLAIN, "guest",
> "guest")
>
> //open socket
> amqp_socket_open(socket, hostname, port)
>
> //set soket for connection
> amqp_set_socket(conn, socket);
>
>
>
>
> //after  link  to  rabbitmq server. we  start  to  listen  to the  queue
> consumer_1
>
>
>
> //open  one  channel       one question:  why we need channel....
> amqp_channel_open(conn, 1);
>
> //declare queue  "test_1"   .   I   usually try to  declare  queue  before
> declare consumer   to make sure the queue  already  be  there.
>
>
> amqp_queue_declare(conn,1,amqp_cstring_bytes("consumer_1"),0,0,0,1,amqp_empty_table);
>
> //request  consume
> amqp_basic_consume(conn, 1, amqp_cstring_bytes("consumer_1"),
> amqp_cstring_bytes("consumer_1"),  0, 1, 0, amqp_empty_table);
>
> // now  I  will  try  to receive  message
> while(1)
> {
> amqp_frame_t frame;
> amqp_simple_wait_frame(conn,&frame);
> .........................
> ........................
> ...................
> }
>
> //So   when  the  client  send  message  to  the  queue   "consumer_1",  I
> will   receive  the message. And if there  is no message,  it will block
>  at
> amqp_simple_wait_frame();
>
>
> //but  what  I want to do  in  online server is that   one  consumer
> login,I  create a  queue  "consumer_1"  for him,  and  request queue
> listener  by  amqp_basic_consume().  when  the consumer quit, I  want  to
> remove  the listener  by amqp_basic_cancel().    but  I can't  do this  in
> the simple  example.  I  will  block  in  the amqp_simple_wait_frame(). I
> could  just  wait  the someone  send  message to queue "consumer_1"So  I
> try
> to  start    thread  for   message receving.  if  I do  like  this, I share
> connection in two  threads.   I feel very confused .........
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27729.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/5fea5f6d/attachment.htm>

From matthias at rabbitmq.com  Tue Jul  2 06:44:06 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 02 Jul 2013 06:44:06 +0100
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <CAE3HoVRP9DPFjCCw0NJiKW2+7VmVoLczeFvxr-LPRp_CAFaf2A@mail.gmail.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
	<CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
	<CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>
	<CALQig88RG1o0nki8R6iKH2W3MsLizpZEc0sq4WWu0RwOyHLsKg@mail.gmail.com>
	<CAE3HoVRP9DPFjCCw0NJiKW2+7VmVoLczeFvxr-LPRp_CAFaf2A@mail.gmail.com>
Message-ID: <51D268A6.70703@rabbitmq.com>

On 02/07/13 02:24, Michael Klishin wrote:
> 2013/7/2 Steve Valaitis <steve at digitalnothing.com
> <mailto:steve at digitalnothing.com>>
>
>     So the
>     queue.bind command is what's causing the ^amq\.gen-.* write permission
>     to be required?
>
> Either queue.bind or queue.declare without passive = true.

Actually, queue.declare requires 'configure' permissions, not 'write'. 
As per http://www.rabbitmq.com/access-control.html

>     What if I had a durable queue that multiple processes were connecting
>     to. With that scenario wouldn't anyone connecting to that queue also
>     be able to publish new messages to it?
>
> You can have a durable shared queue with multiple consumers.

re the 2nd question... clients publish to exchanges, not queues. And, as 
per the above docs, for that they need 'write' permissions on the exchanges.


Matthias.

From haster2004 at yandex.ru  Tue Jul  2 06:45:48 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 1 Jul 2013 22:45:48 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c amqp_tx_commit leak memory
In-Reply-To: <CAAt2po+bkU5qVm3s_Fc5cXo9uLmU23VnoGiVFA81HA1jAoF94w@mail.gmail.com>
References: <1372684099202-27717.post@n5.nabble.com>
	<CAAt2po+bkU5qVm3s_Fc5cXo9uLmU23VnoGiVFA81HA1jAoF94w@mail.gmail.com>
Message-ID: <1372743948249-27732.post@n5.nabble.com>

Alan, thanks for reply



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-amqp-tx-commit-leak-memory-tp27717p27732.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From atul.dambalkar at gmail.com  Tue Jul  2 07:48:07 2013
From: atul.dambalkar at gmail.com (Atul Dambalkar)
Date: Mon, 1 Jul 2013 23:48:07 -0700 (PDT)
Subject: [rabbitmq-discuss] Is there any performance penalty for using vhost?
Message-ID: <8ab493c6-8dce-4dc9-94ed-b6331b07deb7@googlegroups.com>

Hi,

I am exploring RabbitMQ and I would like to use "vhost" to provide some 
data isolation in a multi-tenant kind of scenario. I would like to know if 
there any limitations in using vhosts such as number of vhosts allowed 
and/or any performance penalty since each vhost will have it's own 
exchanges, bindings and queues.

Also could there be any run-time configuration issues surrounding vhost 
creation along with security credentials?

Thanks so much.

-Atul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130701/2fd3ea65/attachment.htm>

From emile at rabbitmq.com  Tue Jul  2 09:51:29 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 02 Jul 2013 09:51:29 +0100
Subject: [rabbitmq-discuss] Is there any performance penalty for using
 vhost?
In-Reply-To: <8ab493c6-8dce-4dc9-94ed-b6331b07deb7@googlegroups.com>
References: <8ab493c6-8dce-4dc9-94ed-b6331b07deb7@googlegroups.com>
Message-ID: <51D29491.9050109@rabbitmq.com>


Hi,

On 02/07/13 07:48, Atul Dambalkar wrote:

> I would like to know if there any limitations in using vhosts such as
> number of vhosts allowed and/or any performance penalty since each
> vhost will have it's own exchanges, bindings and queues.


No there should be no performance difference if you defined the same
number of resources across multiple vhosts vs. one vhost. There is no
set limit to the number of vhosts that can be created.


> Also could there be any run-time configuration issues surrounding vhost
> creation along with security credentials?


Vhosts and user accounts can be created at run-time just like queues and
exchanges (except that vhosts and accounts can't be created using AMQP
methods). It is not clear what kind of issues you have in mind - one
potential issue with credentials is that removing an account doesn't
automatically close active connections opened by that account.




-Emile






From vashi.priyanki at gmail.com  Tue Jul  2 11:42:37 2013
From: vashi.priyanki at gmail.com (Priyanki Vashi)
Date: Tue, 2 Jul 2013 03:42:37 -0700 (PDT)
Subject: [rabbitmq-discuss] Question about erlang cookie
Message-ID: <dac2a7db-a6bf-4bca-bd97-fd733a2afed9@googlegroups.com>

Hi there ,

I had a question about erlang cookie, which gets generated when we start 
rabbitmq server. The situation is as follows.

1) Even if I did not created any user named 'rabbitmq', there are files, 
which are owned by this user. Does the installation or startup of 
rabbitmq-server does this ? Also is it OK to use root user to do server 
administration operation or will it be considered not so good practice ? 

2) I use root user to start and stop rabbitmq server and when I start the 
server, I see that a file .erlang.cookie gets generated in root home dir. 
That is correct as per my understanding but I also see that there is 
another file with the same .erlang.cookie gets generated in 
/var/lib/rabbitmq

3) Also these two erlang cookies are different from each other. Why there 
are two erlang cookie files gets generated ? What is the importance ?
My theoretical understanding is there should be only one erlang cookie 
should get generated and that one should be in home dir of user, which 
starts the rabbitmq-server.
Is this correct understanding or ? 

4) Also do I need to configure different values of epmd ports when I want 
to run cluster with two physical nodes or it's OK to keep it as default ? 
    I thought NO need to change but then since I am running into these 
problems thought of asking. 


I would like to understand this bcoz, I tried to setup a cluster on two 
different physical machines and as per the guidelines gives in 'rabbitmq in 
action', before joining nodes running on different physical machines in the 
cluster, the erlang cookie should be sync meaning that both the nodes 
should have same erlang cookie so I tried to copy cookie from first node to 
second and tried to restart second node but then I had problems with 
restarting the node or even stopping the node and I get error. I also 
checked the latest log file and it says 
"=ERROR REPORT==== 2-Jul-2013::19:48:28 ===
** Connection attempt from disallowed node rabbitmqctl40424 at nazgul **" , 
which I believe is due to the fact that erlang cookie, which it had 
originally when I started the node has changed now and hence it does not 
allow me to stop the node. Is my understanding correct here or ?

Error mesaage while stopping or restarting the node after copying erlang 
cookie from first node to second one.
Error: unable to connect to node rabbit_2 at nazgul: nodedown

DIAGNOSTICS
===========

nodes in question: [rabbit_2 at nazgul]

hosts, their running nodes and ports:
- nazgul: [{rabbit_2,58454},{rabbit,38771},{rabbitmqctl40424,60952}]

current node details:
- node name: rabbitmqctl40424 at nazgul
- home dir: /var/lib/rabbitmq
- cookie hash: ad/NgkXjjR95x3cMejxwqg==


Thank you in advance and please guide me so that I understand what had gone 
wrong here.

Best Regards,
Priyanki.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/9626d1ff/attachment.htm>

From mklishin at gopivotal.com  Tue Jul  2 14:19:39 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 2 Jul 2013 17:19:39 +0400
Subject: [rabbitmq-discuss] Question about erlang cookie
In-Reply-To: <dac2a7db-a6bf-4bca-bd97-fd733a2afed9@googlegroups.com>
References: <dac2a7db-a6bf-4bca-bd97-fd733a2afed9@googlegroups.com>
Message-ID: <B65778FD-7E21-4B38-BE5C-5E9951C0E0DB@gopivotal.com>

Priyanki Vashi:

> 1) Even if I did not created any user named 'rabbitmq', there are files, which are owned by this user. Does the installation or startup of rabbitmq-server does this ? Also is it OK to use root user to do server administration operation or will it be considered not so good practice ? 
> 
> 2) I use root user to start and stop rabbitmq server and when I start the server, I see that a file .erlang.cookie gets generated in root home dir. That is correct as per my understanding but I also see that there is another file with the same .erlang.cookie gets generated in /var/lib/rabbitmq

I'd not run RabbitMQ (or any other service that does not need port numbers < 1024) as root.

Erlang runtime looks for the cookie at ~/.erlang.cookie by default.

> 
> 3) Also these two erlang cookies are different from each other. Why there are two erlang cookie files gets generated ? What is the importance ?
> My theoretical understanding is there should be only one erlang cookie should get generated and that one should be in home dir of user, which starts the rabbitmq-server.
> Is this correct understanding or ?

Erlang cookies are a (basic) access control mechanism. They are supposed to be unique
in general (but the same across all cluster nodes). Anybody who knows your Erlang
cookie can connect to your cluster (given firewall rules let them) and do Bad Things.

> 4) Also do I need to configure different values of epmd ports when I want to run cluster with two physical nodes or it's OK to keep it as default ? 
>     I thought NO need to change but then since I am running into these problems thought of asking.

If epmds run on separate hosts, they can use the same port number. If all cluster nodes
are on the same machine, a single instance of epmd should be sufficient.

--
MK


From bison_art at o2.pl  Tue Jul  2 14:36:24 2013
From: bison_art at o2.pl (rabbit15)
Date: Tue, 2 Jul 2013 06:36:24 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
Message-ID: <1372772184481-27737.post@n5.nabble.com>

Hi I have question about buffering messages in RabbitMQ server. When my
producer try to send more messages than consumer could read than messages
should be queued. I suppose that all messages that producer want to send to
messages broker would be on the queues, but after some time there is flow
control fired and my producer couldn't send as much messages as I want to.
How could I turn off that feature?

I desribe my workaround for that:
I wrote special module to queue messages. I see that if RabbitMQ doesn't
have messages on its queues it works fast. So if my producer would want to
send more messages than consumer can read, than my module store them in its
memory and publish the messages to message broker  when consumer's queue is
empty.

In normal situation it should look like this 

 Producer -> RabbitMQ  -> Consumer

but in that scenario producer's sending is slowed down by the RabbitMQ flow
control,

My scenario is 
  Producer -> RabbitMQ -> Buffer Module -> RabbitMQ -> Consumer

because RabbitMQ message broker is as I see only to route the messages not
to store them.

I changed also watermark to 100 and disk_free_limit is set to 0.

Best Regards,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From davitb at energizeglobal.com  Tue Jul  2 14:39:08 2013
From: davitb at energizeglobal.com (Davit Baghdagyulyan)
Date: Tue, 2 Jul 2013 17:39:08 +0400
Subject: [rabbitmq-discuss] IOS Library
In-Reply-To: <255DF26D-9DFB-4DD7-AA63-023BEFACC2B2@energizeglobal.com>
References: <255DF26D-9DFB-4DD7-AA63-023BEFACC2B2@energizeglobal.com>
Message-ID: <904C23FE-C4D4-4D44-A051-9A158C038493@energizeglobal.com>



> 
> HI !
> 
> I  want ask about RabbitMQ Library for IOS.
> Is there any library for IOS client?
> 
> Thanks!
> 
> Davit
> 
> 
> 


From emile at rabbitmq.com  Tue Jul  2 15:00:19 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 02 Jul 2013 15:00:19 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1372772184481-27737.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
Message-ID: <51D2DCF3.7030205@rabbitmq.com>


Hi,

On 02/07/13 14:36, rabbit15 wrote:
> but after some time there is flow control fired and my producer
> couldn't send as much messages as I want to. How could I turn off
> that feature?

One of the reasons to use a message broker is to mediate between
publishers and consumers that work at different rates. If you set the
maximum length of the queue to a small number then messages will be
dropped instead of queued when consumers are too slow. Only consider
this option if you can afford to lose messages.

http://www.rabbitmq.com/maxlength.html

> Producer -> RabbitMQ -> Buffer Module -> RabbitMQ -> Consumer
> 
> because RabbitMQ message broker is as I see only to route the messages not
> to store them.

It shouldn't be necessary to introduce another buffer, because that is
what queues do. If you need more buffering then perhaps your broker
needs more memory or faster disks.

> I changed also watermark to 100 and disk_free_limit is set to 0.

These settings make it more likely for the broker to crash by running
out of memory or disk space.




-Emile





From alexis at rabbitmq.com  Tue Jul  2 15:49:54 2013
From: alexis at rabbitmq.com (Alexis Richardson)
Date: Tue, 2 Jul 2013 15:49:54 +0100
Subject: [rabbitmq-discuss] IOS Library
In-Reply-To: <904C23FE-C4D4-4D44-A051-9A158C038493@energizeglobal.com>
References: <255DF26D-9DFB-4DD7-AA63-023BEFACC2B2@energizeglobal.com>
	<904C23FE-C4D4-4D44-A051-9A158C038493@energizeglobal.com>
Message-ID: <CACOPnvcYHgLtK72ajXn6xpBrfesJ1COUiiJhpOys9qCeAP3TXg@mail.gmail.com>

Davit

Some people have ported clients to iOS.  I recommend a google search
to get more info!

alexis


On Tue, Jul 2, 2013 at 2:39 PM, Davit Baghdagyulyan
<davitb at energizeglobal.com> wrote:
>
>
>>
>> HI !
>>
>> I  want ask about RabbitMQ Library for IOS.
>> Is there any library for IOS client?
>>
>> Thanks!
>>
>> Davit
>>
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From davitb at energizeglobal.com  Tue Jul  2 16:01:42 2013
From: davitb at energizeglobal.com (Davit Baghdagyulyan)
Date: Tue, 2 Jul 2013 19:01:42 +0400
Subject: [rabbitmq-discuss] IOS Library
In-Reply-To: <CACOPnvcYHgLtK72ajXn6xpBrfesJ1COUiiJhpOys9qCeAP3TXg@mail.gmail.com>
References: <255DF26D-9DFB-4DD7-AA63-023BEFACC2B2@energizeglobal.com>
	<904C23FE-C4D4-4D44-A051-9A158C038493@energizeglobal.com>
	<CACOPnvcYHgLtK72ajXn6xpBrfesJ1COUiiJhpOys9qCeAP3TXg@mail.gmail.com>
Message-ID: <D8E47426-24FB-4505-BD9E-10A93DC2783A@energizeglobal.com>

Thanks Alexis.

I am asking for official library from RabbitMQ.

Davit

From videlalvaro at gmail.com  Tue Jul  2 16:06:14 2013
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Tue, 2 Jul 2013 17:06:14 +0200
Subject: [rabbitmq-discuss] IOS Library
In-Reply-To: <D8E47426-24FB-4505-BD9E-10A93DC2783A@energizeglobal.com>
References: <255DF26D-9DFB-4DD7-AA63-023BEFACC2B2@energizeglobal.com>
	<904C23FE-C4D4-4D44-A051-9A158C038493@energizeglobal.com>
	<CACOPnvcYHgLtK72ajXn6xpBrfesJ1COUiiJhpOys9qCeAP3TXg@mail.gmail.com>
	<D8E47426-24FB-4505-BD9E-10A93DC2783A@energizeglobal.com>
Message-ID: <CAMcAHLXs7CYhhPwn1DvdUtEfA1cYA=Jtp0+89d3J1m0n0XuaPQ@mail.gmail.com>

There is no official library from RabbitMQ for iOS.

RabbitMQ also supports the MQTT protocol which is the same used by the
Facebook iOS chat: http://www.rabbitmq.com/blog/2012/09/12/mqtt-adapter/

Perhaps you could access RabbitMQ from MQTT?
https://github.com/m2mIO/mqttIO-objC

Regards,

Alvaro




On Tue, Jul 2, 2013 at 5:01 PM, Davit Baghdagyulyan <
davitb at energizeglobal.com> wrote:

> Thanks Alexis.
>
> I am asking for official library from RabbitMQ.
>
> Davit
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/1bd2741f/attachment.htm>

From steve at digitalnothing.com  Tue Jul  2 16:13:09 2013
From: steve at digitalnothing.com (Steve Valaitis)
Date: Tue, 2 Jul 2013 10:13:09 -0500
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <51D268A6.70703@rabbitmq.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
	<CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
	<CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>
	<CALQig88RG1o0nki8R6iKH2W3MsLizpZEc0sq4WWu0RwOyHLsKg@mail.gmail.com>
	<CAE3HoVRP9DPFjCCw0NJiKW2+7VmVoLczeFvxr-LPRp_CAFaf2A@mail.gmail.com>
	<51D268A6.70703@rabbitmq.com>
Message-ID: <CALQig8-xQf2cb_QkGFHZOa0AMfSBEZSsdgpkCOnQn-3ZZ2zN1w@mail.gmail.com>

On Tue, Jul 2, 2013 at 12:44 AM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
>
> re the 2nd question... clients publish to exchanges, not queues. And, as per
> the above docs, for that they need 'write' permissions on the exchanges.

So in my original scenario since I'm only granting write permissions
to ^amq\.gen-.* I don't need to be concerned about any message
insertion because amq.gen- is for queue names.

What about stopping them from creating durable queues? If I can't stop
them creating durable queues is the only solution to periodically
sweep the queues list and delete any durable inactive amq.gen-*
queues?

From steve at digitalnothing.com  Tue Jul  2 16:20:00 2013
From: steve at digitalnothing.com (Steve Valaitis)
Date: Tue, 2 Jul 2013 10:20:00 -0500
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <CAE3HoVRP9DPFjCCw0NJiKW2+7VmVoLczeFvxr-LPRp_CAFaf2A@mail.gmail.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
	<CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
	<CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>
	<CALQig88RG1o0nki8R6iKH2W3MsLizpZEc0sq4WWu0RwOyHLsKg@mail.gmail.com>
	<CAE3HoVRP9DPFjCCw0NJiKW2+7VmVoLczeFvxr-LPRp_CAFaf2A@mail.gmail.com>
Message-ID: <CALQig8_zKVjfTqCTpwH62PJCgwvX9Gt=Wd9=-NXueS3TMo-TfA@mail.gmail.com>

On Mon, Jul 1, 2013 at 8:24 PM, Michael Klishin
<michael.s.klishin at gmail.com> wrote:
>
> You can have a durable shared queue with multiple consumers.
>
> Here is an example of a read-only consumer connection. Note that in order to
> avoid declaring
> the queue, you just get a reference to it with :passive => true:
>
> https://github.com/ruby-amqp/bunny/commit/ea05c4eba9a063615e41bd0cb126abbe04ded91f

Thanks Michael. I can see from the spec how it would work now. I
wasn't aware of passive, I saw it on the Bunny info site, but it's
only mentioned in relation to querying the number of messages and
consumers.

From michael.s.klishin at gmail.com  Tue Jul  2 16:23:11 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 2 Jul 2013 19:23:11 +0400
Subject: [rabbitmq-discuss] Write access required to read from queue?
In-Reply-To: <CALQig8-xQf2cb_QkGFHZOa0AMfSBEZSsdgpkCOnQn-3ZZ2zN1w@mail.gmail.com>
References: <CALQig8_d617mL70wPBYZaGva2AYS11CTTYAFUTqD1ueJbDpO6Q@mail.gmail.com>
	<CALQig89aUYPrD3nDEeAs+CDHx1-GhvA7aPrxBHZT3j8bGmj+Rg@mail.gmail.com>
	<CANOx8Nk0qWyLszpuLt1WMiLScwAeWc9TcFrKHpGdJrxPTEfbhA@mail.gmail.com>
	<CALQig88RG1o0nki8R6iKH2W3MsLizpZEc0sq4WWu0RwOyHLsKg@mail.gmail.com>
	<CAE3HoVRP9DPFjCCw0NJiKW2+7VmVoLczeFvxr-LPRp_CAFaf2A@mail.gmail.com>
	<51D268A6.70703@rabbitmq.com>
	<CALQig8-xQf2cb_QkGFHZOa0AMfSBEZSsdgpkCOnQn-3ZZ2zN1w@mail.gmail.com>
Message-ID: <CAE3HoVQhuniJ1AqcemSSMkFxr-AaRpcUeR3uOLwGUCvO+J4sUQ@mail.gmail.com>

2013/7/2 Steve Valaitis <steve at digitalnothing.com>

> What about stopping them from creating durable queues? If I can't stop
> them creating durable queues is the only solution to periodically
> sweep the queues list and delete any durable inactive amq.gen-*
> queues?
>

Make them create exclusive queues (a reasonable thing to do for
server-named queues).
They are deleted when the connection that created them closes. There is no
way to restrict
creation of queues to a particular combination of properties.

You can also use queue TTL, although care needs to be taken when picking
the value:
https://www.rabbitmq.com/ttl.html#queue-ttl
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/02a3e820/attachment.htm>

From David.Pravec at nethost.cz  Tue Jul  2 16:52:11 2013
From: David.Pravec at nethost.cz (David Pravec)
Date: Tue, 02 Jul 2013 17:52:11 +0200
Subject: [rabbitmq-discuss] sorting of list of queues for web management
	plugin
Message-ID: <51D2F72B.4080003@nethost.cz>

hello,

i am happy user of rabbitmq for more than year, now using rabbitmq-3.0.3
on debian with web management plugin.

When using API, i can ask for list of queues
sorted by total number of messages, by using url
   ${rabbit}:${port}/queues?sort=messages&sort_reverse=true

How can i get web link doing the same thing for web ui???

Every time i want to see overview of my almost thousand queues
sorted by total number of messages, i need to
click 2 times on a 'Total' column name.

It would be nice to be able to configure default sort column somewhere,
and it would be really nice if i could choose the sorting preference
by adding something in the url in my bookmark - or is that even possible 
now and i missed it?


David Pravec

From bison_art at o2.pl  Tue Jul  2 17:17:35 2013
From: bison_art at o2.pl (rabbit15)
Date: Tue, 2 Jul 2013 09:17:35 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51D2DCF3.7030205@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
Message-ID: <1372781855362-27747.post@n5.nabble.com>

Hi thanks for the answer, but it is not what I'm looking for.
I don't want to drop any messages, because my producer is faster than
consumer, but not all the time and all the data is necessary.There is time
when it doesn't produce any messages. I don't want to have any other buffer
of course, but RabbitMQ doesn't let my producer to sending messages even if
there is a lot of free memory. I'm asking how can I setup RabbitMQ to remove
that buffer. My server hardware is 32 CPUs and 64 GB RAM, I don't think I
need better hardware, because even if I store about 8 millions messages
which takes about 600 bytes (everyone) than it turn on horrible flow control
which prevents sending as fast as I need. Please tell me how can I turn off
flow control. My application wants to queued messages on RabbitMQ server in
its memory not disk and I don't want to be prevented by RabbitMQ sending by
producer or consuming messages by the consumer.
Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p27747.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From ceri at lshift.net  Tue Jul  2 17:32:28 2013
From: ceri at lshift.net (Ceri Storey)
Date: Tue, 02 Jul 2013 17:32:28 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1372781855362-27747.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
Message-ID: <51D3009C.5030406@lshift.net>

(02/07/13 17:17), rabbit15 wrote:
> Hi thanks for the answer, but it is not what I'm looking for.
> I don't want to drop any messages, because my producer is faster than
> consumer, but not all the time and all the data is necessary.There is time
> when it doesn't produce any messages. I don't want to have any other buffer
> of course, but RabbitMQ doesn't let my producer to sending messages even if
> there is a lot of free memory. I'm asking how can I setup RabbitMQ to remove
> that buffer. My server hardware is 32 CPUs and 64 GB RAM, I don't think I
> need better hardware, because even if I store about 8 millions messages
> which takes about 600 bytes (everyone) than it turn on horrible flow control
> which prevents sending as fast as I need. Please tell me how can I turn off
> flow control. My application wants to queued messages on RabbitMQ server in
> its memory not disk and I don't want to be prevented by RabbitMQ sending by
> producer or consuming messages by the consumer.
If you need to store an unbounded number of messages in the queue, then
as i see it, you've got two options:

 1. Use the rabbitmq-toke plugin, which allows messages to be stored in
    tokyo cabinet. That said, I don't know how well supported and/or
    documented that is.
 2. Use another queue server, such as bitly's nsq, beanstalkd, or even
    Kafka.

Assuming that you've got very basic requirements in terms of your
messaging protocols (ie: one message to one consumer), then option 2)
might well work out better for you, to be honest. Rabbit makes a lot of
trade-offs that focus on flexible messaging topologies and reliable
delivery, all of which can work against raw throughput, and especially
the ability to act as an infinite buffer.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/b693ec67/attachment.htm>

From bison_art at o2.pl  Tue Jul  2 17:39:48 2013
From: bison_art at o2.pl (rabbit15)
Date: Tue, 2 Jul 2013 09:39:48 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51D3009C.5030406@lshift.net>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D3009C.5030406@lshift.net>
Message-ID: <1372783188354-27749.post@n5.nabble.com>

Hi, thanks for very fast reply!
I will try what you have written.

Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p27749.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Tue Jul  2 17:43:16 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 02 Jul 2013 17:43:16 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1372781855362-27747.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
Message-ID: <51D30324.6020102@rabbitmq.com>


Hi,

On 02/07/13 17:17, rabbit15 wrote:
> My server hardware is 32 CPUs and 64 GB RAM, I don't think I
> need better hardware, 

I agree.

> it turn on horrible flow control which prevents sending as fast as I
> need. Please tell me how can I turn off flow control.

Your publishers probably require more bandwidth than your disk / IO
subsystem provides. As soon as messages start paging to disk the overall
queue throughput drops to below the level that publishers can tolerate.

The broker pre-emptively starts paging messages before all RAM is
occupied to prevent a dramatic performance drop when memory does run
out. You can delay the onset of paging by increasing the
vm_memory_high_watermark setting. You mentioned previously that you set
this to 100% (1.0), but you can set it beyond 100% to utilise even more
RAM before paging starts. The risk with this approach is that the server
could crash by running out of RAM.


-Emile










From emile at rabbitmq.com  Tue Jul  2 18:03:06 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 02 Jul 2013 18:03:06 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51D3009C.5030406@lshift.net>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D3009C.5030406@lshift.net>
Message-ID: <51D307CA.4020009@rabbitmq.com>


On 02/07/13 17:32, Ceri Storey wrote:
> If you need to store an unbounded number of messages in the queue

I'm guessing the issue is the per-connection flow control that prevents
messages being published faster than they can be routed to queues,
rather than the global mechanism that protects the broker when it runs
low on memory or disk space.

The space required to store 8 million messages of 600 bytes is close to
usage ratio where paging starts, rather than the ratio where global
memory-based flow control engages.

>  1. Use the rabbitmq-toke plugin, which allows messages to be stored in
>     tokyo cabinet. That said, I don't know how well supported and/or
>     documented that is.

It is unlikely that this will help if my previous guess was correct,
because the rabbitmq-toke plugin will be a further burden on the disk.



-Emile





From t.otoda.freemail at gmail.com  Tue Jul  2 19:32:38 2013
From: t.otoda.freemail at gmail.com (t.otoda)
Date: Wed, 3 Jul 2013 03:32:38 +0900
Subject: [rabbitmq-discuss] What is occuered when the master node output
 warning log of msg_store_persistent ?
Message-ID: <CACi3n5KbKZVXToAOE_wmcQYF5dtEmLnUPNTqFs4F_g8oHBum_g@mail.gmail.com>

I use RabbitMQ 3.0.1 and have a cluster with 2 disk nodes.

When I stoped and restarted both, the master node output log below.

 =WARNING REPORT==== 19-Jun-2013::23:56:59 ===
msg_store_persistent: recovery terms differ from present
rebuilding indices from scratch

Please tell me why this log is output
and what is occuered within RabbitMQ nodes.

I expect that
when a slave disk node is started,
the master node compares the indices it owns and the indices started slave
owns.
And then,
since the slave node was stopped by the abnormal way(?),
the indices differed from the other, and the master node output log.

Is this correct?

 (?)For example, I stoped the node
       beore it becomes the new master node instead of the stopped master
node.

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/39e3e99c/attachment.htm>

From not.drew.stevens at gmail.com  Tue Jul  2 23:02:44 2013
From: not.drew.stevens at gmail.com (Not Drew Stevens)
Date: Tue, 02 Jul 2013 15:02:44 -0700
Subject: [rabbitmq-discuss] Change x-max-length in an existing queue
Message-ID: <51D34E04.3030709@gmail.com>

Is it possible to change the x-max-length policy on an existing queue? 
If so, is there a rabbitmqctl command to adjust the policy?

...or must the queue be deleted and recreated for a new limit policy to
be applied?

Thanks,
Drew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/ff7e09e7/attachment.htm>

From michael.s.klishin at gmail.com  Tue Jul  2 23:09:12 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 3 Jul 2013 02:09:12 +0400
Subject: [rabbitmq-discuss] ANN What Ruby 1.8.7 end of life means for Ruby
	RabbitMQ clients
Message-ID: <CAE3HoVSTB=GivzCBRec4jvK45TeU0D2YEmDnWnTA8xSh8dUoEA@mail.gmail.com>

Ruby 1.8.7 reached EOL on July 1st, 2013 [1].
It will no longer receive any kind of updates, including security patches.

However, there are no plans to drop 1.8.7 support from any of the Ruby
clients.
Bunny 0.9, amqp gem 1.1
and Hot Bunnies 2.0 will all support this Ruby version like their
pre-release
versions do today.

Note that 1.8.7 will be supported to the best of my abilities. At some point
libraries such as EventMachine or RSpec may stop compiling against/running
on
1.8.7. Up until then, there are no plans to break 1.8 compatibility.

That said, I encourage users of these libraries to upgrade to at least
1.9.3.

1. http://www.ruby-lang.org/en/news/2013/06/30/we-retire-1-8-7/
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/7fe7b967/attachment.htm>

From michael.s.klishin at gmail.com  Tue Jul  2 23:10:25 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 3 Jul 2013 02:10:25 +0400
Subject: [rabbitmq-discuss] Change x-max-length in an existing queue
In-Reply-To: <51D34E04.3030709@gmail.com>
References: <51D34E04.3030709@gmail.com>
Message-ID: <CAE3HoVQXWQ06X-eKqZ5bPt1MUusumOdF2gHW8gx1q8PpitcQ9g@mail.gmail.com>

2013/7/3 Not Drew Stevens <not.drew.stevens at gmail.com>

> Is it possible to change the x-max-length policy on an existing queue?
>

No.


>
> ...or must the queue be deleted and recreated for a new limit policy to be
> applied?
>

Correct.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/4d38a248/attachment.htm>

From 314992959 at qq.com  Wed Jul  3 03:00:14 2013
From: 314992959 at qq.com (3k4b251)
Date: Tue, 2 Jul 2013 19:00:14 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
	<CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
Message-ID: <1372816814705-27756.post@n5.nabble.com>

I  want  to   server   more the    One hundred thousand    consumer.....
should  I  create so  much   conn and  channel ?     I  think   the  online  
server   which  I  want  to  accomplish  is    seem  like  a  simple  MSN.   
there  may  be    more  than  thousand   consumer   login  and quit  in  one
seconds.  So  I  am  not sure  how many consumers  there  before   I  start 
receive  message in one conn.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27756.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From carl.hoerberg at gmail.com  Wed Jul  3 03:37:03 2013
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Tue, 2 Jul 2013 19:37:03 -0700 (PDT)
Subject: [rabbitmq-discuss] Message index memory usage
Message-ID: <1372819023584-27757.post@n5.nabble.com>

How can I analyze what's causing the Message store index to grow to very
large proportions? 

https://www.dropbox.com/s/1pnavh0fdvhq933/Screen%20Shot%202013-07-03%20at%2004.33.39.png



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Message-index-memory-usage-tp27757.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From alan.antonuk at gmail.com  Wed Jul  3 03:37:58 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 2 Jul 2013 19:37:58 -0700
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <1372816814705-27756.post@n5.nabble.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
	<CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
	<1372816814705-27756.post@n5.nabble.com>
Message-ID: <CAAt2po+iTh+w40j6Ko-ERF6nrYJgsnw5Cc_mDknujyuVwfnt9w@mail.gmail.com>

I still need you to describe the messaging architecture you're going to use
on the broker to solve your problem.

For example when a new person signs on to this chat, what happens on the
broker? Do new queues get created? Do you start some consumer?

When a person sends a message to another person over this chat what queues
does it get routed to? How does the message get back to the application the
user is using.

The more complete a description of your messaging architecture you can give
me, the better my suggestion will be.


On Tue, Jul 2, 2013 at 7:00 PM, 3k4b251 <314992959 at qq.com> wrote:

> I  want  to   server   more the    One hundred thousand    consumer.....
> should  I  create so  much   conn and  channel ?     I  think   the  online
> server   which  I  want  to  accomplish  is    seem  like  a  simple  MSN.
> there  may  be    more  than  thousand   consumer   login  and quit  in
>  one
> seconds.  So  I  am  not sure  how many consumers  there  before   I  start
> receive  message in one conn.
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27756.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/0adb8226/attachment.htm>

From carl.hoerberg at gmail.com  Wed Jul  3 03:41:43 2013
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Tue, 2 Jul 2013 19:41:43 -0700 (PDT)
Subject: [rabbitmq-discuss] Message index memory usage
In-Reply-To: <1372819023584-27757.post@n5.nabble.com>
References: <1372819023584-27757.post@n5.nabble.com>
Message-ID: <1372819303758-27759.post@n5.nabble.com>

about 33 million messages are queued, is that why? in that case, how do i
find the queue which has the most messages queued on a abritary list of
vhosts? rabbitmqctl list_queues requires a vhost name, and the http api
requires you to have ACL access to all vhosts. 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Message-index-memory-usage-tp27757p27759.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From 314992959 at qq.com  Wed Jul  3 04:51:58 2013
From: 314992959 at qq.com (3k4b251)
Date: Tue, 2 Jul 2013 20:51:58 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <CAAt2po+iTh+w40j6Ko-ERF6nrYJgsnw5Cc_mDknujyuVwfnt9w@mail.gmail.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
	<CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
	<1372816814705-27756.post@n5.nabble.com>
	<CAAt2po+iTh+w40j6Ko-ERF6nrYJgsnw5Cc_mDknujyuVwfnt9w@mail.gmail.com>
Message-ID: <1372823518409-27760.post@n5.nabble.com>


1.  ? For example when a new person signs on to this chat, what happens on
the broker? Do new queues get created? Do you start some consumer??

Re:    when  a  new  person  login in the  online server, the online  Server 
ask   rabbitmq-server to  create   a  queue  for  him. and  start a 
consumer for  the queue.  (if  he  already  have  the queue on mq server,
the create fail, but we  don't  care about  that.  the only thing  we care
about  is   that   when  a new person  login in ,there will be a queue 
server for him)     every  person  only  have  one queue and  one  consumer
for the queue  in  rabbitmq-server. 



2.  ?When a person sends a message to another person over this chat what
queues does it get routed to? How does the message get back to the
application the user is using.?

Re:    when he want to chart to another person  A.  he send message to A's
only queue.  and A may receive the message by him only consumer.  if A want
to reply to sender, he need to send message to sender's only queue.   it's
seems like email.    maybe we need talk group,  so I'd like to create
exchange for talk group.   we can bind the group memebers to a exchange. and
send message to the exchange.  





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27760.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From alan.antonuk at gmail.com  Wed Jul  3 06:59:10 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 2 Jul 2013 22:59:10 -0700
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <1372823518409-27760.post@n5.nabble.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
	<CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
	<1372816814705-27756.post@n5.nabble.com>
	<CAAt2po+iTh+w40j6Ko-ERF6nrYJgsnw5Cc_mDknujyuVwfnt9w@mail.gmail.com>
	<1372823518409-27760.post@n5.nabble.com>
Message-ID: <CAAt2poK8BgMdYxv05Ob5fKuQ-FfMtXXFZu2K_M2nRYGmLuDjDw@mail.gmail.com>

Ok, now I have a better understanding of what you're trying to accomplish.

First a bit of a warning: as you've already noticed, the rabbitmq-c API
doesn't lend itself to doing RPC-style commands (such as
amqp_basic_consume, or amqp_queue_declare, etc) while waiting on a message
to be delivered with amqp_simple_wait_frame().  So the following solutions
won't be the most natural solutions out there, they may also may suffer
from performance issues. If these solutions don't work for you - I would
encourage you to explore using other RabbitMQ clients.


My first suggestion would be to declare a command queue on the broker and
have your message reading thread consume from that command queue.  When a
user logs into the chat, using a different connection publish a message to
that command queue "start consuming from queue X".  Your message reading
thread should then read that message, then create the consumer, and go back
to waiting for messages.  You could use a similar process to stop a
consumer.

The upside is this is fairly easy to implement, the downside (and you would
need to do some performance testing) is that there is a certain cost for
having the message go to the broker and back, also if your message reading
thread is consuming a lot of messages from different consumers, there could
be a significant delay between the time you send the message from one
thread, and the time the message is received in your message reading thread.


My second suggestion would be to create a pipe (
http://linux.die.net/man/7/pipe) and before the first
amqp_simple_wait_frame() call, extract the socket fd from the
amqp_connection_state_t with amqp_get_sockfd() and do a select() call with
both the read-end of the pipe and the socket fd. If the pipe can be read
that will be the signal that a consumer should be started or stopped,
otherwise a message should be read.

In the other thread, when a new user logs in write a command to the pipe
indicating what other amqp commands the message reader thread should do
(start or stop a consumer).

The upside is that this will likely be more performant than my first
suggestion.  The downside is that this is a fair bit more complicated in
terms of programming effort, and understanding how pipes work, and outside
of Linux i'm not 100% sure this will work (I know it will require a
different approach on Win32).

HTH
-Alan


On Tue, Jul 2, 2013 at 8:51 PM, 3k4b251 <314992959 at qq.com> wrote:

>
> 1.  ? For example when a new person signs on to this chat, what happens on
> the broker? Do new queues get created? Do you start some consumer??
>
> Re:    when  a  new  person  login in the  online server, the online
>  Server
> ask   rabbitmq-server to  create   a  queue  for  him. and  start a
> consumer for  the queue.  (if  he  already  have  the queue on mq server,
> the create fail, but we  don't  care about  that.  the only thing  we care
> about  is   that   when  a new person  login in ,there will be a queue
> server for him)     every  person  only  have  one queue and  one  consumer
> for the queue  in  rabbitmq-server.
>
>
>
> 2.  ?When a person sends a message to another person over this chat what
> queues does it get routed to? How does the message get back to the
> application the user is using.?
>
> Re:    when he want to chart to another person  A.  he send message to A's
> only queue.  and A may receive the message by him only consumer.  if A want
> to reply to sender, he need to send message to sender's only queue.   it's
> seems like email.    maybe we need talk group,  so I'd like to create
> exchange for talk group.   we can bind the group memebers to a exchange.
> and
> send message to the exchange.
>
>
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27760.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/90c00a3a/attachment.htm>

From davitb at energizeglobal.com  Wed Jul  3 07:02:39 2013
From: davitb at energizeglobal.com (Davit Baghdagyulyan)
Date: Wed, 3 Jul 2013 10:02:39 +0400
Subject: [rabbitmq-discuss] IOS Library
In-Reply-To: <CAMcAHLXs7CYhhPwn1DvdUtEfA1cYA=Jtp0+89d3J1m0n0XuaPQ@mail.gmail.com>
References: <255DF26D-9DFB-4DD7-AA63-023BEFACC2B2@energizeglobal.com>
	<904C23FE-C4D4-4D44-A051-9A158C038493@energizeglobal.com>
	<CACOPnvcYHgLtK72ajXn6xpBrfesJ1COUiiJhpOys9qCeAP3TXg@mail.gmail.com>
	<D8E47426-24FB-4505-BD9E-10A93DC2783A@energizeglobal.com>
	<CAMcAHLXs7CYhhPwn1DvdUtEfA1cYA=Jtp0+89d3J1m0n0XuaPQ@mail.gmail.com>
Message-ID: <082CF00A-86D3-49CA-89FF-4915796FBCAD@energizeglobal.com>



Thanks Alvaro

From matthias at rabbitmq.com  Wed Jul  3 07:09:09 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 03 Jul 2013 07:09:09 +0100
Subject: [rabbitmq-discuss] Message index memory usage
In-Reply-To: <1372819303758-27759.post@n5.nabble.com>
References: <1372819023584-27757.post@n5.nabble.com>
	<1372819303758-27759.post@n5.nabble.com>
Message-ID: <51D3C005.8090800@rabbitmq.com>

Carl,

On 03/07/13 03:41, carlhoerberg wrote:
> about 33 million messages are queued, is that why? in that case, how do i
> find the queue which has the most messages queued on a abritary list of
> vhosts? rabbitmqctl list_queues requires a vhost name, and the http api
> requires you to have ACL access to all vhosts.

On the management API you should be able to connect as user with the 
'administrator'(*) tag and see information on queues across all vhosts.

Regards,

Matthias.
(*) Possibly 'monitoring' is sufficient too; the docs are unclear on this.

From 314992959 at qq.com  Wed Jul  3 07:46:47 2013
From: 314992959 at qq.com (3k4b251)
Date: Tue, 2 Jul 2013 23:46:47 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <CAAt2poK8BgMdYxv05Ob5fKuQ-FfMtXXFZu2K_M2nRYGmLuDjDw@mail.gmail.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
	<CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
	<1372816814705-27756.post@n5.nabble.com>
	<CAAt2po+iTh+w40j6Ko-ERF6nrYJgsnw5Cc_mDknujyuVwfnt9w@mail.gmail.com>
	<1372823518409-27760.post@n5.nabble.com>
	<CAAt2poK8BgMdYxv05Ob5fKuQ-FfMtXXFZu2K_M2nRYGmLuDjDw@mail.gmail.com>
Message-ID: <1372834007341-27764.post@n5.nabble.com>

thank you so much !    I  think  I  already  read  this  :

http://comments.gmane.org/gmane.comp.networking.rabbitmq.general/14140


and  I   put  the  codes   in  my  program?  I  think  I  can  use  
amqp_simple_wait_frame()  and   amqp_basic_consume()  in  diffrent  threads. 
But  I  still  can not  use  them  in  same time.   what  can  I  do   to 
keep  amqp_simple_wait_frame()  and  amqp_basic_consume()  not  to  be used 
same time  in diffrent  threads?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27764.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From davitb at energizeglobal.com  Tue Jul  2 13:52:16 2013
From: davitb at energizeglobal.com (Davit Baghdagyulyan)
Date: Tue, 2 Jul 2013 16:52:16 +0400
Subject: [rabbitmq-discuss] IOS Library
Message-ID: <255DF26D-9DFB-4DD7-AA63-023BEFACC2B2@energizeglobal.com>


HI !

I  want ask about RabbitMQ Library for IOS.
Is there any library for IOS client?

Thanks!

Davit




From Rohit_Patle at mahindrasatyam.com  Wed Jul  3 07:03:21 2013
From: Rohit_Patle at mahindrasatyam.com (Rohit_Patle)
Date: Wed, 3 Jul 2013 06:03:21 +0000
Subject: [rabbitmq-discuss] Python Embeddeding to achive Heart-beat.
Message-ID: <27E054594442884E9A46DBCF9AE7408160C498@BSDMSATMBX001.mahindrasatyam.ad>

Hi,

I am new to ampq rabbitmq implementation. currently I am using rabbitmq-c for development, but I like to have heart beat future in my implementation. I would like to know where I can achieve heart beat by embedding python to my rabbitmq-c code??

Thanks in advance.

Thanks & Regards,
Rohit

________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/e87365b1/attachment.htm>

From kvredy87 at gmail.com  Wed Jul  3 07:24:13 2013
From: kvredy87 at gmail.com (Venky)
Date: Tue, 2 Jul 2013 23:24:13 -0700 (PDT)
Subject: [rabbitmq-discuss] Error in declaring a queue.
Message-ID: <164a19a8-a874-40bf-9f54-da73620ec636@googlegroups.com>

Hi All,

I am trying to declare a queue in RabbitMQ with php.

Here is my code

function declareQueue($queue_name)
{
$this->queue = new AMQPQueue($this->channel);   //channel is already 
created. am omitting that code from here
$this->queue->setName($queue_name);
$this->queue->setFlags(AMQP_DURABLE);
$this->queue->setFlags(AMQP_PASSIVE);
$this->queue->declare();
}

$amqp -> declareQueue("myqueue");



This part of code is giving an error when there is no queue in RabbitMQ. 
the error is:

PHP Fatal error:  Uncaught exception 'AMQPQueueException' with message 
'Server channel error: 404, message: NOT_FOUND - no queue 'myqueue' in 
vhost '/''



Every thing is going fine when the queue is already created in Rabbitmq.


Any help please.

Thanks in advance.





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130702/eb89f0a9/attachment.htm>

From watson.timothy at gmail.com  Wed Jul  3 08:46:01 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Wed, 3 Jul 2013 08:46:01 +0100
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
	amqp_simple_wait_frame() to get mesage?
In-Reply-To: <CAAt2poK8BgMdYxv05Ob5fKuQ-FfMtXXFZu2K_M2nRYGmLuDjDw@mail.gmail.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
	<CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
	<1372816814705-27756.post@n5.nabble.com>
	<CAAt2po+iTh+w40j6Ko-ERF6nrYJgsnw5Cc_mDknujyuVwfnt9w@mail.gmail.com>
	<1372823518409-27760.post@n5.nabble.com>
	<CAAt2poK8BgMdYxv05Ob5fKuQ-FfMtXXFZu2K_M2nRYGmLuDjDw@mail.gmail.com>
Message-ID: <58AAAEFB-8EB8-4929-A651-4F64B9D10E73@rabbitmq.com>

On 3 Jul 2013, at 06:59, Alan Antonuk <alan.antonuk at gmail.com> wrote:
> and outside of Linux i'm not 100% sure this will work (I know it will require a different approach on Win32).

That'll work fine on most unices, with some caveats around signal handling if you're doing that.

On win32 you'll need to use an io completion port.

Cheers,
Tim

From watson.timothy at gmail.com  Wed Jul  3 08:48:15 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Wed, 3 Jul 2013 08:48:15 +0100
Subject: [rabbitmq-discuss] Python Embeddeding to achive Heart-beat.
In-Reply-To: <27E054594442884E9A46DBCF9AE7408160C498@BSDMSATMBX001.mahindrasatyam.ad>
References: <27E054594442884E9A46DBCF9AE7408160C498@BSDMSATMBX001.mahindrasatyam.ad>
Message-ID: <9DFE2A91-DD23-404E-9F96-BEC4D37094B1@rabbitmq.com>

Why not just use the python client in the first place? If you need to call c/c++ apis, you can wrap them for python as needed using the ffi.

On 3 Jul 2013, at 07:03, Rohit_Patle <Rohit_Patle at mahindrasatyam.com> wrote:

> Hi,
> 
> I am new to ampq rabbitmq implementation. currently I am using rabbitmq-c for development, but I like to have heart beat future in my implementation. I would like to know where I can achieve heart beat by embedding python to my rabbitmq-c code??
> 
> Thanks in advance.
> 
> Thanks & Regards,
> Rohit 
> 
> 
> DISCLAIMER:
> This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/2faf6330/attachment.htm>

From brett.r.cameron at gmail.com  Wed Jul  3 09:09:31 2013
From: brett.r.cameron at gmail.com (Brett Cameron)
Date: Wed, 3 Jul 2013 20:09:31 +1200
Subject: [rabbitmq-discuss] Error in declaring a queue.
In-Reply-To: <164a19a8-a874-40bf-9f54-da73620ec636@googlegroups.com>
References: <164a19a8-a874-40bf-9f54-da73620ec636@googlegroups.com>
Message-ID: <CALPqkiq1LfAADRs1pNjWDMR=tDTK3ejSD8KvUo3viH73ZTiftw@mail.gmail.com>

Venky,

With AMQP_PASSIVE set you are basically just checking for the existence (or
not) of the queue.

To quote the AMQP 0-9-1 reference (
http://www.rabbitmq.com/amqp-0-9-1-reference.html):

"bit passive
 If set, the server will reply with Declare-Ok if the queue already exists
with the same name, and raise an error if not. The client can use this to
check whether a queue exists without modifying the server state. "

... and the returned error will be "not-found".

Brett



On Wed, Jul 3, 2013 at 6:24 PM, Venky <kvredy87 at gmail.com> wrote:

> Hi All,
>
> I am trying to declare a queue in RabbitMQ with php.
>
> Here is my code
>
> function declareQueue($queue_name)
> {
> $this->queue = new AMQPQueue($this->channel);   //channel is already
> created. am omitting that code from here
> $this->queue->setName($queue_name);
> $this->queue->setFlags(AMQP_DURABLE);
> $this->queue->setFlags(AMQP_PASSIVE);
> $this->queue->declare();
> }
>
> $amqp -> declareQueue("myqueue");
>
>
>
> This part of code is giving an error when there is no queue in RabbitMQ.
> the error is:
>
> PHP Fatal error:  Uncaught exception 'AMQPQueueException' with message
> 'Server channel error: 404, message: NOT_FOUND - no queue 'myqueue' in
> vhost '/''
>
>
>
> Every thing is going fine when the queue is already created in Rabbitmq.
>
>
> Any help please.
>
> Thanks in advance.
>
>
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/c13eecdb/attachment.htm>

From simon at rabbitmq.com  Wed Jul  3 10:26:24 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 10:26:24 +0100
Subject: [rabbitmq-discuss] sorting of list of queues for web management
 plugin
In-Reply-To: <51D2F72B.4080003@nethost.cz>
References: <51D2F72B.4080003@nethost.cz>
Message-ID: <51D3EE40.1010305@rabbitmq.com>

On 02/07/13 16:52, David Pravec wrote:
> Every time i want to see overview of my almost thousand queues
> sorted by total number of messages, i need to
> click 2 times on a 'Total' column name.

Ah, that's not possible I'm afraid. I'll file a bug.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jul  3 10:34:01 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 10:34:01 +0100
Subject: [rabbitmq-discuss] What is occuered when the master node output
 warning log of msg_store_persistent ?
In-Reply-To: <CACi3n5KbKZVXToAOE_wmcQYF5dtEmLnUPNTqFs4F_g8oHBum_g@mail.gmail.com>
References: <CACi3n5KbKZVXToAOE_wmcQYF5dtEmLnUPNTqFs4F_g8oHBum_g@mail.gmail.com>
Message-ID: <51D3F009.1080608@rabbitmq.com>

This is nothing to do with master vs slave (which is a term applied to 
individual queue-node combinations by the way, not to entire nodes).

That message means the broker was shut down unexpectedly, and it was not 
able to trust its indices as a consequence. This can take quite some 
time - so make sure you shut down the server properly (with e.g. 
rabbitmqctl stop, or /etc/init.d/rabbitmq-server stop, or stopping the 
Windows service).

Cheers, Simon

On 02/07/13 19:32, t.otoda wrote:
> I use RabbitMQ 3.0.1 and have a cluster with 2 disk nodes.
> When I stoped and restarted both, the master node output log below.
>   =WARNING REPORT==== 19-Jun-2013::23:56:59 ===
> msg_store_persistent: recovery terms differ from present
> rebuilding indices from scratch
> Please tell me why this log is output
> and what is occuered within RabbitMQ nodes.
> I expect that
> when a slave disk node is started,
> the master node compares the indices it owns and the indices started
> slave owns.
> And then,
> since the slave node was stopped by the abnormal way(?),
> the indices differed from the other, and the master node output log.
> Is this correct?
>   (?)For example, I stoped the node
>         beore it becomes the new master node instead of the stopped
> master node.
> Thank you.
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jul  3 10:35:30 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 10:35:30 +0100
Subject: [rabbitmq-discuss] Message index memory usage
In-Reply-To: <51D3C005.8090800@rabbitmq.com>
References: <1372819023584-27757.post@n5.nabble.com>
	<1372819303758-27759.post@n5.nabble.com>
	<51D3C005.8090800@rabbitmq.com>
Message-ID: <51D3F062.4090202@rabbitmq.com>

On 03/07/13 07:09, Matthias Radestock wrote:
> (*) Possibly 'monitoring' is sufficient too; the docs are unclear on this.

It is sufficient; I've clarified the docs.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From tim at rabbitmq.com  Wed Jul  3 10:46:34 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Wed, 3 Jul 2013 10:46:34 +0100
Subject: [rabbitmq-discuss] RabbitMQ's Mirroring results in weird
	behavior when slave goes down
In-Reply-To: <1372295933370-27633.post@n5.nabble.com>
References: <1372141680170-27572.post@n5.nabble.com>
	<A888D5A8-3C9F-49D4-82D2-130A4BB0BA66@rabbitmq.com>
	<1372224266044-27611.post@n5.nabble.com>
	<2F050250-E7F1-4543-B3C3-239885F7C9CB@rabbitmq.com>
	<1372295933370-27633.post@n5.nabble.com>
Message-ID: <19EF4FB2-2ABE-42A4-8A81-F64BB52C8D69@rabbitmq.com>

Hi Thomas,

On 27 Jun 2013, at 02:18, thomas wrote:

> I have tried using ignore instead of autoheal for cluster_partition_handling
> but the pause still persist, but the pause begins approximately 20 seconds
> after bringing down the mirror node. 
> 

That won't help you I'm afraid.

> Please kindly let me know if you experience the same problem as I can't be
> sure if there could be any problem on my side which I doubt so. Thanks.
> 

There's nothing wrong with your sending code. The issue appears to be that the channel is expecting to receive credit (during normal flow control) from not just the master queue process, but from all the slaves too. This can cause a delay of up to (and even exceeding) net_ticktime, basically until the node notices that its peer has gone away. The reason why introducing a delay to the publishing rate stops the pause, is that when publishing slows down, we don't end up hitting flow control and the logic that's waiting for slaves therefore doesn't kick in.

Lowering the net_ticktime can alleviate this to some extent, but will not solve the problem consistently as there's always going to be a possibility of delay (depending on the current load, network characteristics, etc). You should also bear in mind that lowering the net_ticktime too much can be quite dangerous if the network is already under considerable load, since ticks might get lost behind other traffic, leading to false (unwanted) net-splits occurring.

I have filed a bug to try and improve this behaviour (in the face of slave deaths) and will try to get the fix into the next patch release. Thanks for reporting this behaviour, and for sticking with the conversation while we worked through the possible causes.

Cheers,
Tim


From tom.anderson at timgroup.com  Wed Jul  3 11:33:33 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Wed, 3 Jul 2013 11:33:33 +0100
Subject: [rabbitmq-discuss] Shunting messages from one queue to another
Message-ID: <51D3FDFD.3090209@timgroup.com>

Hi,

We have a queue which is used to send messages to an app, which then 
processes them, and inserts some data into a database. Perhaps people 
will have seen similar setups before :). Sometimes, the app cannot 
process the message for some reason, and will use basic.reject with 
requeue=false to discard it. We have a dead-letter queue, so discarded 
messages end up there.

Sometimes (actually, always), failures to process are not really due to 
errors in the messages, but in the processing code in the application. 
For example, we had a case where a zero in a particular field in a 
message led to an infinity after some calculations, which then caused 
database inserts to blow up. As another, we have an ongoing epidemic of 
database deadlocks causing transient failures to insert.

Our response to these problem is to fix the bug in the processing code, 
and then re-run the messages. We do this by prodding the upstream 
message-sending system to repeat all the relevant messages. This is 
manual and error-prone (it involves deleting documents from a MongoDB 
server by hand, then bouncing an app server >_<), and also rather 
inefficient.

What i would like to do instead is move the discarded messages from the 
dead-letter queue back to the main queue. In fact, we may want to move 
messages from the dead-letter queue to a holding queue, and from there 
back to the main queue, so that an infinite loop is never possible. What 
is the best way to do this?

We could write code of our own that talks to RabbitMQ to move the 
messages. I would like to avoid doing this if possible, because every 
line of code we write is a line of code we can get wrong.

We could use the shovel plugin to do this - in some ways this seems 
ideal. However, shovels are configured in RabbitMQ's configuration files 
as essentially permanent features, which we don't want; we want to be 
able to run a shovel-like process just once, rather than constantly. 
Also, shovels seem to be geared towards moving messages between queues 
in different brokers, whereas in our case, both queues are in a single 
broker. Would it still be sensible to use a shovel?

If not, are there any other utilities in the RabbitMQ ecosystem which we 
could use for this?

Thanks in advance,
tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/687642d4/attachment.htm>

From simon at rabbitmq.com  Wed Jul  3 11:53:34 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 11:53:34 +0100
Subject: [rabbitmq-discuss] Shunting messages from one queue to another
In-Reply-To: <51D3FDFD.3090209@timgroup.com>
References: <51D3FDFD.3090209@timgroup.com>
Message-ID: <51D402AE.1000307@rabbitmq.com>

On 03/07/13 11:33, Tom Anderson wrote:
> We could use the shovel plugin to do this - in some ways this seems
> ideal. However, shovels are configured in RabbitMQ's configuration files
> as essentially permanent features, which we don't want; we want to be
> able to run a shovel-like process just once, rather than constantly.
> Also, shovels seem to be geared towards moving messages between queues
> in different brokers, whereas in our case, both queues are in a single
> broker. Would it still be sensible to use a shovel?

In the future we hope to have shovels that can be dynamically 
reconfigured at run time; I don't consider permanency to be an inherent 
feature of shovels. And being able to spin up a quick shovel to move 
messages from one queue to another within the same broker is a use case 
for that.

However, "permanent" shovels are all we've got at the moment. But bear 
in mind the shovel doesn't need to be in the same broker as the queues - 
you could spin up an ad hoc broker node on the same machine with 
whatever shovels you need, then shut it down when you're done.

Cheer, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From tom.anderson at timgroup.com  Wed Jul  3 12:33:47 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Wed, 3 Jul 2013 12:33:47 +0100
Subject: [rabbitmq-discuss] Shunting messages from one queue to another
In-Reply-To: <51D402AE.1000307@rabbitmq.com>
References: <51D3FDFD.3090209@timgroup.com> <51D402AE.1000307@rabbitmq.com>
Message-ID: <51D40C1B.7010704@timgroup.com>

On 03/07/13 11:53, Simon MacMullen wrote:
> On 03/07/13 11:33, Tom Anderson wrote:
>> We could use the shovel plugin to do this - in some ways this seems
>> ideal. However, shovels are configured in RabbitMQ's configuration files
>> as essentially permanent features, which we don't want; we want to be
>> able to run a shovel-like process just once, rather than constantly.
>> Also, shovels seem to be geared towards moving messages between queues
>> in different brokers, whereas in our case, both queues are in a single
>> broker. Would it still be sensible to use a shovel?
>
> In the future we hope to have shovels that can be dynamically 
> reconfigured at run time; I don't consider permanency to be an 
> inherent feature of shovels. And being able to spin up a quick shovel 
> to move messages from one queue to another within the same broker is a 
> use case for that.

Awesome!

> However, "permanent" shovels are all we've got at the moment. But bear 
> in mind the shovel doesn't need to be in the same broker as the queues 
> - you could spin up an ad hoc broker node on the same machine with 
> whatever shovels you need, then shut it down when you're done.

I don't know offhand how to start a brand new broker node. Is this 
something that will be obvious if i read the documentation, or is there 
any trick to it? Will there be any surprises if we do this on the same 
machine as a running node?

tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/2fdeaf0c/attachment.htm>

From michael.s.klishin at gmail.com  Wed Jul  3 12:43:18 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 3 Jul 2013 15:43:18 +0400
Subject: [rabbitmq-discuss] Shunting messages from one queue to another
In-Reply-To: <51D40C1B.7010704@timgroup.com>
References: <51D3FDFD.3090209@timgroup.com> <51D402AE.1000307@rabbitmq.com>
	<51D40C1B.7010704@timgroup.com>
Message-ID: <CAE3HoVS+CXMO9vnU+XghZ7ExSSuRQLt8u3Uc5ziBMs-4Ztt8XA@mail.gmail.com>

2013/7/3 Tom Anderson <tom.anderson at timgroup.com>

> I don't know offhand how to start a brand new broker node. Is this
> something that will be obvious if i read the documentation, or is there any
> trick to it?


Just start another instance of Rabbit. If you already have a package
installed, you can use precompiled tarballs
and run RabbitMQ in the foreground with

./sbin/rabbitmq-server

(config files will go under ./etc/rabbitmq). Then you can monitor queue
sizes on your main rabbit instance
to know when shovel has finished transferring messages.


> Will there be any surprises if we do this on the same machine as a running
> node?


You will have to enable the shovel plugin and make Rabbit use a different
port (or disable TCP listeners
altogether).

With a tarball install, you do that via

./sbin/rabbitmq-plugins enable rabbitmq_shovel
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/d64ea0f4/attachment.htm>

From ankit.ag2010 at gmail.com  Wed Jul  3 12:48:53 2013
From: ankit.ag2010 at gmail.com (ankitag2010)
Date: Wed, 3 Jul 2013 04:48:53 -0700 (PDT)
Subject: [rabbitmq-discuss] AMQP connections closing very frequently
In-Reply-To: <51D1550A.5020807@rabbitmq.com>
References: <8c0d3987-774e-4a4a-8054-b6b7c8a67e47@googlegroups.com>
	<51C80B50.2090104@rabbitmq.com>
	<CALyoCeMg0su9hzSaERZrazxMpmOJ7KyBF=V=VA4gubUytUBYHA@mail.gmail.com>
	<249AB275-3EF3-450F-B016-7D30BDB9D9ED@rabbitmq.com>
	<1372532519918-27690.post@n5.nabble.com>
	<1372565267881-27693.post@n5.nabble.com>
	<1372569073924-27694.post@n5.nabble.com>
	<51CFDF13.1070800@rabbitmq.com>
	<1372672210817-27705.post@n5.nabble.com>
	<51D1550A.5020807@rabbitmq.com>
Message-ID: <1372852133315-27779.post@n5.nabble.com>

After running these two commands i am more confused:-

>sudo rabbitmqctl environment

Application environment of node rabbit at test04 ...
[{auth_backends,[rabbit_auth_backend_internal]},
 {auth_mechanisms,['PLAIN','AMQPLAIN']},
 {backing_queue_module,rabbit_variable_queue},
 {cluster_nodes,{[],disc}},
 {cluster_partition_handling,ignore},
 {collect_statistics,fine},
 {collect_statistics_interval,5000},
 {default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
 {default_user,<<"guest">>},
 {default_user_tags,[administrator]},
 {default_vhost,<<"/">>},
 {delegate_count,16},
 {disk_free_limit,1000000000},
 {enabled_plugins_file,"/etc/rabbitmq/enabled_plugins"},
 {error_logger,{file,"/var/log/rabbitmq/rabbit at test04.log"}},
* {frame_max,0},*
 {heartbeat,600},
 {hipe_compile,false},
 {included_applications,[]},
 {log_levels,[{connection,info}]},
 {msg_store_file_size_limit,16777216},
 {msg_store_index_module,rabbit_msg_store_ets_index},

{plugins_dir,"/usr/lib/rabbitmq/lib/rabbitmq_server-3.1.3/sbin/../plugins"},

{plugins_expand_dir,"/var/lib/rabbitmq/mnesia/rabbit at test04-plugins-expand"},
 {queue_index_max_journal_entries,65536},
 {reverse_dns_lookups,false},
 {sasl_error_logger,{file,"/var/log/rabbitmq/rabbit at test04-sasl.log"}},
 {server_properties,[]},
 {ssl_cert_login_from,distinguished_name},
 {ssl_listeners,[]},
 {ssl_options,[]},
 {tcp_listen_options,[binary,
                      {packet,raw},
                      {reuseaddr,true},
                      {backlog,128},
                      {nodelay,true},
                      {linger,{true,0}},
                      {exit_on_close,false}]},
 {tcp_listeners,[5672]},
 {trace_vhosts,[]},
 {vm_memory_high_watermark,0.4}]
...done.


> sudo rabbitmqctl list_connections frame_max
Listing connections ...
131072
...done.

Which one is the correct? What exactly is the difference b/w these two?




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/AMQP-connections-closing-very-frequently-tp27552p27779.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Wed Jul  3 12:56:18 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 03 Jul 2013 12:56:18 +0100
Subject: [rabbitmq-discuss] AMQP connections closing very frequently
In-Reply-To: <1372852133315-27779.post@n5.nabble.com>
References: <8c0d3987-774e-4a4a-8054-b6b7c8a67e47@googlegroups.com>
	<51C80B50.2090104@rabbitmq.com>
	<CALyoCeMg0su9hzSaERZrazxMpmOJ7KyBF=V=VA4gubUytUBYHA@mail.gmail.com>
	<249AB275-3EF3-450F-B016-7D30BDB9D9ED@rabbitmq.com>
	<1372532519918-27690.post@n5.nabble.com>
	<1372565267881-27693.post@n5.nabble.com>
	<1372569073924-27694.post@n5.nabble.com>
	<51CFDF13.1070800@rabbitmq.com>
	<1372672210817-27705.post@n5.nabble.com>
	<51D1550A.5020807@rabbitmq.com>
	<1372852133315-27779.post@n5.nabble.com>
Message-ID: <51D41162.8090707@rabbitmq.com>

On 03/07/13 12:48, ankitag2010 wrote:
>> sudo rabbitmqctl environment
>
> {frame_max,0}
>
>> sudo rabbitmqctl list_connections frame_max
> Listing connections ...
> 131072
> ...done.
>
> Which one is the correct? What exactly is the difference b/w these two?

The frame_max of a connection gets *negotiated* on connection 
establishment. The server tells the client what setting it would like 
(controlled by the server's frame_max configuration, i.e. the first 
value above), and the client then tells the server what to actually use 
(the second value above).

So it looks like the client library you are running is telling the 
server to use a frame_max of 131072.

Matthias.

From simon at rabbitmq.com  Wed Jul  3 13:03:40 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 13:03:40 +0100
Subject: [rabbitmq-discuss] Shunting messages from one queue to another
In-Reply-To: <CAE3HoVS+CXMO9vnU+XghZ7ExSSuRQLt8u3Uc5ziBMs-4Ztt8XA@mail.gmail.com>
References: <51D3FDFD.3090209@timgroup.com> <51D402AE.1000307@rabbitmq.com>
	<51D40C1B.7010704@timgroup.com>
	<CAE3HoVS+CXMO9vnU+XghZ7ExSSuRQLt8u3Uc5ziBMs-4Ztt8XA@mail.gmail.com>
Message-ID: <51D4131C.6030000@rabbitmq.com>

On 03/07/13 12:43, Michael Klishin wrote:
> 2013/7/3 Tom Anderson <tom.anderson at timgroup.com
> <mailto:tom.anderson at timgroup.com>>
>
>     I don't know offhand how to start a brand new broker node. Is this
>     something that will be obvious if i read the documentation, or is
>     there any trick to it?
>
>
> Just start another instance of Rabbit.

Err, well you need to set some environment variables, at least 
RABBITMQ_NODENAME and RABBITMQ_CONFIG_FILE. You'd probably also want to 
set tcp_listeners to [] in the config for the temporary shovel-hosting 
broker (otherwise it will try to open 5672 and fail).

See http://www.rabbitmq.com/clustering.html#single-machine (although you 
will not be forming the nodes into a cluster, it still applies).

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From haster2004 at yandex.ru  Wed Jul  3 14:00:14 2013
From: haster2004 at yandex.ru (Haster)
Date: Wed, 3 Jul 2013 06:00:14 -0700 (PDT)
Subject: [rabbitmq-discuss] in amqp-xml-doc 0-9-1.pdf there is no error with
	code 312
Message-ID: <1372856414419-27782.post@n5.nabble.com>

Hello!

I use channel in confirm mode and than I publish messages (mandatory bit is
set) I receive a return method
with code 312 (when there is no any bind rule for my exchange). But in
specification there is no such code (there is 311 and 313 after that).
Can someone add this code to spec?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/in-amqp-xml-doc-0-9-1-pdf-there-is-no-error-with-code-312-tp27782.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Wed Jul  3 14:06:03 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 17:06:03 +0400
Subject: [rabbitmq-discuss] in amqp-xml-doc 0-9-1.pdf there is no error
	with code 312
In-Reply-To: <1372856414419-27782.post@n5.nabble.com>
References: <1372856414419-27782.post@n5.nabble.com>
Message-ID: <BDD3ACD7-04E4-4C2F-9A06-23E1D1BA907F@gopivotal.com>

Haster:

> in
> specification there is no such code (there is 311 and 313 after that)

312 is NO_ROUTE, meaning a message cannot be routed.
--
MK


From emile at rabbitmq.com  Wed Jul  3 14:12:02 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 03 Jul 2013 14:12:02 +0100
Subject: [rabbitmq-discuss] in amqp-xml-doc 0-9-1.pdf there is no error
 with code 312
In-Reply-To: <1372856414419-27782.post@n5.nabble.com>
References: <1372856414419-27782.post@n5.nabble.com>
Message-ID: <51D42322.8040903@rabbitmq.com>

On 03/07/13 14:00, Haster wrote:

> Can someone add this code to spec?

This error only appears in the XML version of the specification. Also
see item 17 of our errata:

http://www.rabbitmq.com/amqp-0-9-1-errata.html

Updated versions of the specification can only be published by the editors.


-Emile








From haster2004 at yandex.ru  Wed Jul  3 14:14:32 2013
From: haster2004 at yandex.ru (Haster)
Date: Wed, 3 Jul 2013 06:14:32 -0700 (PDT)
Subject: [rabbitmq-discuss] in amqp-xml-doc 0-9-1.pdf there is no error
	with code 312
In-Reply-To: <BDD3ACD7-04E4-4C2F-9A06-23E1D1BA907F@gopivotal.com>
References: <1372856414419-27782.post@n5.nabble.com>
	<BDD3ACD7-04E4-4C2F-9A06-23E1D1BA907F@gopivotal.com>
Message-ID: <1372857272806-27785.post@n5.nabble.com>

Michael, thanks.

But my question was why this code is absent in spec and is it possible to
update specification?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/in-amqp-xml-doc-0-9-1-pdf-there-is-no-error-with-code-312-tp27782p27785.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Wed Jul  3 14:16:59 2013
From: haster2004 at yandex.ru (Haster)
Date: Wed, 3 Jul 2013 06:16:59 -0700 (PDT)
Subject: [rabbitmq-discuss] in amqp-xml-doc 0-9-1.pdf there is no error
	with code 312
In-Reply-To: <51D42322.8040903@rabbitmq.com>
References: <1372856414419-27782.post@n5.nabble.com>
	<51D42322.8040903@rabbitmq.com>
Message-ID: <1372857419008-27786.post@n5.nabble.com>

Emile, thanks for the complete answer



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/in-amqp-xml-doc-0-9-1-pdf-there-is-no-error-with-code-312-tp27782p27786.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From lrodriguez1995 at yahoo.com  Wed Jul  3 14:25:03 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Wed, 3 Jul 2013 06:25:03 -0700 (PDT)
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
Message-ID: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>

Dear all,
I am running into issues when trying to establish connection for a single rabbitmq node.
I have a vm running centos with rabbitmq-server and erlang r14b setup..(the node runs fine as single or clustered)(host-only network, no firewall)
I am interested in using ssl encryption (not concerned about validating clients or servers)..
After openning a listening ssl port '5671' (shows as a listening port in the management console:? amqp/ssl? 5671)and trying to run the java client example provided in the ssl tutorial (connecting without validating certificates), my broker log shows:

=ERROR REPORT ==
SSL: hello: ./ssl_handshake.erl:249:Fatal error: internal error
=ERROR REPORT ==
error on AMPQ connection <0.1199.0>: {ssl_upgrade_error, "internal_error"} (unknown POSIX error)

my java client error shows:
ssl exception:?? received fatal alert: internal error

After trying connection from my root, the following shows:
# openssl s_client -connect hare5:5671
CONNECTED(00000003)
6261:error:14094438:SSL: routines :SSL3_READ_BYTES:tlsv1 alert internal error:s3_pckt.c:1092:SSL alert number 80
6261:error:14094438:SSL: routines :SSL3_WRITE:ssl handshake failure:s23_lib.c:188


any help would be greatly appreciated


Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/5a734600/attachment.htm>

From haster2004 at yandex.ru  Wed Jul  3 14:27:22 2013
From: haster2004 at yandex.ru (Haster)
Date: Wed, 3 Jul 2013 06:27:22 -0700 (PDT)
Subject: [rabbitmq-discuss] Can server use multiple ack in confirm mode with
	mandatory bit
Message-ID: <1372858042902-27787.post@n5.nabble.com>

Hi there,
Problem:
I have a channel in confirm mode that I want use for publishing message.
I set mandatory bit and publish message...
After that I wait for some answer (basic.ack or basic.return and after that
basic.ack)

Can server in that situation send to me basic.ack with multiple = true
(multiple confirmation).
Or it will confirm every message?




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Can-server-use-multiple-ack-in-confirm-mode-with-mandatory-bit-tp27787.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Wed Jul  3 14:33:40 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 17:33:40 +0400
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
In-Reply-To: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
References: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
Message-ID: <4C6700E4-C44C-4E59-9C20-41FCA74D8D3D@gopivotal.com>

Luis Rodriguez:

> SSL alert number 80

Your s_client session suggests one peer uses TLSv1 but another one
uses SSLv3.

Can you try passing -ssl3 and then -tls1 explicitly?

RabbitMQ Java client uses SSLv3 by default.
--
MK


From ankit.ag2010 at gmail.com  Wed Jul  3 15:02:54 2013
From: ankit.ag2010 at gmail.com (ankitag2010)
Date: Wed, 3 Jul 2013 07:02:54 -0700 (PDT)
Subject: [rabbitmq-discuss] AMQP connections closing very frequently
In-Reply-To: <51D41162.8090707@rabbitmq.com>
References: <CALyoCeMg0su9hzSaERZrazxMpmOJ7KyBF=V=VA4gubUytUBYHA@mail.gmail.com>
	<249AB275-3EF3-450F-B016-7D30BDB9D9ED@rabbitmq.com>
	<1372532519918-27690.post@n5.nabble.com>
	<1372565267881-27693.post@n5.nabble.com>
	<1372569073924-27694.post@n5.nabble.com>
	<51CFDF13.1070800@rabbitmq.com>
	<1372672210817-27705.post@n5.nabble.com>
	<51D1550A.5020807@rabbitmq.com>
	<1372852133315-27779.post@n5.nabble.com>
	<51D41162.8090707@rabbitmq.com>
Message-ID: <1372860174867-27790.post@n5.nabble.com>

Thanks Matthias for all the help.

I am using a logstash client and i have posted the related issue in logstash
forum.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/AMQP-connections-closing-very-frequently-tp27552p27790.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Wed Jul  3 15:07:52 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 3 Jul 2013 18:07:52 +0400
Subject: [rabbitmq-discuss] AMQP connections closing very frequently
In-Reply-To: <1372860174867-27790.post@n5.nabble.com>
References: <CALyoCeMg0su9hzSaERZrazxMpmOJ7KyBF=V=VA4gubUytUBYHA@mail.gmail.com>
	<249AB275-3EF3-450F-B016-7D30BDB9D9ED@rabbitmq.com>
	<1372532519918-27690.post@n5.nabble.com>
	<1372565267881-27693.post@n5.nabble.com>
	<1372569073924-27694.post@n5.nabble.com>
	<51CFDF13.1070800@rabbitmq.com>
	<1372672210817-27705.post@n5.nabble.com>
	<51D1550A.5020807@rabbitmq.com>
	<1372852133315-27779.post@n5.nabble.com>
	<51D41162.8090707@rabbitmq.com>
	<1372860174867-27790.post@n5.nabble.com>
Message-ID: <CAE3HoVTGcOneAN8A5cjSzwtDViou5OqECrMFN48R128aLw=yZw@mail.gmail.com>

2013/7/3 ankitag2010 <ankit.ag2010 at gmail.com>

> I am using a logstash client and i have posted the related issue in
> logstash
> forum.
>

Logstash RabbitMQ plugin currently uses Bunny 0.8 which does not support
payload
framing and publishing of messages greater than 128K.

An updated version of the plugin will use Bunny 0.9 on CRuby and HotBunnies
on JRuby,
both implement payload framing:

https://github.com/logstash/logstash/pull/533
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/92af973a/attachment.htm>

From simon at rabbitmq.com  Wed Jul  3 15:12:36 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 15:12:36 +0100
Subject: [rabbitmq-discuss] Can server use multiple ack in confirm mode
 with mandatory bit
In-Reply-To: <1372858042902-27787.post@n5.nabble.com>
References: <1372858042902-27787.post@n5.nabble.com>
Message-ID: <51D43154.8050508@rabbitmq.com>

On 03/07/13 14:27, Haster wrote:
> Hi there,
> Problem:
> I have a channel in confirm mode that I want use for publishing message.
> I set mandatory bit and publish message...
> After that I wait for some answer (basic.ack or basic.return and after that
> basic.ack)
>
> Can server in that situation send to me basic.ack with multiple = true
> (multiple confirmation).

In theory we reserve the right to send basic.ack{multiple = true} at any 
time when in confirm mode.

In practice the use of mandatory (particularly with transient messages) 
might change internal timings inside the broker such that 
basic.ack{multiple = true} was very rare. But it could still happen.

> Or it will confirm every message?

You can't assume that.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From haster2004 at yandex.ru  Wed Jul  3 15:30:29 2013
From: haster2004 at yandex.ru (Haster)
Date: Wed, 3 Jul 2013 07:30:29 -0700 (PDT)
Subject: [rabbitmq-discuss] Can server use multiple ack in confirm mode
	with mandatory bit
In-Reply-To: <51D43154.8050508@rabbitmq.com>
References: <1372858042902-27787.post@n5.nabble.com>
	<51D43154.8050508@rabbitmq.com>
Message-ID: <1372861829104-27793.post@n5.nabble.com>

Simon, thanks for reply

I saw such realization of publish method in SimpleAmqpClient:

they send amqp_basic_publish (with mandatory bit and in confirm mode),
after what they call amqp_simple_wait_frame and if received frame is
BASIC_ACK then they 
return OK...

So as I understand this realization is incorrect?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Can-server-use-multiple-ack-in-confirm-mode-with-mandatory-bit-tp27787p27793.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Wed Jul  3 15:37:30 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 15:37:30 +0100
Subject: [rabbitmq-discuss] Can server use multiple ack in confirm mode
 with mandatory bit
In-Reply-To: <1372861829104-27793.post@n5.nabble.com>
References: <1372858042902-27787.post@n5.nabble.com>
	<51D43154.8050508@rabbitmq.com>
	<1372861829104-27793.post@n5.nabble.com>
Message-ID: <51D4372A.10408@rabbitmq.com>

On 03/07/13 15:30, Haster wrote:
> Simon, thanks for reply
>
> I saw such realization of publish method in SimpleAmqpClient:
>
> they send amqp_basic_publish (with mandatory bit and in confirm mode),
> after what they call amqp_simple_wait_frame and if received frame is
> BASIC_ACK then they
> return OK...
>
> So as I understand this realization is incorrect?

Not necessarily - if they've wrapped both the publish and the wait for 
confirmation in one function call then you'll never get a multiple ack, 
since you'll never have more than one message outstanding at once.

(Assuming the threading model doesn't permit you to call this function 
from more than one thread...)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Wed Jul  3 15:38:03 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 15:38:03 +0100
Subject: [rabbitmq-discuss] LDAP authentication without authorization
In-Reply-To: <CALQig897bzVOtOUuQGR9zRQdHXoDZ=9cDS3mbr-q1n8x=yZ=0A@mail.gmail.com>
References: <e15c15f4-9a25-4c6f-b8c5-7a612614d6bb@googlegroups.com>
	<51D17810.7020302@rabbitmq.com>
	<CALQig897bzVOtOUuQGR9zRQdHXoDZ=9cDS3mbr-q1n8x=yZ=0A@mail.gmail.com>
Message-ID: <51D4374B.3040708@rabbitmq.com>

On 01/07/13 19:52, Steve Valaitis wrote:
> Where is the official issue tracker(github?)?

Most bugs are on an internal Bugzilla instance, but we accept github 
issues too. Having said that, I've already added this to Bugzilla.

> What kind of timeframe might there be for this feature, and

I'm not sure - there's a huge stack of other things on our plates at the 
moment.

> is there anything I can do to help the process?

Learn Erlang :-)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From x050516 at gmail.com  Wed Jul  3 15:50:45 2013
From: x050516 at gmail.com (BK)
Date: Wed, 3 Jul 2013 07:50:45 -0700 (PDT)
Subject: [rabbitmq-discuss] user_dn_pattern ==> OR situation
Message-ID: <1372863045378-27796.post@n5.nabble.com>

   I have been stonewalled with this issue and require your assistance.

   Operating System : Windows Server 2008
   RabbitMQ Version : 3.1.0 and 3.1.3
   Erlang : R16B
   Question topic : LDAP configuration

   Currently I have the following in my RabbitMQ.config file

 rabbitmq_auth_backend_ldap,
       [ {servers,               ["ppp.jaw.org"]},
         {user_dn_pattern,       "cn=${username},ou=NonEmployees,
ou=UserAccounts, dc=ppp,dc=jaw,dc=org"},
         {use_ssl,               false},
         {port,                  389},
         {log,                   network}


  I was wondering if I can have a choice such as

    (ou=NonEmployees OR ou=ServiceAccounts) AND ou=UserAccounts

If so, can I please have the syntax ?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/user-dn-pattern-OR-situation-tp27796.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Wed Jul  3 15:56:47 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 18:56:47 +0400
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
In-Reply-To: <1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<4C6700E4-C44C-4E59-9C20-41FCA74D8D3D@gopivotal.com>
	<1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <3EA63892-9D9B-4C9D-906A-52F298DC814C@gopivotal.com>

Luis Rodriguez:

> Hi Michael,
> thanks for your prompt response
> I'm a newbie when it comes to this.
> can you please be more specific as to the steps I should try?
> 
> much appreciated..
> 
> Luis


Adding rabbitmq-discuss back.
--
MK


From mklishin at gopivotal.com  Wed Jul  3 15:57:04 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 18:57:04 +0400
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
In-Reply-To: <1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<4C6700E4-C44C-4E59-9C20-41FCA74D8D3D@gopivotal.com>
	<1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <4E6A3A50-DF90-4EC1-A2D2-0D682E88F1D3@gopivotal.com>

Luis Rodriguez:

> can you please be more specific as to the steps I should try?

Nevermind, the output from s_client may be because TLSv1 is based on SSLv3.

Can you post your rabbitmq.config? Also, there is an SSL Troubleshooting guide
at http://www.rabbitmq.com/troubleshooting-ssl.html

Development certificates can be generated with
https://github.com/ruby-amqp/tls-gen
--
MK


From tom.anderson at timgroup.com  Wed Jul  3 16:13:05 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Wed, 3 Jul 2013 16:13:05 +0100
Subject: [rabbitmq-discuss] Shunting messages from one queue to another
In-Reply-To: <51D4131C.6030000@rabbitmq.com>
References: <51D3FDFD.3090209@timgroup.com> <51D402AE.1000307@rabbitmq.com>
	<51D40C1B.7010704@timgroup.com>
	<CAE3HoVS+CXMO9vnU+XghZ7ExSSuRQLt8u3Uc5ziBMs-4Ztt8XA@mail.gmail.com>
	<51D4131C.6030000@rabbitmq.com>
Message-ID: <51D43F81.6030605@timgroup.com>

On 03/07/13 13:03, Simon MacMullen wrote:
> On 03/07/13 12:43, Michael Klishin wrote:
>> 2013/7/3 Tom Anderson <tom.anderson at timgroup.com
>> <mailto:tom.anderson at timgroup.com>>
>>
>>     I don't know offhand how to start a brand new broker node. Is this
>>     something that will be obvious if i read the documentation, or is
>>     there any trick to it?
>>
>> Just start another instance of Rabbit.
>
> Err, well you need to set some environment variables, at least 
> RABBITMQ_NODENAME and RABBITMQ_CONFIG_FILE. You'd probably also want 
> to set tcp_listeners to [] in the config for the temporary 
> shovel-hosting broker (otherwise it will try to open 5672 and fail).
>
> See http://www.rabbitmq.com/clustering.html#single-machine

This all makes sense. I am fairly new to RabbitMQ, but i'm impressed by 
the documentation so far.

> (although you will not be forming the nodes into a cluster, it still 
> applies).

The broker i am shovelling from and to, which is on the same machine, is 
part of a cluster (we have two brokers clustered, for HA). Does that 
make any difference?

tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/1383e000/attachment.htm>

From mklishin at gopivotal.com  Wed Jul  3 16:14:28 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 19:14:28 +0400
Subject: [rabbitmq-discuss] Fwd: Rabbitmq ssl error when trying to connect
References: <1372864090.46655.YahooMailNeo@web141102.mail.bf1.yahoo.com>
Message-ID: <1325346B-A28A-404E-B683-A9E65B9840F5@gopivotal.com>

Luis Rodriguez:
> [
>   {rabbit, [
>      {ssl_listeners, [5671]} ]}
> ].
> my rabbitmq.config has only this. (not concerned about validating clients or servers).
> I read through the troubleshooting guide but couldn't find anything about my error.
> I shouldn't need certificates since I'm not concerned about validation..
> 
> thanks again Michael
> Luis
> 
> 
> 



Forwarding back to the list. Please use "reply all".
--
MK

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/e13ad496/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl.png
Type: image/png
Size: 175459 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/e13ad496/attachment.png>

From mklishin at gopivotal.com  Wed Jul  3 16:19:23 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 19:19:23 +0400
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
In-Reply-To: <1372864090.46655.YahooMailNeo@web141102.mail.bf1.yahoo.com>
References: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<4C6700E4-C44C-4E59-9C20-41FCA74D8D3D@gopivotal.com>
	<1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<4E6A3A50-DF90-4EC1-A2D2-0D682E88F1D3@gopivotal.com>
	<1372864090.46655.YahooMailNeo@web141102.mail.bf1.yahoo.com>
Message-ID: <1A3493C6-5794-404E-8534-788859166DAB@gopivotal.com>

Luis Rodriguez:

> my rabbitmq.config has only this. (not concerned about validating clients or servers).

I can reproduce Alert number 80 with this config file.

I'm not familiar with the Erlang SSL app enough but looks like it does not
assume that you can use SSL without server certificates.

I'd recommend generating a self-signed CA and certificate with a long validity
period and use that.
--
MK


From David.Pravec at nethost.cz  Wed Jul  3 16:43:39 2013
From: David.Pravec at nethost.cz (David Pravec)
Date: Wed, 03 Jul 2013 17:43:39 +0200
Subject: [rabbitmq-discuss] sorting of list of queues for web management
 plugin
In-Reply-To: <51D3EE40.1010305@rabbitmq.com>
References: <51D2F72B.4080003@nethost.cz> <51D3EE40.1010305@rabbitmq.com>
Message-ID: <51D446AB.9080801@nethost.cz>


Thanks,
i am really missing this feature.

- DP

On 3.7.2013 11:26, Simon MacMullen wrote:
> On 02/07/13 16:52, David Pravec wrote:
>> Every time i want to see overview of my almost thousand queues
>> sorted by total number of messages, i need to
>> click 2 times on a 'Total' column name.
>
> Ah, that's not possible I'm afraid. I'll file a bug.
>
> Cheers, Simon
>


From mklishin at gopivotal.com  Wed Jul  3 16:48:16 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 19:48:16 +0400
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
In-Reply-To: <1A3493C6-5794-404E-8534-788859166DAB@gopivotal.com>
References: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<4C6700E4-C44C-4E59-9C20-41FCA74D8D3D@gopivotal.com>
	<1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<4E6A3A50-DF90-4EC1-A2D2-0D682E88F1D3@gopivotal.com>
	<1372864090.46655.YahooMailNeo@web141102.mail.bf1.yahoo.com>
	<1A3493C6-5794-404E-8534-788859166DAB@gopivotal.com>
Message-ID: <A1A18952-54EE-4F0A-943E-11144C156FBE@gopivotal.com>

Michael Klishin:

> I'm not familiar with the Erlang SSL app enough but looks like it does not
> assume that you can use SSL without server certificates.

Luis,

Can you please try running

openssl s_server -nocert

and 

openssl s_client -connect 127.0.0.1:4433

in two different shell tabs on your machine?
This does not work for me with OpenSSL 0.9.8x (May 2012),
suggesting that there is no shared cipher the client and server can use
that requires no keys.

So I assume it may be an OpenSSL limitation, not Erlang SSL app's.

Thanks.
--
MK


From simon at rabbitmq.com  Wed Jul  3 17:09:37 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 03 Jul 2013 17:09:37 +0100
Subject: [rabbitmq-discuss] Shunting messages from one queue to another
In-Reply-To: <51D43F81.6030605@timgroup.com>
References: <51D3FDFD.3090209@timgroup.com> <51D402AE.1000307@rabbitmq.com>
	<51D40C1B.7010704@timgroup.com>
	<CAE3HoVS+CXMO9vnU+XghZ7ExSSuRQLt8u3Uc5ziBMs-4Ztt8XA@mail.gmail.com>
	<51D4131C.6030000@rabbitmq.com> <51D43F81.6030605@timgroup.com>
Message-ID: <51D44CC1.9000907@rabbitmq.com>

On 03/07/13 16:13, Tom Anderson wrote:
>> (although you will not be forming the nodes into a cluster, it still
>> applies).
>
> The broker i am shovelling from and to, which is on the same machine, is
> part of a cluster (we have two brokers clustered, for HA). Does that
> make any difference?

No, it's fine. I just meant "ignore any reference to clustering the 
multiple nodes on the same machine".

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From lrodriguez1995 at yahoo.com  Wed Jul  3 17:21:20 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Wed, 3 Jul 2013 09:21:20 -0700 (PDT)
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
In-Reply-To: <A1A18952-54EE-4F0A-943E-11144C156FBE@gopivotal.com>
References: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<4C6700E4-C44C-4E59-9C20-41FCA74D8D3D@gopivotal.com>
	<1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<4E6A3A50-DF90-4EC1-A2D2-0D682E88F1D3@gopivotal.com>
	<1372864090.46655.YahooMailNeo@web141102.mail.bf1.yahoo.com>
	<1A3493C6-5794-404E-8534-788859166DAB@gopivotal.com>
	<A1A18952-54EE-4F0A-943E-11144C156FBE@gopivotal.com>
Message-ID: <1372868480.69210.YahooMailNeo@web141104.mail.bf1.yahoo.com>

Hi Michael,
This does not work for me either.
I will try creating my own certificate authority to see what happens...
I'm open to any other suggestions.

thanks
?Luis




________________________________
 From: Michael Klishin <mklishin at gopivotal.com>
To: Luis Rodriguez <lrodriguez1995 at yahoo.com> 
Cc: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Wednesday, July 3, 2013 11:48 AM
Subject: Re: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
 

Michael Klishin:

> I'm not familiar with the Erlang SSL app enough but looks like it does not
> assume that you can use SSL without server certificates.

Luis,

Can you please try running

openssl s_server -nocert

and 

openssl s_client -connect 127.0.0.1:4433

in two different shell tabs on your machine?
This does not work for me with OpenSSL 0.9.8x (May 2012),
suggesting that there is no shared cipher the client and server can use
that requires no keys.

So I assume it may be an OpenSSL limitation, not Erlang SSL app's.

Thanks.
--
MK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/b2b84af4/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl2.png
Type: image/png
Size: 97166 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/b2b84af4/attachment.png>

From mklishin at gopivotal.com  Wed Jul  3 17:41:40 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 3 Jul 2013 20:41:40 +0400
Subject: [rabbitmq-discuss] Rabbitmq ssl error when trying to connect
In-Reply-To: <1372868480.69210.YahooMailNeo@web141104.mail.bf1.yahoo.com>
References: <1372857903.41810.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<4C6700E4-C44C-4E59-9C20-41FCA74D8D3D@gopivotal.com>
	<1372859462.91776.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<4E6A3A50-DF90-4EC1-A2D2-0D682E88F1D3@gopivotal.com>
	<1372864090.46655.YahooMailNeo@web141102.mail.bf1.yahoo.com>
	<1A3493C6-5794-404E-8534-788859166DAB@gopivotal.com>
	<A1A18952-54EE-4F0A-943E-11144C156FBE@gopivotal.com>
	<1372868480.69210.YahooMailNeo@web141104.mail.bf1.yahoo.com>
Message-ID: <21262F4D-2696-4729-8ACB-EBE7F30FBAD5@gopivotal.com>

Luis Rodriguez:

> I will try creating my own certificate authority to see what happens...
> I'm open to any other suggestions.

Generating certificates with tls-gen [1] and using this rabbitmq.config
example:

https://gist.github.com/michaelklishin/af7c857e091879a76e1a

should be enough as a starting point. Don't forget to restart RabbitMQ.

1. https://github.com/ruby-amqp/tls-gen

--
MK


From alan.antonuk at gmail.com  Wed Jul  3 18:22:56 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 3 Jul 2013 10:22:56 -0700
Subject: [rabbitmq-discuss] rabbitmq-c should I start a thread for
 amqp_simple_wait_frame() to get mesage?
In-Reply-To: <1372834007341-27764.post@n5.nabble.com>
References: <1372388338889-27666.post@n5.nabble.com>
	<CAAt2po+r76=haqsCsfy1NFR1PLA2gLqZ9qteormgB2hno=g=hA@mail.gmail.com>
	<1372643154087-27699.post@n5.nabble.com>
	<CAAt2po+MtxT6JS3eJBF9fK1E9+C75xFxBfCJ_Khj4EN6s0rZ0Q@mail.gmail.com>
	<1372732726822-27729.post@n5.nabble.com>
	<CAAt2po+DWdVDFaGom8fUVYXf=sCo4jti8rtHhGgLV_bV0ohMqA@mail.gmail.com>
	<1372816814705-27756.post@n5.nabble.com>
	<CAAt2po+iTh+w40j6Ko-ERF6nrYJgsnw5Cc_mDknujyuVwfnt9w@mail.gmail.com>
	<1372823518409-27760.post@n5.nabble.com>
	<CAAt2poK8BgMdYxv05Ob5fKuQ-FfMtXXFZu2K_M2nRYGmLuDjDw@mail.gmail.com>
	<1372834007341-27764.post@n5.nabble.com>
Message-ID: <CAAt2po+qZxCZ+59P69qdjtaFseaAaec+K_5dzSkKd9GKUJ6uAw@mail.gmail.com>

You need to use a lock of some sort.  A mutex will work in this case.


On Tue, Jul 2, 2013 at 11:46 PM, 3k4b251 <314992959 at qq.com> wrote:

> thank you so much !    I  think  I  already  read  this  :
>
> http://comments.gmane.org/gmane.comp.networking.rabbitmq.general/14140
>
>
> and  I   put  the  codes   in  my  program?  I  think  I  can  use
> amqp_simple_wait_frame()  and   amqp_basic_consume()  in  diffrent
>  threads.
> But  I  still  can not  use  them  in  same time.   what  can  I  do   to
> keep  amqp_simple_wait_frame()  and  amqp_basic_consume()  not  to  be used
> same time  in diffrent  threads?
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-should-I-start-a-thread-for-amqp-simple-wait-frame-to-get-mesage-tp27666p27764.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/2f2250fd/attachment.htm>

From james.lewis at 7digital.com  Wed Jul  3 12:18:52 2013
From: james.lewis at 7digital.com (James Lewis)
Date: Wed, 3 Jul 2013 04:18:52 -0700 (PDT)
Subject: [rabbitmq-discuss] Instable HA cluster
In-Reply-To: <876324c5-235e-4395-99d9-2aeabd04ef6c@googlegroups.com>
References: <876324c5-235e-4395-99d9-2aeabd04ef6c@googlegroups.com>
Message-ID: <f6f1a04c-82db-43c6-9d9d-da343f90c075@googlegroups.com>

Hi, did you have any luck with this?  I'm just setting up a rabbit cluster 
for my team and I'm running into exactly the same problem.  What worries me 
is that the docs on clustering say that the network connection between 
nodes *must* be reliable - I was hoping that a 3 node cluster would 
continue running if the connection between 2 nodes dropped and then allow 
the dropped node to join back into the cluster when the connection came 
back up...?

Any help appreciated,
James



On Friday, January 25, 2013 9:52:30 AM UTC, Ben West wrote:
>
> Hi,
>
>
> I've been having lots of instability problems with a rabbit cluster I have 
> set up.
> Since deploying Rabbit MQ a few months ago we have experienced ongoing 
> instability with the service.
>
> Our setup:
>
>
>    - RabbitMQ 3.0.1 running on Windows Azure VMs (Server 2012)
>    - We have 2 VMs set up with a rabbit running on each and clustered 
>    (with a HA policy), both running as disk nodes
>    - Using EasyNetQ for producers consumers
>
>
> When I first set up the cluster everything seems to be running well and 
> can see through the Rabbit console the HA mirroring is all set up.
>
> However after a couple of days I will log into the console and find the 
> cluster is broken, usually with one node saying "Node not running" and a 
> number of the consumers have dropped off the queues. I then have to tear 
> down the cluster and build it all up again - not a massive job, but I'm 
> sure i shouldn't need to do this every week!
>
> At first I thought it may be due to Windows updates automatically 
> restarting the server and possibly breaking the cluster, but have now 
> turned these off and still get the same problem. I have also tried 
> rebooting the servers one at a time to test this but the cluster seems to 
> pick itself back up once the reboot has finished.
>
> I've done lots of reading online but cant seem to find too many 
> suggestions so I hope someone here may be able to help.
>
> I'm more thank happy to provide logs if these may be useful?
>
> Any help will be grately appreciated!
>
> Thanks,
>
> Ben
>
>  <http://www.mopowered.co.uk>
>

-- 
--
This email, including attachments, is private and confidential. If you have
received this email in error please notify the sender and delete it from
your system. Emails are not secure and may contain viruses. No liability
can be accepted for viruses that might be transferred by this email or any
attachment. Any unauthorised copying of this message or unauthorised
distribution and publication of the information contained herein are
prohibited. 7digital Limited. Registered office: 69 Wilson Street, London 
EC2A 2BB. Registered in
England and Wales. Registered No. 04843573.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/09230ae6/attachment.htm>

From james.lewis at 7digital.com  Wed Jul  3 12:18:52 2013
From: james.lewis at 7digital.com (James Lewis)
Date: Wed, 3 Jul 2013 04:18:52 -0700 (PDT)
Subject: [rabbitmq-discuss] Instable HA cluster
In-Reply-To: <876324c5-235e-4395-99d9-2aeabd04ef6c@googlegroups.com>
References: <876324c5-235e-4395-99d9-2aeabd04ef6c@googlegroups.com>
Message-ID: <f6f1a04c-82db-43c6-9d9d-da343f90c075@googlegroups.com>

Hi, did you have any luck with this?  I'm just setting up a rabbit cluster 
for my team and I'm running into exactly the same problem.  What worries me 
is that the docs on clustering say that the network connection between 
nodes *must* be reliable - I was hoping that a 3 node cluster would 
continue running if the connection between 2 nodes dropped and then allow 
the dropped node to join back into the cluster when the connection came 
back up...?

Any help appreciated,
James



On Friday, January 25, 2013 9:52:30 AM UTC, Ben West wrote:
>
> Hi,
>
>
> I've been having lots of instability problems with a rabbit cluster I have 
> set up.
> Since deploying Rabbit MQ a few months ago we have experienced ongoing 
> instability with the service.
>
> Our setup:
>
>
>    - RabbitMQ 3.0.1 running on Windows Azure VMs (Server 2012)
>    - We have 2 VMs set up with a rabbit running on each and clustered 
>    (with a HA policy), both running as disk nodes
>    - Using EasyNetQ for producers consumers
>
>
> When I first set up the cluster everything seems to be running well and 
> can see through the Rabbit console the HA mirroring is all set up.
>
> However after a couple of days I will log into the console and find the 
> cluster is broken, usually with one node saying "Node not running" and a 
> number of the consumers have dropped off the queues. I then have to tear 
> down the cluster and build it all up again - not a massive job, but I'm 
> sure i shouldn't need to do this every week!
>
> At first I thought it may be due to Windows updates automatically 
> restarting the server and possibly breaking the cluster, but have now 
> turned these off and still get the same problem. I have also tried 
> rebooting the servers one at a time to test this but the cluster seems to 
> pick itself back up once the reboot has finished.
>
> I've done lots of reading online but cant seem to find too many 
> suggestions so I hope someone here may be able to help.
>
> I'm more thank happy to provide logs if these may be useful?
>
> Any help will be grately appreciated!
>
> Thanks,
>
> Ben
>
>  <http://www.mopowered.co.uk>
>

-- 
--
This email, including attachments, is private and confidential. If you have
received this email in error please notify the sender and delete it from
your system. Emails are not secure and may contain viruses. No liability
can be accepted for viruses that might be transferred by this email or any
attachment. Any unauthorised copying of this message or unauthorised
distribution and publication of the information contained herein are
prohibited. 7digital Limited. Registered office: 69 Wilson Street, London 
EC2A 2BB. Registered in
England and Wales. Registered No. 04843573.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/09230ae6/attachment-0001.htm>

From james.lewis at 7digital.com  Wed Jul  3 17:55:26 2013
From: james.lewis at 7digital.com (James Lewis)
Date: Wed, 3 Jul 2013 09:55:26 -0700 (PDT)
Subject: [rabbitmq-discuss] Instable HA cluster
In-Reply-To: <f6f1a04c-82db-43c6-9d9d-da343f90c075@googlegroups.com>
References: <876324c5-235e-4395-99d9-2aeabd04ef6c@googlegroups.com>
	<f6f1a04c-82db-43c6-9d9d-da343f90c075@googlegroups.com>
Message-ID: <9223033b-f80a-466c-a5af-6ee04226bef6@googlegroups.com>

 Whoops, answered my own question, I'm using cfengine for configuration 
management and I'd done something funny to one of my nodes that triggered 
some infinite loop in cfeninge where it kept trying to reinstall erlang 
which was triggering the rabbit node to restart.  It was my mistake and 
it's all fixed now.
-- 
--
This email, including attachments, is private and confidential. If you have
received this email in error please notify the sender and delete it from
your system. Emails are not secure and may contain viruses. No liability
can be accepted for viruses that might be transferred by this email or any
attachment. Any unauthorised copying of this message or unauthorised
distribution and publication of the information contained herein are
prohibited. 7digital Limited. Registered office: 69 Wilson Street, London 
EC2A 2BB. Registered in
England and Wales. Registered No. 04843573.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/d8a3590c/attachment.htm>

From james.lewis at 7digital.com  Wed Jul  3 17:55:26 2013
From: james.lewis at 7digital.com (James Lewis)
Date: Wed, 3 Jul 2013 09:55:26 -0700 (PDT)
Subject: [rabbitmq-discuss] Instable HA cluster
In-Reply-To: <f6f1a04c-82db-43c6-9d9d-da343f90c075@googlegroups.com>
References: <876324c5-235e-4395-99d9-2aeabd04ef6c@googlegroups.com>
	<f6f1a04c-82db-43c6-9d9d-da343f90c075@googlegroups.com>
Message-ID: <9223033b-f80a-466c-a5af-6ee04226bef6@googlegroups.com>

 Whoops, answered my own question, I'm using cfengine for configuration 
management and I'd done something funny to one of my nodes that triggered 
some infinite loop in cfeninge where it kept trying to reinstall erlang 
which was triggering the rabbit node to restart.  It was my mistake and 
it's all fixed now.
-- 
--
This email, including attachments, is private and confidential. If you have
received this email in error please notify the sender and delete it from
your system. Emails are not secure and may contain viruses. No liability
can be accepted for viruses that might be transferred by this email or any
attachment. Any unauthorised copying of this message or unauthorised
distribution and publication of the information contained herein are
prohibited. 7digital Limited. Registered office: 69 Wilson Street, London 
EC2A 2BB. Registered in
England and Wales. Registered No. 04843573.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/d8a3590c/attachment-0001.htm>

From james.lewis at 7digital.com  Wed Jul  3 18:12:48 2013
From: james.lewis at 7digital.com (James Lewis)
Date: Wed, 3 Jul 2013 10:12:48 -0700 (PDT)
Subject: [rabbitmq-discuss] Mirrored queues behind a load balancer
In-Reply-To: <49b335bf-8c06-4d5e-8a33-070ea2df984a@googlegroups.com>
References: <49b335bf-8c06-4d5e-8a33-070ea2df984a@googlegroups.com>
Message-ID: <c3ae4e5c-ab4c-4c36-921f-b0d639c2318c@googlegroups.com>

Hi Girish, just a disclaimer: I'm no expert and I'm only just going through 
the motions of setting up a HA cluster myself.  However, I think I can 
answer a couple of your questions.

1.

> Likewise, if I manually create a queue on one node, it immediately shows 
> up on the other node as well. 
>

Not unless you specifically set the queue to be mirrored.   You could 
create a policy that matches queues using a regex (so queues starting with 
a prefix of your choice for example) and once that policy is in place, then 
any queue you declare that starts with that prefix will be mirrored across 
your cluster (assuming you've set your policy to ha-all).  So basically, 
once you've setup a cluster in rabbitmq you haven't setup mirroring.  
You've set up a logical cluster (collection) of nodes running rabbitmq that 
all know about each other.  To implement mirroring you then need to create 
the policy.

2. 

> Would that work? Is that the recommended approach?


The clustering guide says yes that approach will work.  However the 
mirrored queue guide talks about master - slave replication which makes me 
think of setting the load balancer up to fail over to a slave in the case 
of a master failure rather than to round-robin the requests to all nodes in 
the cluster...  I'd appreciate it if someone could confirm this.

Hopefully some of that is of use to you!  

Cheers,
James

-- 
--
This email, including attachments, is private and confidential. If you have
received this email in error please notify the sender and delete it from
your system. Emails are not secure and may contain viruses. No liability
can be accepted for viruses that might be transferred by this email or any
attachment. Any unauthorised copying of this message or unauthorised
distribution and publication of the information contained herein are
prohibited. 7digital Limited. Registered office: 69 Wilson Street, London 
EC2A 2BB. Registered in
England and Wales. Registered No. 04843573.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/968fcf99/attachment.htm>

From james.lewis at 7digital.com  Wed Jul  3 18:12:48 2013
From: james.lewis at 7digital.com (James Lewis)
Date: Wed, 3 Jul 2013 10:12:48 -0700 (PDT)
Subject: [rabbitmq-discuss] Mirrored queues behind a load balancer
In-Reply-To: <49b335bf-8c06-4d5e-8a33-070ea2df984a@googlegroups.com>
References: <49b335bf-8c06-4d5e-8a33-070ea2df984a@googlegroups.com>
Message-ID: <c3ae4e5c-ab4c-4c36-921f-b0d639c2318c@googlegroups.com>

Hi Girish, just a disclaimer: I'm no expert and I'm only just going through 
the motions of setting up a HA cluster myself.  However, I think I can 
answer a couple of your questions.

1.

> Likewise, if I manually create a queue on one node, it immediately shows 
> up on the other node as well. 
>

Not unless you specifically set the queue to be mirrored.   You could 
create a policy that matches queues using a regex (so queues starting with 
a prefix of your choice for example) and once that policy is in place, then 
any queue you declare that starts with that prefix will be mirrored across 
your cluster (assuming you've set your policy to ha-all).  So basically, 
once you've setup a cluster in rabbitmq you haven't setup mirroring.  
You've set up a logical cluster (collection) of nodes running rabbitmq that 
all know about each other.  To implement mirroring you then need to create 
the policy.

2. 

> Would that work? Is that the recommended approach?


The clustering guide says yes that approach will work.  However the 
mirrored queue guide talks about master - slave replication which makes me 
think of setting the load balancer up to fail over to a slave in the case 
of a master failure rather than to round-robin the requests to all nodes in 
the cluster...  I'd appreciate it if someone could confirm this.

Hopefully some of that is of use to you!  

Cheers,
James

-- 
--
This email, including attachments, is private and confidential. If you have
received this email in error please notify the sender and delete it from
your system. Emails are not secure and may contain viruses. No liability
can be accepted for viruses that might be transferred by this email or any
attachment. Any unauthorised copying of this message or unauthorised
distribution and publication of the information contained herein are
prohibited. 7digital Limited. Registered office: 69 Wilson Street, London 
EC2A 2BB. Registered in
England and Wales. Registered No. 04843573.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/968fcf99/attachment-0001.htm>

From john.turner at thoughtforge.net  Wed Jul  3 11:57:39 2013
From: john.turner at thoughtforge.net (John Turner)
Date: Wed, 3 Jul 2013 03:57:39 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
Message-ID: <083be004-f514-46a8-a643-469d77ee387a@googlegroups.com>

Hi All,

I'm very familiar with JMS and have used the GroupID extension to provide 
processing affinity to a single consumer.  For further information on how 
this works see this ActiveMQ 
documentation: http://activemq.apache.org/message-groups.html

This solves the following requirement:

* Messages are distributed to a queue with a GroupID header.
* The broker guarantees that messages with a specific GroupID (say '1234') 
will only be processed by a single consumer.
* If the consumer fails (i.e. the connection is broken or closed), the 
broker will allow another consumer to process messages with that GroupID

Using RabbitMQ and the Consistent Hashing Plugin does not not appear to 
solve the problem because if we are using static (durable) queues, the 
consumer failover mechanism needs to be implemented outside the server. 
 Does anyone have any insight into this problem they could share?

An alternative would be to extend the queue to ensure apply the same 
consistent hashing mechanism to the actual queue rather than the broker. 
 Does anyone know if it si possible to extend the queue implementation? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/6cbfc61c/attachment.htm>

From lrodriguez1995 at yahoo.com  Wed Jul  3 19:41:07 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Wed, 3 Jul 2013 11:41:07 -0700 (PDT)
Subject: [rabbitmq-discuss] openssl -out issue when trying to generate key
	and certificates
Message-ID: <1372876867.42553.YahooMailNeo@web141105.mail.bf1.yahoo.com>

Hi all,
I have a single node rabbitmq-server installed running erlang R14b (host only network, no firewall).
trying to follow the tutorial on ssl. 

My goal is to use SSL encryption (not concerned about client and server validation) but apparently there is no shared cipher the client and server can use that requires no keys, so I am trying to setup my certificate authority.

my pic shows an "unknown option -out" when I try to use the tutorial code below:


trying to generate the key and certificates that our test?Certificate Authority?will use.
# openssl req -x509 -config openssl.cnf -newkey rsa:2048 -days 365 \ -out cacert.pem -outform PEM -subj /CN=MyTestCA/ -nodes
# openssl x509 -in cacert.pem -out cacert.cer -outform DER



Am I missing something or doing something wrong?
thanks in advance

Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/b98efe55/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl3.png
Type: image/png
Size: 65795 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/b98efe55/attachment.png>

From alan.antonuk at gmail.com  Wed Jul  3 20:21:33 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 3 Jul 2013 12:21:33 -0700
Subject: [rabbitmq-discuss] Python Embeddeding to achive Heart-beat.
In-Reply-To: <27E054594442884E9A46DBCF9AE7408160C498@BSDMSATMBX001.mahindrasatyam.ad>
References: <27E054594442884E9A46DBCF9AE7408160C498@BSDMSATMBX001.mahindrasatyam.ad>
Message-ID: <CAAt2poKH-Pv0aAgnOatkYpkf9bU0NnK7_x0BaRoBWy8zFdMExA@mail.gmail.com>

While technically feasible, this is something you probably do not want to
do.


On Tue, Jul 2, 2013 at 11:03 PM, Rohit_Patle <Rohit_Patle at mahindrasatyam.com
> wrote:

>  Hi,
>
> I am new to ampq rabbitmq implementation. currently I am using rabbitmq-c
> for development, but I like to have heart beat future in my implementation.
> I would like to know where I can achieve heart beat by embedding python to
> my rabbitmq-c code??
>
> Thanks in advance.
>
> Thanks & Regards,
> Rohit
>
> ------------------------------
>
> DISCLAIMER:
> This email (including any attachments) is intended for the sole use of the
> intended recipient/s and may contain material that is CONFIDENTIAL AND
> PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or
> distribution or forwarding of any or all of the contents in this message is
> STRICTLY PROHIBITED. If you are not the intended recipient, please contact
> the sender by email and delete all copies; your cooperation in this regard
> is appreciated.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/7afb5e7c/attachment.htm>

From watson.timothy at gmail.com  Wed Jul  3 21:24:26 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Wed, 3 Jul 2013 21:24:26 +0100
Subject: [rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
In-Reply-To: <083be004-f514-46a8-a643-469d77ee387a@googlegroups.com>
References: <083be004-f514-46a8-a643-469d77ee387a@googlegroups.com>
Message-ID: <21060172-43BB-41AB-A6F6-3B97CA4D46FF@rabbitmq.com>

We've got an open bug to provide a 'message groups' feature like this and are hoping to get it ready for a feature release ASAP.

Just out of interest, for your use-case, how would you expect failover to work. Do you want all future messages delivered to another random consumer? What about un-acked messages that were already delivered - we plan on redelivering these - and how do you plan on explicitly terminating a group? Would a special message (or header) given by the producer suit that purpose? What about consumers that don't disconnect but indicate they'd like to stop processing that group of messages? Do you have consumers that want to recieve more than one group in parallel? And what about producers that go away - do you close the group when they disconnect or keep it open indefinitely, or use a timeout?

None of those things are very clear to me from the activemq docs, so hearing from a real world user would be nice! :)

Cheers,
Tim

On 3 Jul 2013, at 11:57, John Turner <john.turner at thoughtforge.net> wrote:

> Hi All,
> 
> I'm very familiar with JMS and have used the GroupID extension to provide processing affinity to a single consumer.  For further information on how this works see this ActiveMQ documentation: http://activemq.apache.org/message-groups.html
> 
> This solves the following requirement:
> 
> * Messages are distributed to a queue with a GroupID header.
> * The broker guarantees that messages with a specific GroupID (say '1234') will only be processed by a single consumer.
> * If the consumer fails (i.e. the connection is broken or closed), the broker will allow another consumer to process messages with that GroupID
> 
> Using RabbitMQ and the Consistent Hashing Plugin does not not appear to solve the problem because if we are using static (durable) queues, the consumer failover mechanism needs to be implemented outside the server.  Does anyone have any insight into this problem they could share?
> 
> An alternative would be to extend the queue to ensure apply the same consistent hashing mechanism to the actual queue rather than the broker.  Does anyone know if it si possible to extend the queue implementation? 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From x050516 at gmail.com  Thu Jul  4 00:05:38 2013
From: x050516 at gmail.com (BK)
Date: Wed, 3 Jul 2013 16:05:38 -0700 (PDT)
Subject: [rabbitmq-discuss] UNC path not working
Message-ID: <1372892737853-27815.post@n5.nabble.com>

If the UNC Path to the environment variables RABBITMQ_BASE = \\ABC\DEF and
RABBITMQ_CONFIG_FILE = \\ABC\DEF\RabbitMQ does not work. A local path works
fine. The destination has all the rights for the user under which the
service starts. 

Error from erl_crash dump :

Slogan: could not start kernel pid (application_controller) (error in config
file "/ABC/DEF/RabbitMQ.config" (none): configuration file not found)


What am I doing wrong ?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/UNC-path-not-working-tp27815.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From jkuch at gopivotal.com  Thu Jul  4 00:19:08 2013
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Wed, 3 Jul 2013 16:19:08 -0700
Subject: [rabbitmq-discuss] UNC path not working
In-Reply-To: <1372892737853-27815.post@n5.nabble.com>
References: <1372892737853-27815.post@n5.nabble.com>
Message-ID: <CANOx8NnOCy5nNRrdq=i7pFzJsvQzL70NefaT_DMRV_Ce=nR5Bg@mail.gmail.com>

Heaven only knows.  It looks like Erlang's re-rationalizing platform
specific path separators and your double backslash UNC root is turning into
a single forward slash.  I can imagine a number of ways this might happen,
although it's not clear which is happening here or what best to do about it.

Can you associate that UNC path with a drive letter and trying something of
the form Z:\WAWA\FOOFOO and see if it doesn't retch on that?  It's possible
the double backslash is being seen as an attempt to escape a single literal
backslash which then turns into the forward slash, although that's neither
here nor there...

On Wed, Jul 3, 2013 at 4:05 PM, BK <x050516 at gmail.com> wrote:

> If the UNC Path to the environment variables RABBITMQ_BASE = \\ABC\DEF and
> RABBITMQ_CONFIG_FILE = \\ABC\DEF\RabbitMQ does not work. A local path works
> fine. The destination has all the rights for the user under which the
> service starts.
>
> Error from erl_crash dump :
>
> Slogan: could not start kernel pid (application_controller) (error in
> config
> file "/ABC/DEF/RabbitMQ.config" (none): configuration file not found)
>
>
> What am I doing wrong ?
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/UNC-path-not-working-tp27815.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/e919a5c5/attachment.htm>

From tao at taggle.com.au  Thu Jul  4 00:45:35 2013
From: tao at taggle.com.au (Tao Fan)
Date: Thu, 4 Jul 2013 09:45:35 +1000
Subject: [rabbitmq-discuss] rabbitmq and long vm.dirty_writeback_centisecs
Message-ID: <CAFPGKwABAfdCjYTDz3vdHhabw3WoEO8YYAdNi24m-rc6H_u2sA@mail.gmail.com>

Hi all,

I have ubuntu boxes which, for disk life consideration, I have set the
vm.dirty_writeback_centisecs from 5sec to 30min. However, when the boxes
have power outage and restored, rabbitmq refused to start up, giving error
message in log: mnesia_recover crashed.

I had to delete schema.DAT under mnesia directory before I can start it
again but then all my stored messages in persistent queues are lost.

If I do disk sync every minute or two, there is no such issue - rabbitmq
can survive every power cycle. I like to understand how rabbitmq works to
survive power cycle and if it is possible to tune it to survive with longer
sync time without losing any stored messages in queue.

My system:
Ubuntu 10.04.4 with kernel 2.6.32-24-generic-pae
rabbitmq-server 3.1.1 installed from rabbitmq.com/debian testing main
repository.
erlang R13B03 (erts-5.7.4)

Thanks in advance.

--
Tao Fan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/195d6053/attachment.htm>

From haster2004 at yandex.ru  Thu Jul  4 06:48:54 2013
From: haster2004 at yandex.ru (Haster)
Date: Wed, 3 Jul 2013 22:48:54 -0700 (PDT)
Subject: [rabbitmq-discuss] Can server use multiple ack in confirm mode
	with mandatory bit
In-Reply-To: <51D4372A.10408@rabbitmq.com>
References: <1372858042902-27787.post@n5.nabble.com>
	<51D43154.8050508@rabbitmq.com>
	<1372861829104-27793.post@n5.nabble.com>
	<51D4372A.10408@rabbitmq.com>
Message-ID: <1372916934678-27818.post@n5.nabble.com>

Simon, thanks a lot for your support!



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Can-server-use-multiple-ack-in-confirm-mode-with-mandatory-bit-tp27787p27818.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From jacob at mover.io  Wed Jul  3 23:31:47 2013
From: jacob at mover.io (Jacob Straszynski)
Date: Wed, 3 Jul 2013 15:31:47 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ Crash
Message-ID: <1b3ed206-6b44-40a7-89c0-a5ef789da21c@googlegroups.com>

These seem to happen intermittently. About to put a system into productiion 
so it's somewhat scary.

There is nothing in shutdown.err.

Version info:

+---+   +---+
|   |   |   |
|   |   |   |
|   |   |   |
|   +---+   +-------+
|                   |
| RabbitMQ  +---+   |
|           |   |   |
|   v3.0.4  +---+   |
|                   |
+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2013 VMware, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

node           : rabbit at devbox
app descriptor : 
/usr/lib/rabbitmq/lib/rabbitmq_server-3.0.4/sbin/../ebin/rabbit.app
home dir       : /var/lib/rabbitmq
config file(s) : /etc/rabbitmq/rabbitmq.config
cookie hash    : fCNC8VwSUB7Sp3kOGod/FQ==
log            : /var/log/rabbitmq/rabbit at devbox.log
sasl log       : /var/log/rabbitmq/rabbit at devbox-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at devbox
erlang version : 5.8.5


This is the sasl log:

=CRASH REPORT==== 3-Jul-2013::21:18:25 ===
  crasher:
    initial call: rabbit_disk_monitor:init/1
    pid: <0.173.0>
    registered_name: rabbit_disk_monitor
    exception exit: {{badmatch,[]},
                     [{rabbit_disk_monitor,parse_free_unix,1},
                      {rabbit_disk_monitor,handle_call,3},
                      {gen_server,handle_msg,5},
                      {proc_lib,init_p_do_apply,3}]}
      in function  gen_server:terminate/6
    ancestors: [rabbit_disk_monitor_sup,rabbit_sup,<0.150.0>]
    messages: [update]
    links: [<0.82.0>,<0.172.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 2584
    stack_size: 24
    reductions: 2934764
  neighbours:

=SUPERVISOR REPORT==== 3-Jul-2013::21:18:25 ===
     Supervisor: {local,rabbit_disk_monitor_sup}
     Context:    child_terminated
     Reason:     {{badmatch,[]},
                  [{rabbit_disk_monitor,parse_free_unix,1},
                   {rabbit_disk_monitor,handle_call,3},
                   {gen_server,handle_msg,5},
                   {proc_lib,init_p_do_apply,3}]}
     Offender:   [{pid,<0.173.0>},
                  {name,rabbit_disk_monitor},
                  {mfargs,{rabbit_disk_monitor,start_link,[1000000000]}},
                  {restart_type,transient},
                  {shutdown,4294967295},
                  {child_type,worker}]


=CRASH REPORT==== 3-Jul-2013::21:18:25 ===
  crasher:
    initial call: rabbit_mgmt_external_stats:init/1
    pid: <0.228.0>
    registered_name: rabbit_mgmt_external_stats
    exception exit: {{{badmatch,[]},
                      [{rabbit_disk_monitor,parse_free_unix,1},
                       {rabbit_disk_monitor,handle_call,3},
                       {gen_server,handle_msg,5},
                       {proc_lib,init_p_do_apply,3}]},
                     {gen_server,call,
                                 [rabbit_disk_monitor,get_disk_free,
                                  infinity]}}
      in function  gen_server:terminate/6
    ancestors: [rabbit_mgmt_agent_sup,<0.226.0>]
    messages: []
    links: [<0.227.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 4181
    stack_size: 24
    reductions: 2306331
  neighbours:

=SUPERVISOR REPORT==== 3-Jul-2013::21:18:25 ===
     Supervisor: {local,rabbit_mgmt_agent_sup}
     Context:    child_terminated
     Reason:     {{{badmatch,[]},
                   [{rabbit_disk_monitor,parse_free_unix,1},
                    {rabbit_disk_monitor,handle_call,3},
                    {gen_server,handle_msg,5},
                    {proc_lib,init_p_do_apply,3}]},
                  {gen_server,call,
                              [rabbit_disk_monitor,get_disk_free,infinity]}}
     Offender:   [{pid,<0.228.0>},
                  {name,rabbit_mgmt_external_stats},
                  {mfargs,{rabbit_mgmt_external_stats,start_link,[]}},
                  {restart_type,permanent},
                  {shutdown,5000},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 3-Jul-2013::21:27:38 ===
     Supervisor: {<0.17763.0>,rabbit_channel_sup_sup}
     Context:    shutdown_error
     Reason:     noproc
     Offender:   [{pid,<0.17765.0>},
                  {name,channel_sup},
                  {mfa,{rabbit_channel_sup,start_link,[]}},
                  {restart_type,temporary},
                  {shutdown,infinity},
                  {child_type,supervisor}]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/9b53dea3/attachment.htm>

From kilroytrout at gmail.com  Thu Jul  4 01:56:57 2013
From: kilroytrout at gmail.com (Jeff Anderson)
Date: Wed, 3 Jul 2013 17:56:57 -0700 (PDT)
Subject: [rabbitmq-discuss] Can't connect to STOMP
Message-ID: <dbc6ac7b-b15e-4a23-aaa1-b1916e9207e2@googlegroups.com>

I'm trying to access RabbitMQ Stomp with the latest 3.1.3 release. I'm 
using the default guest/guest and trying to connect to localhost. I've 
verified guest has all rights on the default virtual host ("/") in 
rabbitmq. I'm getting this error:

CONNECT
accept-version:1.0,1.1
passcode:guest
heart-beat:10000,30000
client-id:ID:CJANDERSON-LT-11309-635084707237720849-0:0
login:guest
host:localhost

.ERROR
message:Bad CONNECT
content-type:text/plain
version:1.0,1.1,1.2
content-length:39

Virtual host 'localhost' access denied.

----------------------------------------------------------


From kiraneha at gmail.com  Thu Jul  4 07:18:58 2013
From: kiraneha at gmail.com (kiraneha at gmail.com)
Date: Wed, 3 Jul 2013 23:18:58 -0700 (PDT)
Subject: [rabbitmq-discuss] Modify the rabbitmq management URL
Message-ID: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>

How can i change the rabbitmq management url from *http://localhost:55672/*to 
*http://localhost:55672/testNeha* in windows and linux platform?? 

Please help......
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130703/78af2f2d/attachment.htm>

From michael.justin at gmx.net  Thu Jul  4 09:03:49 2013
From: michael.justin at gmx.net (Michael Justin)
Date: Thu, 04 Jul 2013 10:03:49 +0200
Subject: [rabbitmq-discuss] Can't connect to STOMP
In-Reply-To: <dbc6ac7b-b15e-4a23-aaa1-b1916e9207e2@googlegroups.com>
References: <dbc6ac7b-b15e-4a23-aaa1-b1916e9207e2@googlegroups.com>
Message-ID: <kr3a92$5di$1@ger.gmane.org>

Am 04.07.2013 02:56, Jeff Anderson wrote:
> I'm trying to access RabbitMQ Stomp with the latest 3.1.3 release. I'm
> using the default guest/guest and trying to connect to localhost. I've
> verified guest has all rights on the default virtual host ("/") in
> rabbitmq. I'm getting this error:
>
> CONNECT
> accept-version:1.0,1.1
> passcode:guest
> heart-beat:10000,30000
> client-id:ID:CJANDERSON-LT-11309-635084707237720849-0:0
> login:guest
> host:localhost
>
> .ERROR
> message:Bad CONNECT
> content-type:text/plain
> version:1.0,1.1,1.2
> content-length:39
>
> Virtual host 'localhost' access denied.
>

With RabbitMQ default installation there is a virtual host "/" defined 
so this should work:

CONNECT
accept-version:1.0,1.1
passcode:guest
heart-beat:10000,30000
client-id:ID:CJANDERSON-LT-11309-635084707237720849-0:0
login:guest
host:/

iirc a vhost "localhost" first has to be configured in RabbitMQ to be 
available

Hope this helps
-- 
Michael Justin


From Tobias.Gutzmann at ist.com  Thu Jul  4 09:04:33 2013
From: Tobias.Gutzmann at ist.com (Tobias Gutzmann)
Date: Thu, 4 Jul 2013 08:04:33 +0000
Subject: [rabbitmq-discuss] publisher confirm ack nack ordering
Message-ID: <3CE1D10F927704449D41EF6BCB35373D3DEFCD@hermes>

Hi,

(this message is intended as a reply to https://groups.google.com/forum/#!searchin/rabbitmq-discuss/publisher$20ack$20order/rabbitmq-discuss/0O8Dick9xGA/7mGy8ebV1gUJ )

Assuming that a few messages succeed in order, I sometimes see the ACKs like this (RabbitMQ 3.1.1):
ACK(5, true)
ACK(1, false) -- surely sent first by the broker, but lagged a bit longer on the wire

No problem here, I can handle that, though message 1 appears to be ACKed twice, and documentation says "After a channel is put into confirm mode, all subsequently published messages will be confirmed or nack'd once." which should probably read as "at least once".

Now the problem, which I haven't observed as it should be extremely rare but which still is possible:
ACK (5, true)
NACK (1, false) -- sent first by broker but received last.

Since the client may have already acted upon the ACK, there's a problem here. Or did I miss something?

Regards,
Tobias

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/f778369b/attachment.htm>

From tim at rabbitmq.com  Thu Jul  4 09:27:30 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Thu, 4 Jul 2013 09:27:30 +0100
Subject: [rabbitmq-discuss] Modify the rabbitmq management URL
In-Reply-To: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>
References: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>
Message-ID: <49B69522-AC30-4E76-9AAB-A2853DBC5788@rabbitmq.com>

On 4 Jul 2013, at 07:18, kiraneha at gmail.com wrote:

> How can i change the rabbitmq management url from http://localhost:55672/ to http://localhost:55672/testNeha in windows and linux platform?? 
> 

You could a proxy in front of it and then route http://localhost/testNeha to http://localhost:55672 if you like.

Cheers,
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/38df93b4/attachment.htm>

From matthias at rabbitmq.com  Thu Jul  4 09:33:34 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 04 Jul 2013 09:33:34 +0100
Subject: [rabbitmq-discuss] RabbitMQ Crash
In-Reply-To: <1b3ed206-6b44-40a7-89c0-a5ef789da21c@googlegroups.com>
References: <1b3ed206-6b44-40a7-89c0-a5ef789da21c@googlegroups.com>
Message-ID: <51D5335E.3040108@rabbitmq.com>

Jacob,

On 03/07/13 23:31, Jacob Straszynski wrote:
> =CRASH REPORT==== 3-Jul-2013::21:18:25 ===
>    crasher:
>      initial call: rabbit_disk_monitor:init/1
>      pid: <0.173.0>
>      registered_name: rabbit_disk_monitor
>      exception exit: {{badmatch,[]},
>                       [{rabbit_disk_monitor,parse_free_unix,1},
>                        {rabbit_disk_monitor,handle_call,3},
>                        {gen_server,handle_msg,5},
>                        {proc_lib,init_p_do_apply,3}]}
>        in function  gen_server:terminate/6
>      ancestors: [rabbit_disk_monitor_sup,rabbit_sup,<0.150.0>]
>      messages: [update]

We've seen this error before on systems that either had an ancient or 
broken Erlang installation (e.g. a newer installation had been copied 
over an old one), and/or where tests were run that used up all file 
descriptors.

Does any of that ring a bell?

In any case I suggest you

1) eradicate your Erlang installation (which is R14B04 and pretty old) 
completely

2) install the most recent Erlang release (R16B01). There have been 
fixes around port/fd usage, which may well eradicate the problem you are 
seeing

3) switch from rabbitmq 3.0.4 to the latest (3.1.3). There have been a 
number of improvements in the area of the above crash.


Also, for reference, please let us know what OS & version you are running.


Regards,

Matthias.

From matthias at rabbitmq.com  Thu Jul  4 09:40:24 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 04 Jul 2013 09:40:24 +0100
Subject: [rabbitmq-discuss] publisher confirm ack nack ordering
In-Reply-To: <3CE1D10F927704449D41EF6BCB35373D3DEFCD@hermes>
References: <3CE1D10F927704449D41EF6BCB35373D3DEFCD@hermes>
Message-ID: <51D534F8.80101@rabbitmq.com>

Tobias,

On 04/07/13 09:04, Tobias Gutzmann wrote:
> Assuming that a few messages succeed in order, I sometimes see the ACKs
> like this (RabbitMQ 3.1.1):
>
> ACK(5, true)
> ACK(1, false) -- surely sent first by the broker, but lagged a bit
> longer on the wire

That should not happen. Are you sure the messages were a) sent on the 
same channel, and b) not re-ordered in the application code?

Can you capture a protocol trace (e.g. using 
http://www.rabbitmq.com/api-guide.html#tracer) showing the above?

> Now the problem, which I haven't observed as it should be extremely rare
> but which still is possible:
>
> ACK (5, true)
> NACK (1, false) -- sent first by broker but received last.

That shouldn't happen either.

Regards,

Matthias.

From emile at rabbitmq.com  Thu Jul  4 10:00:46 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 04 Jul 2013 10:00:46 +0100
Subject: [rabbitmq-discuss] openssl -out issue when trying to generate
 key and certificates
In-Reply-To: <1372876867.42553.YahooMailNeo@web141105.mail.bf1.yahoo.com>
References: <1372876867.42553.YahooMailNeo@web141105.mail.bf1.yahoo.com>
Message-ID: <51D539BE.6090202@rabbitmq.com>

On 03/07/13 19:41, Luis Rodriguez wrote:

> # openssl req -x509 -config openssl.cnf -newkey rsa:2048 -days 365 \
>     -out cacert.pem -outform PEM -subj /CN=MyTestCA/ -nodes

If you don't need a line continuation then remove it. The backslash is
causing the shell to treat " -out" as a single token, which is unrecognised.



-Emile




From simon at rabbitmq.com  Thu Jul  4 11:00:01 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 04 Jul 2013 11:00:01 +0100
Subject: [rabbitmq-discuss] Can't connect to STOMP
In-Reply-To: <kr3a92$5di$1@ger.gmane.org>
References: <dbc6ac7b-b15e-4a23-aaa1-b1916e9207e2@googlegroups.com>
	<kr3a92$5di$1@ger.gmane.org>
Message-ID: <51D547A1.8050903@rabbitmq.com>

On 04/07/13 09:03, Michael Justin wrote:
> Am 04.07.2013 02:56, Jeff Anderson wrote:
>> Virtual host 'localhost' access denied.
>
> With RabbitMQ default installation there is a virtual host "/" defined
> so this should work:
>
> CONNECT
> accept-version:1.0,1.1
> passcode:guest
> heart-beat:10000,30000
> client-id:ID:CJANDERSON-LT-11309-635084707237720849-0:0
> login:guest
> host:/

Yes. Or you can omit the host header altogether and the default "/" will 
be used.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Thu Jul  4 11:15:45 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 04 Jul 2013 11:15:45 +0100
Subject: [rabbitmq-discuss] rabbitmq and long
	vm.dirty_writeback_centisecs
In-Reply-To: <CAFPGKwABAfdCjYTDz3vdHhabw3WoEO8YYAdNi24m-rc6H_u2sA@mail.gmail.com>
References: <CAFPGKwABAfdCjYTDz3vdHhabw3WoEO8YYAdNi24m-rc6H_u2sA@mail.gmail.com>
Message-ID: <51D54B51.2060300@rabbitmq.com>

On 04/07/13 00:45, Tao Fan wrote:
> I have ubuntu boxes which, for disk life consideration, I have set the
> vm.dirty_writeback_centisecs from 5sec to 30min. However, when the boxes
> have power outage and restored, rabbitmq refused to start up, giving
> error message in log: mnesia_recover crashed.

That's an error from Mnesia; part of Erlang. It may be worth upgrading 
Erlang, R13B03 is quite old. See 
https://www.erlang-solutions.com/downloads/download-erlang-otp for newer 
Erlang debs.

That error is also truncated, it's not clear what has really gone wrong.

> I had to delete schema.DAT under mnesia directory before I can start it
> again but then all my stored messages in persistent queues are lost.
>
> If I do disk sync every minute or two, there is no such issue - rabbitmq
> can survive every power cycle. I like to understand how rabbitmq works
> to survive power cycle and if it is possible to tune it to survive with
> longer sync time without losing any stored messages in queue.

Don't these two requirements contradict each other? If you succeed in 
making sync to disc happen every 30 min (which is probably quite hard, 
RabbitMQ issues fsync() quite frequently), you are going to risk losing 
data on failure.

To be honest I would just leave dirty_writeback_centisecs alone.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From john.turner at thoughtforge.net  Thu Jul  4 11:48:53 2013
From: john.turner at thoughtforge.net (John Turner)
Date: Thu, 4 Jul 2013 03:48:53 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
In-Reply-To: <21060172-43BB-41AB-A6F6-3B97CA4D46FF@rabbitmq.com>
References: <083be004-f514-46a8-a643-469d77ee387a@googlegroups.com>
	<21060172-43BB-41AB-A6F6-3B97CA4D46FF@rabbitmq.com>
Message-ID: <46e760f0-355b-437d-af29-215a79bf85b2@googlegroups.com>

Hi Tim,

I've added some comments inline.  I'm very happy to help you with 
requirements here so if a call would help let me know and I'll set it up.

Do you have a timeline for this feature?

Regards

John

On Wednesday, 3 July 2013 21:24:26 UTC+1, hyperthunk wrote:
>
> We've got an open bug to provide a 'message groups' feature like this and 
> are hoping to get it ready for a feature release ASAP. 
>
> Just out of interest, for your use-case, how would you expect failover to 
> work.

 

> Do you want all future messages delivered to another random consumer? 
> (Yes)

 

> What about un-acked messages that were already delivered - we plan on 
> redelivering these (Agree) - and how do you plan on explicitly 
> terminating a group? (This is not a requirement.  Groups should only be 
> terminated by a connection closing either explicitly or due to failure)

 

> Would a special message (or header) given by the producer suit that 
> purpose? (If people want this functionality I would suggest this is the 
> best way.  You might also consider giving the consumer the ability to 
> terminate a message group but we don't have a specific use case for this. 
>  It might be something for future releases.)

 

> What about consumers that don't disconnect but indicate they'd like to 
> stop processing that group of messages? (I referred to this above.  I'd 
> suggest you add this to a future release as it really is not a must have).Do you have consumers that want to recieve more than one group in parallel? 
> (Absolutely) And what about producers that go away - do you close the 
> group when they disconnect or keep it open indefinitely, or use a timeout? (I 
> would keep it open indefinitely because multiple producers may be 
> contributing messages to a single group.  You have some challenges around 
> clean up here though.  It could be reasonable to say that when all messages 
> in a group have been processed that the group closes after a timeout.  When 
> subsequent messages arrive the group is recreated.)
>
> None of those things are very clear to me from the activemq docs, so 
> hearing from a real world user would be nice! :) 
>
> Cheers, 
> Tim 
>
> On 3 Jul 2013, at 11:57, John Turner <john.... at thoughtforge.net<javascript:>> 
> wrote: 
>
> > Hi All, 
> > 
> > I'm very familiar with JMS and have used the GroupID extension to 
> provide processing affinity to a single consumer.  For further information 
> on how this works see this ActiveMQ documentation: 
> http://activemq.apache.org/message-groups.html 
> > 
> > This solves the following requirement: 
> > 
> > * Messages are distributed to a queue with a GroupID header. 
> > * The broker guarantees that messages with a specific GroupID (say 
> '1234') will only be processed by a single consumer. 
> > * If the consumer fails (i.e. the connection is broken or closed), the 
> broker will allow another consumer to process messages with that GroupID 
> > 
> > Using RabbitMQ and the Consistent Hashing Plugin does not not appear to 
> solve the problem because if we are using static (durable) queues, the 
> consumer failover mechanism needs to be implemented outside the server. 
>  Does anyone have any insight into this problem they could share? 
> > 
> > An alternative would be to extend the queue to ensure apply the same 
> consistent hashing mechanism to the actual queue rather than the broker. 
>  Does anyone know if it si possible to extend the queue implementation? 
> > _______________________________________________ 
> > rabbitmq-discuss mailing list 
> > rabbitmq... at lists.rabbitmq.com <javascript:> 
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/bbd8fd20/attachment.htm>

From matthias at rabbitmq.com  Thu Jul  4 13:48:35 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 04 Jul 2013 13:48:35 +0100
Subject: [rabbitmq-discuss] Active-Active implementation issues
In-Reply-To: <CAO68YrLA1-D641E5v0xQz4+qMW=Obe31mXi2dmFvZVmn7R37WQ@mail.gmail.com>
References: <CAO68Yr+ea2k0+GuHD48Z36KY7M-hOKvrr4+7207umBrNmZKaVA@mail.gmail.com>
	<51D14867.9000203@rabbitmq.com>
	<CAO68YrLLXkWO7q3PLwzD2DZ9kHgNEwKd=vEB17A+yFQYyVGg1Q@mail.gmail.com>
	<CAO68YrLA1-D641E5v0xQz4+qMW=Obe31mXi2dmFvZVmn7R37WQ@mail.gmail.com>
Message-ID: <51D56F23.5000806@rabbitmq.com>

On 01/07/13 11:57, Gomathi Nayagam wrote:
> [Reply] Let's take the below example, the queue has 20 messages and
> after 13 messages are consumed (11 messages are acked, 2 messages ack
> are not reached to broker) Node1 is down. So in the Node2 we could see 9
> messages.

So far so good.

> But the consumer consumes and acked all 9 messages (i can get
> the print statements inside handleCancel()) during the fail over

I have no idea what you observing here. How can the consumer possibly 
consume and ack messages "during the fail over"?

Well, the application code can, i.e. it can process messages that were 
still buffered, and it can issue acks for them. But these acks will be 
lost during the failover.

> It leads to duplication of messages.

If by that you mean that a consumer can see the same message again after 
an abrupt disconnect and reconnect (e.g. due to node failure) then yes, 
that is unavoidable.

Matthias.

From mklishin at gopivotal.com  Thu Jul  4 14:48:41 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 4 Jul 2013 17:48:41 +0400
Subject: [rabbitmq-discuss] ANN HotBunnies 2.0.0.pre8 is released
Message-ID: <AAF79C20-0848-46D0-A5BE-EB9CCD250595@gopivotal.com>

HotBunnies 2.0.0.pre8 is released to rubygems.org [1].

This is a milestone release. It further improves Bunny API compatibility,
irons out several usability issues, introduces support for shutdown
callbacks and paves the way for automatic network/rabbitmq node failure
recovery.

There are some breaking API changes
in 2.0.

Release notes:
http://blog.rubyrabbitmq.info/blog/2013/07/04/hotbunnies-2-dot-0-0-dot-pre8-is-released/

1. https://rubygems.org/gems/hot_bunnies/versions/2.0.0.pre8-java
--
MK


From x050516 at gmail.com  Thu Jul  4 15:00:06 2013
From: x050516 at gmail.com (BK)
Date: Thu, 4 Jul 2013 07:00:06 -0700 (PDT)
Subject: [rabbitmq-discuss] UNC path not working
In-Reply-To: <CANOx8NnOCy5nNRrdq=i7pFzJsvQzL70NefaT_DMRV_Ce=nR5Bg@mail.gmail.com>
References: <1372892737853-27815.post@n5.nabble.com>
	<CANOx8NnOCy5nNRrdq=i7pFzJsvQzL70NefaT_DMRV_Ce=nR5Bg@mail.gmail.com>
Message-ID: <1372946406790-27833.post@n5.nabble.com>

Mapping a network drive works and that too only as an application. Still does
not work as a service. Having said that, I cannot depend on deploying this
to production with a mapped setting. I am still looking for it to work as a
UNC network path.

I now set environment variable to have ONLY the RABBITMQ_MNESIA_BASE to
\\ABC\DEF. I see the  RABBIT-plugins-expand directory created, on this
network share, but no files within it. I see the error

Error description:
   {error,{"no such file or directory","amqp_client.app"}} .......





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/UNC-path-not-working-tp27815p27833.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From x050516 at gmail.com  Thu Jul  4 15:03:40 2013
From: x050516 at gmail.com (BK)
Date: Thu, 4 Jul 2013 07:03:40 -0700 (PDT)
Subject: [rabbitmq-discuss] user_dn_pattern ==> OR situation
In-Reply-To: <1372863045378-27796.post@n5.nabble.com>
References: <1372863045378-27796.post@n5.nabble.com>
Message-ID: <1372946620491-27834.post@n5.nabble.com>

Anyone run into this similar issue ?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/user-dn-pattern-OR-situation-tp27796p27834.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From jpalanco at gmail.com  Thu Jul  4 15:06:25 2013
From: jpalanco at gmail.com (Jose Ramon Palanco)
Date: Thu, 4 Jul 2013 16:06:25 +0200
Subject: [rabbitmq-discuss] Ghost consumers problem
Message-ID: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>

We have an rabbitmq installation and we use rabbitmq-c clients compiled for
microsoft windows and running as a service. Everything works fine, even we
have enabled encrypted communications using OpenSSL.

It turns out that we have a problem with ghost consumers and having read a
lot, we still come up with the solution.

The scenario is as follows:

Clients connect to the broker and everything works fine until Windows
restarts. To speedup system reboot, Microsoft doesn't give us a chance to
finish executing our tasks: so we can't closed session properly.

This implies that the queue remains alive with a ghost consumer.

After reboot, the service starts and when trying to create the queue, it
conflicts with the former queue. We tried to create the queue as exclusive,
but it doesn't allow us to connect because we haven't permission.

Is there a way to close the communications when a connection is not
stablished? Or in the worst case, there is a procedure to clean the queues
with ghost consumers?


Best regards

J.R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/15efd0e9/attachment.htm>

From simon at rabbitmq.com  Thu Jul  4 15:07:47 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 04 Jul 2013 15:07:47 +0100
Subject: [rabbitmq-discuss] user_dn_pattern ==> OR situation
In-Reply-To: <1372863045378-27796.post@n5.nabble.com>
References: <1372863045378-27796.post@n5.nabble.com>
Message-ID: <51D581B3.5000002@rabbitmq.com>

On 03/07/13 15:50, BK wrote:
>    I was wondering if I can have a choice such as
>
>      (ou=NonEmployees OR ou=ServiceAccounts) AND ou=UserAccounts

I'm afraid not. It's on the (long) list of enhancements to make...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From mklishin at gopivotal.com  Thu Jul  4 15:16:17 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 4 Jul 2013 18:16:17 +0400
Subject: [rabbitmq-discuss] ANN New RabbitMQ Logstash plugin is ready for
	the final review
Message-ID: <CB10104C-897E-4AC0-8A2A-F8A5C649600A@gopivotal.com>

Some time ago, I've started working on a new version of the RabbitMQ plugin
for Logstash.

It is now ready for the final review. If you are a Logstash user who wants to use
RabbitMQ as either Logstash input or output, please have a look:

https://github.com/logstash/logstash/pull/533

The new plugin solves a number of issues:

 * Events over 128K in size caused the output to fail
 * Throughput of both input and output was far below expectations on JRuby
 * Input configuration was needlessly complicated and confusing

finally, the previous plugin was effectively unmaintained.

To solve these problems, this new version does the following:

 * Uses Bunny 0.9 [1] on MRI
 * Uses HotBunnies 2.0 [2] on JRuby
 * [In near future] Reduces input configuration to what's really essential

This version network and RabbitMQ node recovery and makes ease of
operations a priority.

Because Logstash is primarily used with JRuby, you will likely see significant
(x5-6 times for the output, x2-3 times for input) throughput improvements
with HotBunnies. In addition, by tuning RabbitMQ channel settings and consumer
thread pool sizes, input throughput can be further increased by at least double
digit %.

I'd be happy to hear what you think: just leave a comment to the pull request.

Thanks!

1. http://rubybunny.info
2. http://hotbunnies.info
--
MK


From simon at rabbitmq.com  Thu Jul  4 15:29:44 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 04 Jul 2013 15:29:44 +0100
Subject: [rabbitmq-discuss] Ghost consumers problem
In-Reply-To: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
References: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
Message-ID: <51D586D8.4070901@rabbitmq.com>

AMQP heartbeats should solve this problem. Since 3.0.0 the server 
attempts to negotiate heartbeats by default but I don't know what 
rabbitmq-c does in response to that; given its low-level nature I 
imagine you have to do some work to get them running so they would be 
disabled by default.

Cheers, Simon

On 04/07/13 15:06, Jose Ramon Palanco wrote:
>
> We have an rabbitmq installation and we use rabbitmq-c clients compiled
> for microsoft windows and running as a service. Everything works fine,
> even we have enabled encrypted communications using OpenSSL.
>
> It turns out that we have a problem with ghost consumers and having read
> a lot, we still come up with the solution.
>
> The scenario is as follows:
>
> Clients connect to the broker and everything works fine until Windows
> restarts. To speedup system reboot, Microsoft doesn't give us a chance
> to finish executing our tasks: so we can't closed session properly.
>
> This implies that the queue remains alive with a ghost consumer.
>
> After reboot, the service starts and when trying to create the queue, it
> conflicts with the former queue. We tried to create the queue as
> exclusive, but it doesn't allow us to connect because we haven't permission.
>
> Is there a way to close the communications when a connection is not
> stablished? Or in the worst case, there is a procedure to clean the
> queues with ghost consumers?
>
>
> Best regards
>
> J.R
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From michael.s.klishin at gmail.com  Thu Jul  4 15:34:05 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 4 Jul 2013 18:34:05 +0400
Subject: [rabbitmq-discuss] Ghost consumers problem
In-Reply-To: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
References: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
Message-ID: <CAE3HoVTU09BFj=s_C3MSWK44oaQ_k-NVkCA8kGKQ=STSNdNoRQ@mail.gmail.com>

2013/7/4 Jose Ramon Palanco <jpalanco at gmail.com>

> After reboot, the service starts and when trying to create the queue, it
> conflicts with the former queue. We tried to create the queue as exclusive,
> but it doesn't allow us to connect because we haven't permission.


Is it because you have multiple connections using the queue?

If you consumer from the queue, you can declare it as auto-delete and
non-durable instead of exclusive. Then as soon as the last consumer
(registered with basic.consume, not using basic.get) is gone, it will be
deleted.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/440d1616/attachment.htm>

From jpalanco at gmail.com  Thu Jul  4 17:27:21 2013
From: jpalanco at gmail.com (Jose Ramon Palanco)
Date: Thu, 4 Jul 2013 18:27:21 +0200
Subject: [rabbitmq-discuss] Ghost consumers problem
In-Reply-To: <CAE3HoVTU09BFj=s_C3MSWK44oaQ_k-NVkCA8kGKQ=STSNdNoRQ@mail.gmail.com>
References: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
	<CAE3HoVTU09BFj=s_C3MSWK44oaQ_k-NVkCA8kGKQ=STSNdNoRQ@mail.gmail.com>
Message-ID: <CAC_Or=Q8YyzKdnkSzga+JBzsFakT1rV21agXJ5HS1+sBS0e6sg@mail.gmail.com>

Michael,

Thank you for your quick reponse. We only need one consumer per queue. We
already have AD (autodelete) and durable is setted to false. We tried
exclusive and non-exclusive. We still have ghost connections and consumers
even when the computers running the clients are powered off.

Console:
http://img827.imageshack.us/img827/9159/pce2.png

I read that it could be due the NAT, but I have reproduced the same issue
connected directly.



Regards


2013/7/4 Michael Klishin <michael.s.klishin at gmail.com>

>
> 2013/7/4 Jose Ramon Palanco <jpalanco at gmail.com>
>
>> After reboot, the service starts and when trying to create the queue, it
>> conflicts with the former queue. We tried to create the queue as exclusive,
>> but it doesn't allow us to connect because we haven't permission.
>
>
> Is it because you have multiple connections using the queue?
>
> If you consumer from the queue, you can declare it as auto-delete and
> non-durable instead of exclusive. Then as soon as the last consumer
> (registered with basic.consume, not using basic.get) is gone, it will be
> deleted.
>  --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/a6533778/attachment.htm>

From matthias at rabbitmq.com  Thu Jul  4 19:46:27 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 04 Jul 2013 19:46:27 +0100
Subject: [rabbitmq-discuss] Mirrored queues behind a load balancer
In-Reply-To: <c3ae4e5c-ab4c-4c36-921f-b0d639c2318c@googlegroups.com>
References: <49b335bf-8c06-4d5e-8a33-070ea2df984a@googlegroups.com>
	<c3ae4e5c-ab4c-4c36-921f-b0d639c2318c@googlegroups.com>
Message-ID: <51D5C303.8000100@rabbitmq.com>

On 03/07/13 18:12, James Lewis wrote:
> Hi Girish, just a disclaimer: I'm no expert and I'm only just going
> through the motions of setting up a HA cluster myself.  However, I think
> I can answer a couple of your questions.
>
> 1.
>
>     Likewise, if I manually create a queue on one node, it immediately
>     shows up on the other node as well.
>
> Not unless you specifically set the queue to be mirrored.

As was pointed out in the previous response to this question at 
http://rabbitmq.1065348.n5.nabble.com/Mirrored-queues-behind-a-load-balancer-tp27386p27388.html, 
queues are visible/accessible across all nodes in a cluster regardless 
of whether they are mirrored.

> The clustering guide says yes that approach will work.  However the
> mirrored queue guide talks about master - slave replication which makes
> me think of setting the load balancer up to fail over to a slave in the
> case of a master failure rather than to round-robin the requests to all
> nodes in the cluster...  I'd appreciate it if someone could confirm this.

As per the above; queues are accessible from all nodes. So it doesn't 
matter which node a client connects to.

Matthias.

From t.otoda.freemail at gmail.com  Thu Jul  4 20:11:12 2013
From: t.otoda.freemail at gmail.com (t.otoda)
Date: Fri, 5 Jul 2013 04:11:12 +0900
Subject: [rabbitmq-discuss] What is occuered when the master node output
 warning log of msg_store_persistent ?
In-Reply-To: <51D3F009.1080608@rabbitmq.com>
References: <CACi3n5KbKZVXToAOE_wmcQYF5dtEmLnUPNTqFs4F_g8oHBum_g@mail.gmail.com>
	<51D3F009.1080608@rabbitmq.com>
Message-ID: <CACi3n5JiS9zRUKWreGdeTdudK5A7FT3=kXQZWy09icip+-E1eQ@mail.gmail.com>

Thank you for reply.

I made sure we shut down the server using 'rabbitmqctl stop'.
And our app disconnect the server when we shut down,
so any loads didn't depend on it.

Well, in case that message is output the server log,
does our app  have risks to be affected by using it ?




2013/7/3 Simon MacMullen <simon at rabbitmq.com>

> This is nothing to do with master vs slave (which is a term applied to
> individual queue-node combinations by the way, not to entire nodes).
>
> That message means the broker was shut down unexpectedly, and it was not
> able to trust its indices as a consequence. This can take quite some time -
> so make sure you shut down the server properly (with e.g. rabbitmqctl stop,
> or /etc/init.d/rabbitmq-server stop, or stopping the Windows service).
>
> Cheers, Simon
>
>
> On 02/07/13 19:32, t.otoda wrote:
>
>> I use RabbitMQ 3.0.1 and have a cluster with 2 disk nodes.
>> When I stoped and restarted both, the master node output log below.
>>   =WARNING REPORT==== 19-Jun-2013::23:56:59 ===
>> msg_store_persistent: recovery terms differ from present
>> rebuilding indices from scratch
>> Please tell me why this log is output
>> and what is occuered within RabbitMQ nodes.
>> I expect that
>> when a slave disk node is started,
>> the master node compares the indices it owns and the indices started
>> slave owns.
>> And then,
>> since the slave node was stopped by the abnormal way(?),
>> the indices differed from the other, and the master node output log.
>> Is this correct?
>>   (?)For example, I stoped the node
>>         beore it becomes the new master node instead of the stopped
>> master node.
>> Thank you.
>>
>>
>> ______________________________**_________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
>> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>>
>>
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/254114ed/attachment.htm>

From alan.antonuk at gmail.com  Fri Jul  5 08:03:07 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Fri, 5 Jul 2013 00:03:07 -0700
Subject: [rabbitmq-discuss] Ghost consumers problem
In-Reply-To: <51D586D8.4070901@rabbitmq.com>
References: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
	<51D586D8.4070901@rabbitmq.com>
Message-ID: <CAAt2poLsa6SY2i=mxTK_fHcXrbsF5Snkc232PdzGHjOG288R4w@mail.gmail.com>

On Thursday, July 4, 2013, Simon MacMullen wrote:

> AMQP heartbeats should solve this problem. Since 3.0.0 the server attempts
> to negotiate heartbeats by default but I don't know what rabbitmq-c does in
> response to that;


partial support for heartbeats has recently been added in the master branch
of rabbitmq-c.

If you specify a non-zero parameter for heartbeats in amqp_login() the
library will attempt to service heartbeats while doing blocking reads in
amqp_simple_wait_frame() or while doing frequent amqp_basic_publish()
calls. Heartbeats are not serviced if you're not making calls into
rabbitmq-c.


> On 04/07/13 15:06, Jose Ramon Palanco wrote:
>
>>
>> We have an rabbitmq installation and we use rabbitmq-c clients compiled
>> for microsoft windows and running as a service. Everything works fine,
>> even we have enabled encrypted communications using OpenSSL.
>>
>> It turns out that we have a problem with ghost consumers and having read
>> a lot, we still come up with the solution.
>>
>> The scenario is as follows:
>>
>> Clients connect to the broker and everything works fine until Windows
>> restarts. To speedup system reboot, Microsoft doesn't give us a chance
>> to finish executing our tasks: so we can't closed session properly.
>>
>> This implies that the queue remains alive with a ghost consumer.
>>
>> After reboot, the service starts and when trying to create the queue, it
>> conflicts with the former queue. We tried to create the queue as
>> exclusive, but it doesn't allow us to connect because we haven't
>> permission.
>>
>> Is there a way to close the communications when a connection is not
>> stablished? Or in the worst case, there is a procedure to clean the
>> queues with ghost consumers?
>>
>>
>> Best regards
>>
>> J.R
>>
>>
>> ______________________________**_________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>>
>>
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/3a1775a6/attachment.htm>

From mrtndimitrov at gmail.com  Fri Jul  5 09:00:25 2013
From: mrtndimitrov at gmail.com (Martin Dimitrov)
Date: Fri, 05 Jul 2013 11:00:25 +0300
Subject: [rabbitmq-discuss] Error when accessing management plugin
Message-ID: <51D67D19.4030006@gmail.com>

Hello,

I get strange error when trying to access the management plugin HTTP
endpoint. The error is:

Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection
without sending any data.

In the logs I see:

=CRASH REPORT==== 12-Apr-2013::04:44:54 ===
  crasher:
    initial call: mochiweb_acceptor:init/3
    pid: <0.274.0>
    registered_name: []
    exception error: undefined function mochiweb_util:safe_relative_path/1
      in function  mochiweb_request:serve_file/4
      in call from mochiweb_http:headers/5
    ancestors: [rabbit_mochiweb_sup_15672,rabbit_mochiweb_sup,<0.238.0>]
    messages: []
    links: [<0.261.0>,#Port<0.15975>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 4185
    stack_size: 27
    reductions: 1628
  neighbours:

The version of RabbitMQ is 3.1.3 and here is a list of the enabled plugins:

[e] amqp_client               3.1.3
[e] mochiweb                  2.3.1-rmq3.1.3-gitd541e9a
[E] rabbitmq_management       3.1.3
[e] rabbitmq_management_agent 3.1.3
[e] rabbitmq_web_dispatch     3.1.3
[e] webmachine                1.9.1-rmq3.1.3-git52e62bc

Very strange because mochiweb_util:safe_relative_path/1 is present in
mochiweb_util module and the beam is inside the mochiweb package.

Thank you very much for your time.

Martin

From lrodriguez1995 at yahoo.com  Fri Jul  5 12:48:52 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 5 Jul 2013 04:48:52 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq error7090 when trying to generate ssl
	server certificate
Message-ID: <1373024932.39872.YahooMailNeo@web141106.mail.bf1.yahoo.com>

Dear all,
(very new when it comes to rabbitmq)
I have a single node rabbitmq-server installed running erlang R14b (host only network, no firewall).
trying to follow the tutorial on ssl. 
My goal is to use SSL encryption (not concerned about client and server validation) but apparently there is no shared cipher the client and server can use that requires no keys, so I was able to generate my certificate authority, and now trying to generate the server certificate but I get a 7090 error (attached pic)
Please help...

many thanks in advance

Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/20f46641/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl4.png
Type: image/png
Size: 122031 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/20f46641/attachment.png>

From lrodriguez1995 at yahoo.com  Fri Jul  5 12:54:00 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 5 Jul 2013 04:54:00 -0700 (PDT)
Subject: [rabbitmq-discuss] Fw: rabbitmq error 8393 when trying to generate
	ssl server certificate
In-Reply-To: <1373024932.39872.YahooMailNeo@web141106.mail.bf1.yahoo.com>
References: <1373024932.39872.YahooMailNeo@web141106.mail.bf1.yahoo.com>
Message-ID: <1373025240.1793.YahooMailNeo@web141104.mail.bf1.yahoo.com>

Following up with my post, I reran the command, and I am getting 8393 error loading extension section server_ca_extension



----- Forwarded Message -----
From: Luis Rodriguez <lrodriguez1995 at yahoo.com>
To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Friday, July 5, 2013 7:48 AM
Subject: rabbitmq error7090 when trying to generate ssl server certificate
 


Dear all,
(very new when it comes to rabbitmq)
I have a single node rabbitmq-server installed running erlang R14b (host only network, no firewall).
trying to follow the tutorial on ssl. 
My goal is to use SSL encryption (not concerned about client and server validation) but apparently there is no shared cipher the client and server can use that requires no keys, so I was able to generate my certificate authority, and now trying to generate the server certificate but I get a 7090 error (attached pic)
Please help...

many thanks in advance

Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/7971b50f/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl4.png
Type: image/png
Size: 122031 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/7971b50f/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl5.png
Type: image/png
Size: 131282 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/7971b50f/attachment-0001.png>

From mklishin at gopivotal.com  Fri Jul  5 12:55:20 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 5 Jul 2013 15:55:20 +0400
Subject: [rabbitmq-discuss] rabbitmq error7090 when trying to generate
	ssl server certificate
In-Reply-To: <1373024932.39872.YahooMailNeo@web141106.mail.bf1.yahoo.com>
References: <1373024932.39872.YahooMailNeo@web141106.mail.bf1.yahoo.com>
Message-ID: <DF284540-91F2-45F2-AD3C-271115C30ADA@gopivotal.com>

Luis Rodriguez:

> My goal is to use SSL encryption (not concerned about client and server validation) but apparently there is no shared cipher the client and server can use that requires no keys, so I was able to generate my certificate authority, and now trying to generate the server certificate but I get a 7090 error (attached pic)
> Please help...

the fopen failure suggest your openssl config uses a path to a file that do not exist (./index.txt.attr).

Have you tried usint tls-gen [1]? It only requires make and openssl to work
and will generate the certificates from the RabbitMQ SSL tutorial.

Even though it's under the ruby-amqp github org, it's not in any way Ruby-specific.

1. https://github.com/ruby-amqp/tls-gen
--
MK


From louis.bouchard at canonical.com  Fri Jul  5 13:15:46 2013
From: louis.bouchard at canonical.com (Louis Bouchard)
Date: Fri, 05 Jul 2013 14:15:46 +0200
Subject: [rabbitmq-discuss] [Bug] Memory leak in 3.1.3 (Ubuntu)
Message-ID: <51D6B8F2.40507@canonical.com>

Hello everyone,

I would like to bring to your attention an issue that translates into a
memory leak in the latest version available on Ubuntu( 3.1.3). Our
public bug report is here :

https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/1197380

A reproducer is available in the bug report. Simply running the test
mentioned did use all of a 2Gb instance to ~1Mb of free space.

I'm hoping to test the tip of the hg repository soon to see if an
existing patch solves the issue, but I thought of bringing it up here
while doing so.

Kind regards,

...Louis
-- 
Louis Bouchard
Backline Support Analyst
Canonical Ltd
Ubuntu support: http://canonical.com/support

From tim at rabbitmq.com  Fri Jul  5 13:24:34 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Fri, 5 Jul 2013 13:24:34 +0100
Subject: [rabbitmq-discuss] [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51D6B8F2.40507@canonical.com>
References: <51D6B8F2.40507@canonical.com>
Message-ID: <6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>

Well there's a good reason why that leaks I think. When is the test case ever actually getting into the ./queue_receive bit!? Isn't that like doing `while true; do echo "hi"; done; echo "done"` - you never arrive at "done" do you.

Even if you were calling the receive script in the loop, that's creating a new consumer and not removing it, so the memory use for all those connections will just keep going up since they're never being closed.

Have I missed something? It really looks like this is just a badly formed test case to me.

Cheers,
Tim

On 5 Jul 2013, at 13:15, Louis Bouchard wrote:

> Hello everyone,
> 
> I would like to bring to your attention an issue that translates into a
> memory leak in the latest version available on Ubuntu( 3.1.3). Our
> public bug report is here :
> 
> https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/1197380
> 
> A reproducer is available in the bug report. Simply running the test
> mentioned did use all of a 2Gb instance to ~1Mb of free space.
> 
> I'm hoping to test the tip of the hg repository soon to see if an
> existing patch solves the issue, but I thought of bringing it up here
> while doing so.
> 
> Kind regards,
> 
> ...Louis
> -- 
> Louis Bouchard
> Backline Support Analyst
> Canonical Ltd
> Ubuntu support: http://canonical.com/support
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From tim at rabbitmq.com  Fri Jul  5 13:25:48 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Fri, 5 Jul 2013 13:25:48 +0100
Subject: [rabbitmq-discuss] [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
Message-ID: <CA362B1D-FEB4-49ED-9886-BB0DA71AF2B2@rabbitmq.com>

On 5 Jul 2013, at 13:24, Tim Watson wrote:
> Have I missed something? It really looks like this is just a badly formed test case to me.
> 

Or is it that the send loop is meant to be run in another terminal? That's an entirely different matter, but the bug report doesn't make that clear.

Tim


From mklishin at gopivotal.com  Fri Jul  5 13:29:08 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 5 Jul 2013 16:29:08 +0400
Subject: [rabbitmq-discuss] [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51D6B8F2.40507@canonical.com>
References: <51D6B8F2.40507@canonical.com>
Message-ID: <21AC61C9-EBB2-44B6-BC66-4C23683B7787@gopivotal.com>

Louis Bouchard:

> I'm hoping to test the tip of the hg repository soon to see if an
> existing patch solves the issue, but I thought of bringing it up here
> while doing so.

Louis,

Have you tried using rabbitmqctl status, rabbitmqctl report or the management UI plugin
to see how many messages your RabbitMQ node has enqueued?

If so, can you post some of that data?
--
MK


From louis.bouchard at canonical.com  Fri Jul  5 13:38:21 2013
From: louis.bouchard at canonical.com (Louis Bouchard)
Date: Fri, 05 Jul 2013 14:38:21 +0200
Subject: [rabbitmq-discuss] [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
Message-ID: <51D6BE3D.9040606@canonical.com>

Hi Tim,

Le 05/07/2013 14:24, Tim Watson a ?crit :
> Well there's a good reason why that leaks I think. When is the test case ever actually getting into the ./queue_receive bit!? Isn't that like doing `while true; do echo "hi"; done; echo "done"` - you never arrive at "done" do you.
> 
> Even if you were calling the receive script in the loop, that's creating a new consumer and not removing it, so the memory use for all those connections will just keep going up since they're never being closed.
> 
> Have I missed something? It really looks like this is just a badly formed test case to me.
> 
> Cheers,
> Tim
> 

Indeed, now that I look at it (I'm not the author of the test case, just
working on that bug) the syntax does look somewhat *doubtful*.

Let me run another set of tests to verify all this before bringing some
more noise to this list.

If anything gets confirmed, I will have rabbitmqctl status, rabbitmqctl
report handy.

thanks for your help,

Kind regards,

...Louis


-- 
Louis Bouchard
Backline Support Analyst
Canonical Ltd
Ubuntu support: http://canonical.com/support

From peter.palmieri at gmail.com  Fri Jul  5 12:29:13 2013
From: peter.palmieri at gmail.com (Peter Palmieri)
Date: Fri, 5 Jul 2013 04:29:13 -0700 (PDT)
Subject: [rabbitmq-discuss] 3.1.1 Statistics
Message-ID: <360a5c8f-e8e6-4417-a07f-53c8498afb30@googlegroups.com>

Hello all,

We recently upgraded from 3.0.1 to 3.1.1. Things are working fine with two 
exceptions.

1) When I look at the Management Plugin website overview page, or the 
Queues page, I don't see numbers for Message Rates. The graphs show values, 
and we are certainly seeing the expected throughput, just not the actual 
numeric values. Running rabbitmqadmin shows the same thing. We see numbers 
for Queued Messages, but not Message Rates. 

2) We are running 3 RabbitMQ instances clustered behind an AWS Elastic Load 
Balancer. I can log into each individual instance, see the cluster, the 
stats, etc. When I log in via the ELB, I can view every page but the 
Overview page. On that page I get the error:

ReferenceError: queue_length is not defined

I have cleared cache and tried multiple browsers. We did not see this 
problem running 3.0.1 with the same implementation. 

Any suggestion would be very welcome. Thanks in advance. 

-- 
Peter Palmieri
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/fc57cff3/attachment.htm>

From michael.s.klishin at gmail.com  Fri Jul  5 14:44:16 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 5 Jul 2013 17:44:16 +0400
Subject: [rabbitmq-discuss] 3.1.1 Statistics
In-Reply-To: <360a5c8f-e8e6-4417-a07f-53c8498afb30@googlegroups.com>
References: <360a5c8f-e8e6-4417-a07f-53c8498afb30@googlegroups.com>
Message-ID: <CAE3HoVQ=RqHfZ-efvRgtOhT5ukRjrm7XGh99JKinmo+b7VaJbQ@mail.gmail.com>

2013/7/5 Peter Palmieri <peter.palmieri at gmail.com>

> Any suggestion would be very welcome. Thanks in advance.


Peter,

I believe there were two management UI issues fixed between 3.1.1 and
3.1.3, please
upgrade to the most recent patch level and try again.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/e8bcde67/attachment.htm>

From Lothe_Shashank at mahindrasatyam.com  Fri Jul  5 14:52:36 2013
From: Lothe_Shashank at mahindrasatyam.com (Lothe_Shashank)
Date: Fri, 5 Jul 2013 13:52:36 +0000
Subject: [rabbitmq-discuss] RabbitMQ Consumer timeout (Alan Antonuk)
Message-ID: <DD7729D61B083D48A2CDCB66A27AD4C98C5B2F@BSDMSATMBX001.mahindrasatyam.ad>

Dear Alan,

I download rabbitmq-c master package from and tried newly added amqp_simple_wait_frame_noblock API. I modified amqp_listen.c example and instead of amqp_simple_wait_frame I used amqp_simple_wait_frame_noblock with different timeout values. However this API is failing immediately with return value as -13. What this return value means? Is there any other way of using timeout so that if I don't receive a frame within say 10ms I can reject that message.

Another problem I am facing with amqp_basic_reject API. In amqp_listen.c example I called this API (with requeue=1) and I got following console output. After that it is not able to receive any message sent by amqp_send_string example.

00000000: 48 65 6C 6C 6F 20 57 6F : 72 6C 64                 Hello World
0000000B:
Result 0
Frame type 1, channel 1
Method AMQP_CHANNEL_CLOSE_METHOD

One more problem I would like to report. I have created a client 7 different queues with 7 different channels and bound with 7 different binding keys on the same connection with direct exchange. The listening part of these 7 queues are with 7 different threads listening for server input. When I am sending message from server with corresponding routing keys the messages are delivered to different queue than the expected queue. (I believe it is called Shunting messages from one queue to another). What could be the problem? Do I have to do something from rabbitmq server to targeted delivery? I tried by making queues exclusive but got the same result.

Please help.

Thanks and regards,
Shashank

---------- Forwarded message ----------
From: <rabbitmq-discuss-request at lists.rabbitmq.com<mailto:rabbitmq-discuss-request at lists.rabbitmq.com>>
Date: Wed, Jun 26, 2013 at 4:30 PM
Subject: rabbitmq-discuss Digest, Vol 73, Issue 27
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>


Send rabbitmq-discuss mailing list submissions to
        rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>

To subscribe or unsubscribe via the World Wide Web, visit
        https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
or, via email, send a message with subject or body 'help' to
        rabbitmq-discuss-request at lists.rabbitmq.com<mailto:rabbitmq-discuss-request at lists.rabbitmq.com>

You can reach the person managing the list at
        rabbitmq-discuss-owner at lists.rabbitmq.com<mailto:rabbitmq-discuss-owner at lists.rabbitmq.com>

When replying, please edit your Subject line so it is more specific
than "Re: Contents of rabbitmq-discuss digest..."


Today's Topics:

   1. Determining Required Erlang Version for Upgrade (Richard Raseley)
   2. Re: RabbitMQ Consumer timeout (Alan Antonuk)
   3. Re: RabbitMQ's Mirroring results in weird behavior when slave
      goes down (thomas)
   4. Re: Determining Required Erlang Version for       Upgrade
      (Michael Klishin)
   5. Re: rabbitmq Error:{cannot_discover_cluster, "the nodes
      provided are either offline or not running"} (Emile Joubert)
   6. Re: Determining Required Erlang Version for       Upgrade
      (Emile Joubert)
   7. Re: RabbitMQ won't start after the disk went full (Emile Joubert)
   8. Re: RabbitMQ's Mirroring results in weird behavior when slave
      goes down (Tim Watson)


----------------------------------------------------------------------

Message: 1
Date: Tue, 25 Jun 2013 12:39:15 -0700
From: Richard Raseley <richard at raseley.com<mailto:richard at raseley.com>>
Subject: [rabbitmq-discuss] Determining Required Erlang Version for
        Upgrade
To: RabbitMQ-Discuss Mailing List
        <rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>>
Message-ID:
        <CAO=6ox_tTVUHNnd4VwPr2zO+iGnjb1Kr5fYT0OEadj-urYRiAA at mail.gmail.com<mailto:6ox_tTVUHNnd4VwPr2zO%2BiGnjb1Kr5fYT0OEadj-urYRiAA at mail.gmail.com>>
Content-Type: text/plain; charset="iso-8859-1"

I am in the process of drafting a plan to upgrade several 3.0.x instances
to 3.1.2. I cannot seem to find in the release notes the specific version
of Erlang that is required for the new versions.

Would someone please direct me to a version requirement matrix (assuming
one exists)?

Regards,

Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130625/196f9e67/attachment.html>

------------------------------

Message: 2
Date: Tue, 25 Jun 2013 17:36:48 -0700
From: Alan Antonuk <alan.antonuk at gmail.com<mailto:alan.antonuk at gmail.com>>
Subject: Re: [rabbitmq-discuss] RabbitMQ Consumer timeout
To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>>
Message-ID:
        <CAAt2poJAP5z0-gsdNFaNaH0qzR_FLcxwK_tQEA_tmb=d2CoZiA at mail.gmail.com<mailto:d2CoZiA at mail.gmail.com>>
Content-Type: text/plain; charset="iso-8859-1"

Antony;

rabbitmq-c has very recently added an API that allows for specifying a
timeout when waiting for frames from the broker (see
https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp.h#L495 ).
 With this API is possible to implement something with a similar effect.

I will warn you that this is only in the development branch and thus hasn't
received the same amount of testing that tagged versions have, but I would
encourage you to try it out and report back any issues that come up.

-Alan


On Tue, Jun 25, 2013 at 4:56 AM, antony <antony.pulicken at gmail.com<mailto:antony.pulicken at gmail.com>> wrote:

> Hi,
>
> This is my scenario:
>
> I have multiple instances of listeners waiting on different temp queues. In
> some of the cases, there won't be any messages published to these temp
> queues and I want these listeners to timeout so that it can free up the
> connections.
>
> I guess in Java, we can achieve this by using the overloaded method in the
> QueueingConsumer class that takes timeout as a parameter as shown below:
>
>
> /QueueingConsumer.Delivery delivery = null;
> long timeout = 2 * 60 * 1000; // 2 minutes in milliseconds
> delivery = queuingConsumer.nextDelivery(*timeout*);
> if (delivery == null) {
>   // shut down your consumer here - no events arrived
>   // before the timeout was reached
> }
> else {
>   // process the delivered message here
> }/
>
>
> 1) Does RabbitMQ C client also has a similar feature ?
>
> 2) Are there better approaches to handle this timeouts ?
>
> Please let me know.
>
> Thanks and Regards,
> Antony.
>
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-Consumer-timeout-tp27590.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130625/3468600c/attachment-0001.htm>

------------------------------

Message: 3
Date: Tue, 25 Jun 2013 22:24:26 -0700 (PDT)
From: thomas <taihock at gmail.com<mailto:taihock at gmail.com>>
Subject: Re: [rabbitmq-discuss] RabbitMQ's Mirroring results in weird
        behavior when slave goes down
To: rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
Message-ID: <1372224266044-27611.post at n5.nabble.com<mailto:1372224266044-27611.post at n5.nabble.com>>
Content-Type: text/plain; charset=us-ascii

Hi Tim,

Thanks for the reply. I am using rabbitmq 3.1.1 with autoheal for
cluster_partition_handling.

My test is just to find out the behavior of rabbitmq master should its slave
goes down. For my case, initially I will have rabbit at A, rabbit at B and
rabbit at C running. Then I will send out messages from client to rabbit at A
which is the master throughout the test. Soon after the client started to
send out messages, I will bring down a slave which in my case is rabbit at B by
closing its network connection.

I have changed the net_ticktime to 60 and carry out the same test using the
same code but this time round i increases the number of messages to 500,000
so as to better observe the behavior of sending messages for more than a
minute.

My observation is still similar to that of my previous test where
net_ticktime is 2.
Approximately 10 seconds after I shut down the network connection of
rabbit at B, the sending of messages to rabbit at A comes to a pause for close to
a minute and then continues as per normal.

Trying the same test but with no mirroring does not have any disruption.

By the way, I have try out the same test for rabbitmq mirroring except that
there will be a delay of 10ms between sending every message and there was no
disruption.

>From my observation it can be seen that RabbitMQ server will exhibit weird
behavior under stress condition when a slave goes down. I presume this weird
behavior will only surface under stress condition.

Is there a rough estimate for the maximum load that a RabbitMQ server can
take per second for mirroring? Thanks.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-s-Mirroring-results-in-weird-behavior-when-slave-goes-down-tp27572p27611.html
Sent from the RabbitMQ mailing list archive at Nabble.com.


------------------------------

Message: 4
Date: Wed, 26 Jun 2013 12:19:53 +0400
From: Michael Klishin <michael.s.klishin at gmail.com<mailto:michael.s.klishin at gmail.com>>
Subject: Re: [rabbitmq-discuss] Determining Required Erlang Version
        for     Upgrade
To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>>
Message-ID:
        <CAE3HoVQG8o6uiMGCU2RmasAv3qVObSF9EdN-+YKqe6-Scjd+-w at mail.gmail.com<mailto:CAE3HoVQG8o6uiMGCU2RmasAv3qVObSF9EdN-%2BYKqe6-Scjd%2B-w at mail.gmail.com>>
Content-Type: text/plain; charset="utf-8"

2013/6/25 Richard Raseley <richard at raseley.com<mailto:richard at raseley.com>>

> I am in the process of drafting a plan to upgrade several 3.0.x instances
> to 3.1.2. I cannot seem to find in the release notes the specific version
> of Erlang that is required for the new versions.


Richard,

I don't think the version requirement changed between 3.0.x and 3.1.x.
--
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130626/45de3926/attachment-0001.htm>

------------------------------

Message: 5
Date: Wed, 26 Jun 2013 10:22:40 +0100
From: Emile Joubert <emile at rabbitmq.com<mailto:emile at rabbitmq.com>>
Subject: Re: [rabbitmq-discuss] rabbitmq
        Error:{cannot_discover_cluster, "the nodes provided are either offline
        or not running"}
To: Luis Rodriguez <lrodriguez1995 at yahoo.com<mailto:lrodriguez1995 at yahoo.com>>,  Discussions about
        RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>>
Message-ID: <51CAB2E0.9010805 at rabbitmq.com<mailto:51CAB2E0.9010805 at rabbitmq.com>>
Content-Type: text/plain; charset=ISO-8859-1


Hi

On 25/06/13 18:38, Luis Rodriguez wrote:
> I am running a windows host machine along with three vm's with centos
> 5.9 , rabbitmq-server-3.0.3, and erlang installed on all three nodes.

Make sure all nodes are using the same version of Erlang.

> (I am able to ping between nodes fine)

A number of TCP ports need to be open between cluster nodes, which ping
doesn't guarantee. See

 http://www.rabbitmq.com/clustering.html#firewall

> the cookie hash however, doesn't change regardless of how many times
> I stop (rabbitmqctl stop) and start.. I don't really know what I'm
> missing.

If you change the .erlang.cookie and the cookie hash doesn't change then
you are probably copying to the wrong directory. You can discover a
running node's own idea of where its home directory is by executing

rabbitmqctl eval 'init:get_argument(home).'

Also take note that the cookie and the cookie hash will not be the same.
The hash is displayed in diagnostic output instead of the cookie as a
security precaution. If you have all the cookies synchronised correctly
then the hashes will also be the same.

> when I do rabbitctl join_cluster I get: rabbitmq
> Error:{cannot_discover_cluster,"the nodes provided are either offline
> or not running"}

As per the troubleshooting guide

 http://www.rabbitmq.com/troubleshooting.html

if that message is accompanied by a broker logfile entry "Connection
attempt from disallowed node" then the erlang cookies are not set up
correctly. Otherwise the problem is network related.



-Emile








------------------------------

Message: 6
Date: Wed, 26 Jun 2013 10:25:52 +0100
From: Emile Joubert <emile at rabbitmq.com<mailto:emile at rabbitmq.com>>
Subject: Re: [rabbitmq-discuss] Determining Required Erlang Version
        for     Upgrade
To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>>
Message-ID: <51CAB3A0.8070707 at rabbitmq.com<mailto:51CAB3A0.8070707 at rabbitmq.com>>
Content-Type: text/plain; charset=ISO-8859-1


Hi Richard,

On 25/06/13 20:39, Richard Raseley wrote:

> Would someone please direct me to a version requirement matrix (assuming
> one exists)?

See http://www.rabbitmq.com/which-erlang.html



-Emile








------------------------------

Message: 7
Date: Wed, 26 Jun 2013 10:35:45 +0100
From: Emile Joubert <emile at rabbitmq.com<mailto:emile at rabbitmq.com>>
Subject: Re: [rabbitmq-discuss] RabbitMQ won't start after the disk
        went full
To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>>
Cc: photon <faycal.noushi at gmail.com<mailto:faycal.noushi at gmail.com>>
Message-ID: <51CAB5F1.20202 at rabbitmq.com<mailto:51CAB5F1.20202 at rabbitmq.com>>
Content-Type: text/plain; charset=ISO-8859-1


Hi,

On 25/06/13 14:38, photon wrote:

>  I have an issue concerning RabbitMQ. Once my disk got full, RabbitMQ became
> unusable. This didn't change even after i made the disk usage drop
> dramatically.

You either need to free up more space or lower the disk_free_limit. See
the configuration guide:

 http://www.rabbitmq.com/configure.html

> Error description:
>    {error,corrupt_cluster_status_files,[]}

This is a separate problem and can be solved either by removing the
entire Mnesia directory or by removing the cluster_nodes.config file in
the Mnesia directory and reclustering if necessary.

> =INFO REPORT==== 25-Jun-2013::09:10:49 ===
> Disk free space insufficient. Free bytes:645095424 Limit:1000000000


This shows that there is insufficient free disk space. The broker will
not accept any messages until there is enough free disk space. See

 http://www.rabbitmq.com/memory.html#diskfreesup



-Emile











------------------------------

Message: 8
Date: Wed, 26 Jun 2013 11:38:36 +0100
From: Tim Watson <tim at rabbitmq.com<mailto:tim at rabbitmq.com>>
Subject: Re: [rabbitmq-discuss] RabbitMQ's Mirroring results in weird
        behavior when slave goes down
To: Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>>
Message-ID: <2F050250-E7F1-4543-B3C3-239885F7C9CB at rabbitmq.com<mailto:2F050250-E7F1-4543-B3C3-239885F7C9CB at rabbitmq.com>>
Content-Type: text/plain; charset=us-ascii

Hi Thomas,

Here are my thoughts (inline below). I'm not the greatest clustering/HA expert, but from what I can gather, I think what you're seeing might be a result of the combination of a network partition and the `autoheal' mode.

On 26 Jun 2013, at 06:24, thomas wrote:

> Hi Tim,
>
> Thanks for the reply. I am using rabbitmq 3.1.1 with autoheal for
> cluster_partition_handling.
>
> My test is just to find out the behavior of rabbitmq master should its slave
> goes down.

This is clearly documented on the website - RabbitMQ clusters /do not/ handle network partitions well. Things will probably go wrong. If the only issue you're running into is a busy producer getting blocked then that's great - the worst cases could have involved lost messages and all sorts.

Now, the intention with HA is *not* to go belly up in the face of disappearing slaves - quite the opposite. Quite why the master is suddenly blocking the producer I'm not sure - I'll discuss this with the rest of the team but it doesn't sound quite right to me.

> Approximately 10 seconds after I shut down the network connection of
> rabbit at B, the sending of messages to rabbit at A comes to a pause for close to
> a minute and then continues as per normal.
>

Just to be clear, in a RabbitMQ cluster there is no concept of a master node - only mirror queues introduce the master/slave concept, and then only for queues that are mirrored. Each mirrored queue's master can end up on different nodes, depending on which you were connect to when it was declared.

> Trying the same test but with no mirroring does not have any disruption.
>

That is not surprising, since the queue you're connected to isn't trying to replicate to any other nodes.

> By the way, I have try out the same test for rabbitmq mirroring except that
> there will be a delay of 10ms between sending every message and there was no
> disruption.
>

Can you share your test code? I'm surprised there is such a big difference, but still... If you've got a decent automated test that consistently replicates this failure mode and you're able to share it, we might be able to use it to make improvements to partition handling in the future. If not code, a test script (and description of how you're disabling the network link) with precise steps would do.

> From my observation it can be seen that RabbitMQ server will exhibit weird
> behavior under stress condition when a slave goes down. I presume this weird
> behavior will only surface under stress condition.
>

As I've stated before, clustering is not designed to handle network partitions. In previous versions of rabbit, when a partition occurred it was up to a system administrator to handle it. This usually involved stopping some (or all) of the nodes and restarting them. The 'autoheal' feature simply attempts to replicate what a sysadmin might do, and therefore (whilst cluster nodes are restarting) there can be delays. The intention is not to block the master (or producers), but depending on how the cluster partition is handled, that might be one of the potential side effects.

We will certainly take a look to see if this is avoidable - I can't comment on that right now - and being able to repeat the tests could help with that too.

> Is there a rough estimate for the maximum load that a RabbitMQ server can
> take per second for mirroring? Thanks.
>

I'm not sure whether mirroring is really the problem here. Mirrored queues can handle plenty of load, although there /is/ some performance slow down due to replication (and esp. so if you're using publisher confirms) but there is a not a specific limit - this is hardware/resource and use-case dependent. I suspect the problem /you/ have could be a combination of network partition and cluster partition resolution (i.e., autoheal) mode.

Based on http://www.rabbitmq.com/partitions.html, what I'd suggest is that you change 'autoheal' to 'ignore' and try your test again. That will either confirm or eliminate my suspicion quickly enough.

Cheers,
Tim



------------------------------

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


End of rabbitmq-discuss Digest, Vol 73, Issue 27
************************************************


________________________________

DISCLAIMER:
This email (including any attachments) is intended for the sole use of the intended recipient/s and may contain material that is CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or distribution or forwarding of any or all of the contents in this message is STRICTLY PROHIBITED. If you are not the intended recipient, please contact the sender by email and delete all copies; your cooperation in this regard is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/7063923c/attachment.htm>

From lrodriguez1995 at yahoo.com  Fri Jul  5 16:40:06 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 5 Jul 2013 08:40:06 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq ssl
Message-ID: <1373038806.55149.YahooMailNeo@web141101.mail.bf1.yahoo.com>

Hi all,
I have a single node rabbitmq-server installed running erlang R14b (host only network, no firewall).
trying to follow the tutorial on ssl. 
My goal is to use SSL encryption (not concerned about client and server 
validation) but apparently there is no shared cipher the client and 
server can use that requires no keys, so I created my certificate authority and finally got the server and client certificates working as well. (Thanks Michael)

After running my java client (pic) I get a "socket exception:connection reset" error
I tried troubleshooting it by attempting ssl connection to the broker but I get a write errno=104 (added broker log in pic as well)

does this mean I need to configure an AMQPS client?
and it it is so, then what's the easiest way of doing it..

many thanks in advance

Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/d20fba7a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl6.png
Type: image/png
Size: 287154 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/d20fba7a/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssl7.png
Type: image/png
Size: 51482 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/d20fba7a/attachment-0003.png>

From michael.s.klishin at gmail.com  Fri Jul  5 16:50:02 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 5 Jul 2013 19:50:02 +0400
Subject: [rabbitmq-discuss] rabbitmq ssl
In-Reply-To: <1373038806.55149.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1373038806.55149.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <CAE3HoVSH7vp12cyLTbV-LcYt3KZyk6Q+ZkgzghuVt8ZOkw8jyw@mail.gmail.com>

2013/7/5 Luis Rodriguez <lrodriguez1995 at yahoo.com>

> does this mean I need to configure an AMQPS client?
> and it it is so, then what's the easiest way of doing it..
>

You have CA file configured as /~/testca/cacert.pem and that path does not
exist.

You probably want ~/testca/cacert.pem, without the leading slash.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/b98740bf/attachment.htm>

From alan.antonuk at gmail.com  Fri Jul  5 16:54:32 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Fri, 5 Jul 2013 08:54:32 -0700
Subject: [rabbitmq-discuss] RabbitMQ Consumer timeout (Alan Antonuk)
In-Reply-To: <DD7729D61B083D48A2CDCB66A27AD4C98C5B2F@BSDMSATMBX001.mahindrasatyam.ad>
References: <DD7729D61B083D48A2CDCB66A27AD4C98C5B2F@BSDMSATMBX001.mahindrasatyam.ad>
Message-ID: <CAAt2poLsVm9u0B1_L+EpSm=gVeKn-vX4Hb0GqkVs0hOCYCWoAA@mail.gmail.com>

On Fri, Jul 5, 2013 at 6:52 AM, Lothe_Shashank <
Lothe_Shashank at mahindrasatyam.com> wrote:

>   I modified amqp_listen.c example and instead of amqp_simple_wait_frame
> I used *amqp_simple_wait_frame_noblock *with different timeout values.
> However this API is failing immediately with return value as -13. What this
> return value means?
>

Values returned from the library should be compared to values in the
amqp_status_enum (
https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp.h#L334)
 -13 I believe AMQP_STATUS_TIMEOUT.

Is there any other way of using timeout so that if I don't receive a frame
> within say 10ms I can reject that message.
>
> amqp_simple_wait_frame_noblock() operates at a low level: it doesn't deal
with messages, it deals with frames that make up the message.  The timeout
is specifying how long to wait for a single frame before giving up.

You would need to write some logic to wait for 10 ms for a complete
message, then call amqp_basic_reject() on any message received after that
moment.


>
> Another problem I am facing with *amqp_basic_reject* API. In amqp_listen.c
> example I called this API (with requeue=1) and I got following console
> output. After that it is not able to receive any message sent by
> amqp_send_string example.
>
> 00000000: 48 65 6C 6C 6F 20 57 6F : 72 6C 64                 Hello World
> 0000000B:
> Result 0
> Frame type 1, channel 1
> Method AMQP_CHANNEL_CLOSE_METHOD
>

When you receive a AMQP_CHANNEL_CLOSE METHOD it means that a channel
exception has occurred, any consumers on that channel have been shutdown,
and the channel can no longer be used.

You should cast frame.payload.method.decoded to amqp_channel_close_t* and
examine the reply_text and error_code to see what went wrong. I'm guessing
invalid parameters were sent when you used the amqp_basic_reject function.


>
> One more problem I would like to report. I have created a client 7
> different queues with 7 different channels and bound with 7 different
> binding keys on the same connection with direct exchange. The listening
> part of these 7 queues are with 7 different threads listening for server
> input.
>

rabbitmq-c is not threadsafe.  Using a connection from more than one thread
will result in undefined behavior.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/07c62f41/attachment.htm>

From lrodriguez1995 at yahoo.com  Fri Jul  5 17:16:46 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 5 Jul 2013 09:16:46 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq ssl
In-Reply-To: <CAE3HoVSH7vp12cyLTbV-LcYt3KZyk6Q+ZkgzghuVt8ZOkw8jyw@mail.gmail.com>
References: <1373038806.55149.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<CAE3HoVSH7vp12cyLTbV-LcYt3KZyk6Q+ZkgzghuVt8ZOkw8jyw@mail.gmail.com>
Message-ID: <1373041006.10840.YahooMailNeo@web141104.mail.bf1.yahoo.com>

Thanks for your response Michael,
I went ahead and changed the CA file to ~/testca/cacert.pem, restarted the broker, but getting the same error
(even tried deleting? the path to testca/cacert.pem but still the same thing).
open to any suggestoins..

thanks again

Luis




________________________________
 From: Michael Klishin <michael.s.klishin at gmail.com>
To: Luis Rodriguez <lrodriguez1995 at yahoo.com>; Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Friday, July 5, 2013 11:50 AM
Subject: Re: [rabbitmq-discuss] rabbitmq ssl
 




2013/7/5 Luis Rodriguez <lrodriguez1995 at yahoo.com>

does this mean I need to configure an AMQPS client?
>and it it is so, then what's the easiest way of doing it..
You have CA file configured as /~/testca/cacert.pem and that path does not exist.


You probably want ~/testca/cacert.pem, without the leading slash.
--?MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/46661396/attachment.htm>

From simon at rabbitmq.com  Fri Jul  5 17:30:50 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 05 Jul 2013 17:30:50 +0100
Subject: [rabbitmq-discuss] rabbitmq ssl
In-Reply-To: <1373041006.10840.YahooMailNeo@web141104.mail.bf1.yahoo.com>
References: <1373038806.55149.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<CAE3HoVSH7vp12cyLTbV-LcYt3KZyk6Q+ZkgzghuVt8ZOkw8jyw@mail.gmail.com>
	<1373041006.10840.YahooMailNeo@web141104.mail.bf1.yahoo.com>
Message-ID: <51D6F4BA.7060408@rabbitmq.com>

~ is a shell-ism, I'm not sure Erlang understands it. I would convert to 
a fully qualified path.

Cheers, Simon

On 05/07/2013 5:16PM, Luis Rodriguez wrote:
> Thanks for your response Michael,
> I went ahead and changed the CA file to ~/testca/cacert.pem, restarted
> the broker, but getting the same error
> (even tried deleting  the path to testca/cacert.pem but still the same
> thing).
> open to any suggestoins..
>
> thanks again
>
> Luis
>
>
> ------------------------------------------------------------------------
> *From:* Michael Klishin <michael.s.klishin at gmail.com>
> *To:* Luis Rodriguez <lrodriguez1995 at yahoo.com>; Discussions about
> RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com>
> *Sent:* Friday, July 5, 2013 11:50 AM
> *Subject:* Re: [rabbitmq-discuss] rabbitmq ssl
>
>
> 2013/7/5 Luis Rodriguez <lrodriguez1995 at yahoo.com
> <mailto:lrodriguez1995 at yahoo.com>>
>
>     does this mean I need to configure an AMQPS client?
>     and it it is so, then what's the easiest way of doing it..
>
>
> You have CA file configured as /~/testca/cacert.pem and that path does
> not exist.
>
> You probably want ~/testca/cacert.pem, without the leading slash.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From ceri at lshift.net  Fri Jul  5 17:34:26 2013
From: ceri at lshift.net (Ceri Storey)
Date: Fri, 05 Jul 2013 17:34:26 +0100
Subject: [rabbitmq-discuss] rabbitmq ssl
In-Reply-To: <1373041006.10840.YahooMailNeo@web141104.mail.bf1.yahoo.com>
References: <1373038806.55149.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<CAE3HoVSH7vp12cyLTbV-LcYt3KZyk6Q+ZkgzghuVt8ZOkw8jyw@mail.gmail.com>
	<1373041006.10840.YahooMailNeo@web141104.mail.bf1.yahoo.com>
Message-ID: <51D6F592.9070803@lshift.net>

(05/07/13 17:16), Luis Rodriguez wrote:
> Thanks for your response Michael,
> I went ahead and changed the CA file to ~/testca/cacert.pem, restarted
> the broker, but getting the same error
> (even tried deleting  the path to testca/cacert.pem but still the same
> thing).
> open to any suggestoins..
It's probably worth trying the full path to the certificate file (ie:
without the tilde), which should be something like:

/home/someuser/testca/cacert.pem, or /root/testca/cacert.pem if running
as root (although it's best to avoid that where possible).
>
> thanks again
>
> Luis
>
>
> ------------------------------------------------------------------------
> *From:* Michael Klishin <michael.s.klishin at gmail.com>
> *To:* Luis Rodriguez <lrodriguez1995 at yahoo.com>; Discussions about
> RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com>
> *Sent:* Friday, July 5, 2013 11:50 AM
> *Subject:* Re: [rabbitmq-discuss] rabbitmq ssl
>
>
> 2013/7/5 Luis Rodriguez <lrodriguez1995 at yahoo.com
> <mailto:lrodriguez1995 at yahoo.com>>
>
>     does this mean I need to configure an AMQPS client?
>     and it it is so, then what's the easiest way of doing it..
>
>
> You have CA file configured as /~/testca/cacert.pem and that path does
> not exist.
>
> You probably want ~/testca/cacert.pem, without the leading slash.
> -- 
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/301079fb/attachment.htm>

From simon at rabbitmq.com  Fri Jul  5 17:34:35 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 05 Jul 2013 17:34:35 +0100
Subject: [rabbitmq-discuss] Error when accessing management plugin
In-Reply-To: <51D67D19.4030006@gmail.com>
References: <51D67D19.4030006@gmail.com>
Message-ID: <51D6F59B.2050108@rabbitmq.com>

That is definitely very odd.

The only explanation I can think of is that there is somehow another 
copy of Mochiweb (of a different version) in your Erlang code path. We 
have sometimes seen this happen when using buggy RPM or deb packages for 
Erlang programs which are not RabbitMQ; sometimes these packages make 
the mistake of installing into the Erlang OTP directory and thus being 
forcibly visible to every running Erlang application.

Does that sound like something that could be happening?

Cheers, Simon

On 05/07/2013 9:00AM, Martin Dimitrov wrote:
> Hello,
>
> I get strange error when trying to access the management plugin HTTP
> endpoint. The error is:
>
> Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection
> without sending any data.
>
> In the logs I see:
>
> =CRASH REPORT==== 12-Apr-2013::04:44:54 ===
>    crasher:
>      initial call: mochiweb_acceptor:init/3
>      pid: <0.274.0>
>      registered_name: []
>      exception error: undefined function mochiweb_util:safe_relative_path/1
>        in function  mochiweb_request:serve_file/4
>        in call from mochiweb_http:headers/5
>      ancestors: [rabbit_mochiweb_sup_15672,rabbit_mochiweb_sup,<0.238.0>]
>      messages: []
>      links: [<0.261.0>,#Port<0.15975>]
>      dictionary: []
>      trap_exit: false
>      status: running
>      heap_size: 4185
>      stack_size: 27
>      reductions: 1628
>    neighbours:
>
> The version of RabbitMQ is 3.1.3 and here is a list of the enabled plugins:
>
> [e] amqp_client               3.1.3
> [e] mochiweb                  2.3.1-rmq3.1.3-gitd541e9a
> [E] rabbitmq_management       3.1.3
> [e] rabbitmq_management_agent 3.1.3
> [e] rabbitmq_web_dispatch     3.1.3
> [e] webmachine                1.9.1-rmq3.1.3-git52e62bc
>
> Very strange because mochiweb_util:safe_relative_path/1 is present in
> mochiweb_util module and the beam is inside the mochiweb package.
>
> Thank you very much for your time.
>
> Martin
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From simon at rabbitmq.com  Fri Jul  5 17:46:08 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 05 Jul 2013 17:46:08 +0100
Subject: [rabbitmq-discuss] What is occuered when the master node output
 warning log of msg_store_persistent ?
In-Reply-To: <CACi3n5JiS9zRUKWreGdeTdudK5A7FT3=kXQZWy09icip+-E1eQ@mail.gmail.com>
References: <CACi3n5KbKZVXToAOE_wmcQYF5dtEmLnUPNTqFs4F_g8oHBum_g@mail.gmail.com>
	<51D3F009.1080608@rabbitmq.com>
	<CACi3n5JiS9zRUKWreGdeTdudK5A7FT3=kXQZWy09icip+-E1eQ@mail.gmail.com>
Message-ID: <51D6F850.3020004@rabbitmq.com>

The only risk with that message is that the server will take a while to 
start up, since it has to reindex everything.

Cheers, Simon

On 04/07/2013 8:11PM, t.otoda wrote:
> Thank you for reply.
> I made sure we shut down the server using 'rabbitmqctl stop'.
> And our app disconnect the server when we shut down,
> so any loads didn't depend on it.
> Well, in case that message is output the server log,
> does our app  have risks to be affected by using it ?
>
>
> 2013/7/3 Simon MacMullen <simon at rabbitmq.com <mailto:simon at rabbitmq.com>>
>
>     This is nothing to do with master vs slave (which is a term applied
>     to individual queue-node combinations by the way, not to entire nodes).
>
>     That message means the broker was shut down unexpectedly, and it was
>     not able to trust its indices as a consequence. This can take quite
>     some time - so make sure you shut down the server properly (with
>     e.g. rabbitmqctl stop, or /etc/init.d/rabbitmq-server stop, or
>     stopping the Windows service).
>
>     Cheers, Simon
>
>
>     On 02/07/13 19:32, t.otoda wrote:
>
>         I use RabbitMQ 3.0.1 and have a cluster with 2 disk nodes.
>         When I stoped and restarted both, the master node output log below.
>            =WARNING REPORT==== 19-Jun-2013::23:56:59 ===
>         msg_store_persistent: recovery terms differ from present
>         rebuilding indices from scratch
>         Please tell me why this log is output
>         and what is occuered within RabbitMQ nodes.
>         I expect that
>         when a slave disk node is started,
>         the master node compares the indices it owns and the indices started
>         slave owns.
>         And then,
>         since the slave node was stopped by the abnormal way(?),
>         the indices differed from the other, and the master node output log.
>         Is this correct?
>            (?)For example, I stoped the node
>                  beore it becomes the new master node instead of the stopped
>         master node.
>         Thank you.
>
>
>         _________________________________________________
>         rabbitmq-discuss mailing list
>         rabbitmq-discuss at lists.__rabbitmq.com
>         <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>         https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss
>         <https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>
>
>
>     --
>     Simon MacMullen
>     RabbitMQ, Pivotal
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From llbgurs at gmail.com  Fri Jul  5 17:11:20 2013
From: llbgurs at gmail.com (linbo liao)
Date: Fri, 5 Jul 2013 09:11:20 -0700 (PDT)
Subject: [rabbitmq-discuss] Pika Client: Bad performance for basic_publish
 to durable mirror queue
Message-ID: <1e1d8a8a-122b-48ae-8d53-4b2b90a51add@googlegroups.com>

Hi,

I encounter a bad performance issue about pika, yesterday it works fine, 
but today performance of basci_publish got bad, it cost 2 or 3 second to 
finish one message, sometimes down to 7 seconds.

Pika is 0.9.13
RabbitMQ 3.1.0, Erlang R14B04   Queue is Durable
Python: 2.6
Platform: CentOS release 6.3 (Final) X64


My application deployed by django + uwsgi, django receiver the request and 
publish the request to rabbitmq.


*Simple Pika Client wrapper class*

import time
import logging

import pika
from pika import exceptions

logger = logging.getLogger('error')
logger.setLevel(logging.DEBUG)


class RabbitMQ:
    def __init__(self, host,  port,  username,  password):
        self._channel = None
        cred = pika.PlainCredentials(username, password)
        self._args = dict(host=host, port=port, credentials=cred, 
heartbeat_interval=25)
        try:
            self.reconnect()
        except exceptions.AMQPConnectionError, e:
            logger.error("Connection to MQ error")
            self._conn = None
            self._channel = None
            raise

    def close(self):
        if getattr(self, '_channel', None) is not None:
            self._channel.close()
            self._channel = None
        if getattr(self, '_conn', None) is not None:
            self._conn.close()
            self._conn = None

    def close_channel(self):
        if getattr(self, '_conn', None) is not None:
            self._channel.close()
            self._channel = None

    def reconnect(self):
        logger.error("reconnect to MQ ")
        self.close()
        self._conn = 
pika.BlockingConnection(pika.ConnectionParameters(**self._args))
        self._channel = self._conn.channel()

    def connect_isopen(self):
        return self._conn and self._conn.is_open

    def channel_isopen(self):
        return self._channel and self._channel.is_open

    def ensure_channel(self):
        if not self.connect_isopen or not self.channel_isopen():
            self.reconnect()

    def exchange_declare(self, name,  ex_type):
        self.ensure_channel()
        self._channel.exchange_declare(exchange=name, exchange_type=ex_type)

    def bind(self, ex,  queue,  routing_key):
        self.ensure_channel()
        self._channel.queue_bind(exchange=ex, queue=queue, 
routing_key=routing_key)

    def declare_queue(self, queue_name,  durable=True, exclusive=False, 
auto_delete=False, arguments=None):
        self.ensure_channel()
        self._channel.queue_declare(queue=queue_name, durable=durable, 
exclusive=exclusive, 
                                    auto_delete=auto_delete, 
arguments=arguments) 

    def confirm_delivery(self):
        self.ensure_channel()
        self._channel.confirm_delivery()  

    def force_data(self):
        self.ensure_channel()
        self._channel.force_data_events(True)  

    def publish_setup(self, ex_name, ex_type, queue_name, routing_key, 
              durable, exclusive, auto_delete, arguments):
        try:
            self.exchange_declare(ex_name, ex_type)
            self.declare_queue(queue_name, durable, exclusive, auto_delete, 
arguments)
            self.bind(ex_name, queue_name, routing_key)
            self.force_data()
            self.confirm_delivery()
        except Exception, e:
            logger.exception("Setup error %s" %str(e))
            raise

    def _publish(self, exchange, routing_key, body, delivery_mode=2):
        start = time.time()
        self.ensure_channel()

        # Send a message
        if self._channel.basic_publish(exchange=exchange,   
#pika.exceptions.ConnectionClosed:
                                       routing_key=routing_key,
                                       body=body,
                                      
 properties=pika.BasicProperties(content_type='text/plain',
                                       delivery_mode=delivery_mode)): 
 #durable=True and delivery_mode=2 is persistent
            end = time.time()
            logger.info('cost time %f' % (end-start))
            return 0 #'Message publish was confirmed'
        else:
            logger.info('publish error')
            return -1 # 'Message publish was not confirmed'

    def publish(self, exchange, routing_key, body):
        try:
            return self._publish(exchange, routing_key, body)
        except Exception,e:
            logger.exception("Publish error %s" % str(e))
            raise

    def setup_consume(self, callback, queue_name):
        self.ensure_channel()
        self._channel.basic_consume(callback, queue_name)

    def start_consume(self):
        self.ensure_channel()
        self._channel.start_consuming()

    def stop_consume(self):
        self.ensure_channel()
        self._channel.stop_consuming()

    def __del__(self):
        self.close()


*Django code here is :*

queue_args = {"x-ha-policy" : "all" }

global g_mq = None
try:     
    g_mq = RabbitMQ(host=cf['host'], port=cf['port'],
                            username=cf['username'], 
password=cf['password'])
                 
    g_mq.publish_setup(ex_name=cf['exchange'], ex_type=cf['ex_type'], 
                      queue_name=cf['queue'], routing_key=cf['route_key'],
                      durable=True, exclusive=False, auto_delete=False,
                      arguments=queue_args)
except Exception,e:
   ERR_LOG.info(cf['exchange'])
   ERR_LOG.exception("Setup rabbitmq error %s" % str(e))
   g_mq = None
   return
                     
try:         
    return g_mq.publish(ex_name, route_key,msg)
except Exception,e:
    ERR_LOG.exception("Publish rabbitmq error %s" % str(e))
    g_mq = None
 

*I enable the uwsgi profiler, saw some information:*

[uWSGI Python profiler 10124] CALL: 
build/bdist.linux-x86_64/egg/pika/adapters/blocking_connection.py (line 
344) -> _flush_outbound 1 args, stacksize 5


Any solution about the issue?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/1e466fc9/attachment.htm>

From lrodriguez1995 at yahoo.com  Fri Jul  5 17:58:17 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 5 Jul 2013 09:58:17 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq ssl
In-Reply-To: <51D6F592.9070803@lshift.net>
References: <1373038806.55149.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<CAE3HoVSH7vp12cyLTbV-LcYt3KZyk6Q+ZkgzghuVt8ZOkw8jyw@mail.gmail.com>
	<1373041006.10840.YahooMailNeo@web141104.mail.bf1.yahoo.com>
	<51D6F592.9070803@lshift.net>
Message-ID: <1373043497.24625.YahooMailNeo@web141101.mail.bf1.yahoo.com>

Thank you very much..
It worked using the full path (i.e. /root/testca/cacert.pem)..


luis




________________________________
 From: Ceri Storey <ceri at lshift.net>
To: rabbitmq-discuss at lists.rabbitmq.com 
Sent: Friday, July 5, 2013 12:34 PM
Subject: Re: [rabbitmq-discuss] rabbitmq ssl
 


(05/07/13 17:16), Luis Rodriguez wrote:

Thanks for your response Michael,
>I went ahead and changed the CA file to ~/testca/cacert.pem,
        restarted the broker, but getting the same error
>(even tried deleting? the path to testca/cacert.pem but still
        the same thing).
>open to any suggestoins..
>
It's probably worth trying the full path to the certificate file (ie: without the tilde), which should be something like:

/home/someuser/testca/cacert.pem, or /root/testca/cacert.pem if running as root (although it's best to avoid that where possible). 


>thanks again
>
>Luis
>
>
>
>
>
>
>________________________________
> From: Michael Klishin <michael.s.klishin at gmail.com>
>To: Luis Rodriguez <lrodriguez1995 at yahoo.com>; Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com> 
>Sent: Friday, July 5, 2013 11:50 AM
>Subject: Re: [rabbitmq-discuss] rabbitmq ssl
> 
>
>
>
>
>2013/7/5 Luis Rodriguez <lrodriguez1995 at yahoo.com>
>
>does this mean I need to configure an AMQPS client?
>>and it it is so, then what's the easiest way
                          of doing it..
>You have CA file configured as /~/testca/cacert.pem
                    and that path does not exist.
>
>
>You probably want ~/testca/cacert.pem, without the leading slash.
>--?
MK
>
>http://github.com/michaelklishin
>http://twitter.com/michaelklishin
>
>
>
>
>
>_______________________________________________
rabbitmq-discuss mailing list rabbitmq-discuss at lists.rabbitmq.com https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss 

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/c3e4f2f4/attachment.htm>

From mrtndimitrov at gmail.com  Fri Jul  5 21:08:51 2013
From: mrtndimitrov at gmail.com (Martin Dimitrov)
Date: Fri, 05 Jul 2013 23:08:51 +0300
Subject: [rabbitmq-discuss] Error when accessing management plugin
In-Reply-To: <51D6F59B.2050108@rabbitmq.com>
References: <51D67D19.4030006@gmail.com> <51D6F59B.2050108@rabbitmq.com>
Message-ID: <51D727D3.4090205@gmail.com>

Hi, I ran code:is_loaded(mochiweb_util). and it returns false. How can I
connect to the RabbitMQ node?

Thanks very much for your help.

Martin


On 7/5/2013 7:34 PM, Simon MacMullen wrote:
> That is definitely very odd.
> 
> The only explanation I can think of is that there is somehow another
> copy of Mochiweb (of a different version) in your Erlang code path. We
> have sometimes seen this happen when using buggy RPM or deb packages for
> Erlang programs which are not RabbitMQ; sometimes these packages make
> the mistake of installing into the Erlang OTP directory and thus being
> forcibly visible to every running Erlang application.
> 
> Does that sound like something that could be happening?
> 
> Cheers, Simon
> 
> On 05/07/2013 9:00AM, Martin Dimitrov wrote:
>> Hello,
>>
>> I get strange error when trying to access the management plugin HTTP
>> endpoint. The error is:
>>
>> Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection
>> without sending any data.
>>
>> In the logs I see:
>>
>> =CRASH REPORT==== 12-Apr-2013::04:44:54 ===
>>    crasher:
>>      initial call: mochiweb_acceptor:init/3
>>      pid: <0.274.0>
>>      registered_name: []
>>      exception error: undefined function
>> mochiweb_util:safe_relative_path/1
>>        in function  mochiweb_request:serve_file/4
>>        in call from mochiweb_http:headers/5
>>      ancestors: [rabbit_mochiweb_sup_15672,rabbit_mochiweb_sup,<0.238.0>]
>>      messages: []
>>      links: [<0.261.0>,#Port<0.15975>]
>>      dictionary: []
>>      trap_exit: false
>>      status: running
>>      heap_size: 4185
>>      stack_size: 27
>>      reductions: 1628
>>    neighbours:
>>
>> The version of RabbitMQ is 3.1.3 and here is a list of the enabled
>> plugins:
>>
>> [e] amqp_client               3.1.3
>> [e] mochiweb                  2.3.1-rmq3.1.3-gitd541e9a
>> [E] rabbitmq_management       3.1.3
>> [e] rabbitmq_management_agent 3.1.3
>> [e] rabbitmq_web_dispatch     3.1.3
>> [e] webmachine                1.9.1-rmq3.1.3-git52e62bc
>>
>> Very strange because mochiweb_util:safe_relative_path/1 is present in
>> mochiweb_util module and the beam is inside the mochiweb package.
>>
>> Thank you very much for your time.
>>
>> Martin
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>


From mrtndimitrov at gmail.com  Fri Jul  5 22:10:55 2013
From: mrtndimitrov at gmail.com (Martin Dimitrov)
Date: Sat, 06 Jul 2013 00:10:55 +0300
Subject: [rabbitmq-discuss] Error when accessing management plugin
In-Reply-To: <51D6F59B.2050108@rabbitmq.com>
References: <51D67D19.4030006@gmail.com> <51D6F59B.2050108@rabbitmq.com>
Message-ID: <51D7365F.8040004@gmail.com>

You are absolutely right. When I connected to the same node, I saw that
a tsung version is used:

1> code:is_loaded(mochiweb_util).
{file,"/usr/local/lib/erlang/lib/tsung-1.5.0a/ebin/mochiweb_util.beam"}

What can I do from here on?

Thanks.

Martin

On 7/5/2013 7:34 PM, Simon MacMullen wrote:
> That is definitely very odd.
> 
> The only explanation I can think of is that there is somehow another
> copy of Mochiweb (of a different version) in your Erlang code path. We
> have sometimes seen this happen when using buggy RPM or deb packages for
> Erlang programs which are not RabbitMQ; sometimes these packages make
> the mistake of installing into the Erlang OTP directory and thus being
> forcibly visible to every running Erlang application.
> 
> Does that sound like something that could be happening?
> 
> Cheers, Simon
> 
> On 05/07/2013 9:00AM, Martin Dimitrov wrote:
>> Hello,
>>
>> I get strange error when trying to access the management plugin HTTP
>> endpoint. The error is:
>>
>> Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection
>> without sending any data.
>>
>> In the logs I see:
>>
>> =CRASH REPORT==== 12-Apr-2013::04:44:54 ===
>>    crasher:
>>      initial call: mochiweb_acceptor:init/3
>>      pid: <0.274.0>
>>      registered_name: []
>>      exception error: undefined function
>> mochiweb_util:safe_relative_path/1
>>        in function  mochiweb_request:serve_file/4
>>        in call from mochiweb_http:headers/5
>>      ancestors: [rabbit_mochiweb_sup_15672,rabbit_mochiweb_sup,<0.238.0>]
>>      messages: []
>>      links: [<0.261.0>,#Port<0.15975>]
>>      dictionary: []
>>      trap_exit: false
>>      status: running
>>      heap_size: 4185
>>      stack_size: 27
>>      reductions: 1628
>>    neighbours:
>>
>> The version of RabbitMQ is 3.1.3 and here is a list of the enabled
>> plugins:
>>
>> [e] amqp_client               3.1.3
>> [e] mochiweb                  2.3.1-rmq3.1.3-gitd541e9a
>> [E] rabbitmq_management       3.1.3
>> [e] rabbitmq_management_agent 3.1.3
>> [e] rabbitmq_web_dispatch     3.1.3
>> [e] webmachine                1.9.1-rmq3.1.3-git52e62bc
>>
>> Very strange because mochiweb_util:safe_relative_path/1 is present in
>> mochiweb_util module and the beam is inside the mochiweb package.
>>
>> Thank you very much for your time.
>>
>> Martin
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>


From dmitry.andrianov at alertme.com  Fri Jul  5 23:10:50 2013
From: dmitry.andrianov at alertme.com (Dmitry Andrianov)
Date: Fri, 5 Jul 2013 23:10:50 +0100
Subject: [rabbitmq-discuss] Ghost consumers problem
In-Reply-To: <CAC_Or=Q8YyzKdnkSzga+JBzsFakT1rV21agXJ5HS1+sBS0e6sg@mail.gmail.com>
References: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
	<CAE3HoVTU09BFj=s_C3MSWK44oaQ_k-NVkCA8kGKQ=STSNdNoRQ@mail.gmail.com>
	<CAC_Or=Q8YyzKdnkSzga+JBzsFakT1rV21agXJ5HS1+sBS0e6sg@mail.gmail.com>
Message-ID: <DC4E694A-598C-431D-A253-698E231C68BE@alertme.com>

But what is your problem exactly? Yes, for some time that "ghost" connection may be present until server realises the client has gone but I do not see how it prevents your service from successfully restarting.
If you declare queue as auto-delete, non-durable, non-exclusive and your user is permitted to do it the first time, then later when your service restarts and the queue already exists, you will still be able to declare it again with the same parameters. It won't cause error. So your second service will be able to start consuming from the same queue.

However, I have a strong feeling that what you really need instead is exclusive queue which you declare without providing a name so the server chooses a random name for you. So each time your service starts - a new queue is created and it ceases to exist when connection disappears. (Which can still take long but it should not be a problem as when new service starts - a new queue is created for it)

What is wrong with this approach?


On 4 Jul 2013, at 17:27, Jose Ramon Palanco <jpalanco at gmail.com> wrote:

> Michael,
> 
> Thank you for your quick reponse. We only need one consumer per queue. We already have AD (autodelete) and durable is setted to false. We tried exclusive and non-exclusive. We still have ghost connections and consumers even when the computers running the clients are powered off.
> 
> Console:
> http://img827.imageshack.us/img827/9159/pce2.png
> 
> I read that it could be due the NAT, but I have reproduced the same issue connected directly.
> 
> 
> 
> Regards
> 
> 
> 2013/7/4 Michael Klishin <michael.s.klishin at gmail.com>
>> 
>> 2013/7/4 Jose Ramon Palanco <jpalanco at gmail.com>
>>> After reboot, the service starts and when trying to create the queue, it conflicts with the former queue. We tried to create the queue as exclusive, but it doesn't allow us to connect because we haven't permission.
>> 
>> Is it because you have multiple connections using the queue?
>> 
>> If you consumer from the queue, you can declare it as auto-delete and non-durable instead of exclusive. Then as soon as the last consumer (registered with basic.consume, not using basic.get) is gone, it will be deleted.
>> -- 
>> MK
>> 
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


This email is for the use of the intended recipient(s) only.
If you have received this email in error, please notify the sender immediately and then delete it.
If you are not the intended recipient, you must not use, disclose or distribute this email without the
author's prior permission. AlertMe.com Ltd. is not responsible for any personal views expressed
in this message or any attachments that are those of the individual sender.

AlertMe.com Ltd, 30 Station Road, Cambridge, CB1 2RE, UK.
Registered in England, Company number 578 2908, VAT registration number GB 895 9914 42.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/5f76ceee/attachment.htm>

From matthias at rabbitmq.com  Fri Jul  5 23:58:51 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 05 Jul 2013 23:58:51 +0100
Subject: [rabbitmq-discuss] Error when accessing management plugin
In-Reply-To: <51D7365F.8040004@gmail.com>
References: <51D67D19.4030006@gmail.com> <51D6F59B.2050108@rabbitmq.com>
	<51D7365F.8040004@gmail.com>
Message-ID: <51D74FAB.8070304@rabbitmq.com>

On 05/07/13 22:10, Martin Dimitrov wrote:
> You are absolutely right. When I connected to the same node, I saw that
> a tsung version is used:
>
> 1> code:is_loaded(mochiweb_util).
> {file,"/usr/local/lib/erlang/lib/tsung-1.5.0a/ebin/mochiweb_util.beam"}
>
> What can I do from here on?

Uninstall tsung.

Matthias.

From ashok.anand at gmail.com  Sat Jul  6 06:16:31 2013
From: ashok.anand at gmail.com (Ashok Anand)
Date: Sat, 6 Jul 2013 10:46:31 +0530
Subject: [rabbitmq-discuss] load distribution among queue consumers and
 consumer_tag in non-exclusive mode
Message-ID: <CALQsBOVDFg7z5Z0oxEpYx+JzJXwpS7=C2rMUuoJ7-vKkOSbmrg@mail.gmail.com>

I am looking at message distribution among multiple consumers listening to
the same queue..   Should these consumers use different consumer tags?

I tried with non-exclusive access to the queue with 4 consumers using same
consumer tag. My question is whether using same consumer tag will give
predicted behavior - or I must use different consumer tags.

I did find that messages get distributed among 4 consumers in round-robin
manner even using same consumer tag.  Just wondering if this happened by
chance, and ideally, these consumers must use different customer tags? I am
not sure about semantics of consumer tags in non-exclusive mode access..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130706/971c7861/attachment.htm>

From watson.timothy at gmail.com  Sat Jul  6 07:59:41 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Sat, 6 Jul 2013 07:59:41 +0100
Subject: [rabbitmq-discuss] load distribution among queue consumers and
	consumer_tag in non-exclusive mode
In-Reply-To: <CALQsBOVDFg7z5Z0oxEpYx+JzJXwpS7=C2rMUuoJ7-vKkOSbmrg@mail.gmail.com>
References: <CALQsBOVDFg7z5Z0oxEpYx+JzJXwpS7=C2rMUuoJ7-vKkOSbmrg@mail.gmail.com>
Message-ID: <A727F1D1-416F-41DC-93B7-472D9F48B4E8@rabbitmq.com>

Tags uniquely identify consumers in a channel and are used in some methods 
such as basic.cancel. They won't affect delivery and can be duplicated across different channels. The server will also allocate them if you do not.

Cheers
Tim

On 6 Jul 2013, at 06:16, Ashok Anand <ashok.anand at gmail.com> wrote:

> I am looking at message distribution among multiple consumers listening to the same queue..   Should these consumers use different consumer tags? 
> 
> I tried with non-exclusive access to the queue with 4 consumers using same consumer tag. My question is whether using same consumer tag will give predicted behavior - or I must use different consumer tags. 
> 
> I did find that messages get distributed among 4 consumers in round-robin manner even using same consumer tag.  Just wondering if this happened by chance, and ideally, these consumers must use different customer tags? I am not sure about semantics of consumer tags in non-exclusive mode access..
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From jose.palanco at hazent.com  Sat Jul  6 09:56:22 2013
From: jose.palanco at hazent.com (=?ISO-8859-1?Q?Jos=E9_Ram=F3n_Palanco?=)
Date: Sat, 6 Jul 2013 10:56:22 +0200
Subject: [rabbitmq-discuss] Ghost consumers problem
In-Reply-To: <51D586D8.4070901@rabbitmq.com>
References: <CAC_Or=Td2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A@mail.gmail.com>
	<51D586D8.4070901@rabbitmq.com>
Message-ID: <CAECybx58Ejui=P4kzAg5+eFzjfr0JKn8gLQx6rC-TSKE-B3HoA@mail.gmail.com>

Thank you Simon,

We will try this feature (we need to upgrade the librabbit-c) the support
for heartbeat was added 9 days ago.

Regards


2013/7/4 Simon MacMullen <simon at rabbitmq.com>

> AMQP heartbeats should solve this problem. Since 3.0.0 the server attempts
> to negotiate heartbeats by default but I don't know what rabbitmq-c does
> in response to that; given its low-level nature I imagine you have to do
> some work to get them running so they would be disabled by default.
>
> Cheers, Simon
>



*


--
Jos? Ram?n Palanco


<http://www.hazent.com>

Castilla 31, 3?B, Madrid
28039 Madrid Spain (GMT+2)
M?vil: 622 331 955

Want us to meet?
 <http://tungle.me/jose.palanco>

Este correo electr?nico puede contener informaci?n reservada y/o
confidencial, destinada exclusivamente para el uso del destinatario. Si
Vd no es el destinatario o la persona encargada de distribuirlo, no est?
autorizado a copiar o entregar esta comunicaci?n a ninguna otra
persona. Si ha recibido este correo electr?nico por error, le rogamos
nos lo notifique inmediatamente por  tel?fono o por el mismo medio.
Gracias.

Privilege/Confidential Information may be contained in this e-mail and
is intended only for use of the addressee. If you are not  the addressee,
or the person responsible for delivering it to the person addressed, you
may not copy or deliver this to anyone else. If you receive this e-mail by
mistake, please notify us immediately by telephone or e-mail.

*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130706/c3573da8/attachment.htm>

From tonygarnockjones+rabbitmq at gmail.com  Sat Jul  6 19:32:35 2013
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Sat, 6 Jul 2013 14:32:35 -0400
Subject: [rabbitmq-discuss] Binary builds of the UDP and Presence Exchange
	plugins
Message-ID: <CAM8fPiRt6s5BZUvXNgv83yZRVBOkcFNL3WVuNk39sV6pfitsng@mail.gmail.com>

Hi all,

I've made available binary builds of the UDP Exchange and Presence Exchange
plugins that I wrote:
http://eighty-twenty.org/tech/rabbitmq/binary-plugins.html

I'll endeavour to keep the page up-to-date as new releases come out. I'll
be signing the plugins with my GPG key (
http://homepages.kcbbs.gen.nz/tonyg/gpg-key-gmail.txt).

Cheers,
  Tony
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130706/48d98d1a/attachment.htm>

From ashok.anand at gmail.com  Sun Jul  7 04:15:12 2013
From: ashok.anand at gmail.com (Ashok Anand)
Date: Sun, 7 Jul 2013 08:45:12 +0530
Subject: [rabbitmq-discuss] load distribution among queue consumers and
 consumer_tag in non-exclusive mode
In-Reply-To: <A727F1D1-416F-41DC-93B7-472D9F48B4E8@rabbitmq.com>
References: <CALQsBOVDFg7z5Z0oxEpYx+JzJXwpS7=C2rMUuoJ7-vKkOSbmrg@mail.gmail.com>
	<A727F1D1-416F-41DC-93B7-472D9F48B4E8@rabbitmq.com>
Message-ID: <CALQsBOWjdt18KENsvU=YEFm-YrRQhGBhGXG-w7gK=b7ZpriKug@mail.gmail.com>

I see. so tags does not affect delivery. If I have 4 channels reading from
same queue, messages will be distributed across 4 channels.

Another question I had, regarding reading multiple messages. Consider a
distributed WAN deployment situation, where consumer and rabbitmq broker
are 60 ms apart (RTT of 120 ms). If consumer can get only one message from
queue in one read, then it can only get 7-8 messages/second. We can use
multi-threading, but if there is support of reading multiple messages in
one read, that could improve the read rate even in WAN deployment and with
single thread - I was wondering if there is a support for such read or if
there is a plan..


On Sat, Jul 6, 2013 at 12:29 PM, Tim Watson <watson.timothy at gmail.com>wrote:

> Tags uniquely identify consumers in a channel and are used in some methods
> such as basic.cancel. They won't affect delivery and can be duplicated
> across different channels. The server will also allocate them if you do not.
>
> Cheers
> Tim
>
> On 6 Jul 2013, at 06:16, Ashok Anand <ashok.anand at gmail.com> wrote:
>
> > I am looking at message distribution among multiple consumers listening
> to the same queue..   Should these consumers use different consumer tags?
> >
> > I tried with non-exclusive access to the queue with 4 consumers using
> same consumer tag. My question is whether using same consumer tag will give
> predicted behavior - or I must use different consumer tags.
> >
> > I did find that messages get distributed among 4 consumers in
> round-robin manner even using same consumer tag.  Just wondering if this
> happened by chance, and ideally, these consumers must use different
> customer tags? I am not sure about semantics of consumer tags in
> non-exclusive mode access..
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130707/744917fb/attachment.htm>

From watson.timothy at gmail.com  Sun Jul  7 09:40:19 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Sun, 7 Jul 2013 09:40:19 +0100
Subject: [rabbitmq-discuss] load distribution among queue consumers and
	consumer_tag in non-exclusive mode
In-Reply-To: <CALQsBOWjdt18KENsvU=YEFm-YrRQhGBhGXG-w7gK=b7ZpriKug@mail.gmail.com>
References: <CALQsBOVDFg7z5Z0oxEpYx+JzJXwpS7=C2rMUuoJ7-vKkOSbmrg@mail.gmail.com>
	<A727F1D1-416F-41DC-93B7-472D9F48B4E8@rabbitmq.com>
	<CALQsBOWjdt18KENsvU=YEFm-YrRQhGBhGXG-w7gK=b7ZpriKug@mail.gmail.com>
Message-ID: <683BEB67-77C7-429A-9259-3D2D7366522E@rabbitmq.com>

On 7 Jul 2013, at 04:15, Ashok Anand <ashok.anand at gmail.com> wrote:

> Another question I had, regarding reading multiple messages. Consider a distributed WAN deployment situation, where consumer and rabbitmq broker are 60 ms apart (RTT of 120 ms). If consumer can get only one message from queue in one read, then it can only get 7-8 messages/second.

Are you assuming the use of a synchronous method such as basic.get? Otherwise the consumer can avoid the round trip by using streaming delivery with basic.consume instead.

> We can use  multi-threading, but if there is support of reading multiple messages in one read, that could improve the read rate even in WAN deployment and with single thread - I was wondering if there is a support for such read or if there is a plan.. 
> 
> 

The broker won't batch messages, though if you're using basic.consume with a prefetch count > 1 your clients can ack or reject multiple messages easily.

Your application can batch messages itself of course, if that offers particular advantages for your specific deployment topology. We've had several people ask for this feature in the past. One of the problems with it is that confirms and transactions would be difficult in the face of batches, and since it's very easy to do it at the application layer, it doesn't seem worth the cost in complexity. Besides, batching tends to be useful in synchronous protocols, whereas AMQP publishing and consuming is asynchronous by default. And of course you can have packets coalesced at the tcp layer by turning on nagle's algorithm, though we tend to disable that for producers.

Cheers,
Tim

From carl.hoerberg at gmail.com  Sun Jul  7 22:01:23 2013
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Sun, 7 Jul 2013 14:01:23 -0700 (PDT)
Subject: [rabbitmq-discuss] DOS protection
Message-ID: <1373230883053-27876.post@n5.nabble.com>

I've experienced some trouble with clients that intentionally or accidentally
creates a huge amount of channels, consumers or queues (10.000 - 100.000).
And they do it faster than that be detected between the 5 sec mgmt
information updates so the server(s) runs out of memory and we're unable to
detect or take action against it before it's too late. 

Is it possible to create a plugin that will monitor new
channels/consumers/declarations in real-time and block (disconnect) if too
many are made in a short amount of time? 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/DOS-protection-tp27876.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From houxuehua49 at gmail.com  Mon Jul  8 06:07:59 2013
From: houxuehua49 at gmail.com (richmonkey)
Date: Sun, 7 Jul 2013 22:07:59 -0700 (PDT)
Subject: [rabbitmq-discuss] cluster memory alarm blocks producer too long
In-Reply-To: <51CBE111.5060905@rabbitmq.com>
References: <6585d4ed-400d-451f-8dc4-511900bf4e45@googlegroups.com>
	<51C18169.7080108@rabbitmq.com>
	<1371700372306-27507.post@n5.nabble.com>
	<51CBE111.5060905@rabbitmq.com>
Message-ID: <1373260079251-27877.post@n5.nabble.com>

Thanks for your reply.
I have decided not to use rabbitmq mirror queue.
The testing working is stopped.
To reproduce the problem, just start a little of very simple producer and a
little of very simple consumer followed the step that I mentioned. 
If you really need my producer and consumer codes, later I will show it.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/cluster-memory-alarm-blocks-producer-too-long-tp27473p27877.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Mon Jul  8 08:11:57 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 8 Jul 2013 00:11:57 -0700 (PDT)
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX 11.31
Message-ID: <1373267517377-27878.post@n5.nabble.com>

Hi there

My application uses  library rabbitmq-c and sometimes it crashes on HP-UX
11.31 with below stack:
#0 0xc00000000054bc70:0 in _waitpid_sys+0x30 () from /lib/hpux64/libc.so.1
#1 0xc000000000562b80:0 in waitpid ()
#2 0xc00000000a3d9e00:0 in <unknown_procedure> + 0xa0 ()
#3 0xc00000000a3da280:0 in <unknown_procedure> + 0x90 ()
#4 <signal handler called>
#5 0xc000000000211ab0:0 in _lwp_kill+0x30 () from
/lib/hpux64/libpthread.so.1
#6 0xc000000000178810:0 in pthread_kill ()
#7 0xc0000000003f8140:0 in raise ()
#8 0xc000000000508d00:0 in abort ()
#9 0xc0000000043df860:0 in amqp_abort (
#10 0xc0000000043e06f0:0 in amqp_handle_input (state=0x600000000480bc60, 
#11 0xc0000000043e1fe0:0 in wait_frame_inner (state=0x600000000480bc60, 
#12 0xc00000000a9b4ad0:0 in RabbitMQ::RabbitMQQueueImpl::recv (
#13 0xc00000000a992ee0:0 in consumer_impl::execute (this=0x600000000428edf8)
#14 0xc00000000a436af0:0 in threads::thread_proc(void*)+0x1c0 ()
#15 0xc00000000013fb20:0 in __pthread_bound_body () 

And in log file I can see following message:
Failed to start consumer with configurationInternal error: invalid
amqp_connection_state_t->state 0

So as I understand, I get corrupted packet and as a result abort is called
from amqp_abort.

I think it isn't a good idea to call abort into library because my
application is crashed and I can't 
managed this situation (for example clean resources and reconnect or
something else).

Is it possible to remove abort function from library?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Program-crashes-in-amqp-abort-on-HP-UX-11-31-tp27878.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Mon Jul  8 08:25:06 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 8 Jul 2013 00:25:06 -0700 (PDT)
Subject: [rabbitmq-discuss] Make queue.bind after basic.consume (rabbitmq-c)
Message-ID: <1373268306518-27879.post@n5.nabble.com>

Hi there

Is it safety to call queue.bind after basic.consume?

I use this test case and sometimes my program hangs on:
0: c000000000546f10 : __syscall_0504() + 0x30 (/lib/hpux64/libc.so.1)
1: c0000000000257a0 : __recv() at /ux/core/lan/src/NET/libxnet/x_recv.c:34 
2: c0000000043e2080 : wchar_t() at amqp_socket.c:220 
3: c0000000043e24b0 : signed char() at amqp_socket.c:316 
4: c0000000043e2960 : signed char() at amqp_socket.c:385 
5: c0000000043d6be0 : signed char() at amqp_framing.c:1953 
6: c00000000a9b34d0 :
RabbitMQ::RabbitMQQueueImpl::bind(RabbitMQ::RabbitMQExchange*,std::basic_string<char,std::char_traits&lt;char>,std::allocator<char>
> const&)() at RabbitMQQueueImpl.cpp:167 

So maybe this test case is wrong and I should call basic.cancel befor I can
call queue.bind again?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Make-queue-bind-after-basic-consume-rabbitmq-c-tp27879.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Mon Jul  8 08:29:09 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 08 Jul 2013 08:29:09 +0100
Subject: [rabbitmq-discuss] cluster memory alarm blocks producer too long
In-Reply-To: <1373260079251-27877.post@n5.nabble.com>
References: <6585d4ed-400d-451f-8dc4-511900bf4e45@googlegroups.com>
	<51C18169.7080108@rabbitmq.com>
	<1371700372306-27507.post@n5.nabble.com>
	<51CBE111.5060905@rabbitmq.com>
	<1373260079251-27877.post@n5.nabble.com>
Message-ID: <51DA6A45.4020504@rabbitmq.com>

On 08/07/13 06:07, richmonkey wrote:
> I have decided not to use rabbitmq mirror queue.
> The testing working is stopped.

Just to be clear, are you saying that the problem went away when using 
ordinary, non-mirrored queues?

> To reproduce the problem, just start a little of very simple producer and a
> little of very simple consumer followed the step that I mentioned.

I tried that and cannot reproduce the problem.

I don't have the exact same environment - I'm on Ubuntu rather than 
centos and ran the two nodes on a single machine with 12GB of RAM, 
dropping the vm_memory_highwatermark to 0.2 to compensate for the 
sharing - but that shouldn't make a difference.

I set the ha policy with

   rabbitmqctl set_policy ha-all "^ha\." '{"ha-mode":"all"}'

and then ran our universal MulticastMain test program that ships with 
the Java client, as follows...

1) sh ./runjava.sh com.rabbitmq.examples.MulticastMain -u ha.q -x 4 -n 2 
-q 1 -f persistent

This creates a durable queue named 'ha.q' to which the above mirroring 
policy applies, and starts four producers that publish tiny (tens of 
bytes) persistent messages to it

I then watched the queue length with 'rabbitmqctl list_queues' and when 
it hit ~1M (after about 3 minutes) I ran a second instance of 
MulticastMain with

2) sh ./runjava.sh com.rabbitmq.examples/MulticastMain -u ha.q -x 0 -f 
persistent -y 4

This starts four consumers that consume from the above queue in 'ack' mode.


I can run the above forever without hitting the memory alarm on either 
the node with the queue master or slave.


So I am guessing your test is not quite as straightforward as you 
describe. Or our test environments are too different. To rule out the 
latter, please run the above test against your setup and report whether 
you are seeing memory alarms, and pro-longed memory alarms at the slave, 
which you encounter in your own tests.


Regards,

Matthias.

From peter at vagaband.co  Sun Jul  7 19:10:27 2013
From: peter at vagaband.co (peter at vagaband.co)
Date: Sun, 7 Jul 2013 11:10:27 -0700 (PDT)
Subject: [rabbitmq-discuss] Atomic acking of a specific set of messages
Message-ID: <50dd1405-31ea-44e9-8e8b-4fc531558784@googlegroups.com>

I'm trying to use RabbitMQ with Storm (for processing a stream of messages) 
using Trident (a high level abstraction on top of Storm). In order to gain 
exactly-once processing of messages with Storm, I need to be able to create 
a Storm spout that can retrieve a batch of messages from RabbitMQ and 
ack/fail them as a batch as an atomic unit. While amqp protocol or rabbitmq 
specific extensions to it does not seem to support this in an obvious 
manner, is there some pattern I could implement using what RabbitMQ 
provides to achieve this?

The flag to indicate you're acking multiple messages will not work as that 
limits you to work with just one batch, right? And you cannot pick and 
choose which batch of messages you can or cannot ack with that mode (i.e. 
batch 2 might succeed, batch 3 might fail and batch 4 might succeed. so if 
you ack batch 4, everything will be acked).

Can I use a consistent hashing exchange (or something to the effect by 
writing my own exchange plugin) to a select a batch of messages and route 
them to a specific queue and once all the messages in that queue (i.e. the 
queue is the batch), then the queue is discarded?

The key here is treat a batch of messages as an atomic unit so if a single 
message consumer node dies or all message consumer nodes die or a rabbitmq 
node dies, then the whole batch can be failed to be re-tried later.

Thoughts? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130707/9d8d390b/attachment.htm>

From watson.timothy at gmail.com  Mon Jul  8 09:40:48 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Mon, 8 Jul 2013 09:40:48 +0100
Subject: [rabbitmq-discuss] Atomic acking of a specific set of messages
In-Reply-To: <50dd1405-31ea-44e9-8e8b-4fc531558784@googlegroups.com>
References: <50dd1405-31ea-44e9-8e8b-4fc531558784@googlegroups.com>
Message-ID: <6666D386-1104-4C4F-9072-288DDCF75302@rabbitmq.com>

We're about to start working on a message groups feature that might make doing this possible, but there's nothing in place like that at the moment.

Just out of interest, how would you anticipate ACKs working in light of this feature? For example, would we consider the whole group ack'ed if the last message had been ack'ed? If you're requiring the whole group to be delivered before the ack, you'd need the prefetch count (i.e., control over the max allowed un-ack'ed messages for a single consumer) to match up, which would mean the client has to know how many messages the group will contain up front (doesn't sound workable to me) or the client would have to keep bumping the prefetch count each time it is exceeded - also unworkable IMHO.

Also, you'd need to be able to recognise the last message in a group. A better design IMO would be to ack all messages as they arrive (and are processed) and by default only redeliver un-ack'ed messages for the group if a client disconnects while the group is still open. A configuration parameter (or runtime policy) on the exchange you're publishing to might indicate that instead of the default behaviour, we want to republish the whole group (including previously ack'ed messages) if the consumer goes away prematurely, but that will incur a space and time hit on the server as we'll need to publish the messages to an additional internal store (i.e., temporary queue) in order to be able to redeliver them later on - since ack'ed messages will normally disappear once they're ack'ed.

As you can see, there are various trade offs to make in designing this kind of feature. Feel free to share any insights into your own use case!

Cheers,
Tim

On 7 Jul 2013, at 19:10, "peter at vagaband.co" <peter at vagaband.co> wrote:

> I'm trying to use RabbitMQ with Storm (for processing a stream of messages) using Trident (a high level abstraction on top of Storm). In order to gain exactly-once processing of messages with Storm, I need to be able to create a Storm spout that can retrieve a batch of messages from RabbitMQ and ack/fail them as a batch as an atomic unit. While amqp protocol or rabbitmq specific extensions to it does not seem to support this in an obvious manner, is there some pattern I could implement using what RabbitMQ provides to achieve this?
> 
> The flag to indicate you're acking multiple messages will not work as that limits you to work with just one batch, right? And you cannot pick and choose which batch of messages you can or cannot ack with that mode (i.e. batch 2 might succeed, batch 3 might fail and batch 4 might succeed. so if you ack batch 4, everything will be acked).
> 
> Can I use a consistent hashing exchange (or something to the effect by writing my own exchange plugin) to a select a batch of messages and route them to a specific queue and once all the messages in that queue (i.e. the queue is the batch), then the queue is discarded?
> 
> The key here is treat a batch of messages as an atomic unit so if a single message consumer node dies or all message consumer nodes die or a rabbitmq node dies, then the whole batch can be failed to be re-tried later.
> 
> Thoughts? 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From jesper.louis.andersen at gmail.com  Mon Jul  8 09:59:05 2013
From: jesper.louis.andersen at gmail.com (Jesper Louis Andersen)
Date: Mon, 8 Jul 2013 10:59:05 +0200
Subject: [rabbitmq-discuss] Pika Client: Bad performance for
 basic_publish to durable mirror queue
In-Reply-To: <1e1d8a8a-122b-48ae-8d53-4b2b90a51add@googlegroups.com>
References: <1e1d8a8a-122b-48ae-8d53-4b2b90a51add@googlegroups.com>
Message-ID: <CAGrdgiUCiwmGmFTfvqntTdxu7gUN4iMq85p_eFP=8Magiug5xw@mail.gmail.com>

On Fri, Jul 5, 2013 at 6:11 PM, linbo liao <llbgurs at gmail.com> wrote:

> I encounter a bad performance issue about pika, yesterday it works fine,
> but today performance of basci_publish got bad, it cost 2 or 3 second to
> finish one message, sometimes down to 7 seconds.
>
> Pika is 0.9.13
> RabbitMQ 3.1.0, Erlang R14B04   Queue is Durable
> Python: 2.6
> Platform: CentOS release 6.3 (Final) X64
>
>
I would look at the broker and see if it uses a lot of memory or if it in
any way looks like it is operating in a bad way. You need to slice your
problem: It could be the broker, your client or -- likely -- the way your
client uses the broker.



-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/bcd18be3/attachment.htm>

From watson.timothy at gmail.com  Mon Jul  8 10:04:16 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Mon, 8 Jul 2013 10:04:16 +0100
Subject: [rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
In-Reply-To: <46e760f0-355b-437d-af29-215a79bf85b2@googlegroups.com>
References: <083be004-f514-46a8-a643-469d77ee387a@googlegroups.com>
	<21060172-43BB-41AB-A6F6-3B97CA4D46FF@rabbitmq.com>
	<46e760f0-355b-437d-af29-215a79bf85b2@googlegroups.com>
Message-ID: <51457E09-260A-42CF-8062-CFCB818802EC@rabbitmq.com>

John,

This is very helpful, thanks.

On 4 Jul 2013, at 11:48, John Turner <john.turner at thoughtforge.net> wrote:

>  I'm very happy to help you with requirements here so if a call would help let me know and I'll set it up.
> 

Possibly, though I'll wait until I've got specific questions before taking up too
much of your time. I've also got to be careful that I don't design the feature with only 1 use case in mind. :)

> Do you have a timeline for this feature?

Not really. We're still I'm the analysis/design phase ATM, though I hope to start cutting code this week. Ideally i'd like to get it into the next feature release but I can't commit to that and there's no official timeline on that release either. If you want a complete guess then I'd expect to see another feature release in the next couple of months, but that really is "finger in the air" and I'm not responsible for decision making about releases anyway.

> Do you want all future messages delivered to another random consumer? (Yes)

Good, that's what we had in mind too.

>  
> What about un-acked messages that were already delivered - we plan on redelivering these (Agree) - and how do you plan on explicitly terminating a group? (This is not a requirement.  Groups should only be terminated by a connection closing either explicitly or due to failure)
>  

We will probably add this for the initial release anyway, since most jms message group implementations do so - not that we're tied to what jms does, but it's a useful guideline.


> Would a special message (or header) given by the producer suit that purpose? (If people want this functionality I would suggest this is the best way.  

That seems to be the consensus among other group implementations too.

> You might also consider giving the consumer the ability to terminate a message group but we don't have a specific use case for this.  It might be something for future releases.)
>  

I tend to agree. The consumer can already reject messages (or batches thereof) anyway, and can disconnect if its intention is to disassociate itself from the group.

I suspect that making the semantics of republication configurable (or policy driven) may improve this area, perhaps by supporting some kind of "unit of work" facility.

> Do you have consumers that want to recieve more than one group in parallel? (Absolutely)

Good to know. What ordering guarantees would you expect in that case?


> And what about producers that go away - do you close the group when they disconnect or keep it open indefinitely, or use a timeout? (I would keep it open indefinitely because multiple producers may be contributing messages to a single group.

Good point.

>  You have some challenges around clean up here though.  It could be reasonable to say that when all messages in a group have been processed that the group closes after a timeout.  When subsequent messages arrive the group is recreated.)

If the consumer wasn't notified about the group closure, that could make it difficult to reason about message ordering, especially if we wanted to support some kind of msg-group-seq-num or associate message seq num within a group.

Cheers,
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/cce5a62d/attachment.htm>

From liangrubo at gmail.com  Mon Jul  8 10:11:16 2013
From: liangrubo at gmail.com (liangrubo)
Date: Mon, 8 Jul 2013 02:11:16 -0700 (PDT)
Subject: [rabbitmq-discuss] 2.7.1 / R14B04 Crash Report: ~1PB RAM
	allocation failure
In-Reply-To: <4FA92E69.7090002@rabbitmq.com>
References: <CAL_e=0q7_K5icvXonudbciMP5ZTyd=oPbDNebhWVtm+KhRJdqw@mail.gmail.com>
	<4FA92E69.7090002@rabbitmq.com>
Message-ID: <1373274676650-27885.post@n5.nabble.com>

I also meet this issue today with version 3.1.1(Debian)

I had a cluster of 3 machines. All 3 instances crashed with simliar crash
log:

Slogan: std_alloc: Cannot allocate 1119579832804544 bytes of memory (of type
"arg_reg").
Slogan: std_alloc: Cannot allocate 1120281990175360 bytes of memory (of type
"arg_reg").

Will updating to a newer version resolve this problem?

Thanks.
 





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/2-7-1-R14B04-Crash-Report-1PB-RAM-allocation-failure-tp10913p27885.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Mon Jul  8 10:24:25 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 08 Jul 2013 10:24:25 +0100
Subject: [rabbitmq-discuss] Pika Client: Bad performance for
 basic_publish to durable mirror queue
In-Reply-To: <CAGrdgiUCiwmGmFTfvqntTdxu7gUN4iMq85p_eFP=8Magiug5xw@mail.gmail.com>
References: <1e1d8a8a-122b-48ae-8d53-4b2b90a51add@googlegroups.com>
	<CAGrdgiUCiwmGmFTfvqntTdxu7gUN4iMq85p_eFP=8Magiug5xw@mail.gmail.com>
Message-ID: <51DA8549.9020804@rabbitmq.com>

On 08/07/13 09:59, Jesper Louis Andersen wrote:
>
> On Fri, Jul 5, 2013 at 6:11 PM, linbo liao <llbgurs at gmail.com
> <mailto:llbgurs at gmail.com>> wrote:
>
>     I encounter a bad performance issue about pika, yesterday it works
>     fine, but today performance of basci_publish got bad, it cost 2 or 3
>     second to finish one message, sometimes down to 7 seconds.
>
>     Pika is 0.9.13
>     RabbitMQ 3.1.0, Erlang R14B04   Queue is Durable
>     Python: 2.6
>     Platform: CentOS release 6.3 (Final) X64
>
>
> I would look at the broker and see if it uses a lot of memory or if it
> in any way looks like it is operating in a bad way. You need to slice
> your problem: It could be the broker, your client or -- likely -- the
> way your client uses the broker.

Also, the OP is putting the channel into confirm mode, and waits for 
every single publish to be confirmed, thus making publishing synchronous 
which in turn makes it sensitive to not just load-induced server-side 
processing delays but also network delays.

Matthias.

From matthias at rabbitmq.com  Mon Jul  8 10:37:57 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 08 Jul 2013 10:37:57 +0100
Subject: [rabbitmq-discuss] Atomic acking of a specific set of messages
In-Reply-To: <50dd1405-31ea-44e9-8e8b-4fc531558784@googlegroups.com>
References: <50dd1405-31ea-44e9-8e8b-4fc531558784@googlegroups.com>
Message-ID: <51DA8875.6010706@rabbitmq.com>

On 07/07/13 19:10, peter at vagaband.co wrote:
> The flag to indicate you're acking multiple messages will not work as
>  that limits you to work with just one batch, right? And you cannot
> pick and choose which batch of messages you can or cannot ack with
> that mode (i.e. batch 2 might succeed, batch 3 might fail and batch 4
> might succeed. so if you ack batch 4, everything will be acked).

Correct. Besides multi-ack is not atomic anyway.

> The key here is treat a batch of messages as an atomic unit so if a
> single message consumer node dies or all message consumer nodes die
> or a rabbitmq node dies, then the whole batch can be failed to be
> re-tried later.

There is no atomic multi-message ack in RabbitMQ.

And even if there was one, I don't think it would help you. In
particular, how would exactly-once semantics be retained when your
application (the one that accumulates messages into batches) crashes
after submitting the batch but before sending the hypothetical
atomic multi-message ack?

> is there some pattern I could implement using what RabbitMQ provides
> to achieve this?

The pattern to get the effect of exactly-once in RabbitMQ is the same as
that employed by stomp and trident, namely to ensure idempotence (of
batches, in case of trident, and of messages in case of rabbit). Quite
how that can be achieved depends on the application.

Matthias.

From michael.s.klishin at gmail.com  Mon Jul  8 10:43:49 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Mon, 8 Jul 2013 13:43:49 +0400
Subject: [rabbitmq-discuss] Make queue.bind after basic.consume
	(rabbitmq-c)
In-Reply-To: <1373268306518-27879.post@n5.nabble.com>
References: <1373268306518-27879.post@n5.nabble.com>
Message-ID: <CAE3HoVS4Y4fpLC_ydSbe8Z1KgoDgOyuNgDmsK-nP0iWoZWUA4A@mail.gmail.com>

2013/7/8 Haster <haster2004 at yandex.ru>

> So maybe this test case is wrong and I should call basic.cancel befor I can
> call queue.bind again?
>

There are no limitations on when you can call queue.bind as long as the
queue
and the exchange your are binding exist.

There is one tricky scenario: if you basic.cancel the last consumer on an
auto-delete
queue, it will be deleted.

What may be happening is rabbitmq-c expecting deliveries and getting
queue.bind-ok instead. Clients should handle such situation.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/55273f76/attachment.htm>

From michael.s.klishin at gmail.com  Mon Jul  8 10:48:55 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Mon, 8 Jul 2013 13:48:55 +0400
Subject: [rabbitmq-discuss] DOS protection
In-Reply-To: <1373230883053-27876.post@n5.nabble.com>
References: <1373230883053-27876.post@n5.nabble.com>
Message-ID: <CAE3HoVSGsbyBh4QQoBhy84u2RLakuuB_rdYBd=jTga9M0aTpXQ@mail.gmail.com>

2013/7/8 carlhoerberg <carl.hoerberg at gmail.com>

> Is it possible to create a plugin that will monitor new
> channels/consumers/declarations in real-time and block (disconnect) if too
> many are made in a short amount of time?
>

You can monitor some of that in real-time using tracing and try to block
certain connections
by changing their state. That is fairly intrusive and may be not entirely
trivial to do from
a plugin, though.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/c48fef6b/attachment.htm>

From carl.hoerberg at gmail.com  Mon Jul  8 10:57:20 2013
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Mon, 8 Jul 2013 02:57:20 -0700 (PDT)
Subject: [rabbitmq-discuss] DOS protection
In-Reply-To: <CAE3HoVSGsbyBh4QQoBhy84u2RLakuuB_rdYBd=jTga9M0aTpXQ@mail.gmail.com>
References: <1373230883053-27876.post@n5.nabble.com>
	<CAE3HoVSGsbyBh4QQoBhy84u2RLakuuB_rdYBd=jTga9M0aTpXQ@mail.gmail.com>
Message-ID: <C3D3B728DAA249A7980B468654FC33EC@gmail.com>

Ok, is it something you would consider in the core? Today it's pretty easy to crash a RabbitMQ server with a very small amount of traffic. 



On Monday 8 July 2013 at 11:50, Michael Klishin [via RabbitMQ] wrote:

> 2013/7/8 carlhoerberg <[hidden email] (/user/SendEmail.jtp?type=node&node=27889&i=0)>
> > Is it possible to create a plugin that will monitor new
> > channels/consumers/declarations in real-time and block (disconnect) if too
> > many are made in a short amount of time?
> 
> You can monitor some of that in real-time using tracing and try to block certain connections
> by changing their state. That is fairly intrusive and may be not entirely trivial to do from 
> a plugin, though.
> -- 
> MK
> 
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
> 
> _______________________________________________ 
> rabbitmq-discuss mailing list 
> [hidden email] (/user/SendEmail.jtp?type=node&node=27889&i=1) 
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> 
> If you reply to this email, your message will be added to the discussion below: http://rabbitmq.1065348.n5.nabble.com/DOS-protection-tp27876p27889.html 
> To unsubscribe from DOS protection, click here (http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=27876&code=Y2FybC5ob2VyYmVyZ0BnbWFpbC5jb218Mjc4NzZ8LTEyNDcxMDc4NjM=).
> NAML (http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml) 







--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/DOS-protection-tp27876p27890.html
Sent from the RabbitMQ mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/d6bcb736/attachment.htm>

From emile at rabbitmq.com  Mon Jul  8 11:14:57 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 08 Jul 2013 11:14:57 +0100
Subject: [rabbitmq-discuss] Atomic acking of a specific set of messages
In-Reply-To: <50dd1405-31ea-44e9-8e8b-4fc531558784@googlegroups.com>
References: <50dd1405-31ea-44e9-8e8b-4fc531558784@googlegroups.com>
Message-ID: <51DA9121.9070503@rabbitmq.com>


On 07/07/13 19:10, peter at vagaband.co wrote:

> The key here is treat a batch of messages as an atomic unit so if a
> single message consumer node dies or all message consumer nodes die or a
> rabbitmq node dies, then the whole batch can be failed to be re-tried later.

It may be possible to achieve a similar effect by performing the
batching of messages before messages reach the broker, e.g. the
publisher joins the payloads of multiple messages into one payload while
the consumer performs the inverse operation to obtain the original messages.


From matthias at rabbitmq.com  Mon Jul  8 11:19:53 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 08 Jul 2013 11:19:53 +0100
Subject: [rabbitmq-discuss] DOS protection
In-Reply-To: <C3D3B728DAA249A7980B468654FC33EC@gmail.com>
References: <1373230883053-27876.post@n5.nabble.com>
	<CAE3HoVSGsbyBh4QQoBhy84u2RLakuuB_rdYBd=jTga9M0aTpXQ@mail.gmail.com>
	<C3D3B728DAA249A7980B468654FC33EC@gmail.com>
Message-ID: <51DA9249.4060702@rabbitmq.com>

On 08/07/13 10:57, carlhoerberg wrote:
> Ok, is it something you would consider in the core? Today it's pretty
> easy to crash a RabbitMQ server with a very small amount of traffic.

It's been on our todo list for a long time; I don't expect it will get 
resolved soon. As you may have guessed, figuring out what exactly to 
limit and when is quite tricky.

Would you mind explaining what you had in mind for "monitor[ing] new 
channels/consumers/declarations in real-time and block (disconnect) if 
too many are made in a short amount of time?"

Specifically...

- what entities do you want to monitor? You mention channels, consumers 
and declarations (presumably by that you mean exchanges, queues, and 
bindings). Any others?

- do you want to monitor rates (e.g. "channels created per second") or 
totals ("number of existing channels")? From your description ("too many 
... in time" it sounds like rates, but rates are more a proxy for CPU 
and network usage, whereas memory is a mostly a function of the totals.

- at what granularity would the limits (the "too many" part) be set? 
globally? per vhost? per user? per connection?

Note that the finer grained the limits the lower the limits need to be 
if you want to have a high chance of preventing undesirable behaviour 
globally, e.g. for per user limits you'd have to assume that every user 
connecting to a single rabbit will hit the limit along each of the 
dimensions - channels, consumers, exchanges, queues, etc.


Regards,

Matthias.


From matthias at rabbitmq.com  Mon Jul  8 11:51:00 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 08 Jul 2013 11:51:00 +0100
Subject: [rabbitmq-discuss] 2.7.1 / R14B04 Crash Report: ~1PB RAM
 allocation failure
In-Reply-To: <1373274676650-27885.post@n5.nabble.com>
References: <CAL_e=0q7_K5icvXonudbciMP5ZTyd=oPbDNebhWVtm+KhRJdqw@mail.gmail.com>
	<4FA92E69.7090002@rabbitmq.com>
	<1373274676650-27885.post@n5.nabble.com>
Message-ID: <51DA9994.5000605@rabbitmq.com>

On 08/07/13 10:11, liangrubo wrote:
> I also meet this issue today with version 3.1.1(Debian)
>
> I had a cluster of 3 machines. All 3 instances crashed with simliar crash
> log:
>
> Slogan: std_alloc: Cannot allocate 1119579832804544 bytes of memory (of type
> "arg_reg").
> Slogan: std_alloc: Cannot allocate 1120281990175360 bytes of memory (of type
> "arg_reg").
>
> Will updating to a newer version resolve this problem?

There is a fair chance that upgrading to the latest Erlang (R16B01) and 
latest RabbitMQ (3.1.3) will make that problem go away. And if it 
doesn't then at least with the latest versions we will have a better 
chance of the Erlang/OTP team helping the investigation.

Matthias.

From liangrubo at bytedance.com  Mon Jul  8 12:12:02 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Mon, 8 Jul 2013 19:12:02 +0800
Subject: [rabbitmq-discuss] 2.7.1 / R14B04 Crash Report: ~1PB RAM
 allocation failure
In-Reply-To: <51DA9994.5000605@rabbitmq.com>
References: <CAL_e=0q7_K5icvXonudbciMP5ZTyd=oPbDNebhWVtm+KhRJdqw@mail.gmail.com>
	<4FA92E69.7090002@rabbitmq.com>
	<1373274676650-27885.post@n5.nabble.com>
	<51DA9994.5000605@rabbitmq.com>
Message-ID: <CA+BFTFt+krGjq=e0PuT5S8EiJGwmx7+5q72Cw6gQ3VoGY3+6DA@mail.gmail.com>

thanks, will update to the latest version to see if it will make the
problem go away.


On Mon, Jul 8, 2013 at 6:51 PM, Matthias Radestock <matthias at rabbitmq.com>wrote:

> On 08/07/13 10:11, liangrubo wrote:
>
>> I also meet this issue today with version 3.1.1(Debian)
>>
>> I had a cluster of 3 machines. All 3 instances crashed with simliar crash
>> log:
>>
>> Slogan: std_alloc: Cannot allocate 1119579832804544 bytes of memory (of
>> type
>> "arg_reg").
>> Slogan: std_alloc: Cannot allocate 1120281990175360 bytes of memory (of
>> type
>> "arg_reg").
>>
>> Will updating to a newer version resolve this problem?
>>
>
> There is a fair chance that upgrading to the latest Erlang (R16B01) and
> latest RabbitMQ (3.1.3) will make that problem go away. And if it doesn't
> then at least with the latest versions we will have a better chance of the
> Erlang/OTP team helping the investigation.
>
> Matthias.
>



-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/711ba7c1/attachment.htm>

From tonygarnockjones+rabbitmq at gmail.com  Mon Jul  8 13:46:08 2013
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Mon, 8 Jul 2013 08:46:08 -0400
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <1373267517377-27878.post@n5.nabble.com>
References: <1373267517377-27878.post@n5.nabble.com>
Message-ID: <CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>

Hi,

On 8 July 2013 03:11, Haster <haster2004 at yandex.ru> wrote:

> Failed to start consumer with configurationInternal error: invalid
> amqp_connection_state_t->state 0
>

This is not necessarily the result of a corrupted packet, but it is the
result of some kind of memory corruption or threading bug. (It could also
be a bug in the library.)

There is nothing sensible you can do to recover: memory is already
corrupted, possibly extensively. There's no way to know. Calling abort() is
the right thing to do in this situation.

If you are using an amqp_connection_state_t from multiple threads, you
should either mutex access to it (difficult) or create a separate
connection for each thread (easier).

Regards,
  Tony
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/a6d70f05/attachment.htm>

From haster2004 at yandex.ru  Mon Jul  8 14:17:15 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 8 Jul 2013 06:17:15 -0700 (PDT)
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
Message-ID: <1373289435887-27896.post@n5.nabble.com>

Tony, thanks for reply.

The problem is that I use only one thread in my program (only one thread
works with connection to rabbitmq)

I heard that on HP-UX TCP/IP stack protocol API is different to other UNIX
SYSTEMS and to fix it I need use libxnet and _XOPEN_SOURCE_EXTENDED define
directive. 

What do you think can it be a root of problem?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Program-crashes-in-amqp-abort-on-HP-UX-11-31-tp27878p27896.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Mon Jul  8 14:21:28 2013
From: haster2004 at yandex.ru (Haster)
Date: Mon, 8 Jul 2013 06:21:28 -0700 (PDT)
Subject: [rabbitmq-discuss] Make queue.bind after basic.consume
	(rabbitmq-c)
In-Reply-To: <CAE3HoVS4Y4fpLC_ydSbe8Z1KgoDgOyuNgDmsK-nP0iWoZWUA4A@mail.gmail.com>
References: <1373268306518-27879.post@n5.nabble.com>
	<CAE3HoVS4Y4fpLC_ydSbe8Z1KgoDgOyuNgDmsK-nP0iWoZWUA4A@mail.gmail.com>
Message-ID: <1373289688554-27897.post@n5.nabble.com>

Michael, thanks for reply!

But as I understand hangs up take place in sync method recv (that waits
packet infinitely - timeout = 0)




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Make-queue-bind-after-basic-consume-rabbitmq-c-tp27879p27897.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From x050516 at gmail.com  Mon Jul  8 15:22:03 2013
From: x050516 at gmail.com (BK)
Date: Mon, 8 Jul 2013 07:22:03 -0700 (PDT)
Subject: [rabbitmq-discuss] URGENT : UNC path issue
Message-ID: <1373293322992-27898.post@n5.nabble.com>



If the UNC Path to the environment variables RABBITMQ_BASE = \\ABC\DEF and
RABBITMQ_CONFIG_FILE = \\ABC\DEF\RabbitMQ does not work. A local path works
fine. The destination has all the rights for the user under which the
service starts.

Error from erl_crash dump :

Slogan: could not start kernel pid (application_controller) (error in config
file "/ABC/DEF/RabbitMQ.config" (none): configuration file not found)

Mapping the drive works but I cannot deploy such to production !!. Has
anyone come across such an issue ?





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/URGENT-UNC-path-issue-tp27898.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From weojoew at gmail.com  Mon Jul  8 15:28:29 2013
From: weojoew at gmail.com (Joseph Weeks)
Date: Mon, 8 Jul 2013 10:28:29 -0400
Subject: [rabbitmq-discuss] Checking queue size in bytes
Message-ID: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>

Hello,

Is there a way to determine a queue's size in bytes?  I'm mostly interested
in size on disk, but the sum of memory and disk would be sufficient if that
happens to be more readily available.

My scenario is as follows:
- We're using RabbitMQ 2.8.7 in a 2-node cluster (and in the process of
upgrading to 3.1.x in a couple months)
- We have several groups of publishers publishing messages of varying sizes
(from 10KB up to 3MB)
- Many messages and queues are configured in the worst-case (no message
ttls, persistent messages, durable and mirrored queues, no queue length
limit), and we're not in a position to change that in the short-term
- From time to time, we have absentee consumers that cause our RabbitMQ
disk usage to climb towards the disk threshold

At the point that disk usage starts to climb, we would like to be able to
mitigate the inevitable disk alarm by identifying the queues containing the
most data and unbind or purge them.  If the messages were a uniform size,
we could look at the queue depths and know which queues are consuming the
most disk space, but given the varying message sizes of our scenario, the
queue depth doesn't give us enough information to work with.
 Programmatically responding would be great, but manually manipulating the
queues in the management UI would suffice for our immediate needs.

Any recommendations or ideas would be greatly appreciated.

On a related note, would it be possible for some future version of RabbitMQ
to allow queue policies like "x-max-length" and "x-message-ttl" in addition
to the queue declaration arguments?

Thanks a lot,
Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/37194c3b/attachment.htm>

From tonygarnockjones+rabbitmq at gmail.com  Mon Jul  8 15:45:50 2013
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Mon, 8 Jul 2013 10:45:50 -0400
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <1373289435887-27896.post@n5.nabble.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
Message-ID: <CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>

On 8 July 2013 09:17, Haster <haster2004 at yandex.ru> wrote:

> The problem is that I use only one thread in my program (only one thread
> works with connection to rabbitmq)
>

Is there only one thread in your program, or is there more than one thread
but only one which uses librabbitmq? If there's more than one, perhaps
another thread is chewing up memory somehow.


> I heard that on HP-UX TCP/IP stack protocol API is different to other UNIX
> SYSTEMS and to fix it I need use libxnet and _XOPEN_SOURCE_EXTENDED define
> directive.
>

This doesn't sound like the problem, but I could be wrong.


From stuff at moesel.net  Mon Jul  8 16:11:03 2013
From: stuff at moesel.net (Chris)
Date: Mon, 8 Jul 2013 11:11:03 -0400
Subject: [rabbitmq-discuss] Odd Behavior w/ Restoring Broken Cluster
Message-ID: <CAHEpgBCWo_icdGXmn4mFGZT7GJh_9qLPftyoL6MoYQMsQ_khUQ@mail.gmail.com>

Hello,

I am using RabbitMQ 3.1.1 on RedHat 6.2.  I noticed some odd behavior when
trying to restore a broken cluster that I think may be a bug.  In short,
when I "forget" a node in the cluster, then later call "rabbitmqctl reset"
on it, it re-adds itself to the cluster.

It's actually more complicated than that, but completely reproducible, so
here are the steps:

*Assuming two nodes in a cluster: rabbit-a and rabbit-b.  *
*
*

*[root at rabbit-a ~]# rabbitmqctl stop*
Stopping and halting node 'rabbit at rabbit-a' ...
...done.

*[root at rabbit-b ~]# rabbitmqctl stop*
Stopping and halting node 'rabbit at rabbit-b' ...
...done.

*
*
*Now we will assume we need to start rabbit-a without rabbit-b, which is
all sorts of fun since rabbit-b was the last one down.  Based on what I've
read, we need to start rabbit-a in node-only mode and then forget rabbit-b.*
*
*

*[root at rabbit-a ~]# export RABBITMQ_NODE_ONLY=true*
*[root at rabbit-a ~]# rabbitmq-server &*
[1] 19386
*[root at rabbit-a ~]# rabbitmqctl forget_cluster_node --offline
rabbit at rabbit-b*
Removing node 'rabbit at rabbit-b' from cluster ...

=INFO REPORT==== 8-Jul-2013::09:45:34 ===
Removing node 'rabbit at rabbit-b' from cluster

=INFO REPORT==== 8-Jul-2013::09:45:34 ===
    application: mnesia
    exited: stopped
    type: temporary
...done.
*[root at rabbit-a ~]# rabbitmqctl stop*
Stopping and halting node 'rabbit at rabbit-a' ...

=INFO REPORT==== 8-Jul-2013::09:45:48 ===
Halting Erlang VM
Error: {{badmatch,undefined},

[{rabbit_plugins,active,0,[{file,"src/rabbit_plugins.erl"},{line,48}]},
         {rabbit,app_shutdown_order,0,[{file,"src/rabbit.erl"},{line,476}]},
         {rabbit,stop,0,[{file,"src/rabbit.erl"},{line,380}]},
         {rabbit,stop_and_halt,0,[{file,"src/rabbit.erl"},{line,384}]},

 {rpc,'-handle_call_call/6-fun-0-',5,[{file,"rpc.erl"},{line,205}]}]}


*Note the error above when it was stopped-- I'm not sure if that is
expected.  Anyway, let's now turn off the node-only mode and start the
server again.  It's successful and note that the cluster status contains
only its own node:*

*[root at rabbit-a ~]# unset RABBITMQ_NODE_ONLY*
*[root at rabbit-a ~]# rabbitmq-server &*
[1] 21349
*[root at rabbit-a ~]# rabbitmqctl cluster_status*
Cluster status of node 'rabbit at rabbit-a' ...
[{nodes,[{disc,['rabbit at rabbit-a']}]},
 {running_nodes,['rabbit at rabbit-a']},
 {partitions,[]}]
...done.


*So far so good.  But let's assume we're ready to bring rabbit-b back
online.  If we try without making any changes, it will fail due to this
error (which I guess is expected):*

{"init terminating in
do_boot",{rabbit,failure_during_boot,{error,{inconsistent_cluster,"Node
'rabbit at rabbit-b' thinks it's clustered with node 'rabbit at rabbit-a', but
'rabbit at rabbit-a' disagrees"}}}}


*OK.  So I guess we need to reset rabbit-b before we can start it again.  I
know we could delete the mnesia directory, but let's not be so brute force
about it.  Let's put it in node-only mode and use rabbitmqctl reset:*
*
*

*[root at rabbitmq-b ~]# export RABBITMQ_NODE_ONLY=true*
*[root at rabbitmq-b ~]# rabbitmq-server &*
[1] 13647
*[root at rabbitmq-b ~]# rabbitmqctl reset*
Resetting node 'rabbit at rabbitmq-b' ...

=INFO REPORT==== 8-Jul-2013::09:49:29 ===
Resetting Rabbit

=INFO REPORT==== 8-Jul-2013::09:49:29 ===
    application: mnesia
    exited: stopped
    type: temporary
Error: {version_mismatch,[],
                         [add_ip_to_listener,exchange_decorators,
                          exchange_event_serial,gm,gm_pids,
                          mirrored_supervisor,remove_user_scope,
                          runtime_parameters,semi_durable_route,topic_trie,
                          topic_trie_node,user_admin_to_tags,add_queue_ttl,
                          multiple_routing_keys]}
*[root at rabbitmq-b ~]# rabbitmqctl stop*
Stopping and halting node 'rabbit at rabbitmq-b' ...


=INFO REPORT==== 8-Jul-2013::09:50:23 ===
Halting Erlang VM
Error: {{badmatch,undefined},

[{rabbit_plugins,active,0,[{file,"src/rabbit_plugins.erl"},{line,48}]},
         {rabbit,app_shutdown_order,0,[{file,"src/rabbit.erl"},{line,476}]},
         {rabbit,stop,0,[{file,"src/rabbit.erl"},{line,380}]},
         {rabbit,stop_and_halt,0,[{file,"src/rabbit.erl"},{line,384}]},

 {rpc,'-handle_call_call/6-fun-0-',5,[{file,"rpc.erl"},{line,205}]}]}


*Note again the error when stopping, but also the error when resetting.
 But here is the WEIRD thing.  Now go back to rabbit-a and get the
cluster_status.  It seems that rabbit-b has magically rejoined the cluster!*
*
*

*[root at rabbitmq-a ~]# rabbitmqctl cluster_status*
Cluster status of node 'rabbit at rabbitmq-a' ...
[{nodes,[{disc,['rabbit at rabbitmq-b','rabbit at rabbitmq-a']}]},
 {running_nodes,['rabbit at rabbitmq-a']},
 {partitions,[]}]
...done.


Sure enough, if we restart rabbit-b, it will be operating in a cluster with
rabbit-a again:

*[root at rabbitmq-b ~]# unset RABBITMQ_NODE_ONLY*
*[root at rabbitmq-b ~]# rabbitmq-server &*
[1] 15775
*[root at rabbitmq-b ~]# rabbitmqctl cluster_status*
Cluster status of node 'rabbit at rabbitmq-b' ...
[{nodes,[{disc,['rabbit at rabbitmq-b','rabbit at rabbitmq-a']}]},
 {running_nodes,['rabbit at vm-rh62-cmoesel','rabbitmq-b']},
 {partitions,[]}]
...done.


So-- this is not at all what I expected.  Seems like a bug, right?  I guess
in this case I will just delete the mnesia directory instead of trying to
do a reset.

-Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/39fad031/attachment.htm>

From jorge.diz at nomasystems.com  Mon Jul  8 16:21:52 2013
From: jorge.diz at nomasystems.com (Jorge Diz Pico)
Date: Mon, 8 Jul 2013 17:21:52 +0200
Subject: [rabbitmq-discuss] Monitor and restart
Message-ID: <CAGQEY6=qmgnhB3RiYC6qbb+ehA0reHBqJSfrAhL=FmKOChSaBA@mail.gmail.com>

Hi,

I peeked around and noticed Rabbit is not using heart, which makes me
unease about potential crashes. I tried to tweak the start scripts myself
but it's not as straight-forward as it would seem to make it work.

So before I make a mess of it, I'd like to know if there's any reason why
Rabbit doesn't use heart or even offer a quick flag to enable it (at least
I couldn't find any reference to it). Does it use any other mechanism
underneath to ensure reliability?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/1ec53657/attachment.htm>

From carl.hoerberg at gmail.com  Mon Jul  8 16:23:51 2013
From: carl.hoerberg at gmail.com (=?utf-8?Q?Carl_H=C3=B6rberg?=)
Date: Mon, 8 Jul 2013 17:23:51 +0200
Subject: [rabbitmq-discuss] DOS protection
In-Reply-To: <51DA9249.4060702@rabbitmq.com>
References: <1373230883053-27876.post@n5.nabble.com>
	<CAE3HoVSGsbyBh4QQoBhy84u2RLakuuB_rdYBd=jTga9M0aTpXQ@mail.gmail.com>
	<C3D3B728DAA249A7980B468654FC33EC@gmail.com>
	<51DA9249.4060702@rabbitmq.com>
Message-ID: <499D0FD67A7A45D28FD671CB4C9C4434@gmail.com>



On Monday 8 July 2013 at 12:19, Matthias Radestock wrote:

> On 08/07/13 10:57, carlhoerberg wrote:
> > Ok, is it something you would consider in the core? Today it's pretty
> > easy to crash a RabbitMQ server with a very small amount of traffic.
> 
> 
> 
> It's been on our todo list for a long time; I don't expect it will get 
> resolved soon. As you may have guessed, figuring out what exactly to 
> limit and when is quite tricky.
> 
> Would you mind explaining what you had in mind for "monitor[ing] new 
> channels/consumers/declarations in real-time and block (disconnect) if 
> too many are made in a short amount of time?"
> 
> Specifically...
> 
> - what entities do you want to monitor? You mention channels, consumers 
> and declarations (presumably by that you mean exchanges, queues, and 
> bindings). Any others?

That, plus connection count.  
> 
> - do you want to monitor rates (e.g. "channels created per second") or 
> totals ("number of existing channels")? From your description ("too many 
> ... in time" it sounds like rates, but rates are more a proxy for CPU 
> and network usage, whereas memory is a mostly a function of the totals.

Total, we haven't seen CPU problems, only suffered sudden memory exhaustion. 
> 
> - at what granularity would the limits (the "too many" part) be set? 
> globally? per vhost? per user? per connection?

Per vhost and global. 

We do limit per vhost today, but it's the sudden bursts of queue declarations or channels openings that we can't protect us from today. 

A global limit would be sufficient for the time being, just for protection, so that the cluster doesn't dies before we can see who has done what. 
> Note that the finer grained the limits the lower the limits need to be 
> if you want to have a high chance of preventing undesirable behaviour 
> globally, e.g. for per user limits you'd have to assume that every user 
> connecting to a single rabbit will hit the limit along each of the 
> dimensions - channels, consumers, exchanges, queues, etc.
> 
I guess a combination would be ideal, so that you can limit both per cluster/server and per vhost.. But that's not necessary for us today, as the mgmt http api allow us to do that, for slow growth in queues/channels/consumers.
> 
> 
> Regards,
> 
> Matthias. 



From matthias at rabbitmq.com  Mon Jul  8 16:47:09 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 08 Jul 2013 16:47:09 +0100
Subject: [rabbitmq-discuss] DOS protection
In-Reply-To: <499D0FD67A7A45D28FD671CB4C9C4434@gmail.com>
References: <1373230883053-27876.post@n5.nabble.com>
	<CAE3HoVSGsbyBh4QQoBhy84u2RLakuuB_rdYBd=jTga9M0aTpXQ@mail.gmail.com>
	<C3D3B728DAA249A7980B468654FC33EC@gmail.com>
	<51DA9249.4060702@rabbitmq.com>
	<499D0FD67A7A45D28FD671CB4C9C4434@gmail.com>
Message-ID: <51DADEFD.7010606@rabbitmq.com>

Carl,

thanks for the answers. A few follow-up questions...

On 08/07/13 16:23, Carl H?rberg wrote:
> On Monday 8 July 2013 at 12:19, Matthias Radestock wrote:
>> - what entities do you want to monitor? You mention channels,
>> consumers and declarations (presumably by that you mean exchanges,
>> queues, and bindings). Any others?
>
> That, plus connection count.

Connection count is bounded by the available file descriptors, for which
you can tune the limit in the O/S. I would have thought that is sufficient.

> A global limit would be sufficient for the time being, just for
> protection, so that the cluster doesn't dies before we can see who
> has done what.

So say rabbit enforced global limits for the numbers of channels, 
consumers, exchanges, queues and bindings. How would you go about 
picking the limits?

There is nothing wrong with having lots of channels, or lots of 
consumers, or lots of exchanges, etc, etc. But if you set upper bounds 
on what rabbit can sustain for each one of them, then a rabbit which 
encounters mixed usage could still run out of memory.

Furthermore, as you know, in the default configuration messages take up 
some residual memory even when paged to disk, which means there is less 
memory available for everything. This too makes it hard to choose any 
bounds which have a reasonable chance of working w/o being silly low.


Since your main concern is memory exhaustion - and by that presumably 
you mean rabbit crashing because it cannot allocate any more memory, 
rather than just hitting the memory alarm and blocking publisher - 
perhaps a better - simpler and more versatile - behaviour would be for 
rabbit to block all channel, consumer and resource declarations when 
memory gets *really* tight.


Regards,

Matthias.

From alan.antonuk at gmail.com  Mon Jul  8 18:12:35 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 8 Jul 2013 10:12:35 -0700
Subject: [rabbitmq-discuss] Make queue.bind after basic.consume
	(rabbitmq-c)
In-Reply-To: <CAE3HoVS4Y4fpLC_ydSbe8Z1KgoDgOyuNgDmsK-nP0iWoZWUA4A@mail.gmail.com>
References: <1373268306518-27879.post@n5.nabble.com>
	<CAE3HoVS4Y4fpLC_ydSbe8Z1KgoDgOyuNgDmsK-nP0iWoZWUA4A@mail.gmail.com>
Message-ID: <CAAt2poJmR5dfPVk4OOYRrCWuSHeO3V4Wzoh=Z1evew3cvmFj3w@mail.gmail.com>

On Mon, Jul 8, 2013 at 2:43 AM, Michael Klishin <michael.s.klishin at gmail.com
> wrote:

>
> There is one tricky scenario: if you basic.cancel the last consumer on an
> auto-delete
> queue, it will be deleted.
>

If the queue happens to be deleted before you try and queue.bind it, the
broker will return a channel exception. In terms of the rabbitmq-c API the
amqp_queue_bind() function should return null, then amqp_get_rpc_reply()
will return the reason for the channel exception.  It shouldn't block for
long on a recv() when doing one of these.

If you're reading messages using amqp_simple_wait_frame() it is possible to
ignore a frame that shouldn't be ignored (like an channel.close or a
connection.close). Could you describe in more detail what you're doing
before it hangs?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/763d9a8b/attachment.htm>

From carl.hoerberg at gmail.com  Mon Jul  8 20:29:11 2013
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Mon, 8 Jul 2013 12:29:11 -0700 (PDT)
Subject: [rabbitmq-discuss] DOS protection
In-Reply-To: <51DADEFD.7010606@rabbitmq.com>
References: <1373230883053-27876.post@n5.nabble.com>
	<CAE3HoVSGsbyBh4QQoBhy84u2RLakuuB_rdYBd=jTga9M0aTpXQ@mail.gmail.com>
	<C3D3B728DAA249A7980B468654FC33EC@gmail.com>
	<51DA9249.4060702@rabbitmq.com>
	<499D0FD67A7A45D28FD671CB4C9C4434@gmail.com>
	<51DADEFD.7010606@rabbitmq.com>
Message-ID: <1A35AFAA9DF64CDAB0DA22BBD52B5715@gmail.com>



On Monday 8 July 2013 at 17:49, Matthias Radestock-3 [via RabbitMQ] wrote:

> Carl,  
>  
> thanks for the answers. A few follow-up questions...  
>  
> On 08/07/13 16:23, Carl H?rberg wrote:  
> > On Monday 8 July 2013 at 12:19, Matthias Radestock wrote:  
> > > - what entities do you want to monitor? You mention channels,  
> > > consumers and declarations (presumably by that you mean exchanges,  
> > > queues, and bindings). Any others?  
> >  
> >  
> > That, plus connection count.  
>  
> Connection count is bounded by the available file descriptors, for which  
> you can tune the limit in the O/S. I would have thought that is sufficient.

You're right, the global limit, but we monitor and limit individual vhost connections too. The only problem is if a user creates a lot of connections within 5 seconds, then we can't block new connections fast enough.  

And the way we block is suboptimal too, today we remove the password (or remove the vhost permission), but then they can't access the mgmt interface either, which confuses a lot of users.  
>  
>  
> > A global limit would be sufficient for the time being, just for  
> > protection, so that the cluster doesn't dies before we can see who  
> > has done what.  
>  
>  
> So say rabbit enforced global limits for the numbers of channels,  
> consumers, exchanges, queues and bindings. How would you go about  
> picking the limits?  
>  
> There is nothing wrong with having lots of channels, or lots of  
> consumers, or lots of exchanges, etc, etc. But if you set upper bounds  
> on what rabbit can sustain for each one of them, then a rabbit which  
> encounters mixed usage could still run out of memory.

True.. Most often it's not that complicated though. Often we can see that user uses a lot of resources, and then we contact that user and make sure that he's doing the right thing. Again, the problem we have is when customers by bugs or by other means creates a lot of something very very fast, faster than we can monitor.  
>  
>  
> Furthermore, as you know, in the default configuration messages take up  
> some residual memory even when paged to disk, which means there is less  
> memory available for everything. This too makes it hard to choose any  
> bounds which have a reasonable chance of working w/o being silly low.  
>  
True, i've seen the message index grow to many gigabytes, which is way we now monitor queue length too, but "fortunately" message queues can only grow with a couple of thousands messages per second, not millions, which is required to build a huge index.  
>  
>  
> Since your main concern is memory exhaustion - and by that presumably  
> you mean rabbit crashing because it cannot allocate any more memory,  
> rather than just hitting the memory alarm and blocking publisher -  
> perhaps a better - simpler and more versatile - behaviour would be for  
> rabbit to block all channel, consumer and resource declarations when  
> memory gets *really* tight.

That would be a great solution! Or somehow "slow things down", so we have the chance to use the mgmt api and read the values before it's too late.    
>  
>  
>  
> Regards,  
>  
> Matthias.  
> _______________________________________________  
> rabbitmq-discuss mailing list  
> [hidden email] (/user/SendEmail.jtp?type=node&node=27904&i=0)  
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>  
>  
> If you reply to this email, your message will be added to the discussion below: http://rabbitmq.1065348.n5.nabble.com/DOS-protection-tp27876p27904.html  
> To unsubscribe from DOS protection, click here (http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=27876&code=Y2FybC5ob2VyYmVyZ0BnbWFpbC5jb218Mjc4NzZ8LTEyNDcxMDc4NjM=).
> NAML (http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml)  







--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/DOS-protection-tp27876p27906.html
Sent from the RabbitMQ mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/dd017519/attachment.htm>

From maze at reik.se  Mon Jul  8 22:13:02 2013
From: maze at reik.se (Matthias Reik)
Date: Mon, 08 Jul 2013 23:13:02 +0200
Subject: [rabbitmq-discuss] Rabbitmq vs. Activemq
In-Reply-To: <CAHEpgBB8x+Rqh070VvrP1ARtUqM_T1C_Hu60BieHJwfFzmzRLg@mail.gmail.com>
References: <c4def933-ed64-4632-b130-d8c81df74b66@googlegroups.com>
	<51C02C20.2010804@rabbitmq.com>
	<CAHEpgBB8x+Rqh070VvrP1ARtUqM_T1C_Hu60BieHJwfFzmzRLg@mail.gmail.com>
Message-ID: <51DB2B5E.2090404@reik.se>

In addition to what was already said ...

... what was important for us is the rather freely reconfigurability of 
Exchanges to Queues. Even though we don't have to do that too often, 
it's still a very powerful feature of AMQP.

Ok, I haven't looked into ActiveMQ for several years. So I might be 
outdated :-(

Cheers
Maze



On 2013-06-18 14:20 , Chris wrote:
> A couple of other things to consider:
>
> 1) Message durability: In my own informal tests (about 8 months ago), 
> I found that ActiveMQ took a very significant hit once you turned on 
> message persistence.  RabbitMQ also took a hit, but it was much less 
> significant.
>
> 2) Clustering / High Availability: If you need to cluster the brokers 
> for HA or failover, there are significant differences here.  Last I 
> checked, ActiveMQ only supported active/passive configurations and 
> they were fairly difficult to configure, or required separate shared 
> storage nodes.  RabbitMQ supports active/active configurations, is 
> easy to configure, and requires no other external dependencies.  That 
> said, I did find that ActiveMQ clients have better support for 
> automatic failover than most RabbitMQ clients (so you have to 
> implement it yourself in RabbitMQ clients or find an add-on library 
> for it).
>
> Disclaimer: I did my research on ActiveMQ 5.7, so you may want to 
> check if ActiveMQ 5.8 addresses some of these problems...
>
> -Chris
>
> -Chris
>
>
> On Tue, Jun 18, 2013 at 5:45 AM, Simon MacMullen <simon at rabbitmq.com 
> <mailto:simon at rabbitmq.com>> wrote:
>
>     If your primary concern is latency, testing with a maxed-out
>     message rate (which it seems is what you are doing) will give very
>     dubious results. Maxing out the message rate means that all
>     internal buffers are full, and thus messages take a while to get
>     through the broker.
>
>     The same is presumably true for ActiveMQ, but presumably it has
>     smaller buffers.
>
>     This is even more true if your tests are able to publish messages
>     faster than they consume (which I guess is what's happening in
>     your last row) - if your test ends up enqueueing messages and then
>     taking a while to dequeue them then I am not surprised you see
>     high latency.
>
>     Dropping your message rate to even 90% of the maximum will give
>     huge latency gains - see the final chart here:
>
>     http://www.rabbitmq.com/blog/2012/04/17/rabbitmq-performance-measurements-part-1/
>
>     Finally, I would be wary of constructing a synthetic benchmark and
>     then using it to pick which product you go with, unless you
>     determine that one product has acceptable performance and others
>     do not. Factors such as reliability, ease of use, feature set and
>     so on tend to be more important than a 10% difference in performance.
>
>     Hopefully I would still be saying that even if RabbitMQ were
>     "winning" your tests :-)
>
>     Cheers, Simon
>
>
>     On 18/06/13 04:00, JC wrote:
>
>         Hi,
>
>         We are in the process of evaluating middleware and choosing which
>         middleware we pick for a potentially large scale distributed
>         application.    We did an evaluation between activemq and
>         rabbitmq with
>         different test cases. So far activemq has outperformed
>         rabbitmq using
>         the default out-of-box configuration especially on the latency
>         side.
>         We use activemq openWire protocol vs. rabbit AMQP,  Here is
>         one example
>         result of the test we did on 1 publisher/1 consumer and we
>         measure the
>         latency from send to receive time.    Similar results we get from
>         multiple consumers as well.  Any one has done the similar
>         benchmark?
>         Could you please share your experience?  And if anyone knows
>         the tips to
>         boost rabbitmq performance, please let us know.   The rabbit
>         test client
>         is using fanout exchange and MINIMAL_BASIC to publish messages.
>
>         BrokerType      Publishers      Consumers SlowConsumers  
>         TgtMsgRate(mps)
>         TgtMsgLimit     AvgMsgSentRate(mps) AvgSentTime(ns)        
>         AvgMsgRcvRate(mps)
>         MinLat(ns)      MaxLat(ns)      AvgLat(ns)  MedLat(ns)    
>          90%Lat(ns)
>         Activemq at middlewarebench        1       1       0   25000  
>         1000000         20776   5644    20776
>         99484   7959080         259337  255760  316848
>         Rabbit at middlewarebench  1       1       0       25000  
>         1000000         20749   5440    20749
>         171994  46140955        870211  913283  988979
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>         Activemq at middlewarebench        1       1       0   100000
>          1000000         62695   5347    62695
>         100634  19872040        491588  359763  510862
>         Rabbit at middlewarebench  1       1       0       100000
>          1000000         56850   6790    54512
>         315808  822398215       487403726       487170082   696265654
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>         _______________________________________________
>         rabbitmq-discuss mailing list
>         rabbitmq-discuss at lists.rabbitmq.com
>         <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>         https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
>     -- 
>     Simon MacMullen
>     RabbitMQ, Pivotal
>     _______________________________________________
>     rabbitmq-discuss mailing list
>     rabbitmq-discuss at lists.rabbitmq.com
>     <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>     https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/b9dfbf47/attachment.htm>

From francois.beausoleil at gmail.com  Tue Jul  9 02:37:33 2013
From: francois.beausoleil at gmail.com (=?iso-8859-1?Q?Fran=E7ois_Beausoleil?=)
Date: Mon, 8 Jul 2013 21:37:33 -0400
Subject: [rabbitmq-discuss] RabbitMQ swag
Message-ID: <96072042-9CAC-47D7-9AE7-49BA3D3830C1@gmail.com>

Does RabbitMQ have a program for T-Shirts, stickers or such? We have an event in Sherbrooke where I'm giving an intro talk on RabbitMQ at the APIUS: http://apius.ca/

Where can I get in contact with such a team, if it exists?

Thanks!
Fran?ois Beausoleil

From 314992959 at qq.com  Tue Jul  9 02:37:37 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 8 Jul 2013 18:37:37 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c    non-block
Message-ID: <1373333857017-27908.post@n5.nabble.com>

should  I  use   wait_simple_frame_no_block()   instead  of   select()  if  I
want  make  no-block  receive?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-non-block-tp27908.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From 314992959 at qq.com  Tue Jul  9 02:51:28 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 8 Jul 2013 18:51:28 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c   confirmation
Message-ID: <1373334688020-27910.post@n5.nabble.com>

I  use  amqp_confirm_select()  to  support confirm send message.   But  I
need  to  get  the  return  by   amqp_simple_wait_frame()  ?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-confirmation-tp27910.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From alan.antonuk at gmail.com  Tue Jul  9 02:59:21 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 8 Jul 2013 18:59:21 -0700
Subject: [rabbitmq-discuss] rabbitmq-c non-block
In-Reply-To: <1373333857017-27908.post@n5.nabble.com>
References: <1373333857017-27908.post@n5.nabble.com>
Message-ID: <CAAt2poLBiAiqpFV5Ke-b=C=QoFveUFop6AmMz6iGiiaSTyZj_w@mail.gmail.com>

Yes.


On Mon, Jul 8, 2013 at 6:37 PM, 3k4b251 <314992959 at qq.com> wrote:

> should  I  use   wait_simple_frame_no_block()   instead  of   select()  if
>  I
> want  make  no-block  receive?
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-non-block-tp27908.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/6a7a212b/attachment.htm>

From 314992959 at qq.com  Tue Jul  9 03:05:22 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 8 Jul 2013 19:05:22 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c non-block
In-Reply-To: <CAAt2poLBiAiqpFV5Ke-b=C=QoFveUFop6AmMz6iGiiaSTyZj_w@mail.gmail.com>
References: <1373333857017-27908.post@n5.nabble.com>
	<CAAt2poLBiAiqpFV5Ke-b=C=QoFveUFop6AmMz6iGiiaSTyZj_w@mail.gmail.com>
Message-ID: <1373335522536-27912.post@n5.nabble.com>

can  you  give  me  some  example?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-non-block-tp27908p27912.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From alan.antonuk at gmail.com  Tue Jul  9 03:12:57 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 8 Jul 2013 19:12:57 -0700
Subject: [rabbitmq-discuss] rabbitmq-c confirmation
In-Reply-To: <1373334688020-27910.post@n5.nabble.com>
References: <1373334688020-27910.post@n5.nabble.com>
Message-ID: <CAAt2poLWnNnyn3SsmdHBDSdiyjJvUigv6cn0Ptb=CbUD-GrOaQ@mail.gmail.com>

If you put a channel in confirm mode by running the amqp_confirm_select()
function, after calling amqp_basic_publish() you will need to check for a
basic.ack (AMQP_BASIC_ACK_METHOD) method from the broker.  If you set the
mandatory flag while publishing you and your message cannot be routed to a
queue, then you will get a AMQP_BASIC_RETURN_METHOD method, followed by the
message (1 header frame + 1 or more body frames), followed by a
AMQP_BASIC_ACK_METHOD.

You should read these frames by calling amqp_simple_wait_frame().

-Alan


On Mon, Jul 8, 2013 at 6:51 PM, 3k4b251 <314992959 at qq.com> wrote:

> I  use  amqp_confirm_select()  to  support confirm send message.   But  I
> need  to  get  the  return  by   amqp_simple_wait_frame()  ?
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-confirmation-tp27910.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/0d0283be/attachment.htm>

From alan.antonuk at gmail.com  Tue Jul  9 03:20:44 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 8 Jul 2013 19:20:44 -0700
Subject: [rabbitmq-discuss] rabbitmq-c non-block
In-Reply-To: <1373335522536-27912.post@n5.nabble.com>
References: <1373333857017-27908.post@n5.nabble.com>
	<CAAt2poLBiAiqpFV5Ke-b=C=QoFveUFop6AmMz6iGiiaSTyZj_w@mail.gmail.com>
	<1373335522536-27912.post@n5.nabble.com>
Message-ID: <CAAt2poLRM5eHgHKt_zeTqFnMQH+1B-nsCNUdcagF2A7bpgwOBA@mail.gmail.com>

You might want to check out an API that I've added as of today:
amqp_consume_message():
https://github.com/alanxz/rabbitmq-c/blob/master/librabbitmq/amqp.h#L688

You can find an example on how to use it here:
https://github.com/alanxz/rabbitmq-c/blob/master/examples/amqp_consumer.c#L81

To specify a timeout for that function you'd create a struct timeval

struct timeval timeout;
timeout.tv_sec = 5; /* Wait up to 5.0006 seconds */
timeout.tv_usec = 6000;

/* Pass timeval into amqp_consume_message() like so.
amqp_consume_message(conn, &envelope, &timeout, 0);

-Alan


On Mon, Jul 8, 2013 at 7:05 PM, 3k4b251 <314992959 at qq.com> wrote:

> can  you  give  me  some  example?
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-non-block-tp27908p27912.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130708/3df7c694/attachment.htm>

From 314992959 at qq.com  Tue Jul  9 07:29:06 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 8 Jul 2013 23:29:06 -0700 (PDT)
Subject: [rabbitmq-discuss] Publisher Confirms support in Rabbitmq-c
	client.
In-Reply-To: <CAAt2poJAiH19FxCnGp4tnVsa51=xzpYOJkesws88nGBWQ5eb1g@mail.gmail.com>
References: <1342558531224-20862.post@n5.nabble.com>
	<40ACD542-7A9E-435A-84D6-7FEC8E41078C@rbcon.com>
	<CAAt2poJAiH19FxCnGp4tnVsa51=xzpYOJkesws88nGBWQ5eb1g@mail.gmail.com>
Message-ID: <1373351346038-27915.post@n5.nabble.com>

I  usually   do  like  this:    


 res  =  amqp_basic_publish(....);

if(res <0)
{
     //   Publish   faild
}     

//Publish  Ok.


It   menns   message  already   pass to  queue  or  exchange ?  

if  not,  I  try  to  use  confirm  like you say .
I'd like  to  use   amqp_wait_simple_frame()  after  amqp_basic_publish();   
But  it  seems  like  that  I  just  receive  the message body  header  and 
others.   not   the  ack.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Publisher-Confirms-support-in-Rabbitmq-c-client-tp20862p27915.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From 314992959 at qq.com  Tue Jul  9 07:30:32 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 8 Jul 2013 23:30:32 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c confirmation
In-Reply-To: <CAAt2poLWnNnyn3SsmdHBDSdiyjJvUigv6cn0Ptb=CbUD-GrOaQ@mail.gmail.com>
References: <1373334688020-27910.post@n5.nabble.com>
	<CAAt2poLWnNnyn3SsmdHBDSdiyjJvUigv6cn0Ptb=CbUD-GrOaQ@mail.gmail.com>
Message-ID: <1373351432799-27916.post@n5.nabble.com>

I  usually   do  like  this:     


 res  =  amqp_basic_publish(....); 

if(res <0) 
{ 
     //   Publish   faild 
}     

//Publish  Ok. 


It   menns   message  already   pass to  queue  or  exchange ?   

if  not,  I  try  to  use  confirm  like you say . 
I'd like  to  use   amqp_wait_simple_frame()  after  amqp_basic_publish();   
But  it  seems  like  that  I  just  receive  the message body  header  and 
others.   not   the  ack. 




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-confirmation-tp27910p27916.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From alan.antonuk at gmail.com  Tue Jul  9 08:29:24 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 9 Jul 2013 00:29:24 -0700
Subject: [rabbitmq-discuss] rabbitmq-c confirmation
In-Reply-To: <1373351432799-27916.post@n5.nabble.com>
References: <1373334688020-27910.post@n5.nabble.com>
	<CAAt2poLWnNnyn3SsmdHBDSdiyjJvUigv6cn0Ptb=CbUD-GrOaQ@mail.gmail.com>
	<1373351432799-27916.post@n5.nabble.com>
Message-ID: <CAAt2poLRzNhbyT6jRAp95CSMPT=NLnCEss-ZieSvYQeH+93ihQ@mail.gmail.com>

Not quite.

The result from amqp_basic_publish() means that the library was able to
successfully write the message to the network.  This does not mean that the
message was published successfully.

By default the broker will not send anything back to the client when it
publishes a message unless an error occurs (such as publishing to an
exchange that doesn't exist).

You need to use the code referenced earlier on the list in order to do
publisher confirms with rabbitmq-c.

On Mon, Jul 8, 2013 at 11:30 PM, 3k4b251 <314992959 at qq.com> wrote:

> I  usually   do  like  this:
>
>
>  res  =  amqp_basic_publish(....);
>
> if(res <0)
> {
>      //   Publish   faild
> }
>
> //Publish  Ok.
>
>
> It   menns   message  already   pass to  queue  or  exchange ?
>
> if  not,  I  try  to  use  confirm  like you say .
> I'd like  to  use   amqp_wait_simple_frame()  after  amqp_basic_publish();
> But  it  seems  like  that  I  just  receive  the message body  header  and
> others.   not   the  ack.
>
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-confirmation-tp27910p27916.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/f6725384/attachment.htm>

From liangrubo at bytedance.com  Tue Jul  9 08:45:02 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Tue, 9 Jul 2013 15:45:02 +0800
Subject: [rabbitmq-discuss] fail to start rabbitmq after upgrading from
 version 3.1.1 to 3.1.3 with {hipe_compile, true}
Message-ID: <CA+BFTFuerR=QZAbHd6BTyzEAwA7LRLtDCb-yi4TQjR4YJycfvA@mail.gmail.com>

Hi,

I have rabbitmq upgraded from version 3.1.1 to 3.1.3. The rabbitmq server
failed to start with {hipe_compile, true} with following error message(it
can start without hipe_compile option set):

{"init terminating in
do_boot",{rabbit,failure_during_boot,{{hipe,418,{cant_find_beam_file,ssl_connection}},[{hipe,beam_file,1,[{file,"hipe.erl"},{line,418}]},{hipe,c,2,[{file,"hipe.erl"},{line,312}]},{rabbit,'-hipe_compile/0-lc$^1/1-1-',1,[]},{rabbit,'-hipe_compile/0-lc$^1/1-1-',1,[]}]}}}

What should I do to make it work?

Thanks,
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/089d9d5a/attachment.htm>

From 314992959 at qq.com  Tue Jul  9 08:49:47 2013
From: 314992959 at qq.com (3k4b251)
Date: Tue, 9 Jul 2013 00:49:47 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c confirmation
In-Reply-To: <CAAt2poLRzNhbyT6jRAp95CSMPT=NLnCEss-ZieSvYQeH+93ihQ@mail.gmail.com>
References: <1373334688020-27910.post@n5.nabble.com>
	<CAAt2poLWnNnyn3SsmdHBDSdiyjJvUigv6cn0Ptb=CbUD-GrOaQ@mail.gmail.com>
	<1373351432799-27916.post@n5.nabble.com>
	<CAAt2poLRzNhbyT6jRAp95CSMPT=NLnCEss-ZieSvYQeH+93ihQ@mail.gmail.com>
Message-ID: <1373356187057-27919.post@n5.nabble.com>

It's    a  little  hard  to understand, can you  show  me  a   example ?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-confirmation-tp27910p27919.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Tue Jul  9 08:51:07 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 09 Jul 2013 08:51:07 +0100
Subject: [rabbitmq-discuss] fail to start rabbitmq after upgrading from
 version 3.1.1 to 3.1.3 with {hipe_compile, true}
In-Reply-To: <CA+BFTFuerR=QZAbHd6BTyzEAwA7LRLtDCb-yi4TQjR4YJycfvA@mail.gmail.com>
References: <CA+BFTFuerR=QZAbHd6BTyzEAwA7LRLtDCb-yi4TQjR4YJycfvA@mail.gmail.com>
Message-ID: <51DBC0EB.6010006@rabbitmq.com>

On 09/07/13 08:45, Rubo Liang wrote:
> I have rabbitmq upgraded from version 3.1.1 to 3.1.3.

I am guessing you upgraded not just rabbit but also Erlang...

> The rabbitmq server failed to start with {hipe_compile, true} with
> following error message(it can start without hipe_compile option
> set):
>
> {"init terminating in
> do_boot",{rabbit,failure_during_boot,{{hipe,418,{cant_find_beam_file,ssl_connection}},[{hipe,beam_file,1,[{file,"hipe.erl"},{line,418}]},{hipe,c,2,[{file,"hipe.erl"},{line,312}]},{rabbit,'-hipe_compile/0-lc$^1/1-1-',1,[]},{rabbit,'-hipe_compile/0-lc$^1/1-1-',1,[]}]}}}
>
>  What should I do to make it work?

See
http://rabbitmq.1065348.n5.nabble.com/HiPE-compilation-error-with-rabbitmq-3-1-3-and-erlang-R16B01-Cannot-find-ssl-record-beam-file-td27646.html

Matthias.

From liangrubo at bytedance.com  Tue Jul  9 08:57:00 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Tue, 9 Jul 2013 15:57:00 +0800
Subject: [rabbitmq-discuss] fail to start rabbitmq after upgrading from
 version 3.1.1 to 3.1.3 with {hipe_compile, true}
In-Reply-To: <51DBC0EB.6010006@rabbitmq.com>
References: <CA+BFTFuerR=QZAbHd6BTyzEAwA7LRLtDCb-yi4TQjR4YJycfvA@mail.gmail.com>
	<51DBC0EB.6010006@rabbitmq.com>
Message-ID: <CA+BFTFs_CY9+CDtU36hMYoaNx_gLeGBUe6_C1z6TCgSt_MTLsQ@mail.gmail.com>

You are right, Matthias, thanks a lot!


On Tue, Jul 9, 2013 at 3:51 PM, Matthias Radestock <matthias at rabbitmq.com>wrote:

> On 09/07/13 08:45, Rubo Liang wrote:
>
>> I have rabbitmq upgraded from version 3.1.1 to 3.1.3.
>>
>
> I am guessing you upgraded not just rabbit but also Erlang...
>
>
>  The rabbitmq server failed to start with {hipe_compile, true} with
>> following error message(it can start without hipe_compile option
>> set):
>>
>> {"init terminating in
>> do_boot",{rabbit,failure_**during_boot,{{hipe,418,{cant_**
>> find_beam_file,ssl_connection}**},[{hipe,beam_file,1,[{file,"**
>> hipe.erl"},{line,418}]},{hipe,**c,2,[{file,"hipe.erl"},{line,**
>> 312}]},{rabbit,'-hipe_compile/**0-lc$^1/1-1-',1,[]},{rabbit,'-**
>> hipe_compile/0-lc$^1/1-1-',1,[**]}]}}}
>>
>>  What should I do to make it work?
>>
>
> See
> http://rabbitmq.1065348.n5.**nabble.com/HiPE-compilation-**
> error-with-rabbitmq-3-1-3-and-**erlang-R16B01-Cannot-find-ssl-**
> record-beam-file-td27646.html<http://rabbitmq.1065348.n5.nabble.com/HiPE-compilation-error-with-rabbitmq-3-1-3-and-erlang-R16B01-Cannot-find-ssl-record-beam-file-td27646.html>
>
> Matthias.
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>



-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/db27019c/attachment.htm>

From gracebie9 at gmail.com  Tue Jul  9 09:31:14 2013
From: gracebie9 at gmail.com (gracebie)
Date: Tue, 9 Jul 2013 01:31:14 -0700 (PDT)
Subject: [rabbitmq-discuss] Error when accessing management plugin
In-Reply-To: <51D67D19.4030006@gmail.com>
References: <51D67D19.4030006@gmail.com>
Message-ID: <1373358674432-27922.post@n5.nabble.com>

First I will suggest you to follow these steps
1-Update Google Chrome
2-Clean your cache and browser cookies
- Click Google Chrome Menu on the right corner of browser window 
- Select Tools from Menu list 
- Select Clear Browsing Data 
- You will see a dialogue box, check all boxes 
- Select Beginning of Time 
- Click Clear Browsing Data button 

3-Check internet connection

Let me know if it helps you then i have found a presentation tutorial that
will resolve your problem You are only required to follow the steps
mentioned in the tutorial

*
<http://www.slideshare.net/JessicaNokk/how-to-fix-error-324-neterremptyresponse>
Fix error 324* 

Best of luck



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Error-when-accessing-management-plugin-tp27844p27922.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mrtndimitrov at gmail.com  Tue Jul  9 09:43:25 2013
From: mrtndimitrov at gmail.com (Martin Dimitrov)
Date: Tue, 09 Jul 2013 11:43:25 +0300
Subject: [rabbitmq-discuss] Error when accessing management plugin
In-Reply-To: <1373358674432-27922.post@n5.nabble.com>
References: <51D67D19.4030006@gmail.com>
	<1373358674432-27922.post@n5.nabble.com>
Message-ID: <51DBCD2D.6000506@gmail.com>

Thanks for the reply but actually the problem was somewhere else. Look
at the other messages in this thread - tsung installed an older version
of mochiweb in the Erlang path so it is picked before the RabbitMQ's
version. Since I need tsung on this particular machine, what I do to fix
this mess is to connect to RabbitMQ VM, and do code:load_abs/1 to load
the correct version of mochiweb.

Martin

On 7/9/2013 11:31 AM, gracebie wrote:
> First I will suggest you to follow these steps
> 1-Update Google Chrome
> 2-Clean your cache and browser cookies
> - Click Google Chrome Menu on the right corner of browser window 
> - Select Tools from Menu list 
> - Select Clear Browsing Data 
> - You will see a dialogue box, check all boxes 
> - Select Beginning of Time 
> - Click Clear Browsing Data button 
> 
> 3-Check internet connection
> 
> Let me know if it helps you then i have found a presentation tutorial that
> will resolve your problem You are only required to follow the steps
> mentioned in the tutorial
> 
> *
> <http://www.slideshare.net/JessicaNokk/how-to-fix-error-324-neterremptyresponse>
> Fix error 324* 
> 
> Best of luck
> 
> 
> 
> --
> View this message in context: http://rabbitmq.1065348.n5.nabble.com/Error-when-accessing-management-plugin-tp27844p27922.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 


From haster2004 at yandex.ru  Tue Jul  9 12:17:46 2013
From: haster2004 at yandex.ru (Haster)
Date: Tue, 9 Jul 2013 04:17:46 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c error list
Message-ID: <1373368666810-27924.post@n5.nabble.com>

Hi there!

I found that library rabbitmq-c can return a lot of different error -
network related errors, OS errors and so on.

Is there some document that represent full list of errors that could be
returned by library?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-error-list-tp27924.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Tue Jul  9 12:28:15 2013
From: haster2004 at yandex.ru (Haster)
Date: Tue, 9 Jul 2013 04:28:15 -0700 (PDT)
Subject: [rabbitmq-discuss] Make queue.bind after basic.consume
	(rabbitmq-c)
In-Reply-To: <CAAt2poJmR5dfPVk4OOYRrCWuSHeO3V4Wzoh=Z1evew3cvmFj3w@mail.gmail.com>
References: <1373268306518-27879.post@n5.nabble.com>
	<CAE3HoVS4Y4fpLC_ydSbe8Z1KgoDgOyuNgDmsK-nP0iWoZWUA4A@mail.gmail.com>
	<CAAt2poJmR5dfPVk4OOYRrCWuSHeO3V4Wzoh=Z1evew3cvmFj3w@mail.gmail.com>
Message-ID: <1373369295664-27925.post@n5.nabble.com>

Alan, thanks for reply.

I was wrong when said that there is only one thread... I have to of them:

first thread creates all things (connection, channels to queue and
exchanges), call basic.consume and start new thread that reads messages from
queue and processes them...

But first thread can call one method, that add some binds and maybe declare
new exchanges

At that moment I don't sync this threads

But can it be the root of problem?
I use separate channel for each used exchange and queue.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Make-queue-bind-after-basic-consume-rabbitmq-c-tp27879p27925.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From haster2004 at yandex.ru  Tue Jul  9 12:30:44 2013
From: haster2004 at yandex.ru (Haster)
Date: Tue, 9 Jul 2013 04:30:44 -0700 (PDT)
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
	<CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
Message-ID: <1373369444985-27926.post@n5.nabble.com>

Tony. thanks for reply

I was wrong when said that there is only one thread... I have to of them: 

first thread creates all things (connection, channels to queue and
exchanges), call basic.consume and start new thread that reads messages from
queue and processes them... 

But first thread can call one method, that add some binds and maybe declare
new exchanges 

At that moment I don't sync this threads 

But can it be the root of problem? 
I use separate channel for each used exchange and queue.

And one thing for thinking. My program crashes only on HP-UX 11.31, on
windows, Solaris and Linux Red Hat it works well



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Program-crashes-in-amqp-abort-on-HP-UX-11-31-tp27878p27926.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From tonygarnockjones+rabbitmq at gmail.com  Tue Jul  9 13:35:38 2013
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Tue, 9 Jul 2013 08:35:38 -0400
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <1373369444985-27926.post@n5.nabble.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
	<CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
	<1373369444985-27926.post@n5.nabble.com>
Message-ID: <CAM8fPiRSfhCDCpHdUnxHxG+fjJ4q-aoV9reMUEzd9fZAGaBeWQ@mail.gmail.com>

On 9 July 2013 07:30, Haster <haster2004 at yandex.ru> wrote:

> first thread creates all things (connection, channels to queue and
> exchanges), call basic.consume and start new thread that reads messages
> from
> queue and processes them...
>

In principle, this is fine. I would still not do it, myself: instead, I
would never let a connection "cross over" between threads. But that's
probably just superstitious of me :-)


> But first thread can call one method, that add some binds and maybe declare
> new exchanges
>

Aha! OK. Yes, that is probably the cause of the problem.

Try making sure that each thread has its own private connection to the
broker. Perhaps the thread that only occasionally needs to use a connection
could create it when needed, and destroy it when it is finished.

Connections *must* not be shared between threads[1].


> But can it be the root of problem?
> I use separate channel for each used exchange and queue.
>

There is *no* locking in librabbitmq, so *any* use of a connection across
threads requires you to do the locking manually.


> And one thing for thinking. My program crashes only on HP-UX 11.31, on
> windows, Solaris and Linux Red Hat it works well
>

My guess is that this is just chance. If two threads are sharing a single
librabbitmq connection without any mutexing, then the bug exists on all
platforms, even if it doesn't manifest deterministically.

Regards,
  Tony

[1] Unless you do some locking yourself, which is difficult and
error-prone, and not something I'd recommend.
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/21393eb7/attachment.htm>

From haster2004 at yandex.ru  Tue Jul  9 13:46:06 2013
From: haster2004 at yandex.ru (Haster)
Date: Tue, 9 Jul 2013 05:46:06 -0700 (PDT)
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <CAM8fPiRSfhCDCpHdUnxHxG+fjJ4q-aoV9reMUEzd9fZAGaBeWQ@mail.gmail.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
	<CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
	<1373369444985-27926.post@n5.nabble.com>
	<CAM8fPiRSfhCDCpHdUnxHxG+fjJ4q-aoV9reMUEzd9fZAGaBeWQ@mail.gmail.com>
Message-ID: <1373373966022-27928.post@n5.nabble.com>

Tony, thanks!

Is it enough if I cover reading message by mutex and guarantee that I call
bind methods only then I don't call read method?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Program-crashes-in-amqp-abort-on-HP-UX-11-31-tp27878p27928.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From tonygarnockjones+rabbitmq at gmail.com  Tue Jul  9 14:07:30 2013
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Tue, 9 Jul 2013 09:07:30 -0400
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <1373373966022-27928.post@n5.nabble.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
	<CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
	<1373369444985-27926.post@n5.nabble.com>
	<CAM8fPiRSfhCDCpHdUnxHxG+fjJ4q-aoV9reMUEzd9fZAGaBeWQ@mail.gmail.com>
	<1373373966022-27928.post@n5.nabble.com>
Message-ID: <CAM8fPiQeL1g7em_WTAY6pNQFeqYWghS2Eoi4hCqhXw1w41WfuA@mail.gmail.com>

On 9 July 2013 08:46, Haster <haster2004 at yandex.ru> wrote:

> Is it enough if I cover reading message by mutex and guarantee that I call
> bind methods only then I don't call read method?
>

I can't guarantee that, and it sounds difficult (= impossible, probably) to
implement because what if you want to do a bind() while the other thread is
blocked, reading from the socket?

Thinking harder about this, I suspect that only a very few limited kinds of
concurrent use of a connection can be implemented by managing your own
mutexing; to get the full range, there'd have to be very deep
reorganisation of the library's structure to use threads internally. Which
was an anti-goal when I wrote it initially.

My recommendation, then, is to never try to share a connection between
threads.

Tony
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/37db4567/attachment.htm>

From haster2004 at yandex.ru  Tue Jul  9 14:17:43 2013
From: haster2004 at yandex.ru (Haster)
Date: Tue, 9 Jul 2013 06:17:43 -0700 (PDT)
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <CAM8fPiQeL1g7em_WTAY6pNQFeqYWghS2Eoi4hCqhXw1w41WfuA@mail.gmail.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
	<CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
	<1373369444985-27926.post@n5.nabble.com>
	<CAM8fPiRSfhCDCpHdUnxHxG+fjJ4q-aoV9reMUEzd9fZAGaBeWQ@mail.gmail.com>
	<1373373966022-27928.post@n5.nabble.com>
	<CAM8fPiQeL1g7em_WTAY6pNQFeqYWghS2Eoi4hCqhXw1w41WfuA@mail.gmail.com>
Message-ID: <1373375863706-27930.post@n5.nabble.com>

Tony,

while other thread is blocked another also will blocked and only after first
release mutex will call bind method.

All right, if I will make a new connection in thread that makes bind and
will call bind on it that will be enough?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Program-crashes-in-amqp-abort-on-HP-UX-11-31-tp27878p27930.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From tonygarnockjones+rabbitmq at gmail.com  Tue Jul  9 14:30:27 2013
From: tonygarnockjones+rabbitmq at gmail.com (Tony Garnock-Jones)
Date: Tue, 9 Jul 2013 09:30:27 -0400
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <1373375863706-27930.post@n5.nabble.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
	<CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
	<1373369444985-27926.post@n5.nabble.com>
	<CAM8fPiRSfhCDCpHdUnxHxG+fjJ4q-aoV9reMUEzd9fZAGaBeWQ@mail.gmail.com>
	<1373373966022-27928.post@n5.nabble.com>
	<CAM8fPiQeL1g7em_WTAY6pNQFeqYWghS2Eoi4hCqhXw1w41WfuA@mail.gmail.com>
	<1373375863706-27930.post@n5.nabble.com>
Message-ID: <CAM8fPiTQTmb11M_r_=BUQ7dEm36uS1_Moy5hGwPO_nDSMFogOw@mail.gmail.com>

On 9 July 2013 09:17, Haster <haster2004 at yandex.ru> wrote:

> while other thread is blocked another also will blocked and only after
> first
> release mutex will call bind method.
>

The thread wanting to bind() might be waiting for a very long time in that
case; the consuming thread won't wake up until a frame arrives for it.


> All right, if I will make a new connection in thread that makes bind and
> will call bind on it that will be enough?
>

Yes: if you make sure that a connection is never used by more than one
thread, the problem that caused this mail-thread should go away.

Tony
-- 
Tony Garnock-Jones
tonygarnockjones at gmail.com
http://homepages.kcbbs.gen.nz/tonyg/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/38c66b19/attachment.htm>

From John.Price at basware.com  Tue Jul  9 14:36:32 2013
From: John.Price at basware.com (Price, John)
Date: Tue, 9 Jul 2013 13:36:32 +0000
Subject: [rabbitmq-discuss] =?windows-1252?q?Getting_=93None_of_the_specif?=
 =?windows-1252?q?ied_endpoints_were_reachable=94?=
Message-ID: <6F15D4C1E68AE14B9D3AB5851B9FC3324182D371@DB3PRD0711MB538.eurprd07.prod.outlook.com>

Hello,

I have some C# code that works most of the time, but occasionally errors when trying to connect to a broker.  Once this error happens service needs restarting to continue.

I get exception ?None of the specified endpoints were reachable?
With inner exception ?System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.     at System.Threading.Thread.StartInternal(IPrincipal principal, StackCrawlMark& stackMark)     at System.Threading.Thread.Start(StackCrawlMark& stackMark)     at System.Threading.Thread.Start()     at RabbitMQ.Client.Impl.ConnectionBase.StartMainLoop()     at RabbitMQ.Client.Impl.ConnectionBase..ctor(ConnectionFactory factory, Boolean insist, IFrameHandler frameHandler)     at RabbitMQ.Client.Framing.Impl.v0_9_1.ProtocolBase.CreateConnection(ConnectionFactory factory, Boolean insist, IFrameHandler frameHandler)     at RabbitMQ.Client.ConnectionFactory.FollowRedirectChain(Int32 maxRedirects, IDictionary connectionAttempts, IDictionary connectionErrors, AmqpTcpEndpoint[]& mostRecentKnownHosts, AmqpTcpEndpoint endpoint)?


Any ideas on what is causing this? And how to prevent it.

RabbitMQ running on Windows 2008 R2 standard (64 bit)

John


private IConnection GetFileConnection()
        {
            var db = new DatabaseAccess();
            var host = ConfigurationManager.AppSettings["amqpHostName"];
            var port = ConfigurationManager.AppSettings["amqpPort"];
            _exchangeName = ConfigurationManager.AppSettings["FILE_EXCHANGE_NAME"];
            _queueName = ConfigurationManager.AppSettings["FILE_QUEUE"];
            _routingKey = _queueName;
            _contentType = "text/plain";
            db.WriteLog(1, _exchangeName + " - " + _queueName + " - " + _routingKey);

            ConnectionFactory factory;
            try
            {
                factory = ConnectToBroker(host, port);
            }
            catch (BrokerUnreachableException ex)
            {
                db.WriteLog(3, "BrokerUnreachableException - " + ex.Message);
                db.WriteLog(3, "BrokerUnreachableException - " + ex.InnerException);
                throw;
            }


            db.WriteLog(1, "connection made");

            IConnection connection = factory.CreateConnection();


            return connection;
        }


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/cca35bdf/attachment.htm>

From haster2004 at yandex.ru  Tue Jul  9 14:40:49 2013
From: haster2004 at yandex.ru (Haster)
Date: Tue, 9 Jul 2013 06:40:49 -0700 (PDT)
Subject: [rabbitmq-discuss] Program crashes in amqp_abort() on HP-UX
	11.31
In-Reply-To: <CAM8fPiTQTmb11M_r_=BUQ7dEm36uS1_Moy5hGwPO_nDSMFogOw@mail.gmail.com>
References: <1373267517377-27878.post@n5.nabble.com>
	<CAM8fPiQjLKv0iODCM6vZiPV1MEjQVvDLgY64DWC=U74NRixx0w@mail.gmail.com>
	<1373289435887-27896.post@n5.nabble.com>
	<CAM8fPiSJtnWjrk-cFNYBtJOS-Z14nJgyV9AEYtwSUQUiwM1LrQ@mail.gmail.com>
	<1373369444985-27926.post@n5.nabble.com>
	<CAM8fPiRSfhCDCpHdUnxHxG+fjJ4q-aoV9reMUEzd9fZAGaBeWQ@mail.gmail.com>
	<1373373966022-27928.post@n5.nabble.com>
	<CAM8fPiQeL1g7em_WTAY6pNQFeqYWghS2Eoi4hCqhXw1w41WfuA@mail.gmail.com>
	<1373375863706-27930.post@n5.nabble.com>
	<CAM8fPiTQTmb11M_r_=BUQ7dEm36uS1_Moy5hGwPO_nDSMFogOw@mail.gmail.com>
Message-ID: <1373377249182-27933.post@n5.nabble.com>

Tony Garnock-Jones-6 wrote
> On 9 July 2013 09:17, Haster &lt;

> haster2004@

> &gt; wrote:
> The thread wanting to bind() might be waiting for a very long time in that
> case; the consuming thread won't wake up until a frame arrives for it.

Anyway in my test case I have to wait until all binds will be done, so it
isn't a problem for me
(I need to sync this two threads and continue getting messages only after
binding procedure)

Tony, thanks for your help!



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Program-crashes-in-amqp-abort-on-HP-UX-11-31-tp27878p27933.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From liangrubo at bytedance.com  Tue Jul  9 15:59:08 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Tue, 9 Jul 2013 22:59:08 +0800
Subject: [rabbitmq-discuss] why rabbit eating so much memory?
Message-ID: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>

hi,

My rabbit eats 25G memory, but the queues don't take to much as shown by
this command: 'rabbitmqctl list_queues name messages memory':
Listing queues ...
ha.snssdk.log   695954  16426216
ha.snssdk.log.dispatch  660748  102698808
ha.snssdk.log.output    63573   32800680
ssesion 0       25952
ssesion.log     101     436328
ssesion.output  0       148816
...done.

As shown above the queues only take about 150M memory. But the rabbit
process actually takes about 25G.

'rabbitmqctl status' gives me following output on memory:

 {memory,
     [{total,25394382848},
      {connection_procs,140253648},
      {queue_procs,19311874888},
      {plugins,365944},
      {other_proc,53179248},
      {mnesia,71592},
      {mgmt_db,10184},
      {msg_index,328168736},
      {other_ets,39820008},
      {binary,5487509328},
      {code,19731036},
      {atom,703377},
      {other_system,12694859}]},

Why is this and how should I get it fixed?

Rabbit version: 3.1.3
erlang version: R16B01

Thanks,
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/f549eb0a/attachment.htm>

From 314992959 at qq.com  Wed Jul 10 03:16:31 2013
From: 314992959 at qq.com (3k4b251)
Date: Tue, 9 Jul 2013 19:16:31 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c     receive  message  question
Message-ID: <1373422591572-27935.post@n5.nabble.com>

I  find    if  I   use  amqp_simple_wait_frame()   I  can   just   get   only 
one message  everytime, is  that  too  slow?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-receive-message-question-tp27935.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From zachary.w.austin at gmail.com  Wed Jul 10 01:05:46 2013
From: zachary.w.austin at gmail.com (Zach Austin)
Date: Tue, 9 Jul 2013 17:05:46 -0700 (PDT)
Subject: [rabbitmq-discuss] Possible RabbitMQ 3.0.4 Management Plug-in
 (Mochiweb) Directory Traversal Vulnerability?
Message-ID: <8064f5da-f0a2-4a76-a6e5-8c7739eb63c4@googlegroups.com>

Hello all,

A commercial off-the-shelf vulnerability scanner is detecting a directory 
traversal vulnerability in the RabbitMQ management plugin HTTP server 
(Mochiweb) installed in the default configuration on Windows Server 2003. 
Exploitation of the vulnerability reportedly does not require 
authentication.  

I can provide details upon request.  Please let me know if this is a known 
issue and whether there are patches available that may resolve this issue.

Thank you.
Zach


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/60b9c190/attachment.htm>

From zachary.w.austin at gmail.com  Wed Jul 10 01:10:19 2013
From: zachary.w.austin at gmail.com (Zach Austin)
Date: Tue, 9 Jul 2013 17:10:19 -0700 (PDT)
Subject: [rabbitmq-discuss] Work Queues design
In-Reply-To: <51781122-733f-45ea-a5ad-96301f1435db@googlegroups.com>
References: <51781122-733f-45ea-a5ad-96301f1435db@googlegroups.com>
Message-ID: <aa8a406c-f0d4-4a7e-8dad-916a8c2c687d@googlegroups.com>

Hi Flavio,

If you haven't already, you may want to investigate setting up competing 
consumers.

Thanks,
Zach

On Wednesday, June 19, 2013 4:41:14 AM UTC-5, Flavio Pompermaier wrote:
>
> Hi to everybody,
> I'm new to RabbitMQ but from what I see it could be the solution for a 
> buffer implementation in one of my project.
> In my scenario there will be a big queue of tasks (i.e. document indexing) 
> that should be served as fast as possible,
>
> Looking at the tutorial I think that what I need is somehow similar to the 
> Work queues (http://www.rabbitmq.com/tutorials/tutorial-two-python.html) 
> plus fair dispatching.
> However, the aforementioned constraint "served as fast as possible" is not 
> clear how to design a correct size of workers, in a scalable way..
> In every example, a worker is a standalone java process, whereas I would 
> like to manage workers more like a pool and take the first available one..
>
> So, I think that I can summarize my questions as:
>
> 1) What is the best RabbitMQ architecture to solve my problems?
> 2) If my poolable solution is correct, how can I set up a pool? How do I 
> decide the best size of the pool?
> 3) What if I discover that my server is overloaded and I want to 
> distribute the load? How can I avoid to store all the queues message in 
> just one server (if I want persistable queues)?
>
> Best regards,
> Flavio
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130709/d2e479a0/attachment.htm>

From matthias at rabbitmq.com  Wed Jul 10 07:56:19 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 10 Jul 2013 07:56:19 +0100
Subject: [rabbitmq-discuss] Odd Behavior w/ Restoring Broken Cluster
In-Reply-To: <CAHEpgBCWo_icdGXmn4mFGZT7GJh_9qLPftyoL6MoYQMsQ_khUQ@mail.gmail.com>
References: <CAHEpgBCWo_icdGXmn4mFGZT7GJh_9qLPftyoL6MoYQMsQ_khUQ@mail.gmail.com>
Message-ID: <51DD0593.5030100@rabbitmq.com>

Chris,

apologies for the late reply...

On 08/07/13 16:11, Chris wrote:
> I noticed some odd behavior when trying to restore a broken cluster
> that I think may be a bug.
> [...]
>     *[root at rabbit-a ~]# rabbitmqctl stop*
>     Stopping and halting node 'rabbit at rabbit-a' ...
>
>     =INFO REPORT==== 8-Jul-2013::09:45:48 ===
>     Halting Erlang VM
>     Error: {{badmatch,undefined},
>
>     [{rabbit_plugins,active,0,[{file,"src/rabbit_plugins.erl"},{line,48}]},
>
>       {rabbit,app_shutdown_order,0,[{file,"src/rabbit.erl"},{line,476}]},
>               {rabbit,stop,0,[{file,"src/rabbit.erl"},{line,380}]},
>               {rabbit,stop_and_halt,0,[{file,"src/rabbit.erl"},{line,384}]},
>
>       {rpc,'-handle_call_call/6-fun-0-',5,[{file,"rpc.erl"},{line,205}]}]}

Yep, that's a bug.

>     *[root at rabbitmq-b ~]# rabbitmqctl reset*
>     Resetting node 'rabbit at rabbitmq-b' ...
>
>     =INFO REPORT==== 8-Jul-2013::09:49:29 ===
>     Resetting Rabbit
>
>     =INFO REPORT==== 8-Jul-2013::09:49:29 ===
>          application: mnesia
>          exited: stopped
>          type: temporary
>     Error: {version_mismatch,[],
>                               [add_ip_to_listener,exchange_decorators,
>                                exchange_event_serial,gm,gm_pids,
>                                mirrored_supervisor,remove_user_scope,
>
>     runtime_parameters,semi_durable_route,topic_trie,
>
>     topic_trie_node,user_admin_to_tags,add_queue_ttl,
>                                multiple_routing_keys]}

And that is a bug too. Running force_reset instead would probably avoid 
this error.

>   But here is the WEIRD thing.  Now go back to rabbit-a and get the
> cluster_status.  It seems that rabbit-b has magically rejoined the cluster!/
> /
> /
>
>     *[root at rabbitmq-a ~]# rabbitmqctl cluster_status*
>     Cluster status of node 'rabbit at rabbitmq-a' ...
>     [{nodes,[{disc,['rabbit at rabbitmq-b','rabbit at rabbitmq-a']}]},
>       {running_nodes,['rabbit at rabbitmq-a']},
>       {partitions,[]}]
>     ...done.
>
>
> Sure enough, if we restart rabbit-b, it will be operating in a cluster
> with rabbit-a again:
>
>     *[root at rabbitmq-b ~]# unset RABBITMQ_NODE_ONLY*
>     *[root at rabbitmq-b ~]# rabbitmq-server &*
>     [1] 15775
>     *[root at rabbitmq-b ~]# rabbitmqctl cluster_status*
>     Cluster status of node 'rabbit at rabbitmq-b' ...
>     [{nodes,[{disc,['rabbit at rabbitmq-b','rabbit at rabbitmq-a']}]},
>       {running_nodes,['rabbit at vm-rh62-cmoesel','rabbitmq-b']},
>       {partitions,[]}]
>     ...done.

And that is another bug.

> I guess in this case I will just delete the mnesia directory instead
> of trying to do a reset.

force_reset should do the trick.


Thanks for reporting this.


Regards,

Matthias.

From alan.antonuk at gmail.com  Wed Jul 10 08:17:36 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 10 Jul 2013 00:17:36 -0700
Subject: [rabbitmq-discuss] rabbitmq-c receive message question
In-Reply-To: <1373422591572-27935.post@n5.nabble.com>
References: <1373422591572-27935.post@n5.nabble.com>
Message-ID: <CAAt2poJVEVkykvgDZ9tChyZNTuBSdNQPBycVpWLF0eWSHg74cg@mail.gmail.com>

I don't think I understand what you're trying to ask. Could you please give
some more context to your question.


On Tue, Jul 9, 2013 at 7:16 PM, 3k4b251 <314992959 at qq.com> wrote:

> I  find    if  I   use  amqp_simple_wait_frame()   I  can   just   get
> only
> one message  everytime, is  that  too  slow?
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-receive-message-question-tp27935.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/b850aeaf/attachment.htm>

From liangrubo at bytedance.com  Wed Jul 10 08:24:34 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 10 Jul 2013 15:24:34 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
Message-ID: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>

hi, I have rabbitmq_management plugin enabled and rabbit server restarted,
but when I visit the web admin, I got following error in the content area
(the navigation menu is shown OK):

TypeError: Cannot read property 'connections' of undefined

Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/ab6ebd7a/attachment.htm>

From liangrubo at bytedance.com  Wed Jul 10 08:26:56 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 10 Jul 2013 15:26:56 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
Message-ID: <CA+BFTFs4K4PA2MQXf26KHLFGiLE_xRfO-=YK9xHgXTBAjMWujg@mail.gmail.com>

More information on the environment:
Rabbit version: 3.1.3
Erlang version: R16B01
It is a cluster with 3 servers, all plugins from the 3 servers show same
result.

Thanks,
Robert


On Wed, Jul 10, 2013 at 3:24 PM, Rubo Liang <liangrubo at bytedance.com> wrote:

> hi, I have rabbitmq_management plugin enabled and rabbit server restarted,
> but when I visit the web admin, I got following error in the content area
> (the navigation menu is shown OK):
>
> TypeError: Cannot read property 'connections' of undefined
>
> Robert
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/88518cae/attachment.htm>

From mklishin at gopivotal.com  Wed Jul 10 08:28:12 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 10 Jul 2013 11:28:12 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
Message-ID: <1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>

Rubo Liang:

> hi, I have rabbitmq_management plugin enabled and rabbit server restarted, but when I visit the web admin, I got following error in the content area (the navigation menu is shown OK):
> 
> TypeError: Cannot read property 'connections' of undefined

If you have had management UI with earlier RabbitMQ versions, it's a good idea to try
to clear your browser's cache.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/f0e3bdfa/attachment.pgp>

From matthias at rabbitmq.com  Wed Jul 10 08:36:41 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 10 Jul 2013 08:36:41 +0100
Subject: [rabbitmq-discuss] Checking queue size in bytes
In-Reply-To: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>
References: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>
Message-ID: <51DD0F09.7000103@rabbitmq.com>

Joe,

On 08/07/13 15:28, Joseph Weeks wrote:
> Is there a way to determine a queue's size in bytes?  I'm mostly
> interested in size on disk, but the sum of memory and disk would be
> sufficient if that happens to be more readily available.

In general that is impossible, since messages sent to multiple queues 
are only stored on disk once and their payloads are shared in memory.

Then there's the added complication that actual memory use of a message
is difficult to work out at best, and impossible if taking into account 
memory fragmentation and gc effects. on-disk size is quite hard to 
calculate too.

Having said that, I suppose we could track the "total payload size of 
messages in a queue", which would probably suffice for your use case.

I have just filed a feature request for that. It's not a trivial piece 
of work though, and we haven't had many requests for this functionality, 
so I wouldn't expect to see this in a release soon.

> On a related note, would it be possible for some future version of
> RabbitMQ to allow queue policies like "x-max-length" and "x-message-ttl"
> in addition to the queue declaration arguments?

Yes. It's on our todo list, but not a priority.

Regards,

Matthias.

From liangrubo at bytedance.com  Wed Jul 10 08:40:00 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 10 Jul 2013 15:40:00 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
Message-ID: <CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>

Hi MK,

I did this but the problem persists

Thanks,
Robert


On Wed, Jul 10, 2013 at 3:28 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > hi, I have rabbitmq_management plugin enabled and rabbit server
> restarted, but when I visit the web admin, I got following error in the
> content area (the navigation menu is shown OK):
> >
> > TypeError: Cannot read property 'connections' of undefined
>
> If you have had management UI with earlier RabbitMQ versions, it's a good
> idea to try
> to clear your browser's cache.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/a92d39c0/attachment.htm>

From 314992959 at qq.com  Wed Jul 10 09:25:43 2013
From: 314992959 at qq.com (3k4b251)
Date: Wed, 10 Jul 2013 01:25:43 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c link error : unresolved external
 symbol amqp_open_socket()
Message-ID: <1373444743568-27945.post@n5.nabble.com>

I    download  the    latest    rabbitmq-c  code.   and  I  find  link error 
in  my program.  I  also  try  amqp_open_socket_noblock() , It  occur   link 
error.     



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-link-error-unresolved-external-symbol-amqp-open-socket-tp27945.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Wed Jul 10 09:29:34 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 10 Jul 2013 12:29:34 +0400
Subject: [rabbitmq-discuss] rabbitmq-c link error : unresolved external
	symbol amqp_open_socket()
In-Reply-To: <1373444743568-27945.post@n5.nabble.com>
References: <1373444743568-27945.post@n5.nabble.com>
Message-ID: <8006250B-CCAD-403C-AF09-2FEC7CA70C9C@gopivotal.com>

3k4b251:

> I    download  the    latest    rabbitmq-c  code.   and  I  find  link error 
> in  my program.  I  also  try  amqp_open_socket_noblock() , It  occur   link 
> error. 

Please at least post the error messages from the compiler.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/9275e3a7/attachment.pgp>

From mklishin at gopivotal.com  Wed Jul 10 09:30:51 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 10 Jul 2013 12:30:51 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
Message-ID: <05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>

Rubo Liang:

> I did this but the problem persists

Is there anything in RabbitMQ logs (both regular and SASL)?

If you open your browser's JS console, what's the file and line of the error?

Can you post a screenshot of the UI?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/919bb620/attachment.pgp>

From matthias at rabbitmq.com  Wed Jul 10 09:32:01 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 10 Jul 2013 09:32:01 +0100
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
Message-ID: <51DD1C01.4000707@rabbitmq.com>

Robert,

On 10/07/13 08:40, Rubo Liang wrote:
> I did this but the problem persists

Please check the rabbit server logs for any errors.

And post a screen shot.

Regards,

Matthias.

From kiraneha at gmail.com  Wed Jul 10 09:35:59 2013
From: kiraneha at gmail.com (kiraneha)
Date: Wed, 10 Jul 2013 01:35:59 -0700 (PDT)
Subject: [rabbitmq-discuss] Modify the rabbitmq management URL
In-Reply-To: <49B69522-AC30-4E76-9AAB-A2853DBC5788@rabbitmq.com>
References: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>
	<49B69522-AC30-4E76-9AAB-A2853DBC5788@rabbitmq.com>
Message-ID: <1373445359046-27949.post@n5.nabble.com>

Hi, 

Thanks for the reply. But cant i modify the URL by making changes in
rabbitmq.config or configuration file of mochiweb plugin ??



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Modify-the-rabbitmq-management-URL-tp27821p27949.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From liangrubo at bytedance.com  Wed Jul 10 09:46:22 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 10 Jul 2013 16:46:22 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
Message-ID: <CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>

Hi MK,

See the screenshot attached. SASL log file is empty and there is something
like following in the regular log file:

=INFO REPORT==== 10-Jul-2013::16:45:56 ===
accepting AMQP connection <0.9057.0> (10.4.16.221:14354 -> 10.4.16.221:5672)

=WARNING REPORT==== 10-Jul-2013::16:45:56 ===
closing AMQP connection <0.9057.0> (10.4.16.221:14354 -> 10.4.16.221:5672):
connection_closed_abruptly


On Wed, Jul 10, 2013 at 4:30 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > I did this but the problem persists
>
> Is there anything in RabbitMQ logs (both regular and SASL)?
>
> If you open your browser's JS console, what's the file and line of the
> error?
>
> Can you post a screenshot of the UI?
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/a666143b/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screen Shot 2013-07-10 at ??4.41.06.png
Type: image/png
Size: 94228 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/a666143b/attachment.png>

From rohitpatle86 at gmail.com  Wed Jul 10 10:14:21 2013
From: rohitpatle86 at gmail.com (Rohit Patle)
Date: Wed, 10 Jul 2013 14:44:21 +0530
Subject: [rabbitmq-discuss] Problem at reject!!
Message-ID: <CADYf8B0vj-ndpp5yGs-Uzid4b74UpeCBrZXHtGg-m4_K+uwBJQ@mail.gmail.com>

Dear Sir,

I am trying to implement "amqp_basic_reject" in my amqp_listen.c example.

My requirement is I need to reject the message if it is taking more then 10
sec from "amqp_sendstring.c". I design "amqp_sendstring.c" in a way that,
it sending two msg to listner one at less then 10 sec and anther one is
more then 10 sec. first msg I am received properly as

It took 5 seconds to receive the data from client
Frame type 1, channel 1
Method AMQP_BASIC_DELIVER_METHOD
Delivery 1, exchange amq.direct routingkey test
Got the frame in right time ...!
Content-type: text/plain
----
00000000: 43 48 49 4C 44 20 50 52 : 4F 43 45 53 53           CHILD PROCESS
0000000D:


But I second case:

It took 11 seconds to receive the data from client
Frame type 1, channel 1
Method AMQP_BASIC_DELIVER_METHOD
Delivery 2, exchange amq.direct routingkey test
reject executed...!
Result 0
It took 0 seconds to receive the data from client
Frame type 2, channel 1
Method AMQP_BASIC_DELIVER_METHOD
Segmentation fault (core dumped)

Here in second case the Frame type is changing to 2. and segmentation fault
is occurring. I am unable to figure out how the Frame type 2 is coming???

Please help !!

Thank & Regards,
Rohit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/f14fda98/attachment.htm>

From mklishin at gopivotal.com  Wed Jul 10 10:27:01 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 10 Jul 2013 13:27:01 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
Message-ID: <5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>

Rubo Liang:

> SASL log file is empty and there is something like following in the regular log file

You can tune management UI logging to log what requests respond with 404, see
http://www.rabbitmq.com/management.html#http-logging
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/69e52537/attachment.pgp>

From tim at rabbitmq.com  Wed Jul 10 10:33:13 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Wed, 10 Jul 2013 10:33:13 +0100
Subject: [rabbitmq-discuss] Modify the rabbitmq management URL
In-Reply-To: <1373445359046-27949.post@n5.nabble.com>
References: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>
	<49B69522-AC30-4E76-9AAB-A2853DBC5788@rabbitmq.com>
	<1373445359046-27949.post@n5.nabble.com>
Message-ID: <49C81791-2C1D-46E7-916A-2456DB2F7A5F@rabbitmq.com>

On 10 Jul 2013, at 09:35, kiraneha wrote:
> Hi, 
> 
> Thanks for the reply. But cant i modify the URL by making changes in
> rabbitmq.config or configuration file of mochiweb plugin ??
> 

Not that I'm aware of.

From kiraneha at gmail.com  Wed Jul 10 10:39:46 2013
From: kiraneha at gmail.com (kiraneha)
Date: Wed, 10 Jul 2013 02:39:46 -0700 (PDT)
Subject: [rabbitmq-discuss] Modify the rabbitmq management URL
In-Reply-To: <49C81791-2C1D-46E7-916A-2456DB2F7A5F@rabbitmq.com>
References: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>
	<49B69522-AC30-4E76-9AAB-A2853DBC5788@rabbitmq.com>
	<1373445359046-27949.post@n5.nabble.com>
	<49C81791-2C1D-46E7-916A-2456DB2F7A5F@rabbitmq.com>
Message-ID: <1373449186120-27954.post@n5.nabble.com>

Thanks Tim !
I will go on with the proxy option for now.
But do let me know if you come across any such thing in future.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Modify-the-rabbitmq-management-URL-tp27821p27954.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Wed Jul 10 10:54:11 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 10 Jul 2013 10:54:11 +0100
Subject: [rabbitmq-discuss] URGENT : UNC path issue
In-Reply-To: <1373293322992-27898.post@n5.nabble.com>
References: <1373293322992-27898.post@n5.nabble.com>
Message-ID: <51DD2F43.7070709@rabbitmq.com>


Hi,

On 08/07/13 15:22, BK wrote:
> If the UNC Path to the environment variables RABBITMQ_BASE = \\ABC\DEF and
> RABBITMQ_CONFIG_FILE = \\ABC\DEF\RabbitMQ does not work. A local path works
> fine. The destination has all the rights for the user under which the
> service starts.

Unfortunately this is a restriction imposed by the underlying Erlang VM
for Windows, which collapses the "//" to "/" for some file path
operations. The latest version (R16B01 at the time of writing) still
suffers from this problem. The problem has been reported on the Erlang
mailing list before, so this will presumably be fixed in the future.
Until then the workaround is to permanently map a fixed drive letter.



-Emile






From tim at rabbitmq.com  Wed Jul 10 11:09:44 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Wed, 10 Jul 2013 11:09:44 +0100
Subject: [rabbitmq-discuss] Monitor and restart
In-Reply-To: <CAGQEY6=qmgnhB3RiYC6qbb+ehA0reHBqJSfrAhL=FmKOChSaBA@mail.gmail.com>
References: <CAGQEY6=qmgnhB3RiYC6qbb+ehA0reHBqJSfrAhL=FmKOChSaBA@mail.gmail.com>
Message-ID: <F188379A-7C46-4B65-86C8-C1158F2526B0@rabbitmq.com>

Hi Jorge,

On 8 Jul 2013, at 16:21, Jorge Diz Pico wrote:
> I peeked around and noticed Rabbit is not using heart, which makes me unease about potential crashes. I tried to tweak the start scripts myself but it's not as straight-forward as it would seem to make it work.
> 

So you can indeed add some settings to RABBITMQ_SERVER_ERL_ARGS when starting up (or set these in the rabbitmq user's default environment) and of course you'll need to set the HEART_COMMAND environment variable to whatever command you normally use to start the broker (depending on how you installed it).

> So before I make a mess of it, I'd like to know if there's any reason why Rabbit doesn't use heart or even offer a quick flag to enable it (at least I couldn't find any reference to it). Does it use any other mechanism underneath to ensure reliability?
> 

There are a couple of reasons we don't do this out of the box.

1. it would be fiddly to set this up in a packaged install for all possible environments
2. there's a plethora of other generic options out there (such as monit, god, etc)
3. automatically restarting a clustered node could have unintended consequences, depending on how it died

In short, by all means turn heart on if you like, but if I were you I'd consider looking at other generic options too. And make sure you understand what the potential consequences of automatic restart might be, for example if several clustered nodes go offline together, the order in which they're restarted can be important.

Cheers,
Tim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/70a99c93/attachment.htm>

From liangrubo at bytedance.com  Wed Jul 10 11:12:07 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 10 Jul 2013 18:12:07 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
Message-ID: <CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>

Hi MK,

I didn't see 404 response in the log file.

I visit the page via a reverse proxy (nginx), but I didn't found 404
requests in nginx log either.

here is all the log I got from rabbitmq_management when I refresh the page:

106.120.218.38 - - [10/Jul/2013:17:44:47 +0800] "GET /api/whoami HTTP/1.1"
200 85 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_4)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36
AlexaToolbar/alxg-3.1"
106.120.218.38 - - [10/Jul/2013:17:44:47 +0800] "GET /api/overview
HTTP/1.1" 200 1248 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac
OS X 10_8_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116
Safari/537.36 AlexaToolbar/alxg-3.1"
106.120.218.38 - - [10/Jul/2013:17:44:48 +0800] "GET /api/nodes HTTP/1.1"
200 167 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_4)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36
AlexaToolbar/alxg-3.1"
106.120.218.38 - - [10/Jul/2013:17:44:48 +0800] "GET /api/vhosts HTTP/1.1"
200 30 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_4)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36
AlexaToolbar/alxg-3.1"
106.120.218.38 - - [10/Jul/2013:17:44:48 +0800] "GET /api/vhosts HTTP/1.1"
200 30 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_4)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36
AlexaToolbar/alxg-3.1"
106.120.218.38 - - [10/Jul/2013:17:44:48 +0800] "GET /api/extensions
HTTP/1.1" 200 32 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS
X 10_8_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116
Safari/537.36 AlexaToolbar/alxg-3.1"
106.120.218.38 - - [10/Jul/2013:17:44:48 +0800] "GET
/api/overview?lengths_age=60&lengths_incr=5&msg_rates_age=60&msg_rates_incr=5
HTTP/1.1" 200 1248 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac
OS X 10_8_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116
Safari/537.36 AlexaToolbar/alxg-3.1"
106.120.218.38 - - [10/Jul/2013:17:44:48 +0800] "GET /api/nodes HTTP/1.1"
200 167 "http://mq.bd.com/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_4)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36
AlexaToolbar/alxg-3.1"



On Wed, Jul 10, 2013 at 5:27 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > SASL log file is empty and there is something like following in the
> regular log file
>
> You can tune management UI logging to log what requests respond with 404,
> see
> http://www.rabbitmq.com/management.html#http-logging
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/26071ff7/attachment.htm>

From emile at rabbitmq.com  Wed Jul 10 11:12:16 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 10 Jul 2013 11:12:16 +0100
Subject: [rabbitmq-discuss] Monitor and restart
In-Reply-To: <CAGQEY6=qmgnhB3RiYC6qbb+ehA0reHBqJSfrAhL=FmKOChSaBA@mail.gmail.com>
References: <CAGQEY6=qmgnhB3RiYC6qbb+ehA0reHBqJSfrAhL=FmKOChSaBA@mail.gmail.com>
Message-ID: <51DD3380.9050503@rabbitmq.com>


On 08/07/13 16:21, Jorge Diz Pico wrote:
> I peeked around and noticed Rabbit is not using heart

Forgive my ignorance, but what is "heart"?

> Does it use any other mechanism underneath to ensure reliability?

Yes, See http://www.rabbitmq.com/reliability.html



-Emile



From tim at rabbitmq.com  Wed Jul 10 11:14:26 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Wed, 10 Jul 2013 11:14:26 +0100
Subject: [rabbitmq-discuss] Monitor and restart
In-Reply-To: <51DD3380.9050503@rabbitmq.com>
References: <CAGQEY6=qmgnhB3RiYC6qbb+ehA0reHBqJSfrAhL=FmKOChSaBA@mail.gmail.com>
	<51DD3380.9050503@rabbitmq.com>
Message-ID: <B0A2E741-1254-4B82-A248-147782ED45C1@rabbitmq.com>

On 10 Jul 2013, at 11:12, Emile Joubert wrote:
> 
> On 08/07/13 16:21, Jorge Diz Pico wrote:
>> I peeked around and noticed Rabbit is not using heart
> 
> Forgive my ignorance, but what is "heart"?
> 

http://www.erlang.org/doc/man/heart.html



From mklishin at gopivotal.com  Wed Jul 10 11:17:04 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 10 Jul 2013 14:17:04 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
Message-ID: <BAB20A1F-F490-4B7A-8CA7-D6F6EC23CE07@gopivotal.com>

Rubo Liang:

> I didn't see 404 response in the log file.

Can you please go the Network tab in developer tools in Chrome, find requests to /api/overview
and /api/nodes and paste the response body from the Response tab to the list 
(using a pastebin like gist.github.com)?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/07d1be38/attachment.pgp>

From mklishin at gopivotal.com  Wed Jul 10 11:20:44 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 10 Jul 2013 14:20:44 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
Message-ID: <A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>

Rubo Liang:

> I visit the page via a reverse proxy (nginx), but I didn't found 404 requests in nginx log either.

Are you sure there are no overly eager rewrite rules that may lead
JSON API requests to be redirected to a URL that serves HTML,
or any other misconfiguration at the proxy level?

Inspecting response bodies should help identify such issues.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/c96217bb/attachment.pgp>

From emile at rabbitmq.com  Wed Jul 10 11:22:03 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 10 Jul 2013 11:22:03 +0100
Subject: [rabbitmq-discuss] Possible RabbitMQ 3.0.4 Management Plug-in
 (Mochiweb) Directory Traversal Vulnerability?
In-Reply-To: <8064f5da-f0a2-4a76-a6e5-8c7739eb63c4@googlegroups.com>
References: <8064f5da-f0a2-4a76-a6e5-8c7739eb63c4@googlegroups.com>
Message-ID: <51DD35CB.5050602@rabbitmq.com>

Hi Zach,

On 10/07/13 01:05, Zach Austin wrote:
> A commercial off-the-shelf vulnerability scanner is detecting a
> directory traversal vulnerability in the RabbitMQ management plugin HTTP
> server (Mochiweb) installed in the default configuration on Windows
> Server 2003. Exploitation of the vulnerability reportedly does not
> require authentication. 
> 
> I can provide details upon request.  Please let me know if this is a
> known issue 


If you provide details then we'll be able to determine whether this is a
known issue. Please reply to me directly if you feel the need to
practice responsible disclosure.




-Emile


-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x60F7BCB2.asc
Type: application/pgp-keys
Size: 18997 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/341bb20d/attachment.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/341bb20d/attachment.pgp>

From emile at rabbitmq.com  Wed Jul 10 11:38:17 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 10 Jul 2013 11:38:17 +0100
Subject: [rabbitmq-discuss]
 =?windows-1252?q?Getting_=93None_of_the_specif?=
 =?windows-1252?q?ied_endpoints_were_reachable=94?=
In-Reply-To: <6F15D4C1E68AE14B9D3AB5851B9FC3324182D371@DB3PRD0711MB538.eurprd07.prod.outlook.com>
References: <6F15D4C1E68AE14B9D3AB5851B9FC3324182D371@DB3PRD0711MB538.eurprd07.prod.outlook.com>
Message-ID: <51DD3999.2050406@rabbitmq.com>

Hi John,

On 09/07/13 14:36, Price, John wrote:
> I get exception ?None of the specified endpoints were reachable?
> 
> With inner exception ?System.OutOfMemoryException: Exception of type

This error is possible if the client connects to a non-AMQP server. It
could interprets part of a non-AMQP response as a large frame and
attempt to allocate alot of memory for it. We do have a ticket open to
make this less likely, but until then you are advised to only connect to
servers that you are sure speak AMQP.


-Emile





From liangrubo at bytedance.com  Wed Jul 10 15:46:10 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 10 Jul 2013 22:46:10 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <BAB20A1F-F490-4B7A-8CA7-D6F6EC23CE07@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<BAB20A1F-F490-4B7A-8CA7-D6F6EC23CE07@gopivotal.com>
Message-ID: <CA+BFTFtf9EGnqD7H4fuPL+ZvXH1zd71L1eDKbiYa4j6fah0hrw@mail.gmail.com>

see it here: https://gist.github.com/liangrubo/5966913

Thanks,
Robert


On Wed, Jul 10, 2013 at 6:17 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > I didn't see 404 response in the log file.
>
> Can you please go the Network tab in developer tools in Chrome, find
> requests to /api/overview
> and /api/nodes and paste the response body from the Response tab to the
> list
> (using a pastebin like gist.github.com)?
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/b5e746be/attachment.htm>

From liangrubo at bytedance.com  Wed Jul 10 16:00:12 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 10 Jul 2013 23:00:12 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
Message-ID: <CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>

Hi MK,

>Are you sure there are no overly eager rewrite rules that may lead
>JSON API requests to be redirected to a URL that serves HTML,
>or any other misconfiguration at the proxy level?

Yes, there is not any rewrite rule, and the proxy worked before.

On Wed, Jul 10, 2013 at 6:20 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > I visit the page via a reverse proxy (nginx), but I didn't found 404
> requests in nginx log either.
>
> Are you sure there are no overly eager rewrite rules that may lead
> JSON API requests to be redirected to a URL that serves HTML,
> or any other misconfiguration at the proxy level?
>
> Inspecting response bodies should help identify such issues.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/cc042e5f/attachment.htm>

From prabodh.upreti at vce.com  Wed Jul 10 16:04:33 2013
From: prabodh.upreti at vce.com (Prabodh Upreti)
Date: Wed, 10 Jul 2013 08:04:33 -0700 (PDT)
Subject: [rabbitmq-discuss] total number of queues allowed
Message-ID: <1373468673697-27966.post@n5.nabble.com>

Hello

We need to expose our infrastructure so that external users can connect to
our broker, create temporary queues, consume/publish messages.

This brings up new challenges for us where a user could maliciously create
many temporary queues and bring the system down.  We will be providing one
login/password for all users.  Also, we are using our own CAS authentication
plugin, hence not using the full out of the box security.

I am sure there are other risks exposing our system.

1.
Is there a way to control total number of queues that can be created in the
broker(that includes all queues created by everyone)?

2.
Is there a way to control total number of queues created by a single
consumer?

3.
Restrict number messages that can be published by a consumer.

etc.

Basically, we need to build basic security to manage these external users
whom we don't have total control of. I do understand we may not have
complete security but someplace we can start.


Thank you in advance.

Regards





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/total-number-of-queues-allowed-tp27966.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Wed Jul 10 17:29:38 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 10 Jul 2013 17:29:38 +0100
Subject: [rabbitmq-discuss] why rabbit eating so much memory?
In-Reply-To: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
References: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
Message-ID: <51DD8BF2.5050702@rabbitmq.com>

On 09/07/13 15:59, Rubo Liang wrote:

> My rabbit eats 25G memory, but the queues don't take to much


Questions like yours can often be answered by looking at all the output
of "rabbitmqctl report". Can you supply that?


-Emile




From james.gardner at noaa.gov  Wed Jul 10 17:32:53 2013
From: james.gardner at noaa.gov (James Gardner)
Date: Wed, 10 Jul 2013 11:32:53 -0500
Subject: [rabbitmq-discuss] Checking queue size in bytes
In-Reply-To: <51DD0F09.7000103@rabbitmq.com>
References: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>
	<51DD0F09.7000103@rabbitmq.com>
Message-ID: <51DD8CB5.9050203@noaa.gov>


I +1 that feature request. I love that AMQP apps are able to create 
their own entities (queues, etc) but don't like the idea that they are 
potentially unbounded in size if you allow them to do so. For apps that 
use our RMQ broker but are outside our immediate department this could 
be problematic and compromise the broker's operation by swallowing 
server resources. This weakness makes me want to manage app writer's 
queues for them, which seems to go against the spirit of AMQP. The kind 
of suggestion below would fix that issue. Forced 'x-expires' would also 
be great for us.
I'd like to see more use of the policy mechanism in general, esp. in 
limiting the characteristics of queues/exchanges created on the broker, 
such as forcing a queue to be exclusive or auto-delete, etc; I assume 
that was what the poster below was also referring to. But also for 
applying to users; max connections, channels, etc ?, which I believe was 
touched upon in other recent posts.
Looks like an email '[rabbitmq-discuss] total number of queues allowed' 
just appeared on the mailing list that somewhat mirrors our concerns. We 
also may expose our broker to the public at some point.
I get the wider impression that RMQ (maybe because of the nature of 
AMQP?) was designed under an assumption of a certain level of good or 
orderly behavior from the client, that may not always exist, so it 
strikes me that this is an area in which RMQ has yet to mature. Let me 
know if you think I'm off-base there.
Thanks,

James Gardner (NWS)


On 07/10/2013 02:36 AM, Matthias Radestock wrote:
>
>> On a related note, would it be possible for some future version of
>> RabbitMQ to allow queue policies like "x-max-length" and "x-message-ttl"
>> in addition to the queue declaration arguments?
>
> Yes. It's on our todo list, but not a priority.


From alan.antonuk at gmail.com  Wed Jul 10 17:40:03 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 10 Jul 2013 09:40:03 -0700
Subject: [rabbitmq-discuss] Problem at reject!!
In-Reply-To: <CADYf8B0vj-ndpp5yGs-Uzid4b74UpeCBrZXHtGg-m4_K+uwBJQ@mail.gmail.com>
References: <CADYf8B0vj-ndpp5yGs-Uzid4b74UpeCBrZXHtGg-m4_K+uwBJQ@mail.gmail.com>
Message-ID: <CAAt2po+Mu5ZNJu7p1sV-TUpv8t5=VDc=5G=FqqtkjY3W1QpuHw@mail.gmail.com>

Have you tried running it under a debugger to see where its segfaulting?


On Wed, Jul 10, 2013 at 2:14 AM, Rohit Patle <rohitpatle86 at gmail.com> wrote:

> Dear Sir,
>
> I am trying to implement "amqp_basic_reject" in my amqp_listen.c example.
>
> My requirement is I need to reject the message if it is taking more then
> 10 sec from "amqp_sendstring.c". I design "amqp_sendstring.c" in a way
> that, it sending two msg to listner one at less then 10 sec and anther one
> is more then 10 sec. first msg I am received properly as
>
> It took 5 seconds to receive the data from client
> Frame type 1, channel 1
> Method AMQP_BASIC_DELIVER_METHOD
> Delivery 1, exchange amq.direct routingkey test
> Got the frame in right time ...!
> Content-type: text/plain
> ----
> 00000000: 43 48 49 4C 44 20 50 52 : 4F 43 45 53 53           CHILD PROCESS
> 0000000D:
>
>
> But I second case:
>
> It took 11 seconds to receive the data from client
> Frame type 1, channel 1
> Method AMQP_BASIC_DELIVER_METHOD
> Delivery 2, exchange amq.direct routingkey test
> reject executed...!
> Result 0
> It took 0 seconds to receive the data from client
> Frame type 2, channel 1
> Method AMQP_BASIC_DELIVER_METHOD
> Segmentation fault (core dumped)
>
> Here in second case the Frame type is changing to 2. and segmentation
> fault is occurring. I am unable to figure out how the Frame type 2 is
> coming???
>
> Please help !!
>
> Thank & Regards,
> Rohit
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/d7ffa36b/attachment.htm>

From emile at rabbitmq.com  Wed Jul 10 17:53:56 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 10 Jul 2013 17:53:56 +0100
Subject: [rabbitmq-discuss] total number of queues allowed
In-Reply-To: <1373468673697-27966.post@n5.nabble.com>
References: <1373468673697-27966.post@n5.nabble.com>
Message-ID: <51DD91A4.1050508@rabbitmq.com>


Hi,

On 10/07/13 16:04, Prabodh Upreti wrote:

> We need to expose our infrastructure so that external users can connect to
> our broker, create temporary queues, consume/publish messages.

The answer to your questions is mostly "no", but we'd like to take your
use-case into account for features planned in this area, e.g. for a
related discussion see
http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-July/028388.html
In the meantime  there are a few available control points to set
resource limits:

You can limit the total number of client connections by setting the
appropriate OS ulimit (or ERL_MAX_PORTS on Windows).

You can also place limits on the network bandwidth consumed by
individual connections using a firewall.

It is possible to set the maximum length of a queue using a parameter
(http://www.rabbitmq.com/maxlength.html), though it is not possible to
enforce this by policy.

It is possible to perform external monitoring of broker resources (such
as queues, number of channels, number of consumers) and take
preventative action when limits are exceeded.

In some cases it might make sense to enforce resource partitioning by
creating a separate virtual machine and broker per customer.




-Emile




From matthias at rabbitmq.com  Wed Jul 10 17:55:39 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 10 Jul 2013 17:55:39 +0100
Subject: [rabbitmq-discuss] why rabbit eating so much memory?
In-Reply-To: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
References: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
Message-ID: <51DD920B.9080406@rabbitmq.com>

On 09/07/13 15:59, Rubo Liang wrote:
> My rabbit eats 25G memory, but the queues don't take to much as shown by
> this command: 'rabbitmqctl list_queues name messages memory':
> Listing queues ...
> ha.snssdk.log   695954  16426216
> ha.snssdk.log.dispatch  660748  102698808
> ha.snssdk.log.output    63573   32800680
> ssesion 0       25952
> ssesion.log     101     436328
> ssesion.output  0       148816
> ...done.
>
> As shown above the queues only take about 150M memory. But the rabbit
> process actually takes about 25G.
>
> 'rabbitmqctl status' gives me following output on memory:
>
>   {memory,
>       [{total,25394382848},
>        {connection_procs,140253648},
>        {queue_procs,19311874888},

So that shows queue processes taking up 19G. Perhaps you have queue's in 
vhosts other than '/'? Note that 'rabbitmqctl list_queues' only shows 
information on one vhost ('/' by default).

Matthias.

From matthias at rabbitmq.com  Wed Jul 10 18:20:23 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 10 Jul 2013 18:20:23 +0100
Subject: [rabbitmq-discuss] Checking queue size in bytes
In-Reply-To: <51DD8CB5.9050203@noaa.gov>
References: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>
	<51DD0F09.7000103@rabbitmq.com> <51DD8CB5.9050203@noaa.gov>
Message-ID: <51DD97D7.9070800@rabbitmq.com>

On 10/07/13 17:32, James Gardner wrote:
> I get the wider impression that RMQ (maybe because of the nature of
> AMQP?) was designed under an assumption of a certain level of good or
> orderly behavior from the client, that may not always exist, so it
> strikes me that this is an area in which RMQ has yet to mature.

Correct. We always knew that was an area that needed work, it just 
wasn't a priority. Features like policies are a relatively recent 
addition that nudge rabbit in the direction of more administrative 
controls and being able to run in hostile environments. But we've barely 
scratched the surface here.

Matthias.

From guilherme.labigalini at gmail.com  Wed Jul 10 18:24:48 2013
From: guilherme.labigalini at gmail.com (Guilherme Labigalini)
Date: Wed, 10 Jul 2013 14:24:48 -0300
Subject: [rabbitmq-discuss] Confirm if the message was published
Message-ID: <CAFrXCmJvA9N3hsm75Ox_W_trGGCA7NY7v5H7VOX1s6HD3Vr_rA@mail.gmail.com>

Hello,

I've a C# client and I want to make sure that my published messages were
received and saved to the disk. I've create a small program that send a lot
of messages to a exchange and confirm (for each message) if it was received.

I'm using channel.ConfirmSelect and channel.WaitForConfirms, it works fine
for the first 3300 messages, but after that the the WaitForConfirms is
returning TIMEOUT.

I also tried to use channel.TxSelect / channel.TxCommit, but when there is
no free diskspace on the server, the commit operation is waiting forever.

Do you know if what I'm doing is right?  Below is the code of my
application.

Thanks

            ConnectionFactory factory = new ConnectionFactory();
            factory.HostName = ("serverName");

            var d1 = DateTime.Now;

            bool commit = true;

            using (IConnection connection = factory.CreateConnection())
            {
                using (IModel channel = connection.CreateModel())
                {
                    var properties = channel.CreateBasicProperties();
                    properties.SetPersistent(true);
                    channel.ConfirmSelect();

                    int x = 0;
                    do
                    {
                        string routeKey;

                        var dt = DateTime.Now;

                        routeKey = String.Empty;

                        var message = x.ToString() + "." + new string('a',
1024*100);

                        //channel.TxSelect();, commented , using
ConfirmSelect

                        var body =
Encoding.ASCII.GetBytes(message.ToString());
                        channel.BasicPublish(EXCHANGE_NAME, routeKey,
properties, body);

                        bool timedOut;
                        channel.WaitForConfirms(TimeSpan.FromSeconds(5),
out timedOut);

                        if (timedOut)
                        {
                            // unable to post the message
                            throw new Exception("Unable to add more
messages " + x); ;
                        }

                        //if (commit) , commented , using WaitForConfirms
                        //    channel.TxCommit();
                        //else
                        //    channel.TxRollback();

                        if (x % 100 == 0)
                            Console.WriteLine("Message '{0}' is sent", x);
                        Thread.Sleep(5);

                    } while (++x < TOTAL_TO_SEND);

                    Console.WriteLine("total time = " + (DateTime.Now -
d1));
                }
            }
        }
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/3c2cc89a/attachment.htm>

From james.gardner at noaa.gov  Wed Jul 10 18:37:07 2013
From: james.gardner at noaa.gov (James Gardner)
Date: Wed, 10 Jul 2013 12:37:07 -0500
Subject: [rabbitmq-discuss] Checking queue size in bytes
In-Reply-To: <51DD97D7.9070800@rabbitmq.com>
References: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>
	<51DD0F09.7000103@rabbitmq.com> <51DD8CB5.9050203@noaa.gov>
	<51DD97D7.9070800@rabbitmq.com>
Message-ID: <51DD9BC3.8060300@noaa.gov>


Understood, thanks.
BTW do any of the RMQ additions have any hope of making it back into a 
future version of the AMQP spec (0-9-2?, 0-11? I lose track :) ), or are 
they most likely always going to be RMQ extensions?
- James


On 07/10/2013 12:20 PM, Matthias Radestock wrote:
> On 10/07/13 17:32, James Gardner wrote:
>> I get the wider impression that RMQ (maybe because of the nature of
>> AMQP?) was designed under an assumption of a certain level of good or
>> orderly behavior from the client, that may not always exist, so it
>> strikes me that this is an area in which RMQ has yet to mature.
>
> Correct. We always knew that was an area that needed work, it just 
> wasn't a priority. Features like policies are a relatively recent 
> addition that nudge rabbit in the direction of more administrative 
> controls and being able to run in hostile environments. But we've 
> barely scratched the surface here.
>
> Matthias.


From matthias at rabbitmq.com  Wed Jul 10 18:40:12 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 10 Jul 2013 18:40:12 +0100
Subject: [rabbitmq-discuss] Checking queue size in bytes
In-Reply-To: <51DD9BC3.8060300@noaa.gov>
References: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>
	<51DD0F09.7000103@rabbitmq.com> <51DD8CB5.9050203@noaa.gov>
	<51DD97D7.9070800@rabbitmq.com> <51DD9BC3.8060300@noaa.gov>
Message-ID: <51DD9C7C.9070000@rabbitmq.com>

On 10/07/13 18:37, James Gardner wrote:
> BTW do any of the RMQ additions have any hope of making it back into a
> future version of the AMQP spec (0-9-2?, 0-11? I lose track :) ), or are
> they most likely always going to be RMQ extensions?

There is no appetite in the AMQP Working Group for a 0-9-2 / 0-11.

Matthias.


From mklishin at gopivotal.com  Wed Jul 10 18:55:18 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 10 Jul 2013 21:55:18 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
	<CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
Message-ID: <322724EF-0DAC-4AFA-9369-7F7F7A2BCB2D@gopivotal.com>

Rubo Liang:

> Yes, there is not any rewrite rule, and the proxy worked before.

Do you think you can try to identify what line in the JavaScript file causes a null pointer?

Also, if you could provide me a temp access to the management page, it would make
pin pointing the issue much easier. If that's possible, please email me off list.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/f574ef14/attachment.pgp>

From gui.ouellet at gmail.com  Wed Jul 10 20:27:43 2013
From: gui.ouellet at gmail.com (Guillaume Ouellet)
Date: Wed, 10 Jul 2013 12:27:43 -0700 (PDT)
Subject: [rabbitmq-discuss] Queue Replication over WAN
Message-ID: <fa1dc5ed-cf93-4308-b5a1-0650d3b4a6a8@googlegroups.com>

Hi all, 

I am trying to use RabbitMq so that I have one instance of RabbitMQ on each 
of my 2 servers that are separated by a WAN. One server would be active, 
the other "inactive", but the inactive would actually have the queue from 
the active replicated real-time. This way, if the active server goes down, 
the inactive server kicks in, and continues where the active left off.

It seemed like the clustering option does exactly this, but as I said 
previously, I am over a WAN, and a WAN configuration is not recommended.

My question is how would I implement the previous logic via shovels or 
federations ? I can't seem to get my head around this looking at the 
documentation.

Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/ff6ef925/attachment.htm>

From sandinosaso at gmail.com  Wed Jul 10 22:46:36 2013
From: sandinosaso at gmail.com (Saso)
Date: Wed, 10 Jul 2013 18:46:36 -0300
Subject: [rabbitmq-discuss] Rabbitmq managment console crashes after install
	Tsung
Message-ID: <CAD-y5fS2Poi7_gyWY=rY=ARB59ZBy6n9YXoZBOkj2rqMdYe+oQ@mail.gmail.com>

The problem is with mochiweb (I think) I posted a bug in Tsung bug reports
https://support.process-one.net/browse/TSUN-258

I solved my problem uninstalling Tsung
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/a5d0c989/attachment.htm>

From ashok.anand at gmail.com  Wed Jul 10 22:57:23 2013
From: ashok.anand at gmail.com (Ashok Anand)
Date: Thu, 11 Jul 2013 03:27:23 +0530
Subject: [rabbitmq-discuss] error on SSL connection with broker (rabbitmq-c)
Message-ID: <CALQsBOXniRyghSTQW1gDM5o=kSbUyga88PhcNcWumOy088qEYw@mail.gmail.com>

Hi,

I am using rabbitmq-c library for SSL connection, and I am having this
problem.

=INFO REPORT==== 10-Jul-2013::21:48:49 ===
accepting AMQP connection <0.538.0> (127.0.0.1:54381 -> 127.0.0.1:5671)

=ERROR REPORT==== 10-Jul-2013::21:48:49 ===
SSL: certify_certificate: ./ssl_connection.erl:490:Fatal error: handshake
failure

=ERROR REPORT==== 10-Jul-2013::21:48:54 ===
error on AMQP connection <0.538.0>: {ssl_upgrade_error,esslaccept} (unknown
POSIX error)

I am not sure, what is the cause..

As per http://www.rabbitmq.com/troubleshooting-ssl.html,
I checked that keys are valid, got message -

Verify return code: 0 (ok)

The Attempt SSL to broker also worked fine,
openssl s_client -connect localhost:5671 -cert client/cert.pem -key
client/key.pem \
  -CAfile testca/cacert.pem

Not sure, what is the problem.. please suggest.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/99e60f63/attachment.htm>

From matthias at rabbitmq.com  Wed Jul 10 22:59:17 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 10 Jul 2013 22:59:17 +0100
Subject: [rabbitmq-discuss] Rabbitmq managment console crashes after
 install Tsung
In-Reply-To: <CAD-y5fS2Poi7_gyWY=rY=ARB59ZBy6n9YXoZBOkj2rqMdYe+oQ@mail.gmail.com>
References: <CAD-y5fS2Poi7_gyWY=rY=ARB59ZBy6n9YXoZBOkj2rqMdYe+oQ@mail.gmail.com>
Message-ID: <51DDD935.2010203@rabbitmq.com>

On 10/07/13 22:46, Saso wrote:
> The problem is with mochiweb (I think) I posted a bug in Tsung bug
> reports https://support.process-one.net/browse/TSUN-258

This was brought up a few days ago: 
http://rabbitmq.1065348.n5.nabble.com/Error-when-accessing-management-plugin-td27844.html

Matthias.

From michael.s.klishin at gmail.com  Wed Jul 10 23:08:09 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 11 Jul 2013 02:08:09 +0400
Subject: [rabbitmq-discuss] error on SSL connection with broker
	(rabbitmq-c)
In-Reply-To: <CALQsBOXniRyghSTQW1gDM5o=kSbUyga88PhcNcWumOy088qEYw@mail.gmail.com>
References: <CALQsBOXniRyghSTQW1gDM5o=kSbUyga88PhcNcWumOy088qEYw@mail.gmail.com>
Message-ID: <CAE3HoVRpbMjaoKa0Ddsn74aN4h823qP_6VOV1ed_Fgaf0uS+pg@mail.gmail.com>

2013/7/11 Ashok Anand <ashok.anand at gmail.com>

> Not sure, what is the problem.. please suggest.


Please post your rabbitmq.config. Check that the paths used in it
are absolute, files exist and rabbit has sufficient permissions to read
them.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/52dd2a06/attachment.htm>

From alan.antonuk at gmail.com  Wed Jul 10 23:09:41 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 10 Jul 2013 15:09:41 -0700
Subject: [rabbitmq-discuss] error on SSL connection with broker
	(rabbitmq-c)
In-Reply-To: <CALQsBOXniRyghSTQW1gDM5o=kSbUyga88PhcNcWumOy088qEYw@mail.gmail.com>
References: <CALQsBOXniRyghSTQW1gDM5o=kSbUyga88PhcNcWumOy088qEYw@mail.gmail.com>
Message-ID: <CAAt2po+Tdbt=fV8yRgUczJKZsH2kVdnqaSzAtkyYEYZScn95gQ@mail.gmail.com>

What error code is returned from amqp_socket_open()? (Does it match any of
the error codes listed in amqp_status_enum?


On Wed, Jul 10, 2013 at 2:57 PM, Ashok Anand <ashok.anand at gmail.com> wrote:

> Hi,
>
> I am using rabbitmq-c library for SSL connection, and I am having this
> problem.
>
> =INFO REPORT==== 10-Jul-2013::21:48:49 ===
> accepting AMQP connection <0.538.0> (127.0.0.1:54381 -> 127.0.0.1:5671)
>
> =ERROR REPORT==== 10-Jul-2013::21:48:49 ===
> SSL: certify_certificate: ./ssl_connection.erl:490:Fatal error: handshake
> failure
>
> =ERROR REPORT==== 10-Jul-2013::21:48:54 ===
> error on AMQP connection <0.538.0>: {ssl_upgrade_error,esslaccept}
> (unknown POSIX error)
>
> I am not sure, what is the cause..
>
> As per http://www.rabbitmq.com/troubleshooting-ssl.html,
> I checked that keys are valid, got message -
>
> Verify return code: 0 (ok)
>
> The Attempt SSL to broker also worked fine,
> openssl s_client -connect localhost:5671 -cert client/cert.pem -key client/key.pem \
>   -CAfile testca/cacert.pem
>
> Not sure, what is the problem.. please suggest.
>
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/b9c5b5dc/attachment.htm>

From ashok.anand at gmail.com  Wed Jul 10 23:09:43 2013
From: ashok.anand at gmail.com (Ashok Anand)
Date: Thu, 11 Jul 2013 03:39:43 +0530
Subject: [rabbitmq-discuss] error on SSL connection with broker
	(rabbitmq-c)
In-Reply-To: <CALQsBOXniRyghSTQW1gDM5o=kSbUyga88PhcNcWumOy088qEYw@mail.gmail.com>
References: <CALQsBOXniRyghSTQW1gDM5o=kSbUyga88PhcNcWumOy088qEYw@mail.gmail.com>
Message-ID: <CALQsBOUGe-KJMT6xjo68u2ZUmB0Hf6uk7nnZf=fFSGhC9edanA@mail.gmail.com>

oh - just noticed that there was issue with config ... it works fine now..
so no problem with it.


On Thu, Jul 11, 2013 at 3:27 AM, Ashok Anand <ashok.anand at gmail.com> wrote:

> Hi,
>
> I am using rabbitmq-c library for SSL connection, and I am having this
> problem.
>
> =INFO REPORT==== 10-Jul-2013::21:48:49 ===
> accepting AMQP connection <0.538.0> (127.0.0.1:54381 -> 127.0.0.1:5671)
>
> =ERROR REPORT==== 10-Jul-2013::21:48:49 ===
> SSL: certify_certificate: ./ssl_connection.erl:490:Fatal error: handshake
> failure
>
> =ERROR REPORT==== 10-Jul-2013::21:48:54 ===
> error on AMQP connection <0.538.0>: {ssl_upgrade_error,esslaccept}
> (unknown POSIX error)
>
> I am not sure, what is the cause..
>
> As per http://www.rabbitmq.com/troubleshooting-ssl.html,
> I checked that keys are valid, got message -
>
> Verify return code: 0 (ok)
>
> The Attempt SSL to broker also worked fine,
> openssl s_client -connect localhost:5671 -cert client/cert.pem -key client/key.pem \
>   -CAfile testca/cacert.pem
>
> Not sure, what is the problem.. please suggest.
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/0f33355a/attachment.htm>

From sandinosaso at gmail.com  Thu Jul 11 00:31:38 2013
From: sandinosaso at gmail.com (Saso)
Date: Wed, 10 Jul 2013 20:31:38 -0300
Subject: [rabbitmq-discuss] Rabbitmq managment console crashes after
 install Tsung
In-Reply-To: <51DDD935.2010203@rabbitmq.com>
References: <CAD-y5fS2Poi7_gyWY=rY=ARB59ZBy6n9YXoZBOkj2rqMdYe+oQ@mail.gmail.com>
	<51DDD935.2010203@rabbitmq.com>
Message-ID: <CAD-y5fQYBBgD2M3po05JEBYbdO1AShJdCcSkdSPiNPNhzY+tTg@mail.gmail.com>

Ohh glad you know about it guys.
Just did not know where tu publish or find bugs about rabbitmq ..

The link you provided is from a bug tracker system?.

Thanks.
Sandino

2013/7/10 Matthias Radestock <matthias at rabbitmq.com>

> On 10/07/13 22:46, Saso wrote:
>
>> The problem is with mochiweb (I think) I posted a bug in Tsung bug
>> reports https://support.process-one.**net/browse/TSUN-258<https://support.process-one.net/browse/TSUN-258>
>>
>
> This was brought up a few days ago: http://rabbitmq.1065348.n5.**
> nabble.com/Error-when-**accessing-management-plugin-**td27844.html<http://rabbitmq.1065348.n5.nabble.com/Error-when-accessing-management-plugin-td27844.html>
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/ebbcb179/attachment.htm>

From liangrubo at bytedance.com  Thu Jul 11 02:35:53 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Thu, 11 Jul 2013 09:35:53 +0800
Subject: [rabbitmq-discuss] why rabbit eating so much memory?
In-Reply-To: <51DD920B.9080406@rabbitmq.com>
References: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
	<51DD920B.9080406@rabbitmq.com>
Message-ID: <CA+BFTFtDBQ0AvOyxkDmM=+P4PHYHK9=mPy20-3wQCBF7ZBmCjg@mail.gmail.com>

Hi Matthias,

There is no other vhosts. I can't keep the problem for investigation since
it is a production server. "rabbitmqctl stop_app; rabbitmqctl start_app"
frees the memory.

I am new to rabbit and this is just one of a series problems I meet. I am
not sure whether it helps but I am going to list the problems I experienced
to provide more context.

Environment:
- Debian 7.1
- A cluster with 3 servers
- A virtual ip is assigned to the servers, using keepalive to shift the
virtual ip(automatic)
- use default exchange
- 6 queues (ha.snssdk.log, ha.snssdk.log.dispatch,
ha.snssdk.log.output, ssesion,
session.log, session.output), queues whose name begin with 'ha.' are
mirrored queues
- all queues and messages are none-durable
- message publish rate: 4000 ~ 10000 msg/s

Problems(with actions I took):
1. Initially use rabbit version 3.1.1, the rabbit server crash with message
like following sometime: Slogan: std_alloc: Cannot allocate
1119579832804544 bytes of memory (of type "arg_reg").
    - action: upgrade both rabbit and erlang to the latest version.
2. rabbit take up to much memory
    - action: rabbitmqctl stop_app; rabbitmqctl start_app
3. block on declaring queue 'ha.snssdk.log.dispatch', but it is OK to
declare other queues, including 'ha.snssdk.log.dispatch2'
    - action: stop rabbit, remove mnesia folder, start rabbit and rebuild
the cluster.
4. the management_plugin doesn't work, with message like "TypeError: Cannot
read property 'connections' of undefined"
   - action: asking in maillist but no action is taken so far
5. though all the queues and messages are none-durable, and the memory
consumption is far below configured by 'vm_memory_high_watermark', the
mnesia folder sometimes can take up much space(e.g. 19G), it is basically
taken by 'msg_store_transient' folder. I don't understand why.
   - action: none
6. sometimes rabbit doesn't push message to consumers in time: I found some
consumers don't get message from time to time even there are messages in
the queue. But this seems to be transient (lasting for about 1 minute).
   - action: none

Thanks.

On Thu, Jul 11, 2013 at 12:55 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 09/07/13 15:59, Rubo Liang wrote:
>
>> My rabbit eats 25G memory, but the queues don't take to much as shown by
>> this command: 'rabbitmqctl list_queues name messages memory':
>> Listing queues ...
>> ha.snssdk.log   695954  16426216
>> ha.snssdk.log.dispatch  660748  102698808
>> ha.snssdk.log.output    63573   32800680
>> ssesion 0       25952
>> ssesion.log     101     436328
>> ssesion.output  0       148816
>> ...done.
>>
>> As shown above the queues only take about 150M memory. But the rabbit
>> process actually takes about 25G.
>>
>> 'rabbitmqctl status' gives me following output on memory:
>>
>>   {memory,
>>       [{total,25394382848},
>>        {connection_procs,140253648},
>>        {queue_procs,19311874888},
>>
>
> So that shows queue processes taking up 19G. Perhaps you have queue's in
> vhosts other than '/'? Note that 'rabbitmqctl list_queues' only shows
> information on one vhost ('/' by default).
>
> Matthias.
>



-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/c42a1cf7/attachment.htm>

From matthias at rabbitmq.com  Thu Jul 11 08:02:06 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 11 Jul 2013 08:02:06 +0100
Subject: [rabbitmq-discuss] Rabbitmq managment console crashes after
 install Tsung
In-Reply-To: <CAD-y5fQYBBgD2M3po05JEBYbdO1AShJdCcSkdSPiNPNhzY+tTg@mail.gmail.com>
References: <CAD-y5fS2Poi7_gyWY=rY=ARB59ZBy6n9YXoZBOkj2rqMdYe+oQ@mail.gmail.com>
	<51DDD935.2010203@rabbitmq.com>
	<CAD-y5fQYBBgD2M3po05JEBYbdO1AShJdCcSkdSPiNPNhzY+tTg@mail.gmail.com>
Message-ID: <51DE586E.3060401@rabbitmq.com>

On 11/07/13 00:31, Saso wrote:
> The link you provided is from a bug tracker system?.

It's the mailing list archive.

Matthias.

From emile at rabbitmq.com  Thu Jul 11 09:58:40 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 11 Jul 2013 09:58:40 +0100
Subject: [rabbitmq-discuss] Possible RabbitMQ 3.0.4 Management Plug-in
 (Mochiweb) Directory Traversal Vulnerability?
In-Reply-To: <51DD35CB.5050602@rabbitmq.com>
References: <8064f5da-f0a2-4a76-a6e5-8c7739eb63c4@googlegroups.com>
	<51DD35CB.5050602@rabbitmq.com>
Message-ID: <51DE73C0.1010609@rabbitmq.com>


Hi Zachary,

On 10/07/13 11:22, Emile Joubert wrote:
> On 10/07/13 01:05, Zach Austin wrote:
>> A commercial off-the-shelf vulnerability scanner is detecting a
>> directory traversal vulnerability in the RabbitMQ management plugin HTTP
>> server (Mochiweb) installed in the default configuration on Windows
>> Server 2003. Exploitation of the vulnerability reportedly does not
>> require authentication. 
>>
>> I can provide details upon request.  Please let me know if this is a
>> known issue 
> 
> 
> If you provide details then we'll be able to determine whether this is a
> known issue. Please reply to me directly if you feel the need to
> practice responsible disclosure.


Thanks for taking the time to report this issue. This is a known issue
in the sense that it has been reported and fixed in the Mochiweb project:

 https://github.com/mochi/mochiweb/issues/92

Unfortunately the version of Mochiweb included in RabbitMQ does not yet
include the upstream fix, but we do plan to update this and include the
fix. The RabbitMQ release notes will contain a description to that effect.

In the meantime here some possible workarounds:
If you access the management interface via a proxy then you can include
a rule to disallow access to URLs that contain backslashes.
The issue appears to be Windows-specific, so you could enable the
management interface only on non-Windows nodes.



-Emile





-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: OpenPGP digital signature
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/46a999b6/attachment.pgp>

From matthias at rabbitmq.com  Thu Jul 11 10:15:46 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 11 Jul 2013 10:15:46 +0100
Subject: [rabbitmq-discuss] why rabbit eating so much memory?
In-Reply-To: <CA+BFTFtDBQ0AvOyxkDmM=+P4PHYHK9=mPy20-3wQCBF7ZBmCjg@mail.gmail.com>
References: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
	<51DD920B.9080406@rabbitmq.com>
	<CA+BFTFtDBQ0AvOyxkDmM=+P4PHYHK9=mPy20-3wQCBF7ZBmCjg@mail.gmail.com>
Message-ID: <51DE77C2.5050704@rabbitmq.com>

On 11/07/13 02:35, Rubo Liang wrote:
> There is no other vhosts. I can't keep the problem for investigation
> since it is a production server.

As Emile suggested, please post the output of 'rabbitmqctl report' when 
you next encounter a high memory use situation.

> I am new to rabbit and this is just one of a series problems I meet. I
> am not sure whether it helps but I am going to list the problems I
> experienced to provide more context.

Please continue to report individual issues on separate email thread.

Regards,

Matthias.

From wang_nets at 163.com  Thu Jul 11 09:00:24 2013
From: wang_nets at 163.com (wangshuo)
Date: Thu, 11 Jul 2013 01:00:24 -0700 (PDT)
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server on
	CentOS 6.3
Message-ID: <1373529623856-27987.post@n5.nabble.com>

Hi All:
I install rabbitmq-service as follow steps:
(1)	yum -y install rabbitmq-server 
(2)	/etc/init.d/rabbitmq-server start
The system return:
Starting rabbitmq-server: RabbitMQ is currently running
rabbitmq-server
(3) [root at wcc-pt-controlnode01 ~]# /etc/init.d/rabbitmq-server status
Status of node 'rabbit@ wcc-pt-controlnode01 ...
Error: unable to connect to node 'rabbit@ wcc-pt-controlnode01 ': nodedown

DIAGNOSTICS
===========

nodes in question: ['rabbit@ localhost']

hosts, their running nodes and ports:
- wcc-pt-controlnode01: [{rabbitmqctl8332,56485}]

current node details:
- node name: 'rabbitmqctl8332@ wcc-pt-controlnode01 '
- home dir: /var/lib/rabbitmq
- cookie hash: tMlGzt4Qv7UegMpco3OogQ==

I have added the item like this: 127.0.0.1  wcc-pt-controlnode01 in
/etc/hosts
My system is CentOS 6.3-x86_64 kernel: 2.6.32-279.14.1.el6.x86_64
What should I do can make rabbitmq-server run normally? Thanks very
mach!!!!!




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/The-problem-about-installing-rabbitmq-server-on-CentOS-6-3-tp27987.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Thu Jul 11 10:19:15 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 11 Jul 2013 10:19:15 +0100
Subject: [rabbitmq-discuss] rabbitmq-c confirmation
In-Reply-To: <1373356187057-27919.post@n5.nabble.com>
References: <1373334688020-27910.post@n5.nabble.com>
	<CAAt2poLWnNnyn3SsmdHBDSdiyjJvUigv6cn0Ptb=CbUD-GrOaQ@mail.gmail.com>
	<1373351432799-27916.post@n5.nabble.com>
	<CAAt2poLRzNhbyT6jRAp95CSMPT=NLnCEss-ZieSvYQeH+93ihQ@mail.gmail.com>
	<1373356187057-27919.post@n5.nabble.com>
Message-ID: <51DE7893.60804@rabbitmq.com>

On 09/07/13 08:49, 3k4b251 wrote:
> It's    a  little  hard  to understand, can you  show  me  a   example ?

You'll need to be more specific. What exactly do you not understand 
about the example Alan provided at 
http://rabbitmq.1065348.n5.nabble.com/Publisher-Confirms-support-in-Rabbitmq-c-client-tp20862p20867.html?

Matthias.

From jorge.diz at nomasystems.com  Thu Jul 11 10:25:49 2013
From: jorge.diz at nomasystems.com (Jorge Diz Pico)
Date: Thu, 11 Jul 2013 11:25:49 +0200
Subject: [rabbitmq-discuss] Monitor and restart
In-Reply-To: <F188379A-7C46-4B65-86C8-C1158F2526B0@rabbitmq.com>
References: <CAGQEY6=qmgnhB3RiYC6qbb+ehA0reHBqJSfrAhL=FmKOChSaBA@mail.gmail.com>
	<F188379A-7C46-4B65-86C8-C1158F2526B0@rabbitmq.com>
Message-ID: <CAGQEY6nE8jP6QmSQ8+96PRru=zY-k=HsP51p=MS6_CZbgyYZEg@mail.gmail.com>

> So you can indeed add some settings to RABBITMQ_SERVER_ERL_ARGS when
starting up (or set these in the rabbitmq user's default environment) and
of course you'll need to set the HEART_COMMAND environment variable to
whatever command you normally use to start the broker (depending on how you
installed it).

That's what I'm trying, but it doesn't work as expected (the rabbit node
immediately crashes during init after being started this way).

> There are a couple of reasons we don't do this out of the box [...]

I understand now, thanks.

> Yes, See http://www.rabbitmq.com/reliability.html

That's internally, but I was looking at it from outside. Some embedded
utility for monitoring its behaviour and knowing it's come down (and
ideally, it would pull itself back up again).


On Wed, Jul 10, 2013 at 12:09 PM, Tim Watson <tim at rabbitmq.com> wrote:

> Hi Jorge,
>
> On 8 Jul 2013, at 16:21, Jorge Diz Pico wrote:
>
> I peeked around and noticed Rabbit is not using heart, which makes me
> unease about potential crashes. I tried to tweak the start scripts myself
> but it's not as straight-forward as it would seem to make it work.
>
>
> So you can indeed add some settings to RABBITMQ_SERVER_ERL_ARGS when
> starting up (or set these in the rabbitmq user's default environment) and
> of course you'll need to set the HEART_COMMAND environment variable to
> whatever command you normally use to start the broker (depending on how you
> installed it).
>
> So before I make a mess of it, I'd like to know if there's any reason why
> Rabbit doesn't use heart or even offer a quick flag to enable it (at least
> I couldn't find any reference to it). Does it use any other mechanism
> underneath to ensure reliability?
>
>
> There are a couple of reasons we don't do this out of the box.
>
> 1. it would be fiddly to set this up in a packaged install for all
> possible environments
> 2. there's a plethora of other generic options out there (such as monit,
> god, etc)
> 3. automatically restarting a clustered node could have unintended
> consequences, depending on how it died
>
> In short, by all means turn heart on if you like, but if I were you I'd
> consider looking at other generic options too. And make sure you understand
> what the potential consequences of automatic restart might be, for example
> if several clustered nodes go offline together, the order in which they're
> restarted can be important.
>
> Cheers,
> Tim
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/37bb9b19/attachment.htm>

From emile at rabbitmq.com  Thu Jul 11 10:34:27 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 11 Jul 2013 10:34:27 +0100
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
 on CentOS 6.3
In-Reply-To: <1373529623856-27987.post@n5.nabble.com>
References: <1373529623856-27987.post@n5.nabble.com>
Message-ID: <51DE7C23.5080701@rabbitmq.com>

On 11/07/13 09:00, wangshuo wrote:
> What should I do can make rabbitmq-server run normally?

Have you looked in the broker logfile for potential causes?



-Emile



From emile at rabbitmq.com  Thu Jul 11 10:44:30 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 11 Jul 2013 10:44:30 +0100
Subject: [rabbitmq-discuss] Confirm if the message was published
In-Reply-To: <CAFrXCmJvA9N3hsm75Ox_W_trGGCA7NY7v5H7VOX1s6HD3Vr_rA@mail.gmail.com>
References: <CAFrXCmJvA9N3hsm75Ox_W_trGGCA7NY7v5H7VOX1s6HD3Vr_rA@mail.gmail.com>
Message-ID: <51DE7E7E.9060905@rabbitmq.com>

On 10/07/13 18:24, Guilherme Labigalini wrote:

> when there is no free diskspace on the server, the commit operation
> is waiting forever.


You are probably crossing the disk free limit. Check if the broker log
contains messages to that effect. By default the broker needs 1Gb free
disk space. Either free more space or set a lower limit:

http://www.rabbitmq.com/memory.html#diskfreesup



-Emile




From matthias at rabbitmq.com  Thu Jul 11 10:56:40 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 11 Jul 2013 10:56:40 +0100
Subject: [rabbitmq-discuss] Confirm if the message was published
In-Reply-To: <51DE7E7E.9060905@rabbitmq.com>
References: <CAFrXCmJvA9N3hsm75Ox_W_trGGCA7NY7v5H7VOX1s6HD3Vr_rA@mail.gmail.com>
	<51DE7E7E.9060905@rabbitmq.com>
Message-ID: <51DE8158.5020402@rabbitmq.com>

On 11/07/13 10:44, Emile Joubert wrote:
> On 10/07/13 18:24, Guilherme Labigalini wrote:
>
>> when there is no free diskspace on the server, the commit operation
>> is waiting forever.
>
>
> You are probably crossing the disk free limit.

And that would also be the reason why the WaitForConfirms call times out.

When the disk free space alarm is raised, publishing connections are 
blocked. Messages will be stuck in network buffers until the alarm 
condition is resolved, hence they won't be processed, let alone confirmed.

Matthias.

From matthias at rabbitmq.com  Thu Jul 11 11:13:41 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 11 Jul 2013 11:13:41 +0100
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
 on CentOS 6.3
In-Reply-To: <51DE7C23.5080701@rabbitmq.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com>
Message-ID: <51DE8555.2030100@rabbitmq.com>

On 11/07/13 10:34, Emile Joubert wrote:
> On 11/07/13 09:00, wangshuo wrote:
>> What should I do can make rabbitmq-server run normally?
>
> Have you looked in the broker logfile for potential causes?

Actually, I think the problem is evident from the information posted...

> /etc/init.d/rabbitmq-server status
> Status of node 'rabbit@ wcc-pt-controlnode01 ...
> Error: unable to connect to node 'rabbit@ wcc-pt-controlnode01 ': nodedown
>
> DIAGNOSTICS
> ===========
>
> nodes in question: ['rabbit@ localhost']

Notice the discrepancy in the node names. I cannot see a code path that 
would produce this. What version of rabbit are you running?

Matthias.

From mklishin at gopivotal.com  Thu Jul 11 11:46:29 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 11 Jul 2013 14:46:29 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
	<CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
Message-ID: <5CB8393A-BA03-4855-8F85-D4F442374A2D@gopivotal.com>

Rubo Liang:

> Yes, there is not any rewrite rule, and the proxy worked before

Would it be possible to get temporary access to one of the nodes (the management UI)
to investigate the issue?

I can't reproduce it locally so far and looking at the code does not give any hints
either.

Please email me off list.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/4fd64542/attachment.pgp>

From liangrubo at bytedance.com  Thu Jul 11 11:55:22 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Thu, 11 Jul 2013 18:55:22 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <5CB8393A-BA03-4855-8F85-D4F442374A2D@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
	<CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
	<5CB8393A-BA03-4855-8F85-D4F442374A2D@gopivotal.com>
Message-ID: <CA+BFTFuy77owgGn=gNnvAEcs8BHeyBt3W+00-O8Se9ijH3AsMg@mail.gmail.com>

Hi MK,

Thanks for your response, I will try to find out the problem in the
javascript file. Will let you know when I get something.


On Thu, Jul 11, 2013 at 6:46 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > Yes, there is not any rewrite rule, and the proxy worked before
>
> Would it be possible to get temporary access to one of the nodes (the
> management UI)
> to investigate the issue?
>
> I can't reproduce it locally so far and looking at the code does not give
> any hints
> either.
>
> Please email me off list.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/d3cb4f9f/attachment.htm>

From mklishin at gopivotal.com  Thu Jul 11 12:17:53 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 11 Jul 2013 15:17:53 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFuy77owgGn=gNnvAEcs8BHeyBt3W+00-O8Se9ijH3AsMg@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
	<CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
	<5CB8393A-BA03-4855-8F85-D4F442374A2D@gopivotal.com>
	<CA+BFTFuy77owgGn=gNnvAEcs8BHeyBt3W+00-O8Se9ijH3AsMg@mail.gmail.com>
Message-ID: <FE934983-603C-4EC0-A0AE-DE10BAF0D28E@gopivotal.com>

Rubo Liang:

> Thanks for your response, I will try to find out the problem in the javascript file. Will let you know when I get something.

Thank you.

What OS and browser/version do you use?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/1838b369/attachment.pgp>

From liangrubo at bytedance.com  Thu Jul 11 12:33:14 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Thu, 11 Jul 2013 19:33:14 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <FE934983-603C-4EC0-A0AE-DE10BAF0D28E@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
	<CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
	<5CB8393A-BA03-4855-8F85-D4F442374A2D@gopivotal.com>
	<CA+BFTFuy77owgGn=gNnvAEcs8BHeyBt3W+00-O8Se9ijH3AsMg@mail.gmail.com>
	<FE934983-603C-4EC0-A0AE-DE10BAF0D28E@gopivotal.com>
Message-ID: <CA+BFTFv3Ay6RE3dLctf8qt2ucqQfdSqAJrnrDLDfynOnk_yFDw@mail.gmail.com>

I am using Mac OS version 10.8.4 and Chrome version 27.0.1453.116. But I
also see the problem on Windows 7, Chrome version 28.0.1500.71


On Thu, Jul 11, 2013 at 7:17 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > Thanks for your response, I will try to find out the problem in the
> javascript file. Will let you know when I get something.
>
> Thank you.
>
> What OS and browser/version do you use?
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/dfaa7c89/attachment.htm>

From liangrubo at bytedance.com  Thu Jul 11 12:33:52 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Thu, 11 Jul 2013 19:33:52 +0800
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <FE934983-603C-4EC0-A0AE-DE10BAF0D28E@gopivotal.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
	<CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
	<5CB8393A-BA03-4855-8F85-D4F442374A2D@gopivotal.com>
	<CA+BFTFuy77owgGn=gNnvAEcs8BHeyBt3W+00-O8Se9ijH3AsMg@mail.gmail.com>
	<FE934983-603C-4EC0-A0AE-DE10BAF0D28E@gopivotal.com>
Message-ID: <CA+BFTFufYj+EUf7ZCU0eBD83monXAYyEbufu9ezJxU-OKO0M5g@mail.gmail.com>

I will probably get back to you tomorrow.

Thanks.


On Thu, Jul 11, 2013 at 7:17 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > Thanks for your response, I will try to find out the problem in the
> javascript file. Will let you know when I get something.
>
> Thank you.
>
> What OS and browser/version do you use?
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/ffbb45c1/attachment.htm>

From wang_nets at 163.com  Thu Jul 11 12:49:19 2013
From: wang_nets at 163.com (wangshuo)
Date: Thu, 11 Jul 2013 04:49:19 -0700 (PDT)
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
	on CentOS 6.3
In-Reply-To: <51DE7C23.5080701@rabbitmq.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com>
Message-ID: <1373543359137-28001.post@n5.nabble.com>

Emile Joubert-2 wrote
> Have you looked in the broker logfile for potential causes?

Sorry,where is it?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/The-problem-about-installing-rabbitmq-server-on-CentOS-6-3-tp27987p28001.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From wang_nets at 163.com  Thu Jul 11 12:50:49 2013
From: wang_nets at 163.com (wangshuo)
Date: Thu, 11 Jul 2013 04:50:49 -0700 (PDT)
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
	on CentOS 6.3
In-Reply-To: <51DE8555.2030100@rabbitmq.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com> <51DE8555.2030100@rabbitmq.com>
Message-ID: <1373543449366-28002.post@n5.nabble.com>

rabbitmq-server-3.1.3-1.noarch



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/The-problem-about-installing-rabbitmq-server-on-CentOS-6-3-tp27987p28002.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Thu Jul 11 13:05:35 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 11 Jul 2013 13:05:35 +0100
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
 on CentOS 6.3
In-Reply-To: <1373543449366-28002.post@n5.nabble.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com> <51DE8555.2030100@rabbitmq.com>
	<1373543449366-28002.post@n5.nabble.com>
Message-ID: <51DE9F8F.4040607@rabbitmq.com>

On 11/07/13 12:50, wangshuo wrote:
> rabbitmq-server-3.1.3-1.noarch

Was what you posted an actual, verbatim transcript, i.e. you really saw

<quote>
[root at wcc-pt-controlnode01 ~]# /etc/init.d/rabbitmq-server status
Status of node 'rabbit at wcc-pt-controlnode01'...
Error: unable to connect to node 'rabbit at wcc-pt-controlnode01': nodedown

DIAGNOSTICS
===========

nodes in question: ['rabbit at localhost']
</quote>

with two different node names being mentioned, i.e. 
'rabbit at wcc-pt-controlnode01' in the "Status of node" line and 
'rabbit at localhost' in the "nodes in question" line?

Matthias.

From guilherme.labigalini at gmail.com  Thu Jul 11 14:03:56 2013
From: guilherme.labigalini at gmail.com (Guilherme Labigalini)
Date: Thu, 11 Jul 2013 10:03:56 -0300
Subject: [rabbitmq-discuss] Confirm if the message was published
In-Reply-To: <51DE8158.5020402@rabbitmq.com>
References: <CAFrXCmJvA9N3hsm75Ox_W_trGGCA7NY7v5H7VOX1s6HD3Vr_rA@mail.gmail.com>
	<51DE7E7E.9060905@rabbitmq.com> <51DE8158.5020402@rabbitmq.com>
Message-ID: <CAFrXCmKc0hO=NdzXF-xmGsAGEKyM5SrmrBwmTz_ja5=FT=Wc4A@mail.gmail.com>

Thanks for your input!

I deleted some files and now I've 5GB of free disk space. My disk low
watermark is 953.7MB; And the same problem happens, I started the test
application that send messages with 100k in the message body and after 3k
messages sent the WaitForConfirms method is returning timeout.

Then I change my timeout from 5 seconds to 30 seconds and it worked until
my disk was full - that is great.

Looks like RabbitMQ needs more time to confirm/write messages to disk when
the queue size is big (like 2GB).

There is any recommendation about how much data I can "store" the message
queues?

Thanks!


On Thu, Jul 11, 2013 at 6:56 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 11/07/13 10:44, Emile Joubert wrote:
>
>> On 10/07/13 18:24, Guilherme Labigalini wrote:
>>
>>  when there is no free diskspace on the server, the commit operation
>>> is waiting forever.
>>>
>>
>>
>> You are probably crossing the disk free limit.
>>
>
> And that would also be the reason why the WaitForConfirms call times out.
>
> When the disk free space alarm is raised, publishing connections are
> blocked. Messages will be stuck in network buffers until the alarm
> condition is resolved, hence they won't be processed, let alone confirmed.
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/dda435dd/attachment.htm>

From wang_nets at 163.com  Thu Jul 11 14:08:16 2013
From: wang_nets at 163.com (wangshuo)
Date: Thu, 11 Jul 2013 06:08:16 -0700 (PDT)
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
	on CentOS 6.3
In-Reply-To: <51DE9F8F.4040607@rabbitmq.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com> <51DE8555.2030100@rabbitmq.com>
	<1373543449366-28002.post@n5.nabble.com>
	<51DE9F8F.4040607@rabbitmq.com>
Message-ID: <1373548096449-28005.post@n5.nabble.com>

Sorry
__________________________________________________________________
Status of node 'rabbit at wcc-pt-controlnode01' ...
Error: unable to connect to node 'rabbit at wcc-pt-controlnode01': nodedown

DIAGNOSTICS
===========

nodes in question: ['rabbit at wcc-pt-controlnode01']

hosts, their running nodes and ports:
- wcc-pt-controlnode01: [{rabbitmqctl24193,23241}]

current node details:
- node name: 'rabbitmqctl24193 at wcc-pt-controlnode01'
- home dir: /var/lib/rabbitmq
- cookie hash: tMlGzt4Qv7UegMpco3OogQ==
____________________________________________________________________



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/The-problem-about-installing-rabbitmq-server-on-CentOS-6-3-tp27987p28005.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From wang_nets at 163.com  Thu Jul 11 14:18:35 2013
From: wang_nets at 163.com (wangshuo)
Date: Thu, 11 Jul 2013 06:18:35 -0700 (PDT)
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
	on CentOS 6.3
In-Reply-To: <51DE9F8F.4040607@rabbitmq.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com> <51DE8555.2030100@rabbitmq.com>
	<1373543449366-28002.post@n5.nabble.com>
	<51DE9F8F.4040607@rabbitmq.com>
Message-ID: <1373548715046-28006.post@n5.nabble.com>

when I start the service
___________________________________
# service rabbitmq-server start
Starting rabbitmq-server: RabbitMQ is currently running
rabbitmq-server.

when I stop the service
___________________________________________
Stopping rabbitmq-server: rmdir: failed to remove `/var/run/rabbitmq': No
such file or directory
rabbitmq-server.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/The-problem-about-installing-rabbitmq-server-on-CentOS-6-3-tp27987p28006.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Thu Jul 11 15:41:12 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 11 Jul 2013 18:41:12 +0400
Subject: [rabbitmq-discuss] rabbit management plugin doesn't work
In-Reply-To: <CA+BFTFufYj+EUf7ZCU0eBD83monXAYyEbufu9ezJxU-OKO0M5g@mail.gmail.com>
References: <CA+BFTFsFZ5juXANwJ0wWDt_s3cU_hmX5TaPH-+XsBpqUUVZhZA@mail.gmail.com>
	<1099E065-0397-417A-9DD0-6A1B5F8C5896@gopivotal.com>
	<CA+BFTFtA40Bczg2GNNaUpJuu+CpJyPBjc-+o+ob9CH3cDbnnow@mail.gmail.com>
	<05EAB364-A415-46E8-B59F-51405E9EBDEA@gopivotal.com>
	<CA+BFTFshgzv3w5hTVf8gy+yoevH+=Rig-YnUu9NJQ3sDehbyVQ@mail.gmail.com>
	<5922D56C-549B-4A85-9FCE-19A279B6E2F8@gopivotal.com>
	<CA+BFTFsyEA3XaqufT-4LhX8ir=2QbHaNwHn+7psE=fsO2JWXRw@mail.gmail.com>
	<A9E2D012-C354-4670-AB55-2F4154A6689A@gopivotal.com>
	<CA+BFTFsNjzAHPVKaMvc3VaWL1PqPbAMEE=BXBDhpO8n9JKocPQ@mail.gmail.com>
	<5CB8393A-BA03-4855-8F85-D4F442374A2D@gopivotal.com>
	<CA+BFTFuy77owgGn=gNnvAEcs8BHeyBt3W+00-O8Se9ijH3AsMg@mail.gmail.com>
	<FE934983-603C-4EC0-A0AE-DE10BAF0D28E@gopivotal.com>
	<CA+BFTFufYj+EUf7ZCU0eBD83monXAYyEbufu9ezJxU-OKO0M5g@mail.gmail.com>
Message-ID: <C527361E-E29B-496D-BF83-A6B89BDC6BF5@gopivotal.com>

Rubo Liang:

> I will probably get back to you tomorrow.

Thanks.

I have a local 3 node cluster with every node having management plugin enabled.
Then I have an Nginx reverse proxy that lets me access management UI on every
node via a subdomain.

I cannot reproduce your issue with this setup. My proxy config looks like this:
https://gist.github.com/michaelklishin/10eae3a1ab57c2a8cb72
--
MK


From 48484005 at qq.com  Thu Jul 11 15:17:55 2013
From: 48484005 at qq.com (=?gb18030?B?us6087rs?=)
Date: Thu, 11 Jul 2013 22:17:55 +0800
Subject: [rabbitmq-discuss] rabbitmq shovel Plug-in problem
Message-ID: <tencent_5D426F535E2DB13D56E2EC41@qq.com>

Like rabbits friends Hello everybody!
 I came to China, my English is very poor, do not mind :)


I would like to ask a question about the use of plug-shovel,
This plug-in has the following configuration fragment content:
-----------------------------------------------
......
{publish_properties, [
       {headers, [ {<< "key1" >>, long, 60000}
                       ,{<< "key2" >>,?, << "there is string content" >>}]
       }
]}
......


I hope that when sending a message shovel plugin to attach some header information of each message, as key1 and key2, but key2 is a string, the above "?" At what should I write? I tried to write "string", but wrong. I searched the official documents, but could not find how to write, I do not know erlang Language: (


I think this should be a shovel plugin configuration file syntax problem, you can tell that I should?


Thank you very much?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/50ac9c19/attachment.htm>

From hdh528 at gmail.com  Thu Jul 11 15:38:22 2013
From: hdh528 at gmail.com (=?UTF-8?B?5L2V5aSn57SF?=)
Date: Thu, 11 Jul 2013 07:38:22 -0700 (PDT)
Subject: [rabbitmq-discuss] shovel Plug-in problem ! (How to configure
	headers items)
Message-ID: <50d2865d-c7d1-4a9a-9557-4527f36d99a9@googlegroups.com>

Like rabbits friends Hello everybody!
 I came to China, my English is very poor, do not mind :)

I would like to ask a question about the use of plug-shovel,
This plug-in has the following configuration fragment content:
-----------------------------------------------
......
{publish_properties, [
       {headers, [ {<< "key1" >>, long, 60000}
                       ,{<< "key2" >>,?, << "there is string content" >>}]
       }
]}
......

I hope that when sending a message shovel plugin to attach some header 
information of each message, as key1 and key2(If only key1 test no 
problem), but key2 is a string, the above "?" At what should I write? I 
tried to write "string", but wrong. I searched the official documents, but 
could not find how to write, I do not know erlang Language: (

I think this should be a shovel plugin configuration file syntax problem, 
you can tell that I should?

Thank you very much?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/8b6f206d/attachment.htm>

From NuZajacPogodi at gmail.com  Thu Jul 11 15:05:52 2013
From: NuZajacPogodi at gmail.com (NuPogodi)
Date: Thu, 11 Jul 2013 07:05:52 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51D30324.6020102@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D30324.6020102@rabbitmq.com>
Message-ID: <1373551552164-28007.post@n5.nabble.com>

Hi


From emile at rabbitmq.com  Thu Jul 11 16:27:50 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 11 Jul 2013 16:27:50 +0100
Subject: [rabbitmq-discuss] shovel Plug-in problem ! (How to configure
 headers items)
In-Reply-To: <50d2865d-c7d1-4a9a-9557-4527f36d99a9@googlegroups.com>
References: <50d2865d-c7d1-4a9a-9557-4527f36d99a9@googlegroups.com>
Message-ID: <51DECEF6.9030809@rabbitmq.com>


Hi,

On 11/07/13 15:38, ??? wrote:

> {<< "key2" >>,?, << "there is string content" >>}

> key2 is a string, the above "?" At what should I write? I tried to
> write "string"

Try "longstr" (without quotes) instead.


-Emile




From mklishin at gopivotal.com  Thu Jul 11 16:40:46 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 11 Jul 2013 19:40:46 +0400
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1373551552164-28007.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D30324.6020102@rabbitmq.com>
	<1373551552164-28007.post@n5.nabble.com>
Message-ID: <66086506-DC45-484F-B109-8ABC87FD4A0F@gopivotal.com>

NuPogodi:

> Taking into account that correct queue implementation should be of O(1) time
> complexity should the issues with RabbitMQ performance when queues grow
> treated as a bug that will be fixed or as a "feature" that is not going to
> be addressed because Rabbit focuses on efficient message routing and not
> efficient queuing?

O(1) appends and other queue characteristics in CS literature do not take into account
the fact that your consumers can fall well behind your producers and RAM is a limited resource.
Both are purely operational issues.

In infrastructure tools such as RabbitMQ, they are very real. When a queue starts to grow,
RabbitMQ tries to be reasonably smart and move messages to disk.
In the default message index implementation there is some per message memory cost.

There is a plugin, rabbitmq toke, that uses Tokyo Cabinet for message index. Many installations,
however, operate perfectly fine with the default impl and the Tokyo Cabinet dependency complicates deployment, so it's not used by default.

It would not say it's fair to claim that RabbitMQ "focuses on efficient routing and not efficient queueing" because the issue is not of "efficient queueing" but balancing
performance difference of disk vs RAM in situations when a node is physically low on RAM.
If you are not low on RAM, you likely won't encounter any issues.

It's something that can be improved, but that's not entirely trivial to do well.
--
MK


From emile at rabbitmq.com  Thu Jul 11 16:46:37 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 11 Jul 2013 16:46:37 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1373551552164-28007.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D30324.6020102@rabbitmq.com>
	<1373551552164-28007.post@n5.nabble.com>
Message-ID: <51DED35D.7070400@rabbitmq.com>

On 11/07/13 15:05, NuPogodi wrote:

> 1. RabbitMQ does not work efficiently when queue starts to grow

Queue throughput drops when messages are paged to disk. The broker
always tries to make most efficient use of server resources.

> 2. RabbitMQ has correct queue implementation

The broker certainly implements the FIFO data structure correctly.

> Taking into account that correct queue implementation should be of O(1) time
> complexity should the issues with RabbitMQ performance when queues grow
> treated as a bug

The speed of memory vs. disk is not an algorithmic complexity issue.

There is an argument for optionally preventing paging to allow more
consistent queue throughput. We are treating this as a feature for a
future release.


-Emile




From kgoess at bepress.com  Thu Jul 11 17:38:19 2013
From: kgoess at bepress.com (Kevin Goess)
Date: Thu, 11 Jul 2013 09:38:19 -0700
Subject: [rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in
	the queues
Message-ID: <CABZkbxiMPGZqx5Db5p2T_g0-wa2R64EDxiD0kqy4-jX-DabB1w@mail.gmail.com>

Circling back after an earlier question about this problem. We've upgraded
to 3.1.3-1.  We've moved the mnesia files to a dedicated 10k sata drive
via RABBITMQ_MNESIA_BASE, a new drive that nothing else is using, on a xen
virtual machine that is only running rabbitmq.  We generally deal with
about 20 messages per second.

But we're seeing pretty heavy disk activity, with iowait 30-40%, and iostat
numbers like this:

Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz
avgqu-sz   await  svctm  %util
xvdbp1            0.00    60.00    0.00  143.40     0.00  1452.80    10.13
    0.88    6.14   4.22  60.48

Is this expected?  That seems excessive, and I worry that the high iowait
could cause us problems as we grow, so I was hoping to get some pointers to
things to look at that to improve that.  Any information, tips, or
suggestions would be much appreciated!

There's nothing in the sasl logs, and the rabbitmq logs are nothing but
these:

INFO REPORT==== 11-Jul-2013::09:25:55 ===
accepting STOMP connection <0.14174.238> (...)

=INFO REPORT==== 11-Jul-2013::09:26:12 ===
closing STOMP connection <0.13749.238> (...)

These are the queues we have in there now:

$ rabbitmqctl list_queues name durable arguments pid messages_ready
Listing queues ...
article.added_to_content_bundle true [] <rabbit at rabbitmq.1.239.0> 0
institution.added_to_content_bundle true [] <rabbit at rabbitmq.1.215.0> 0
production.article_downloads true [] <rabbit at rabbitmq.1.221.0> 0
production.article_downloads.error true [] <rabbit at rabbitmq.1.265.0> 0
production.article_downloads.unaggregated true [] <rabbit at rabbitmq.1.274.0>
0
production.article_downloads.unaggregated.error true []
<rabbit at rabbitmq.1.294.0> 0
production.bulk_email true [] <rabbit at rabbitmq.1.273.0> 0
production.bulk_email.error true [] <rabbit at rabbitmq.1.287.0> 0
production.certify-existing-expedites true [] <rabbit at rabbitmq.1.307.0> 0
production.certify-existing-expedites.error true [] <rabbit at rabbitmq.1.253.0
> 0
production.create-sw-site true [] <rabbit at rabbitmq.1.291.0> 0
production.create-sw-site.error true [] <rabbit at rabbitmq.1.282.0> 0
production.dcnetwork_follow true [] <rabbit at rabbitmq.1.300.0> 0
production.dcnetwork_follow-error true [] <rabbit at rabbitmq.1.289.0> 229
production.dcnetwork_follow.error true [] <rabbit at rabbitmq.1.232.0> 0
production.dcnetwork_update true [] <rabbit at rabbitmq.1.219.0> 0
production.dcnetwork_update.error true [] <rabbit at rabbitmq.1.301.0> 0
production.email true [] <rabbit at rabbitmq.1.223.0> 0
production.email.error true [] <rabbit at rabbitmq.1.241.0> 1
production.expresso-archive-pending-articles true []
<rabbit at rabbitmq.1.305.0> 0
production.expresso-archive-pending-articles.error true []
<rabbit at rabbitmq.1.299.0> 0
production.expresso-copy-article true [] <rabbit at rabbitmq.1.244.0> 0
production.expresso-copy-article.error true [] <rabbit at rabbitmq.1.242.0> 1
production.general-errors true [] <rabbit at rabbitmq.1.250.0> 150
production.generate-usage-report true [] <rabbit at rabbitmq.1.235.0> 0
production.generate-usage-report.error true [] <rabbit at rabbitmq.1.222.0> 0
production.guest_access_report true [] <rabbit at rabbitmq.1.238.0> 0
production.guest_access_report.error true [] <rabbit at rabbitmq.1.281.0> 0
production.logged_request true [] <rabbit at rabbitmq.1.302.0> 0
production.logged_request.error true [] <rabbit at rabbitmq.1.245.0> 0
production.migrate-article-editor-notes true [] <rabbit at rabbitmq.1.14254.0>
0
production.migrate-article-editor-notes.error true []
<rabbit at rabbitmq.1.14255.0> 96
production.mq-solr-update-article true [] <rabbit at rabbitmq.1.256.0> 0
production.mq-solr-update-article.error true [] <rabbit at rabbitmq.1.275.0>
185
production.mq-solr-update-article.low-priority true []
<rabbit at rabbitmq.1.262.0> 0
production.mq-solr-update-article.low-priority.error true []
<rabbit at rabbitmq.1.259.0> 3
production.publish-context true [] <rabbit at rabbitmq.1.295.0> 0
production.publish-context.error true [] <rabbit at rabbitmq.1.268.0> 0
production.purge-stamped-files true [] <rabbit at rabbitmq.1.14256.0> 0
production.purge-stamped-files.error true [] <rabbit at rabbitmq.1.14257.0> 12
production.record_download true [] <rabbit at rabbitmq.1.257.0> 0
production.record_download.error true [] <rabbit at rabbitmq.1.285.0> 0
production.saved_search_results true [] <rabbit at rabbitmq.1.286.0> 0
production.saved_search_results.error true [] <rabbit at rabbitmq.1.230.0> 0
production.solr-update-article true [] <rabbit at rabbitmq.1.217.0> 0
production.stamp-pdf true [] <rabbit at rabbitmq.1.225.0> 0
production.stamp-pdf.error true [] <rabbit at rabbitmq.1.251.0> 398
production.stamp-pdf.low-priority true [] <rabbit at rabbitmq.1.276.0> 0
production.stamp-pdf.low-priority.error true [] <rabbit at rabbitmq.1.236.0> 0
production.test true [] <rabbit at rabbitmq.1.233.0> 0
production.test.error true [] <rabbit at rabbitmq.1.254.0> 0
production.withdraw-for-author true [] <rabbit at rabbitmq.1.296.0> 0
production.withdraw-for-author.error true [] <rabbit at rabbitmq.1.308.0> 0
test true [] <rabbit at rabbitmq.1.279.0> 0
user.added_to_content_bundle true [] <rabbit at rabbitmq.1.237.0> 0
...done.


-- 
Kevin M. Goess
Software Engineer
Berkeley Electronic Press
kgoess at bepress.com

510-665-1200 x179
www.bepress.com

bepress: sustainable scholarly publishing
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/a668519b/attachment.htm>

From hdh528 at gmail.com  Thu Jul 11 17:46:51 2013
From: hdh528 at gmail.com (=?GB2312?B?us6087x0?=)
Date: Fri, 12 Jul 2013 00:46:51 +0800
Subject: [rabbitmq-discuss] shovel Plug-in problem ! (How to configure
 headers items)
In-Reply-To: <51DECEF6.9030809@rabbitmq.com>
References: <50d2865d-c7d1-4a9a-9557-4527f36d99a9@googlegroups.com>
	<51DECEF6.9030809@rabbitmq.com>
Message-ID: <CABTrCz+MDg3dQf9bNycKfXZfuTKJR7wsU1=VXgjNAuNKZf9z5Q@mail.gmail.com>

Try again I white tomorrow (now China is late at night, so sleepy Zzz????),
thank you very much, friend??
?? 2013-7-11 ????11:28??"Emile Joubert" <emile at rabbitmq.com>??????

>
> Hi,
>
> On 11/07/13 15:38, ?????t wrote:
>
> > {<< "key2" >>,?, << "there is string content" >>}
>
> > key2 is a string, the above "?" At what should I write? I tried to
> > write "string"
>
> Try "longstr" (without quotes) instead.
>
>
> -Emile
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/628e9fc0/attachment.htm>

From alan.antonuk at gmail.com  Thu Jul 11 17:51:39 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Thu, 11 Jul 2013 09:51:39 -0700
Subject: [rabbitmq-discuss] rabbitmq-c error list
In-Reply-To: <1373368666810-27924.post@n5.nabble.com>
References: <1373368666810-27924.post@n5.nabble.com>
Message-ID: <CAAt2po+VBdHWPfL_0w0fV47jQNis-90VwsE8WfRQ+BWirM-X9A@mail.gmail.com>

On Tue, Jul 9, 2013 at 4:17 AM, Haster <haster2004 at yandex.ru> wrote:

>
> Is there some document that represent full list of errors that could be
> returned by library?
>
> I'm currently working on the API documentation for this.  So the short
answer is not yet.

That said there are places you can look that might help you:

For functions that return an int (or amqp_rpc_reply_t with reply_type set
to AMQP_RESPONSE_LIBRARY_EXCEPTION), the value will be of the set defined
in amqp_status_enum.

Given the different platforms that rabbitmq-c its hard to describe all the
things that can go wrong without duplicating all the POSIX error codes.  In
certain cases (e.g., when you get an AMQP_STATUS_SOCKET_ERROR) it might be
useful to examine errno or WSAGetLastError() to see what went wrong.
Generally speaking though, if the library gets a socket error it doesn't
understand, it assumes that the network socket is dead.

As for errors from the broker, you can find a list on lines 55-72 of
amqp_framing.h, usually when you get one of these you also get a string
describing what went wrong in addition to the error code.

HTH
-Alan
--
View this message in context:
http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-error-list-tp27924.html
Sent from the RabbitMQ mailing list archive at Nabble.com.
_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/0478aa22/attachment.htm>

From steve at digitalnothing.com  Thu Jul 11 18:23:46 2013
From: steve at digitalnothing.com (Steve Valaitis)
Date: Thu, 11 Jul 2013 12:23:46 -0500
Subject: [rabbitmq-discuss] Header exchange wildcards and/or routing keys
Message-ID: <CALQig8-iJJh9buQSZpptpypM4JSqwuAf_5h=fenpOBmAmnwf9g@mail.gmail.com>

Is there any way to use wildcards right now with header exchange
values? If there isn't, does anyone know of plans to implement them,
or to allow routing keys to be used in conjunction with header
exchanges?

Thanks,
Steve

From mklishin at gopivotal.com  Thu Jul 11 19:52:42 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 11 Jul 2013 22:52:42 +0400
Subject: [rabbitmq-discuss] Header exchange wildcards and/or routing keys
In-Reply-To: <CALQig8-iJJh9buQSZpptpypM4JSqwuAf_5h=fenpOBmAmnwf9g@mail.gmail.com>
References: <CALQig8-iJJh9buQSZpptpypM4JSqwuAf_5h=fenpOBmAmnwf9g@mail.gmail.com>
Message-ID: <1C6016D8-85A7-4CB6-9B4E-B6942F911BB7@gopivotal.com>

Steve Valaitis:

> Is there any way to use wildcards right now with header exchange
> values?

Per AMQP 0.9.1 spec, only topic exchanges support wildcards in routing keys.

You can concatenate multiple values into a routing key and use that with a topic exchange.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/6ee77ae1/attachment.pgp>

From dbuchko at gopivotal.com  Thu Jul 11 20:27:15 2013
From: dbuchko at gopivotal.com (Daniel Buchko)
Date: Thu, 11 Jul 2013 15:27:15 -0400
Subject: [rabbitmq-discuss] Header exchange wildcards and/or routing keys
In-Reply-To: <CALQig8-iJJh9buQSZpptpypM4JSqwuAf_5h=fenpOBmAmnwf9g@mail.gmail.com>
References: <CALQig8-iJJh9buQSZpptpypM4JSqwuAf_5h=fenpOBmAmnwf9g@mail.gmail.com>
Message-ID: <CA+F3nVy5V45DRP2ziNn=Qbv0yYaqx59H-J+oe=x19pBak=WAaQ@mail.gmail.com>

Hi Steve,

If you want to wildcard a header property, just don't include it as part of
the binding to your headers exchange.  i.e. you have the following header
properties:  "colour" and "animal".  So if you want messages where
"animal"="rabbit" and "colour"="*", then don't include "colour" as part of
your binding -- just include "animal"="rabbit".  That will give you all
"rabbit" messages regardless of colour.

Or did I misunderstand your requirements?

Regards,
Dan



On Thu, Jul 11, 2013 at 1:23 PM, Steve Valaitis <steve at digitalnothing.com>wrote:

> Is there any way to use wildcards right now with header exchange
> values? If there isn't, does anyone know of plans to implement them,
> or to allow routing keys to be used in conjunction with header
> exchanges?
>
> Thanks,
> Steve
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/32bebeef/attachment.htm>

From matthias at rabbitmq.com  Thu Jul 11 22:08:58 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 11 Jul 2013 22:08:58 +0100
Subject: [rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing
 in the queues
In-Reply-To: <CABZkbxiMPGZqx5Db5p2T_g0-wa2R64EDxiD0kqy4-jX-DabB1w@mail.gmail.com>
References: <CABZkbxiMPGZqx5Db5p2T_g0-wa2R64EDxiD0kqy4-jX-DabB1w@mail.gmail.com>
Message-ID: <51DF1EEA.3040306@rabbitmq.com>

Kevin,

On 11/07/13 17:38, Kevin Goess wrote:
> Circling back after an earlier question about this problem. We've
> upgraded to 3.1.3-1.  We've moved the mnesia files to a dedicated 10k
> sata drive via RABBITMQ_MNESIA_BASE, a new drive that nothing else is
> using, on a xen virtual machine that is only running rabbitmq.  We
> generally deal with about 20 messages per second.
>
> But we're seeing pretty heavy disk activity, with iowait 30-40%, and
> iostat numbers like this:
>
> Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s
> avgrq-sz avgqu-sz   await  svctm  %util
> xvdbp1            0.00    60.00    0.00  143.40     0.00  1452.80
>   10.13     0.88    6.14   4.22  60.48
>
> Is this expected?  That seems excessive, and I worry that the high
> iowait could cause us problems as we grow, so I was hoping to get some
> pointers to things to look at that to improve that.

My suspicious is that somehow your usage pattern results in a lot of 
queue/exchange/binding creation/deletion, which, if the entities 
involved are durable, require disk writes and fsyncs.

To test the validity of that theory, please try to find out what files 
are seeing activity, and report back.


Regards,

Matthias.

From gui.ouellet at gmail.com  Fri Jul 12 02:19:46 2013
From: gui.ouellet at gmail.com (Guillaume Ouellet)
Date: Thu, 11 Jul 2013 18:19:46 -0700 (PDT)
Subject: [rabbitmq-discuss] Queue Replication over WAN
In-Reply-To: <fa1dc5ed-cf93-4308-b5a1-0650d3b4a6a8@googlegroups.com>
References: <fa1dc5ed-cf93-4308-b5a1-0650d3b4a6a8@googlegroups.com>
Message-ID: <470d463c-1e90-4188-a1e6-e85945f2331c@googlegroups.com>

Ok, I think I have found a way to solve this issue.

My queues will be durable, so if the server crashes, the queues will be 
reloaded on boot up. The servers RAID configuration will make sure we don't 
loose any items from our queue. 

The producer client code will implement  a logic where if the primary 
hostname can't be reached, we will send the items to the secondary 
hostname. The consumers will listen to both hostname. 

2 questions:

1. Is this approach flawed ?
2. I am using c# client, and I can't find in the doc any scheme for 
alternate nodes in case the primare fails? Is there any implementation 
similar to this, or I'll have to do my own ?

Thanks

On Wednesday, 10 July 2013 15:27:43 UTC-4, Guillaume Ouellet wrote:
>
> Hi all, 
>
> I am trying to use RabbitMq so that I have one instance of RabbitMQ on 
> each of my 2 servers that are separated by a WAN. One server would be 
> active, the other "inactive", but the inactive would actually have the 
> queue from the active replicated real-time. This way, if the active server 
> goes down, the inactive server kicks in, and continues where the active 
> left off.
>
> It seemed like the clustering option does exactly this, but as I said 
> previously, I am over a WAN, and a WAN configuration is not recommended.
>
> My question is how would I implement the previous logic via shovels or 
> federations ? I can't seem to get my head around this looking at the 
> documentation.
>
> Thank you
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/17dfcdc4/attachment.htm>

From michael.laing at nytimes.com  Fri Jul 12 03:14:02 2013
From: michael.laing at nytimes.com (Laing, Michael)
Date: Thu, 11 Jul 2013 22:14:02 -0400
Subject: [rabbitmq-discuss] Queue Replication over WAN
In-Reply-To: <470d463c-1e90-4188-a1e6-e85945f2331c@googlegroups.com>
References: <fa1dc5ed-cf93-4308-b5a1-0650d3b4a6a8@googlegroups.com>
	<470d463c-1e90-4188-a1e6-e85945f2331c@googlegroups.com>
Message-ID: <CAKgmDnE4o815D=sG8Z7wtQjiwGiDi7M9f61Ho+aVR_0+RaAs9g@mail.gmail.com>

Hi Guillaume,

Wiser heads will no doubt correct me, but:

1. Durable queues != durable messages: for your messages to (possibly)
still be there after a crash you must indicate that they are persistent
(delivery_mode=2).

2. You can cross-link your exchanges/queues using shovels such that
messages appear in both servers in a symmetric manner. I have personally
found this easier to: understand, configure, implement, and operate than
federation, but don't let me discourage you from trying federation as well!

3. We do health checks and automated failover using AWS Route 53: a smart
DNS service - works fine, so you are good there.

4. Bonus: we actually exchange messages twice between servers (actually
clusters), once before they are 'processed' and once after they are
'processed'. We do this because our own processing steps are the least
reliable and most time consuming portion of each message pipeline, hence
failures tend to occur there. This results in duplicate messages after
processing (actually triplicate in our case). We have a 'resolver' layer
that de-duplicates and continuously reports on paths and latencies, as well
as the successful processing of each message.

Michael Laing
NYTimes


On Thu, Jul 11, 2013 at 9:19 PM, Guillaume Ouellet <gui.ouellet at gmail.com>wrote:

> Ok, I think I have found a way to solve this issue.
>
> My queues will be durable, so if the server crashes, the queues will be
> reloaded on boot up. The servers RAID configuration will make sure we don't
> loose any items from our queue.
>
> The producer client code will implement  a logic where if the primary
> hostname can't be reached, we will send the items to the secondary
> hostname. The consumers will listen to both hostname.
>
> 2 questions:
>
> 1. Is this approach flawed ?
> 2. I am using c# client, and I can't find in the doc any scheme for
> alternate nodes in case the primare fails? Is there any implementation
> similar to this, or I'll have to do my own ?
>
> Thanks
>
>
> On Wednesday, 10 July 2013 15:27:43 UTC-4, Guillaume Ouellet wrote:
>>
>> Hi all,
>>
>> I am trying to use RabbitMq so that I have one instance of RabbitMQ on
>> each of my 2 servers that are separated by a WAN. One server would be
>> active, the other "inactive", but the inactive would actually have the
>> queue from the active replicated real-time. This way, if the active server
>> goes down, the inactive server kicks in, and continues where the active
>> left off.
>>
>> It seemed like the clustering option does exactly this, but as I said
>> previously, I am over a WAN, and a WAN configuration is not recommended.
>>
>> My question is how would I implement the previous logic via shovels or
>> federations ? I can't seem to get my head around this looking at the
>> documentation.
>>
>> Thank you
>>
>>
>>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/b668effb/attachment.htm>

From liangrubo at bytedance.com  Fri Jul 12 08:19:47 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Fri, 12 Jul 2013 15:19:47 +0800
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
Message-ID: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>

Hi,

I have a rabbit cluster with 3 servers. I got error message like following
when trying to connect to it (the cluster has worked well for 2 days):

Socket Error on fd 3: 104

Details:

The cluster has 3 servers: A, B, C. Clients connect to server A. I run
'rabbitmqctl
stop_app; rabbitmqctl reset; rabbitmqctl start_app' on Server A to bring
the service back. Then I try to connect to server B but get the same error.

I can telnet rabbit port on server B.

~$ rabbitmqctl list_queues
Listing queues ...
ha.snssdk.log   0
ha.snssdk.log.dispatch  0
ha.snssdk.log.output    0
...done.

'rabbitmqctl report' output:

https://gist.github.com/liangrubo/5982515

pika stacktrace:
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
line 61, in __init__
    super(BaseConnection, self).__init__(parameters, on_open_callback)
  File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
513, in __init__
    self._connect()
  File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
804, in _connect
    self._adapter_connect()
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
line 146, in _adapter_connect
    self.process_data_events()
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
line 88, in process_data_events
    if self._handle_read():
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
line 184, in _handle_read
    super(BlockingConnection, self)._handle_read()
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
line 300, in _handle_read
    return self._handle_error(error)
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
line 264, in _handle_error
    self._handle_disconnect()
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
line 181, in _handle_disconnect
    self._on_connection_closed(None, True)
  File
"/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
line 235, in _on_connection_closed
    raise exceptions.AMQPConnectionError(*self.closing)
pika.exceptions.AMQPConnectionError: (0, '')

Any help is appreciated.

Thanks.
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/d5a20e90/attachment.htm>

From obecker at tantalus.com  Thu Jul 11 23:22:42 2013
From: obecker at tantalus.com (obecker)
Date: Thu, 11 Jul 2013 15:22:42 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c attempting to get routingkey when
	using amqp_basic_get
Message-ID: <1373581362362-28021.post@n5.nabble.com>

I am trying to get the routing key when using amqp_basic_get.

It appears I am only getting 2 types of frames

  AMQP_FRAME_HEADER
  AMQP_FRAME_BODY

I don't seem to get AMQP_BASIC_DELIVER_METHOD which contains the routing key

Is this only supported for amqp_basic_consume?

Regards



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-attempting-to-get-routingkey-when-using-amqp-basic-get-tp28021.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From samuel281 at gmail.com  Fri Jul 12 03:16:02 2013
From: samuel281 at gmail.com (sungwoo park)
Date: Thu, 11 Jul 2013 19:16:02 -0700 (PDT)
Subject: [rabbitmq-discuss] Changing Durability of the queue.
Message-ID: <2f14b26b-e35c-425d-97c4-22f848fadc45@googlegroups.com>

Hi.

I have a queue which is created via the management plugin.
I've missed to set the durability to durable.

Is there a way to change a queue's durability on runtime?

thanks..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/ae980ff0/attachment.htm>

From dilip.aim11 at gmail.com  Fri Jul 12 08:34:16 2013
From: dilip.aim11 at gmail.com (Dilip Sharma)
Date: Fri, 12 Jul 2013 07:34:16 +0000 (UTC)
Subject: [rabbitmq-discuss] Not able to enable Plugin Configuration
Message-ID: <loom.20130712T093027-604@post.gmane.org>

Hi ,

I installed 
the RabbitMQ in Window Server

But after installing 
I not able to enable any plugins 
i m using this command -
rabbitmq-plugins.bat enable rabbitmq_management
but i am getting message 
Plugin Configuration unchanged .

and my service also is not showing in services.msc 
Help me on this .
Thanks


From watson.timothy at gmail.com  Fri Jul 12 08:44:17 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Fri, 12 Jul 2013 08:44:17 +0100
Subject: [rabbitmq-discuss] rabbitmq-c attempting to get routingkey when
	using amqp_basic_get
In-Reply-To: <1373581362362-28021.post@n5.nabble.com>
References: <1373581362362-28021.post@n5.nabble.com>
Message-ID: <CFA806D2-DA88-435E-8F17-80F0A2AA5B2E@rabbitmq.com>

On 11 Jul 2013, at 23:22, obecker <obecker at tantalus.com> wrote:
> 
> I don't seem to get AMQP_BASIC_DELIVER_METHOD which contains the routing key
> 
> Is this only supported for amqp_basic_consume?

Correct. The response to a basic.get would be get-ok (or get-empty).

Cheers,
Tim

From watson.timothy at gmail.com  Fri Jul 12 08:46:03 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Fri, 12 Jul 2013 08:46:03 +0100
Subject: [rabbitmq-discuss] Changing Durability of the queue.
In-Reply-To: <2f14b26b-e35c-425d-97c4-22f848fadc45@googlegroups.com>
References: <2f14b26b-e35c-425d-97c4-22f848fadc45@googlegroups.com>
Message-ID: <B8957B2D-25B1-4DCD-B108-6AA626D4F7AF@rabbitmq.com>

On 12 Jul 2013, at 03:16, sungwoo park <samuel281 at gmail.com> wrote:

> Is there a way to change a queue's durability on runtime?
> 

No. Durability has to be selected at declaration time and cannot change once an object has been created. You'll have to delete and re-declare the queue.

Tim

From watson.timothy at gmail.com  Fri Jul 12 08:50:28 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Fri, 12 Jul 2013 08:50:28 +0100
Subject: [rabbitmq-discuss] Not able to enable Plugin Configuration
In-Reply-To: <loom.20130712T093027-604@post.gmane.org>
References: <loom.20130712T093027-604@post.gmane.org>
Message-ID: <60EF60CD-DD45-4C5F-A7BA-BE41E0A95214@rabbitmq.com>

On 12 Jul 2013, at 08:34, Dilip Sharma <dilip.aim11 at gmail.com> wrote:

> Hi ,
> 
> I installed 
> the RabbitMQ in Window Server

Which windows version are we talking about?

> 
> but i am getting message 
> Plugin Configuration unchanged .
> 

Are you sure that you've not already got that plugin enabled?

> and my service also is not showing in services.msc 

That's an entirely different problem. How did you install rabbit and which version (of rabbit) are you using?

Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/899a4b70/attachment.htm>

From matthias at rabbitmq.com  Fri Jul 12 09:12:56 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 12 Jul 2013 09:12:56 +0100
Subject: [rabbitmq-discuss] rabbitmq-c attempting to get routingkey when
 using amqp_basic_get
In-Reply-To: <CFA806D2-DA88-435E-8F17-80F0A2AA5B2E@rabbitmq.com>
References: <1373581362362-28021.post@n5.nabble.com>
	<CFA806D2-DA88-435E-8F17-80F0A2AA5B2E@rabbitmq.com>
Message-ID: <51DFBA88.3090204@rabbitmq.com>

On 12/07/13 08:44, Tim Watson wrote:
> On 11 Jul 2013, at 23:22, obecker <obecker at tantalus.com> wrote:
>>
>> I don't seem to get AMQP_BASIC_DELIVER_METHOD which contains the routing key
>>
>> Is this only supported for amqp_basic_consume?
>
> Correct. The response to a basic.get would be get-ok (or get-empty).

...which *does* contain the routing key, just like basic.deliver.

Matthias.

From brett.r.cameron at gmail.com  Fri Jul 12 09:16:14 2013
From: brett.r.cameron at gmail.com (Brett Cameron)
Date: Fri, 12 Jul 2013 20:16:14 +1200
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
Message-ID: <CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>

Robert,

For what it is worth "Socket Error on fd 3: 104" equates to "Connection
reset by peer". Chances are there will be something in RabbitMQ's log files
that will provide more information about what is going on - could be a
timeout or something like that.

Brett


On Fri, Jul 12, 2013 at 7:19 PM, Rubo Liang <liangrubo at bytedance.com> wrote:

> Hi,
>
> I have a rabbit cluster with 3 servers. I got error message like following
> when trying to connect to it (the cluster has worked well for 2 days):
>
> Socket Error on fd 3: 104
>
> Details:
>
> The cluster has 3 servers: A, B, C. Clients connect to server A. I run 'rabbitmqctl
> stop_app; rabbitmqctl reset; rabbitmqctl start_app' on Server A to bring
> the service back. Then I try to connect to server B but get the same error.
>
> I can telnet rabbit port on server B.
>
> ~$ rabbitmqctl list_queues
> Listing queues ...
> ha.snssdk.log   0
> ha.snssdk.log.dispatch  0
> ha.snssdk.log.output    0
> ...done.
>
> 'rabbitmqctl report' output:
>
> https://gist.github.com/liangrubo/5982515
>
> pika stacktrace:
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
> line 61, in __init__
>     super(BaseConnection, self).__init__(parameters, on_open_callback)
>   File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
> 513, in __init__
>     self._connect()
>   File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
> 804, in _connect
>     self._adapter_connect()
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
> line 146, in _adapter_connect
>     self.process_data_events()
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
> line 88, in process_data_events
>     if self._handle_read():
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
> line 184, in _handle_read
>     super(BlockingConnection, self)._handle_read()
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
> line 300, in _handle_read
>     return self._handle_error(error)
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
> line 264, in _handle_error
>     self._handle_disconnect()
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
> line 181, in _handle_disconnect
>     self._on_connection_closed(None, True)
>   File
> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
> line 235, in _on_connection_closed
>     raise exceptions.AMQPConnectionError(*self.closing)
> pika.exceptions.AMQPConnectionError: (0, '')
>
> Any help is appreciated.
>
> Thanks.
> Robert
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/8b3b1250/attachment.htm>

From dilip.aim11 at gmail.com  Fri Jul 12 08:46:38 2013
From: dilip.aim11 at gmail.com (dilip.aim11)
Date: Fri, 12 Jul 2013 00:46:38 -0700 (PDT)
Subject: [rabbitmq-discuss] not able to enable any plugin
Message-ID: <1373615198380-28027.post@n5.nabble.com>

Hi ,

I installed 
the RabbitMQ in Window Server

But after installing 
I not able to enable any plugins 
i m using this command -
rabbitmq-plugins.bat enable rabbitmq_management
but i am getting message 
Plugin Configuration unchanged .

and my service also is not showing in services.msc 
But another machine same step is working fine .
Help me on this .
Thanks




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/not-able-to-enable-any-plugin-tp28027.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From dilip.aim11 at gmail.com  Fri Jul 12 09:15:38 2013
From: dilip.aim11 at gmail.com (dilip.aim11)
Date: Fri, 12 Jul 2013 01:15:38 -0700 (PDT)
Subject: [rabbitmq-discuss] Not able to enable Plugin Configuration
In-Reply-To: <60EF60CD-DD45-4C5F-A7BA-BE41E0A95214@rabbitmq.com>
References: <loom.20130712T093027-604@post.gmane.org>
	<60EF60CD-DD45-4C5F-A7BA-BE41E0A95214@rabbitmq.com>
Message-ID: <1373616938366-28032.post@n5.nabble.com>

Hi 

window server 2008

I installed -
Erlang 5.10.2
RabbitMQ sql server 3.1.3

I didn't get any error
But i not able to see service in service.msc

http://www.codeproject.com/Articles/309786/Rabbit-Mq-Shovel-Example
<http://www.codeproject.com/Articles/309786/Rabbit-Mq-Shovel-Example>  

I went through this artical

And i am already using RabbitMQ in my machine , and its working fine .







--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Not-able-to-enable-Plugin-Configuration-tp28026p28032.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Fri Jul 12 10:05:50 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 12 Jul 2013 10:05:50 +0100
Subject: [rabbitmq-discuss] not able to enable any plugin
In-Reply-To: <1373615198380-28027.post@n5.nabble.com>
References: <1373615198380-28027.post@n5.nabble.com>
Message-ID: <51DFC6EE.4050409@rabbitmq.com>

On 12/07/13 08:46, dilip.aim11 wrote:

> rabbitmq-plugins.bat enable rabbitmq_management
> but i am getting message 
> Plugin Configuration unchanged .

That means the plugin has already been enabled. Confirm by invoking
rabbitmq-plugins.bat with the "list" parameter.

> and my service also is not showing in services.msc 
That means the service is not installed properly.

Make sure you have followed the instructions in the installation
documentation: http://www.rabbitmq.com/install-windows.html

Check whether any of the topics in the troubleshooting guide apply to
your case: http://www.rabbitmq.com/troubleshooting.html

Check for errors in the broker logfiles, the console log or the slogan
from the erl_crash.dump (if one was generated). If you are still stuck
then please send back any error messages you find.



-Emile






From liangrubo at bytedance.com  Fri Jul 12 10:07:13 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Fri, 12 Jul 2013 17:07:13 +0800
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
Message-ID: <CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>

Hi Brett,

message from rabbit log file:
=INFO REPORT==== 12-Jul-2013::17:00:34 ===
accepting AMQP connection <0.4818.7> (10.4.16.221:61833 -> 10.4.16.221:5672)

=WARNING REPORT==== 12-Jul-2013::17:00:34 ===
closing AMQP connection <0.4818.7> (10.4.16.221:61833 -> 10.4.16.221:5672):
connection_closed_abruptly

It seems to be a socket problem, but I can immediately connect to the
server with telnet.

Thanks.

On Fri, Jul 12, 2013 at 4:16 PM, Brett Cameron <brett.r.cameron at gmail.com>wrote:

> Robert,
>
> For what it is worth "Socket Error on fd 3: 104" equates to "Connection
> reset by peer". Chances are there will be something in RabbitMQ's log files
> that will provide more information about what is going on - could be a
> timeout or something like that.
>
> Brett
>
>
> On Fri, Jul 12, 2013 at 7:19 PM, Rubo Liang <liangrubo at bytedance.com>wrote:
>
>> Hi,
>>
>> I have a rabbit cluster with 3 servers. I got error message like
>> following when trying to connect to it (the cluster has worked well for 2
>> days):
>>
>> Socket Error on fd 3: 104
>>
>> Details:
>>
>> The cluster has 3 servers: A, B, C. Clients connect to server A. I run 'rabbitmqctl
>> stop_app; rabbitmqctl reset; rabbitmqctl start_app' on Server A to bring
>> the service back. Then I try to connect to server B but get the same error.
>>
>> I can telnet rabbit port on server B.
>>
>> ~$ rabbitmqctl list_queues
>> Listing queues ...
>> ha.snssdk.log   0
>> ha.snssdk.log.dispatch  0
>> ha.snssdk.log.output    0
>> ...done.
>>
>> 'rabbitmqctl report' output:
>>
>> https://gist.github.com/liangrubo/5982515
>>
>> pika stacktrace:
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
>> line 61, in __init__
>>     super(BaseConnection, self).__init__(parameters, on_open_callback)
>>   File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
>> 513, in __init__
>>     self._connect()
>>   File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
>> 804, in _connect
>>     self._adapter_connect()
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>> line 146, in _adapter_connect
>>     self.process_data_events()
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>> line 88, in process_data_events
>>     if self._handle_read():
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>> line 184, in _handle_read
>>     super(BlockingConnection, self)._handle_read()
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
>> line 300, in _handle_read
>>     return self._handle_error(error)
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
>> line 264, in _handle_error
>>     self._handle_disconnect()
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>> line 181, in _handle_disconnect
>>     self._on_connection_closed(None, True)
>>   File
>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>> line 235, in _on_connection_closed
>>     raise exceptions.AMQPConnectionError(*self.closing)
>> pika.exceptions.AMQPConnectionError: (0, '')
>>
>> Any help is appreciated.
>>
>> Thanks.
>> Robert
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/30a00d60/attachment.htm>

From ceri at lshift.net  Fri Jul 12 10:12:21 2013
From: ceri at lshift.net (Ceri Storey)
Date: Fri, 12 Jul 2013 10:12:21 +0100
Subject: [rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing
 in the queues
In-Reply-To: <51DF1EEA.3040306@rabbitmq.com>
References: <CABZkbxiMPGZqx5Db5p2T_g0-wa2R64EDxiD0kqy4-jX-DabB1w@mail.gmail.com>
	<51DF1EEA.3040306@rabbitmq.com>
Message-ID: <51DFC875.40403@lshift.net>

(11/07/13 22:08), Matthias Radestock wrote:
> Kevin,
>
> On 11/07/13 17:38, Kevin Goess wrote:
>> Circling back after an earlier question about this problem. We've
>> upgraded to 3.1.3-1.  We've moved the mnesia files to a dedicated 10k
>> sata drive via RABBITMQ_MNESIA_BASE, a new drive that nothing else is
>> using, on a xen virtual machine that is only running rabbitmq.  We
>> generally deal with about 20 messages per second.
>>
>> But we're seeing pretty heavy disk activity, with iowait 30-40%, and
>> iostat numbers like this:
>>
>> Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s
>> avgrq-sz avgqu-sz   await  svctm  %util
>> xvdbp1            0.00    60.00    0.00  143.40     0.00  1452.80
>>   10.13     0.88    6.14   4.22  60.48
>>
>> Is this expected?  That seems excessive, and I worry that the high
>> iowait could cause us problems as we grow, so I was hoping to get some
>> pointers to things to look at that to improve that.
>
> My suspicious is that somehow your usage pattern results in a lot of
> queue/exchange/binding creation/deletion, which, if the entities
> involved are durable, require disk writes and fsyncs.
>
> To test the validity of that theory, please try to find out what files
> are seeing activity, and report back.

FWIW, that can be done with:

inotifywait -rme modify,move,delete,create /var/lib/rabbitmq

(If your rabbitmq directory is elswhere, of course modify to taste). You
might well need to install the inotify-tools package for your distribution.

HTH,
>
>
> Regards,
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss


From brett.r.cameron at gmail.com  Fri Jul 12 10:22:21 2013
From: brett.r.cameron at gmail.com (Brett Cameron)
Date: Fri, 12 Jul 2013 21:22:21 +1200
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
Message-ID: <CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>

Robert,

Curious. The connection_closed_abruptly log messages typically indicate
that the client has done something strange; they are just (relatively
innocuous) warnings from RabbitMQ's perspective. Can you connect from
another server?

Brett


On Fri, Jul 12, 2013 at 9:07 PM, Rubo Liang <liangrubo at bytedance.com> wrote:

> Hi Brett,
>
> message from rabbit log file:
> =INFO REPORT==== 12-Jul-2013::17:00:34 ===
> accepting AMQP connection <0.4818.7> (10.4.16.221:61833 ->
> 10.4.16.221:5672)
>
> =WARNING REPORT==== 12-Jul-2013::17:00:34 ===
> closing AMQP connection <0.4818.7> (10.4.16.221:61833 -> 10.4.16.221:5672
> ):
> connection_closed_abruptly
>
> It seems to be a socket problem, but I can immediately connect to the
> server with telnet.
>
> Thanks.
>
> On Fri, Jul 12, 2013 at 4:16 PM, Brett Cameron <brett.r.cameron at gmail.com>wrote:
>
>> Robert,
>>
>> For what it is worth "Socket Error on fd 3: 104" equates to "Connection
>> reset by peer". Chances are there will be something in RabbitMQ's log files
>> that will provide more information about what is going on - could be a
>> timeout or something like that.
>>
>> Brett
>>
>>
>> On Fri, Jul 12, 2013 at 7:19 PM, Rubo Liang <liangrubo at bytedance.com>wrote:
>>
>>> Hi,
>>>
>>> I have a rabbit cluster with 3 servers. I got error message like
>>> following when trying to connect to it (the cluster has worked well for 2
>>> days):
>>>
>>> Socket Error on fd 3: 104
>>>
>>> Details:
>>>
>>> The cluster has 3 servers: A, B, C. Clients connect to server A. I run 'rabbitmqctl
>>> stop_app; rabbitmqctl reset; rabbitmqctl start_app' on Server A to bring
>>> the service back. Then I try to connect to server B but get the same error.
>>>
>>> I can telnet rabbit port on server B.
>>>
>>> ~$ rabbitmqctl list_queues
>>> Listing queues ...
>>> ha.snssdk.log   0
>>> ha.snssdk.log.dispatch  0
>>> ha.snssdk.log.output    0
>>> ...done.
>>>
>>> 'rabbitmqctl report' output:
>>>
>>> https://gist.github.com/liangrubo/5982515
>>>
>>> pika stacktrace:
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
>>> line 61, in __init__
>>>     super(BaseConnection, self).__init__(parameters, on_open_callback)
>>>   File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
>>> 513, in __init__
>>>     self._connect()
>>>   File "/usr/local/lib/python2.7/dist-packages/pika/connection.py", line
>>> 804, in _connect
>>>     self._adapter_connect()
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>>> line 146, in _adapter_connect
>>>     self.process_data_events()
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>>> line 88, in process_data_events
>>>     if self._handle_read():
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>>> line 184, in _handle_read
>>>     super(BlockingConnection, self)._handle_read()
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
>>> line 300, in _handle_read
>>>     return self._handle_error(error)
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/base_connection.py",
>>> line 264, in _handle_error
>>>     self._handle_disconnect()
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>>> line 181, in _handle_disconnect
>>>     self._on_connection_closed(None, True)
>>>   File
>>> "/usr/local/lib/python2.7/dist-packages/pika/adapters/blocking_connection.py",
>>> line 235, in _on_connection_closed
>>>     raise exceptions.AMQPConnectionError(*self.closing)
>>> pika.exceptions.AMQPConnectionError: (0, '')
>>>
>>> Any help is appreciated.
>>>
>>> Thanks.
>>> Robert
>>>
>>>
>>> _______________________________________________
>>> rabbitmq-discuss mailing list
>>> rabbitmq-discuss at lists.rabbitmq.com
>>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/27f22811/attachment.htm>

From dilip.aim11 at gmail.com  Fri Jul 12 10:49:41 2013
From: dilip.aim11 at gmail.com (dilip.aim11)
Date: Fri, 12 Jul 2013 02:49:41 -0700 (PDT)
Subject: [rabbitmq-discuss] not able to enable any plugin
In-Reply-To: <51DFC6EE.4050409@rabbitmq.com>
References: <1373615198380-28027.post@n5.nabble.com>
	<51DFC6EE.4050409@rabbitmq.com>
Message-ID: <1373622581681-28038.post@n5.nabble.com>


But i didn't get any issue while installing


From emile at rabbitmq.com  Fri Jul 12 11:02:57 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 12 Jul 2013 11:02:57 +0100
Subject: [rabbitmq-discuss] not able to enable any plugin
In-Reply-To: <1373622581681-28038.post@n5.nabble.com>
References: <1373615198380-28027.post@n5.nabble.com>
	<51DFC6EE.4050409@rabbitmq.com>
	<1373622581681-28038.post@n5.nabble.com>
Message-ID: <51DFD451.3040008@rabbitmq.com>

On 12/07/13 10:49, dilip.aim11 wrote:

> this command
> *alwys giving error handle is invalid .*


The most likely cause of this error is if you tried to remove the
RabbitMQ service using a different tool, such as SC. The best advice
then is to re-install the broker. First uninstall both RabbitMQ and
Erlang and make sure that no registry entries remain under
HKLM/SOFTWARE/Ericsson/Erlang/ErlSrv

Also see this thread: http://markmail.org/message/ans32vsylbqu4dco



-Emile






From mklishin at gopivotal.com  Fri Jul 12 11:07:26 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 12 Jul 2013 14:07:26 +0400
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
Message-ID: <8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>

Brett Cameron:

> The connection_closed_abruptly log messages typically indicate that the client has done something strange

Typically this indicates that the client has closed TCP connection without properly
closing AMQP 0.9.1 connection or TCP connection was terminated unexpectedly.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/111834e1/attachment.pgp>

From liangrubo at bytedance.com  Fri Jul 12 11:27:44 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Fri, 12 Jul 2013 18:27:44 +0800
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
	<8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
Message-ID: <CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>

>Typically this indicates that the client has closed TCP connection without
properly
>closing AMQP 0.9.1 connection or TCP connection was terminated
unexpectedly.

I guess this won't cause the problem I got, right?

I left the problem as it was for further investigation, is there any
suggestion on debugging this problem?

Thanks,
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/c450da7a/attachment.htm>

From tim at rabbitmq.com  Fri Jul 12 11:36:55 2013
From: tim at rabbitmq.com (Tim Watson)
Date: Fri, 12 Jul 2013 11:36:55 +0100
Subject: [rabbitmq-discuss] Not able to enable Plugin Configuration
In-Reply-To: <1373616938366-28032.post@n5.nabble.com>
References: <loom.20130712T093027-604@post.gmane.org>
	<60EF60CD-DD45-4C5F-A7BA-BE41E0A95214@rabbitmq.com>
	<1373616938366-28032.post@n5.nabble.com>
Message-ID: <F35A7804-48ED-452B-8ECB-6CEED7D7ABDA@rabbitmq.com>

Dilip,

On 12 Jul 2013, at 09:15, dilip.aim11 wrote:
> window server 2008
> 
> I installed -
> Erlang 5.10.2
> RabbitMQ sql server 3.1.3
> 

RabbitMQ sql server eh?

> I didn't get any error

HOW did you install it. Via the msi (executable installer) or the zip binary distribution or what?

> But i not able to see service in service.msc

Have you tried forcibly re-installing it using the script from https://www.rabbitmq.com/man/rabbitmq-service.man.html? Also, did you install with administrative permissions, since I suppose it's possible that during the installation something went wrong.

Tim

From dilip.aim11 at gmail.com  Fri Jul 12 11:38:58 2013
From: dilip.aim11 at gmail.com (dilip.aim11)
Date: Fri, 12 Jul 2013 03:38:58 -0700 (PDT)
Subject: [rabbitmq-discuss] not able to enable any plugin
In-Reply-To: <51DFD451.3040008@rabbitmq.com>
References: <1373615198380-28027.post@n5.nabble.com>
	<51DFC6EE.4050409@rabbitmq.com>
	<1373622581681-28038.post@n5.nabble.com>
	<51DFD451.3040008@rabbitmq.com>
Message-ID: <1373625538716-28043.post@n5.nabble.com>

Hi ,

Registry was the issue 

Thanks 
now working  



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/not-able-to-enable-any-plugin-tp28027p28043.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.laing at nytimes.com  Fri Jul 12 12:04:10 2013
From: michael.laing at nytimes.com (Laing, Michael)
Date: Fri, 12 Jul 2013 07:04:10 -0400
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
	<8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
	<CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
Message-ID: <CAKgmDnFfqxUVxVWgzKZk5BoMOXiqgZfsMjGzieD83Rufqi_nUA@mail.gmail.com>

Please provide more version details: rabbitmq, erlang, pika.

ml


On Fri, Jul 12, 2013 at 6:27 AM, Rubo Liang <liangrubo at bytedance.com> wrote:

> >Typically this indicates that the client has closed TCP connection
> without properly
> >closing AMQP 0.9.1 connection or TCP connection was terminated
> unexpectedly.
>
> I guess this won't cause the problem I got, right?
>
> I left the problem as it was for further investigation, is there any
> suggestion on debugging this problem?
>
> Thanks,
> Robert
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/c35d3268/attachment.htm>

From mklishin at gopivotal.com  Fri Jul 12 12:08:40 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 12 Jul 2013 15:08:40 +0400
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
	<8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
	<CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
Message-ID: <3949A6D5-5D11-485B-B916-57BD3ED3B180@gopivotal.com>

Rubo Liang:

> I guess this won't cause the problem I got, right?
> 
> I left the problem as it was for further investigation, is there any suggestion on debugging this problem?

correct, this likely is caused by your socket issue, not the other way around.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/06a494d3/attachment.pgp>

From haster2004 at yandex.ru  Fri Jul 12 12:35:39 2013
From: haster2004 at yandex.ru (Haster)
Date: Fri, 12 Jul 2013 04:35:39 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c error list
In-Reply-To: <CAAt2po+VBdHWPfL_0w0fV47jQNis-90VwsE8WfRQ+BWirM-X9A@mail.gmail.com>
References: <1373368666810-27924.post@n5.nabble.com>
	<CAAt2po+VBdHWPfL_0w0fV47jQNis-90VwsE8WfRQ+BWirM-X9A@mail.gmail.com>
Message-ID: <1373628939660-28046.post@n5.nabble.com>

Alan , thanks for reply



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-error-list-tp27924p28046.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From rpenha at crivo.com.br  Fri Jul 12 14:14:25 2013
From: rpenha at crivo.com.br (Rodolfo Penha)
Date: Fri, 12 Jul 2013 13:14:25 +0000 (UTC)
Subject: [rabbitmq-discuss]
	=?utf-8?q?=7CSpam=7C_Re=3A_Possible_memory_lea?=
	=?utf-8?q?k_in_the_management_plugin?=
References: <8a1af6ed-c599-42a3-85c3-c5dc22a99bd8@googlegroups.com>
	<51BEF562.1090104@rabbitmq.com>
	<CACCscvxaBN0MS9pvOWT-fNCgG3YYaj36DawTF74iMWG4cGQGkA@mail.gmail.com>
	<51BF2C0C.9030601@rabbitmq.com>
	<CACCscvyem7mFzNBHzqvWWGZgnJEUn3jg7ot9uWK5Q7A2-pS3nA@mail.gmail.com>
	<CACCscvw1HiPiqxUgjPyvXJR8t_WQc=HG-EhfKe8vJ8dEq0tdTQ@mail.gmail.com>
	<51C03535.8010604@rabbitmq.com>
	<CACCscvwBPwnAkj=Zphxnp2FwoSCOW_Z1b7zpqDXDUBTUg-5YVQ@mail.gmail.com>
	<51C19274.3060202@rabbitmq.com>
	<CACCscvzm+p=vR0=d3_yFzmbidb+SGnEws9zW5q1cmHGVZXe+eg@mail.gmail.com>
	<51C1C6E9.9000109@rabbitmq.com> <51C1CF76.20600@rabbitmq.com>
Message-ID: <loom.20130712T151201-471@post.gmane.org>




Simon MacMullen <simon at ...> writes:

> 
> Also, I have a patched version of the management plugin which fixes the 
> leak I found today:
> 
> http://www.rabbitmq.com/releases/plugins/v3.1.1/rabbitmq_management-3.1.1-
leakfix1.ez
> 
> (see http://www.rabbitmq.com/plugins.html#installing-plugins for where 
> to put it, it replaces rabbitmq_management-3.1.1.ez)
> 
> If you are able to test this version, that would also be great.

Hi Simon.

We have the same issue here and we will apply your patch and run some tests.

As soon as we have something we will reply here.

Thanks!


> 
> Cheers, Simon



From mklishin at gopivotal.com  Fri Jul 12 14:25:00 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 12 Jul 2013 17:25:00 +0400
Subject: [rabbitmq-discuss] Possible memory leak in the management plugin
In-Reply-To: <loom.20130712T151201-471@post.gmane.org>
References: <8a1af6ed-c599-42a3-85c3-c5dc22a99bd8@googlegroups.com>
	<51BEF562.1090104@rabbitmq.com>
	<CACCscvxaBN0MS9pvOWT-fNCgG3YYaj36DawTF74iMWG4cGQGkA@mail.gmail.com>
	<51BF2C0C.9030601@rabbitmq.com>
	<CACCscvyem7mFzNBHzqvWWGZgnJEUn3jg7ot9uWK5Q7A2-pS3nA@mail.gmail.com>
	<CACCscvw1HiPiqxUgjPyvXJR8t_WQc=HG-EhfKe8vJ8dEq0tdTQ@mail.gmail.com>
	<51C03535.8010604@rabbitmq.com>
	<CACCscvwBPwnAkj=Zphxnp2FwoSCOW_Z1b7zpqDXDUBTUg-5YVQ@mail.gmail.com>
	<51C19274.3060202@rabbitmq.com>
	<CACCscvzm+p=vR0=d3_yFzmbidb+SGnEws9zW5q1cmHGVZXe+eg@mail.gmail.com>
	<51C1C6E9.9000109@rabbitmq.com> <51C1CF76.20600@rabbitmq.com>
	<loom.20130712T151201-471@post.gmane.org>
Message-ID: <6C68DD9B-3656-4BAB-84FE-82FCCEB79C36@gopivotal.com>

Rodolfo Penha:

> We have the same issue here and we will apply your patch and run some tests.
> 
> As soon as we have something we will reply here.

Rodolfo,

Note that the issue is resolved in RabbitMQ 3.1.3. Consider upgrading instead of
applying the patch and running a custom build instead.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/b4957abb/attachment.pgp>

From jesper.louis.andersen at gmail.com  Fri Jul 12 15:01:51 2013
From: jesper.louis.andersen at gmail.com (Jesper Louis Andersen)
Date: Fri, 12 Jul 2013 16:01:51 +0200
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <66086506-DC45-484F-B109-8ABC87FD4A0F@gopivotal.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D30324.6020102@rabbitmq.com>
	<1373551552164-28007.post@n5.nabble.com>
	<66086506-DC45-484F-B109-8ABC87FD4A0F@gopivotal.com>
Message-ID: <CAGrdgiV1AwQvx9Y08rziYVO9Lt=ctKiOFM_V6xKmXrpSgxCnLA@mail.gmail.com>

On Thu, Jul 11, 2013 at 5:40 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> O(1) appends and other queue characteristics in CS literature do not take
> into account
> the fact that your consumers can fall well behind your producers and RAM
> is a limited resource.
> Both are purely operational issues.
>

In fact it kinda does take disk into account. O(1) just means a constant
disk overhead. It does not say that the overhead of pulling out the next
message from the queue may be 5 seconds. Just that it is constant and has
an upper bound of some unknown value. The fact that the average case is
sub-millisecond delivery is not really addressed by algorithmic complexity.

Most functional languages have queues which are *amortized* O(1) to boot.
That is, you do not have O(1) guarantee unless you amortize over several
operations.

I think the key problem here has more to do with queue theory and
backpressure than it has to do with raw throughput of the system.


-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/4775d07b/attachment.htm>

From mklishin at gopivotal.com  Fri Jul 12 16:10:28 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 12 Jul 2013 19:10:28 +0400
Subject: [rabbitmq-discuss] ANN Bunny 0.9.0 final is released
Message-ID: <431FC895-0C0B-467F-B2F9-F5E3C321E954@gopivotal.com>

Bunny 0.9.0 final is released [1] after about 8 months in the works.

This is a major step for the library. It is now feature complete, supports automatic network
failure recovery, has lots of convenience features, will use multiple cores on Ruby runtimes
with thread parallelism, has better performance and RAM footprint and (my favorite feature)
also has documentation guides [2].

Bunny 0.9 is not 100% backwards compatible but we've tried to make upgrading as smooth
as possible and many deprecated API elements are still in place. The most important
breaking change is dropped support for RabbitMQ 1.x releases. 2.0 and later versions
are all supported.

I highly encourage all Bunny users to upgrade to it. It is a much better RabbitMQ client
than earlier versions in every way. Everything we've learned maintaining and using other clients
(not just in Ruby) was funneled into this release. With 13 pre releases and 2 RCs, it should
be ready even for really demanding users.

Release notes:
http://blog.rubyrabbitmq.info/blog/2013/07/12/bunny-0-dot-9-0-final-is-released/

Detailed change log:
https://github.com/ruby-amqp/bunny/blob/master/ChangeLog.md

Please report issues on GitHub:
https://github.com/ruby-amqp/bunny/issues

I'd be happy to answer any questions you may have about upgrading on both ruby-amqp and rabbitmq-discuss mailing lists.

Here's to Bunny 1.0!

1. https://rubygems.org/gems/bunny
2. http://rubybunny.info
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/08152ab7/attachment.pgp>

From weojoew at gmail.com  Fri Jul 12 17:18:12 2013
From: weojoew at gmail.com (Joseph Weeks)
Date: Fri, 12 Jul 2013 12:18:12 -0400
Subject: [rabbitmq-discuss] Checking queue size in bytes
In-Reply-To: <51DD0F09.7000103@rabbitmq.com>
References: <CA+5po3e-vnbrRj2LYz+v8tnmv+1QpeAp=JxSRCXuVOjSNc7WdA@mail.gmail.com>
	<51DD0F09.7000103@rabbitmq.com>
Message-ID: <CA+5po3eoC8FKcSviAvSD4PjxQfB6J797uVVixm8+zzYGgTv7ng@mail.gmail.com>

Thank you, Matthias!

The "total payload size of messages in a queue" feature would perfectly
suit our needs.  I completely understand the low priority of this and the
other queue policies; our situation fortunately appears to be an
exceedingly unusual one across the community (and tantamount to broker
abuse).

By the way - the changes between 2.8.7 and the 3.x releases have been an
enormous help to us.  RabbitMQ has long been the most reliable part of our
architecture, and with every release we find it to be more reliable and
easier to configure and monitor.  On top of all that, the new features and
enhancements have frequently obviated the need for sizeable portions of our
applications.  Judging by the repository (particularly the bug25553 branch)
and other discussions on the mailing list, we can expect even more of that
in the future.

That's all to say - thanks guys.



On Wed, Jul 10, 2013 at 3:36 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Joe,
>
>
> On 08/07/13 15:28, Joseph Weeks wrote:
>
>> Is there a way to determine a queue's size in bytes?  I'm mostly
>> interested in size on disk, but the sum of memory and disk would be
>> sufficient if that happens to be more readily available.
>>
>
> In general that is impossible, since messages sent to multiple queues are
> only stored on disk once and their payloads are shared in memory.
>
> Then there's the added complication that actual memory use of a message
> is difficult to work out at best, and impossible if taking into account
> memory fragmentation and gc effects. on-disk size is quite hard to
> calculate too.
>
> Having said that, I suppose we could track the "total payload size of
> messages in a queue", which would probably suffice for your use case.
>
> I have just filed a feature request for that. It's not a trivial piece of
> work though, and we haven't had many requests for this functionality, so I
> wouldn't expect to see this in a release soon.
>
>
>  On a related note, would it be possible for some future version of
>> RabbitMQ to allow queue policies like "x-max-length" and "x-message-ttl"
>> in addition to the queue declaration arguments?
>>
>
> Yes. It's on our todo list, but not a priority.
>
> Regards,
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/dcfdf8bc/attachment.htm>

From obecker at tantalus.com  Fri Jul 12 17:23:40 2013
From: obecker at tantalus.com (obecker)
Date: Fri, 12 Jul 2013 09:23:40 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c attempting to get routingkey when
 using amqp_basic_get
In-Reply-To: <51DFBA88.3090204@rabbitmq.com>
References: <1373581362362-28021.post@n5.nabble.com>
	<CFA806D2-DA88-435E-8F17-80F0A2AA5B2E@rabbitmq.com>
	<51DFBA88.3090204@rabbitmq.com>
Message-ID: <1373646220134-28052.post@n5.nabble.com>

Thanks, that explainf why I couldn't find it.

So I should be able to get the routing key from the amqp_rpc_reply_t struct?

       ...
      amqp_rpc_reply_t reply =  amqp_basic_get(conn, channel,
amqp_cstring_bytes(queue[q]),1); 
      
      if(reply.reply.id == AMQP_BASIC_GET_OK_METHOD)
      {
         amqp_basic_deliver_t * d = (amqp_basic_deliver_t *)
reply.reply.decoded;
	 
	 printf("Message of type %s on queue %s retrieved Data.\n",(char *)
d->routing_key.bytes, queue[q]);

         ...  (seems to blow up on me... :-)



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-attempting-to-get-routingkey-when-using-amqp-basic-get-tp28021p28052.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From obecker at tantalus.com  Fri Jul 12 17:27:48 2013
From: obecker at tantalus.com (obecker)
Date: Fri, 12 Jul 2013 09:27:48 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c attempting to get routingkey when
 using amqp_basic_get
In-Reply-To: <1373646220134-28052.post@n5.nabble.com>
References: <1373581362362-28021.post@n5.nabble.com>
	<CFA806D2-DA88-435E-8F17-80F0A2AA5B2E@rabbitmq.com>
	<51DFBA88.3090204@rabbitmq.com>
	<1373646220134-28052.post@n5.nabble.com>
Message-ID: <1373646468157-28053.post@n5.nabble.com>

Never  mind, I got it now... :-)


      amqp_rpc_reply_t reply =  amqp_basic_get(conn, channel,
amqp_cstring_bytes(queue),1); 
      
      if(reply.reply.id == AMQP_BASIC_GET_OK_METHOD)
      {
         amqp_basic_get_ok_t * d = (amqp_basic_get_ok_t *)
reply.reply.decoded;
	 
	 printf("Message of type %s on queue %s retrieved Data.\n",(char *)
d->routing_key.bytes, queue);
	 printf("  Message: %s\n",  get_message(conn));

      }     

Thanks for the help.





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-attempting-to-get-routingkey-when-using-amqp-basic-get-tp28021p28053.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From RLauer at signatureinfo.com  Fri Jul 12 18:38:20 2013
From: RLauer at signatureinfo.com (Lauer, Robert (RIS-PHL))
Date: Fri, 12 Jul 2013 17:38:20 +0000
Subject: [rabbitmq-discuss] Messages being deleted?
Message-ID: <57F04AE823A3944EB9E297A91AA114D2098F811E@RISBCTMBXP002.risk.regn.net>

Having a strange issues with RabbitMQ (3.1.3) using the STOMP connector?not sure if this is expected behavior or a bug?

Client consumes 2 messages and does not acknowledge them..then consumes third message, acknowledges that message.  All messages are deleted from the queue.

Seems to me that only the last message should be deleted?  What am I missing?

Thanks

Rob Lauer




-----------------------------------------
The information contained in this e-mail message is intended only
for the personal and confidential use of the recipient(s) named
above. This message may be an attorney-client communication and/or
work product and as such is privileged and confidential. If the
reader of this message is not the intended recipient or an agent
responsible for delivering it to the intended recipient, you are
hereby notified that you have received this document in error and
that any review, dissemination, distribution, or copying of this
message is strictly prohibited. If you have received this
communication in error, please notify us immediately by e-mail, and
delete the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/1c768074/attachment.htm>

From matthias at rabbitmq.com  Fri Jul 12 18:40:31 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 12 Jul 2013 18:40:31 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <CAGrdgiV1AwQvx9Y08rziYVO9Lt=ctKiOFM_V6xKmXrpSgxCnLA@mail.gmail.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D30324.6020102@rabbitmq.com>
	<1373551552164-28007.post@n5.nabble.com>
	<66086506-DC45-484F-B109-8ABC87FD4A0F@gopivotal.com>
	<CAGrdgiV1AwQvx9Y08rziYVO9Lt=ctKiOFM_V6xKmXrpSgxCnLA@mail.gmail.com>
Message-ID: <51E03F8F.80101@rabbitmq.com>

On 12/07/13 15:01, Jesper Louis Andersen wrote:
> Most functional languages have queues which are *amortized* O(1) to
> boot. That is, you do not have O(1) guarantee unless you amortize over
> several operations.

Are you suggesting that publishing and consuming from a RabbitMQ queue 
are *not* amortized O(1) operations? AFAIK they are, but the constant 
factor changes dramatically depending on whether the entire queue is 
kept in RAM (only), partially paged to disk, or fully paged to disk.

Matthias.

From matthias at rabbitmq.com  Fri Jul 12 18:45:54 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 12 Jul 2013 18:45:54 +0100
Subject: [rabbitmq-discuss] Messages being deleted?
In-Reply-To: <57F04AE823A3944EB9E297A91AA114D2098F811E@RISBCTMBXP002.risk.regn.net>
References: <57F04AE823A3944EB9E297A91AA114D2098F811E@RISBCTMBXP002.risk.regn.net>
Message-ID: <51E040D2.3080301@rabbitmq.com>

On 12/07/13 18:38, Lauer, Robert (RIS-PHL) wrote:
> Having a strange issues with RabbitMQ (3.1.3) using the STOMP
> connector?not sure if this is expected behavior or a bug?
>
> Client consumes 2 messages and does not acknowledge them..then consumes
> third message, acknowledges that message.  All messages are deleted from
> the queue.
>
> Seems to me that only the last message should be deleted?  What am I
> missing?

See the semantics of the SUBSCRIBE ack header 
(http://stomp.github.io/stomp-specification-1.2.html#SUBSCRIBE_ack_Header), 
in particular the distinction between 'client' and 'client-individual'.

Matthias.

From jesper.louis.andersen at gmail.com  Fri Jul 12 18:52:23 2013
From: jesper.louis.andersen at gmail.com (Jesper Louis Andersen)
Date: Fri, 12 Jul 2013 19:52:23 +0200
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51E03F8F.80101@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<51D2DCF3.7030205@rabbitmq.com>
	<1372781855362-27747.post@n5.nabble.com>
	<51D30324.6020102@rabbitmq.com>
	<1373551552164-28007.post@n5.nabble.com>
	<66086506-DC45-484F-B109-8ABC87FD4A0F@gopivotal.com>
	<CAGrdgiV1AwQvx9Y08rziYVO9Lt=ctKiOFM_V6xKmXrpSgxCnLA@mail.gmail.com>
	<51E03F8F.80101@rabbitmq.com>
Message-ID: <CAGrdgiWD=X8=yNv5ewPSkehM_p0xcaZ_-M=Ws1OqHWgf9SKriA@mail.gmail.com>

On Fri, Jul 12, 2013 at 7:40 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 12/07/13 15:01, Jesper Louis Andersen wrote:
>
>> Most functional languages have queues which are *amortized* O(1) to
>> boot. That is, you do not have O(1) guarantee unless you amortize over
>> several operations.
>>
>
> Are you suggesting that publishing and consuming from a RabbitMQ queue are
> *not* amortized O(1) operations? AFAIK they are, but the constant factor
> changes dramatically depending on whether the entire queue is kept in RAM
> (only), partially paged to disk, or fully paged to disk.
>
>
No, on the contrary in fact. I would definitely expect RabbitMQ to have
amortized O(1) access to a queue. And indeed the dequeueing latency depends
on the factors you mention.


-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/5843beec/attachment.htm>

From rpenha at crivotransunion.com.br  Fri Jul 12 14:29:31 2013
From: rpenha at crivotransunion.com.br (Penha, Rodolfo V)
Date: Fri, 12 Jul 2013 13:29:31 +0000
Subject: [rabbitmq-discuss] Possible memory leak in the management plugin
In-Reply-To: <6C68DD9B-3656-4BAB-84FE-82FCCEB79C36@gopivotal.com>
References: <8a1af6ed-c599-42a3-85c3-c5dc22a99bd8@googlegroups.com>
	<51BEF562.1090104@rabbitmq.com>
	<CACCscvxaBN0MS9pvOWT-fNCgG3YYaj36DawTF74iMWG4cGQGkA@mail.gmail.com>
	<51BF2C0C.9030601@rabbitmq.com>
	<CACCscvyem7mFzNBHzqvWWGZgnJEUn3jg7ot9uWK5Q7A2-pS3nA@mail.gmail.com>
	<CACCscvw1HiPiqxUgjPyvXJR8t_WQc=HG-EhfKe8vJ8dEq0tdTQ@mail.gmail.com>
	<51C03535.8010604@rabbitmq.com>
	<CACCscvwBPwnAkj=Zphxnp2FwoSCOW_Z1b7zpqDXDUBTUg-5YVQ@mail.gmail.com>
	<51C19274.3060202@rabbitmq.com>
	<CACCscvzm+p=vR0=d3_yFzmbidb+SGnEws9zW5q1cmHGVZXe+eg@mail.gmail.com>
	<51C1C6E9.9000109@rabbitmq.com> <51C1CF76.20600@rabbitmq.com>
	<loom.20130712T151201-471@post.gmane.org>
	<6C68DD9B-3656-4BAB-84FE-82FCCEB79C36@gopivotal.com>
Message-ID: <81F22B3FFEED78498D93B96F6F724030191E5F3C@CHO3WUC9MBX11.corp.transunion.com>

Ok!

Upgrading to 3.1.3 now!

Thanks!

-----Original Message-----
From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Michael Klishin
Sent: sexta-feira, 12 de julho de 2013 10:25
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Possible memory leak in the management plugin

Rodolfo Penha:

> We have the same issue here and we will apply your patch and run some tests.
> 
> As soon as we have something we will reply here.

Rodolfo,

Note that the issue is resolved in RabbitMQ 3.1.3. Consider upgrading instead of applying the patch and running a custom build instead.
--
MK


From rodvela at gmail.com  Fri Jul 12 18:14:25 2013
From: rodvela at gmail.com (=?UTF-8?Q?Rodrigo_Vel=C3=A1squez?=)
Date: Fri, 12 Jul 2013 10:14:25 -0700 (PDT)
Subject: [rabbitmq-discuss] Reading the result queue
Message-ID: <23109b57-eb4b-44a5-beaa-ad15aaa1bac9@googlegroups.com>

Hello

I need to read the results queue, but have no idea how to do it. Is there a 
log file i can read?

I know it is json encoded as its shown in the attached image.

I am using Mailerq with RabbitMQ, and PHP programing.

Any help?

Thanks a lot
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/df5f03c7/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Captura de pantalla 2013-07-12 a la(s) 12.42.09.png
Type: image/png
Size: 26251 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/df5f03c7/attachment.png>

From mklishin at gopivotal.com  Fri Jul 12 19:39:57 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 12 Jul 2013 22:39:57 +0400
Subject: [rabbitmq-discuss] Reading the result queue
In-Reply-To: <23109b57-eb4b-44a5-beaa-ad15aaa1bac9@googlegroups.com>
References: <23109b57-eb4b-44a5-beaa-ad15aaa1bac9@googlegroups.com>
Message-ID: <469CF2BA-57EF-4061-907D-9DEC3D056207@gopivotal.com>

Rodrigo Vel?squez:

> I need to read the results queue, but have no idea how to do it. Is there a log file i can read?

You can use RabbitMQ management UI to see the queues, how many messages they have
and so on.

I'd also consult Mailerq documentation.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/e40c96b2/attachment.pgp>

From rodvela at gmail.com  Fri Jul 12 20:06:33 2013
From: rodvela at gmail.com (=?ISO-8859-1?Q?Rodrigo_Vel=E1squez?=)
Date: Fri, 12 Jul 2013 14:36:33 -0430
Subject: [rabbitmq-discuss] Reading the result queue
In-Reply-To: <469CF2BA-57EF-4061-907D-9DEC3D056207@gopivotal.com>
References: <23109b57-eb4b-44a5-beaa-ad15aaa1bac9@googlegroups.com>
	<469CF2BA-57EF-4061-907D-9DEC3D056207@gopivotal.com>
Message-ID: <CAJ-mx8HPXGg6Z9fPyDcXQJbvmF62Qvmi6LGdt70gzurN+RUmVw@mail.gmail.com>

I know, but i need to read them from a PHP process where i can retrieve
vital information of every email processed and save it on my db.

Is there a way to do that?

Thanks

 __________________________________



 *Rodrigo Vel?squez*
 Director General
 Wallace Solution C.A.
 http://www.ws.com.ve
 rodrigo at ws.com.ve
 Tel: (+58 212) 761-2708 / 762-8358
  <http://www.linkedin.com/company/wallace-solution>
<http://www.facebook.com/WallaceSolution>
 _____________________________________________________________


 Escanea esta imagen con tu celular para obtener mi ficha personal


On Fri, Jul 12, 2013 at 2:09 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rodrigo Vel?squez:
>
> > I need to read the results queue, but have no idea how to do it. Is
> there a log file i can read?
>
> You can use RabbitMQ management UI to see the queues, how many messages
> they have
> and so on.
>
> I'd also consult Mailerq documentation.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/3c6220de/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 502 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/3c6220de/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 624 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/3c6220de/attachment-0001.png>

From matthias at rabbitmq.com  Fri Jul 12 20:15:05 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 12 Jul 2013 20:15:05 +0100
Subject: [rabbitmq-discuss] Reading the result queue
In-Reply-To: <CAJ-mx8HPXGg6Z9fPyDcXQJbvmF62Qvmi6LGdt70gzurN+RUmVw@mail.gmail.com>
References: <23109b57-eb4b-44a5-beaa-ad15aaa1bac9@googlegroups.com>
	<469CF2BA-57EF-4061-907D-9DEC3D056207@gopivotal.com>
	<CAJ-mx8HPXGg6Z9fPyDcXQJbvmF62Qvmi6LGdt70gzurN+RUmVw@mail.gmail.com>
Message-ID: <51E055B9.6060507@rabbitmq.com>

On 12/07/13 20:06, Rodrigo Vel?squez wrote:
> I know, but i need to read them from a PHP process where i can retrieve
> vital information of every email processed and save it on my db.
>
> Is there a way to do that?

http://www.rabbitmq.com/devtools.html#php-dev


From guilherme.labigalini at gmail.com  Fri Jul 12 20:23:23 2013
From: guilherme.labigalini at gmail.com (Guilherme Labigalini)
Date: Fri, 12 Jul 2013 16:23:23 -0300
Subject: [rabbitmq-discuss] Possible memory leak in the management plugin
In-Reply-To: <81F22B3FFEED78498D93B96F6F724030191E5F3C@CHO3WUC9MBX11.corp.transunion.com>
References: <8a1af6ed-c599-42a3-85c3-c5dc22a99bd8@googlegroups.com>
	<51BEF562.1090104@rabbitmq.com>
	<CACCscvxaBN0MS9pvOWT-fNCgG3YYaj36DawTF74iMWG4cGQGkA@mail.gmail.com>
	<51BF2C0C.9030601@rabbitmq.com>
	<CACCscvyem7mFzNBHzqvWWGZgnJEUn3jg7ot9uWK5Q7A2-pS3nA@mail.gmail.com>
	<CACCscvw1HiPiqxUgjPyvXJR8t_WQc=HG-EhfKe8vJ8dEq0tdTQ@mail.gmail.com>
	<51C03535.8010604@rabbitmq.com>
	<CACCscvwBPwnAkj=Zphxnp2FwoSCOW_Z1b7zpqDXDUBTUg-5YVQ@mail.gmail.com>
	<51C19274.3060202@rabbitmq.com>
	<CACCscvzm+p=vR0=d3_yFzmbidb+SGnEws9zW5q1cmHGVZXe+eg@mail.gmail.com>
	<51C1C6E9.9000109@rabbitmq.com> <51C1CF76.20600@rabbitmq.com>
	<loom.20130712T151201-471@post.gmane.org>
	<6C68DD9B-3656-4BAB-84FE-82FCCEB79C36@gopivotal.com>
	<81F22B3FFEED78498D93B96F6F724030191E5F3C@CHO3WUC9MBX11.corp.transunion.com>
Message-ID: <CAFrXCmJ+4AdQXrb1jX3Y_P0UyrxRM_v8Q79nThFe3Yc5-ndwAg@mail.gmail.com>

Ol? Rodolfo,

Meu nome ? Guilherme e tamb?m trabalho com IT, estamos fazendo alguns
testes com o RabbitMQ para substituir o MSMQ.

Gostaria de saber se vcs tem usado o RabbitMQ em producao com sucesso?

Obrigado!


On Fri, Jul 12, 2013 at 10:29 AM, Penha, Rodolfo V <
rpenha at crivotransunion.com.br> wrote:

> Ok!
>
> Upgrading to 3.1.3 now!
>
> Thanks!
>
> -----Original Message-----
> From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:
> rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Michael Klishin
> Sent: sexta-feira, 12 de julho de 2013 10:25
> To: Discussions about RabbitMQ
> Subject: Re: [rabbitmq-discuss] Possible memory leak in the management
> plugin
>
> Rodolfo Penha:
>
> > We have the same issue here and we will apply your patch and run some
> tests.
> >
> > As soon as we have something we will reply here.
>
> Rodolfo,
>
> Note that the issue is resolved in RabbitMQ 3.1.3. Consider upgrading
> instead of applying the patch and running a custom build instead.
> --
> MK
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/e224050d/attachment.htm>

From alan.antonuk at gmail.com  Fri Jul 12 21:16:04 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Fri, 12 Jul 2013 13:16:04 -0700
Subject: [rabbitmq-discuss] RabbitMQ boot failures with SSL on homebrew Mac
	OSX
Message-ID: <CAAt2poJGbuDxbYyxa4J4rh_+M2u-wXD3Nog+KWTiT-Wu-YXxcQ@mail.gmail.com>

Forgive me if I'm barking up the wrong tree here, I figure this is a good
place to start tracking down this issue:

I'm trying to run RabbitMQ v3.1.3 on Erlang vR15B03-1 on Mac OSX 10.8.4,
both installed using Homebrew. (Though it appears as though RabbitMQ is
using its own private version of erlang).

It works great until I try and enable SSL, then I get boot failures (the
complete output of rabbitmq-server is below, the output of the last boot of
rabbitmq at localhost.log is below that).

My rabbitmq.config looks like:

533 aega at aimac:~ $ cat /usr/local/etc/rabbitmq/rabbitmq.config
[
{rabbit, [
        {tcp_listeners, [{5672}]},
        {ssl_listeners, [5671]},
        {ssl_options, [{cacertfile,"/Users/aega/d/amqp/testca/cacert.pem"},
                        {certfile,"/Users/aega/d/amqp/servercert/cert.pem"},
                        {keyfile,"/Users/aega/d/amqp/servercert/key.pem"},
                        {verify,verify_peer},
                        {fail_if_no_peer_cert,false}]}
    ]}
].

531 aega at aimac:~ $ /usr/local/sbin/rabbitmq-server

              RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
  ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
  ##  ##
  ##########  Logs: /usr/local/var/log/rabbitmq/rabbit at localhost.log
  ######  ##        /usr/local/var/log/rabbitmq/rabbit at localhost-sasl.log
  ##########
              Starting broker...

BOOT FAILED
===========

Error description:
   {error,{cannot_start_application,asn1,
                                    {"no such file or
directory","asn1.app"}}}

Log files (may contain more information):
   /usr/local/var/log/rabbitmq/rabbit at localhost.log
   /usr/local/var/log/rabbitmq/rabbit at localhost-sasl.log

Stack trace:
   [{app_utils,'-start_applications/1-fun-0-',2,
               [{file,"src/app_utils.erl"},{line,46}]},
    {lists,foldl,3,[{file,"lists.erl"},{line,1248}]},

{app_utils,manage_applications,6,[{file,"src/app_utils.erl"},{line,128}]},
    {rabbit_networking,ensure_ssl,0,
                       [{file,"src/rabbit_networking.erl"},{line,148}]},
    {rabbit_networking,'-boot_ssl/0-lc$^0/1-0-',1,
                       [{file,"src/rabbit_networking.erl"},{line,137}]},
    {rabbit_networking,boot_ssl,0,
                       [{file,"src/rabbit_networking.erl"},{line,137}]},

{rabbit_networking,boot,0,[{file,"src/rabbit_networking.erl"},{line,125}]},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,
            [{file,"src/rabbit.erl"},{line,488}]}]



BOOT FAILED
===========

Error description:
   {could_not_start,rabbit,
       {bad_return,
           {{rabbit,start,[normal,[]]},
            {'EXIT',
                {rabbit,failure_during_boot,
                    {error,
                        {cannot_start_application,asn1,
                            {"no such file or directory","asn1.app"}}}}}}}}

Log files (may contain more information):
   /usr/local/var/log/rabbitmq/rabbit at localhost.log
   /usr/local/var/log/rabbitmq/rabbit at localhost-sasl.log

{"init terminating in
do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{error,{cannot_start_application,asn1,{"no
such file or directory","asn1.app"}}}}}}}}}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()

---------------------------------------------------------------------------------------

Last few lines of rabbitmq at localhost.log:
=INFO REPORT==== 12-Jul-2013::13:03:01 ===
Starting RabbitMQ 3.1.3 on Erlang R16B
Copyright (C) 2007-2013 VMware, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 12-Jul-2013::13:03:01 ===
node           : rabbit at localhost
home dir       : /Users/aega
cookie hash    : z2f61w1/EZjsR+NzlXG5Ew==
log            : /usr/local/var/log/rabbitmq/rabbit at localhost.log
sasl log       : /usr/local/var/log/rabbitmq/rabbit at localhost-sasl.log
database dir   : /usr/local/var/lib/rabbitmq/mnesia/rabbit at localhost

=INFO REPORT==== 12-Jul-2013::13:03:01 ===
Limiting to approx 156 file handles (138 sockets)

=INFO REPORT==== 12-Jul-2013::13:03:02 ===
Memory limit set to 564MB of 1410MB total.

=INFO REPORT==== 12-Jul-2013::13:03:02 ===
Disk free limit set to 1000MB

=INFO REPORT==== 12-Jul-2013::13:03:02 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 12-Jul-2013::13:03:02 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 12-Jul-2013::13:03:02 ===
started TCP Listener on 127.0.0.1:5672

=INFO REPORT==== 12-Jul-2013::13:03:02 ===
Error description:
   {error,{cannot_start_application,asn1,
                                    {"no such file or
directory","asn1.app"}}}

Log files (may contain more information):
   /usr/local/var/log/rabbitmq/rabbit at localhost.log
   /usr/local/var/log/rabbitmq/rabbit at localhost-sasl.log

Stack trace:
   [{app_utils,'-start_applications/1-fun-0-',2,
               [{file,"src/app_utils.erl"},{line,46}]},
    {lists,foldl,3,[{file,"lists.erl"},{line,1248}]},

{app_utils,manage_applications,6,[{file,"src/app_utils.erl"},{line,128}]},
    {rabbit_networking,ensure_ssl,0,
                       [{file,"src/rabbit_networking.erl"},{line,148}]},
    {rabbit_networking,'-boot_ssl/0-lc$^0/1-0-',1,
                       [{file,"src/rabbit_networking.erl"},{line,137}]},
    {rabbit_networking,boot_ssl,0,
                       [{file,"src/rabbit_networking.erl"},{line,137}]},

{rabbit_networking,boot,0,[{file,"src/rabbit_networking.erl"},{line,125}]},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,
            [{file,"src/rabbit.erl"},{line,488}]}]


=INFO REPORT==== 12-Jul-2013::13:03:03 ===
stopped TCP Listener on 127.0.0.1:5672

=INFO REPORT==== 12-Jul-2013::13:03:03 ===
Error description:
   {could_not_start,rabbit,
       {bad_return,
           {{rabbit,start,[normal,[]]},
            {'EXIT',
                {rabbit,failure_during_boot,
                    {error,
                        {cannot_start_application,asn1,
                            {"no such file or directory","asn1.app"}}}}}}}}

Log files (may contain more information):
   /usr/local/var/log/rabbitmq/rabbit at localhost.log
   /usr/local/var/log/rabbitmq/rabbit at localhost-sasl.log


=ERROR REPORT==== 12-Jul-2013::13:03:03 ===
** gen_event handler rabbit_error_logger crashed.
** Was installed in error_logger
** Last event was: {info_msg,<0.29.0>,
                    {<0.2.0>,
                     "Error description:~n   ~p~n~nLog files (may contain
more information):~n   ~s~n   ~s~n~n",
                     [{could_not_start,rabbit,
                       {bad_return,
                        {{rabbit,start,[normal,[]]},
                         {'EXIT',
                          {rabbit,failure_during_boot,
                           {error,
                            {cannot_start_application,asn1,
                             {"no such file or
directory","asn1.app"}}}}}}}},
                      "/usr/local/var/log/rabbitmq/rabbit at localhost.log",
                      "/usr/local/var/log/rabbitmq/rabbit at localhost-sasl.log
"]}}
** When handler state == {resource,<<"/">>,exchange,<<"amq.rabbitmq.log">>}
** Reason == {badarg,
                 [{ets,lookup,
                      [rabbit_exchange,
                       {resource,<<"/">>,exchange,<<"amq.rabbitmq.log">>}],
                      []},
                  {rabbit_misc,dirty_read,1,
                      [{file,"src/rabbit_misc.erl"},{line,345}]},
                  {rabbit_basic,publish,1,
                      [{file,"src/rabbit_basic.erl"},{line,100}]},
                  {rabbit_error_logger,publish1,4,
                      [{file,"src/rabbit_error_logger.erl"},{line,84}]},
                  {rabbit_error_logger,handle_event,2,
                      [{file,"src/rabbit_error_logger.erl"},{line,62}]},
                  {gen_event,server_update,4,
                      [{file,"gen_event.erl"},{line,504}]},
                  {gen_event,server_notify,4,
                      [{file,"gen_event.erl"},{line,486}]},
                  {gen_event,handle_msg,5,
                      [{file,"gen_event.erl"},{line,248}]}]}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/510b4dc6/attachment.htm>

From NuZajacPogodi at gmail.com  Fri Jul 12 21:37:07 2013
From: NuZajacPogodi at gmail.com (NuPogodi)
Date: Fri, 12 Jul 2013 13:37:07 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1372772184481-27737.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
Message-ID: <1373661427074-28065.post@n5.nabble.com>

Ok, so it should be taken the most pessimistic condition - the queue fully
paged on disk - the performance measured and now it can be stated that
Rabbit has O(1) queue processing complexity but with a very low message
processing rate. Even having a lot of RAM messages processing rate drops
drasticly after a small fraction of RAM is occupied by queues since paging
causes Rabbit to be disk io bound. 

That is great that you are treating it as feature to provide more consistent
queue throughput by optionaly preventing paging. The system will be much
easier to analyse and plan for a deployment. Having a given message size and
using limited-length queues it will be possible to utilize RAM resources to
higher extent with a constant and high message processing rate. 

It is espetially usefull in scenarios when message producer is driven by
events (sometimes storm of events) from external world and Rabbit is used as
a buffor for storing tasks for later processing by other less efficient
consumers. In that situation it is undesirable Rabbit to slow down producers
- producers would need to implement their own buffer because they cannot
stop incoming events - an addtional buffer to protect the other buffer does
not look elegant. 

Thanks,
Nu



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28065.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Sat Jul 13 00:01:36 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Sat, 13 Jul 2013 03:01:36 +0400
Subject: [rabbitmq-discuss] RabbitMQ boot failures with SSL on homebrew
	Mac OSX
In-Reply-To: <CAAt2poJGbuDxbYyxa4J4rh_+M2u-wXD3Nog+KWTiT-Wu-YXxcQ@mail.gmail.com>
References: <CAAt2poJGbuDxbYyxa4J4rh_+M2u-wXD3Nog+KWTiT-Wu-YXxcQ@mail.gmail.com>
Message-ID: <A08B2209-CF4F-48A7-B8E7-073E995C1C1C@gopivotal.com>

Alan Antonuk:

> BOOT FAILED
> ===========
> 
> Error description:
>    {error,{cannot_start_application,asn1,
>                                     {"no such file or directory","asn1.app"}}}

I believe I saw this error right after the Homebrew formula was switched to
use the standalone RabbitMQ package.

I had no time to work through the issue and I'm not really familiar with Erlang
runtime packaging specifics so just switched to a tarball-based installation.

So, I believe this is a standalone package issue. If you want to use Homebrew,
revert rabbit formula to e5ef90db4856d65a55135854aaba2293690ef06d
(the switch was in a0bbbb1c8fde32d3ec292d8f830664f49db124cb).
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130713/ebab7416/attachment.pgp>

From cheenu321 at gmail.com  Sat Jul 13 02:36:05 2013
From: cheenu321 at gmail.com (cheenu)
Date: Fri, 12 Jul 2013 18:36:05 -0700 (PDT)
Subject: [rabbitmq-discuss] reply-code=406,
 reply-text=PRECONDITION_FAILED - unknown delivery tag
In-Reply-To: <5023777D.9080007@rabbitmq.com>
References: <CA+5hJbhemPDt3XztORpxha08yhQd2tExQNXDFv3LfaUEkT2SAw@mail.gmail.com>
	<5023777D.9080007@rabbitmq.com>
Message-ID: <1373679365522-28067.post@n5.nabble.com>

> - ack'ing on a channel other than the one the messages was received on (*) 
> 
> (*) this is a common occurrence in applications with naive error 
> recovery logic that re-establishes connections&channels transparently 
> behind the scenes. 

What is a right recovery logic ?

Thx.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/reply-code-406-reply-text-PRECONDITION-FAILED-unknown-delivery-tag-tp21310p28067.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From lars.ellebo at schneider-electric.com  Sat Jul 13 03:03:55 2013
From: lars.ellebo at schneider-electric.com (lars.ellebo at schneider-electric.com)
Date: Sat, 13 Jul 2013 04:03:55 +0200
Subject: [rabbitmq-discuss] AUTO: Lars Ellebo is out of the office.
	(returning 05-08-2013)
Message-ID: <OF89C0B9C0.D34981FA-ONC1257BA7.000B5886-C1257BA7.000B5886@schneider-electric.com>



I am out of the office until 05-08-2013.




Note: This is an automated response to your message  "Re:
[rabbitmq-discuss] RabbitMQ boot failures with SSL on homebrew	Mac OSX"
sent on 13/07/2013 01:01:36.

This is the only notification you will receive while this person is away.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130713/5a199776/attachment.htm>

From liangrubo at bytedance.com  Sun Jul 14 11:17:20 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Sun, 14 Jul 2013 18:17:20 +0800
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <3949A6D5-5D11-485B-B916-57BD3ED3B180@gopivotal.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
	<8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
	<CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
	<3949A6D5-5D11-485B-B916-57BD3ED3B180@gopivotal.com>
Message-ID: <CA+BFTFu4BmyNuWUDec1wYFZTC4OBc=+rLrkKh+_gZsLHdxwQCg@mail.gmail.com>

Hi,

I didn't take any action on this during this period of time and the problem
remains( Server B and server C are clustered and I can connect to neither B
nor C).

I don't think it is a socket issue because I can connect successfully with
'telnet'.

Logs in the log file seems abnormal:
1. no client is connected to the cluster, but rabbit emits "=INFO
REPORT====" and "=WARNING REPORT===" pairs to the log file every 5
seconds(see below).
2. 10.4.16.221 is a virtual ip which rabbit binds to, the log shows
connections are from 10.4.16.221, why is this?

log example:

=INFO REPORT==== 14-Jul-2013::18:06:01 ===
accepting AMQP connection <0.19551.11> (10.4.16.221:42919 ->
10.4.16.221:5672)

=WARNING REPORT==== 14-Jul-2013::18:06:01 ===
closing AMQP connection <0.19551.11> (10.4.16.221:42919 -> 10.4.16.221:5672
):
connection_closed_abruptly

=INFO REPORT==== 14-Jul-2013::18:06:06 ===
accepting AMQP connection <0.19556.11> (10.4.16.221:42920 ->
10.4.16.221:5672)

=WARNING REPORT==== 14-Jul-2013::18:06:06 ===
closing AMQP connection <0.19556.11> (10.4.16.221:42920 -> 10.4.16.221:5672
):
connection_closed_abruptly

Thanks,
Robert




On Fri, Jul 12, 2013 at 7:08 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Rubo Liang:
>
> > I guess this won't cause the problem I got, right?
> >
> > I left the problem as it was for further investigation, is there any
> suggestion on debugging this problem?
>
> correct, this likely is caused by your socket issue, not the other way
> around.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130714/b4fe2141/attachment.htm>

From liangrubo at bytedance.com  Sun Jul 14 11:46:59 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Sun, 14 Jul 2013 18:46:59 +0800
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CA+BFTFu4BmyNuWUDec1wYFZTC4OBc=+rLrkKh+_gZsLHdxwQCg@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
	<8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
	<CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
	<3949A6D5-5D11-485B-B916-57BD3ED3B180@gopivotal.com>
	<CA+BFTFu4BmyNuWUDec1wYFZTC4OBc=+rLrkKh+_gZsLHdxwQCg@mail.gmail.com>
Message-ID: <CA+BFTFtHr=E6NWmdp59KdErOucE-b6Y+Od2KybSZ_wDj1JDYWA@mail.gmail.com>

> I don't think it is a socket issue because I can connect successfully
with 'telnet'.

tcpdump gives more information(rabbit also binds to 10.4.16.12:5672):
1. the tcp connection is successfully setup
2. client sends a packet to server
3. server sends a packet to client
4. client sends another packet to server, server replies with ack followed
by a reset packet.

 tcpdump output:
18:38:08.396524 IP 192.168.20.41.61353 > 10.4.16.12.5672: Flags [S], seq
3696040838, win 14600, options [mss 1460,nop,nop,sackOK,nop,wscale 9],
length 0
18:38:08.396716 IP 10.4.16.12.5672 > 192.168.20.41.61353: Flags [S.], seq
2115356865, ack 3696040839, win 14600, options [mss
1460,nop,nop,sackOK,nop,wscale 7], length 0
18:38:08.396869 IP 192.168.20.41.61353 > 10.4.16.12.5672: Flags [.], ack
2115356866, win 29, length 0
18:38:08.397156 IP 192.168.20.41.61353 > 10.4.16.12.5672: Flags [P.], seq
3696040839:3696040847, ack 2115356866, win 29, length 8
18:38:08.397467 IP 10.4.16.12.5672 > 192.168.20.41.61353: Flags [.], ack
3696040847, win 115, length 0
18:38:08.397899 IP 10.4.16.12.5672 > 192.168.20.41.61353: Flags [P.], seq
2115356866:2115357201, ack 3696040847, win 115, length 335
18:38:08.397993 IP 192.168.20.41.61353 > 10.4.16.12.5672: Flags [.], ack
2115357201, win 31, length 0
18:38:08.399485 IP 192.168.20.41.61353 > 10.4.16.12.5672: Flags [P.], seq
3696040847:3696041097, ack 2115357201, win 31, length 250
18:38:08.436617 IP 10.4.16.12.5672 > 192.168.20.41.61353: Flags [.], ack
3696041097, win 123, length 0
18:38:11.401038 IP 10.4.16.12.5672 > 192.168.20.41.61353: Flags [R.], seq
2115357201, ack 3696041097, win 123, length 0


On Sun, Jul 14, 2013 at 6:17 PM, Rubo Liang <liangrubo at bytedance.com> wrote:

> Hi,
>
> I didn't take any action on this during this period of time and the
> problem remains( Server B and server C are clustered and I can connect to
> neither B nor C).
>
> I don't think it is a socket issue because I can connect successfully with
> 'telnet'.
>
> Logs in the log file seems abnormal:
> 1. no client is connected to the cluster, but rabbit emits "=INFO
> REPORT====" and "=WARNING REPORT===" pairs to the log file every 5
> seconds(see below).
> 2. 10.4.16.221 is a virtual ip which rabbit binds to, the log shows
> connections are from 10.4.16.221, why is this?
>
> log example:
>
> =INFO REPORT==== 14-Jul-2013::18:06:01 ===
> accepting AMQP connection <0.19551.11> (10.4.16.221:42919 ->
> 10.4.16.221:5672)
>
> =WARNING REPORT==== 14-Jul-2013::18:06:01 ===
> closing AMQP connection <0.19551.11> (10.4.16.221:42919 ->
> 10.4.16.221:5672):
> connection_closed_abruptly
>
> =INFO REPORT==== 14-Jul-2013::18:06:06 ===
> accepting AMQP connection <0.19556.11> (10.4.16.221:42920 ->
> 10.4.16.221:5672)
>
> =WARNING REPORT==== 14-Jul-2013::18:06:06 ===
> closing AMQP connection <0.19556.11> (10.4.16.221:42920 ->
> 10.4.16.221:5672):
> connection_closed_abruptly
>
> Thanks,
> Robert
>
>
>
>
> On Fri, Jul 12, 2013 at 7:08 PM, Michael Klishin <mklishin at gopivotal.com>wrote:
>
>> Rubo Liang:
>>
>> > I guess this won't cause the problem I got, right?
>> >
>> > I left the problem as it was for further investigation, is there any
>> suggestion on debugging this problem?
>>
>> correct, this likely is caused by your socket issue, not the other way
>> around.
>> --
>> MK
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
>
>


-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130714/0e6fc2b0/attachment.htm>

From michael.s.klishin at gmail.com  Sun Jul 14 13:07:17 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sun, 14 Jul 2013 16:07:17 +0400
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CA+BFTFtHr=E6NWmdp59KdErOucE-b6Y+Od2KybSZ_wDj1JDYWA@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
	<8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
	<CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
	<3949A6D5-5D11-485B-B916-57BD3ED3B180@gopivotal.com>
	<CA+BFTFu4BmyNuWUDec1wYFZTC4OBc=+rLrkKh+_gZsLHdxwQCg@mail.gmail.com>
	<CA+BFTFtHr=E6NWmdp59KdErOucE-b6Y+Od2KybSZ_wDj1JDYWA@mail.gmail.com>
Message-ID: <CAE3HoVTLj9n4oG_9PXcMVZmH4i8NK75PAS-yxE-N4tjFkAeW8A@mail.gmail.com>

2013/7/14 Rubo Liang <liangrubo at bytedance.com>

> tcpdump gives more information


It's a good idea to use Wireshark, it can decode AMQP 0.9.1 frames (use
"amqp" as filter).
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130714/e362f0b9/attachment.htm>

From liangrubo at bytedance.com  Sun Jul 14 13:38:42 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Sun, 14 Jul 2013 20:38:42 +0800
Subject: [rabbitmq-discuss] Socket Error 104 when connecting to rabbit
	cluster
In-Reply-To: <CAE3HoVTLj9n4oG_9PXcMVZmH4i8NK75PAS-yxE-N4tjFkAeW8A@mail.gmail.com>
References: <CA+BFTFsT1b7gRypVDDOsqryWkKyOMOGenoEc460ugNZK6CP_Pw@mail.gmail.com>
	<CALPqkioeG1HGdkMFoqFHD6TEiQprD5ijtp0hBsPeQ0XiarJHJw@mail.gmail.com>
	<CA+BFTFvrDAHVgDdPPYbhPpXJ0EhEFbh4HdniUgxQoxu0xXWK7A@mail.gmail.com>
	<CALPqkipyVrHoBC0fv3fKonCzCPgNAtbRLu4bpMkLABt97tEpqw@mail.gmail.com>
	<8028C689-9397-4EB8-B3B7-36CB9E681D20@gopivotal.com>
	<CA+BFTFuV1S-9zZUdofF7SmMbbo7ROSLJ8cpfa07F7ExYYOUoZw@mail.gmail.com>
	<3949A6D5-5D11-485B-B916-57BD3ED3B180@gopivotal.com>
	<CA+BFTFu4BmyNuWUDec1wYFZTC4OBc=+rLrkKh+_gZsLHdxwQCg@mail.gmail.com>
	<CA+BFTFtHr=E6NWmdp59KdErOucE-b6Y+Od2KybSZ_wDj1JDYWA@mail.gmail.com>
	<CAE3HoVTLj9n4oG_9PXcMVZmH4i8NK75PAS-yxE-N4tjFkAeW8A@mail.gmail.com>
Message-ID: <CA+BFTFuqYWC+5X+X5PG4X5i_BQj-uup5ifFzM_B5n2OMOKu8nw@mail.gmail.com>

Sorry, my fault, it is because I removed the guest account which we were
using(actually there is log there but I didn't see it).

Thanks,
Robert




On Sun, Jul 14, 2013 at 8:07 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

> 2013/7/14 Rubo Liang <liangrubo at bytedance.com>
>
>> tcpdump gives more information
>
>
> It's a good idea to use Wireshark, it can decode AMQP 0.9.1 frames (use
> "amqp" as filter).
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130714/4f06510b/attachment.htm>

From bitisuvanje at gmail.com  Sun Jul 14 15:14:30 2013
From: bitisuvanje at gmail.com (Adam Markovski)
Date: Sun, 14 Jul 2013 07:14:30 -0700 (PDT)
Subject: [rabbitmq-discuss] Postponed queues declaration problem after
 updating to latest version
Message-ID: <d8d36a19-d9f0-41cc-a0d5-82eaa8057b39@googlegroups.com>

Before updating to latest Rabbit version (3.1.3 release) for each queue we 
were declaring postponed queue (for delayed messaged) using the 
x-dead-letter-exchange and x-message-ttl attributes, binding with the 
specific types needed. 

After the updating, I'm trying the same thing using the newest client but 
without success. It is fine while defining the queue for the first message 
type, but it fails for the second next, with the exception:

Exception occured starting the MQ Agent: 
> RabbitMQ.Client.Exceptions.OperationIn
> terruptedException: The AMQP operation was interrupted: AMQP close-reason, 
> initi
> ated by Peer, code=406, text="PRECONDITION_FAILED - inequivalent arg 
> 'x-dead-let
> ter-exchange'for queue 'emr-agent-queue_postponded' in vhost '/': received 
> the v
> alue 'Common.Agent.Messages.MQ.FileRequest' of type 'longstr' but curr
> ent is the value 'Common.Agent.Messages.MQ...", classId=50, methodId=10


Has anyone had similar problems?

Thank you, 
Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130714/9807e86b/attachment.htm>

From matthias at rabbitmq.com  Sun Jul 14 16:57:29 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 14 Jul 2013 16:57:29 +0100
Subject: [rabbitmq-discuss] Postponed queues declaration problem after
 updating to latest version
In-Reply-To: <d8d36a19-d9f0-41cc-a0d5-82eaa8057b39@googlegroups.com>
References: <d8d36a19-d9f0-41cc-a0d5-82eaa8057b39@googlegroups.com>
Message-ID: <51E2CA69.8010306@rabbitmq.com>

Adam,

On 14/07/13 15:14, Adam Markovski wrote:
> Before updating to latest Rabbit version (3.1.3 release) for each queue
> we were declaring postponed queue (for delayed messaged) using the
> x-dead-letter-exchange and x-message-ttl attributes, binding with the
> specific types needed.
>
> After the updating, I'm trying the same thing using the newest client
> but without success. It is fine while defining the queue for the first
> message type, but it fails for the second next, with the exception:
>
>     Exception occured starting the MQ Agent:
>     RabbitMQ.Client.Exceptions.OperationIn
>     terruptedException: The AMQP operation was interrupted: AMQP
>     close-reason, initi
>     ated by Peer, code=406, text="PRECONDITION_FAILED - inequivalent arg
>     'x-dead-let
>     ter-exchange'for queue 'emr-agent-queue_postponded' in vhost '/':
>     received the v
>     alue 'Common.Agent.Messages.MQ.FileRequest' of type 'longstr' but curr
>     ent is the value 'Common.Agent.Messages.MQ...", classId=50, methodId=10
>
>
> Has anyone had similar problems?

I suspect you are attempting to declare the queue with different 
x-dead-letter-exchange values. Take a look at the server log since it 
will contain the full error message rather than the truncated version above.

iirc nothing has changed in the server or client recently regarding this 
behaviour.

Matthias.

From luhao.whu at gmail.com  Mon Jul 15 07:51:41 2013
From: luhao.whu at gmail.com (Hugo)
Date: Sun, 14 Jul 2013 23:51:41 -0700 (PDT)
Subject: [rabbitmq-discuss] Error 10061 when using rabbitmqadmin to manage
	rabbitmq
Message-ID: <1373871101936-28075.post@n5.nabble.com>

Hi,
my rabbitmq server is on windows 7,and I'm having problems with
rabbitmqadmin(or http api) when following the instructions RabbitMQ
management command line tool .

I have installed python-2.7 and rabbitmq-2.8.7. When I runs "/python
rabbitmqadmin --help/" in command line, it works well.But running "/python
rabbitmqadmin -H localhost -u guest -p guest list queues/" just results in
"*** Could not connect: [Errno 10061]".

Any help is appreciated.
Thanks.
Hugo.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Error-10061-when-using-rabbitmqadmin-to-manage-rabbitmq-tp28075.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Mon Jul 15 08:57:38 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 15 Jul 2013 08:57:38 +0100
Subject: [rabbitmq-discuss] Header exchange wildcards and/or routing keys
In-Reply-To: <CALQig8-iJJh9buQSZpptpypM4JSqwuAf_5h=fenpOBmAmnwf9g@mail.gmail.com>
References: <CALQig8-iJJh9buQSZpptpypM4JSqwuAf_5h=fenpOBmAmnwf9g@mail.gmail.com>
Message-ID: <51E3AB72.2020908@rabbitmq.com>

Hi Steve,

On 11/07/13 18:23, Steve Valaitis wrote:
> Is there any way to use wildcards right now with header exchange
> values? 

Headers exchanges do not recognise any special wildcard characters such
as '*' or '#'. As observed by Daniel, you might consider "x-match" =
"any" to be a kind of wildcard. See
https://www.rabbitmq.com/tutorials/amqp-concepts.html#exchange-headers

> If there isn't, does anyone know of plans to implement them,

No, this falls outside the AMQP specification, but you can create an
exchange with the desired rules as a plugin.

> or to allow routing keys to be used in conjunction with header
> exchanges?

You can achieve a similar effect with exchange-to-exchange bindings. For
disjunction and conjunction, bind a direct and headers exchange in
parallel and series, respectively.



-Emile




From matthias at rabbitmq.com  Mon Jul 15 09:28:04 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 15 Jul 2013 09:28:04 +0100
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
 on CentOS 6.3
In-Reply-To: <1373548715046-28006.post@n5.nabble.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com> <51DE8555.2030100@rabbitmq.com>
	<1373543449366-28002.post@n5.nabble.com>
	<51DE9F8F.4040607@rabbitmq.com>
	<1373548715046-28006.post@n5.nabble.com>
Message-ID: <51E3B294.6050206@rabbitmq.com>

On 11/07/13 14:18, wangshuo wrote:
> when I start the service
> ___________________________________
> # service rabbitmq-server start
> Starting rabbitmq-server: RabbitMQ is currently running
> rabbitmq-server.
>
> when I stop the service
> ___________________________________________
> Stopping rabbitmq-server: rmdir: failed to remove `/var/run/rabbitmq': No
> such file or directory
> rabbitmq-server.

I suspect that the service was started in some strange way, somehow. I 
suggest you kill the beam process and then try starting the service again.

Matthias.

From matthias at rabbitmq.com  Mon Jul 15 09:35:00 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 15 Jul 2013 09:35:00 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1373661427074-28065.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
Message-ID: <51E3B434.9070804@rabbitmq.com>

On 12/07/13 21:37, NuPogodi wrote:
> That is great that you are treating it as feature to provide more consistent
> queue throughput by optionaly preventing paging. The system will be much
> easier to analyse and plan for a deployment. Having a given message size and
> using limited-length queues it will be possible to utilize RAM resources to
> higher extent with a constant and high message processing rate.

As Emile pointed out, until we introduce paging-free queues, you can get 
queues to utilise more memory by setting the vm_memory_high_watermark to 
values greater than 1.0. The downside is that you could get a memory 
spike that causes the broker to run out of memory. So when running with 
such a setting it may be advisable to configure plenty of swap space 
since then at least the broker will continue to work (albeit with 
severely degraded performance) rather than crash.

Matthias.

From matthias at rabbitmq.com  Mon Jul 15 09:54:31 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 15 Jul 2013 09:54:31 +0100
Subject: [rabbitmq-discuss] Confirm if the message was published
In-Reply-To: <CAFrXCmKc0hO=NdzXF-xmGsAGEKyM5SrmrBwmTz_ja5=FT=Wc4A@mail.gmail.com>
References: <CAFrXCmJvA9N3hsm75Ox_W_trGGCA7NY7v5H7VOX1s6HD3Vr_rA@mail.gmail.com>
	<51DE7E7E.9060905@rabbitmq.com> <51DE8158.5020402@rabbitmq.com>
	<CAFrXCmKc0hO=NdzXF-xmGsAGEKyM5SrmrBwmTz_ja5=FT=Wc4A@mail.gmail.com>
Message-ID: <51E3B8C7.8040401@rabbitmq.com>

On 11/07/13 14:03, Guilherme Labigalini wrote:
> Looks like RabbitMQ needs more time to confirm/write messages to disk
> when the queue size is big (like 2GB).

Not necessarily, but in general you shouldn't make any assumptions about 
the timeliness of confirms. There is a lot batching and other 
optimisations going on at the server which improve overall throughput 
but result in highly variable confirm latencies.

> There is any recommendation about how much data I can "store" the
> message queues?

On a 64-bit machine, about 7 million messages per gigabyte of memory 
rabbit is configured to use (i.e. based on the vm_memory_high_watermark 
setting). Plus of course you need disk space for all the payloads + a 
few hundred bytes of overhead, times two (due to the way disk space gets 
reclaimed, there can be up to 50% "garbage").

Regards,

Matthias

From emile at rabbitmq.com  Mon Jul 15 09:56:09 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 15 Jul 2013 09:56:09 +0100
Subject: [rabbitmq-discuss] Error 10061 when using rabbitmqadmin to
 manage rabbitmq
In-Reply-To: <1373871101936-28075.post@n5.nabble.com>
References: <1373871101936-28075.post@n5.nabble.com>
Message-ID: <51E3B929.2050608@rabbitmq.com>

On 15/07/13 07:51, Hugo wrote:

> rabbitmqadmin -H localhost -u guest -p guest list queues/" just results in
> "*** Could not connect: [Errno 10061]".

Make sure you have a broker running (with the management plugin enabled)
on localhost. If your broker is running elsewhere then modify the -H
parameter accordingly.



-Emile




From mklishin at gopivotal.com  Mon Jul 15 15:16:36 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 15 Jul 2013 18:16:36 +0400
Subject: [rabbitmq-discuss] reply-code=406,
	reply-text=PRECONDITION_FAILED - unknown delivery tag
In-Reply-To: <1373679365522-28067.post@n5.nabble.com>
References: <CA+5hJbhemPDt3XztORpxha08yhQd2tExQNXDFv3LfaUEkT2SAw@mail.gmail.com>
	<5023777D.9080007@rabbitmq.com>
	<1373679365522-28067.post@n5.nabble.com>
Message-ID: <FD8E7CD0-D62B-4314-A974-C3925E7EE3CE@gopivotal.com>

cheenu:

> What is a right recovery logic ?

you need to at least open another channel and avoid ack-ing or rejecting
messages in a way that results in this error. The exact reason, unfortunately, is often
application-specific.

Or is your question about error recovery in general?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130715/097a1880/attachment.pgp>

From sergey at openbridge.com  Mon Jul 15 15:14:40 2013
From: sergey at openbridge.com (sergey at openbridge.com)
Date: Mon, 15 Jul 2013 07:14:40 -0700 (PDT)
Subject: [rabbitmq-discuss] How to not publish messages, if queue is full?
Message-ID: <025976ec-568b-475c-aa54-234407194476@googlegroups.com>

Hi everybody,

I tried to put a limit on the queue size using 'x-max-length', but the 
problem is Messages will be dropped or dead-lettered from the front of the 
queue to make room for new messages once the limit is reached.
 
What are the possible ways to not drop the messages? Ideally I would like 
to throw an Exception if queue is full. 

First I was thinking to check the queue size, and if it's full than stop. 
But for example if I have 5 producers and queue limit size is set to 10, 
and I already have 9 messages in the queue, than all 5 producers will check 
the size, and publish their messages and 4 messages will be lost.

That's how I declare x-max-length':

result = channel.queue_declare(queue='Test', arguments={ 'x-max-length' : 
10})
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130715/b9be6476/attachment.htm>

From mclinden at informed.net  Mon Jul 15 15:40:57 2013
From: mclinden at informed.net (Sean McLinden)
Date: Mon, 15 Jul 2013 10:40:57 -0400 (EDT)
Subject: [rabbitmq-discuss] Compiling 1.8.1
In-Reply-To: <1165767474.121841373897283048.JavaMail.root@mail.informed.net>
Message-ID: <1030413543.121861373899257346.JavaMail.root@mail.informed.net>


Greetings:

I have some legacy code which depends upon rabbitmq version 1.8.1, but I am having trouble building 1.8.1 from source. It is possible that the problem is related to the version of Erlang so I was wondering what is the most recent version of Erlang known to successfully build RabbitMQ 1.8.1?

Thanks.

Sean McLinden

-- 
NOTICE of CONFIDENTIALITY and DISCLAIMER

This transmission, including attachments, is confidential. It may also be privileged or otherwise protected by work product immunity or other legal rules. If you have received it by mistake, please let us know by e-mail to the sender, only, and delete it from your system; you may not copy this message or disclose its contents to anyone.

Unless expressly noted, above, this communication does not reflect an intention by the sender to conduct a transaction or make any agreement by electronic means. Nothing contained in this transmission shall constitute a contract or electronic signature under the ESIGN, any version of the UETA, or any other statute governing electronic transactions. 

If this transmission contains advice, the advice is based on instructions in relation to, and is provided to the addressee in connection with, the matter mentioned above. Responsibility is not accepted for reliance upon it by any other person or for any other purpose.


From mark.geib at echostar.com  Mon Jul 15 17:45:15 2013
From: mark.geib at echostar.com (mark.geib at echostar.com)
Date: Mon, 15 Jul 2013 09:45:15 -0700 (PDT)
Subject: [rabbitmq-discuss] another performance question
Message-ID: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>

We have been using rabbitmq for a number or years with great success, 
thanks.

All the following relates to rabbitmq 3.1.1 on debian.

Recently we started a new project using rabbitmq to handle large amounts of 
data, over 40kHz message rate and message sizes of a few kilobytes. The 
project depends on using a topic exchange with routing keys of the form 
AA.BB.CC.DD.EE. Consumers are able to bind a queue with a given wildcard 
pattern in order to receive a subset of the message stream published by one 
publisher. There is always one consumer that binds with the "#" routing key 
to receive all messages.

We have started testing against a broker running on a machine with 8 cores, 
about 2GHz each, with 32GB ram, and over a terabyte of free disk space. I 
am publishing with a single erlang client to a topic exchange. I am only 
able to publish at about 15kHz before I see flow control kick in on the 
management UI for the connection. This is with no queue bound to the 
exchange, so rabbitmq only needs to receive the messages and drop them. So 
at 15kHz I see flow control kicking in, but the machine is not busy, all 8 
cores show 85-95% idle. It looks like the server is basically idle. If I 
then bind a queue with the routing key "#" I see the enqueue rate hover 
around 5-7kHz. If I add a consumer to keep the queue empty I see no 
improvement. And during all this the machine still never gets busy.

My confusion lies in the fact that the flow control kicks in, but the 
machine is not busy. There is no ram or disk shortage and the machine's NIC 
can certainly handle much higher bandwidth loads than the 15kHz message 
rate I see in rabbitmq.

I have read everything I can on performance and expected to see a message 
receiving rate, that is with no queues, of over 100kHz. Once I add queues, 
etc I was expecting 20kHz or better.

I am wondering if 40kHz throughput is un-realistic at this point.

Thanks,
Mark.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130715/6f7d9d0d/attachment.htm>

From togirish at gmail.com  Mon Jul 15 18:59:35 2013
From: togirish at gmail.com (Girish Gangadharan)
Date: Mon, 15 Jul 2013 10:59:35 -0700 (PDT)
Subject: [rabbitmq-discuss] Mirrored queues behind a load balancer
In-Reply-To: <c3ae4e5c-ab4c-4c36-921f-b0d639c2318c@googlegroups.com>
References: <49b335bf-8c06-4d5e-8a33-070ea2df984a@googlegroups.com>
	<c3ae4e5c-ab4c-4c36-921f-b0d639c2318c@googlegroups.com>
Message-ID: <bf25c6e8-b473-4ba9-aaae-a156fda5b369@googlegroups.com>

Thanks!

On Wednesday, July 3, 2013 12:12:48 PM UTC-5, James Lewis wrote:
>
> Hi Girish, just a disclaimer: I'm no expert and I'm only just going 
> through the motions of setting up a HA cluster myself.  However, I think I 
> can answer a couple of your questions.
>
> 1.
>
>> Likewise, if I manually create a queue on one node, it immediately shows 
>> up on the other node as well. 
>>
>
> Not unless you specifically set the queue to be mirrored.   You could 
> create a policy that matches queues using a regex (so queues starting with 
> a prefix of your choice for example) and once that policy is in place, then 
> any queue you declare that starts with that prefix will be mirrored across 
> your cluster (assuming you've set your policy to ha-all).  So basically, 
> once you've setup a cluster in rabbitmq you haven't setup mirroring.  
> You've set up a logical cluster (collection) of nodes running rabbitmq that 
> all know about each other.  To implement mirroring you then need to create 
> the policy.
>
> 2. 
>
>> Would that work? Is that the recommended approach?
>
>
> The clustering guide says yes that approach will work.  However the 
> mirrored queue guide talks about master - slave replication which makes me 
> think of setting the load balancer up to fail over to a slave in the case 
> of a master failure rather than to round-robin the requests to all nodes in 
> the cluster...  I'd appreciate it if someone could confirm this.
>
> Hopefully some of that is of use to you!  
>
> Cheers,
> James
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130715/ebb7f26a/attachment.htm>

From marcos.torres at gmail.com  Mon Jul 15 19:21:56 2013
From: marcos.torres at gmail.com (Marcos Torres)
Date: Mon, 15 Jul 2013 15:21:56 -0300
Subject: [rabbitmq-discuss] Question about long-lived connections
Message-ID: <CAP4Ah2BS=18ydc_BjPuUkVYX6DvWNQG9CfFn1mDks4pBG2C_7A@mail.gmail.com>

First of all, I'm doing my first project with RabbitMQ and I'm very happy
with the results so far, so, good jobs guys.

Right now I'm working on a Windows Service and I need a way to listen on a
queue all the time.

Here?s is the scenario:

Client A puts a message to a Queue (Q1)
Client B does the same thing to (Q1)

Service S listens to Q1 for incoming messages.

Something like this:

ClientA / ClientB => Q1  => { Service }

So far I was thinking in the EventingBasicConsumer on the Service side, but
I'm not sure about the underlying connection. Is there a time out I need to
be aware of?
A push-based approach would be the ideal thing.
Doing some research, I saw something about the RequestedHeartbeat but No
idea to use that.

Also, I know there is the Shovel plug-in but not sure if it fits in this
scenario because I still need to face the consume of the Q1 queue, that?s
the real issue.

I'm using C# and the .NET client libraries.

Thanks in advance,
Marcos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130715/8525be1d/attachment.htm>

From marcos.torres at gmail.com  Mon Jul 15 19:40:11 2013
From: marcos.torres at gmail.com (Marcos Torres)
Date: Mon, 15 Jul 2013 11:40:11 -0700 (PDT)
Subject: [rabbitmq-discuss] Question about long-lived connections
Message-ID: <248db526-cd1b-41ec-a244-2f5c2216fe81@googlegroups.com>

First of all, I'm doing my first project with RabbitMQ and I'm very happy 
with the results so far, so, good jobs guys.

Right now I'm working on a Windows Service and I need a way to listen on a 
queue all the time.

Here?s is the scenario:

Client A puts a message to a Queue (Q1)
Client B does the same thing to (Q1)

Service S listens to Q1 for incoming messages.

Something like this: 

ClientA / ClientB => Q1  => { Service } 

So far I was thinking in the EventingBasicConsumer on the Service side, but 
I'm not sure about the underlying connection. Is there a time out I need to 
be aware of? 
A push-based approach would be the ideal thing.
Doing some research, I saw something about the RequestedHeartbeat but No 
idea to use that. 

Also, I know there is the Shovel plug-in but not sure if it fits in this 
scenario because I still need to face the consume of the Q1 queue, that?s 
the real issue.

I'm using C# and the .NET client libraries.

Thanks in advance,
Marcos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130715/769bdd27/attachment.htm>

From girish at giri.sh  Mon Jul 15 22:19:15 2013
From: girish at giri.sh (Girish Gangadharan)
Date: Mon, 15 Jul 2013 16:19:15 -0500
Subject: [rabbitmq-discuss] Identify master node
Message-ID: <CAGT39Yt2hK3P306AtKvYHRdqJtrV8z4SwWtiBs_X7FQM3ZxYgg@mail.gmail.com>

Hello,

Can somebody please explain to me how does one go about identifying the
slave vs master nodes in a cluster? The idea is to bring one down and see
how the clients handle them, especially the Consumer Cancellation
notifications (for testing high availability setup). Also, is that a valid
way to test HA? Or the fact that these nodes sit behind a load-balancer
make it an unnecessary, redundant test?

Thanks,
Girish
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130715/9a421719/attachment.htm>

From wang_nets at 163.com  Tue Jul 16 04:47:00 2013
From: wang_nets at 163.com (wangshuo)
Date: Mon, 15 Jul 2013 20:47:00 -0700 (PDT)
Subject: [rabbitmq-discuss] The problem about installing rabbitmq-server
	on CentOS 6.3
In-Reply-To: <51E3B294.6050206@rabbitmq.com>
References: <1373529623856-27987.post@n5.nabble.com>
	<51DE7C23.5080701@rabbitmq.com> <51DE8555.2030100@rabbitmq.com>
	<1373543449366-28002.post@n5.nabble.com>
	<51DE9F8F.4040607@rabbitmq.com>
	<1373548715046-28006.post@n5.nabble.com>
	<51E3B294.6050206@rabbitmq.com>
Message-ID: <1373946420833-28090.post@n5.nabble.com>

Thank you very much,when I use the command rabbitmq-service,it works.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/The-problem-about-installing-rabbitmq-server-on-CentOS-6-3-tp27987p28090.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From MJeffery at fnb.co.za  Tue Jul 16 07:53:23 2013
From: MJeffery at fnb.co.za (Jeffery, Mark)
Date: Tue, 16 Jul 2013 06:53:23 +0000
Subject: [rabbitmq-discuss] Rabbit crash
References: <06536F18C0038E489237EEE3CA9BF2D014012434@FRGR1D2MX07.services.firstrand.net>
	<51750B45.4080701@rabbitmq.com>
	<06536F18C0038E489237EEE3CA9BF2D0140128D8@FRGR1D2MX07.services.firstrand.net>
	<51752C97.7030607@rabbitmq.com> 
Message-ID: <06536F18C0038E489237EEE3CA9BF2D014554F66@FRGR1D2MX07.services.firstrand.net>

Just for information.

An upgrade to 3.0.4 solved this problem for us.

Thanks !


-----Original Message-----
From: Simon MacMullen [mailto:simon at rabbitmq.com]
Sent: Monday, April 22, 2013 2:27 PM
To: Jeffery, Mark
Cc: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Rabbit crash

Hi. That's a reasonably old version of RabbitMQ; quite a few bugs in HA have been fixed since then. So an upgrade is recommended. Having said that there is nothing with the exact stack trace from your logs but it's possible that it's a side effect of something else that we have fixed.

Cheers, Simon

On 22/04/13 11:23, Jeffery, Mark wrote:
> Thanks.
>
> It is Version 2.8.4
>
> Attached are the logs.
>
> I really appreciate any help.
>
> Jeff
>
> -----Original Message-----
> From: Simon MacMullen [mailto:simon at rabbitmq.com]
> Sent: Monday, April 22, 2013 12:05 PM
> To: Discussions about RabbitMQ
> Cc: Jeffery, Mark
> Subject: Re: [rabbitmq-discuss] Rabbit crash
>
> Which version of RabbitMQ are you running?
>
> Also: is there nothing in the logs before these {error,not_found} reports? It looks like a side effect of something else already having gone wrong. Could you post the complete logs (regular and sasl ones) somewhere?
>
> Cheers, Simon
>
> On 22/04/13 07:26, Jeffery, Mark wrote:
>> Hello
>>
>> We have a cluster of 6 Rabbit Nodes.
>> All disk nodes.
>>
>> One keeps crashing (around 3 times a day), the others are fine.
>>
>>   From what I can see, it restarts itself and carries on.
>>
>> The last time however, it didn?t come up because it said ?already running?.
>>
>> When the process was killed manually, the entire cluster came down ?
>>
>> I cannot interpret the crash report.
>>
>> I have attached it.
>>
>> Can anyone see what the problem is ?
>>
>> To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser:
>> https://www.fnb.co.za/disclaimer.html
>>
>> If you are unable to access the Disclaimer, send a blank e-mail to 
>> firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the Disclaimer.
>>
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
> --
> Simon MacMullen
> RabbitMQ, VMware
>
> To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser:
> https://www.fnb.co.za/disclaimer.html
>
> If you are unable to access the Disclaimer, send a blank e-mail to 
> firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the Disclaimer.
>


--
Simon MacMullen
RabbitMQ, VMware

To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser: 
https://www.fnb.co.za/disclaimer.html 

If you are unable to access the Disclaimer, send a blank e-mail to
firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the Disclaimer.

From emile at rabbitmq.com  Tue Jul 16 09:00:45 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 16 Jul 2013 09:00:45 +0100
Subject: [rabbitmq-discuss] Question about long-lived connections
In-Reply-To: <248db526-cd1b-41ec-a244-2f5c2216fe81@googlegroups.com>
References: <248db526-cd1b-41ec-a244-2f5c2216fe81@googlegroups.com>
Message-ID: <51E4FDAD.7070204@rabbitmq.com>


Hi,

On 15/07/13 19:40, Marcos Torres wrote:

[...]

> I'm not sure about the underlying connection. Is there a time out I
> need to be aware of?

There is no default broker-imposed time limit.

> Doing some research, I saw something about the RequestedHeartbeat but No
> idea to use that.

This is a connection setting and does to directly contribute to the
sending or receiving of messages. The heartbeat will keep the connection
alive if a network device causes timeouts. If will also help peers to
detect broken connections faster. See
https://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v3.1.3/rabbitmq-dotnet-client-3.1.3-client-htmldoc/html/type-RabbitMQ.Client.ConnectionFactory.html#field-F:RabbitMQ.Client.ConnectionFactory.RequestedHeartbeat

> Also, I know there is the Shovel plug-in but not sure if it fits in this
> scenario

I don't think that is relevant.

> I'm using C# and the .NET client libraries.

I would suggest that you study the tutorial examples and the C?
translations:

https://www.rabbitmq.com/tutorials/tutorial-one-python.html
https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/dotnet

If you still have questions afterwards then please ask.




-Emile




From emile at rabbitmq.com  Tue Jul 16 09:11:57 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 16 Jul 2013 09:11:57 +0100
Subject: [rabbitmq-discuss] Compiling 1.8.1
In-Reply-To: <1030413543.121861373899257346.JavaMail.root@mail.informed.net>
References: <1030413543.121861373899257346.JavaMail.root@mail.informed.net>
Message-ID: <51E5004D.7000000@rabbitmq.com>

On 15/07/13 15:40, Sean McLinden wrote:

> I have some legacy code which depends upon rabbitmq version 1.8.1,
> but I am having trouble building 1.8.1 from source. It is possible
> that the problem is related to the version of Erlang so I was
> wondering what is the most recent version of Erlang known to
> successfully build RabbitMQ 1.8.1?

The core broker compiles with up to Erlang R14B02 (erts-5.8.3) for me.
The release was compiled with R12B5. You can download the historical
release here: https://www.rabbitmq.com/releases/rabbitmq-server/v1.8.1/
You are strongly advised to upgrade.


-Emile




From cheenu321 at gmail.com  Tue Jul 16 10:15:03 2013
From: cheenu321 at gmail.com (cheenu)
Date: Tue, 16 Jul 2013 02:15:03 -0700 (PDT)
Subject: [rabbitmq-discuss] reply-code=406,
 reply-text=PRECONDITION_FAILED - unknown delivery tag
In-Reply-To: <FD8E7CD0-D62B-4314-A974-C3925E7EE3CE@gopivotal.com>
References: <CA+5hJbhemPDt3XztORpxha08yhQd2tExQNXDFv3LfaUEkT2SAw@mail.gmail.com>
	<5023777D.9080007@rabbitmq.com>
	<1373679365522-28067.post@n5.nabble.com>
	<FD8E7CD0-D62B-4314-A974-C3925E7EE3CE@gopivotal.com>
Message-ID: <1373966103521-28094.post@n5.nabble.com>

> Or is your question about error recovery in general?

Yes, my question is about error recovery in general.
Yes, I open another channel, and understand Delivery is only valid in
context of Channel that it was obtained from.
Am wondering, if there is anyway to "re-connect" delivery to a new channel,
or in general make a reconnect behind the scenes.

-Cheenu



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/reply-code-406-reply-text-PRECONDITION-FAILED-unknown-delivery-tag-tp21310p28094.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From louis.bouchard at canonical.com  Tue Jul 16 10:17:56 2013
From: louis.bouchard at canonical.com (Louis Bouchard)
Date: Tue, 16 Jul 2013 11:17:56 +0200
Subject: [rabbitmq-discuss] Update:  [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51D6BE3D.9040606@canonical.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
	<51D6BE3D.9040606@canonical.com>
Message-ID: <51E50FC4.5090504@canonical.com>

Hello,

Now that I have made sense of the test context, I was able to run
comparison tests on 2.7.1 (version in 12.04 Precise) and 3.1.3 (version
in 13.10 Saucy dev).

Both test ran for 14 hours. Here is an outline of the memory usage in
both cases:

Distro  Version  Mem Used    Mem Free
=====   =====    =========   =======
Precise 2.7.1    476780      1574972 (start)
                 908232      1143520 (finish)
       Delta     431452      -431452

Saucy   3.1.3    294508      1756496 (start)
                 761844      1289160 (finish)
        Delta    467336      -467336

A graphical view of the data is attached to the bug here :

https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/1197380/+attachment/3738568/+files/rabbitmq-memleak.png

So there seems to be an existing leak situation up to the current
version of rabbitmq-server.

I would be more than happy to help identify the problem if it exists.

Kind Regards,

...Louis



-- 
Louis Bouchard
Backline Support Analyst
Canonical Ltd
Ubuntu support: http://canonical.com/support

From matthias at rabbitmq.com  Tue Jul 16 10:30:00 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 16 Jul 2013 10:30:00 +0100
Subject: [rabbitmq-discuss] Update: [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51E50FC4.5090504@canonical.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
	<51D6BE3D.9040606@canonical.com> <51E50FC4.5090504@canonical.com>
Message-ID: <51E51298.2080900@rabbitmq.com>

Louis,

On 16/07/13 10:17, Louis Bouchard wrote:
> So there seems to be an existing leak situation up to the current
> version of rabbitmq-server.

As pointed out when this was raised originally, the test never actually 
consumes any messages. Therefore it is no surprise that the memory usage 
is increasing, as more and more messages are enqueued. That is 
completely normal and expected behaviour.


Regards,

Matthias.

From matthias at rabbitmq.com  Tue Jul 16 10:33:10 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 16 Jul 2013 10:33:10 +0100
Subject: [rabbitmq-discuss] Update: [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51E51298.2080900@rabbitmq.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
	<51D6BE3D.9040606@canonical.com> <51E50FC4.5090504@canonical.com>
	<51E51298.2080900@rabbitmq.com>
Message-ID: <51E51356.2080609@rabbitmq.com>

Louis,

On 16/07/13 10:30, Matthias Radestock wrote:
> On 16/07/13 10:17, Louis Bouchard wrote:
>> So there seems to be an existing leak situation up to the current
>> version of rabbitmq-server.
>
> As pointed out when this was raised originally, the test never actually
> consumes any messages.

Ah, I notice the latest test instructions at 
https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/1197380 
run the producer and consumer in separate shells, so this is no longer 
true....

> Therefore it is no surprise that the memory usage
> is increasing, as more and more messages are enqueued. That is
> completely normal and expected behaviour.

The likely reason this is happening now is that the producer is 
producing faster than the consumer is consuming. Thus the number of 
messages enqueued in the broker increases over time.

You can verify this by running 'rabbitmqctl list_queues' and check the 
message count.

Matthias.

From louis.bouchard at canonical.com  Tue Jul 16 10:56:09 2013
From: louis.bouchard at canonical.com (Louis Bouchard)
Date: Tue, 16 Jul 2013 11:56:09 +0200
Subject: [rabbitmq-discuss] Update: [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51E51356.2080609@rabbitmq.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
	<51D6BE3D.9040606@canonical.com> <51E50FC4.5090504@canonical.com>
	<51E51298.2080900@rabbitmq.com> <51E51356.2080609@rabbitmq.com>
Message-ID: <51E518B9.8080801@canonical.com>

Hello Matthias,

Le 16/07/2013 11:33, Matthias Radestock a ?crit :
> The likely reason this is happening now is that the producer is
> producing faster than the consumer is consuming. Thus the number of
> messages enqueued in the broker increases over time.
> 
> You can verify this by running 'rabbitmqctl list_queues' and check the
> message count.
> 
> Matthias.

Thanks for the information. I will keep an eye on this but as of now (I
just restarted a new test run on both saucy & precise), the queue
appears to be empty :

rabbitmqctl list_queues
Listing queues ...
task_queue	0
...done.

In order to confirm, I have briefly stopped the consumer
(queue_receive.py) and did see an increase in the task_queue number.
Restarting the consumer quickly brings the number to 0.

I'll keep the test running & keep an eye on this value

Kind regards,

...Louis



-- 
Louis Bouchard
Backline Support Analyst
Canonical Ltd
Ubuntu support: http://canonical.com/support

From jagadish.nadimpalli at oneconvergence.com  Tue Jul 16 11:10:26 2013
From: jagadish.nadimpalli at oneconvergence.com (Jagadish Nadimpalli)
Date: Tue, 16 Jul 2013 15:40:26 +0530
Subject: [rabbitmq-discuss] Consumer not receiving message
Message-ID: <CAC7kndOeJi5=JH1c=DAGg241d4gvcyRCnVJGQUSUWptMZtffcA@mail.gmail.com>

Hi All,

I am using Kombu as AMQP message framework. I have registered my consumer
and sending message from producer with a topic. But I am not able to see
that the message is not unblocking the thread that is polling at consumer
side. I see that the messages are coming to the queues and are getting
drained but not received by the consumer thread. I came to this conclusion
as I don't see any of the ready/unacknowledged fields with positive values
in the RabbitMQ management UI.

Is there something obvious I am missing? Thanks in advance for your help.

Thanks & Regards,
Jagadish
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/4efa02dd/attachment.htm>

From emile at rabbitmq.com  Tue Jul 16 12:05:04 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 16 Jul 2013 12:05:04 +0100
Subject: [rabbitmq-discuss] How to not publish messages,
	if queue is full?
In-Reply-To: <025976ec-568b-475c-aa54-234407194476@googlegroups.com>
References: <025976ec-568b-475c-aa54-234407194476@googlegroups.com>
Message-ID: <51E528E0.7090006@rabbitmq.com>


On 15/07/13 15:14, sergey at openbridge.com wrote:

> What are the possible ways to not drop the messages? 

There's no simple answer to this question. If you don't want messages to
be dropped then you should consider using a different solution.
Determine what you hope to achieve by limiting queue length and check
whether the same aims can be achieved in another way.

> Ideally I would like to throw an Exception if queue is full.

You can notify publishers that the queue was full after the fact, by
configuring a dead-letter-exchange for overflow messages. Publishers can
bind a private queue to the DLX and consume from it. Publishers can
treat it as an exception when messages they sent reach them via that
subscription.

However this does not prevent messages from being dropped in the first
place.

> First I was thinking to check the queue size, and if it's full than
> stop. But for example if I have 5 producers and queue limit size is set
> to 10, and I already have 9 messages in the queue, than all 5 producers
> will check the size, and publish their messages and 4 messages will be lost.

That won't work well if many publishers monitor the same queue. You
could craft a solution around the same idea if each publisher published
to a separate length-limited queue.



-Emile





From emile at rabbitmq.com  Tue Jul 16 12:26:28 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 16 Jul 2013 12:26:28 +0100
Subject: [rabbitmq-discuss] Identify master node
In-Reply-To: <CAGT39Yt2hK3P306AtKvYHRdqJtrV8z4SwWtiBs_X7FQM3ZxYgg@mail.gmail.com>
References: <CAGT39Yt2hK3P306AtKvYHRdqJtrV8z4SwWtiBs_X7FQM3ZxYgg@mail.gmail.com>
Message-ID: <51E52DE4.6000807@rabbitmq.com>


Hi,

On 15/07/13 22:19, Girish Gangadharan wrote:

> Can somebody please explain to me how does one go about identifying the
> slave vs master nodes in a cluster? The idea is to bring one down and
> see how the clients handle them, especially the Consumer Cancellation
> notifications (for testing high availability setup). Also, is that a
> valid way to test HA? Or the fact that these nodes sit behind a
> load-balancer make it an unnecessary, redundant test?

There is no unique master node in a cluster, since the concept of master
is defined per HA queue. You can determine the master node for each
queue with "rabbitmqctl list_queues pid"

Stopping the master node of a queue sounds like a valid test regardless
of load-balancer.


-Emile





From mklishin at gopivotal.com  Tue Jul 16 13:00:50 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 16 Jul 2013 16:00:50 +0400
Subject: [rabbitmq-discuss] reply-code=406,
	reply-text=PRECONDITION_FAILED - unknown delivery tag
In-Reply-To: <1373966103521-28094.post@n5.nabble.com>
References: <CA+5hJbhemPDt3XztORpxha08yhQd2tExQNXDFv3LfaUEkT2SAw@mail.gmail.com>
	<5023777D.9080007@rabbitmq.com>
	<1373679365522-28067.post@n5.nabble.com>
	<FD8E7CD0-D62B-4314-A974-C3925E7EE3CE@gopivotal.com>
	<1373966103521-28094.post@n5.nabble.com>
Message-ID: <D1117D6D-0613-4B40-AC40-9A0AD12A8050@gopivotal.com>

cheenu:

> Yes, my question is about error recovery in general.
> Yes, I open another channel, and understand Delivery is only valid in
> context of Channel that it was obtained from.

This is application-dependent.

The following strategy is supported by
at least two [Ruby] clients to recover from network failures. It's not perfect
but works surprisingly well in practice for most cases:

 * Reconnect
 * "reopen" channels (either replace channel references to a new channel or make existing instances get a new id)
 * redeclare exchanges
 * redeclare queues, keeping track of which queues are server-named
 * rebind
 * redeclare consumers

This, however, will generally be easier if your client uses objects for queues, exchanges 
and consumers. Not all of them do.

Recovering from channel-specific errors for consumers is less involved:

 * reopen the channel
 * redeclare queues [if needed]
 * rebind
 * redeclare consumers

since delivery tag values become invalid ("unknown") on the new channel, you need to avoid
acking earlier deliveries. With manual acknowledgements, those messages will be requeued
so you'll get them delivered again (but this may be to a different consumer).

> Am wondering, if there is anyway to "re-connect" delivery to a new channel,
> or in general make a reconnect behind the scenes.

New channels have delivery tag counter set to 0, so no.

I hope that there will be a way to make ack/delivery tag tracking automatic in Ruby clients
first, then if it works well, some kind of solution can be introduced to more clients over time.

I'd certainly agree that error handling and recovery can be tricky to get right with the protocol.
Fortunately, in many cases client libraries can be improved to take care of most steps.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/65f53169/attachment.pgp>

From matthias at rabbitmq.com  Tue Jul 16 14:16:28 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 16 Jul 2013 14:16:28 +0100
Subject: [rabbitmq-discuss] Update: [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51E518B9.8080801@canonical.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
	<51D6BE3D.9040606@canonical.com> <51E50FC4.5090504@canonical.com>
	<51E51298.2080900@rabbitmq.com> <51E51356.2080609@rabbitmq.com>
	<51E518B9.8080801@canonical.com>
Message-ID: <51E547AC.2010409@rabbitmq.com>

Louis,

On 16/07/13 10:56, Louis Bouchard wrote:
> Thanks for the information. I will keep an eye on this but as of now (I
> just restarted a new test run on both saucy & precise), the queue
> appears to be empty :
>
> rabbitmqctl list_queues
> Listing queues ...
> task_queue	0
> ...done.
>
> [...]
> I'll keep the test running & keep an eye on this value

It is possible that what you are seeing is just an inherent symptom of 
how Erlangs memory allocation and garbage collection works. Unless 
rabbit actually ends up exceeding the configured memory high watermark 
(40% of system memory, by default) for sustained periods of time I 
wouldn't worry.

If you are planning on running this test for a while, I suggest you take 
a reading of the memory values reported by 'rabbitmqctl status' near the 
beginning and end of the run, since that will help pinpoint where the 
memory is going.

Regards,

Matthias.

From girish at giri.sh  Tue Jul 16 15:28:33 2013
From: girish at giri.sh (Girish Gangadharan)
Date: Tue, 16 Jul 2013 09:28:33 -0500
Subject: [rabbitmq-discuss] Identify master node
In-Reply-To: <51E52DE4.6000807@rabbitmq.com>
References: <CAGT39Yt2hK3P306AtKvYHRdqJtrV8z4SwWtiBs_X7FQM3ZxYgg@mail.gmail.com>
	<51E52DE4.6000807@rabbitmq.com>
Message-ID: <CAGT39Ys1O6s7OpD97uCJcMDewMCm8BjuhUibg0P8a_Um0WTZsA@mail.gmail.com>

Thanks, Emile.

I ran the command and here's what I see -
https://dl.dropboxusercontent.com/u/162706/list_queues.png

I was expecting to see the name of the queues and the master node listed
next to it. That's not quite what I see on the screen though.

Also, does a master node in this case refer to the node the queue was
created on? And if yes, does this mean if there are multiple queues in an
HA cluster (each created on a different node), there could multiple masters
at any given time in a mirrored queue set up?

On Tue, Jul 16, 2013 at 6:26 AM, Emile Joubert <emile at rabbitmq.com> wrote:

>
> Hi,
>
> On 15/07/13 22:19, Girish Gangadharan wrote:
>
> > Can somebody please explain to me how does one go about identifying the
> > slave vs master nodes in a cluster? The idea is to bring one down and
> > see how the clients handle them, especially the Consumer Cancellation
> > notifications (for testing high availability setup). Also, is that a
> > valid way to test HA? Or the fact that these nodes sit behind a
> > load-balancer make it an unnecessary, redundant test?
>
> There is no unique master node in a cluster, since the concept of master
> is defined per HA queue. You can determine the master node for each
> queue with "rabbitmqctl list_queues pid"
>
> Stopping the master node of a queue sounds like a valid test regardless
> of load-balancer.
>
>
> -Emile
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/5397494d/attachment.htm>

From emile at rabbitmq.com  Tue Jul 16 15:37:52 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 16 Jul 2013 15:37:52 +0100
Subject: [rabbitmq-discuss] Identify master node
In-Reply-To: <CAGT39Ys1O6s7OpD97uCJcMDewMCm8BjuhUibg0P8a_Um0WTZsA@mail.gmail.com>
References: <CAGT39Yt2hK3P306AtKvYHRdqJtrV8z4SwWtiBs_X7FQM3ZxYgg@mail.gmail.com>
	<51E52DE4.6000807@rabbitmq.com>
	<CAGT39Ys1O6s7OpD97uCJcMDewMCm8BjuhUibg0P8a_Um0WTZsA@mail.gmail.com>
Message-ID: <51E55AC0.9070706@rabbitmq.com>

On 16/07/13 15:28, Girish Gangadharan wrote:
> Thanks, Emile.
> 
> I ran the command and here's what I see
> - https://dl.dropboxusercontent.com/u/162706/list_queues.png
> 
> I was expecting to see the name of the queues and the master node listed
> next to it. That's not quite what I see on the screen though.

See http://www.rabbitmq.com/man/rabbitmqctl.1.man.html
for which parameters you need to supply to get the queue name and the
pid (containing the master node) listed beside it.

> Also, does a master node in this case refer to the node the queue was
> created on?

Not necessarily. It may migrate to another node if a server crashes.

> And if yes, does this mean if there are multiple queues in
> an HA cluster (each created on a different node), there could multiple
> masters at any given time in a mirrored queue set up?

Yes, though not necessarily for the reason you provide.
See http://www.rabbitmq.com/ha.html




-Emile





From deeringa at gmx.com  Tue Jul 16 17:48:43 2013
From: deeringa at gmx.com (Andrew Deering)
Date: Tue, 16 Jul 2013 12:48:43 -0400
Subject: [rabbitmq-discuss] RabbitMQ + node.js/meteor.js RPC
Message-ID: <20130716164843.85130@gmx.com>

Hello all! I am currently using Node-AMQP in a Meteor.js project to connect to a RabbitMQ server. I'm receiving messages on a direct exchange no problem. My next step is to send messages to an exchange via RPC and await a reply. I am having a lot of trouble translating the RPC tutorial on the RabbitMQ website to use the node-amqp package in Meteor. I was wondering if anyone had any experience doing this, and if I could be directed toward any resources and/or examples that would help me out. Thanks in advance!


--drew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/bddc4471/attachment.htm>

From michael.s.klishin at gmail.com  Tue Jul 16 17:56:41 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 16 Jul 2013 20:56:41 +0400
Subject: [rabbitmq-discuss] RabbitMQ + node.js/meteor.js RPC
In-Reply-To: <20130716164843.85130@gmx.com>
References: <20130716164843.85130@gmx.com>
Message-ID: <CAE3HoVQ6c=UZ41xJCmrd72z3_c5pkZq+yBnPcZiafyfxvFWBNA@mail.gmail.com>

2013/7/16 Andrew Deering <deeringa at gmx.com>

> I am having a lot of trouble translating the RPC tutorial on the RabbitMQ
> website to use the node-amqp package in Meteor.  I was wondering if anyone
> had any experience doing this, and if I could be directed toward any
> resources and/or examples that would help me out.  Thanks in advance!


Is it just node-amqp [1] or does Meteor have their own client?
I'd recommend giving amqp.node a try [2] which has much more extensive
documentation,
including a port of RabbitMQ tutorials examples.

1. https://github.com/postwait/node-amqp
2. https://github.com/squaremo/amqp.node
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/458e030c/attachment.htm>

From deeringa at gmx.com  Tue Jul 16 18:22:56 2013
From: deeringa at gmx.com (deeringa at gmx.com)
Date: Tue, 16 Jul 2013 13:22:56 -0400
Subject: [rabbitmq-discuss] RabbitMQ + node.js/meteor.js RPC
Message-ID: <20130716172256.191190@gmx.com>

MK - thanks for the prompt response.  Yes, I am currently using the node-amqp package you listed.  I will give the other a try.  Thanks again!!

> ----- Original Message -----
> From: Michael Klishin
> Sent: 07/16/13 12:56 PM
> To: Discussions about RabbitMQ
> Subject: Re: [rabbitmq-discuss] RabbitMQ + node.js/meteor.js RPC
> 
> 2013/7/16 Andrew Deering <deeringa at gmx.com>
> 
> > I am having a lot of trouble translating the RPC tutorial on the RabbitMQ
> > website to use the node-amqp package in Meteor.  I was wondering if anyone
> > had any experience doing this, and if I could be directed toward any
> > resources and/or examples that would help me out.  Thanks in advance!
> 
> 
> Is it just node-amqp [1] or does Meteor have their own client?
> I'd recommend giving amqp.node a try [2] which has much more extensive
> documentation,
> including a port of RabbitMQ tutorials examples.
> 
> 1. https://github.com/postwait/node-amqp
> 2. https://github.com/squaremo/amqp.node
> -- 
> MK
> 
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
> 


From mklishin at gopivotal.com  Tue Jul 16 18:46:50 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 16 Jul 2013 21:46:50 +0400
Subject: [rabbitmq-discuss] Porting .NET client to WinRT API (Windows 8).
In-Reply-To: <CAFCmQSov3BcicqMDTveo+gvyVaNePma669nBt_JffyP6FRhvdg@mail.gmail.com>
References: <CAFCmQSrAL8Rj_UmwdiFw407m2SVF5b2uR9Wp_SSVHLX_jLOsZg@mail.gmail.com>
	<518CC1C5.1060008@rabbitmq.com>
	<CAFCmQSofOfwN5B2rdRsALXYfcv-EvcUOYBGorY7xZNyBjBhp9w@mail.gmail.com>
	<CAE3HoVSsz-XAxjKqv4SPmzMm70fb5jenc305jUvWFy6GL4z1dA@mail.gmail.com>
	<CAFCmQSov3BcicqMDTveo+gvyVaNePma669nBt_JffyP6FRhvdg@mail.gmail.com>
Message-ID: <5AEBA4E6-5495-4059-B6E1-A91E32FFE6C2@gopivotal.com>

Nathan Brown:

> I've submitted the contributor agreement, and I hope the submitted changes can now be reviewed and considered for main-line inclusion.
> 
> Emile mentioned that this is now under "bug25552", should I re-base my code to the most recent .net client release and set the branch name to match?

Nathan,

I'm looking into bug25552. Is there anything else you'd like to add to the depreciate1_1
branch?

Thanks,
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/799cf65e/attachment.pgp>

From mpietrek at skytap.com  Tue Jul 16 19:05:31 2013
From: mpietrek at skytap.com (Matt Pietrek)
Date: Tue, 16 Jul 2013 11:05:31 -0700
Subject: [rabbitmq-discuss] RabbitMQ 3.0.2 stops logging,
	but otherwise looks healthy?
Message-ID: <CACLE7iy4N6T73rnNEPQ_Oc8xDUEu1B605kXOD1uxEqKZegJVcA@mail.gmail.com>

This is admittedly a shot in the dark, and with limited repro details, but
asking if somebody else has seen this.

We run our clustered RabbitMQ 3.0.2 brokers in production without restarts
for months at a time. Everything is looking good - No memory leaks, no
out-of-disk-space, etc...

However, in looking at the rabbit@<node>.log and rabbit@<node>-sasl.log
files, I noticed that at some point (e.g. a month earlier), no new entries
were being added to the log file. Normally there's a steady stream of new
connections and connection drops.

I've listed the open file handles from the rabbitmq beam instance and I
still see live file handles for the log files.

Anybody have any idea what might be happening? And better still, how we
might kick things without restarting the broker?

Thanks,

Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/b48d2c30/attachment.htm>

From MJeffery at fnb.co.za  Tue Jul 16 20:19:00 2013
From: MJeffery at fnb.co.za (Jeffery, Mark)
Date: Tue, 16 Jul 2013 19:19:00 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.0.2 stops logging,
 but otherwise looks healthy?
In-Reply-To: <CACLE7iy4N6T73rnNEPQ_Oc8xDUEu1B605kXOD1uxEqKZegJVcA@mail.gmail.com>
References: <CACLE7iy4N6T73rnNEPQ_Oc8xDUEu1B605kXOD1uxEqKZegJVcA@mail.gmail.com>
Message-ID: <urm162a2iboqpfimg59jgwum.1374002175670@email.android.com>

Hello

Assuming Linux, what does ls -latr show in the fd directory in the rabbitmq process's directory under /proc ?


Matt Pietrek <mpietrek at skytap.com> wrote:



This is admittedly a shot in the dark, and with limited repro details, but asking if somebody else has seen this.

We run our clustered RabbitMQ 3.0.2 brokers in production without restarts for months at a time. Everything is looking good - No memory leaks, no out-of-disk-space, etc...

However, in looking at the rabbit@<node>.log and rabbit@<node>-sasl.log files, I noticed that at some point (e.g. a month earlier), no new entries were being added to the log file. Normally there's a steady stream of new connections and connection drops.

I've listed the open file handles from the rabbitmq beam instance and I still see live file handles for the log files.

Anybody have any idea what might be happening? And better still, how we might kick things without restarting the broker?

Thanks,

Matt


To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser: 
https://www.fnb.co.za/disclaimer.html 

If you are unable to access the Disclaimer, send a blank e-mail to
firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the Disclaimer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/354d6c70/attachment.htm>

From kgoess at bepress.com  Tue Jul 16 20:33:42 2013
From: kgoess at bepress.com (Kevin Goess)
Date: Tue, 16 Jul 2013 12:33:42 -0700
Subject: [rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing
 in the queues
In-Reply-To: <51DF1EEA.3040306@rabbitmq.com>
References: <CABZkbxiMPGZqx5Db5p2T_g0-wa2R64EDxiD0kqy4-jX-DabB1w@mail.gmail.com>
	<51DF1EEA.3040306@rabbitmq.com>
Message-ID: <CABZkbxjDtLiEQWJtViWXGHdP2w5F975MFkrpSzipjo04mkxN1g@mail.gmail.com>

On Thu, Jul 11, 2013 at 2:08 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 11/07/13 17:38, Kevin Goess wrote:
>
>> Circling back after an earlier question about this problem. We've
>> upgraded to 3.1.3-1.  We've moved the mnesia files to a dedicated 10k
>> sata drive via RABBITMQ_MNESIA_BASE, a new drive that nothing else is
>> using, on a xen virtual machine that is only running rabbitmq.  We
>> generally deal with about 20 messages per second.
>>
>> But we're seeing pretty heavy disk activity, with iowait 30-40%, and
>> iostat numbers like this:
>>
>> Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s
>> avgrq-sz avgqu-sz   await  svctm  %util
>> xvdbp1            0.00    60.00    0.00  143.40     0.00  1452.80
>>   10.13     0.88    6.14 4.22 60.48
>>
>> Is this expected?  That seems excessive, and I worry that the high
>> iowait could cause us problems as we grow, so I was hoping to get some
>> pointers to things to look at that to improve that.
>>
>
> My suspicious is that somehow your usage pattern results in a lot of
> queue/exchange/binding creation/deletion, which, if the entities involved
> are durable, require disk writes and fsyncs.
>
> To test the validity of that theory, please try to find out what files are
> seeing activity, and report back.
>


This is all the writing that's gone on in the last ten minutes:

$ find . -newer kg-test-timer -type f -ls
262153 10784 -rw-r--r--   1 root     root     11036923 Jul 16 12:31
./msg_store_persistent/41228.rdq
262155 16392 -rw-r--r--   1 root     root     16777655 Jul 16 12:21
./msg_store_persistent/41227.rdq
262274  120 -rw-r--r--   1 rabbitmq rabbitmq   116640 Jul 16 12:30
./queues/8EP2UVB3Z8SAIWFBFKQ0100K4/journal.jif
262166   32 -rw-r--r--   1 root     root        28222 Jul 16 12:28
./queues/9K0C0VGF04K4O788HH6ZFMDAG/4747.idx
262204   24 -rw-r--r--   1 rabbitmq rabbitmq    20000 Jul 16 12:30
./queues/9K0C0VGF04K4O788HH6ZFMDAG/journal.jif
262228    0 -rw-r--r--   1 rabbitmq rabbitmq        0 Jul 16 12:27
./queues/A6K4C7JLF1P0AHEXXN9633747/journal.jif
262172    4 -rw-r--r--   1 root     root           28 Jul 16 12:26
./queues/C8NMZYECUT2TCZUNODNUQ122Y/0.idx
262224    0 -rw-r--r--   1 rabbitmq rabbitmq        0 Jul 16 12:26
./queues/C8NMZYECUT2TCZUNODNUQ122Y/journal.jif
262291  136 -rw-r--r--   1 rabbitmq rabbitmq   134008 Jul 16 12:31
./queues/5W6SPLYHNTA4ZH2CONMRXOT90/journal.jif
262161   12 -rw-r--r--   1 root     root         8256 Jul 16 12:30
./queues/3GMBIL72D6Q6F4LC6TWTYCPWA/1.idx
262236    0 -rw-r--r--   1 rabbitmq rabbitmq        0 Jul 16 12:30
./queues/3GMBIL72D6Q6F4LC6TWTYCPWA/journal.jif
262234  424 -rw-r--r--   1 rabbitmq rabbitmq   430024 Jul 16 12:31
./queues/ERZ5DFKEUXBK1QJQJLBQN3KFI/journal.jif
262199  528 -rw-r--r--   1 rabbitmq rabbitmq   536208 Jul 16 12:30
./queues/DWEIOI0J2S6CMT74JYWUZXVL8/journal.jif
262282   28 -rw-r--r--   1 rabbitmq rabbitmq    21600 Jul 16 12:30
./queues/1XAUC81LT5GM7ZI05RROF4KL0/journal.jif
262297    0 -rw-r--r--   1 rabbitmq rabbitmq        0 Jul 16 12:19
./queues/31J4BX7549NFNZ1Q6XH1Z19MJ/journal.jif


and that list is almost identical to that for the last *hour*, with the
addition of these files

262152   80 -rw-r--r--   1 rabbitmq rabbitmq    78942 Jul 16 11:53
./msg_store_persistent/17778.rdq
262321    0 -rw-r--r--   1 rabbitmq rabbitmq        0 Jul 16 11:36
./queues/AVS8NDWHNCZ8X0Y2599HSOVJ0/journal.jif
262341    0 -rw-r--r--   1 rabbitmq rabbitmq        0 Jul 16 11:42
./queues/U7FN5251IRUUH23XQIPFTBND/journal.jif


Does that mean anything to you?  Is there a way we can match those
directory names with queues?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/5b69d6aa/attachment.htm>

From ajkedar at gmail.com  Tue Jul 16 23:10:11 2013
From: ajkedar at gmail.com (Amol Kedar)
Date: Tue, 16 Jul 2013 15:10:11 -0700 (PDT)
Subject: [rabbitmq-discuss] set/getTimeout in RabbitMQ for PHP
In-Reply-To: <CAMcAHLXAisK-ou6PDNZLSqsq5YDd8sfizDRMtLbtsdXziDo06w@mail.gmail.com>
References: <d67b7628-5823-436d-8bfb-a195e346227b@googlegroups.com>
	<CAMcAHLXAisK-ou6PDNZLSqsq5YDd8sfizDRMtLbtsdXziDo06w@mail.gmail.com>
Message-ID: <5c71787a-d6d4-485c-83f3-0f986a68806a@googlegroups.com>

hi i am trying  http://github.com/videlalvaro/php-amqplib

and it keeps giving me errors 
$ php amqp_consumer.php 
PHP Fatal error:  Class 'PhpAmqpLib\Connection\AMQPConnection' not found in 
/php-amqplib/demo/amqp_consumer.php on line 10

this is on ubuntu 10.04 and PHP 5.3.10-1ubuntu3
any clue?

On Thursday, June 27, 2013 3:40:07 AM UTC-4, Alvaro Videla wrote:
>
> Hi,
>
> I've never used this library. Maybe there's a bug there. Have you tried 
> contacted the library authors?
>
> In any case, there's also http://github.com/videlalvaro/php-amqplib which 
> supports timeouts on the "wait" method: 
> https://github.com/videlalvaro/php-amqplib/blob/master/PhpAmqpLib/Channel/AbstractChannel.php#L174
>
> Regards,
>
> Alvaro
>
>
>
> On Wed, Jun 19, 2013 at 8:40 AM, Iliya Isd <iliy... at gmail.com<javascript:>
> > wrote:
>
>> Hello! Having the next problem, maybe somebody has issued that. 
>> I'm trying to use the next function: 
>> http://php.net/manual/ru/amqpconnection.settimeout.php 
>> but nothing changes. Timeout isn't working. Thereby there's no way to 
>> avoid hanging up the site when trying to send message to rabbitMQ... 
>> Any ideas? 
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq... at lists.rabbitmq.com <javascript:>
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/74e9d61b/attachment.htm>

From mpietrek at skytap.com  Wed Jul 17 00:21:03 2013
From: mpietrek at skytap.com (Matt Pietrek)
Date: Tue, 16 Jul 2013 16:21:03 -0700
Subject: [rabbitmq-discuss] RabbitMQ 3.0.2 stops logging,
 but otherwise looks healthy?
In-Reply-To: <urm162a2iboqpfimg59jgwum.1374002175670@email.android.com>
References: <CACLE7iy4N6T73rnNEPQ_Oc8xDUEu1B605kXOD1uxEqKZegJVcA@mail.gmail.com>
	<urm162a2iboqpfimg59jgwum.1374002175670@email.android.com>
Message-ID: <CACLE7iw981oU+ZAx+rMBea-b4z9AciizTTUT5hPkOO-H7tY7KA@mail.gmail.com>

Here you go Mark. The file date/times line up with when I last saw logging
in the files:

23:14 PROD mpietrek at foomq1:/proc/16050$ sudo ls -latr fd
total 0
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 2 -> /foobar/logs/
foomq1.foo.bar.com/rabbitmq-server.log
dr-xr-xr-x 7 foobar foobar  0 2013-06-02 11:50 ..
dr-x------ 2 foobar foobar  0 2013-06-02 11:50 .
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 9 -> pipe:[122339989]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 8 -> /foobar/logs/
foomq1.foo.bar.com/rabbit at foomq1sasl.log
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 7 -> /foobar/logs/
foomq1.foo.bar.com/rabbit at foomq1.log
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 6 -> socket:[122339982]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 5 -> socket:[122339980]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 4 -> pipe:[122339970]
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 3 -> pipe:[122339970]
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 17 -> socket:[122340310]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 16 -> socket:[122340285]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 15 ->
/foobar/var/lib/rabbit at foomq1/msg_store_persistent/397.rdq
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 14 ->
/foobar/var/lib/rabbit at foomq1/msg_store_transient/0.rdq
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 13 ->
/foobar/var/lib/rabbit at foomq1/queues/D1KLLKOJLVJ4YZGYLP2D32A9W/journal.jif
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 12 -> pipe:[122339990]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 11 ->
/foobar/var/lib/rabbit at foomq1/LATEST.LOG
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 10 -> socket:[122339997]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 1 -> /foobar/logs/
foomq1.foo.bar.com/rabbitmq-server.log
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 0 -> /dev/null
lrwx------ 1 foobar foobar 64 2013-06-02 11:51 18 -> socket:[122340314]
l-wx------ 1 foobar foobar 64 2013-06-02 12:28 21 ->
/foobar/var/lib/rabbit at foomq1/queues/ETWUA9HXDWBIXFTEF0DVH5FBZ/journal.jif
lr-x------ 1 foobar foobar 64 2013-06-02 12:28 19 ->
/foobar/var/lib/rabbit at foomq1/queues/22TABTKBIJ6DQCA5GC6EZ0B8L/journal.jif
l-wx------ 1 foobar foobar 64 2013-06-02 13:12 22 ->
/foobar/var/lib/rabbit at foomq1/queues/A9AWP930R556ERL81W9PYEELL/journal.jif
lrwx------ 1 foobar foobar 64 2013-06-02 13:12 20 ->
/foobar/var/lib/rabbit at foomq1/queues/A8EPKFQ4VCO5A3APTTWYEQRFT/journal.jif


On Tue, Jul 16, 2013 at 12:19 PM, Jeffery, Mark <MJeffery at fnb.co.za> wrote:

>  Hello
>
> Assuming Linux, what does ls -latr show in the fd directory in the rabbitmq process's directory under /proc ?
>
>
> Matt Pietrek <mpietrek at skytap.com> wrote:
>
>
>    This is admittedly a shot in the dark, and with limited repro details,
> but asking if somebody else has seen this.
>
>  We run our clustered RabbitMQ 3.0.2 brokers in production without
> restarts for months at a time. Everything is looking good - No memory
> leaks, no out-of-disk-space, etc...
>
>  However, in looking at the rabbit@<node>.log and rabbit@<node>-sasl.log
> files, I noticed that at some point (e.g. a month earlier), no new entries
> were being added to the log file. Normally there's a steady stream of new
> connections and connection drops.
>
> I've listed the open file handles from the rabbitmq beam instance and I
> still see live file handles for the log files.
>
>  Anybody have any idea what might be happening? And better still, how we
> might kick things without restarting the broker?
>
>  Thanks,
>
> Matt
>
>    To read FirstRand Bank's Disclaimer for this email click on the
> following address or copy into your Internet browser:
> https://www.fnb.co.za/disclaimer.html
>
> ****
>
> If you are unable to access the Disclaimer, send a blank e-mail to
> firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the
> Disclaimer.****
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/435cb5db/attachment.htm>

From mpietrek at skytap.com  Wed Jul 17 00:26:54 2013
From: mpietrek at skytap.com (Matt Pietrek)
Date: Tue, 16 Jul 2013 16:26:54 -0700
Subject: [rabbitmq-discuss] Strange failures (Generic server <xxx>
	terminating) from RabbitMQ
Message-ID: <CACLE7iwj6k19gJhATX4U1Msf7YLubjHPxr+5=b+5yF6jci9mwA@mail.gmail.com>

We're seeing a bunch of failure messages from our Ruby clients to RabbitMQ
3.0.2. From the client side, we see 541 "Internal Error"

On the server side logs, we see a bunch of errors. Normally I can at least
hazard a guess what's wrong, but I have no idea with this:


=ERROR REPORT==== 16-Jul-2013::22:43:15 ===
** Generic server <0.4358.0> terminating
** Last message in was {can_send,<0.4355.0>,true}
** When Server state == {lim,1,<0.4359.0>,false,[],1}
** Reason for termination ==
** {function_clause,[{orddict,update,

[<0.4355.0>,#Fun<rabbit_limiter.3.113433752>,[]],
                              [{file,"orddict.erl"},{line,153}]},
                     {rabbit_limiter,limit_queue,2,[]},
                     {rabbit_limiter,handle_call,3,[]},
                     {gen_server2,handle_msg,2,[]},
                     {proc_lib,init_p_do_apply,3,
                               [{file,"proc_lib.erl"},{line,227}]}]}



Or like this:
--------------------


=ERROR REPORT==== 16-Jul-2013::22:44:15 ===
** Generic server <0.4563.0> terminating
** Last message in was {'$gen_cast',
                           {method,
                               {'basic.consume',0,<<"web-tasks-mpietrek">>,

<<"web-tasks-mpietrek-1374014655000-264079359112">>,
                                   false,false,false,false,[]},
                               none,noflow}}
** When Server state == {ch,running,rabbit_framing_amqp_0_9_1,41,<0.4540.0>,
                         <0.4560.0>,<0.4540.0>,
                         <<"192.168.78.13:57671 -> 192.168.78.50:5672">>,
                         {lstate,<0.4561.0>,true,false},
                         none,2,
                         {[],[]},
                         {user,<<"guest">>,
                          [administrator],
                          rabbit_auth_backend_internal,
                          {internal_user,<<"guest">>,

<<78,56,17,4,226,151,136,14,156,84,34,25,101,29,104,
                             78,125,130,202,207>>,
                           [administrator]}},
                         <<"/">>,<<"web-tasks-mpietrek">>,
                         {dict,1,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],
                            [[<0.4558.0>|
                              {resource,<<"/">>,queue,
                               <<"web-tasks-mpietrek">>}]],
                            [],[],[],[],[],[],[],[]}}},
                         {dict,3,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],
                            [[<0.4558.0>|#Ref<0.0.0.83887>]],
                            [],[],[],[],
                            [[<2783.2507.0>|#Ref<0.0.0.83888>]],
                            [[<2782.2563.0>|#Ref<0.0.0.83889>]],
                            [],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {set,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         {set,1,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                          {{[],[],[],[],[],[],[],
                            [<0.4558.0>],
                            [],[],[],[],[],[],[],[]}}},
                         <0.4539.0>,
                         {state,fine,5000,#Ref<0.0.0.86733>},
                         false,1,
                         {{0,nil},{0,nil}},
                         [],
                         [{<<"consumer_cancel_notify">>,bool,true}],
                         none}

Or like this:
--------------------

=ERROR REPORT==== 16-Jul-2013::22:44:15 ===
** Generic server <0.4561.0> terminating
** Last message in was {can_send,<0.4558.0>,true}
** When Server state == {lim,1,<0.4563.0>,false,[],1}
** Reason for termination ==
** {function_clause,[{orddict,update,

[<0.4558.0>,#Fun<rabbit_limiter.3.113433752>,[]],
                              [{file,"orddict.erl"},{line,153}]},
                     {rabbit_limiter,limit_queue,2,[]},
                     {rabbit_limiter,handle_call,3,[]},
                     {gen_server2,handle_msg,2,[]},
                     {proc_lib,init_p_do_apply,3,
                               [{file,"proc_lib.erl"},{line,227}]}]}

=ERROR REPORT==== 16-Jul-2013::22:44:15 ===
** Generic server <0.4558.0> terminating
** Last message in was {basic_consume,false,<0.4563.0>,<0.4561.0>,true,

<<"web-tasks-mpietrek-1374014655000-264079359112">>,
                           false,none,
                           {'basic.consume_ok',

<<"web-tasks-mpietrek-1374014655000-264079359112">>}}
** When Server state == {q,
                         {amqqueue,
                          {resource,<<"/">>,queue,<<"web-tasks-mpietrek">>},
                          true,false,none,[],<0.4558.0>,[],[],
                          [{vhost,<<"/">>},
                           {name,<<"ha-web-tasks-mpietrek">>},
                           {pattern,<<"web-tasks-mpietrek">>},
                           {definition,[{<<"ha-mode">>,<<"all">>}]},
                           {priority,0}],
                          []},
                         none,true,rabbit_mirror_queue_master,
                         {state,
                          {resource,<<"/">>,queue,<<"web-tasks-mpietrek">>},
                          <0.4566.0>,<0.4565.0>,rabbit_variable_queue,
                          {vqstate,
                           {0,{[],[]}},
                           {0,{[],[]}},
                           {delta,undefined,0,undefined},
                           {0,{[],[]}},
                           {13,
                            {[{msg_status,12,

<<114,86,130,79,196,29,163,190,216,213,230,38,
                                 174,139,39,60>>,
                               {basic_message,
                                {resource,<<"/">>,exchange,<<"skytap">>},
                                [<<"web-tasks-mpietrek.mpietrek.default">>],
                                {content,60,
                                 {'P_basic',<<"application/octet-stream">>,

undefined,undefined,2,0,undefined,undefined,
                                  undefined,undefined,undefined,undefined,
                                  undefined,undefined,undefined},

<<152,0,24,97,112,112,108,105,99,97,116,105,
                                   111,110,47,111,99,116,101,116,45,115,116,
                                   114,101,97,109,2,0>>,
                                 rabbit_framing_amqp_0_9_1,

[<<"{\"payload\":{\"object\":\"BAhvOh1EZWxldGVFeHBpcmVkVXBsb2Fkc1Rhc2sGOhJAZ3JhY2VfcGVyaW9k\\nbzocQWN0aXZlU3VwcG9ydDo6RHVyYXRpb24HOgtAdmFsdWVpAwB1EjoLQHBh\\ncnRzWwZbBzoJZGF5c2kT\\n\"},\"_serialization_type\":\"marshal\",\"_timestamp\":\"2013-07-16T22:43:55Z\",\"_message_type\":\"request\",\"_unique_id\":\"app1:req:wfe-em-init.80690eb0d0940130f02f000c291bd1d8.2.372:336\",\"caller_context\":\"wfe-em-init.80690eb0d0940130f02f000c291bd1d8.2.373\",\"action\":\"async-task\",\"_mq_protocol_version\":1}">>]},

<<114,86,130,79,196,29,163,190,216,213,230,38,
                                  174,139,39,60>>,
                                true},
                               true,false,true,true,
                               {message_properties,undefined,false}},
                              {msg_status,11,

<<12,29,215,111,220,221,165,115,106,150,132,130,
                                 118,94,193,26>>,
                               {basic_message,
                                {resource,<<"/">>,exchange,<<"skytap">>},
                                [<<"web-tasks-mpietrek.mpietrek.default">>],
                                {content,60,
                                 {'P_basic',<<"application/octet-stream">>,

undefined,undefined,2,0,undefined,undefined,
                                  undefined,undefined,undefined,undefined,
                                  undefined,undefined,undefined},

<<152,0,24,97,112,112,108,105,99,97,116,105,
                                   111,110,47,111,99,116,101,116,45,115,116,
                                   114,101,97,109,2,0>>,
                                 rabbit_framing_amqp_0_9_1,

<rest of error omitted>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130716/7f373738/attachment.htm>

From liangrubo at bytedance.com  Wed Jul 17 03:18:33 2013
From: liangrubo at bytedance.com (Rubo Liang)
Date: Wed, 17 Jul 2013 10:18:33 +0800
Subject: [rabbitmq-discuss] why rabbit eating so much memory?
In-Reply-To: <51DE77C2.5050704@rabbitmq.com>
References: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
	<51DD920B.9080406@rabbitmq.com>
	<CA+BFTFtDBQ0AvOyxkDmM=+P4PHYHK9=mPy20-3wQCBF7ZBmCjg@mail.gmail.com>
	<51DE77C2.5050704@rabbitmq.com>
Message-ID: <CA+BFTFvB+d6-q33zMfTgsbHmGFitCKde_Aw_C_Xa=XZSkEP6wA@mail.gmail.com>

Meet this problem again today.

see 'rabbitmqctl report' output at:
https://gist.github.com/liangrubo/6017129

more information:
rabbit at in16-011, rabbit at in16-012, rabbit at in16-013 are clustered, a virtual
ip is bind to rabbit at in16-011, client connects to the service with virtual
ip. rabbit at in16-013 took a lot memory, causing all connections to be
blocked. This is the output of 'rabbitmqctl report' on rabbit at in16-013.

A screenshot of the management plugin is attached.

Run 'rabbitmqctl stop_app; rabbitmqctl start_app' on
rabbit at in16-13resolves the problem.



On Thu, Jul 11, 2013 at 5:15 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 11/07/13 02:35, Rubo Liang wrote:
>
>> There is no other vhosts. I can't keep the problem for investigation
>> since it is a production server.
>>
>
> As Emile suggested, please post the output of 'rabbitmqctl report' when
> you next encounter a high memory use situation.
>
>
>  I am new to rabbit and this is just one of a series problems I meet. I
>> am not sure whether it helps but I am going to list the problems I
>> experienced to provide more context.
>>
>
> Please continue to report individual issues on separate email thread.
>
> Regards,
>
> Matthias.
>



-- 
???
???+86-18600464396
?????????????48?????B?10?
???100088
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/a5b09067/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screen Shot 2013-07-17 at ??10.00.42.png
Type: image/png
Size: 126986 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/a5b09067/attachment.png>

From matthias at rabbitmq.com  Wed Jul 17 03:42:48 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 03:42:48 +0100
Subject: [rabbitmq-discuss] Strange failures (Generic server <xxx>
 terminating) from RabbitMQ
In-Reply-To: <CACLE7iwj6k19gJhATX4U1Msf7YLubjHPxr+5=b+5yF6jci9mwA@mail.gmail.com>
References: <CACLE7iwj6k19gJhATX4U1Msf7YLubjHPxr+5=b+5yF6jci9mwA@mail.gmail.com>
Message-ID: <51E604A8.1040502@rabbitmq.com>

Matt,

On 17/07/13 00:26, Matt Pietrek wrote:
> We're seeing a bunch of failure messages from our Ruby clients to
> RabbitMQ 3.0.2. From the client side, we see 541 "Internal Error"
>
> On the server side logs, we see a bunch of errors. Normally I can at
> least hazard a guess what's wrong, but I have no idea with this:
>
>
> =ERROR REPORT==== 16-Jul-2013::22:43:15 ===
> ** Generic server <0.4358.0> terminating
> ** Last message in was {can_send,<0.4355.0>,true}
> ** When Server state == {lim,1,<0.4359.0>,false,[],1}
> ** Reason for termination ==
> ** {function_clause,[{orddict,update,
>
> [<0.4355.0>,#Fun<rabbit_limiter.3.113433752>,[]],
>                                [{file,"orddict.erl"},{line,153}]},
>                       {rabbit_limiter,limit_queue,2,[]},
>                       {rabbit_limiter,handle_call,3,[]},
>                       {gen_server2,handle_msg,2,[]},
>                       {proc_lib,init_p_do_apply,3,
>                                 [{file,"proc_lib.erl"},{line,227}]}]}
>

I think this is a duplicate of the problem reported at 
http://rabbitmq.1065348.n5.nabble.com/Rabbit-3-1-1-crash-question-td27540.html, 
the fix for which will appear in the next bugfix release.

However, we were quite that the bug was only introduced in 3.1.0, so 
it's surprising to see this in 3.0.2. The code has certainly changed a 
lot on that area, so I'd advise upgrading in any case.

Regards,

Matthias.

From MJeffery at fnb.co.za  Wed Jul 17 06:51:48 2013
From: MJeffery at fnb.co.za (Jeffery, Mark)
Date: Wed, 17 Jul 2013 05:51:48 +0000
Subject: [rabbitmq-discuss] RabbitMQ 3.0.2 stops logging,
 but otherwise looks healthy?
In-Reply-To: <CACLE7iw981oU+ZAx+rMBea-b4z9AciizTTUT5hPkOO-H7tY7KA@mail.gmail.com>
References: <CACLE7iy4N6T73rnNEPQ_Oc8xDUEu1B605kXOD1uxEqKZegJVcA@mail.gmail.com>
	<urm162a2iboqpfimg59jgwum.1374002175670@email.android.com>,
	<CACLE7iw981oU+ZAx+rMBea-b4z9AciizTTUT5hPkOO-H7tY7KA@mail.gmail.com>
Message-ID: <8e663phnfmx6mqp1bo7cp2ke.1374039837754@email.android.com>

Hello

You mentioned a cluster.
Is this happening on every box ?

Also, is the rabbit process running as "foobar" ?

Jeff

Matt Pietrek <mpietrek at skytap.com> wrote:



Here you go Mark. The file date/times line up with when I last saw logging in the files:

23:14 PROD mpietrek at foomq1:/proc/16050$ sudo ls -latr fd
total 0
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 2 -> /foobar/logs/foomq1.foo.bar.com/rabbitmq-server.log<http://foomq1.foo.bar.com/rabbitmq-server.log>
dr-xr-xr-x 7 foobar foobar  0 2013-06-02 11:50 ..
dr-x------ 2 foobar foobar  0 2013-06-02 11:50 .
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 9 -> pipe:[122339989]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 8 -> /foobar/logs/foomq1.foo.bar.com/rabbit at foomq1sasl.log<http://foomq1.foo.bar.com/rabbit at foomq1sasl.log>
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 7 -> /foobar/logs/foomq1.foo.bar.com/rabbit at foomq1.log<http://foomq1.foo.bar.com/rabbit at foomq1.log>
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 6 -> socket:[122339982]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 5 -> socket:[122339980]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 4 -> pipe:[122339970]
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 3 -> pipe:[122339970]
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 17 -> socket:[122340310]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 16 -> socket:[122340285]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 15 -> /foobar/var/lib/rabbit at foomq1/msg_store_persistent/397.rdq
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 14 -> /foobar/var/lib/rabbit at foomq1/msg_store_transient/0.rdq
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 13 -> /foobar/var/lib/rabbit at foomq1/queues/D1KLLKOJLVJ4YZGYLP2D32A9W/journal.jif
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 12 -> pipe:[122339990]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 11 -> /foobar/var/lib/rabbit at foomq1/LATEST.LOG
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 10 -> socket:[122339997]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 1 -> /foobar/logs/foomq1.foo.bar.com/rabbitmq-server.log<http://foomq1.foo.bar.com/rabbitmq-server.log>
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 0 -> /dev/null
lrwx------ 1 foobar foobar 64 2013-06-02 11:51 18 -> socket:[122340314]
l-wx------ 1 foobar foobar 64 2013-06-02 12:28 21 -> /foobar/var/lib/rabbit at foomq1/queues/ETWUA9HXDWBIXFTEF0DVH5FBZ/journal.jif
lr-x------ 1 foobar foobar 64 2013-06-02 12:28 19 -> /foobar/var/lib/rabbit at foomq1/queues/22TABTKBIJ6DQCA5GC6EZ0B8L/journal.jif
l-wx------ 1 foobar foobar 64 2013-06-02 13:12 22 -> /foobar/var/lib/rabbit at foomq1/queues/A9AWP930R556ERL81W9PYEELL/journal.jif
lrwx------ 1 foobar foobar 64 2013-06-02 13:12 20 -> /foobar/var/lib/rabbit at foomq1/queues/A8EPKFQ4VCO5A3APTTWYEQRFT/journal.jif


On Tue, Jul 16, 2013 at 12:19 PM, Jeffery, Mark <MJeffery at fnb.co.za<mailto:MJeffery at fnb.co.za>> wrote:

Hello

Assuming Linux, what does ls -latr show in the fd directory in the rabbitmq process's directory under /proc ?


Matt Pietrek <mpietrek at skytap.com<mailto:mpietrek at skytap.com>> wrote:



This is admittedly a shot in the dark, and with limited repro details, but asking if somebody else has seen this.

We run our clustered RabbitMQ 3.0.2 brokers in production without restarts for months at a time. Everything is looking good - No memory leaks, no out-of-disk-space, etc...

However, in looking at the rabbit@<node>.log and rabbit@<node>-sasl.log files, I noticed that at some point (e.g. a month earlier), no new entries were being added to the log file. Normally there's a steady stream of new connections and connection drops.

I've listed the open file handles from the rabbitmq beam instance and I still see live file handles for the log files.

Anybody have any idea what might be happening? And better still, how we might kick things without restarting the broker?

Thanks,

Matt

To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser:
https://www.fnb.co.za/disclaimer.html

If you are unable to access the Disclaimer, send a blank e-mail to firstrandbankdisclaimer at fnb.co.za<mailto:firstrandbankdisclaimer at fnb.co.za> and we will send you a copy of the Disclaimer.

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com<mailto:rabbitmq-discuss at lists.rabbitmq.com>
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss



To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser: 
https://www.fnb.co.za/disclaimer.html 

If you are unable to access the Disclaimer, send a blank e-mail to
firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the Disclaimer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/cf7a4534/attachment.htm>

From 314992959 at qq.com  Wed Jul 17 07:30:58 2013
From: 314992959 at qq.com (3k4b251)
Date: Tue, 16 Jul 2013 23:30:58 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work after
 amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
Message-ID: <1374042658127-28119.post@n5.nabble.com>

But  connection  and  channels  still  alive.   But    RPC-style commands 
doesn't  work  such as   amq_basic_consume()....     So I  guess  servers 
lock  my  connection  or  channel   when  got  a  exception .  How  to 
unlock  it?  



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-RPC-style-commands-doesn-t-work-after-amqp-get-rpc-reply-return-AMQP-RESPONSE-SERVER-EXCEN-tp28119.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Wed Jul 17 07:35:50 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 07:35:50 +0100
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
Message-ID: <51E63B46.2020308@rabbitmq.com>

Mark,

On 15/07/13 17:45, mark.geib at echostar.com wrote:
> Recently we started a new project using rabbitmq to handle large amounts
> of data, over 40kHz message rate and message sizes of a few kilobytes.
> The project depends on using a topic exchange with routing keys of the
> form AA.BB.CC.DD.EE. Consumers are able to bind a queue with a given
> wildcard pattern in order to receive a subset of the message stream
> published by one publisher. There is always one consumer that binds with
> the "#" routing key to receive all messages.
>
> We have started testing against a broker running on a machine with 8
> cores, about 2GHz each, with 32GB ram, and over a terabyte of free disk
> space. I am publishing with a single erlang client to a topic exchange.
> I am only able to publish at about 15kHz before I see flow control kick
> in on the management UI for the connection. This is with no queue bound
> to the exchange, so rabbitmq only needs to receive the messages and drop
> them. So at 15kHz I see flow control kicking in, but the machine is not
> busy, all 8 cores show 85-95% idle. It looks like the server is
> basically idle.

With a single publisher, and no bound queues, there is very limited 
scope for any parallelism, so it is not surprising to see low CPU 
utilisation. Having said that, the scenario you outline should keep 
about 2 cores busy, so on an 8-core machine you should only see 75% idle 
overall. And the rate you are seeing is very low too.

Please run the MulticastMain example that ships with the Java client, to 
get a baseline performance figure for comparison. When I run that on my 
machine, which has a spec quite similar to the one you describe, I see 
the following:

$ sh runjava.sh com.rabbitmq.examples.MulticastMain -y 0 -t topic -s 10000
starting producer #0
time: 1.000s, sent: 23808 msg/s
time: 2.000s, sent: 51565 msg/s
time: 3.000s, sent: 55242 msg/s
time: 4.000s, sent: 53159 msg/s
time: 5.000s, sent: 48668 msg/s
time: 6.000s, sent: 50210 msg/s
time: 7.000s, sent: 54886 msg/s
time: 8.001s, sent: 54003 msg/s
time: 9.001s, sent: 52832 msg/s
time: 10.001s, sent: 51103 msg/s
time: 11.001s, sent: 54270 msg/s
time: 12.001s, sent: 50181 msg/s
time: 13.001s, sent: 53384 msg/s
time: 14.001s, sent: 52203 msg/s
time: 15.001s, sent: 54684 msg/s
time: 16.001s, sent: 50603 msg/s

So that's ~50kHz for 10,000 byte messages published to a topic exchange 
with no bound queues. With hipe compilation enabled that increases to 
~70kHz. Obviously the above was run over localhost rather than the 
network, but that should have no bearing on throughput.

There was one performance-related bug in the Erlang client which got 
fixed in 3.1.2: "25521 fix negotiated frame-max handling, which was 
being ignored (since 2.0.0)". However, that shouldn't have much of an 
effect for small(ish) messages, so I doubt that's your problem.


Regards,

Matthias.

From michael.s.klishin at gmail.com  Wed Jul 17 07:39:07 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 17 Jul 2013 10:39:07 +0400
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <1374042658127-28119.post@n5.nabble.com>
References: <1374042658127-28119.post@n5.nabble.com>
Message-ID: <CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>

2013/7/17 3k4b251 <314992959 at qq.com>

> But  connection  and  channels  still  alive.
>

Are you sure that the channels are still open?


>   But    RPC-style commands
> doesn't  work  such as   amq_basic_consume()....
>

Can you be more specific than "does not work"?


> So I  guess  servers
> lock  my  connection  or  channel   when  got  a  exception .  How  to
> unlock  it?
>

If you get a channel exception, the channel is closed and can no longer
be used. Inspecting RabbitMQ log will make it easy to notice.

Another thing that may be happening is RabbitMQ throttling your connection.
It can be easily seen in the management UI and should not affect
channels that only consume messages.

I assume AMQP_RESPONSE_SERVER_EXCEPTION indicates
a channel exception. You need to investigate what exactly causes
it (see the log) or use a new channel.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/a6b570e7/attachment.htm>

From 314992959 at qq.com  Wed Jul 17 10:35:53 2013
From: 314992959 at qq.com (3k4b251)
Date: Wed, 17 Jul 2013 02:35:53 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
Message-ID: <1374053753330-28122.post@n5.nabble.com>

1.  Are you sure that the channels are still open?

Re:  I'm sure.   and    RabbitMQ log  show  me  nothing  about  channel 
close;

2. Can you be more specific than "does not work"?

  ok,  for  example,   I try  to  use   amqp_queue_delete()  to  delete  a 
queue  named "123456".     
But  I  didn't create  the quque  in  rabbitmq server  before.     

  So  when   I   use  amqp_get_rpc_reply()  after amqp_queue_delete(),  I 
got  the  return  :  AMQP_RESPONSE_SERVER_EXCEPTION..   

  And  after this, I check out   connection  and  channel, I found  they are
still alive. 

then  I  check out  connection Log, I see the  last  information was  
"    ===connection <0.1623.0>, channel 1 - soft error:
{amqp_error,not_found,"no queue '123456' in vhost '/'",'queue.delete'}    " 

It seems  like  that  I just fail this command  and  I can stiil do
others,So  I try to do  some  RPC-style  commands diffrent  ,  I   use  
amqp_queue_declare()  and I block  there.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-RPC-style-commands-doesn-t-work-after-amqp-get-rpc-reply-return-AMQP-RESPONSE-SERVER-EXCEN-tp28119p28122.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Wed Jul 17 12:01:12 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 17 Jul 2013 12:01:12 +0100
Subject: [rabbitmq-discuss] why rabbit eating so much memory?
In-Reply-To: <CA+BFTFvB+d6-q33zMfTgsbHmGFitCKde_Aw_C_Xa=XZSkEP6wA@mail.gmail.com>
References: <CA+BFTFv3nF8ZQ0MaX2WE4_0yGN78XU1b5aKUaeHkMxc3XybFGA@mail.gmail.com>
	<51DD920B.9080406@rabbitmq.com>
	<CA+BFTFtDBQ0AvOyxkDmM=+P4PHYHK9=mPy20-3wQCBF7ZBmCjg@mail.gmail.com>
	<51DE77C2.5050704@rabbitmq.com>
	<CA+BFTFvB+d6-q33zMfTgsbHmGFitCKde_Aw_C_Xa=XZSkEP6wA@mail.gmail.com>
Message-ID: <51E67978.9060206@rabbitmq.com>


Hi,

On 17/07/13 03:18, Rubo Liang wrote:
> Meet this problem again today.
> 
> see 'rabbitmqctl report' output
> at: https://gist.github.com/liangrubo/6017129

Thanks for sending this information. The report shows that queues use
less that 3Mb of RAM. It also shows ~500 connections and channels. If
your application needs that many channels then that is nothing to worry
about. There is nothing there that would explain why 23Gb of RAM is
being used though.

The memory appears to grow only on the slave nodes. I see that
rabbit at in16-011 is the master node for all queues and does not suffer
from excessive memory use. In order to pinpoint the source of the leak,
could you please execute another command on both slave nodes, one after
the other? For each slave node do the following:

If you are able to bring more swapspace online then please do so. If
there are any other non-critical processes on the machine then please
stop them, as this command has the potential to impose heavy load.
Please be aware that this command could cause the node to crash. If you
are not comfortable with this prospect then don't proceed.

Otherwise please run this command:

rabbitmqctl eval 'io:put_chars(standard_error, "this should appear in
startup_err\n").'

and check that the expected text appeared in startup_err (normally in
/var/log/rabbitmq). If the text did not appear then do not proceed.

Otherwise please run this command:

rabbitmqctl eval 'erlang:process_display(element(2,
hd(lists:reverse(lists:sort([{process_info(P, memory), P} || P <-
erlang:processes()])))), backtrace).'

The command will return and the startup_err file should start growing
soon afterwards. It could take a long time until it stops growing. When
it stops growing then repeat the process for the other slave node.
Please compress and send both startup_err files to me.



-Emile




From matthias at rabbitmq.com  Wed Jul 17 13:12:19 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 13:12:19 +0100
Subject: [rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing
 in the queues
In-Reply-To: <CABZkbxjDtLiEQWJtViWXGHdP2w5F975MFkrpSzipjo04mkxN1g@mail.gmail.com>
References: <CABZkbxiMPGZqx5Db5p2T_g0-wa2R64EDxiD0kqy4-jX-DabB1w@mail.gmail.com>
	<51DF1EEA.3040306@rabbitmq.com>
	<CABZkbxjDtLiEQWJtViWXGHdP2w5F975MFkrpSzipjo04mkxN1g@mail.gmail.com>
Message-ID: <51E68A23.1070208@rabbitmq.com>

Kevin,

On 16/07/13 20:33, Kevin Goess wrote:
> On Thu, Jul 11, 2013 at 2:08 PM, Matthias Radestock
> <matthias at rabbitmq.com <mailto:matthias at rabbitmq.com>> wrote:
>     My suspicious is that somehow your usage pattern results in a lot of
>     queue/exchange/binding creation/deletion, which, if the entities
>     involved are durable, require disk writes and fsyncs.
>
>     To test the validity of that theory, please try to find out what
>     files are seeing activity, and report back.
>
> This is all the writing that's gone on in the last ten minutes:
> [...a few .rdq, .idx and journal.jif files...]

Evidently my theory was wrong.

So what else could be causing the high disk activity / iowait with a 
message rate of just ~20Hz? Well, rabbit has a number of disk io 
optimisations along the lines of "perform an fsync if some data has been 
written and a) we are idle, or b) a certain amount of time has passed". 
With the low message rate of your rabbit it will operate in mode (a), 
which does actually increase disk io activity but provides better 
overall performance and reliability than mode (b).

So nothing to worry about.

Matthias.

From sr.aathithyan at outlook.com  Wed Jul 17 13:25:43 2013
From: sr.aathithyan at outlook.com (Aathithyan SR)
Date: Wed, 17 Jul 2013 12:25:43 +0000
Subject: [rabbitmq-discuss] Threading In RabbitMQ
Message-ID: <BAY176-W4577B00274A4DE041C0F6AEC610@phx.gbl>

Hi ,
I am processing a large set of urls using Rabbitmq(perl). currently i can able to fetch only single URL from the queue ,so this make delay in completing the process.I want to implement threading so that if i can able to finish the process soon.I need your help in implementing threading in Perl worker .thanks in advance 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/7e75f9f1/attachment.htm>

From emile at rabbitmq.com  Wed Jul 17 13:36:10 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 17 Jul 2013 13:36:10 +0100
Subject: [rabbitmq-discuss] Threading In RabbitMQ
In-Reply-To: <BAY176-W4577B00274A4DE041C0F6AEC610@phx.gbl>
References: <BAY176-W4577B00274A4DE041C0F6AEC610@phx.gbl>
Message-ID: <51E68FBA.7050901@rabbitmq.com>

On 17/07/13 13:25, Aathithyan SR wrote:
> I need your help in implementing threading in Perl worker

For the best chance of an answer you should state which Perl library you
are using. If you get no reply then consider asking a Perl forum.



-Emile




From mklishin at gopivotal.com  Wed Jul 17 14:29:13 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 17 Jul 2013 17:29:13 +0400
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
	after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <1374053753330-28122.post@n5.nabble.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<1374053753330-28122.post@n5.nabble.com>
Message-ID: <427D3FEE-9341-44AC-90BA-6A9DD110B198@gopivotal.com>

3k4b251:

> then  I  check out  connection Log, I see the  last  information was  
> "    ===connection <0.1623.0>, channel 1 - soft error:
> {amqp_error,not_found,"no queue '123456' in vhost '/'",'queue.delete'}    " 

You need to make sure the queue "123456" is declared before you try to delete it.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/9dd0de65/attachment.pgp>

From bison_art at o2.pl  Wed Jul 17 14:57:03 2013
From: bison_art at o2.pl (rabbit15)
Date: Wed, 17 Jul 2013 06:57:03 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51E3B434.9070804@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
Message-ID: <1374069423122-28128.post@n5.nabble.com>

Hi, thanks for reply!
Could you tell me when paging-free queues will be implemented?
I have changed watermark to 100 and this doesn't prevent paging. I have a
lot of free memory when it started to slow down.

Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28128.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Wed Jul 17 15:15:22 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 15:15:22 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374069423122-28128.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
Message-ID: <51E6A6FA.2050303@rabbitmq.com>

On 17/07/13 14:57, rabbit15 wrote:
> Could you tell me when paging-free queues will be implemented?

Nope. It's not on our immediate todo list.

> I have changed watermark to 100 and this doesn't prevent paging. I have a
> lot of free memory when it started to slow down.

That doesn't seem right. With a watermark of 100.0 no paging should take 
place until way more than available system memory is used.

Are you sure the settings took effect? Check with 'rabbitmqctl 
environment'; it should include a line

  {vm_memory_high_watermark,100},

If that line *is* there and you still observe queue paging, please post 
the output of 'rabbitmqctl report'.

Matthias.

From Mark.Geib at echostar.com  Wed Jul 17 16:07:01 2013
From: Mark.Geib at echostar.com (Geib, Mark)
Date: Wed, 17 Jul 2013 15:07:01 +0000
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <51E63B46.2020308@rabbitmq.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
Message-ID: <CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>

Mathias,

I just ran the same, version 3.1.3 java client against my 3.1.1-1 broker.

sh runjava.sh com.rabbitmq.examples.MulticastMain -y 0 -t topic -s 10000
starting producer #0
time: 1.000s, sent: 3481 msg/s
time: 2.001s, sent: 9664 msg/s
time: 3.004s, sent: 12445 msg/s
time: 4.004s, sent: 19246 msg/s
time: 5.005s, sent: 15938 msg/s
time: 6.005s, sent: 15249 msg/s
time: 7.005s, sent: 14886 msg/s
time: 8.005s, sent: 13707 msg/s
time: 9.005s, sent: 16969 msg/s
time: 10.007s, sent: 13815 msg/s
time: 11.012s, sent: 18262 msg/s
time: 12.012s, sent: 14431 msg/s
time: 13.016s, sent: 13943 msg/s
time: 14.016s, sent: 15504 msg/s
time: 15.017s, sent: 16091 msg/s
time: 16.017s, sent: 18883 msg/s
time: 17.020s, sent: 16270 msg/s
time: 18.023s, sent: 13315 msg/s
time: 19.023s, sent: 15965 msg/s
time: 20.023s, sent: 12768 msg/s

Mark Geib
Principal Engineer
Cheyenne Software Engineering
mark.geib at echostar.com / 35-215


?We, the unwilling, led by the unknowing, are doing the impossible for the ungrateful. We have done so much, for so long, with so little, we are now qualified to do anything with nothing.? 
? Mother Teresa


On Jul 17, 2013, at 12:35 AM, Matthias Radestock wrote:

> sh runjava.sh com.rabbitmq.examples.MulticastMain -y 0 -t topic -s 10000


From kgoess at bepress.com  Wed Jul 17 16:20:44 2013
From: kgoess at bepress.com (Kevin Goess)
Date: Wed, 17 Jul 2013 08:20:44 -0700
Subject: [rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing
 in the queues
In-Reply-To: <51E68A23.1070208@rabbitmq.com>
References: <CABZkbxiMPGZqx5Db5p2T_g0-wa2R64EDxiD0kqy4-jX-DabB1w@mail.gmail.com>
	<51DF1EEA.3040306@rabbitmq.com>
	<CABZkbxjDtLiEQWJtViWXGHdP2w5F975MFkrpSzipjo04mkxN1g@mail.gmail.com>
	<51E68A23.1070208@rabbitmq.com>
Message-ID: <CABZkbxiK1D2Cm7F1dEgbV1qfjPQHA9Oz0+snQx=hsToHJhJZbw@mail.gmail.com>

On Wed, Jul 17, 2013 at 5:12 AM, Matthias Radestock wrote:

> So nothing to worry about.


Right on, thanks for the feedback.

I tried your inotifywait suggestion and it showed activity on the same
files.  That's a new tool to me, thanks for that as well!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/338e0a92/attachment.htm>

From 0x6e6562 at gmail.com  Wed Jul 17 16:38:14 2013
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Wed, 17 Jul 2013 16:38:14 +0100
Subject: [rabbitmq-discuss] erlang-rfc4627-wrapper tags
Message-ID: <etPan.51e6ba66.6de91b18.441b@backd8>

Hi guys,

Is there a reason why the hg tags for?erlang-rfc4627-wrapper stop at 3_1_0?

Cheers,

Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/4c29ec62/attachment.htm>

From emile at rabbitmq.com  Wed Jul 17 16:54:02 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Wed, 17 Jul 2013 16:54:02 +0100
Subject: [rabbitmq-discuss] erlang-rfc4627-wrapper tags
In-Reply-To: <etPan.51e6ba66.6de91b18.441b@backd8>
References: <etPan.51e6ba66.6de91b18.441b@backd8>
Message-ID: <51E6BE1A.2010701@rabbitmq.com>


Hi Ben,

On 17/07/13 16:38, Ben Hood wrote:
> Hi guys,
> 
> Is there a reason why the hg tags for erlang-rfc4627-wrapper stop at 3_1_0?

Later tags were defined on the stable branch only. Thanks for pointing
this out. I've just merged the stable branch into default which should
bring them into view as soon as you pull the latest version.



-Emile









(in the interests of fostering an inclusive community we prefer gender
neutral salutations)



From carlo.bertoldi at gmail.com  Wed Jul 17 13:51:03 2013
From: carlo.bertoldi at gmail.com (Carlo Bertoldi)
Date: Wed, 17 Jul 2013 05:51:03 -0700 (PDT)
Subject: [rabbitmq-discuss] amqp_rpc_server
Message-ID: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>

Hello,
 I'm looking through the amqp_rpm_server, in particular the start function. 
I wonder why you used a start instead of a start_link.

Cheers,
 Carlo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/0620cd62/attachment.htm>

From rajasekhar.kanugula at gmail.com  Wed Jul 17 14:05:15 2013
From: rajasekhar.kanugula at gmail.com (rajasekhar kanugula)
Date: Wed, 17 Jul 2013 06:05:15 -0700 (PDT)
Subject: [rabbitmq-discuss] How to get the list of messages from Queue
 without consuming the messages
Message-ID: <889c82c8-57cc-44d7-8db3-f3969a261bbb@googlegroups.com>

I want to display the list of messages from a Queue (Reading purpose), some 
thing like get messages of RabbitMQ management plugin.
I am using Spring RabbitMQ integration. I gone through the api and I 
couldn't find anything.
Please let me know how to do this.

Thanks,
Raj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/8c4dd1ff/attachment.htm>

From fabio.pnr at gmail.com  Wed Jul 17 15:04:05 2013
From: fabio.pnr at gmail.com (Fabio Panero)
Date: Wed, 17 Jul 2013 16:04:05 +0200
Subject: [rabbitmq-discuss] nuget rabbitmq client update
Message-ID: <CAJkxw=hPCSSb7gOE92nGt6HCzJ_gO=04Z4yNbHkmBm=2NwGqLQ@mail.gmail.com>

Is it possibile to update the nuget package for rabbitmq client .net to the
 new 3.1.3 version?
Now is present the 3.1.1 old version of this package.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/395bb190/attachment.htm>

From mpietrek at skytap.com  Wed Jul 17 18:34:16 2013
From: mpietrek at skytap.com (Matt Pietrek)
Date: Wed, 17 Jul 2013 10:34:16 -0700
Subject: [rabbitmq-discuss] Strange failures (Generic server <xxx>
 terminating) from RabbitMQ
In-Reply-To: <51E604A8.1040502@rabbitmq.com>
References: <CACLE7iwj6k19gJhATX4U1Msf7YLubjHPxr+5=b+5yF6jci9mwA@mail.gmail.com>
	<51E604A8.1040502@rabbitmq.com>
Message-ID: <CACLE7iwX7vrABFJPpDD=+A9-hW25VY4L3OptVJyFfZFNFhk8Eg@mail.gmail.com>

Thanks for quick response Matthias.

And just to ease any concern, I misspoke earlier. Almost all of our
clusters are on 3.0.2. However I personally run a newer version for testing
and had forgotten that fact.

Matt


On Tue, Jul 16, 2013 at 7:42 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Matt,
>
>
> On 17/07/13 00:26, Matt Pietrek wrote:
>
>> We're seeing a bunch of failure messages from our Ruby clients to
>> RabbitMQ 3.0.2. From the client side, we see 541 "Internal Error"
>>
>> On the server side logs, we see a bunch of errors. Normally I can at
>> least hazard a guess what's wrong, but I have no idea with this:
>>
>>
>> =ERROR REPORT==== 16-Jul-2013::22:43:15 ===
>> ** Generic server <0.4358.0> terminating
>> ** Last message in was {can_send,<0.4355.0>,true}
>> ** When Server state == {lim,1,<0.4359.0>,false,[],1}
>> ** Reason for termination ==
>> ** {function_clause,[{orddict,**update,
>>
>> [<0.4355.0>,#Fun<rabbit_**limiter.3.113433752>,[]],
>>                                [{file,"orddict.erl"},{line,**153}]},
>>                       {rabbit_limiter,limit_queue,2,**[]},
>>                       {rabbit_limiter,handle_call,3,**[]},
>>                       {gen_server2,handle_msg,2,[]},
>>                       {proc_lib,init_p_do_apply,3,
>>                                 [{file,"proc_lib.erl"},{line,**227}]}]}
>>
>>
> I think this is a duplicate of the problem reported at
> http://rabbitmq.1065348.n5.**nabble.com/Rabbit-3-1-1-crash-**
> question-td27540.html<http://rabbitmq.1065348.n5.nabble.com/Rabbit-3-1-1-crash-question-td27540.html>,
> the fix for which will appear in the next bugfix release.
>
> However, we were quite that the bug was only introduced in 3.1.0, so it's
> surprising to see this in 3.0.2. The code has certainly changed a lot on
> that area, so I'd advise upgrading in any case.
>
> Regards,
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/dae817ce/attachment.htm>

From mpietrek at skytap.com  Wed Jul 17 18:55:38 2013
From: mpietrek at skytap.com (Matt Pietrek)
Date: Wed, 17 Jul 2013 10:55:38 -0700
Subject: [rabbitmq-discuss] RabbitMQ 3.0.2 stops logging,
 but otherwise looks healthy?
In-Reply-To: <8e663phnfmx6mqp1bo7cp2ke.1374039837754@email.android.com>
References: <CACLE7iy4N6T73rnNEPQ_Oc8xDUEu1B605kXOD1uxEqKZegJVcA@mail.gmail.com>
	<urm162a2iboqpfimg59jgwum.1374002175670@email.android.com>
	<CACLE7iw981oU+ZAx+rMBea-b4z9AciizTTUT5hPkOO-H7tY7KA@mail.gmail.com>
	<8e663phnfmx6mqp1bo7cp2ke.1374039837754@email.android.com>
Message-ID: <CACLE7izu-a3J0sOg1vM_zX67z7WiWFX6XUpbUi6Cr02wE3T2iQ@mail.gmail.com>

Jeff,

The "foobar" in the listing I provided is the result of my search/replace
obfuscation. Don't want internal server names, account names, etc. revealed
unnecessarily.

The logging stopped on only one node of the cluster. The other node
continued to log as expected.

Interestingly, on the broker that still logged, I see this message at the
time of the last log entry of the non-logging machine:

=INFO REPORT==== 2-Jun-2013::11:50:57 ===
rabbit on node rabbit at foobar up

(again, where foobar is obfuscated).

Digging around some other logs at the time, I see there was a
mnesia/network split issue just proceeding this. However, the broker now
looks to be happily a part of the cluster, participating in mirrored
queues, and with a reported uptime matching that of the "INFO REPORT" above.


On Tue, Jul 16, 2013 at 10:51 PM, Jeffery, Mark <MJeffery at fnb.co.za> wrote:

>  Hello
>
> You mentioned a cluster.
> Is this happening on every box ?
>
> Also, is the rabbit process running as "foobar" ?
>
> Jeff
>
> Matt Pietrek <mpietrek at skytap.com> wrote:
>
>
>  Here you go Mark. The file date/times line up with when I last saw
> logging in the files:
>
> 23:14 PROD mpietrek at foomq1:/proc/16050$ sudo ls -latr fd
> total 0
> l-wx------ 1 foobar foobar 64 2013-06-02 11:50 2 -> /foobar/logs/
> foomq1.foo.bar.com/rabbitmq-server.log
> dr-xr-xr-x 7 foobar foobar  0 2013-06-02 11:50 ..
> dr-x------ 2 foobar foobar  0 2013-06-02 11:50 .
> lr-x------ 1 foobar foobar 64 2013-06-02 11:50 9 -> pipe:[122339989]
> l-wx------ 1 foobar foobar 64 2013-06-02 11:50 8 -> /foobar/logs/
> foomq1.foo.bar.com/rabbit at foomq1sasl.log
> l-wx------ 1 foobar foobar 64 2013-06-02 11:50 7 -> /foobar/logs/
> foomq1.foo.bar.com/rabbit at foomq1.log
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 6 -> socket:[122339982]
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 5 -> socket:[122339980]
> l-wx------ 1 foobar foobar 64 2013-06-02 11:50 4 -> pipe:[122339970]
> lr-x------ 1 foobar foobar 64 2013-06-02 11:50 3 -> pipe:[122339970]
> lr-x------ 1 foobar foobar 64 2013-06-02 11:50 17 -> socket:[122340310]
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 16 -> socket:[122340285]
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 15 ->
> /foobar/var/lib/rabbit at foomq1/msg_store_persistent/397.rdq
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 14 ->
> /foobar/var/lib/rabbit at foomq1/msg_store_transient/0.rdq
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 13 ->
> /foobar/var/lib/rabbit at foomq1/queues/D1KLLKOJLVJ4YZGYLP2D32A9W/journal.jif
> l-wx------ 1 foobar foobar 64 2013-06-02 11:50 12 -> pipe:[122339990]
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 11 ->
> /foobar/var/lib/rabbit at foomq1/LATEST.LOG
> lrwx------ 1 foobar foobar 64 2013-06-02 11:50 10 -> socket:[122339997]
> l-wx------ 1 foobar foobar 64 2013-06-02 11:50 1 -> /foobar/logs/
> foomq1.foo.bar.com/rabbitmq-server.log
> lr-x------ 1 foobar foobar 64 2013-06-02 11:50 0 -> /dev/null
> lrwx------ 1 foobar foobar 64 2013-06-02 11:51 18 -> socket:[122340314]
> l-wx------ 1 foobar foobar 64 2013-06-02 12:28 21 ->
> /foobar/var/lib/rabbit at foomq1/queues/ETWUA9HXDWBIXFTEF0DVH5FBZ/journal.jif
> lr-x------ 1 foobar foobar 64 2013-06-02 12:28 19 ->
> /foobar/var/lib/rabbit at foomq1/queues/22TABTKBIJ6DQCA5GC6EZ0B8L/journal.jif
> l-wx------ 1 foobar foobar 64 2013-06-02 13:12 22 ->
> /foobar/var/lib/rabbit at foomq1/queues/A9AWP930R556ERL81W9PYEELL/journal.jif
> lrwx------ 1 foobar foobar 64 2013-06-02 13:12 20 ->
> /foobar/var/lib/rabbit at foomq1/queues/A8EPKFQ4VCO5A3APTTWYEQRFT/journal.jif
>
>
> On Tue, Jul 16, 2013 at 12:19 PM, Jeffery, Mark <MJeffery at fnb.co.za>wrote:
>
>>  Hello
>>
>> Assuming Linux, what does ls -latr show in the fd directory in the rabbitmq process's directory under /proc ?
>>
>>
>> Matt Pietrek <mpietrek at skytap.com> wrote:
>>
>>
>>     This is admittedly a shot in the dark, and with limited repro
>> details, but asking if somebody else has seen this.
>>
>>  We run our clustered RabbitMQ 3.0.2 brokers in production without
>> restarts for months at a time. Everything is looking good - No memory
>> leaks, no out-of-disk-space, etc...
>>
>>  However, in looking at the rabbit@<node>.log and rabbit@<node>-sasl.log
>> files, I noticed that at some point (e.g. a month earlier), no new entries
>> were being added to the log file. Normally there's a steady stream of new
>> connections and connection drops.
>>
>> I've listed the open file handles from the rabbitmq beam instance and I
>> still see live file handles for the log files.
>>
>>  Anybody have any idea what might be happening? And better still, how we
>> might kick things without restarting the broker?
>>
>>  Thanks,
>>
>> Matt
>>
>>     To read FirstRand Bank's Disclaimer for this email click on the
>> following address or copy into your Internet browser:
>> https://www.fnb.co.za/disclaimer.html
>>
>>  ****
>>
>> If you are unable to access the Disclaimer, send a blank e-mail to
>> firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the
>> Disclaimer.****
>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>   To read FirstRand Bank's Disclaimer for this email click on the
> following address or copy into your Internet browser:
> https://www.fnb.co.za/disclaimer.html
>
> ****
>
> If you are unable to access the Disclaimer, send a blank e-mail to
> firstrandbankdisclaimer at fnb.co.za and we will send you a copy of the
> Disclaimer.****
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/7fe14220/attachment.htm>

From watson.timothy at gmail.com  Wed Jul 17 19:09:54 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Wed, 17 Jul 2013 19:09:54 +0100
Subject: [rabbitmq-discuss] nuget rabbitmq client update
In-Reply-To: <CAJkxw=hPCSSb7gOE92nGt6HCzJ_gO=04Z4yNbHkmBm=2NwGqLQ@mail.gmail.com>
References: <CAJkxw=hPCSSb7gOE92nGt6HCzJ_gO=04Z4yNbHkmBm=2NwGqLQ@mail.gmail.com>
Message-ID: <BA22EE0A-6C87-49DE-B2E1-F331108835E2@rabbitmq.com>

Thanks for pointing this out. I'll drop the package maintainer a note about getting the latest releases up there.

Cheers,
Tim

On 17 Jul 2013, at 15:04, Fabio Panero <fabio.pnr at gmail.com> wrote:

> Is it possibile to update the nuget package for rabbitmq client .net to the  new 3.1.3 version?
> Now is present the 3.1.1 old version of this package.
> 
> Thanks
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From mklishin at gopivotal.com  Wed Jul 17 19:46:38 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 17 Jul 2013 22:46:38 +0400
Subject: [rabbitmq-discuss] set/getTimeout in RabbitMQ for PHP
In-Reply-To: <5c71787a-d6d4-485c-83f3-0f986a68806a@googlegroups.com>
References: <d67b7628-5823-436d-8bfb-a195e346227b@googlegroups.com>
	<CAMcAHLXAisK-ou6PDNZLSqsq5YDd8sfizDRMtLbtsdXziDo06w@mail.gmail.com>
	<5c71787a-d6d4-485c-83f3-0f986a68806a@googlegroups.com>
Message-ID: <24581E6A-D4EF-4AE2-B419-2DD64F1AA035@gopivotal.com>

Amol Kedar:

> PHP Fatal error:  Class 'PhpAmqpLib\Connection\AMQPConnection' not found in /php-amqplib/demo/amqp_consumer.php on line 10
> 
> this is on ubuntu 10.04 and PHP 5.3.10-1ubuntu3
> any clue?

If AMQPConnection cannot be found, it suggests you have a classpath
issue. Are you sure that the RabbitMQ client dependency is on classpath?

Also, I'd start a new thread for your question.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/f5ae57c4/attachment.pgp>

From rattyk at mail.ru  Wed Jul 17 20:30:06 2013
From: rattyk at mail.ru (crrad)
Date: Wed, 17 Jul 2013 12:30:06 -0700 (PDT)
Subject: [rabbitmq-discuss] Extremely slow message delivery
Message-ID: <1374089406199-28141.post@n5.nabble.com>

Hello.

I have two machines and a network application (written in C++ using
simpleamqpclient).
One of the machines is RabbitMQ server, and they are in the same room.
So, I start 2 applications on both of them: one pushing messages to a direct
exchange, second receives them through a queue (it discards unread messages
after 500 msecs).

Delivery of the message takes approximately 15 seconds (message is 30 kB
long).
How can it be so slow? I need messages to be delivered at maximum 1 second
delay.

Thanks for any advance.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Extremely-slow-message-delivery-tp28141.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Wed Jul 17 20:34:49 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 17 Jul 2013 23:34:49 +0400
Subject: [rabbitmq-discuss] Extremely slow message delivery
In-Reply-To: <1374089406199-28141.post@n5.nabble.com>
References: <1374089406199-28141.post@n5.nabble.com>
Message-ID: <C33990FE-2BE0-4865-A0B0-7DB680BBF11E@gopivotal.com>

crrad:

> Delivery of the message takes approximately 15 seconds (message is 30 kB
> long).
> How can it be so slow? I need messages to be delivered at maximum 1 second
> delay.

This is indeed abnormal. Have you tried publishing messages using the management plugin
to see if the problem is with your publisher or consumer? Do you see any message flow
(rates above 0) in the management UI?

Can you post your code?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/fd8d19c6/attachment.pgp>

From matthias at rabbitmq.com  Wed Jul 17 20:40:39 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 20:40:39 +0100
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
Message-ID: <51E6F337.6060803@rabbitmq.com>

Mark,

On 17/07/13 16:07, Geib, Mark wrote:
> I just ran the same, version 3.1.3 java client against my 3.1.1-1 broker.
>
> sh runjava.sh com.rabbitmq.examples.MulticastMain -y 0 -t topic -s 10000
> starting producer #0
> [...]
> time: 15.017s, sent: 16091 msg/s

How did you install Erlang? And what version gets reported in 
'rabbitmqctl status'?

TBH I suspect this is an O/S level issue. Have you got any rabbits 
running elsewhere that you can compare the performance with?

Matthias.

From matthias at rabbitmq.com  Wed Jul 17 20:47:41 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 20:47:41 +0100
Subject: [rabbitmq-discuss] amqp_rpc_server
In-Reply-To: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
References: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
Message-ID: <51E6F4DD.2010109@rabbitmq.com>

On 17/07/13 13:51, Carlo Bertoldi wrote:
>   I'm looking through the amqp_rpm_server, in particular the start
> function. I wonder why you used a start instead of a start_link.

Laziness. There is nothing stopping you from linking to the returned pid 
yourself, though obviously at the risk of getting the wrong exit code if 
the process dies immediately after starting up successfully.

Matthias.

From Mark.Geib at echostar.com  Wed Jul 17 20:50:17 2013
From: Mark.Geib at echostar.com (Geib, Mark)
Date: Wed, 17 Jul 2013 19:50:17 +0000
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <51E6F337.6060803@rabbitmq.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
Message-ID: <7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>

Mathias,

This is a debian wheezy box. I installed erlang from the debian repo, i.e. apt-get install erlang I think. Erlang is R15B01. We do have a number of rabbitmq installs on various boxes and different versions of erlang, etc. I have tried this at least three different boxes with similar results. On a beefy VM on new fast hardware I see about 23-25kHz compared to the 15kHz I reported to you. In all cases everything is running local, no lan network issues to consider. We generally run debian or ubuntu installs with very little if any changes. In all my testing this morning using your example command I never see anything close to what you reported. 25kHz is the absolute max I see on that shinny new VM.


The output from rabbitmqctl status is

Status of node 'rabbit at geib-2950' ...
[{pid,7926},
 {running_applications,
     [{rabbitmq_management,"RabbitMQ Management Console","3.1.3"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","3.1.3"},
      {rabbit,"RabbitMQ","3.1.3"},
      {os_mon,"CPO  CXC 138 46","2.2.9"},
      {rabbitmq_web_dispatch,"RabbitMQ Web Dispatcher","3.1.3"},
      {webmachine,"webmachine","1.9.1-rmq3.1.3-git52e62bc"},
      {mochiweb,"MochiMedia Web Server","2.3.1-rmq3.1.3-gitd541e9a"},
      {xmerl,"XML parser","1.3.1"},
      {inets,"INETS  CXC 138 49","5.9"},
      {mnesia,"MNESIA  CXC 138 12","4.7"},
      {amqp_client,"RabbitMQ AMQP Client","3.1.0"},
      {sasl,"SASL  CXC 138 11","2.2.1"},
      {stdlib,"ERTS  CXC 138 10","1.18.1"},
      {kernel,"ERTS  CXC 138 10","2.15.1"}]},
 {os,{unix,linux}},
 {erlang_version,
     "Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:8:8] [async-threads:30] [kernel-poll:true]\n"},
 {memory,
     [{total,38421704},
      {connection_procs,5408},
      {queue_procs,5408},
      {plugins,571680},
      {other_proc,11268840},
      {mnesia,60696},
      {mgmt_db,59384},
      {msg_index,605640},
      {other_ets,1213728},
      {binary,1413144},
      {code,18526191},
      {atom,703377},
      {other_system,3988208}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,13524641382},
 {disk_free_limit,1000000000},
 {disk_free,1067746856960},
 {file_descriptors,
     [{total_limit,924},{total_used,3},{sockets_limit,829},{sockets_used,1}]},
 {processes,[{limit,1048576},{used,202}]},
 {run_queue,0},
 {uptime,7879}]
...done.

Mark Geib
Principal Engineer
Cheyenne Software Engineering
mark.geib at echostar.com / 35-215


?We, the unwilling, led by the unknowing, are doing the impossible for the ungrateful. We have done so much, for so long, with so little, we are now qualified to do anything with nothing.? 
? Mother Teresa


On Jul 17, 2013, at 1:40 PM, Matthias Radestock wrote:

> Mark,
> 
> On 17/07/13 16:07, Geib, Mark wrote:
>> I just ran the same, version 3.1.3 java client against my 3.1.1-1 broker.
>> 
>> sh runjava.sh com.rabbitmq.examples.MulticastMain -y 0 -t topic -s 10000
>> starting producer #0
>> [...]
>> time: 15.017s, sent: 16091 msg/s
> 
> How did you install Erlang? And what version gets reported in 'rabbitmqctl status'?
> 
> TBH I suspect this is an O/S level issue. Have you got any rabbits running elsewhere that you can compare the performance with?
> 
> Matthias.
> 


From matthias at rabbitmq.com  Wed Jul 17 20:55:44 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 20:55:44 +0100
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
	<7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
Message-ID: <51E6F6C0.60402@rabbitmq.com>

Mark,

On 17/07/13 20:50, Geib, Mark wrote:
> 25kHz is the absolute max I see on that shinny new VM.

Ah. VM. I am running on bare metal. A four year old desktop machine, but 
still. See whether you can find a non-virtualised machine and run some 
tests there.

Matthias.

From Mark.Geib at echostar.com  Wed Jul 17 21:00:58 2013
From: Mark.Geib at echostar.com (Geib, Mark)
Date: Wed, 17 Jul 2013 20:00:58 +0000
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <51E6F6C0.60402@rabbitmq.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
	<7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
	<51E6F6C0.60402@rabbitmq.com>
Message-ID: <CAFBC768-2E59-4F52-B407-D212FCBFA384@echostar.com>

No, my initial reply to you was output on a bare metal. The VM results were just to confirm our performance numbers.

My main testing machine is bare metal.

Mark Geib
Principal Engineer
Cheyenne Software Engineering
mark.geib at echostar.com / 35-215


?We, the unwilling, led by the unknowing, are doing the impossible for the ungrateful. We have done so much, for so long, with so little, we are now qualified to do anything with nothing.? 
? Mother Teresa


On Jul 17, 2013, at 1:55 PM, Matthias Radestock wrote:

> Mark,
> 
> On 17/07/13 20:50, Geib, Mark wrote:
>> 25kHz is the absolute max I see on that shinny new VM.
> 
> Ah. VM. I am running on bare metal. A four year old desktop machine, but still. See whether you can find a non-virtualised machine and run some tests there.
> 
> Matthias.
> 


From matthias at rabbitmq.com  Wed Jul 17 21:05:21 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 21:05:21 +0100
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <CAFBC768-2E59-4F52-B407-D212FCBFA384@echostar.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
	<7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
	<51E6F6C0.60402@rabbitmq.com>
	<CAFBC768-2E59-4F52-B407-D212FCBFA384@echostar.com>
Message-ID: <51E6F901.7080907@rabbitmq.com>

On 17/07/13 21:00, Geib, Mark wrote:
> No, my initial reply to you was output on a bare metal. The VM
> results were just to confirm our performance numbers.
>
> My main testing machine is bare metal.

I have no idea then what could be the cause. Try running with an R16B 
compiled from source, since that's what I'm running. I doubt it will 
make a difference, but I can't think of anything else to try.

Matthias.

From rattyk at mail.ru  Wed Jul 17 21:18:35 2013
From: rattyk at mail.ru (crrad)
Date: Wed, 17 Jul 2013 13:18:35 -0700 (PDT)
Subject: [rabbitmq-discuss] Extremely slow message delivery
In-Reply-To: <C33990FE-2BE0-4865-A0B0-7DB680BBF11E@gopivotal.com>
References: <1374089406199-28141.post@n5.nabble.com>
	<C33990FE-2BE0-4865-A0B0-7DB680BBF11E@gopivotal.com>
Message-ID: <1374092315205-28149.post@n5.nabble.com>

I've figured out, that I'm sending messages at rate 20 per second.
Rabbit is probably choking, but at some time it delivers the messages at
constant delay of 15 seconds.
Setting rate to 4 per second solved the problem.

But, I'm a newbie to RabbitMQ and I'll appreciate any help on speeding up
message delivery (message loss is not a problem, in fact).



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Extremely-slow-message-delivery-tp28141p28149.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Wed Jul 17 21:24:59 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 18 Jul 2013 00:24:59 +0400
Subject: [rabbitmq-discuss] Extremely slow message delivery
In-Reply-To: <1374092315205-28149.post@n5.nabble.com>
References: <1374089406199-28141.post@n5.nabble.com>
	<C33990FE-2BE0-4865-A0B0-7DB680BBF11E@gopivotal.com>
	<1374092315205-28149.post@n5.nabble.com>
Message-ID: <CAE3HoVRvkkrr-2XOhuyTVuSUrJZm89e7Gg_ZRh40JzPbo0yCbg@mail.gmail.com>

2013/7/18 crrad <rattyk at mail.ru>

> I've figured out, that I'm sending messages at rate 20 per second.
> Rabbit is probably choking, but at some time it delivers the messages at
> constant delay of 15 seconds.
> Setting rate to 4 per second solved the problem.
>

These are abnormal rates. What's the average size of your messages?
Do you see your publishers being blocked in rabbitmq log?

If messages are < 1K, you can push about 6-8K of them per second even
with clients in Ruby or Python. I'd recommend trying to reproduce the
problem
with a different client first.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/177c041a/attachment.htm>

From davidv at spindance.com  Wed Jul 17 21:29:18 2013
From: davidv at spindance.com (David van Geest)
Date: Wed, 17 Jul 2013 16:29:18 -0400
Subject: [rabbitmq-discuss] consume messages from multiple queues based on
	wildcard?
Message-ID: <CANaOvh97pV6xgWGu2UzNW+4dfUZkD6+3MZ_i4qrMCCijy_N7Gw@mail.gmail.com>

Hi,

I was wondering if it was possible to have a consumer subscribe to multiple
queues, based on some kind of wildcard pattern.

For example, if all the queues in question were named "messages.<MAC>"
where <MAC> is a MAC address, could a consumer subscribe to "messages.*"?

Thanks,
-David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/71adb35e/attachment.htm>

From mklishin at gopivotal.com  Wed Jul 17 21:33:24 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 18 Jul 2013 00:33:24 +0400
Subject: [rabbitmq-discuss] consume messages from multiple queues based
	on wildcard?
In-Reply-To: <CANaOvh97pV6xgWGu2UzNW+4dfUZkD6+3MZ_i4qrMCCijy_N7Gw@mail.gmail.com>
References: <CANaOvh97pV6xgWGu2UzNW+4dfUZkD6+3MZ_i4qrMCCijy_N7Gw@mail.gmail.com>
Message-ID: <0EB608E9-AC5A-40F5-943C-75CC7F5BB767@gopivotal.com>

David van Geest:

> I was wondering if it was possible to have a consumer subscribe to multiple queues, based on some kind of wildcard pattern. 
> 
> For example, if all the queues in question were named "messages.<MAC>" where <MAC> is a MAC address, could a consumer subscribe to "messages.*"?

No, but you can set up message routing such that messages.<MAC> would go to the same queue.
Then you can add as many consumers as you need to that queue.

In other words, with RabbitMQ pattern matching happens at the routing stage, not message delivery.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/1343874a/attachment.pgp>

From davidv at spindance.com  Wed Jul 17 21:50:02 2013
From: davidv at spindance.com (David van Geest)
Date: Wed, 17 Jul 2013 16:50:02 -0400
Subject: [rabbitmq-discuss] consume messages from multiple queues based
	on wildcard?
In-Reply-To: <0EB608E9-AC5A-40F5-943C-75CC7F5BB767@gopivotal.com>
References: <CANaOvh97pV6xgWGu2UzNW+4dfUZkD6+3MZ_i4qrMCCijy_N7Gw@mail.gmail.com>
	<0EB608E9-AC5A-40F5-943C-75CC7F5BB767@gopivotal.com>
Message-ID: <CANaOvh-AdpUGkJAq7hOnK7c7+G0sMi-5v5popvP73tPY7aSKmg@mail.gmail.com>

On Wed, Jul 17, 2013 at 4:33 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> David van Geest:
>
> > I was wondering if it was possible to have a consumer subscribe to
> multiple queues, based on some kind of wildcard pattern.
> >
> > For example, if all the queues in question were named "messages.<MAC>"
> where <MAC> is a MAC address, could a consumer subscribe to "messages.*"?
>
> No, but you can set up message routing such that messages.<MAC> would go
> to the same queue.
> Then you can add as many consumers as you need to that queue.
>
> In other words, with RabbitMQ pattern matching happens at the routing
> stage, not message delivery.
>
>
Michael, thanks for the reply.  The motivation for this question is that we
would like to avoid one monolithic queue for all messages.  We're looking
at clustering Rabbit, but even then your queue resides on one server, which
could be a scalability problem if your number of message producers and thus
message rate continually goes up.

We would like to scale our worker processes on the other end of the message
queue(s) up and down as needed, without having the message producers know
anything about it.  Any ideas on how to achieve this goal?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/06f8b4a1/attachment.htm>

From mklishin at gopivotal.com  Wed Jul 17 21:56:25 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 18 Jul 2013 00:56:25 +0400
Subject: [rabbitmq-discuss] consume messages from multiple queues based
	on wildcard?
In-Reply-To: <CANaOvh-AdpUGkJAq7hOnK7c7+G0sMi-5v5popvP73tPY7aSKmg@mail.gmail.com>
References: <CANaOvh97pV6xgWGu2UzNW+4dfUZkD6+3MZ_i4qrMCCijy_N7Gw@mail.gmail.com>
	<0EB608E9-AC5A-40F5-943C-75CC7F5BB767@gopivotal.com>
	<CANaOvh-AdpUGkJAq7hOnK7c7+G0sMi-5v5popvP73tPY7aSKmg@mail.gmail.com>
Message-ID: <771C4BD8-D941-4E96-B99A-47E7B8007F57@gopivotal.com>

David van Geest:

> We would like to scale our worker processes on the other end of the message queue(s) up and down as needed, without having the message producers know anything about it.  Any ideas on how to achieve this goal?

You can use multiple queues and have multiple consumers for each one.

Every app instance can run multiple consumers. Choosing what queues to consume
from is probably application-specific. Techniques such as consistent hashing
can help ensure every app instance consumes from about the same # of queues.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/1331d2b2/attachment.pgp>

From Mark.Geib at echostar.com  Wed Jul 17 22:14:09 2013
From: Mark.Geib at echostar.com (Geib, Mark)
Date: Wed, 17 Jul 2013 21:14:09 +0000
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <51E6F901.7080907@rabbitmq.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
	<7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
	<51E6F6C0.60402@rabbitmq.com>
	<CAFBC768-2E59-4F52-B407-D212FCBFA384@echostar.com>
	<51E6F901.7080907@rabbitmq.com>
Message-ID: <F88FD59D-BAE2-4A81-B577-1AD3484A5D9C@echostar.com>

Matthias,

OK, built erlang R16B from source, then rabbitmq 3.1.3 from source as well. Still no joy.

sh runjava.sh com.rabbitmq.examples.MulticastMain -y 0 -t topic -s 10000
starting producer #0
time: 1.000s, sent: 5092 msg/s
time: 2.000s, sent: 11501 msg/s
time: 3.000s, sent: 14754 msg/s
time: 4.001s, sent: 14339 msg/s
time: 5.001s, sent: 15070 msg/s
time: 6.001s, sent: 15238 msg/s
time: 7.001s, sent: 15329 msg/s
time: 8.001s, sent: 15335 msg/s
time: 9.001s, sent: 15329 msg/s
time: 10.001s, sent: 15237 msg/s
time: 11.001s, sent: 15168 msg/s
time: 12.001s, sent: 15160 msg/s
time: 13.001s, sent: 15220 msg/s
time: 14.001s, sent: 15311 msg/s
time: 15.001s, sent: 15180 msg/s
time: 16.001s, sent: 15241 msg/s
time: 17.001s, sent: 15194 msg/s
time: 18.001s, sent: 15064 msg/s
time: 19.001s, sent: 15193 msg/s
time: 20.001s, sent: 15163 msg/s

Unix top output:

top - 15:09:38 up 23 days,  3:13,  4 users,  load average: 1.32, 1.18, 0.86
Tasks: 151 total,   2 running, 149 sleeping,   0 stopped,   0 zombie
%Cpu(s): 23.3 us,  9.8 sy,  0.0 ni, 64.8 id,  0.0 wa,  0.0 hi,  2.1 si,  0.0 st
KiB Mem:  33019144 total,  2277464 used, 30741680 free,   136004 buffers
KiB Swap: 47313916 total,        0 used, 47313916 free,  1586932 cached

  PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND
30714 root      20   0  256m  54m 2756 S 181.5  0.2   6:23.19 beam.smp
30990 geib      20   0 8476m 151m  10m S 100.7  0.5   0:46.45 java
31107 geib      20   0 23172 1540 1120 R   1.0  0.0   0:00.05 top
31016 geib      20   0 77392 1840 1000 S   0.3  0.0   0:00.02 sshd
    1 root      20   0 10648  808  672 S   0.0  0.0   0:19.60 init
    2 root      20   0     0    0    0 S   0.0  0.0   0:00.11 kthreadd
    3 root      20   0     0    0    0 S   0.0  0.0   0:04.25 ksoftirqd/0

Mark Geib
Principal Engineer
Cheyenne Software Engineering
mark.geib at echostar.com / 35-215


?We, the unwilling, led by the unknowing, are doing the impossible for the ungrateful. We have done so much, for so long, with so little, we are now qualified to do anything with nothing.? 
? Mother Teresa


On Jul 17, 2013, at 2:05 PM, Matthias Radestock wrote:

> On 17/07/13 21:00, Geib, Mark wrote:
>> No, my initial reply to you was output on a bare metal. The VM
>> results were just to confirm our performance numbers.
>> 
>> My main testing machine is bare metal.
> 
> I have no idea then what could be the cause. Try running with an R16B compiled from source, since that's what I'm running. I doubt it will make a difference, but I can't think of anything else to try.
> 
> Matthias.
> 


From grussell at gopivotal.com  Wed Jul 17 22:25:04 2013
From: grussell at gopivotal.com (Gary Russell)
Date: Wed, 17 Jul 2013 17:25:04 -0400
Subject: [rabbitmq-discuss] How to get the list of messages from Queue
 without consuming the messages
In-Reply-To: <889c82c8-57cc-44d7-8db3-f3969a261bbb@googlegroups.com>
References: <889c82c8-57cc-44d7-8db3-f3969a261bbb@googlegroups.com>
Message-ID: <CADtU9_u-w-Osn-fjwccNgQpFoj8nyjp=TgWTaJfMJOYnLu1VAw@mail.gmail.com>

The admin doesn't "browse" the queue, it receives the message(s) and
re-queues them.

You can do the same thing with the Spring AMQP abstraction over the Rabbit
client.

AFAIK, you can't browse the queue contents without consuming them.


On Wed, Jul 17, 2013 at 9:05 AM, rajasekhar kanugula <
rajasekhar.kanugula at gmail.com> wrote:

> I want to display the list of messages from a Queue (Reading purpose),
> some thing like get messages of RabbitMQ management plugin.
> I am using Spring RabbitMQ integration. I gone through the api and I
> couldn't find anything.
> Please let me know how to do this.
>
> Thanks,
> Raj
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/cefb9bc2/attachment.htm>

From matthias at rabbitmq.com  Wed Jul 17 22:36:27 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 22:36:27 +0100
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <F88FD59D-BAE2-4A81-B577-1AD3484A5D9C@echostar.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
	<7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
	<51E6F6C0.60402@rabbitmq.com>
	<CAFBC768-2E59-4F52-B407-D212FCBFA384@echostar.com>
	<51E6F901.7080907@rabbitmq.com>
	<F88FD59D-BAE2-4A81-B577-1AD3484A5D9C@echostar.com>
Message-ID: <51E70E5B.6000202@rabbitmq.com>

Mark,

On 17/07/13 22:14, Geib, Mark wrote:
> OK, built erlang R16B from source, then rabbitmq 3.1.3 from source as
> well. Still no joy.

I'm not surprised, but it was worth a try.

> top - 15:09:38 up 23 days,  3:13,  4 users,  load average: 1.32, 1.18, 0.86
> Tasks: 151 total,   2 running, 149 sleeping,   0 stopped,   0 zombie
> %Cpu(s): 23.3 us,  9.8 sy,  0.0 ni, 64.8 id,  0.0 wa,  0.0 hi,  2.1 si,  0.0 st
> KiB Mem:  33019144 total,  2277464 used, 30741680 free,   136004 buffers
> KiB Swap: 47313916 total,        0 used, 47313916 free,  1586932 cached
>
>    PID USER      PR  NI  VIRT  RES  SHR S  %CPU %MEM    TIME+  COMMAND
> 30714 root      20   0  256m  54m 2756 S 181.5  0.2   6:23.19 beam.smp
> 30990 geib      20   0 8476m 151m  10m S 100.7  0.5   0:46.45 java

The Java sender is maxed out! That's unusual. The Java client can 
normally outpace the broker.

Here's the output from my machine for comparison...

top - 22:32:18 up 2 days, 12:21, 10 users,  load average: 2.61, 1.30, 0.61
Tasks: 199 total,   2 running, 197 sleeping,   0 stopped,   0 zombie
Cpu(s): 30.5%us,  4.9%sy,  0.0%ni, 64.1%id,  0.2%wa,  0.0%hi,  0.4%si, 
0.0%st
Mem:  12301968k total,  4618104k used,  7683864k free,   583968k buffers
Swap: 19803132k total,        0k used, 19803132k free,  1331576k cached

   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND 

22511 matthias  20   0 1080m  49m 2672 S  197  0.4   5:36.66 beam.smp 

23873 matthias  20   0 4598m 384m 9624 S   53  3.2   1:23.18 java 


$ java -version
java version "1.6.0_27"
OpenJDK Runtime Environment (IcedTea6 1.12.5) (6b27-1.12.5-0ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)


Matthias.

From Mark.Geib at echostar.com  Wed Jul 17 22:37:01 2013
From: Mark.Geib at echostar.com (Geib, Mark)
Date: Wed, 17 Jul 2013 21:37:01 +0000
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <51E6F901.7080907@rabbitmq.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
	<7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
	<51E6F6C0.60402@rabbitmq.com>
	<CAFBC768-2E59-4F52-B407-D212FCBFA384@echostar.com>
	<51E6F901.7080907@rabbitmq.com>
Message-ID: <F6F6D323-82C8-4FDD-9CDC-A1247CF3527C@echostar.com>

Matthias,

One last attempt at reproducing your results. I found a newer server, Dell R610, and ran the same test and got the same results as you see. So my poor performance can at least partially be accounted for with the old machine I was using. Also, I think we will re-think the use of a VM for hosting brokers since that also made a significant difference. The VM I tested on was running on a Dell R710 so should be somewhat better than the R610.

So I assume that we can only expect to achieve about the 50kHz number with no consumers, or bindings then.

Mark Geib
Principal Engineer
Cheyenne Software Engineering
mark.geib at echostar.com / 35-215


?We, the unwilling, led by the unknowing, are doing the impossible for the ungrateful. We have done so much, for so long, with so little, we are now qualified to do anything with nothing.? 
? Mother Teresa


On Jul 17, 2013, at 2:05 PM, Matthias Radestock wrote:

> On 17/07/13 21:00, Geib, Mark wrote:
>> No, my initial reply to you was output on a bare metal. The VM
>> results were just to confirm our performance numbers.
>> 
>> My main testing machine is bare metal.
> 
> I have no idea then what could be the cause. Try running with an R16B compiled from source, since that's what I'm running. I doubt it will make a difference, but I can't think of anything else to try.
> 
> Matthias.
> 


From matthias at rabbitmq.com  Wed Jul 17 22:49:22 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 17 Jul 2013 22:49:22 +0100
Subject: [rabbitmq-discuss] another performance question
In-Reply-To: <F6F6D323-82C8-4FDD-9CDC-A1247CF3527C@echostar.com>
References: <e195be40-445f-4165-846e-6c84a6133230@googlegroups.com>
	<51E63B46.2020308@rabbitmq.com>
	<CED4617E-5ABE-40BD-BC44-9C7F523F5F44@echostar.com>
	<51E6F337.6060803@rabbitmq.com>
	<7F22F77A-7809-4322-8660-1B53F2103A9D@echostar.com>
	<51E6F6C0.60402@rabbitmq.com>
	<CAFBC768-2E59-4F52-B407-D212FCBFA384@echostar.com>
	<51E6F901.7080907@rabbitmq.com>
	<F6F6D323-82C8-4FDD-9CDC-A1247CF3527C@echostar.com>
Message-ID: <51E71162.4070404@rabbitmq.com>

Mark,

On 17/07/13 22:37, Geib, Mark wrote:
> So I assume that we can only expect to achieve about the 50kHz number
> with no consumers, or bindings then.

You are only using two cores at that point though, and no hipe 
compilation. Add a "-x <n>" parameter to MulticastMain to increase the 
number of producers, which should end up utilising more cores. And see 
the hipe_compile rabbitmq.config entry 
(https://www.rabbitmq.com/configure.html#config-items) for enabling hipe.

I can get 90kHz (for 10000 byte messages) w/o hipe on my machine that 
way, and 100kHz with hipe. And that's with MulticastMain occupying 3 of 
the 8 cores, so when running that on a separate machine I'd probably see 
~150kHz.

Matthias.

From videlalvaro at gmail.com  Wed Jul 17 23:29:31 2013
From: videlalvaro at gmail.com (Alvaro Videla)
Date: Thu, 18 Jul 2013 00:29:31 +0200
Subject: [rabbitmq-discuss] set/getTimeout in RabbitMQ for PHP
In-Reply-To: <24581E6A-D4EF-4AE2-B419-2DD64F1AA035@gopivotal.com>
References: <d67b7628-5823-436d-8bfb-a195e346227b@googlegroups.com>
	<CAMcAHLXAisK-ou6PDNZLSqsq5YDd8sfizDRMtLbtsdXziDo06w@mail.gmail.com>
	<5c71787a-d6d4-485c-83f3-0f986a68806a@googlegroups.com>
	<24581E6A-D4EF-4AE2-B419-2DD64F1AA035@gopivotal.com>
Message-ID: <CAMcAHLXs2BQSXZoDakoh8wtdE7yyY1xEDTBAfGnKmU5Za6jqLg@mail.gmail.com>

You need to make sure your autoload.php setupt correctly for the library.
If you use composer.php that's done automatically for you. After that you
need to make sure you "use" the namespace.


On Wed, Jul 17, 2013 at 8:46 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Amol Kedar:
>
> > PHP Fatal error:  Class 'PhpAmqpLib\Connection\AMQPConnection' not found
> in /php-amqplib/demo/amqp_consumer.php on line 10
> >
> > this is on ubuntu 10.04 and PHP 5.3.10-1ubuntu3
> > any clue?
>
> If AMQPConnection cannot be found, it suggests you have a classpath
> issue. Are you sure that the RabbitMQ client dependency is on classpath?
>
> Also, I'd start a new thread for your question.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/f9a05c4e/attachment.htm>

From charles.law at openx.com  Wed Jul 17 23:44:09 2013
From: charles.law at openx.com (Charles Law)
Date: Wed, 17 Jul 2013 15:44:09 -0700
Subject: [rabbitmq-discuss] Retrying messages that failed to process
Message-ID: <CABPX_bd-_uGtGNsJ_SoVcydqwRcSDVBqTu8JDecAZqSyCQST_Q@mail.gmail.com>

I have several consumers that could have exceptions raised while they are
processing a message.  Right now I catch any exceptions and restart the
consumer (gracefully close the channel & connection, then in the same
process setup a new client).  For some known errors I might also wait some
time between closing a connection and reconnecting.

What I want to do is, if a message was received but not acknowledged when
an exception is raised, "requeue" the message at the front of the queue so
it is retried immediately on any consumer (even the consumer that just
failed).  Is there a preferred way to do this?

I tried not acknowledging the message at all, closing the channel and
connection and reconnecting and the unacknowledged message was not resent
for exactly 600 seconds.   I am using pika/python if that matters.  I have
had good luck with sending a recover before closing the connection as well
- I see the message sent again with requeue=False, but it will only retry
the messages 2x.  I haven't had any luck using nack or reject.  Any
suggestions?

-- 
Charles Law   Software Developer
Watch how we make online advertising simple: http://bit.ly/Ent_vid
www.openx.com <http://www.openx.org/>   |   follow us on:
Twitter<http://twitter.com/openx>
   Facebook <http://www.facebook.com/OpenX>
LinkedIn<http://www.linkedin.com/company/openx/products>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/e375c58d/attachment.htm>

From michael.laing at nytimes.com  Thu Jul 18 00:54:28 2013
From: michael.laing at nytimes.com (Laing, Michael)
Date: Wed, 17 Jul 2013 19:54:28 -0400
Subject: [rabbitmq-discuss] Retrying messages that failed to process
In-Reply-To: <CABPX_bd-_uGtGNsJ_SoVcydqwRcSDVBqTu8JDecAZqSyCQST_Q@mail.gmail.com>
References: <CABPX_bd-_uGtGNsJ_SoVcydqwRcSDVBqTu8JDecAZqSyCQST_Q@mail.gmail.com>
Message-ID: <CAKgmDnHH0uDdmUyjzfQW=-N=xA=PO-z_XSjzpHv_NBiSiQLHNA@mail.gmail.com>

Hmmm - I use pika a lot and have occasion to use channel.basic_nack. It
takes about 5 ms before the message is picked up by another consumer in my
case.

If you are using BlockingConnection, I would suggest testing instead with
one of the asynch adapters, e.g. SelectConnection. Or use TornadoConnection
if you need more speed/responsiveness, or LibevConnection (which I wrote
and is in a pull request at the pika project github) if you are adventurous
and want "the one that rules them all" (for python anyway).

There's really no good reason for the delays you are experiencing.

AFIK, however, the rejected/nacked messages is queued as if it were new,
but with the redeliver flag set, AND any consumer may receive them,
including the one which rejected/nacked them. Of course if you have
multiple consumers on a queue, the rabbit will round-robin.

But, the rejected/nacked message does not go to the 'front' of the queue as
you desired (again AFAIK).

At the platitude level, I would suggest that you 'think async' - because
the real world, and rabbitmq, work that way. Avoid anything with 'blocking'
in it.

Michael Laing
NYTimes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/309eefb0/attachment.htm>

From matthias at rabbitmq.com  Thu Jul 18 03:12:56 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 18 Jul 2013 03:12:56 +0100
Subject: [rabbitmq-discuss] Retrying messages that failed to process
In-Reply-To: <CAKgmDnHH0uDdmUyjzfQW=-N=xA=PO-z_XSjzpHv_NBiSiQLHNA@mail.gmail.com>
References: <CABPX_bd-_uGtGNsJ_SoVcydqwRcSDVBqTu8JDecAZqSyCQST_Q@mail.gmail.com>
	<CAKgmDnHH0uDdmUyjzfQW=-N=xA=PO-z_XSjzpHv_NBiSiQLHNA@mail.gmail.com>
Message-ID: <51E74F28.6080404@rabbitmq.com>

On 18/07/13 00:54, Laing, Michael wrote:
> AFIK, however, the rejected/nacked messages is queued as if it were new,
> but with the redeliver flag set, AND any consumer may receive them,
> including the one which rejected/nacked them. Of course if you have
> multiple consumers on a queue, the rabbit will round-robin.
>
> But, the rejected/nacked message does not go to the 'front' of the queue
> as you desired (again AFAIK).

Actually, since RabbitMQ 2.7.0 messages get requeued in publication 
order. See http://www.rabbitmq.com/semantics.html#ordering for the details.

Matthias.

From matthias at rabbitmq.com  Thu Jul 18 03:28:42 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 18 Jul 2013 03:28:42 +0100
Subject: [rabbitmq-discuss] RabbitMQ 3.0.2 stops logging,
 but otherwise looks healthy?
In-Reply-To: <CACLE7izu-a3J0sOg1vM_zX67z7WiWFX6XUpbUi6Cr02wE3T2iQ@mail.gmail.com>
References: <CACLE7iy4N6T73rnNEPQ_Oc8xDUEu1B605kXOD1uxEqKZegJVcA@mail.gmail.com>
	<urm162a2iboqpfimg59jgwum.1374002175670@email.android.com>
	<CACLE7iw981oU+ZAx+rMBea-b4z9AciizTTUT5hPkOO-H7tY7KA@mail.gmail.com>
	<8e663phnfmx6mqp1bo7cp2ke.1374039837754@email.android.com>
	<CACLE7izu-a3J0sOg1vM_zX67z7WiWFX6XUpbUi6Cr02wE3T2iQ@mail.gmail.com>
Message-ID: <51E752DA.2030203@rabbitmq.com>

Matt,

On 17/07/13 18:55, Matt Pietrek wrote:
> Interestingly, on the broker that still logged, I see this message at
> the time of the last log entry of the non-logging machine:
>
> =INFO REPORT==== 2-Jun-2013::11:50:57 ===
> rabbit on node rabbit at foobar up
>
> (again, where foobar is obfuscated).
>
> Digging around some other logs at the time, I see there was a
> mnesia/network split issue just proceeding this. However, the broker now
> looks to be happily a part of the cluster, participating in mirrored
> queues, and with a reported uptime matching that of the "INFO REPORT" above.

Hmm. I wonder whether the cluster didn't fully heal. Since you a running 
3.0.x, you do not have the new (>=3.1.0) cluster_partition_handling 
strategy setting available to you, so almost certainly have a 
half-formed cluster now. This is also born out by the fact that...

>     23:14 PROD mpietrek at foomq1:/proc/16050$ sudo ls -latr fd
>     total 0
>     l-wx------ 1 foobar foobar 64 2013-06-02 11:50 2 ->
>     /foobar/logs/foomq1.foo.bar.com/rabbitmq-server.log
>     /foobar/logs/foomq1.foo.bar.com/rabbit at foomq1sasl.log
>     l-wx------ 1 foobar foobar 64 2013-06-02 11:50 7 ->
>     /foobar/logs/foomq1.foo.bar.com/rabbit at foomq1.log
>     /foobar/var/lib/rabbit at foomq1/msg_store_persistent/397.rdq
>     /foobar/var/lib/rabbit at foomq1/msg_store_transient/0.rdq

...*no* files got written to after 2013-06-02 11:50, not just log files 
but also none of the files associated with storing persistent and paged 
messages.

>  how we might kick things without restarting the broker?

It looks like that node is not participating fully in the cluster, so 
you have little to lose by restarting it. You may in fact have to reset 
it and re-join it to the cluster.

Regards,

Matthias.

From 314992959 at qq.com  Thu Jul 18 04:06:59 2013
From: 314992959 at qq.com (3k4b251)
Date: Wed, 17 Jul 2013 20:06:59 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <427D3FEE-9341-44AC-90BA-6A9DD110B198@gopivotal.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<1374053753330-28122.post@n5.nabble.com>
	<427D3FEE-9341-44AC-90BA-6A9DD110B198@gopivotal.com>
Message-ID: <1374116819725-28165.post@n5.nabble.com>

that is a  good  way  to  avoid  SERVER_EXCEPTION  .  but  I  want  to 
handle  it  when  SERVER_EXCEPTION  happen , not  just  avoid  it.     After
all,  I  may   face   SERVER_EXCEPTION  somewhere.   for example , try to 
use amqp_basic_consume()  consume  a queue which  is  not create before  can 
Lead to SERVER_EXCEPTION,too.   



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-RPC-style-commands-doesn-t-work-after-amqp-get-rpc-reply-return-AMQP-RESPONSE-SERVER-EXCEN-tp28119p28165.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mcbain at tiscali.it  Thu Jul 18 09:20:31 2013
From: mcbain at tiscali.it (Carlo Bertoldi)
Date: Thu, 18 Jul 2013 10:20:31 +0200
Subject: [rabbitmq-discuss] amqp_rpc_server
In-Reply-To: <51E6F4DD.2010109@rabbitmq.com>
References: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
	<51E6F4DD.2010109@rabbitmq.com>
Message-ID: <CAEr978SMGksECtK-ox4RXRr073o8=posS0E_mis+TBOwi-RV5g@mail.gmail.com>

Ok :)
I've added start_link functions to both client and server, so the
caller has the possibility do decide what he needs, without breaking
the old behaviour.

Here are the patches:

--- amqp_rpc_client_orig.erl 2013-07-18 10:13:40.000000000 +0200
+++ amqp_rpc_client.erl 2013-07-18 10:13:04.000000000 +0200
@@ -1,4 +1,4 @@
- %% The contents of this file are subject to the Mozilla Public License
+%% The contents of this file are subject to the Mozilla Public License
 %% Version 1.1 (the "License"); you may not use this file except in
 %% compliance with the License. You may obtain a copy of the License at
 %% http://www.mozilla.org/MPL/
@@ -25,7 +25,7 @@

 -behaviour(gen_server).

--export([start/2, stop/1]).
+-export([start/2, start_link/2, stop/1]).
 -export([call/2]).
 -export([init/1, terminate/2, code_change/3, handle_call/3,
          handle_cast/2, handle_info/2]).
@@ -53,6 +53,18 @@
     {ok, Pid} = gen_server:start(?MODULE, [Connection, Queue], []),
     Pid.

+%% @spec (Connection, Queue) -> RpcClient
+%% where
+%%      Connection = pid()
+%%      Queue = binary()
+%%      RpcClient = pid()
+%% @doc Starts, and link to, a new RPC client instance that sends requests
+%% to a specified queue. This function returns the pid of the RPC client
+%% process that can be used to invoke RPCs and stop the client.
+start_link(Connection, Queue) ->
+    {ok, Pid} = gen_server:start_link(?MODULE, [Connection, Queue], []),
+    Pid.
+
 %% @spec (RpcClient) -> ok
 %% where
 %%      RpcClient = pid()


--- amqp_rpc_server_orig.erl 2013-07-18 10:13:54.000000000 +0200
+++ amqp_rpc_server.erl 2013-07-18 10:12:54.000000000 +0200
@@ -27,7 +27,7 @@

 -export([init/1, terminate/2, code_change/3, handle_call/3,
          handle_cast/2, handle_info/2]).
--export([start/3]).
+-export([start/3, start_link/3]).
 -export([stop/1]).

 -record(state, {channel,
@@ -51,6 +51,20 @@
     {ok, Pid} = gen_server:start(?MODULE, [Connection, Queue, Fun], []),
     Pid.

+%% @spec (Connection, Queue, RpcHandler) -> RpcServer
+%% where
+%%      Connection = pid()
+%%      Queue = binary()
+%%      RpcHandler = function()
+%%      RpcServer = pid()
+%% @doc Starts, and links to, a new RPC server instance that receives
+%% requests via a specified queue and dispatches them to a specified
+%% handler function. This function returns the pid of the RPC server that
+%% can be used to stop the server.
+start_link(Connection, Queue, Fun) ->
+    {ok, Pid} = gen_server:start_link(?MODULE, [Connection, Queue, Fun], []),
+    Pid.
+
 %% @spec (RpcServer) -> ok
 %% where
 %%      RpcServer = pid()

On Wed, Jul 17, 2013 at 9:47 PM, Matthias Radestock
<matthias at rabbitmq.com> wrote:
> On 17/07/13 13:51, Carlo Bertoldi wrote:
>>
>>   I'm looking through the amqp_rpm_server, in particular the start
>> function. I wonder why you used a start instead of a start_link.
>
>
> Laziness. There is nothing stopping you from linking to the returned pid
> yourself, though obviously at the risk of getting the wrong exit code if the
> process dies immediately after starting up successfully.
>
> Matthias.



-- 
? molto pi? bello sapere qualcosa di tutto, che sapere tutto di una cosa.

Blaise Pascal

From hermelin.skalomilny at gmail.com  Thu Jul 18 10:05:57 2013
From: hermelin.skalomilny at gmail.com (crdr)
Date: Thu, 18 Jul 2013 02:05:57 -0700 (PDT)
Subject: [rabbitmq-discuss] problem with installation of RabbitMQ in Debian
Message-ID: <1374138357877-28167.post@n5.nabble.com>

Hi,

I am new to RabbitMQ. I have downloaded C lib and rabbit-codegen and put
rabbit-codegen contents into ./codegen.

Then I tried:
root at my:temp/rabbitmq# ./configure --enable-static ?-disable-shared
?-prefix=home/rabbitmq
but I received:
-bash: ./configure: No such file or directory

Could you please help me.

Thank you



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/problem-with-installation-of-RabbitMQ-in-Debian-tp28167.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From louis.bouchard at canonical.com  Thu Jul 18 10:17:48 2013
From: louis.bouchard at canonical.com (Louis Bouchard)
Date: Thu, 18 Jul 2013 11:17:48 +0200
Subject: [rabbitmq-discuss] Update: [Bug] Memory leak in 3.1.3 (Ubuntu)
In-Reply-To: <51E547AC.2010409@rabbitmq.com>
References: <51D6B8F2.40507@canonical.com>
	<6A117ADC-D9EE-4EB8-8986-8372C322779D@rabbitmq.com>
	<51D6BE3D.9040606@canonical.com> <51E50FC4.5090504@canonical.com>
	<51E51298.2080900@rabbitmq.com> <51E51356.2080609@rabbitmq.com>
	<51E518B9.8080801@canonical.com> <51E547AC.2010409@rabbitmq.com>
Message-ID: <51E7B2BC.2060500@canonical.com>

Hello,

Le 16/07/2013 15:16, Matthias Radestock a ?crit :

> If you are planning on running this test for a while, I suggest you take
> a reading of the memory values reported by 'rabbitmqctl status' near the
> beginning and end of the run, since that will help pinpoint where the
> memory is going.
> 
> Regards,
> 
> Matthias.

My instance has now been running for almost two days. Here is some data :

saucy> sudo rabbitmqctl status
Status of node 'rabbit at server-656f503b-0965-4e01-94d9-58b177bbec3d' ...
[{pid,2150},
 {running_applications,[{rabbit,"RabbitMQ","3.1.3"},
                        {mnesia,"MNESIA  CXC 138 12","4.9"},
                        {os_mon,"CPO  CXC 138 46","2.2.12"},
                        {xmerl,"XML parser","1.3.3"},
                        {sasl,"SASL  CXC 138 11","2.3.2"},
                        {stdlib,"ERTS  CXC 138 10","1.19.2"},
                        {kernel,"ERTS  CXC 138 10","2.16.2"}]},
 {os,{unix,linux}},
 {erlang_version,"Erlang R16B01 (erts-5.10.2) [source] [64-bit]
[async-threads:30] [kernel-poll:true]\n"},
 {memory,[{total,36267272},
          {connection_procs,82704},
          {queue_procs,60600},
          {plugins,0},
          {other_proc,13558976},
          {mnesia,59392},
          {mgmt_db,0},
          {msg_index,39616},
          {other_ets,744408},
          {binary,1335160},
          {code,16368314},
          {atom,594537},
          {other_system,3423565}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,840009318},
 {disk_free_limit,1000000000},
 {disk_free,8495063040},
 {file_descriptors,[{total_limit,924},
                    {total_used,4},
                    {sockets_limit,829},
                    {sockets_used,2}]},
 {processes,[{limit,1048576},{used,131}]},
 {run_queue,0},
 {uptime,171822}]
...done.

saucy> free
             total       used       free     shared    buffers     cached
Mem:       2050804    1243784     807020          0      82532     979120
-/+ buffers/cache:     182132    1868672
Swap:            0          0          0
saucy> ps auxww | grep beam
rabbitmq  2150  3.3  1.8 336912 38340 ?        Sl   Jul16  96:28
/usr/lib/erlang/erts-5.10.2/bin/beam -W w -K true -A30 -P 1048576 --
-root /usr/lib/erlang -progname erl -- -home /var/lib/rabbitmq -- ...

So there is clearly some memory leakage here. It may not come from
rabbitmq (which does not seem to be consuming all that memory) but it is
clearly triggered by it.

During my previous test, restarting rabbitmq did not release the used
memory so it might also be some kind of kernel leak triggered by rabbitmq.

I'll let the instance run for now.

Kind regards,

...Louis

-- 
Louis Bouchard
Backline Support Analyst
Canonical Ltd
Ubuntu support: http://canonical.com/support

From brett.r.cameron at gmail.com  Thu Jul 18 10:40:03 2013
From: brett.r.cameron at gmail.com (Brett Cameron)
Date: Thu, 18 Jul 2013 21:40:03 +1200
Subject: [rabbitmq-discuss] problem with installation of RabbitMQ in
	Debian
In-Reply-To: <1374138357877-28167.post@n5.nabble.com>
References: <1374138357877-28167.post@n5.nabble.com>
Message-ID: <CALPqkio60pC7JJnd3Hhx3xDoEMKWyq_PM_DDNEFbstTUMGLztw@mail.gmail.com>

As per the build instructions you might need to do a "autoreconf -i" first.
See
https://github.com/alanxz/rabbitmq-c#building-and-installing-using-autotools
.

Brett



On Thu, Jul 18, 2013 at 9:05 PM, crdr <hermelin.skalomilny at gmail.com> wrote:

> Hi,
>
> I am new to RabbitMQ. I have downloaded C lib and rabbit-codegen and put
> rabbit-codegen contents into ./codegen.
>
> Then I tried:
> root at my:temp/rabbitmq# ./configure --enable-static ?-disable-shared
> ?-prefix=home/rabbitmq
> but I received:
> -bash: ./configure: No such file or directory
>
> Could you please help me.
>
> Thank you
>
>
>
> --
> View this message in context:
> http://rabbitmq.1065348.n5.nabble.com/problem-with-installation-of-RabbitMQ-in-Debian-tp28167.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/f252614c/attachment.htm>

From emile at rabbitmq.com  Thu Jul 18 10:43:12 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 18 Jul 2013 10:43:12 +0100
Subject: [rabbitmq-discuss] nuget rabbitmq client update
In-Reply-To: <BA22EE0A-6C87-49DE-B2E1-F331108835E2@rabbitmq.com>
References: <CAJkxw=hPCSSb7gOE92nGt6HCzJ_gO=04Z4yNbHkmBm=2NwGqLQ@mail.gmail.com>
	<BA22EE0A-6C87-49DE-B2E1-F331108835E2@rabbitmq.com>
Message-ID: <51E7B8B0.8060901@rabbitmq.com>

On 17/07/13 19:09, Tim Watson wrote:
> Thanks for pointing this out. I'll drop the package maintainer a note about getting the latest releases up there.
> 
> Cheers,
> Tim
> 
> On 17 Jul 2013, at 15:04, Fabio Panero <fabio.pnr at gmail.com> wrote:
> 
>> Is it possibile to update the nuget package for rabbitmq client .net to the  new 3.1.3 version?
>> Now is present the 3.1.1 old version of this package.

Further to what Tim said, there have been no changes to the .net library
since then so you are not missing out any features or bugfixes by using
the older version.



-Emile







From 0x6e6562 at gmail.com  Thu Jul 18 15:24:48 2013
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Thu, 18 Jul 2013 15:24:48 +0100
Subject: [rabbitmq-discuss] =?utf-8?q?_Re=3A__erlang-rfc4627-wrapper_tags?=
In-Reply-To: <51E6BE1A.2010701@rabbitmq.com>
References: <etPan.51e6ba66.6de91b18.441b@backd8>
	<51E6BE1A.2010701@rabbitmq.com>
Message-ID: <etPan.51e7fab0.238e1f29.169c8@backd8>

Hey Emile,

Thanks for sweetening this up - this kind of thing crops up when when you do an umbrella build.

Cheers,

Ben

On 17 July 2013 at 16:54:11, Emile Joubert (emile at rabbitmq.com) wrote:


Hi Ben,  

On 17/07/13 16:38, Ben Hood wrote:  
> Hi guys,  
>  
> Is there a reason why the hg tags for erlang-rfc4627-wrapper stop at 3_1_0?  

Later tags were defined on the stable branch only. Thanks for pointing  
this out. I've just merged the stable branch into default which should  
bring them into view as soon as you pull the latest version.  



-Emile  









(in the interests of fostering an inclusive community we prefer gender  
neutral salutations)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/55896609/attachment.htm>

From aflaed at gmail.com  Thu Jul 18 15:40:16 2013
From: aflaed at gmail.com (=?UTF-8?B?0J3QsNC40LvRjCDQodCw0LvQuNGF0L7Qsg==?=)
Date: Thu, 18 Jul 2013 18:40:16 +0400
Subject: [rabbitmq-discuss] How to identify connection?
In-Reply-To: <51B5F0E4.4070608@rabbitmq.com>
References: <ce281d24-55f6-40c4-9cbb-55edba0fd884@googlegroups.com>
	<51B192D3.7020506@rabbitmq.com>
	<CANV4tdVvtpdGR==YDhoZ_jac4PP0hY8uyRWaavNFx=sz2+JKbw@mail.gmail.com>
	<51B5F0E4.4070608@rabbitmq.com>
Message-ID: <CANV4tdUPCc-Ds28E_6_0tKzbNH3NVi7CbSCiJgcvvAZiOGCWsQ@mail.gmail.com>

Sorry for delayed response.

There is situation, where from one IP can be more than one connections.
I have two services in one server , which work with RabbitMQ. Management
plugin shows me their names like PeerHost:PeerPort, but i want be able to
set name, or description from code.

I think it's very useful function.


2013/6/10 Emile Joubert <emile at rabbitmq.com>

> On 07/06/13 09:57, ????? ??????? wrote:
> > I'm using RabbitMQ Management plugin to get connections,
>
>
> Connections can be listed using the management plugin also. See the
> /api/connections endpoint.
>
>
> > i have different computers, where I start connection, I want to know,
> > from which computer connection was started. For example, on computer
> > I can log connection ID, and then compare it in management site.
>
>
> You should be able to work that out from the IP number reported by
> rabbitmqctl or the management plugin.
>
>
>
>
>
> -Emile
>
>
>
>
>
>
>


-- 
? ?????????,
??????? ?????
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/9b7a190b/attachment.htm>

From tclotworthy at bluestonelogic.com  Thu Jul 18 16:00:16 2013
From: tclotworthy at bluestonelogic.com (thadc)
Date: Thu, 18 Jul 2013 08:00:16 -0700 (PDT)
Subject: [rabbitmq-discuss] Who can push to a queue?
Message-ID: <1374159616700-28173.post@n5.nabble.com>

Hello,
I am new to rabbitmq. I am trying to clarify some basic use cases for
rabbitmq, and could use to some help.

First of all, if this is the wrong forum for this question, I apologize and
all I ask is that I might get some helpful advice on another source to have
my question answered. Otherwise, here is my question:

I have read a good deal of rabbitmq documentation, and have a pretty clear
understanding of how it could support some of the use cases I am
investigating, but not all of them.

I have use cases where an external user (i.e., someone who would be
interfacing with my system from web services via the internet) would need to
send messages to me. These messages would either be to initiate a
data-sending event (i.e., they are a data provider to me), or a
data-receiving event (i.e., they would be receiving data from me, however
they are initiating the request rather than monitoring a rabbitmq queue that
I creating for a data-sending event I initiated).

Are there reasonable ways to support these use cases with rabbitmq, or
should I be looking elsewhere?

Thank you for any response!



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Who-can-push-to-a-queue-tp28173.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Thu Jul 18 16:09:34 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 18 Jul 2013 16:09:34 +0100
Subject: [rabbitmq-discuss] How to identify connection?
In-Reply-To: <CANV4tdUPCc-Ds28E_6_0tKzbNH3NVi7CbSCiJgcvvAZiOGCWsQ@mail.gmail.com>
References: <ce281d24-55f6-40c4-9cbb-55edba0fd884@googlegroups.com>
	<51B192D3.7020506@rabbitmq.com>
	<CANV4tdVvtpdGR==YDhoZ_jac4PP0hY8uyRWaavNFx=sz2+JKbw@mail.gmail.com>
	<51B5F0E4.4070608@rabbitmq.com>
	<CANV4tdUPCc-Ds28E_6_0tKzbNH3NVi7CbSCiJgcvvAZiOGCWsQ@mail.gmail.com>
Message-ID: <51E8052E.5010808@rabbitmq.com>

On 18/07/13 15:40, ????? ??????? wrote:
> Sorry for delayed response.
>
> There is situation, where from one IP can be more than one connections.
> I have two services in one server , which work with RabbitMQ. Management
> plugin shows me their names like PeerHost:PeerPort, but i want be able
> to set name, or description from code.
>
> I think it's very useful function.

Clients can supply arbitrary properties when starting a connection. See 
http://www.rabbitmq.com/amqp-0-9-1-reference.html#connection.start-ok.client-properties. 
These properties are shown in rabbitmqctl and the management UI.

The means by which these properties can be supplied by application code 
depends on the client library. For example, for the Java client we have 
http://www.rabbitmq.com/releases/rabbitmq-java-client/v3.1.3/rabbitmq-java-client-javadoc-3.1.3/com/rabbitmq/client/ConnectionFactory.html#setClientProperties(java.util.Map)

Regards,

Matthias.

From michael.s.klishin at gmail.com  Thu Jul 18 16:12:13 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 18 Jul 2013 19:12:13 +0400
Subject: [rabbitmq-discuss] Who can push to a queue?
In-Reply-To: <1374159616700-28173.post@n5.nabble.com>
References: <1374159616700-28173.post@n5.nabble.com>
Message-ID: <CAE3HoVSaNCd+223sYH1DpROG-kHueWsu2_Nq780pMBphOZcKpA@mail.gmail.com>

2013/7/18 thadc <tclotworthy at bluestonelogic.com>

> These messages would either be to initiate a
> data-sending event (i.e., they are a data provider to me), or a
> data-receiving event (i.e., they would be receiving data from me, however
> they are initiating the request rather than monitoring a rabbitmq queue
> that
> I creating for a data-sending event I initiated).
>

You can expose a RabbitMQ node to external users but there are other
protocols
(supported by RabbitMQ) that fit the request/response model better.

Are there reasonable ways to support these use cases with rabbitmq, or
> should I be looking elsewhere?
>

You can take a look at STOMP [1] and MQTT [2] support in RabbitMQ.

1. https://www.rabbitmq.com/stomp.html
2. http://hg.rabbitmq.com/rabbitmq-mqtt/file/rabbitmq_v3_1_3/README.md
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/6c0feb77/attachment.htm>

From aflaed at gmail.com  Thu Jul 18 16:48:59 2013
From: aflaed at gmail.com (=?UTF-8?B?0J3QsNC40LvRjCDQodCw0LvQuNGF0L7Qsg==?=)
Date: Thu, 18 Jul 2013 19:48:59 +0400
Subject: [rabbitmq-discuss] How to identify connection?
In-Reply-To: <51E8052E.5010808@rabbitmq.com>
References: <ce281d24-55f6-40c4-9cbb-55edba0fd884@googlegroups.com>
	<51B192D3.7020506@rabbitmq.com>
	<CANV4tdVvtpdGR==YDhoZ_jac4PP0hY8uyRWaavNFx=sz2+JKbw@mail.gmail.com>
	<51B5F0E4.4070608@rabbitmq.com>
	<CANV4tdUPCc-Ds28E_6_0tKzbNH3NVi7CbSCiJgcvvAZiOGCWsQ@mail.gmail.com>
	<51E8052E.5010808@rabbitmq.com>
Message-ID: <CANV4tdVDoGd+PgJZxsFCVqAGGCTLup30VTjT-oEMV=HCnJBn4w@mail.gmail.com>

Wow, how could I miss that! Thank you!

By the way, can i ask about another my question --
http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-April/026619.html
Is there way to see the state of this bug?


2013/7/18 Matthias Radestock <matthias at rabbitmq.com>

> On 18/07/13 15:40, ????? ??????? wrote:
>
>> Sorry for delayed response.
>>
>> There is situation, where from one IP can be more than one connections.
>> I have two services in one server , which work with RabbitMQ. Management
>> plugin shows me their names like PeerHost:PeerPort, but i want be able
>> to set name, or description from code.
>>
>> I think it's very useful function.
>>
>
> Clients can supply arbitrary properties when starting a connection. See
> http://www.rabbitmq.com/amqp-**0-9-1-reference.html#**
> connection.start-ok.client-**properties<http://www.rabbitmq.com/amqp-0-9-1-reference.html#connection.start-ok.client-properties>.
> These properties are shown in rabbitmqctl and the management UI.
>
> The means by which these properties can be supplied by application code
> depends on the client library. For example, for the Java client we have
> http://www.rabbitmq.com/**releases/rabbitmq-java-client/**
> v3.1.3/rabbitmq-java-client-**javadoc-3.1.3/com/rabbitmq/**
> client/ConnectionFactory.html#**setClientProperties(java.util.**Map)<http://www.rabbitmq.com/releases/rabbitmq-java-client/v3.1.3/rabbitmq-java-client-javadoc-3.1.3/com/rabbitmq/client/ConnectionFactory.html#setClientProperties(java.util.Map)>
>
> Regards,
>
> Matthias.
>



-- 
? ?????????,
??????? ?????
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/f96db84b/attachment.htm>

From emile at rabbitmq.com  Thu Jul 18 16:55:20 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 18 Jul 2013 16:55:20 +0100
Subject: [rabbitmq-discuss] How to identify connection?
In-Reply-To: <CANV4tdVDoGd+PgJZxsFCVqAGGCTLup30VTjT-oEMV=HCnJBn4w@mail.gmail.com>
References: <ce281d24-55f6-40c4-9cbb-55edba0fd884@googlegroups.com>
	<51B192D3.7020506@rabbitmq.com>
	<CANV4tdVvtpdGR==YDhoZ_jac4PP0hY8uyRWaavNFx=sz2+JKbw@mail.gmail.com>
	<51B5F0E4.4070608@rabbitmq.com>
	<CANV4tdUPCc-Ds28E_6_0tKzbNH3NVi7CbSCiJgcvvAZiOGCWsQ@mail.gmail.com>
	<51E8052E.5010808@rabbitmq.com>
	<CANV4tdVDoGd+PgJZxsFCVqAGGCTLup30VTjT-oEMV=HCnJBn4w@mail.gmail.com>
Message-ID: <51E80FE8.8000405@rabbitmq.com>

On 18/07/13 16:48, ????? ??????? wrote:

> ? http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-April/026619.html
> Is there way to see the state of this bug?

There has been no progress on that bug. A note to that effect will
appear in the release notes as soon as it is fixed and released. In the
meantime changes relating to this will appear in a branch named
"bug25525" in this source code repository:
http://hg.rabbitmq.com/rabbitmq-dotnet-client/



-Emile





From tclotworthy at bluestonelogic.com  Thu Jul 18 17:44:31 2013
From: tclotworthy at bluestonelogic.com (thadc)
Date: Thu, 18 Jul 2013 09:44:31 -0700 (PDT)
Subject: [rabbitmq-discuss] Who can push to a queue?
In-Reply-To: <CAE3HoVSaNCd+223sYH1DpROG-kHueWsu2_Nq780pMBphOZcKpA@mail.gmail.com>
References: <1374159616700-28173.post@n5.nabble.com>
	<CAE3HoVSaNCd+223sYH1DpROG-kHueWsu2_Nq780pMBphOZcKpA@mail.gmail.com>
Message-ID: <1374165871945-28178.post@n5.nabble.com>

Thanks so much for your reply. 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Who-can-push-to-a-queue-tp28173p28178.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From davidv at spindance.com  Thu Jul 18 19:52:42 2013
From: davidv at spindance.com (David van Geest)
Date: Thu, 18 Jul 2013 14:52:42 -0400
Subject: [rabbitmq-discuss] is a topic exchange _required_ for rabbitmq-mqtt?
Message-ID: <CANaOvh-f+xo9u98COZzvro1qPWKuyD0w-6J6KzCHaxsjmM1Eyw@mail.gmail.com>

Hi,

I've been looking at the https://github.com/rabbitmq/rabbitmq-mqtt plugin.
 It states in the README that:

"The exchange is expected to be an AMQP topic exchange."

Is there any reason it could not be a direct exchange, or a custom exchange
such as this: https://github.com/jbrisbin/random-exchange.

Clearly the MQTT PUBLISH topic would be unused in this case, but I don't
necessarily care about it.

Thanks,
-David

-- 
David van Geest
Software Engineer
SpinDance, Inc.
616.355.7000 x113
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/d4932c79/attachment.htm>

From lrodriguez1995 at yahoo.com  Thu Jul 18 20:05:07 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Thu, 18 Jul 2013 12:05:07 -0700 (PDT)
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
	''rabbitmq" not found"
Message-ID: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>

Dear all,
I am trying to connect rabbitmq-server to an amazon instance I created. (installed erl R16B01)
after installing and starting rabbitmq-server I get "start-stop-daemon: user 'rabbitmq' not found"
I have attached my init.d script for review
Not really sure what I am missing at this point
Please help...



Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/fd82be9c/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: init.png
Type: image/png
Size: 20179 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/fd82be9c/attachment.png>

From michael.s.klishin at gmail.com  Thu Jul 18 20:09:54 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 18 Jul 2013 23:09:54 +0400
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
 ''rabbitmq" not found"
In-Reply-To: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
Message-ID: <CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>

2013/7/18 Luis Rodriguez <lrodriguez1995 at yahoo.com>

> I have attached my init.d script for review


Luis,

Let me clarify: you are using a custom init script? is there a reason to do
so?
What OS are you running RabbitMQ on and how was it installed?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/3239cb96/attachment.htm>

From lrodriguez1995 at yahoo.com  Thu Jul 18 20:19:46 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Thu, 18 Jul 2013 12:19:46 -0700 (PDT)
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
	''rabbitmq" not found"
In-Reply-To: <CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
Message-ID: <1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>

Hi Michael,
I am running Ubuntu..
as far as installation:
for erlang
added into sources.list

deb http://binaries.erlang-solutions.com/debian squeeze contrib
wget -O - http://binaries.erlang-solutions.com/debian/erlang_solutions.asc \ 
?| sudo apt-key add -
?sudo apt-get update
?sudo apt-get install esl-erlang
For rabbitmq :
www.rabbitmq.com/releases/rabbitmq-server/v3.1.3/rabbitmq-server-generic-unix-3.1.3.tar.gz
and untared under opt


I did the changes in the init script for rabbitmq to start automatically (hopefully did it the right way)
thanks in advance for your help




Luis



________________________________
 From: Michael Klishin <michael.s.klishin at gmail.com>
To: Luis Rodriguez <lrodriguez1995 at yahoo.com>; Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Thursday, July 18, 2013 3:09 PM
Subject: Re: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user ''rabbitmq" not found"
 




2013/7/18 Luis Rodriguez <lrodriguez1995 at yahoo.com>

I have attached my init.d script for review
Luis,


Let me clarify: you are using a custom init script? is there a reason to do so?
What OS are you running RabbitMQ on and how was it installed?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/eb7fb0bc/attachment.htm>

From michael.s.klishin at gmail.com  Thu Jul 18 20:29:43 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 18 Jul 2013 23:29:43 +0400
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
 ''rabbitmq" not found"
In-Reply-To: <1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
Message-ID: <CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>

2013/7/18 Luis Rodriguez <lrodriguez1995 at yahoo.com>

> For rabbitmq :
>
> www.rabbitmq.com/releases/rabbitmq-server/v3.1.3/rabbitmq-server-generic-unix-3.1.3.tar.gz
> and untared under opt
>

Luis,

You almost certainly can use the apt repo instead:
http://www.rabbitmq.com/install-debian.html

Are there any specific reasons to use Erlang from Erlang Solutions?

If not then following the instructions on the Debian installation page above
should be all you need. This will provide you init.d/upstart scripts and
also
greatly simplify upgrades and uninstallation.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/708f4d08/attachment.htm>

From davidv at spindance.com  Thu Jul 18 20:43:27 2013
From: davidv at spindance.com (David van Geest)
Date: Thu, 18 Jul 2013 15:43:27 -0400
Subject: [rabbitmq-discuss] is a topic exchange _required_ for
	rabbitmq-mqtt?
In-Reply-To: <CANaOvh-f+xo9u98COZzvro1qPWKuyD0w-6J6KzCHaxsjmM1Eyw@mail.gmail.com>
References: <CANaOvh-f+xo9u98COZzvro1qPWKuyD0w-6J6KzCHaxsjmM1Eyw@mail.gmail.com>
Message-ID: <CANaOvh_ZNxjaN69Dbf8otMAeVP4heppUhb4+3sdCDEx21=UGJg@mail.gmail.com>

On Thu, Jul 18, 2013 at 2:52 PM, David van Geest <davidv at spindance.com>wrote:

> Hi,
>
> I've been looking at the https://github.com/rabbitmq/rabbitmq-mqtt plugin.
>  It states in the README that:
>
> "The exchange is expected to be an AMQP topic exchange."
>
> Is there any reason it could not be a direct exchange, or a custom
> exchange such as this: https://github.com/jbrisbin/random-exchange.
>
> Clearly the MQTT PUBLISH topic would be unused in this case, but I don't
> necessarily care about it.
>
>
Thinking about this a little more, I really would not want to lose the
ability to do topic publishing in MQTT.  Fortunately, it seems there's
another way.  With Rabbit's Exchange-to-Exchange bindings (
http://www.rabbitmq.com/blog/2010/10/19/exchange-to-exchange-bindings/), it
seems that MQTT messages could first go to a topic exchange, and then based
on exchange-to-exchange bindings, be routed to a custom exchange (such as
the random one above).

Any reason this wouldn't work?  Am I really off in the weeds?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/e2398f30/attachment.htm>

From lrodriguez1995 at yahoo.com  Thu Jul 18 20:55:54 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Thu, 18 Jul 2013 12:55:54 -0700 (PDT)
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
	''rabbitmq" not found"
In-Reply-To: <CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
Message-ID: <1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>

Thanks for the advice Michael, 
went ahead and deleted my original init script and followed the tutorial...
everything goes well until I do :


sudo apt-get install rabbitmq-server
at which point? rabbitmq-server kind of freezes (see pic) when trying to start
no idea why or how to solve this issue..

thanks in advance

Luis










________________________________
 From: Michael Klishin <michael.s.klishin at gmail.com>
To: Luis Rodriguez <lrodriguez1995 at yahoo.com>; "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Thursday, July 18, 2013 3:29 PM
Subject: Re: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user ''rabbitmq" not found"
 


2013/7/18 Luis Rodriguez <lrodriguez1995 at yahoo.com>

For rabbitmq :
>www.rabbitmq.com/releases/rabbitmq-server/v3.1.3/rabbitmq-server-generic-unix-3.1.3.tar.gz
>and untared under opt

Luis,

You almost certainly can use the apt repo instead:
http://www.rabbitmq.com/install-debian.html


Are there any specific reasons to use Erlang from Erlang Solutions?

If not then following the instructions on the Debian installation page above
should be all you need. This will provide you init.d/upstart scripts and also
greatly simplify upgrades and uninstallation.-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/1d1a00f4/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: init2.png
Type: image/png
Size: 25242 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/1d1a00f4/attachment.png>

From michael.s.klishin at gmail.com  Thu Jul 18 20:59:56 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Thu, 18 Jul 2013 23:59:56 +0400
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
 ''rabbitmq" not found"
In-Reply-To: <1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
	<1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
Message-ID: <CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>

2013/7/18 Luis Rodriguez <lrodriguez1995 at yahoo.com>

> at which point  rabbitmq-server kind of freezes (see pic) when trying to
> start
> no idea why or how to solve this issue..
>

Make sure you don't have other instances or rabbitmq-server or epmd running,
then reinstall (optionally with package purging).

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/8378cbea/attachment.htm>

From goyalk at vmware.com  Thu Jul 18 21:42:44 2013
From: goyalk at vmware.com (Kapil Goyal)
Date: Thu, 18 Jul 2013 13:42:44 -0700 (PDT)
Subject: [rabbitmq-discuss] High binary memory usage?
Message-ID: <9f35dd47.0000100c.0000015a@KAPILPC.vmware.com>

Hi,

 

Our RabbitMQ server has now been running for 2-3 days and this morning we
noticed it has gone above the high memory watermark of 1.6 GB. I ran
'rabbitmqctl status' to understand the memory usage, as there were no
messages queued. Here is the result:

 

[{pid,4504},

{running_applications,

     [{rabbitmq_management,"RabbitMQ Management Console","3.0.2"},

      {rabbitmq_management_agent,"RabbitMQ Management Agent","3.0.2"},

      {rabbit,"RabbitMQ","3.0.2"},

      {ssl,"Erlang/OTP SSL application","5.1.2"},

      {public_key,"Public key infrastructure","0.17"},

      {crypto,"CRYPTO version 2","2.2"},

      {os_mon,"CPO  CXC 138 46","2.2.10"},

      {rabbitmq_mochiweb,"RabbitMQ Mochiweb Embedding","3.0.2"},

      {webmachine,"webmachine","1.9.1-rmq3.0.2-git52e62bc"},

      {mochiweb,"MochiMedia Web Server","2.3.1-rmq3.0.2-gitd541e9a"},

      {xmerl,"XML parser","1.3.2"},

      {inets,"INETS  CXC 138 49","5.9.2"},

      {mnesia,"MNESIA  CXC 138 12","4.7.1"},

      {amqp_client,"RabbitMQ AMQP Client","0.0.0"},

      {sasl,"SASL  CXC 138 11","2.2.1"},

      {stdlib,"ERTS  CXC 138 10","1.18.3"},

      {kernel,"ERTS  CXC 138 10","2.15.3"}]},

{os,{unix,linux}},

{erlang_version,

     "Erlang R15B03 (erts-5.9.3.1) [source] [smp:8:8] [async-threads:30]
[hipe] [kernel-poll:true]\n"},

{memory,

     [{total,1806492128},

      {connection_procs,463497352},

      {queue_procs,47298896},

      {plugins,810880},

      {other_proc,0},

      {mnesia,4795268},

      {mgmt_db,56057116},

      {msg_index,3831448},

      {other_ets,12874188},

      {binary,1165034312},

      {code,10672981},

      {atom,1606805},

      {other_system,47749138}]},

{vm_memory_high_watermark,0.4},

{vm_memory_limit,1717986918},

{disk_free_limit,1000000000},

{disk_free,23417651200},

{file_descriptors,

     [{total_limit,15900},

      {total_used,14923},

      {sockets_limit,14308},

      {sockets_used,14308}]},

{processes,[{limit,1048576},{used,134052}]},

{run_queue,0},

{uptime,679042}]

...done.

 

So, these two turn out to be the culprits:

 

{connection_procs,463497352},

{binary,1165034312}

 

Now, connections_procs is somewhat understandable, because there are a
high number of connections. But, I cannot understand why the binary memory
usage is so high. Can you please explain? How to keep this in check?

 

Thanks

Kapil

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/51196971/attachment.htm>

From matthias at rabbitmq.com  Thu Jul 18 22:51:21 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 18 Jul 2013 22:51:21 +0100
Subject: [rabbitmq-discuss] High binary memory usage?
In-Reply-To: <9f35dd47.0000100c.0000015a@KAPILPC.vmware.com>
References: <9f35dd47.0000100c.0000015a@KAPILPC.vmware.com>
Message-ID: <51E86359.7080200@rabbitmq.com>

On 18/07/13 21:42, Kapil Goyal wrote:
> Our RabbitMQ server has now been running for 2-3 days and this morning
> we noticed it has gone above the high memory watermark of 1.6 GB. I ran
> ?rabbitmqctl status? to understand the memory usage, as there were no
> messages queued. [...]
> So, these two turn out to be the culprits:
>
> {connection_procs,463497352},
>
> {binary,1165034312}
>
> Now, connections_procs is somewhat understandable, because there are a
> high number of connections. But, I cannot understand why the binary
> memory usage is so high. Can you please explain? How to keep this in check?

Upgrade. There have been numerous bug fixes since then, including for 
several memory leaks.

Matthias.


From kbiton at outbrain.com  Thu Jul 18 22:11:35 2013
From: kbiton at outbrain.com (Kobi Biton)
Date: Thu, 18 Jul 2013 14:11:35 -0700 (PDT)
Subject: [rabbitmq-discuss] blocked producers
Message-ID: <15c40c58-a27b-4c66-beac-7b92fb1f6c87@googlegroups.com>

Folks,

 We are running a high scale setup with rabbitmq 3.0.1 , flow:

logstash 1.1.12 producer --> exchange -->   fanout queue 
                                                              |         |
                                                              |         |
                                                         consumer Consumer
                                                              A             
B

Consumers as logstash , consuming to graphite as output , our message rate 
us ~ 12000 messages/s , FanOut Exchange , Durable: False , Persistent: 
False , No Memory problems

We are facing a problem where at random times rabbitmq starts to block 
producers due to flow control (rabbitmqctl list_connections) , this is to 
our understanding 
in order to protect the broker and the consumer as the producers are faster 
then the consumer ?

The problem is that at some point (when the READY messages count is high ~ 
1M)  rabbitmq blocks most of our producers and does not seem to release 
them , until we restart them (logstash daemon) on every one of them , we 
tried purging the queue / restarting rabbitmq , only restarting the 
producers seems to bring things to normal state.

I guess my questions are:

 - Is my problem on the consumer side ? I am unable to debug the consumer 
speed or state 
 - Can I force flow control to release blocked producers?
 - Can I tune rabbitmq for lots of connections and high message rate?
 - We use fanout exchange , when a consumer creates a new queue under this 
exchange and does not consume fast enough can he effect the producers from 
the other queue (i.e cause them to be blocked?)

Thanks
Kobi 

 

-- 
The above terms reflect a potential business arrangement, are provided solely 
as a basis for further discussion, and are not intended to be and do not 
constitute a legally binding obligation. No legally binding obligations will 
be created, implied, or inferred until an agreement in final form is executed 
in writing by all parties involved.

This email and any attachments hereto may be confidential or privileged. 
 If you received this communication by mistake, please don't forward it to 
anyone else, please erase all copies and attachments, and please let me 
know that it has gone to the wrong person. Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/09e46f90/attachment.htm>

From michael.s.klishin at gmail.com  Thu Jul 18 23:19:30 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 19 Jul 2013 02:19:30 +0400
Subject: [rabbitmq-discuss] blocked producers
In-Reply-To: <15c40c58-a27b-4c66-beac-7b92fb1f6c87@googlegroups.com>
References: <15c40c58-a27b-4c66-beac-7b92fb1f6c87@googlegroups.com>
Message-ID: <CAE3HoVQ7h9F+kLXXfqVfyYbMsn-zS_u50FKTGOHWYOyOHqTFUw@mail.gmail.com>

2013/7/19 Kobi Biton <kbiton at outbrain.com>

>  this is to our understanding
> in order to protect the broker and the consumer as the producers are
> faster then the consumer ?
>

Yes, because messages have certain RAM cost.


> The problem is that at some point (when the READY messages count is high ~
> 1M)  rabbitmq blocks most of our producers and does not seem to release
> them , until we restart them (logstash daemon) on every one of them , we
> tried purging the queue / restarting rabbitmq , only restarting the
> producers seems to bring things to normal state.
>

It's driven by memory watermark and/or available disk space. See

http://www.rabbitmq.com/memory.html

RabbitMQ log should make it clear what limit (RAM or disk) was reached.


>
> I guess my questions are:
>
>  - Is my problem on the consumer side ? I am unable to debug the consumer
> speed or state
>

Yes, consumers do not keep up. Try with a larger number of them.


>  - Can I tune rabbitmq for lots of connections and high message rate?
>

It's not really about the number of connections or message rates. See
http://www.rabbitmq.com/memory.html


>  - We use fanout exchange , when a consumer creates a new queue under this
> exchange and does not consume fast enough can he effect the producers from
> the other queue (i.e cause them to be blocked?)
>

All connections that attempt to publish anything when one of the limits is
hit
will be throttled.

You can reduce RAM footprint of individual messages by using
https://github.com/rabbitmq/rabbitmq-toke
which stores message index in Tokyo Cabinet. Yes, it does not even have a
README :(
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/7e1772de/attachment.htm>

From lrodriguez1995 at yahoo.com  Fri Jul 19 01:54:41 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Thu, 18 Jul 2013 17:54:41 -0700 (PDT)
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
	''rabbitmq" not found"
In-Reply-To: <CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
	<1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
	<CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>
Message-ID: <1374195281.92510.YahooMailNeo@web141105.mail.bf1.yahoo.com>

Thanks Michael...
following your suggestion, there was another epmd rabbitmq process that I killed...
then when I tried reinstalling I am getting an error I have never seen before..
In addition there is nothing on the startup_err log (only a sentence "failed to start rabbitmq")
any suggestions?

thanks again.
? ?Luis


________________________________
 From: Michael Klishin <michael.s.klishin at gmail.com>
To: Luis Rodriguez <lrodriguez1995 at yahoo.com>; "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Thursday, July 18, 2013 3:59 PM
Subject: Re: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user ''rabbitmq" not found"
 




2013/7/18 Luis Rodriguez <lrodriguez1995 at yahoo.com>

at which point? rabbitmq-server kind of freezes (see pic) when trying to start
>no idea why or how to solve this issue..
Make sure you don't have other instances or rabbitmq-server or epmd running,
then reinstall (optionally with package purging).

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/d36955b3/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: init4.png
Type: image/png
Size: 85310 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/d36955b3/attachment.png>

From michael.s.klishin at gmail.com  Fri Jul 19 02:30:25 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 19 Jul 2013 05:30:25 +0400
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
 ''rabbitmq" not found"
In-Reply-To: <1374195281.92510.YahooMailNeo@web141105.mail.bf1.yahoo.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
	<1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
	<CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>
	<1374195281.92510.YahooMailNeo@web141105.mail.bf1.yahoo.com>
Message-ID: <CAE3HoVQPcqKV8Fy1dj+Ru+Dt-w9z5WPU5uxY-z0uc6vhydzDgw@mail.gmail.com>

2013/7/19 Luis Rodriguez <lrodriguez1995 at yahoo.com>

> when I tried reinstalling I am getting an error I have never seen before..
> In addition there is nothing on the startup_err log (only a sentence
> "failed to start rabbitmq")
> any suggestions?
>

Note that it is trying to set up RabbitMQ 2.7.1 (presumably the version in
your Debian release)
after downloading 3.1.3.

Try uninstalling and purging the package. apt-get lets you install a
particular version,
too.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/9d3690e8/attachment.htm>

From bipul.dutta at generationetech.com  Fri Jul 19 01:02:05 2013
From: bipul.dutta at generationetech.com (Bipul Dutta)
Date: Thu, 18 Jul 2013 17:02:05 -0700
Subject: [rabbitmq-discuss] -setcookie flag
Message-ID: <CAGxg=6uzvCcCJQjyh9xy-r6d9b6=J9N6+k_KtycCKHDmfBfH0Q@mail.gmail.com>

Hello All,

I've been trying to setup a cluster using -setcookie flag to make sure the
cookie is same for all nodes. Only issue it, it doesn't seem to work.
Whatever I do, erlang creates a new .erlang.cookie file with a different
value in the user's home directory.

Additionally what is the user home if RabbitMQ runs as a windows service as
"Local System" user?

Appreciate any help in this regards.

-- 
Best Regards,

*Bipul Dutta*|gen-E

Senior Software Engineer

Email:  bipul.dutta at generationetech.com



This message contains confidential information and is intended only
for the individual named. If you are not the named addressee, any
delivery, disclosure, dissemination or distribution of this e-mail is
unlawful and strictly prohibited.   Please notify the sender
immediately by e-mail if you have received this e-mail by mistake and
delete this e-mail from your system. E-mail transmissions cannot be
guaranteed to be secure or without error, as information could be
intercepted, corrupted, lost, destroyed, arrive late, be incomplete,
or contain viruses. The sender therefore does not accept liability for
any errors or omissions in the contents of this message, which errors
or omissions arise as a result of e-mail transmission. If verification
is required, please request a hard-copy version. (genE-dct1)

This message contains confidential information and is intended only for the individual named. If you are not the named addressee, any delivery, disclosure, dissemination or distribution of this e-mail is unlawful and strictly prohibited.   Please notify the sender immediately by e-mail if you have received this e-mail by mistake and delete this e-mail from your system. E-mail transmissions cannot be guaranteed to be secure or without error, as information could be intercepted, corrupted, lost, destroyed, arrive late, be incomplete, or contain viruses. The sender therefore does not accept liability for any errors or omissions in the contents of this message, which errors or omissions arise as a result of e-mail transmission. If verification is required, please request a hard-copy version. (genE-dct1)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130718/ce03bc9a/attachment.htm>

From aflaed at gmail.com  Fri Jul 19 06:33:13 2013
From: aflaed at gmail.com (=?UTF-8?B?0J3QsNC40LvRjCDQodCw0LvQuNGF0L7Qsg==?=)
Date: Fri, 19 Jul 2013 09:33:13 +0400
Subject: [rabbitmq-discuss] How to identify connection?
In-Reply-To: <51E80FE8.8000405@rabbitmq.com>
References: <ce281d24-55f6-40c4-9cbb-55edba0fd884@googlegroups.com>
	<51B192D3.7020506@rabbitmq.com>
	<CANV4tdVvtpdGR==YDhoZ_jac4PP0hY8uyRWaavNFx=sz2+JKbw@mail.gmail.com>
	<51B5F0E4.4070608@rabbitmq.com>
	<CANV4tdUPCc-Ds28E_6_0tKzbNH3NVi7CbSCiJgcvvAZiOGCWsQ@mail.gmail.com>
	<51E8052E.5010808@rabbitmq.com>
	<CANV4tdVDoGd+PgJZxsFCVqAGGCTLup30VTjT-oEMV=HCnJBn4w@mail.gmail.com>
	<51E80FE8.8000405@rabbitmq.com>
Message-ID: <CANV4tdVFhVgOh7GArzmmfYqNMZB5TCf5juKNz=WSPDX=_31Gdw@mail.gmail.com>

Thank you!
I have last one question, it seems, that this bug has low priority and it
won't be fixed soon. Can I do pull request to fix this bug?


2013/7/18 Emile Joubert <emile at rabbitmq.com>

> On 18/07/13 16:48, ????? ??????? wrote:
>
> > --
> http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-April/026619.html
> > Is there way to see the state of this bug?
>
> There has been no progress on that bug. A note to that effect will
> appear in the release notes as soon as it is fixed and released. In the
> meantime changes relating to this will appear in a branch named
> "bug25525" in this source code repository:
> http://hg.rabbitmq.com/rabbitmq-dotnet-client/
>
>
>
> -Emile
>
>
>
>
>


-- 
? ?????????,
??????? ?????
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/4a71d459/attachment.htm>

From niclas at herolabs.com  Fri Jul 19 08:09:58 2013
From: niclas at herolabs.com (Niclas Meier)
Date: Fri, 19 Jul 2013 00:09:58 -0700 (PDT)
Subject: [rabbitmq-discuss] Odd behavoiur with mcollective and RabbitMQ 3.1.3
Message-ID: <7afd49b3-f00a-4d9f-a203-a7d604d22cf1@googlegroups.com>

Hello everyone,

we are using mcollective and a RabbitMQ (and the STOMP connector) to manage 
our servers. Unfortunately we updated to RabbitMQ 3.1.3 and now we have a 
strange behaviour. When I ping a server with mco ping I only get a response 
from a server only once. When I restart mcollective on the server I will 
get an answer the next time and when I restart the MQ all server will 
answer one time.

I checked the MQ with the management console and I see a STOMP connection 
for the mcollective server and every time I use mco ping a new STOMP 
connection appears. The STOMP connection created with the ping seems to 
stay, even when the ruby process is already terminated. 

Fortunately I found an "old" 3.0.1 Rabbit MQ installation on one of our 
servers and on this version mcollecive works like before (the setup works 
unchanged since January 2013). The setup consists of:

   - Ubuntu 12.04 LTS
   - mcollective 2.2.4
   - Stomp Gem 1.2.10 (tested 1.2.9 and 1.2.8)
   - Rabbit MQ 3.1.3 with the embedded Rabbit Stomp Adapter (works on 3.0.1)
   - Ruby 1.8.7

Additionally I have stuff like this in the sasl log:

=SUPERVISOR REPORT==== 19-Jul-2013::07:57:23 ===
     Supervisor: {<0.570.0>,rabbit_stomp_client_sup}
     Context:    shutdown
     Reason:     reached_max_restart_intensity
     Offender:   [{pid,<0.572.0>},
                  {name,rabbit_stomp_processor},
                  {mfa,
                      {rabbit_stomp_processor,start_link,
                          [[#Fun<rabbit_stomp_reader.0.27462503>,
                            {amqp_adapter_info,
                                {0,0,0,0,0,65535,32512,1},
                                61613,
                                {0,0,0,0,0,65535,32512,1},
                                60494,
                                <<"127.0.0.1:60494 -> 127.0.0.1:61613">>,
                                {'STOMP',0},
                                [{ssl,false}]},
                            #Fun<rabbit_stomp_reader.1.72915041>,none,
                            {stomp_configuration,"guest","guest",false,
                                false}]]}},
                  {restart_type,intrinsic},
                  {shutdown,4294967295},
                  {child_type,worker}]

Any Ideas?

Best
Niclas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/f930e78a/attachment.htm>

From bison_art at o2.pl  Fri Jul 19 10:17:37 2013
From: bison_art at o2.pl (rabbit15)
Date: Fri, 19 Jul 2013 02:17:37 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51E6A6FA.2050303@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
Message-ID: <1374225457778-28196.post@n5.nabble.com>

Hi, I made test with my buffer and without. Both was with watermark 100
When I used my buffer and there wasn't queued messages there was speed about
150 mes/sec. When there wasn't my buffer I can show you how it was on the
image.
<http://rabbitmq.1065348.n5.nabble.com/file/n28196/RepoWithoutBuf.png> 
When there was buffer :
<http://rabbitmq.1065348.n5.nabble.com/file/n28196/RepoBuf.png> 

Here is report without buffer:
Reporting server status on {{2013,7,19},{8,24,39}}

 ...
Status of node rabbit at katlabucs6 ...
[{pid,2800},
 {running_applications,
     [{rabbitmq_tracing,"RabbitMQ message logging / tracing","3.1.1"},
      {rabbitmq_management,"RabbitMQ Management Console","3.1.1"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","3.1.1"},
      {rabbit,"RabbitMQ","3.1.1"},
      {os_mon,"CPO  CXC 138 46","2.2.10"},
      {rabbitmq_web_dispatch,"RabbitMQ Web Dispatcher","3.1.1"},
      {webmachine,"webmachine","1.9.1-rmq3.1.1-git52e62bc"},
      {mochiweb,"MochiMedia Web Server","2.3.1-rmq3.1.1-gitd541e9a"},
      {xmerl,"XML parser","1.3.2"},
      {inets,"INETS  CXC 138 49","5.9.1"},
      {mnesia,"MNESIA  CXC 138 12","4.7.1"},
      {amqp_client,"RabbitMQ AMQP Client","3.1.1"},
      {sasl,"SASL  CXC 138 11","2.2.1"},
      {stdlib,"ERTS  CXC 138 10","1.18.2"},
      {kernel,"ERTS  CXC 138 10","2.15.2"}]},
 {os,{unix,linux}},
 {erlang_version,
     "Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:32:32]
[async-threads:30] [hipe] [kernel-poll:true]\n"},
 {memory,
     [{total,46058523560},
      {connection_procs,61777912},
      {queue_procs,24176381544},
      {plugins,862384},
      {other_proc,6352847354},
      {mnesia,648944},
      {mgmt_db,7840840},
      {msg_index,262032},
      {other_ets,1886080},
      {binary,15377407720},
      {code,18618268},
      {atom,703377},
      {other_system,59287105}]},
 {vm_memory_high_watermark,100.0},
 {vm_memory_limit,6767380480000},
 {disk_free_limit,0},
 {disk_free,247772397568},
 {file_descriptors,
     [{total_limit,924},
      {total_used,201},
      {sockets_limit,829},
      {sockets_used,199}]},
 {processes,[{limit,1048576},{used,2779}]},
 {run_queue,3},
 {uptime,309}]

Cluster status of node rabbit at katlabucs6 ...
[{nodes,[{disc,[rabbit at katlabucs6]}]},
 {running_nodes,[rabbit at katlabucs6]},
 {partitions,[]}]

Application environment of node rabbit at katlabucs6 ...
[{auth_backends,[rabbit_auth_backend_internal]},
 {auth_mechanisms,['PLAIN','AMQPLAIN']},
 {backing_queue_module,rabbit_variable_queue},
 {cluster_nodes,{[],disc}},
 {cluster_partition_handling,ignore},
 {collect_statistics,fine},
 {collect_statistics_interval,5000},
 {default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
 {default_user,<<"guest">>},
 {default_user_tags,[administrator]},
 {default_vhost,<<"/">>},
 {delegate_count,16},
 {disk_free_limit,0},

{enabled_plugins_file,"/home/airsyncmb31/services/rabbitmq//sbin/../etc/rabbitmq/enabled_plugins"},
 {error_logger,{file,"/home/airsyncmb31/log//rabbit at katlabucs6.log"}},
 {frame_max,131072},
 {heartbeat,600},
 {hipe_compile,false},
 {included_applications,[]},
 {log_levels,[{connection,info}]},
 {msg_store_file_size_limit,16777216},
 {msg_store_index_module,rabbit_msg_store_ets_index},
 {plugins_dir,"/home/airsyncmb31/services/rabbitmq//sbin/../plugins"},

{plugins_expand_dir,"/home/airsyncmb31/services/rabbitmq//sbin/../var/lib/rabbitmq/mnesia/rabbit at katlabucs6-plugins-expand"},
 {queue_index_max_journal_entries,65536},
 {reverse_dns_lookups,false},

{sasl_error_logger,{file,"/home/airsyncmb31/log//rabbit at katlabucs6-sasl.log"}},
 {server_properties,[]},
 {ssl_cert_login_from,distinguished_name},
 {ssl_listeners,[]},
 {ssl_options,[]},
 {tcp_listen_options,[binary,
                      {packet,raw},
                      {reuseaddr,true},
                      {backlog,128},
                      {nodelay,true},
                      {linger,{true,0}},
                      {exit_on_close,false}]},
 {tcp_listeners,[5672]},
 {trace_vhosts,[]},
 {vm_memory_high_watermark,100.0}]

Connections:
pid	name	port	peer_port	host	peer_host	ssl	peer_cert_subject
peer_cert_issuer	peer_cert_validity	auth_mechanism	ssl_protocol
ssl_key_exchange	ssl_cipher	ssl_hash	protocol	user	vhost	timeout	frame_max
client_properties	recv_oct	recv_cnt	send_oct	send_cnt	send_pend	state
last_blocked_by	last_blocked_age	channels
<rabbit at katlabucs6.1.321.0>	172.20.1.21:45314 -> 172.20.1.26:5672	5672	45314
172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	11832	383	10982	303	0
running	none	infinity	9
<rabbit at katlabucs6.1.603.0>	172.20.1.21:45315 -> 172.20.1.26:5672	5672	45315
172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	10860	367	10820	299	0
running	none	infinity	9
<rabbit at katlabucs6.1.1080.0>	172.20.1.21:45316 -> 172.20.1.26:5672	5672
45316	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	10860	368	10820	299	0
running	none	infinity	9
<rabbit at katlabucs6.1.1455.0>	172.20.1.21:45317 -> 172.20.1.26:5672	5672
45317	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	10860	364	10820	299	0
running	none	infinity	9
<rabbit at katlabucs6.1.1854.0>	172.20.1.21:45318 -> 172.20.1.26:5672	5672
45318	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	10860	367	10820	299	0
running	none	infinity	9
<rabbit at katlabucs6.1.2235.0>	172.20.1.21:45319 -> 172.20.1.26:5672	5672
45319	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	7230	226	7024	181	0
running	none	infinity	12
<rabbit at katlabucs6.1.2501.0>	172.20.1.21:45322 -> 172.20.1.26:5672	5672
45322	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	374314095	308499
8363	running	none	infinity	1
<rabbit at katlabucs6.1.2504.0>	172.20.1.21:45321 -> 172.20.1.26:5672	5672
45321	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	296689205	245896
8989	running	none	infinity	1
<rabbit at katlabucs6.1.2507.0>	172.20.1.21:45323 -> 172.20.1.26:5672	5672
45323	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	6	396565004	335164
8495	running	none	infinity	1
<rabbit at katlabucs6.1.2510.0>	172.20.1.21:45325 -> 172.20.1.26:5672	5672
45325	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	245042593	190315
9513	running	none	infinity	1
<rabbit at katlabucs6.1.2513.0>	172.20.1.21:45326 -> 172.20.1.26:5672	5672
45326	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	376017325	312929
8854	running	none	infinity	1
<rabbit at katlabucs6.1.2516.0>	172.20.1.21:45327 -> 172.20.1.26:5672	5672
45327	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	282283388	218395
8362	running	none	infinity	1
<rabbit at katlabucs6.1.2519.0>	172.20.1.21:45328 -> 172.20.1.26:5672	5672
45328	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	252187387	196216
9584	running	none	infinity	1
<rabbit at katlabucs6.1.2525.0>	172.20.1.21:45329 -> 172.20.1.26:5672	5672
45329	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	378930360	308740
9144	running	none	infinity	1
<rabbit at katlabucs6.1.2531.0>	172.20.1.21:45330 -> 172.20.1.26:5672	5672
45330	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	385559068	322465
9271	running	none	infinity	1
<rabbit at katlabucs6.1.2543.0>	172.20.1.21:45331 -> 172.20.1.26:5672	5672
45331	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	423	5	314176187	243086
8572	running	none	infinity	1
<rabbit at katlabucs6.1.2561.0>	172.20.1.21:45332 -> 172.20.1.26:5672	5672
45332	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	374903744	317269
8820	running	none	infinity	1
<rabbit at katlabucs6.1.2568.0>	172.20.1.21:45333 -> 172.20.1.26:5672	5672
45333	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	278391740	216584
8424	running	none	infinity	1
<rabbit at katlabucs6.1.2571.0>	172.20.1.21:45334 -> 172.20.1.26:5672	5672
45334	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	326749856	263200
9352	running	none	infinity	1
<rabbit at katlabucs6.1.2574.0>	172.20.1.21:45335 -> 172.20.1.26:5672	5672
45335	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	375140912	299427
8264	running	none	infinity	1
<rabbit at katlabucs6.1.2598.0>	172.20.1.21:45336 -> 172.20.1.26:5672	5672
45336	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	347769236	289753
9200	running	none	infinity	1
<rabbit at katlabucs6.1.2651.0>	172.20.1.21:45337 -> 172.20.1.26:5672	5672
45337	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	341547236	281227
8696	running	none	infinity	1
<rabbit at katlabucs6.1.2654.0>	172.20.1.21:45338 -> 172.20.1.26:5672	5672
45338	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	303131876	257512
9164	running	none	infinity	1
<rabbit at katlabucs6.1.2657.0>	172.20.1.21:45339 -> 172.20.1.26:5672	5672
45339	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	267396368	210410
8296	running	none	infinity	1
<rabbit at katlabucs6.1.2660.0>	172.20.1.21:45340 -> 172.20.1.26:5672	5672
45340	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	396418688	312332
8984	running	none	infinity	1
<rabbit at katlabucs6.1.2663.0>	172.20.1.21:45341 -> 172.20.1.26:5672	5672
45341	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	258415460	203550
8904	running	none	infinity	1
<rabbit at katlabucs6.1.2666.0>	172.20.1.21:45342 -> 172.20.1.26:5672	5672
45342	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	265090568	206485
8680	running	none	infinity	1
<rabbit at katlabucs6.1.2669.0>	172.20.1.21:45343 -> 172.20.1.26:5672	5672
45343	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	292350248	239550
8848	running	none	infinity	1
<rabbit at katlabucs6.1.2678.0>	172.20.1.21:45344 -> 172.20.1.26:5672	5672
45344	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151808271	116471	384	4	0
running	flow	4.708439	1
<rabbit at katlabucs6.1.2681.0>	172.20.1.21:45345 -> 172.20.1.26:5672	5672
45345	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	161208123	119476	384	4	0
running	flow	10.154823	1
<rabbit at katlabucs6.1.2684.0>	172.20.1.21:45346 -> 172.20.1.26:5672	5672
45346	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	158980128	116471	384	4	0
running	flow	17.150983	1
<rabbit at katlabucs6.1.2702.0>	172.20.1.21:45347 -> 172.20.1.26:5672	5672
45347	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	148934400	109926	384	4	0
running	flow	3.912904	1
<rabbit at katlabucs6.1.2711.0>	172.20.1.21:45348 -> 172.20.1.26:5672	5672
45348	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	286822184	236552
8576	running	none	infinity	1
<rabbit at katlabucs6.1.2714.0>	172.20.1.21:45349 -> 172.20.1.26:5672	5672
45349	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	281025476	224795
9068	running	none	infinity	1
<rabbit at katlabucs6.1.2719.0>	172.20.1.21:45350 -> 172.20.1.26:5672	5672
45350	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	157571259	117991	384	4	0
running	flow	1.621938	1
<rabbit at katlabucs6.1.2729.0>	172.20.1.21:45351 -> 172.20.1.26:5672	5672
45351	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	161620458	115310	384	4	0
running	flow	2.492095	1
<rabbit at katlabucs6.1.2748.0>	172.20.1.21:45352 -> 172.20.1.26:5672	5672
45352	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	308993000	242772
9592	running	none	infinity	1
<rabbit at katlabucs6.1.2760.0>	172.20.1.21:45353 -> 172.20.1.26:5672	5672
45353	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	367905824	287010
8936	running	none	infinity	1
<rabbit at katlabucs6.1.2773.0>	172.20.1.21:45354 -> 172.20.1.26:5672	5672
45354	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	379961132	313005
9408	running	none	infinity	1
<rabbit at katlabucs6.1.2784.0>	172.20.1.21:45355 -> 172.20.1.26:5672	5672
45355	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	381660104	321190
9580	running	none	infinity	1
<rabbit at katlabucs6.1.2801.0>	172.20.1.21:45356 -> 172.20.1.26:5672	5672
45356	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	279944312	229982
9564	running	none	infinity	1
<rabbit at katlabucs6.1.2811.0>	172.20.1.21:45357 -> 172.20.1.26:5672	5672
45357	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	5	337828676	268711
8452	running	none	infinity	1
<rabbit at katlabucs6.1.2836.0>	172.20.1.21:45358 -> 172.20.1.26:5672	5672
45358	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	261345656	203343
9524	running	none	infinity	1
<rabbit at katlabucs6.1.2849.0>	172.20.1.21:45359 -> 172.20.1.26:5672	5672
45359	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	140955891	109784	384	4	0
running	flow	2.222497	1
<rabbit at katlabucs6.1.2859.0>	172.20.1.21:45360 -> 172.20.1.26:5672	5672
45360	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	424	6	351850136	283620
9224	running	none	infinity	1
<rabbit at katlabucs6.1.2880.0>	172.20.1.21:45361 -> 172.20.1.26:5672	5672
45361	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	149776395	110866	384	4	0
running	flow	17.351772	1
<rabbit at katlabucs6.1.2894.0>	172.20.1.21:45362 -> 172.20.1.26:5672	5672
45362	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151110420	113126	384	4	0
running	flow	17.356161	1
<rabbit at katlabucs6.1.2904.0>	172.20.1.21:45363 -> 172.20.1.26:5672	5672
45363	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	148014096	110289	384	4	0
running	flow	6.403236	1
<rabbit at katlabucs6.1.2907.0>	172.20.1.21:45365 -> 172.20.1.26:5672	5672
45365	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	143513061	104283	384	4	0
running	flow	12.142803	1
<rabbit at katlabucs6.1.2910.0>	172.20.1.21:45364 -> 172.20.1.26:5672	5672
45364	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145692546	108746	384	4	0
running	flow	12.862911	1
<rabbit at katlabucs6.1.2913.0>	172.20.1.21:45367 -> 172.20.1.26:5672	5672
45367	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	136628799	100588	384	4	0
running	flow	17.302726	1
<rabbit at katlabucs6.1.2920.0>	172.20.1.21:45368 -> 172.20.1.26:5672	5672
45368	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	137037669	99512	384	4	0
running	flow	3.662752	1
<rabbit at katlabucs6.1.2926.0>	172.20.1.21:45369 -> 172.20.1.26:5672	5672
45369	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151490174	111113	384	4	0
running	flow	10.454769	1
<rabbit at katlabucs6.1.2929.0>	172.20.1.21:45370 -> 172.20.1.26:5672	5672
45370	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	132018270	98700	384	4	0
running	flow	1.997735	1
<rabbit at katlabucs6.1.2934.0>	172.20.1.21:45371 -> 172.20.1.26:5672	5672
45371	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151334024	109747	384	4	0
running	flow	17.33488	1
<rabbit at katlabucs6.1.2942.0>	172.20.1.21:45372 -> 172.20.1.26:5672	5672
45372	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	143348127	100471	384	4	0
running	flow	12.126957	1
<rabbit at katlabucs6.1.2963.0>	172.20.1.21:45373 -> 172.20.1.26:5672	5672
45373	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	147043022	112471	384	4	0
running	flow	5.492555	1
<rabbit at katlabucs6.1.2992.0>	172.20.1.21:45374 -> 172.20.1.26:5672	5672
45374	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146398296	109505	384	4	0
running	flow	17.356178	1
<rabbit at katlabucs6.1.3006.0>	172.20.1.21:45375 -> 172.20.1.26:5672	5672
45375	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145545370	109098	384	4	0
running	flow	6.552607	1
<rabbit at katlabucs6.1.3018.0>	172.20.1.21:45376 -> 172.20.1.26:5672	5672
45376	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	152453454	104630	384	4	0
running	flow	1.778701	1
<rabbit at katlabucs6.1.3030.0>	172.20.1.21:45377 -> 172.20.1.26:5672	5672
45377	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	130386948	98255	384	4	0
running	flow	17.338527	1
<rabbit at katlabucs6.1.3033.0>	172.20.1.21:45378 -> 172.20.1.26:5672	5672
45378	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	138994701	105103	384	4	0
running	flow	17.360753	1
<rabbit at katlabucs6.1.3043.0>	172.20.1.21:45379 -> 172.20.1.26:5672	5672
45379	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	140488116	105910	384	4	0
running	flow	17.198707	1
<rabbit at katlabucs6.1.3049.0>	172.20.1.21:45380 -> 172.20.1.26:5672	5672
45380	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	138896850	106658	384	4	0
running	flow	17.319691	1
<rabbit at katlabucs6.1.3056.0>	172.20.1.21:45381 -> 172.20.1.26:5672	5672
45381	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145060264	104388	384	4	0
running	flow	17.371126	1
<rabbit at katlabucs6.1.3062.0>	172.20.1.21:45382 -> 172.20.1.26:5672	5672
45382	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	144830550	103175	384	4	0
running	flow	0.582161	1
<rabbit at katlabucs6.1.3082.0>	172.20.1.21:45383 -> 172.20.1.26:5672	5672
45383	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	147945916	109186	384	4	0
running	flow	17.349093	1
<rabbit at katlabucs6.1.3099.0>	172.20.1.21:45384 -> 172.20.1.26:5672	5672
45384	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	137773264	101781	384	4	0
running	flow	2.520915	1
<rabbit at katlabucs6.1.3107.0>	172.20.1.21:45385 -> 172.20.1.26:5672	5672
45385	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146421892	112171	384	4	0
running	flow	6.393357	1
<rabbit at katlabucs6.1.3110.0>	172.20.1.21:45386 -> 172.20.1.26:5672	5672
45386	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	144746576	110582	384	4	0
running	flow	17.271098	1
<rabbit at katlabucs6.1.3113.0>	172.20.1.21:45387 -> 172.20.1.26:5672	5672
45387	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	155139226	111730	384	4	0
running	flow	10.383323	1
<rabbit at katlabucs6.1.3133.0>	172.20.1.21:45388 -> 172.20.1.26:5672	5672
45388	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	153168960	113645	384	4	0
running	flow	17.304053	1
<rabbit at katlabucs6.1.3157.0>	172.20.1.21:45389 -> 172.20.1.26:5672	5672
45389	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	150924564	111413	384	4	0
running	flow	12.282123	1
<rabbit at katlabucs6.1.3164.0>	172.20.1.21:45390 -> 172.20.1.26:5672	5672
45390	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	149435934	109968	384	4	0
running	flow	17.304382	1
<rabbit at katlabucs6.1.3167.0>	172.20.1.21:45391 -> 172.20.1.26:5672	5672
45391	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	153896272	116680	384	4	0
running	flow	1.389297	1
<rabbit at katlabucs6.1.3170.0>	172.20.1.21:45392 -> 172.20.1.26:5672	5672
45392	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	129041356	97638	384	4	0
running	flow	10.38255	1
<rabbit at katlabucs6.1.3173.0>	172.20.1.21:45393 -> 172.20.1.26:5672	5672
45393	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	140184220	102729	384	4	0
running	flow	2.50686	1
<rabbit at katlabucs6.1.3176.0>	172.20.1.21:45394 -> 172.20.1.26:5672	5672
45394	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	155958840	110087	384	4	0
running	flow	10.70626	1
<rabbit at katlabucs6.1.3179.0>	172.20.1.21:45395 -> 172.20.1.26:5672	5672
45395	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146525298	107962	384	4	0
running	flow	10.432515	1
<rabbit at katlabucs6.1.3182.0>	172.20.1.21:45396 -> 172.20.1.26:5672	5672
45396	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	150465136	108758	384	4	0
running	flow	17.26058	1
<rabbit at katlabucs6.1.3185.0>	172.20.1.21:45397 -> 172.20.1.26:5672	5672
45397	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	136367220	101198	384	4	0
running	flow	10.458229	1
<rabbit at katlabucs6.1.3188.0>	172.20.1.21:45399 -> 172.20.1.26:5672	5672
45399	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	154479232	113803	384	4	0
running	flow	4.400959	1
<rabbit at katlabucs6.1.3191.0>	172.20.1.21:45398 -> 172.20.1.26:5672	5672
45398	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	142757572	106370	384	4	0
running	flow	0.882659	1
<rabbit at katlabucs6.1.3229.0>	172.20.1.21:45400 -> 172.20.1.26:5672	5672
45400	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	164721978	120029	384	4	0
running	flow	17.38166	1
<rabbit at katlabucs6.1.3232.0>	172.20.1.21:45401 -> 172.20.1.26:5672	5672
45401	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	138152882	104552	384	4	0
running	flow	5.50981	1
<rabbit at katlabucs6.1.3239.0>	172.20.1.21:45402 -> 172.20.1.26:5672	5672
45402	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	155863068	114385	384	4	0
running	flow	17.393588	1
<rabbit at katlabucs6.1.3245.0>	172.20.1.21:45403 -> 172.20.1.26:5672	5672
45403	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	156587604	114798	384	4	0
running	flow	5.813714	1
<rabbit at katlabucs6.1.3276.0>	172.20.1.21:45404 -> 172.20.1.26:5672	5672
45404	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	147472608	113714	384	4	0
running	flow	0.98771	1
<rabbit at katlabucs6.1.3292.0>	172.20.1.21:45405 -> 172.20.1.26:5672	5672
45405	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	155652786	112453	384	4	0
running	flow	4.426065	1
<rabbit at katlabucs6.1.3299.0>	172.20.1.21:45406 -> 172.20.1.26:5672	5672
45406	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	163150068	118091	384	4	0
running	flow	0.056064	1
<rabbit at katlabucs6.1.3306.0>	172.20.1.21:45407 -> 172.20.1.26:5672	5672
45407	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146692552	108153	384	4	0
running	flow	12.007053	1
<rabbit at katlabucs6.1.3309.0>	172.20.1.21:45408 -> 172.20.1.26:5672	5672
45408	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145571048	107739	384	4	0
running	flow	51.867041	1
<rabbit at katlabucs6.1.3312.0>	172.20.1.21:45409 -> 172.20.1.26:5672	5672
45409	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145794516	105518	384	4	0
running	flow	14.511361	1
<rabbit at katlabucs6.1.3349.0>	172.20.1.21:45410 -> 172.20.1.26:5672	5672
45410	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	156156630	117013	384	4	0
running	flow	10.385763	1
<rabbit at katlabucs6.1.3365.0>	172.20.1.21:45411 -> 172.20.1.26:5672	5672
45411	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	159340702	119458	384	4	0
running	flow	0.602118	1
<rabbit at katlabucs6.1.3391.0>	172.20.1.21:45412 -> 172.20.1.26:5672	5672
45412	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	132397540	104216	384	4	0
running	flow	10.434256	1
<rabbit at katlabucs6.1.3394.0>	172.20.1.21:45413 -> 172.20.1.26:5672	5672
45413	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145581458	108855	384	4	0
running	flow	5.847276	1
<rabbit at katlabucs6.1.3400.0>	172.20.1.21:45414 -> 172.20.1.26:5672	5672
45414	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134200552	100604	384	4	0
running	flow	0.983916	1
<rabbit at katlabucs6.1.3407.0>	172.20.1.21:45415 -> 172.20.1.26:5672	5672
45415	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	139541576	98173	384	4	0
running	flow	0.056239	1
<rabbit at katlabucs6.1.3416.0>	172.20.1.21:45416 -> 172.20.1.26:5672	5672
45416	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	140795634	103277	384	4	0
running	flow	17.230471	1
<rabbit at katlabucs6.1.3420.0>	172.20.1.21:45417 -> 172.20.1.26:5672	5672
45417	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146510724	102073	384	4	0
running	flow	17.371071	1
<rabbit at katlabucs6.1.3430.0>	172.20.1.21:45418 -> 172.20.1.26:5672	5672
45418	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134234558	105027	384	4	0
running	flow	5.494492	1
<rabbit at katlabucs6.1.3461.0>	172.20.1.21:45420 -> 172.20.1.26:5672	5672
45420	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	124215783	91510	384	4	0
running	flow	34.130057	1
<rabbit at katlabucs6.1.3464.0>	172.20.1.21:45419 -> 172.20.1.26:5672	5672
45419	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	143452077	100394	384	4	0
running	flow	11.982241	1
<rabbit at katlabucs6.1.3467.0>	172.20.1.21:45421 -> 172.20.1.26:5672	5672
45421	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134796507	99193	384	4	0
running	flow	4.006355	1
<rabbit at katlabucs6.1.3470.0>	172.20.1.21:45422 -> 172.20.1.26:5672	5672
45422	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146353668	107882	384	4	0
running	flow	17.174753	1
<rabbit at katlabucs6.1.3478.0>	172.20.1.21:45423 -> 172.20.1.26:5672	5672
45423	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	135136770	97729	384	4	0
running	flow	10.419871	1
<rabbit at katlabucs6.1.3496.0>	172.20.1.21:45424 -> 172.20.1.26:5672	5672
45424	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	125370321	94254	384	4	0
running	flow	1.745085	1
<rabbit at katlabucs6.1.3500.0>	172.20.1.21:45425 -> 172.20.1.26:5672	5672
45425	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	135783339	101825	384	4	0
running	flow	12.128454	1
<rabbit at katlabucs6.1.3506.0>	172.20.1.21:45426 -> 172.20.1.26:5672	5672
45426	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	125063322	94881	384	4	0
running	flow	10.35109	1
<rabbit at katlabucs6.1.3519.0>	172.20.1.21:45427 -> 172.20.1.26:5672	5672
45427	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134073015	97005	384	4	0
running	flow	22.773983	1
<rabbit at katlabucs6.1.3525.0>	172.20.1.21:45428 -> 172.20.1.26:5672	5672
45428	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	124836711	97307	384	4	0
running	flow	17.280103	1
<rabbit at katlabucs6.1.3532.0>	172.20.1.21:45429 -> 172.20.1.26:5672	5672
45429	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	122250566	93207	384	4	0
running	flow	84.556755	1
<rabbit at katlabucs6.1.3545.0>	172.20.1.21:45430 -> 172.20.1.26:5672	5672
45430	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	136391510	101221	384	4	0
running	flow	17.361843	1
<rabbit at katlabucs6.1.3556.0>	172.20.1.21:45431 -> 172.20.1.26:5672	5672
45431	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	122950812	90283	384	4	0
running	flow	0.519453	1
<rabbit at katlabucs6.1.3570.0>	172.20.1.21:45432 -> 172.20.1.26:5672	5672
45432	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	135088872	100729	384	4	0
running	flow	17.339292	1
<rabbit at katlabucs6.1.3573.0>	172.20.1.21:45433 -> 172.20.1.26:5672	5672
45433	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	132966620	96921	384	4	0
running	flow	6.723517	1
<rabbit at katlabucs6.1.3593.0>	172.20.1.21:45434 -> 172.20.1.26:5672	5672
45434	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146233818	104161	384	4	0
running	flow	17.341731	1
<rabbit at katlabucs6.1.3610.0>	172.20.1.21:45435 -> 172.20.1.26:5672	5672
45435	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	127765784	96847	384	4	0
running	flow	17.401654	1
<rabbit at katlabucs6.1.3620.0>	172.20.1.21:45436 -> 172.20.1.26:5672	5672
45436	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	153407002	107714	384	4	0
running	flow	17.407138	1
<rabbit at katlabucs6.1.3623.0>	172.20.1.21:45437 -> 172.20.1.26:5672	5672
45437	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	125640062	93911	384	4	0
running	flow	10.708829	1
<rabbit at katlabucs6.1.3637.0>	172.20.1.21:45438 -> 172.20.1.26:5672	5672
45438	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	122507346	91411	384	4	0
running	flow	12.287172	1
<rabbit at katlabucs6.1.3640.0>	172.20.1.21:45439 -> 172.20.1.26:5672	5672
45439	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	125381200	93530	384	4	0
running	flow	1.228419	1
<rabbit at katlabucs6.1.3643.0>	172.20.1.21:45440 -> 172.20.1.26:5672	5672
45440	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134014560	99648	384	4	0
running	flow	4.460582	1
<rabbit at katlabucs6.1.3646.0>	172.20.1.21:45441 -> 172.20.1.26:5672	5672
45441	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134949378	101246	384	4	0
running	flow	17.263638	1
<rabbit at katlabucs6.1.3649.0>	172.20.1.21:45442 -> 172.20.1.26:5672	5672
45442	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	133874372	97244	384	4	0
running	flow	17.336223	1
<rabbit at katlabucs6.1.3666.0>	172.20.1.21:45443 -> 172.20.1.26:5672	5672
45443	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	138148718	98962	384	4	0
running	flow	17.264339	1
<rabbit at katlabucs6.1.3669.0>	172.20.1.21:45444 -> 172.20.1.26:5672	5672
45444	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145902086	106137	384	4	0
running	flow	5.858329	1
<rabbit at katlabucs6.1.3672.0>	172.20.1.21:45445 -> 172.20.1.26:5672	5672
45445	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134019418	98680	384	4	0
running	flow	14.509089	1
<rabbit at katlabucs6.1.3675.0>	172.20.1.21:45446 -> 172.20.1.26:5672	5672
45446	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	142583378	98382	384	4	0
running	flow	1.186426	1
<rabbit at katlabucs6.1.3678.0>	172.20.1.21:45447 -> 172.20.1.26:5672	5672
45447	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	136028548	95635	384	4	0
running	flow	0.037793	1
<rabbit at katlabucs6.1.3681.0>	172.20.1.21:45448 -> 172.20.1.26:5672	5672
45448	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	129573654	95216	384	4	0
running	flow	12.012916	1
<rabbit at katlabucs6.1.3684.0>	172.20.1.21:45449 -> 172.20.1.26:5672	5672
45449	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	118276722	93258	384	4	0
running	flow	17.311846	1
<rabbit at katlabucs6.1.3687.0>	172.20.1.21:45450 -> 172.20.1.26:5672	5672
45450	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134237334	98618	384	4	0
running	flow	11.512497	1
<rabbit at katlabucs6.1.3787.0>	172.20.1.21:45451 -> 172.20.1.26:5672	5672
45451	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	150125667	109421	384	4	0
running	flow	17.395629	1
<rabbit at katlabucs6.1.3790.0>	172.20.1.21:45452 -> 172.20.1.26:5672	5672
45452	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	168700839	120807	384	4	0
running	flow	2.516606	1
<rabbit at katlabucs6.1.3793.0>	172.20.1.21:45453 -> 172.20.1.26:5672	5672
45453	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	148994691	110806	384	4	0
running	flow	12.814229	1
<rabbit at katlabucs6.1.3806.0>	172.20.1.21:45454 -> 172.20.1.26:5672	5672
45454	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	164109021	118745	384	4	0
running	flow	1.624956	1
<rabbit at katlabucs6.1.3809.0>	172.20.1.21:45455 -> 172.20.1.26:5672	5672
45455	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	164720940	117037	384	4	0
running	flow	3.616392	1
<rabbit at katlabucs6.1.3816.0>	172.20.1.21:45456 -> 172.20.1.26:5672	5672
45456	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	153910833	108448	384	4	0
running	flow	12.144537	1
<rabbit at katlabucs6.1.3820.0>	172.20.1.21:45457 -> 172.20.1.26:5672	5672
45457	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	133498518	102389	384	4	0
running	flow	1.748368	1
<rabbit at katlabucs6.1.3832.0>	172.20.1.21:45458 -> 172.20.1.26:5672	5672
45458	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	169393146	115295	384	4	0
running	flow	10.411121	1
<rabbit at katlabucs6.1.3835.0>	172.20.1.21:45459 -> 172.20.1.26:5672	5672
45459	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	171492243	120998	384	4	0
running	flow	24.531566	1
<rabbit at katlabucs6.1.3838.0>	172.20.1.21:45460 -> 172.20.1.26:5672	5672
45460	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	152916378	115909	384	4	0
running	flow	10.210341	1
<rabbit at katlabucs6.1.3851.0>	172.20.1.21:45461 -> 172.20.1.26:5672	5672
45461	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	170571704	117084	384	4	0
running	flow	10.39914	1
<rabbit at katlabucs6.1.3854.0>	172.20.1.21:45462 -> 172.20.1.26:5672	5672
45462	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	141872722	105131	384	4	0
running	flow	0.562429	1
<rabbit at katlabucs6.1.3857.0>	172.20.1.21:45463 -> 172.20.1.26:5672	5672
45463	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	150773966	109560	384	4	0
running	flow	17.376651	1
<rabbit at katlabucs6.1.3898.0>	172.20.1.21:45464 -> 172.20.1.26:5672	5672
45464	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	149906466	112376	384	4	0
running	flow	6.696836	1
<rabbit at katlabucs6.1.3901.0>	172.20.1.21:45465 -> 172.20.1.26:5672	5672
45465	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	148029890	108478	384	4	0
running	flow	17.375646	1
<rabbit at katlabucs6.1.3937.0>	172.20.1.21:45466 -> 172.20.1.26:5672	5672
45466	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	154266174	117305	384	4	0
running	flow	10.442584	1
<rabbit at katlabucs6.1.3940.0>	172.20.1.21:45467 -> 172.20.1.26:5672	5672
45467	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	147818914	109699	384	4	0
running	flow	10.368027	1
<rabbit at katlabucs6.1.3943.0>	172.20.1.21:45468 -> 172.20.1.26:5672	5672
45468	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	149337386	112856	384	4	0
running	flow	2.527815	1
<rabbit at katlabucs6.1.3946.0>	172.20.1.21:45469 -> 172.20.1.26:5672	5672
45469	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	147654436	108449	384	4	0
running	flow	0.916867	1
<rabbit at katlabucs6.1.3949.0>	172.20.1.21:45470 -> 172.20.1.26:5672	5672
45470	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	155992152	110296	384	4	0
running	flow	4.4523	1
<rabbit at katlabucs6.1.3952.0>	172.20.1.21:45471 -> 172.20.1.26:5672	5672
45471	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	164018956	114616	384	4	0
running	flow	9.900416	1
<rabbit at katlabucs6.1.3955.0>	172.20.1.21:45472 -> 172.20.1.26:5672	5672
45472	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	149204138	107042	384	4	0
running	flow	10.713137	1
<rabbit at katlabucs6.1.3958.0>	172.20.1.21:45473 -> 172.20.1.26:5672	5672
45473	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	171152582	121400	384	4	0
running	flow	10.381891	1
<rabbit at katlabucs6.1.3961.0>	172.20.1.21:45474 -> 172.20.1.26:5672	5672
45474	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	164246588	118143	384	4	0
running	flow	2.512213	1
<rabbit at katlabucs6.1.3964.0>	172.20.1.21:45475 -> 172.20.1.26:5672	5672
45475	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	160938290	118252	384	4	0
running	flow	17.023791	1
<rabbit at katlabucs6.1.3985.0>	172.20.1.21:45476 -> 172.20.1.26:5672	5672
45476	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	150955100	114494	384	4	0
running	flow	5.841013	1
<rabbit at katlabucs6.1.3989.0>	172.20.1.21:45477 -> 172.20.1.26:5672	5672
45477	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	167121136	118975	384	4	0
running	flow	17.275219	1
<rabbit at katlabucs6.1.3999.0>	172.20.1.21:45478 -> 172.20.1.26:5672	5672
45478	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	173581582	121791	384	4	0
running	flow	1.00535	1
<rabbit at katlabucs6.1.4006.0>	172.20.1.21:45479 -> 172.20.1.26:5672	5672
45479	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	166026698	122334	384	4	0
running	flow	0.039629	1
<rabbit at katlabucs6.1.4023.0>	172.20.1.21:45480 -> 172.20.1.26:5672	5672
45480	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151480458	111964	384	4	0
running	flow	2.540589	1
<rabbit at katlabucs6.1.4072.0>	172.20.1.21:45481 -> 172.20.1.26:5672	5672
45481	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	153225174	112665	384	4	0
running	flow	2.506339	1
<rabbit at katlabucs6.1.4082.0>	172.20.1.21:45482 -> 172.20.1.26:5672	5672
45482	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	152540196	112722	384	4	0
running	flow	11.870941	1
<rabbit at katlabucs6.1.4107.0>	172.20.1.21:45483 -> 172.20.1.26:5672	5672
45483	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	137948964	103654	384	4	0
running	flow	17.275301	1
<rabbit at katlabucs6.1.4110.0>	172.20.1.21:45485 -> 172.20.1.26:5672	5672
45485	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	154132593	112220	384	4	0
running	flow	12.026684	1
<rabbit at katlabucs6.1.4113.0>	172.20.1.21:45484 -> 172.20.1.26:5672	5672
45484	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151982214	109011	384	4	0
running	flow	10.438614	1
<rabbit at katlabucs6.1.4116.0>	172.20.1.21:45487 -> 172.20.1.26:5672	5672
45487	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	154874103	109056	384	4	0
running	flow	3.620445	1
<rabbit at katlabucs6.1.4119.0>	172.20.1.21:45488 -> 172.20.1.26:5672	5672
45488	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	130050843	102021	384	4	0
running	flow	1.777662	1
<rabbit at katlabucs6.1.4122.0>	172.20.1.21:45489 -> 172.20.1.26:5672	5672
45489	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	143423664	105926	384	4	0
running	flow	37.536349	1
<rabbit at katlabucs6.1.4125.0>	172.20.1.21:45490 -> 172.20.1.26:5672	5672
45490	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	137982228	105610	384	4	0
running	flow	10.395412	1
<rabbit at katlabucs6.1.4128.0>	172.20.1.21:45491 -> 172.20.1.26:5672	5672
45491	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	136415355	108393	384	4	0
running	flow	2.518044	1
<rabbit at katlabucs6.1.4131.0>	172.20.1.21:45492 -> 172.20.1.26:5672	5672
45492	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	160461762	114374	384	4	0
running	flow	1.902218	1
<rabbit at katlabucs6.1.4134.0>	172.20.1.21:45493 -> 172.20.1.26:5672	5672
45493	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146187348	107717	384	4	0
running	flow	17.31837	1
<rabbit at katlabucs6.1.4137.0>	172.20.1.21:45494 -> 172.20.1.26:5672	5672
45494	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	130628534	100524	384	4	0
running	flow	10.453578	1
<rabbit at katlabucs6.1.4144.0>	172.20.1.21:45495 -> 172.20.1.26:5672	5672
45495	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	145047772	112080	384	4	0
running	flow	10.424806	1
<rabbit at katlabucs6.1.4150.0>	172.20.1.21:45496 -> 172.20.1.26:5672	5672
45496	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	157179586	109372	384	4	0
running	flow	8.627467	1
<rabbit at katlabucs6.1.4156.0>	172.20.1.21:45497 -> 172.20.1.26:5672	5672
45497	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	156859652	117377	384	4	0
running	flow	10.448105	1
<rabbit at katlabucs6.1.4159.0>	172.20.1.21:45498 -> 172.20.1.26:5672	5672
45498	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	133414250	100542	384	4	0
running	flow	6.94509	1
<rabbit at katlabucs6.1.4172.0>	172.20.1.21:45499 -> 172.20.1.26:5672	5672
45499	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	141559034	107281	384	4	0
running	flow	2.50157	1
<rabbit at katlabucs6.1.4175.0>	172.20.1.21:45500 -> 172.20.1.26:5672	5672
45500	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	156701420	115746	384	4	0
running	flow	10.392883	1
<rabbit at katlabucs6.1.4178.0>	172.20.1.21:45501 -> 172.20.1.26:5672	5672
45501	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151814966	112581	384	4	0
running	flow	5.506769	1
<rabbit at katlabucs6.1.4183.0>	172.20.1.21:45502 -> 172.20.1.26:5672	5672
45502	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	150367282	109500	384	4	0
running	flow	10.369914	1
<rabbit at katlabucs6.1.4204.0>	172.20.1.21:45503 -> 172.20.1.26:5672	5672
45503	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	152626252	110100	384	4	0
running	flow	10.353811	1
<rabbit at katlabucs6.1.4244.0>	172.20.1.21:45504 -> 172.20.1.26:5672	5672
45504	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	136115298	105406	384	4	0
running	flow	10.429313	1
<rabbit at katlabucs6.1.4261.0>	172.20.1.21:45505 -> 172.20.1.26:5672	5672
45505	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	134596826	105782	384	4	0
running	flow	0.925469	1
<rabbit at katlabucs6.1.4264.0>	172.20.1.21:45506 -> 172.20.1.26:5672	5672
45506	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	146001328	108807	384	4	0
running	flow	4.479726	1
<rabbit at katlabucs6.1.4274.0>	172.20.1.21:45507 -> 172.20.1.26:5672	5672
45507	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	150663620	112179	384	4	0
running	flow	10.438278	1
<rabbit at katlabucs6.1.4282.0>	172.20.1.21:45508 -> 172.20.1.26:5672	5672
45508	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	165748404	121647	384	4	0
running	flow	10.401084	1
<rabbit at katlabucs6.1.4294.0>	172.20.1.21:45509 -> 172.20.1.26:5672	5672
45509	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	133262264	98820	384	4	0
running	flow	38.529039	1
<rabbit at katlabucs6.1.4335.0>	172.20.1.21:45510 -> 172.20.1.26:5672	5672
45510	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	159741834	116505	384	4	0
running	flow	5.865033	1
<rabbit at katlabucs6.1.4377.0>	172.20.1.21:45511 -> 172.20.1.26:5672	5672
45511	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151393014	106936	384	4	0
running	flow	1.424088	1
<rabbit at katlabucs6.1.4380.0>	172.20.1.21:45512 -> 172.20.1.26:5672	5672
45512	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	147103400	108167	384	4	0
running	flow	0.786297	1
<rabbit at katlabucs6.1.4383.0>	172.20.1.21:45513 -> 172.20.1.26:5672	5672
45513	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	130084438	103194	384	4	0
running	flow	10.433805	1
<rabbit at katlabucs6.1.4386.0>	172.20.1.21:45514 -> 172.20.1.26:5672	5672
45514	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	139171674	106297	384	4	0
running	flow	10.406806	1
<rabbit at katlabucs6.1.4389.0>	172.20.1.21:45515 -> 172.20.1.26:5672	5672
45515	172.20.1.26	172.20.1.21	false				PLAIN					{0,9,1}	guest	/	600	131072
[{"product","RabbitMQ"},{"information","Licensed under the MPL. See
http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright
(C) 2007-2013 VMware, Inc."},{"version","3.0.2"}]	151341658	113700	384	4	0
running	flow	10.407339	1

Channels:
pid	name	connection	number	user	vhost	transactional	confirm	consumer_count
messages_unacknowledged	messages_unconfirmed	messages_uncommitted
acks_uncommitted	prefetch_count	client_flow_blocked
<rabbit at katlabucs6.1.332.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (2)
<rabbit at katlabucs6.1.321.0>	2	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.336.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (3)
<rabbit at katlabucs6.1.321.0>	3	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.340.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (4)
<rabbit at katlabucs6.1.321.0>	4	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.344.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (5)
<rabbit at katlabucs6.1.321.0>	5	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.348.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (6)
<rabbit at katlabucs6.1.321.0>	6	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.352.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (7)
<rabbit at katlabucs6.1.321.0>	7	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.705.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.603.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.709.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (2)
<rabbit at katlabucs6.1.603.0>	2	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.713.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (3)
<rabbit at katlabucs6.1.603.0>	3	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.717.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (4)
<rabbit at katlabucs6.1.603.0>	4	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.721.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (5)
<rabbit at katlabucs6.1.603.0>	5	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.725.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (6)
<rabbit at katlabucs6.1.603.0>	6	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.783.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (8)
<rabbit at katlabucs6.1.321.0>	8	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.803.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (9)
<rabbit at katlabucs6.1.321.0>	9	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.811.0>	172.20.1.21:45314 -> 172.20.1.26:5672 (10)
<rabbit at katlabucs6.1.321.0>	10	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1087.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.1080.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1091.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (2)
<rabbit at katlabucs6.1.1080.0>	2	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1095.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (7)
<rabbit at katlabucs6.1.603.0>	7	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1099.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (3)
<rabbit at katlabucs6.1.1080.0>	3	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1103.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (4)
<rabbit at katlabucs6.1.1080.0>	4	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1107.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (5)
<rabbit at katlabucs6.1.1080.0>	5	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1111.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (6)
<rabbit at katlabucs6.1.1080.0>	6	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1115.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (8)
<rabbit at katlabucs6.1.603.0>	8	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1119.0>	172.20.1.21:45315 -> 172.20.1.26:5672 (9)
<rabbit at katlabucs6.1.603.0>	9	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1468.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.1455.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1472.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (2)
<rabbit at katlabucs6.1.1455.0>	2	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1476.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (3)
<rabbit at katlabucs6.1.1455.0>	3	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1480.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (4)
<rabbit at katlabucs6.1.1455.0>	4	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1484.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (5)
<rabbit at katlabucs6.1.1455.0>	5	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1488.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (6)
<rabbit at katlabucs6.1.1455.0>	6	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1492.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (7)
<rabbit at katlabucs6.1.1080.0>	7	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1496.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (8)
<rabbit at katlabucs6.1.1080.0>	8	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1500.0>	172.20.1.21:45316 -> 172.20.1.26:5672 (9)
<rabbit at katlabucs6.1.1080.0>	9	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1843.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (7)
<rabbit at katlabucs6.1.1455.0>	7	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1847.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (8)
<rabbit at katlabucs6.1.1455.0>	8	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1851.0>	172.20.1.21:45317 -> 172.20.1.26:5672 (9)
<rabbit at katlabucs6.1.1455.0>	9	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.1861.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.1854.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1865.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (2)
<rabbit at katlabucs6.1.1854.0>	2	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1869.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (3)
<rabbit at katlabucs6.1.1854.0>	3	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1873.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (4)
<rabbit at katlabucs6.1.1854.0>	4	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1877.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (5)
<rabbit at katlabucs6.1.1854.0>	5	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.1881.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (6)
<rabbit at katlabucs6.1.1854.0>	6	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2224.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (7)
<rabbit at katlabucs6.1.1854.0>	7	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2228.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (8)
<rabbit at katlabucs6.1.1854.0>	8	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2232.0>	172.20.1.21:45318 -> 172.20.1.26:5672 (9)
<rabbit at katlabucs6.1.1854.0>	9	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2242.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2235.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2246.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (2)
<rabbit at katlabucs6.1.2235.0>	2	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2250.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (3)
<rabbit at katlabucs6.1.2235.0>	3	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2254.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (4)
<rabbit at katlabucs6.1.2235.0>	4	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2258.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (5)
<rabbit at katlabucs6.1.2235.0>	5	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2262.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (6)
<rabbit at katlabucs6.1.2235.0>	6	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2450.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (7)
<rabbit at katlabucs6.1.2235.0>	7	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2454.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (8)
<rabbit at katlabucs6.1.2235.0>	8	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2458.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (9)
<rabbit at katlabucs6.1.2235.0>	9	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2462.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (10)
<rabbit at katlabucs6.1.2235.0>	10	guest	/	false	false	1	3	0	0	0	0	false
<rabbit at katlabucs6.1.2466.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (11)
<rabbit at katlabucs6.1.2235.0>	11	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2498.0>	172.20.1.21:45319 -> 172.20.1.26:5672 (12)
<rabbit at katlabucs6.1.2235.0>	12	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2544.0>	172.20.1.21:45321 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2504.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2559.0>	172.20.1.21:45325 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2510.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2560.0>	172.20.1.21:45323 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2507.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2565.0>	172.20.1.21:45322 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2501.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2581.0>	172.20.1.21:45328 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2519.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2588.0>	172.20.1.21:45326 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2513.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2589.0>	172.20.1.21:45327 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2516.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2605.0>	172.20.1.21:45330 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2531.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2606.0>	172.20.1.21:45329 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2525.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2625.0>	172.20.1.21:45331 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2543.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2626.0>	172.20.1.21:45333 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2568.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2633.0>	172.20.1.21:45332 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2561.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2637.0>	172.20.1.21:45335 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2574.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2641.0>	172.20.1.21:45334 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2571.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2648.0>	172.20.1.21:45336 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2598.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2693.0>	172.20.1.21:45339 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2657.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2703.0>	172.20.1.21:45337 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2651.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2710.0>	172.20.1.21:45338 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2654.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2732.0>	172.20.1.21:45340 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2660.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2737.0>	172.20.1.21:45344 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2678.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2740.0>	172.20.1.21:45345 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2681.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2747.0>	172.20.1.21:45342 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2666.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2752.0>	172.20.1.21:45341 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2663.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2769.0>	172.20.1.21:45343 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2669.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2785.0>	172.20.1.21:45348 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2711.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2792.0>	172.20.1.21:45349 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2714.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2797.0>	172.20.1.21:45347 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2702.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2803.0>	172.20.1.21:45346 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2684.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2812.0>	172.20.1.21:45350 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2719.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2818.0>	172.20.1.21:45352 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2748.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2829.0>	172.20.1.21:45353 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2760.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2837.0>	172.20.1.21:45354 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2773.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2840.0>	172.20.1.21:45355 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2784.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2858.0>	172.20.1.21:45356 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2801.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2864.0>	172.20.1.21:45357 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2811.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2867.0>	172.20.1.21:45351 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2729.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2877.0>	172.20.1.21:45358 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2836.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2886.0>	172.20.1.21:45360 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2859.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<rabbit at katlabucs6.1.2891.0>	172.20.1.21:45359 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2849.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2902.0>	172.20.1.21:45361 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2880.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2923.0>	172.20.1.21:45362 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2894.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2947.0>	172.20.1.21:45363 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2904.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2954.0>	172.20.1.21:45369 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2926.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2964.0>	172.20.1.21:45365 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2907.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2969.0>	172.20.1.21:45371 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2934.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2979.0>	172.20.1.21:45364 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2910.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2987.0>	172.20.1.21:45367 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2913.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2994.0>	172.20.1.21:45368 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2920.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.2997.0>	172.20.1.21:45373 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2963.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3019.0>	172.20.1.21:45372 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2942.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3020.0>	172.20.1.21:45370 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2929.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3024.0>	172.20.1.21:45374 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.2992.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3040.0>	172.20.1.21:45377 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3030.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3053.0>	172.20.1.21:45378 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3033.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3072.0>	172.20.1.21:45376 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3018.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3073.0>	172.20.1.21:45379 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3043.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3089.0>	172.20.1.21:45380 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3049.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3094.0>	172.20.1.21:45381 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3056.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3101.0>	172.20.1.21:45382 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3062.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3104.0>	172.20.1.21:45375 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3006.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3124.0>	172.20.1.21:45385 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3107.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3127.0>	172.20.1.21:45386 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3110.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3137.0>	172.20.1.21:45387 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3113.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3154.0>	172.20.1.21:45384 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3099.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3155.0>	172.20.1.21:45383 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3082.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3161.0>	172.20.1.21:45388 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3133.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3200.0>	172.20.1.21:45389 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3157.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3205.0>	172.20.1.21:45390 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3164.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3212.0>	172.20.1.21:45392 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3170.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3222.0>	172.20.1.21:45391 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3167.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3226.0>	172.20.1.21:45399 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3188.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3242.0>	172.20.1.21:45400 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3229.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3264.0>	172.20.1.21:45401 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3232.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3266.0>	172.20.1.21:45395 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3179.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3281.0>	172.20.1.21:45394 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3176.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3284.0>	172.20.1.21:45396 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3182.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3291.0>	172.20.1.21:45402 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3239.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3295.0>	172.20.1.21:45398 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3191.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3303.0>	172.20.1.21:45403 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3245.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3326.0>	172.20.1.21:45393 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3173.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3338.0>	172.20.1.21:45409 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3312.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3339.0>	172.20.1.21:45404 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3276.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3346.0>	172.20.1.21:45405 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3292.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3355.0>	172.20.1.21:45406 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3299.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3369.0>	172.20.1.21:45408 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3309.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3370.0>	172.20.1.21:45407 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3306.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3374.0>	172.20.1.21:45397 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3185.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3383.0>	172.20.1.21:45411 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3365.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3388.0>	172.20.1.21:45410 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3349.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3404.0>	172.20.1.21:45412 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3391.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3417.0>	172.20.1.21:45414 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3400.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3427.0>	172.20.1.21:45413 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3394.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3444.0>	172.20.1.21:45415 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3407.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3447.0>	172.20.1.21:45417 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3420.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3451.0>	172.20.1.21:45416 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3416.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3458.0>	172.20.1.21:45418 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3430.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3486.0>	172.20.1.21:45420 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3461.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3487.0>	172.20.1.21:45419 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3464.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3497.0>	172.20.1.21:45421 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3467.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3510.0>	172.20.1.21:45424 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3496.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3526.0>	172.20.1.21:45422 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3470.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3533.0>	172.20.1.21:45423 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3478.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3540.0>	172.20.1.21:45425 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3500.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3550.0>	172.20.1.21:45426 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3506.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3563.0>	172.20.1.21:45430 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3545.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3567.0>	172.20.1.21:45428 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3525.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3580.0>	172.20.1.21:45431 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3556.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3590.0>	172.20.1.21:45432 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3570.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3603.0>	172.20.1.21:45427 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3519.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3607.0>	172.20.1.21:45433 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3573.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3614.0>	172.20.1.21:45429 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3532.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3627.0>	172.20.1.21:45434 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3593.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3634.0>	172.20.1.21:45435 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3610.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3659.0>	172.20.1.21:45436 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3620.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3663.0>	172.20.1.21:45438 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3637.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3694.0>	172.20.1.21:45439 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3640.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3701.0>	172.20.1.21:45450 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3687.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3708.0>	172.20.1.21:45442 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3649.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3722.0>	172.20.1.21:45448 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3681.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3725.0>	172.20.1.21:45440 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3643.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3729.0>	172.20.1.21:45441 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3646.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3736.0>	172.20.1.21:45445 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3672.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3744.0>	172.20.1.21:45437 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3623.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3750.0>	172.20.1.21:45444 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3669.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3761.0>	172.20.1.21:45443 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3666.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3764.0>	172.20.1.21:45447 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3678.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3777.0>	172.20.1.21:45449 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3684.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3778.0>	172.20.1.21:45446 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3675.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3800.0>	172.20.1.21:45451 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3787.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3813.0>	172.20.1.21:45452 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3790.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3826.0>	172.20.1.21:45453 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3793.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3848.0>	172.20.1.21:45454 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3806.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3864.0>	172.20.1.21:45455 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3809.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3868.0>	172.20.1.21:45457 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3820.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3872.0>	172.20.1.21:45456 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3816.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3881.0>	172.20.1.21:45462 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3854.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3889.0>	172.20.1.21:45459 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3835.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3905.0>	172.20.1.21:45458 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3832.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3912.0>	172.20.1.21:45463 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3857.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3919.0>	172.20.1.21:45460 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3838.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3920.0>	172.20.1.21:45461 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3851.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3927.0>	172.20.1.21:45464 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3898.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3934.0>	172.20.1.21:45465 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3901.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3984.0>	172.20.1.21:45474 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3961.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3986.0>	172.20.1.21:45466 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3937.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.3993.0>	172.20.1.21:45471 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3952.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4004.0>	172.20.1.21:45470 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3949.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4016.0>	172.20.1.21:45467 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3940.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4020.0>	172.20.1.21:45469 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3946.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4040.0>	172.20.1.21:45468 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3943.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4044.0>	172.20.1.21:45475 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3964.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4048.0>	172.20.1.21:45479 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4006.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4058.0>	172.20.1.21:45473 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3958.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4065.0>	172.20.1.21:45472 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3955.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4069.0>	172.20.1.21:45477 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3989.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4078.0>	172.20.1.21:45478 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3999.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4086.0>	172.20.1.21:45480 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4023.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4090.0>	172.20.1.21:45476 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.3985.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4097.0>	172.20.1.21:45482 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4082.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4104.0>	172.20.1.21:45481 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4072.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4147.0>	172.20.1.21:45483 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4107.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4166.0>	172.20.1.21:45489 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4122.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4196.0>	172.20.1.21:45485 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4110.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4198.0>	172.20.1.21:45492 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4131.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4211.0>	172.20.1.21:45484 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4113.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4215.0>	172.20.1.21:45487 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4116.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4227.0>	172.20.1.21:45490 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4125.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4233.0>	172.20.1.21:45491 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4128.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4236.0>	172.20.1.21:45488 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4119.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4237.0>	172.20.1.21:45493 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4134.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4241.0>	172.20.1.21:45495 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4144.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4251.0>	172.20.1.21:45494 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4137.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4258.0>	172.20.1.21:45500 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4175.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4271.0>	172.20.1.21:45498 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4159.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4296.0>	172.20.1.21:45504 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4244.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4305.0>	172.20.1.21:45499 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4172.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4317.0>	172.20.1.21:45501 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4178.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4319.0>	172.20.1.21:45503 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4204.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4327.0>	172.20.1.21:45497 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4156.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4328.0>	172.20.1.21:45496 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4150.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4329.0>	172.20.1.21:45502 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4183.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4339.0>	172.20.1.21:45505 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4261.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4346.0>	172.20.1.21:45510 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4335.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4353.0>	172.20.1.21:45506 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4264.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4360.0>	172.20.1.21:45507 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4274.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4371.0>	172.20.1.21:45508 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4282.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4376.0>	172.20.1.21:45509 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4294.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4399.0>	172.20.1.21:45512 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4380.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4403.0>	172.20.1.21:45514 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4386.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4410.0>	172.20.1.21:45515 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4389.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4417.0>	172.20.1.21:45511 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4377.0>	1	guest	/	false	false	0	0	0	0	0	0	false
<rabbit at katlabucs6.1.4424.0>	172.20.1.21:45513 -> 172.20.1.26:5672 (1)
<rabbit at katlabucs6.1.4383.0>	1	guest	/	false	false	0	0	0	0	0	0	false

Queues on /:
pid	name	durable	auto_delete	arguments	owner_pid	policy
exclusive_consumer_pid	exclusive_consumer_tag	messages_ready
messages_unacknowledged	messages	consumers	memory	slave_pids
synchronised_slave_pids	backing_queue_status	status
<rabbit at katlabucs6.1.365.0>	AGWControlQ1	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,1}, {persistent_count,0},
{avg_ingress_rate,0.0287092164049056}, {avg_egress_rate,0.0287092164049056},
{avg_ack_ingress_rate,0.0287092164049056},
{avg_ack_egress_rate,0.0287092164049056}]	running
<rabbit at katlabucs6.1.370.0>	AGWNotificationQ_1_0	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.375.0>	AGWDataQ_1_0	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.380.0>	AGWNotificationQ_1_1	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.385.0>	AGWDataQ_1_1	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.390.0>	AGWNotificationQ_1_2	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.395.0>	AGWDataQ_1_2	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.400.0>	AGWNotificationQ_1_3	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.405.0>	AGWDataQ_1_3	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.410.0>	AGWNotificationQ_1_4	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.415.0>	AGWDataQ_1_4	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.420.0>	AGWNotificationQ_1_5	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.425.0>	AGWDataQ_1_5	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.430.0>	AGWNotificationQ_1_6	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.435.0>	AGWDataQ_1_6	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.440.0>	AGWNotificationQ_1_7	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.445.0>	AGWDataQ_1_7	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.450.0>	AGWNotificationQ_1_8	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.455.0>	AGWDataQ_1_8	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.460.0>	AGWNotificationQ_1_9	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.465.0>	AGWDataQ_1_9	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.470.0>	AGWNotificationQ_1_10	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.475.0>	AGWDataQ_1_10	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.480.0>	AGWNotificationQ_1_11	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.485.0>	AGWDataQ_1_11	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.490.0>	AGWNotificationQ_1_12	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.495.0>	AGWDataQ_1_12	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.500.0>	AGWNotificationQ_1_13	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.505.0>	AGWDataQ_1_13	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.510.0>	AGWNotificationQ_1_14	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.515.0>	AGWDataQ_1_14	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.520.0>	AGWNotificationQ_1_15	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.525.0>	AGWDataQ_1_15	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.530.0>	AGWNotificationQ_1_16	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.535.0>	AGWDataQ_1_16	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.540.0>	AGWNotificationQ_1_17	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.545.0>	AGWDataQ_1_17	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.550.0>	AGWNotificationQ_1_18	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.555.0>	AGWDataQ_1_18	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.560.0>	AGWNotificationQ_1_19	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.565.0>	AGWDataQ_1_19	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.570.0>	AGWNotificationQ_1_20	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.575.0>	AGWDataQ_1_20	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.580.0>	AGWNotificationQ_1_21	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.585.0>	AGWDataQ_1_21	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.590.0>	AGWNotificationQ_1_22	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.595.0>	AGWDataQ_1_22	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.602.0>	AGWNotificationQ_1_23	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.608.0>	AGWDataQ_1_23	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.613.0>	AGWNotificationQ_1_24	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.618.0>	AGWDataQ_1_24	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.623.0>	AGWNotificationQ_1_25	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.628.0>	AGWDataQ_1_25	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.633.0>	AGWNotificationQ_1_26	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.638.0>	AGWDataQ_1_26	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.643.0>	AGWNotificationQ_1_27	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.648.0>	AGWDataQ_1_27	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.653.0>	AGWNotificationQ_1_28	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.658.0>	AGWDataQ_1_28	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.663.0>	AGWNotificationQ_1_29	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.668.0>	AGWDataQ_1_29	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.673.0>	AGWNotificationQ_1_30	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.678.0>	AGWDataQ_1_30	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.683.0>	AGWNotificationQ_1_31	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.688.0>	AGWDataQ_1_31	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.693.0>	FM2AGWHBQ1	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,6}, {persistent_count,0},
{avg_ingress_rate,0.030676837797201807},
{avg_egress_rate,0.030676837797201807},
{avg_ack_ingress_rate,0.030676837797201807},
{avg_ack_egress_rate,0.030676837797201807}]	running
<rabbit at katlabucs6.1.698.0>	CM2AGWHBQ1	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.735.0>	AGWControlQ2	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,1}, {persistent_count,0},
{avg_ingress_rate,0.02611104111901478},
{avg_egress_rate,0.02611104111901478},
{avg_ack_ingress_rate,0.02611104111901478},
{avg_ack_egress_rate,0.02611104111901478}]	running
<rabbit at katlabucs6.1.740.0>	AGWNotificationQ_2_0	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.745.0>	AGWDataQ_2_0	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.750.0>	AGWNotificationQ_2_1	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.755.0>	AGWDataQ_2_1	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.760.0>	AGWNotificationQ_2_2	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.765.0>	AGWDataQ_2_2	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.770.0>	AGWNotificationQ_2_3	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.775.0>	AGWDataQ_2_3	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.784.0>	AGWNotificationQ_2_4	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.789.0>	AGWDataQ_2_4	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.794.0>	AGWNotificationQ_2_5	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.799.0>	AGWDataQ_2_5	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.812.0>	AGWNotificationQ_2_6	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.817.0>	AGWDataQ_2_6	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.822.0>	AGWNotificationQ_2_7	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.827.0>	AGWDataQ_2_7	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.832.0>	AGWNotificationQ_2_8	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.837.0>	AGWDataQ_2_8	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.842.0>	AGWNotificationQ_2_9	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.847.0>	AGWDataQ_2_9	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.852.0>	AGWNotificationQ_2_10	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.857.0>	AGWDataQ_2_10	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.862.0>	AGWNotificationQ_2_11	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.867.0>	AGWDataQ_2_11	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.872.0>	AGWNotificationQ_2_12	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.877.0>	AGWDataQ_2_12	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.882.0>	AGWNotificationQ_2_13	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.887.0>	AGWDataQ_2_13	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.892.0>	AGWNotificationQ_2_14	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.897.0>	AGWDataQ_2_14	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.902.0>	AGWNotificationQ_2_15	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.907.0>	AGWDataQ_2_15	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.912.0>	AGWNotificationQ_2_16	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.917.0>	AGWDataQ_2_16	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.922.0>	AGWNotificationQ_2_17	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.927.0>	AGWDataQ_2_17	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.932.0>	AGWNotificationQ_2_18	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.937.0>	AGWDataQ_2_18	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.942.0>	AGWNotificationQ_2_19	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.947.0>	AGWDataQ_2_19	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.952.0>	AGWNotificationQ_2_20	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.957.0>	AGWDataQ_2_20	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.962.0>	AGWNotificationQ_2_21	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.967.0>	AGWDataQ_2_21	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.972.0>	AGWNotificationQ_2_22	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.977.0>	AGWDataQ_2_22	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.982.0>	AGWNotificationQ_2_23	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.987.0>	AGWDataQ_2_23	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.992.0>	AGWNotificationQ_2_24	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.997.0>	AGWDataQ_2_24	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1002.0>	AGWNotificationQ_2_25	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1007.0>	AGWDataQ_2_25	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1012.0>	AGWNotificationQ_2_26	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1017.0>	AGWDataQ_2_26	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1022.0>	AGWNotificationQ_2_27	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1027.0>	AGWDataQ_2_27	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1032.0>	AGWNotificationQ_2_28	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1037.0>	AGWDataQ_2_28	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1042.0>	AGWNotificationQ_2_29	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1047.0>	AGWDataQ_2_29	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1052.0>	AGWNotificationQ_2_30	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1057.0>	AGWDataQ_2_30	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1062.0>	AGWNotificationQ_2_31	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1067.0>	AGWDataQ_2_31	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1072.0>	FM2AGWHBQ2	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,6}, {persistent_count,0},
{avg_ingress_rate,0.0303563747324465}, {avg_egress_rate,0.0303563747324465},
{avg_ack_ingress_rate,0.0303563747324465},
{avg_ack_egress_rate,0.0303563747324465}]	running
<rabbit at katlabucs6.1.1077.0>	CM2AGWHBQ2	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1128.0>	AGWControlQ3	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,1}, {persistent_count,0},
{avg_ingress_rate,0.029294860120118886},
{avg_egress_rate,0.029294860120118886},
{avg_ack_ingress_rate,0.029294860120118886},
{avg_ack_egress_rate,0.029294860120118886}]	running
<rabbit at katlabucs6.1.1133.0>	AGWNotificationQ_3_0	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1138.0>	AGWDataQ_3_0	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1143.0>	AGWNotificationQ_3_1	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1148.0>	AGWDataQ_3_1	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1153.0>	AGWNotificationQ_3_2	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1158.0>	AGWDataQ_3_2	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1163.0>	AGWNotificationQ_3_3	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1168.0>	AGWDataQ_3_3	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1173.0>	AGWNotificationQ_3_4	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1178.0>	AGWDataQ_3_4	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1183.0>	AGWNotificationQ_3_5	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1188.0>	AGWDataQ_3_5	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1193.0>	AGWNotificationQ_3_6	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1198.0>	AGWDataQ_3_6	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1203.0>	AGWNotificationQ_3_7	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1208.0>	AGWDataQ_3_7	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1213.0>	AGWNotificationQ_3_8	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1218.0>	AGWDataQ_3_8	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1223.0>	AGWNotificationQ_3_9	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1228.0>	AGWDataQ_3_9	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1233.0>	AGWNotificationQ_3_10	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1238.0>	AGWDataQ_3_10	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1243.0>	AGWNotificationQ_3_11	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1248.0>	AGWDataQ_3_11	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1253.0>	AGWNotificationQ_3_12	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1258.0>	AGWDataQ_3_12	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1263.0>	AGWNotificationQ_3_13	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1268.0>	AGWDataQ_3_13	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1273.0>	AGWNotificationQ_3_14	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1278.0>	AGWDataQ_3_14	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1283.0>	AGWNotificationQ_3_15	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1288.0>	AGWDataQ_3_15	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1293.0>	AGWNotificationQ_3_16	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1298.0>	AGWDataQ_3_16	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1303.0>	AGWNotificationQ_3_17	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1308.0>	AGWDataQ_3_17	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1313.0>	AGWNotificationQ_3_18	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1318.0>	AGWDataQ_3_18	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1323.0>	AGWNotificationQ_3_19	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1328.0>	AGWDataQ_3_19	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1333.0>	AGWNotificationQ_3_20	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1338.0>	AGWDataQ_3_20	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1343.0>	AGWNotificationQ_3_21	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1348.0>	AGWDataQ_3_21	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1353.0>	AGWNotificationQ_3_22	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1358.0>	AGWDataQ_3_22	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1363.0>	AGWNotificationQ_3_23	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1368.0>	AGWDataQ_3_23	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1373.0>	AGWNotificationQ_3_24	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1378.0>	AGWDataQ_3_24	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1383.0>	AGWNotificationQ_3_25	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1388.0>	AGWDataQ_3_25	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1393.0>	AGWNotificationQ_3_26	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1398.0>	AGWDataQ_3_26	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1403.0>	AGWNotificationQ_3_27	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1408.0>	AGWDataQ_3_27	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1413.0>	AGWNotificationQ_3_28	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1418.0>	AGWDataQ_3_28	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1423.0>	AGWNotificationQ_3_29	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1428.0>	AGWDataQ_3_29	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1433.0>	AGWNotificationQ_3_30	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1438.0>	AGWDataQ_3_30	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1443.0>	AGWNotificationQ_3_31	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1448.0>	AGWDataQ_3_31	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1456.0>	FM2AGWHBQ3	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,6}, {persistent_count,0},
{avg_ingress_rate,0.03175912356252252},
{avg_egress_rate,0.03175912356252252},
{avg_ack_ingress_rate,0.03175912356252252},
{avg_ack_egress_rate,0.03175912356252252}]	running
<rabbit at katlabucs6.1.1461.0>	CM2AGWHBQ3	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1509.0>	AGWControlQ4	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,1}, {persistent_count,0},
{avg_ingress_rate,0.025621875588422386},
{avg_egress_rate,0.025621875588422386},
{avg_ack_ingress_rate,0.025621875588422386},
{avg_ack_egress_rate,0.025621875588422386}]	running
<rabbit at katlabucs6.1.1514.0>	AGWNotificationQ_4_0	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1519.0>	AGWDataQ_4_0	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1524.0>	AGWNotificationQ_4_1	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1529.0>	AGWDataQ_4_1	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1534.0>	AGWNotificationQ_4_2	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1539.0>	AGWDataQ_4_2	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1544.0>	AGWNotificationQ_4_3	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1549.0>	AGWDataQ_4_3	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1554.0>	AGWNotificationQ_4_4	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1559.0>	AGWDataQ_4_4	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1564.0>	AGWNotificationQ_4_5	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1569.0>	AGWDataQ_4_5	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1574.0>	AGWNotificationQ_4_6	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1579.0>	AGWDataQ_4_6	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1584.0>	AGWNotificationQ_4_7	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1589.0>	AGWDataQ_4_7	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1594.0>	AGWNotificationQ_4_8	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1599.0>	AGWDataQ_4_8	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1604.0>	AGWNotificationQ_4_9	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1609.0>	AGWDataQ_4_9	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1614.0>	AGWNotificationQ_4_10	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1619.0>	AGWDataQ_4_10	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1624.0>	AGWNotificationQ_4_11	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1629.0>	AGWDataQ_4_11	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1634.0>	AGWNotificationQ_4_12	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1639.0>	AGWDataQ_4_12	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1644.0>	AGWNotificationQ_4_13	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1649.0>	AGWDataQ_4_13	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1654.0>	AGWNotificationQ_4_14	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1659.0>	AGWDataQ_4_14	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1664.0>	AGWNotificationQ_4_15	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1669.0>	AGWDataQ_4_15	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1674.0>	AGWNotificationQ_4_16	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1679.0>	AGWDataQ_4_16	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1684.0>	AGWNotificationQ_4_17	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1689.0>	AGWDataQ_4_17	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1694.0>	AGWNotificationQ_4_18	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1699.0>	AGWDataQ_4_18	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1704.0>	AGWNotificationQ_4_19	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1709.0>	AGWDataQ_4_19	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1714.0>	AGWNotificationQ_4_20	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1719.0>	AGWDataQ_4_20	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1724.0>	AGWNotificationQ_4_21	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1729.0>	AGWDataQ_4_21	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1734.0>	AGWNotificationQ_4_22	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1739.0>	AGWDataQ_4_22	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1744.0>	AGWNotificationQ_4_23	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1749.0>	AGWDataQ_4_23	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1754.0>	AGWNotificationQ_4_24	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1759.0>	AGWDataQ_4_24	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1764.0>	AGWNotificationQ_4_25	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1769.0>	AGWDataQ_4_25	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1774.0>	AGWNotificationQ_4_26	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1779.0>	AGWDataQ_4_26	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1784.0>	AGWNotificationQ_4_27	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1789.0>	AGWDataQ_4_27	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1794.0>	AGWNotificationQ_4_28	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1799.0>	AGWDataQ_4_28	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1804.0>	AGWNotificationQ_4_29	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1809.0>	AGWDataQ_4_29	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1814.0>	AGWNotificationQ_4_30	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1819.0>	AGWDataQ_4_30	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1824.0>	AGWNotificationQ_4_31	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1829.0>	AGWDataQ_4_31	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1834.0>	FM2AGWHBQ4	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,6}, {persistent_count,0},
{avg_ingress_rate,0.034183705420687924},
{avg_egress_rate,0.034183705420687924},
{avg_ack_ingress_rate,0.034183705420687924},
{avg_ack_egress_rate,0.06836741084137585}]	running
<rabbit at katlabucs6.1.1839.0>	CM2AGWHBQ4	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1890.0>	AGWControlQ5	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,1}, {persistent_count,0},
{avg_ingress_rate,0.030210794002504836},
{avg_egress_rate,0.030210794002504836},
{avg_ack_ingress_rate,0.030210794002504836},
{avg_ack_egress_rate,0.030210794002504836}]	running
<rabbit at katlabucs6.1.1895.0>	AGWNotificationQ_5_0	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1900.0>	AGWDataQ_5_0	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1905.0>	AGWNotificationQ_5_1	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1910.0>	AGWDataQ_5_1	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1915.0>	AGWNotificationQ_5_2	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1920.0>	AGWDataQ_5_2	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1925.0>	AGWNotificationQ_5_3	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1930.0>	AGWDataQ_5_3	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1935.0>	AGWNotificationQ_5_4	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1940.0>	AGWDataQ_5_4	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1945.0>	AGWNotificationQ_5_5	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1950.0>	AGWDataQ_5_5	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1955.0>	AGWNotificationQ_5_6	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1960.0>	AGWDataQ_5_6	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1965.0>	AGWNotificationQ_5_7	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1970.0>	AGWDataQ_5_7	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1975.0>	AGWNotificationQ_5_8	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1980.0>	AGWDataQ_5_8	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1985.0>	AGWNotificationQ_5_9	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1990.0>	AGWDataQ_5_9	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.1995.0>	AGWNotificationQ_5_10	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2000.0>	AGWDataQ_5_10	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2005.0>	AGWNotificationQ_5_11	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2010.0>	AGWDataQ_5_11	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2015.0>	AGWNotificationQ_5_12	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2020.0>	AGWDataQ_5_12	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2025.0>	AGWNotificationQ_5_13	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2030.0>	AGWDataQ_5_13	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2035.0>	AGWNotificationQ_5_14	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2040.0>	AGWDataQ_5_14	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2045.0>	AGWNotificationQ_5_15	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2050.0>	AGWDataQ_5_15	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2055.0>	AGWNotificationQ_5_16	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2060.0>	AGWDataQ_5_16	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2065.0>	AGWNotificationQ_5_17	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2070.0>	AGWDataQ_5_17	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2075.0>	AGWNotificationQ_5_18	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2080.0>	AGWDataQ_5_18	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2085.0>	AGWNotificationQ_5_19	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2090.0>	AGWDataQ_5_19	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2095.0>	AGWNotificationQ_5_20	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2100.0>	AGWDataQ_5_20	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2105.0>	AGWNotificationQ_5_21	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2110.0>	AGWDataQ_5_21	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2115.0>	AGWNotificationQ_5_22	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2120.0>	AGWDataQ_5_22	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2125.0>	AGWNotificationQ_5_23	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2130.0>	AGWDataQ_5_23	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2135.0>	AGWNotificationQ_5_24	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2140.0>	AGWDataQ_5_24	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2145.0>	AGWNotificationQ_5_25	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2150.0>	AGWDataQ_5_25	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2155.0>	AGWNotificationQ_5_26	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2160.0>	AGWDataQ_5_26	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2165.0>	AGWNotificationQ_5_27	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2170.0>	AGWDataQ_5_27	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2175.0>	AGWNotificationQ_5_28	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2180.0>	AGWDataQ_5_28	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2185.0>	AGWNotificationQ_5_29	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2190.0>	AGWDataQ_5_29	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2195.0>	AGWNotificationQ_5_30	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2200.0>	AGWDataQ_5_30	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2205.0>	AGWNotificationQ_5_31	false	true	[]					0	0	0	0
13952			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0},
{q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity},
{ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2210.0>	AGWDataQ_5_31	false	true	[]					0	0	0	0	13952		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2215.0>	FM2AGWHBQ5	false	true	[]					0	0	0	1	14312		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,6}, {persistent_count,0},
{avg_ingress_rate,0.03390634721055703},
{avg_egress_rate,0.03390634721055703},
{avg_ack_ingress_rate,0.03390634721055703},
{avg_ack_egress_rate,0.06781269442111405}]	running
<rabbit at katlabucs6.1.2220.0>	CM2AGWHBQ5	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2271.0>	FMControlQ	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2276.0>	AGW2FMData_12345_0	false	true	[]					619292	0
619292	1	847632312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,619292}, {len,619292}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,619292}, {ram_ack_count,0},
{next_seq_id,864167}, {persistent_count,0},
{avg_ingress_rate,3842.642999329132}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2281.0>	AGW2FMData_12345_1	false	true	[]					587464	0
587464	1	943234912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,587464}, {len,587464}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,587464}, {ram_ack_count,0},
{next_seq_id,930650}, {persistent_count,0},
{avg_ingress_rate,3863.3281070442126}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2286.0>	AGW2FMData_12345_2	false	true	[]					543077	0
543077	1	678106312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,543077}, {len,543077}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,543077}, {ram_ack_count,0},
{next_seq_id,793051}, {persistent_count,0},
{avg_ingress_rate,3710.1765585380745}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2291.0>	AGW2FMData_12345_3	false	true	[]					733897	0
733897	1	747327912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,733897}, {len,733897}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,733897}, {ram_ack_count,0},
{next_seq_id,1040314}, {persistent_count,0},
{avg_ingress_rate,3354.8575478211674}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2296.0>	AGW2FMData_12345_4	false	true	[]					566980	0
566980	1	872708392			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,566980}, {len,566980}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,566980}, {ram_ack_count,0},
{next_seq_id,837833}, {persistent_count,0},
{avg_ingress_rate,4252.46210828028}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2301.0>	AGW2FMData_12345_5	false	true	[]					669277	0
669277	1	747327912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,669277}, {len,669277}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,669277}, {ram_ack_count,0},
{next_seq_id,1021779}, {persistent_count,0},
{avg_ingress_rate,3767.31092708999}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2306.0>	AGW2FMData_12345_6	false	true	[]					639911	0
639911	1	747327912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,639911}, {len,639911}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,639911}, {ram_ack_count,0},
{next_seq_id,950611}, {persistent_count,0},
{avg_ingress_rate,3921.1172120228393}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2311.0>	AGW2FMData_12345_7	false	true	[]					521157	0
521157	1	678106312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,521157}, {len,521157}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,521157}, {ram_ack_count,0},
{next_seq_id,844670}, {persistent_count,0},
{avg_ingress_rate,3641.7780184573658}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2316.0>	AGW2FMData_12345_8	false	true	[]					528405	0
528405	1	678106312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,528405}, {len,528405}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,528405}, {ram_ack_count,0},
{next_seq_id,819976}, {persistent_count,0},
{avg_ingress_rate,3669.6834999197768}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2321.0>	AGW2FMData_12345_9	false	true	[]					598609	0
598609	1	542485512			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,598609}, {len,598609}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,598609}, {ram_ack_count,0},
{next_seq_id,994977}, {persistent_count,0},
{avg_ingress_rate,3868.621246543071}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2326.0>	AGW2FMData_12345_10	false	true	[]					516927	0
516927	1	542485512			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,516927}, {len,516927}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,516927}, {ram_ack_count,0},
{next_seq_id,735628}, {persistent_count,0},
{avg_ingress_rate,3693.7649407767854}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2331.0>	AGW2FMData_12345_11	false	true	[]					670394	0
670394	1	678106312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,670394}, {len,670394}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,670394}, {ram_ack_count,0},
{next_seq_id,1003976}, {persistent_count,0},
{avg_ingress_rate,3728.337171014012}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2336.0>	AGW2FMData_12345_12	false	true	[]					582780	0
582780	1	943234912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,582780}, {len,582780}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,582780}, {ram_ack_count,0},
{next_seq_id,910758}, {persistent_count,0},
{avg_ingress_rate,3874.545532332428}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2341.0>	AGW2FMData_12345_13	false	true	[]					546253	0
546253	1	698167192			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,546253}, {len,546253}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,546253}, {ram_ack_count,0},
{next_seq_id,921400}, {persistent_count,0},
{avg_ingress_rate,3900.7684013075514}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2346.0>	AGW2FMData_12345_14	false	true	[]					533276	0
533276	1	597862792			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,533276}, {len,533276}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,533276}, {ram_ack_count,0},
{next_seq_id,783646}, {persistent_count,0},
{avg_ingress_rate,3811.067188776674}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2351.0>	AGW2FMData_12345_15	false	true	[]					645772	0
645772	1	847632312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,645772}, {len,645772}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,645772}, {ram_ack_count,0},
{next_seq_id,859159}, {persistent_count,0},
{avg_ingress_rate,3767.447640706151}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2356.0>	AGW2FMData_12345_16	false	true	[]					586304	0
586304	1	542485512			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,586304}, {len,586304}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,586304}, {ram_ack_count,0},
{next_seq_id,901275}, {persistent_count,0},
{avg_ingress_rate,3856.8468477744013}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2361.0>	AGW2FMData_12345_17	false	true	[]					698080	0
698080	1	747327912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,698080}, {len,698080}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,698080}, {ram_ack_count,0},
{next_seq_id,1025125}, {persistent_count,0},
{avg_ingress_rate,3760.161332461464}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2366.0>	AGW2FMData_12345_18	false	true	[]					535007	0
535007	1	678106312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,535007}, {len,535007}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,535007}, {ram_ack_count,0},
{next_seq_id,976644}, {persistent_count,0},
{avg_ingress_rate,3829.3352817442355}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2371.0>	AGW2FMData_12345_19	false	true	[]					685375	0
685375	1	747327912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,685375}, {len,685375}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,685375}, {ram_ack_count,0},
{next_seq_id,1001625}, {persistent_count,0},
{avg_ingress_rate,3617.502545509226}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2376.0>	AGW2FMData_12345_20	false	true	[]					676042	0
676042	1	678106312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,676042}, {len,676042}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,676042}, {ram_ack_count,0},
{next_seq_id,1001742}, {persistent_count,0},
{avg_ingress_rate,3819.493733143265}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2381.0>	AGW2FMData_12345_21	false	true	[]					615663	0
615663	1	747327912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,615663}, {len,615663}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,615663}, {ram_ack_count,0},
{next_seq_id,893806}, {persistent_count,0},
{avg_ingress_rate,3847.221707048664}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2386.0>	AGW2FMData_12345_22	false	true	[]					683748	0
683748	1	747327912			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,683748}, {len,683748}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,683748}, {ram_ack_count,0},
{next_seq_id,960073}, {persistent_count,0},
{avg_ingress_rate,3888.5366389675914}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2391.0>	AGW2FMData_12345_23	false	true	[]					731557	0
731557	1	847632312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,731557}, {len,731557}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,731557}, {ram_ack_count,0},
{next_seq_id,1049957}, {persistent_count,0},
{avg_ingress_rate,3791.203292654361}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2396.0>	AGW2FMData_12345_24	false	true	[]					634186	0
634186	1	847632312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,634186}, {len,634186}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,634186}, {ram_ack_count,0},
{next_seq_id,1017836}, {persistent_count,0},
{avg_ingress_rate,4117.718590055585}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2401.0>	AGW2FMData_12345_25	false	true	[]					545081	0
545081	1	698167192			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,545081}, {len,545081}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,545081}, {ram_ack_count,0},
{next_seq_id,947866}, {persistent_count,0},
{avg_ingress_rate,3895.7231020508702}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2406.0>	AGW2FMData_12345_26	false	true	[]					574599	0
574599	1	904053512			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,574599}, {len,574599}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,574599}, {ram_ack_count,0},
{next_seq_id,869493}, {persistent_count,0},
{avg_ingress_rate,3939.653523897787}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2411.0>	AGW2FMData_12345_27	false	true	[]					558424	0
558424	1	904053512			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,558424}, {len,558424}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,558424}, {ram_ack_count,0},
{next_seq_id,791890}, {persistent_count,0},
{avg_ingress_rate,4098.422104491072}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2416.0>	AGW2FMData_12345_28	false	true	[]					701288	0
701288	1	1090884912			[{q1,0}, {q2,0},
{delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,701288}, {len,701288},
{pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,701288},
{ram_ack_count,0}, {next_seq_id,973462}, {persistent_count,0},
{avg_ingress_rate,3796.3822063938837}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2421.0>	AGW2FMData_12345_29	false	true	[]					545648	0
545648	1	597862792			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,545648}, {len,545648}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,545648}, {ram_ack_count,0},
{next_seq_id,912280}, {persistent_count,0},
{avg_ingress_rate,3742.599965933654}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2426.0>	AGW2FMData_12345_30	false	true	[]					671407	0
671407	1	678106312			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,671407}, {len,671407}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,671407}, {ram_ack_count,0},
{next_seq_id,990473}, {persistent_count,0},
{avg_ingress_rate,3989.6242182604524}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2431.0>	AGW2FMData_12345_31	false	true	[]					574136	0
574136	1	904053512			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}},
{q3,0}, {q4,574136}, {len,574136}, {pending_acks,0},
{target_ram_count,infinity}, {ram_msg_count,574136}, {ram_ack_count,0},
{next_seq_id,931228}, {persistent_count,0},
{avg_ingress_rate,3844.5792482075954}, {avg_egress_rate,0.0},
{avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2436.0>	AVS2FMHBQ	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running
<rabbit at katlabucs6.1.2441.0>	AGW2FMHBQ	false	true	[]					0	3	3	1	34984		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,3}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,3}, {next_seq_id,9}, {persistent_count,0},
{avg_ingress_rate,0.04529601044743422},
{avg_egress_rate,0.04529601044743422},
{avg_ack_ingress_rate,0.04529601044743422}, {avg_ack_egress_rate,0.0}]
running
<rabbit at katlabucs6.1.2446.0>	CM2FMHBQ	false	true	[]					0	0	0	1	14096		
[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0},
{len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0},
{ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0},
{avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0},
{avg_ack_egress_rate,0.0}]	running

Exchanges on /:
name	type	durable	auto_delete	internal	arguments	policy
	direct	true	false	false	[]	
AGW1	direct	false	true	false	[]	
AGW2	direct	false	true	false	[]	
AGW3	direct	false	true	false	[]	
AGW4	direct	false	true	false	[]	
AGW5	direct	false	true	false	[]	
AGWHB	fanout	true	false	false	[]	
ALBHB	fanout	true	false	false	[]	
AVSHB	fanout	true	false	false	[]	
CGWHB	fanout	true	false	false	[]	
CMHB	fanout	true	false	false	[]	
FM	direct	false	true	false	[]	
FMBUFHB	fanout	false	false	false	[]	
FMHB	fanout	true	false	false	[]	
FUSHB	fanout	true	false	false	[]	
LGSHB	fanout	true	false	false	[]	
MEHB	fanout	true	false	false	[]	
TPSHB	fanout	true	false	false	[]	
amq.direct	direct	true	false	false	[]	
amq.fanout	fanout	true	false	false	[]	
amq.headers	headers	true	false	false	[]	
amq.match	headers	true	false	false	[]	
amq.rabbitmq.log	topic	true	false	false	[]	
amq.rabbitmq.trace	topic	true	false	false	[]	
amq.topic	topic	true	false	false	[]	

Bindings on /:
source_name	source_kind	destination_name	destination_kind	routing_key
arguments
	exchange	AGW2FMData_12345_0	queue	AGW2FMData_12345_0	[]
	exchange	AGW2FMData_12345_1	queue	AGW2FMData_12345_1	[]
	exchange	AGW2FMData_12345_10	queue	AGW2FMData_12345_10	[]
	exchange	AGW2FMData_12345_11	queue	AGW2FMData_12345_11	[]
	exchange	AGW2FMData_12345_12	queue	AGW2FMData_12345_12	[]
	exchange	AGW2FMData_12345_13	queue	AGW2FMData_12345_13	[]
	exchange	AGW2FMData_12345_14	queue	AGW2FMData_12345_14	[]
	exchange	AGW2FMData_12345_15	queue	AGW2FMData_12345_15	[]
	exchange	AGW2FMData_12345_16	queue	AGW2FMData_12345_16	[]
	exchange	AGW2FMData_12345_17	queue	AGW2FMData_12345_17	[]
	exchange	AGW2FMData_12345_18	queue	AGW2FMData_12345_18	[]
	exchange	AGW2FMData_12345_19	queue	AGW2FMData_12345_19	[]
	exchange	AGW2FMData_12345_2	queue	AGW2FMData_12345_2	[]
	exchange	AGW2FMData_12345_20	queue	AGW2FMData_12345_20	[]
	exchange	AGW2FMData_12345_21	queue	AGW2FMData_12345_21	[]
	exchange	AGW2FMData_12345_22	queue	AGW2FMData_12345_22	[]
	exchange	AGW2FMData_12345_23	queue	AGW2FMData_12345_23	[]
	exchange	AGW2FMData_12345_24	queue	AGW2FMData_12345_24	[]
	exchange	AGW2FMData_12345_25	queue	AGW2FMData_12345_25	[]
	exchange	AGW2FMData_12345_26	queue	AGW2FMData_12345_26	[]
	exchange	AGW2FMData_12345_27	queue	AGW2FMData_12345_27	[]
	exchange	AGW2FMData_12345_28	queue	AGW2FMData_12345_28	[]
	exchange	AGW2FMData_12345_29	queue	AGW2FMData_12345_29	[]
	exchange	AGW2FMData_12345_3	queue	AGW2FMData_12345_3	[]
	exchange	AGW2FMData_12345_30	queue	AGW2FMData_12345_30	[]
	exchange	AGW2FMData_12345_31	queue	AGW2FMData_12345_31	[]
	exchange	AGW2FMData_12345_4	queue	AGW2FMData_12345_4	[]
	exchange	AGW2FMData_12345_5	queue	AGW2FMData_12345_5	[]
	exchange	AGW2FMData_12345_6	queue	AGW2FMData_12345_6	[]
	exchange	AGW2FMData_12345_7	queue	AGW2FMData_12345_7	[]
	exchange	AGW2FMData_12345_8	queue	AGW2FMData_12345_8	[]
	exchange	AGW2FMData_12345_9	queue	AGW2FMData_12345_9	[]
	exchange	AGW2FMHBQ	queue	AGW2FMHBQ	[]
	exchange	AGWControlQ1	queue	AGWControlQ1	[]
	exchange	AGWControlQ2	queue	AGWControlQ2	[]
	exchange	AGWControlQ3	queue	AGWControlQ3	[]
	exchange	AGWControlQ4	queue	AGWControlQ4	[]
	exchange	AGWControlQ5	queue	AGWControlQ5	[]
	exchange	AGWDataQ_1_0	queue	AGWDataQ_1_0	[]
	exchange	AGWDataQ_1_1	queue	AGWDataQ_1_1	[]
	exchange	AGWDataQ_1_10	queue	AGWDataQ_1_10	[]
	exchange	AGWDataQ_1_11	queue	AGWDataQ_1_11	[]
	exchange	AGWDataQ_1_12	queue	AGWDataQ_1_12	[]
	exchange	AGWDataQ_1_13	queue	AGWDataQ_1_13	[]
	exchange	AGWDataQ_1_14	queue	AGWDataQ_1_14	[]
	exchange	AGWDataQ_1_15	queue	AGWDataQ_1_15	[]
	exchange	AGWDataQ_1_16	queue	AGWDataQ_1_16	[]
	exchange	AGWDataQ_1_17	queue	AGWDataQ_1_17	[]
	exchange	AGWDataQ_1_18	queue	AGWDataQ_1_18	[]
	exchange	AGWDataQ_1_19	queue	AGWDataQ_1_19	[]
	exchange	AGWDataQ_1_2	queue	AGWDataQ_1_2	[]
	exchange	AGWDataQ_1_20	queue	AGWDataQ_1_20	[]
	exchange	AGWDataQ_1_21	queue	AGWDataQ_1_21	[]
	exchange	AGWDataQ_1_22	queue	AGWDataQ_1_22	[]
	exchange	AGWDataQ_1_23	queue	AGWDataQ_1_23	[]
	exchange	AGWDataQ_1_24	queue	AGWDataQ_1_24	[]
	exchange	AGWDataQ_1_25	queue	AGWDataQ_1_25	[]
	exchange	AGWDataQ_1_26	queue	AGWDataQ_1_26	[]
	exchange	AGWDataQ_1_27	queue	AGWDataQ_1_27	[]
	exchange	AGWDataQ_1_28	queue	AGWDataQ_1_28	[]
	exchange	AGWDataQ_1_29	queue	AGWDataQ_1_29	[]
	exchange	AGWDataQ_1_3	queue	AGWDataQ_1_3	[]
	exchange	AGWDataQ_1_30	queue	AGWDataQ_1_30	[]
	exchange	AGWDataQ_1_31	queue	AGWDataQ_1_31	[]
	exchange	AGWDataQ_1_4	queue	AGWDataQ_1_4	[]
	exchange	AGWDataQ_1_5	queue	AGWDataQ_1_5	[]
	exchange	AGWDataQ_1_6	queue	AGWDataQ_1_6	[]
	exchange	AGWDataQ_1_7	queue	AGWDataQ_1_7	[]
	exchange	AGWDataQ_1_8	queue	AGWDataQ_1_8	[]
	exchange	AGWDataQ_1_9	queue	AGWDataQ_1_9	[]
	exchange	AGWDataQ_2_0	queue	AGWDataQ_2_0	[]
	exchange	AGWDataQ_2_1	queue	AGWDataQ_2_1	[]
	exchange	AGWDataQ_2_10	queue	AGWDataQ_2_10	[]
	exchange	AGWDataQ_2_11	queue	AGWDataQ_2_11	[]
	exchange	AGWDataQ_2_12	queue	AGWDataQ_2_12	[]
	exchange	AGWDataQ_2_13	queue	AGWDataQ_2_13	[]
	exchange	AGWDataQ_2_14	queue	AGWDataQ_2_14	[]
	exchange	AGWDataQ_2_15	queue	AGWDataQ_2_15	[]
	exchange	AGWDataQ_2_16	queue	AGWDataQ_2_16	[]
	exchange	AGWDataQ_2_17	queue	AGWDataQ_2_17	[]
	exchange	AGWDataQ_2_18	queue	AGWDataQ_2_18	[]
	exchange	AGWDataQ_2_19	queue	AGWDataQ_2_19	[]
	exchange	AGWDataQ_2_2	queue	AGWDataQ_2_2	[]
	exchange	AGWDataQ_2_20	queue	AGWDataQ_2_20	[]
	exchange	AGWDataQ_2_21	queue	AGWDataQ_2_21	[]
	exchange	AGWDataQ_2_22	queue	AGWDataQ_2_22	[]
	exchange	AGWDataQ_2_23	queue	AGWDataQ_2_23	[]
	exchange	AGWDataQ_2_24	queue	AGWDataQ_2_24	[]
	exchange	AGWDataQ_2_25	queue	AGWDataQ_2_25	[]
	exchange	AGWDataQ_2_26	queue	AGWDataQ_2_26	[]
	exchange	AGWDataQ_2_27	queue	AGWDataQ_2_27	[]
	exchange	AGWDataQ_2_28	queue	AGWDataQ_2_28	[]
	exchange	AGWDataQ_2_29	queue	AGWDataQ_2_29	[]
	exchange	AGWDataQ_2_3	queue	AGWDataQ_2_3	[]
	exchange	AGWDataQ_2_30	queue	AGWDataQ_2_30	[]
	exchange	AGWDataQ_2_31	queue	AGWDataQ_2_31	[]
	exchange	AGWDataQ_2_4	queue	AGWDataQ_2_4	[]
	exchange	AGWDataQ_2_5	queue	AGWDataQ_2_5	[]
	exchange	AGWDataQ_2_6	queue	AGWDataQ_2_6	[]
	exchange	AGWDataQ_2_7	queue	AGWDataQ_2_7	[]
	exchange	AGWDataQ_2_8	queue	AGWDataQ_2_8	[]
	exchange	AGWDataQ_2_9	queue	AGWDataQ_2_9	[]
	exchange	AGWDataQ_3_0	queue	AGWDataQ_3_0	[]
	exchange	AGWDataQ_3_1	queue	AGWDataQ_3_1	[]
	exchange	AGWDataQ_3_10	queue	AGWDataQ_3_10	[]
	exchange	AGWDataQ_3_11	queue	AGWDataQ_3_11	[]
	exchange	AGWDataQ_3_12	queue	AGWDataQ_3_12	[]
	exchange	AGWDataQ_3_13	queue	AGWDataQ_3_13	[]
	exchange	AGWDataQ_3_14	queue	AGWDataQ_3_14	[]
	exchange	AGWDataQ_3_15	queue	AGWDataQ_3_15	[]
	exchange	AGWDataQ_3_16	queue	AGWDataQ_3_16	[]
	exchange	AGWDataQ_3_17	queue	AGWDataQ_3_17	[]
	exchange	AGWDataQ_3_18	queue	AGWDataQ_3_18	[]
	exchange	AGWDataQ_3_19	queue	AGWDataQ_3_19	[]
	exchange	AGWDataQ_3_2	queue	AGWDataQ_3_2	[]
	exchange	AGWDataQ_3_20	queue	AGWDataQ_3_20	[]
	exchange	AGWDataQ_3_21	queue	AGWDataQ_3_21	[]
	exchange	AGWDataQ_3_22	queue	AGWDataQ_3_22	[]
	exchange	AGWDataQ_3_23	queue	AGWDataQ_3_23	[]
	exchange	AGWDataQ_3_24	queue	AGWDataQ_3_24	[]
	exchange	AGWDataQ_3_25	queue	AGWDataQ_3_25	[]
	exchange	AGWDataQ_3_26	queue	AGWDataQ_3_26	[]
	exchange	AGWDataQ_3_27	queue	AGWDataQ_3_27	[]
	exchange	AGWDataQ_3_28	queue	AGWDataQ_3_28	[]
	exchange	AGWDataQ_3_29	queue	AGWDataQ_3_29	[]
	exchange	AGWDataQ_3_3	queue	AGWDataQ_3_3	[]
	exchange	AGWDataQ_3_30	queue	AGWDataQ_3_30	[]
	exchange	AGWDataQ_3_31	queue	AGWDataQ_3_31	[]
	exchange	AGWDataQ_3_4	queue	AGWDataQ_3_4	[]
	exchange	AGWDataQ_3_5	queue	AGWDataQ_3_5	[]
	exchange	AGWDataQ_3_6	queue	AGWDataQ_3_6	[]
	exchange	AGWDataQ_3_7	queue	AGWDataQ_3_7	[]
	exchange	AGWDataQ_3_8	queue	AGWDataQ_3_8	[]
	exchange	AGWDataQ_3_9	queue	AGWDataQ_3_9	[]
	exchange	AGWDataQ_4_0	queue	AGWDataQ_4_0	[]
	exchange	AGWDataQ_4_1	queue	AGWDataQ_4_1	[]
	exchange	AGWDataQ_4_10	queue	AGWDataQ_4_10	[]
	exchange	AGWDataQ_4_11	queue	AGWDataQ_4_11	[]
	exchange	AGWDataQ_4_12	queue	AGWDataQ_4_12	[]
	exchange	AGWDataQ_4_13	queue	AGWDataQ_4_13	[]
	exchange	AGWDataQ_4_14	queue	AGWDataQ_4_14	[]
	exchange	AGWDataQ_4_15	queue	AGWDataQ_4_15	[]
	exchange	AGWDataQ_4_16	queue	AGWDataQ_4_16	[]
	exchange	AGWDataQ_4_17	queue	AGWDataQ_4_17	[]
	exchange	AGWDataQ_4_18	queue	AGWDataQ_4_18	[]
	exchange	AGWDataQ_4_19	queue	AGWDataQ_4_19	[]
	exchange	AGWDataQ_4_2	queue	AGWDataQ_4_2	[]
	exchange	AGWDataQ_4_20	queue	AGWDataQ_4_20	[]
	exchange	AGWDataQ_4_21	queue	AGWDataQ_4_21	[]
	exchange	AGWDataQ_4_22	queue	AGWDataQ_4_22	[]
	exchange	AGWDataQ_4_23	queue	AGWDataQ_4_23	[]
	exchange	AGWDataQ_4_24	queue	AGWDataQ_4_24	[]
	exchange	AGWDataQ_4_25	queue	AGWDataQ_4_25	[]
	exchange	AGWDataQ_4_26	queue	AGWDataQ_4_26	[]
	exchange	AGWDataQ_4_27	queue	AGWDataQ_4_27	[]
	exchange	AGWDataQ_4_28	queue	AGWDataQ_4_28	[]
	exchange	AGWDataQ_4_29	queue	AGWDataQ_4_29	[]
	exchange	AGWDataQ_4_3	queue	AGWDataQ_4_3	[]
	exchange	AGWDataQ_4_30	queue	AGWDataQ_4_30	[]
	exchange	AGWDataQ_4_31	queue	AGWDataQ_4_31	[]
	exchange	AGWDataQ_4_4	queue	AGWDataQ_4_4	[]
	exchange	AGWDataQ_4_5	queue	AGWDataQ_4_5	[]
	exchange	AGWDataQ_4_6	queue	AGWDataQ_4_6	[]
	exchange	AGWDataQ_4_7	queue	AGWDataQ_4_7	[]
	exchange	AGWDataQ_4_8	queue	AGWDataQ_4_8	[]
	exchange	AGWDataQ_4_9	queue	AGWDataQ_4_9	[]
	exchange	AGWDataQ_5_0	queue	AGWDataQ_5_0	[]
	exchange	AGWDataQ_5_1	queue	AGWDataQ_5_1	[]
	exchange	AGWDataQ_5_10	queue	AGWDataQ_5_10	[]
	exchange	AGWDataQ_5_11	queue	AGWDataQ_5_11	[]
	exchange	AGWDataQ_5_12	queue	AGWDataQ_5_12	[]
	exchange	AGWDataQ_5_13	queue	AGWDataQ_5_13	[]
	exchange	AGWDataQ_5_14	queue	AGWDataQ_5_14	[]
	exchange	AGWDataQ_5_15	queue	AGWDataQ_5_15	[]
	exchange	AGWDataQ_5_16	queue	AGWDataQ_5_16	[]
	exchange	AGWDataQ_5_17	queue	AGWDataQ_5_17	[]
	exchange	AGWDataQ_5_18	queue	AGWDataQ_5_18	[]
	exchange	AGWDataQ_5_19	queue	AGWDataQ_5_19	[]
	exchange	AGWDataQ_5_2	queue	AGWDataQ_5_2	[]
	exchange	AGWDataQ_5_20	queue	AGWDataQ_5_20	[]
	exchange	AGWDataQ_5_21	queue	AGWDataQ_5_21	[]
	exchange	AGWDataQ_5_22	queue	AGWDataQ_5_22	[]
	exchange	AGWDataQ_5_23	queue	AGWDataQ_5_23	[]
	exchange	AGWDataQ_5_24	queue	AGWDataQ_5_24	[]
	exchange	AGWDataQ_5_25	queue	AGWDataQ_5_25	[]
	exchange	AGWDataQ_5_26	queue	AGWDataQ_5_26	[]
	exchange	AGWDataQ_5_27	queue	AGWDataQ_5_27	[]
	exchange	AGWDataQ_5_28	queue	AGWDataQ_5_28	[]
	exchange	AGWDataQ_5_29	queue	AGWDataQ_5_29	[]
	exchange	AGWDataQ_5_3	queue	AGWDataQ_5_3	[]
	exchange	AGWDataQ_5_30	queue	AGWDataQ_5_30	[]
	exchange	AGWDataQ_5_31	queue	AGWDataQ_5_31	[]
	exchange	AGWDataQ_5_4	queue	AGWDataQ_5_4	[]
	exchange	AGWDataQ_5_5	queue	AGWDataQ_5_5	[]
	exchange	AGWDataQ_5_6	queue	AGWDataQ_5_6	[]
	exchange	AGWDataQ_5_7	queue	AGWDataQ_5_7	[]
	exchange	AGWDataQ_5_8	queue	AGWDataQ_5_8	[]
	exchange	AGWDataQ_5_9	queue	AGWDataQ_5_9	[]
	exchange	AGWNotificationQ_1_0	queue	AGWNotificationQ_1_0	[]
	exchange	AGWNotificationQ_1_1	queue	AGWNotificationQ_1_1	[]
	exchange	AGWNotificationQ_1_10	queue	AGWNotificationQ_1_10	[]
	exchange	AGWNotificationQ_1_11	queue	AGWNotificationQ_1_11	[]
	exchange	AGWNotificationQ_1_12	queue	AGWNotificationQ_1_12	[]
	exchange	AGWNotificationQ_1_13	queue	AGWNotificationQ_1_13	[]
	exchange	AGWNotificationQ_1_14	queue	AGWNotificationQ_1_14	[]
	exchange	AGWNotificationQ_1_15	queue	AGWNotificationQ_1_15	[]
	exchange	AGWNotificationQ_1_16	queue	AGWNotificationQ_1_16	[]
	exchange	AGWNotificationQ_1_17	queue	AGWNotificationQ_1_17	[]
	exchange	AGWNotificationQ_1_18	queue	AGWNotificationQ_1_18	[]
	exchange	AGWNotificationQ_1_19	queue	AGWNotificationQ_1_19	[]
	exchange	AGWNotificationQ_1_2	queue	AGWNotificationQ_1_2	[]
	exchange	AGWNotificationQ_1_20	queue	AGWNotificationQ_1_20	[]
	exchange	AGWNotificationQ_1_21	queue	AGWNotificationQ_1_21	[]
	exchange	AGWNotificationQ_1_22	queue	AGWNotificationQ_1_22	[]
	exchange	AGWNotificationQ_1_23	queue	AGWNotificationQ_1_23	[]
	exchange	AGWNotificationQ_1_24	queue	AGWNotificationQ_1_24	[]
	exchange	AGWNotificationQ_1_25	queue	AGWNotificationQ_1_25	[]
	exchange	AGWNotificationQ_1_26	queue	AGWNotificationQ_1_26	[]
	exchange	AGWNotificationQ_1_27	queue	AGWNotificationQ_1_27	[]
	exchange	AGWNotificationQ_1_28	queue	AGWNotificationQ_1_28	[]
	exchange	AGWNotificationQ_1_29	queue	AGWNotificationQ_1_29	[]
	exchange	AGWNotificationQ_1_3	queue	AGWNotificationQ_1_3	[]
	exchange	AGWNotificationQ_1_30	queue	AGWNotificationQ_1_30	[]
	exchange	AGWNotificationQ_1_31	queue	AGWNotificationQ_1_31	[]
	exchange	AGWNotificationQ_1_4	queue	AGWNotificationQ_1_4	[]
	exchange	AGWNotificationQ_1_5	queue	AGWNotificationQ_1_5	[]
	exchange	AGWNotificationQ_1_6	queue	AGWNotificationQ_1_6	[]
	exchange	AGWNotificationQ_1_7	queue	AGWNotificationQ_1_7	[]
	exchange	AGWNotificationQ_1_8	queue	AGWNotificationQ_1_8	[]
	exchange	AGWNotificationQ_1_9	queue	AGWNotificationQ_1_9	[]
	exchange	AGWNotificationQ_2_0	queue	AGWNotificationQ_2_0	[]
	exchange	AGWNotificationQ_2_1	queue	AGWNotificationQ_2_1	[]
	exchange	AGWNotificationQ_2_10	queue	AGWNotificationQ_2_10	[]
	exchange	AGWNotificationQ_2_11	queue	AGWNotificationQ_2_11	[]
	exchange	AGWNotificationQ_2_12	queue	AGWNotificationQ_2_12	[]
	exchange	AGWNotificationQ_2_13	queue	AGWNotificationQ_2_13	[]
	exchange	AGWNotificationQ_2_14	queue	AGWNotificationQ_2_14	[]
	exchange	AGWNotificationQ_2_15	queue	AGWNotificationQ_2_15	[]
	exchange	AGWNotificationQ_2_16	queue	AGWNotificationQ_2_16	[]
	exchange	AGWNotificationQ_2_17	queue	AGWNotificationQ_2_17	[]
	exchange	AGWNotificationQ_2_18	queue	AGWNotificationQ_2_18	[]
	exchange	AGWNotificationQ_2_19	queue	AGWNotificationQ_2_19	[]
	exchange	AGWNotificationQ_2_2	queue	AGWNotificationQ_2_2	[]
	exchange	AGWNotificationQ_2_20	queue	AGWNotificationQ_2_20	[]
	exchange	AGWNotificationQ_2_21	queue	AGWNotificationQ_2_21	[]
	exchange	AGWNotificationQ_2_22	queue	AGWNotificationQ_2_22	[]
	exchange	AGWNotificationQ_2_23	queue	AGWNotificationQ_2_23	[]
	exchange	AGWNotificationQ_2_24	queue	AGWNotificationQ_2_24	[]
	exchange	AGWNotificationQ_2_25	queue	AGWNotificationQ_2_25	[]
	exchange	AGWNotificationQ_2_26	queue	AGWNotificationQ_2_26	[]
	exchange	AGWNotificationQ_2_27	queue	AGWNotificationQ_2_27	[]
	exchange	AGWNotificationQ_2_28	queue	AGWNotificationQ_2_28	[]
	exchange	AGWNotificationQ_2_29	queue	AGWNotificationQ_2_29	[]
	exchange	AGWNotificationQ_2_3	queue	AGWNotificationQ_2_3	[]
	exchange	AGWNotificationQ_2_30	queue	AGWNotificationQ_2_30	[]
	exchange	AGWNotificationQ_2_31	queue	AGWNotificationQ_2_31	[]
	exchange	AGWNotificationQ_2_4	queue	AGWNotificationQ_2_4	[]
	exchange	AGWNotificationQ_2_5	queue	AGWNotificationQ_2_5	[]
	exchange	AGWNotificationQ_2_6	queue	AGWNotificationQ_2_6	[]
	exchange	AGWNotificationQ_2_7	queue	AGWNotificationQ_2_7	[]
	exchange	AGWNotificationQ_2_8	queue	AGWNotificationQ_2_8	[]
	exchange	AGWNotificationQ_2_9	queue	AGWNotificationQ_2_9	[]
	exchange	AGWNotificationQ_3_0	queue	AGWNotificationQ_3_0	[]
	exchange	AGWNotificationQ_3_1	queue	AGWNotificationQ_3_1	[]
	exchange	AGWNotificationQ_3_10	queue	AGWNotificationQ_3_10	[]
	exchange	AGWNotificationQ_3_11	queue	AGWNotificationQ_3_11	[]
	exchange	AGWNotificationQ_3_12	queue	AGWNotificationQ_3_12	[]
	exchange	AGWNotificationQ_3_13	queue	AGWNotificationQ_3_13	[]
	exchange	AGWNotificationQ_3_14	queue	AGWNotificationQ_3_14	[]
	exchange	AGWNotificationQ_3_15	queue	AGWNotificationQ_3_15	[]
	exchange	AGWNotificationQ_3_16	queue	AGWNotificationQ_3_16	[]
	exchange	AGWNotificationQ_3_17	queue	AGWNotificationQ_3_17	[]
	exchange	AGWNotificationQ_3_18	queue	AGWNotificationQ_3_18	[]
	exchange	AGWNotificationQ_3_19	queue	AGWNotificationQ_3_19	[]
	exchange	AGWNotificationQ_3_2	queue	AGWNotificationQ_3_2	[]
	exchange	AGWNotificationQ_3_20	queue	AGWNotificationQ_3_20	[]
	exchange	AGWNotificationQ_3_21	queue	AGWNotificationQ_3_21	[]
	exchange	AGWNotificationQ_3_22	queue	AGWNotificationQ_3_22	[]
	exchange	AGWNotificationQ_3_23	queue	AGWNotificationQ_3_23	[]
	exchange	AGWNotificationQ_3_24	queue	AGWNotificationQ_3_24	[]
	exchange	AGWNotificationQ_3_25	queue	AGWNotificationQ_3_25	[]
	exchange	AGWNotificationQ_3_26	queue	AGWNotificationQ_3_26	[]
	exchange	AGWNotificationQ_3_27	queue	AGWNotificationQ_3_27	[]
	exchange	AGWNotificationQ_3_28	queue	AGWNotificationQ_3_28	[]
	exchange	AGWNotificationQ_3_29	queue	AGWNotificationQ_3_29	[]
	exchange	AGWNotificationQ_3_3	queue	AGWNotificationQ_3_3	[]
	exchange	AGWNotificationQ_3_30	queue	AGWNotificationQ_3_30	[]
	exchange	AGWNotificationQ_3_31	queue	AGWNotificationQ_3_31	[]
	exchange	AGWNotificationQ_3_4	queue	AGWNotificationQ_3_4	[]
	exchange	AGWNotificationQ_3_5	queue	AGWNotificationQ_3_5	[]
	exchange	AGWNotificationQ_3_6	queue	AGWNotificationQ_3_6	[]
	exchange	AGWNotificationQ_3_7	queue	AGWNotificationQ_3_7	[]
	exchange	AGWNotificationQ_3_8	queue	AGWNotificationQ_3_8	[]
	exchange	AGWNotificationQ_3_9	queue	AGWNotificationQ_3_9	[]
	exchange	AGWNotificationQ_4_0	queue	AGWNotificationQ_4_0	[]
	exchange	AGWNotificationQ_4_1	queue	AGWNotificationQ_4_1	[]
	exchange	AGWNotificationQ_4_10	queue	AGWNotificationQ_4_10	[]
	exchange	AGWNotificationQ_4_11	queue	AGWNotificationQ_4_11	[]
	exchange	AGWNotificationQ_4_12	queue	AGWNotificationQ_4_12	[]
	exchange	AGWNotificationQ_4_13	queue	AGWNotificationQ_4_13	[]
	exchange	AGWNotificationQ_4_14	queue	AGWNotificationQ_4_14	[]
	exchange	AGWNotificationQ_4_15	queue	AGWNotificationQ_4_15	[]
	exchange	AGWNotificationQ_4_16	queue	AGWNotificationQ_4_16	[]
	exchange	AGWNotificationQ_4_17	queue	AGWNotificationQ_4_17	[]
	exchange	AGWNotificationQ_4_18	queue	AGWNotificationQ_4_18	[]
	exchange	AGWNotificationQ_4_19	queue	AGWNotificationQ_4_19	[]
	exchange	AGWNotificationQ_4_2	queue	AGWNotificationQ_4_2	[]
	exchange	AGWNotificationQ_4_20	queue	AGWNotificationQ_4_20	[]
	exchange	AGWNotificationQ_4_21	queue	AGWNotificationQ_4_21	[]
	exchange	AGWNotificationQ_4_22	queue	AGWNotificationQ_4_22	[]
	exchange	AGWNotificationQ_4_23	queue	AGWNotificationQ_4_23	[]
	exchange	AGWNotificationQ_4_24	queue	AGWNotificationQ_4_24	[]
	exchange	AGWNotificationQ_4_25	queue	AGWNotificationQ_4_25	[]
	exchange	AGWNotificationQ_4_26	queue	AGWNotificationQ_4_26	[]
	exchange	AGWNotificationQ_4_27	queue	AGWNotificationQ_4_27	[]
	exchange	AGWNotificationQ_4_28	queue	AGWNotificationQ_4_28	[]
	exchange	AGWNotificationQ_4_29	queue	AGWNotificationQ_4_29	[]
	exchange	AGWNotificationQ_4_3	queue	AGWNotificationQ_4_3	[]
	exchange	AGWNotificationQ_4_30	queue	AGWNotificationQ_4_30	[]
	exchange	AGWNotificationQ_4_31	queue	AGWNotificationQ_4_31	[]
	exchange	AGWNotificationQ_4_4	queue	AGWNotificationQ_4_4	[]
	exchange	AGWNotificationQ_4_5	queue	AGWNotificationQ_4_5	[]
	exchange	AGWNotificationQ_4_6	queue	AGWNotificationQ_4_6	[]
	exchange	AGWNotificationQ_4_7	queue	AGWNotificationQ_4_7	[]
	exchange	AGWNotificationQ_4_8	queue	AGWNotificationQ_4_8	[]
	exchange	AGWNotificationQ_4_9	queue	AGWNotificationQ_4_9	[]
	exchange	AGWNotificationQ_5_0	queue	AGWNotificationQ_5_0	[]
	exchange	AGWNotificationQ_5_1	queue	AGWNotificationQ_5_1	[]
	exchange	AGWNotificationQ_5_10	queue	AGWNotificationQ_5_10	[]
	exchange	AGWNotificationQ_5_11	queue	AGWNotificationQ_5_11	[]
	exchange	AGWNotificationQ_5_12	queue	AGWNotificationQ_5_12	[]
	exchange	AGWNotificationQ_5_13	queue	AGWNotificationQ_5_13	[]
	exchange	AGWNotificationQ_5_14	queue	AGWNotificationQ_5_14	[]
	exchange	AGWNotificationQ_5_15	queue	AGWNotificationQ_5_15	[]
	exchange	AGWNotificationQ_5_16	queue	AGWNotificationQ_5_16	[]
	exchange	AGWNotificationQ_5_17	queue	AGWNotificationQ_5_17	[]
	exchange	AGWNotificationQ_5_18	queue	AGWNotificationQ_5_18	[]
	exchange	AGWNotificationQ_5_19	queue	AGWNotificationQ_5_19	[]
	exchange	AGWNotificationQ_5_2	queue	AGWNotificationQ_5_2	[]
	exchange	AGWNotificationQ_5_20	queue	AGWNotificationQ_5_20	[]
	exchange	AGWNotificationQ_5_21	queue	AGWNotificationQ_5_21	[]
	exchange	AGWNotificationQ_5_22	queue	AGWNotificationQ_5_22	[]
	exchange	AGWNotificationQ_5_23	queue	AGWNotificationQ_5_23	[]
	exchange	AGWNotificationQ_5_24	queue	AGWNotificationQ_5_24	[]
	exchange	AGWNotificationQ_5_25	queue	AGWNotificationQ_5_25	[]
	exchange	AGWNotificationQ_5_26	queue	AGWNotificationQ_5_26	[]
	exchange	AGWNotificationQ_5_27	queue	AGWNotificationQ_5_27	[]
	exchange	AGWNotificationQ_5_28	queue	AGWNotificationQ_5_28	[]
	exchange	AGWNotificationQ_5_29	queue	AGWNotificationQ_5_29	[]
	exchange	AGWNotificationQ_5_3	queue	AGWNotificationQ_5_3	[]
	exchange	AGWNotificationQ_5_30	queue	AGWNotificationQ_5_30	[]
	exchange	AGWNotificationQ_5_31	queue	AGWNotificationQ_5_31	[]
	exchange	AGWNotificationQ_5_4	queue	AGWNotificationQ_5_4	[]
	exchange	AGWNotificationQ_5_5	queue	AGWNotificationQ_5_5	[]
	exchange	AGWNotificationQ_5_6	queue	AGWNotificationQ_5_6	[]
	exchange	AGWNotificationQ_5_7	queue	AGWNotificationQ_5_7	[]
	exchange	AGWNotificationQ_5_8	queue	AGWNotificationQ_5_8	[]
	exchange	AGWNotificationQ_5_9	queue	AGWNotificationQ_5_9	[]
	exchange	AVS2FMHBQ	queue	AVS2FMHBQ	[]
	exchange	CM2AGWHBQ1	queue	CM2AGWHBQ1	[]
	exchange	CM2AGWHBQ2	queue	CM2AGWHBQ2	[]
	exchange	CM2AGWHBQ3	queue	CM2AGWHBQ3	[]
	exchange	CM2AGWHBQ4	queue	CM2AGWHBQ4	[]
	exchange	CM2AGWHBQ5	queue	CM2AGWHBQ5	[]
	exchange	CM2FMHBQ	queue	CM2FMHBQ	[]
	exchange	FM2AGWHBQ1	queue	FM2AGWHBQ1	[]
	exchange	FM2AGWHBQ2	queue	FM2AGWHBQ2	[]
	exchange	FM2AGWHBQ3	queue	FM2AGWHBQ3	[]
	exchange	FM2AGWHBQ4	queue	FM2AGWHBQ4	[]
	exchange	FM2AGWHBQ5	queue	FM2AGWHBQ5	[]
	exchange	FMControlQ	queue	FMControlQ	[]
AGW1	exchange	AGWControlQ1	queue	ctrl	[]
AGW1	exchange	AGWDataQ_1_0	queue	data_0	[]
AGW1	exchange	AGWDataQ_1_1	queue	data_1	[]
AGW1	exchange	AGWDataQ_1_10	queue	data_10	[]
AGW1	exchange	AGWDataQ_1_11	queue	data_11	[]
AGW1	exchange	AGWDataQ_1_12	queue	data_12	[]
AGW1	exchange	AGWDataQ_1_13	queue	data_13	[]
AGW1	exchange	AGWDataQ_1_14	queue	data_14	[]
AGW1	exchange	AGWDataQ_1_15	queue	data_15	[]
AGW1	exchange	AGWDataQ_1_16	queue	data_16	[]
AGW1	exchange	AGWDataQ_1_17	queue	data_17	[]
AGW1	exchange	AGWDataQ_1_18	queue	data_18	[]
AGW1	exchange	AGWDataQ_1_19	queue	data_19	[]
AGW1	exchange	AGWDataQ_1_2	queue	data_2	[]
AGW1	exchange	AGWDataQ_1_20	queue	data_20	[]
AGW1	exchange	AGWDataQ_1_21	queue	data_21	[]
AGW1	exchange	AGWDataQ_1_22	queue	data_22	[]
AGW1	exchange	AGWDataQ_1_23	queue	data_23	[]
AGW1	exchange	AGWDataQ_1_24	queue	data_24	[]
AGW1	exchange	AGWDataQ_1_25	queue	data_25	[]
AGW1	exchange	AGWDataQ_1_26	queue	data_26	[]
AGW1	exchange	AGWDataQ_1_27	queue	data_27	[]
AGW1	exchange	AGWDataQ_1_28	queue	data_28	[]
AGW1	exchange	AGWDataQ_1_29	queue	data_29	[]
AGW1	exchange	AGWDataQ_1_3	queue	data_3	[]
AGW1	exchange	AGWDataQ_1_30	queue	data_30	[]
AGW1	exchange	AGWDataQ_1_31	queue	data_31	[]
AGW1	exchange	AGWDataQ_1_4	queue	data_4	[]
AGW1	exchange	AGWDataQ_1_5	queue	data_5	[]
AGW1	exchange	AGWDataQ_1_6	queue	data_6	[]
AGW1	exchange	AGWDataQ_1_7	queue	data_7	[]
AGW1	exchange	AGWDataQ_1_8	queue	data_8	[]
AGW1	exchange	AGWDataQ_1_9	queue	data_9	[]
AGW1	exchange	AGWNotificationQ_1_0	queue	notify_0	[]
AGW1	exchange	AGWNotificationQ_1_1	queue	notify_1	[]
AGW1	exchange	AGWNotificationQ_1_10	queue	notify_10	[]
AGW1	exchange	AGWNotificationQ_1_11	queue	notify_11	[]
AGW1	exchange	AGWNotificationQ_1_12	queue	notify_12	[]
AGW1	exchange	AGWNotificationQ_1_13	queue	notify_13	[]
AGW1	exchange	AGWNotificationQ_1_14	queue	notify_14	[]
AGW1	exchange	AGWNotificationQ_1_15	queue	notify_15	[]
AGW1	exchange	AGWNotificationQ_1_16	queue	notify_16	[]
AGW1	exchange	AGWNotificationQ_1_17	queue	notify_17	[]
AGW1	exchange	AGWNotificationQ_1_18	queue	notify_18	[]
AGW1	exchange	AGWNotificationQ_1_19	queue	notify_19	[]
AGW1	exchange	AGWNotificationQ_1_2	queue	notify_2	[]
AGW1	exchange	AGWNotificationQ_1_20	queue	notify_20	[]
AGW1	exchange	AGWNotificationQ_1_21	queue	notify_21	[]
AGW1	exchange	AGWNotificationQ_1_22	queue	notify_22	[]
AGW1	exchange	AGWNotificationQ_1_23	queue	notify_23	[]
AGW1	exchange	AGWNotificationQ_1_24	queue	notify_24	[]
AGW1	exchange	AGWNotificationQ_1_25	queue	notify_25	[]
AGW1	exchange	AGWNotificationQ_1_26	queue	notify_26	[]
AGW1	exchange	AGWNotificationQ_1_27	queue	notify_27	[]
AGW1	exchange	AGWNotificationQ_1_28	queue	notify_28	[]
AGW1	exchange	AGWNotificationQ_1_29	queue	notify_29	[]
AGW1	exchange	AGWNotificationQ_1_3	queue	notify_3	[]
AGW1	exchange	AGWNotificationQ_1_30	queue	notify_30	[]
AGW1	exchange	AGWNotificationQ_1_31	queue	notify_31	[]
AGW1	exchange	AGWNotificationQ_1_4	queue	notify_4	[]
AGW1	exchange	AGWNotificationQ_1_5	queue	notify_5	[]
AGW1	exchange	AGWNotificationQ_1_6	queue	notify_6	[]
AGW1	exchange	AGWNotificationQ_1_7	queue	notify_7	[]
AGW1	exchange	AGWNotificationQ_1_8	queue	notify_8	[]
AGW1	exchange	AGWNotificationQ_1_9	queue	notify_9	[]
AGW2	exchange	AGWControlQ2	queue	ctrl	[]
AGW2	exchange	AGWDataQ_2_0	queue	data_0	[]
AGW2	exchange	AGWDataQ_2_1	queue	data_1	[]
AGW2	exchange	AGWDataQ_2_10	queue	data_10	[]
AGW2	exchange	AGWDataQ_2_11	queue	data_11	[]
AGW2	exchange	AGWDataQ_2_12	queue	data_12	[]
AGW2	exchange	AGWDataQ_2_13	queue	data_13	[]
AGW2	exchange	AGWDataQ_2_14	queue	data_14	[]
AGW2	exchange	AGWDataQ_2_15	queue	data_15	[]
AGW2	exchange	AGWDataQ_2_16	queue	data_16	[]
AGW2	exchange	AGWDataQ_2_17	queue	data_17	[]
AGW2	exchange	AGWDataQ_2_18	queue	data_18	[]
AGW2	exchange	AGWDataQ_2_19	queue	data_19	[]
AGW2	exchange	AGWDataQ_2_2	queue	data_2	[]
AGW2	exchange	AGWDataQ_2_20	queue	data_20	[]
AGW2	exchange	AGWDataQ_2_21	queue	data_21	[]
AGW2	exchange	AGWDataQ_2_22	queue	data_22	[]
AGW2	exchange	AGWDataQ_2_23	queue	data_23	[]
AGW2	exchange	AGWDataQ_2_24	queue	data_24	[]
AGW2	exchange	AGWDataQ_2_25	queue	data_25	[]
AGW2	exchange	AGWDataQ_2_26	queue	data_26	[]
AGW2	exchange	AGWDataQ_2_27	queue	data_27	[]
AGW2	exchange	AGWDataQ_2_28	queue	data_28	[]
AGW2	exchange	AGWDataQ_2_29	queue	data_29	[]
AGW2	exchange	AGWDataQ_2_3	queue	data_3	[]
AGW2	exchange	AGWDataQ_2_30	queue	data_30	[]
AGW2	exchange	AGWDataQ_2_31	queue	data_31	[]
AGW2	exchange	AGWDataQ_2_4	queue	data_4	[]
AGW2	exchange	AGWDataQ_2_5	queue	data_5	[]
AGW2	exchange	AGWDataQ_2_6	queue	data_6	[]
AGW2	exchange	AGWDataQ_2_7	queue	data_7	[]
AGW2	exchange	AGWDataQ_2_8	queue	data_8	[]
AGW2	exchange	AGWDataQ_2_9	queue	data_9	[]
AGW2	exchange	AGWNotificationQ_2_0	queue	notify_0	[]
AGW2	exchange	AGWNotificationQ_2_1	queue	notify_1	[]
AGW2	exchange	AGWNotificationQ_2_10	queue	notify_10	[]
AGW2	exchange	AGWNotificationQ_2_11	queue	notify_11	[]
AGW2	exchange	AGWNotificationQ_2_12	queue	notify_12	[]
AGW2	exchange	AGWNotificationQ_2_13	queue	notify_13	[]
AGW2	exchange	AGWNotificationQ_2_14	queue	notify_14	[]
AGW2	exchange	AGWNotificationQ_2_15	queue	notify_15	[]
AGW2	exchange	AGWNotificationQ_2_16	queue	notify_16	[]
AGW2	exchange	AGWNotificationQ_2_17	queue	notify_17	[]
AGW2	exchange	AGWNotificationQ_2_18	queue	notify_18	[]
AGW2	exchange	AGWNotificationQ_2_19	queue	notify_19	[]
AGW2	exchange	AGWNotificationQ_2_2	queue	notify_2	[]
AGW2	exchange	AGWNotificationQ_2_20	queue	notify_20	[]
AGW2	exchange	AGWNotificationQ_2_21	queue	notify_21	[]
AGW2	exchange	AGWNotificationQ_2_22	queue	notify_22	[]
AGW2	exchange	AGWNotificationQ_2_23	queue	notify_23	[]
AGW2	exchange	AGWNotificationQ_2_24	queue	notify_24	[]
AGW2	exchange	AGWNotificationQ_2_25	queue	notify_25	[]
AGW2	exchange	AGWNotificationQ_2_26	queue	notify_26	[]
AGW2	exchange	AGWNotificationQ_2_27	queue	notify_27	[]
AGW2	exchange	AGWNotificationQ_2_28	queue	notify_28	[]
AGW2	exchange	AGWNotificationQ_2_29	queue	notify_29	[]
AGW2	exchange	AGWNotificationQ_2_3	queue	notify_3	[]
AGW2	exchange	AGWNotificationQ_2_30	queue	notify_30	[]
AGW2	exchange	AGWNotificationQ_2_31	queue	notify_31	[]
AGW2	exchange	AGWNotificationQ_2_4	queue	notify_4	[]
AGW2	exchange	AGWNotificationQ_2_5	queue	notify_5	[]
AGW2	exchange	AGWNotificationQ_2_6	queue	notify_6	[]
AGW2	exchange	AGWNotificationQ_2_7	queue	notify_7	[]
AGW2	exchange	AGWNotificationQ_2_8	queue	notify_8	[]
AGW2	exchange	AGWNotificationQ_2_9	queue	notify_9	[]
AGW3	exchange	AGWControlQ3	queue	ctrl	[]
AGW3	exchange	AGWDataQ_3_0	queue	data_0	[]
AGW3	exchange	AGWDataQ_3_1	queue	data_1	[]
AGW3	exchange	AGWDataQ_3_10	queue	data_10	[]
AGW3	exchange	AGWDataQ_3_11	queue	data_11	[]
AGW3	exchange	AGWDataQ_3_12	queue	data_12	[]
AGW3	exchange	AGWDataQ_3_13	queue	data_13	[]
AGW3	exchange	AGWDataQ_3_14	queue	data_14	[]
AGW3	exchange	AGWDataQ_3_15	queue	data_15	[]
AGW3	exchange	AGWDataQ_3_16	queue	data_16	[]
AGW3	exchange	AGWDataQ_3_17	queue	data_17	[]
AGW3	exchange	AGWDataQ_3_18	queue	data_18	[]
AGW3	exchange	AGWDataQ_3_19	queue	data_19	[]
AGW3	exchange	AGWDataQ_3_2	queue	data_2	[]
AGW3	exchange	AGWDataQ_3_20	queue	data_20	[]
AGW3	exchange	AGWDataQ_3_21	queue	data_21	[]
AGW3	exchange	AGWDataQ_3_22	queue	data_22	[]
AGW3	exchange	AGWDataQ_3_23	queue	data_23	[]
AGW3	exchange	AGWDataQ_3_24	queue	data_24	[]
AGW3	exchange	AGWDataQ_3_25	queue	data_25	[]
AGW3	exchange	AGWDataQ_3_26	queue	data_26	[]
AGW3	exchange	AGWDataQ_3_27	queue	data_27	[]
AGW3	exchange	AGWDataQ_3_28	queue	data_28	[]
AGW3	exchange	AGWDataQ_3_29	queue	data_29	[]
AGW3	exchange	AGWDataQ_3_3	queue	data_3	[]
AGW3	exchange	AGWDataQ_3_30	queue	data_30	[]
AGW3	exchange	AGWDataQ_3_31	queue	data_31	[]
AGW3	exchange	AGWDataQ_3_4	queue	data_4	[]
AGW3	exchange	AGWDataQ_3_5	queue	data_5	[]
AGW3	exchange	AGWDataQ_3_6	queue	data_6	[]
AGW3	exchange	AGWDataQ_3_7	queue	data_7	[]
AGW3	exchange	AGWDataQ_3_8	queue	data_8	[]
AGW3	exchange	AGWDataQ_3_9	queue	data_9	[]
AGW3	exchange	AGWNotificationQ_3_0	queue	notify_0	[]
AGW3	exchange	AGWNotificationQ_3_1	queue	notify_1	[]
AGW3	exchange	AGWNotificationQ_3_10	queue	notify_10	[]
AGW3	exchange	AGWNotificationQ_3_11	queue	notify_11	[]
AGW3	exchange	AGWNotificationQ_3_12	queue	notify_12	[]
AGW3	exchange	AGWNotificationQ_3_13	queue	notify_13	[]
AGW3	exchange	AGWNotificationQ_3_14	queue	notify_14	[]
AGW3	exchange	AGWNotificationQ_3_15	queue	notify_15	[]
AGW3	exchange	AGWNotificationQ_3_16	queue	notify_16	[]
AGW3	exchange	AGWNotificationQ_3_17	queue	notify_17	[]
AGW3	exchange	AGWNotificationQ_3_18	queue	notify_18	[]
AGW3	exchange	AGWNotificationQ_3_19	queue	notify_19	[]
AGW3	exchange	AGWNotificationQ_3_2	queue	notify_2	[]
AGW3	exchange	AGWNotificationQ_3_20	queue	notify_20	[]
AGW3	exchange	AGWNotificationQ_3_21	queue	notify_21	[]
AGW3	exchange	AGWNotificationQ_3_22	queue	notify_22	[]
AGW3	exchange	AGWNotificationQ_3_23	queue	notify_23	[]
AGW3	exchange	AGWNotificationQ_3_24	queue	notify_24	[]
AGW3	exchange	AGWNotificationQ_3_25	queue	notify_25	[]
AGW3	exchange	AGWNotificationQ_3_26	queue	notify_26	[]
AGW3	exchange	AGWNotificationQ_3_27	queue	notify_27	[]
AGW3	exchange	AGWNotificationQ_3_28	queue	notify_28	[]
AGW3	exchange	AGWNotificationQ_3_29	queue	notify_29	[]
AGW3	exchange	AGWNotificationQ_3_3	queue	notify_3	[]
AGW3	exchange	AGWNotificationQ_3_30	queue	notify_30	[]
AGW3	exchange	AGWNotificationQ_3_31	queue	notify_31	[]
AGW3	exchange	AGWNotificationQ_3_4	queue	notify_4	[]
AGW3	exchange	AGWNotificationQ_3_5	queue	notify_5	[]
AGW3	exchange	AGWNotificationQ_3_6	queue	notify_6	[]
AGW3	exchange	AGWNotificationQ_3_7	queue	notify_7	[]
AGW3	exchange	AGWNotificationQ_3_8	queue	notify_8	[]
AGW3	exchange	AGWNotificationQ_3_9	queue	notify_9	[]
AGW4	exchange	AGWControlQ4	queue	ctrl	[]
AGW4	exchange	AGWDataQ_4_0	queue	data_0	[]
AGW4	exchange	AGWDataQ_4_1	queue	data_1	[]
AGW4	exchange	AGWDataQ_4_10	queue	data_10	[]
AGW4	exchange	AGWDataQ_4_11	queue	data_11	[]
AGW4	exchange	AGWDataQ_4_12	queue	data_12	[]
AGW4	exchange	AGWDataQ_4_13	queue	data_13	[]
AGW4	exchange	AGWDataQ_4_14	queue	data_14	[]
AGW4	exchange	AGWDataQ_4_15	queue	data_15	[]
AGW4	exchange	AGWDataQ_4_16	queue	data_16	[]
AGW4	exchange	AGWDataQ_4_17	queue	data_17	[]
AGW4	exchange	AGWDataQ_4_18	queue	data_18	[]
AGW4	exchange	AGWDataQ_4_19	queue	data_19	[]
AGW4	exchange	AGWDataQ_4_2	queue	data_2	[]
AGW4	exchange	AGWDataQ_4_20	queue	data_20	[]
AGW4	exchange	AGWDataQ_4_21	queue	data_21	[]
AGW4	exchange	AGWDataQ_4_22	queue	data_22	[]
AGW4	exchange	AGWDataQ_4_23	queue	data_23	[]
AGW4	exchange	AGWDataQ_4_24	queue	data_24	[]
AGW4	exchange	AGWDataQ_4_25	queue	data_25	[]
AGW4	exchange	AGWDataQ_4_26	queue	data_26	[]
AGW4	exchange	AGWDataQ_4_27	queue	data_27	[]
AGW4	exchange	AGWDataQ_4_28	queue	data_28	[]
AGW4	exchange	AGWDataQ_4_29	queue	data_29	[]
AGW4	exchange	AGWDataQ_4_3	queue	data_3	[]
AGW4	exchange	AGWDataQ_4_30	queue	data_30	[]
AGW4	exchange	AGWDataQ_4_31	queue	data_31	[]
AGW4	exchange	AGWDataQ_4_4	queue	data_4	[]
AGW4	exchange	AGWDataQ_4_5	queue	data_5	[]
AGW4	exchange	AGWDataQ_4_6	queue	data_6	[]
AGW4	exchange	AGWDataQ_4_7	queue	data_7	[]
AGW4	exchange	AGWDataQ_4_8	queue	data_8	[]
AGW4	exchange	AGWDataQ_4_9	queue	data_9	[]
AGW4	exchange	AGWNotificationQ_4_0	queue	notify_0	[]
AGW4	exchange	AGWNotificationQ_4_1	queue	notify_1	[]
AGW4	exchange	AGWNotificationQ_4_10	queue	notify_10	[]
AGW4	exchange	AGWNotificationQ_4_11	queue	notify_11	[]
AGW4	exchange	AGWNotificationQ_4_12	queue	notify_12	[]
AGW4	exchange	AGWNotificationQ_4_13	queue	notify_13	[]
AGW4	exchange	AGWNotificationQ_4_14	queue	notify_14	[]
AGW4	exchange	AGWNotificationQ_4_15	queue	notify_15	[]
AGW4	exchange	AGWNotificationQ_4_16	queue	notify_16	[]
AGW4	exchange	AGWNotificationQ_4_17	queue	notify_17	[]
AGW4	exchange	AGWNotificationQ_4_18	queue	notify_18	[]
AGW4	exchange	AGWNotificationQ_4_19	queue	notify_19	[]
AGW4	exchange	AGWNotificationQ_4_2	queue	notify_2	[]
AGW4	exchange	AGWNotificationQ_4_20	queue	notify_20	[]
AGW4	exchange	AGWNotificationQ_4_21	queue	notify_21	[]
AGW4	exchange	AGWNotificationQ_4_22	queue	notify_22	[]
AGW4	exchange	AGWNotificationQ_4_23	queue	notify_23	[]
AGW4	exchange	AGWNotificationQ_4_24	queue	notify_24	[]
AGW4	exchange	AGWNotificationQ_4_25	queue	notify_25	[]
AGW4	exchange	AGWNotificationQ_4_26	queue	notify_26	[]
AGW4	exchange	AGWNotificationQ_4_27	queue	notify_27	[]
AGW4	exchange	AGWNotificationQ_4_28	queue	notify_28	[]
AGW4	exchange	AGWNotificationQ_4_29	queue	notify_29	[]
AGW4	exchange	AGWNotificationQ_4_3	queue	notify_3	[]
AGW4	exchange	AGWNotificationQ_4_30	queue	notify_30	[]
AGW4	exchange	AGWNotificationQ_4_31	queue	notify_31	[]
AGW4	exchange	AGWNotificationQ_4_4	queue	notify_4	[]
AGW4	exchange	AGWNotificationQ_4_5	queue	notify_5	[]
AGW4	exchange	AGWNotificationQ_4_6	queue	notify_6	[]
AGW4	exchange	AGWNotificationQ_4_7	queue	notify_7	[]
AGW4	exchange	AGWNotificationQ_4_8	queue	notify_8	[]
AGW4	exchange	AGWNotificationQ_4_9	queue	notify_9	[]
AGW5	exchange	AGWControlQ5	queue	ctrl	[]
AGW5	exchange	AGWDataQ_5_0	queue	data_0	[]
AGW5	exchange	AGWDataQ_5_1	queue	data_1	[]
AGW5	exchange	AGWDataQ_5_10	queue	data_10	[]
AGW5	exchange	AGWDataQ_5_11	queue	data_11	[]
AGW5	exchange	AGWDataQ_5_12	queue	data_12	[]
AGW5	exchange	AGWDataQ_5_13	queue	data_13	[]
AGW5	exchange	AGWDataQ_5_14	queue	data_14	[]
AGW5	exchange	AGWDataQ_5_15	queue	data_15	[]
AGW5	exchange	AGWDataQ_5_16	queue	data_16	[]
AGW5	exchange	AGWDataQ_5_17	queue	data_17	[]
AGW5	exchange	AGWDataQ_5_18	queue	data_18	[]
AGW5	exchange	AGWDataQ_5_19	queue	data_19	[]
AGW5	exchange	AGWDataQ_5_2	queue	data_2	[]
AGW5	exchange	AGWDataQ_5_20	queue	data_20	[]
AGW5	exchange	AGWDataQ_5_21	queue	data_21	[]
AGW5	exchange	AGWDataQ_5_22	queue	data_22	[]
AGW5	exchange	AGWDataQ_5_23	queue	data_23	[]
AGW5	exchange	AGWDataQ_5_24	queue	data_24	[]
AGW5	exchange	AGWDataQ_5_25	queue	data_25	[]
AGW5	exchange	AGWDataQ_5_26	queue	data_26	[]
AGW5	exchange	AGWDataQ_5_27	queue	data_27	[]
AGW5	exchange	AGWDataQ_5_28	queue	data_28	[]
AGW5	exchange	AGWDataQ_5_29	queue	data_29	[]
AGW5	exchange	AGWDataQ_5_3	queue	data_3	[]
AGW5	exchange	AGWDataQ_5_30	queue	data_30	[]
AGW5	exchange	AGWDataQ_5_31	queue	data_31	[]
AGW5	exchange	AGWDataQ_5_4	queue	data_4	[]
AGW5	exchange	AGWDataQ_5_5	queue	data_5	[]
AGW5	exchange	AGWDataQ_5_6	queue	data_6	[]
AGW5	exchange	AGWDataQ_5_7	queue	data_7	[]
AGW5	exchange	AGWDataQ_5_8	queue	data_8	[]
AGW5	exchange	AGWDataQ_5_9	queue	data_9	[]
AGW5	exchange	AGWNotificationQ_5_0	queue	notify_0	[]
AGW5	exchange	AGWNotificationQ_5_1	queue	notify_1	[]
AGW5	exchange	AGWNotificationQ_5_10	queue	notify_10	[]
AGW5	exchange	AGWNotificationQ_5_11	queue	notify_11	[]
AGW5	exchange	AGWNotificationQ_5_12	queue	notify_12	[]
AGW5	exchange	AGWNotificationQ_5_13	queue	notify_13	[]
AGW5	exchange	AGWNotificationQ_5_14	queue	notify_14	[]
AGW5	exchange	AGWNotificationQ_5_15	queue	notify_15	[]
AGW5	exchange	AGWNotificationQ_5_16	queue	notify_16	[]
AGW5	exchange	AGWNotificationQ_5_17	queue	notify_17	[]
AGW5	exchange	AGWNotificationQ_5_18	queue	notify_18	[]
AGW5	exchange	AGWNotificationQ_5_19	queue	notify_19	[]
AGW5	exchange	AGWNotificationQ_5_2	queue	notify_2	[]
AGW5	exchange	AGWNotificationQ_5_20	queue	notify_20	[]
AGW5	exchange	AGWNotificationQ_5_21	queue	notify_21	[]
AGW5	exchange	AGWNotificationQ_5_22	queue	notify_22	[]
AGW5	exchange	AGWNotificationQ_5_23	queue	notify_23	[]
AGW5	exchange	AGWNotificationQ_5_24	queue	notify_24	[]
AGW5	exchange	AGWNotificationQ_5_25	queue	notify_25	[]
AGW5	exchange	AGWNotificationQ_5_26	queue	notify_26	[]
AGW5	exchange	AGWNotificationQ_5_27	queue	notify_27	[]
AGW5	exchange	AGWNotificationQ_5_28	queue	notify_28	[]
AGW5	exchange	AGWNotificationQ_5_29	queue	notify_29	[]
AGW5	exchange	AGWNotificationQ_5_3	queue	notify_3	[]
AGW5	exchange	AGWNotificationQ_5_30	queue	notify_30	[]
AGW5	exchange	AGWNotificationQ_5_31	queue	notify_31	[]
AGW5	exchange	AGWNotificationQ_5_4	queue	notify_4	[]
AGW5	exchange	AGWNotificationQ_5_5	queue	notify_5	[]
AGW5	exchange	AGWNotificationQ_5_6	queue	notify_6	[]
AGW5	exchange	AGWNotificationQ_5_7	queue	notify_7	[]
AGW5	exchange	AGWNotificationQ_5_8	queue	notify_8	[]
AGW5	exchange	AGWNotificationQ_5_9	queue	notify_9	[]
AGWHB	exchange	AGW2FMHBQ	queue		[]
AVSHB	exchange	AVS2FMHBQ	queue		[]
CMHB	exchange	CM2AGWHBQ1	queue		[]
CMHB	exchange	CM2AGWHBQ2	queue		[]
CMHB	exchange	CM2AGWHBQ3	queue		[]
CMHB	exchange	CM2AGWHBQ4	queue		[]
CMHB	exchange	CM2AGWHBQ5	queue		[]
CMHB	exchange	CM2FMHBQ	queue		[]
FM	exchange	AGW2FMData_12345_0	queue	12345_0	[]
FM	exchange	AGW2FMData_12345_1	queue	12345_1	[]
FM	exchange	AGW2FMData_12345_10	queue	12345_10	[]
FM	exchange	AGW2FMData_12345_11	queue	12345_11	[]
FM	exchange	AGW2FMData_12345_12	queue	12345_12	[]
FM	exchange	AGW2FMData_12345_13	queue	12345_13	[]
FM	exchange	AGW2FMData_12345_14	queue	12345_14	[]
FM	exchange	AGW2FMData_12345_15	queue	12345_15	[]
FM	exchange	AGW2FMData_12345_16	queue	12345_16	[]
FM	exchange	AGW2FMData_12345_17	queue	12345_17	[]
FM	exchange	AGW2FMData_12345_18	queue	12345_18	[]
FM	exchange	AGW2FMData_12345_19	queue	12345_19	[]
FM	exchange	AGW2FMData_12345_2	queue	12345_2	[]
FM	exchange	AGW2FMData_12345_20	queue	12345_20	[]
FM	exchange	AGW2FMData_12345_21	queue	12345_21	[]
FM	exchange	AGW2FMData_12345_22	queue	12345_22	[]
FM	exchange	AGW2FMData_12345_23	queue	12345_23	[]
FM	exchange	AGW2FMData_12345_24	queue	12345_24	[]
FM	exchange	AGW2FMData_12345_25	queue	12345_25	[]
FM	exchange	AGW2FMData_12345_26	queue	12345_26	[]
FM	exchange	AGW2FMData_12345_27	queue	12345_27	[]
FM	exchange	AGW2FMData_12345_28	queue	12345_28	[]
FM	exchange	AGW2FMData_12345_29	queue	12345_29	[]
FM	exchange	AGW2FMData_12345_3	queue	12345_3	[]
FM	exchange	AGW2FMData_12345_30	queue	12345_30	[]
FM	exchange	AGW2FMData_12345_31	queue	12345_31	[]
FM	exchange	AGW2FMData_12345_4	queue	12345_4	[]
FM	exchange	AGW2FMData_12345_5	queue	12345_5	[]
FM	exchange	AGW2FMData_12345_6	queue	12345_6	[]
FM	exchange	AGW2FMData_12345_7	queue	12345_7	[]
FM	exchange	AGW2FMData_12345_8	queue	12345_8	[]
FM	exchange	AGW2FMData_12345_9	queue	12345_9	[]
FM	exchange	FMControlQ	queue	ctrl	[]
FMHB	exchange	FM2AGWHBQ1	queue		[]
FMHB	exchange	FM2AGWHBQ2	queue		[]
FMHB	exchange	FM2AGWHBQ3	queue		[]
FMHB	exchange	FM2AGWHBQ4	queue		[]
FMHB	exchange	FM2AGWHBQ5	queue		[]

Consumers on /:
queue_name	channel_pid	consumer_tag	ack_required
AGW2FMData_12345_0	<rabbit at katlabucs6.1.2544.0>
amq.ctag-GObbqmJSmYxJ_krt27Y3YQ	false
AGW2FMData_12345_1	<rabbit at katlabucs6.1.2565.0>
amq.ctag-elDDJMc0YP5MTrFV7Wn4kw	false
AGW2FMData_12345_10	<rabbit at katlabucs6.1.2633.0>
amq.ctag-W3337GOSL-RNzvbgrM4jPg	false
AGW2FMData_12345_11	<rabbit at katlabucs6.1.2626.0>
amq.ctag-gVdFCn4VGhokr4LXceNtfw	false
AGW2FMData_12345_12	<rabbit at katlabucs6.1.2641.0>
amq.ctag-IeK3JvSZxjeFWTazbVR_TA	false
AGW2FMData_12345_13	<rabbit at katlabucs6.1.2637.0>
amq.ctag-eY2NME6fQGTKGKPZKR1jKQ	false
AGW2FMData_12345_14	<rabbit at katlabucs6.1.2648.0>
amq.ctag-HHAu2G9mHI9dSM5YOOsiBQ	false
AGW2FMData_12345_15	<rabbit at katlabucs6.1.2710.0>
amq.ctag-IElGAFlI9j9rj6bUPFLzXQ	false
AGW2FMData_12345_16	<rabbit at katlabucs6.1.2703.0>
amq.ctag-vjl2wtjRJXZIsrLErGFcUA	false
AGW2FMData_12345_17	<rabbit at katlabucs6.1.2693.0>
amq.ctag-0e7shxHViK7sYcqJwFcUwQ	false
AGW2FMData_12345_18	<rabbit at katlabucs6.1.2732.0>
amq.ctag-3SospznnvIcjYjxwYNQbtw	false
AGW2FMData_12345_19	<rabbit at katlabucs6.1.2752.0>
amq.ctag-1FleTc4giaDugG03I0KGJQ	false
AGW2FMData_12345_2	<rabbit at katlabucs6.1.2560.0>
amq.ctag-0wWDQE_pBF7c715hWtZWaw	false
AGW2FMData_12345_20	<rabbit at katlabucs6.1.2747.0>
amq.ctag-5eXItkkar0uwcq1l1c6DjQ	false
AGW2FMData_12345_21	<rabbit at katlabucs6.1.2769.0>
amq.ctag-tEcVOFh-Qp1iA7GE7e4NMg	false
AGW2FMData_12345_22	<rabbit at katlabucs6.1.2785.0>
amq.ctag-A-aRBAR9LfTco2hgdLOa0w	false
AGW2FMData_12345_23	<rabbit at katlabucs6.1.2792.0>
amq.ctag-GXHGUKHY89sEzc_qVdrdSQ	false
AGW2FMData_12345_24	<rabbit at katlabucs6.1.2818.0>
amq.ctag-zIeRmB6zSlmkfeH8mNUhoQ	false
AGW2FMData_12345_25	<rabbit at katlabucs6.1.2829.0>
amq.ctag-GJ4XpHAlpbdTK6K8o74fRQ	false
AGW2FMData_12345_26	<rabbit at katlabucs6.1.2837.0>
amq.ctag-AfYcAydFlQJBJr-RcWHvkw	false
AGW2FMData_12345_27	<rabbit at katlabucs6.1.2840.0>
amq.ctag-wXrhTZBXvJ4gVR7J1zSx7A	false
AGW2FMData_12345_28	<rabbit at katlabucs6.1.2858.0>
amq.ctag-slrcDE4xlssn_lyG0sedYA	false
AGW2FMData_12345_29	<rabbit at katlabucs6.1.2864.0>
amq.ctag-4SZNURIza-X6dMFVc4QaDg	false
AGW2FMData_12345_3	<rabbit at katlabucs6.1.2559.0>
amq.ctag-gmu69tRCP0k7JA2hVKURTQ	false
AGW2FMData_12345_30	<rabbit at katlabucs6.1.2877.0>
amq.ctag-Za_Pb1BdVdhaV2qtDKHO-A	false
AGW2FMData_12345_31	<rabbit at katlabucs6.1.2886.0>
amq.ctag-wtKVKhuWT2l7m5jgcybvFA	false
AGW2FMData_12345_4	<rabbit at katlabucs6.1.2588.0>
amq.ctag-EXARYur6KB3_o0JhQAdUGg	false
AGW2FMData_12345_5	<rabbit at katlabucs6.1.2589.0>
amq.ctag-1BWDr7m0Kou5UBlFITPehw	false
AGW2FMData_12345_6	<rabbit at katlabucs6.1.2581.0>
amq.ctag-ZtLJJTbV--lJGxUjC7sJ7g	false
AGW2FMData_12345_7	<rabbit at katlabucs6.1.2606.0>
amq.ctag-KLmVItkxhLqOPnbCQ4FVKw	false
AGW2FMData_12345_8	<rabbit at katlabucs6.1.2605.0>
amq.ctag-kv1LTiG2tN67_OASlE6cVg	false
AGW2FMData_12345_9	<rabbit at katlabucs6.1.2625.0>
amq.ctag-v4WhQfEoCFGoiSmLM7tgHg	false
AGW2FMHBQ	<rabbit at katlabucs6.1.2462.0>	amq.ctag--73LhUHIwx2QDFRlTtF-Tw	true
AGWControlQ1	<rabbit at katlabucs6.1.811.0>	amq.ctag-E_sQNgErFIKWTNhNj8TW9w
true
AGWControlQ2	<rabbit at katlabucs6.1.1119.0>	amq.ctag-UhBkzo2KDtO23chdIoaKQg
true
AGWControlQ3	<rabbit at katlabucs6.1.1500.0>	amq.ctag-Ald8ZIBheTUpJ5eyndEfTA
true
AGWControlQ4	<rabbit at katlabucs6.1.1851.0>	amq.ctag-EU2wFImt-45T0EKv_m5SBQ
true
AGWControlQ5	<rabbit at katlabucs6.1.2232.0>	amq.ctag-UVuNkvVmGZK0NmXWmNczGg
true
AVS2FMHBQ	<rabbit at katlabucs6.1.2454.0>	amq.ctag-Cf37OuexYevqmDolR8CJ0g	true
CM2AGWHBQ1	<rabbit at katlabucs6.1.803.0>	amq.ctag-v0VeMt5-6PKRG_pSYF145w	true
CM2AGWHBQ2	<rabbit at katlabucs6.1.1115.0>	amq.ctag-tQLZx7u0TZQ0vWT0ocdvgw	true
CM2AGWHBQ3	<rabbit at katlabucs6.1.1496.0>	amq.ctag-TfbNy6V0JrkE2UDPIgfLiA	true
CM2AGWHBQ4	<rabbit at katlabucs6.1.1847.0>	amq.ctag-ztUBIpv_q16On1nsRn-kVA	true
CM2AGWHBQ5	<rabbit at katlabucs6.1.2228.0>	amq.ctag-s6YtHaSxDbKdJ_ACheMj-Q	true
CM2FMHBQ	<rabbit at katlabucs6.1.2466.0>	amq.ctag-chj5Tv6_280Gkop4--PmfQ	true
FM2AGWHBQ1	<rabbit at katlabucs6.1.783.0>	amq.ctag-OjKYp3dFyAj9cV3_xzqOxQ	true
FM2AGWHBQ2	<rabbit at katlabucs6.1.1095.0>	amq.ctag-hhxXISY4EgCAcPpwzxKWkQ	true
FM2AGWHBQ3	<rabbit at katlabucs6.1.1492.0>	amq.ctag-JPKA5GiGdj597EcD4jQ1cg	true
FM2AGWHBQ4	<rabbit at katlabucs6.1.1843.0>	amq.ctag-eya7FScOev3Q1VxXqKpxGQ	true
FM2AGWHBQ5	<rabbit at katlabucs6.1.2224.0>	amq.ctag-nfDP8W_DicdJCpI49xfMFg	true
FMControlQ	<rabbit at katlabucs6.1.2458.0>	amq.ctag-pZgr52C-0OjrdyI7URThjA	true

Permissions on /:
user	configure	write	read
guest	.*	.*	.*

Policies on /:

Parameters on /:

...done.




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28196.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Fri Jul 19 10:24:39 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 19 Jul 2013 10:24:39 +0100
Subject: [rabbitmq-discuss] -setcookie flag
In-Reply-To: <CAGxg=6uzvCcCJQjyh9xy-r6d9b6=J9N6+k_KtycCKHDmfBfH0Q@mail.gmail.com>
References: <CAGxg=6uzvCcCJQjyh9xy-r6d9b6=J9N6+k_KtycCKHDmfBfH0Q@mail.gmail.com>
Message-ID: <51E905D7.1050108@rabbitmq.com>

On 19/07/13 01:02, Bipul Dutta wrote:

> Whatever I do, erlang creates a new .erlang.cookie file with a 
> different value in the user's home directory.

It works for me if I define the following variable in the startup
environment:

 RABBITMQ_SERVER_START_ARGS='-setcookie xyzzy'

If the Erlang VM is started up with "-setcookie" flag then it will not
write a random cookie to the home directory. You can confirm the current
cookie hash from the broker log. In my test case it contains

 cookie hash    : EnHtXvMFqtq8YFsWCeJMUg==

The hash is obtained from a base64 encoding of the MD5 hash of the cookie.

> Additionally what is the user home if RabbitMQ runs as a windows service
> as "Local System" user?

It should be %WINDIR%. You can get the home location with this command:

 rabbitmqctl eval 'init:get_argument(home).'

You must have access to the cookie of the running broker to be able to
execute rabbitmqctl commands though.





-Emile








From matthias at rabbitmq.com  Fri Jul 19 10:32:44 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 10:32:44 +0100
Subject: [rabbitmq-discuss] -setcookie flag
In-Reply-To: <51E905D7.1050108@rabbitmq.com>
References: <CAGxg=6uzvCcCJQjyh9xy-r6d9b6=J9N6+k_KtycCKHDmfBfH0Q@mail.gmail.com>
	<51E905D7.1050108@rabbitmq.com>
Message-ID: <51E907BC.7000308@rabbitmq.com>

On 19/07/13 10:24, Emile Joubert wrote:
> You can get the home location with this command:
>
>   rabbitmqctl eval 'init:get_argument(home).'

The location of the home dir is also written to the log file on startup.

Matthias.

From matthias at rabbitmq.com  Fri Jul 19 10:47:03 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 10:47:03 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374225457778-28196.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
Message-ID: <51E90B17.7000803@rabbitmq.com>

On 19/07/13 10:17, rabbit15 wrote:
> Hi, I made test with my buffer and without. Both was with watermark 100
> When I used my buffer and there wasn't queued messages there was speed about
> 150 mes/sec. When there wasn't my buffer I can show you how it was on the
> image.
> <http://rabbitmq.1065348.n5.nabble.com/file/n28196/RepoWithoutBuf.png>
> When there was buffer :
> <http://rabbitmq.1065348.n5.nabble.com/file/n28196/RepoBuf.png>

What happened to the consumers in the first graph?

Memory allocation takes time. When a queue has consumers that nearly 
keep up, as in your second graph, then it grows very slowly and hence 
the rate of memory allocation is low. Therefore such a queue may be able 
to process publishes at a higher rate than an equivalent queue with 
now/slower consumers.

Matthias.

From matthias at rabbitmq.com  Fri Jul 19 10:50:37 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 10:50:37 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51E90B17.7000803@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com>
Message-ID: <51E90BED.9050603@rabbitmq.com>

On 19/07/13 10:47, Matthias Radestock wrote:
> What happened to the consumers in the first graph?
>
> Memory allocation takes time. When a queue has consumers that nearly
> keep up, as in your second graph, then it grows very slowly and hence
> the rate of memory allocation is low. Therefore such a queue may be able
> to process publishes at a higher rate than an equivalent queue with
> now/slower consumers.

And, btw, the rabbitmqctl report indicates that there is *no paging* 
taking place. So whatever behavioural oddities you are seeing, are not 
due to that.

Matthias.

From emile at rabbitmq.com  Fri Jul 19 11:58:40 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 19 Jul 2013 11:58:40 +0100
Subject: [rabbitmq-discuss] Odd behavoiur with mcollective and RabbitMQ
 3.1.3
In-Reply-To: <7afd49b3-f00a-4d9f-a203-a7d604d22cf1@googlegroups.com>
References: <7afd49b3-f00a-4d9f-a203-a7d604d22cf1@googlegroups.com>
Message-ID: <51E91BE0.40206@rabbitmq.com>


Hi Niclas,

Thanks for reporting this issue.

On 19/07/13 08:09, Niclas Meier wrote:

> Fortunately I found an "old" 3.0.1 Rabbit MQ installation on one of our
> servers and on this version mcollecive works like before

Are you sure it actually used to work? After trying the same on RabbitMQ
3.0.1 I see on the STOMP port a SUBSCRIBE to
 /topic/mcollective.discovery.reply
and a SEND to
 /topic/mcollective.discovery.command
The topics don't match so no message is delivered.
The "mco ping" command returns :

---- ping statistics ----
No responses received

That doesn't look like it's working to me. Tested with mcollective 2.2.4
and stomp gem 1.2.10.


> Additionally I have stuff like this in the sasl log:
> 
> =SUPERVISOR REPORT==== 19-Jul-2013::07:57:23 ===
>      Supervisor: {<0.570.0>,rabbit_stomp_client_sup}
>      Context:    shutdown
>      Reason:     reached_max_restart_intensity


I don't see this. I see the same STOMP dialogue and the same failure to
match SUBSCRIBE and SEND topics. Is there anything in the regular broker
log, or any errors before the one you quoted?

The only changes to the RabbitMQ STOMP adapter since 3.0.1 was to relax
the rules about header values containing colons, changes to the way
"/reply-queue" is prefixed when using temporary destinations, neither of
which is relevant.

If you think the STOMP adapter is in violation of the spec then can you
supply a network packet trace of the interaction that I can replay to
confirm?





-Emile






From Alvaro.Fernandez at ific.uv.es  Fri Jul 19 12:22:09 2013
From: Alvaro.Fernandez at ific.uv.es (Alvaro Fernandez Casani)
Date: Fri, 19 Jul 2013 13:22:09 +0200
Subject: [rabbitmq-discuss] problem building Documentation - release 3.1.3
Message-ID: <51E92161.7030203@ific.uv.es>

Hello,

in the process of installing the release 3.1.3, it builds the 
documentation, but fails in my Ubuntu box:

$sudo make   install SBIN_DIR=/usr/sbin 
TARGET_DIR=/var/lib/rabbitmq-server MAN_DIR=/usr/local/man

xmlto --version | grep -E '^xmlto version 0\.0\.([0-9]|1[1-8])$' 
 >/dev/null || opt='--stringparam man.indent.verbatims=0' ; \
         xsltproc --novalid docs/examples-to-end.xsl 
docs/rabbitmqctl.1.xml > docs/rabbitmqctl.1.xml.tmp && \
         xmlto -o docs $opt man docs/rabbitmqctl.1.xml.tmp && \
         gzip -f docs/`basename docs/rabbitmqctl.1.xml .xml`
Note: Writing rabbitmqctl.1
make: *** [docs/rabbitmqctl.1.gz] Error 1

If I try the command outside make it works. any hint?

cheers,
A.



+++-=================================-=================================-==================================================================================
ii  gzip 1.4-1ubuntu2                      GNU compression utilities
ii  make 3.81-8.1ubuntu1.1                 An utility for Directing 
compilation.
ii  xmlto 0.0.25-1                          XML-to-any converter
ii  xsltproc 1.1.26-8ubuntu1.3                 XSLT 1.0 command line 
processor


From lrodriguez1995 at yahoo.com  Fri Jul 19 12:27:52 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 19 Jul 2013 04:27:52 -0700 (PDT)
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
	''rabbitmq" not found"
In-Reply-To: <CAE3HoVQPcqKV8Fy1dj+Ru+Dt-w9z5WPU5uxY-z0uc6vhydzDgw@mail.gmail.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
	<1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
	<CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>
	<1374195281.92510.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQPcqKV8Fy1dj+Ru+Dt-w9z5WPU5uxY-z0uc6vhydzDgw@mail.gmail.com>
Message-ID: <1374233272.5534.YahooMailNeo@web141101.mail.bf1.yahoo.com>

Thanks for your suggestion..
after purging, removing, and reinstalling, the newer version of RABBITMQ (3.1.3) installs , but the same error shows..(pic)
I redid this process twice once I got this error(uninstalled purged, ) but the error still persists...
any ideas on what I'm missing ?

thanks again for your help

Luis




________________________________
 From: Michael Klishin <michael.s.klishin at gmail.com>
To: Luis Rodriguez <lrodriguez1995 at yahoo.com>; Discussions about RabbitMQ <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Thursday, July 18, 2013 9:30 PM
Subject: Re: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user ''rabbitmq" not found"
 




2013/7/19 Luis Rodriguez <lrodriguez1995 at yahoo.com>

when I tried reinstalling I am getting an error I have never seen before..
>In addition there is nothing on the startup_err log (only a sentence "failed to start rabbitmq")
>any suggestions?
Note that it is trying to set up RabbitMQ 2.7.1 (presumably the version in your Debian release)
after downloading 3.1.3.


Try uninstalling and purging the package. apt-get lets you install a particular version,
too.-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/f0e9ca69/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: init5.png
Type: image/png
Size: 71199 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/f0e9ca69/attachment.png>

From matthias at rabbitmq.com  Fri Jul 19 12:28:15 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 12:28:15 +0100
Subject: [rabbitmq-discuss] How to identify connection?
In-Reply-To: <CANV4tdVFhVgOh7GArzmmfYqNMZB5TCf5juKNz=WSPDX=_31Gdw@mail.gmail.com>
References: <ce281d24-55f6-40c4-9cbb-55edba0fd884@googlegroups.com>
	<51B192D3.7020506@rabbitmq.com>
	<CANV4tdVvtpdGR==YDhoZ_jac4PP0hY8uyRWaavNFx=sz2+JKbw@mail.gmail.com>
	<51B5F0E4.4070608@rabbitmq.com>
	<CANV4tdUPCc-Ds28E_6_0tKzbNH3NVi7CbSCiJgcvvAZiOGCWsQ@mail.gmail.com>
	<51E8052E.5010808@rabbitmq.com>
	<CANV4tdVDoGd+PgJZxsFCVqAGGCTLup30VTjT-oEMV=HCnJBn4w@mail.gmail.com>
	<51E80FE8.8000405@rabbitmq.com>
	<CANV4tdVFhVgOh7GArzmmfYqNMZB5TCf5juKNz=WSPDX=_31Gdw@mail.gmail.com>
Message-ID: <51E922CF.6000902@rabbitmq.com>

On 19/07/13 06:33, ????? ??????? wrote:
> I have last one question, it seems, that this bug has low priority and
> it won't be fixed soon.

It's not a bug, but a feature request :)

> Can I do pull request to fix this bug?

Certainly, but we cannot promise to review & merge it promptly.

Matthias.

From bison_art at o2.pl  Fri Jul 19 12:54:20 2013
From: bison_art at o2.pl (rabbit15)
Date: Fri, 19 Jul 2013 04:54:20 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51E90BED.9050603@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
Message-ID: <1374234860503-28205.post@n5.nabble.com>

Hi on the first graph there is a consumer but it is not consuming the
messages. You can see that producer slowing down, on the second there is a
buffer which prevents from slowing down. I don't tell you what is wrong. I
see that there is less speed during the test in the first case.

Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28205.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Fri Jul 19 12:59:40 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 12:59:40 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374234860503-28205.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374234860503-28205.post@n5.nabble.com>
Message-ID: <51E92A2C.5000203@rabbitmq.com>

On 19/07/13 12:54, rabbit15 wrote:
> Hi on the first graph there is a consumer but it is not consuming the
> messages.

Do you know why the consumer is not consuming messages?

> I see that there is less speed during the test in the first case.

As I explained, that's because no messages are getting consumed, so 
there is a higher rate of memory allocation.

Matthias.

From michael.s.klishin at gmail.com  Fri Jul 19 13:04:59 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 19 Jul 2013 16:04:59 +0400
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
 ''rabbitmq" not found"
In-Reply-To: <1374233272.5534.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
	<1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
	<CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>
	<1374195281.92510.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQPcqKV8Fy1dj+Ru+Dt-w9z5WPU5uxY-z0uc6vhydzDgw@mail.gmail.com>
	<1374233272.5534.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <CAE3HoVS67-ySV7wOvj8ws-udU3VFUhG14DQxgSq39q7oACrTcw@mail.gmail.com>

2013/7/19 Luis Rodriguez <lrodriguez1995 at yahoo.com>

> the error still persists



Did you inspect the log? In fact, is there any log files at all?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/abaa4179/attachment.htm>

From lrodriguez1995 at yahoo.com  Fri Jul 19 14:01:48 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 19 Jul 2013 06:01:48 -0700 (PDT)
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
	''rabbitmq" not found"
In-Reply-To: <CAE3HoVS67-ySV7wOvj8ws-udU3VFUhG14DQxgSq39q7oACrTcw@mail.gmail.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
	<1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
	<CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>
	<1374195281.92510.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQPcqKV8Fy1dj+Ru+Dt-w9z5WPU5uxY-z0uc6vhydzDgw@mail.gmail.com>
	<1374233272.5534.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<CAE3HoVS67-ySV7wOvj8ws-udU3VFUhG14DQxgSq39q7oACrTcw@mail.gmail.com>
Message-ID: <1374238908.81568.YahooMailNeo@web141101.mail.bf1.yahoo.com>

my startup_log only shows one line:
error:epmd error for host "test1": timeout (timed out)
my startup_err is blank...

......finally I got it working..
it was the hosts file (the ip address for my localhost was wrong )


thank you for following up


Luis






________________________________
 From: Michael Klishin <michael.s.klishin at gmail.com>
To: Luis Rodriguez <lrodriguez1995 at yahoo.com>; "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Friday, July 19, 2013 8:04 AM
Subject: Re: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user ''rabbitmq" not found"
 




2013/7/19 Luis Rodriguez <lrodriguez1995 at yahoo.com>

the error still persists

Did you inspect the log? In fact, is there any log files at all?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/d5715bda/attachment.htm>

From michael.s.klishin at gmail.com  Fri Jul 19 14:11:17 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Fri, 19 Jul 2013 17:11:17 +0400
Subject: [rabbitmq-discuss] amazon EC2 instance "start-stop-daemon:user
 ''rabbitmq" not found"
In-Reply-To: <1374238908.81568.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1374174307.83018.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQdQmxEA5mLCwATkk6PPJrLPYDezkCeS1qoObMAdgn9Ag@mail.gmail.com>
	<1374175186.40175.YahooMailNeo@web141106.mail.bf1.yahoo.com>
	<CAE3HoVRh4=kKvCaDyJxsTZuE+XOnPGvFbaeQZD2Q75x_yLfhEQ@mail.gmail.com>
	<1374177354.42143.YahooMailNeo@web141103.mail.bf1.yahoo.com>
	<CAE3HoVQG82Q6_1UOfG4nmTksFP_ToUkE2QsNosM0kMEW0Up2kw@mail.gmail.com>
	<1374195281.92510.YahooMailNeo@web141105.mail.bf1.yahoo.com>
	<CAE3HoVQPcqKV8Fy1dj+Ru+Dt-w9z5WPU5uxY-z0uc6vhydzDgw@mail.gmail.com>
	<1374233272.5534.YahooMailNeo@web141101.mail.bf1.yahoo.com>
	<CAE3HoVS67-ySV7wOvj8ws-udU3VFUhG14DQxgSq39q7oACrTcw@mail.gmail.com>
	<1374238908.81568.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <CAE3HoVQGE_F65DWPfGDgWoXpNQF0j6c3FW25x7CUNsLdpD34QQ@mail.gmail.com>

2013/7/19 Luis Rodriguez <lrodriguez1995 at yahoo.com>

> error:epmd error for host "test1": timeout (timed out)


See https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/653405
and http://codingiscoding.wordpress.com/2011/04/17/rabbitmq-on-os-x/.

Your hostname (test1) does not resolve.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/86664f00/attachment.htm>

From lrodriguez1995 at yahoo.com  Fri Jul 19 16:32:54 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Fri, 19 Jul 2013 08:32:54 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-server runlevel arguments do not match
	LSB default-start values
Message-ID: <1374247974.5756.YahooMailNeo@web141101.mail.bf1.yahoo.com>

Dear all,
I am running an ubuntu machine with erl R16B and rabbitmq (3.1.3)..
I am trying to get it setup to autostart once the vm fires up..
after running the update-rc.d rabbitmq-server defaults I am getting:

warning:rabbitmq-server start runlevel arguments (2 3 4 5) do not match LSB default-start values (3 4 5)
warning:rabbitmq-server start runlevel arguments (0 1 6) do not match LSB default-stop values (0 1 2 6 )

I made sure to turn off runlevel 2? (chkconfig --level 2 rabbitmq-server off ) to match the default start values (pic)
but I still need to manually start rabbitmq once I reboot..

any help would be greatly appreciated..

Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/0769fed6/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: init6.png
Type: image/png
Size: 74182 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/0769fed6/attachment.png>

From dpolist at crivotransunion.com.br  Fri Jul 19 19:16:15 2013
From: dpolist at crivotransunion.com.br (Polistchuck, Daniel A)
Date: Fri, 19 Jul 2013 18:16:15 +0000
Subject: [rabbitmq-discuss] Stuck on shutdown
Message-ID: <D693F7E3A283284899617D6DB76E237B1D2104FD@CHO3WUC9MBX14.corp.transunion.com>

Dear Friends,

I was stuck on a "service rabbitmq-server stop" command for more than 10 minutes. Does anybody know what could've gone wrong? We decided to "kill -9" all related process. Are we in risk of not getting our queues states back when we start it back up?

Best regards,

Daniel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/69de537a/attachment.htm>

From francois.beausoleil at gmail.com  Fri Jul 19 21:03:32 2013
From: francois.beausoleil at gmail.com (=?iso-8859-1?Q?Fran=E7ois_Beausoleil?=)
Date: Fri, 19 Jul 2013 16:03:32 -0400
Subject: [rabbitmq-discuss] Best Practices on using Channels?
Message-ID: <E3DCDDAD-1242-420C-B685-9F0C033E0243@gmail.com>

I'm currently using two connections to RabbitMQ: one for consumers, one for publishers. This is to prevent throttling when the RabbitMQ instance triggers it's memory alarm.

What about using channels? One channel per connection, or one channel per queue/exchange, or a mix? I realize this is similar to the green thread vs os threads in managed VMs. Are there advantages of one over the other?

Thanks,
Fran?ois Beausoleil

From goyalk at vmware.com  Fri Jul 19 22:00:28 2013
From: goyalk at vmware.com (Kapil Goyal)
Date: Fri, 19 Jul 2013 14:00:28 -0700 (PDT)
Subject: [rabbitmq-discuss] How to keep-alive a purely receiving connection?
Message-ID: <814c3877.0000100c.00000192@KAPILPC.vmware.com>

Hi,

 

We are using two connections, one for sending data and one for receiving.
We also want to utilize heartbeat functionality to keep the connections
alive. My question is about the receiving connection and heartbeat.

 

I understand that client must send some data (within heartbeat interval)
to RabbitMQ even on the receiving connection to keep it alive. Question
is,  if RabbitMQ starts blocking publishing connections during
flow-control, would it also block this receiving connection on a
heartbeat-publish?

 

Thanks

Kapil

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/15fbe568/attachment.htm>

From michael.laing at nytimes.com  Fri Jul 19 22:19:24 2013
From: michael.laing at nytimes.com (Laing, Michael)
Date: Fri, 19 Jul 2013 17:19:24 -0400
Subject: [rabbitmq-discuss] Best Practices on using Channels?
In-Reply-To: <E3DCDDAD-1242-420C-B685-9F0C033E0243@gmail.com>
References: <E3DCDDAD-1242-420C-B685-9F0C033E0243@gmail.com>
Message-ID: <CAKgmDnFo1WiN_27OHwN4oR_YfKACWCpiRWJqOC2RAuvW+evGtg@mail.gmail.com>

Hi Fran?ois,

I didn't see anyone else respond so I can tell you what we do.

There are lots of Quality of Service parameters set at the channel level.
Since we have a moderate and stable collection of long-lived
queues/exchanges, and long-lived connections for publishing/consuming, we
typically use a channel per, to allow flexibility re QoS.

One general rule is that a channel should be handled by only one thread. We
use asynch event loop processing so it is normally not an issue for us but
it may be for you.

For asynch RPC functionality we set up a reply_to queue and use the
correlation_id to disambiguate responses. Some people allocate a temporary
queue for this purpose - if you use that model, you would probably want the
temp queues in the same channel and they would then share the QoS
parameters.

Hope this helps,

Michael


On Fri, Jul 19, 2013 at 4:03 PM, Fran?ois Beausoleil <
francois.beausoleil at gmail.com> wrote:

> I'm currently using two connections to RabbitMQ: one for consumers, one
> for publishers. This is to prevent throttling when the RabbitMQ instance
> triggers it's memory alarm.
>
> What about using channels? One channel per connection, or one channel per
> queue/exchange, or a mix? I realize this is similar to the green thread vs
> os threads in managed VMs. Are there advantages of one over the other?
>
> Thanks,
> Fran?ois Beausoleil
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/c8f19524/attachment.htm>

From matthias at rabbitmq.com  Fri Jul 19 22:19:59 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 22:19:59 +0100
Subject: [rabbitmq-discuss] is a topic exchange _required_ for
	rabbitmq-mqtt?
In-Reply-To: <CANaOvh_ZNxjaN69Dbf8otMAeVP4heppUhb4+3sdCDEx21=UGJg@mail.gmail.com>
References: <CANaOvh-f+xo9u98COZzvro1qPWKuyD0w-6J6KzCHaxsjmM1Eyw@mail.gmail.com>
	<CANaOvh_ZNxjaN69Dbf8otMAeVP4heppUhb4+3sdCDEx21=UGJg@mail.gmail.com>
Message-ID: <51E9AD7F.5060907@rabbitmq.com>

David,

On 18/07/13 20:43, David van Geest wrote:
> With Rabbit's Exchange-to-Exchange bindings
> (http://www.rabbitmq.com/blog/2010/10/19/exchange-to-exchange-bindings/),
> it seems that MQTT messages could first go to a topic exchange, and
> then based on exchange-to-exchange bindings, be routed to a custom
> exchange (such as the random one above).
>
> Any reason this wouldn't work?  Am I really off in the weeds?

That should work just fine. Give it a try.

Matthias.


From matthias at rabbitmq.com  Fri Jul 19 22:22:49 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 22:22:49 +0100
Subject: [rabbitmq-discuss] problem building Documentation - release
	3.1.3
In-Reply-To: <51E92161.7030203@ific.uv.es>
References: <51E92161.7030203@ific.uv.es>
Message-ID: <51E9AE29.8010104@rabbitmq.com>

Alvaro,

On 19/07/13 12:22, Alvaro Fernandez Casani wrote:
> in the process of installing the release 3.1.3, it builds the
> documentation, but fails in my Ubuntu box:
> [...]

No idea what's going wrong there, but why are you building from source 
at all? Simply install the 3.1.3 debian package, as per 
http://www.rabbitmq.com/install-debian.html.


Regards,

Matthias.

From matthias at rabbitmq.com  Fri Jul 19 22:33:21 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 22:33:21 +0100
Subject: [rabbitmq-discuss] rabbitmq-server runlevel arguments do not
 match LSB default-start values
In-Reply-To: <1374247974.5756.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1374247974.5756.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <51E9B0A1.6030001@rabbitmq.com>

Luis,

On 19/07/13 16:32, Luis Rodriguez wrote:
> I am running an ubuntu machine with erl R16B and rabbitmq (3.1.3)..
> I am trying to get it setup to autostart once the vm fires up..

The default installation of the debian package should be all configured 
to do that already. Did you try that?

> I made sure to turn off runlevel 2  (chkconfig --level 2 rabbitmq-server off )

That's possibly what broke it, since 2 is the default runlevel of 
Debian/Ubuntu.

Matthias.

From davidv at spindance.com  Fri Jul 19 22:58:47 2013
From: davidv at spindance.com (David van Geest)
Date: Fri, 19 Jul 2013 17:58:47 -0400
Subject: [rabbitmq-discuss] is a topic exchange _required_ for
	rabbitmq-mqtt?
In-Reply-To: <51E9AD7F.5060907@rabbitmq.com>
References: <CANaOvh-f+xo9u98COZzvro1qPWKuyD0w-6J6KzCHaxsjmM1Eyw@mail.gmail.com>
	<CANaOvh_ZNxjaN69Dbf8otMAeVP4heppUhb4+3sdCDEx21=UGJg@mail.gmail.com>
	<51E9AD7F.5060907@rabbitmq.com>
Message-ID: <CANaOvh_aqosGsmWrW-xRN9htD=PAVGLqw18MjufonnHhLxUqYw@mail.gmail.com>

On Fri, Jul 19, 2013 at 5:19 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> David,
>
>
> On 18/07/13 20:43, David van Geest wrote:
>
>> With Rabbit's Exchange-to-Exchange bindings
>> (http://www.rabbitmq.com/blog/**2010/10/19/exchange-to-**
>> exchange-bindings/<http://www.rabbitmq.com/blog/2010/10/19/exchange-to-exchange-bindings/>
>> ),
>> it seems that MQTT messages could first go to a topic exchange, and
>> then based on exchange-to-exchange bindings, be routed to a custom
>> exchange (such as the random one above).
>>
>> Any reason this wouldn't work?  Am I really off in the weeds?
>>
>
> That should work just fine. Give it a try.
>
>
Matthias, thanks for the reply.

My preference is going to be just using straight AMQP without MQTT, so if
we can get that going on our embedded client I don't think I'll go down
this path too far. I'm a little concerned about the performance
implications of throwing two layers (the MQTT adapter and a topic exchange)
in front of what I really want, which is the random exchange.  Everything
I've read suggests that topic exchanges are the slowest type (correct me if
I'm wrong here).

I will post back if we end up giving this a try.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/80390e2e/attachment.htm>

From matthias at rabbitmq.com  Fri Jul 19 23:08:44 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 19 Jul 2013 23:08:44 +0100
Subject: [rabbitmq-discuss] is a topic exchange _required_ for
	rabbitmq-mqtt?
In-Reply-To: <CANaOvh_aqosGsmWrW-xRN9htD=PAVGLqw18MjufonnHhLxUqYw@mail.gmail.com>
References: <CANaOvh-f+xo9u98COZzvro1qPWKuyD0w-6J6KzCHaxsjmM1Eyw@mail.gmail.com>
	<CANaOvh_ZNxjaN69Dbf8otMAeVP4heppUhb4+3sdCDEx21=UGJg@mail.gmail.com>
	<51E9AD7F.5060907@rabbitmq.com>
	<CANaOvh_aqosGsmWrW-xRN9htD=PAVGLqw18MjufonnHhLxUqYw@mail.gmail.com>
Message-ID: <51E9B8EC.2060405@rabbitmq.com>

David,

On 19/07/13 22:58, David van Geest wrote:
>   Everything I've read suggests that topic exchanges are the slowest
> type (correct me if I'm wrong here).

They are, but they are not *that* slow, and the speed very much depends 
on the composition and number of bindings.

Matthias.

From goyalk at vmware.com  Fri Jul 19 23:52:51 2013
From: goyalk at vmware.com (Kapil Goyal)
Date: Fri, 19 Jul 2013 15:52:51 -0700 (PDT)
Subject: [rabbitmq-discuss] auto-delete connections?
Message-ID: <968e9363.0000100c.00000198@KAPILPC.vmware.com>

Hi,

 

Is there a way to tell RabbitMQ to drop all connections from a user when
the user is deleted from RabbitMQ?

 

Thanks
Kapil

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/3b66050c/attachment.htm>

From matthias at rabbitmq.com  Sat Jul 20 00:03:31 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sat, 20 Jul 2013 00:03:31 +0100
Subject: [rabbitmq-discuss] auto-delete connections?
In-Reply-To: <968e9363.0000100c.00000198@KAPILPC.vmware.com>
References: <968e9363.0000100c.00000198@KAPILPC.vmware.com>
Message-ID: <51E9C5C3.6060305@rabbitmq.com>

On 19/07/13 23:52, Kapil Goyal wrote:
> Is there a way to tell RabbitMQ to drop all connections from a user when
> the user is deleted from RabbitMQ?

for conn in `rabbitmqctl list_connections -q user pid | grep -e "^guest 
" | cut -f 2`; do rabbitmqctl close_connection  ${conn} bye; done

Matthias.

From matthias at rabbitmq.com  Sat Jul 20 00:07:34 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sat, 20 Jul 2013 00:07:34 +0100
Subject: [rabbitmq-discuss] How to keep-alive a purely receiving
	connection?
In-Reply-To: <814c3877.0000100c.00000192@KAPILPC.vmware.com>
References: <814c3877.0000100c.00000192@KAPILPC.vmware.com>
Message-ID: <51E9C6B6.1090708@rabbitmq.com>

Kapil,

On 19/07/13 22:00, Kapil Goyal wrote:
> We are using two connections, one for sending data and one for
> receiving. We also want to utilize heartbeat functionality to keep the
> connections alive.

You do realise that most client libraries will do that for you, right?

> I understand that client must send some data (within heartbeat interval)
> to RabbitMQ even on the receiving connection to keep it alive.

Correct.

> Question is, if RabbitMQ starts blocking publishing connections during
> flow-control, would it also block this receiving connection on a
> heartbeat-publish?

No. Heartbeats are not publishes. A publishing connection is one over 
which content-bearing AMQP methods are received, of which there is just 
one defined in the spec, namely basic.publish.

Matthias.

From thierry.thelliez.tech at gmail.com  Sat Jul 20 00:12:40 2013
From: thierry.thelliez.tech at gmail.com (Thierry Thelliez)
Date: Fri, 19 Jul 2013 17:12:40 -0600
Subject: [rabbitmq-discuss] blocked producers
In-Reply-To: <CAE3HoVQ7h9F+kLXXfqVfyYbMsn-zS_u50FKTGOHWYOyOHqTFUw@mail.gmail.com>
References: <15c40c58-a27b-4c66-beac-7b92fb1f6c87@googlegroups.com>
	<CAE3HoVQ7h9F+kLXXfqVfyYbMsn-zS_u50FKTGOHWYOyOHqTFUw@mail.gmail.com>
Message-ID: <CABz1xsUiWuwYvzgXxJE2wqCRVpF1R10gLZ6=hVU0aE0nfeW4tA@mail.gmail.com>

Interesting discussion.   I am new to RabbitMQ and I am trying to
understand the coding and architecture requirements on the Producer side.

What happens if the Producer cannot push to a queue?  Does that mean that
the Producer system should plan for its own local queue until the broker is
back?  What do you do in production when you do not want to loose these
messages?


Thanks,
Thierry



On Thu, Jul 18, 2013 at 4:19 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

> 2013/7/19 Kobi Biton <kbiton at outbrain.com>
>
>>  this is to our understanding
>> in order to protect the broker and the consumer as the producers are
>> faster then the consumer ?
>>
>
> Yes, because messages have certain RAM cost.
>
>
>> The problem is that at some point (when the READY messages count is high
>> ~ 1M)  rabbitmq blocks most of our producers and does not seem to release
>> them , until we restart them (logstash daemon) on every one of them , we
>> tried purging the queue / restarting rabbitmq , only restarting the
>> producers seems to bring things to normal state.
>>
>
> It's driven by memory watermark and/or available disk space. See
>
> http://www.rabbitmq.com/memory.html
>
> RabbitMQ log should make it clear what limit (RAM or disk) was reached.
>
>
>>
>> I guess my questions are:
>>
>>  - Is my problem on the consumer side ? I am unable to debug the consumer
>> speed or state
>>
>
> Yes, consumers do not keep up. Try with a larger number of them.
>
>
>>  - Can I tune rabbitmq for lots of connections and high message rate?
>>
>
> It's not really about the number of connections or message rates. See
> http://www.rabbitmq.com/memory.html
>
>
>>  - We use fanout exchange , when a consumer creates a new queue under
>> this exchange and does not consume fast enough can he effect the producers
>> from the other queue (i.e cause them to be blocked?)
>>
>
> All connections that attempt to publish anything when one of the limits is
> hit
> will be throttled.
>
> You can reduce RAM footprint of individual messages by using
> https://github.com/rabbitmq/rabbitmq-toke
> which stores message index in Tokyo Cabinet. Yes, it does not even have a
> README :(
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130719/980f4b31/attachment.htm>

From matthias at rabbitmq.com  Sat Jul 20 00:13:09 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sat, 20 Jul 2013 00:13:09 +0100
Subject: [rabbitmq-discuss] Stuck on shutdown
In-Reply-To: <D693F7E3A283284899617D6DB76E237B1D2104FD@CHO3WUC9MBX14.corp.transunion.com>
References: <D693F7E3A283284899617D6DB76E237B1D2104FD@CHO3WUC9MBX14.corp.transunion.com>
Message-ID: <51E9C805.8010703@rabbitmq.com>

Daniel,

On 19/07/13 19:16, Polistchuck, Daniel A wrote:
> I was stuck on a ?service rabbitmq-server stop? command for more than
> 10 minutes. Does anybody know what could?ve gone wrong?

Is there anything in the logs? What version of RabbitMQ are you running?
We fixed some shutdown deadlocks recently. Notably 3.1.2 contains a fix
for an issue that had been around since version 2.1.0, so if you are
running <3.1.2 then please upgrade.

> Are we in risk of not getting our queues states back when we start it
> back up?

You'll probably be fine.

Matthias.

From watson.timothy at gmail.com  Sat Jul 20 13:23:03 2013
From: watson.timothy at gmail.com (Tim Watson)
Date: Sat, 20 Jul 2013 13:23:03 +0100
Subject: [rabbitmq-discuss] Who can push to a queue?
In-Reply-To: <1374165871945-28178.post@n5.nabble.com>
References: <1374159616700-28173.post@n5.nabble.com>
	<CAE3HoVSaNCd+223sYH1DpROG-kHueWsu2_Nq780pMBphOZcKpA@mail.gmail.com>
	<1374165871945-28178.post@n5.nabble.com>
Message-ID: <15E0EA55-F3A2-4345-B179-D03E205B434E@rabbitmq.com>

Is this a question about controlling access to queues? If so, see http://www.rabbitmq.com/access-control.html

On 18 Jul 2013, at 17:44, thadc <tclotworthy at bluestonelogic.com> wrote:

> Thanks so much for your reply. 
> 
> 
> 
> --
> View this message in context: http://rabbitmq.1065348.n5.nabble.com/Who-can-push-to-a-queue-tp28173p28178.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From nathan at nkbrown.us  Sat Jul 20 21:10:27 2013
From: nathan at nkbrown.us (Nathan Brown)
Date: Sat, 20 Jul 2013 13:10:27 -0700
Subject: [rabbitmq-discuss] Porting .NET client to WinRT API (Windows 8).
In-Reply-To: <5AEBA4E6-5495-4059-B6E1-A91E32FFE6C2@gopivotal.com>
References: <CAFCmQSrAL8Rj_UmwdiFw407m2SVF5b2uR9Wp_SSVHLX_jLOsZg@mail.gmail.com>
	<518CC1C5.1060008@rabbitmq.com>
	<CAFCmQSofOfwN5B2rdRsALXYfcv-EvcUOYBGorY7xZNyBjBhp9w@mail.gmail.com>
	<CAE3HoVSsz-XAxjKqv4SPmzMm70fb5jenc305jUvWFy6GL4z1dA@mail.gmail.com>
	<CAFCmQSov3BcicqMDTveo+gvyVaNePma669nBt_JffyP6FRhvdg@mail.gmail.com>
	<5AEBA4E6-5495-4059-B6E1-A91E32FFE6C2@gopivotal.com>
Message-ID: <CAFCmQSozpiP1qmiQ4wmMZpRmyzDp=5g6TJb8mnKPTT6RqwBnyw@mail.gmail.com>

Hi Michael,

Since "depreciate1_1" was mostly about moving away from non-generic types
there's not a lot to add.

One thing I thought of was since then is that because most of the
dictionaries are <string, object> configuration parameters and ASP.Net MVC
has a similar case and they use a RouteValueDictionary type which has a
constructor that can build the dictionary from anonymous types (
http://msdn.microsoft.com/en-us/library/cc680272.aspx).  That might be
handy to add if passing configurations through dictionaries is common in
user code.

Nathan


On Tue, Jul 16, 2013 at 10:46 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Nathan Brown:
>
> > I've submitted the contributor agreement, and I hope the submitted
> changes can now be reviewed and considered for main-line inclusion.
> >
> > Emile mentioned that this is now under "bug25552", should I re-base my
> code to the most recent .net client release and set the branch name to
> match?
>
> Nathan,
>
> I'm looking into bug25552. Is there anything else you'd like to add to the
> depreciate1_1
> branch?
>
> Thanks,
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130720/f137c0a1/attachment.htm>

From joshua__lim at hotmail.com  Sat Jul 20 18:31:03 2013
From: joshua__lim at hotmail.com (joshua__lim at hotmail.com)
Date: Sat, 20 Jul 2013 10:31:03 -0700 (PDT)
Subject: [rabbitmq-discuss] Reconnecting to the Web-Stomp plugin after a
	network disconnection.
Message-ID: <a219b905-29db-46d3-8e1a-ef559e421e7e@googlegroups.com>

Using references on http://jmesnil.net/stomp-websocket/doc/ and 
http://www.rabbitmq.com/web-stomp.html, I managed to come out with my own 
Web-Stomp js code that can connect and receive messages.  However, I'm 
unable to reconnect in the event the connection to Web-Stomp server breaks.

What I did is on on_connect_error, I did a client.disconnect, followed by a 
client.connect.  The disconnect works but the connect fails.  

Since I'm not able to find any code example that deals with reconnecting, I 
took a look at sockjs groups but it appears to me that the code used for 
sockjs is different from that of web-stomp plugin examples.

Here's the full js code: Here is my full code: http://pastebin.com/dtEBnzGP


   1. function on_connect_error(error) {
   2.   $('#output').append('Connection failed! Error:'+ error + "<br>");
   3.     $('#output').append('Disconnecting....'  + "<br>");
   4.  client.disconnect(function() {
   5.     $('#output').append('Disconnected!' + "<br>");
   6.   });
   7.   $('#output').append('Reconnecting...' + "<br>");
   8.   Connect();
   9. }
   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130720/75b2e1d7/attachment.htm>

From michael.s.klishin at gmail.com  Sun Jul 21 12:13:28 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Sun, 21 Jul 2013 15:13:28 +0400
Subject: [rabbitmq-discuss] Reconnecting to the Web-Stomp plugin after a
 network disconnection.
In-Reply-To: <a219b905-29db-46d3-8e1a-ef559e421e7e@googlegroups.com>
References: <a219b905-29db-46d3-8e1a-ef559e421e7e@googlegroups.com>
Message-ID: <CAE3HoVTwdG3NX+qOtq5ygeYQS=AjCXnbQQyJFTzX+g8C95LP9w@mail.gmail.com>

2013/7/20 <joshua__lim at hotmail.com>

>  The disconnect works but the connect fails.


Can you be more specific, ideally post a stack trace of the failure?

-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130721/1b23cd4a/attachment.htm>

From mklishin at gopivotal.com  Mon Jul 22 05:23:22 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 22 Jul 2013 08:23:22 +0400
Subject: [rabbitmq-discuss] ANN Bunny 0.9.2 is releaed
Message-ID: <8F236F67-9ECA-4E87-819C-64B94C86FF1B@gopivotal.com>

Bunny 0.9.2 is released to rubygems.org [1].

This is a bug fix release that improves automatic connection recovery
stability. All Bunny users are advised to upgrade.

Release notes:
http://blog.rubyrabbitmq.info/blog/2013/07/22/bunny-0-dot-9-2-is-released/

1. https://rubygems.org/gems/bunny/versions/0.9.2
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/e60b7cb5/attachment.pgp>

From alan.antonuk at gmail.com  Mon Jul 22 07:10:09 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Sun, 21 Jul 2013 23:10:09 -0700
Subject: [rabbitmq-discuss] RabbitMQ boot failures with SSL on homebrew
 Mac OSX
In-Reply-To: <A08B2209-CF4F-48A7-B8E7-073E995C1C1C@gopivotal.com>
References: <CAAt2poJGbuDxbYyxa4J4rh_+M2u-wXD3Nog+KWTiT-Wu-YXxcQ@mail.gmail.com>
	<A08B2209-CF4F-48A7-B8E7-073E995C1C1C@gopivotal.com>
Message-ID: <CAAt2poKUFM2eUbiGYVcb40sN8HdYFRscFZ4Toa0px6OBnyZ7qA@mail.gmail.com>

Looks like the current homebrew package grabs a 'standalone' package which
is built by the RabbitMQ guys:

http://www.rabbitmq.com/releases/rabbitmq-server/v3.1.3/rabbitmq-server-mac-standalone-3.1.3.tar.gz

I'm not intimately familiar with how Erlang loads various apps, but I
suspect rabbit_release.erl doesn't take into account the various SSL stuff
needed when building the erlang environment.

(The rabbit_release.erl I'm talking about):
http://hg.rabbitmq.com/rabbitmq-server/file/3b5a3e3d2feb/packaging/standalone/src/rabbit_release.erl

-Alan


On Fri, Jul 12, 2013 at 4:01 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Alan Antonuk:
>
> > BOOT FAILED
> > ===========
> >
> > Error description:
> >    {error,{cannot_start_application,asn1,
> >                                     {"no such file or
> directory","asn1.app"}}}
>
> I believe I saw this error right after the Homebrew formula was switched to
> use the standalone RabbitMQ package.
>
> I had no time to work through the issue and I'm not really familiar with
> Erlang
> runtime packaging specifics so just switched to a tarball-based
> installation.
>
> So, I believe this is a standalone package issue. If you want to use
> Homebrew,
> revert rabbit formula to e5ef90db4856d65a55135854aaba2293690ef06d
> (the switch was in a0bbbb1c8fde32d3ec292d8f830664f49db124cb).
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130721/07436daf/attachment.htm>

From alan.antonuk at gmail.com  Mon Jul 22 07:25:07 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Sun, 21 Jul 2013 23:25:07 -0700
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
Message-ID: <CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>

On Tue, Jul 16, 2013 at 11:39 PM, Michael Klishin <
michael.s.klishin at gmail.com> wrote:

>
>
> I assume AMQP_RESPONSE_SERVER_EXCEPTION indicates
> a channel exception. You need to investigate what exactly causes
> it (see the log) or use a new channel.
>

Not quite. In rabbitmq-c when you're looking at a amqp_rpc_reply_t
structure, returned from a function like amqp_login, or when
amqp_queue_declare() returns NULL and you use amqp_get_rpc_reply() to get
the last error).

First examine the reply_type.
 * AMQP_RESPONSE_NORMAL means the operation completed successfully
 * AMQP_RESPONSE_SERVER_EXCEPTION means either a channel or a connection
exception has occurred. You should then examine the reply.id.
   - A AMQP_CHANNEL_CLOSE_METHOD means a channel exception has occurred,
you can cast the reply.decoded to amqp_channel_close_t* to get details on
why the channel was closed.  Once a channel has been closed, it should not
be used without reopening the channel with amqp_channel_open().
   - A AMQP_CONNECTION_CLOSE_METHOD means a connection exception has
occurred. You can cast the reply.decoded to amqp_connection_close_t* to get
details on why the broker closed the connection.  Once the connection has
been closed the entire connection should be destroyed and a new one created
before continuing.
 * AMQP_RESPONSE_LIBRARY_EXCEPTION means something occurred in the library
(usually it means a socket error has occurred). You should examine
library_error and compare it against the amqp_status_enum values.

HTH
-Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130721/3a46576b/attachment.htm>

From joshua__lim at hotmail.com  Mon Jul 22 07:27:13 2013
From: joshua__lim at hotmail.com (joshua__lim)
Date: Sun, 21 Jul 2013 23:27:13 -0700 (PDT)
Subject: [rabbitmq-discuss] Reconnecting to the Web-Stomp plugin after a
 network disconnection.
In-Reply-To: <CAE3HoVTwdG3NX+qOtq5ygeYQS=AjCXnbQQyJFTzX+g8C95LP9w@mail.gmail.com>
References: <a219b905-29db-46d3-8e1a-ef559e421e7e@googlegroups.com>
	<CAE3HoVTwdG3NX+qOtq5ygeYQS=AjCXnbQQyJFTzX+g8C95LP9w@mail.gmail.com>
Message-ID: <1374474433888-28233.post@n5.nabble.com>

Hi MK, for some reason, I'm not able to see your reply on Google Groups - I
found it on Nabble.

There's nothing on rabbitmq log - %APPDATA%\RabbitMQ\log\.  Would there be a
log just for the Web STOMP plugin?

On client.debug log, the reconnect hangs are "Opening Web Socket..."

Web Socket Opened...
>>> CONNECT accept-version:1.1,1.0 heart-beat:0,0 host:/ login:guest
>>> passcode:guest 
<<< CONNECTED session:session-Y4TIYJV5j3Davlu_tORbmQ heart-beat:0,0
server:RabbitMQ/3.1.3 version:1.1 
connected to server RabbitMQ/3.1.3
>>> SUBSCRIBE ack:client id:sub-0 destination:/queue/90621305 
Whoops! Lost connection to undefined
>>> DISCONNECT 
Opening Web Socket...


JavaScript Console on Chrome:

Connecting... listener-app.js:61
Client {ws: y, counter: 0, connected: true, heartbeat: Object,
subscriptions: Object?}
 listener-app.js:34
Connecting... listener-app.js:61

Network logs screen captures:

http://imageshack.us/a/img29/2194/2i1x.jpg
http://imageshack.us/a/img690/1306/i04a.jpg


Developertools On IE10:

http://imageshack.us/a/img198/2903/tbq.JPG
http://imageshack.us/a/img703/1458/6xk6.jpg




michaelklishin wrote
> 2013/7/20 &lt;

> joshua__lim@

> &gt;
> 
>>  The disconnect works but the connect fails.
> 
> 
> Can you be more specific, ideally post a stack trace of the failure?
> 
> -- 
> MK
> 
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
> 
> _______________________________________________
> rabbitmq-discuss mailing list

> rabbitmq-discuss at .rabbitmq

> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Reconnecting-to-the-Web-Stomp-plugin-after-a-network-disconnection-tp28227p28233.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From sandeep.vk at samsung.com  Mon Jul 22 05:49:47 2013
From: sandeep.vk at samsung.com (sandeep)
Date: Mon, 22 Jul 2013 10:19:47 +0530
Subject: [rabbitmq-discuss]  HA Client for RabbitMQ?
In-Reply-To: <b1b4298f-e993-4e1b-99b8-91feca2042c1@c16g2000pre.googlegroups.com>
Message-ID: <96C26DEBEFFC485BBE734F26C4927F3A@sisodomain.com>

Hi Konstantin,

I have deployed RabbitMQ cluster with three nodes.
I wan to connect to any of the active nodes in case of node failure.
I have tried TCP load balancer where I was unsuccessful.
Could you please support me with some ideas how it can be done from java client.
Thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/fd64cb02/attachment.htm>

From mklishin at gopivotal.com  Mon Jul 22 08:17:02 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 22 Jul 2013 11:17:02 +0400
Subject: [rabbitmq-discuss] HA Client for RabbitMQ?
In-Reply-To: <96C26DEBEFFC485BBE734F26C4927F3A@sisodomain.com>
References: <96C26DEBEFFC485BBE734F26C4927F3A@sisodomain.com>
Message-ID: <5D0BF56E-6360-4A76-91EA-729D141F4250@gopivotal.com>

sandeep:

> I have tried TCP load balancer where I was unsuccessful.

What was the issue?

> Could you please support me with some ideas how it can be done from java client.

Take a look at https://github.com/joshdevins/rabbitmq-ha-client
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/811b6148/attachment.pgp>

From matthias at rabbitmq.com  Mon Jul 22 08:29:39 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 22 Jul 2013 08:29:39 +0100
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
Message-ID: <51ECDF63.9030500@rabbitmq.com>

Alan,

On 22/07/13 07:25, Alan Antonuk wrote:
>     - A AMQP_CHANNEL_CLOSE_METHOD means a channel exception has
> occurred, you can cast the reply.decoded to amqp_channel_close_t* to get
> details on why the channel was closed.  Once a channel has been closed,
> it should not be used without reopening the channel with
> amqp_channel_open().

Presumably the app should also send back a channel.close_ok; or is that 
handled by the library?

>     - A AMQP_CONNECTION_CLOSE_METHOD means a connection exception has
> occurred. You can cast the reply.decoded to amqp_connection_close_t* to
> get details on why the broker closed the connection.  Once the
> connection has been closed the entire connection should be destroyed and
> a new one created before continuing.

Ditto, but for connection.close_ok.


Matthias.

From bison_art at o2.pl  Mon Jul 22 09:09:00 2013
From: bison_art at o2.pl (rabbit15)
Date: Mon, 22 Jul 2013 01:09:00 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51E90BED.9050603@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
Message-ID: <1374480540886-28237.post@n5.nabble.com>

Hi, I didn't say that it is because of paging, it was not my suggestion. So
what can I do to have same level of publishing messages to the queue when
there is slower consumer (even when consumer cannot read messages in some
time). I want to store messages with normal speed all the time, because in
other case it is not predictable.

Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28237.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Mon Jul 22 09:29:13 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 22 Jul 2013 09:29:13 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374480540886-28237.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374480540886-28237.post@n5.nabble.com>
Message-ID: <51ECED59.9040809@rabbitmq.com>

On 22/07/13 09:09, rabbit15 wrote:
> So what can I do to have same level of publishing messages to the
> queue when there is slower consumer (even when consumer cannot read
> messages in some time). I want to store messages with normal speed
> all the time, because in other case it is not predictable.

The ~120kHz you are seeing in the WithoutBuf case *is* the normal speed
for when there are no / slow consumers.

Matthias.

From bison_art at o2.pl  Mon Jul 22 10:25:18 2013
From: bison_art at o2.pl (rabbit15)
Date: Mon, 22 Jul 2013 02:25:18 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51E90BED.9050603@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
Message-ID: <1374485118545-28239.post@n5.nabble.com>

Please tell me how can I have publishing speed on the same level all the
time. I want to have deterministic system. I can show you other examples
where publishing speed is decrease very much.

Cheers,

Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28239.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Mon Jul 22 11:11:33 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 22 Jul 2013 14:11:33 +0400
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374485118545-28239.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
Message-ID: <C1271E92-6FAA-412A-AB89-2C9BC9636FD7@gopivotal.com>

rabbit15:

> Please tell me how can I have publishing speed on the same level all the
> time.

Have excessive consumer capacity.

There is no way to keep performance the same in cases when
no disk I/O operations are necessary vs. when they are necessary
because messages pile up.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/a3c1cd51/attachment.pgp>

From matthias at rabbitmq.com  Mon Jul 22 11:13:48 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 22 Jul 2013 11:13:48 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374485118545-28239.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
Message-ID: <51ED05DC.4050005@rabbitmq.com>

On 22/07/13 10:25, rabbit15 wrote:
> Please tell me how can I have publishing speed on the same level all the
> time. I want to have deterministic system.

The only way to get that is to slow down publishing at the client end, 
or insert some throttling proxy.

But why would you want to do that? e.g. in the example you posted, 
rabbit can happily take in 120kHz with the slow consumers; why would you 
want to *slow down* the fast consumer case (which operates at ~135kHz) 
to 120kHz too?

Matthias.

From swapna.samoju at ionidea.com  Mon Jul 22 07:48:07 2013
From: swapna.samoju at ionidea.com (Swapna Samoju)
Date: Mon, 22 Jul 2013 12:18:07 +0530
Subject: [rabbitmq-discuss] Support for .Net version 4.5
Message-ID: <007601ce86a7$6ce60f40$46b22dc0$@ionidea.com>

Hi Team

I would like to know whether RabbitMQ 3.1.3 supports .Net framework 4.5 

--
Regards,
Swapna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/750d933f/attachment.htm>

From Alvaro.Fernandez at ific.uv.es  Mon Jul 22 11:20:32 2013
From: Alvaro.Fernandez at ific.uv.es (Alvaro Fernandez Casani)
Date: Mon, 22 Jul 2013 12:20:32 +0200
Subject: [rabbitmq-discuss] problem building Documentation - release
	3.1.3
In-Reply-To: <51E9AE29.8010104@rabbitmq.com>
References: <51E92161.7030203@ific.uv.es> <51E9AE29.8010104@rabbitmq.com>
Message-ID: <51ED0770.5030503@ific.uv.es>

El 19/07/13 23:22, Matthias Radestock escribi?:
> Alvaro,
>
> On 19/07/13 12:22, Alvaro Fernandez Casani wrote:
>> in the process of installing the release 3.1.3, it builds the
>> documentation, but fails in my Ubuntu box:
>> [...]
>
> No idea what's going wrong there, but why are you building from source 
> at all? Simply install the 3.1.3 debian package, as per 
> http://www.rabbitmq.com/install-debian.html.
>
>
> Regards,
>
> Matthias.

Hi Matthias,

  I wanted to be sure can build and install from source, just in case we 
need to modify sources.
I spotted this, and thought others might be having the same problem...

cheers,
?lvaro




From mklishin at gopivotal.com  Mon Jul 22 11:25:42 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 22 Jul 2013 14:25:42 +0400
Subject: [rabbitmq-discuss] Support for .Net version 4.5
In-Reply-To: <007601ce86a7$6ce60f40$46b22dc0$@ionidea.com>
References: <007601ce86a7$6ce60f40$46b22dc0$@ionidea.com>
Message-ID: <46332CAE-C2F3-46EF-B591-C20DFEC89961@gopivotal.com>

Swapna Samoju:

> I would like to know whether RabbitMQ 3.1.3 supports .Net framework 4.5

RabbitMQ .NET client 3.1.3 should work with .NET 4.5.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/3434df87/attachment.pgp>

From sandy.sandeeep at gmail.com  Mon Jul 22 11:40:13 2013
From: sandy.sandeeep at gmail.com (sandeep kumar)
Date: Mon, 22 Jul 2013 03:40:13 -0700 (PDT)
Subject: [rabbitmq-discuss] HA Client for RabbitMQ?
In-Reply-To: <b1b4298f-e993-4e1b-99b8-91feca2042c1@c16g2000pre.googlegroups.com>
References: <19691872.1093.1317485897379.JavaMail.geo-discussion-forums@yqmw31>
	<20111002171219.GG27797@wellquite.org>
	<b1b4298f-e993-4e1b-99b8-91feca2042c1@c16g2000pre.googlegroups.com>
Message-ID: <2a1c5757-0cd3-475b-8f6c-c87921f321f2@googlegroups.com>



On Monday, November 7, 2011 4:06:53 AM UTC+5:30, Konstantin Kalin wrote:
>
> On Oct 2, 9:12 am, Matthew Sackman <matt... at rabbitmq.com> wrote:
> > On Sat, Oct 01, 2011 at 09:18:17AM -0700, Alex Gr?nholm wrote:
> > > I noticed that the hot new feature in RabbitMQ 2.6 is Active/Active HA 
> on
> > > the server side. How can I take advantage of this on the client side? 
> AFAIK
> > > the client only knows how to connect to a single server -- you can't 
> give it
> > > a list of servers for failover purposes.
> >
> > Correct. The Active/Active HA work does not address the issue of client
> > connectivity. There are a number of solutions that you could use:
> >
> > o) Change the DNS on failure
> > o) a plain TCP load balancer like haproxy or a router-based one
> > o) mobile IP addresses as can be done with something like pacemaker
>
> I think there is one more valuable option. If a client knows cluster's
> nodes (IP addresses) the client can reconnect to another node. I
> implemented this in ~150 lines in Java code when I decided to test
> RabbitMQ Active/Active. And it works fine in my opinion
>
> Thank you,
> Konstantin.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq... at lists.rabbitmq.com <javascript:>
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
On Monday, November 7, 2011 4:06:53 AM UTC+5:30, Konstantin Kalin wrote:
>
> On Oct 2, 9:12 am, Matthew Sackman <matt... at rabbitmq.com> wrote:
> > On Sat, Oct 01, 2011 at 09:18:17AM -0700, Alex Gr?nholm wrote:
> > > I noticed that the hot new feature in RabbitMQ 2.6 is Active/Active HA 
> on
> > > the server side. How can I take advantage of this on the client side? 
> AFAIK
> > > the client only knows how to connect to a single server -- you can't 
> give it
> > > a list of servers for failover purposes.
> >
> > Correct. The Active/Active HA work does not address the issue of client
> > connectivity. There are a number of solutions that you could use:
> >
> > o) Change the DNS on failure
> > o) a plain TCP load balancer like haproxy or a router-based one
> > o) mobile IP addresses as can be done with something like pacemaker
>
> I think there is one more valuable option. If a client knows cluster's
> nodes (IP addresses) the client can reconnect to another node. I
> implemented this in ~150 lines in Java code when I decided to test
> RabbitMQ Active/Active. And it works fine in my opinion
>
> Thank you,
> Konstantin.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq... at lists.rabbitmq.com <javascript:>
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
Hi Konstantin,
 
I have deployed RabbitMQ cluster with three nodes.
I wan to connect to any of the active nodes in case of node failure.
I have tried TCP load balancer where I was unsuccessful.
Could you please support me with some ideas how it can be done from java 
client.
Thanks in advance.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/46961481/attachment.htm>

From mklishin at gopivotal.com  Mon Jul 22 11:48:17 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 22 Jul 2013 14:48:17 +0400
Subject: [rabbitmq-discuss] HA Client for RabbitMQ?
In-Reply-To: <2a1c5757-0cd3-475b-8f6c-c87921f321f2@googlegroups.com>
References: <19691872.1093.1317485897379.JavaMail.geo-discussion-forums@yqmw31>
	<20111002171219.GG27797@wellquite.org>
	<b1b4298f-e993-4e1b-99b8-91feca2042c1@c16g2000pre.googlegroups.com>
	<2a1c5757-0cd3-475b-8f6c-c87921f321f2@googlegroups.com>
Message-ID: <858AFAEB-A43A-46C6-B1F7-DC88B8241227@gopivotal.com>

sandeep kumar:

> I have tried TCP load balancer where I was unsuccessful.

What was the issue?

> Could you please support me with some ideas how it can be done from java client.

Take a look at https://github.com/joshdevins/rabbitmq-ha-client
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/a83b9eb5/attachment.pgp>

From lrodriguez1995 at yahoo.com  Mon Jul 22 11:54:09 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Mon, 22 Jul 2013 03:54:09 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-server runlevel arguments do not
	match	LSB default-start values
In-Reply-To: <1374247974.5756.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1374247974.5756.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <1374490449.83439.YahooMailNeo@web141103.mail.bf1.yahoo.com>



Just wanted to let you guys know I found the issue..
I had a missing digit in my hosts file? when I changed hostnames..
Once I fixed that part, installation ran smooth..


thanks

Luis






________________________________
 From: Luis Rodriguez <lrodriguez1995 at yahoo.com>
To: "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Friday, July 19, 2013 11:32 AM
Subject: [rabbitmq-discuss] rabbitmq-server runlevel arguments do not match LSB default-start values
 


Dear all,
I am running an ubuntu machine with erl R16B and rabbitmq (3.1.3)..
I am trying to get it setup to autostart once the vm fires up..
after running the update-rc.d rabbitmq-server defaults I am getting:

warning:rabbitmq-server start runlevel arguments (2 3 4 5) do not match LSB default-start values (3 4 5)
warning:rabbitmq-server start runlevel arguments (0 1 6) do not match LSB default-stop values (0 1 2 6 )

I made sure to turn off runlevel 2? (chkconfig --level 2 rabbitmq-server off ) to match the default start values (pic)
but I still need to manually start rabbitmq once I reboot..

any help would be greatly appreciated..

Luis

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/442579a9/attachment.htm>

From lrodriguez1995 at yahoo.com  Mon Jul 22 11:54:09 2013
From: lrodriguez1995 at yahoo.com (Luis Rodriguez)
Date: Mon, 22 Jul 2013 03:54:09 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-server runlevel arguments do not
	match	LSB default-start values
In-Reply-To: <1374247974.5756.YahooMailNeo@web141101.mail.bf1.yahoo.com>
References: <1374247974.5756.YahooMailNeo@web141101.mail.bf1.yahoo.com>
Message-ID: <1374490449.83439.YahooMailNeo@web141103.mail.bf1.yahoo.com>



Just wanted to let you guys know I found the issue..
I had a missing digit in my hosts file? when I changed hostnames..
Once I fixed that part, installation ran smooth..


thanks

Luis






________________________________
 From: Luis Rodriguez <lrodriguez1995 at yahoo.com>
To: "rabbitmq-discuss at lists.rabbitmq.com" <rabbitmq-discuss at lists.rabbitmq.com> 
Sent: Friday, July 19, 2013 11:32 AM
Subject: [rabbitmq-discuss] rabbitmq-server runlevel arguments do not match LSB default-start values
 


Dear all,
I am running an ubuntu machine with erl R16B and rabbitmq (3.1.3)..
I am trying to get it setup to autostart once the vm fires up..
after running the update-rc.d rabbitmq-server defaults I am getting:

warning:rabbitmq-server start runlevel arguments (2 3 4 5) do not match LSB default-start values (3 4 5)
warning:rabbitmq-server start runlevel arguments (0 1 6) do not match LSB default-stop values (0 1 2 6 )

I made sure to turn off runlevel 2? (chkconfig --level 2 rabbitmq-server off ) to match the default start values (pic)
but I still need to manually start rabbitmq once I reboot..

any help would be greatly appreciated..

Luis

_______________________________________________
rabbitmq-discuss mailing list
rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/442579a9/attachment-0001.htm>

From brianhray at gmail.com  Mon Jul 22 16:47:41 2013
From: brianhray at gmail.com (Brian Ray)
Date: Mon, 22 Jul 2013 10:47:41 -0500
Subject: [rabbitmq-discuss] fanout exchange initial deployment
Message-ID: <CANKg38uFFyF6=3pO5aAXk8RNv3JWS=YH8HVcYC9ayDPashuJUg@mail.gmail.com>

If there are no queues attached to a fanout exchange the queue seems to
consume all the memory on the server.

Is there a way to disable this behavior until the first client subscribes?
I am trying to understand the logic behind keeping this messages around
while nobody yet is listening.

Thanks! Brian

-- 
Brian Ray
@brianray
(773) 669-7717
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/2cfc868f/attachment.htm>

From alan.antonuk at gmail.com  Mon Jul 22 17:24:49 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 22 Jul 2013 09:24:49 -0700
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAAt2poJg33DPHbZd0zB-F8rXbajA=VvPQpq0x=QFnwgJz88MRA@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
	<51ECDF63.9030500@rabbitmq.com>
	<CAAt2poJg33DPHbZd0zB-F8rXbajA=VvPQpq0x=QFnwgJz88MRA@mail.gmail.com>
Message-ID: <CAAt2poK4Gn0awkV+rdpL1YwprvpJhhGUDY7k-buYe_4UtkuDsQ@mail.gmail.com>

This should really go to the whole list....


On Mon, Jul 22, 2013 at 9:21 AM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> On Mon, Jul 22, 2013 at 12:29 AM, Matthias Radestock <
> matthias at rabbitmq.com> wrote:
>
>>
>> On 22/07/13 07:25, Alan Antonuk wrote:
>>
>>>     - A AMQP_CHANNEL_CLOSE_METHOD means a channel exception has
>>> occurred, you can cast the reply.decoded to amqp_channel_close_t* to get
>>> details on why the channel was closed.  Once a channel has been closed,
>>> it should not be used without reopening the channel with
>>> amqp_channel_open().
>>>
>>
>> Presumably the app should also send back a channel.close_ok; or is that
>> handled by the library?
>>
>> Currently the library does not handle this for.  The app should send a
> channel.close_ok by doing something like
>
> amqp_channel_close_ok_t close_ok;
> int ret = amqp_send_method(conn, channel, AMQP_CHANNEL_CLOSE_OK_METHOD,
> &close_ok);
> if (AMQP_STATUS_OK != ret) {
>  /* Handle any errors sending the method */
> }
>
>
>>
>>      - A AMQP_CONNECTION_CLOSE_METHOD means a connection exception has
>>> occurred. You can cast the reply.decoded to amqp_connection_close_t* to
>>> get details on why the broker closed the connection.  Once the
>>> connection has been closed the entire connection should be destroyed and
>>> a new one created before continuing.
>>>
>>
>> Ditto, but for connection.close_ok.
>
>
> Same deal as with channels, the app is responsible for sending a
> connection.close_ok over channel 0.
>
> Example code for doing this might be:
>
> amqp_connection_close_ok_t close_ok;
> int ret = amqp_send_method(conn, 0, AMQP_CONNECTION_CLOSE_OK_METHOD,
> &close_ok);
> if (AMQP_STATUS_OK != ret) {
>  /* Handle any errors */
> }
> /* This will implicitly close the socket to the broker, and free any
> buffers held by the connection */
> amqp_destroy_connection(conn);
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/57c580d1/attachment.htm>

From alan.antonuk at gmail.com  Mon Jul 22 17:33:48 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Mon, 22 Jul 2013 09:33:48 -0700
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAAt2poK4Gn0awkV+rdpL1YwprvpJhhGUDY7k-buYe_4UtkuDsQ@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
	<51ECDF63.9030500@rabbitmq.com>
	<CAAt2poJg33DPHbZd0zB-F8rXbajA=VvPQpq0x=QFnwgJz88MRA@mail.gmail.com>
	<CAAt2poK4Gn0awkV+rdpL1YwprvpJhhGUDY7k-buYe_4UtkuDsQ@mail.gmail.com>
Message-ID: <CAAt2poLRQFi1ioHjgFaZP_ZFkaVsFK0vOxk+OSRbs+8=TFJrBg@mail.gmail.com>

Also note that I'm currently working on documenting rabbitmq-c, so
hopefully in the near-ish future there will be some 'best practices' on how
to do all of this.

You can find further details on progress here:
https://github.com/alanxz/rabbitmq-c/pull/61

-Alan


On Mon, Jul 22, 2013 at 9:24 AM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> This should really go to the whole list....
>
>
> On Mon, Jul 22, 2013 at 9:21 AM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>
>> On Mon, Jul 22, 2013 at 12:29 AM, Matthias Radestock <
>> matthias at rabbitmq.com> wrote:
>>
>>>
>>> On 22/07/13 07:25, Alan Antonuk wrote:
>>>
>>>>     - A AMQP_CHANNEL_CLOSE_METHOD means a channel exception has
>>>> occurred, you can cast the reply.decoded to amqp_channel_close_t* to get
>>>> details on why the channel was closed.  Once a channel has been closed,
>>>> it should not be used without reopening the channel with
>>>> amqp_channel_open().
>>>>
>>>
>>> Presumably the app should also send back a channel.close_ok; or is that
>>> handled by the library?
>>>
>>> Currently the library does not handle this for.  The app should send a
>> channel.close_ok by doing something like
>>
>> amqp_channel_close_ok_t close_ok;
>> int ret = amqp_send_method(conn, channel, AMQP_CHANNEL_CLOSE_OK_METHOD,
>> &close_ok);
>> if (AMQP_STATUS_OK != ret) {
>>  /* Handle any errors sending the method */
>>  }
>>
>>
>>>
>>>      - A AMQP_CONNECTION_CLOSE_METHOD means a connection exception has
>>>> occurred. You can cast the reply.decoded to amqp_connection_close_t* to
>>>> get details on why the broker closed the connection.  Once the
>>>> connection has been closed the entire connection should be destroyed and
>>>> a new one created before continuing.
>>>>
>>>
>>> Ditto, but for connection.close_ok.
>>
>>
>> Same deal as with channels, the app is responsible for sending a
>> connection.close_ok over channel 0.
>>
>> Example code for doing this might be:
>>
>> amqp_connection_close_ok_t close_ok;
>> int ret = amqp_send_method(conn, 0, AMQP_CONNECTION_CLOSE_OK_METHOD,
>> &close_ok);
>> if (AMQP_STATUS_OK != ret) {
>>  /* Handle any errors */
>> }
>> /* This will implicitly close the socket to the broker, and free any
>> buffers held by the connection */
>> amqp_destroy_connection(conn);
>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/a1be2045/attachment.htm>

From mklishin at gopivotal.com  Mon Jul 22 17:53:13 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 22 Jul 2013 20:53:13 +0400
Subject: [rabbitmq-discuss] fanout exchange initial deployment
In-Reply-To: <CANKg38uFFyF6=3pO5aAXk8RNv3JWS=YH8HVcYC9ayDPashuJUg@mail.gmail.com>
References: <CANKg38uFFyF6=3pO5aAXk8RNv3JWS=YH8HVcYC9ayDPashuJUg@mail.gmail.com>
Message-ID: <09E926C2-E11E-41F0-B2CB-E55915E01CAA@gopivotal.com>

Brian Ray:

> Is there a way to disable this behavior until the first client subscribes? I am trying to understand the logic behind keeping this messages around while nobody yet is listening.

Some systems need messages to be kept around when there are no consumers.

You can set per-queue or per-message TTL:
https://www.rabbitmq.com/ttl.html
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/3040b090/attachment.pgp>

From brianhray at gmail.com  Mon Jul 22 18:03:27 2013
From: brianhray at gmail.com (Brian Ray)
Date: Mon, 22 Jul 2013 12:03:27 -0500
Subject: [rabbitmq-discuss] fanout exchange initial deployment
In-Reply-To: <09E926C2-E11E-41F0-B2CB-E55915E01CAA@gopivotal.com>
References: <CANKg38uFFyF6=3pO5aAXk8RNv3JWS=YH8HVcYC9ayDPashuJUg@mail.gmail.com>
	<09E926C2-E11E-41F0-B2CB-E55915E01CAA@gopivotal.com>
Message-ID: <0E1C44BE-5FEB-4749-B39A-E0DE89AD55BA@gmail.com>



> 
> You can set per-queue or per-message TTL:
> https://www.rabbitmq.com/ttl.html

Sounds like only the ttl on a message will work with a fanout, correct? That is since the queues do not exist yet. I do hope the ttl will be honored in a fanout exchange.  There is no Ttl settings globally for exchanges.

Brian 

From mklishin at gopivotal.com  Mon Jul 22 18:05:53 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 22 Jul 2013 21:05:53 +0400
Subject: [rabbitmq-discuss] fanout exchange initial deployment
In-Reply-To: <0E1C44BE-5FEB-4749-B39A-E0DE89AD55BA@gmail.com>
References: <CANKg38uFFyF6=3pO5aAXk8RNv3JWS=YH8HVcYC9ayDPashuJUg@mail.gmail.com>
	<09E926C2-E11E-41F0-B2CB-E55915E01CAA@gopivotal.com>
	<0E1C44BE-5FEB-4749-B39A-E0DE89AD55BA@gmail.com>
Message-ID: <16DFAA4D-C6B7-497A-9E6D-515C81E9B52B@gopivotal.com>

Brian Ray:

> Sounds like only the ttl on a message will work with a fanout, correct? That is since the queues do not exist yet.

If queues do not exist yet, the message will be dropped or returned (if published as mandatory).

Exchanges do not store messages.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/169aeef5/attachment.pgp>

From psdc1978 at gmail.com  Mon Jul 22 18:38:53 2013
From: psdc1978 at gmail.com (=?ISO-8859-1?Q?Pedro_S=E1_da_Costa?=)
Date: Mon, 22 Jul 2013 18:38:53 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different
	regions
Message-ID: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>

Hi,

I am trying to configure rabbitmq with EC2. The rabbitmq works when it uses
the private IP, but when I try to use the public IP, I can't start the
rabbitmq. What I want to do is that different EC2 regions access the same
rabbitmq. E.g.: the rabbitmq is running in region USA, and the applications
are running in Singapore and in Ireland. The applications must access the
rabbitmq in USA. I open all the ports in the regions.

The configuration file that I use is:

$ cat /etc/rabbitmq/rabbitmq-env.conf
RABBITMQ_NODE_IP_ADDRESS=XX.XXX.XX.XXX


The error that I get is:

$ cat /var/log/rabbitmq/startup_log

              RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
  ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
  ##  ##
  ##########  Logs: /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
  ######  ##        /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log
  ##########
              Starting broker...

BOOT FAILED
===========

Error description:
   {could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
   /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log

Stack trace:
   [{rabbit_networking,start_listener0,4,[]},
    {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
    {rabbit_networking,start_listener,4,[]},
    {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
    {rabbit_networking,boot_tcp,0,[]},
    {rabbit_networking,boot,0,[]},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
    {rabbit,run_boot_step,1,[]}]



BOOT FAILED
===========

Error description:
   {could_not_start,rabbit,
       {bad_return,
           {{rabbit,start,[normal,[]]},
            {'EXIT',
                {rabbit,failure_during_boot,

{could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}}}}}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
   /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log

{"init terminating in
do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}}}}}}}}

How can I set the rabbitmq to use the public IP for other regions access it?

-- 
Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/bed17b97/attachment.htm>

From matthias at rabbitmq.com  Mon Jul 22 19:57:27 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 22 Jul 2013 19:57:27 +0100
Subject: [rabbitmq-discuss] amqp_rpc_server
In-Reply-To: <CAEr978SMGksECtK-ox4RXRr073o8=posS0E_mis+TBOwi-RV5g@mail.gmail.com>
References: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
	<51E6F4DD.2010109@rabbitmq.com>
	<CAEr978SMGksECtK-ox4RXRr073o8=posS0E_mis+TBOwi-RV5g@mail.gmail.com>
Message-ID: <51ED8097.7040800@rabbitmq.com>

Carlo,

On 18/07/13 09:20, Carlo Bertoldi wrote:
> I've added start_link functions to both client and server, so the
> caller has the possibility to decide what he needs, without breaking
> the old behaviour.
>
> Here are the patches:

Thanks. Merged.

Matthias.

From mcintoshj at gmail.com  Mon Jul 22 20:05:01 2013
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Mon, 22 Jul 2013 14:05:01 -0500
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
Message-ID: <CAD6m6fEnUE8xuCcGxTO3m7DMDQ6bx23FRZpkUhuiMPWkGr1JkA@mail.gmail.com>

Not enough info... though one quick guess - are you sure you don't have
another process running on that port?  Do a netstat -an |grep 5672.  As I
recall, a lot of linux installations now include QPID or something like
that which runs on that port.  Note, rabbit WILL start even with firewall
rules turned on - linux itself just won't allow external connections.

Jason


On Mon, Jul 22, 2013 at 12:38 PM, Pedro S? da Costa <psdc1978 at gmail.com>wrote:

> Hi,
>
> I am trying to configure rabbitmq with EC2. The rabbitmq works when it
> uses the private IP, but when I try to use the public IP, I can't start the
> rabbitmq. What I want to do is that different EC2 regions access the same
> rabbitmq. E.g.: the rabbitmq is running in region USA, and the applications
> are running in Singapore and in Ireland. The applications must access the
> rabbitmq in USA. I open all the ports in the regions.
>
> The configuration file that I use is:
>
> $ cat /etc/rabbitmq/rabbitmq-env.conf
> RABBITMQ_NODE_IP_ADDRESS=XX.XXX.XX.XXX
>
>
> The error that I get is:
>
> $ cat /var/log/rabbitmq/startup_log
>
>               RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
>   ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
>   ##  ##
>   ##########  Logs: /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
>   ######  ##        /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log
>   ##########
>               Starting broker...
>
> BOOT FAILED
> ===========
>
> Error description:
>    {could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log
>
> Stack trace:
>    [{rabbit_networking,start_listener0,4,[]},
>     {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
>     {rabbit_networking,start_listener,4,[]},
>     {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
>     {rabbit_networking,boot_tcp,0,[]},
>     {rabbit_networking,boot,0,[]},
>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
>     {rabbit,run_boot_step,1,[]}]
>
>
>
> BOOT FAILED
> ===========
>
> Error description:
>    {could_not_start,rabbit,
>        {bad_return,
>            {{rabbit,start,[normal,[]]},
>             {'EXIT',
>                 {rabbit,failure_during_boot,
>
> {could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}}}}}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log
>
> {"init terminating in
> do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}}}}}}}}
>
> How can I set the rabbitmq to use the public IP for other regions access
> it?
>
> --
> Best regards,
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Jason McIntosh
http://mcintosh.poetshome.com/blog/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/95ec7994/attachment.htm>

From matthias at rabbitmq.com  Mon Jul 22 20:05:30 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 22 Jul 2013 20:05:30 +0100
Subject: [rabbitmq-discuss] Porting .NET client to WinRT API (Windows 8).
In-Reply-To: <CAFCmQSozpiP1qmiQ4wmMZpRmyzDp=5g6TJb8mnKPTT6RqwBnyw@mail.gmail.com>
References: <CAFCmQSrAL8Rj_UmwdiFw407m2SVF5b2uR9Wp_SSVHLX_jLOsZg@mail.gmail.com>
	<518CC1C5.1060008@rabbitmq.com>
	<CAFCmQSofOfwN5B2rdRsALXYfcv-EvcUOYBGorY7xZNyBjBhp9w@mail.gmail.com>
	<CAE3HoVSsz-XAxjKqv4SPmzMm70fb5jenc305jUvWFy6GL4z1dA@mail.gmail.com>
	<CAFCmQSov3BcicqMDTveo+gvyVaNePma669nBt_JffyP6FRhvdg@mail.gmail.com>
	<5AEBA4E6-5495-4059-B6E1-A91E32FFE6C2@gopivotal.com>
	<CAFCmQSozpiP1qmiQ4wmMZpRmyzDp=5g6TJb8mnKPTT6RqwBnyw@mail.gmail.com>
Message-ID: <51ED827A.8050103@rabbitmq.com>

Nathan,

On 20/07/13 21:10, Nathan Brown wrote:
> One thing I thought of was since then is that because most of the
> dictionaries are <string, object> configuration parameters and ASP.Net
> MVC has a similar case and they use a RouteValueDictionary type which
> has a constructor that can build the dictionary from anonymous types
> (http://msdn.microsoft.com/en-us/library/cc680272.aspx).  That might be
> handy to add if passing configurations through dictionaries is common in
> user code.

RouteValueDictionary is in System.Web.Routing, which doesn't really fit 
the usage in the rabbit client.

Matthias.

From matthias at rabbitmq.com  Mon Jul 22 20:09:55 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 22 Jul 2013 20:09:55 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
Message-ID: <51ED8383.2050702@rabbitmq.com>

Pedro,

On 22/07/13 18:38, Pedro S? da Costa wrote:
> I am trying to configure rabbitmq with EC2. The rabbitmq works when it
> uses the private IP, but when I try to use the public IP, I can't start
> the rabbitmq.

Inspecting the log files, as suggested by...

> Log files (may contain more information):
>     /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
>     /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log

...might offer some clues as to what went wrong.

Matthias.

From matthias at rabbitmq.com  Mon Jul 22 20:14:41 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 22 Jul 2013 20:14:41 +0100
Subject: [rabbitmq-discuss] blocked producers
In-Reply-To: <CABz1xsUiWuwYvzgXxJE2wqCRVpF1R10gLZ6=hVU0aE0nfeW4tA@mail.gmail.com>
References: <15c40c58-a27b-4c66-beac-7b92fb1f6c87@googlegroups.com>
	<CAE3HoVQ7h9F+kLXXfqVfyYbMsn-zS_u50FKTGOHWYOyOHqTFUw@mail.gmail.com>
	<CABz1xsUiWuwYvzgXxJE2wqCRVpF1R10gLZ6=hVU0aE0nfeW4tA@mail.gmail.com>
Message-ID: <51ED84A1.9010802@rabbitmq.com>

Thierry,

On 20/07/13 00:12, Thierry Thelliez wrote:
> Interesting discussion.   I am new to RabbitMQ and I am trying to
> understand the coding and architecture requirements on the Producer side.
>
> What happens if the Producer cannot push to a queue?  Does that mean
> that the Producer system should plan for its own local queue until the
> broker is back?  What do you do in production when you do not want to
> loose these messages?

That depends on the app and what failure scenarios you are most 
concerned about.

Local queues add another moving part that itself can fail.


Note that the thread discussed blocked producers. No messages are lost 
in that situation; message loss would only occur if client or server are 
terminated/crash or there is a prolonged network disruption.


Matthias.

From nathan at nkbrown.us  Mon Jul 22 21:33:03 2013
From: nathan at nkbrown.us (Nathan Brown)
Date: Mon, 22 Jul 2013 13:33:03 -0700
Subject: [rabbitmq-discuss] Porting .NET client to WinRT API (Windows 8).
In-Reply-To: <51ED827A.8050103@rabbitmq.com>
References: <CAFCmQSrAL8Rj_UmwdiFw407m2SVF5b2uR9Wp_SSVHLX_jLOsZg@mail.gmail.com>
	<518CC1C5.1060008@rabbitmq.com>
	<CAFCmQSofOfwN5B2rdRsALXYfcv-EvcUOYBGorY7xZNyBjBhp9w@mail.gmail.com>
	<CAE3HoVSsz-XAxjKqv4SPmzMm70fb5jenc305jUvWFy6GL4z1dA@mail.gmail.com>
	<CAFCmQSov3BcicqMDTveo+gvyVaNePma669nBt_JffyP6FRhvdg@mail.gmail.com>
	<5AEBA4E6-5495-4059-B6E1-A91E32FFE6C2@gopivotal.com>
	<CAFCmQSozpiP1qmiQ4wmMZpRmyzDp=5g6TJb8mnKPTT6RqwBnyw@mail.gmail.com>
	<51ED827A.8050103@rabbitmq.com>
Message-ID: <CAFCmQSr8X2rzZxxH20OxSQHzjtPBuBPCnaOL1WKonbOPQS9W4w@mail.gmail.com>

I know, I wasn't suggesting taking a reference to it. It was more about the
idea of using anonymous types to fill in string-object dictionaries.  If
the RabbitMQ client would use that, it would have it's own
RabbitValueDictionary or something.


On Mon, Jul 22, 2013 at 12:05 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Nathan,
>
>
> On 20/07/13 21:10, Nathan Brown wrote:
>
>> One thing I thought of was since then is that because most of the
>> dictionaries are <string, object> configuration parameters and ASP.Net
>> MVC has a similar case and they use a RouteValueDictionary type which
>> has a constructor that can build the dictionary from anonymous types
>> (http://msdn.microsoft.com/en-**us/library/cc680272.aspx<http://msdn.microsoft.com/en-us/library/cc680272.aspx>).
>>  That might be
>> handy to add if passing configurations through dictionaries is common in
>> user code.
>>
>
> RouteValueDictionary is in System.Web.Routing, which doesn't really fit
> the usage in the rabbit client.
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/1d2c5aab/attachment.htm>

From thierry.thelliez.tech at gmail.com  Mon Jul 22 21:50:07 2013
From: thierry.thelliez.tech at gmail.com (Thierry Thelliez)
Date: Mon, 22 Jul 2013 14:50:07 -0600
Subject: [rabbitmq-discuss] blocked producers
In-Reply-To: <51ED84A1.9010802@rabbitmq.com>
References: <15c40c58-a27b-4c66-beac-7b92fb1f6c87@googlegroups.com>
	<CAE3HoVQ7h9F+kLXXfqVfyYbMsn-zS_u50FKTGOHWYOyOHqTFUw@mail.gmail.com>
	<CABz1xsUiWuwYvzgXxJE2wqCRVpF1R10gLZ6=hVU0aE0nfeW4tA@mail.gmail.com>
	<51ED84A1.9010802@rabbitmq.com>
Message-ID: <CABz1xsXoV=EGKTC5f86304nf9JTCXz9Aww7hDjshh-9NZUhc4Q@mail.gmail.com>

Yes, I agree that a local queue might not be the answer (and we could go in
a recursive argument;-).

But I guess that the client/producer should have a way to store events in
case the message broker goes down. Using a local database might be an
option (although that's just another moving part and that could be
considered like a local queue system as well).

I am just curious about what people do in production.

I need to send user generated files to a conversion worker pool.  If the
message broker goes down for any reason, the clients/producers need to
continue dealing with the incoming traffic and locally store the files
until the broker goes back up.  In other words, it seems like the client
needs to keep a record of the ongoing transactions/conversions.  Is that
correct?

Thierry











On Mon, Jul 22, 2013 at 1:14 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Thierry,
>
>
> On 20/07/13 00:12, Thierry Thelliez wrote:
>
>> Interesting discussion.   I am new to RabbitMQ and I am trying to
>> understand the coding and architecture requirements on the Producer side.
>>
>> What happens if the Producer cannot push to a queue?  Does that mean
>> that the Producer system should plan for its own local queue until the
>> broker is back?  What do you do in production when you do not want to
>> loose these messages?
>>
>
> That depends on the app and what failure scenarios you are most concerned
> about.
>
> Local queues add another moving part that itself can fail.
>
>
> Note that the thread discussed blocked producers. No messages are lost in
> that situation; message loss would only occur if client or server are
> terminated/crash or there is a prolonged network disruption.
>
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/759264e2/attachment.htm>

From 314992959 at qq.com  Tue Jul 23 02:57:50 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 22 Jul 2013 18:57:50 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
Message-ID: <1374544670233-28262.post@n5.nabble.com>

I  got     AMQP_CHANNEL_CLOSE_METHOD   from   rpc. 
but I  can  still  see the  channel  in  rabbitmq server  by 
rabbitmqctl.bat. 
So  I try  to  use   amqp_channel_open()  to  reopen  the  channel. 
 but  after  i   did  this,  I  use  amqp_get_rpc_reply()  and  I  get  the 
reply  AMQP_SERVER_EXCEPTION :  AMQP_CONNECTION_CLOSE_METHOD.     and the
report  say that :    server connection error 503 ,message: COMMAND_INVALID
- second  ' channel.oepn '  seen.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-RPC-style-commands-doesn-t-work-after-amqp-get-rpc-reply-return-AMQP-RESPONSE-SERVER-EXCEN-tp28119p28262.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Tue Jul 23 03:03:56 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 23 Jul 2013 06:03:56 +0400
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <1374544670233-28262.post@n5.nabble.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
	<1374544670233-28262.post@n5.nabble.com>
Message-ID: <CAE3HoVScwL=QrDDcDdGX5CT1Y9vptCcwe6qey2OzQP5G7eLyow@mail.gmail.com>

2013/7/23 3k4b251 <314992959 at qq.com>

> COMMAND_INVALID
> - second  ' channel.oepn '  seen
>

This means you are trying to open a channel with the same id twice.

Your client should provide a way to get the id of the closed channel
from channel.close.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/f9f1ac94/attachment.htm>

From matthias at rabbitmq.com  Tue Jul 23 03:34:42 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 23 Jul 2013 03:34:42 +0100
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <1374544670233-28262.post@n5.nabble.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
	<1374544670233-28262.post@n5.nabble.com>
Message-ID: <51EDEBC2.6070709@rabbitmq.com>

On 23/07/13 02:57, 3k4b251 wrote:
> I  got     AMQP_CHANNEL_CLOSE_METHOD   from   rpc.
> but I  can  still  see the  channel  in  rabbitmq server  by
> rabbitmqctl.bat.
> So  I try  to  use   amqp_channel_open()  to  reopen  the  channel.
>   but  after  i   did  this,  I  use  amqp_get_rpc_reply()  and  I  get  the
> reply  AMQP_SERVER_EXCEPTION :  AMQP_CONNECTION_CLOSE_METHOD.     and the
> report  say that :    server connection error 503 ,message: COMMAND_INVALID
> - second  ' channel.oepn '  seen.

As pointed out by me Alan in 
http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-RPC-style-commands-doesn-t-work-after-amqp-get-rpc-reply-return-AMQP-RESPONSE-SERVER-EXCEN-tp28119p28249.html, 
you must respond to channel/connection exceptions; otherwise the server 
will not reclaim the resources.

Regards,

Matthias.

From 314992959 at qq.com  Tue Jul 23 04:32:42 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 22 Jul 2013 20:32:42 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAE3HoVScwL=QrDDcDdGX5CT1Y9vptCcwe6qey2OzQP5G7eLyow@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
	<1374544670233-28262.post@n5.nabble.com>
	<CAE3HoVScwL=QrDDcDdGX5CT1Y9vptCcwe6qey2OzQP5G7eLyow@mail.gmail.com>
Message-ID: <1374550362040-28265.post@n5.nabble.com>

I  found  that  I need  to   use amqp_send_method()  to send  
AMQP_CHANNEL_CLOSE_OK_METHOD  to rabbitmq Server    if   the program  occur 
SERVEREXCEPTION  : CHANNEL_CLOSE_METHOD .  



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-RPC-style-commands-doesn-t-work-after-amqp-get-rpc-reply-return-AMQP-RESPONSE-SERVER-EXCEN-tp28119p28265.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Tue Jul 23 04:50:12 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 23 Jul 2013 04:50:12 +0100
Subject: [rabbitmq-discuss] problem building Documentation - release
	3.1.3
In-Reply-To: <51ED0770.5030503@ific.uv.es>
References: <51E92161.7030203@ific.uv.es> <51E9AE29.8010104@rabbitmq.com>
	<51ED0770.5030503@ific.uv.es>
Message-ID: <51EDFD74.7050100@rabbitmq.com>

Alvaro,

On 22/07/13 11:20, Alvaro Fernandez Casani wrote:
> El 19/07/13 23:22, Matthias Radestock escribi?:
>> On 19/07/13 12:22, Alvaro Fernandez Casani wrote:
>>> in the process of installing the release 3.1.3, it builds the
>>> documentation, but fails in my Ubuntu box:
>>> [...]
>>
>> No idea what's going wrong there, but why are you building from source
>> at all? Simply install the 3.1.3 debian package, as per
>> http://www.rabbitmq.com/install-debian.html.
>
>   I wanted to be sure can build and install from source, just in case we
> need to modify sources.

Fair enough.

> I spotted this, and thought others might be having the same problem...

The doc build works fine for me, and I'm on ubuntu too and have exactly 
the same versions of all the tools as you listed.

If you can debug this yourself a little further that would be great.

Matthias.

From 314992959 at qq.com  Tue Jul 23 04:51:32 2013
From: 314992959 at qq.com (3k4b251)
Date: Mon, 22 Jul 2013 20:51:32 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
Message-ID: <1374551492662-28266.post@n5.nabble.com>

 if   I  have    many   consumers  on  this  channel ,   when  the channel 
exception  happened.  it  means  I lose  all  the consumers  on  the 
channel  ?   How  can  I  to keep  the  consumers,  I  only  can   use
amqp_basic_consume()   to  request  consumer   again  on new  channel ?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-c-RPC-style-commands-doesn-t-work-after-amqp-get-rpc-reply-return-AMQP-RESPONSE-SERVER-EXCEN-tp28119p28266.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael.s.klishin at gmail.com  Tue Jul 23 04:54:56 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 23 Jul 2013 07:54:56 +0400
Subject: [rabbitmq-discuss] rabbitmq-c RPC-style commands doesn't work
 after amqp_get_rpc_reply return AMQP_RESPONSE_SERVER_EXCEPTION
In-Reply-To: <1374551492662-28266.post@n5.nabble.com>
References: <1374042658127-28119.post@n5.nabble.com>
	<CAE3HoVQjKfmMxD5WAj=QR7EuX=dvkwU9xBj_Y6k_hYi4kw=JqQ@mail.gmail.com>
	<CAAt2poKP+oACBDcwmAec-bccwwEGTYQ-_oiHQ-nh5jcRQQ12CA@mail.gmail.com>
	<1374551492662-28266.post@n5.nabble.com>
Message-ID: <CAE3HoVQ1O6y-i6i_Cc2PG4jytXJw3UrO=iZm9cKw-cp9Yifmhw@mail.gmail.com>

2013/7/23 3k4b251 <314992959 at qq.com>

>  if   I  have    many   consumers  on  this  channel ,   when  the channel
> exception  happened.  it  means  I lose  all  the consumers  on  the
> channel  ?
>

Correct.


> How  can  I  to keep  the  consumers,  I  only  can   use
> amqp_basic_consume()   to  request  consumer   again  on new  channel ?
>

Correct.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/a732ac8f/attachment.htm>

From mcintoshj at gmail.com  Tue Jul 23 05:43:33 2013
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Mon, 22 Jul 2013 23:43:33 -0500
Subject: [rabbitmq-discuss] blocked producers
In-Reply-To: <CABz1xsXoV=EGKTC5f86304nf9JTCXz9Aww7hDjshh-9NZUhc4Q@mail.gmail.com>
References: <15c40c58-a27b-4c66-beac-7b92fb1f6c87@googlegroups.com>
	<CAE3HoVQ7h9F+kLXXfqVfyYbMsn-zS_u50FKTGOHWYOyOHqTFUw@mail.gmail.com>
	<CABz1xsUiWuwYvzgXxJE2wqCRVpF1R10gLZ6=hVU0aE0nfeW4tA@mail.gmail.com>
	<51ED84A1.9010802@rabbitmq.com>
	<CABz1xsXoV=EGKTC5f86304nf9JTCXz9Aww7hDjshh-9NZUhc4Q@mail.gmail.com>
Message-ID: <CAD6m6fFE8wVT+1aQ8gFm0_R2d4-AQrBFznQpRZ2tw1-usCUriQ@mail.gmail.com>

Note, this is why you have clustering and failover (i.e. load balancers)
between your client and rabbit servers.  Then across sites you can do
shoveling/federation for further disconnects.  But generally with-in a
local area network, a load balancer works wonders for this.  See:
http://rabbitmq.com/ha.html
for some more details,
Jason


On Mon, Jul 22, 2013 at 3:50 PM, Thierry Thelliez <
thierry.thelliez.tech at gmail.com> wrote:

>
> Yes, I agree that a local queue might not be the answer (and we could go
> in a recursive argument;-).
>
> But I guess that the client/producer should have a way to store events in
> case the message broker goes down. Using a local database might be an
> option (although that's just another moving part and that could be
> considered like a local queue system as well).
>
> I am just curious about what people do in production.
>
> I need to send user generated files to a conversion worker pool.  If the
> message broker goes down for any reason, the clients/producers need to
> continue dealing with the incoming traffic and locally store the files
> until the broker goes back up.  In other words, it seems like the client
> needs to keep a record of the ongoing transactions/conversions.  Is that
> correct?
>
> Thierry
>
>
>
>
>
>
>
>
>
>
>
> On Mon, Jul 22, 2013 at 1:14 PM, Matthias Radestock <matthias at rabbitmq.com
> > wrote:
>
>> Thierry,
>>
>>
>> On 20/07/13 00:12, Thierry Thelliez wrote:
>>
>>> Interesting discussion.   I am new to RabbitMQ and I am trying to
>>> understand the coding and architecture requirements on the Producer side.
>>>
>>> What happens if the Producer cannot push to a queue?  Does that mean
>>> that the Producer system should plan for its own local queue until the
>>> broker is back?  What do you do in production when you do not want to
>>> loose these messages?
>>>
>>
>> That depends on the app and what failure scenarios you are most concerned
>> about.
>>
>> Local queues add another moving part that itself can fail.
>>
>>
>> Note that the thread discussed blocked producers. No messages are lost in
>> that situation; message loss would only occur if client or server are
>> terminated/crash or there is a prolonged network disruption.
>>
>>
>> Matthias.
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Jason McIntosh
http://mcintosh.poetshome.com/blog/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/9feb35b2/attachment.htm>

From mcintoshj at gmail.com  Tue Jul 23 06:06:30 2013
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Tue, 23 Jul 2013 00:06:30 -0500
Subject: [rabbitmq-discuss] Best Practices on using Channels?
In-Reply-To: <CAKgmDnFo1WiN_27OHwN4oR_YfKACWCpiRWJqOC2RAuvW+evGtg@mail.gmail.com>
References: <E3DCDDAD-1242-420C-B685-9F0C033E0243@gmail.com>
	<CAKgmDnFo1WiN_27OHwN4oR_YfKACWCpiRWJqOC2RAuvW+evGtg@mail.gmail.com>
Message-ID: <CAD6m6fFLzT=ZoiH8LrOmMp_OiC3jrMuJse5C255rbz7RkGdNmQ@mail.gmail.com>

We actually do one connection per running application (JVM), with-in that
JVM each "thread" gets it's own channel.  This works rather well in web
based contexts for us.  When we have synchronous ordered message
requirements, we use a single rabbit queue and server, with a publish
directly to that queue/server, and a consume from the same one (not
terribly ideal but it seems to be working).
Jason


On Fri, Jul 19, 2013 at 4:19 PM, Laing, Michael
<michael.laing at nytimes.com>wrote:

> Hi Fran?ois,
>
> I didn't see anyone else respond so I can tell you what we do.
>
> There are lots of Quality of Service parameters set at the channel level.
> Since we have a moderate and stable collection of long-lived
> queues/exchanges, and long-lived connections for publishing/consuming, we
> typically use a channel per, to allow flexibility re QoS.
>
> One general rule is that a channel should be handled by only one thread.
> We use asynch event loop processing so it is normally not an issue for us
> but it may be for you.
>
> For asynch RPC functionality we set up a reply_to queue and use the
> correlation_id to disambiguate responses. Some people allocate a temporary
> queue for this purpose - if you use that model, you would probably want the
> temp queues in the same channel and they would then share the QoS
> parameters.
>
> Hope this helps,
>
> Michael
>
>
> On Fri, Jul 19, 2013 at 4:03 PM, Fran?ois Beausoleil <
> francois.beausoleil at gmail.com> wrote:
>
>> I'm currently using two connections to RabbitMQ: one for consumers, one
>> for publishers. This is to prevent throttling when the RabbitMQ instance
>> triggers it's memory alarm.
>>
>> What about using channels? One channel per connection, or one channel per
>> queue/exchange, or a mix? I realize this is similar to the green thread vs
>> os threads in managed VMs. Are there advantages of one over the other?
>>
>> Thanks,
>> Fran?ois Beausoleil
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Jason McIntosh
http://mcintosh.poetshome.com/blog/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/218ea4c4/attachment.htm>

From mcintoshj at gmail.com  Tue Jul 23 06:10:51 2013
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Tue, 23 Jul 2013 00:10:51 -0500
Subject: [rabbitmq-discuss] Retrying messages that failed to process
In-Reply-To: <51E74F28.6080404@rabbitmq.com>
References: <CABPX_bd-_uGtGNsJ_SoVcydqwRcSDVBqTu8JDecAZqSyCQST_Q@mail.gmail.com>
	<CAKgmDnHH0uDdmUyjzfQW=-N=xA=PO-z_XSjzpHv_NBiSiQLHNA@mail.gmail.com>
	<51E74F28.6080404@rabbitmq.com>
Message-ID: <CAD6m6fH-4gH0DVGEzsMC4NdzH0_HoCCF+Zgq6FOr55TToT3QkA@mail.gmail.com>

If you're in Java and using the spring frameworks, there's retry handling
support.
https://github.com/jamescarr/spring-amqp-extras
You could probably implement something similar - on an "exception" publish
to an error queue that has priority?  Just an idea :)
Jason


On Wed, Jul 17, 2013 at 9:12 PM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> On 18/07/13 00:54, Laing, Michael wrote:
>
>> AFIK, however, the rejected/nacked messages is queued as if it were new,
>> but with the redeliver flag set, AND any consumer may receive them,
>> including the one which rejected/nacked them. Of course if you have
>> multiple consumers on a queue, the rabbit will round-robin.
>>
>> But, the rejected/nacked message does not go to the 'front' of the queue
>> as you desired (again AFAIK).
>>
>
> Actually, since RabbitMQ 2.7.0 messages get requeued in publication order.
> See http://www.rabbitmq.com/**semantics.html#ordering<http://www.rabbitmq.com/semantics.html#ordering>for the details.
>
> Matthias.
> ______________________________**_________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.**rabbitmq.com<rabbitmq-discuss at lists.rabbitmq.com>
> https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss<https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss>
>



-- 
Jason McIntosh
http://mcintosh.poetshome.com/blog/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/13fe9903/attachment.htm>

From mcintoshj at gmail.com  Tue Jul 23 06:17:12 2013
From: mcintoshj at gmail.com (Jason McIntosh)
Date: Tue, 23 Jul 2013 00:17:12 -0500
Subject: [rabbitmq-discuss] consume messages from multiple queues based
	on wildcard?
In-Reply-To: <771C4BD8-D941-4E96-B99A-47E7B8007F57@gopivotal.com>
References: <CANaOvh97pV6xgWGu2UzNW+4dfUZkD6+3MZ_i4qrMCCijy_N7Gw@mail.gmail.com>
	<0EB608E9-AC5A-40F5-943C-75CC7F5BB767@gopivotal.com>
	<CANaOvh-AdpUGkJAq7hOnK7c7+G0sMi-5v5popvP73tPY7aSKmg@mail.gmail.com>
	<771C4BD8-D941-4E96-B99A-47E7B8007F57@gopivotal.com>
Message-ID: <CAD6m6fHL=schJHFeGFgybkuid0z_G6R9dbjOYybc6zNyUw_CCg@mail.gmail.com>

We've used the x-consistent-hash plugin to good effect on some of this,
particularly on multi-site locations where the pipe is big but latency is
high.  i.e. we publish to a single exchange (or multiple exchanges) as a
direct queue, which binds to an x-consistent-hash exchange using whatever
routing key.  Then that x-consistent-hash exchange binds to N queues of
name "queue.N".  We then shovel each of those queues to a remote site,
where they all land on the same exchange and get merged back into a single
queue.

If you really need your consumer to consume from multiple queues and you
don't know the queue names, you can query the management UI to get a list
of queues.  We separate our stuff out into virtual host per applications to
allow some of this functionality.

Jason


On Wed, Jul 17, 2013 at 3:56 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> David van Geest:
>
> > We would like to scale our worker processes on the other end of the
> message queue(s) up and down as needed, without having the message
> producers know anything about it.  Any ideas on how to achieve this goal?
>
> You can use multiple queues and have multiple consumers for each one.
>
> Every app instance can run multiple consumers. Choosing what queues to
> consume
> from is probably application-specific. Techniques such as consistent
> hashing
> can help ensure every app instance consumes from about the same # of
> queues.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Jason McIntosh
http://mcintosh.poetshome.com/blog/
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/8b7ebaec/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 08:02:58 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 00:02:58 -0700 (PDT)
Subject: [rabbitmq-discuss] Reconnecting to the Web-Stomp plugin after a
 network disconnection.
In-Reply-To: <a219b905-29db-46d3-8e1a-ef559e421e7e@googlegroups.com>
References: <a219b905-29db-46d3-8e1a-ef559e421e7e@googlegroups.com>
Message-ID: <d43a1e74-7daa-410d-a3db-550bcbd66fb9@googlegroups.com>

Hi
Probably you need to create new SockJS object (tcp connection) on 
disconnect. See line 16. I assume ws is TCP connection object. More info 
for SockJS you can find at https://github.com/sockjs/sockjs-client.
Try to move lines 16-22 to Connect() function.
Also, any debug messages on reconnect attempt are welcome. 

On Saturday, July 20, 2013 8:31:03 PM UTC+3, joshu... at hotmail.com wrote:
>
> Using references on http://jmesnil.net/stomp-websocket/doc/ and 
> http://www.rabbitmq.com/web-stomp.html, I managed to come out with my own 
> Web-Stomp js code that can connect and receive messages.  However, I'm 
> unable to reconnect in the event the connection to Web-Stomp server breaks.
>
> What I did is on on_connect_error, I did a client.disconnect, followed by 
> a client.connect.  The disconnect works but the connect fails.  
>
> Since I'm not able to find any code example that deals with reconnecting, 
> I took a look at sockjs groups but it appears to me that the code used for 
> sockjs is different from that of web-stomp plugin examples.
>
> Here's the full js code: Here is my full code: 
> http://pastebin.com/dtEBnzGP
>
>
>    1. function on_connect_error(error) {
>    2.   $('#output').append('Connection failed! Error:'+ error + "<br>");
>    3.     $('#output').append('Disconnecting....'  + "<br>");
>    4.  client.disconnect(function() {
>    5.     $('#output').append('Disconnected!' + "<br>");
>    6.   });
>    7.   $('#output').append('Reconnecting...' + "<br>");
>    8.   Connect();
>    9. }
>    
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/7e65a81a/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 08:31:16 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 00:31:16 -0700 (PDT)
Subject: [rabbitmq-discuss] Modify the rabbitmq management URL
In-Reply-To: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>
References: <1586c1dd-d433-4230-b78f-88312f88fb79@googlegroups.com>
Message-ID: <c075fd14-a381-4067-bfed-39cf3af38bdf@googlegroups.com>

Hi
You can use NGINX rewrite rules. For example
Redirect* http://localhost:55672/testNeha *to *http://localhost:55673/<http://localhost:55672/>
*
Redirect* http://localhost:55672/testNeha2 <http://localhost:55672/testNeha>
 *to *http://localhost:55674/ <http://localhost:55672/>*

Be aware, that port numbers different.

Please, give more info about your problem to offer you more appropriate 
solution. Is it necessary to access several rmq management panels on single 
port? If yes, this is appropriate solution. If not, you are welcome.
*
*On Thursday, July 4, 2013 9:18:58 AM UTC+3, kira... at gmail.com wrote:
>
> How can i change the rabbitmq management url from *http://localhost:55672/
> * to *http://localhost:55672/testNeha* in windows and linux platform?? 
>
> Please help......
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/86c07f74/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 08:41:27 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 00:41:27 -0700 (PDT)
Subject: [rabbitmq-discuss] Error in declaring a queue.
In-Reply-To: <164a19a8-a874-40bf-9f54-da73620ec636@googlegroups.com>
References: <164a19a8-a874-40bf-9f54-da73620ec636@googlegroups.com>
Message-ID: <641c4fe4-dbd1-4eb8-b6a3-b14a06923320@googlegroups.com>

What is AMQP_PASSIVE equal to? It should be false (by default) to declare 
new queue and false to to check queue for existance. Try to 
remove $this->queue->setFlags(AMQP_PASSIVE); line entirely. Read docs at 
rabbitMQ official site for more info about queue declaration method and its 
flags.

On Wednesday, July 3, 2013 9:24:13 AM UTC+3, Venky wrote:
>
> Hi All,
>
> I am trying to declare a queue in RabbitMQ with php.
>
> Here is my code
>
> function declareQueue($queue_name)
> {
> $this->queue = new AMQPQueue($this->channel);   //channel is already 
> created. am omitting that code from here
> $this->queue->setName($queue_name);
> $this->queue->setFlags(AMQP_DURABLE);
> $this->queue->setFlags(AMQP_PASSIVE);
> $this->queue->declare();
> }
>
> $amqp -> declareQueue("myqueue");
>
>
>
> This part of code is giving an error when there is no queue in RabbitMQ. 
> the error is:
>
> PHP Fatal error:  Uncaught exception 'AMQPQueueException' with message 
> 'Server channel error: 404, message: NOT_FOUND - no queue 'myqueue' in 
> vhost '/''
>
>
>
> Every thing is going fine when the queue is already created in Rabbitmq.
>
>
> Any help please.
>
> Thanks in advance.
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/d23997c4/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 09:23:28 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 01:23:28 -0700 (PDT)
Subject: [rabbitmq-discuss] Question about erlang cookie
In-Reply-To: <dac2a7db-a6bf-4bca-bd97-fd733a2afed9@googlegroups.com>
References: <dac2a7db-a6bf-4bca-bd97-fd733a2afed9@googlegroups.com>
Message-ID: <b61f392c-7fc7-4e05-a94f-4f6d247b4b8d@googlegroups.com>

hi

1) Probably installation created files with rabbitmq user ownes. It is not 
good practice to run rabbitmq server with root privileges. RabbitMQ need 
rights to read/write to mnesia and log dirs only. You can run RMQ with non 
root user.

2) Default place for .erlang.cookie file is user home directory. Probably 
at the installation RMQ places cookie in its installation dir 
(/var/lib/rabbitmq). Read 
http://www.erlang.org/doc/reference_manual/distributed.html and 
http://www.rabbitmq.com/clustering.html for more info about erlang cookie.

3) Your understanding is correct. RMQ uses only one cookie file. To be 
consistent you can delete one of them. Start with that placed in user home 
dir. Probably RMQ creates cookie in home dir when started not with rabbitmq 
user or not with init script (service rabbitmq strarted). I use precompiled 
RMQ package that place in /opt dir. 

4) You doesn't I think. Different cookies can be the reason of such 
problems. To help you, it necessary to know
- how you start rabbitmq node (1 and 2)
- try to start nodes not in cluster on different servers with the same 
cookie and with the full name resolving (-name flag instead of -sname). 
Then try to get status of each node from it server and from another.

[server1]# rabbitmq -n rabbtimq at server1 status
[server1]# rabbitmq -n rabbtimq at server2 status
[server2]# rabbitmq -n rabbtimq at server1 status
[server2]# rabbitmq -n rabbtimq at server2 status

It is minimum of actions to start resolve your problem.

On Tuesday, July 2, 2013 1:42:37 PM UTC+3, Priyanki Vashi wrote:
>
> Hi there ,
>
> I had a question about erlang cookie, which gets generated when we start 
> rabbitmq server. The situation is as follows.
>
> 1) Even if I did not created any user named 'rabbitmq', there are files, 
> which are owned by this user. Does the installation or startup of 
> rabbitmq-server does this ? Also is it OK to use root user to do server 
> administration operation or will it be considered not so good practice ? 
>
> 2) I use root user to start and stop rabbitmq server and when I start the 
> server, I see that a file .erlang.cookie gets generated in root home dir. 
> That is correct as per my understanding but I also see that there is 
> another file with the same .erlang.cookie gets generated in 
> /var/lib/rabbitmq
>
> 3) Also these two erlang cookies are different from each other. Why there 
> are two erlang cookie files gets generated ? What is the importance ?
> My theoretical understanding is there should be only one erlang cookie 
> should get generated and that one should be in home dir of user, which 
> starts the rabbitmq-server.
> Is this correct understanding or ? 
>
> 4) Also do I need to configure different values of epmd ports when I want 
> to run cluster with two physical nodes or it's OK to keep it as default ? 
>     I thought NO need to change but then since I am running into these 
> problems thought of asking. 
>
>
> I would like to understand this bcoz, I tried to setup a cluster on two 
> different physical machines and as per the guidelines gives in 'rabbitmq in 
> action', before joining nodes running on different physical machines in the 
> cluster, the erlang cookie should be sync meaning that both the nodes 
> should have same erlang cookie so I tried to copy cookie from first node to 
> second and tried to restart second node but then I had problems with 
> restarting the node or even stopping the node and I get error. I also 
> checked the latest log file and it says 
> "=ERROR REPORT==== 2-Jul-2013::19:48:28 ===
> ** Connection attempt from disallowed node rabbitmqctl40424 at nazgul **" , 
> which I believe is due to the fact that erlang cookie, which it had 
> originally when I started the node has changed now and hence it does not 
> allow me to stop the node. Is my understanding correct here or ?
>
> Error mesaage while stopping or restarting the node after copying erlang 
> cookie from first node to second one.
> Error: unable to connect to node rabbit_2 at nazgul: nodedown
>
> DIAGNOSTICS
> ===========
>
> nodes in question: [rabbit_2 at nazgul]
>
> hosts, their running nodes and ports:
> - nazgul: [{rabbit_2,58454},{rabbit,38771},{rabbitmqctl40424,60952}]
>
> current node details:
> - node name: rabbitmqctl40424 at nazgul
> - home dir: /var/lib/rabbitmq
> - cookie hash: ad/NgkXjjR95x3cMejxwqg==
>
>
> Thank you in advance and please guide me so that I understand what had 
> gone wrong here.
>
> Best Regards,
> Priyanki.
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/d4137dcc/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 09:43:12 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 01:43:12 -0700 (PDT)
Subject: [rabbitmq-discuss] How to get the list of messages from Queue
 without consuming the messages
In-Reply-To: <889c82c8-57cc-44d7-8db3-f3969a261bbb@googlegroups.com>
References: <889c82c8-57cc-44d7-8db3-f3969a261bbb@googlegroups.com>
Message-ID: <ca124e0a-3cd9-4b1e-9062-3de6042df023@googlegroups.com>

Hi
I am not familiar with spring integration. Is it framework(or platform) 
with RabbitMQ in backend?
I think that get messages using api without consuming is impossible. You 
can check this at 
http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_1_3/priv/www/api/index.html

> Get messages from a queue. (This is not an HTTP GET as it will alter the 
> state of the queue.)

{"count":5,"requeue":true,"encoding":"auto","truncate":50000}

As you can see, http api also counsume and requeue messages.
The first solution to enable http management plugin and use its api. And 
the second one to consume messages and then requeue them using ampq 
protocol.
Consuming all messages from queue is not good solution, as queue size can 
be huge.
 
On Wednesday, July 17, 2013 4:05:15 PM UTC+3, rajasekhar kanugula wrote:
>
> I want to display the list of messages from a Queue (Reading purpose), 
> some thing like get messages of RabbitMQ management plugin.
> I am using Spring RabbitMQ integration. I gone through the api and I 
> couldn't find anything.
> Please let me know how to do this.
>
> Thanks,
> Raj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/370a170f/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 09:53:55 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 01:53:55 -0700 (PDT)
Subject: [rabbitmq-discuss] amqp_rpc_server
In-Reply-To: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
References: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
Message-ID: <e9d30def-0451-461f-83a6-49950cbbdbde@googlegroups.com>

Is there a problem with start function? You can manually link or monitor 
pid that start function return. It is more flexible.

On Wednesday, July 17, 2013 3:51:03 PM UTC+3, Carlo Bertoldi wrote:
>
> Hello,
>  I'm looking through the amqp_rpm_server, in particular the start 
> function. I wonder why you used a start instead of a start_link.
>
> Cheers,
>  Carlo
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/32e36b5c/attachment.htm>

From emile at rabbitmq.com  Tue Jul 23 09:59:32 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 23 Jul 2013 09:59:32 +0100
Subject: [rabbitmq-discuss] How to get the list of messages from Queue
 without consuming the messages
In-Reply-To: <ca124e0a-3cd9-4b1e-9062-3de6042df023@googlegroups.com>
References: <889c82c8-57cc-44d7-8db3-f3969a261bbb@googlegroups.com>
	<ca124e0a-3cd9-4b1e-9062-3de6042df023@googlegroups.com>
Message-ID: <51EE45F4.9050800@rabbitmq.com>


On 23/07/13 09:43, Anton Sizov wrote:

> I am not familiar with spring integration. Is it framework(or platform)
> with RabbitMQ in backend?

See http://www.springsource.org/spring-amqp

> I think that get messages using api without consuming is impossible.

There is no way to browse a queue, but messages can be received and
returned to the queue.

Messages can be received synchronously (basic.get) or asynchronously
(basic.consume).





-Emile




From vashi.priyanki at gmail.com  Tue Jul 23 10:01:08 2013
From: vashi.priyanki at gmail.com (Priyanki Vashi)
Date: Tue, 23 Jul 2013 11:01:08 +0200
Subject: [rabbitmq-discuss] Question about erlang cookie
In-Reply-To: <b61f392c-7fc7-4e05-a94f-4f6d247b4b8d@googlegroups.com>
References: <dac2a7db-a6bf-4bca-bd97-fd733a2afed9@googlegroups.com>
	<b61f392c-7fc7-4e05-a94f-4f6d247b4b8d@googlegroups.com>
Message-ID: <CA+0nT8BNVrso9yzmYx5aE2KMKbFRKbuqWUrqmSd6ao5mEis3Qg@mail.gmail.com>

Hi there ,

Thank you for answer on this.

I was away for few days so could not reply immediately. I had managed to
solve the problem.
It was on the similar lines as replied by Anton.

1) First I copied the single cookie in all the nodes. It was
/var/lib/rabbitmq path.
2) Another problem was that the nodes were able to identify each other only
by IP address and not by hostname and since in one of the post, I read its
necessary that nodes identify each other by hostname as well since when we
start nodes it picks node name. So edited /etc/hosts file on all the nodes
and added IP address and hostname.

Best Regards,
Priyanki.


On Tue, Jul 23, 2013 at 10:23 AM, Anton Sizov <a.sysoff at gmail.com> wrote:

> hi
>
> 1) Probably installation created files with rabbitmq user ownes. It is not
> good practice to run rabbitmq server with root privileges. RabbitMQ need
> rights to read/write to mnesia and log dirs only. You can run RMQ with non
> root user.
>
> 2) Default place for .erlang.cookie file is user home directory. Probably
> at the installation RMQ places cookie in its installation dir
> (/var/lib/rabbitmq). Read
> http://www.erlang.org/doc/reference_manual/distributed.html and
> http://www.rabbitmq.com/clustering.html for more info about erlang cookie.
>
> 3) Your understanding is correct. RMQ uses only one cookie file. To be
> consistent you can delete one of them. Start with that placed in user home
> dir. Probably RMQ creates cookie in home dir when started not with rabbitmq
> user or not with init script (service rabbitmq strarted). I use precompiled
> RMQ package that place in /opt dir.
>
> 4) You doesn't I think. Different cookies can be the reason of such
> problems. To help you, it necessary to know
> - how you start rabbitmq node (1 and 2)
> - try to start nodes not in cluster on different servers with the same
> cookie and with the full name resolving (-name flag instead of -sname).
> Then try to get status of each node from it server and from another.
>
> [server1]# rabbitmq -n rabbtimq at server1 status
> [server1]# rabbitmq -n rabbtimq at server2 status
> [server2]# rabbitmq -n rabbtimq at server1 status
> [server2]# rabbitmq -n rabbtimq at server2 status
>
> It is minimum of actions to start resolve your problem.
>
> On Tuesday, July 2, 2013 1:42:37 PM UTC+3, Priyanki Vashi wrote:
>>
>> Hi there ,
>>
>> I had a question about erlang cookie, which gets generated when we start
>> rabbitmq server. The situation is as follows.
>>
>> 1) Even if I did not created any user named 'rabbitmq', there are files,
>> which are owned by this user. Does the installation or startup of
>> rabbitmq-server does this ? Also is it OK to use root user to do server
>> administration operation or will it be considered not so good practice ?
>>
>> 2) I use root user to start and stop rabbitmq server and when I start the
>> server, I see that a file .erlang.cookie gets generated in root home dir.
>> That is correct as per my understanding but I also see that there is
>> another file with the same .erlang.cookie gets generated in
>> /var/lib/rabbitmq
>>
>> 3) Also these two erlang cookies are different from each other. Why there
>> are two erlang cookie files gets generated ? What is the importance ?
>> My theoretical understanding is there should be only one erlang cookie
>> should get generated and that one should be in home dir of user, which
>> starts the rabbitmq-server.
>> Is this correct understanding or ?
>>
>> 4) Also do I need to configure different values of epmd ports when I want
>> to run cluster with two physical nodes or it's OK to keep it as default ?
>>     I thought NO need to change but then since I am running into these
>> problems thought of asking.
>>
>>
>> I would like to understand this bcoz, I tried to setup a cluster on two
>> different physical machines and as per the guidelines gives in 'rabbitmq in
>> action', before joining nodes running on different physical machines in the
>> cluster, the erlang cookie should be sync meaning that both the nodes
>> should have same erlang cookie so I tried to copy cookie from first node to
>> second and tried to restart second node but then I had problems with
>> restarting the node or even stopping the node and I get error. I also
>> checked the latest log file and it says
>> "=ERROR REPORT==== 2-Jul-2013::19:48:28 ===
>> ** Connection attempt from disallowed node rabbitmqctl40424 at nazgul **" ,
>> which I believe is due to the fact that erlang cookie, which it had
>> originally when I started the node has changed now and hence it does not
>> allow me to stop the node. Is my understanding correct here or ?
>>
>> Error mesaage while stopping or restarting the node after copying erlang
>> cookie from first node to second one.
>> Error: unable to connect to node rabbit_2 at nazgul: nodedown
>>
>> DIAGNOSTICS
>> ===========
>>
>> nodes in question: [rabbit_2 at nazgul]
>>
>> hosts, their running nodes and ports:
>> - nazgul: [{rabbit_2,58454},{rabbit,**38771},{rabbitmqctl40424,**60952}]
>>
>> current node details:
>> - node name: rabbitmqctl40424 at nazgul
>> - home dir: /var/lib/rabbitmq
>> - cookie hash: ad/NgkXjjR95x3cMejxwqg==
>>
>>
>> Thank you in advance and please guide me so that I understand what had
>> gone wrong here.
>>
>> Best Regards,
>> Priyanki.
>>
>>
>>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/138877b5/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 10:39:09 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 02:39:09 -0700 (PDT)
Subject: [rabbitmq-discuss] How to not publish messages,
	if queue is full?
In-Reply-To: <025976ec-568b-475c-aa54-234407194476@googlegroups.com>
References: <025976ec-568b-475c-aa54-234407194476@googlegroups.com>
Message-ID: <0a47b49b-b94e-4608-9624-ee04143cb51b@googlegroups.com>

Hi
Do you really need only 10 messages in queue? What is real number?
Can you describe you problem in details?

Also you can read more about flow control at
http://www.rabbitmq.com/memory.html
and
http://www.rabbitmq.com/amqp-0-9-1-reference.html#channel.flow

On Monday, July 15, 2013 5:14:40 PM UTC+3, ser... at openbridge.com wrote:
>
> Hi everybody,
>
> I tried to put a limit on the queue size using 'x-max-length', but the 
> problem is Messages will be dropped or dead-lettered from the front of the 
> queue to make room for new messages once the limit is reached.
>  
> What are the possible ways to not drop the messages? Ideally I would like 
> to throw an Exception if queue is full. 
>
> First I was thinking to check the queue size, and if it's full than stop. 
> But for example if I have 5 producers and queue limit size is set to 10, 
> and I already have 9 messages in the queue, than all 5 producers will check 
> the size, and publish their messages and 4 messages will be lost.
>
> That's how I declare x-max-length':
>
> result = channel.queue_declare(queue='Test', arguments={ 'x-max-length' : 
> 10})
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/044e6a2e/attachment.htm>

From psdc1978 at gmail.com  Tue Jul 23 10:47:15 2013
From: psdc1978 at gmail.com (=?ISO-8859-1?Q?Pedro_S=E1_da_Costa?=)
Date: Tue, 23 Jul 2013 10:47:15 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <51ED8383.2050702@rabbitmq.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
Message-ID: <CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>

Hi,

I restate my question: I want to establish AMQP connections from clients
outside amazon to my broker inside amazon. I tried to configure the cluster
but I still can't connect to the rabbitmq host. I think the error is
"could_not_start_tcp_listener"
that it is in the logs below. How I set-up the rabbimq in Amazon EC2?

I did the netstat and there isn't any process running on port 5672. I also
open all the ports in the Security group in Amazon EC2 console. The
configuration that I have  in /etc/rabbitmq/rabbitmq-env.conf is

:/var/log/rabbitmq$ cat /etc/rabbitmq/rabbitmq-env.conf
RABBITMQ_NODE_IP_ADDRESS=XX.235.XXX.XXX

Here are the logs in /var/log/rabbitmq dir.


:/var/log/rabbitmq$ cat rabbit at ip-10-170-YYY-YYY.log

=INFO REPORT==== 23-Jul-2013::09:26:36 ===
Starting RabbitMQ 3.1.3 on Erlang R15B01
Copyright (C) 2007-2013 VMware, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jul-2013::09:26:36 ===
node           : rabbit at ip-10-170-YYY-YYY
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : rVPtw0Y5kTBT3E/GHFwvsA==
log            : /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
sasl log       : /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at ip-10-170-YYY-YYY

=INFO REPORT==== 23-Jul-2013::09:26:37 ===
Limiting to approx 924 file handles (829 sockets)

=INFO REPORT==== 23-Jul-2013::09:26:37 ===
Memory limit set to 1499MB of 3749MB total.

=INFO REPORT==== 23-Jul-2013::09:26:37 ===
Disk free limit set to 1000MB

=INFO REPORT==== 23-Jul-2013::09:26:37 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-Jul-2013::09:26:37 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=ERROR REPORT==== 23-Jul-2013::09:26:37 ===
failed to start TCP Listener on XX.235.XXX.XXX:5672 - eaddrnotavail (can't
assign requested address)

=INFO REPORT==== 23-Jul-2013::09:26:37 ===
Error description:
   {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log

Stack trace:
   [{rabbit_networking,start_listener0,4,[]},
    {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
    {rabbit_networking,start_listener,4,[]},
    {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
    {rabbit_networking,boot_tcp,0,[]},
    {rabbit_networking,boot,0,[]},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
    {rabbit,run_boot_step,1,[]}]


=INFO REPORT==== 23-Jul-2013::09:26:38 ===
Error description:
   {could_not_start,rabbit,
       {bad_return,
           {{rabbit,start,[normal,[]]},
            {'EXIT',
                {rabbit,failure_during_boot,

{could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log


=ERROR REPORT==== 23-Jul-2013::09:26:38 ===
** gen_event handler rabbit_error_logger crashed.
** Was installed in error_logger
** Last event was: {info_msg,<0.30.0>,
                    {<0.2.0>,
                     "Error description:~n   ~p~n~nLog files (may contain
more information):~n   ~s~n   ~s~n~n",
                     [{could_not_start,rabbit,
                       {bad_return,
                        {{rabbit,start,[normal,[]]},
                         {'EXIT',
                          {rabbit,failure_during_boot,
                           {could_not_start_tcp_listener,
                            {"XX.235.XXX.XXX",5672}}}}}}},
                      "/var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log",
                      "/var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
"]}}
** When handler state == {resource,<<"/">>,exchange,<<"amq.rabbitmq.log">>}
** Reason == {badarg,[{ets,lookup,
                           [rabbit_exchange,
                            {resource,<<"/">>,exchange,
                                      <<"amq.rabbitmq.log">>}],
                           []},
                      {rabbit_misc,dirty_read,1,[]},
                      {rabbit_basic,publish,1,[]},
                      {rabbit_error_logger,publish1,4,[]},
                      {rabbit_error_logger,handle_event,2,[]},
                      {gen_event,server_update,4,
                                 [{file,"gen_event.erl"},{line,504}]},
                      {gen_event,server_notify,4,
                                 [{file,"gen_event.erl"},{line,486}]},
                      {gen_event,handle_msg,5,
                                 [{file,"gen_event.erl"},{line,248}]}]}


:/var/log/rabbitmq$ cat startup_log

              RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
  ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
  ##  ##
  ##########  Logs: /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
  ######  ##        /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
  ##########
              Starting broker...

BOOT FAILED
===========

Error description:
   {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log

Stack trace:
   [{rabbit_networking,start_listener0,4,[]},
    {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
    {rabbit_networking,start_listener,4,[]},
    {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
    {rabbit_networking,boot_tcp,0,[]},
    {rabbit_networking,boot,0,[]},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
    {rabbit,run_boot_step,1,[]}]



BOOT FAILED
===========

Error description:
   {could_not_start,rabbit,
       {bad_return,
           {{rabbit,start,[normal,[]]},
            {'EXIT',
                {rabbit,failure_during_boot,

{could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
   /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log

{"init terminating in
do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}}}

Thanks,


On 22 July 2013 20:09, Matthias Radestock <matthias at rabbitmq.com> wrote:

> Pedro,
>
>
> On 22/07/13 18:38, Pedro S? da Costa wrote:
>
>> I am trying to configure rabbitmq with EC2. The rabbitmq works when it
>> uses the private IP, but when I try to use the public IP, I can't start
>> the rabbitmq.
>>
>
> Inspecting the log files, as suggested by...
>
>
>  Log files (may contain more information):
>>     /var/log/rabbitmq/rabbit at ip-**10-170-74-198.log
>>     /var/log/rabbitmq/rabbit at ip-**10-170-74-198-sasl.log
>>
>
> ...might offer some clues as to what went wrong.
>
> Matthias.
>



-- 
Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/971c7123/attachment.htm>

From a.sysoff at gmail.com  Tue Jul 23 10:51:06 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Tue, 23 Jul 2013 02:51:06 -0700 (PDT)
Subject: [rabbitmq-discuss] Reading the result queue
In-Reply-To: <23109b57-eb4b-44a5-beaa-ad15aaa1bac9@googlegroups.com>
References: <23109b57-eb4b-44a5-beaa-ad15aaa1bac9@googlegroups.com>
Message-ID: <72b92371-99e0-4525-89fb-338d259c236a@googlegroups.com>

Use http://www.php.net/manual/en/amqpqueue.consume.php or 
http://www.php.net/manual/en/amqpqueue.get.php to get messages from result 
queue.

On Friday, July 12, 2013 8:14:25 PM UTC+3, Rodrigo Vel?squez wrote:
>
> Hello
>
> I need to read the results queue, but have no idea how to do it. Is there 
> a log file i can read?
>
> I know it is json encoded as its shown in the attached image.
>
> I am using Mailerq with RabbitMQ, and PHP programing.
>
> Any help?
>
> Thanks a lot
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/8b516bd3/attachment.htm>

From jesper.louis.andersen at gmail.com  Tue Jul 23 11:03:01 2013
From: jesper.louis.andersen at gmail.com (Jesper Louis Andersen)
Date: Tue, 23 Jul 2013 12:03:01 +0200
Subject: [rabbitmq-discuss] amqp_rpc_server
In-Reply-To: <e9d30def-0451-461f-83a6-49950cbbdbde@googlegroups.com>
References: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
	<e9d30def-0451-461f-83a6-49950cbbdbde@googlegroups.com>
Message-ID: <CAGrdgiVVAHWwXBPfhuYJEBP-QWO6Y-sjHK=ce0NhU_tN91beGw@mail.gmail.com>

On Tue, Jul 23, 2013 at 10:53 AM, Anton Sizov <a.sysoff at gmail.com> wrote:

> Is there a problem with start function? You can manually link or monitor
> pid that start function return. It is more flexible.


Supervisors can't link afterwards. They need the spawn_link invocation
since they expect to be linked right away automatically. Besides, it is not
very Erlang-idiomatic to first spawn then link.


-- 
J.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/43bda28c/attachment.htm>

From psdc1978 at gmail.com  Tue Jul 23 11:21:05 2013
From: psdc1978 at gmail.com (=?ISO-8859-1?Q?Pedro_S=E1_da_Costa?=)
Date: Tue, 23 Jul 2013 11:21:05 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
Message-ID: <CAJ8VZfX1tbjf5Tes24VSVJzZdJwdQPT-PC+r3qjNb5rWa+0rBA@mail.gmail.com>

I had the full netstat result.

$ netstat -plnet
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
    User       Inode       PID/Program name
tcp        0      0 0.0.0.0:4369            0.0.0.0:*               LISTEN
     106        8260        976/epmd
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
     0          7917        731/sshd
tcp6       0      0 :::22                   :::*                    LISTEN
     0          7919        731/sshd


On 23 July 2013 10:47, Pedro S? da Costa <psdc1978 at gmail.com> wrote:

> Hi,
>
> I restate my question: I want to establish AMQP connections from clients
> outside amazon to my broker inside amazon. I tried to configure the cluster
> but I still can't connect to the rabbitmq host. I think the error is "could_not_start_tcp_listener"
> that it is in the logs below. How I set-up the rabbimq in Amazon EC2?
>
> I did the netstat and there isn't any process running on port 5672. I also
> open all the ports in the Security group in Amazon EC2 console. The
> configuration that I have  in /etc/rabbitmq/rabbitmq-env.conf is
>
> :/var/log/rabbitmq$ cat /etc/rabbitmq/rabbitmq-env.conf
> RABBITMQ_NODE_IP_ADDRESS=XX.235.XXX.XXX
>
> Here are the logs in /var/log/rabbitmq dir.
>
>
> :/var/log/rabbitmq$ cat rabbit at ip-10-170-YYY-YYY.log
>
> =INFO REPORT==== 23-Jul-2013::09:26:36 ===
> Starting RabbitMQ 3.1.3 on Erlang R15B01
> Copyright (C) 2007-2013 VMware, Inc.
> Licensed under the MPL.  See http://www.rabbitmq.com/
>
> =INFO REPORT==== 23-Jul-2013::09:26:36 ===
> node           : rabbit at ip-10-170-YYY-YYY
> home dir       : /var/lib/rabbitmq
> config file(s) : (none)
> cookie hash    : rVPtw0Y5kTBT3E/GHFwvsA==
> log            : /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
> sasl log       : /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
> database dir   : /var/lib/rabbitmq/mnesia/rabbit at ip-10-170-YYY-YYY
>
> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
> Limiting to approx 924 file handles (829 sockets)
>
>  =INFO REPORT==== 23-Jul-2013::09:26:37 ===
> Memory limit set to 1499MB of 3749MB total.
>
> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
> Disk free limit set to 1000MB
>
> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
> msg_store_transient: using rabbit_msg_store_ets_index to provide index
>
> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
> msg_store_persistent: using rabbit_msg_store_ets_index to provide index
>
> =ERROR REPORT==== 23-Jul-2013::09:26:37 ===
> failed to start TCP Listener on XX.235.XXX.XXX:5672 - eaddrnotavail (can't
> assign requested address)
>
> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
> Error description:
>    {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>
> Stack trace:
>    [{rabbit_networking,start_listener0,4,[]},
>     {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
>     {rabbit_networking,start_listener,4,[]},
>     {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
>     {rabbit_networking,boot_tcp,0,[]},
>     {rabbit_networking,boot,0,[]},
>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
>     {rabbit,run_boot_step,1,[]}]
>
>
> =INFO REPORT==== 23-Jul-2013::09:26:38 ===
> Error description:
>    {could_not_start,rabbit,
>        {bad_return,
>            {{rabbit,start,[normal,[]]},
>             {'EXIT',
>                 {rabbit,failure_during_boot,
>
> {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>
>
>  =ERROR REPORT==== 23-Jul-2013::09:26:38 ===
> ** gen_event handler rabbit_error_logger crashed.
> ** Was installed in error_logger
> ** Last event was: {info_msg,<0.30.0>,
>                     {<0.2.0>,
>                      "Error description:~n   ~p~n~nLog files (may contain
> more information):~n   ~s~n   ~s~n~n",
>                      [{could_not_start,rabbit,
>                        {bad_return,
>                         {{rabbit,start,[normal,[]]},
>                          {'EXIT',
>                           {rabbit,failure_during_boot,
>                            {could_not_start_tcp_listener,
>                             {"XX.235.XXX.XXX",5672}}}}}}},
>                       "/var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log",
>                       "/var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
> "]}}
> ** When handler state == {resource,<<"/">>,exchange,<<"amq.rabbitmq.log">>}
> ** Reason == {badarg,[{ets,lookup,
>                            [rabbit_exchange,
>                             {resource,<<"/">>,exchange,
>                                       <<"amq.rabbitmq.log">>}],
>                            []},
>                       {rabbit_misc,dirty_read,1,[]},
>                       {rabbit_basic,publish,1,[]},
>                       {rabbit_error_logger,publish1,4,[]},
>                       {rabbit_error_logger,handle_event,2,[]},
>                       {gen_event,server_update,4,
>                                  [{file,"gen_event.erl"},{line,504}]},
>                       {gen_event,server_notify,4,
>                                  [{file,"gen_event.erl"},{line,486}]},
>                       {gen_event,handle_msg,5,
>                                  [{file,"gen_event.erl"},{line,248}]}]}
>
>
> :/var/log/rabbitmq$ cat startup_log
>
>               RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
>   ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
>   ##  ##
>   ##########  Logs: /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>   ######  ##        /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>   ##########
>               Starting broker...
>
> BOOT FAILED
> ===========
>
> Error description:
>    {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>
> Stack trace:
>    [{rabbit_networking,start_listener0,4,[]},
>      {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
>     {rabbit_networking,start_listener,4,[]},
>     {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
>     {rabbit_networking,boot_tcp,0,[]},
>     {rabbit_networking,boot,0,[]},
>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
>     {rabbit,run_boot_step,1,[]}]
>
>
>
> BOOT FAILED
> ===========
>
> Error description:
>    {could_not_start,rabbit,
>        {bad_return,
>            {{rabbit,start,[normal,[]]},
>             {'EXIT',
>                 {rabbit,failure_during_boot,
>
> {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>
> {"init terminating in
> do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}}}
>
> Thanks,
>
>
> On 22 July 2013 20:09, Matthias Radestock <matthias at rabbitmq.com> wrote:
>
>> Pedro,
>>
>>
>> On 22/07/13 18:38, Pedro S? da Costa wrote:
>>
>>> I am trying to configure rabbitmq with EC2. The rabbitmq works when it
>>> uses the private IP, but when I try to use the public IP, I can't start
>>> the rabbitmq.
>>>
>>
>> Inspecting the log files, as suggested by...
>>
>>
>>  Log files (may contain more information):
>>>     /var/log/rabbitmq/rabbit at ip-**10-170-74-198.log
>>>     /var/log/rabbitmq/rabbit at ip-**10-170-74-198-sasl.log
>>>
>>
>> ...might offer some clues as to what went wrong.
>>
>> Matthias.
>>
>
>
>
> --
> Best regards,
>



-- 
Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/6e51a185/attachment.htm>

From brett.r.cameron at gmail.com  Tue Jul 23 11:41:11 2013
From: brett.r.cameron at gmail.com (Brett Cameron)
Date: Tue, 23 Jul 2013 22:41:11 +1200
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAJ8VZfX1tbjf5Tes24VSVJzZdJwdQPT-PC+r3qjNb5rWa+0rBA@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAJ8VZfX1tbjf5Tes24VSVJzZdJwdQPT-PC+r3qjNb5rWa+0rBA@mail.gmail.com>
Message-ID: <CALPqkirFqfYuye9FvysDXwjWgEf=qRSgthKVYJAYzUviazg5GQ@mail.gmail.com>

Pedro,

Presumably XX.235.XXX.XXX is the public IP and 10.170.YYY.YYY is the
private IP? Rabbit looks to be complaining that it can't start a listener
on XX.235.XXX.XXX:5672, but I'm not entirely sure that this is necessary or
that you even need to explicitly set RABBITMQ_NODE_IP_ADDRESS as you have
done in order for external clients to be able to access the broker. I
cannot comment on EC2, but certainly for HP Cloud (OpenStack) there is no
need for me to set RABBITMQ_NODE_IP_ADDRESS in order for external
(internet-based) clients to access brokers using their public IP. What
happens if you do not set RABBITMQ_NODE_IP_ADDRESS? Does the broker start,
and if so can you access it from an external client using the public IP?

On a positive note, the output from netstat shows that the Erlang epmd
process is happily listening on 4369.

Also, if you've not seen them already, you might find
http://www.rabbitmq.com/ec2.html and
http://karlgrz.com/rabbitmq-highly-available-queues-and-clustering-using-amazon-ec2/useful.


 Brett


On Tue, Jul 23, 2013 at 10:21 PM, Pedro S? da Costa <psdc1978 at gmail.com>wrote:

> I had the full netstat result.
>
> $ netstat -plnet
> Active Internet connections (only servers)
> Proto Recv-Q Send-Q Local Address           Foreign Address         State
>       User       Inode       PID/Program name
> tcp        0      0 0.0.0.0:4369            0.0.0.0:*
> LISTEN      106        8260        976/epmd
> tcp        0      0 0.0.0.0:22              0.0.0.0:*
> LISTEN      0          7917        731/sshd
> tcp6       0      0 :::22                   :::*                    LISTEN
>      0          7919        731/sshd
>
>
> On 23 July 2013 10:47, Pedro S? da Costa <psdc1978 at gmail.com> wrote:
>
>> Hi,
>>
>> I restate my question: I want to establish AMQP connections from clients
>> outside amazon to my broker inside amazon. I tried to configure the cluster
>> but I still can't connect to the rabbitmq host. I think the error is "could_not_start_tcp_listener"
>> that it is in the logs below. How I set-up the rabbimq in Amazon EC2?
>>
>> I did the netstat and there isn't any process running on port 5672. I
>> also open all the ports in the Security group in Amazon EC2 console. The
>> configuration that I have  in /etc/rabbitmq/rabbitmq-env.conf is
>>
>> :/var/log/rabbitmq$ cat /etc/rabbitmq/rabbitmq-env.conf
>> RABBITMQ_NODE_IP_ADDRESS=XX.235.XXX.XXX
>>
>> Here are the logs in /var/log/rabbitmq dir.
>>
>>
>> :/var/log/rabbitmq$ cat rabbit at ip-10-170-YYY-YYY.log
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:36 ===
>> Starting RabbitMQ 3.1.3 on Erlang R15B01
>> Copyright (C) 2007-2013 VMware, Inc.
>> Licensed under the MPL.  See http://www.rabbitmq.com/
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:36 ===
>> node           : rabbit at ip-10-170-YYY-YYY
>> home dir       : /var/lib/rabbitmq
>> config file(s) : (none)
>> cookie hash    : rVPtw0Y5kTBT3E/GHFwvsA==
>> log            : /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>> sasl log       : /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>> database dir   : /var/lib/rabbitmq/mnesia/rabbit at ip-10-170-YYY-YYY
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
>> Limiting to approx 924 file handles (829 sockets)
>>
>>  =INFO REPORT==== 23-Jul-2013::09:26:37 ===
>> Memory limit set to 1499MB of 3749MB total.
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
>> Disk free limit set to 1000MB
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
>> msg_store_transient: using rabbit_msg_store_ets_index to provide index
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
>> msg_store_persistent: using rabbit_msg_store_ets_index to provide index
>>
>> =ERROR REPORT==== 23-Jul-2013::09:26:37 ===
>> failed to start TCP Listener on XX.235.XXX.XXX:5672 - eaddrnotavail
>> (can't assign requested address)
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:37 ===
>> Error description:
>>    {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>>
>> Log files (may contain more information):
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>>
>> Stack trace:
>>    [{rabbit_networking,start_listener0,4,[]},
>>     {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
>>     {rabbit_networking,start_listener,4,[]},
>>     {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
>>     {rabbit_networking,boot_tcp,0,[]},
>>     {rabbit_networking,boot,0,[]},
>>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
>>     {rabbit,run_boot_step,1,[]}]
>>
>>
>> =INFO REPORT==== 23-Jul-2013::09:26:38 ===
>> Error description:
>>    {could_not_start,rabbit,
>>        {bad_return,
>>            {{rabbit,start,[normal,[]]},
>>             {'EXIT',
>>                 {rabbit,failure_during_boot,
>>
>> {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}
>>
>> Log files (may contain more information):
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>>
>>
>>  =ERROR REPORT==== 23-Jul-2013::09:26:38 ===
>> ** gen_event handler rabbit_error_logger crashed.
>> ** Was installed in error_logger
>> ** Last event was: {info_msg,<0.30.0>,
>>                     {<0.2.0>,
>>                      "Error description:~n   ~p~n~nLog files (may contain
>> more information):~n   ~s~n   ~s~n~n",
>>                      [{could_not_start,rabbit,
>>                        {bad_return,
>>                         {{rabbit,start,[normal,[]]},
>>                          {'EXIT',
>>                           {rabbit,failure_during_boot,
>>                            {could_not_start_tcp_listener,
>>                             {"XX.235.XXX.XXX",5672}}}}}}},
>>                       "/var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log",
>>                       "/var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>> "]}}
>> ** When handler state ==
>> {resource,<<"/">>,exchange,<<"amq.rabbitmq.log">>}
>> ** Reason == {badarg,[{ets,lookup,
>>                            [rabbit_exchange,
>>                             {resource,<<"/">>,exchange,
>>                                       <<"amq.rabbitmq.log">>}],
>>                            []},
>>                       {rabbit_misc,dirty_read,1,[]},
>>                       {rabbit_basic,publish,1,[]},
>>                       {rabbit_error_logger,publish1,4,[]},
>>                       {rabbit_error_logger,handle_event,2,[]},
>>                       {gen_event,server_update,4,
>>                                  [{file,"gen_event.erl"},{line,504}]},
>>                       {gen_event,server_notify,4,
>>                                  [{file,"gen_event.erl"},{line,486}]},
>>                       {gen_event,handle_msg,5,
>>                                  [{file,"gen_event.erl"},{line,248}]}]}
>>
>>
>> :/var/log/rabbitmq$ cat startup_log
>>
>>               RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
>>   ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
>>   ##  ##
>>   ##########  Logs: /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>>   ######  ##        /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>>   ##########
>>               Starting broker...
>>
>> BOOT FAILED
>> ===========
>>
>> Error description:
>>    {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>>
>> Log files (may contain more information):
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>>
>> Stack trace:
>>    [{rabbit_networking,start_listener0,4,[]},
>>      {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
>>     {rabbit_networking,start_listener,4,[]},
>>     {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
>>     {rabbit_networking,boot_tcp,0,[]},
>>     {rabbit_networking,boot,0,[]},
>>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
>>     {rabbit,run_boot_step,1,[]}]
>>
>>
>>
>> BOOT FAILED
>> ===========
>>
>> Error description:
>>    {could_not_start,rabbit,
>>        {bad_return,
>>            {{rabbit,start,[normal,[]]},
>>             {'EXIT',
>>                 {rabbit,failure_during_boot,
>>
>> {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}
>>
>> Log files (may contain more information):
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY.log
>>    /var/log/rabbitmq/rabbit at ip-10-170-YYY-YYY-sasl.log
>>
>> {"init terminating in
>> do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}}}}}}}}
>>
>> Thanks,
>>
>>
>> On 22 July 2013 20:09, Matthias Radestock <matthias at rabbitmq.com> wrote:
>>
>>> Pedro,
>>>
>>>
>>> On 22/07/13 18:38, Pedro S? da Costa wrote:
>>>
>>>> I am trying to configure rabbitmq with EC2. The rabbitmq works when it
>>>> uses the private IP, but when I try to use the public IP, I can't start
>>>> the rabbitmq.
>>>>
>>>
>>> Inspecting the log files, as suggested by...
>>>
>>>
>>>  Log files (may contain more information):
>>>>     /var/log/rabbitmq/rabbit at ip-**10-170-74-198.log
>>>>     /var/log/rabbitmq/rabbit at ip-**10-170-74-198-sasl.log
>>>>
>>>
>>> ...might offer some clues as to what went wrong.
>>>
>>> Matthias.
>>>
>>
>>
>>
>> --
>> Best regards,
>>
>
>
>
> --
> Best regards,
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/dd6a3e0e/attachment.htm>

From michael.s.klishin at gmail.com  Tue Jul 23 12:15:54 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 23 Jul 2013 15:15:54 +0400
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
Message-ID: <CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>

2013/7/23 Pedro S? da Costa <psdc1978 at gmail.com>

> Error description:
>    {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>

Try using 0.0.0.0 for RABBITMQ_NODE_IP_ADDRESS. This will relieve you
from having to worry about the exact IP value of the interface.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/d72b88ea/attachment.htm>

From japperly at gopivotal.com  Mon Jul 22 21:00:43 2013
From: japperly at gopivotal.com (Jim Apperly)
Date: Mon, 22 Jul 2013 21:00:43 +0100
Subject: [rabbitmq-discuss] amqp_rpc_server
In-Reply-To: <51ED8097.7040800@rabbitmq.com>
References: <7da1b8a0-c5e3-4e77-b817-23db4ebf56e1@googlegroups.com>
	<51E6F4DD.2010109@rabbitmq.com>
	<CAEr978SMGksECtK-ox4RXRr073o8=posS0E_mis+TBOwi-RV5g@mail.gmail.com>
	<51ED8097.7040800@rabbitmq.com>
Message-ID: <CAJ7Q73-2Vi3q+DLT9CV+J-EGfwheay7O6qSSUFL9G17VkNtXtQ@mail.gmail.com>

Have we got a CLA?

On Monday, 22 July 2013, Matthias Radestock <matthias at rabbitmq.com> wrote:
> Carlo,
>
> On 18/07/13 09:20, Carlo Bertoldi wrote:
>>
>> I've added start_link functions to both client and server, so the
>> caller has the possibility to decide what he needs, without breaking
>> the old behaviour.
>>
>> Here are the patches:
>
> Thanks. Merged.
>
> Matthias.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130722/5b4fbe92/attachment.htm>

From mail.zhang.yee at gmail.com  Tue Jul 23 06:47:27 2013
From: mail.zhang.yee at gmail.com (mail.zhang.yee)
Date: Tue, 23 Jul 2013 13:47:27 +0800
Subject: [rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
Message-ID: <CA+Ktg7BFBcccyPTXG=zAYWG0jorc_L5Rqx=AgemyUijP3Z0CTw@mail.gmail.com>

Hi All
Nice to see you here, we recently got a problem during openstack deployment
in CentOS6.3.
The rabbitmq constantly crash after running one or two days.
Cloud somebody here can take a look at what's happened inside rabbitmq
and how to fix it?
detailed status and logs as below. thanks in advance.
======================================
 rabbitmqctl status
Status of node rabbit at ci91szcmp001 ...
[{pid,29272},
 {running_applications,[{rabbit,"RabbitMQ","2.6.1"},
                        {os_mon,"CPO  CXC 138 46","2.2.7"},
                        {sasl,"SASL  CXC 138 11","2.1.10"},
                        {mnesia,"MNESIA  CXC 138 12","4.5"},
                        {stdlib,"ERTS  CXC 138 10","1.17.5"},
                        {kernel,"ERTS  CXC 138 10","2.14.5"}]},
 {os,{unix,linux}},
 {erlang_version,"Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:32:32]
[rq:32] [async-threads:30] [kernel-poll:true]\n"},
 {memory,[{total,74666016},
          {processes,45884208},
          {processes_used,45866296},
          {system,28781808},
          {atom,1119593},
          {atom_used,1113078},
          {binary,3421464},
          {code,11053747},
          {ets,7607264}]}]
...done.
======================================
=ERROR REPORT==== 22-Jul-2013::14:50:26 ===
** Generic server <0.1921.0> terminating
** Last message in was {'EXIT',<0.237.0>,shutdown}
** When Server state == {q,
                         {amqqueue,
                          {resource,<<"/">>,queue,
                           <<"conductor.ci91szcmp004.webex.com">>},
                          false,false,none,
                          [{<<"x-ha-policy">>,longstr,<<"all">>}],
                          <0.1921.0>,[],all},
                         none,true,rabbit_mirror_queue_master,
                         {state,<0.1923.0>,<0.1922.0>,rabbit_variable_queue,
                          {vqstate,
                           {[],[]},
                           {0,{[],[]}},
                           {delta,undefined,0,undefined},
                           {0,{[],[]}},
                           {[],[]},
                           0,
                           {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                            {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                              []}}},
                           undefined,
                           {0,nil},
                           {qistate,
                            "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001
/queues/A1FBAI3711PERTSXW5DHR0X8Y",
                            {{dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             []},
                            undefined,0,262144,
                            #Fun<rabbit_variable_queue.2.41165857>,[]},
                           {undefined,
                            {client_msstate,msg_store_transient,

 <<207,96,115,58,236,124,180,246,67,18,228,236,182,
                               66,117,84>>,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,200768,
                              "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001
/msg_store_transient"},
                             rabbit_msg_store_ets_index,
                             "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001
/msg_store_transient",
                             <0.228.0>,204865,196671,208962}},

 false,0,#Fun<rabbit_amqqueue_process.5.31190493>,0,
                           0,infinity,0,0,0,0,0,0,
                           {rates,
                            {{1374,213408,350099},0},
                            {{1374,213408,350099},0},
                            0.0,0.0,
                            {1374,213451,550036}},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           0,0,
                           {rates,
                            {{1374,213408,350099},0},
                            {{1374,213408,350099},0},
                            0.0,0.0,
                            {1374,213451,550036}}},
                          0,
                          {dict,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          [],
                          {dict,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          {set,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}}},
                         {[],[]},
                         {[],[]},
                         undefined,undefined,#Ref<0.0.742.237144>,undefined,
                         {state,none,5000,undefined},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,undefined}
** Reason for termination ==
** {noproc,
       {gen_server2,call,
           [msg_store_transient,
            {client_terminate,

<<207,96,115,58,236,124,180,246,67,18,228,236,182,66,117,84>>},
            infinity]}}
** In 'terminate' callback with reason ==
** shutdown

=ERROR REPORT==== 22-Jul-2013::14:50:26 ===
** gen_event handler rabbit_error_logger crashed.
** Was installed in error_logger
** Last event was: {error,<0.119.0>,
                    {<0.1887.0>,
                     "** Generic server ~p terminating~n** Last message in
was ~p~n** When Server state == ~p~n** Reason for termination == ~n**
~p~n** In 'terminate' callback with reason ==~n** ~p~n",
                     [<0.1887.0>,
                      {'EXIT',<0.237.0>,shutdown},
                      {q,
                       {amqqueue,
                        {resource,<<"/">>,queue,<<"consoleauth">>},
                        false,false,none,
                        [{<<"x-ha-policy">>,longstr,<<"all">>}],
                        <0.1887.0>,[],all},
                       none,true,rabbit_mirror_queue_master,
                       {state,<0.1889.0>,<0.1888.0>,rabbit_variable_queue,
                        {vqstate,
                         {[],[]},
                         {0,{[],[]}},
                         {delta,undefined,0,undefined},
                         {0,{[],[]}},
                         {[],[]},
                         8,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,
                         {0,nil},
                         {qistate,
                          "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001
/queues/1AV7T4P6H9GB74RNTGRVPV2OY",
                          {{dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                            {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                              []}}},
                           []},
                          undefined,0,262144,
                          #Fun<rabbit_variable_queue.2.41165857>,[]},
                         {undefined,
                          {client_msstate,msg_store_transient,
                           <<"??o$??W????\b?J">>,
                           {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                            {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                              []}}},
                           {state,200768,
                            "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001
/msg_store_transient"},
                           rabbit_msg_store_ets_index,
                           "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001
/msg_store_transient",
                           <0.228.0>,204865,196671,208962}},

 false,0,#Fun<rabbit_amqqueue_process.5.31190493>,0,0,
                         infinity,0,0,0,0,0,0,
                         {rates,
                          {{1374,460116,880026},2},
                          {{1374,460116,880026},2},
                          0.0016008717049531846,0.0016008717049531846,
                          {1374,461800,598037}},
                         {0,nil},
                         {0,nil},
                         {0,nil},
                         {0,nil},
                         0,0,
                         {rates,
                          {{1374,460116,880026},2},
                          {{1374,460116,880026},2},
                          0.0016008717049531846,0.0016008717049531846,
                          {1374,461800,598037}}},
                        0,
                        {dict,0,16,16,8,80,48,
                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                        [],
                        {dict,0,16,16,8,80,48,
                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                        {set,0,16,16,8,80,48,
                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}},
                       {[],[]},
                       {[],[]},
                       undefined,undefined,#Ref<0.0.742.237570>,undefined,
                       {state,none,5000,undefined},
                       {dict,0,16,16,8,80,48,
                        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                       undefined,undefined},
                      {noproc,
                       {gen_server2,call,
                        [msg_store_transient,
                         {client_terminate,<<"??o$??W????\b?J">>},
                         infinity]}},
                      shutdown]}}
** When handler state == {resource,<<"/">>,exchange,<<"amq.rabbitmq.log">>}
** Reason == {badarg,[{ets,lookup,[rabbit_registry,{exchange,topic}]},
                      {rabbit_registry,lookup_module,2},
                      {rabbit_exchange,type_to_module,1},
                      {rabbit_exchange,route1,2},
                      {rabbit_basic,publish,2},
                      {rabbit_error_logger,publish1,4},
                      {rabbit_error_logger,handle_event,2},
                      {gen_event,server_update,4}]}

=INFO REPORT==== 22-Jul-2013::14:50:27 ===
    application: rabbit
    exited: shutdown
    type: permanent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/a6dae31b/attachment.htm>

From simon at rabbitmq.com  Tue Jul 23 13:00:35 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 23 Jul 2013 13:00:35 +0100
Subject: [rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
In-Reply-To: <CA+Ktg7BFBcccyPTXG=zAYWG0jorc_L5Rqx=AgemyUijP3Z0CTw@mail.gmail.com>
References: <CA+Ktg7BFBcccyPTXG=zAYWG0jorc_L5Rqx=AgemyUijP3Z0CTw@mail.gmail.com>
Message-ID: <51EE7063.9050702@rabbitmq.com>

It looks like the message store crashed, although you haven't posted the 
error message from the message store crash, just one of the queues 
crashing afterwards because it couldn't find it.

Having said that, a huge number of bugs have been fixed since 2.6.1; an 
upgrade is strongly recommended.

Cheers, Simon

On 23/07/13 06:47, mail.zhang.yee wrote:
> Hi All
> Nice to see you here, we recently got a problem during openstack
> deployment in CentOS6.3.
> The rabbitmq constantly crash after running one or two days.
> Cloud somebody here can take a look at what's happened inside rabbitmq
> and how to fix it?
> detailed status and logs as below. thanks in advance.
> ======================================
>   rabbitmqctl status
> Status of node rabbit at ci91szcmp001 ...
> [{pid,29272},
>   {running_applications,[{rabbit,"RabbitMQ","2.6.1"},
>                          {os_mon,"CPO  CXC 138 46","2.2.7"},
>                          {sasl,"SASL  CXC 138 11","2.1.10"},
>                          {mnesia,"MNESIA  CXC 138 12","4.5"},
>                          {stdlib,"ERTS  CXC 138 10","1.17.5"},
>                          {kernel,"ERTS  CXC 138 10","2.14.5"}]},
>   {os,{unix,linux}},
>   {erlang_version,"Erlang R14B04 (erts-5.8.5) [source] [64-bit]
> [smp:32:32] [rq:32] [async-threads:30] [kernel-poll:true]\n"},
>   {memory,[{total,74666016},
>            {processes,45884208},
>            {processes_used,45866296},
>            {system,28781808},
>            {atom,1119593},
>            {atom_used,1113078},
>            {binary,3421464},
>            {code,11053747},
>            {ets,7607264}]}]
> ...done.
> ======================================
> =ERROR REPORT==== 22-Jul-2013::14:50:26 ===
> ** Generic server <0.1921.0> terminating
> ** Last message in was {'EXIT',<0.237.0>,shutdown}
> ** When Server state == {q,
>                           {amqqueue,
>                            {resource,<<"/">>,queue,
>                             <<"conductor.ci91szcmp004.webex.com
> <http://conductor.ci91szcmp004.webex.com>">>},
>                            false,false,none,
>                            [{<<"x-ha-policy">>,longstr,<<"all">>}],
>                            <0.1921.0>,[],all},
>                           none,true,rabbit_mirror_queue_master,
>
>   {state,<0.1923.0>,<0.1922.0>,rabbit_variable_queue,
>                            {vqstate,
>                             {[],[]},
>                             {0,{[],[]}},
>                             {delta,undefined,0,undefined},
>                             {0,{[],[]}},
>                             {[],[]},
>                             0,
>                             {dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                                []}}},
>                             undefined,
>                             {0,nil},
>                             {qistate,
>
> "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001/queues/A1FBAI3711PERTSXW5DHR0X8Y",
>                              {{dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                                 []},
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                                  []}}},
>                               []},
>                              undefined,0,262144,
>                              #Fun<rabbit_variable_queue.2.41165857>,[]},
>                             {undefined,
>                              {client_msstate,msg_store_transient,
>
>   <<207,96,115,58,236,124,180,246,67,18,228,236,182,
>                                 66,117,84>>,
>                               {dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                                 []},
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                                  []}}},
>                               {state,200768,
>
> "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001/msg_store_transient"},
>                               rabbit_msg_store_ets_index,
>
>   "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001/msg_store_transient",
>                               <0.228.0>,204865,196671,208962}},
>
>   false,0,#Fun<rabbit_amqqueue_process.5.31190493>,0,
>                             0,infinity,0,0,0,0,0,0,
>                             {rates,
>                              {{1374,213408,350099},0},
>                              {{1374,213408,350099},0},
>                              0.0,0.0,
>                              {1374,213451,550036}},
>                             {0,nil},
>                             {0,nil},
>                             {0,nil},
>                             {0,nil},
>                             0,0,
>                             {rates,
>                              {{1374,213408,350099},0},
>                              {{1374,213408,350099},0},
>                              0.0,0.0,
>                              {1374,213451,550036}}},
>                            0,
>                            {dict,0,16,16,8,80,48,
>
>   {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                               []}}},
>                            [],
>                            {dict,0,16,16,8,80,48,
>
>   {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                               []}}},
>                            {set,0,16,16,8,80,48,
>
>   {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                               []}}}},
>                           {[],[]},
>                           {[],[]},
>
>   undefined,undefined,#Ref<0.0.742.237144>,undefined,
>                           {state,none,5000,undefined},
>                           {dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
>                           undefined,undefined}
> ** Reason for termination ==
> ** {noproc,
>         {gen_server2,call,
>             [msg_store_transient,
>              {client_terminate,
>
> <<207,96,115,58,236,124,180,246,67,18,228,236,182,66,117,84>>},
>              infinity]}}
> ** In 'terminate' callback with reason ==
> ** shutdown
>
> =ERROR REPORT==== 22-Jul-2013::14:50:26 ===
> ** gen_event handler rabbit_error_logger crashed.
> ** Was installed in error_logger
> ** Last event was: {error,<0.119.0>,
>                      {<0.1887.0>,
>                       "** Generic server ~p terminating~n** Last message
> in was ~p~n** When Server state == ~p~n** Reason for termination == ~n**
> ~p~n** In 'terminate' callback with reason ==~n** ~p~n",
>                       [<0.1887.0>,
>                        {'EXIT',<0.237.0>,shutdown},
>                        {q,
>                         {amqqueue,
>                          {resource,<<"/">>,queue,<<"consoleauth">>},
>                          false,false,none,
>                          [{<<"x-ha-policy">>,longstr,<<"all">>}],
>                          <0.1887.0>,[],all},
>                         none,true,rabbit_mirror_queue_master,
>                         {state,<0.1889.0>,<0.1888.0>,rabbit_variable_queue,
>                          {vqstate,
>                           {[],[]},
>                           {0,{[],[]}},
>                           {delta,undefined,0,undefined},
>                           {0,{[],[]}},
>                           {[],[]},
>                           8,
>                           {dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
>                           undefined,
>                           {0,nil},
>                           {qistate,
>
> "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001/queues/1AV7T4P6H9GB74RNTGRVPV2OY",
>                            {{dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                                []}}},
>                             []},
>                            undefined,0,262144,
>                            #Fun<rabbit_variable_queue.2.41165857>,[]},
>                           {undefined,
>                            {client_msstate,msg_store_transient,
>                             <<"??o$??W????\b?J">>,
>                             {dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
>                                []}}},
>                             {state,200768,
>
> "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001/msg_store_transient"},
>                             rabbit_msg_store_ets_index,
>
>   "/var/lib/rabbitmq/mnesia/rabbit at ci91szcmp001/msg_store_transient",
>                             <0.228.0>,204865,196671,208962}},
>
>   false,0,#Fun<rabbit_amqqueue_process.5.31190493>,0,0,
>                           infinity,0,0,0,0,0,0,
>                           {rates,
>                            {{1374,460116,880026},2},
>                            {{1374,460116,880026},2},
>                            0.0016008717049531846,0.0016008717049531846,
>                            {1374,461800,598037}},
>                           {0,nil},
>                           {0,nil},
>                           {0,nil},
>                           {0,nil},
>                           0,0,
>                           {rates,
>                            {{1374,460116,880026},2},
>                            {{1374,460116,880026},2},
>                            0.0016008717049531846,0.0016008717049531846,
>                            {1374,461800,598037}}},
>                          0,
>                          {dict,0,16,16,8,80,48,
>                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>
>   {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
>                          [],
>                          {dict,0,16,16,8,80,48,
>                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>
>   {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
>                          {set,0,16,16,8,80,48,
>                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>
>   {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}},
>                         {[],[]},
>                         {[],[]},
>                         undefined,undefined,#Ref<0.0.742.237570>,undefined,
>                         {state,none,5000,undefined},
>                         {dict,0,16,16,8,80,48,
>                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
>                         undefined,undefined},
>                        {noproc,
>                         {gen_server2,call,
>                          [msg_store_transient,
>                           {client_terminate,<<"??o$??W????\b?J">>},
>                           infinity]}},
>                        shutdown]}}
> ** When handler state == {resource,<<"/">>,exchange,<<"amq.rabbitmq.log">>}
> ** Reason == {badarg,[{ets,lookup,[rabbit_registry,{exchange,topic}]},
>                        {rabbit_registry,lookup_module,2},
>                        {rabbit_exchange,type_to_module,1},
>                        {rabbit_exchange,route1,2},
>                        {rabbit_basic,publish,2},
>                        {rabbit_error_logger,publish1,4},
>                        {rabbit_error_logger,handle_event,2},
>                        {gen_event,server_update,4}]}
>
> =INFO REPORT==== 22-Jul-2013::14:50:27 ===
>      application: rabbit
>      exited: shutdown
>      type: permanent
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From kiraneha at gmail.com  Tue Jul 23 13:53:46 2013
From: kiraneha at gmail.com (kiraneha)
Date: Tue, 23 Jul 2013 05:53:46 -0700 (PDT)
Subject: [rabbitmq-discuss] Connection timed out when connecting to remote
 rabbitmq server using rabbitmq client library
Message-ID: <1374584026289-28291.post@n5.nabble.com>

Hi,

I have modified the rabbitmq client api for use. It works fine when I try to
connect to my local rabbitmq server in 192 series IP. But I am getting this
error when I am trying to connect to another linux machine of 10 series IP
using the same code.

java.net.ConnectException: Connection timed out: connect
	at java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)
	at
java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
	at
java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
	at
java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
	at java.net.Socket.connect(Socket.java:579)
	at
com.rabbitmq.client.ConnectionFactory.createFrameHandler(ConnectionFactory.java:514)
	at
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:608)
	at
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:696)
	at controllers.MQConnectionPOC.createQueue(MQConnectionPOC.java:56)
	at controllers.Application.main(Application.java:22)


Kindly Help....




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Connection-timed-out-when-connecting-to-remote-rabbitmq-server-using-rabbitmq-client-library-tp28291.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Tue Jul 23 13:59:26 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 23 Jul 2013 16:59:26 +0400
Subject: [rabbitmq-discuss] Connection timed out when connecting to
	remote rabbitmq server using rabbitmq client library
In-Reply-To: <1374584026289-28291.post@n5.nabble.com>
References: <1374584026289-28291.post@n5.nabble.com>
Message-ID: <5BC92207-4C70-49D5-8DFE-8516BC42F372@gopivotal.com>

kiraneha:

> java.net.ConnectException: Connection timed out: connect
> 	at java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)

The client cannot connect to the IP/port provided.

Please check that you can connect using telnet first. Firewall on the 10.* machine needs
to have ports 5672 and 5671 (if you use TLS/SSL) open.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/e159e9d2/attachment.pgp>

From bison_art at o2.pl  Tue Jul 23 14:17:21 2013
From: bison_art at o2.pl (rabbit15)
Date: Tue, 23 Jul 2013 06:17:21 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51ED05DC.4050005@rabbitmq.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
Message-ID: <1374585441062-28293.post@n5.nabble.com>

Hi I made other scenario to show you more decrease of the publishing messages
<http://rabbitmq.1065348.n5.nabble.com/file/n28293/32.png> 

Here is output from report command:

Status of node rabbit at katlabucs6 ...
[{pid,29684},
 {running_applications,
     [{rabbitmq_tracing,"RabbitMQ message logging / tracing","3.1.1"},
      {rabbitmq_management,"RabbitMQ Management Console","3.1.1"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","3.1.1"},
      {rabbit,"RabbitMQ","3.1.1"},
      {os_mon,"CPO  CXC 138 46","2.2.10"},
      {rabbitmq_web_dispatch,"RabbitMQ Web Dispatcher","3.1.1"},
      {webmachine,"webmachine","1.9.1-rmq3.1.1-git52e62bc"},
      {mochiweb,"MochiMedia Web Server","2.3.1-rmq3.1.1-gitd541e9a"},
      {xmerl,"XML parser","1.3.2"},
      {inets,"INETS  CXC 138 49","5.9.1"},
      {mnesia,"MNESIA  CXC 138 12","4.7.1"},
      {amqp_client,"RabbitMQ AMQP Client","3.1.1"},
      {sasl,"SASL  CXC 138 11","2.2.1"},
      {stdlib,"ERTS  CXC 138 10","1.18.2"},
      {kernel,"ERTS  CXC 138 10","2.15.2"}]},
 {os,{unix,linux}},
 {erlang_version,
     "Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:32:32]
[async-threads:30] [hipe] [kernel-poll:true]\n"},
 {memory,
     [{total,38330063720},
      {connection_procs,681814736},
      {queue_procs,24091529472},
      {plugins,1029408},
      {other_proc,95529283},
      {mnesia,112992},
      {mgmt_db,1051264},
      {msg_index,53448},
      {other_ets,1371808},
      {binary,13431475360},
      {code,18618268},
      {atom,703377},
      {other_system,6774304}]},
 {vm_memory_high_watermark,100.0},
 {vm_memory_limit,6767380480000},
 {disk_free_limit,0},
 {disk_free,233713041408},
 {file_descriptors,
     [{total_limit,924},
      {total_used,15},
      {sockets_limit,829},
      {sockets_used,13}]},
 {processes,[{limit,1048576},{used,579}]},
 {run_queue,0},
 {uptime,761}]

Cluster status of node rabbit at katlabucs6 ...
[{nodes,[{disc,[rabbit at katlabucs6]}]},
 {running_nodes,[rabbit at katlabucs6]},
 {partitions,[]}]

Application environment of node rabbit at katlabucs6 ...
[{auth_backends,[rabbit_auth_backend_internal]},
 {auth_mechanisms,['PLAIN','AMQPLAIN']},
 {backing_queue_module,rabbit_variable_queue},
 {cluster_nodes,{[],disc}},
 {cluster_partition_handling,ignore},
 {collect_statistics,fine},
 {collect_statistics_interval,5000},
 {default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
 {default_user,<<"guest">>},
 {default_user_tags,[administrator]},
 {default_vhost,<<"/">>},
 {delegate_count,16},
 {disk_free_limit,0},

{enabled_plugins_file,"/home/airsyncmb31/services/rabbitmq//sbin/../etc/rabbitmq/enabled_plugins"},
 {error_logger,{file,"/home/airsyncmb31/log//rabbit at katlabucs6.log"}},
 {frame_max,131072},
 {heartbeat,600},
 {hipe_compile,false},
 {included_applications,[]},
 {log_levels,[{connection,info}]},
 {msg_store_file_size_limit,16777216},
 {msg_store_index_module,rabbit_msg_store_ets_index},
 {plugins_dir,"/home/airsyncmb31/services/rabbitmq//sbin/../plugins"},

{plugins_expand_dir,"/home/airsyncmb31/services/rabbitmq//sbin/../var/lib/rabbitmq/mnesia/rabbit at katlabucs6-plugins-expand"},
 {queue_index_max_journal_entries,65536},
 {reverse_dns_lookups,false},

{sasl_error_logger,{file,"/home/airsyncmb31/log//rabbit at katlabucs6-sasl.log"}},
 {server_properties,[]},
 {ssl_cert_login_from,distinguished_name},
 {ssl_listeners,[]},
 {ssl_options,[]},
 {tcp_listen_options,[binary,
                      {packet,raw},
                      {reuseaddr,true},
                      {backlog,128},
                      {nodelay,true},
                      {linger,{true,0}},
                      {exit_on_close,false}]},
 {tcp_listeners,[5672]},
 {trace_vhosts,[]},
 {vm_memory_high_watermark,100.0}]


If you need more let me know!

Cheers,
Artur




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28293.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Tue Jul 23 14:29:08 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 23 Jul 2013 14:29:08 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374585441062-28293.post@n5.nabble.com>
References: <1372772184481-27737.post@n5.nabble.com>
	<1373661427074-28065.post@n5.nabble.com>
	<51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
Message-ID: <51EE8524.8030601@rabbitmq.com>

On 23/07/13 14:17, rabbit15 wrote:
> Hi I made other scenario to show you more decrease of the publishing messages
> <http://rabbitmq.1065348.n5.nabble.com/file/n28293/32.png>

Interesting.

> Here is output from report command:

That is 'rabbitmqctl status', not 'rabbitmqctl report'.

To figure out what's going on here, it would be good to get a 
'rabbitmqctl report' at two points, namely during the high-rate phase 
and the lower-rate phase.

Btw, please *attach* the reports rather than inlining them.

Matthias.

From bison_art at o2.pl  Tue Jul 23 14:42:19 2013
From: bison_art at o2.pl (rabbit15)
Date: Tue, 23 Jul 2013 06:42:19 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51EE8524.8030601@rabbitmq.com>
References: <51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
Message-ID: <1374586939316-28296.post@n5.nabble.com>

I have uploaded the file

report.txt <http://rabbitmq.1065348.n5.nabble.com/file/n28296/report.txt>  

Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28296.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Tue Jul 23 14:52:25 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 23 Jul 2013 14:52:25 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374586939316-28296.post@n5.nabble.com>
References: <51E3B434.9070804@rabbitmq.com>
	<1374069423122-28128.post@n5.nabble.com>
	<51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
Message-ID: <51EE8A99.90500@rabbitmq.com>

On 23/07/13 14:42, rabbit15 wrote:
> I have uploaded the file
>
> report.txt <http://rabbitmq.1065348.n5.nabble.com/file/n28296/report.txt>

Thanks. Nothing obvious jumps out. As I said, it would be useful to get 
*two* reports - one from the high-rate phase and one from the low-rate 
phase.

Matthias.


From bison_art at o2.pl  Tue Jul 23 15:00:59 2013
From: bison_art at o2.pl (rabbit15)
Date: Tue, 23 Jul 2013 07:00:59 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51EE8A99.90500@rabbitmq.com>
References: <51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
Message-ID: <1374588059887-28298.post@n5.nabble.com>

The file I had uploaded was from the slow rate, I will add from the fast rate
tomorrow.

Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28298.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From Petr.Gotthard at Honeywell.com  Tue Jul 23 15:01:11 2013
From: Petr.Gotthard at Honeywell.com (Gotthard, Petr)
Date: Tue, 23 Jul 2013 14:01:11 +0000
Subject: [rabbitmq-discuss] Local time in overview charts?
Message-ID: <F9E85480F62349458DF67CE8BA000D8D2D3685A8@FR44EX3005.global.ds.honeywell.com>

Hello,

Can I somehow configure the timezone used by the Overview charts (Queues messages and Message rates)? I'm in the CEST zone (UTC+2), typing 'date' in Linux gives me correct time, but the Overview charts keep showing a time minus 2 hours (UTC time?) Can I change it somehow?


Petr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/69820b65/attachment.htm>

From matthias at rabbitmq.com  Tue Jul 23 15:15:05 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 23 Jul 2013 15:15:05 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374588059887-28298.post@n5.nabble.com>
References: <51E6A6FA.2050303@rabbitmq.com>
	<1374225457778-28196.post@n5.nabble.com>
	<51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
Message-ID: <51EE8FE9.5060008@rabbitmq.com>

On 23/07/13 15:00, rabbit15 wrote:
> The file I had uploaded was from the slow rate, I will add from the fast rate
> tomorrow.

The two reports need to be from the same run, i.e. from the initial fast 
phase and the later slower phase.

Matthias.

From simon at rabbitmq.com  Tue Jul 23 15:21:41 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 23 Jul 2013 15:21:41 +0100
Subject: [rabbitmq-discuss] Local time in overview charts?
In-Reply-To: <F9E85480F62349458DF67CE8BA000D8D2D3685A8@FR44EX3005.global.ds.honeywell.com>
References: <F9E85480F62349458DF67CE8BA000D8D2D3685A8@FR44EX3005.global.ds.honeywell.com>
Message-ID: <51EE9175.7060609@rabbitmq.com>

On 23/07/13 15:01, Gotthard, Petr wrote:
> Can I somehow configure the timezone used by the Overview charts (Queues
> messages and Message rates)? I?m in the CEST zone (UTC+2), typing ?date?
> in Linux gives me correct time, but the Overview charts keep showing a
> time minus 2 hours (UTC time?) Can I change it somehow?

Ah. Good point.

You can't, but this will get fixed in a future release (just by 
defaulting to the browser timezone).

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From stuff at moesel.net  Tue Jul 23 15:39:16 2013
From: stuff at moesel.net (Chris)
Date: Tue, 23 Jul 2013 10:39:16 -0400
Subject: [rabbitmq-discuss] Recipe for corrupting mnesia in a cluster
Message-ID: <CAHEpgBDUwOPqKa==21_T1YfWQ09HhnLrMp=buvi7ySf-XLHbPA@mail.gmail.com>

Hi All,

We are using RabbitMQ 3.1.1 / Erlang R16B on Redhat EL 6.2.  We've
discovered a scenario that can corrupt the RabbitMQ databases pretty
consistently, and are wondering if you might have some suggestions for
prevention (or might want to consider a fix if possible).

In short, if you are running two nodes in a cluster, and there are active
connections, cutting the power to both nodes in short succession can
corrupt both databases.  This can be easily reproduced with "reboot -nf" as
well.

To reproduce:

   - Make sure both nodes are properly running in the cluster
   - Make sure there are active connections to the nodes (doesn't always
   reproduce otherwise)
   - On Node1, execute: reboot -nf
   - Within a few seconds, on Node2, execute: reboot -nf
   - When they come back up again, you will not be able to start RabbitMQ

If you look at the logs you will see the following errors:

=INFO REPORT==== 23-Jul-2013::09:43:55 ===
Starting RabbitMQ 3.1.1 on Erlang R16B
Copyright (C) 2007-2013 VMware, Inc.
Licensed under the MPL.  See http://www.rabbitmq.com/

=INFO REPORT==== 23-Jul-2013::09:43:55 ===
node           : rabbit at node1
home dir       : /var/lib/rabbitmq
config file(s) : (none)
cookie hash    : PRImCFlol1hmJpetFO7NUg==
log            : /var/log/rabbitmq/rabbit at node1.log
sasl log       : /var/log/rabbitmq/rabbit at node1-sasl.log
database dir   : /var/lib/rabbitmq/mnesia/rabbit at node1

=INFO REPORT==== 23-Jul-2013::09:43:56 ===
Limiting to approx 3996 file handles (3594 sockets)

=INFO REPORT==== 23-Jul-2013::09:44:26 ===
Timeout contacting cluster nodes: ['rabbit at node2'].

DIAGNOSTICS
===========

nodes in question: ['rabbit at node2']

hosts, their running nodes and ports:
- node2: []

current node details:
- node name: 'rabbit at node1'
- home dir: /var/lib/rabbitmq
- cookie hash: PRImCFlol1hmJpetFO7NUg==



=INFO REPORT==== 23-Jul-2013::09:44:27 ===
Error description:
   {could_not_start,rabbit,
       {bad_return,
           {{rabbit,start,[normal,[]]},
            {'EXIT',
                {rabbit,failure_during_boot,
                    {error,
                        {timeout_waiting_for_tables,

[rabbit_user,rabbit_user_permission,rabbit_vhost,
                             rabbit_durable_route,rabbit_durable_exchange,
                             rabbit_runtime_parameters,
                             rabbit_durable_queue]}}}}}}}

Log files (may contain more information):
   /var/log/rabbitmq/rabbit at node1.log
   /var/log/rabbitmq/rabbit at node1-sasl.log


The only way I've been able to fix this is by deleting the contents of
mnesia on both nodes and re-clustering them.  Aside from requiring manual
intervention, this of course also causes data loss.

I know this is a bit of an edge case, but it has already happened to some
of our customers.  I guess in the case of a power outage (with no UPS!) it
is pretty likely.  Does anyone have any thoughts on it?  Is it something
that can be resolved or is it one of those cases where there's really
nothing that can be done?

Thanks!
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/5583cb97/attachment.htm>

From casey.marshall at gazzang.com  Tue Jul 23 15:39:25 2013
From: casey.marshall at gazzang.com (Casey Marshall)
Date: Tue, 23 Jul 2013 09:39:25 -0500
Subject: [rabbitmq-discuss] RabbitMQ hanging during 'rabbitmqctl stop' -
	please help
Message-ID: <51EE959D.1040200@gazzang.com>

I'm using RabbitMQ federated exchanges among a number of servers. Each
server has upstream exchanges on each of the others. I don't want to
call it a cluster, since that has another meaning in RabbitMQ altogether
... let's call it a "federated group".

This worked fine over AMQP, both in my own local KVM-virtualized testing
environment, and it seemed to as well in Amazon EC2 with unencrypted
AMQP. However, I need to secure the connections in EC2 with AMQPS before
we go into production.

I was able to automate creation and distribution of certificates among
the servers, and the setup works fine in a local KVM-virtualized
environment. However, when I started testing it in EC2 across regions, I
started having problems. RabbitMQ hangs on some of the servers in EC2
during 'service rabbitmq-server restart'.

I have scripts to automate updating the federated exchanges, to effect
topology changes on the "federated group" -- adding or removing a
server, or changing its role (different roles have different exchange
upstreams). After this script updates the federation config, the
subsequent restart hangs on some of the servers.

What should I do to make my RabbitMQ "federated group" more robust?

I've attached:

1. rabbitmq.log and rabbitmq-sasl.log excerpt from one of the hosts that
persistently gets stuck during a RabbitMQ 'stop', near the time of the hang.
2. 'rabbitmqctl status' from that host.

Installed on the system:

ii  esl-erlang                       1:16.b.1-1~ubuntu~precise       Erlang
ii  rabbitmq-server                  3.1.3-1
AMQP server written in Erlang

Much thanks,
Casey
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit at ip-10-234-134-253.log
Type: text/x-log
Size: 23477 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/e5bd98be/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit at ip-10-234-134-253-sasl.log
Type: text/x-log
Size: 7398 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/e5bd98be/attachment-0001.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: report.log
Type: text/x-log
Size: 16517 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/e5bd98be/attachment-0002.bin>

From ask at rabbitmq.com  Tue Jul 23 16:41:02 2013
From: ask at rabbitmq.com (Ask Solem)
Date: Tue, 23 Jul 2013 16:41:02 +0100
Subject: [rabbitmq-discuss] Consumer not receiving message
In-Reply-To: <CAC7kndOeJi5=JH1c=DAGg241d4gvcyRCnVJGQUSUWptMZtffcA@mail.gmail.com>
References: <CAC7kndOeJi5=JH1c=DAGg241d4gvcyRCnVJGQUSUWptMZtffcA@mail.gmail.com>
Message-ID: <E1964A3D-6EA4-4570-BA72-9B088F1262F0@rabbitmq.com>


On Jul 16, 2013, at 11:10 AM, Jagadish Nadimpalli <jagadish.nadimpalli at oneconvergence.com> wrote:

> Hi All,
> 
> I am using Kombu as AMQP message framework. I have registered my consumer and sending message from producer with a topic. But I am not able to see that the message is not unblocking the thread that is polling at consumer side. I see that the messages are coming to the queues and are getting drained but not received by the consumer thread. I came to this conclusion as I don't see any of the ready/unacknowledged fields with positive values in the RabbitMQ management UI.
> 
> Is there something obvious I am missing? Thanks in advance for your help.


Hey Jagadish!

Hard do say without seeing the problematic code,
but it sounds like it's not properly consuming from the correct queue,
does the queue have any consumers attach (consumer count)?

What do you mean by a consumer thread?  Are you using threads for this?

From mklishin at gopivotal.com  Tue Jul 23 18:36:20 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 23 Jul 2013 21:36:20 +0400
Subject: [rabbitmq-discuss] Any .NET client users use .NET earlier than 3.0?
Message-ID: <6EF35ACB-060A-4407-88EC-17F9A59777F0@gopivotal.com>

If you use RabbitMQ with .NET, I have a question for you:
do you use .NET earlier than 3.0?
If so, please share what version that is and why you had to stick to it.

Currently the client still supports .NET 1.1 (!). As such, it uses some long time deprecated
APIs. There is some interest in moving it to require .NET 2.0 or 3.0 and use more
modern .NET features, collections and concurrency primitives.

Thanks.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/3f99f4cd/attachment.pgp>

From richard at raseley.com  Tue Jul 23 19:58:52 2013
From: richard at raseley.com (Richard Raseley)
Date: Tue, 23 Jul 2013 11:58:52 -0700
Subject: [rabbitmq-discuss] Question on Cluster Restart
Message-ID: <CAO=6ox9G6aGek+B5x8PiwRPU+uwW+ePOYLaZ=ArgeuFXBbYBWQ@mail.gmail.com>

In reading this page:

http://www.rabbitmq.com/clustering.html

It seems that when shutting down a cluster for upgrade you must ensure that
the last node down is the first node up. However, in previous versions of
the documentation I recall this being a caveat for if and only if you had a
mix of disk and RAM nodes. Is this not the case anymore (we have all
disk-backed nodes).

Or alternately, I could be recalling incorrect information - I am just
looking for some confirmation either way.

Thank you in advance.

Regards,

Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/ab20f93f/attachment.htm>

From troycollinsworth at gmail.com  Tue Jul 23 17:45:45 2013
From: troycollinsworth at gmail.com (Troy Collinsworth)
Date: Tue, 23 Jul 2013 09:45:45 -0700 (PDT)
Subject: [rabbitmq-discuss] Can RabbitMQ AMQP client communicate with
	ActiveMQ AMQP transport?
Message-ID: <59ece5c8-4cc7-4834-a7f7-967fac728436@googlegroups.com>

Trying to write a single client that can communicate with local AMQP 
servers and Windows Azure Service Bus.

The connection works fine to RabbitMQ server, but fails when connecting to 
ActiveMQ server. Should this work?

ActiveMQ config: <transportConnector name="amqp" uri="amqp://0.0.0.0:5672...

    ConnectionFactory factory = new ConnectionFactory();
    factory.setUri("amqp://system/manager at localhost:5672");
    Connection connection = factory.newConnection(); //throws the following 
exception

Exception in thread "main" java.io.IOException
at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)
at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)
at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:360)
at 
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)
at 
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)
at RabbitMQProducer.main(RabbitMQProducer.java:36)
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error; 
reason: java.io.EOFException
at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
at 
com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
at 
com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:313)
... 3 more
Caused by: java.io.EOFException
at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:273)
at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:95)
at 
com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:131)
at 
com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:515)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/762aa39c/attachment.htm>

From michael.s.klishin at gmail.com  Tue Jul 23 20:44:37 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Tue, 23 Jul 2013 23:44:37 +0400
Subject: [rabbitmq-discuss] Can RabbitMQ AMQP client communicate with
 ActiveMQ AMQP transport?
In-Reply-To: <59ece5c8-4cc7-4834-a7f7-967fac728436@googlegroups.com>
References: <59ece5c8-4cc7-4834-a7f7-967fac728436@googlegroups.com>
Message-ID: <CAE3HoVRM5_v0kj69gWA79bCAnMRb-qksDW+x3m5yOv9DzZRf3w@mail.gmail.com>

2013/7/23 Troy Collinsworth <troycollinsworth at gmail.com>

> The connection works fine to RabbitMQ server, but fails when connecting to
> ActiveMQ server. Should this work?


No.

According to http://activemq.apache.org/amqp.html, ActiveMQ implements AMQP
1.0.

RabbitMQ Java client is an AMQP 0.9.1 client. There's an AMQP 1.0 RabbitMQ
plugin but clients use 0.9.1,
which is a different protocol from 1.0.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/8c874db7/attachment.htm>

From luhao.whu at gmail.com  Wed Jul 24 02:31:36 2013
From: luhao.whu at gmail.com (Hugo)
Date: Tue, 23 Jul 2013 18:31:36 -0700 (PDT)
Subject: [rabbitmq-discuss] What does the "SUMMARY_EVERY_US" mean in
	rabbitmq-c?
Message-ID: <52191539-f3c0-4791-b733-d806643cae7d@googlegroups.com>

Hey, there

I am using rabbitmq-c for some applications. I got those code from the 
amqp_consumer.c, and the filed "next_summary_time " seemed to confuse me. 
What does the if 

clause (in bold) do here?

Many thanks!

 

> ...... 

#define SUMMARY_EVERY_US 100000

 ......

uint64_t next_summary_time = start_time + SUMMARY_EVERY_US;
> uint64_t now = now_microseconds();
>     *  **if (now > next_summary_time) {*
>         int countOverInterval = received - previous_received;
>         double intervalRate = countOverInterval / ((now - 
> previous_report_time) / 1000000.0);
>         printf("%d ms: Received %d - %d since last report (%d Hz)\n",
>            (int)(now - start_time) / 1000, received, countOverInterval, 
> (int) intervalRate);
>   
>         previous_received = received;
>         previous_report_time = now;
>         next_summary_time += SUMMARY_EVERY_US;
>       }
>   
>       amqp_maybe_release_buffers(conn);
> ......


Hugo. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/17877c0b/attachment.htm>

From luhao.whu at gmail.com  Wed Jul 24 02:31:36 2013
From: luhao.whu at gmail.com (Hugo)
Date: Tue, 23 Jul 2013 18:31:36 -0700 (PDT)
Subject: [rabbitmq-discuss] What does the "SUMMARY_EVERY_US" mean in
	rabbitmq-c?
Message-ID: <8496f91d-6d21-41a8-9484-f3eea02d5762@googlegroups.com>

Hey, there

I am using rabbitmq-c for some applications. I got those code from the 
amqp_consumer.c, and the filed "next_summary_time " seemed to confuse me. 
What does the if 

clause (in bold) do here?

Many thanks!

 

> ...... 

#define SUMMARY_EVERY_US 100000

 ......

uint64_t next_summary_time = start_time + SUMMARY_EVERY_US;
> uint64_t now = now_microseconds();
>     *  **if (now > next_summary_time) {*
>         int countOverInterval = received - previous_received;
>         double intervalRate = countOverInterval / ((now - 
> previous_report_time) / 1000000.0);
>         printf("%d ms: Received %d - %d since last report (%d Hz)\n",
>            (int)(now - start_time) / 1000, received, countOverInterval, 
> (int) intervalRate);
>   
>         previous_received = received;
>         previous_report_time = now;
>         next_summary_time += SUMMARY_EVERY_US;
>       }
>   
>       amqp_maybe_release_buffers(conn);
> ......


Hugo. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/ea610435/attachment.htm>

From brett.r.cameron at gmail.com  Wed Jul 24 03:57:06 2013
From: brett.r.cameron at gmail.com (Brett Cameron)
Date: Wed, 24 Jul 2013 14:57:06 +1200
Subject: [rabbitmq-discuss] What does the "SUMMARY_EVERY_US" mean in
	rabbitmq-c?
In-Reply-To: <52191539-f3c0-4791-b733-d806643cae7d@googlegroups.com>
References: <52191539-f3c0-4791-b733-d806643cae7d@googlegroups.com>
Message-ID: <CALPqkio9EsMAKQmTLDq73-1v_zLQtWy=vsKV6jvD1+ZdSRBn8g@mail.gmail.com>

The definition of SUMMARY_EVERY_US implies that information (messages
received and the rate) will be printed every 100000 microseconds (US ==
microseconds).

Brett


On Wed, Jul 24, 2013 at 1:31 PM, Hugo <luhao.whu at gmail.com> wrote:

> Hey, there
>
> I am using rabbitmq-c for some applications. I got those code from the
> amqp_consumer.c, and the filed "next_summary_time " seemed to confuse me.
> What does the if
>
> clause (in bold) do here?
>
> Many thanks!
>
>
>
>> ......
>
> #define SUMMARY_EVERY_US 100000
>
>  ......
>
> uint64_t next_summary_time = start_time + SUMMARY_EVERY_US;
>> uint64_t now = now_microseconds();
>>     *  **if (now > next_summary_time) {*
>>         int countOverInterval = received - previous_received;
>>         double intervalRate = countOverInterval / ((now -
>> previous_report_time) / 1000000.0);
>>         printf("%d ms: Received %d - %d since last report (%d Hz)\n",
>>            (int)(now - start_time) / 1000, received, countOverInterval,
>> (int) intervalRate);
>>
>>         previous_received = received;
>>         previous_report_time = now;
>>         next_summary_time += SUMMARY_EVERY_US;
>>       }
>>
>>       amqp_maybe_release_buffers(conn);
>> ......
>
>
> Hugo.
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/4be560c5/attachment.htm>

From nvthoai at gmail.com  Wed Jul 24 05:35:40 2013
From: nvthoai at gmail.com (Van Thoai Nguyen)
Date: Wed, 24 Jul 2013 14:35:40 +1000
Subject: [rabbitmq-discuss] Question abt Federation over virtual hosts on
	different nodes
Message-ID: <CAEa1i3Vw0x5sEiq3Xbncym63DXDY-6vY0iWNSvxnxQC7xr+AYw@mail.gmail.com>

Hi guys,

I'm trying to create federation exchanges so msgs published to exchange
"amq.direct" on virtual host / of node RabbitA will be sent to federated
exchange "amq.direct" on virtual host UAT of node RabbitB. Here are my
steps, assume that 2 nodes are newly created:


1/ On RabbitB, create virtual host UAT & assign permissions for user guest
2/ On RabbitB, go to Web UI
Navigate to Admin > Federation Upstreams > Add a new upstream.
- Choose Virtual host UAT
- Enter "my-upstream" next to Name, "amqp://RabbitA" next to URI, and
36000000 next to Expiry. Click Add upstream.

3/ On RabbitB, still on Web UI
Navigate to Admin > Policies > Add / update a policy.
- Choose Virtual host UAT
- Enter "federate-me" next to Name, "amq.direct" (without double quotes)
next to Regexp and "federation-upstream-set" = "all"  (without double
quotes) in the first line next to Policy. Click Add policy.

4/ On RabbitB, still on Web UI
Navigate to Admin > Federation Status
- Observe that the state of connection "federate-me" is always "starting"

5/ Go to log file and see that:
=WARNING REPORT==== 24-Jul-2013::14:30:01 ===
Federation exchange 'amq.direct' in vhost 'UAT' did not connect to exchange
'amq.direct' in vhost 'UAT' on amqp://RabbitA
{error,access_refused}


Apparently, the virtual host UAT on RabbitA does not exist. If I create
that virtual host on RabbitA, the connection will be fine but that's not
what i'm expected.
I want the client to publish msgs to to exchange "amq.direct" on virtual
host / on UAT on RabbitA. Is there anyway to do that?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/9f564cd9/attachment.htm>

From bison_art at o2.pl  Wed Jul 24 08:30:01 2013
From: bison_art at o2.pl (rabbit15)
Date: Wed, 24 Jul 2013 00:30:01 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51EE8FE9.5060008@rabbitmq.com>
References: <51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
Message-ID: <1374651001375-28315.post@n5.nabble.com>

Hi, here you have files:
report-high.txt
<http://rabbitmq.1065348.n5.nabble.com/file/n28315/report-high.txt>  
report-low.txt
<http://rabbitmq.1065348.n5.nabble.com/file/n28315/report-low.txt>  

Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28315.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Wed Jul 24 08:36:39 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 24 Jul 2013 08:36:39 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374651001375-28315.post@n5.nabble.com>
References: <51E90B17.7000803@rabbitmq.com> <51E90BED.9050603@rabbitmq.com>
	<1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
Message-ID: <51EF8407.4060806@rabbitmq.com>

Artur,

On 24/07/13 08:30, rabbit15 wrote:
> Hi, here you have files:
> report-high.txt
> <http://rabbitmq.1065348.n5.nabble.com/file/n28315/report-high.txt>
> report-low.txt
> <http://rabbitmq.1065348.n5.nabble.com/file/n28315/report-low.txt>

Have you got a message rate graph to go with that too?

Matthias


From bison_art at o2.pl  Wed Jul 24 08:47:03 2013
From: bison_art at o2.pl (rabbit15)
Date: Wed, 24 Jul 2013 00:47:03 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51EF8407.4060806@rabbitmq.com>
References: <1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
Message-ID: <1374652023304-28317.post@n5.nabble.com>

It is almost the same like previous one.
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28317.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Wed Jul 24 08:48:55 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 24 Jul 2013 08:48:55 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374652023304-28317.post@n5.nabble.com>
References: <1374485118545-28239.post@n5.nabble.com>
	<51ED05DC.4050005@rabbitmq.com>
	<1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
	<1374652023304-28317.post@n5.nabble.com>
Message-ID: <51EF86E7.8030105@rabbitmq.com>

On 24/07/13 08:47, rabbit15 wrote:
> It is almost the same like previous one.

If you have it, please post it.

Matthias.


From bison_art at o2.pl  Wed Jul 24 08:51:06 2013
From: bison_art at o2.pl (rabbit15)
Date: Wed, 24 Jul 2013 00:51:06 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51EF86E7.8030105@rabbitmq.com>
References: <1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
	<1374652023304-28317.post@n5.nabble.com>
	<51EF86E7.8030105@rabbitmq.com>
Message-ID: <1374652266203-28319.post@n5.nabble.com>

Sorry, I don't have. If you need I will test it one more time. It was the
same so I skip it.
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28319.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From matthias at rabbitmq.com  Wed Jul 24 09:26:00 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 24 Jul 2013 09:26:00 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374652266203-28319.post@n5.nabble.com>
References: <1374585441062-28293.post@n5.nabble.com>
	<51EE8524.8030601@rabbitmq.com>
	<1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
	<1374652023304-28317.post@n5.nabble.com>
	<51EF86E7.8030105@rabbitmq.com>
	<1374652266203-28319.post@n5.nabble.com>
Message-ID: <51EF8F98.5070601@rabbitmq.com>

On 24/07/13 08:51, rabbit15 wrote:
> Sorry, I don't have. If you need I will test it one more time. It was the
> same so I skip it.

Please post another pair of reports and associated graph. Sorry about that.

Also, I have just noticed something odd about the previous graph you 
posted 
(http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28293.html): 
the publish rate is displayed as 53.5kHz but the graph only shows around 
~20kHz. So there is definitely something odd going on here.

I've also notices something else: the graph you previously posted 
indicated an increasing number of unacknowledged messages. And the 
recent reports show that too. The complexity of delivering messages to 
consumers and of processing an acknowledgement is 
O(log(number_of_unacknowledged_messages)). Since in your test the number 
of unacknowledged messages rises over time, there will be a slow-down. 
That doesn't explain the inflection in the graph though.

Matthias.

From rodvela at gmail.com  Tue Jul 23 22:08:40 2013
From: rodvela at gmail.com (rodvela)
Date: Tue, 23 Jul 2013 14:08:40 -0700 (PDT)
Subject: [rabbitmq-discuss] undefined symbol: AMQP_ASSIGN_CONNECTION
In-Reply-To: <CAE3HoVQh_pku2VDXQf57+uZ0ko_TAoG+S2nJMgOy_Nx=yjfoeA@mail.gmail.com>
References: <eff515fe-a993-402e-aaf0-410667872af3@googlegroups.com>
	<CAE3HoVQh_pku2VDXQf57+uZ0ko_TAoG+S2nJMgOy_Nx=yjfoeA@mail.gmail.com>
Message-ID: <1374613720566-28309.post@n5.nabble.com>

I am having the same problem in my server

When looking at apache2/error.log y got this

/usr/sbin/apache2: symbol lookup error: /usr/lib/php5/20090626/amqp.so:
undefined symbol: amqp_open_socket

What could be happening?

Thanks



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/undefined-symbol-AMQP-ASSIGN-CONNECTION-tp21908p28309.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From daniil.guit at gmail.com  Tue Jul 23 22:11:16 2013
From: daniil.guit at gmail.com (Daniil Gitelson)
Date: Tue, 23 Jul 2013 14:11:16 -0700 (PDT)
Subject: [rabbitmq-discuss] Durabble queues are empty after rabbitmq-server
	restart
Message-ID: <c933ef69-455e-4594-bcfd-b794f7d6636e@googlegroups.com>

Hello,

I'm using durable rabbitmq queues in order to "survive" server restart, but 
unfortunately all queues are cleared after rabbitmq restart. 

I checked that queues are durable with rabbitmqctl:

sudo rabbitmqctl list_queues name durable
Listing queues ...
reports true
snippet true

Server: 3.1.3
Client: java rabbitmq amqp driver 3.1.3

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/2b633ace/attachment.htm>

From nvthoai at gmail.com  Tue Jul 23 23:59:38 2013
From: nvthoai at gmail.com (vantheshark)
Date: Tue, 23 Jul 2013 15:59:38 -0700 (PDT)
Subject: [rabbitmq-discuss] Question about Federation,
	Status is running but no message?
Message-ID: <1374620378414-28310.post@n5.nabble.com>

Hi, I tried to search all existing questions but couldn't find out the
answer. So I apologize if so has already asked.


RabbitMQ version: 3.1.3
Erlang R16B01
Windows (same problem on Linux as well, so I think I misunderstood
something)

What I'm trying to do is setup a federation so that all messages published
to an exchange on virtual host / will go to virtual host "UAT" on the same
single RabbitMQ node.

This is my steps:

1/ Web UI	 
Navigate to Admin > Federation Upstreams > Add a new upstream. Enter
"my-upstream" next to Name, "amqp://localhost/UAT" next to URI, and 36000000
next to Expiry. Click Add upstream.

2/ Web UI	 
Navigate to Admin > Policies > Add / update a policy. Enter "federate-me"
next to Name, "MyExchange" (without double quotes) next to Regexp and
"federation-upstream-set" = "all"  (without double quotes) in the first line
next to Policy. Click Add policy.

3/ I actually see the exchange "MyExchange" on virtual host / matched the
Policy "federate-me" on WebUI, and also see that it created the exchange
"MyExchange" and "federation : MyExchange -> ..... " (type
x-federation-upstream) on the UAT virtual host.

4/ I also see the Running Link with state = "running" when check the
Federation Status on WebUI

5/ I start publishing messages to exchange "MyExchange" which is on virtual
host / but couldn't see anything going to exchanges, queues on UAT virtual
host


So do i misunderstood something or did I make anything wrong?

Cheers.





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Question-about-Federation-Status-is-running-but-no-message-tp28310.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From sachingoyal.422 at gmail.com  Wed Jul 24 08:07:02 2013
From: sachingoyal.422 at gmail.com (sachin goyal)
Date: Wed, 24 Jul 2013 00:07:02 -0700 (PDT)
Subject: [rabbitmq-discuss] using rabbitmq for making a queue for
 update/insert queries of database
Message-ID: <acfb3b21-6471-449c-b5d9-bfc99f719e68@googlegroups.com>

I am using batch update for querying database. Now, I want a queuing 
solution like rabbitmq for this so that my thread can handle other requests 
coming while processing database update through queue?? 
I am not able to find any suitable tutorials for this, please somebody help 
out.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/f3a268e0/attachment.htm>

From pompermaier at okkam.it  Wed Jul 24 09:04:13 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Wed, 24 Jul 2013 01:04:13 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
Message-ID: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>

Hi to all,
In my application I have a queue that could potentially become very big. 

From mklishin at gopivotal.com  Wed Jul 24 09:45:07 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 12:45:07 +0400
Subject: [rabbitmq-discuss] undefined symbol: AMQP_ASSIGN_CONNECTION
In-Reply-To: <1374613720566-28309.post@n5.nabble.com>
References: <eff515fe-a993-402e-aaf0-410667872af3@googlegroups.com>
	<CAE3HoVQh_pku2VDXQf57+uZ0ko_TAoG+S2nJMgOy_Nx=yjfoeA@mail.gmail.com>
	<1374613720566-28309.post@n5.nabble.com>
Message-ID: <AE3EC1AD-400C-4295-AB63-90B4B7B464B9@gopivotal.com>

rodvela:

> /usr/sbin/apache2: symbol lookup error: /usr/lib/php5/20090626/amqp.so:
> undefined symbol: amqp_open_socket
> 
> What could be happening?

You seem to be using a PHP wrapper for librabbitmq (aka rabbitmq-c) and the version of
the wrapper does not match the version of librabbitmq.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/654506ea/attachment.pgp>

From mklishin at gopivotal.com  Wed Jul 24 09:46:22 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 12:46:22 +0400
Subject: [rabbitmq-discuss] Durabble queues are empty after
	rabbitmq-server restart
In-Reply-To: <c933ef69-455e-4594-bcfd-b794f7d6636e@googlegroups.com>
References: <c933ef69-455e-4594-bcfd-b794f7d6636e@googlegroups.com>
Message-ID: <E7D48898-C296-47BB-BD0E-94E436DA75E3@gopivotal.com>

Daniil Gitelson:

> I checked that queues are durable with rabbitmqctl:
> 
> sudo rabbitmqctl list_queues name durable
> Listing queues ...
> reports	true
> snippet	true

If you run rabbitmqctl without specifying vhost (using the -p flag) it will list queues for the default
vhost (/).

Are you sure you are not declaring queues in a different vhost?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/486fbec9/attachment.pgp>

From matthias at rabbitmq.com  Wed Jul 24 09:49:52 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 24 Jul 2013 09:49:52 +0100
Subject: [rabbitmq-discuss] Durabble queues are empty after
 rabbitmq-server restart
In-Reply-To: <c933ef69-455e-4594-bcfd-b794f7d6636e@googlegroups.com>
References: <c933ef69-455e-4594-bcfd-b794f7d6636e@googlegroups.com>
Message-ID: <51EF9530.1090400@rabbitmq.com>

On 23/07/13 22:11, Daniil Gitelson wrote:
> I'm using durable rabbitmq queues in order to "survive" server restart,
> but unfortunately all queues are cleared after rabbitmq restart.

Make sure your messages are marked as persistent. See the section on 
"Message durability" in 
http://www.rabbitmq.com/tutorials/tutorial-two-python.html

Matthias.

From mklishin at gopivotal.com  Wed Jul 24 09:50:17 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 12:50:17 +0400
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
Message-ID: <78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>

Flavio Pompermaier:

> From what I understood queues cannot be splitted among different machines, a single queue resided only on a single node..am I wrong?

Queue contents are not sharded but can be mirrored.

> What if I discover that my machine is not able to keep up with message rate?

Use multiple queues. A single queue certainly will have scalability limitations.

> Maybe I should start mirroring the queue on multiple servers so I can multiply the number of consumers? 

Mirroring won't help. Increasing the # of consumers and/or queues likely will. Mirroring is an HA
feature.

> Is this approach scalable or does the synchronization overhead kill the performance?

Mirroring involves moving more data between cluster nodes so yes, it does affect cluster
throughput.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/610219b9/attachment.pgp>

From mklishin at gopivotal.com  Wed Jul 24 09:52:46 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 12:52:46 +0400
Subject: [rabbitmq-discuss] using rabbitmq for making a queue for
	update/insert queries of database
In-Reply-To: <acfb3b21-6471-449c-b5d9-bfc99f719e68@googlegroups.com>
References: <acfb3b21-6471-449c-b5d9-bfc99f719e68@googlegroups.com>
Message-ID: <182E251D-023A-4E76-9E83-5E148AE58099@gopivotal.com>

sachin goyal:

> I am using batch update for querying database. Now, I want a queuing solution like rabbitmq for this so that my thread can handle other requests coming while processing database update through queue?? 
> I am not able to find any suitable tutorials for this, please somebody help out.

This is often called "event sourcing" and is a common use case for messaging.

Start by taking a look at RabbitMQ tutorials:
http://www.rabbitmq.com/getstarted.html

in particular tutorials 2, 4 and 5.

Then make your publishers (e.g. a Web app) publish events when the data model changes
and consumers (workers) perform necessary DB updates.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/d952cd49/attachment.pgp>

From pompermaier at okkam.it  Wed Jul 24 10:11:06 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Wed, 24 Jul 2013 11:11:06 +0200
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
Message-ID: <CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>

Thank you for the support Michael.
So my guess were right..The problem is that in my use case I should start
receiving messages until I receive a special "end-message" (true/false
attribute on a json object).
When I receive this end-message I should start a map/reduce job on received
data (that gets stored in HBase in this first step).
Obviously I need a way to ensure that no worker is still working on the
data, so the consumer receiving the end-message should be able to wait for
all consumer to finish their work.
In my current implementation I use a single queue and a single
multi-threaded consumer (via Spring-AMQP) that allow me to achieve this
goal.
But, I'm not sure what's the best way of scaling..is there some RabbitMQ
mechanism that I can exploit?
Should I change my design?
Maybe I should create a dedicated exchange per source and add more queues
as the load grows..but here I still got problems when I receive this end
message..
how can I ask Consumers if they finished their work? How add more queues
when a certain load is achieved? How remove them when they are no more
requested?

Best,
Flavio

On Wed, Jul 24, 2013 at 10:50 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Flavio Pompermaier:
>
> > From what I understood queues cannot be splitted among different
> machines, a single queue resided only on a single node..am I wrong?
>
> Queue contents are not sharded but can be mirrored.
>
> > What if I discover that my machine is not able to keep up with message
> rate?
>
> Use multiple queues. A single queue certainly will have scalability
> limitations.
>
> > Maybe I should start mirroring the queue on multiple servers so I can
> multiply the number of consumers?
>
> Mirroring won't help. Increasing the # of consumers and/or queues likely
> will. Mirroring is an HA
> feature.
>
> > Is this approach scalable or does the synchronization overhead kill the
> performance?
>
> Mirroring involves moving more data between cluster nodes so yes, it does
> affect cluster
> throughput.
> --
> MK
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/96e8f56e/attachment.htm>

From simon at rabbitmq.com  Wed Jul 24 10:18:06 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 24 Jul 2013 10:18:06 +0100
Subject: [rabbitmq-discuss] Question about Federation,
 Status is running but no message?
In-Reply-To: <1374620378414-28310.post@n5.nabble.com>
References: <1374620378414-28310.post@n5.nabble.com>
Message-ID: <51EF9BCE.2040400@rabbitmq.com>

On 23/07/13 23:59, vantheshark wrote:
> What I'm trying to do is setup a federation so that all messages published
> to an exchange on virtual host / will go to virtual host "UAT" on the same
> single RabbitMQ node.
>
> This is my steps:
>
> 1/ Web UI	
> Navigate to Admin > Federation Upstreams > Add a new upstream. Enter
> "my-upstream" next to Name, "amqp://localhost/UAT" next to URI, and 36000000
> next to Expiry. Click Add upstream.

You've done it the wrong way round. Messages flow from the upstream to 
the downstream - therefore you've set things up so that messages 
published on "UAT" get forwarded to "/".

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From mklishin at gopivotal.com  Wed Jul 24 10:31:50 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 13:31:50 +0400
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
	<CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
Message-ID: <15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>

Flavio Pompermaier:

> In my current implementation I use a single queue and a single multi-threaded consumer (via Spring-AMQP) that allow me to achieve this goal.
> But, I'm not sure what's the best way of scaling..is there some RabbitMQ mechanism that I can exploit?
> Should I change my design?
> Maybe I should create a dedicated exchange per source and add more queues as the load grows..but here I still got problems when I receive this end message..

Indeed having a "stop message" implies message ordering. But it is also the case with
multiple consumers per queue.

So the issue really is how to coordinate consumers, regardless of how many queues are
involved.

Depending on the delay between one consumer receiving the stop message and all consumers
stopping you can tolerate, you can either notify other consumers via a separate group of
queues (lets call them "control queues") or using a key/value store like Redis, or a full blown
coordination system such as ZooKeeper.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/33d9cfc6/attachment.pgp>

From a.sysoff at gmail.com  Wed Jul 24 10:38:05 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Wed, 24 Jul 2013 02:38:05 -0700 (PDT)
Subject: [rabbitmq-discuss] Durabble queues are empty after
	rabbitmq-server restart
In-Reply-To: <c933ef69-455e-4594-bcfd-b794f7d6636e@googlegroups.com>
References: <c933ef69-455e-4594-bcfd-b794f7d6636e@googlegroups.com>
Message-ID: <f3c9e9de-6038-40b1-b1aa-0210a29b5d22@googlegroups.com>

To create durable queue is not sufficient condition to persist messages. To 
make your messages persistent you should publish them with mode 2.

On Wednesday, July 24, 2013 12:11:16 AM UTC+3, Daniil Gitelson wrote:
>
> Hello,
>
> I'm using durable rabbitmq queues in order to "survive" server restart, 
> but unfortunately all queues are cleared after rabbitmq restart. 
>
> I checked that queues are durable with rabbitmqctl:
>
> sudo rabbitmqctl list_queues name durable
> Listing queues ...
> reports true
> snippet true
>
> Server: 3.1.3
> Client: java rabbitmq amqp driver 3.1.3
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/e9153bac/attachment.htm>

From simon at rabbitmq.com  Wed Jul 24 10:39:15 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 24 Jul 2013 10:39:15 +0100
Subject: [rabbitmq-discuss] Question on Cluster Restart
In-Reply-To: <CAO=6ox9G6aGek+B5x8PiwRPU+uwW+ePOYLaZ=ArgeuFXBbYBWQ@mail.gmail.com>
References: <CAO=6ox9G6aGek+B5x8PiwRPU+uwW+ePOYLaZ=ArgeuFXBbYBWQ@mail.gmail.com>
Message-ID: <51EFA0C3.90300@rabbitmq.com>

On 23/07/13 19:58, Richard Raseley wrote:
> In reading this page:
>
> http://www.rabbitmq.com/clustering.html
>
> It seems that when shutting down a cluster for upgrade you must ensure
> that the last node down is the first node up. However, in previous
> versions of the documentation I recall this being a caveat for if and
> only if you had a mix of disk and RAM nodes. Is this not the case
> anymore (we have all disk-backed nodes).

I don't think that requirement has changed since we added cluster upgrades.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From pompermaier at okkam.it  Wed Jul 24 10:52:37 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Wed, 24 Jul 2013 11:52:37 +0200
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
	<CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
	<15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>
Message-ID: <CAELUF_CjZBUh1jjALejofA4+5EUf=oymZ=Nwe6co6nNsLg7RKg@mail.gmail.com>

Yes, I think you got the point..Unfortunately I'm not so expert of RabbitMQ
to fully understand how to integrate Redis or Zookeeper in RabbitMQ :(
I think my use case is an already encountered one, isn't it? is there some
reference to an already existing solution?
If not, could you please give me some more reference or hint about
implementing the solution you proposed?


On Wed, Jul 24, 2013 at 11:31 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Flavio Pompermaier:
>
> > In my current implementation I use a single queue and a single
> multi-threaded consumer (via Spring-AMQP) that allow me to achieve this
> goal.
> > But, I'm not sure what's the best way of scaling..is there some RabbitMQ
> mechanism that I can exploit?
> > Should I change my design?
> > Maybe I should create a dedicated exchange per source and add more
> queues as the load grows..but here I still got problems when I receive this
> end message..
>
> Indeed having a "stop message" implies message ordering. But it is also
> the case with
> multiple consumers per queue.
>
> So the issue really is how to coordinate consumers, regardless of how many
> queues are
> involved.
>
> Depending on the delay between one consumer receiving the stop message and
> all consumers
> stopping you can tolerate, you can either notify other consumers via a
> separate group of
> queues (lets call them "control queues") or using a key/value store like
> Redis, or a full blown
> coordination system such as ZooKeeper.
> --
> MK
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/a9c3a87f/attachment.htm>

From bison_art at o2.pl  Wed Jul 24 11:01:29 2013
From: bison_art at o2.pl (rabbit15)
Date: Wed, 24 Jul 2013 03:01:29 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51EF8F98.5070601@rabbitmq.com>
References: <1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
	<1374652023304-28317.post@n5.nabble.com>
	<51EF86E7.8030105@rabbitmq.com>
	<1374652266203-28319.post@n5.nabble.com>
	<51EF8F98.5070601@rabbitmq.com>
Message-ID: <1374660089485-28335.post@n5.nabble.com>

Thanks for fast reply!
The number of current published messages is from last 5 seconds and the
graph was taken from last hour, so there is approximately value on the
graph. The value of publishing was from 0 to 50k (as you have seen) in the
second part.
I have also the question about:
"The complexity of delivering messages to
consumers and of processing an acknowledgement is
O(log(number_of_unacknowledged_messages))."

In my system there is a lot of free memory so why it slows down ?

Here are file and graph:
report-high2.txt
<http://rabbitmq.1065348.n5.nabble.com/file/n28335/report-high2.txt>  
report-low2.txt
<http://rabbitmq.1065348.n5.nabble.com/file/n28335/report-low2.txt>  
<http://rabbitmq.1065348.n5.nabble.com/file/n28335/Nabble2.png> 


Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28335.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From a.sysoff at gmail.com  Wed Jul 24 11:13:34 2013
From: a.sysoff at gmail.com (Anton Sizov)
Date: Wed, 24 Jul 2013 03:13:34 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
Message-ID: <a96df3cf-b384-4e6b-b246-2b056ae1b27b@googlegroups.com>

By default queue resides at node, where it was created. As far as I know, 
client may consume(get, receive) messages from any rabbitmq node in 
cluster. There is no necessary to mirror queue (and also you are right, it 
reduce performance). Each node knows about where target each queue placed. 
Also you can publish messages to any node in cluster. Message will be 
delivered to node where target queue was created.
Mirroring is suitable when you want to replicate you messages for case of 
node failure or db file corruption.

On Wednesday, July 24, 2013 11:04:13 AM UTC+3, Flavio Pompermaier wrote:
>
> Hi to all,
> In my application I have a queue that could potentially become very big. 
> From what I understood queues cannot be splitted among different machines, 
> a single queue resided only on a single node..am I wrong?
> What if I discover that my machine is not able to keep up with message 
> rate?
> Maybe I should start mirroring the queue on multiple servers so I can 
> multiply the number of consumers? 
> Is this approach scalable or does the synchronization overhead kill the 
> performance?
>
> Best,
> Flavio
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/b3aae0f5/attachment.htm>

From matthias at rabbitmq.com  Wed Jul 24 11:36:02 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 24 Jul 2013 11:36:02 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374660089485-28335.post@n5.nabble.com>
References: <1374586939316-28296.post@n5.nabble.com>
	<51EE8A99.90500@rabbitmq.com>
	<1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
	<1374652023304-28317.post@n5.nabble.com>
	<51EF86E7.8030105@rabbitmq.com>
	<1374652266203-28319.post@n5.nabble.com>
	<51EF8F98.5070601@rabbitmq.com>
	<1374660089485-28335.post@n5.nabble.com>
Message-ID: <51EFAE12.7010208@rabbitmq.com>

On 24/07/13 11:01, rabbit15 wrote:
> The number of current published messages is from last 5 seconds and the
> graph was taken from last hour, so there is approximately value on the
> graph. The value of publishing was from 0 to 50k (as you have seen) in the
> second part.

Are you saying the publishing rate fluctuates between 0 and 50kHz? Any 
idea why that is?

> I have also the question about:
> "The complexity of delivering messages to
> consumers and of processing an acknowledgement is
> O(log(number_of_unacknowledged_messages))."
>
> In my system there is a lot of free memory so why it slows down ?

The above has nothing to do with memory but the computational complexity 
of working with the data structures involved. i.e. pending acks are 
recorded in a gb-tree, which has O(log(N)) insert/removal complexity.

> <http://rabbitmq.1065348.n5.nabble.com/file/n28335/Nabble2.png>

That graph is somewhat less conclusive than the previous one; it shows 
fluctuation rather than a sudden drop.

Can you

(a) reduce your tests to the minimum setup that reproduces the issue? 
You seem to have a lot of connections, channels and queues that don't do 
very much; I suspect it's safe to remove those. And...

(b) post the code & instructions for us to reproduce the problem?


Regards,

Matthias.

From mklishin at gopivotal.com  Wed Jul 24 12:10:57 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 15:10:57 +0400
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <CAELUF_CjZBUh1jjALejofA4+5EUf=oymZ=Nwe6co6nNsLg7RKg@mail.gmail.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
	<CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
	<15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>
	<CAELUF_CjZBUh1jjALejofA4+5EUf=oymZ=Nwe6co6nNsLg7RKg@mail.gmail.com>
Message-ID: <3A0CE828-D805-491E-BC40-860B3527A88C@gopivotal.com>

Flavio Pompermaier:

> If not, could you please give me some more reference or hint about implementing the solution you proposed?

just make the consumer that receives the first "stop" message publish a message that all
consumers will get (via a separate queue).

Note that to avoid an infinite loop of messages, you need to mark such control messages
and make sure other consumers don't publish anything, just stop.

Then the consumer that's got the first "stop" message can start a map/reduce job.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/5ff92551/attachment.pgp>

From ceri at lshift.net  Wed Jul 24 12:20:45 2013
From: ceri at lshift.net (Ceri Storey)
Date: Wed, 24 Jul 2013 12:20:45 +0100
Subject: [rabbitmq-discuss] How to not publish messages,
	if queue is full?
In-Reply-To: <025976ec-568b-475c-aa54-234407194476@googlegroups.com>
References: <025976ec-568b-475c-aa54-234407194476@googlegroups.com>
Message-ID: <51EFB88D.1000601@lshift.net>

(15/07/13 15:14), sergey at openbridge.com wrote:
> Hi everybody,
>
> I tried to put a limit on the queue size using 'x-max-length', but the
> problem is Messages will be dropped or dead-lettered from the front of
> the queue to make room for new messages once the limit is reached.
>  
> What are the possible ways to not drop the messages? Ideally I would
> like to throw an Exception if queue is full.
>
> First I was thinking to check the queue size, and if it's full than
> stop. But for example if I have 5 producers and queue limit size is
> set to 10, and I already have 9 messages in the queue, than all 5
> producers will check the size, and publish their messages and 4
> messages will be lost.
>
> That's how I declare x-max-length':
>
> result = channel.queue_declare(queue='Test', arguments={
> 'x-max-length' : 10})
>
>
It might be worth trying to drop messages with a probability based on
how full the queue is, like in the Random Early Detection
<http://en.wikipedia.org/wiki/Random_early_detection> queue management
scheme. So, pulling numbers out of the air, with a max queue length of
100, and if you start dropping messages when the queue is 50% full, then
you might drop 20% of messages when the queue is 60% full, and 80% when
90% full. The probabilistic aspect means that you're less dependent on
timing of queue length reads.

I should probably point out that I've not tried this myself, so I'd
advise caution and lots of experimentation.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/da3e89c0/attachment.htm>

From 314992959 at qq.com  Wed Jul 24 12:22:11 2013
From: 314992959 at qq.com (3k4b251)
Date: Wed, 24 Jul 2013 04:22:11 -0700 (PDT)
Subject: [rabbitmq-discuss] virtual windows server install rabbitmq server
	quesiton
Message-ID: <1374664931954-28339.post@n5.nabble.com>

I want  to  run  rabbitmq server  on  virtual  windows server  which  run  on 
linux .  I can   easily   install  erlang  and  Rabbitmq  server. But  when 
I  try to   run   rabbitmqctl.bat .  nothing  happend,even  a  Command
prompt .    The    rabbitmq  service  run normal.  But  I  use    
rabbitmqctl.bat  rabbitmq-echopid .... rabbitmq-plugins.bat  ...., and  they 
have no  returns to me .   I think  there  should  be  a thread  named  
epmd.exe  ,but there is  not .    

erlang version :   opt_win32_R168.exe

rabbitmq server version :  rabbitmq-server-3.1.1.exe



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/virtual-windows-server-install-rabbitmq-server-quesiton-tp28339.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From nvthoai at gmail.com  Wed Jul 24 12:25:30 2013
From: nvthoai at gmail.com (vantheshark)
Date: Wed, 24 Jul 2013 04:25:30 -0700 (PDT)
Subject: [rabbitmq-discuss] Question about Federation,
	Status is running but no message?
In-Reply-To: <51EF9BCE.2040400@rabbitmq.com>
References: <1374620378414-28310.post@n5.nabble.com>
	<51EF9BCE.2040400@rabbitmq.com>
Message-ID: <1374665130430-28341.post@n5.nabble.com>

Thank Simon, i figured out already, however I faced another problem which I
ask in this post

http://rabbitmq.1065348.n5.nabble.com/Question-abt-Federation-over-virtual-hosts-on-different-nodes-td28314.html


If you have the answer, please help.
Thank alot
Van



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Question-about-Federation-Status-is-running-but-no-message-tp28310p28341.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Wed Jul 24 12:37:54 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 24 Jul 2013 12:37:54 +0100
Subject: [rabbitmq-discuss] Question abt Federation over virtual hosts
 on different nodes
In-Reply-To: <CAEa1i3Vw0x5sEiq3Xbncym63DXDY-6vY0iWNSvxnxQC7xr+AYw@mail.gmail.com>
References: <CAEa1i3Vw0x5sEiq3Xbncym63DXDY-6vY0iWNSvxnxQC7xr+AYw@mail.gmail.com>
Message-ID: <51EFBC92.1020702@rabbitmq.com>

On 24/07/13 05:35, Van Thoai Nguyen wrote:
> Apparently, the virtual host UAT on RabbitA does not exist. If I create
> that virtual host on RabbitA, the connection will be fine but that's not
> what i'm expected.
> I want the client to publish msgs to to exchange "amq.direct" on virtual
> host / on UAT on RabbitA. Is there anyway to do that?

I'm not sure what you mean by "on virtual host / on UAT on RabbitA".

Are you trying to get the exchange "amq.direct" in "UAT" on RabbitB to 
have as an upstream the exchange "amq.direct" in "/" on RabbitA?

In that case you need the URI to be "amqp://RabbitA/%2f" - you need to 
explicitly supply a vhost in the URI. "amqp://RabbitA" means "connect to 
RabbitA, using the same vhost for the upstream as you are connecting from".

Does that make sense?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From ceri at lshift.net  Wed Jul 24 12:42:41 2013
From: ceri at lshift.net (Ceri Storey)
Date: Wed, 24 Jul 2013 12:42:41 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
Message-ID: <51EFBDB1.6090209@lshift.net>

(22/07/13 18:38), Pedro S? da Costa wrote:
> Hi,
>
> I am trying to configure rabbitmq with EC2. The rabbitmq works when it
> uses the private IP, but when I try to use the public IP, I can't
> start the rabbitmq. What I want to do is that different EC2 regions
> access the same rabbitmq. E.g.: the rabbitmq is running in region USA,
> and the applications are running in Singapore and in Ireland. The
> applications must access the rabbitmq in USA. I open all the ports in
> the regions.

As has been said elsewhere in this thread, you don't need to change
anything to be able to access the Rabbit via it's public address. On Ec2
at least, your machine itself is given the private IP, and the
translation to and from the public IP is handled by Amazon's networking
devices.

Did you have problems trying connect to the rabbit via it's public IP
when you were using it's default configuration?

>
> The configuration file that I use is:
>
> $ cat /etc/rabbitmq/rabbitmq-env.conf
> RABBITMQ_NODE_IP_ADDRESS=XX.XXX.XX.XXX
>
>
> The error that I get is:
>
> $ cat /var/log/rabbitmq/startup_log 
>
>               RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
>   ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
>   ##  ##
>   ##########  Logs: /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
>   ######  ##        /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log
>   ##########
>               Starting broker...
>
> BOOT FAILED
> ===========
>
> Error description:
>    {could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log
>
> Stack trace:
>    [{rabbit_networking,start_listener0,4,[]},
>     {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
>     {rabbit_networking,start_listener,4,[]},
>     {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
>     {rabbit_networking,boot_tcp,0,[]},
>     {rabbit_networking,boot,0,[]},
>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
>     {rabbit,run_boot_step,1,[]}]
>
>
>
> BOOT FAILED
> ===========
>
> Error description:
>    {could_not_start,rabbit,
>        {bad_return,
>            {{rabbit,start,[normal,[]]},
>             {'EXIT',
>                 {rabbit,failure_during_boot,
>                    
> {could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}}}}}}
>
> Log files (may contain more information):
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198.log
>    /var/log/rabbitmq/rabbit at ip-10-170-74-198-sasl.log
>
> {"init terminating in
> do_boot",{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{could_not_start_tcp_listener,{"XX.XXX.XX.XXX",5672}}}}}}}}}
>
> How can I set the rabbitmq to use the public IP for other regions
> access it?
>
> -- 
> Best regards,
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/95ab1dcb/attachment.htm>

From pompermaier at okkam.it  Wed Jul 24 12:57:31 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Wed, 24 Jul 2013 13:57:31 +0200
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <3A0CE828-D805-491E-BC40-860B3527A88C@gopivotal.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
	<CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
	<15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>
	<CAELUF_CjZBUh1jjALejofA4+5EUf=oymZ=Nwe6co6nNsLg7RKg@mail.gmail.com>
	<3A0CE828-D805-491E-BC40-860B3527A88C@gopivotal.com>
Message-ID: <CAELUF_DmbByS59AsxjXzN55Lwc40Rka1Pt1r=2pKtS6sjeV+zg@mail.gmail.com>

Actually the Consumer that receive the first stop message should receive
also N-1 "I finished my stuff" messages from the other N -1 consumers..
But I think it could be quite easily feasible..summarizing, tell me if this
could be a good workflow:

1) One of the N consumers receive the end-message
2) This consumer opens a new temporary feedback-queue to receive feedbacks
from other consumers and post to a fanout control queue a "wait for end of
processing" to all other consumers (containing also the id of the
feedback-queue)
3) Sender ignores such message, other consumers sends a "I finished my
stuff" message once finished their work to the feedback-queue (whose id is
indicated in the "wait for end of processing" message)
4) Once that the Consumer who initiated the "stop phase" receive all the
N-1 feedbacks (or after a certain timeout) it can delete the temporary
feedback queue and start the map reduce job

What is missing in this scenario is how consumers can be informed of the
number of active consumers (i.e. N)..any help about this? Do you think this
steps could be reasonable?

On Wed, Jul 24, 2013 at 1:10 PM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Flavio Pompermaier:
>
> > If not, could you please give me some more reference or hint about
> implementing the solution you proposed?
>
> just make the consumer that receives the first "stop" message publish a
> message that all
> consumers will get (via a separate queue).
>
> Note that to avoid an infinite loop of messages, you need to mark such
> control messages
> and make sure other consumers don't publish anything, just stop.
>
> Then the consumer that's got the first "stop" message can start a
> map/reduce job.
> --
> MK
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/5cfc682d/attachment.htm>

From michael.s.klishin at gmail.com  Wed Jul 24 13:05:45 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 24 Jul 2013 16:05:45 +0400
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <CAELUF_DmbByS59AsxjXzN55Lwc40Rka1Pt1r=2pKtS6sjeV+zg@mail.gmail.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
	<CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
	<15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>
	<CAELUF_CjZBUh1jjALejofA4+5EUf=oymZ=Nwe6co6nNsLg7RKg@mail.gmail.com>
	<3A0CE828-D805-491E-BC40-860B3527A88C@gopivotal.com>
	<CAELUF_DmbByS59AsxjXzN55Lwc40Rka1Pt1r=2pKtS6sjeV+zg@mail.gmail.com>
Message-ID: <CAE3HoVQJfSxEFOcLFNksmnjVAO=PQV6uhi4JpgJAq_q8TqPgow@mail.gmail.com>

2013/7/24 Flavio Pompermaier <pompermaier at okkam.it>

> 1) One of the N consumers receive the end-message
> 2) This consumer opens a new temporary feedback-queue to receive feedbacks
> from other consumers and post to a fanout control queue a "wait for end of
> processing" to all other consumers (containing also the id of the
> feedback-queue)
> 3) Sender ignores such message, other consumers sends a "I finished my
> stuff" message once finished their work to the feedback-queue (whose id is
> indicated in the "wait for end of processing" message)
> 4) Once that the Consumer who initiated the "stop phase" receive all the
> N-1 feedbacks (or after a certain timeout) it can delete the temporary
> feedback queue and start the map reduce job
>

This sounds about right.


> What is missing in this scenario is how consumers can be informed of the
> number of active consumers (i.e. N)..any help about this? Do you think this
> steps could be reasonable?
>

This is a good question. Add to this that consumers can crash or become
unavailable because of
network failures. Coordination over RabbitMQ alone will probably be more
difficult than using
Redis for this purpose (as a "presence service", more or less), e.g. using
its set data structures.

Any consumer would add itself to a set on start and any consumer can read
the set and see
who is online. I'm not very up-to-date with Redis but ideally you'd use its
features to detect
consumers leaving.
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/7a6dd666/attachment.htm>

From mklishin at gopivotal.com  Wed Jul 24 13:16:45 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 16:16:45 +0400
Subject: [rabbitmq-discuss] ANN Bunny 0.9.3 is released
Message-ID: <B05B380D-AEC4-4589-82EA-5975FE826614@gopivotal.com>

Bunny 0.9.3 is released to rubygems.org [1].

This is a backwards-compatible bug fix release. All Bunny users are recommended to upgrade.

Release notes:
http://blog.rubyrabbitmq.info/blog/2013/07/24/bunny-0-dot-9-3-is-released/

Kudos to Matt Campbell for contributing to this release.

1. https://rubygems.org/gems/bunny/versions/0.9.3
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/b668d085/attachment.pgp>

From nvthoai at gmail.com  Wed Jul 24 13:21:57 2013
From: nvthoai at gmail.com (vantheshark)
Date: Wed, 24 Jul 2013 05:21:57 -0700 (PDT)
Subject: [rabbitmq-discuss] Question abt Federation over virtual hosts
	on different nodes
In-Reply-To: <51EFBC92.1020702@rabbitmq.com>
References: <CAEa1i3Vw0x5sEiq3Xbncym63DXDY-6vY0iWNSvxnxQC7xr+AYw@mail.gmail.com>
	<51EFBC92.1020702@rabbitmq.com>
Message-ID: <1374668517850-28347.post@n5.nabble.com>

Thank Simon,

That really makes sense, I'll try again tomorrow and report the result
Sorry for the typo mistake then, fixed it in the post


Cheers



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Question-abt-Federation-over-virtual-hosts-on-different-nodes-tp28314p28347.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From carlo.bertoldi at gmail.com  Wed Jul 24 14:21:36 2013
From: carlo.bertoldi at gmail.com (Carlo Bertoldi)
Date: Wed, 24 Jul 2013 06:21:36 -0700 (PDT)
Subject: [rabbitmq-discuss] Clustering documentation is outdated
Message-ID: <682d3b14-ec52-427f-a3e5-8930a0af7259@googlegroups.com>

Hi, in this page http://www.rabbitmq.com/clustering.html I can read how to 
create a cluster with two nodes on the same machine:

For example:

$ RABBITMQ_NODE_PORT=5672 RABBITMQ_NODENAME=rabbit rabbitmq-server -detached
$ RABBITMQ_NODE_PORT=5673 RABBITMQ_NODENAME=hare rabbitmq-server -detached
$ rabbitmqctl -n hare stop_app
$ rabbitmqctl -n hare join_cluster rabbit@`hostname -s`
$ rabbitmqctl -n hare start_app


will set up a two node cluster with one disc node and one ram node.


But in the man page of rabbitmqctl it states that the join_cluster command by default create a disc node.


Cheers,

 Carlo 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/fa24e7ea/attachment.htm>

From pompermaier at okkam.it  Wed Jul 24 15:00:40 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Wed, 24 Jul 2013 16:00:40 +0200
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <CAELUF_DmbByS59AsxjXzN55Lwc40Rka1Pt1r=2pKtS6sjeV+zg@mail.gmail.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
	<CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
	<15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>
	<CAELUF_CjZBUh1jjALejofA4+5EUf=oymZ=Nwe6co6nNsLg7RKg@mail.gmail.com>
	<3A0CE828-D805-491E-BC40-860B3527A88C@gopivotal.com>
	<CAELUF_DmbByS59AsxjXzN55Lwc40Rka1Pt1r=2pKtS6sjeV+zg@mail.gmail.com>
Message-ID: <CAELUF_CJS5QwxmvM1xDb9DKa=X3vNbiez0Nc55t8tAyWwnpVng@mail.gmail.com>

I don't know why I don't receive your reply anymore..I saw them on
news.gname.org..
However, about the point you answered:

This is a good question. Add to this that consumers can crash or become
unavailable because of
network failures. Coordination over RabbitMQ alone will probably be more
difficult than using
Redis for this purpose (as a "presence service", more or less), e.g. using
its set data structures.
Any consumer would add itself to a set on start and any consumer can read
the set and see
who is online. I'm not very up-to-date with Redis but ideally you'd use its
features to detect
consumers leaving.

I think that here Zookeeper could fit very well in this case but I don't
have idea on how to configure it...
In one of the first emails you mentioned it..could you help me in setting
it up and use it to control
active consumers and query how many are them?

Best,
Flavio

On Wed, Jul 24, 2013 at 1:57 PM, Flavio Pompermaier <pompermaier at okkam.it>wrote:

> Actually the Consumer that receive the first stop message should receive
> also N-1 "I finished my stuff" messages from the other N -1 consumers..
> But I think it could be quite easily feasible..summarizing, tell me if
> this could be a good workflow:
>
> 1) One of the N consumers receive the end-message
> 2) This consumer opens a new temporary feedback-queue to receive feedbacks
> from other consumers and post to a fanout control queue a "wait for end of
> processing" to all other consumers (containing also the id of the
> feedback-queue)
> 3) Sender ignores such message, other consumers sends a "I finished my
> stuff" message once finished their work to the feedback-queue (whose id is
> indicated in the "wait for end of processing" message)
> 4) Once that the Consumer who initiated the "stop phase" receive all the
> N-1 feedbacks (or after a certain timeout) it can delete the temporary
> feedback queue and start the map reduce job
>
> What is missing in this scenario is how consumers can be informed of the
> number of active consumers (i.e. N)..any help about this? Do you think this
> steps could be reasonable?
>
> On Wed, Jul 24, 2013 at 1:10 PM, Michael Klishin <mklishin at gopivotal.com>wrote:
>
>> Flavio Pompermaier:
>>
>> > If not, could you please give me some more reference or hint about
>> implementing the solution you proposed?
>>
>> just make the consumer that receives the first "stop" message publish a
>> message that all
>> consumers will get (via a separate queue).
>>
>> Note that to avoid an infinite loop of messages, you need to mark such
>> control messages
>> and make sure other consumers don't publish anything, just stop.
>>
>> Then the consumer that's got the first "stop" message can start a
>> map/reduce job.
>> --
>> MK
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/a1581238/attachment.htm>

From pompermaier at okkam.it  Wed Jul 24 15:14:39 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Wed, 24 Jul 2013 07:14:39 -0700 (PDT)
Subject: [rabbitmq-discuss] Statistics gathering
Message-ID: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>

Hi to all,
I'd like to produce statistics about my application, something like:

   - min/max/avg rate of message processing
   - max queue size
   - min/max/avg of open files/ports
   - min/max/avg number of simultaneous queue producers
   - number of failures (rollbacks when delivering messages)
   - memory consumption statistics


Is there something already available or should I implement an ad-hoc 
program?
I saw that at 
http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_1_3/priv/www/api/index.htmlyou can access those statistcs via json, the problem is that, from waht I 
saw,
those statistics are run-time statistics, I cannot get info like max queue 
size or average rate of message processing (from a certain point in time 
on), am I wrong?
Is there a way to retrieve such infos?

Best,
Flavio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/6f901500/attachment.htm>

From matthias at rabbitmq.com  Wed Jul 24 15:51:56 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 24 Jul 2013 15:51:56 +0100
Subject: [rabbitmq-discuss] Recipe for corrupting mnesia in a cluster
In-Reply-To: <CAHEpgBDUwOPqKa==21_T1YfWQ09HhnLrMp=buvi7ySf-XLHbPA@mail.gmail.com>
References: <CAHEpgBDUwOPqKa==21_T1YfWQ09HhnLrMp=buvi7ySf-XLHbPA@mail.gmail.com>
Message-ID: <51EFEA0C.1010500@rabbitmq.com>

Chris,

On 23/07/13 15:39, Chris wrote:
> We are using RabbitMQ 3.1.1 / Erlang R16B on Redhat EL 6.2.  We've
> discovered a scenario that can corrupt the RabbitMQ databases pretty
> consistently, and are wondering if you might have some suggestions for
> prevention (or might want to consider a fix if possible).
>
> In short, if you are running two nodes in a cluster, and there are
> active connections, cutting the power to both nodes in short succession
> can corrupt both databases.
> [...]
>     =INFO REPORT==== 23-Jul-2013::09:44:26 ===
>     Timeout contacting cluster nodes: ['rabbit at node2'].

The issue here is that the 2nd node did not come back up within 30s of 
the first. If it had everything would have been fine.

No db corruption has occurred. This is simply a case of both nodes 
thinking they weren't the last to shut down and waiting for the other to 
come up.

> The only way I've been able to fix this is by deleting the contents of
> mnesia on both nodes and re-clustering them.

Starting rabbit on both nodes inside 30 seconds should resolve the problem.

Regards,

Matthias.

From stuff at moesel.net  Wed Jul 24 17:40:04 2013
From: stuff at moesel.net (Chris)
Date: Wed, 24 Jul 2013 12:40:04 -0400
Subject: [rabbitmq-discuss] Recipe for corrupting mnesia in a cluster
In-Reply-To: <51EFEA0C.1010500@rabbitmq.com>
References: <CAHEpgBDUwOPqKa==21_T1YfWQ09HhnLrMp=buvi7ySf-XLHbPA@mail.gmail.com>
	<51EFEA0C.1010500@rabbitmq.com>
Message-ID: <CAHEpgBBjXPpicOfdYXWjJmExg7z_u5SaLDYQSQJKXA-sszzBHQ@mail.gmail.com>

Ah-ha!  You are right!  Whenever I did my testing on this, I would start
one node and wait for the status to come back "OK" or "FAILED" before
starting the other.  Now if I start both at the same time, it works
splendidly!  Thank you for that.

I have a couple of followup questions, if you don't mind:

   - Is it possible to configure RabbitMQ to wait longer than 30 seconds
   before timing out?  I looked in the docs and couldn't find anything that
   seemed to address this.


   - If for some reason one of the nodes cannot be brought back online,
   would we then need to "forget" it on the other node (as described below)?
      - export RABBITMQ_NODE_ONLY=true
      - rabbitmq-server &
      - rabbitmqctl forget_cluster_node --offline rabbit at node1


Thanks again for the reply!  I feel a lot better about things now. ;-)

-Chris




On Wed, Jul 24, 2013 at 10:51 AM, Matthias Radestock
<matthias at rabbitmq.com>wrote:

> Chris,
>
>
> On 23/07/13 15:39, Chris wrote:
>
>> We are using RabbitMQ 3.1.1 / Erlang R16B on Redhat EL 6.2.  We've
>> discovered a scenario that can corrupt the RabbitMQ databases pretty
>> consistently, and are wondering if you might have some suggestions for
>> prevention (or might want to consider a fix if possible).
>>
>> In short, if you are running two nodes in a cluster, and there are
>> active connections, cutting the power to both nodes in short succession
>> can corrupt both databases.
>> [...]
>>
>>     =INFO REPORT==== 23-Jul-2013::09:44:26 ===
>>     Timeout contacting cluster nodes: ['rabbit at node2'].
>>
>
> The issue here is that the 2nd node did not come back up within 30s of the
> first. If it had everything would have been fine.
>
> No db corruption has occurred. This is simply a case of both nodes
> thinking they weren't the last to shut down and waiting for the other to
> come up.
>
>
>  The only way I've been able to fix this is by deleting the contents of
>> mnesia on both nodes and re-clustering them.
>>
>
> Starting rabbit on both nodes inside 30 seconds should resolve the problem.
>
> Regards,
>
> Matthias.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/98ce1b23/attachment.htm>

From simon at rabbitmq.com  Wed Jul 24 18:09:27 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 24 Jul 2013 18:09:27 +0100
Subject: [rabbitmq-discuss] Statistics gathering
In-Reply-To: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>
References: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>
Message-ID: <51F00A47.1050904@rabbitmq.com>

On 24/07/13 15:14, Flavio Pompermaier wrote:
> I saw that at
> http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_1_3/priv/www/api/index.html
> you can access those statistcs via json, the problem is that, from waht
> I saw,
> those statistics are run-time statistics,

Not sure what you mean by "run-time statistics". I would expect all 
statistics to be based on things that happened at run-time :-)

> I cannot get info like max queue size

Not directly. You can retrieve a set of samples of queue size over time, 
then scan through them looking for the maximum.

Obviously the samples are... samples, so the queue may have been longer 
at some point between samples.

> or average rate of message processing (from a certain point
> in time on), am I wrong?

The average rate over the time period you have requested is delivered as 
avg_rate.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From mklishin at gopivotal.com  Wed Jul 24 18:14:56 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 24 Jul 2013 21:14:56 +0400
Subject: [rabbitmq-discuss] RabbitMQ scalability design question
In-Reply-To: <CAELUF_CJS5QwxmvM1xDb9DKa=X3vNbiez0Nc55t8tAyWwnpVng@mail.gmail.com>
References: <56070e6e-54d4-444d-9ca3-ef3e54921621@googlegroups.com>
	<78760DB9-4022-41F9-8EF2-00F9C56A4918@gopivotal.com>
	<CAELUF_BwKNosrOvY-UFdvwm0RsWP+jyKHgtEhg_peKjMPewEFw@mail.gmail.com>
	<15916CFC-3D30-4F29-9CBA-36F1CC9C0409@gopivotal.com>
	<CAELUF_CjZBUh1jjALejofA4+5EUf=oymZ=Nwe6co6nNsLg7RKg@mail.gmail.com>
	<3A0CE828-D805-491E-BC40-860B3527A88C@gopivotal.com>
	<CAELUF_DmbByS59AsxjXzN55Lwc40Rka1Pt1r=2pKtS6sjeV+zg@mail.gmail.com>
	<CAELUF_CJS5QwxmvM1xDb9DKa=X3vNbiez0Nc55t8tAyWwnpVng@mail.gmail.com>
Message-ID: <4802D32F-6129-4F92-91ED-5603AFB5E40D@gopivotal.com>

Flavio Pompermaier:

> I think that here Zookeeper could fit very well in this case but I don't have idea on how to configure it...
> In one of the first emails you mentioned it..could you help me in setting it up and use it to control
> active consumers and query how many are them?

ZooKeeper is a separate service. See http://zookeeper.apache.org
and https://github.com/Netflix/curator (it is really hard to use ZooKeeper correctly
with their stock client. Curator greatly simplifies many things).
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/c368f598/attachment.pgp>

From pompermaier at okkam.it  Wed Jul 24 18:17:32 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Wed, 24 Jul 2013 19:17:32 +0200
Subject: [rabbitmq-discuss] Statistics gathering
In-Reply-To: <51F00A47.1050904@rabbitmq.com>
References: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>
	<51F00A47.1050904@rabbitmq.com>
Message-ID: <CAELUF_DbsGjiLzG10-6QJU+2AgORQbgQ80h_ge1mJihYQ2i+mw@mail.gmail.com>

Thanks for the reply Simon! What I actually need is to collect samples of
statistics, or maybe just set a huge statistics interval...have you ever
tried to set statistics interval to something like a week? Does it affect
performance?
otherwise I saw some connector for collectd and graphite but they seems to
be very experimental and not so used..
Any suggestion..?
On Wed, Jul 24, 2013 at 7:09 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 24/07/13 15:14, Flavio Pompermaier wrote:
>
>> I saw that at
>> http://hg.rabbitmq.com/**rabbitmq-management/raw-file/**
>> rabbitmq_v3_1_3/priv/www/api/**index.html<http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_1_3/priv/www/api/index.html>
>> you can access those statistcs via json, the problem is that, from waht
>> I saw,
>> those statistics are run-time statistics,
>>
>
> Not sure what you mean by "run-time statistics". I would expect all
> statistics to be based on things that happened at run-time :-)
>
>  I cannot get info like max queue size
>>
>
> Not directly. You can retrieve a set of samples of queue size over time,
> then scan through them looking for the maximum.
>
> Obviously the samples are... samples, so the queue may have been longer at
> some point between samples.
>
>  or average rate of message processing (from a certain point
>> in time on), am I wrong?
>>
>
> The average rate over the time period you have requested is delivered as
> avg_rate.
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/173019cb/attachment.htm>

From alan.antonuk at gmail.com  Wed Jul 24 18:31:59 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Wed, 24 Jul 2013 10:31:59 -0700
Subject: [rabbitmq-discuss] undefined symbol: AMQP_ASSIGN_CONNECTION
In-Reply-To: <AE3EC1AD-400C-4295-AB63-90B4B7B464B9@gopivotal.com>
References: <eff515fe-a993-402e-aaf0-410667872af3@googlegroups.com>
	<CAE3HoVQh_pku2VDXQf57+uZ0ko_TAoG+S2nJMgOy_Nx=yjfoeA@mail.gmail.com>
	<1374613720566-28309.post@n5.nabble.com>
	<AE3EC1AD-400C-4295-AB63-90B4B7B464B9@gopivotal.com>
Message-ID: <CAAt2po+qyC1Ov=wq+DwAQUvaRczwd+jDpaTa72+R0gY6VVLfrA@mail.gmail.com>

>
> You seem to be using a PHP wrapper for librabbitmq (aka rabbitmq-c) and
> the version of
> the wrapper does not match the version of librabbitmq.
>

It looks like the PHP wrapper is trying to use whats in the master branch
of rabbitmq-c (a somewhat dicey proposition).  There was a change pushed to
rabbitmq-c recently that should fix that error.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/9a5ba8e3/attachment.htm>

From RLauer at signatureinfo.com  Wed Jul 24 20:35:44 2013
From: RLauer at signatureinfo.com (Lauer, Robert (RIS-PHL))
Date: Wed, 24 Jul 2013 19:35:44 +0000
Subject: [rabbitmq-discuss] STOMP protocol issues - transactions
Message-ID: <57F04AE823A3944EB9E297A91AA114D20990A9BE@RISBCTMBXP002.risk.regn.net>

While trying to send transactions to a destination we noticed the following:


  1.  instead of RECEIPT frame being returned we are getting a MESSAGE frame
  2.  instead of a header with 'receipt-id', we get a header with 'receipt'

In reading the 1.2 protocol this behavior appears to be incorrect.  Are we seeing 1.1 behavior? or is something busted?

Thanks

Robert C. Lauer
VP Technology
Signature Information Solutions LLC
Home of Charles Jones and Data Trace products and services
www.signatureinfo.com<http://www.signatureinfo.com/>
Direct: 609-359-7100
Mobile: 215-378-4187
Toll-free: 800-792-8888
[facebook-icon]<https://www.facebook.com/signatureinfo>[http://learn.linkedin.com/wp-content/themes/LinkedIn/social/in-logo.jpg]<http://www.linkedin.com/groups?mostPopular=&gid=2993860>[twitter-bird-blue-on-white email]<https://twitter.com/SigInfoSol/>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/88f467ed/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 133742F5-089A-40C0-B880-6EE4556AF400[47].png
Type: image/png
Size: 6031 bytes
Desc: 133742F5-089A-40C0-B880-6EE4556AF400[47].png
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/88f467ed/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 3529D8D4-B618-46F4-BEFE-81D32FBBA623[47].png
Type: image/png
Size: 2300 bytes
Desc: 3529D8D4-B618-46F4-BEFE-81D32FBBA623[47].png
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/88f467ed/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 268FB1FC-5CEF-451F-B918-B674DFE82D49[47].png
Type: image/png
Size: 3401 bytes
Desc: 268FB1FC-5CEF-451F-B918-B674DFE82D49[47].png
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/88f467ed/attachment-0002.png>

From mikeoki.oki at gmail.com  Wed Jul 24 11:56:57 2013
From: mikeoki.oki at gmail.com (Michael Oki)
Date: Wed, 24 Jul 2013 03:56:57 -0700 (PDT)
Subject: [rabbitmq-discuss] ConnectionFactory Class not found in Java
In-Reply-To: <ffec150e-a50d-4fa6-8cda-14281cdfbed8@googlegroups.com>
References: <ffec150e-a50d-4fa6-8cda-14281cdfbed8@googlegroups.com>
Message-ID: <c071134d-c87d-484a-91ca-02bf69f1b023@googlegroups.com>

Hello peeps, where can I get all the files that were used in the Rabbit MQ 
example?

On Sunday, July 15, 2012 4:03:46 AM UTC+1, George wrote:
>
> I am attempting to run a Java class I developed called Send to publish 
> messages. It breaks on creating a connection. This is on a Windows server 
> with the RabbitMQ service running successfully - I can use it fine with 
> Node. 
>
> Here is my Java compile statement:
> C:\java>javac -classpath 
> commons-io-1.2.jar;commons-cli-1.1.jar;junit.jar;rabbitmq-client.jar;rabbitmq-client-tests.jar 
> Send.java
>
> Here is the code
> import com.rabbitmq.client.ConnectionFactory;
> import com.rabbitmq.client.Connection;
> import com.rabbitmq.client.Channel;
> import com.rabbitmq.client.*;
>
> public class Send {
>
>   public static void main(String[] argv) throws Exception {
>
>       ConnectionFactory factory = new ConnectionFactory();
>
>   }
> }
>
> Here are the results
> C:\java>java Send
> Exception in thread "main" java.lang.NoClassDefFoundError: 
> com/rabbitmq/client/ConnectionFactory
>         at Send.main(Send.java:10)
> Caused by: java.lang.ClassNotFoundException: 
> com.rabbitmq.client.ConnectionFactory
>         at java.net.URLClassLoader$1.run(Unknown Source)
>         at java.net.URLClassLoader$1.run(Unknown Source)
>         at java.security.AccessController.doPrivileged(Native Method)
>         at java.net.URLClassLoader.findClass(Unknown Source)
>         at java.lang.ClassLoader.loadClass(Unknown Source)
>         at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
>         at java.lang.ClassLoader.loadClass(Unknown Source)
>
> Has anyone encountered and resolved this issue? Two thoughts I have are 
> ConnectionFactory is dependent on classes not in my compile command and 
> that ConnectionFactory has no parameter-less definitions. 
>
> Thanks for any help,
>
> George
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/bfdf54ca/attachment.htm>

From dniasoff at gmail.com  Wed Jul 24 13:21:39 2013
From: dniasoff at gmail.com (dniasoff)
Date: Wed, 24 Jul 2013 05:21:39 -0700 (PDT)
Subject: [rabbitmq-discuss] Many queues, is there any practical limitation?
Message-ID: <289252a8-b1e9-4b37-90af-269249b5a426@googlegroups.com>

Hi,

We are deploying a .Net application to many home users on regular internet 
connections.

We might eventually reach an install base on 10'000s.

The goal is to be able to "push" instant messages individually to any of 
these computers using RabbitMQ.

As I am a RabbitMQ newbie, before trying various different scenarios to 
work out which will work best, I thought it's best to ask the "experts".

A simple architecture would be a create an individual queue per client and 
have the client subscribe to it. 

Just wondering if this is the best approach or is there a neater approach 
as I guess having too many queues will consume server memory and be an 
overhead to maintain?

I guess I should be asking  whether RabbitMQ the right tool for what I am 
trying to achieve and is it designed for this sort of scenario?

Any pointers would be greatly appreciated :)

Thanks

Daniel


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/00c53466/attachment.htm>

From linux.il at gmail.com  Wed Jul 24 14:21:56 2013
From: linux.il at gmail.com (Vitaly Karasik)
Date: Wed, 24 Jul 2013 06:21:56 -0700 (PDT)
Subject: [rabbitmq-discuss] Cannot start Rabbit with rabbitmq_management
	enabled
Message-ID: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>

I'm running Rabbit 3.1.0   on CENTOS5.6.
Server starts fine until  rabbitmq_management  is enabled.
I don't have custom rabbitmq.config.
Any ideas how I debug this?
TIA,
Vitaly

=ERROR REPORT==== 24-Jul-2013::13:01:50 ===
** Generic server rabbit_web_dispatch_registry terminating 
** Last message in was {add,rabbit_mgmt_redirect,
                            [{port,55672},{ignore_in_use,true}],
                            #Fun<rabbit_web_dispatch.1.31447083>,
                            #Fun<rabbit_web_dispatch.0.114103971>,
                            {[],"Redirect to port 15672"}}
** When Server state == undefined
** Reason for termination == 
** {could_not_start_listener,
       [{port,55672},{ignore_in_use,true}],
       {'EXIT',
           {undef,
               [{lists,keyfind,
                    [name,1,
                     [{loop,
                          {mochiweb_http,loop,
                              [#Fun<rabbit_web_dispatch_sup.0.23589304>]}},
                      {name,rabbit_web_dispatch_sup_55672},
                      {port,55672}]]},
                {mochilists,is_defined,2},
                {mochilists,set_default,2},
                {lists,foldl,3},
                {mochiweb_http,start,1},
                {supervisor,do_start_child,2},
                {supervisor,handle_start_child,2},
                {supervisor,handle_call,3}]}}}

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/e7988768/attachment.htm>

From steven.willems at i-develop.be  Wed Jul 24 16:08:32 2013
From: steven.willems at i-develop.be (steven.willems at i-develop.be)
Date: Wed, 24 Jul 2013 08:08:32 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ RPC in Tomcat container
Message-ID: <dafca0ed-95c9-4198-af50-77fe1c705358@googlegroups.com>

I'm trying to setup RabbitMQ RPC in a web project (like suggested in tutorial 
6 <http://www.rabbitmq.com/tutorials/tutorial-six-java.html>). It works as 
intended, but when I try to shutdown Tomcat, the shutdown hangs as soon as 
I have created a consumer listening to the rpc response. 

jstack and some debugging learned me that for each created consumer, a 
thread is created. And those threads are preventing Tomcat from shutting 
down (as they are not managed by Tomcat).

Looking at ConsumerWorkService, there is a method addWork, which creates a 
new WorkPoolRunnable and if I have understood it correctly, those 
Runnable's are only stopped when the 'key', being the channel is stopped.

I find that a bit odd.. I would expect that when I call stub.channel.basicCancel(consumer.getConsumerTag()); 
the runnable for the consumer is removed. 

Or am I completely wrong about my findings and is something else going on?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/061b2689/attachment.htm>

From incognito187 at live.co.uk  Wed Jul 24 17:45:16 2013
From: incognito187 at live.co.uk (Mr Mister)
Date: Wed, 24 Jul 2013 09:45:16 -0700 (PDT)
Subject: [rabbitmq-discuss] Nagios Rabbitmq queue check plugin issue
Message-ID: <54e8ebd5-5680-48a0-bb1b-8d07201ea8ba@googlegroups.com>

i cannot get my queue checks to work, they all appear as critical with a 
status of null.

I am sure the issue is with my new nagios build, running a check manually 
throws a perl error (Can't locate Math/Calc/Units.pm in @INC... etc)

Ok so i though i need to install that module, its already installed, also 
installed other perl Math modules but none of the install Units.pm on to my 
server - i dont know how to get it installed, already tried reinstall 
including perl itself

However to add further confusion, i have an existing install which works, i 
am migrating to another location. I thought i could just grab the units.pm 
file and copy it to my new server, but the old one doesn't have this file 
either - yet if i run the same check manually i do not get the (Can't 
locate Math/Calc/Units.pm in @INC... etc) error.

Why do i need this module on my new install but not on the other, and more 
importantly why dont the checks work on my new install ?

i have investigated this issue for some time now but im stuck can anyone 
help ? i feel i need /usr/lib64/perl5/Math/Calc/Units.pm but cannot find it 
anywhere 

perl math modules i have installed are perl-Math-Calc-Units and 
perl-Math-Units , it sounds like it should be in the first one, 
documentation indicates it is in the second  - confused.

Im on latest CentOS using yum to install, the server is purely for Nagios 
and nagios only monitors rabbitmq.

Thanks for any help im offered.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/0bccc224/attachment.htm>

From nvthoai at gmail.com  Wed Jul 24 23:22:12 2013
From: nvthoai at gmail.com (vantheshark)
Date: Wed, 24 Jul 2013 15:22:12 -0700 (PDT)
Subject: [rabbitmq-discuss] Question abt Federation over virtual hosts
	on different nodes
In-Reply-To: <1374668517850-28347.post@n5.nabble.com>
References: <CAEa1i3Vw0x5sEiq3Xbncym63DXDY-6vY0iWNSvxnxQC7xr+AYw@mail.gmail.com>
	<51EFBC92.1020702@rabbitmq.com>
	<1374668517850-28347.post@n5.nabble.com>
Message-ID: <1374704532785-28363.post@n5.nabble.com>

Tested this morning, work like a charm.
I reckon these things should be noted somewhere in the document ;)

Thank so much.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Question-abt-Federation-over-virtual-hosts-on-different-nodes-tp28314p28363.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From jkuch at gopivotal.com  Thu Jul 25 01:01:00 2013
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Wed, 24 Jul 2013 17:01:00 -0700
Subject: [rabbitmq-discuss] Many queues,
	is there any practical limitation?
In-Reply-To: <289252a8-b1e9-4b37-90af-269249b5a426@googlegroups.com>
References: <289252a8-b1e9-4b37-90af-269249b5a426@googlegroups.com>
Message-ID: <CANOx8N=4S+GK2ebZ2ew5mP4jndPLNMo0QKY0_BEj3FZW_WTEng@mail.gmail.com>

Chapter 11 of the Manning book "RabbitMQ in Action" contains some very good
coverage of the actual resource costs of various Rabbit/AMQP constructs in
a running broker.  Having it on hand for reference and for supporting back
of the envelope calculations and estimates is likely to be very helpful.

Best regards,
Jerry

On Wed, Jul 24, 2013 at 5:21 AM, dniasoff <dniasoff at gmail.com> wrote:

> Hi,
>
> We are deploying a .Net application to many home users on regular internet
> connections.
>
> We might eventually reach an install base on 10'000s.
>
> The goal is to be able to "push" instant messages individually to any of
> these computers using RabbitMQ.
>
> As I am a RabbitMQ newbie, before trying various different scenarios to
> work out which will work best, I thought it's best to ask the "experts".
>
> A simple architecture would be a create an individual queue per client and
> have the client subscribe to it.
>
> Just wondering if this is the best approach or is there a neater approach
> as I guess having too many queues will consume server memory and be an
> overhead to maintain?
>
> I guess I should be asking  whether RabbitMQ the right tool for what I am
> trying to achieve and is it designed for this sort of scenario?
>
> Any pointers would be greatly appreciated :)
>
> Thanks
>
> Daniel
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/fc1c8751/attachment.htm>

From mklishin at gopivotal.com  Thu Jul 25 05:26:02 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 08:26:02 +0400
Subject: [rabbitmq-discuss] ConnectionFactory Class not found in Java
In-Reply-To: <c071134d-c87d-484a-91ca-02bf69f1b023@googlegroups.com>
References: <ffec150e-a50d-4fa6-8cda-14281cdfbed8@googlegroups.com>
	<c071134d-c87d-484a-91ca-02bf69f1b023@googlegroups.com>
Message-ID: <1725DC15-A4A6-4089-BB69-FB338584037C@gopivotal.com>

Michael Oki:

> Hello peeps, where can I get all the files that were used in the Rabbit MQ example?

You can download the client from
http://www.rabbitmq.com/java-client.html

For Maven artifacts, see
http://search.maven.org/#artifactdetails%7Ccom.rabbitmq%7Camqp-client%7C3.1.3%7Cjar
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/2ada42c5/attachment.pgp>

From mklishin at gopivotal.com  Thu Jul 25 05:30:14 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 08:30:14 +0400
Subject: [rabbitmq-discuss] RabbitMQ RPC in Tomcat container
In-Reply-To: <dafca0ed-95c9-4198-af50-77fe1c705358@googlegroups.com>
References: <dafca0ed-95c9-4198-af50-77fe1c705358@googlegroups.com>
Message-ID: <1E524918-1C4A-4BDA-A9C0-2C39873C7D20@gopivotal.com>

steven.willems at i-develop.be:

> I find that a bit odd.. I would expect that when I call stub.channel.basicCancel(consumer.getConsumerTag()); the runnable for the consumer is removed. 
> 
> Or am I completely wrong about my findings and is something else going on?

You are right, RabbitMQ Java client does start new threads (which in theory apps deployed
to app containers should not do):

 * Network activity loop (one per connection)
 * Consumer work pool (one per channel)

Work pools cannot be cancelled after basicCancel because there can be more than
one consumer on the channel.

Some clients [1] solve this by tracking how many consumers are registered on the
channel and when the last one is gone, shut down any threads that were created
to handle deliveries.

It may be a good idea for to the Java client to do the same. In the meantime, closing
channels and then connection on shutdown should help.

1. http://rubybunny.info
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/295208a5/attachment.pgp>

From mklishin at gopivotal.com  Thu Jul 25 05:35:11 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 08:35:11 +0400
Subject: [rabbitmq-discuss] Cannot start Rabbit with rabbitmq_management
	enabled
In-Reply-To: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>
References: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>
Message-ID: <211C2C87-764A-4D28-9920-1D881EEFA950@gopivotal.com>

Vitaly Karasik:

> =ERROR REPORT==== 24-Jul-2013::13:01:50 ===
> ** Generic server rabbit_web_dispatch_registry terminating 
> ** Last message in was {add,rabbit_mgmt_redirect,
>                             [{port,55672},{ignore_in_use,true}],
>                             #Fun<rabbit_web_dispatch.1.31447083>,
>                             #Fun<rabbit_web_dispatch.0.114103971>,
>                             {[],"Redirect to port 15672"}}

You likely have another instance of the management plugin running on the same host,
or something else occupies port 55672.

In that case, you need to configure each instance to use use a separate port, see 
http://www.rabbitmq.com/management.html

You can also
disable redirection for port 55672 like so

https://gist.github.com/michaelklishin/6635e02a94859ebc8b38
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/63cc2b74/attachment.pgp>

From matthias at rabbitmq.com  Thu Jul 25 06:28:34 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Thu, 25 Jul 2013 06:28:34 +0100
Subject: [rabbitmq-discuss] Many queues,
	is there any practical limitation?
In-Reply-To: <289252a8-b1e9-4b37-90af-269249b5a426@googlegroups.com>
References: <289252a8-b1e9-4b37-90af-269249b5a426@googlegroups.com>
Message-ID: <51F0B782.7090709@rabbitmq.com>

On 24/07/13 13:21, dniasoff wrote:
> We might eventually reach an install base on 10'000s.

That shouldn't be a problem for rabbit.

Matthias.

From mikeoki.oki at gmail.com  Thu Jul 25 07:58:07 2013
From: mikeoki.oki at gmail.com (Michael Oki)
Date: Thu, 25 Jul 2013 07:58:07 +0100
Subject: [rabbitmq-discuss] ConnectionFactory Class not found in Java
In-Reply-To: <1725DC15-A4A6-4089-BB69-FB338584037C@gopivotal.com>
References: <ffec150e-a50d-4fa6-8cda-14281cdfbed8@googlegroups.com>
	<c071134d-c87d-484a-91ca-02bf69f1b023@googlegroups.com>
	<1725DC15-A4A6-4089-BB69-FB338584037C@gopivotal.com>
Message-ID: <CAMZ9jze6z0n9_XuCpPSU5pHgVvx=_V5f22CNbW8Yg6fNOh4Y9A@mail.gmail.com>

Thanks so much


On 25 July 2013 05:26, Michael Klishin <mklishin at gopivotal.com> wrote:

> Michael Oki:
>
> > Hello peeps, where can I get all the files that were used in the Rabbit
> MQ example?
>
> You can download the client from
> http://www.rabbitmq.com/java-client.html
>
> For Maven artifacts, see
>
> http://search.maven.org/#artifactdetails%7Ccom.rabbitmq%7Camqp-client%7C3.1.3%7Cjar
> --
> MK
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/59a08554/attachment.htm>

From linux.il at gmail.com  Thu Jul 25 08:54:30 2013
From: linux.il at gmail.com (linux.il)
Date: Thu, 25 Jul 2013 10:54:30 +0300
Subject: [rabbitmq-discuss] Cannot start Rabbit with rabbitmq_management
	enabled
In-Reply-To: <211C2C87-764A-4D28-9920-1D881EEFA950@gopivotal.com>
References: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>
	<211C2C87-764A-4D28-9920-1D881EEFA950@gopivotal.com>
Message-ID: <CANpTS01KUcZan1vTSHfMm7WQ9-bHEU4iyWx+GVDGWe20CxGPng@mail.gmail.com>

On Thu, Jul 25, 2013 at 7:35 AM, Michael Klishin <mklishin at gopivotal.com> wrote:
> Vitaly Karasik:
>
>> =ERROR REPORT==== 24-Jul-2013::13:01:50 ===
>> ** Generic server rabbit_web_dispatch_registry terminating
>> ** Last message in was {add,rabbit_mgmt_redirect,
>>                             [{port,55672},{ignore_in_use,true}],
>>                             #Fun<rabbit_web_dispatch.1.31447083>,
>>                             #Fun<rabbit_web_dispatch.0.114103971>,
>>                             {[],"Redirect to port 15672"}}
>
> You likely have another instance of the management plugin running on the same host,
> or something else occupies port 55672.
>
> In that case, you need to configure each instance to use use a separate port, see
> http://www.rabbitmq.com/management.html
>
> You can also
> disable redirection for port 55672 like so
>
> https://gist.github.com/michaelklishin/6635e02a94859ebc8b38
> --
> MK
>
Michael, thank you.
No, 55672 isn't in use  - "lsof -ni|grep 55672" return nothing.

> You can also
> disable redirection for port 55672 like so
>
> https://gist.github.com/michaelklishin/6635e02a94859ebc8b38

Can you explain more about this patch or send me some URL with such readme?

From mklishin at gopivotal.com  Thu Jul 25 08:59:16 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 11:59:16 +0400
Subject: [rabbitmq-discuss] Cannot start Rabbit with rabbitmq_management
	enabled
In-Reply-To: <CANpTS01KUcZan1vTSHfMm7WQ9-bHEU4iyWx+GVDGWe20CxGPng@mail.gmail.com>
References: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>
	<211C2C87-764A-4D28-9920-1D881EEFA950@gopivotal.com>
	<CANpTS01KUcZan1vTSHfMm7WQ9-bHEU4iyWx+GVDGWe20CxGPng@mail.gmail.com>
Message-ID: <BF051B96-A9F5-40B5-B697-7A18DFA8941B@gopivotal.com>

linux.il:

> Can you explain more about this patch or send me some URL with such readme?

This is a rabbitmq.config example that demonstrates an option management plugin will recognize
that's not demonstrated on http://www.rabbitmq.com/management.html (not sure why).

See http://www.rabbitmq.com/management.html for more examples.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/82b4de99/attachment.pgp>

From emile at rabbitmq.com  Thu Jul 25 10:07:08 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 25 Jul 2013 10:07:08 +0100
Subject: [rabbitmq-discuss] STOMP protocol issues - transactions
In-Reply-To: <57F04AE823A3944EB9E297A91AA114D20990A9BE@RISBCTMBXP002.risk.regn.net>
References: <57F04AE823A3944EB9E297A91AA114D20990A9BE@RISBCTMBXP002.risk.regn.net>
Message-ID: <51F0EABC.1080604@rabbitmq.com>

On 24/07/13 20:35, Lauer, Robert (RIS-PHL) wrote:
> While trying to send transactions to a destination we noticed the following:
> 
>  1. instead of RECEIPT frame being returned we are getting a MESSAGE frame

You should expect a RECEIPT after the server successfully processes a
client frame that requests a receipt. Check whether you are requesting a
receipt correctly.

MESSAGE frames are used to convey messages from subscriptions to the
client. You should only get this if you have an active subscription.

If you have found a sequence of frames where MESSAGE and RECEIPT get
mixed up (whether in the presence of transactions or otherwise) then
please supply a transcript.

>  2. instead of a header with 'receipt-id', we get a header with 'receipt'

The source code suggests otherwise:
http://hg.rabbitmq.com/rabbitmq-stomp/file/ecf3243f806a/src/rabbit_stomp_processor.erl#l757

Please post a transcript that demonstrates the problem.

> In reading the 1.2 protocol this behavior appears to be incorrect.  Are
> we seeing 1.1 behavior? or is something busted?
The RabbitMQ STOMP implementation claims support for STOMP 1.0, 1.1 and
1.2. For exceptions see http://www.rabbitmq.com/stomp.html#pear
Clients select the protocol version using the CONNECT frame.



-Emile





From carl.hoerberg at gmail.com  Thu Jul 25 10:17:10 2013
From: carl.hoerberg at gmail.com (carlhoerberg)
Date: Thu, 25 Jul 2013 02:17:10 -0700 (PDT)
Subject: [rabbitmq-discuss] Queue size on disk
Message-ID: <1374743830242-28373.post@n5.nabble.com>

How can I measure the amount of disk space queues takes up on disk, through
the HTTP API? The "memory" property seems to show the amount of RAM a queue
is using, no? 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Queue-size-on-disk-tp28373.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Thu Jul 25 10:28:29 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 10:28:29 +0100
Subject: [rabbitmq-discuss] Statistics gathering
In-Reply-To: <CAELUF_DbsGjiLzG10-6QJU+2AgORQbgQ80h_ge1mJihYQ2i+mw@mail.gmail.com>
References: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>
	<51F00A47.1050904@rabbitmq.com>
	<CAELUF_DbsGjiLzG10-6QJU+2AgORQbgQ80h_ge1mJihYQ2i+mw@mail.gmail.com>
Message-ID: <51F0EFBD.7010701@rabbitmq.com>

On 24/07/2013 6:17PM, Flavio Pompermaier wrote:
> have you ever tried to set statistics interval to something like a week?

I assume you mean sample_retention_policies (i.e. how long we hold stats 
for) rather than collect_statistics_interval (i.e. how frequently the 
broker should emit stats for the management plugin to collect).

No I haven't, although you should be fine as long as you reduce the 
resolution for data that's held for longer. Or put up with increased 
memory use.

> Does it affect performance?

Shouldn't do particularly.

Cheers, Simon

From simon at rabbitmq.com  Thu Jul 25 10:32:42 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 10:32:42 +0100
Subject: [rabbitmq-discuss] Queue size on disk
In-Reply-To: <1374743830242-28373.post@n5.nabble.com>
References: <1374743830242-28373.post@n5.nabble.com>
Message-ID: <51F0F0BA.1040706@rabbitmq.com>

On 25/07/2013 10:17AM, carlhoerberg wrote:
> How can I measure the amount of disk space queues takes up on disk, through
> the HTTP API?

At the moment you can't - bear in mind that since messages can be shared 
between queues there's not a completely obvious answer to this question 
(which is largely why we haven't tackled it).

> The "memory" property seems to show the amount of RAM a queue
> is using, no?

It shows how much memory the queue process is consuming - but that 
doesn't include message bodies (which again are shared). Arguably it's 
confusing, but I'm a bit reluctant just to strip it out :-)

Cheers, Simon

From simon at rabbitmq.com  Thu Jul 25 10:41:36 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 10:41:36 +0100
Subject: [rabbitmq-discuss] Cannot start Rabbit with rabbitmq_management
 enabled
In-Reply-To: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>
References: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>
Message-ID: <51F0F2D0.5020500@rabbitmq.com>

On 24/07/2013 2:21PM, Vitaly Karasik wrote:
> ** When Server state == undefined
> ** Reason for termination ==
> ** {could_not_start_listener,
>         [{port,55672},{ignore_in_use,true}],
>         {'EXIT',
>             {undef,
>                 [{lists,keyfind,

The "undef" lists:keyfind() is not found. Almost certainly you are using 
a too old version of Erlang. See 
http://www.rabbitmq.com/which-erlang.html for more details.

Cheers, Simon

From simon at rabbitmq.com  Thu Jul 25 10:43:57 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 10:43:57 +0100
Subject: [rabbitmq-discuss] Cannot start Rabbit with rabbitmq_management
 enabled
In-Reply-To: <211C2C87-764A-4D28-9920-1D881EEFA950@gopivotal.com>
References: <4060cf73-785b-45bc-93b7-1c9dc631c85a@googlegroups.com>
	<211C2C87-764A-4D28-9920-1D881EEFA950@gopivotal.com>
Message-ID: <51F0F35D.40201@rabbitmq.com>

On 25/07/2013 5:35AM, Michael Klishin wrote:
> You likely have another instance of the management plugin running on the same host,
> or something else occupies port 55672.

Nope. The redirect thing on port 55672 will ignore port-in-use type 
errors (since the whole reason for moving from 55672 to 15672 was that 
55672 could randomly be in use as it's in the dynamic range).

Cheers, Simon

From pompermaier at okkam.it  Thu Jul 25 10:45:31 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Thu, 25 Jul 2013 11:45:31 +0200
Subject: [rabbitmq-discuss] Statistics gathering
In-Reply-To: <51F0EFBD.7010701@rabbitmq.com>
References: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>
	<51F00A47.1050904@rabbitmq.com>
	<CAELUF_DbsGjiLzG10-6QJU+2AgORQbgQ80h_ge1mJihYQ2i+mw@mail.gmail.com>
	<51F0EFBD.7010701@rabbitmq.com>
Message-ID: <CAELUF_BC6jmbVVaK-p-_YSf_7un0CJYawq_M-ff_Xdmw_4uQhA@mail.gmail.com>

Yes, probably what I need is to correctly set those two parameters:
 - sample_retention_policies
 - collect_statistics_interval

Are they strictly related or they serve different purposes?
How do I ask for global/basic/detailed cumulative stats (like those
collected by sample_retention_policies)?
I think that I need those metrics..
With a small collect_statistics_interval (1 s) I have more precise data but
more overhead on the broker,
but changing this parameters require also to change sample_retention_policies
right?
Or it just run every 5 s and thus collects 5 samples (for default global
conf for example)..?

Best,
Flavio

On Thu, Jul 25, 2013 at 11:28 AM, Simon MacMullen <simon at rabbitmq.com>wrote:

> On 24/07/2013 6:17PM, Flavio Pompermaier wrote:
>
>> have you ever tried to set statistics interval to something like a week?
>>
>
> I assume you mean sample_retention_policies (i.e. how long we hold stats
> for) rather than collect_statistics_interval (i.e. how frequently the
> broker should emit stats for the management plugin to collect).
>
> No I haven't, although you should be fine as long as you reduce the
> resolution for data that's held for longer. Or put up with increased memory
> use.
>
>  Does it affect performance?
>>
>
> Shouldn't do particularly.
>
> Cheers, Simon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/94ced3f4/attachment.htm>

From emile at rabbitmq.com  Thu Jul 25 10:57:11 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 25 Jul 2013 10:57:11 +0100
Subject: [rabbitmq-discuss] Nagios Rabbitmq queue check plugin issue
In-Reply-To: <54e8ebd5-5680-48a0-bb1b-8d07201ea8ba@googlegroups.com>
References: <54e8ebd5-5680-48a0-bb1b-8d07201ea8ba@googlegroups.com>
Message-ID: <51F0F677.3050101@rabbitmq.com>


On 24/07/13 17:45, Mr Mister wrote:

> perl math modules i have installed are perl-Math-Calc-Units and
> perl-Math-Units , it sounds like it should be in the first one,
> documentation indicates it is in the second  - confused.


The nagios-plugins-rabbitmq module requires at least

  JSON
  Nagios::Plugin
  LWP::UserAgent
  Getopt::Long
  Pod::Usage

You should consult your package manager or CPAN to resolve dependencies.
You may get better support at a Perl forum.


-Emile








From emile at rabbitmq.com  Thu Jul 25 11:43:19 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 25 Jul 2013 11:43:19 +0100
Subject: [rabbitmq-discuss] Clustering documentation is outdated
In-Reply-To: <682d3b14-ec52-427f-a3e5-8930a0af7259@googlegroups.com>
References: <682d3b14-ec52-427f-a3e5-8930a0af7259@googlegroups.com>
Message-ID: <51F10147.4020307@rabbitmq.com>


Hi Carlo,

On 24/07/13 14:21, Carlo Bertoldi wrote:

> But in the man page of rabbitmqctl it states that the join_cluster
> command by default create a disc node.


Thanks for pointing out the error. The correction has been made.



-Emile







From emile at rabbitmq.com  Thu Jul 25 12:05:18 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Thu, 25 Jul 2013 12:05:18 +0100
Subject: [rabbitmq-discuss] virtual windows server install rabbitmq
 server quesiton
In-Reply-To: <1374664931954-28339.post@n5.nabble.com>
References: <1374664931954-28339.post@n5.nabble.com>
Message-ID: <51F1066E.1020604@rabbitmq.com>



On 24/07/13 12:22, 3k4b251 wrote:

> I want  to  run  rabbitmq server  on  virtual  windows server  which  run  on 
> linux .  I can   easily   install  erlang  and  Rabbitmq  server. But  when 
> I  try to   run   rabbitmqctl.bat .  nothing  happend,even  a  Command
> prompt .


That    sounds   like   a problem  with   your   in stallation  . Didyou
receive    any errors    while  install ing   ?   Do  other  services
or programs  report   erorrs?   Are  there    errors   in   the  logfile
 ?   Is   networking   set up   correctly  ?


> The    rabbitmq  service  run normal.  But  I  use rabbitmqctl.bat
> rabbitmq-echopid .... rabbitmq-plugins.bat  ...., and  they have no
> returns to me .


If   the   rabbitmq  service   runs   normally   can you   connect
with   an  AMQP    client?


> I think there should be a thread named epmd.exe ,but there is not .

If   the    broker   is   running    then   you   should   see   an
epmd.exe   process   in   the   task list.   Validate   your   Erlang
installation   by   running    "erl -sname    fnor "   in  the   Erlang
 bin  dir ectory.   you  Should  see  out put   like



Eshell V5.10.1  (abort with ^G)
(fnor at hostname)1>









From psdc1978 at gmail.com  Thu Jul 25 12:12:57 2013
From: psdc1978 at gmail.com (=?ISO-8859-1?Q?Pedro_S=E1_da_Costa?=)
Date: Thu, 25 Jul 2013 12:12:57 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
Message-ID: <CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>

If I set the RABBITMQ_NODE_IP_ADDRESS to 0.0.0.0, or I don't set the
RABBITMQ_NODE_IP_ADDRESS,
the message broker starts with the internal IP. This means that I cannot
access it outside from the internet. If I put the public IP, the error
continues. How I can set rabbitMQ to access is it  from the internet?






On 23 July 2013 12:15, Michael Klishin <michael.s.klishin at gmail.com> wrote:

> 2013/7/23 Pedro S? da Costa <psdc1978 at gmail.com>
>
>> Error description:
>>    {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>>
>
> Try using 0.0.0.0 for RABBITMQ_NODE_IP_ADDRESS. This will relieve you
> from having to worry about the exact IP value of the interface.
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/ad1ca8b6/attachment.htm>

From daniel at intelliworkspace.com  Thu Jul 25 10:33:55 2013
From: daniel at intelliworkspace.com (Daniel Niasoff)
Date: Thu, 25 Jul 2013 09:33:55 +0000
Subject: [rabbitmq-discuss] Many queues,
 is there any practical limitation?
In-Reply-To: <51F0B782.7090709@rabbitmq.com>
References: <289252a8-b1e9-4b37-90af-269249b5a426@googlegroups.com>
	<51F0B782.7090709@rabbitmq.com>
Message-ID: <C8FA29125177E24EA5F6BC30C7F859FB1A46A97F@Dc01BetaEx.iwsbeta.co.uk>

Thanks

Here's a carrot for your effort

                        ___
            `-._\ /     `~~"--.,_
         ------>|              `~~"--.,_
   	_.-'/ '.____,,,,----"""~~```'


-----Original Message-----
From: Matthias Radestock [mailto:matthias at rabbitmq.com] 
Sent: 25 July 2013 06:29
To: Discussions about RabbitMQ
Cc: dniasoff; rabbitmq-discuss at googlegroups.com; Shlomo Katz; Daniel Niasoff
Subject: Re: [rabbitmq-discuss] Many queues, is there any practical limitation?

On 24/07/13 13:21, dniasoff wrote:
> We might eventually reach an install base on 10'000s.

That shouldn't be a problem for rabbit.

Matthias.

From pieczonakupa at wp.pl  Thu Jul 25 11:41:08 2013
From: pieczonakupa at wp.pl (Ziutek3)
Date: Thu, 25 Jul 2013 03:41:08 -0700 (PDT)
Subject: [rabbitmq-discuss] fullsweep_after
Message-ID: <1374748868902-28380.post@n5.nabble.com>

Hi, how can I switch fullsweep_after to 0 in RabbitMQ ?
I tried change file rabbitmq-env.conf adding export ERL_FULLSWEEP_AFTER 0 ,
but than RabbitMQ server failed to start.

I tested that value is  65535 by the command :

rabbitmqctl eval 'erlang:system_info(fullsweep_after).'
{fullsweep_after,65535}
...done.

Cheers,
Ziutek



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/fullsweep-after-tp28380.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Thu Jul 25 12:25:37 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 12:25:37 +0100
Subject: [rabbitmq-discuss] fullsweep_after
In-Reply-To: <1374748868902-28380.post@n5.nabble.com>
References: <1374748868902-28380.post@n5.nabble.com>
Message-ID: <51F10B31.3060707@rabbitmq.com>

On 25/07/2013 11:41AM, Ziutek3 wrote:
> I tried change file rabbitmq-env.conf adding export ERL_FULLSWEEP_AFTER 0 ,

I think you want "export ERL_FULLSWEEP_AFTER=0", with an equals sign. 
Works for me.

Why do you want to set fullsweep_after?

Cheers, Simon

From simon at rabbitmq.com  Thu Jul 25 12:28:15 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 12:28:15 +0100
Subject: [rabbitmq-discuss] Statistics gathering
In-Reply-To: <CAELUF_BC6jmbVVaK-p-_YSf_7un0CJYawq_M-ff_Xdmw_4uQhA@mail.gmail.com>
References: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>
	<51F00A47.1050904@rabbitmq.com>
	<CAELUF_DbsGjiLzG10-6QJU+2AgORQbgQ80h_ge1mJihYQ2i+mw@mail.gmail.com>
	<51F0EFBD.7010701@rabbitmq.com>
	<CAELUF_BC6jmbVVaK-p-_YSf_7un0CJYawq_M-ff_Xdmw_4uQhA@mail.gmail.com>
Message-ID: <51F10BCF.5060606@rabbitmq.com>

On 25/07/2013 10:45AM, Flavio Pompermaier wrote:
> Yes, probably what I need is to correctly set those two parameters:
>   - sample_retention_policies
>   - collect_statistics_interval

It's not obvious to me that you want to change collect_statistics_interval.

> Are they strictly related or they serve different purposes?

Well, they both have to do with statistics.

collect_statistics_interval controls how frequently the various 
components in RabbitMQ emit stats events. It therefore controls the 
maximum possible resolution of stats you can get. The expectation is 
usually that you would leave it alone, but if you had a huge number of 
not-quite-idle queues / channels / connections you might want to 
increase it so that your server does not spend all its time emitting 
stats events.

sample_retention_policies controls how long the management plugin holds 
onto statistics, and with what resolution. You might want to change this 
if you want it to hold statistics for longer.

> How do I ask for global/basic/detailed cumulative stats (like those
> collected by sample_retention_policies)?

Those names refer to different classes of stats you can get through the 
web UI / HTTP API. See 
http://www.rabbitmq.com/management.html#sample-retention for the mapping.

> I think that I need those metrics..
> With a small collect_statistics_interval (1 s) I have more precise data
> but more overhead on the broker,

Yes.

> but changing this parameters require also to change
> sample_retention_policies right?

No.

> Or it just run every 5 s and thus collects 5 samples (for default global
> conf for example)..?

Not sure what you mean. If collect_statistics_interval is shorter than 
the shortest resolution in sample_retention_policies you'll be doing 
more work for no gain.

Cheers, Simon

>
> Best,
> Flavio
>
> On Thu, Jul 25, 2013 at 11:28 AM, Simon MacMullen <simon at rabbitmq.com
> <mailto:simon at rabbitmq.com>> wrote:
>
>     On 24/07/2013 6:17PM, Flavio Pompermaier wrote:
>
>         have you ever tried to set statistics interval to something like
>         a week?
>
>
>     I assume you mean sample_retention_policies (i.e. how long we hold
>     stats for) rather than collect_statistics_interval (i.e. how
>     frequently the broker should emit stats for the management plugin to
>     collect).
>
>     No I haven't, although you should be fine as long as you reduce the
>     resolution for data that's held for longer. Or put up with increased
>     memory use.
>
>         Does it affect performance?
>
>
>     Shouldn't do particularly.
>
>     Cheers, Simon
>

From simon at rabbitmq.com  Thu Jul 25 12:42:33 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 12:42:33 +0100
Subject: [rabbitmq-discuss] Recipe for corrupting mnesia in a cluster
In-Reply-To: <CAHEpgBBjXPpicOfdYXWjJmExg7z_u5SaLDYQSQJKXA-sszzBHQ@mail.gmail.com>
References: <CAHEpgBDUwOPqKa==21_T1YfWQ09HhnLrMp=buvi7ySf-XLHbPA@mail.gmail.com>
	<51EFEA0C.1010500@rabbitmq.com>
	<CAHEpgBBjXPpicOfdYXWjJmExg7z_u5SaLDYQSQJKXA-sszzBHQ@mail.gmail.com>
Message-ID: <51F10F29.4010609@rabbitmq.com>

On 24/07/2013 5:40PM, Chris wrote:
>   * Is it possible to configure RabbitMQ to wait longer than 30 seconds
>     before timing out?  I looked in the docs and couldn't find anything
>     that seemed to address this.

Not at the moment. We'll probably add this in a future release.

>   * If for some reason one of the nodes cannot be brought back online,
>     would we then need to "forget" it on the other node (as described
>     below)?
>       o export RABBITMQ_NODE_ONLY=true
>       o rabbitmq-server &
>       o rabbitmqctl forget_cluster_node --offline rabbit at node1

That looks right.

Cheers, Simon

From ceri at lshift.net  Thu Jul 25 12:46:52 2013
From: ceri at lshift.net (Ceri Storey)
Date: Thu, 25 Jul 2013 12:46:52 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
Message-ID: <51F1102C.7080403@lshift.net>

(25/07/13 12:12), Pedro S? da Costa wrote:
> If I set the RABBITMQ_NODE_IP_ADDRESS to 0.0.0.0, or I don't set
> the RABBITMQ_NODE_IP_ADDRESS, the message broker starts with the
> internal IP. This means that I cannot access it outside from the
> internet. If I put the public IP, the error continues. How I can set
> rabbitMQ to access is it  from the internet?
What happens if you leave it configured with
RABBITMQ_NODE_IP_ADDRESS=0.0.0.0, but try to connect to the *public* IP
address?
>
>
>
>
>
>
> On 23 July 2013 12:15, Michael Klishin <michael.s.klishin at gmail.com
> <mailto:michael.s.klishin at gmail.com>> wrote:
>
>     2013/7/23 Pedro S? da Costa <psdc1978 at gmail.com
>     <mailto:psdc1978 at gmail.com>>
>
>         Error description:
>            {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>
>
>     Try using 0.0.0.0 for RABBITMQ_NODE_IP_ADDRESS. This will relieve you
>     from having to worry about the exact IP value of the interface.
>     -- 
>     MK
>
>     http://github.com/michaelklishin
>     http://twitter.com/michaelklishin
>
>     _______________________________________________
>     rabbitmq-discuss mailing list
>     rabbitmq-discuss at lists.rabbitmq.com
>     <mailto:rabbitmq-discuss at lists.rabbitmq.com>
>     https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
>
> -- 
> Best regards,
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/07423f00/attachment.htm>

From pompermaier at okkam.it  Thu Jul 25 13:18:28 2013
From: pompermaier at okkam.it (Flavio Pompermaier)
Date: Thu, 25 Jul 2013 14:18:28 +0200
Subject: [rabbitmq-discuss] Statistics gathering
In-Reply-To: <51F10BCF.5060606@rabbitmq.com>
References: <645a477c-e6e0-4140-a642-e3e165f8c74b@googlegroups.com>
	<51F00A47.1050904@rabbitmq.com>
	<CAELUF_DbsGjiLzG10-6QJU+2AgORQbgQ80h_ge1mJihYQ2i+mw@mail.gmail.com>
	<51F0EFBD.7010701@rabbitmq.com>
	<CAELUF_BC6jmbVVaK-p-_YSf_7un0CJYawq_M-ff_Xdmw_4uQhA@mail.gmail.com>
	<51F10BCF.5060606@rabbitmq.com>
Message-ID: <CAELUF_CjudXaEPsqne9MjJEqazs9Wt=AhSOLsNWbeYjsW62cXA@mail.gmail.com>

So, actually I have just to tune sample_retention_policies to keep and
aggregate statistics as long as I need!
Is there a way to reset those statistics (during development I think I will
make several tests in a day, but I think I'll keep stats for a day so I
need to reset those couters..)?
Moreover, I saw that detailed stats are available only for 10 seconds..do
you think it could be feasible to keep detailed data for an entire day or
does it occupy too much space on disk?
For example, I'd like to do something like:

{rabbitmq_management, [{sample_retention_policies,
                          [{global,   [{60, 5}, {3600, 60}, {86400, 1200}]},
                           {basic,    [{60, 5},{3600, 60}, {86400, 1200}]},
                           {detailed, [{10, 5},{3600, 60}, {86400, 1200}]}
                        ]},

What is not clear to me is which statistics provides each category..for
example, detailed what information does affects?
If i ask for /api/queues, will I receive more or less data if I had also
detailed infos?
Resolution defined in sample_retention_policies have different
granularities in order to perform cumulative stats faster and save disk,
right?
Because I could configure {basic, [{{86400, 5}]} but then I keep all 5-secs
samples for all the day and also compute aggregate stats will require to
pass all the samples..(correct me if I'm wrong).
Will HTTP api returns cumulative stats only? sample_age and sample_incr
parameters are useful only I want all samples, right?

Thanks for the support,
Flavio

On Thu, Jul 25, 2013 at 1:28 PM, Simon MacMullen <simon at rabbitmq.com> wrote:

> On 25/07/2013 10:45AM, Flavio Pompermaier wrote:
>
>> Yes, probably what I need is to correctly set those two parameters:
>>   - sample_retention_policies
>>   - collect_statistics_interval
>>
>
> It's not obvious to me that you want to change collect_statistics_interval.
>
>
>  Are they strictly related or they serve different purposes?
>>
>
> Well, they both have to do with statistics.
>
> collect_statistics_interval controls how frequently the various components
> in RabbitMQ emit stats events. It therefore controls the maximum possible
> resolution of stats you can get. The expectation is usually that you would
> leave it alone, but if you had a huge number of not-quite-idle queues /
> channels / connections you might want to increase it so that your server
> does not spend all its time emitting stats events.
>
> sample_retention_policies controls how long the management plugin holds
> onto statistics, and with what resolution. You might want to change this if
> you want it to hold statistics for longer.
>
>
>  How do I ask for global/basic/detailed cumulative stats (like those
>> collected by sample_retention_policies)?
>>
>
> Those names refer to different classes of stats you can get through the
> web UI / HTTP API. See http://www.rabbitmq.com/**management.html#sample-**
> retention <http://www.rabbitmq.com/management.html#sample-retention> for
> the mapping.
>
>
>  I think that I need those metrics..
>> With a small collect_statistics_interval (1 s) I have more precise data
>> but more overhead on the broker,
>>
>
> Yes.
>
>
>  but changing this parameters require also to change
>> sample_retention_policies right?
>>
>
> No.
>
>
>  Or it just run every 5 s and thus collects 5 samples (for default global
>> conf for example)..?
>>
>
> Not sure what you mean. If collect_statistics_interval is shorter than the
> shortest resolution in sample_retention_policies you'll be doing more work
> for no gain.
>
> Cheers, Simon
>
>
>> Best,
>> Flavio
>>
>> On Thu, Jul 25, 2013 at 11:28 AM, Simon MacMullen <simon at rabbitmq.com
>> <mailto:simon at rabbitmq.com>> wrote:
>>
>>     On 24/07/2013 6:17PM, Flavio Pompermaier wrote:
>>
>>         have you ever tried to set statistics interval to something like
>>         a week?
>>
>>
>>     I assume you mean sample_retention_policies (i.e. how long we hold
>>     stats for) rather than collect_statistics_interval (i.e. how
>>     frequently the broker should emit stats for the management plugin to
>>     collect).
>>
>>     No I haven't, although you should be fine as long as you reduce the
>>     resolution for data that's held for longer. Or put up with increased
>>     memory use.
>>
>>         Does it affect performance?
>>
>>
>>     Shouldn't do particularly.
>>
>>     Cheers, Simon
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/ca5f2d0c/attachment.htm>

From mklishin at gopivotal.com  Thu Jul 25 13:42:51 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 16:42:51 +0400
Subject: [rabbitmq-discuss] ANN Bunny 0.9.4 is released
Message-ID: <DA400623-61BC-4DBF-B80A-2AC7B50A606E@gopivotal.com>

Bunny 0.9.4 is released to rubygems.org [1].

This is a backwards-compatible usability improvement release.
All Bunny users are recommended to upgrade.

Release notes:
http://blog.rubyrabbitmq.info/blog/2013/07/25/bunny-0-dot-9-4-is-released/

Kudos to Simon Lundstr?m for suggesting making client TLS certificates optional.

1. https://rubygems.org/gems/bunny/versions/0.9.4
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/ecd96fb3/attachment.pgp>

From bison_art at o2.pl  Thu Jul 25 13:52:37 2013
From: bison_art at o2.pl (rabbit15)
Date: Thu, 25 Jul 2013 05:52:37 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <51EFAE12.7010208@rabbitmq.com>
References: <1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
	<1374652023304-28317.post@n5.nabble.com>
	<51EF86E7.8030105@rabbitmq.com>
	<1374652266203-28319.post@n5.nabble.com>
	<51EF8F98.5070601@rabbitmq.com>
	<1374660089485-28335.post@n5.nabble.com>
	<51EFAE12.7010208@rabbitmq.com>
Message-ID: <1374756757556-28391.post@n5.nabble.com>

Hi, thanks for reply!
I will reduce my test in the next week. I have question about unacknowledged
messages. Do you suggest that if I tell consumer ( f.e. through the
basicQos(1)) to not get messages if the consumer doesn't process messages
than it will read with maximum speed ? If I run my test with my buffer than
messages are published with constant value, if not I see that publish speed
oscillates.

Cheers,
Artur



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-QUEUE-MESSAGES-tp27737p28391.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From kiraneha at gmail.com  Thu Jul 25 14:09:29 2013
From: kiraneha at gmail.com (kiraneha)
Date: Thu, 25 Jul 2013 06:09:29 -0700 (PDT)
Subject: [rabbitmq-discuss] Connection timed out when connecting to
 remote rabbitmq server using rabbitmq client library
In-Reply-To: <5BC92207-4C70-49D5-8DFE-8516BC42F372@gopivotal.com>
References: <1374584026289-28291.post@n5.nabble.com>
	<5BC92207-4C70-49D5-8DFE-8516BC42F372@gopivotal.com>
Message-ID: <1374757769244-28392.post@n5.nabble.com>

Hi Michael,

Thanks a lot !! I can connect to the server after opening the ports.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Connection-timed-out-when-connecting-to-remote-rabbitmq-server-using-rabbitmq-client-library-tp28291p28392.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From nvthoai at gmail.com  Thu Jul 25 14:12:52 2013
From: nvthoai at gmail.com (vantheshark)
Date: Thu, 25 Jul 2013 06:12:52 -0700 (PDT)
Subject: [rabbitmq-discuss] Queue disappear from nodes in clusters
Message-ID: <1374757972984-28393.post@n5.nabble.com>

Hi, I have a cluster of 3 nodes, ha-mode = all and ha-sync-mode = automatic.

It's been running pretty well for a few days. But 1 of the queue disappear
for unknown reason.

I tried to add the queue back from WebUI, it's added but then my ha policy
is not applied on it. And seem like the queue is not usable, I even cannot
delete it when I try to.


I run rabbitmqcl cluster_status and see below:

[{nodes,[{disc,[rabbit at queue1]},{ram,[rabbit at queue3,rabbit at queue2]}]},
 {running_nodes,[rabbit at queue1,rabbit at queue2,rabbit at queue3]},
 {partitions,
     [{badrpc,
          {'EXIT',
              {noproc,
                  {gen_server,call,
                      [rabbit_node_monitor,partitions,infinity]}}}}]}]


What does it mean and how can i fix it?




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Queue-disappear-from-nodes-in-clusters-tp28393.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From psdc1978 at gmail.com  Thu Jul 25 15:11:07 2013
From: psdc1978 at gmail.com (=?ISO-8859-1?Q?Pedro_S=E1_da_Costa?=)
Date: Thu, 25 Jul 2013 15:11:07 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <51F1102C.7080403@lshift.net>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
	<51F1102C.7080403@lshift.net>
Message-ID: <CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>

If I leave MQ configured with RABBITMQ_NODE_IP_ADDRESS=0.0.0.0, and I try
to connect to the *public* IP address, it seems that the request reaches
the MQ but the connection is terminated by unknown reason. I get this error
from the MQ log:

=ERROR REPORT==== 25-Jul-2013::14:02:34 ===
closing AMQP connection <0.459.0> ("client IP":42364 -> "private EC2
DNS":5672):
{handshake_timeout,handshake}

1 - Why the client reached the MQ? The public DNS is translated
autormatically to the private DNS in Amazon EC2?
2 - How can I get more information in the logs to understand why the
connection is terminated?





On 25 July 2013 12:46, Ceri Storey <ceri at lshift.net> wrote:

>  (25/07/13 12:12), Pedro S? da Costa wrote:
>
> If I set the RABBITMQ_NODE_IP_ADDRESS to 0.0.0.0, or I don't set the RABBITMQ_NODE_IP_ADDRESS,
> the message broker starts with the internal IP. This means that I cannot
> access it outside from the internet. If I put the public IP, the error
> continues. How I can set rabbitMQ to access is it  from the internet?
>
> What happens if you leave it configured with
> RABBITMQ_NODE_IP_ADDRESS=0.0.0.0, but try to connect to the *public* IP
> address?
>
>
>
>
>
>
>
> On 23 July 2013 12:15, Michael Klishin <michael.s.klishin at gmail.com>wrote:
>
>>  2013/7/23 Pedro S? da Costa <psdc1978 at gmail.com>
>>
>>> Error description:
>>>    {could_not_start_tcp_listener,{"XX.235.XXX.XXX",5672}}
>>>
>>
>>  Try using 0.0.0.0 for RABBITMQ_NODE_IP_ADDRESS. This will relieve you
>> from having to worry about the exact IP value of the interface.
>> --
>> MK
>>
>> http://github.com/michaelklishin
>> http://twitter.com/michaelklishin
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
>
>  --
> Best regards,
>
>
> _______________________________________________
> rabbitmq-discuss mailing listrabbitmq-discuss at lists.rabbitmq.comhttps://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/a86d5722/attachment.htm>

From mklishin at gopivotal.com  Thu Jul 25 15:16:33 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 18:16:33 +0400
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
	different regions
In-Reply-To: <CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
	<51F1102C.7080403@lshift.net>
	<CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>
Message-ID: <2457B7C2-7DC3-464D-B96B-6A9EF04FA426@gopivotal.com>

Pedro S? da Costa:

> 1 - Why the client reached the MQ? The public DNS is translated autormatically to the private DNS in Amazon EC2?

DNS translates names into IP addresses. 0.0.0.0 means "listen on all network interfaces", so whatever
IP address public DNS resolves to, is used. In fact, there's only one IP address per instance most of the time.

> 2 - How can I get more information in the logs to understand why the connection is terminated?

Your client did not perform AMQP 0.9.1 connection negotiation sequence. Were you connecting using telnet? If so, use a real client.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/45834437/attachment.pgp>

From simon at rabbitmq.com  Thu Jul 25 15:19:29 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Jul 2013 15:19:29 +0100
Subject: [rabbitmq-discuss] Queue disappear from nodes in clusters
In-Reply-To: <1374757972984-28393.post@n5.nabble.com>
References: <1374757972984-28393.post@n5.nabble.com>
Message-ID: <51F133F1.6010509@rabbitmq.com>

Hmm. So at least the node monitor has crashed, probably also the queue 
you saw vanish. Can you put logs somewhere?

Cheers, Simon

On 25/07/2013 2:12PM, vantheshark wrote:
> Hi, I have a cluster of 3 nodes, ha-mode = all and ha-sync-mode = automatic.
>
> It's been running pretty well for a few days. But 1 of the queue disappear
> for unknown reason.
>
> I tried to add the queue back from WebUI, it's added but then my ha policy
> is not applied on it. And seem like the queue is not usable, I even cannot
> delete it when I try to.
>
>
> I run rabbitmqcl cluster_status and see below:
>
> [{nodes,[{disc,[rabbit at queue1]},{ram,[rabbit at queue3,rabbit at queue2]}]},
>   {running_nodes,[rabbit at queue1,rabbit at queue2,rabbit at queue3]},
>   {partitions,
>       [{badrpc,
>            {'EXIT',
>                {noproc,
>                    {gen_server,call,
>                        [rabbit_node_monitor,partitions,infinity]}}}}]}]
>
>
> What does it mean and how can i fix it?
>
>
>
>
> --
> View this message in context: http://rabbitmq.1065348.n5.nabble.com/Queue-disappear-from-nodes-in-clusters-tp28393.html
> Sent from the RabbitMQ mailing list archive at Nabble.com.
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From psdc1978 at gmail.com  Thu Jul 25 15:25:17 2013
From: psdc1978 at gmail.com (=?ISO-8859-1?Q?Pedro_S=E1_da_Costa?=)
Date: Thu, 25 Jul 2013 15:25:17 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <2457B7C2-7DC3-464D-B96B-6A9EF04FA426@gopivotal.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
	<51F1102C.7080403@lshift.net>
	<CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>
	<2457B7C2-7DC3-464D-B96B-6A9EF04FA426@gopivotal.com>
Message-ID: <CAJ8VZfW=mWOqFeS=POBD1Q2ouJm0ej7e4QEx8XMJbc4zOVj1jg@mail.gmail.com>

I am using a real client.


On 25 July 2013 15:16, Michael Klishin <mklishin at gopivotal.com> wrote:

> Pedro S? da Costa:
>
> > 1 - Why the client reached the MQ? The public DNS is translated
> autormatically to the private DNS in Amazon EC2?
>
> DNS translates names into IP addresses. 0.0.0.0 means "listen on all
> network interfaces", so whatever
> IP address public DNS resolves to, is used. In fact, there's only one IP
> address per instance most of the time.
>
> > 2 - How can I get more information in the logs to understand why the
> connection is terminated?
>
> Your client did not perform AMQP 0.9.1 connection negotiation sequence.
> Were you connecting using telnet? If so, use a real client.
> --
> MK
>
>


-- 
Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/273d1ae9/attachment.htm>

From mklishin at gopivotal.com  Thu Jul 25 15:28:20 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 18:28:20 +0400
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
	different regions
In-Reply-To: <CAJ8VZfW=mWOqFeS=POBD1Q2ouJm0ej7e4QEx8XMJbc4zOVj1jg@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
	<51F1102C.7080403@lshift.net>
	<CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>
	<2457B7C2-7DC3-464D-B96B-6A9EF04FA426@gopivotal.com>
	<CAJ8VZfW=mWOqFeS=POBD1Q2ouJm0ej7e4QEx8XMJbc4zOVj1jg@mail.gmail.com>
Message-ID: <263E81F7-5D08-41EB-A60F-17A60A00F73C@gopivotal.com>

Pedro S? da Costa:

> I am using a real client.

What client is that? clients should indicate issues 
in some way, e.g. by raising an exception.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/ccb779a3/attachment.pgp>

From psdc1978 at gmail.com  Thu Jul 25 15:51:24 2013
From: psdc1978 at gmail.com (=?ISO-8859-1?Q?Pedro_S=E1_da_Costa?=)
Date: Thu, 25 Jul 2013 15:51:24 +0100
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <263E81F7-5D08-41EB-A60F-17A60A00F73C@gopivotal.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
	<51F1102C.7080403@lshift.net>
	<CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>
	<2457B7C2-7DC3-464D-B96B-6A9EF04FA426@gopivotal.com>
	<CAJ8VZfW=mWOqFeS=POBD1Q2ouJm0ej7e4QEx8XMJbc4zOVj1jg@mail.gmail.com>
	<263E81F7-5D08-41EB-A60F-17A60A00F73C@gopivotal.com>
Message-ID: <CAJ8VZfV32osCNe=Z0zZ7jRXqtU=pr2c6gYRD7pGQpKX+cH7BWw@mail.gmail.com>

I am running a python example that I created, that makes a request to the
rabbitMQ using celery. Giving an overview, a host registers to the
rabbitMQ, and the client send a request to the rabbitMQ that relays the
request to the host.

The request reaches the rabbitMQ service, but does not reaches the host
(the host is running correctly). I don't know what is happening because the
rabbitMQ log isn't detailed. Is it possible to set log level in rabbitMQ?

How can I raise an exception from the rabbitMQ in my python example?


On 25 July 2013 15:28, Michael Klishin <mklishin at gopivotal.com> wrote:

> Pedro S? da Costa:
>
> > I am using a real client.
>
> What client is that? clients should indicate issues
> in some way, e.g. by raising an exception.
> --
> MK
>
>


-- 
Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/aaef9602/attachment.htm>

From mklishin at gopivotal.com  Thu Jul 25 15:53:46 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Thu, 25 Jul 2013 18:53:46 +0400
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
	different regions
In-Reply-To: <CAJ8VZfV32osCNe=Z0zZ7jRXqtU=pr2c6gYRD7pGQpKX+cH7BWw@mail.gmail.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
	<51F1102C.7080403@lshift.net>
	<CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>
	<2457B7C2-7DC3-464D-B96B-6A9EF04FA426@gopivotal.com>
	<CAJ8VZfW=mWOqFeS=POBD1Q2ouJm0ej7e4QEx8XMJbc4zOVj1jg@mail.gmail.com>
	<263E81F7-5D08-41EB-A60F-17A60A00F73C@gopivotal.com>
	<CAJ8VZfV32osCNe=Z0zZ7jRXqtU=pr2c6gYRD7pGQpKX+cH7BWw@mail.gmail.com>
Message-ID: <B12A0222-47BA-4EC7-A2A3-FACA5A1F09F3@gopivotal.com>

Pedro S? da Costa:

> I don't know what is happening because the rabbitMQ log isn't detailed. Is it possible to set log level in rabbitMQ?

You can use RabbitMQ management UI to inspect queues, bindings and message rates.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/5fc2c92c/attachment.pgp>

From joshua__lim at hotmail.com  Thu Jul 25 19:34:11 2013
From: joshua__lim at hotmail.com (joshua__lim)
Date: Thu, 25 Jul 2013 11:34:11 -0700 (PDT)
Subject: [rabbitmq-discuss] Reconnecting to the Web-Stomp plugin after a
 network disconnection.
In-Reply-To: <d43a1e74-7daa-410d-a3db-550bcbd66fb9@googlegroups.com>
References: <a219b905-29db-46d3-8e1a-ef559e421e7e@googlegroups.com>
	<d43a1e74-7daa-410d-a3db-550bcbd66fb9@googlegroups.com>
Message-ID: <1374777251759-28401.post@n5.nabble.com>

Anton Sizov wrote
> Hi
> Probably you need to create new SockJS object (tcp connection) on 
> disconnect. See line 16. I assume ws is TCP connection object. More info 
> for SockJS you can find at https://github.com/sockjs/sockjs-client.
> Try to move lines 16-22 to Connect() function.
> Also, any debug messages on reconnect attempt are welcome. 


Hi Anton, thanks.  I've managed to get it worked but just one change.  Line
17: "var client = Stomp.over(ws);" cannot be inside function Connect().

ps: I still have another problem - I'm not able to subscribe to 2 queues
with ack: 'client', but that's for another thread.  :)

Meanwhile, I've posted the updated codes for connection retry including the
HTML.  Currently, the code retries on any error.  I think it's necessary to
handle connection error from errors generated from the Web STOMP plugin
differently.

listener-app.js: http://pastebin.com/jYsHyaYd
index.html: http://pastebin.com/aW0iSyjW



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Reconnecting-to-the-Web-Stomp-plugin-after-a-network-disconnection-tp28227p28401.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From casey.marshall at gazzang.com  Thu Jul 25 22:58:16 2013
From: casey.marshall at gazzang.com (Casey Marshall)
Date: Thu, 25 Jul 2013 16:58:16 -0500
Subject: [rabbitmq-discuss] RabbitMQ hanging during 'rabbitmqctl stop' -
	please help
In-Reply-To: <51EE959D.1040200@gazzang.com>
References: <51EE959D.1040200@gazzang.com>
Message-ID: <51F19F78.4000603@gazzang.com>

Is there more information I can give you about my problem? Some way to
prevent the rabbit hang on service restart, or get it unstuck? So far,
the only way to get past it is to kill the beam process. I can't imagine
that is good for the integrity of the service.

I'm relatively new to working with RabbitMQ. I've been developing with
it for a couple months now, but I've been diligently researching this
problem and making trial-and-error attempts at black-box solutions for
the last two weeks to no avail. I'm really stuck and getting desperate
to find a solution.

This problem is persistent enough that I don't think we'll be able to
deploy into production without some understanding of the root cause and
a workaround.

I know this an open-source project, and I don't feel entitled to any
sort of timely response, but if this isn't the place to get help, where
else I should I look?

-Casey

On 07/23/2013 09:39 AM, Casey Marshall wrote:
> I'm using RabbitMQ federated exchanges among a number of servers. Each
> server has upstream exchanges on each of the others. I don't want to
> call it a cluster, since that has another meaning in RabbitMQ altogether
> ... let's call it a "federated group".
> 
> This worked fine over AMQP, both in my own local KVM-virtualized testing
> environment, and it seemed to as well in Amazon EC2 with unencrypted
> AMQP. However, I need to secure the connections in EC2 with AMQPS before
> we go into production.
> 
> I was able to automate creation and distribution of certificates among
> the servers, and the setup works fine in a local KVM-virtualized
> environment. However, when I started testing it in EC2 across regions, I
> started having problems. RabbitMQ hangs on some of the servers in EC2
> during 'service rabbitmq-server restart'.
> 
> I have scripts to automate updating the federated exchanges, to effect
> topology changes on the "federated group" -- adding or removing a
> server, or changing its role (different roles have different exchange
> upstreams). After this script updates the federation config, the
> subsequent restart hangs on some of the servers.
> 
> What should I do to make my RabbitMQ "federated group" more robust?
> 
> I've attached:
> 
> 1. rabbitmq.log and rabbitmq-sasl.log excerpt from one of the hosts that
> persistently gets stuck during a RabbitMQ 'stop', near the time of the hang.
> 2. 'rabbitmqctl status' from that host.
> 
> Installed on the system:
> 
> ii  esl-erlang                       1:16.b.1-1~ubuntu~precise       Erlang
> ii  rabbitmq-server                  3.1.3-1
> AMQP server written in Erlang
> 
> Much thanks,
> Casey
> 


From steven.willems at i-develop.be  Fri Jul 26 00:30:51 2013
From: steven.willems at i-develop.be (steven.willems at i-develop.be)
Date: Thu, 25 Jul 2013 16:30:51 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ RPC in Tomcat container
In-Reply-To: <dafca0ed-95c9-4198-af50-77fe1c705358@googlegroups.com>
References: <dafca0ed-95c9-4198-af50-77fe1c705358@googlegroups.com>
Message-ID: <e79cb080-e5ca-489e-932c-8906d26d545f@googlegroups.com>

Managed to get it working:

* passed in my own ExecutorService when creating the connection and stored 
it in the ServletContextListener
* Used Executors.newCachedThreadPool(); -> not necessary, but is good as 
many short executions, and unused threads die after 60s idle time
* Shutdown threads in ServletContextListener.destroyed(). First thought 
this didn't work as my breakpoint was not reached, but somehow, breakpoint 
just seem not to work there (could make sense when I think about it, I'm 
stopping the process so debugger might already be detached). But logging 
assures me now my code is executed.
ServletContextListener.destroyed() {
            executorService.shutdown();
            executorService.awaitTermination(20, TimeUnit.SECONDS);
}

And that's it :)

Op woensdag 24 juli 2013 17:08:32 UTC+2 schreef steven.... at i-develop.be het 
volgende:
>
> I'm trying to setup RabbitMQ RPC in a web project (like suggested in tutorial 
> 6 <http://www.rabbitmq.com/tutorials/tutorial-six-java.html>). It works 
> as intended, but when I try to shutdown Tomcat, the shutdown hangs as soon 
> as I have created a consumer listening to the rpc response. 
>
> jstack and some debugging learned me that for each created consumer, a 
> thread is created. And those threads are preventing Tomcat from shutting 
> down (as they are not managed by Tomcat).
>
> Looking at ConsumerWorkService, there is a method addWork, which creates 
> a new WorkPoolRunnable and if I have understood it correctly, those 
> Runnable's are only stopped when the 'key', being the channel is stopped.
>
> I find that a bit odd.. I would expect that when I call stub.channel.basicCancel(consumer.getConsumerTag()); 
> the runnable for the consumer is removed. 
>
> Or am I completely wrong about my findings and is something else going on?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/dd653d30/attachment.htm>

From steven.willems at i-develop.be  Fri Jul 26 00:30:51 2013
From: steven.willems at i-develop.be (steven.willems at i-develop.be)
Date: Thu, 25 Jul 2013 16:30:51 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ RPC in Tomcat container
In-Reply-To: <dafca0ed-95c9-4198-af50-77fe1c705358@googlegroups.com>
References: <dafca0ed-95c9-4198-af50-77fe1c705358@googlegroups.com>
Message-ID: <e79cb080-e5ca-489e-932c-8906d26d545f@googlegroups.com>

Managed to get it working:

* passed in my own ExecutorService when creating the connection and stored 
it in the ServletContextListener
* Used Executors.newCachedThreadPool(); -> not necessary, but is good as 
many short executions, and unused threads die after 60s idle time
* Shutdown threads in ServletContextListener.destroyed(). First thought 
this didn't work as my breakpoint was not reached, but somehow, breakpoint 
just seem not to work there (could make sense when I think about it, I'm 
stopping the process so debugger might already be detached). But logging 
assures me now my code is executed.
ServletContextListener.destroyed() {
            executorService.shutdown();
            executorService.awaitTermination(20, TimeUnit.SECONDS);
}

And that's it :)

Op woensdag 24 juli 2013 17:08:32 UTC+2 schreef steven.... at i-develop.be het 
volgende:
>
> I'm trying to setup RabbitMQ RPC in a web project (like suggested in tutorial 
> 6 <http://www.rabbitmq.com/tutorials/tutorial-six-java.html>). It works 
> as intended, but when I try to shutdown Tomcat, the shutdown hangs as soon 
> as I have created a consumer listening to the rpc response. 
>
> jstack and some debugging learned me that for each created consumer, a 
> thread is created. And those threads are preventing Tomcat from shutting 
> down (as they are not managed by Tomcat).
>
> Looking at ConsumerWorkService, there is a method addWork, which creates 
> a new WorkPoolRunnable and if I have understood it correctly, those 
> Runnable's are only stopped when the 'key', being the channel is stopped.
>
> I find that a bit odd.. I would expect that when I call stub.channel.basicCancel(consumer.getConsumerTag()); 
> the runnable for the consumer is removed. 
>
> Or am I completely wrong about my findings and is something else going on?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130725/dd653d30/attachment-0001.htm>

From nvthoai at gmail.com  Fri Jul 26 00:54:58 2013
From: nvthoai at gmail.com (vantheshark)
Date: Thu, 25 Jul 2013 16:54:58 -0700 (PDT)
Subject: [rabbitmq-discuss] Queue disappear from nodes in clusters
In-Reply-To: <51F133F1.6010509@rabbitmq.com>
References: <1374757972984-28393.post@n5.nabble.com>
	<51F133F1.6010509@rabbitmq.com>
Message-ID: <1374796498538-28404.post@n5.nabble.com>

Hi Simon,

I think the log files are too big (2Gb) to upload here, even after I
compress it.
However, these are some lines like this in node2
/
Mirrored-queue (queue 'MyQueue_Priority3' in vhost '/'): Master
<rabbit at queue2.2.2114.1> saw deaths of mirrors <rabbit at queue3.1.365.1> 
/

"MyQueue_Priority3" was the one vanished.

There are 3 nodes: queue1 (disc, stats), queue2 (ram), queue3 (ram) 
What I did was trying enable federation plugins on these nodes, first on
queue3, then queue2 then queue1

On queue3: 
rabbitmq-plugins enable rabbitmq_federation
rabbitmq-plugins enable rabbitmq_federation_managements
rabbitmqctl stop
rabbitmq-server -detached
 
Then queue 3 up fine, I started the same thing on queue2 and queue2 up fine.
Finally when I started it on queue1, queue 3 promoted, queue1 takes quite
along time to start as far as I remembered and then the weird things started
to happen :D. I assume all exchanges and queues are mirrored across nodes in
this cluster so even 1 node down, the data should not be lost? Or is it
because the disc node down will cause the lost of queue definition? I'm
pretty sure at that time all queues and exchanges are synced.



I also used wan IPs and put the IPs in the host file before clustering, is
it the problem. 

The document (http://www.rabbitmq.com/distributed.html) wrote that:
/
Brokers *must be* connected via reliable LAN links. Communication is via
Erlang internode messaging, requiring a shared Erlang cookie.
/
And (http://www.rabbitmq.com/partitions.html#cp-mode)

/Which mode should I pick?

*ignore *- Your network really is reliable. All your nodes are in a rack,
connected with a switch, and that switch is also the route to the outside
world. You don't want to run any risk of any of your cluster shutting down
if any other part of it fails (or you have a two node cluster).

*pause_minority* - Your network is maybe less reliable. You have clustered
across 3 AZs in EC2, and you assume that only one AZ will fail at once. In
that scenario you want the remaining two AZs to continue working and the
nodes from the failed AZ to rejoin automatically and without fuss when the
AZ comes back.

*autoheal *- Your network may not be reliable. You are more concerned with
continuity of service than with data integrity. You may have a two node
cluster.
/


I may choose *pause_minority* then. I will change to use the private IPs
(provided by the host provider), hopefully will be better. By the way, do
you recommend a clustering of 3 nodes or 2 nodes?





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Queue-disappear-from-nodes-in-clusters-tp28393p28404.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From dmagick at gmail.com  Fri Jul 26 06:24:23 2013
From: dmagick at gmail.com (Chris)
Date: Fri, 26 Jul 2013 15:24:23 +1000
Subject: [rabbitmq-discuss] forking and getting or consuming messages
Message-ID: <51F20807.1090409@gmail.com>

Hi,

I'm setting up a system that will have multiple queues. One script 
listens to a 'master' queue and then forks off other scripts to deal 
with the other queues as required.

This all works fine except for a couple of things.

I'm basically doing a
while (queue->get()) {
   do stuff;
}

If the queue is already running and another message goes onto the stack, 
I don't see it until the script runs again. I tried closing the channel 
and then opening it again but that didn't help (it caused a problem in 
amqplib). Any suggestions?

The second problem is that once all the messages are off the stack, the 
script exits. I'd like it to stay open and wait for more messages to 
come in. Is that possible using the queue->get() approach?

I tried changing it to work as a queue consumer (which addressed the 2nd 
problem), but then I only got one message from the queue at a time, I 
had to wait for each message to finish processing before starting the 
next one, so forking off connections didn't work. Should this idea work?

I'm using php-amqplib (https://github.com/tnc/php-amqplib) to talk to 
rabbitmq.

Thanks for any suggestions/comments.

Cheers,
-- 
Postgresql & php tutorials
http://www.designmagick.com/


From mklishin at gopivotal.com  Fri Jul 26 06:35:58 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 26 Jul 2013 09:35:58 +0400
Subject: [rabbitmq-discuss] forking and getting or consuming messages
In-Reply-To: <51F20807.1090409@gmail.com>
References: <51F20807.1090409@gmail.com>
Message-ID: <341210AA-3388-489A-A307-3A157A3204A0@gopivotal.com>

Chris:

> The second problem is that once all the messages are off the stack, the script exits. I'd like it to stay open and wait for more messages to come in. Is that possible using the queue->get() approach?

Child processes of fork(2) need to reopen all network connections
(not just to RabbitMQ).

So you need to pre-fork N workers and pass messages to them using
pipes or similar, or have each have a separate consumer. In the case of
pipes, coordinating acknowledgements may be pretty tricky, so using
one consumer per pre-forked worker is a much easier way.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/5a2e70ab/attachment.pgp>

From leahy_s at hotmail.com  Fri Jul 26 09:58:39 2013
From: leahy_s at hotmail.com (slahy)
Date: Fri, 26 Jul 2013 01:58:39 -0700 (PDT)
Subject: [rabbitmq-discuss] change exchange to durable
Message-ID: <1374829119702-28407.post@n5.nabble.com>

HI,

I am trying to change an exchange from transient to durable. I delete the
exchange through the web interface. I have attepmted this several times and
when I recreate the exchchange and attempt to send a message i  get the
following response 

Publish-RabbitMessage : The AMQP operation was interrupted: AMQP
close-reason,
initiated by Peer, code=406, text="PRECONDITION_FAILED - cannot redeclare
excha
nge 'exch01' in vhost '/' with different type, durable, internal or
autodelete va
lue", classId=40, methodId=10, cause=
At
C:\Users\Administrator\Documents\WindowsPowerShell\modules\poshrabbit\poshra
bbit-functions.ps1:717 char:24
+         publish-rabbitMessage <<<<  @local:a;
    + CategoryInfo          : NotSpecified: (:) [Publish-RabbitMessage],
Opera
   tionInterruptedException
    + FullyQualifiedErrorId :
RabbitMQ.Client.Exceptions.OperationInterruptedE
   xception,PoshRabbit.PublishMessageCmdlet

If I delete it and recreate the exchange as transient it works fine again. 

Is there something else I need to do when deleting the exchange ?

Thanks

slahy



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/change-exchange-to-durable-tp28407.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at gopivotal.com  Fri Jul 26 10:02:35 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 26 Jul 2013 13:02:35 +0400
Subject: [rabbitmq-discuss] change exchange to durable
In-Reply-To: <1374829119702-28407.post@n5.nabble.com>
References: <1374829119702-28407.post@n5.nabble.com>
Message-ID: <1B0D58C6-1CEA-46B2-BAD3-9552C4E2882F@gopivotal.com>

slahy:

> If I delete it and recreate the exchange as transient it works fine again. 
> 
> Is there something else I need to do when deleting the exchange ?

No.

Can there be something else (maybe another app or script?) that declares the exchange
as non-durable? Are you deleting the exchange in the same vhost that your apps use?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/b4901f74/attachment.pgp>

From 0x6e6562 at gmail.com  Fri Jul 26 10:24:30 2013
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Fri, 26 Jul 2013 10:24:30 +0100
Subject: [rabbitmq-discuss] Network driver patch
Message-ID: <etPan.51f2404e.189a769b.14175@backd8>

Hi guys,

I was wondering whether you'd accept this patch to the network driver. It addresses a bug in the client side handling of the SASL handshake which makes it difficult for the server to send the client a challenge.

Cheers,

Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/7dcb5116/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp_network_connection.erl.patch
Type: application/octet-stream
Size: 565 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/7dcb5116/attachment.obj>

From mklishin at gopivotal.com  Fri Jul 26 10:36:41 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 26 Jul 2013 13:36:41 +0400
Subject: [rabbitmq-discuss] ANN Bunny 0.9.7 is released
Message-ID: <69DA0671-B776-484C-9F67-D39E6997D664@gopivotal.com>

Bunny 0.9.7 is released to rubygems.org [1].

Point versions 0.9.5-0.9.7 fix a few concurrency-related issues
and are 100% backwards compatible.

All Bunny users are recommended to upgrade.

Release notes:
http://blog.rubyrabbitmq.info/blog/2013/07/26/bunny-0-dot-9-7-is-released/

1. http://rubygems.org/gems/bunny/versions/0.9.7
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/adb91494/attachment.pgp>

From emile at rabbitmq.com  Fri Jul 26 10:40:38 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 26 Jul 2013 10:40:38 +0100
Subject: [rabbitmq-discuss] STOMP protocol issues - transactions
In-Reply-To: <51F0EABC.1080604@rabbitmq.com>
References: <57F04AE823A3944EB9E297A91AA114D20990A9BE@RISBCTMBXP002.risk.regn.net>
	<51F0EABC.1080604@rabbitmq.com>
Message-ID: <51F24416.2070308@rabbitmq.com>


Hi Robert,

On 25/07/13 19:39, Lauer, Robert (RIS-PHL) wrote:
> The protocol that I'm reading suggest that the proper response is
> 'receipt-id', not 'receipt', so either the protocol document is incorrect
> or the source code is?

For the negotiated version in your transcript the relevant specification
is http://stomp.github.io/stomp-specification-1.0.html


From simon at rabbitmq.com  Fri Jul 26 10:43:08 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 26 Jul 2013 10:43:08 +0100
Subject: [rabbitmq-discuss] Queue disappear from nodes in clusters
In-Reply-To: <1374796498538-28404.post@n5.nabble.com>
References: <1374757972984-28393.post@n5.nabble.com>
	<51F133F1.6010509@rabbitmq.com>
	<1374796498538-28404.post@n5.nabble.com>
Message-ID: <51F244AC.5080000@rabbitmq.com>

On 26/07/2013 12:54AM, vantheshark wrote:
> Hi Simon,
>
> I think the log files are too big (2Gb) to upload here, even after I
> compress it.

Hmm; what about the -sasl.log files? Those should contain the crashes in 
question.

> However, these are some lines like this in node2
> /
> Mirrored-queue (queue 'MyQueue_Priority3' in vhost '/'): Master
> <rabbit at queue2.2.2114.1> saw deaths of mirrors <rabbit at queue3.1.365.1>
> /
>
> "MyQueue_Priority3" was the one vanished.

That's just a normal message from queue mirroring - we log whenever a 
mirror dies.

> I assume all exchanges and queues are mirrored across nodes in
> this cluster so even 1 node down, the data should not be lost?

Exchanges are always mirrored. Queues are if you turn on queue mirroring 
(which it sounds like you have).

But there is evidence of something crashing in the logs you posted, so I 
want to see what's going on there. I suspect that's why the queue 
vanished. Certainly it shouldn't just do that.

> I also used wan IPs and put the IPs in the host file before clustering, is
> it the problem.

Well, be aware that clustering is in general not partition tolerant. If 
you've experienced network partitions then you can expect things not to 
work flawlessly. Not that I would expect to see queues crash, but in 
general the behaviour is less well defined when partitioned.

<snip>

> I may choose *pause_minority* then.

Sure, but make sure you understand what pause_minority does. None of the 
cluster_partition_handling options are magic, you will always experience 
problems when a partition occurs - you just get a choice of what sort of 
problems.

> I will change to use the private IPs
> (provided by the host provider), hopefully will be better.

Private IPs are unlikely to make a difference.

> By the way, do
> you recommend a clustering of 3 nodes or 2 nodes?

Depends what you're trying to do. If you want to use pause_minority mode 
then you need at least three nodes.

Cheers, Simon

From emile at rabbitmq.com  Fri Jul 26 11:00:11 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Fri, 26 Jul 2013 11:00:11 +0100
Subject: [rabbitmq-discuss] change exchange to durable
In-Reply-To: <1374829119702-28407.post@n5.nabble.com>
References: <1374829119702-28407.post@n5.nabble.com>
Message-ID: <51F248AB.7010209@rabbitmq.com>


Hi,

On 26/07/13 09:58, slahy wrote:

> I am trying to change an exchange from transient to durable. I delete the
> exchange through the web interface. I have attepmted this several times and
> when I recreate the exchchange and attempt to send a message i  get the
> following response 
> 
> Publish-RabbitMessage : The AMQP operation was interrupted: AMQP 
> close-reason, initiated by Peer, code=406, text="PRECONDITION_FAILED
> - cannot redeclare excha nge 'exch01' in vhost '/' with different
> type, durable, internal or autodelete va lue", classId=40,
> methodId=10, cause=

That library associates with each connector an exchange that gets
redeclared with default parameters (non-durable) each time a channel is
opened. It doesn't look like PoshRabbit.RabbitConnector supports durable
exchanges in the way you want.

You could ask the author to add the feature, try to add it yourself (if
the license permits) or use a different library.


-Emile





From matthias at rabbitmq.com  Fri Jul 26 11:16:27 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 26 Jul 2013 11:16:27 +0100
Subject: [rabbitmq-discuss] RabbitMQ QUEUE MESSAGES
In-Reply-To: <1374756757556-28391.post@n5.nabble.com>
References: <1374588059887-28298.post@n5.nabble.com>
	<51EE8FE9.5060008@rabbitmq.com>
	<1374651001375-28315.post@n5.nabble.com>
	<51EF8407.4060806@rabbitmq.com>
	<1374652023304-28317.post@n5.nabble.com>
	<51EF86E7.8030105@rabbitmq.com>
	<1374652266203-28319.post@n5.nabble.com>
	<51EF8F98.5070601@rabbitmq.com>
	<1374660089485-28335.post@n5.nabble.com>
	<51EFAE12.7010208@rabbitmq.com>
	<1374756757556-28391.post@n5.nabble.com>
Message-ID: <51F24C7B.7010403@rabbitmq.com>

On 25/07/13 13:52, rabbit15 wrote:
> Do you suggest that if I tell consumer ( f.e. through the
> basicQos(1)) to not get messages if the consumer doesn't process messages
> than it will read with maximum speed ?

No, it will read with a *more consistent* speed. basic.qos is quite 
costly, and, furthermore, when run with low values is impacted by 
latency. So it will never be as quick as consuming w/o basic.qos.

Matthias.

From simon at rabbitmq.com  Fri Jul 26 11:30:32 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 26 Jul 2013 11:30:32 +0100
Subject: [rabbitmq-discuss] RabbitMQ hanging during 'rabbitmqctl stop' -
 please help
In-Reply-To: <51EE959D.1040200@gazzang.com>
References: <51EE959D.1040200@gazzang.com>
Message-ID: <51F24FC8.8000807@rabbitmq.com>

On 23/07/2013 3:39PM, Casey Marshall wrote:
> I was able to automate creation and distribution of certificates among
> the servers, and the setup works fine in a local KVM-virtualized
> environment. However, when I started testing it in EC2 across regions, I
> started having problems. RabbitMQ hangs on some of the servers in EC2
> during 'service rabbitmq-server restart'.

We're aware of a bug that could cause deadlocks on shutdown. We've 
thought of it as something that people are quite unlikely to run into 
though, so I'm surprised you're seeing it so frequently.

> I have scripts to automate updating the federated exchanges, to effect
> topology changes on the "federated group" -- adding or removing a
> server, or changing its role (different roles have different exchange
> upstreams). After this script updates the federation config, the
> subsequent restart hangs on some of the servers.

However, it doesn't have anything to do with reconfiguring federation.

Are you restarting the server immediately after reconfiguring 
federation, or some time later?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From kbiton at outbrain.com  Fri Jul 26 11:33:09 2013
From: kbiton at outbrain.com (Kobi Biton)
Date: Fri, 26 Jul 2013 03:33:09 -0700 (PDT)
Subject: [rabbitmq-discuss] flow control blocked producers vs consumers
Message-ID: <d1a6f0e0-78af-4540-8ded-0b66c6ddee56@googlegroups.com>

our rabbitmq (3.0.1) servers blocks producers (logstash) due to flow 
control triggering (reason is flow on rabbitctl) this however also blocked 
our consumers , to mitigate it we are restarting the blocked producers and 
consumers then the queue start to get balanced.

Reading the flow control docs , how can we avoid from blocking the 
consumers connections ? can they operate on a different channel ? we also 
lowered the message TTL and that seemed to slow down the waiting messages, 
we do understand that we have a bottleneck somewhere along the pipe that 
said could we configure out consumers to avoid flow control blocking ?

Kobi  

-- 
The above terms reflect a potential business arrangement, are provided solely 
as a basis for further discussion, and are not intended to be and do not 
constitute a legally binding obligation. No legally binding obligations will 
be created, implied, or inferred until an agreement in final form is executed 
in writing by all parties involved.

This email and any attachments hereto may be confidential or privileged. 
 If you received this communication by mistake, please don't forward it to 
anyone else, please erase all copies and attachments, and please let me 
know that it has gone to the wrong person. Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/b027d728/attachment.htm>

From mklishin at gopivotal.com  Fri Jul 26 12:02:29 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 26 Jul 2013 15:02:29 +0400
Subject: [rabbitmq-discuss] flow control blocked producers vs consumers
In-Reply-To: <d1a6f0e0-78af-4540-8ded-0b66c6ddee56@googlegroups.com>
References: <d1a6f0e0-78af-4540-8ded-0b66c6ddee56@googlegroups.com>
Message-ID: <EACD0711-8377-42D7-8F54-EB59FB871BB5@gopivotal.com>

Kobi Biton:

> Reading the flow control docs , how can we avoid from blocking the consumers connections ? can they operate on a different channel ?

Connections are blocked when you first publish something, so using a connection that's
only used for consumers should have the effect you want.

Logstash rabbitmq output should use its own connection. Can you explain how do you share its connection
with consumers?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/ee2cd9bb/attachment.pgp>

From mklishin at gopivotal.com  Fri Jul 26 12:03:53 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 26 Jul 2013 15:03:53 +0400
Subject: [rabbitmq-discuss] flow control blocked producers vs consumers
In-Reply-To: <d1a6f0e0-78af-4540-8ded-0b66c6ddee56@googlegroups.com>
References: <d1a6f0e0-78af-4540-8ded-0b66c6ddee56@googlegroups.com>
Message-ID: <207BC147-BFF1-40AE-BAC6-44C23C06E2DE@gopivotal.com>

Kobi Biton:

> Reading the flow control docs , how can we avoid from blocking the consumers connections ? can they operate on a different channel ?

Connections are blocked when you first publish something, so using a connection that's
only used for consumers should have the effect you want.

Logstash rabbitmq output should use its own connection. Can you explain how do you share its connection
with consumers?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/c692cc58/attachment.pgp>

From kbiton at outbrain.com  Fri Jul 26 12:39:43 2013
From: kbiton at outbrain.com (Kobi Biton)
Date: Fri, 26 Jul 2013 14:39:43 +0300
Subject: [rabbitmq-discuss] flow control blocked producers vs consumers
In-Reply-To: <207BC147-BFF1-40AE-BAC6-44C23C06E2DE@gopivotal.com>
References: <d1a6f0e0-78af-4540-8ded-0b66c6ddee56@googlegroups.com>
	<207BC147-BFF1-40AE-BAC6-44C23C06E2DE@gopivotal.com>
Message-ID: <CAKCS0Ay5ng+rjXnWGPkY+AhMeh_mxEFXoo5Fr7oy0frrYJb5xg@mail.gmail.com>

Michael thanks for the reply.

Our logstash consumers do use their own connection , we do not use the
same connection for publishing (logstash rabbitmq output) and for
consuming (logstash rabbitmq input) , I was under the impression that
the consumers are blocked due to the fact that when rabbitmq starts to
block producers due to flow rates looking at the logstash consumers
logs I see errors connecting to the broker (connection reset by host)
which implies that the broker rejects the consumers connection this of
course leads us to shaky state where messages are no delivered and the
only workaround we found is capturing the blocked producers list from
rabbitmq_ctl and restarting the logstash agents by looping on all the
blocked producers.

Kobi



On Fri, Jul 26, 2013 at 2:03 PM, Michael Klishin <mklishin at gopivotal.com> wrote:
> Kobi Biton:
>
>> Reading the flow control docs , how can we avoid from blocking the consumers connections ? can they operate on a different channel ?
>
> Connections are blocked when you first publish something, so using a connection that's
> only used for consumers should have the effect you want.
>
> Logstash rabbitmq output should use its own connection. Can you explain how do you share its connection
> with consumers?
> --
> MK
>

-- 
The above terms reflect a potential business arrangement, are provided solely 
as a basis for further discussion, and are not intended to be and do not 
constitute a legally binding obligation. No legally binding obligations will 
be created, implied, or inferred until an agreement in final form is executed 
in writing by all parties involved.

This email and any attachments hereto may be confidential or privileged. 
 If you received this communication by mistake, please don't forward it to 
anyone else, please erase all copies and attachments, and please let me 
know that it has gone to the wrong person. Thanks.

From mklishin at gopivotal.com  Fri Jul 26 12:43:20 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 26 Jul 2013 15:43:20 +0400
Subject: [rabbitmq-discuss] flow control blocked producers vs consumers
In-Reply-To: <CAKCS0Ay5ng+rjXnWGPkY+AhMeh_mxEFXoo5Fr7oy0frrYJb5xg@mail.gmail.com>
References: <d1a6f0e0-78af-4540-8ded-0b66c6ddee56@googlegroups.com>
	<207BC147-BFF1-40AE-BAC6-44C23C06E2DE@gopivotal.com>
	<CAKCS0Ay5ng+rjXnWGPkY+AhMeh_mxEFXoo5Fr7oy0frrYJb5xg@mail.gmail.com>
Message-ID: <38FDFB7E-ADD0-4015-98B6-F07435FADED3@gopivotal.com>

Kobi Biton:

> I was under the impression that
> the consumers are blocked due to the fact that when rabbitmq starts to
> block producers due to flow rates

No, it does not. The ideas is to let consumers catch up and (hopefully) make alarms
clear by e.g. freeing RAM.

> looking at the logstash consumers
> logs I see errors connecting to the broker (connection reset by host)

Are you sure your Rabbit is not running out of file descriptors? That's one reason
why connections may be rejected.

Do you have log entries about alarms to post here?

Please check max file descriptors available with ulimit -n (you need to use the same
user rabbitmq runs under).
--
MK


From spec8472 at gmail.com  Fri Jul 26 13:25:05 2013
From: spec8472 at gmail.com (Will Hughes)
Date: Fri, 26 Jul 2013 05:25:05 -0700 (PDT)
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
Message-ID: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>


This is following on from a tweet I made earlier about wishing that 
RabbitMQ had the ability to push messages to the back of the queue when 
NAcked. 
Alvaro Videla replied suggesting I ask for the feature here. 


Scenario: 
I'm processing messages from a queue with confirmation required. 
The number of messages relative to the consumption rate can be quite high 
at times. In excess of hundreds of thousands of messages, with consumption 
rate in the low hundreds per second range. 

Sometimes we have to abandon processing a message for some transient reason 
(eg: external resource is locked/unavailable), and so we send a NAck.  
At the moment, RabbitMQ will immediately redeliver that message to any of 
the consumers. If the transient condition is still in place, we can 
potentially get into a tight loop where we're constantly consuming the same 
message(s) hundreds of times per second. 

For our scenario, we *can* duplicate the message, send it to the 
exchange/queue, and Ack the original. 

Something I thought might be a bit nicer is if we could have an option to 
have RabbitMQ put the message at the back of the queue. Depending on the 
size of the queue and our processing rate, this might give us an easier way 
to try other messages in the queue first. 

Another option I was thinking of to enforce more a delay was to see if I 
could chain together two queues using dead-letter-exchange settings: 

Queue A, no TTL, DLX=Exchange B (with Queue B bound to it). 
Queue B, ttl of (x) seconds, DLX= Exchange A (with Queue A bound to it). 

When we NAck the mesage from Queue A, we set requeue=false. 

I've not seen much discussion so far on whether it's sane to hook up two 
queues/exchanges in a loop like this. 
Closest I've seen is this: 
http://yuserinterface.com/dev/2013/01/08/how-to-schedule-delay-messages-with-rabbitmq-using-a-dead-letter-exchange/ but 
that's just using TTL to DLX to delay processing intially, not the whole 
chain. 

Suggestions or comments? 

Cheers
Will Hughes. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/a8189ff1/attachment.htm>

From matthias at rabbitmq.com  Fri Jul 26 14:18:40 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 26 Jul 2013 14:18:40 +0100
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>
References: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>
Message-ID: <51F27730.3030203@rabbitmq.com>

On 26/07/13 13:25, Will Hughes wrote:
> Scenario:
> I'm processing messages from a queue with confirmation required.
> The number of messages relative to the consumption rate can be quite
> high at times. In excess of hundreds of thousands of messages, with
> consumption rate in the low hundreds per second range.
>
> Sometimes we have to abandon processing a message for some transient
> reason (eg: external resource is locked/unavailable), and so we send a
> NAck.
> At the moment, RabbitMQ will immediately redeliver that message to any
> of the consumers. If the transient condition is still in place, we can
> potentially get into a tight loop where we're constantly consuming the
> same message(s) hundreds of times per second.
>
> For our scenario, we *can* duplicate the message, send it to the
> exchange/queue, and Ack the original.

The problem here is that with a short queue you still end up in a tight 
loop.

> Something I thought might be a bit nicer is if we could have an option
> to have RabbitMQ put the message at the back of the queue. Depending on
> the size of the queue and our processing rate, this might give us an
> easier way to try other messages in the queue first.

This suffers from the same problem.

> Another option I was thinking of to enforce more a delay was to see if I
> could chain together two queues using dead-letter-exchange settings:
>
> Queue A, no TTL, DLX=Exchange B (with Queue B bound to it).
> Queue B, ttl of (x) seconds, DLX= Exchange A (with Queue A bound to it).
>
> When we NAck the mesage from Queue A, we set requeue=false.
>
> I've not seen much discussion so far on whether it's sane to hook up two
> queues/exchanges in a loop like this.

Yep, that makes perfect sense and should work well.

Matthias.

From tom.anderson at timgroup.com  Fri Jul 26 16:49:22 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Fri, 26 Jul 2013 16:49:22 +0100
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <51F27730.3030203@rabbitmq.com>
References: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>
	<51F27730.3030203@rabbitmq.com>
Message-ID: <51F29A82.8040302@timgroup.com>

On 26/07/13 14:18, Matthias Radestock wrote:
> On 26/07/13 13:25, Will Hughes wrote:
>
>> Another option I was thinking of to enforce more a delay was to see if I
>> could chain together two queues using dead-letter-exchange settings:
>>
>> Queue A, no TTL, DLX=Exchange B (with Queue B bound to it).
>> Queue B, ttl of (x) seconds, DLX= Exchange A (with Queue A bound to it).
>>
>> When we NAck the mesage from Queue A, we set requeue=false.
>>
>> I've not seen much discussion so far on whether it's sane to hook up two
>> queues/exchanges in a loop like this.
>
> Yep, that makes perfect sense and should work well.

Implemented exactly as described there, it yields an infinite loop for 
unprocessable messages. You might therefore also want to keep a count of 
the number of processing attempts in a header on the message, and more 
thoroughly reject messages which reach some maximum number of attempts. 
I think you could do the final rejection by setting a routing key on the 
message when you reject it for the last time, and having exchange B be a 
direct exchange which routes to either queue B or some final deadletter 
queue.

If you want exponential backoff in the retries, then life gets more 
complicated (multiple timeout queues, selected between by a routing key 
set by the consumer of A?). We are currently pussyfooting around this 
issue at my company. I will report back here if we ever implement a good 
solution!

tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/d8ddf1c3/attachment.htm>

From ceri at lshift.net  Fri Jul 26 17:07:03 2013
From: ceri at lshift.net (Ceri Storey)
Date: Fri, 26 Jul 2013 17:07:03 +0100
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <51F29A82.8040302@timgroup.com>
References: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>
	<51F27730.3030203@rabbitmq.com> <51F29A82.8040302@timgroup.com>
Message-ID: <51F29EA7.20807@lshift.net>

(26/07/13 16:49), Tom Anderson wrote:
> Implemented exactly as described there, it yields an infinite loop for
> unprocessable messages. You might therefore also want to keep a count
> of the number of processing attempts in a header on the message, and
> more thoroughly reject messages which reach some maximum number of
> attempts. I think you could do the final rejection by setting a
> routing key on the message when you reject it for the last time, and
> having exchange B be a direct exchange which routes to either queue B
> or some final deadletter queue.
>
> If you want exponential backoff in the retries, then life gets more
> complicated (multiple timeout queues, selected between by a routing
> key set by the consumer of A?). We are currently pussyfooting around
> this issue at my company. I will report back here if we ever implement
> a good solution!

I've just written some code to do exactly this; limited retries with
exponential backoff. That said, we're kind of cheating in that we store
the retry state in a secondary datastore and buffer messages in the client.

So whenever we receive a message, we:

  * When we post each message, we assign it a unique message_id
  * Lookup message's due time by it's message_id property in our datastore
  * Stash the message in a heap queue
  * When the message becomes due, remove it from the heap queue and pass
    it to the client code.
  * If the client code succeeds, then we finally ack the message.
    Otherwise, we reject the message.

Whilst you can scale this horizontally, you will need enough buffer
space to hold a reasonable proportion of your queue, although/what/
proportion depends on how much you care about timeliness. Also, you are
effectively implementing a secondary queue in your application
(retaining rabbit for it's reliability properties), which seems less
than ideal.


>
> tom
>
> -- 
>
> Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com
> <http://timgroup.com/>
>
> STATEMENT OF CONFIDENTIALITY: The information contained in this
> electronic message and any attachments to this message are intended
> for the exclusive use of the addressee(s) and may contain confidential
> or privileged information. If you are not the intended recipient,
> please notify Tom Anderson at TIM Group at tom.anderson at timgroup.com
> and destroy all copies of this message and any attachments.
>
> TIM Group is the trading name for YouDevise Limited. YouDevise Limited
> is registered in England, No. 3331176. Registered office: 3 Copthall
> Avenue, London, EC2R 7BH.
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/4544b7ae/attachment.htm>

From casey.marshall at gazzang.com  Fri Jul 26 17:45:49 2013
From: casey.marshall at gazzang.com (Casey Marshall)
Date: Fri, 26 Jul 2013 11:45:49 -0500
Subject: [rabbitmq-discuss] RabbitMQ hanging during 'rabbitmqctl stop' -
 please help
In-Reply-To: <51F24FC8.8000807@rabbitmq.com>
References: <51EE959D.1040200@gazzang.com> <51F24FC8.8000807@rabbitmq.com>
Message-ID: <51F2A7BD.1040808@gazzang.com>

On 07/26/2013 05:30 AM, Simon MacMullen wrote:
> On 23/07/2013 3:39PM, Casey Marshall wrote:
>> I was able to automate creation and distribution of certificates among
>> the servers, and the setup works fine in a local KVM-virtualized
>> environment. However, when I started testing it in EC2 across regions, I
>> started having problems. RabbitMQ hangs on some of the servers in EC2
>> during 'service rabbitmq-server restart'.
> 
> We're aware of a bug that could cause deadlocks on shutdown. We've
> thought of it as something that people are quite unlikely to run into
> though, so I'm surprised you're seeing it so frequently.
> 

It's helpful to know that this might be a known deadlock I'm dealing with.

>> I have scripts to automate updating the federated exchanges, to effect
>> topology changes on the "federated group" -- adding or removing a
>> server, or changing its role (different roles have different exchange
>> upstreams). After this script updates the federation config, the
>> subsequent restart hangs on some of the servers.
> 
> However, it doesn't have anything to do with reconfiguring federation.
> 
> Are you restarting the server immediately after reconfiguring
> federation, or some time later?
> 

I'm restarting the server immediately after, on each federated node, in
parallel with Ansible.

I have more information from recent trial-and-error attempts at a
workaround. The shutdown hang happens fairly consistently under the
following conditions:

1. Federated connection URIs are amqps://. If I use unsecured amqp:// no
shutdown hang.
2. Number of servers > 2
3. In EC2, especially across different geographic regions. If I set up a
three-server demo among local KVM-virtual machines, I haven't seen a
shutdown hang.

I suspect something about the other servers' upstream exchange
connection attempts, *during* the restart of a server, might have
something to do with it.

Is there a workaround I might try to avoid the deadlock? For example,
maybe a rabbitmqctl command to close & prevent new federated connections
while all the servers are reconfiguring? I don't necessarily think its a
federation issue, maybe just the concurrent client connections getting
to the wrong place at the wrong time?

> Cheers, Simon
> 

Thanks!
Casey

From tom.anderson at timgroup.com  Fri Jul 26 18:03:22 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Fri, 26 Jul 2013 18:03:22 +0100
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <51F29EA7.20807@lshift.net>
References: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>	<51F27730.3030203@rabbitmq.com>
	<51F29A82.8040302@timgroup.com> <51F29EA7.20807@lshift.net>
Message-ID: <51F2ABDA.9020709@timgroup.com>

On 26/07/13 17:07, Ceri Storey wrote:
> (26/07/13 16:49), Tom Anderson wrote:
>> Implemented exactly as described there, it yields an infinite loop 
>> for unprocessable messages. You might therefore also want to keep a 
>> count of the number of processing attempts in a header on the 
>> message, and more thoroughly reject messages which reach some maximum 
>> number of attempts. I think you could do the final rejection by 
>> setting a routing key on the message when you reject it for the last 
>> time, and having exchange B be a direct exchange which routes to 
>> either queue B or some final deadletter queue.
>>
>> If you want exponential backoff in the retries, then life gets more 
>> complicated (multiple timeout queues, selected between by a routing 
>> key set by the consumer of A?). We are currently pussyfooting around 
>> this issue at my company. I will report back here if we ever 
>> implement a good solution!
>
> I've just written some code to do exactly this; limited retries with 
> exponential backoff. That said, we're kind of cheating in that we 
> store the retry state in a secondary datastore and buffer messages in 
> the client.
>
> So whenever we receive a message, we:
>
>   * When we post each message, we assign it a unique message_id
>   * Lookup message's due time by it's message_id property in our datastore
>   * Stash the message in a heap queue
>   * When the message becomes due, remove it from the heap queue and
>     pass it to the client code.
>   * If the client code succeeds, then we finally ack the message.
>     Otherwise, we reject the message.
>

I'm currently writing almost exactly the same thing! The difference 
being that i'm putting the due time in a header on the message rather 
than in a lookaside store, and that my component moves messages from a 
queue to an exchange, rather than from a queue to client code directly.

> Whilst you can scale this horizontally, you will need enough buffer 
> space to hold a reasonable proportion of your queue, although/what/ 
> proportion depends on how much you care about timeliness.
>

I'm not sure i understand. Don't you need to have enough space to hold 
all the messages that could be delayed at any given time? In our case, 
that happens to not be all that large, fortunately.

> Also, you are effectively implementing a secondary queue in your 
> application (retaining rabbit for it's reliability properties), which 
> seems less than ideal.
>

Yes. We did kick around the idea of writing a custom exchange to do 
this, but that sounded really scary.

tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/dd99613a/attachment.htm>

From ben.whetter at gmail.com  Fri Jul 26 16:19:12 2013
From: ben.whetter at gmail.com (Ben whetter)
Date: Fri, 26 Jul 2013 08:19:12 -0700 (PDT)
Subject: [rabbitmq-discuss] Starting rabbitmq-server: FAILED
Message-ID: <b8ead7de-5eae-4720-b8e3-693565a9d696@googlegroups.com>

Hi,

I am trying to install some software called Zenoss, It has a script that 
downloads and installs the various components, one of which 
is rabbitmq-server-2.8.7-1.noarch. The system I am installing on is CentOS 
6.4. When it gets to the rabbitmq install, I get the following error:

*Starting rabbitmq-server: FAILED - check /var/log/rabbitmq/startup_{log, 
_err}*

*rabbitmq-server.*

*Command failure: /sbin/service rabbitmq-server start*


So I check startup_log:

 

*Activating RabbitMQ plugins ...*

*0 plugins activated:*

* *

*node with name "rabbit" already running on "Zenoss"*

* *

*DIAGNOSTICS*

*===========*

* *

*nodes in question: [rabbit at Zenoss]*

* *

*hosts, their running nodes and ports:*

*- Zenoss: [{rabbit,39375}]*

* *

*current node details:*

*- node name: rabbitmqprelaunch2670 at Zenoss*

*- home dir: /var/lib/rabbitmq*

*- cookie hash: H7PbyCCnYO6ukRaujpJUPA==*

 

startup_err has no info.


Does anyone have an idea why this might be happening?


Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/1de43ecf/attachment.htm>

From mklishin at gopivotal.com  Fri Jul 26 18:21:47 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Fri, 26 Jul 2013 21:21:47 +0400
Subject: [rabbitmq-discuss] Starting rabbitmq-server: FAILED
In-Reply-To: <b8ead7de-5eae-4720-b8e3-693565a9d696@googlegroups.com>
References: <b8ead7de-5eae-4720-b8e3-693565a9d696@googlegroups.com>
Message-ID: <79B50E01-5CAB-4A18-904D-3BE4A49FAD17@gopivotal.com>

Ben whetter:

> Does anyone have an idea why this might be happening?

Another instance of RabbitMQ (judging from node name,
started by zenoss) is already running.

It may be an issue with the package. Is there a way to take a look
at the package source?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/53494b87/attachment.pgp>

From simon at rabbitmq.com  Fri Jul 26 18:21:51 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Fri, 26 Jul 2013 18:21:51 +0100
Subject: [rabbitmq-discuss] Starting rabbitmq-server: FAILED
In-Reply-To: <b8ead7de-5eae-4720-b8e3-693565a9d696@googlegroups.com>
References: <b8ead7de-5eae-4720-b8e3-693565a9d696@googlegroups.com>
Message-ID: <51F2B02F.2010209@rabbitmq.com>

On 26/07/2013 4:19PM, Ben whetter wrote:
> I am trying to install some software called Zenoss, It has a script that
> downloads and installs the various components, one of which
> is rabbitmq-server-2.8.7-1.noarch. The system I am installing on is
> CentOS 6.4. When it gets to the rabbitmq install, I get the following error:

<snip>

> node with name "rabbit" already running on "Zenoss"

Looks like the install script tries to start the RabbitMQ server without 
checking if it's running already...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From tom.anderson at timgroup.com  Fri Jul 26 18:29:29 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Fri, 26 Jul 2013 18:29:29 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
Message-ID: <51F2B1F9.1020805@timgroup.com>

Hi,

If i enable confirms [1], then:

"The broker will confirm messages once:

* it decides a message will not be routed to queues (if the mandatory 
flag is set then the basic.return is sent first) or
* a transient message has reached all its queues (and mirrors) or
* a persistent message has reached all its queues (and mirrors) and been 
persisted to disk (and fsynced) or
* a persistent message has been consumed (and if necessary acknowledged) 
from all its queues"

So, if i send a persistent message (delivery mode = 2) to a non-durable 
exchange which routes to a non-durable queue, then i will only get a 
confirmation once the message has been consumed from that queue, right? 
And if my consumer is not set to auto-acknowledge, then i will only get 
a confirmation once the consumer has acknowledged the message, right?

This does not seem to be happening for me. I get a confirmation 12 
milliseconds after sending the message, but i know the acknowledgement 
isn't being sent for another whole second. I can't tell if the 
confirmation is being sent when the broker receives the message, gives 
it to an exchange, puts it in a queue, or delivers it to a consumer, 
since all those things happen in very rapid succession.

Any ideas as to what i should look into?

I'm using the Java API, if that matters.

Cheers,
tom

[1] http://www.rabbitmq.com/confirms.html

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/46e4aeda/attachment.htm>

From k.madnani84 at gmail.com  Fri Jul 26 18:30:11 2013
From: k.madnani84 at gmail.com (k.madnani84)
Date: Fri, 26 Jul 2013 10:30:11 -0700 (PDT)
Subject: [rabbitmq-discuss] Getting an error while running rabbitmqctl after
 upgrading rabbitMQ to latest version 3.1.3.
Message-ID: <1374859811650-28430.post@n5.nabble.com>

Hi,

I have updated my RabbitMq from 3.0.1 to 3.1.3.

Whenever i run rabbitMQCtl i get an error as:
rabbitmqctl: line 29: exec: erl: not found

I see that in rabbitmqctl script a new variable ERL_DIR & CLEAN_BOOT_FILE
are been introduced as compared to that in the previous version of
rabbitmq(3.0.1).I dont get this error when i used the previous version and
neither do i set any variable.

Could you let me know that do we need to set these variables before
executing rabbitmqctl,if yes then they should be set to what ?

New Rabbitmqctl:

exec ${ERL_DIR}erl \
    -pa "${RABBITMQ_HOME}/ebin" \
    -noinput \
    -hidden \
    ${RABBITMQ_CTL_ERL_ARGS} \
    -sname rabbitmqctl$$ \
    -boot "${CLEAN_BOOT_FILE}" \
    -s rabbit_control_main \
    -nodename $RABBITMQ_NODENAME \
    -extra "$@"

Old Rabbitmqctl:

exec erl \
    -pa "${RABBITMQ_HOME}/ebin" \
    -noinput \
    -hidden \
    ${RABBITMQ_CTL_ERL_ARGS} \
    -sname rabbitmqctl$$ \
    -s rabbit_control_main \
    -nodename $RABBITMQ_NODENAME \
    -extra "$@"




--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Getting-an-error-while-running-rabbitmqctl-after-upgrading-rabbitMQ-to-latest-version-3-1-3-tp28430.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From ceri at lshift.net  Fri Jul 26 18:32:21 2013
From: ceri at lshift.net (Ceri Storey)
Date: Fri, 26 Jul 2013 18:32:21 +0100
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <51F2ABDA.9020709@timgroup.com>
References: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>	<51F27730.3030203@rabbitmq.com>
	<51F29A82.8040302@timgroup.com> <51F29EA7.20807@lshift.net>
	<51F2ABDA.9020709@timgroup.com>
Message-ID: <51F2B2A5.3090909@lshift.net>

(26/07/13 18:03), Tom Anderson wrote:
> On 26/07/13 17:07, Ceri Storey wrote:
>> (26/07/13 16:49), Tom Anderson wrote:
>>> Implemented exactly as described there, it yields an infinite loop
>>> for unprocessable messages. You might therefore also want to keep a
>>> count of the number of processing attempts in a header on the
>>> message, and more thoroughly reject messages which reach some
>>> maximum number of attempts. I think you could do the final rejection
>>> by setting a routing key on the message when you reject it for the
>>> last time, and having exchange B be a direct exchange which routes
>>> to either queue B or some final deadletter queue.
>>>
>>> If you want exponential backoff in the retries, then life gets more
>>> complicated (multiple timeout queues, selected between by a routing
>>> key set by the consumer of A?). We are currently pussyfooting around
>>> this issue at my company. I will report back here if we ever
>>> implement a good solution!
>>
>> I've just written some code to do exactly this; limited retries with
>> exponential backoff. That said, we're kind of cheating in that we
>> store the retry state in a secondary datastore and buffer messages in
>> the client.
>>
>> So whenever we receive a message, we:
>>
>>   * When we post each message, we assign it a unique message_id
>>   * Lookup message's due time by it's message_id property in our
>>     datastore
>>   * Stash the message in a heap queue
>>   * When the message becomes due, remove it from the heap queue and
>>     pass it to the client code.
>>   * If the client code succeeds, then we finally ack the message.
>>     Otherwise, we reject the message.
>>
>
> I'm currently writing almost exactly the same thing! The difference
> being that i'm putting the due time in a header on the message rather
> than in a lookaside store, and that my component moves messages from a
> queue to an exchange, rather than from a queue to client code directly.
>
>> Whilst you can scale this horizontally, you will need enough buffer
>> space to hold a reasonable proportion of your queue, although/what/
>> proportion depends on how much you care about timeliness.
>>
>
> I'm not sure i understand. Don't you need to have enough space to hold
> all the messages that could be delayed at any given time? In our case,
> that happens to not be all that large, fortunately.
I've set the prefetch buffer set to a conservative number of messages;
mostly to avoid accidentally causing a denial of service of my own
application. To be clear, this will mean that we don't see some messages
until after they become due, but that's okay in our case.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/4c6f8eb7/attachment.htm>

From matthias at rabbitmq.com  Fri Jul 26 23:32:59 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Fri, 26 Jul 2013 23:32:59 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F2B1F9.1020805@timgroup.com>
References: <51F2B1F9.1020805@timgroup.com>
Message-ID: <51F2F91B.8080506@rabbitmq.com>

Tom,

On 26/07/13 18:29, Tom Anderson wrote:
> "The broker will confirm messages once:
> [...]
> * a transient message has reached all its queues
> [...]
> So, if i send a persistent message (delivery mode = 2) to a non-durable
> exchange which routes to a non-durable queue, then i will only get a
> confirmation once the message has been consumed from that queue, right?

Wrong. The behaviour is described in the snippet you quoted above, i.e. 
the message gets confirmed once it has reached all the queues it was 
routed to.

Matthias.

From joshua__lim at hotmail.com  Fri Jul 26 23:47:40 2013
From: joshua__lim at hotmail.com (joshua__lim)
Date: Fri, 26 Jul 2013 15:47:40 -0700 (PDT)
Subject: [rabbitmq-discuss] Maximum achievable concurrent Web STOMP plugin
	on Windows
Message-ID: <1374878860315-28434.post@n5.nabble.com>

Hi, I'm looking at creating a push message service using Rabbitmq Web STOMP
plugin + JS client for up to 10,000 concurrently connected clients.

I would like to find out if this can be achieved using 1 Windows server? 
I've tried looking for a way to test JS client concurrency for Web STOMP
plugin but to no avail.  

There appears to be limited concurrency test options for JS.  The rabbitmq
load tests reports for direct STOMP that I managed to find on the web are
related to throughput rather than high concurrency which is understandable
since the number of consumers and producers are usually not expected to be
considerable in a system to system setup.

I would appreciate any help. Thank you. :)



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Maximum-achievable-concurrent-Web-STOMP-plugin-on-Windows-tp28434.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From z.al-siyabi-12 at student.lboro.ac.uk  Fri Jul 26 23:55:08 2013
From: z.al-siyabi-12 at student.lboro.ac.uk (Zahra Al-Siyabi)
Date: Sat, 27 Jul 2013 02:55:08 +0400
Subject: [rabbitmq-discuss] hello
Message-ID: <CACTMv0k=iEYT83Bis3++_OEJ_S3j-cY63HCO_uJO56e14LYNPQ@mail.gmail.com>

Dear Sir/Madam



I have some question around using of rabbit mq to check services status



1.       How maximum number of (hosts + services) rabbitmq can monitor? And
why?



2.       If rabbitmq can check big number of host and services, the nagios
performance will be affected or not?



Thanks and regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130727/cacafab0/attachment.htm>

From will at hughesfamily.net.au  Sat Jul 27 03:56:54 2013
From: will at hughesfamily.net.au (William Hughes)
Date: Sat, 27 Jul 2013 12:56:54 +1000
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <51F2B2A5.3090909@lshift.net>
References: <7eb0960b-7594-488b-aa50-c49badb79b42@googlegroups.com>
	<51F27730.3030203@rabbitmq.com> <51F29A82.8040302@timgroup.com>
	<51F29EA7.20807@lshift.net> <51F2ABDA.9020709@timgroup.com>
	<51F2B2A5.3090909@lshift.net>
Message-ID: <CAB6=gLLgkb_62-z+3CFPpy0fFfHsyy0aOCcbc_xdg0dqC3L5Pw@mail.gmail.com>

On Fri, Jul 26, 2013 at 11:18 PM, Matthias Radestock <matthias at rabbitmq.com>
 wrote:
>
> Queue A, no TTL, DLX=Exchange B (with Queue B bound to it).
>> Queue B, ttl of (x) seconds, DLX= Exchange A (with Queue A bound to it).
>>
>> When we NAck the mesage from Queue A, we set requeue=false.
>>
>
> Yep, that makes perfect sense and should work well.
>


I'll give the using-deadletter-exchange with NAck approach a go.



On Sat, Jul 27, 2013 at 1:49 AM, Tom Anderson <tom.anderson at timgroup.com>
 wrote:

>
> Implemented exactly as described there, it yields an infinite loop for
> unprocessable messages. You might therefore also want to keep a count of
> the number of processing attempts in a header on the message, and more
> thoroughly reject messages which reach some maximum number of attempts. I
> think you could do the final rejection by setting a routing key on the
> message when you reject it for the last time, and having exchange B be a
> direct exchange which routes to either queue B or some final deadletter
> queue.
>


Yep, we've got other ways to deal with permanent failures/poison messages.
This is purely to deal with transient problems where we might need to try
several times.


Thanks for the feedback and discussion everyone.
Cheers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130727/41e23eac/attachment.htm>

From francois at teksol.info  Sat Jul 27 04:57:50 2013
From: francois at teksol.info (=?iso-8859-1?Q?Fran=E7ois_Beausoleil?=)
Date: Fri, 26 Jul 2013 23:57:50 -0400
Subject: [rabbitmq-discuss] hello
In-Reply-To: <CACTMv0k=iEYT83Bis3++_OEJ_S3j-cY63HCO_uJO56e14LYNPQ@mail.gmail.com>
References: <CACTMv0k=iEYT83Bis3++_OEJ_S3j-cY63HCO_uJO56e14LYNPQ@mail.gmail.com>
Message-ID: <1131C603-8EC9-4580-8CBD-A70691139958@teksol.info>

Hi,

You are confusing Nagios and RabbitMQ, perhaps? RabbitMQ is a message queue server. It is used to transport data between applications across processes. Nagios is a tool to monitor machines and services. RabbitMQ can't "check" anything by itself. You can use Nagios to monitor a single instance of RabbitMQ, or a cluster of RabbitMQ instances.

Hope that helps,
Fran?ois Beausoleil

Le 2013-07-26 ? 18:55, Zahra Al-Siyabi a ?crit :

> Dear Sir/Madam
> 
>  
> I have some question around using of rabbit mq to check services status
> 
>  
> 1.       How maximum number of (hosts + services) rabbitmq can monitor? And why?
> 
>  
> 2.       If rabbitmq can check big number of host and services, the nagios performance will be affected or not?
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/1b3d7714/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4142 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130726/1b3d7714/attachment.bin>

From francois at teksol.info  Sat Jul 27 14:11:44 2013
From: francois at teksol.info (=?iso-8859-1?Q?Fran=E7ois_Beausoleil?=)
Date: Sat, 27 Jul 2013 09:11:44 -0400
Subject: [rabbitmq-discuss] hello
In-Reply-To: <CACTMv0k=iEYT83Bis3++_OEJ_S3j-cY63HCO_uJO56e14LYNPQ@mail.gmail.com>
References: <CACTMv0k=iEYT83Bis3++_OEJ_S3j-cY63HCO_uJO56e14LYNPQ@mail.gmail.com>
Message-ID: <2A8D50FF-A5B6-4156-9181-0C174AD069C0@teksol.info>

Hi,

You are confusing Nagios and RabbitMQ, perhaps? RabbitMQ is a message queue server. It is used to transport data between applications across processes. Nagios is a tool to monitor machines and services. RabbitMQ can't "check" anything by itself. You can use Nagios to monitor a single instance of RabbitMQ, or a cluster of RabbitMQ instances.

Hope that helps,
Fran?ois Beausoleil

Le 2013-07-26 ? 18:55, Zahra Al-Siyabi a ?crit :

> Dear Sir/Madam
> 
>  
> I have some question around using of rabbit mq to check services status
> 
>  
> 1.       How maximum number of (hosts + services) rabbitmq can monitor? And why?
> 
>  
> 2.       If rabbitmq can check big number of host and services, the nagios performance will be affected or not?
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130727/6fd8c112/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4142 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130727/6fd8c112/attachment.bin>

From z.al-siyabi-12 at student.lboro.ac.uk  Sat Jul 27 14:58:58 2013
From: z.al-siyabi-12 at student.lboro.ac.uk (Zahra Al-Siyabi)
Date: Sat, 27 Jul 2013 14:58:58 +0100
Subject: [rabbitmq-discuss] hello
In-Reply-To: <2A8D50FF-A5B6-4156-9181-0C174AD069C0@teksol.info>
References: <CACTMv0k=iEYT83Bis3++_OEJ_S3j-cY63HCO_uJO56e14LYNPQ@mail.gmail.com>
	<2A8D50FF-A5B6-4156-9181-0C174AD069C0@teksol.info>
Message-ID: <CACTMv0n=Cbo1GPGf8a6SGeuF+s7P3aJrKMcjP4iOCkJur4g7HA@mail.gmail.com>

thanks a lot Francois


On 27 July 2013 14:11, Fran?ois Beausoleil <francois at teksol.info> wrote:

> Hi,
>
> You are confusing Nagios and RabbitMQ, perhaps? RabbitMQ is a message
> queue server. It is used to transport data between applications across
> processes. Nagios is a tool to monitor machines and services. RabbitMQ
> can't "check" anything by itself. You can use Nagios to monitor a single
> instance of RabbitMQ, or a cluster of RabbitMQ instances.
>
> Hope that helps,
> Fran?ois Beausoleil
>
> Le 2013-07-26 ? 18:55, Zahra Al-Siyabi a ?crit :
>
> Dear Sir/Madam
>
>
> I have some question around using of rabbit mq to check services status
>
>
> 1.       How maximum number of (hosts + services) rabbitmq can monitor?
> And why?
>
>
> 2.       If rabbitmq can check big number of host and services, the
> nagios performance will be affected or not?
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130727/74ef85e7/attachment.htm>

From Stefan.Kaes at xing.com  Sun Jul 28 15:45:43 2013
From: Stefan.Kaes at xing.com (Stefan Kaes)
Date: Sun, 28 Jul 2013 14:45:43 +0000
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <CAB6=gLLgkb_62-z+3CFPpy0fFfHsyy0aOCcbc_xdg0dqC3L5Pw@mail.gmail.com>
Message-ID: <CE1AE6EF.1D51D%stefan.kaes@xing.com>

Hi,

I tried this, with a slight modification:

Instead of having a dedicated second exchange, I use the default exchange and set the routing key to the name of the queue I want it routed to.

Queue A, no TTL, x-dead-letter-exchange='', x-dead-letter-routing-key='B'
Queue B, ttl of (x) seconds, x-dead-letter-exchange='', x-dead-letter-routing-key='A'

Works like a charm.

However, there's a problem, which I think will prevent us from using this approach:

The size of the x-death header attached to the message grows linearly with the number of dead lettering events.

This is bad for performance, and in the worst case could crash rabbitmq with an out of memory error, if for some reason a message gets rejected a high number of times (or indefinitely).

It would be great if the x-death header could be limited to have only a bounded number entries, say the last 10 events.

Plus maybe the total number of redirects.

Cheers,

Stefan Kaes



On Fri, Jul 26, 2013 at 11:18 PM, Matthias Radestock <matthias at rabbitmq.com<mailto:matthias at rabbitmq.com>> wrote:
Queue A, no TTL, DLX=Exchange B (with Queue B bound to it).
Queue B, ttl of (x) seconds, DLX= Exchange A (with Queue A bound to it).

When we NAck the mesage from Queue A, we set requeue=false.

Yep, that makes perfect sense and should work well.


I'll give the using-deadletter-exchange with NAck approach a go.



On Sat, Jul 27, 2013 at 1:49 AM, Tom Anderson <tom.anderson at timgroup.com<mailto:tom.anderson at timgroup.com>> wrote:

Implemented exactly as described there, it yields an infinite loop for unprocessable messages. You might therefore also want to keep a count of the number of processing attempts in a header on the message, and more thoroughly reject messages which reach some maximum number of attempts. I think you could do the final rejection by setting a routing key on the message when you reject it for the last time, and having exchange B be a direct exchange which routes to either queue B or some final deadletter queue.


Yep, we've got other ways to deal with permanent failures/poison messages.
This is purely to deal with transient problems where we might need to try several times.


Thanks for the feedback and discussion everyone.
Cheers

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130728/00d695ef/attachment.htm>

From matthias at rabbitmq.com  Sun Jul 28 16:09:51 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Sun, 28 Jul 2013 16:09:51 +0100
Subject: [rabbitmq-discuss] Push to back of Queue on NAck
In-Reply-To: <CE1AE6EF.1D51D%stefan.kaes@xing.com>
References: <CE1AE6EF.1D51D%stefan.kaes@xing.com>
Message-ID: <51F5343F.9020402@rabbitmq.com>

Stefan,

On 28/07/13 15:45, Stefan Kaes wrote:
> The size of the x-death header attached to the message grows linearly
> with the number of dead lettering events.
>
> This is bad for performance, and in the worst case could crash rabbitmq
> with an out of memory error, if for some reason a message gets rejected
> a high number of times (or indefinitely).

Surely the TTL-induced delay will be high enough for this not to be a 
problem in practice. After all, the x-death header only takes up a few 
tens of bytes per entry.

Furthermore, surely you wouldn't want a message to get rejected 
indefinitely. At some point the app presumably will have to give up and 
either throw away the message or route it somewhere for manual 
intervention. The app can make that decision based on the length of the 
x-death header.

Matthias.

From kalinchih at gmail.com  Sun Jul 28 19:16:07 2013
From: kalinchih at gmail.com (Kalin Chih)
Date: Sun, 28 Jul 2013 11:16:07 -0700 (PDT)
Subject: [rabbitmq-discuss] cluster & HA (not Mirrored Queue Behaviour)
Message-ID: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>

Hello,

I'm new to RabbitMQ and have 2 questions about the cluster and HA.

My RabbitMQ cluster contains 5 nodes without "Mirrored Queue Behaviour".
- rabbit at rabbitmq1 => Disc Stats
- rabbit at rabbitmq2 => Disc 
- rabbit at rabbitmq3 => RAM
- rabbit at rabbitmq4 => RAM
- rabbit at rabbitmq5 => RAM

My queue, "rabbit_test" is on node rabbit at rabbitmq1.


Question 1: Is any possible to automatically re-create the queue 
"rabbit_test" on the other disc node (rabbit at rabbitmq2) when the 
rabbit at rabbitmq1 is crash?

Question 2: What is the best practice for cluster  without "Mirrored Queue 
Behaviour"?


many thanks,
Kalin





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130728/4cf711e2/attachment.htm>

From michael.s.klishin at gmail.com  Sun Jul 28 22:05:01 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Mon, 29 Jul 2013 01:05:01 +0400
Subject: [rabbitmq-discuss] cluster & HA (not Mirrored Queue Behaviour)
In-Reply-To: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>
References: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>
Message-ID: <CAE3HoVT7MUjdRzjkjkLnmREUHcn5HJ5gDHqycazE_y=19-Xv-g@mail.gmail.com>

2013/7/28 Kalin Chih <kalinchih at gmail.com>

> Question 1: Is any possible to automatically re-create the queue
> "rabbit_test" on the other disc node (rabbit at rabbitmq2) when the
> rabbit at rabbitmq1 is crash?
>

Queue metadata (e.g. name, durability, other properties) will be available
on other nodes automatically.


>
> Question 2: What is the best practice for cluster  without "Mirrored Queue
> Behaviour"?
>

It depends on what your goals and needs are. What problem are you trying to
solve with clustering?
Why mirroring queue contents is not a good idea in your case?
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/40dd1009/attachment.htm>

From michael.s.klishin at gmail.com  Mon Jul 29 07:35:27 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Mon, 29 Jul 2013 10:35:27 +0400
Subject: [rabbitmq-discuss] ANN Langohr 1.0 (final) is released
Message-ID: <CAE3HoVRRSB3s16TROv2bLLvnoOHg4NgFDNLGsYkdtpFdsp9gsg@mail.gmail.com>

Langohr [1] is a small, easy to use Clojure client for RabbitMQ.

1.0.1 is a long overdue 1.0 release of the library that has been 2 years
in the making and is one of the most popular ClojureWerkz projects.

Release notes and some notes about future plans:
http://blog.clojurewerkz.org/blog/2013/07/29/langohr-1-dot-0-1-is-released/

1. http://clojurerabbitmq.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/d55548a6/attachment.htm>

From mklishin at gopivotal.com  Mon Jul 29 08:47:50 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 29 Jul 2013 11:47:50 +0400
Subject: [rabbitmq-discuss] ANN Bunny 0.9.8 is released
Message-ID: <1388B57A-8EAA-491D-9B32-BB97AACD801E@gopivotal.com>

Bunny 0.9.8 is released to rubygems.org [1].

This is a small usability improvement release.

Release notes:
http://blog.rubyrabbitmq.info/blog/2013/07/29/bunny-0-dot-9-8-is-released/

If you are new to Bunny, see http://rubybunny.info.

1. https://rubygems.org/gems/bunny/versions/0.9.8
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/ced1c6de/attachment.pgp>

From emile at rabbitmq.com  Mon Jul 29 09:38:15 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 29 Jul 2013 09:38:15 +0100
Subject: [rabbitmq-discuss] Getting an error while running rabbitmqctl
 after upgrading rabbitMQ to latest version 3.1.3.
In-Reply-To: <1374859811650-28430.post@n5.nabble.com>
References: <1374859811650-28430.post@n5.nabble.com>
Message-ID: <51F629F7.1080003@rabbitmq.com>

On 26/07/13 18:30, k.madnani84 wrote:
> Whenever i run rabbitMQCtl i get an error as:
> rabbitmqctl: line 29: exec: erl: not found

Make sure the "erl" executable is on the system $PATH.

> I see that in rabbitmqctl script a new variable ERL_DIR & CLEAN_BOOT_FILE
> are been introduced as compared to that in the previous version of
> rabbitmq(3.0.1).I dont get this error when i used the previous version and
> neither do i set any variable.
> 
> Could you let me know that do we need to set these variables before
> executing rabbitmqctl,if yes then they should be set to what ?

You shouldn't need to set these variables for an upgrade. If Erlang was
on the system $PATH then the change should make no difference, since
$ERL_DIR is empty by default.



-Emile






From tom.anderson at timgroup.com  Mon Jul 29 13:30:43 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Mon, 29 Jul 2013 13:30:43 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F2F91B.8080506@rabbitmq.com>
References: <51F2B1F9.1020805@timgroup.com> <51F2F91B.8080506@rabbitmq.com>
Message-ID: <51F66073.6020603@timgroup.com>

On 26/07/13 23:32, Matthias Radestock wrote:
> Tom,
>
> On 26/07/13 18:29, Tom Anderson wrote:
>> "The broker will confirm messages once:
>> [...]
>> * a transient message has reached all its queues
>> [...]
>> So, if i send a persistent message (delivery mode = 2) to a non-durable
>> exchange which routes to a non-durable queue, then i will only get a
>> confirmation once the message has been consumed from that queue, right?
>
> Wrong. The behaviour is described in the snippet you quoted above, 
> i.e. the message gets confirmed once it has reached all the queues it 
> was routed to.

Okay. Just to clarify: the bit of the snippet i quoted that you quoted 
says "a transient message". I understood that as specifically referring 
to transient messages, not persistent ones, ie those sent with delivery 
mode 1 rather than 2. I was asking about persistent messages. Are you 
telling me that the behaviour for persistent messages is actually the 
same as that specified for transient messages?

Thanks,
tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/5e0c26c2/attachment.htm>

From matthias at rabbitmq.com  Mon Jul 29 13:40:06 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 29 Jul 2013 13:40:06 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F66073.6020603@timgroup.com>
References: <51F2B1F9.1020805@timgroup.com> <51F2F91B.8080506@rabbitmq.com>
	<51F66073.6020603@timgroup.com>
Message-ID: <51F662A6.3060006@rabbitmq.com>

Tom,

On 29/07/13 13:30, Tom Anderson wrote:
> On 26/07/13 23:32, Matthias Radestock wrote:
>> On 26/07/13 18:29, Tom Anderson wrote:
>>> "The broker will confirm messages once:
>>> [...]
>>> * a transient message has reached all its queues
>>> [...]
>>> So, if i send a persistent message (delivery mode = 2) to a non-durable
>>> exchange which routes to a non-durable queue, then i will only get a
>>> confirmation once the message has been consumed from that queue, right?
>>
>> Wrong. The behaviour is described in the snippet you quoted above,
>> i.e. the message gets confirmed once it has reached all the queues it
>> was routed to.
>
> Okay. Just to clarify: the bit of the snippet i quoted that you quoted
> says "a transient message". I understood that as specifically referring
> to transient messages, not persistent ones, ie those sent with delivery
> mode 1 rather than 2. I was asking about persistent messages. Are you
> telling me that the behaviour for persistent messages is actually the
> same as that specified for transient messages?

Messages persistence requires the combination of
1) delivery_mode = 2
2) routing to a durable queue

Condition #2 is not met in your case, so the message is not persisted, 
i.e. it is treated as a transient message.

Matthias.

From Petr.Gotthard at Honeywell.com  Mon Jul 29 13:47:57 2013
From: Petr.Gotthard at Honeywell.com (Gotthard, Petr)
Date: Mon, 29 Jul 2013 12:47:57 +0000
Subject: [rabbitmq-discuss] Access Control for Dead Letter Exchanges?
Message-ID: <F9E85480F62349458DF67CE8BA000D8D2D36A720@FR44EX3005.global.ds.honeywell.com>

Hello,

How does the access control work for publishing to dead letter exchanges? Is the write permission checked? For example, does the owner of the queue that defined a x-dead-letter-exchange have to have the write permission for this dead letter exchange?

(I didn't find any documentation on this aspect.)


Thanks,
Petr

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/d6534cf7/attachment.htm>

From tuure.laurinolli at portalify.com  Mon Jul 29 14:03:32 2013
From: tuure.laurinolli at portalify.com (Tuure Laurinolli)
Date: Mon, 29 Jul 2013 16:03:32 +0300
Subject: [rabbitmq-discuss] RabbitMQ fails to close connections
Message-ID: <23D14437-BFC3-469A-BC8A-85A325956EB7@portalify.com>

Hi,

When I uncleanly disconnect a client, it is retained on RabbitMQ side apparently forever. I would not be very surprised about this if it weren't for the fact that the connection has heartbeats enabled. I would expect the server to attempt to ping the client and to disconnect it if no response is received.

The offending connections is last on the report below.  As can be seen from netstat output, the corresponding TCP connection no longer exists.

Report output:

Reporting server status on {{2013,7,29},{13,0,53}}

 ...
Status of node 'rabbit at pmc-localtest' ...
[{pid,8352},
 {running_applications,
     [{rabbitmq_management,"RabbitMQ Management Console","3.1.1"},
      {rabbitmq_web_dispatch,"RabbitMQ Web Dispatcher","3.1.1"},
      {webmachine,"webmachine","1.9.1-rmq3.1.1-git52e62bc"},
      {mochiweb,"MochiMedia Web Server","2.3.1-rmq3.1.1-gitd541e9a"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","3.1.1"},
      {rabbit,"RabbitMQ","3.1.1"},
      {os_mon,"CPO  CXC 138 46","2.2.9"},
      {inets,"INETS  CXC 138 49","5.9"},
      {xmerl,"XML parser","1.3.1"},
      {mnesia,"MNESIA  CXC 138 12","4.7"},
      {amqp_client,"RabbitMQ AMQP Client","3.1.1"},
      {sasl,"SASL  CXC 138 11","2.2.1"},
      {stdlib,"ERTS  CXC 138 10","1.18.1"},
      {kernel,"ERTS  CXC 138 10","2.15.1"}]},
 {os,{unix,linux}},
 {erlang_version,
     "Erlang R15B01 (erts-5.9.1) [source] [64-bit] [async-threads:30] [hipe] [kernel-poll:true]\n"},
 {memory,
     [{total,33681696},
      {connection_procs,170720},
      {queue_procs,178216},
      {plugins,434424},
      {other_proc,9304848},
      {mnesia,83904},
      {mgmt_db,127024},
      {msg_index,43776},
      {other_ets,1102232},
      {binary,97744},
      {code,18464238},
      {atom,703377},
      {other_system,2971193}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,206723481},
 {disk_free_limit,1000000000},
 {disk_free,882683904},
 {file_descriptors,
     [{total_limit,924},{total_used,13},{sockets_limit,829},{sockets_used,4}]},
 {processes,[{limit,1048576},{used,224}]},
 {run_queue,0},
 {uptime,3300}]

Cluster status of node 'rabbit at pmc-localtest' ...
[{nodes,[{disc,['rabbit at pmc-localtest']}]},
 {running_nodes,['rabbit at pmc-localtest']},
 {partitions,[]}]

Application environment of node 'rabbit at pmc-localtest' ...
[{auth_backends,[rabbit_auth_backend_internal]},
 {auth_mechanisms,['PLAIN','AMQPLAIN']},
 {backing_queue_module,rabbit_variable_queue},
 {cluster_nodes,{[],disc}},
 {cluster_partition_handling,ignore},
 {collect_statistics,fine},
 {collect_statistics_interval,5000},
 {default_permissions,[<<".*">>,<<".*">>,<<".*">>]},
 {default_user,<<"guest">>},
 {default_user_tags,[administrator]},
 {default_vhost,<<"/">>},
 {delegate_count,16},
 {disk_free_limit,1000000000},
 {enabled_plugins_file,"/etc/rabbitmq/enabled_plugins"},
 {error_logger,{file,"/var/log/rabbitmq/rabbit at pmc-localtest.log"}},
 {frame_max,131072},
 {heartbeat,600},
 {hipe_compile,false},
 {included_applications,[]},
 {log_levels,[{connection,info}]},
 {msg_store_file_size_limit,16777216},
 {msg_store_index_module,rabbit_msg_store_ets_index},
 {plugins_dir,"/usr/lib/rabbitmq/lib/rabbitmq_server-3.1.1/sbin/../plugins"},
 {plugins_expand_dir,"/var/lib/rabbitmq/mnesia/rabbit at pmc-localtest-plugins-expand"},
 {queue_index_max_journal_entries,65536},
 {reverse_dns_lookups,false},
 {sasl_error_logger,{file,"/var/log/rabbitmq/rabbit at pmc-localtest-sasl.log"}},
 {server_properties,[]},
 {ssl_cert_login_from,distinguished_name},
 {ssl_listeners,[]},
 {ssl_options,[]},
 {tcp_listen_options,[binary,
                      {packet,raw},
                      {reuseaddr,true},
                      {backlog,128},
                      {nodelay,true},
                      {linger,{true,0}},
                      {exit_on_close,false}]},
 {tcp_listeners,[5672]},
 {trace_vhosts,[]},
 {vm_memory_high_watermark,0.4}]

Connections:
pid	name	port	peer_port	host	peer_host	ssl	peer_cert_subject	peer_cert_issuer	peer_cert_validity	auth_mechanism	ssl_protocol	ssl_key_exchange	ssl_cipher	ssl_hash	protocol	user	vhost	timeout	frame_max	client_properties	recv_oct	recv_cnt	send_oct	send_cnt	send_pend	state	last_blocked_by	last_blocked_agechannels
<'rabbit at pmc-localtest'.3.290.0>	127.0.0.1:45757 -> 127.0.0.1:5672	5672	45757	127.0.0.1	127.0.0.1	false				PLAIN					{0,9,1}	guest	/	0	131072	[{"product","rabbitmq-c"},{"information","See http://hg.rabbitmq.com/rabbitmq-c/"}]	370	9	492	8	0	blocking	none	infinity	1
<'rabbit at pmc-localtest'.3.298.0>	127.0.0.1:45758 -> 127.0.0.1:5672	5672	45758	127.0.0.1	127.0.0.1	false				PLAIN					{0,9,1}	guest	/	10	131072	[{"product","RabbitMQ"},{"information","Licensed under the MPL. See http://www.rabbitmq.com/"},{"platform","Java"},{"capabilities",[{"exchange_exchange_bindings",true},{"consumer_cancel_notify",true},{"basic.nack",true},{"publisher_confirms",true}]},{"copyright","Copyright (C) 2007-2012 VMware, Inc."},{"version","2.8.4"}]	6088	671	3244	341	0	blocking	none	infinity	1
<'rabbit at pmc-localtest'.3.318.0>	127.0.0.1:45760 -> 127.0.0.1:5672	5672	45760	127.0.0.1	127.0.0.1	false				PLAIN					{0,9,1}	guest	/	5	131072	[{"product","rabbitmq-c"},{"information","See http://hg.rabbitmq.com/rabbitmq-c/"}]	728	9	993	76	0	blocked	resource	3295.501924	1

Channels:
pid	name	connection	number	user	vhost	transactional	confirm	consumer_count	messages_unacknowledged	messages_unconfirmed	messages_uncommitted	acks_uncommitted	prefetch_count	client_flow_blocked
<'rabbit at pmc-localtest'.3.295.0>	127.0.0.1:45757 -> 127.0.0.1:5672 (1)	<'rabbit at pmc-localtest'.3.290.0>	1	guest	/	false	false	1	0	0	0	0	0	false
<'rabbit at pmc-localtest'.3.305.0>	127.0.0.1:45758 -> 127.0.0.1:5672 (1)	<'rabbit at pmc-localtest'.3.298.0>	1	guest	/	false	false	1	0	0	0	0	1	false
<'rabbit at pmc-localtest'.3.325.0>	127.0.0.1:45760 -> 127.0.0.1:5672 (1)	<'rabbit at pmc-localtest'.3.318.0>	1	guest	/	false	false	0	0	0	0	0	0	false

Queues on /:
pid	name	durable	auto_delete	arguments	owner_pid	policy	exclusive_consumer_pid	exclusive_consumer_tag	messages_ready	messages_unacknowledged	messages	consumers	memory	slave_pids	synchronised_slave_pids	backing_queue_status	status
<'rabbit at pmc-localtest'.3.207.0>	queue.pmc.smpp-in	true	false	[]					0	0	0	0	21800			[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<'rabbit at pmc-localtest'.3.208.0>	queue.pmc.email-in	true	false	[]					0	0	0	0	21800			[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<'rabbit at pmc-localtest'.3.209.0>	queue.pmc.router-in	true	false	[]					0	0	0	1	21944			[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<'rabbit at pmc-localtest'.3.210.0>	queue.pmc.cassidian-in	true	false	[]					0	0	0	0	21800			[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<'rabbit at pmc-localtest'.3.211.0>	queue.pmc.sf-in	true	false	[]					0	0	0	0	21800			[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<'rabbit at pmc-localtest'.3.212.0>	queue.pmc.astrid-112-in	true	false	[]					0	0	0	1	22016			[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<'rabbit at pmc-localtest'.3.213.0>	queue.pmc.tetra-pei-in	true	false	[]					0	0	0	0	21800			[{q1,0}, {q2,0}, {delta,{delta,0,0,0}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running
<'rabbit at pmc-localtest'.3.326.0>	queue.test.sf-in	false	false	[]	<'rabbit at pmc-localtest'.3.318.0>				0	0	0	0	14008			[{q1,0}, {q2,0}, {delta,{delta,undefined,0,undefined}}, {q3,0}, {q4,0}, {len,0}, {pending_acks,0}, {target_ram_count,infinity}, {ram_msg_count,0}, {ram_ack_count,0}, {next_seq_id,0}, {persistent_count,0}, {avg_ingress_rate,0.0}, {avg_egress_rate,0.0}, {avg_ack_ingress_rate,0.0}, {avg_ack_egress_rate,0.0}]	running

Exchanges on /:
name	type	durable	auto_delete	internal	arguments	policy
	direct	true	false	false	[]	
amq.direct	direct	true	false	false	[]	
amq.fanout	fanout	true	false	false	[]	
amq.headers	headers	true	false	false	[]	
amq.match	headers	true	false	false	[]	
amq.rabbitmq.log	topic	true	false	false	[]	
amq.rabbitmq.trace	topic	true	false	false	[]	
amq.topic	topic	true	false	false	[]	
exchange.pmc.astrid-112-in	direct	true	false	false	[]	
exchange.pmc.cassidian-in	direct	true	false	false	[]	
exchange.pmc.email-in	fanout	true	false	false	[]	
exchange.pmc.router-in	fanout	true	false	false	[]	
exchange.pmc.sf-in	direct	true	false	false	[]	
exchange.pmc.smpp-in	fanout	true	false	false	[]	

Bindings on /:
source_name	source_kind	destination_name	destination_kind	routing_key	arguments
	exchange	queue.pmc.astrid-112-in	queue	queue.pmc.astrid-112-in	[]
	exchange	queue.pmc.cassidian-in	queue	queue.pmc.cassidian-in	[]
	exchange	queue.pmc.email-in	queue	queue.pmc.email-in	[]
	exchange	queue.pmc.router-in	queue	queue.pmc.router-in	[]
	exchange	queue.pmc.sf-in	queue	queue.pmc.sf-in	[]
	exchange	queue.pmc.smpp-in	queue	queue.pmc.smpp-in	[]
	exchange	queue.pmc.tetra-pei-in	queue	queue.pmc.tetra-pei-in	[]
	exchange	queue.test.sf-in	queue	queue.test.sf-in	[]
exchange.pmc.astrid-112-in	exchange	queue.pmc.astrid-112-in	queue		[]
exchange.pmc.cassidian-in	exchange	queue.pmc.cassidian-in	queue		[]
exchange.pmc.email-in	exchange	queue.pmc.email-in	queue		[]
exchange.pmc.router-in	exchange	queue.pmc.router-in	queue		[]
exchange.pmc.sf-in	exchange	queue.pmc.sf-in	queue		[]
exchange.pmc.sf-in	exchange	queue.test.sf-in	queue		[]
exchange.pmc.smpp-in	exchange	queue.pmc.smpp-in	queue		[]

Consumers on /:
queue_name	channel_pid	consumer_tag	ack_required
queue.pmc.astrid-112-in	<'rabbit at pmc-localtest'.3.305.0>	amq.ctag-xl4tPpQSCoOOueAao0br6g	true
queue.pmc.router-in	<'rabbit at pmc-localtest'.3.295.0>	amq.ctag-oeR9Nin_ofEY7vvQzfWm-g	false

Permissions on /:
user	configure	write	read
admin	.*	.*	.*
guest	.*	.*	.*

Policies on /:

Parameters on /:

...done.

Netstat output:

pmc-localtest:~ # netstat -np | grep 5672
tcp        0      0 127.0.0.1:45757         127.0.0.1:5672          ESTABLISHED 22394/perl          
tcp        0      0 127.0.0.1:5672          127.0.0.1:45757         ESTABLISHED 8352/beam           
tcp        0      0 127.0.0.1:5672          127.0.0.1:45758         ESTABLISHED 8352/beam           
tcp        0      0 127.0.0.1:45758         127.0.0.1:5672          ESTABLISHED 3530/java           


From emile at rabbitmq.com  Mon Jul 29 14:17:28 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 29 Jul 2013 14:17:28 +0100
Subject: [rabbitmq-discuss] Maximum achievable concurrent Web STOMP
 plugin on Windows
In-Reply-To: <1374878860315-28434.post@n5.nabble.com>
References: <1374878860315-28434.post@n5.nabble.com>
Message-ID: <51F66B68.5050807@rabbitmq.com>

On 26/07/13 23:47, joshua__lim wrote:
> Hi, I'm looking at creating a push message service using Rabbitmq Web STOMP
> plugin + JS client for up to 10,000 concurrently connected clients.

There are no built-in limitations for number of connected STOMP clients.
You may run into infrastructure limits on the number of connections,
e.g. the OS memory structures may only support a certain number of
concurrent connections. Your OS documentation should have the details on
how to raise that limit.




-Emile





From tuure.laurinolli at portalify.com  Mon Jul 29 14:35:04 2013
From: tuure.laurinolli at portalify.com (Tuure Laurinolli)
Date: Mon, 29 Jul 2013 16:35:04 +0300
Subject: [rabbitmq-discuss] RabbitMQ fails to close connections
In-Reply-To: <23D14437-BFC3-469A-BC8A-85A325956EB7@portalify.com>
References: <23D14437-BFC3-469A-BC8A-85A325956EB7@portalify.com>
Message-ID: <5BFB1F57-215F-4D67-B90D-6E2374B533A6@portalify.com>


On Jul 29, 2013, at 16:03 , Tuure Laurinolli wrote:

> Hi,
> 
> When I uncleanly disconnect a client, it is retained on RabbitMQ side apparently forever. I would not be very surprised about this if it weren't for the fact that the connection has heartbeats enabled. I would expect the server to attempt to ping the client and to disconnect it if no response is received.
> 
> The offending connections is last on the report below.  As can be seen from netstat output, the corresponding TCP connection no longer exists.

Apparently this was caused by insufficient free disk space.

> {disk_free_limit,1000000000},
> {disk_free,882683904},


It's a bit confusing that disk space limitations cause problems like eternally hanging connections, but somewhat understandable given that the hanging connection had done a publish().

From emile at rabbitmq.com  Mon Jul 29 14:46:17 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 29 Jul 2013 14:46:17 +0100
Subject: [rabbitmq-discuss] Access Control for Dead Letter Exchanges?
In-Reply-To: <F9E85480F62349458DF67CE8BA000D8D2D36A720@FR44EX3005.global.ds.honeywell.com>
References: <F9E85480F62349458DF67CE8BA000D8D2D36A720@FR44EX3005.global.ds.honeywell.com>
Message-ID: <51F67229.4060304@rabbitmq.com>


Hi,

On 29/07/13 13:47, Gotthard, Petr wrote:
> How does the access control work for publishing to dead letter
> exchanges? Is the write permission checked? For example, does the owner
> of the queue that defined a x-dead-letter-exchange have to have the
> write permission for this dead letter exchange?

Permissions of exchanges are only checked upon the initial publish
before dead-lettering took place. The permissions don't get checked
again after that. It is not possible to prevent dead-lettering on the
basis of permissions.

> (I didn?t find any documentation on this aspect.)

That's an oversight that will be corrected. Thanks for pointing it out.





-Emile





From Petr.Gotthard at Honeywell.com  Mon Jul 29 14:55:24 2013
From: Petr.Gotthard at Honeywell.com (Gotthard, Petr)
Date: Mon, 29 Jul 2013 13:55:24 +0000
Subject: [rabbitmq-discuss] Access Control for Dead Letter Exchanges?
In-Reply-To: <51F67229.4060304@rabbitmq.com>
References: <F9E85480F62349458DF67CE8BA000D8D2D36A720@FR44EX3005.global.ds.honeywell.com>
	<51F67229.4060304@rabbitmq.com>
Message-ID: <F9E85480F62349458DF67CE8BA000D8D2D36A7A5@FR44EX3005.global.ds.honeywell.com>

Does this mean I (being a evil hacker) can misuse this to publish a message to an exchange even though I don't have write permissions for that exchange?

Scenario:
There is an exchange X that is protected and I must not be able to publish to it.
I create a queue Q with a length limit "1" and x-dead-letter-exchange="X".
I create the evil message and publish it to the queue Q.
Then I publish a second message to this queue.
Since the queue limit has been reached, the evil message gets dead lettered to "X" with no permission check(?)

Didn't I just bypassed the ACL for "X"?


Petr

-----Original Message-----
From: Emile Joubert [mailto:emile at rabbitmq.com] 
Sent: 29. ?ervence 2013 15:46
To: Discussions about RabbitMQ
Cc: Gotthard, Petr
Subject: Re: [rabbitmq-discuss] Access Control for Dead Letter Exchanges?


Hi,

On 29/07/13 13:47, Gotthard, Petr wrote:
> How does the access control work for publishing to dead letter 
> exchanges? Is the write permission checked? For example, does the 
> owner of the queue that defined a x-dead-letter-exchange have to have 
> the write permission for this dead letter exchange?

Permissions of exchanges are only checked upon the initial publish before dead-lettering took place. The permissions don't get checked again after that. It is not possible to prevent dead-lettering on the basis of permissions.

> (I didn't find any documentation on this aspect.)

That's an oversight that will be corrected. Thanks for pointing it out.





-Emile





From emile at rabbitmq.com  Mon Jul 29 15:41:18 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Mon, 29 Jul 2013 15:41:18 +0100
Subject: [rabbitmq-discuss] Access Control for Dead Letter Exchanges?
In-Reply-To: <F9E85480F62349458DF67CE8BA000D8D2D36A7A5@FR44EX3005.global.ds.honeywell.com>
References: <F9E85480F62349458DF67CE8BA000D8D2D36A720@FR44EX3005.global.ds.honeywell.com>
	<51F67229.4060304@rabbitmq.com>
	<F9E85480F62349458DF67CE8BA000D8D2D36A7A5@FR44EX3005.global.ds.honeywell.com>
Message-ID: <51F67F0E.5030206@rabbitmq.com>


Hi Petr,

On 29/07/13 14:55, Gotthard, Petr wrote:
> Does this mean I (being a evil hacker) can misuse this to publish a
> message to an exchange even though I don't have write permissions for
> that exchange?

Yes indeed. Thanks for alerting us to this problem. A fix will be
forthcoming shortly. The release notes will contain the tag '25686' when
this fix is released.



-Emile






From matthias at rabbitmq.com  Mon Jul 29 15:51:46 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Mon, 29 Jul 2013 15:51:46 +0100
Subject: [rabbitmq-discuss] RabbitMQ fails to close connections
In-Reply-To: <5BFB1F57-215F-4D67-B90D-6E2374B533A6@portalify.com>
References: <23D14437-BFC3-469A-BC8A-85A325956EB7@portalify.com>
	<5BFB1F57-215F-4D67-B90D-6E2374B533A6@portalify.com>
Message-ID: <51F68182.5040400@rabbitmq.com>

On 29/07/13 14:35, Tuure Laurinolli wrote:
> It's a bit confusing that disk space limitations cause problems like
> eternally hanging connections, but somewhat understandable given that
> the hanging connection had done a publish().

Right. Blocked connections stick around on the server side until they 
get unblocked, even when the associated clients have long since disappeared.

There is nothing we can do about that since we cannot detect the closed 
socket without reading from it.

Matthias.

From Chris.Nicel at 15below.com  Mon Jul 29 16:36:24 2013
From: Chris.Nicel at 15below.com (Chris Nicel)
Date: Mon, 29 Jul 2013 10:36:24 -0500
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
Message-ID: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>

Hi All,

I have installed RabbitMQ 3.1.3 in a windows 8 laptop. The  management plug in is reporting that I only have 2.0k of disk space left. I have attempted to run the service as local system and my own username (which is an administrator) with no luck.

Does anyone have any ideas what may be occurring here?

Cheers

Chris Nicel
Senior Systems Engineer
15below ltd : 15below Australia pty. ltd.

t:        +44 1273 764230
e:       chris.nicel at 15below.com<mailto:chris.nicel at 15below.com>
w:      15below.com<http://www.15below.com/>
[cid:image001.png at 01CE8C79.C390EEF0]       @15below_travel<https://twitter.com/#!/15below_travel>


15below Limited: Company registered in England and Wales No 3945289
Registered Office: Lyndean House, 43-46 Queens Road, Brighton BN1 3XB, United Kingdom

15below Australia Pty Limited: ABN 25 132 716 379
Level 21, Tower 2 Darling Park, 201 Sussex Street, Sydney, NSW 2000, Australia

Please think about the environment before printing this email.

************************************************************************
This email and any attachments may be confidential and/or legally privileged and are solely for the use of the intended recipient. If you have received this email in error please contact the sender. Any views or opinions expressed within this e-mail are solely those of the sender, and do not necessarily represent those of 15below unless otherwise specifically stated. Although 15below has taken every reasonable precaution to ensure that any attachment to this e-mail has been checked for viruses, it is strongly recommended that you carry out your own virus check before opening any attachment, as we cannot accept liability for any damage sustained as a result of software virus infection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/105fb1bc/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 808 bytes
Desc: image001.png
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/105fb1bc/attachment.png>

From joshua__lim at hotmail.com  Mon Jul 29 16:47:33 2013
From: joshua__lim at hotmail.com (joshua__lim)
Date: Mon, 29 Jul 2013 08:47:33 -0700 (PDT)
Subject: [rabbitmq-discuss] Maximum achievable concurrent Web STOMP
	plugin on Windows
In-Reply-To: <51F66B68.5050807@rabbitmq.com>
References: <1374878860315-28434.post@n5.nabble.com>
	<51F66B68.5050807@rabbitmq.com>
Message-ID: <1375112853685-28458.post@n5.nabble.com>

Hi Emile, thank you for replying.  Do you know if there's a script or project
that I can use to test client concurrency for the Web STOMP plugin?

I've been searching for something similar to the  node-bosh-stress-tool
<https://github.com/anoopc/node-bosh-stress-tool>  , which I used to load
test XMPP/BOSH servers such as Prosody and Openfire.  On my Windows 7 i5
laptop with 4GB RAM, Prosody can only support about five hundred
connections.  Openfire was slightly better but becomes unstable after about
1500 connections.  This was before total CPU and memory usage exceeded
10%-30% of system total.  It didn't occur to me before I started development
that the concurrency threshold is so low.

After that, I did more Googling, found SOCKET.IO, followed by SOCKJS and
arrived at RabbitMQ.



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Maximum-achievable-concurrent-Web-STOMP-plugin-on-Windows-tp28434p28458.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From kalinchih at gmail.com  Mon Jul 29 17:08:33 2013
From: kalinchih at gmail.com (=?UTF-8?B?5rGg5Yex55CzL0thbGluIENoaWg=?=)
Date: Tue, 30 Jul 2013 00:08:33 +0800
Subject: [rabbitmq-discuss] cluster & HA (not Mirrored Queue Behaviour)
In-Reply-To: <CAE3HoVT7MUjdRzjkjkLnmREUHcn5HJ5gDHqycazE_y=19-Xv-g@mail.gmail.com>
References: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>
	<CAE3HoVT7MUjdRzjkjkLnmREUHcn5HJ5gDHqycazE_y=19-Xv-g@mail.gmail.com>
Message-ID: <CAJg8m8nBMQejdZL2uv757Dt-eFS3aMquDK5JpvUGLDYAtuo9cA@mail.gmail.com>

 Hi MK,

Thanks for your reply.

For question 1,
my test result is the queue was gone after the rabbitmq1 crashed. And the
rabbitmq2 did not automatically create the queue 'rabbit-test'.
Is it because the producer just send message with exchange & routing key
(no queue name)?

For question 2,
According the rabbitmq cluster guide, it says there is at least one disc
node and ram node is good for performance. I hope my cluster provide good
reliability & performance. But from my testing result of question 1, the
queue eas gone.

So I draft my cluster as below.
- disc node 1 with persistence queues &stats
- disc node 2 mirror with node 1 (replicate the queue?)
- ram node 3 with node 1
- ram node 4 with node 2


Thanks,
Kalin

Michael Klishin ? 2013?7?29???????

>
> 2013/7/28 Kalin Chih <kalinchih at gmail.com <javascript:_e({}, 'cvml',
> 'kalinchih at gmail.com');>>
>
>> Question 1: Is any possible to automatically re-create the queue
>> "rabbit_test" on the other disc node (rabbit at rabbitmq2) when the
>> rabbit at rabbitmq1 is crash?
>>
>
> Queue metadata (e.g. name, durability, other properties) will be available
> on other nodes automatically.
>
>
>>
>> Question 2: What is the best practice for cluster  without "Mirrored
>> Queue Behaviour"?
>>
>
> It depends on what your goals and needs are. What problem are you trying
> to solve with clustering?
> Why mirroring queue contents is not a good idea in your case?
> --
> MK
>
> http://github.com/michaelklishin
> http://twitter.com/michaelklishin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/2a8c54bb/attachment.htm>

From tom.anderson at timgroup.com  Mon Jul 29 17:25:36 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Mon, 29 Jul 2013 17:25:36 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F662A6.3060006@rabbitmq.com>
References: <51F2B1F9.1020805@timgroup.com> <51F2F91B.8080506@rabbitmq.com>
	<51F66073.6020603@timgroup.com> <51F662A6.3060006@rabbitmq.com>
Message-ID: <51F69780.6080602@timgroup.com>

On 29/07/13 13:40, Matthias Radestock wrote:
> On 29/07/13 13:30, Tom Anderson wrote:
>> On 26/07/13 23:32, Matthias Radestock wrote:
>>> On 26/07/13 18:29, Tom Anderson wrote:
>>>> "The broker will confirm messages once:
>>>> [...]
>>>> * a transient message has reached all its queues
>>>> [...]
>>>> So, if i send a persistent message (delivery mode = 2) to a 
>>>> non-durable
>>>> exchange which routes to a non-durable queue, then i will only get a
>>>> confirmation once the message has been consumed from that queue, 
>>>> right?
>>>
>>> Wrong. The behaviour is described in the snippet you quoted above,
>>> i.e. the message gets confirmed once it has reached all the queues it
>>> was routed to.
>>
>> Okay. Just to clarify: the bit of the snippet i quoted that you quoted
>> says "a transient message". I understood that as specifically referring
>> to transient messages, not persistent ones, ie those sent with delivery
>> mode 1 rather than 2. I was asking about persistent messages. Are you
>> telling me that the behaviour for persistent messages is actually the
>> same as that specified for transient messages?
>
> Messages persistence requires the combination of
> 1) delivery_mode = 2
> 2) routing to a durable queue
>
> Condition #2 is not met in your case, so the message is not persisted, 
> i.e. it is treated as a transient message.

Aha. I didn't realise, that, thanks.

What i'm looking for is a way to get some sort of feedback at the sender 
when a message has been acknowledged by the consumer. Given that 
transient messages are confirmed as soon as the message has reached the 
queue, and persistent messages are confirmed as soon as they are written 
to disk, am i right in concluding that there is no way to do this with 
confirms? Is there any other mechanism in RabbitMQ that might let me do 
this?

My real goal here is to write a test for an application of ours, to 
assert that it is only acknowledging messages after it has successfully 
processed them, and not immediately on receipt. If anyone has any 
thoughts on how i might be able to do that, i would be very excited to 
hear them!

Thanks,
tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/7965ed17/attachment.htm>

From mklishin at gopivotal.com  Mon Jul 29 17:51:37 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Mon, 29 Jul 2013 20:51:37 +0400
Subject: [rabbitmq-discuss] cluster & HA (not Mirrored Queue Behaviour)
In-Reply-To: <CAJg8m8nBMQejdZL2uv757Dt-eFS3aMquDK5JpvUGLDYAtuo9cA@mail.gmail.com>
References: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>
	<CAE3HoVT7MUjdRzjkjkLnmREUHcn5HJ5gDHqycazE_y=19-Xv-g@mail.gmail.com>
	<CAJg8m8nBMQejdZL2uv757Dt-eFS3aMquDK5JpvUGLDYAtuo9cA@mail.gmail.com>
Message-ID: <18D0B13B-5669-409E-8989-210E7DF7E178@gopivotal.com>

???/Kalin Chih:

> According the rabbitmq cluster guide, it says there is at least one disc node and ram node is good for performance.

You do need at least one disk node but performance characteristics of a cluster are highly workload-dependent. If you don't create and remove queues aggressively, disk nodes probably will have the
same performance as RAM nodes (given comparable hardware and OS configuration).

> I hope my cluster provide good reliability & performance. But from my testing result of question 1, the queue eas gone. 

Are you sure the nodes were clustered? Can you provide a script (or several) that I can use to
reproduce your issue?

Thanks,
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/93994023/attachment.pgp>

From ceri at lshift.net  Mon Jul 29 17:51:41 2013
From: ceri at lshift.net (Ceri Storey)
Date: Mon, 29 Jul 2013 17:51:41 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F69780.6080602@timgroup.com>
References: <51F2B1F9.1020805@timgroup.com> <51F2F91B.8080506@rabbitmq.com>
	<51F66073.6020603@timgroup.com> <51F662A6.3060006@rabbitmq.com>
	<51F69780.6080602@timgroup.com>
Message-ID: <51F69D9D.9000704@lshift.net>

(29/07/13 17:25), Tom Anderson wrote:
> On 29/07/13 13:40, Matthias Radestock wrote:
>> ...
>
> Aha. I didn't realise, that, thanks.
>
> What i'm looking for is a way to get some sort of feedback at the
> sender when a message has been acknowledged by the consumer. Given
> that transient messages are confirmed as soon as the message has
> reached the queue, and persistent messages are confirmed as soon as
> they are written to disk, am i right in concluding that there is no
> way to do this with confirms? Is there any other mechanism in RabbitMQ
> that might let me do this?
>
> My real goal here is to write a test for an application of ours, to
> assert that it is only acknowledging messages after it has
> successfully processed them, and not immediately on receipt. If anyone
> has any thoughts on how i might be able to do that, i would be very
> excited to hear them!
For your test, I'd be very tempted to provide an adapter which enforces
the guarantees you want to make. Then you can have tests that:

  * For the happy path, asserts that no more messages exist on the
    expected (ie: that a basic.get will return no messages)
  * For the failure path, asserts that the sent message is available to
    other consumers once your adapter has properly failed and shut down.

Granted, the latter does assume that you can shut down the adapter
reasonably easily.

>
> Thanks,
> tom
>
> -- 
>
> Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com
> <http://timgroup.com/>
>
> STATEMENT OF CONFIDENTIALITY: The information contained in this
> electronic message and any attachments to this message are intended
> for the exclusive use of the addressee(s) and may contain confidential
> or privileged information. If you are not the intended recipient,
> please notify Tom Anderson at TIM Group at tom.anderson at timgroup.com
> and destroy all copies of this message and any attachments.
>
> TIM Group is the trading name for YouDevise Limited. YouDevise Limited
> is registered in England, No. 3331176. Registered office: 3 Copthall
> Avenue, London, EC2R 7BH.
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/6cabb88d/attachment.htm>

From dmagick at gmail.com  Mon Jul 29 22:58:29 2013
From: dmagick at gmail.com (Chris)
Date: Tue, 30 Jul 2013 07:58:29 +1000
Subject: [rabbitmq-discuss] forking and getting or consuming messages
In-Reply-To: <341210AA-3388-489A-A307-3A157A3204A0@gopivotal.com>
References: <51F20807.1090409@gmail.com>
	<341210AA-3388-489A-A307-3A157A3204A0@gopivotal.com>
Message-ID: <51F6E585.4080409@gmail.com>

On 26/07/13 15:35, Michael Klishin wrote:
> Chris:
>
>> The second problem is that once all the messages are off the stack, the script exits. I'd like it to stay open and wait for more messages to come in. Is that possible using the queue->get() approach?
>
> Child processes of fork(2) need to reopen all network connections
> (not just to RabbitMQ).

Yep, I understand that.

The structure looks like this:

Parent:
  - connects to the main queue.
  - get() a message
  -- forks
  -- Fires up a separate script to deal with queue 'X'
  -- repeat for other tasks for queues 'Y' and 'Z'
  - waits for all child scripts to finish
  - exits nicely

Child (deals with its own connection to rabbit, it's a separate 
self-contained script):
  - connects to queue 'X' (this is hardcoded - separate scripts deal 
with different queues for different reasons).
  - get() a message
  -- do work
  - repeat until get() returns nothing
  - exits nicely

If I put more tasks on queue 'X' while child is already running, they 
aren't seen. Not a big deal but ideally I'd like them to be picked up 
rather than having to run the child process again. Do I need to do 
something here to make this work?

I'd also like parent to keep listening for more incoming tasks (rather 
than exiting and having to run it again). I changed this to be a 
consumer rather than using get() to fetch the messages, but then the 
forking would wait for the child to finish rather than immediately going 
to the next task. Am I missing something (should I be ack'ing the 
message straight after getting it for it to immediately go to the next?)

Thanks again.
-- 
Postgresql & php tutorials
http://www.designmagick.com/


From gmr at meetme.com  Tue Jul 30 04:24:28 2013
From: gmr at meetme.com (Gavin M. Roy)
Date: Mon, 29 Jul 2013 23:24:28 -0400
Subject: [rabbitmq-discuss] 3.1.3 No Confirm.SelectOk?
Message-ID: <505AA6FBC5E64666A77908A0A6B63CDA@meetme.com>

I've run into a scenario where it appears that Confirm.SelectOk is not being sent from RabbitMQ in reply to a Confirm.Select. I do see the connection as having publisher confirms enabled in the management UI and nowait is set to false. 

I've been able to reproduce this in both the RPM distribution from rabbitmq.com and the latest home-brew install. Is anyone else able to reproduce this or is it a known bug?

Regards,

Gavin 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/7ed47adb/attachment.htm>

From matthias at rabbitmq.com  Tue Jul 30 04:47:17 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Tue, 30 Jul 2013 04:47:17 +0100
Subject: [rabbitmq-discuss] 3.1.3 No Confirm.SelectOk?
In-Reply-To: <505AA6FBC5E64666A77908A0A6B63CDA@meetme.com>
References: <505AA6FBC5E64666A77908A0A6B63CDA@meetme.com>
Message-ID: <51F73745.7050503@rabbitmq.com>

Gavin,

On 30/07/13 04:24, Gavin M. Roy wrote:
> I've run into a scenario where it appears that Confirm.SelectOk is not
> being sent from RabbitMQ in reply to a Confirm.Select. I do see the
> connection as having publisher confirms enabled in the management UI and
> nowait is set to false.
>
> I've been able to reproduce this in both the RPM distribution from
> rabbitmq.com and the latest home-brew install. Is anyone else able to
> reproduce this or is it a known bug?

Nothing has changed in this area of code for ages and, tbh, it's hard to 
see how it could fail - it's just the five lines at 
http://hg.rabbitmq.com/rabbitmq-server/file/d61b25171094/src/rabbit_channel.erl#l1104

Are your connections blocked perhaps due to alarms / flow control?

Matthias.



From gmr at meetme.com  Tue Jul 30 05:04:02 2013
From: gmr at meetme.com (Gavin M. Roy)
Date: Tue, 30 Jul 2013 00:04:02 -0400
Subject: [rabbitmq-discuss] 3.1.3 No Confirm.SelectOk?
In-Reply-To: <51F73745.7050503@rabbitmq.com>
References: <505AA6FBC5E64666A77908A0A6B63CDA@meetme.com>
	<51F73745.7050503@rabbitmq.com>
Message-ID: <6A55229C267640E7A216A5E262929CC5@meetme.com>

On Monday, July 29, 2013 at 11:47 PM, Matthias Radestock wrote:
> Nothing has changed in this area of code for ages and, tbh, it's hard to
> see how it could fail - it's just the five lines at 
> http://hg.rabbitmq.com/rabbitmq-server/file/d61b25171094/src/rabbit_channel.erl#l1104

Yeah it's hard to see where that'd fail. 
> Are your connections blocked perhaps due to alarms / flow control?
> 
> 

No, I am seeing this on brand new connections. It's likely a bug on my end then. I'll test with Pika and a few other client libraries to confirm. If you don't hear anything else from me on the subject, it was on me.

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/1b0823c4/attachment.htm>

From mklishin at gopivotal.com  Tue Jul 30 07:05:11 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 30 Jul 2013 10:05:11 +0400
Subject: [rabbitmq-discuss] forking and getting or consuming messages
In-Reply-To: <51F6E585.4080409@gmail.com>
References: <51F20807.1090409@gmail.com>
	<341210AA-3388-489A-A307-3A157A3204A0@gopivotal.com>
	<51F6E585.4080409@gmail.com>
Message-ID: <F8286048-8A13-4DF7-B58C-DAFA6D0537B5@gopivotal.com>

Chris:

> If I put more tasks on queue 'X' while child is already running, they aren't seen. Not a big deal but ideally I'd like them to be picked up rather than having to run the child process again. Do I need to do something here to make this work?

Is there a reason why you use basic.get over basic.consume (then messages
will be pushed to you by RabbitMQ)?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/e8b94faf/attachment.pgp>

From mklishin at gopivotal.com  Tue Jul 30 07:06:55 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 30 Jul 2013 10:06:55 +0400
Subject: [rabbitmq-discuss] forking and getting or consuming messages
In-Reply-To: <51F6E585.4080409@gmail.com>
References: <51F20807.1090409@gmail.com>
	<341210AA-3388-489A-A307-3A157A3204A0@gopivotal.com>
	<51F6E585.4080409@gmail.com>
Message-ID: <6D1BB7E5-66CE-4144-9B00-2EDED6224674@gopivotal.com>

Chris:

> Am I missing something (should I be ack'ing the message straight after getting it for it to immediately go to the next?)

The number of messages "in progress" (unacknowledged) can be configured per-channel,
see Tutorial 2 [1]. It's not limited by default, though. With the value of 1, you do need to acknowledge
a message first.

1. http://www.rabbitmq.com/getstarted.html
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/78539cdc/attachment.pgp>

From Chris.Nicel at 15below.com  Tue Jul 30 08:59:05 2013
From: Chris.Nicel at 15below.com (Chris Nicel)
Date: Tue, 30 Jul 2013 02:59:05 -0500
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
In-Reply-To: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
References: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
Message-ID: <A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>

Hi All,

I should have added that I have around 400gb of space remaining on the disk in question.

Cheers

Chris

From: rabbitmq-discuss-bounces at lists.rabbitmq.com [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Chris Nicel
Sent: 29 July 2013 16:36
To: rabbitmq-discuss at lists.rabbitmq.com
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space

Hi All,

I have installed RabbitMQ 3.1.3 in a windows 8 laptop. The  management plug in is reporting that I only have 2.0k of disk space left. I have attempted to run the service as local system and my own username (which is an administrator) with no luck.

Does anyone have any ideas what may be occurring here?

Cheers

Chris Nicel
Senior Systems Engineer
15below ltd : 15below Australia pty. ltd.

t:        +44 1273 764230
e:       chris.nicel at 15below.com<mailto:chris.nicel at 15below.com>
w:      15below.com<http://www.15below.com/>
[cid:image001.png at 01CE8D03.0B34C8B0]       @15below_travel<https://twitter.com/#!/15below_travel>


15below Limited: Company registered in England and Wales No 3945289
Registered Office: Lyndean House, 43-46 Queens Road, Brighton BN1 3XB, United Kingdom

15below Australia Pty Limited: ABN 25 132 716 379
Level 21, Tower 2 Darling Park, 201 Sussex Street, Sydney, NSW 2000, Australia

Please think about the environment before printing this email.

************************************************************************
This email and any attachments may be confidential and/or legally privileged and are solely for the use of the intended recipient. If you have received this email in error please contact the sender. Any views or opinions expressed within this e-mail are solely those of the sender, and do not necessarily represent those of 15below unless otherwise specifically stated. Although 15below has taken every reasonable precaution to ensure that any attachment to this e-mail has been checked for viruses, it is strongly recommended that you carry out your own virus check before opening any attachment, as we cannot accept liability for any damage sustained as a result of software virus infection.

15below Limited: Company registered in England and Wales No 3945289
Registered Office: Lyndean House, 43-46 Queens Road, Brighton BN1 3XB, United Kingdom

15below Australia Pty Limited: ABN 25 132 716 379
Level 21, Tower 2 Darling Park, 201 Sussex Street, Sydney, NSW 2000, Australia

Please think about the environment before printing this email.

************************************************************************
This email and any attachments may be confidential and/or legally privileged and are solely for the use of the intended recipient. If you have received this email in error please contact the sender. Any views or opinions expressed within this e-mail are solely those of the sender, and do not necessarily represent those of 15below unless otherwise specifically stated. Although 15below has taken every reasonable precaution to ensure that any attachment to this e-mail has been checked for viruses, it is strongly recommended that you carry out your own virus check before opening any attachment, as we cannot accept liability for any damage sustained as a result of software virus infection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/fa8389c0/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 808 bytes
Desc: image001.png
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/fa8389c0/attachment.png>

From emile at rabbitmq.com  Tue Jul 30 10:02:01 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 30 Jul 2013 10:02:01 +0100
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
In-Reply-To: <A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>
References: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
	<A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>
Message-ID: <51F78109.2080308@rabbitmq.com>


Hi Chris,

On 30/07/13 08:59, Chris Nicel wrote:

> I should have added that I have around 400gb of space remaining on the
> disk in question.

Are you sure that free space is on the same partition that the broker
uses for messages? The broker will report the relevant location as
"database dir" in the logfile when starting up. You can also obtain this
by running

  rabbitmqctl eval 'rabbit_mnesia:dir().'

> I have installed RabbitMQ 3.1.3 in a windows 8 laptop. The  management
> plug in is reporting that I only have 2.0k of disk space left. I have
> attempted to run the service as local system and my own username (which
> is an administrator) with no luck.
The broker uses the last line of this command to determine free space:

  dir /-C /W (followed by the database directory)


What is the last line when you run this with the database drive from the
previous step?





-Emile







From michael at mavnn.co.uk  Tue Jul 30 10:50:21 2013
From: michael at mavnn.co.uk (Michael)
Date: Tue, 30 Jul 2013 02:50:21 -0700 (PDT)
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
In-Reply-To: <51F78109.2080308@rabbitmq.com>
References: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
	<A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>
	<51F78109.2080308@rabbitmq.com>
Message-ID: <1375177820998-28471.post@n5.nabble.com>

Hi Emile,
I'm working with Chris on this issue.

Running `dir /-C /W <dir>` gives the following results:

"Volume in drive C is Windows8_OS
Volume Serial Number is 8438-710A

 Directory of C:\RabbitMQ

[.]               [..]              [db]              enabled_plugins
[log]
               1 File(s)             23 bytes
               4 Dir(s)    375616499712 bytes free"

As you can see, I've already tried changing the RABBITMQ_BASE setting to see
if there was a permissions issue; it doesn't appear there is as rabbit is
happily writing log files under the same directory.

If you have any ideas about what's causing this, I'm all ears, and I suspect
these people:
http://stackoverflow.com/questions/17148510/rabbitmq-strange-disk-free would
be very grateful too!

Thanks,

Michael





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Windows-8-2-0kb-disk-space-tp28457p28471.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From emile at rabbitmq.com  Tue Jul 30 11:23:55 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 30 Jul 2013 11:23:55 +0100
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
In-Reply-To: <1375177820998-28471.post@n5.nabble.com>
References: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
	<A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>
	<51F78109.2080308@rabbitmq.com>
	<1375177820998-28471.post@n5.nabble.com>
Message-ID: <51F7943B.6060800@rabbitmq.com>

On 30/07/13 10:50, Michael wrote:

> If you have any ideas about what's causing this, I'm all ears

Thanks for the info. Can you please also supply the output of
 "rabbitmqctl status"
 "rabbitmqctl environment"
 "rabbitmqctl eval 'rabbit_mnesia:dir().'"





-Emile






From michael at mavnn.co.uk  Tue Jul 30 11:28:24 2013
From: michael at mavnn.co.uk (Michael)
Date: Tue, 30 Jul 2013 03:28:24 -0700 (PDT)
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
In-Reply-To: <1375177820998-28471.post@n5.nabble.com>
References: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
	<A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>
	<51F78109.2080308@rabbitmq.com>
	<1375177820998-28471.post@n5.nabble.com>
Message-ID: <1375180104769-28473.post@n5.nabble.com>

It would appear to be because I have Clink (http://code.google.com/p/clink)
installed, which wraps cmd.exe.

Running the `os:cmd("dir /-C /W \"" ++ Dir ++ [$"])` command in erl on my
machine appends licence text to the end of the command output, and the
parsing code takes the last year in the Copyright notice rather than the
actual diskspace available.

Thanks for the pointer to the relevant code, Emile.

Michael



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Windows-8-2-0kb-disk-space-tp28457p28473.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael at mavnn.co.uk  Tue Jul 30 11:30:06 2013
From: michael at mavnn.co.uk (Michael)
Date: Tue, 30 Jul 2013 03:30:06 -0700 (PDT)
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
In-Reply-To: <51F7943B.6060800@rabbitmq.com>
References: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
	<A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>
	<51F78109.2080308@rabbitmq.com>
	<1375177820998-28471.post@n5.nabble.com>
	<51F7943B.6060800@rabbitmq.com>
Message-ID: <1375180206945-28474.post@n5.nabble.com>

Sorry, didn't see this until after I posted my other reply. As you can see,
this is being caused by an other piece of software present on my system
changing the output of the os:cmd call.

Thanks,

Michael



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/Windows-8-2-0kb-disk-space-tp28457p28474.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From simon at rabbitmq.com  Tue Jul 30 12:12:15 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 30 Jul 2013 12:12:15 +0100
Subject: [rabbitmq-discuss] RabbitMQ hanging during 'rabbitmqctl stop' -
 please help
In-Reply-To: <51F2A7BD.1040808@gazzang.com>
References: <51EE959D.1040200@gazzang.com> <51F24FC8.8000807@rabbitmq.com>
	<51F2A7BD.1040808@gazzang.com>
Message-ID: <51F79F8F.1010803@rabbitmq.com>

On 26/07/13 17:45, Casey Marshall wrote:
> On 07/26/2013 05:30 AM, Simon MacMullen wrote:
>> Are you restarting the server immediately after reconfiguring
>> federation, or some time later?
>>
> I'm restarting the server immediately after, on each federated node, in
> parallel with Ansible.

Ah - you do know you don't need to restart for the changes to federation 
to take effect?

> I suspect something about the other servers' upstream exchange
> connection attempts, *during* the restart of a server, might have
> something to do with it.

Yes - the deadlock we've found requires a (client) connection or channel 
to be opening at just the wrong point during shutdown.

> Is there a workaround I might try to avoid the deadlock?

You are much less likely to hit it if you wait a few seconds before 
restarting.

Hopefully we should have a fixed version available for test soon.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From emile at rabbitmq.com  Tue Jul 30 13:18:47 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 30 Jul 2013 13:18:47 +0100
Subject: [rabbitmq-discuss] Windows 8 2.0kb disk space
In-Reply-To: <1375180104769-28473.post@n5.nabble.com>
References: <A57B6B00637AF741A9FA2D006B40C3C883C22407DF@AUSP01VMBX29.collaborationhost.net>
	<A57B6B00637AF741A9FA2D006B40C3C883C2346294@AUSP01VMBX29.collaborationhost.net>
	<51F78109.2080308@rabbitmq.com>
	<1375177820998-28471.post@n5.nabble.com>
	<1375180104769-28473.post@n5.nabble.com>
Message-ID: <51F7AF27.8000109@rabbitmq.com>


Hi Michael,

On 30/07/13 11:28, Michael wrote:
> It would appear to be because I have Clink (http://code.google.com/p/clink)
> installed, which wraps cmd.exe.

Thanks for the analysis. It appears the Clink behaves differently
depending on whether a space follows the "/c" shell flag. I would
hesitate to call this a bug, because the Windows shell is so poorly
specified, but this is a significant syntax difference.

A future version of the broker will work correctly when Clink is
installed. Keep an eye on the release notes for when that happens. In
the meantime you are advised to avoid Clink, or don't rely on accurate
disk-free space monitoring.





-Emile





From kalinchih at gmail.com  Tue Jul 30 13:21:02 2013
From: kalinchih at gmail.com (=?UTF-8?B?5rGg5Yex55CzL0thbGluIENoaWg=?=)
Date: Tue, 30 Jul 2013 20:21:02 +0800
Subject: [rabbitmq-discuss] cluster & HA (not Mirrored Queue Behaviour)
In-Reply-To: <18D0B13B-5669-409E-8989-210E7DF7E178@gopivotal.com>
References: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>
	<CAE3HoVT7MUjdRzjkjkLnmREUHcn5HJ5gDHqycazE_y=19-Xv-g@mail.gmail.com>
	<CAJg8m8nBMQejdZL2uv757Dt-eFS3aMquDK5JpvUGLDYAtuo9cA@mail.gmail.com>
	<18D0B13B-5669-409E-8989-210E7DF7E178@gopivotal.com>
Message-ID: <CAJg8m8matfE3Duf_Z_BvODY-ivKSmzduuYHFxtj4JXL8xgs59w@mail.gmail.com>

Hi MK,

Here is screenshots for question 1.
1. cluster: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/1.png
2. queue: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/2.png
3. stop node1:
https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/3.png
4. queue gone:
https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/4.png

thanks,
Kalin


2013/7/30 Michael Klishin <mklishin at gopivotal.com>

> ???/Kalin Chih:
>
> > According the rabbitmq cluster guide, it says there is at least one disc
> node and ram node is good for performance.
>
> You do need at least one disk node but performance characteristics of a
> cluster are highly workload-dependent. If you don't create and remove
> queues aggressively, disk nodes probably will have the
> same performance as RAM nodes (given comparable hardware and OS
> configuration).
>
> > I hope my cluster provide good reliability & performance. But from my
> testing result of question 1, the queue eas gone.
>
> Are you sure the nodes were clustered? Can you provide a script (or
> several) that I can use to
> reproduce your issue?
>
> Thanks,
> --
> MK
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/e6d00ae9/attachment.htm>

From mklishin at gopivotal.com  Tue Jul 30 13:26:24 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 30 Jul 2013 16:26:24 +0400
Subject: [rabbitmq-discuss] cluster & HA (not Mirrored Queue Behaviour)
In-Reply-To: <CAJg8m8matfE3Duf_Z_BvODY-ivKSmzduuYHFxtj4JXL8xgs59w@mail.gmail.com>
References: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>
	<CAE3HoVT7MUjdRzjkjkLnmREUHcn5HJ5gDHqycazE_y=19-Xv-g@mail.gmail.com>
	<CAJg8m8nBMQejdZL2uv757Dt-eFS3aMquDK5JpvUGLDYAtuo9cA@mail.gmail.com>
	<18D0B13B-5669-409E-8989-210E7DF7E178@gopivotal.com>
	<CAJg8m8matfE3Duf_Z_BvODY-ivKSmzduuYHFxtj4JXL8xgs59w@mail.gmail.com>
Message-ID: <5C434B3D-183F-4DBD-975B-F26AA51E3FAB@gopivotal.com>

???/Kalin Chih:

> Here is screenshots for question 1.
> 1. cluster: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/1.png
> 2. queue: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/2.png
> 3. stop node1: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/3.png
> 4. queue gone: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/4.png

You seem to be using RabbitMQ Logstash plugin, can you please share relevant parts
of your Logstash config? I'm primarily interested in the queue properties you use.

Thanks.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/83cc16f3/attachment.pgp>

From emile at rabbitmq.com  Tue Jul 30 13:40:13 2013
From: emile at rabbitmq.com (Emile Joubert)
Date: Tue, 30 Jul 2013 13:40:13 +0100
Subject: [rabbitmq-discuss] Network driver patch
In-Reply-To: <etPan.51f2404e.189a769b.14175@backd8>
References: <etPan.51f2404e.189a769b.14175@backd8>
Message-ID: <51F7B42D.9000000@rabbitmq.com>


Hi Ben,

On 26/07/13 10:24, Ben Hood wrote:

> I was wondering whether you'd accept this patch to the network driver.
> It addresses a bug in the client side handling of the SASL handshake
> which makes it difficult for the server to send the client a challenge.


Thanks for the contribution, which fixes challenge-response
authentication for the Erlang client. Please keep an eye on the release
notes for when it will be included.



-Emile






From mklishin at gopivotal.com  Tue Jul 30 13:47:08 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 30 Jul 2013 16:47:08 +0400
Subject: [rabbitmq-discuss] cluster & HA (not Mirrored Queue Behaviour)
In-Reply-To: <CAJg8m8matfE3Duf_Z_BvODY-ivKSmzduuYHFxtj4JXL8xgs59w@mail.gmail.com>
References: <d569269b-6c32-4c58-8717-9ddf8e41d2ce@googlegroups.com>
	<CAE3HoVT7MUjdRzjkjkLnmREUHcn5HJ5gDHqycazE_y=19-Xv-g@mail.gmail.com>
	<CAJg8m8nBMQejdZL2uv757Dt-eFS3aMquDK5JpvUGLDYAtuo9cA@mail.gmail.com>
	<18D0B13B-5669-409E-8989-210E7DF7E178@gopivotal.com>
	<CAJg8m8matfE3Duf_Z_BvODY-ivKSmzduuYHFxtj4JXL8xgs59w@mail.gmail.com>
Message-ID: <AAC73AC5-3587-40D4-A3CA-D77048C1449F@gopivotal.com>

???/Kalin Chih:

> Here is screenshots for question 1.
> 1. cluster: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/1.png
> 2. queue: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/2.png
> 3. stop node1: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/3.png
> 4. queue gone: https://dl.dropboxusercontent.com/u/13308326/amqp_cluster/4.png

After some clarification I see that I misinformed you in an earlier email.
Sorry about that.

You do need to use mirrored queues to see the queue be available on another
node. Your clients can connect to any node to publish, though.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/dc82bffb/attachment.pgp>

From stuff at moesel.net  Tue Jul 30 13:48:24 2013
From: stuff at moesel.net (Chris)
Date: Tue, 30 Jul 2013 08:48:24 -0400
Subject: [rabbitmq-discuss] Consumer Cancel Notifications in rabbitmq-c or
	SimpleAmqpClient?
Message-ID: <CAHEpgBDZ1QJwtXxnzpB6fqhrMPe5caTUth33FxYG6kwQL20Suw@mail.gmail.com>

Hi All,

Does rabbitmq-c or SimpleAmqpClient handle consumer cancellation
notifications?

If so, is there any documentation or examples?

If not, is there any guidance on how one would implement support for such a
thing?

Thanks,
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/e819d7c3/attachment.htm>

From mklishin at gopivotal.com  Tue Jul 30 14:12:53 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Tue, 30 Jul 2013 17:12:53 +0400
Subject: [rabbitmq-discuss] Fwd: cluster & HA (not Mirrored Queue Behaviour)
References: <CAJg8m8mTRv9f0F6FbfcZ=4rZCcLvaHGYi4GuQ-3oQ=1NvsYxQw@mail.gmail.com>
Message-ID: <BF50D14C-4BA9-4988-9E0F-CF6FC6E940E4@gopivotal.com>

Adding back rabbitmq-discuss

> De: ???/Kalin Chih <kalinchih at gmail.com>
> 
> Hi MK,
> 
> Many thanks for your prompt reply.
> 
> I does not use the rabbitmq logstash plugin. We just use the logstash to send message to rabbitmq via layer 4 switch.
> 
> So if I want to distribute/share the messages from producers, is this plan OK?
>  
> 
> - cluster 1
> - node 1: disc
> - node 2: disc
> - cluster 2
> - node 3: disc
> - node 4: disc
> 
> - layer 4 switch binds all nodes.
> - producers send messages to layer 4 switch
> - consumers poll messages to layer 4 switch

This setup is OK. Performance characteristics are really workload-specific so it's a good
idea to start with all disk nodes and then see if you really need to use RAM nodes.

You've two clusters listed. Are you going to use shovel or federation to connect them?
Or how it's going to work?
--
MK

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/83b150e8/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/83b150e8/attachment.pgp>

From Chris.Nicel at 15below.com  Tue Jul 30 15:40:29 2013
From: Chris.Nicel at 15below.com (Chris Nicel)
Date: Tue, 30 Jul 2013 09:40:29 -0500
Subject: [rabbitmq-discuss] Management HTTP API
Message-ID: <A57B6B00637AF741A9FA2D006B40C3C883C23465A4@AUSP01VMBX29.collaborationhost.net>

Hi All,

I am trying to get some data from a RabbitMQ cluster regarding message rate statistics.


From simon at rabbitmq.com  Tue Jul 30 15:48:47 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 30 Jul 2013 15:48:47 +0100
Subject: [rabbitmq-discuss] Management HTTP API
In-Reply-To: <A57B6B00637AF741A9FA2D006B40C3C883C23465A4@AUSP01VMBX29.collaborationhost.net>
References: <A57B6B00637AF741A9FA2D006B40C3C883C23465A4@AUSP01VMBX29.collaborationhost.net>
Message-ID: <51F7D24F.8050403@rabbitmq.com>

On 30/07/13 15:40, Chris Nicel wrote:
>  From reading the API page (http://myrabbitserver:15672/api) I am aware
> of the sample age and sample increment parameters.

Argh. That documentation is wrong.

I'll update it, but there are in fact six parameters:

lengths_age
lengths_incr
msg_rates_age
msg_rates_incr
data_rates_age
data_rates_incr

since some queries can return more than one set of samples (i.e. the 
overview returns lengths and message rates)

So you want a URL like:

http://server:15672/api/overview?lengths_age=3600&lengths_incr=60&msg_rates_age=3600&msg_rates_incr=60

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From simon at rabbitmq.com  Tue Jul 30 15:59:12 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Tue, 30 Jul 2013 15:59:12 +0100
Subject: [rabbitmq-discuss] Management HTTP API
In-Reply-To: <A57B6B00637AF741A9FA2D006B40C3C883C23465E5@AUSP01VMBX29.collaborationhost.net>
References: <A57B6B00637AF741A9FA2D006B40C3C883C23465A4@AUSP01VMBX29.collaborationhost.net>
	<51F7D24F.8050403@rabbitmq.com>
	<A57B6B00637AF741A9FA2D006B40C3C883C23465E5@AUSP01VMBX29.collaborationhost.net>
Message-ID: <51F7D4C0.6020108@rabbitmq.com>

Hi Chris. Yes, the samples are fairly raw like that. The HTTP API 
generates rates for the current moment but not for all the samples.

Cheers, Simon

On 30/07/13 15:54, Chris Nicel wrote:
> Hi Simon,
>
> Many thanks for that.
>
> The stats seem to be returning the total number of messages since the server was started. Is that correct?
>
> I'm sure I can work out a little maths to get me my rates/period stats. Just wanted to check I was reading it right...
>
> Cheers
>
> Chris
>
> -----Original Message-----
> From: Simon MacMullen [mailto:simon at rabbitmq.com]
> Sent: 30 July 2013 15:49
> To: Chris Nicel
> Cc: Discussions about RabbitMQ
> Subject: Re: [rabbitmq-discuss] Management HTTP API
>
> On 30/07/13 15:40, Chris Nicel wrote:
>>   From reading the API page (http://myrabbitserver:15672/api) I am
>> aware of the sample age and sample increment parameters.
>
> Argh. That documentation is wrong.
>
> I'll update it, but there are in fact six parameters:
>
> lengths_age
> lengths_incr
> msg_rates_age
> msg_rates_incr
> data_rates_age
> data_rates_incr
>
> since some queries can return more than one set of samples (i.e. the overview returns lengths and message rates)
>
> So you want a URL like:
>
> http://server:15672/api/overview?lengths_age=3600&lengths_incr=60&msg_rates_age=3600&msg_rates_incr=60
>
> Cheers, Simon
>
> --
> Simon MacMullen
> RabbitMQ, Pivotal
>
>   15below Limited: Company registered in England and Wales No 3945289
> Registered Office: Lyndean House, 43-46 Queens Road, Brighton BN1 3XB, United Kingdom
>
> 15below Australia Pty Limited: ABN 25 132 716 379
> Level 21, Tower 2 Darling Park, 201 Sussex Street, Sydney, NSW 2000, Australia
>
> Please think about the environment before printing this email.
>
> ************************************************************************
> This email and any attachments may be confidential and/or legally privileged and are solely for the use of the intended recipient.  If you have received this email in error please contact the sender.  Any views or opinions expressed within this e-mail are solely those of the sender, and do not necessarily represent those of 15below unless otherwise specifically stated.  Although 15below has taken every reasonable precaution to ensure that any attachment to this e-mail has been checked for viruses, it is strongly recommended that you carry out your own virus check before opening any attachment, as we cannot accept liability for any damage sustained as a result of software virus infection.
>


-- 
Simon MacMullen
RabbitMQ, Pivotal

From tom.anderson at timgroup.com  Tue Jul 30 16:30:06 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Tue, 30 Jul 2013 16:30:06 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F69D9D.9000704@lshift.net>
References: <51F2B1F9.1020805@timgroup.com>
	<51F2F91B.8080506@rabbitmq.com>	<51F66073.6020603@timgroup.com>
	<51F662A6.3060006@rabbitmq.com>	<51F69780.6080602@timgroup.com>
	<51F69D9D.9000704@lshift.net>
Message-ID: <51F7DBFE.1020306@timgroup.com>

On 29/07/13 17:51, Ceri Storey wrote:
> (29/07/13 17:25), Tom Anderson wrote:
>> On 29/07/13 13:40, Matthias Radestock wrote:
>>> ...
>>
>> Aha. I didn't realise, that, thanks.
>>
>> What i'm looking for is a way to get some sort of feedback at the 
>> sender when a message has been acknowledged by the consumer. Given 
>> that transient messages are confirmed as soon as the message has 
>> reached the queue, and persistent messages are confirmed as soon as 
>> they are written to disk, am i right in concluding that there is no 
>> way to do this with confirms? Is there any other mechanism in 
>> RabbitMQ that might let me do this?
>>
>> My real goal here is to write a test for an application of ours, to 
>> assert that it is only acknowledging messages after it has 
>> successfully processed them, and not immediately on receipt. If 
>> anyone has any thoughts on how i might be able to do that, i would be 
>> very excited to hear them!
> For your test, I'd be very tempted to provide an adapter which 
> enforces the guarantees you want to make. Then you can have tests that:
>
>   * For the happy path, asserts that no more messages exist on the
>     expected (ie: that a basic.get will return no messages)
>   * For the failure path, asserts that the sent message is available
>     to other consumers once your adapter has properly failed and shut
>     down.
>
> Granted, the latter does assume that you can shut down the adapter 
> reasonably easily.
>

Apologies if i'm being thick, but what do you mean by "adapter"? Do you 
mean code that sits between the application code and the AMQP library? 
Or code that the test can use to take a grip on the application code? Or 
something else?

tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/604746ab/attachment.htm>

From ceri at lshift.net  Tue Jul 30 17:05:11 2013
From: ceri at lshift.net (Ceri Storey)
Date: Tue, 30 Jul 2013 17:05:11 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F7DBFE.1020306@timgroup.com>
References: <51F2B1F9.1020805@timgroup.com>
	<51F2F91B.8080506@rabbitmq.com>	<51F66073.6020603@timgroup.com>
	<51F662A6.3060006@rabbitmq.com>	<51F69780.6080602@timgroup.com>
	<51F69D9D.9000704@lshift.net> <51F7DBFE.1020306@timgroup.com>
Message-ID: <51F7E437.3030106@lshift.net>

(30/07/13 16:30), Tom Anderson wrote:
> On 29/07/13 17:51, Ceri Storey wrote:
>> (29/07/13 17:25), Tom Anderson wrote:
>>> On 29/07/13 13:40, Matthias Radestock wrote:
>>>> ...
>>>
>>> Aha. I didn't realise, that, thanks.
>>>
>>> What i'm looking for is a way to get some sort of feedback at the
>>> sender when a message has been acknowledged by the consumer. Given
>>> that transient messages are confirmed as soon as the message has
>>> reached the queue, and persistent messages are confirmed as soon as
>>> they are written to disk, am i right in concluding that there is no
>>> way to do this with confirms? Is there any other mechanism in
>>> RabbitMQ that might let me do this?
>>>
>>> My real goal here is to write a test for an application of ours, to
>>> assert that it is only acknowledging messages after it has
>>> successfully processed them, and not immediately on receipt. If
>>> anyone has any thoughts on how i might be able to do that, i would
>>> be very excited to hear them!
>> For your test, I'd be very tempted to provide an adapter which
>> enforces the guarantees you want to make. Then you can have tests that:
>>
>>   * For the happy path, asserts that no more messages exist on the
>>     expected (ie: that a basic.get will return no messages)
>>   * For the failure path, asserts that the sent message is available
>>     to other consumers once your adapter has properly failed and shut
>>     down.
>>
>> Granted, the latter does assume that you can shut down the adapter
>> reasonably easily.
>>
>
> Apologies if i'm being thick, but what do you mean by "adapter"? Do
> you mean code that sits between the application code and the AMQP
> library? Or code that the test can use to take a grip on the
> application code? Or something else?
Yes, sorry, that's it, so it's an interface to external infrastructure
(in this case Rabbit), that presents itself in terms of something
relevant to your application. So in my case, I tell it what what kinds
of job I want to receive, and it would call back to another object when
there is a job to be done. It's a term pulled from Alistair Cockburn's
Hexagonal Architecture
<http://alistair.cockburn.us/Hexagonal+architecture>, FWIW.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/34bd2f8e/attachment.htm>

From 0x6e6562 at gmail.com  Tue Jul 30 18:20:30 2013
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Tue, 30 Jul 2013 18:20:30 +0100
Subject: [rabbitmq-discuss] Network driver patch
In-Reply-To: <51F7B42D.9000000@rabbitmq.com>
References: <etPan.51f2404e.189a769b.14175@backd8>
	<51F7B42D.9000000@rabbitmq.com>
Message-ID: <CAB-G1jhEd8atg4RHq4KepkQhHfT2_a6VwMquLKhtzxX2GcXk1g@mail.gmail.com>

Hi Simon and Emile,

Thanks for accepting this.

Cheers,

Ben

On Tue, Jul 30, 2013 at 1:40 PM, Emile Joubert <emile at rabbitmq.com> wrote:
>
> Hi Ben,
>
> On 26/07/13 10:24, Ben Hood wrote:
>
>> I was wondering whether you'd accept this patch to the network driver.
>> It addresses a bug in the client side handling of the SASL handshake
>> which makes it difficult for the server to send the client a challenge.
>
>
> Thanks for the contribution, which fixes challenge-response
> authentication for the Erlang client. Please keep an eye on the release
> notes for when it will be included.
>
>
>
> -Emile
>
>
>
>
>

From james.r.carr at gmail.com  Tue Jul 30 21:02:14 2013
From: james.r.carr at gmail.com (James Carr)
Date: Tue, 30 Jul 2013 15:02:14 -0500
Subject: [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with
 different regions
In-Reply-To: <B12A0222-47BA-4EC7-A2A3-FACA5A1F09F3@gopivotal.com>
References: <CAJ8VZfX6nSTYpCY=vzT-TF=OgCeo5irYZ_ANPOah-Qf44HFC+w@mail.gmail.com>
	<51ED8383.2050702@rabbitmq.com>
	<CAJ8VZfWHCetQR5sCA6VGG9vRkT6hveUYFRUJWWy_rntvrSq-1w@mail.gmail.com>
	<CAE3HoVTDVdOJe7m_FCS-Ufw+5=8k-CS1c2znt+TcqPL8EOWcyA@mail.gmail.com>
	<CAJ8VZfVWQ4zM5bmiJvZY1b0NVFkFtQX1PnW68GJM5iWdnQ4unQ@mail.gmail.com>
	<51F1102C.7080403@lshift.net>
	<CAJ8VZfW1ASiUTBeMaePAjMYKkLXMQw_eaBKM6TAbdcCZ4KgL9Q@mail.gmail.com>
	<2457B7C2-7DC3-464D-B96B-6A9EF04FA426@gopivotal.com>
	<CAJ8VZfW=mWOqFeS=POBD1Q2ouJm0ej7e4QEx8XMJbc4zOVj1jg@mail.gmail.com>
	<263E81F7-5D08-41EB-A60F-17A60A00F73C@gopivotal.com>
	<CAJ8VZfV32osCNe=Z0zZ7jRXqtU=pr2c6gYRD7pGQpKX+cH7BWw@mail.gmail.com>
	<B12A0222-47BA-4EC7-A2A3-FACA5A1F09F3@gopivotal.com>
Message-ID: <CAJreXKBZ3jhmb1R456y9JAkTfrtR3pBLL6WPB-NRns1q46JXjg@mail.gmail.com>

Hi Pedro,

I just wanted to chime in and say... don't open all the ports in yours
security group! That is bad bad bad. You should only open 5672 and 15672 to
the remote host IP that you are connecting from. :)

Thanks,
James



On Thu, Jul 25, 2013 at 9:53 AM, Michael Klishin <mklishin at gopivotal.com>wrote:

> Pedro S? da Costa:
>
> > I don't know what is happening because the rabbitMQ log isn't detailed.
> Is it possible to set log level in rabbitMQ?
>
> You can use RabbitMQ management UI to inspect queues, bindings and message
> rates.
> --
> MK
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/239772be/attachment.htm>

From alexanderschatten at gmx.at  Tue Jul 30 21:06:56 2013
From: alexanderschatten at gmx.at (Alexander Schatten)
Date: Tue, 30 Jul 2013 22:06:56 +0200
Subject: [rabbitmq-discuss] Large Message Support / Stability
Message-ID: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>

I am considering to use RabbitMQ as messaging platform for a data warehouse (today we would probably call it "Big Data") type application.

The principle issue is, that we receive data from a large variety of sources; partly batch updates, partly events from sensors and the like. The idea is to have service interfaces for different data sources to the "outside" that accept the data packages and events, enrich it with metadata etc. and then dump it on RabbitMQ queues and topics.

Consumers are essentially processing units that do statistical analysis, error/warning trigger and storage modules that write raw and aggregated data into databases (PostgreSQL and most likely MongoDB).

Now, certain messages, e.g. sensor events will be rather small in size. Others like batch updates from ERP and CRM systems or containing documents might be larger; I suppose several MB up to 100 MB. I have not used messaging in such a context, but what I heard is, that other message brokers tend to have problems with large messages or start to behave erratic.

so my concrete question: has anyone experience with such a use case? 

alternatively it would be possible, to write the (large) payload immediately (at the service interface) into e.g. MongoDB and only put the reference/ID in the message. However, this would break the decoupling to a certain extent as all consumers need access to MongoDB or to a REST interface that serves the payload. Also message filtering and content based routing is limited in the latter case.

Would appreciate any comments on this issue.

Kind regards,


Alexander Schatten


--
==========================================
Dr. Alexander Schatten
==========================================
http://www.schatten.info
http://sichten.blogspot.com
Follow me at 
https://alpha.app.net/alex_buzz
http://twitter.com/alex_buzz
==========================================
"Die Grenzen meiner Sprache
bedeuten die Grenzen meiner Welt.", Wittgenstein


From francois at teksol.info  Tue Jul 30 21:20:33 2013
From: francois at teksol.info (=?iso-8859-1?Q?Fran=E7ois_Beausoleil?=)
Date: Tue, 30 Jul 2013 16:20:33 -0400
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
Message-ID: <1A570821-4DF5-4580-B8F6-7E458A04C9F5@teksol.info>

Hi,

I have never had issues exchanging 25 MiB messages. That 25 MiB message is a heartbeat that contains the state of the world. All my consumers receive and process that message every 5 minutes. The only issue I've had is consumers running out of memory and not recovering gracefully, but that's outside the scope of RabbitMQ.

Hope that helps!
Fran?ois

Le 2013-07-30 ? 16:06, Alexander Schatten a ?crit :

> I am considering to use RabbitMQ as messaging platform for a data warehouse (today we would probably call it "Big Data") type application.
> 
> The principle issue is, that we receive data from a large variety of sources; partly batch updates, partly events from sensors and the like. The idea is to have service interfaces for different data sources to the "outside" that accept the data packages and events, enrich it with metadata etc. and then dump it on RabbitMQ queues and topics.
> 
> Consumers are essentially processing units that do statistical analysis, error/warning trigger and storage modules that write raw and aggregated data into databases (PostgreSQL and most likely MongoDB).
> 
> Now, certain messages, e.g. sensor events will be rather small in size. Others like batch updates from ERP and CRM systems or containing documents might be larger; I suppose several MB up to 100 MB. I have not used messaging in such a context, but what I heard is, that other message brokers tend to have problems with large messages or start to behave erratic.
> 
> so my concrete question: has anyone experience with such a use case? 
> 
> alternatively it would be possible, to write the (large) payload immediately (at the service interface) into e.g. MongoDB and only put the reference/ID in the message. However, this would break the decoupling to a certain extent as all consumers need access to MongoDB or to a REST interface that serves the payload. Also message filtering and content based routing is limited in the latter case.
> 
> Would appreciate any comments on this issue.
> 
> Kind regards,
> 
> 
> Alexander Schatten
> 
> 
> --
> ==========================================
> Dr. Alexander Schatten
> ==========================================
> http://www.schatten.info
> http://sichten.blogspot.com
> Follow me at 
> https://alpha.app.net/alex_buzz
> http://twitter.com/alex_buzz
> ==========================================
> "Die Grenzen meiner Sprache
> bedeuten die Grenzen meiner Welt.", Wittgenstein
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4142 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/01a9e3a3/attachment.bin>

From alexanderschatten at gmx.at  Tue Jul 30 21:25:38 2013
From: alexanderschatten at gmx.at (Alexander Schatten)
Date: Tue, 30 Jul 2013 22:25:38 +0200
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <1A570821-4DF5-4580-B8F6-7E458A04C9F5@teksol.info>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
	<1A570821-4DF5-4580-B8F6-7E458A04C9F5@teksol.info>
Message-ID: <8DAEF0EF-5A3D-4538-8AD9-21AD14B2040F@gmx.at>

thanks for that comment: but this is just one 25MB message every 5 min. I am rather worried what happens if a larger number of such messages hit the broker in a shorter period of time; this could potentially lead to out of memory issues on the broker side?

Also: do you have persistent queues? 


On 30.07.2013, at 22:20, Fran?ois Beausoleil <francois at teksol.info> wrote:

> Hi,
> 
> I have never had issues exchanging 25 MiB messages. That 25 MiB message is a heartbeat that contains the state of the world. All my consumers receive and process that message every 5 minutes. The only issue I've had is consumers running out of memory and not recovering gracefully, but that's outside the scope of RabbitMQ.
> 
> Hope that helps!
> Fran?ois
> 
> Le 2013-07-30 ? 16:06, Alexander Schatten a ?crit :
> 
>> I am considering to use RabbitMQ as messaging platform for a data warehouse (today we would probably call it "Big Data") type application.
>> 
>> The principle issue is, that we receive data from a large variety of sources; partly batch updates, partly events from sensors and the like. The idea is to have service interfaces for different data sources to the "outside" that accept the data packages and events, enrich it with metadata etc. and then dump it on RabbitMQ queues and topics.
>> 
>> Consumers are essentially processing units that do statistical analysis, error/warning trigger and storage modules that write raw and aggregated data into databases (PostgreSQL and most likely MongoDB).
>> 
>> Now, certain messages, e.g. sensor events will be rather small in size. Others like batch updates from ERP and CRM systems or containing documents might be larger; I suppose several MB up to 100 MB. I have not used messaging in such a context, but what I heard is, that other message brokers tend to have problems with large messages or start to behave erratic.
>> 
>> so my concrete question: has anyone experience with such a use case? 
>> 
>> alternatively it would be possible, to write the (large) payload immediately (at the service interface) into e.g. MongoDB and only put the reference/ID in the message. However, this would break the decoupling to a certain extent as all consumers need access to MongoDB or to a REST interface that serves the payload. Also message filtering and content based routing is limited in the latter case.
>> 
>> Would appreciate any comments on this issue.
>> 
>> Kind regards,
>> 
>> 
>> Alexander Schatten
>> 
>> 
>> --
>> ==========================================
>> Dr. Alexander Schatten
>> ==========================================
>> http://www.schatten.info
>> http://sichten.blogspot.com
>> Follow me at 
>> https://alpha.app.net/alex_buzz
>> http://twitter.com/alex_buzz
>> ==========================================
>> "Die Grenzen meiner Sprache
>> bedeuten die Grenzen meiner Welt.", Wittgenstein
>> 
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

--
==========================================
Dr. Alexander Schatten
==========================================
http://www.schatten.info
http://sichten.blogspot.com
Follow me at 
https://alpha.app.net/alex_buzz
http://twitter.com/alex_buzz
==========================================
"Die Grenzen meiner Sprache
bedeuten die Grenzen meiner Welt.", Wittgenstein


From francois at teksol.info  Tue Jul 30 21:35:36 2013
From: francois at teksol.info (=?iso-8859-1?Q?Fran=E7ois_Beausoleil?=)
Date: Tue, 30 Jul 2013 16:35:36 -0400
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <8DAEF0EF-5A3D-4538-8AD9-21AD14B2040F@gmx.at>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
	<1A570821-4DF5-4580-B8F6-7E458A04C9F5@teksol.info>
	<8DAEF0EF-5A3D-4538-8AD9-21AD14B2040F@gmx.at>
Message-ID: <6020178E-7E98-41C8-AADC-8D2AA02083CA@teksol.info>


Le 2013-07-30 ? 16:25, Alexander Schatten a ?crit :

> thanks for that comment: but this is just one 25MB message every 5 min. I am rather worried what happens if a larger number of such messages hit the broker in a shorter period of time; this could potentially lead to out of memory issues on the broker side?
> 
> Also: do you have persistent queues? 

No, I use auto delete queues for that. Remember that RabbitMQ will move messages outside RAM to alleviate it's pain. I've found http://www.rabbitmq.com/memory-use.html but it's not the page I was looking for. I believe it is documented somewhere that messages are moved to disk when memory pressure exceeds a certain threshold.

Bye,
Fran?ois
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/be3860b8/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4142 bytes
Desc: not available
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/be3860b8/attachment.bin>

From jkuch at gopivotal.com  Tue Jul 30 21:53:26 2013
From: jkuch at gopivotal.com (Jerry Kuch)
Date: Tue, 30 Jul 2013 13:53:26 -0700
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <6020178E-7E98-41C8-AADC-8D2AA02083CA@teksol.info>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
	<1A570821-4DF5-4580-B8F6-7E458A04C9F5@teksol.info>
	<8DAEF0EF-5A3D-4538-8AD9-21AD14B2040F@gmx.at>
	<6020178E-7E98-41C8-AADC-8D2AA02083CA@teksol.info>
Message-ID: <CANOx8NmGydPpJzLqD-YgLeOPM8ELcBzE4A49oH36bXZj=LoHJw@mail.gmail.com>

Indeed... See here for some details:

http://www.rabbitmq.com/memory.html

On Tue, Jul 30, 2013 at 1:35 PM, Fran?ois Beausoleil
<francois at teksol.info>wrote:

>
> Le 2013-07-30 ? 16:25, Alexander Schatten a ?crit :
>
> thanks for that comment: but this is just one 25MB message every 5 min. I
> am rather worried what happens if a larger number of such messages hit the
> broker in a shorter period of time; this could potentially lead to out of
> memory issues on the broker side?
>
> Also: do you have persistent queues?
>
>
> No, I use auto delete queues for that. Remember that RabbitMQ will move
> messages outside RAM to alleviate it's pain. I've found
> http://www.rabbitmq.com/memory-use.html but it's not the page I was
> looking for. I believe it is documented somewhere that messages are moved
> to disk when memory pressure exceeds a certain threshold.
>
> Bye,
> Fran?ois
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/4c22233d/attachment.htm>

From mklishin at gopivotal.com  Tue Jul 30 21:56:26 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 31 Jul 2013 00:56:26 +0400
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <8DAEF0EF-5A3D-4538-8AD9-21AD14B2040F@gmx.at>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
	<1A570821-4DF5-4580-B8F6-7E458A04C9F5@teksol.info>
	<8DAEF0EF-5A3D-4538-8AD9-21AD14B2040F@gmx.at>
Message-ID: <58A08825-7A8E-4CA2-A753-6CF5DBF7B8A1@gopivotal.com>

Alexander Schatten:

> this could potentially lead to out of memory issues on the broker side?

Flow control won't let that happen, see
http://www.rabbitmq.com/memory.html

You do need to plan for enough capacity to avoid hitting flow control
frequently.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/66c88601/attachment.pgp>

From casey.marshall at gazzang.com  Tue Jul 30 22:05:58 2013
From: casey.marshall at gazzang.com (Casey Marshall)
Date: Tue, 30 Jul 2013 16:05:58 -0500
Subject: [rabbitmq-discuss] RabbitMQ hanging during 'rabbitmqctl stop' -
 please help
In-Reply-To: <51F79F8F.1010803@rabbitmq.com>
References: <51EE959D.1040200@gazzang.com> <51F24FC8.8000807@rabbitmq.com>
	<51F2A7BD.1040808@gazzang.com> <51F79F8F.1010803@rabbitmq.com>
Message-ID: <51F82AB6.2040003@gazzang.com>

On 07/30/2013 06:12 AM, Simon MacMullen wrote:
> On 26/07/13 17:45, Casey Marshall wrote:
>> On 07/26/2013 05:30 AM, Simon MacMullen wrote:
>>> Are you restarting the server immediately after reconfiguring
>>> federation, or some time later?
>>>
>> I'm restarting the server immediately after, on each federated node, in
>> parallel with Ansible.
> 
> Ah - you do know you don't need to restart for the changes to federation
> to take effect?
> 

Thanks for clarifying. I was the impression that this was necessary from
another source.

Today I confirmed that a service restart is in fact not required. Well,
now I feel a bit silly, but also relieved.

>> I suspect something about the other servers' upstream exchange
>> connection attempts, *during* the restart of a server, might have
>> something to do with it.
> 
> Yes - the deadlock we've found requires a (client) connection or channel
> to be opening at just the wrong point during shutdown.
> 
>> Is there a workaround I might try to avoid the deadlock?
> 
> You are much less likely to hit it if you wait a few seconds before
> restarting.
> 
> Hopefully we should have a fixed version available for test soon.
> 

That's great, I'll look out for it. I certainly have a repeatable test
environment :)

> Cheers, Simon
> 


From michael.laing at nytimes.com  Tue Jul 30 22:17:22 2013
From: michael.laing at nytimes.com (Laing, Michael)
Date: Tue, 30 Jul 2013 17:17:22 -0400
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
Message-ID: <CAKgmDnG=ShKtEDtGgKVh8wngKC7KAGMX12f8AG4WsF4E2ZMq7A@mail.gmail.com>

We have taken your alternative approach and write large payloads to S3.
They go to encrypted private buckets and we generate signed URLs to allow
access by downstream components. We employ content distribution networks
for some payloads.

As they are general purpose, we have retooled our messaging pipelines to
pass opaque messages, generally compressed binary. It is expected that any
content necessary for filtering and routing will be promoted to AMQP
headers where it is easily accessible without requiring access to the
message body. This has worked quite well in practice with our internal
clients.

Like you, we gather a diverse set of inputs. However we distribute payloads
globally, sometimes to millions of endpoints, and that affects our approach.

Michael Laing
NYTimes




On Tue, Jul 30, 2013 at 4:06 PM, Alexander Schatten <
alexanderschatten at gmx.at> wrote:

> I am considering to use RabbitMQ as messaging platform for a data
> warehouse (today we would probably call it "Big Data") type application.
>
> The principle issue is, that we receive data from a large variety of
> sources; partly batch updates, partly events from sensors and the like. The
> idea is to have service interfaces for different data sources to the
> "outside" that accept the data packages and events, enrich it with metadata
> etc. and then dump it on RabbitMQ queues and topics.
>
> Consumers are essentially processing units that do statistical analysis,
> error/warning trigger and storage modules that write raw and aggregated
> data into databases (PostgreSQL and most likely MongoDB).
>
> Now, certain messages, e.g. sensor events will be rather small in size.
> Others like batch updates from ERP and CRM systems or containing documents
> might be larger; I suppose several MB up to 100 MB. I have not used
> messaging in such a context, but what I heard is, that other message
> brokers tend to have problems with large messages or start to behave
> erratic.
>
> so my concrete question: has anyone experience with such a use case?
>
> alternatively it would be possible, to write the (large) payload
> immediately (at the service interface) into e.g. MongoDB and only put the
> reference/ID in the message. However, this would break the decoupling to a
> certain extent as all consumers need access to MongoDB or to a REST
> interface that serves the payload. Also message filtering and content based
> routing is limited in the latter case.
>
> Would appreciate any comments on this issue.
>
> Kind regards,
>
>
> Alexander Schatten
>
>
> --
> ==========================================
> Dr. Alexander Schatten
> ==========================================
> http://www.schatten.info
> http://sichten.blogspot.com
> Follow me at
> https://alpha.app.net/alex_buzz
> http://twitter.com/alex_buzz
> ==========================================
> "Die Grenzen meiner Sprache
> bedeuten die Grenzen meiner Welt.", Wittgenstein
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/50b3c88e/attachment.htm>

From alan.antonuk at gmail.com  Wed Jul 31 00:00:41 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 30 Jul 2013 16:00:41 -0700
Subject: [rabbitmq-discuss] Consumer Cancel Notifications in rabbitmq-c
	or SimpleAmqpClient?
In-Reply-To: <CAHEpgBDZ1QJwtXxnzpB6fqhrMPe5caTUth33FxYG6kwQL20Suw@mail.gmail.com>
References: <CAHEpgBDZ1QJwtXxnzpB6fqhrMPe5caTUth33FxYG6kwQL20Suw@mail.gmail.com>
Message-ID: <CAAt2poJtOH=SipEX3JTfhrGDJ0cWqP0XmdAkH2LwRyJ8dt9hJA@mail.gmail.com>

> Does rabbitmq-c or SimpleAmqpClient handle consumer cancellation
> notifications?
>

At present SimpleAmqpClient does not support consumer cancellation
notification.

rabbitmq-c supports consumer cancellation notification, but by default does
not enable it, nor does it provide much of an API for consumer cancellation.


> If so, is there any documentation or examples?
>

Not currently (documentation for rabbitmq-c is something that is actively
being worked on currently). That said, I've modified the amqp_consumer.c
example to support consumer cancellation notification, you can find this
modified version here:
https://github.com/alanxz/rabbitmq-c/blob/consumer_cancel_example/examples/amqp_consumer.c
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/761bb06a/attachment.htm>

From alan.antonuk at gmail.com  Wed Jul 31 00:02:59 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 30 Jul 2013 16:02:59 -0700
Subject: [rabbitmq-discuss] Consumer Cancel Notifications in rabbitmq-c
	or SimpleAmqpClient?
In-Reply-To: <CAAt2poJtOH=SipEX3JTfhrGDJ0cWqP0XmdAkH2LwRyJ8dt9hJA@mail.gmail.com>
References: <CAHEpgBDZ1QJwtXxnzpB6fqhrMPe5caTUth33FxYG6kwQL20Suw@mail.gmail.com>
	<CAAt2poJtOH=SipEX3JTfhrGDJ0cWqP0XmdAkH2LwRyJ8dt9hJA@mail.gmail.com>
Message-ID: <CAAt2poJFy7vSSv+70OrSZBZROVuhibfpFukQmHyuSQR5BDN70A@mail.gmail.com>

Here's a link to the example that won't change when I update the
consumer_cancel_example branch:

https://github.com/alanxz/rabbitmq-c/blob/eff8134876282f2ba5a48b800109e300bcb3474f/examples/amqp_consumer.c


On Tue, Jul 30, 2013 at 4:00 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

>
> Does rabbitmq-c or SimpleAmqpClient handle consumer cancellation
>> notifications?
>>
>
> At present SimpleAmqpClient does not support consumer cancellation
> notification.
>
> rabbitmq-c supports consumer cancellation notification, but by default
> does not enable it, nor does it provide much of an API for consumer
> cancellation.
>
>
>> If so, is there any documentation or examples?
>>
>
> Not currently (documentation for rabbitmq-c is something that is actively
> being worked on currently). That said, I've modified the amqp_consumer.c
> example to support consumer cancellation notification, you can find this
> modified version here:
>
> https://github.com/alanxz/rabbitmq-c/blob/consumer_cancel_example/examples/amqp_consumer.c
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/ce1f2aae/attachment.htm>

From stuff at moesel.net  Wed Jul 31 00:09:09 2013
From: stuff at moesel.net (Chris)
Date: Tue, 30 Jul 2013 19:09:09 -0400
Subject: [rabbitmq-discuss] Consumer Cancel Notifications in rabbitmq-c
	or SimpleAmqpClient?
In-Reply-To: <CAAt2poJFy7vSSv+70OrSZBZROVuhibfpFukQmHyuSQR5BDN70A@mail.gmail.com>
References: <CAHEpgBDZ1QJwtXxnzpB6fqhrMPe5caTUth33FxYG6kwQL20Suw@mail.gmail.com>
	<CAAt2poJtOH=SipEX3JTfhrGDJ0cWqP0XmdAkH2LwRyJ8dt9hJA@mail.gmail.com>
	<CAAt2poJFy7vSSv+70OrSZBZROVuhibfpFukQmHyuSQR5BDN70A@mail.gmail.com>
Message-ID: <CAHEpgBAag4vU5yL5vqDg_G2K33bnnOOPF6gbM2kj1JgQx2PuVw@mail.gmail.com>

Thanks, Alan!  This is helpful!  BTW, if you're taking a tally, count this
as a vote for supporting consumer cancellation notification in
SimpleAmqpClient too. ;-)

-Chris


On Tue, Jul 30, 2013 at 7:02 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:

> Here's a link to the example that won't change when I update the
> consumer_cancel_example branch:
>
>
> https://github.com/alanxz/rabbitmq-c/blob/eff8134876282f2ba5a48b800109e300bcb3474f/examples/amqp_consumer.c
>
>
> On Tue, Jul 30, 2013 at 4:00 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>
>>
>> Does rabbitmq-c or SimpleAmqpClient handle consumer cancellation
>>> notifications?
>>>
>>
>> At present SimpleAmqpClient does not support consumer cancellation
>> notification.
>>
>> rabbitmq-c supports consumer cancellation notification, but by default
>> does not enable it, nor does it provide much of an API for consumer
>> cancellation.
>>
>>
>>> If so, is there any documentation or examples?
>>>
>>
>> Not currently (documentation for rabbitmq-c is something that is actively
>> being worked on currently). That said, I've modified the amqp_consumer.c
>> example to support consumer cancellation notification, you can find this
>> modified version here:
>>
>> https://github.com/alanxz/rabbitmq-c/blob/consumer_cancel_example/examples/amqp_consumer.c
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/5d65a3cf/attachment.htm>

From alan.antonuk at gmail.com  Wed Jul 31 00:18:13 2013
From: alan.antonuk at gmail.com (Alan Antonuk)
Date: Tue, 30 Jul 2013 16:18:13 -0700
Subject: [rabbitmq-discuss] Consumer Cancel Notifications in rabbitmq-c
	or SimpleAmqpClient?
In-Reply-To: <CAHEpgBAag4vU5yL5vqDg_G2K33bnnOOPF6gbM2kj1JgQx2PuVw@mail.gmail.com>
References: <CAHEpgBDZ1QJwtXxnzpB6fqhrMPe5caTUth33FxYG6kwQL20Suw@mail.gmail.com>
	<CAAt2poJtOH=SipEX3JTfhrGDJ0cWqP0XmdAkH2LwRyJ8dt9hJA@mail.gmail.com>
	<CAAt2poJFy7vSSv+70OrSZBZROVuhibfpFukQmHyuSQR5BDN70A@mail.gmail.com>
	<CAHEpgBAag4vU5yL5vqDg_G2K33bnnOOPF6gbM2kj1JgQx2PuVw@mail.gmail.com>
Message-ID: <CAAt2poKmtaybPdjUDffEMSkfrNV+bjStZM7uNzc32YUZ9o2a2g@mail.gmail.com>

Noted:
https://github.com/alanxz/SimpleAmqpClient/issues/61


On Tue, Jul 30, 2013 at 4:09 PM, Chris <stuff at moesel.net> wrote:

> Thanks, Alan!  This is helpful!  BTW, if you're taking a tally, count this
> as a vote for supporting consumer cancellation notification in
> SimpleAmqpClient too. ;-)
>
> -Chris
>
>
> On Tue, Jul 30, 2013 at 7:02 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>
>> Here's a link to the example that won't change when I update the
>> consumer_cancel_example branch:
>>
>>
>> https://github.com/alanxz/rabbitmq-c/blob/eff8134876282f2ba5a48b800109e300bcb3474f/examples/amqp_consumer.c
>>
>>
>> On Tue, Jul 30, 2013 at 4:00 PM, Alan Antonuk <alan.antonuk at gmail.com>wrote:
>>
>>>
>>> Does rabbitmq-c or SimpleAmqpClient handle consumer cancellation
>>>> notifications?
>>>>
>>>
>>> At present SimpleAmqpClient does not support consumer cancellation
>>> notification.
>>>
>>> rabbitmq-c supports consumer cancellation notification, but by default
>>> does not enable it, nor does it provide much of an API for consumer
>>> cancellation.
>>>
>>>
>>>> If so, is there any documentation or examples?
>>>>
>>>
>>> Not currently (documentation for rabbitmq-c is something that is
>>> actively being worked on currently). That said, I've modified the
>>> amqp_consumer.c example to support consumer cancellation notification, you
>>> can find this modified version here:
>>>
>>> https://github.com/alanxz/rabbitmq-c/blob/consumer_cancel_example/examples/amqp_consumer.c
>>>
>>>
>>
>> _______________________________________________
>> rabbitmq-discuss mailing list
>> rabbitmq-discuss at lists.rabbitmq.com
>> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>>
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/6116579e/attachment.htm>

From jonathan.heaton at gmail.com  Tue Jul 30 15:01:33 2013
From: jonathan.heaton at gmail.com (Jonathan Heaton)
Date: Tue, 30 Jul 2013 15:01:33 +0100
Subject: [rabbitmq-discuss] x-max-length not working
Message-ID: <CAG3nOCKgUozskzbMV-ZtYMfQoF+mWk3g0HZjeM9qTjxSMpwMZg@mail.gmail.com>

Hi Guys,

I can't get Rabbitmq to limit the queue length.  Can anyone see whats up
with this?


Im using amqplib

args = {"x-max-length":20}
self.channel.queue_declare(queue=self.queue_name, durable=durable,
            exclusive=exclusive, auto_delete=auto_delete, arguments=args)

Thanks

Jon


-- 
---------------------------------
J Heaton
07545765521
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/fead689f/attachment.htm>

From whitefes at gmail.com  Wed Jul 31 03:22:00 2013
From: whitefes at gmail.com (Cheolseung Baek)
Date: Tue, 30 Jul 2013 19:22:00 -0700 (PDT)
Subject: [rabbitmq-discuss] connection timeout error in
	ConnectionFactory.newConnection (java)
Message-ID: <82b9ea44-52e2-4fc9-9907-55023f576c77@googlegroups.com>

ConnectionFactory.newConnection return connection timeout exception

The following shall be attached to the exception message.

java.io.IOException

           at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)

           at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)

           at 
com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:360)

           at 
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)

           at 
com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:488)

           ,,,,,,,,,,,,,,

           at java.lang.Thread.run(Thread.java:679)

Caused by: com.rabbitmq.client.ShutdownSignalException: connection error; 
reason: java.net.SocketTimeoutException: Timeout during Connection 
negotiation

           at 
com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)

           at 
com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)

           at 
com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)

           at 
com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:313)

           ... 7 more

Caused by: java.net.SocketTimeoutException: Timeout during Connection 
negotiation

           at 
com.rabbitmq.client.impl.AMQConnection.handleSocketTimeout(AMQConnection.java:566)

           at 
com.rabbitmq.client.impl.AMQConnection.access$500(AMQConnection.java:59)

           at 
com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:541)

java.lang.NullPointerException

           ..........................

           at java.lang.Thread.run(Thread.java:679)


also attach sasl log 

=SUPERVISOR REPORT==== Reason: noproc

What is the reason of the problem


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130730/9852ebda/attachment.htm>

From mklishin at gopivotal.com  Wed Jul 31 06:35:27 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 31 Jul 2013 09:35:27 +0400
Subject: [rabbitmq-discuss] connection timeout error in
	ConnectionFactory.newConnection (java)
In-Reply-To: <82b9ea44-52e2-4fc9-9907-55023f576c77@googlegroups.com>
References: <82b9ea44-52e2-4fc9-9907-55023f576c77@googlegroups.com>
Message-ID: <49A03DEA-F131-464A-A011-D127F1560C11@gopivotal.com>

Cheolseung Baek:

> also attach sasl log 

Can you please post what's in the non-sasl RabbitMQ log?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/7f22d637/attachment.pgp>

From mklishin at gopivotal.com  Wed Jul 31 06:37:24 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 31 Jul 2013 09:37:24 +0400
Subject: [rabbitmq-discuss] x-max-length not working
In-Reply-To: <CAG3nOCKgUozskzbMV-ZtYMfQoF+mWk3g0HZjeM9qTjxSMpwMZg@mail.gmail.com>
References: <CAG3nOCKgUozskzbMV-ZtYMfQoF+mWk3g0HZjeM9qTjxSMpwMZg@mail.gmail.com>
Message-ID: <1FCE9CE3-A608-4799-B454-C9BE4AEAD75D@gopivotal.com>

Jonathan Heaton:

> I can't get Rabbitmq to limit the queue length.  Can anyone see whats up with this?

The code looks OK.

Are you sure you are running RabbitMQ 3.1? That's the first version to introduce
queue length limits.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/1eddc964/attachment.pgp>

From michael.s.klishin at gmail.com  Wed Jul 31 07:49:09 2013
From: michael.s.klishin at gmail.com (Michael Klishin)
Date: Wed, 31 Jul 2013 10:49:09 +0400
Subject: [rabbitmq-discuss] ANN Langohr 1.1.0 is released
Message-ID: <CAE3HoVTGZJyky660zJSzo7AC1FCSGPZJfWsi7oT59oc-y5vo0w@mail.gmail.com>

Langohr [1] is a small, feature complete Clojure RabbitMQ client.


1.1 is a minor feature release that improves RabbitMQ HTTP API support,
contributed by Steffen Dienst. There are no breaking API changes in this
release.

Release notes:
http://blog.clojurewerkz.org/blog/2013/07/31/langohr-1-dot-1-0-is-released/

1. http://clojurerabbitmq.info
-- 
MK

http://github.com/michaelklishin
http://twitter.com/michaelklishin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/9e095948/attachment.htm>

From alexanderschatten at gmx.at  Wed Jul 31 08:48:20 2013
From: alexanderschatten at gmx.at (Alexander Schatten)
Date: Wed, 31 Jul 2013 09:48:20 +0200
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <CAKgmDnG=ShKtEDtGgKVh8wngKC7KAGMX12f8AG4WsF4E2ZMq7A@mail.gmail.com>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
	<CAKgmDnG=ShKtEDtGgKVh8wngKC7KAGMX12f8AG4WsF4E2ZMq7A@mail.gmail.com>
Message-ID: <8C1621CD-1354-4603-BF80-2340A716F78C@gmx.at>

Michael,

thanks for your insight. That is indeed an interesting approach. Our app consumers are most likely not as widely distributed as yours, but the encrypted bucket idea is an interesting one indeed. 

However, keeping payload external has further drawbacks, e.g. when can I delete the payload, if at all (that is, how would I know when the last guest has arrived to eat lunch before I remove the buffet *g*)

From a "simplicity" point of view, I would prefer to dump the stuff into the message; however, my gut feeling calls "trouble"!!

thanks a lot for sharing your experiences.


Kind regards,


Alexander Schatten

On 30.07.2013, at 23:17, "Laing, Michael" <michael.laing at nytimes.com> wrote:

> We have taken your alternative approach and write large payloads to S3. They go to encrypted private buckets and we generate signed URLs to allow access by downstream components. We employ content distribution networks for some payloads.
> 
> As they are general purpose, we have retooled our messaging pipelines to pass opaque messages, generally compressed binary. It is expected that any content necessary for filtering and routing will be promoted to AMQP headers where it is easily accessible without requiring access to the message body. This has worked quite well in practice with our internal clients.
> 
> Like you, we gather a diverse set of inputs. However we distribute payloads globally, sometimes to millions of endpoints, and that affects our approach.
> 
> Michael Laing
> NYTimes
> 
--
==========================================
Dr. Alexander Schatten
==========================================
http://www.schatten.info
http://sichten.blogspot.com
Follow me at 
https://alpha.app.net/alex_buzz
http://twitter.com/alex_buzz
==========================================
"Die Selektion hat uns Anschauungsformen gem?? den Aufgaben in noch h?chst einfachen Lebensbereichen eingebaut. Und mit Anschauungen von gestern unterwerfen wir uns eine Welt von morgen.", Rupert Riedl


From matthias at rabbitmq.com  Wed Jul 31 09:09:35 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 31 Jul 2013 09:09:35 +0100
Subject: [rabbitmq-discuss] connection timeout error in
 ConnectionFactory.newConnection (java)
In-Reply-To: <49A03DEA-F131-464A-A011-D127F1560C11@gopivotal.com>
References: <82b9ea44-52e2-4fc9-9907-55023f576c77@googlegroups.com>
	<49A03DEA-F131-464A-A011-D127F1560C11@gopivotal.com>
Message-ID: <51F8C63F.6000507@rabbitmq.com>

On 31/07/13 06:35, Michael Klishin wrote:
> Cheolseung Baek:
>
>> also attach sasl log
>
> Can you please post what's in the non-sasl RabbitMQ log?

plus the *complete* contents of the sasl log!

Matthias.


From matthias at rabbitmq.com  Wed Jul 31 09:12:10 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 31 Jul 2013 09:12:10 +0100
Subject: [rabbitmq-discuss] Large Message Support / Stability
In-Reply-To: <8C1621CD-1354-4603-BF80-2340A716F78C@gmx.at>
References: <CE70F986-2966-470A-A12D-B579DE7DE91D@gmx.at>
	<CAKgmDnG=ShKtEDtGgKVh8wngKC7KAGMX12f8AG4WsF4E2ZMq7A@mail.gmail.com>
	<8C1621CD-1354-4603-BF80-2340A716F78C@gmx.at>
Message-ID: <51F8C6DA.1050107@rabbitmq.com>

Alexander,

On 31/07/13 08:48, Alexander Schatten wrote:
> From a "simplicity" point of view, I would prefer to dump the stuff
> into the message; however, my gut feeling calls "trouble"!!

You should be fine. Rabbits paging will actually work better the larger 
the messages are.

Run some experiments.

Matthias.

From tom.anderson at timgroup.com  Wed Jul 31 12:15:45 2013
From: tom.anderson at timgroup.com (Tom Anderson)
Date: Wed, 31 Jul 2013 12:15:45 +0100
Subject: [rabbitmq-discuss] Trouble with confirms
In-Reply-To: <51F7E437.3030106@lshift.net>
References: <51F2B1F9.1020805@timgroup.com>	<51F2F91B.8080506@rabbitmq.com>	<51F66073.6020603@timgroup.com>	<51F662A6.3060006@rabbitmq.com>	<51F69780.6080602@timgroup.com>	<51F69D9D.9000704@lshift.net>
	<51F7DBFE.1020306@timgroup.com> <51F7E437.3030106@lshift.net>
Message-ID: <51F8F1E1.5080309@timgroup.com>

On 30/07/13 17:05, Ceri Storey wrote:
> (30/07/13 16:30), Tom Anderson wrote:
>> On 29/07/13 17:51, Ceri Storey wrote:
>>> (29/07/13 17:25), Tom Anderson wrote:
>>>> On 29/07/13 13:40, Matthias Radestock wrote:
>>>>> ...
>>>>
>>>> Aha. I didn't realise, that, thanks.
>>>>
>>>> What i'm looking for is a way to get some sort of feedback at the 
>>>> sender when a message has been acknowledged by the consumer. Given 
>>>> that transient messages are confirmed as soon as the message has 
>>>> reached the queue, and persistent messages are confirmed as soon as 
>>>> they are written to disk, am i right in concluding that there is no 
>>>> way to do this with confirms? Is there any other mechanism in 
>>>> RabbitMQ that might let me do this?
>>>>
>>>> My real goal here is to write a test for an application of ours, to 
>>>> assert that it is only acknowledging messages after it has 
>>>> successfully processed them, and not immediately on receipt. If 
>>>> anyone has any thoughts on how i might be able to do that, i would 
>>>> be very excited to hear them!
>>> For your test, I'd be very tempted to provide an adapter which 
>>> enforces the guarantees you want to make. Then you can have tests that:
>>>
>>>   * For the happy path, asserts that no more messages exist on the
>>>     expected (ie: that a basic.get will return no messages)
>>>   * For the failure path, asserts that the sent message is available
>>>     to other consumers once your adapter has properly failed and
>>>     shut down.
>>>
>>> Granted, the latter does assume that you can shut down the adapter 
>>> reasonably easily.
>>>
>>
>> Apologies if i'm being thick, but what do you mean by "adapter"? Do 
>> you mean code that sits between the application code and the AMQP 
>> library? Or code that the test can use to take a grip on the 
>> application code? Or something else?
> Yes, sorry, that's it, so it's an interface to external infrastructure 
> (in this case Rabbit), that presents itself in terms of something 
> relevant to your application. So in my case, I tell it what what kinds 
> of job I want to receive, and it would call back to another object 
> when there is a job to be done. It's a term pulled from Alistair 
> Cockburn's Hexagonal Architecture 
> <http://alistair.cockburn.us/Hexagonal+architecture>, FWIW.

Maybe also similar to Nat Pryce's 'simplicator' then:

http://www.natpryce.com/articles/000785.html

The thing is, what i really want to test, because it's the thing i have 
most uncertainty about, is my usage of the RabbitMQ API. That would be 
in the adaptor. So, introducing that adaptor would let me write tests 
around the logic inside the application, but they would be rather 
vacuous, and they would leave the scary bit untested.

It is probably still worth driving a plane of fracture through the 
system above the RabbitMQ API and unit-testing that, though. I can then 
at least be confident that bugs are boxed into the API-using code, and 
then write the best end-to-end integration test i can manage, even if 
it's not rock solid.

tom

-- 

Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com 
<http://timgroup.com/>

STATEMENT OF CONFIDENTIALITY: The information contained in this 
electronic message and any attachments to this message are intended for 
the exclusive use of the addressee(s) and may contain confidential or 
privileged information. If you are not the intended recipient, please 
notify Tom Anderson at TIM Group at tom.anderson at timgroup.com and 
destroy all copies of this message and any attachments.

TIM Group is the trading name for YouDevise Limited. YouDevise Limited 
is registered in England, No. 3331176. Registered office: 3 Copthall 
Avenue, London, EC2R 7BH.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/dfa92dfb/attachment.htm>

From tilak.chauhan at ymail.com  Wed Jul 31 12:20:17 2013
From: tilak.chauhan at ymail.com (tluck)
Date: Wed, 31 Jul 2013 04:20:17 -0700 (PDT)
Subject: [rabbitmq-discuss] messages are sync on all cluster nodes !
Message-ID: <1375269617178-28513.post@n5.nabble.com>

Hi,

I've 5 consumer servers which are responsible for consuming messages from
rabbitmq queues and they all are connected through rabbitmq clustering. I've
total 5 queues and all consumers consume messages from them. Recently I've
started to face a trouble with some of the consumer servers. Whenever I
publish new messages into a particular queue then only 1 consumer is
consuming messages from that queue and rest of servers are sitting idle /
consuming messages from other queues (but not from that particular queue).

When I logged into each consumer servers to check if they are still running
then I found they all are still running/connected with rmq clustering. But,
when I ran below command on each server then I found that only 1 consumer
(which is consuming messages from that queue) has message count for the
queue and all other consumer servers have 0 as message count for that
perticular queue.

/usr/sbin/rabbitmqctl list_queues name  messages

How could this be possible ? I've checked cluster status and all the notes
are running. why messages are not being updated on all other consumer severs
for that particular queue ? (however, everything is working fine for other
queues). 


Please help.

Thanks,
T.luck



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/messages-are-sync-on-all-cluster-nodes-tp28513.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From inforser.analytics at gmail.com  Wed Jul 31 12:38:42 2013
From: inforser.analytics at gmail.com (inforser.analytics at gmail.com)
Date: Wed, 31 Jul 2013 04:38:42 -0700 (PDT)
Subject: [rabbitmq-discuss] Possible bug in .NET library, with IConnection
Message-ID: <b9d00605-68ee-421c-a150-fdf08c17ff77@googlegroups.com>

{AMQP close-reason, initiated by Library, code=541, text="Unexpected 
Exception", classId=0, methodId=0, cause=System.NullReferenceException: 
Object reference not set to an instance of an object.
   at RabbitMQ.Client.Impl.ModelBase.HandleBasicGetEmpty()
   at 
RabbitMQ.Client.Framing.Impl.v0_9_1.Model.DispatchAsynchronous(Command cmd)
   at RabbitMQ.Client.Impl.ModelBase.HandleCommand(ISession session, 
Command cmd)
   at RabbitMQ.Client.Impl.SessionBase.OnCommandReceived(Command cmd)
   at RabbitMQ.Client.Impl.Session.HandleFrame(Frame frame)
   at RabbitMQ.Client.Impl.ConnectionBase.MainLoopIteration()
   at RabbitMQ.Client.Impl.ConnectionBase.MainLoop()}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/d1ba3d65/attachment.htm>

From inforser.analytics at gmail.com  Wed Jul 31 12:54:24 2013
From: inforser.analytics at gmail.com (inforser.analytics at gmail.com)
Date: Wed, 31 Jul 2013 04:54:24 -0700 (PDT)
Subject: [rabbitmq-discuss] Possible bug in .NET library,
	with IConnection
In-Reply-To: <b9d00605-68ee-421c-a150-fdf08c17ff77@googlegroups.com>
References: <b9d00605-68ee-421c-a150-fdf08c17ff77@googlegroups.com>
Message-ID: <f3e6698b-5646-4a43-b58d-9423afe06049@googlegroups.com>

I guess the problem in m_continuationQueue.Next() which returns null,
And this is wront usage of Next() acroding to RpcContinuationQueue.Next()
    /// <summary>
    /// Retrieve the next waiting continuation.
    /// </summary>
    /// 
    /// <remarks>
    /// 
    /// <para>
    /// It is an error to call this method when there are no
    ///              waiting continuations. In the current implementation, 
if
    ///              this happens, null will be returned (which will usually
    ///              result in an immediate NullPointerException in the
    ///              caller). Correct code will always arrange for a
    ///              continuation to have been Enqueue()d before calling 
this
    ///              method.
    /// 
    /// </para>
    /// 
    /// </remarks>
    public IRpcContinuation Next()
    {
      lock (this.m_outstandingRpcLock)
      {
        IRpcContinuation local_0 = this.m_outstandingRpc;
        this.m_outstandingRpc = (IRpcContinuation) null;
        return local_0;
      }
    }


?????, 31 ???? 2013 ?., 15:38:42 UTC+4 ???????????? inforser.... at gmail.com 
???????:
>
> {AMQP close-reason, initiated by Library, code=541, text="Unexpected 
> Exception", classId=0, methodId=0, cause=System.NullReferenceException: 
> Object reference not set to an instance of an object.
>    at RabbitMQ.Client.Impl.ModelBase.HandleBasicGetEmpty()
>    at 
> RabbitMQ.Client.Framing.Impl.v0_9_1.Model.DispatchAsynchronous(Command cmd)
>    at RabbitMQ.Client.Impl.ModelBase.HandleCommand(ISession session, 
> Command cmd)
>    at RabbitMQ.Client.Impl.SessionBase.OnCommandReceived(Command cmd)
>    at RabbitMQ.Client.Impl.Session.HandleFrame(Frame frame)
>    at RabbitMQ.Client.Impl.ConnectionBase.MainLoopIteration()
>    at RabbitMQ.Client.Impl.ConnectionBase.MainLoop()}
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/b8efa1ad/attachment.htm>

From marcos.torres at gmail.com  Wed Jul 31 14:18:31 2013
From: marcos.torres at gmail.com (Marcos Torres)
Date: Wed, 31 Jul 2013 10:18:31 -0300
Subject: [rabbitmq-discuss] Possible bug in .NET library,
	with IConnection
In-Reply-To: <f3e6698b-5646-4a43-b58d-9423afe06049@googlegroups.com>
References: <b9d00605-68ee-421c-a150-fdf08c17ff77@googlegroups.com>
	<f3e6698b-5646-4a43-b58d-9423afe06049@googlegroups.com>
Message-ID: <CAP4Ah2C5aTreMzrN7uQO14qpKZpNUKiFDSUEZHrKu=VdYyQU7g@mail.gmail.com>

Since I'm using the .NET libraries, I'm interested on this. Is it possible
to provide a reproducible case?

Thanks


On Wed, Jul 31, 2013 at 8:54 AM, <inforser.analytics at gmail.com> wrote:

> I guess the problem in m_continuationQueue.Next() which returns null,
> And this is wront usage of Next() acroding to RpcContinuationQueue.Next()
>     /// <summary>
>     /// Retrieve the next waiting continuation.
>     /// </summary>
>     ///
>     /// <remarks>
>     ///
>     /// <para>
>     /// It is an error to call this method when there are no
>     ///              waiting continuations. In the current implementation,
> if
>     ///              this happens, null will be returned (which will
> usually
>     ///              result in an immediate NullPointerException in the
>     ///              caller). Correct code will always arrange for a
>     ///              continuation to have been Enqueue()d before calling
> this
>     ///              method.
>     ///
>     /// </para>
>     ///
>     /// </remarks>
>     public IRpcContinuation Next()
>     {
>       lock (this.m_outstandingRpcLock)
>       {
>         IRpcContinuation local_0 = this.m_outstandingRpc;
>         this.m_outstandingRpc = (IRpcContinuation) null;
>         return local_0;
>       }
>     }
>
>
> ?????, 31 ???? 2013 ?., 15:38:42 UTC+4 ???????????? inforser.... at gmail.com???????:
>
>> {AMQP close-reason, initiated by Library, code=541, text="Unexpected
>> Exception", classId=0, methodId=0, cause=System.**NullReferenceException:
>> Object reference not set to an instance of an object.
>>    at RabbitMQ.Client.Impl.**ModelBase.HandleBasicGetEmpty(**)
>>    at RabbitMQ.Client.Framing.Impl.**v0_9_1.Model.**DispatchAsynchronous(Command
>> cmd)
>>    at RabbitMQ.Client.Impl.**ModelBase.HandleCommand(**ISession session,
>> Command cmd)
>>    at RabbitMQ.Client.Impl.**SessionBase.OnCommandReceived(**Command cmd)
>>    at RabbitMQ.Client.Impl.Session.**HandleFrame(Frame frame)
>>    at RabbitMQ.Client.Impl.**ConnectionBase.**MainLoopIteration()
>>    at RabbitMQ.Client.Impl.**ConnectionBase.MainLoop()}
>>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/3a93aa15/attachment.htm>

From ftranier at digitalvirgo.com  Wed Jul 31 14:06:22 2013
From: ftranier at digitalvirgo.com (Fabrice TRANIER)
Date: Wed, 31 Jul 2013 13:06:22 +0000
Subject: [rabbitmq-discuss]  Any rabbitmq consultants in Paris
Message-ID: <BF227D8B1B2A9646A3ECFEF2EDBAD49F031BA0C2@AM2PRD0710MB374.eurprd07.prod.outlook.com>

Hi,

I'm looking for a RabbitMQ consultant in Paris.
Could you send me contact list ?

BR

[signftranier.php]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/90547462/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 8300 bytes
Desc: image001.gif
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/90547462/attachment.gif>

From Petr.Gotthard at Honeywell.com  Wed Jul 31 16:06:07 2013
From: Petr.Gotthard at Honeywell.com (Gotthard, Petr)
Date: Wed, 31 Jul 2013 15:06:07 +0000
Subject: [rabbitmq-discuss] RabbitMQ and AMQP 0-10?
Message-ID: <F9E85480F62349458DF67CE8BA000D8D2D36B737@FR44EX3005.global.ds.honeywell.com>

Hello,
Could you please clarify a bit what is so different in AMQP 0-10 so that "RabbitMQ is unlikely ever to support AMQP 0-10" as said  here: https://www.rabbitmq.com/specification.html?

Thanks,
Petr

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/84a264c4/attachment.htm>

From simon at rabbitmq.com  Wed Jul 31 16:31:52 2013
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 31 Jul 2013 16:31:52 +0100
Subject: [rabbitmq-discuss] RabbitMQ and AMQP 0-10?
In-Reply-To: <F9E85480F62349458DF67CE8BA000D8D2D36B737@FR44EX3005.global.ds.honeywell.com>
References: <F9E85480F62349458DF67CE8BA000D8D2D36B737@FR44EX3005.global.ds.honeywell.com>
Message-ID: <51F92DE8.30908@rabbitmq.com>

On 31/07/13 16:06, Gotthard, Petr wrote:
> Could you please clarify a bit what is so different in AMQP 0-10 so that
> ?RabbitMQ is unlikely ever to support AMQP 0-10? as said  here:
> https://www.rabbitmq.com/specification.html?

Pretty much everything is different.

You should probably download and read the AMQP 0-10 spec from 
http://www.amqp.org/specification/0-10/amqp-org-download to get a good 
handle on that question.

But AMQP 0-9-1, 0-10 and 1.0 really are all quite different from each 
other. They all have different codecs, different commands sets, and 
different semantics.

The AMQP 1.0 implementation in RabbitMQ shares essentially no code in 
common with the 0-9-1 implementation. Any putative support for 0-10 
would be another from-scratch implementation - and we don't really see 
there being enough demand for it.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal

From alexis at rabbitmq.com  Wed Jul 31 16:32:48 2013
From: alexis at rabbitmq.com (Alexis Richardson)
Date: Wed, 31 Jul 2013 16:32:48 +0100
Subject: [rabbitmq-discuss] RabbitMQ and AMQP 0-10?
In-Reply-To: <F9E85480F62349458DF67CE8BA000D8D2D36B737@FR44EX3005.global.ds.honeywell.com>
References: <F9E85480F62349458DF67CE8BA000D8D2D36B737@FR44EX3005.global.ds.honeywell.com>
Message-ID: <CACOPnvcFqTf1KCqMA_ELcuh7tgo+Pg0dY12rS6XHY1NFAPrt2A@mail.gmail.com>

Petr

0-10 is several hundred pages long and has very little client support.
 It attempts to add a number of features that are better done in other
ways.

alexis


On Wed, Jul 31, 2013 at 4:06 PM, Gotthard, Petr
<Petr.Gotthard at honeywell.com> wrote:
> Hello,
>
> Could you please clarify a bit what is so different in AMQP 0-10 so that
> ?RabbitMQ is unlikely ever to support AMQP 0-10? as said  here:
> https://www.rabbitmq.com/specification.html?
>
>
>
> Thanks,
>
> Petr
>
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>

From matthias at rabbitmq.com  Wed Jul 31 16:35:21 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 31 Jul 2013 16:35:21 +0100
Subject: [rabbitmq-discuss] RabbitMQ and AMQP 0-10?
In-Reply-To: <51F92DE8.30908@rabbitmq.com>
References: <F9E85480F62349458DF67CE8BA000D8D2D36B737@FR44EX3005.global.ds.honeywell.com>
	<51F92DE8.30908@rabbitmq.com>
Message-ID: <51F92EB9.8080701@rabbitmq.com>

On 31/07/13 16:31, Simon MacMullen wrote:
> But AMQP 0-9-1, 0-10 and 1.0 really are all quite different from each
> other. They all have different codecs, different commands sets, and
> different semantics.

It's also worth noting that AMQP 0-9-1 was released *after* 0-10.

Regards,

Matthias.

From brokenpipe.coder at gmail.com  Wed Jul 31 16:09:03 2013
From: brokenpipe.coder at gmail.com (Burtsev Aleksey)
Date: Wed, 31 Jul 2013 08:09:03 -0700 (PDT)
Subject: [rabbitmq-discuss] Possible bug in .NET library,
	with IConnection
In-Reply-To: <b9d00605-68ee-421c-a150-fdf08c17ff77@googlegroups.com>
References: <b9d00605-68ee-421c-a150-fdf08c17ff77@googlegroups.com>
Message-ID: <cc76dcc0-d5d5-4178-8376-45b329b34a86@googlegroups.com>

I have examined RabbitMQ .NET client library source codes, and I think I 
have managed to identify this bug.

What is happening is at the moment  ModelBase.BasicGet call is made 
ModelBase.m_closeReason is not null (model was closed)
The code inside ModelBase.BasicGet doesn't Enqueue BasicGetRpcContinuation 
because m_closeReason  is not null
but send this command to server using _Private_BasicGet(), this method 
checks ModelBase.m_sessions.m_closeReason which is not null, and then when 
server reply is received command handler for BasicGetEmpty tries to dequeue 
(calls Next()) item from m_continuationQueue in which 
BasicGetRpcContinuation  wasn't put.

On Wednesday, July 31, 2013 3:38:42 PM UTC+4, inforser.... at gmail.com wrote:
>
> {AMQP close-reason, initiated by Library, code=541, text="Unexpected 
> Exception", classId=0, methodId=0, cause=System.NullReferenceException: 
> Object reference not set to an instance of an object.
>    at RabbitMQ.Client.Impl.ModelBase.HandleBasicGetEmpty()
>    at 
> RabbitMQ.Client.Framing.Impl.v0_9_1.Model.DispatchAsynchronous(Command cmd)
>    at RabbitMQ.Client.Impl.ModelBase.HandleCommand(ISession session, 
> Command cmd)
>    at RabbitMQ.Client.Impl.SessionBase.OnCommandReceived(Command cmd)
>    at RabbitMQ.Client.Impl.Session.HandleFrame(Frame frame)
>    at RabbitMQ.Client.Impl.ConnectionBase.MainLoopIteration()
>    at RabbitMQ.Client.Impl.ConnectionBase.MainLoop()}
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/56abbef7/attachment.htm>

From lukasz.jan.olczak at gmail.com  Wed Jul 31 17:30:04 2013
From: lukasz.jan.olczak at gmail.com (Lukasz Olczak)
Date: Wed, 31 Jul 2013 09:30:04 -0700 (PDT)
Subject: [rabbitmq-discuss] Duplicated message and unknown delivery tag
	after ack
Message-ID: <ae768eb4-3b32-4e9e-b6b2-37c6a723ef23@googlegroups.com>

Hi,

I have RabbitMQ 3.1.1, Erlang R16B deployed on my laptop and a collection 
of consumers consuming messages from single queue through loopback 
interface. Consumers are written in Java (I use a spring-rabbit 1.1.1 
library) and every consumer uses a distinct thread. 
During a heavy load very strange errors occurred. Some messages were 
duplicated and delivered to two consumers in the same time (in the same 
second). Both consumers after a processing acknowledged the message and 
then one of them received shutdown signal with an error message: 
com.rabbitmq.client.ShutdownSignalException: channel error; reason: 
{#method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - 
unknown delivery tag 1, class-id=60, method-id=80), null, ""}
Every thread uses a distinct channel. So, single message is delivered and 
acknowledged in the same channel.
I reviewed the whole code both mine and spring and didn't find any bug.

Anybody knows why RabbitMQ duplicates messages on a single broker with a 
publisher and consumers connected through loopback interface?
How can I handle it? or where did I make a mistake?  

Thanks in advance.

Regards
Lukasz 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/545e3169/attachment.htm>

From reparker23 at gmail.com  Wed Jul 31 17:35:56 2013
From: reparker23 at gmail.com (Robert Parker)
Date: Wed, 31 Jul 2013 09:35:56 -0700 (PDT)
Subject: [rabbitmq-discuss] RabbitMQ Clustering with Federation
Message-ID: <7db0a8da-c006-49c1-82ff-143c595395bf@googlegroups.com>

I'm having some trouble getting the right architecture configured to 
support rabbitmq federation in a clustered high availability environment. 
 Our basic setup is four clusters of two nodes each which are separated by 
a WAN.  

"home" is the "home" cluster and "remote1", "remote2" and "remote3" are 
remote clusters.  There are a lot of queues being created and published to 
via the API identically on all clusters but I only want to federate ONE of 
the queues, which is called "EventListener" back to the "home" cluster from 
all the "remote" clusters.  I want messages published to this queue on each 
remote cluster to be federated to the home cluster to be consumed by a 
separate event listener service that only lives at the "home" site.

Each cluster is configured with:

# run on node 1
rabbitmqctl stop_app
rabbitmqctl reset
rabbitmqctl join_cluster rabbit at node2
rabbitmqctl start_app


We have configured three hardware load balancer VIPs that load balance 
connections on port 5672 between both nodes in each cluster, and have 
configured federation upstreams to use these and also configured our 
application to use these VIPs for queue/exchange creation and for 
publishing messages.  Here's our federation config script thats run on 
node1 of the home cluster only:

          # run on home cluster node1

rabbitmq-plugins enable rabbitmq_federation
rabbitmq-plugins enable rabbitmq_federation_management
rabbitmq-plugins enable rabbitmq_management
service rabbitmq-server restart
rabbitmqctl set_parameter federation-upstream remote1-upstream 
'{"uri":"amqp://remote1-vip","expires":3600000}'
rabbitmqctl set_parameter federation-upstream remote2-upstream 
'{"uri":"amqp://remote2-vip","expires":3600000}'
rabbitmqctl set_parameter federation-upstream remote3-upstream 
'{"uri":"amqp://remote-3-vip","expires":3600000}'
rabbitmqctl set_policy federate-EventListener "^EventListener$" 
'{"federation-upstream-set":"all"}' 0
rabbitmqctl list_exchanges name policy | grep federate
rabbitmqctl eval 'rabbit_federation_status:status().'


However I am noticing that the "rabbitmqctl eval 
'rabbit_federation_status:status()." command only shows federation config 
on node2 of the home cluster despite having been configured on node1:

[root at node1 ~]# rabbitmqctl eval 'rabbit_federation_status:status().'
[]
...done.

[root at node2 ~]# rabbitmqctl eval 'rabbit_federation_status:status().'
[[{exchange,<<"EventListener">>},
  {vhost,<<"/">>},
  {connection,<<"remote3-upstream">>},
  {upstream_exchange,<<"EventListener">>},
  {status,normal},
  {timestamp,{{2013,7,31},{11,16,19}}}],
 [{exchange,<<"EventListener">>},
  {vhost,<<"/">>},
  {connection,<<"remote2-upstream">>},
  {upstream_exchange,<<"EventListener">>},
  {status,normal},
  {timestamp,{{2013,7,31},{11,16,19}}}],
 [{exchange,<<"EventListener">>},
  {vhost,<<"/">>},
  {connection,<<"remote1-upstream">>},
  {upstream_exchange,<<"EventListener">>},
  {status,normal},
  {timestamp,{{2013,7,31},{11,16,19}}}]]
...done.


And I'm noticing that messages published to the queues via the load 
balancer VIPs to the remote clusters are not showing up in the 
"EventListener" queue of the home cluster.

Is this not the right way to set this up?  Is it possible to configure this 
without using an external load balancer and still achieve high 
availability?  If I federate to a single node of a cluster directly, what 
happens if that node goes down?  Do I have to configure redundant 
federation between every node of home cluster to every node of each remote 
cluster? If I don't use a load balancer VIP to publish to from my 
application, if the single node of the cluster I've configured goes down, 
it wont help me that the other node is still available.

Whats the best practice, if anything, on this kind of config?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/df32e120/attachment.htm>

From mklishin at gopivotal.com  Wed Jul 31 18:58:06 2013
From: mklishin at gopivotal.com (Michael Klishin)
Date: Wed, 31 Jul 2013 21:58:06 +0400
Subject: [rabbitmq-discuss] Possible bug in .NET library,
	with IConnection
In-Reply-To: <cc76dcc0-d5d5-4178-8376-45b329b34a86@googlegroups.com>
References: <b9d00605-68ee-421c-a150-fdf08c17ff77@googlegroups.com>
	<cc76dcc0-d5d5-4178-8376-45b329b34a86@googlegroups.com>
Message-ID: <6B336093-619D-452E-9EA3-9417E57CB8BC@gopivotal.com>

 Burtsev Aleksey:

> The code inside ModelBase.BasicGet doesn't Enqueue BasicGetRpcContinuation because m_closeReason  is not null
> but send this command to server using _Private_BasicGet(), this method checks ModelBase.m_sessions.m_closeReason which is not null, and then when server reply is received command handler for BasicGetEmpty tries to dequeue (calls Next()) item from m_continuationQueue in which BasicGetRpcContinuation  wasn't put.

So in order to reproduce the problem one has to use basic.get on a closed channel?
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/31c08041/attachment.pgp>

From matthias at rabbitmq.com  Wed Jul 31 19:21:52 2013
From: matthias at rabbitmq.com (Matthias Radestock)
Date: Wed, 31 Jul 2013 19:21:52 +0100
Subject: [rabbitmq-discuss] messages are sync on all cluster nodes !
In-Reply-To: <1375269617178-28513.post@n5.nabble.com>
References: <1375269617178-28513.post@n5.nabble.com>
Message-ID: <51F955C0.5080906@rabbitmq.com>

On 31/07/13 12:20, tluck wrote:
> when I ran below command on each server then I found that only 1 consumer
> (which is consuming messages from that queue) has message count for the
> queue and all other consumer servers have 0 as message count for that
> perticular queue.
>
> /usr/sbin/rabbitmqctl list_queues name  messages

Are you saying that you ran the above on each node of a cluster and got 
completely different results? Aside from differences due to timing that 
should be impossible. If you are really seeing this then post the output of

rabbitmqctl cluster_status
rabbitmqctl list_queues name messages consumers

for each of the nodes.

Also, what version of RabbitMQ are you running?

Regards,

Matthias.

From pavel.kogan at cortica.com  Wed Jul 31 23:16:38 2013
From: pavel.kogan at cortica.com (Pavel Kogan)
Date: Wed, 31 Jul 2013 17:16:38 -0500
Subject: [rabbitmq-discuss] Message sending/receiving overhead.
Message-ID: <CAABB5w_ceCmrDyG+O6a0APebCN+TEumUqicjLonB410apWkEqQ@mail.gmail.com>

Hi all,

I have simple subscriber that receives message, process it in single thread
and publish response.
Processing must be done in single thread (logic limitations) but is very
fast (~5ms) so I expect to be able to process 200 requests per second.
However publishing response in line with processing slows the things as
network latency is considerable (even though it is internal 1Gbit network).
To resolve it I moved responses publishing to separate threads (via
internal concurrent queue) and it helped.
The question is about receiving overhead. Is there any pre-caching of
messages or I should also integrate internal concurrent queue for requests
too?

Many Thanks,
   Pavel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/b5876e7f/attachment.htm>

