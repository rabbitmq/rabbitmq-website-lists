<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] GPB and AMQP/RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20GPB%20and%20AMQP/RabbitMQ&In-Reply-To=D4C5E348C434294AA040A57B0D3DF5ED02EA821A%40MER2-EXCHB1.echostar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003240.html">
   <LINK REL="Next"  HREF="003241.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] GPB and AMQP/RabbitMQ</H1>
    <B>Kirk Wylie</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20GPB%20and%20AMQP/RabbitMQ&In-Reply-To=D4C5E348C434294AA040A57B0D3DF5ED02EA821A%40MER2-EXCHB1.echostar.com"
       TITLE="[rabbitmq-discuss] GPB and AMQP/RabbitMQ">kirk at kirkwylie.com
       </A><BR>
    <I>Wed Mar 25 19:46:15 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003240.html">[rabbitmq-discuss] GPB and AMQP/RabbitMQ
</A></li>
        <LI>Next message: <A HREF="003241.html">[rabbitmq-discuss] GPB and AMQP/RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3239">[ date ]</a>
              <a href="thread.html#3239">[ thread ]</a>
              <a href="subject.html#3239">[ subject ]</a>
              <a href="author.html#3239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 25, 2009 at 7:22 PM, Elsner, Robert
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Robert.Elsner at echostar.com</A>&gt; wrote:
&gt;<i> We are using GPB as the message payload for all of our AMQP messages.
</I>&gt;<i> We have settled on RabbitMQ as the broker, and have been very pleased
</I>&gt;<i> with the results (except for my gripe earlier about the AMQP header
</I>&gt;<i> size). &#160;If I get time I may undertake a quick project to make GPB the
</I>&gt;<i> wireformat, but without adoption from the AMQP WG this would be an
</I>&gt;<i> academic exercise only. &#160;A portion of our GPB defines what will become
</I>&gt;<i> the routing key, so this is redundant data, but that would be sweet if
</I>&gt;<i> we could build a GPB payload that included the AMQP headers, and the
</I>&gt;<i> routing worked directly from that.
</I>
Hi, Robert,

Ignore my previous email. This thread is updating too fast for my old
fingers to keep up. :-)

Interestingly, when GPB came out, ActiveMQ did this precise thing (to
have a parallel wire protocol beyond the existing ones that was based
on using GPB as the wire representation), and they said that it worked
quite well. That being said, it definitely wouldn't work for AMQP
given that it is designed as a completely neutral wire representation,
but it might be useful for members of the WG to know that many people
find the current wire encoding a bit too high-overhead.

The problem I've personally always had with GPB in this case is that
you still need to have some type of message termination encoding, or
some type of prefix to let you know the size, as otherwise GPB will
just consume data from the inbound stream. So GPB in and of itself
would still need some other type of framing going on to say &quot;the next
thing should be interpreted as per this .proto, and by the way, it's
going to be 1024 bytes&quot; or something. How would you think of working
around that?

Kirk


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003240.html">[rabbitmq-discuss] GPB and AMQP/RabbitMQ
</A></li>
	<LI>Next message: <A HREF="003241.html">[rabbitmq-discuss] GPB and AMQP/RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3239">[ date ]</a>
              <a href="thread.html#3239">[ thread ]</a>
              <a href="subject.html#3239">[ subject ]</a>
              <a href="author.html#3239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
