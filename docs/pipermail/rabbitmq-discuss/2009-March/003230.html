<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Custom Exchange Implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Custom%20Exchange%20Implementation&In-Reply-To=1237995755.16430.28.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003229.html">
   <LINK REL="Next"  HREF="003231.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Custom Exchange Implementation</H1>
    <B>Martin Sustrik</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Custom%20Exchange%20Implementation&In-Reply-To=1237995755.16430.28.camel%40localhost"
       TITLE="[rabbitmq-discuss] Custom Exchange Implementation">sustrik at imatix.com
       </A><BR>
    <I>Wed Mar 25 16:07:12 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003229.html">[rabbitmq-discuss] Custom Exchange Implementation
</A></li>
        <LI>Next message: <A HREF="003231.html">[rabbitmq-discuss] Custom Exchange Implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3230">[ date ]</a>
              <a href="thread.html#3230">[ thread ]</a>
              <a href="subject.html#3230">[ subject ]</a>
              <a href="author.html#3230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nice. One idea though:

When no node is assigned to a freshly arrived routing key, choose the 
one that has least routing keys attached. If there are several with 
lowest number of bindings choose the first one.

That would spread the load more evenly.

Martin

Levi Greenspan wrote:
&gt;<i> On Wed, 2009-03-25 at 15:33 +0000, Alexis Richardson wrote:
</I>&gt;&gt;<i> Levi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's fascinating.  Can I ask what application you have that requires this?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> alexis
</I>&gt;<i> 
</I>&gt;<i> Sure. What I have is a frontend and a backend  with RabbitMQ in between.
</I>&gt;<i> The frontend and the backend consist of multiple nodes to spread the
</I>&gt;<i> load. However I need to consistently route the traffic from the frontend
</I>&gt;<i> to the same node in the backend. Initially the routing key is only known
</I>&gt;<i> in the frontend, so I can not have backend nodes binding themselves to
</I>&gt;<i> the exchange, as they don't know the key. Hence my custom exchange type,
</I>&gt;<i> that binds the queues dynamically.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Levi
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003229.html">[rabbitmq-discuss] Custom Exchange Implementation
</A></li>
	<LI>Next message: <A HREF="003231.html">[rabbitmq-discuss] Custom Exchange Implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3230">[ date ]</a>
              <a href="thread.html#3230">[ thread ]</a>
              <a href="subject.html#3230">[ subject ]</a>
              <a href="author.html#3230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
