<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ startup time with durable queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20startup%20time%20with%20durable%20queues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003206.html">
   <LINK REL="Next"  HREF="003201.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ startup time with durable queues</H1>
    <B>Aymerick J&#233;hanne</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20startup%20time%20with%20durable%20queues&In-Reply-To="
       TITLE="[rabbitmq-discuss] RabbitMQ startup time with durable queues">aymerick at fotonauts.com
       </A><BR>
    <I>Thu Mar 19 12:39:15 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003206.html">[rabbitmq-discuss] txAMQP with RabbitMQ Cluster
</A></li>
        <LI>Next message: <A HREF="003201.html">[rabbitmq-discuss] RabbitMQ startup time with durable queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3200">[ date ]</a>
              <a href="thread.html#3200">[ thread ]</a>
              <a href="subject.html#3200">[ subject ]</a>
              <a href="author.html#3200">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm beaten by rabbitmq's startup time with a lot of durable queues.

Actually, I have more than 5500 durable queues, with almost 10  
bindings by queues. And I simply can't restart rabbitmq at all, I have  
to delete its mnesia directory then recreate all queues and bindings.

So I have done some tests to measure the startup time.

Script to test is here: <A HREF="http://gist.github.com/81789">http://gist.github.com/81789</A>

My results are here: <A HREF="http://tinyurl.com/cne7fj">http://tinyurl.com/cne7fj</A>

So it takes one hour to start rabbitmq with 6000 (empty) durable  
queues. I can't wait that time... so as I said I reset mnesia  
directory at each restart, with data loss if there were still some  
messages in the queues before the restart.

Do you guys have an idea of what's the issue ?

Aymerick


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003206.html">[rabbitmq-discuss] txAMQP with RabbitMQ Cluster
</A></li>
	<LI>Next message: <A HREF="003201.html">[rabbitmq-discuss] RabbitMQ startup time with durable queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3200">[ date ]</a>
              <a href="thread.html#3200">[ thread ]</a>
              <a href="subject.html#3200">[ subject ]</a>
              <a href="author.html#3200">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
