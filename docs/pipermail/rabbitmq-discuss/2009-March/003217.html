<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] High cpu usage for Java RabbitMQ client?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20High%20cpu%20usage%20for%20Java%20RabbitMQ%20client%3F&In-Reply-To=D4C5E348C434294AA040A57B0D3DF5ED02EA80EC%40MER2-EXCHB1.echostar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003216.html">
   <LINK REL="Next"  HREF="003218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] High cpu usage for Java RabbitMQ client?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20High%20cpu%20usage%20for%20Java%20RabbitMQ%20client%3F&In-Reply-To=D4C5E348C434294AA040A57B0D3DF5ED02EA80EC%40MER2-EXCHB1.echostar.com"
       TITLE="[rabbitmq-discuss] High cpu usage for Java RabbitMQ client?">matthias at lshift.net
       </A><BR>
    <I>Tue Mar 24 21:12:50 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003216.html">[rabbitmq-discuss] High cpu usage for Java RabbitMQ client?
</A></li>
        <LI>Next message: <A HREF="003218.html">[rabbitmq-discuss] High cpu usage for Java RabbitMQ client?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3217">[ date ]</a>
              <a href="thread.html#3217">[ thread ]</a>
              <a href="subject.html#3217">[ subject ]</a>
              <a href="author.html#3217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Robert,

Elsner, Robert wrote:
&gt;<i> What I see is that even when nothing is being pushed onto the broker,
</I>&gt;<i> the java client consumes approximately one CPU (90-105%) of a dual
</I>&gt;<i> core machine. When I track this down, the trace outputs this:
</I>&gt;<i> 
</I>&gt;<i>    2 31.92% 64.00%   16949 301403 java.net.SocketInputStream.socketRead0
</I>&gt;<i> 
</I>&gt;<i> So even though there is no data (if I kill the producer) the client is
</I>&gt;<i> still very very busy.
</I>
Are you sure this is not just due to the consumers catching up?
Is the broker idle when the above happens? It may be worth running the 
test through the tracer (<A HREF="http://www.rabbitmq.com/examples.html#tracer">http://www.rabbitmq.com/examples.html#tracer</A>) 
to see whether there is any unusual traffic between the client and the 
server.

What versions of the broker and client are you using? What O/S? What 
version of the JVM? Would it possible for you to post your producer and 
consumer code?

Also, do the stack traces you get from sending the JVM a QUIT signal 
offer any clues? Feel free to post them here.


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003216.html">[rabbitmq-discuss] High cpu usage for Java RabbitMQ client?
</A></li>
	<LI>Next message: <A HREF="003218.html">[rabbitmq-discuss] High cpu usage for Java RabbitMQ client?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3217">[ date ]</a>
              <a href="thread.html#3217">[ thread ]</a>
              <a href="subject.html#3217">[ subject ]</a>
              <a href="author.html#3217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
