<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Cluster,	option &quot;-setcookie cookie&quot; + 	EC2 experiences
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20Cluster%2C%0A%09option%20%22-setcookie%20cookie%22%20%2B%20%09EC2%20experiences&In-Reply-To=49BA5FE6.8070106%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003159.html">
   <LINK REL="Next"  HREF="003161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Cluster,	option &quot;-setcookie cookie&quot; + 	EC2 experiences</H1>
    <B>Alex Clemesha</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20Cluster%2C%0A%09option%20%22-setcookie%20cookie%22%20%2B%20%09EC2%20experiences&In-Reply-To=49BA5FE6.8070106%40lshift.net"
       TITLE="[rabbitmq-discuss] RabbitMQ Cluster,	option &quot;-setcookie cookie&quot; + 	EC2 experiences">clemesha at gmail.com
       </A><BR>
    <I>Sat Mar 14 02:03:50 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003159.html">[rabbitmq-discuss] RabbitMQ Cluster, option &quot;-setcookie cookie&quot; + 	EC2 experiences
</A></li>
        <LI>Next message: <A HREF="003161.html">[rabbitmq-discuss] RabbitMQ Cluster, option &quot;-setcookie cookie&quot; + 	EC2 experiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3160">[ date ]</a>
              <a href="thread.html#3160">[ thread ]</a>
              <a href="subject.html#3160">[ subject ]</a>
              <a href="author.html#3160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;Im getting: socket.gaierror: (8, 'nodename nor servname provided, or
</I>&gt;&gt;<i> not known') when trying to attach a client to second broker (in the
</I>&gt;&gt;<i> cluster).
</I>&gt;<i>
</I>&gt;<i> That looks like an error thrown by the python client library and, on the
</I>&gt;<i> surface of it, does not appear to indicate a problem with the RabbitMQ
</I>&gt;<i> broker. Do the connection attempts show up in the server logs at all?
</I>
I've gotten to the root of the problem - it has to do with the fact
that the second
rabbit broker is doing a redirect, i.e, from
/var/log/rabbitmq/rabbit.log I see:

INFO REPORT==== 14-Mar-2009::00:18:55 ===
connection &lt;0.16842.0&gt; redirecting to
&lt;&lt;&quot;domU-12-31-39-00-7E-16.compute-1.internal:5672&quot;&gt;&gt;


So it looks like I need to solve this problem by either using my
clients correctly,
or they need to handle redirects better.

With py amqplib,  I can put &quot;insist=True&quot; inside of &quot;amqp.Connection&quot;,
and I don't see
the failure anymore ( socket.gaierror: (8, 'nodename nor servname
provided, or not known'),
but I'm stilling wondering if the clients should handle the redirect
transparently?

With txAMQP, I have not yet seen if you can even pass a &quot;insist=True&quot;
anywhere.  The txAMQP also
does not follow the redirect (as far as I can see), it just sort of
'hangs', but I'm probably
just using the client wrong ...I'm going to do more investigating.


Maybe the authors of either python client lib are around, and they
could set me straight
on this use case :-)


thanks!
-Alex






-- 
Alex Clemesha
clemesha.org


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003159.html">[rabbitmq-discuss] RabbitMQ Cluster, option &quot;-setcookie cookie&quot; + 	EC2 experiences
</A></li>
	<LI>Next message: <A HREF="003161.html">[rabbitmq-discuss] RabbitMQ Cluster, option &quot;-setcookie cookie&quot; + 	EC2 experiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3160">[ date ]</a>
              <a href="thread.html#3160">[ thread ]</a>
              <a href="subject.html#3160">[ subject ]</a>
              <a href="author.html#3160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
