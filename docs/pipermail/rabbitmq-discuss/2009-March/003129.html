<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Monitoring RabbitMQ from JMX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Monitoring%20RabbitMQ%20from%20JMX&In-Reply-To=49AD7DE0.5040807%40redhat.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003127.html">
   <LINK REL="Next"  HREF="003130.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Monitoring RabbitMQ from JMX</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Monitoring%20RabbitMQ%20from%20JMX&In-Reply-To=49AD7DE0.5040807%40redhat.com"
       TITLE="[rabbitmq-discuss] Monitoring RabbitMQ from JMX">alexis.richardson at cohesiveft.com
       </A><BR>
    <I>Wed Mar  4 11:55:26 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003127.html">[rabbitmq-discuss] Monitoring RabbitMQ from JMX
</A></li>
        <LI>Next message: <A HREF="003130.html">[rabbitmq-discuss] Monitoring RabbitMQ from JMX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3129">[ date ]</a>
              <a href="thread.html#3129">[ thread ]</a>
              <a href="subject.html#3129">[ subject ]</a>
              <a href="author.html#3129">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Carl, I took a look at that recently and it does look like
interesting work.

Chris,

Thanks for this.  Creating something would be really helpful.

I don't know which of the approaches would make the most sense from
those you list.  I hope others will comment.  Alas Matthias is on
vacation this week.  In terms of existing work, Tony and Ben may wish
to comment.  There's a few features Tony added for monitoring queue
lifecycle events last year for a customer.  I don't know if you are
aware of those (apologies if you know all this already).

In terms of 'general approaches to management and monitoring', we have
had a number of discussions about this on-list.  To date, the
following have been suggested.  Note that many of these speak more to
management than to monitoring.

* JMX -- We are not JMX experts and would love others better qualified
than us, to help.  If you can do something here, that would be very
cool.  As Carl mentioned, the qman stuff that the qpid guys have done,
may be useful as a guide, although RabbitMQ implements a different
version of the AMQP protocol at the moment.

* OSGi -- Neil Bartlett's prototype may be helpful here.  It is on
github: <A HREF="http://github.com/njbartlett/rabbitosgi">http://github.com/njbartlett/rabbitosgi</A>

* Web interface -- I believe Valentino came up with a good list, in
the REST style, a few weeks ago.

* XMPP interface -- Tony's bots:
<A HREF="http://hg.rabbitmq.com/rabbitmq-xmpp/raw-file/default/doc/index.html">http://hg.rabbitmq.com/rabbitmq-xmpp/raw-file/default/doc/index.html</A>

Anyway, I hope this helps give you some more ideas.

alexis



On Tue, Mar 3, 2009 at 6:58 PM, Carl Trieloff &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">cctrieloff at redhat.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> A full JMX AMQP bridge exists with WS-DM support. It may or may not help you
</I>&gt;<i> <A HREF="http://qpid.apache.org/qman-qpid-management-bridge.html">http://qpid.apache.org/qman-qpid-management-bridge.html</A>
</I>&gt;<i>
</I>&gt;<i> regards,
</I>&gt;<i> Carl.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Chris Pettitt wrote:
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm currently exploring monitoring options for RabbitMQ. There is a monitoring
</I>&gt;&gt;<i> page on the RabbitMQ site [1] from July 2008 that describes some potential
</I>&gt;&gt;<i> solutions, but it's not clear if anything has been done since that discussion.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'd like to expose monitoring through JMX. Is there anything that does
</I>&gt;&gt;<i> that already
</I>&gt;&gt;<i> or that can be adapted to such a purpose?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If not, I've thought about a few ways I could implement it, but I would be
</I>&gt;&gt;<i> happy to get feedback from the folks on this list. Here are some thoughts:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. I could write a JMX system to talk to rabbit_amqqueue directly
</I>&gt;&gt;<i> using JInterface.
</I>&gt;&gt;<i> I prototyped this approach successfully, but it seems wrong to depend on the
</I>&gt;&gt;<i> functions in rabbit_amqqueue directly, especially if they are not a public API.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2. I could write a small Erlang process that proxies requests to the action
</I>&gt;&gt;<i> function in rabbit_control. The benefit of this is that rabbit_control
</I>&gt;&gt;<i> aggregates monitoring across several modules and the client is less sensitive
</I>&gt;&gt;<i> to changes to rabbit_amqqueue and other modules. Using an Erlang process is
</I>&gt;&gt;<i> also nice because I wouldn't have to spawn rabbitmqctl for each request. With
</I>&gt;&gt;<i> this solution the JMX system could communicate with the process using either
</I>&gt;&gt;<i> JInterface or pipes (though I prefer the former unless there is a good reason
</I>&gt;&gt;<i> to avoid it).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thoughts? Is there a good alternative I'm missing?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> Chris
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [1]: <A HREF="https://dev.rabbitmq.com/wiki/ManagementAndMonitoring">https://dev.rabbitmq.com/wiki/ManagementAndMonitoring</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003127.html">[rabbitmq-discuss] Monitoring RabbitMQ from JMX
</A></li>
	<LI>Next message: <A HREF="003130.html">[rabbitmq-discuss] Monitoring RabbitMQ from JMX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3129">[ date ]</a>
              <a href="thread.html#3129">[ thread ]</a>
              <a href="subject.html#3129">[ subject ]</a>
              <a href="author.html#3129">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
