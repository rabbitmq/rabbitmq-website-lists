<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] win 2008 64bit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20win%202008%2064bit&In-Reply-To=002001c9a339%24e185b770%24a4912650%24%40Norkaitis%40oryo.lt">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003156.html">
   <LINK REL="Next"  HREF="003187.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] win 2008 64bit</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20win%202008%2064bit&In-Reply-To=002001c9a339%24e185b770%24a4912650%24%40Norkaitis%40oryo.lt"
       TITLE="[rabbitmq-discuss] win 2008 64bit">emile at lshift.net
       </A><BR>
    <I>Mon Mar 16 18:36:11 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003156.html">[rabbitmq-discuss] win 2008 64bit
</A></li>
        <LI>Next message: <A HREF="003187.html">[rabbitmq-discuss] Batch files are awful (was Re: win 2008 64bit)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3173">[ date ]</a>
              <a href="thread.html#3173">[ thread ]</a>
              <a href="subject.html#3173">[ subject ]</a>
              <a href="author.html#3173">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Andrius,

Thanks for sharing your experience on windows 2008/64-bit. I've just 
tried the same and found that I needed to

set ERLANG_HOME=C:\Program Files (x86)\erl5.6.5

prior to launching rabbitmq-server.bat to run the broker. If you chose 
to install Erlang in a different location then the path will be different.

Your comments about the file permissions of the service account are very 
useful and will appear in the next version of the website.

We are aware of the potential pitfalls with synchronising cookies when 
running the service and rabbitctl as different users. The suggestions at

<A HREF="http://www.rabbitmq.com/service-guide.html">http://www.rabbitmq.com/service-guide.html</A>

under &quot;Service Management&quot; were meant to help, but I agree that these 
could be more prominent.

The way that variables persist across invocations of the script is 
intentional, but your solution will work fine. The limitations of batch 
files have led us to consider alternatives such as powershell or windows 
script host, but will these will probably not be explored in the near 
future.

If you have any more suggestions then please let us know.

Regards

-Emile

Andrius Norkaitis wrote:
&gt;<i> At web site there is such note:
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Our goal is to streamline the broker installation process such that you 
</I>&gt;<i> can have RabbitMQ up and running within two minutes of completing your 
</I>&gt;<i> download. If this doesn't happen to you, please let us know at 
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">legitimategrievance at rabbitmq.com</A> &lt;mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">legitimategrievance at rabbitmq.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> I had some problems to install and launch it on windows 2008 server 
</I>&gt;<i> (64bit), but figured out, so I can share my experience:
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 1.       Because  erlang is 32bit app, it is installed by default to 
</I>&gt;<i> C:\Program Files (x86). I had problems changing path in bat files (for 
</I>&gt;<i> unknown reason it didn&#8217;t found erl even if I specified other location), 
</I>&gt;<i> so  it was easier to reinstall it to C:\Program Files folder which is 
</I>&gt;<i> default.
</I>&gt;<i> 
</I>&gt;<i> 2.       I installed rabbitmq as windows service and started it, but it 
</I>&gt;<i> wasn&#8217;t working because service was running as &#8220;Local System&#8221; account. I 
</I>&gt;<i> changed to log on as &#8220;Network Service&#8221;, but the problem persisted.
</I>&gt;<i> 
</I>&gt;<i> &#8220;Network Service&#8221; by default has not IO permissions to access windows 
</I>&gt;<i> directory (needed for erlang.cookie) and your user account appdata 
</I>&gt;<i> directory for storing logs and db. So I changed the bat script and 
</I>&gt;<i> specified another dir and added permissions to this folder. Also you 
</I>&gt;<i> need to add permissions for c:\windows catalog because when rabbitmq 
</I>&gt;<i> starts, it creates .erlang.cookie there (haven&#8217;t found a successful way 
</I>&gt;<i> to change this path). After that, you could remove permissions from 
</I>&gt;<i> folder and add it only to that file.
</I>&gt;<i> 
</I>&gt;<i> 3.       After I changed paths in bat file, it was using the old ones, 
</I>&gt;<i> so finally I removed all &#8220;if &#8230;&#8221; and epically specified new paths.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> if &quot;%RABBITMQ_BASE%&quot;==&quot;&quot; (
</I>&gt;<i> 
</I>&gt;<i>     set RABBITMQ_BASE=%APPDATA%\%RABBITMQ_SERVICENAME%
</I>&gt;<i> 
</I>&gt;<i> )
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Changed to:
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>     set RABBITMQ_BASE=C:\Rabbit
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Etc.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 4.       Rabbitmqctl won&#8217;t work because rabbit is using cookie in 
</I>&gt;<i> c:\windows and rabbitmqctl is looking for cookie at userdata folder. I 
</I>&gt;<i> tried to modify bat to specify &#8211;setcookie c:\Windows, but that didn&#8216;t 
</I>&gt;<i> worked for me, so the easier way was to copy cookie file from windows 
</I>&gt;<i> dir to my user dir.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> It would be great if someone better &#8222;bat&#8220; guru than me could tell how to 
</I>&gt;<i> do this easier. Seems that rabbit isn&#8216;t used heavily on production 
</I>&gt;<i> windows servers J and there is not detail manual about this.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Andrius
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> *From:* Eran Sandler [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eran.sandler at gmail.com</A>]
</I>&gt;<i> *Sent:* Thursday, March 12, 2009 6:19 PM
</I>&gt;<i> *To:* Andrius Norkaitis
</I>&gt;<i> *Cc:* <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> *Subject:* Re: [rabbitmq-discuss] win 2008 64bit
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> I don't know regarding Windows 2008 64bit, but we use it on Windows 2003 
</I>&gt;<i> 64bit and it works just fine.
</I>&gt;<i> 
</I>&gt;<i> AFAIK, there is no official win64 build of the Erlang runtime. If you 
</I>&gt;<i> install the 32bit runtime and use RabbitMQ it will work in 32bit without 
</I>&gt;<i> a problem.
</I>&gt;<i> 
</I>&gt;<i> Eran
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> On Tue, Mar 10, 2009 at 11:29 PM, Andrius Norkaitis 
</I>&gt;<i> &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Andrius.Norkaitis at oryo.lt</A> &lt;mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Andrius.Norkaitis at oryo.lt</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Is it ok to install complete-rabbitmq-bundle-1.5.3.zip 
</I>&gt;<i> &lt;<A HREF="http://www.rabbitmq.com/releases/bundles/v1.5.3/complete-rabbitmq-bundle-1.5.3.zip">http://www.rabbitmq.com/releases/bundles/v1.5.3/complete-rabbitmq-bundle-1.5.3.zip</A>&gt; 
</I>&gt;<i> on win64 or should I look somewere for 64bit with compilation of erlang 
</I>&gt;<i> or rabbitmq?
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Andrius
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003156.html">[rabbitmq-discuss] win 2008 64bit
</A></li>
	<LI>Next message: <A HREF="003187.html">[rabbitmq-discuss] Batch files are awful (was Re: win 2008 64bit)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3173">[ date ]</a>
              <a href="thread.html#3173">[ thread ]</a>
              <a href="subject.html#3173">[ subject ]</a>
              <a href="author.html#3173">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
