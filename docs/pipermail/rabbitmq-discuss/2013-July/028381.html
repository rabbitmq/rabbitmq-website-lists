<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika Client: Bad performance for basic_publish to durable mirror queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20Client%3A%20Bad%20performance%20for%0A%20basic_publish%20to%20durable%20mirror%20queue&In-Reply-To=%3C51DA8549.9020804%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028378.html">
   <LINK REL="Next"  HREF="028365.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika Client: Bad performance for basic_publish to durable mirror queue</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20Client%3A%20Bad%20performance%20for%0A%20basic_publish%20to%20durable%20mirror%20queue&In-Reply-To=%3C51DA8549.9020804%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Pika Client: Bad performance for basic_publish to durable mirror queue">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Jul  8 10:24:25 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028378.html">[rabbitmq-discuss] Pika Client: Bad performance for basic_publish to durable mirror queue
</A></li>
        <LI>Next message: <A HREF="028365.html">[rabbitmq-discuss] load distribution among queue consumers and consumer_tag in non-exclusive mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28381">[ date ]</a>
              <a href="thread.html#28381">[ thread ]</a>
              <a href="subject.html#28381">[ subject ]</a>
              <a href="author.html#28381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/07/13 09:59, Jesper Louis Andersen wrote:
&gt;<i>
</I>&gt;<i> On Fri, Jul 5, 2013 at 6:11 PM, linbo liao &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">llbgurs at gmail.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">llbgurs at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     I encounter a bad performance issue about pika, yesterday it works
</I>&gt;<i>     fine, but today performance of basci_publish got bad, it cost 2 or 3
</I>&gt;<i>     second to finish one message, sometimes down to 7 seconds.
</I>&gt;<i>
</I>&gt;<i>     Pika is 0.9.13
</I>&gt;<i>     RabbitMQ 3.1.0, Erlang R14B04   Queue is Durable
</I>&gt;<i>     Python: 2.6
</I>&gt;<i>     Platform: CentOS release 6.3 (Final) X64
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I would look at the broker and see if it uses a lot of memory or if it
</I>&gt;<i> in any way looks like it is operating in a bad way. You need to slice
</I>&gt;<i> your problem: It could be the broker, your client or -- likely -- the
</I>&gt;<i> way your client uses the broker.
</I>
Also, the OP is putting the channel into confirm mode, and waits for 
every single publish to be confirmed, thus making publishing synchronous 
which in turn makes it sensitive to not just load-induced server-side 
processing delays but also network delays.

Matthias.
</PRE>





















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028378.html">[rabbitmq-discuss] Pika Client: Bad performance for basic_publish to durable mirror queue
</A></li>
	<LI>Next message: <A HREF="028365.html">[rabbitmq-discuss] load distribution among queue consumers and consumer_tag in non-exclusive mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28381">[ date ]</a>
              <a href="thread.html#28381">[ thread ]</a>
              <a href="subject.html#28381">[ subject ]</a>
              <a href="author.html#28381">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
