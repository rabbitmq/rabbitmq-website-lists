<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq and long vm.dirty_writeback_centisecs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20and%20long%20vm.dirty_writeback_centisecs&In-Reply-To=%3CCAFPGKwABAfdCjYTDz3vdHhabw3WoEO8YYAdNi24m-rc6H_u2sA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028328.html">
   <LINK REL="Next"  HREF="028324.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq and long vm.dirty_writeback_centisecs</H1>
    <B>Tao Fan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20and%20long%20vm.dirty_writeback_centisecs&In-Reply-To=%3CCAFPGKwABAfdCjYTDz3vdHhabw3WoEO8YYAdNi24m-rc6H_u2sA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq and long vm.dirty_writeback_centisecs">tao at taggle.com.au
       </A><BR>
    <I>Thu Jul  4 00:45:35 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028328.html">[rabbitmq-discuss] UNC path not working
</A></li>
        <LI>Next message: <A HREF="028324.html">[rabbitmq-discuss] rabbitmq and long	vm.dirty_writeback_centisecs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28311">[ date ]</a>
              <a href="thread.html#28311">[ thread ]</a>
              <a href="subject.html#28311">[ subject ]</a>
              <a href="author.html#28311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I have ubuntu boxes which, for disk life consideration, I have set the
vm.dirty_writeback_centisecs from 5sec to 30min. However, when the boxes
have power outage and restored, rabbitmq refused to start up, giving error
message in log: mnesia_recover crashed.

I had to delete schema.DAT under mnesia directory before I can start it
again but then all my stored messages in persistent queues are lost.

If I do disk sync every minute or two, there is no such issue - rabbitmq
can survive every power cycle. I like to understand how rabbitmq works to
survive power cycle and if it is possible to tune it to survive with longer
sync time without losing any stored messages in queue.

My system:
Ubuntu 10.04.4 with kernel 2.6.32-24-generic-pae
rabbitmq-server 3.1.1 installed from rabbitmq.com/debian testing main
repository.
erlang R13B03 (erts-5.7.4)

Thanks in advance.

--
Tao Fan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/195d6053/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/195d6053/attachment.htm</A>&gt;
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028328.html">[rabbitmq-discuss] UNC path not working
</A></li>
	<LI>Next message: <A HREF="028324.html">[rabbitmq-discuss] rabbitmq and long	vm.dirty_writeback_centisecs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28311">[ date ]</a>
              <a href="thread.html#28311">[ thread ]</a>
              <a href="subject.html#28311">[ subject ]</a>
              <a href="author.html#28311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
