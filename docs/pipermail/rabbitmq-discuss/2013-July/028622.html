<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in the queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20causing%20heavy%20disk%20i/o%20with%20nothing%0A%20in%20the%20queues&In-Reply-To=%3C51E68A23.1070208%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028610.html">
   <LINK REL="Next"  HREF="028629.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in the queues</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20causing%20heavy%20disk%20i/o%20with%20nothing%0A%20in%20the%20queues&In-Reply-To=%3C51E68A23.1070208%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in the queues">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Jul 17 13:12:19 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028610.html">[rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in the queues
</A></li>
        <LI>Next message: <A HREF="028629.html">[rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in the queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28622">[ date ]</a>
              <a href="thread.html#28622">[ thread ]</a>
              <a href="subject.html#28622">[ subject ]</a>
              <a href="author.html#28622">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kevin,

On 16/07/13 20:33, Kevin Goess wrote:
&gt;<i> On Thu, Jul 11, 2013 at 2:08 PM, Matthias Radestock
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i>     My suspicious is that somehow your usage pattern results in a lot of
</I>&gt;<i>     queue/exchange/binding creation/deletion, which, if the entities
</I>&gt;<i>     involved are durable, require disk writes and fsyncs.
</I>&gt;<i>
</I>&gt;<i>     To test the validity of that theory, please try to find out what
</I>&gt;<i>     files are seeing activity, and report back.
</I>&gt;<i>
</I>&gt;<i> This is all the writing that's gone on in the last ten minutes:
</I>&gt;<i> [...a few .rdq, .idx and journal.jif files...]
</I>
Evidently my theory was wrong.

So what else could be causing the high disk activity / iowait with a 
message rate of just ~20Hz? Well, rabbit has a number of disk io 
optimisations along the lines of &quot;perform an fsync if some data has been 
written and a) we are idle, or b) a certain amount of time has passed&quot;. 
With the low message rate of your rabbit it will operate in mode (a), 
which does actually increase disk io activity but provides better 
overall performance and reliability than mode (b).

So nothing to worry about.

Matthias.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028610.html">[rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in the queues
</A></li>
	<LI>Next message: <A HREF="028629.html">[rabbitmq-discuss] rabbitmq causing heavy disk i/o with nothing in the queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28622">[ date ]</a>
              <a href="thread.html#28622">[ thread ]</a>
              <a href="subject.html#28622">[ subject ]</a>
              <a href="author.html#28622">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
