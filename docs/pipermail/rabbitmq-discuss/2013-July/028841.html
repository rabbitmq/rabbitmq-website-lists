<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different regions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Set%20rabbitmq%20to%20use%20in%20Amazon%20EC2%20with%0A%20different%20regions&In-Reply-To=%3C51EFBDB1.6090209%40lshift.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028990.html">
   <LINK REL="Next"  HREF="028787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different regions</H1>
    <B>Ceri Storey</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Set%20rabbitmq%20to%20use%20in%20Amazon%20EC2%20with%0A%20different%20regions&In-Reply-To=%3C51EFBDB1.6090209%40lshift.net%3E"
       TITLE="[rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different regions">ceri at lshift.net
       </A><BR>
    <I>Wed Jul 24 12:42:41 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028990.html">[rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different regions
</A></li>
        <LI>Next message: <A HREF="028787.html">[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28841">[ date ]</a>
              <a href="thread.html#28841">[ thread ]</a>
              <a href="subject.html#28841">[ subject ]</a>
              <a href="author.html#28841">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>(22/07/13 18:38), Pedro S&#225; da Costa wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I am trying to configure rabbitmq with EC2. The rabbitmq works when it
</I>&gt;<i> uses the private IP, but when I try to use the public IP, I can't
</I>&gt;<i> start the rabbitmq. What I want to do is that different EC2 regions
</I>&gt;<i> access the same rabbitmq. E.g.: the rabbitmq is running in region USA,
</I>&gt;<i> and the applications are running in Singapore and in Ireland. The
</I>&gt;<i> applications must access the rabbitmq in USA. I open all the ports in
</I>&gt;<i> the regions.
</I>
As has been said elsewhere in this thread, you don't need to change
anything to be able to access the Rabbit via it's public address. On Ec2
at least, your machine itself is given the private IP, and the
translation to and from the public IP is handled by Amazon's networking
devices.

Did you have problems trying connect to the rabbit via it's public IP
when you were using it's default configuration?

&gt;<i>
</I>&gt;<i> The configuration file that I use is:
</I>&gt;<i>
</I>&gt;<i> $ cat /etc/rabbitmq/rabbitmq-env.conf
</I>&gt;<i> RABBITMQ_NODE_IP_ADDRESS=XX.XXX.XX.XXX
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The error that I get is:
</I>&gt;<i>
</I>&gt;<i> $ cat /var/log/rabbitmq/startup_log 
</I>&gt;<i>
</I>&gt;<i>               RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
</I>&gt;<i>   ##  ##      Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>
</I>&gt;<i>   ##  ##
</I>&gt;<i>   ##########  Logs: /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-170-74-198.log</A>
</I>&gt;<i>   ######  ##        /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-170-74-198-sasl.log</A>
</I>&gt;<i>   ##########
</I>&gt;<i>               Starting broker...
</I>&gt;<i>
</I>&gt;<i> BOOT FAILED
</I>&gt;<i> ===========
</I>&gt;<i>
</I>&gt;<i> Error description:
</I>&gt;<i>    {could_not_start_tcp_listener,{&quot;XX.XXX.XX.XXX&quot;,5672}}
</I>&gt;<i>
</I>&gt;<i> Log files (may contain more information):
</I>&gt;<i>    /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-170-74-198.log</A>
</I>&gt;<i>    /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-170-74-198-sasl.log</A>
</I>&gt;<i>
</I>&gt;<i> Stack trace:
</I>&gt;<i>    [{rabbit_networking,start_listener0,4,[]},
</I>&gt;<i>     {rabbit_networking,'-start_listener/4-lc$^0/1-0-',4,[]},
</I>&gt;<i>     {rabbit_networking,start_listener,4,[]},
</I>&gt;<i>     {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1,[]},
</I>&gt;<i>     {rabbit_networking,boot_tcp,0,[]},
</I>&gt;<i>     {rabbit_networking,boot,0,[]},
</I>&gt;<i>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
</I>&gt;<i>     {rabbit,run_boot_step,1,[]}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> BOOT FAILED
</I>&gt;<i> ===========
</I>&gt;<i>
</I>&gt;<i> Error description:
</I>&gt;<i>    {could_not_start,rabbit,
</I>&gt;<i>        {bad_return,
</I>&gt;<i>            {{rabbit,start,[normal,[]]},
</I>&gt;<i>             {'EXIT',
</I>&gt;<i>                 {rabbit,failure_during_boot,
</I>&gt;<i>                    
</I>&gt;<i> {could_not_start_tcp_listener,{&quot;XX.XXX.XX.XXX&quot;,5672}}}}}}}
</I>&gt;<i>
</I>&gt;<i> Log files (may contain more information):
</I>&gt;<i>    /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-170-74-198.log</A>
</I>&gt;<i>    /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-170-74-198-sasl.log</A>
</I>&gt;<i>
</I>&gt;<i> {&quot;init terminating in
</I>&gt;<i> do_boot&quot;,{rabbit,failure_during_boot,{could_not_start,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot,{could_not_start_tcp_listener,{&quot;XX.XXX.XX.XXX&quot;,5672}}}}}}}}}
</I>&gt;<i>
</I>&gt;<i> How can I set the rabbitmq to use the public IP for other regions
</I>&gt;<i> access it?
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Best regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/95ab1dcb/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130724/95ab1dcb/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028990.html">[rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different regions
</A></li>
	<LI>Next message: <A HREF="028787.html">[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28841">[ date ]</a>
              <a href="thread.html#28841">[ thread ]</a>
              <a href="subject.html#28841">[ subject ]</a>
              <a href="author.html#28841">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
