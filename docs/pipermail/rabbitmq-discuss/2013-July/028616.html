<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 3.0.2 stops logging, but otherwise looks healthy?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.0.2%20stops%20logging%2C%0A%20but%20otherwise%20looks%20healthy%3F&In-Reply-To=%3C8e663phnfmx6mqp1bo7cp2ke.1374039837754%40email.android.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028612.html">
   <LINK REL="Next"  HREF="028636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 3.0.2 stops logging, but otherwise looks healthy?</H1>
    <B>Jeffery, Mark</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.0.2%20stops%20logging%2C%0A%20but%20otherwise%20looks%20healthy%3F&In-Reply-To=%3C8e663phnfmx6mqp1bo7cp2ke.1374039837754%40email.android.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 3.0.2 stops logging, but otherwise looks healthy?">MJeffery at fnb.co.za
       </A><BR>
    <I>Wed Jul 17 06:51:48 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028612.html">[rabbitmq-discuss] RabbitMQ 3.0.2 stops logging, but otherwise looks healthy?
</A></li>
        <LI>Next message: <A HREF="028636.html">[rabbitmq-discuss] RabbitMQ 3.0.2 stops logging, but otherwise looks healthy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28616">[ date ]</a>
              <a href="thread.html#28616">[ thread ]</a>
              <a href="subject.html#28616">[ subject ]</a>
              <a href="author.html#28616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello

You mentioned a cluster.
Is this happening on every box ?

Also, is the rabbit process running as &quot;foobar&quot; ?

Jeff

Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>&gt; wrote:



Here you go Mark. The file date/times line up with when I last saw logging in the files:

23:14 PROD <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at foomq1</A>:/proc/16050$ sudo ls -latr fd
total 0
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 2 -&gt; /foobar/logs/foomq1.foo.bar.com/rabbitmq-server.log&lt;<A HREF="http://foomq1.foo.bar.com/rabbitmq-server.log">http://foomq1.foo.bar.com/rabbitmq-server.log</A>&gt;
dr-xr-xr-x 7 foobar foobar  0 2013-06-02 11:50 ..
dr-x------ 2 foobar foobar  0 2013-06-02 11:50 .
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 9 -&gt; pipe:[122339989]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 8 -&gt; /foobar/logs/foomq1.foo.bar.com/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1sasl.log</A>&lt;<A HREF="http://foomq1.foo.bar.com/rabbit@foomq1sasl.log">http://foomq1.foo.bar.com/rabbit@foomq1sasl.log</A>&gt;
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 7 -&gt; /foobar/logs/foomq1.foo.bar.com/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1.log</A>&lt;<A HREF="http://foomq1.foo.bar.com/rabbit@foomq1.log">http://foomq1.foo.bar.com/rabbit@foomq1.log</A>&gt;
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 6 -&gt; socket:[122339982]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 5 -&gt; socket:[122339980]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 4 -&gt; pipe:[122339970]
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 3 -&gt; pipe:[122339970]
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 17 -&gt; socket:[122340310]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 16 -&gt; socket:[122340285]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 15 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/msg_store_persistent/397.rdq
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 14 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/msg_store_transient/0.rdq
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 13 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/queues/D1KLLKOJLVJ4YZGYLP2D32A9W/journal.jif
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 12 -&gt; pipe:[122339990]
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 11 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/LATEST.LOG
lrwx------ 1 foobar foobar 64 2013-06-02 11:50 10 -&gt; socket:[122339997]
l-wx------ 1 foobar foobar 64 2013-06-02 11:50 1 -&gt; /foobar/logs/foomq1.foo.bar.com/rabbitmq-server.log&lt;<A HREF="http://foomq1.foo.bar.com/rabbitmq-server.log">http://foomq1.foo.bar.com/rabbitmq-server.log</A>&gt;
lr-x------ 1 foobar foobar 64 2013-06-02 11:50 0 -&gt; /dev/null
lrwx------ 1 foobar foobar 64 2013-06-02 11:51 18 -&gt; socket:[122340314]
l-wx------ 1 foobar foobar 64 2013-06-02 12:28 21 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/queues/ETWUA9HXDWBIXFTEF0DVH5FBZ/journal.jif
lr-x------ 1 foobar foobar 64 2013-06-02 12:28 19 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/queues/22TABTKBIJ6DQCA5GC6EZ0B8L/journal.jif
l-wx------ 1 foobar foobar 64 2013-06-02 13:12 22 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/queues/A9AWP930R556ERL81W9PYEELL/journal.jif
lrwx------ 1 foobar foobar 64 2013-06-02 13:12 20 -&gt; /foobar/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at foomq1</A>/queues/A8EPKFQ4VCO5A3APTTWYEQRFT/journal.jif


On Tue, Jul 16, 2013 at 12:19 PM, Jeffery, Mark &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MJeffery at fnb.co.za</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MJeffery at fnb.co.za</A>&gt;&gt; wrote:

Hello

Assuming Linux, what does ls -latr show in the fd directory in the rabbitmq process's directory under /proc ?


Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>&gt;&gt; wrote:



This is admittedly a shot in the dark, and with limited repro details, but asking if somebody else has seen this.

We run our clustered RabbitMQ 3.0.2 brokers in production without restarts for months at a time. Everything is looking good - No memory leaks, no out-of-disk-space, etc...

However, in looking at the rabbit@&lt;node&gt;.log and rabbit@&lt;node&gt;-sasl.log files, I noticed that at some point (e.g. a month earlier), no new entries were being added to the log file. Normally there's a steady stream of new connections and connection drops.

I've listed the open file handles from the rabbitmq beam instance and I still see live file handles for the log files.

Anybody have any idea what might be happening? And better still, how we might kick things without restarting the broker?

Thanks,

Matt

To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser:
<A HREF="https://www.fnb.co.za/disclaimer.html">https://www.fnb.co.za/disclaimer.html</A>

If you are unable to access the Disclaimer, send a blank e-mail to <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">firstrandbankdisclaimer at fnb.co.za</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">firstrandbankdisclaimer at fnb.co.za</A>&gt; and we will send you a copy of the Disclaimer.

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>



To read FirstRand Bank's Disclaimer for this email click on the following address or copy into your Internet browser: 
<A HREF="https://www.fnb.co.za/disclaimer.html">https://www.fnb.co.za/disclaimer.html</A> 

If you are unable to access the Disclaimer, send a blank e-mail to
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">firstrandbankdisclaimer at fnb.co.za</A> and we will send you a copy of the Disclaimer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/cf7a4534/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130717/cf7a4534/attachment.htm</A>&gt;
</PRE>

























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028612.html">[rabbitmq-discuss] RabbitMQ 3.0.2 stops logging, but otherwise looks healthy?
</A></li>
	<LI>Next message: <A HREF="028636.html">[rabbitmq-discuss] RabbitMQ 3.0.2 stops logging, but otherwise looks healthy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28616">[ date ]</a>
              <a href="thread.html#28616">[ thread ]</a>
              <a href="subject.html#28616">[ subject ]</a>
              <a href="author.html#28616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
