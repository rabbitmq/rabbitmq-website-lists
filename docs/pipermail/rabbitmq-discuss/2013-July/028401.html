<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] DOS protection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20DOS%20protection&In-Reply-To=%3C51DADEFD.7010606%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028400.html">
   <LINK REL="Next"  HREF="028403.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] DOS protection</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20DOS%20protection&In-Reply-To=%3C51DADEFD.7010606%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] DOS protection">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Jul  8 16:47:09 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028400.html">[rabbitmq-discuss] DOS protection
</A></li>
        <LI>Next message: <A HREF="028403.html">[rabbitmq-discuss] DOS protection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28401">[ date ]</a>
              <a href="thread.html#28401">[ thread ]</a>
              <a href="subject.html#28401">[ subject ]</a>
              <a href="author.html#28401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Carl,

thanks for the answers. A few follow-up questions...

On 08/07/13 16:23, Carl H&#246;rberg wrote:
&gt;<i> On Monday 8 July 2013 at 12:19, Matthias Radestock wrote:
</I>&gt;&gt;<i> - what entities do you want to monitor? You mention channels,
</I>&gt;&gt;<i> consumers and declarations (presumably by that you mean exchanges,
</I>&gt;&gt;<i> queues, and bindings). Any others?
</I>&gt;<i>
</I>&gt;<i> That, plus connection count.
</I>
Connection count is bounded by the available file descriptors, for which
you can tune the limit in the O/S. I would have thought that is sufficient.

&gt;<i> A global limit would be sufficient for the time being, just for
</I>&gt;<i> protection, so that the cluster doesn't dies before we can see who
</I>&gt;<i> has done what.
</I>
So say rabbit enforced global limits for the numbers of channels, 
consumers, exchanges, queues and bindings. How would you go about 
picking the limits?

There is nothing wrong with having lots of channels, or lots of 
consumers, or lots of exchanges, etc, etc. But if you set upper bounds 
on what rabbit can sustain for each one of them, then a rabbit which 
encounters mixed usage could still run out of memory.

Furthermore, as you know, in the default configuration messages take up 
some residual memory even when paged to disk, which means there is less 
memory available for everything. This too makes it hard to choose any 
bounds which have a reasonable chance of working w/o being silly low.


Since your main concern is memory exhaustion - and by that presumably 
you mean rabbit crashing because it cannot allocate any more memory, 
rather than just hitting the memory alarm and blocking publisher - 
perhaps a better - simpler and more versatile - behaviour would be for 
rabbit to block all channel, consumer and resource declarations when 
memory gets *really* tight.


Regards,

Matthias.
</PRE>






















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028400.html">[rabbitmq-discuss] DOS protection
</A></li>
	<LI>Next message: <A HREF="028403.html">[rabbitmq-discuss] DOS protection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28401">[ date ]</a>
              <a href="thread.html#28401">[ thread ]</a>
              <a href="subject.html#28401">[ subject ]</a>
              <a href="author.html#28401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
