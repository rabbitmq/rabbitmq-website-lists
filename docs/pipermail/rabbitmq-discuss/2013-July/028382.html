<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Atomic acking of a specific set of messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Atomic%20acking%20of%20a%20specific%20set%20of%20messages&In-Reply-To=%3C51DA8875.6010706%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028377.html">
   <LINK REL="Next"  HREF="028386.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Atomic acking of a specific set of messages</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Atomic%20acking%20of%20a%20specific%20set%20of%20messages&In-Reply-To=%3C51DA8875.6010706%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Atomic acking of a specific set of messages">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Jul  8 10:37:57 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028377.html">[rabbitmq-discuss] Atomic acking of a specific set of messages
</A></li>
        <LI>Next message: <A HREF="028386.html">[rabbitmq-discuss] Atomic acking of a specific set of messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28382">[ date ]</a>
              <a href="thread.html#28382">[ thread ]</a>
              <a href="subject.html#28382">[ subject ]</a>
              <a href="author.html#28382">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/07/13 19:10, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">peter at vagaband.co</A> wrote:
&gt;<i> The flag to indicate you're acking multiple messages will not work as
</I>&gt;<i>  that limits you to work with just one batch, right? And you cannot
</I>&gt;<i> pick and choose which batch of messages you can or cannot ack with
</I>&gt;<i> that mode (i.e. batch 2 might succeed, batch 3 might fail and batch 4
</I>&gt;<i> might succeed. so if you ack batch 4, everything will be acked).
</I>
Correct. Besides multi-ack is not atomic anyway.

&gt;<i> The key here is treat a batch of messages as an atomic unit so if a
</I>&gt;<i> single message consumer node dies or all message consumer nodes die
</I>&gt;<i> or a rabbitmq node dies, then the whole batch can be failed to be
</I>&gt;<i> re-tried later.
</I>
There is no atomic multi-message ack in RabbitMQ.

And even if there was one, I don't think it would help you. In
particular, how would exactly-once semantics be retained when your
application (the one that accumulates messages into batches) crashes
after submitting the batch but before sending the hypothetical
atomic multi-message ack?

&gt;<i> is there some pattern I could implement using what RabbitMQ provides
</I>&gt;<i> to achieve this?
</I>
The pattern to get the effect of exactly-once in RabbitMQ is the same as
that employed by stomp and trident, namely to ensure idempotence (of
batches, in case of trident, and of messages in case of rabbit). Quite
how that can be achieved depends on the application.

Matthias.
</PRE>






















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028377.html">[rabbitmq-discuss] Atomic acking of a specific set of messages
</A></li>
	<LI>Next message: <A HREF="028386.html">[rabbitmq-discuss] Atomic acking of a specific set of messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28382">[ date ]</a>
              <a href="thread.html#28382">[ thread ]</a>
              <a href="subject.html#28382">[ subject ]</a>
              <a href="author.html#28382">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
