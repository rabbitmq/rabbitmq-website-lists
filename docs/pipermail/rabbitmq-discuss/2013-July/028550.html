<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Checking queue size in bytes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Checking%20queue%20size%20in%20bytes&In-Reply-To=%3CCA%2B5po3eoC8FKcSviAvSD4PjxQfB6J797uVVixm8%2BzzYGgTv7ng%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028472.html">
   <LINK REL="Next"  HREF="028398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Checking queue size in bytes</H1>
    <B>Joseph Weeks</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Checking%20queue%20size%20in%20bytes&In-Reply-To=%3CCA%2B5po3eoC8FKcSviAvSD4PjxQfB6J797uVVixm8%2BzzYGgTv7ng%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Checking queue size in bytes">weojoew at gmail.com
       </A><BR>
    <I>Fri Jul 12 17:18:12 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028472.html">[rabbitmq-discuss] Checking queue size in bytes
</A></li>
        <LI>Next message: <A HREF="028398.html">[rabbitmq-discuss] Odd Behavior w/ Restoring Broken Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28550">[ date ]</a>
              <a href="thread.html#28550">[ thread ]</a>
              <a href="subject.html#28550">[ subject ]</a>
              <a href="author.html#28550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you, Matthias!

The &quot;total payload size of messages in a queue&quot; feature would perfectly
suit our needs.  I completely understand the low priority of this and the
other queue policies; our situation fortunately appears to be an
exceedingly unusual one across the community (and tantamount to broker
abuse).

By the way - the changes between 2.8.7 and the 3.x releases have been an
enormous help to us.  RabbitMQ has long been the most reliable part of our
architecture, and with every release we find it to be more reliable and
easier to configure and monitor.  On top of all that, the new features and
enhancements have frequently obviated the need for sizeable portions of our
applications.  Judging by the repository (particularly the bug25553 branch)
and other discussions on the mailing list, we can expect even more of that
in the future.

That's all to say - thanks guys.



On Wed, Jul 10, 2013 at 3:36 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> Joe,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 08/07/13 15:28, Joseph Weeks wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Is there a way to determine a queue's size in bytes?  I'm mostly
</I>&gt;&gt;<i> interested in size on disk, but the sum of memory and disk would be
</I>&gt;&gt;<i> sufficient if that happens to be more readily available.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> In general that is impossible, since messages sent to multiple queues are
</I>&gt;<i> only stored on disk once and their payloads are shared in memory.
</I>&gt;<i>
</I>&gt;<i> Then there's the added complication that actual memory use of a message
</I>&gt;<i> is difficult to work out at best, and impossible if taking into account
</I>&gt;<i> memory fragmentation and gc effects. on-disk size is quite hard to
</I>&gt;<i> calculate too.
</I>&gt;<i>
</I>&gt;<i> Having said that, I suppose we could track the &quot;total payload size of
</I>&gt;<i> messages in a queue&quot;, which would probably suffice for your use case.
</I>&gt;<i>
</I>&gt;<i> I have just filed a feature request for that. It's not a trivial piece of
</I>&gt;<i> work though, and we haven't had many requests for this functionality, so I
</I>&gt;<i> wouldn't expect to see this in a release soon.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  On a related note, would it be possible for some future version of
</I>&gt;&gt;<i> RabbitMQ to allow queue policies like &quot;x-max-length&quot; and &quot;x-message-ttl&quot;
</I>&gt;&gt;<i> in addition to the queue declaration arguments?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes. It's on our todo list, but not a priority.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/dcfdf8bc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130712/dcfdf8bc/attachment.htm</A>&gt;
</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028472.html">[rabbitmq-discuss] Checking queue size in bytes
</A></li>
	<LI>Next message: <A HREF="028398.html">[rabbitmq-discuss] Odd Behavior w/ Restoring Broken Cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28550">[ date ]</a>
              <a href="thread.html#28550">[ thread ]</a>
              <a href="subject.html#28550">[ subject ]</a>
              <a href="author.html#28550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
