<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Monitor and restart
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Monitor%20and%20restart&In-Reply-To=%3CCAGQEY6nE8jP6QmSQ8%2B96PRru%3DzY-k%3DHsP51p%3DMS6_CZbgyYZEg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028453.html">
   <LINK REL="Next"  HREF="028455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Monitor and restart</H1>
    <B>Jorge Diz Pico</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Monitor%20and%20restart&In-Reply-To=%3CCAGQEY6nE8jP6QmSQ8%2B96PRru%3DzY-k%3DHsP51p%3DMS6_CZbgyYZEg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Monitor and restart">jorge.diz at nomasystems.com
       </A><BR>
    <I>Thu Jul 11 10:25:49 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028453.html">[rabbitmq-discuss] Monitor and restart
</A></li>
        <LI>Next message: <A HREF="028455.html">[rabbitmq-discuss] Monitor and restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28488">[ date ]</a>
              <a href="thread.html#28488">[ thread ]</a>
              <a href="subject.html#28488">[ subject ]</a>
              <a href="author.html#28488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> So you can indeed add some settings to RABBITMQ_SERVER_ERL_ARGS when
</I>starting up (or set these in the rabbitmq user's default environment) and
of course you'll need to set the HEART_COMMAND environment variable to
whatever command you normally use to start the broker (depending on how you
installed it).

That's what I'm trying, but it doesn't work as expected (the rabbit node
immediately crashes during init after being started this way).

&gt;<i> There are a couple of reasons we don't do this out of the box [...]
</I>
I understand now, thanks.

&gt;<i> Yes, See <A HREF="http://www.rabbitmq.com/reliability.html">http://www.rabbitmq.com/reliability.html</A>
</I>
That's internally, but I was looking at it from outside. Some embedded
utility for monitoring its behaviour and knowing it's come down (and
ideally, it would pull itself back up again).


On Wed, Jul 10, 2013 at 12:09 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:

&gt;<i> Hi Jorge,
</I>&gt;<i>
</I>&gt;<i> On 8 Jul 2013, at 16:21, Jorge Diz Pico wrote:
</I>&gt;<i>
</I>&gt;<i> I peeked around and noticed Rabbit is not using heart, which makes me
</I>&gt;<i> unease about potential crashes. I tried to tweak the start scripts myself
</I>&gt;<i> but it's not as straight-forward as it would seem to make it work.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So you can indeed add some settings to RABBITMQ_SERVER_ERL_ARGS when
</I>&gt;<i> starting up (or set these in the rabbitmq user's default environment) and
</I>&gt;<i> of course you'll need to set the HEART_COMMAND environment variable to
</I>&gt;<i> whatever command you normally use to start the broker (depending on how you
</I>&gt;<i> installed it).
</I>&gt;<i>
</I>&gt;<i> So before I make a mess of it, I'd like to know if there's any reason why
</I>&gt;<i> Rabbit doesn't use heart or even offer a quick flag to enable it (at least
</I>&gt;<i> I couldn't find any reference to it). Does it use any other mechanism
</I>&gt;<i> underneath to ensure reliability?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There are a couple of reasons we don't do this out of the box.
</I>&gt;<i>
</I>&gt;<i> 1. it would be fiddly to set this up in a packaged install for all
</I>&gt;<i> possible environments
</I>&gt;<i> 2. there's a plethora of other generic options out there (such as monit,
</I>&gt;<i> god, etc)
</I>&gt;<i> 3. automatically restarting a clustered node could have unintended
</I>&gt;<i> consequences, depending on how it died
</I>&gt;<i>
</I>&gt;<i> In short, by all means turn heart on if you like, but if I were you I'd
</I>&gt;<i> consider looking at other generic options too. And make sure you understand
</I>&gt;<i> what the potential consequences of automatic restart might be, for example
</I>&gt;<i> if several clustered nodes go offline together, the order in which they're
</I>&gt;<i> restarted can be important.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/37bb9b19/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130711/37bb9b19/attachment.htm</A>&gt;
</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028453.html">[rabbitmq-discuss] Monitor and restart
</A></li>
	<LI>Next message: <A HREF="028455.html">[rabbitmq-discuss] Monitor and restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28488">[ date ]</a>
              <a href="thread.html#28488">[ thread ]</a>
              <a href="subject.html#28488">[ subject ]</a>
              <a href="author.html#28488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
