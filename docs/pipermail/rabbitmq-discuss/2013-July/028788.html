<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%202.6.1%20crash%20on%20CentOS&In-Reply-To=%3C51EE7063.9050702%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028787.html">
   <LINK REL="Next"  HREF="028789.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%202.6.1%20crash%20on%20CentOS&In-Reply-To=%3C51EE7063.9050702%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS">simon at rabbitmq.com
       </A><BR>
    <I>Tue Jul 23 13:00:35 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028787.html">[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
</A></li>
        <LI>Next message: <A HREF="028789.html">[rabbitmq-discuss] Connection timed out when connecting to remote rabbitmq server using rabbitmq client library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28788">[ date ]</a>
              <a href="thread.html#28788">[ thread ]</a>
              <a href="subject.html#28788">[ subject ]</a>
              <a href="author.html#28788">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It looks like the message store crashed, although you haven't posted the 
error message from the message store crash, just one of the queues 
crashing afterwards because it couldn't find it.

Having said that, a huge number of bugs have been fixed since 2.6.1; an 
upgrade is strongly recommended.

Cheers, Simon

On 23/07/13 06:47, mail.zhang.yee wrote:
&gt;<i> Hi All
</I>&gt;<i> Nice to see you here, we recently got a problem during openstack
</I>&gt;<i> deployment in CentOS6.3.
</I>&gt;<i> The rabbitmq constantly crash after running one or two days.
</I>&gt;<i> Cloud somebody here can take a look at what's happened inside rabbitmq
</I>&gt;<i> and how to fix it?
</I>&gt;<i> detailed status and logs as below. thanks in advance.
</I>&gt;<i> ======================================
</I>&gt;<i>   rabbitmqctl status
</I>&gt;<i> Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A> ...
</I>&gt;<i> [{pid,29272},
</I>&gt;<i>   {running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;2.6.1&quot;},
</I>&gt;<i>                          {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.7&quot;},
</I>&gt;<i>                          {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.10&quot;},
</I>&gt;<i>                          {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.5&quot;},
</I>&gt;<i>                          {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.5&quot;},
</I>&gt;<i>                          {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.5&quot;}]},
</I>&gt;<i>   {os,{unix,linux}},
</I>&gt;<i>   {erlang_version,&quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit]
</I>&gt;<i> [smp:32:32] [rq:32] [async-threads:30] [kernel-poll:true]\n&quot;},
</I>&gt;<i>   {memory,[{total,74666016},
</I>&gt;<i>            {processes,45884208},
</I>&gt;<i>            {processes_used,45866296},
</I>&gt;<i>            {system,28781808},
</I>&gt;<i>            {atom,1119593},
</I>&gt;<i>            {atom_used,1113078},
</I>&gt;<i>            {binary,3421464},
</I>&gt;<i>            {code,11053747},
</I>&gt;<i>            {ets,7607264}]}]
</I>&gt;<i> ...done.
</I>&gt;<i> ======================================
</I>&gt;<i> =ERROR REPORT==== 22-Jul-2013::14:50:26 ===
</I>&gt;<i> ** Generic server &lt;0.1921.0&gt; terminating
</I>&gt;<i> ** Last message in was {'EXIT',&lt;0.237.0&gt;,shutdown}
</I>&gt;<i> ** When Server state == {q,
</I>&gt;<i>                           {amqqueue,
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
</I>&gt;<i>                             &lt;&lt;&quot;conductor.ci91szcmp004.webex.com
</I>&gt;<i> &lt;<A HREF="http://conductor.ci91szcmp004.webex.com">http://conductor.ci91szcmp004.webex.com</A>&gt;&quot;&gt;&gt;},
</I>&gt;<i>                            false,false,none,
</I>&gt;<i>                            [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
</I>&gt;<i>                            &lt;0.1921.0&gt;,[],all},
</I>&gt;<i>                           none,true,rabbit_mirror_queue_master,
</I>&gt;<i>
</I>&gt;<i>   {state,&lt;0.1923.0&gt;,&lt;0.1922.0&gt;,rabbit_variable_queue,
</I>&gt;<i>                            {vqstate,
</I>&gt;<i>                             {[],[]},
</I>&gt;<i>                             {0,{[],[]}},
</I>&gt;<i>                             {delta,undefined,0,undefined},
</I>&gt;<i>                             {0,{[],[]}},
</I>&gt;<i>                             {[],[]},
</I>&gt;<i>                             0,
</I>&gt;<i>                             {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                []}}},
</I>&gt;<i>                             undefined,
</I>&gt;<i>                             {0,nil},
</I>&gt;<i>                             {qistate,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>/queues/A1FBAI3711PERTSXW5DHR0X8Y&quot;,
</I>&gt;<i>                              {{dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                 []},
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                  []}}},
</I>&gt;<i>                               []},
</I>&gt;<i>                              undefined,0,262144,
</I>&gt;<i>                              #Fun&lt;rabbit_variable_queue.2.41165857&gt;,[]},
</I>&gt;<i>                             {undefined,
</I>&gt;<i>                              {client_msstate,msg_store_transient,
</I>&gt;<i>
</I>&gt;<i>   &lt;&lt;207,96,115,58,236,124,180,246,67,18,228,236,182,
</I>&gt;<i>                                 66,117,84&gt;&gt;,
</I>&gt;<i>                               {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                 []},
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                  []}}},
</I>&gt;<i>                               {state,200768,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>/msg_store_transient&quot;},
</I>&gt;<i>                               rabbit_msg_store_ets_index,
</I>&gt;<i>
</I>&gt;<i>   &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>/msg_store_transient&quot;,
</I>&gt;<i>                               &lt;0.228.0&gt;,204865,196671,208962}},
</I>&gt;<i>
</I>&gt;<i>   false,0,#Fun&lt;rabbit_amqqueue_process.5.31190493&gt;,0,
</I>&gt;<i>                             0,infinity,0,0,0,0,0,0,
</I>&gt;<i>                             {rates,
</I>&gt;<i>                              {{1374,213408,350099},0},
</I>&gt;<i>                              {{1374,213408,350099},0},
</I>&gt;<i>                              0.0,0.0,
</I>&gt;<i>                              {1374,213451,550036}},
</I>&gt;<i>                             {0,nil},
</I>&gt;<i>                             {0,nil},
</I>&gt;<i>                             {0,nil},
</I>&gt;<i>                             {0,nil},
</I>&gt;<i>                             0,0,
</I>&gt;<i>                             {rates,
</I>&gt;<i>                              {{1374,213408,350099},0},
</I>&gt;<i>                              {{1374,213408,350099},0},
</I>&gt;<i>                              0.0,0.0,
</I>&gt;<i>                              {1374,213451,550036}}},
</I>&gt;<i>                            0,
</I>&gt;<i>                            {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>   {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                               []}}},
</I>&gt;<i>                            [],
</I>&gt;<i>                            {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>   {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                               []}}},
</I>&gt;<i>                            {set,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>   {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>                             {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                               []}}}},
</I>&gt;<i>                           {[],[]},
</I>&gt;<i>                           {[],[]},
</I>&gt;<i>
</I>&gt;<i>   undefined,undefined,#Ref&lt;0.0.742.237144&gt;,undefined,
</I>&gt;<i>                           {state,none,5000,undefined},
</I>&gt;<i>                           {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>                           undefined,undefined}
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i> ** {noproc,
</I>&gt;<i>         {gen_server2,call,
</I>&gt;<i>             [msg_store_transient,
</I>&gt;<i>              {client_terminate,
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;207,96,115,58,236,124,180,246,67,18,228,236,182,66,117,84&gt;&gt;},
</I>&gt;<i>              infinity]}}
</I>&gt;<i> ** In 'terminate' callback with reason ==
</I>&gt;<i> ** shutdown
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 22-Jul-2013::14:50:26 ===
</I>&gt;<i> ** gen_event handler rabbit_error_logger crashed.
</I>&gt;<i> ** Was installed in error_logger
</I>&gt;<i> ** Last event was: {error,&lt;0.119.0&gt;,
</I>&gt;<i>                      {&lt;0.1887.0&gt;,
</I>&gt;<i>                       &quot;** Generic server ~p terminating~n** Last message
</I>&gt;<i> in was ~p~n** When Server state == ~p~n** Reason for termination == ~n**
</I>&gt;<i> ~p~n** In 'terminate' callback with reason ==~n** ~p~n&quot;,
</I>&gt;<i>                       [&lt;0.1887.0&gt;,
</I>&gt;<i>                        {'EXIT',&lt;0.237.0&gt;,shutdown},
</I>&gt;<i>                        {q,
</I>&gt;<i>                         {amqqueue,
</I>&gt;<i>                          {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;consoleauth&quot;&gt;&gt;},
</I>&gt;<i>                          false,false,none,
</I>&gt;<i>                          [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
</I>&gt;<i>                          &lt;0.1887.0&gt;,[],all},
</I>&gt;<i>                         none,true,rabbit_mirror_queue_master,
</I>&gt;<i>                         {state,&lt;0.1889.0&gt;,&lt;0.1888.0&gt;,rabbit_variable_queue,
</I>&gt;<i>                          {vqstate,
</I>&gt;<i>                           {[],[]},
</I>&gt;<i>                           {0,{[],[]}},
</I>&gt;<i>                           {delta,undefined,0,undefined},
</I>&gt;<i>                           {0,{[],[]}},
</I>&gt;<i>                           {[],[]},
</I>&gt;<i>                           8,
</I>&gt;<i>                           {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>                           undefined,
</I>&gt;<i>                           {0,nil},
</I>&gt;<i>                           {qistate,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>/queues/1AV7T4P6H9GB74RNTGRVPV2OY&quot;,
</I>&gt;<i>                            {{dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                []}}},
</I>&gt;<i>                             []},
</I>&gt;<i>                            undefined,0,262144,
</I>&gt;<i>                            #Fun&lt;rabbit_variable_queue.2.41165857&gt;,[]},
</I>&gt;<i>                           {undefined,
</I>&gt;<i>                            {client_msstate,msg_store_transient,
</I>&gt;<i>                             &lt;&lt;&quot;&#1850;&#65533;o$&#65533;&#65533;W&#65533;&#65533;&#65533;&#65533;\b?J&quot;&gt;&gt;,
</I>&gt;<i>                             {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>                              {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                []}}},
</I>&gt;<i>                             {state,200768,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>/msg_store_transient&quot;},
</I>&gt;<i>                             rabbit_msg_store_ets_index,
</I>&gt;<i>
</I>&gt;<i>   &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>/msg_store_transient&quot;,
</I>&gt;<i>                             &lt;0.228.0&gt;,204865,196671,208962}},
</I>&gt;<i>
</I>&gt;<i>   false,0,#Fun&lt;rabbit_amqqueue_process.5.31190493&gt;,0,0,
</I>&gt;<i>                           infinity,0,0,0,0,0,0,
</I>&gt;<i>                           {rates,
</I>&gt;<i>                            {{1374,460116,880026},2},
</I>&gt;<i>                            {{1374,460116,880026},2},
</I>&gt;<i>                            0.0016008717049531846,0.0016008717049531846,
</I>&gt;<i>                            {1374,461800,598037}},
</I>&gt;<i>                           {0,nil},
</I>&gt;<i>                           {0,nil},
</I>&gt;<i>                           {0,nil},
</I>&gt;<i>                           {0,nil},
</I>&gt;<i>                           0,0,
</I>&gt;<i>                           {rates,
</I>&gt;<i>                            {{1374,460116,880026},2},
</I>&gt;<i>                            {{1374,460116,880026},2},
</I>&gt;<i>                            0.0016008717049531846,0.0016008717049531846,
</I>&gt;<i>                            {1374,461800,598037}}},
</I>&gt;<i>                          0,
</I>&gt;<i>                          {dict,0,16,16,8,80,48,
</I>&gt;<i>                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>   {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>                          [],
</I>&gt;<i>                          {dict,0,16,16,8,80,48,
</I>&gt;<i>                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>   {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>                          {set,0,16,16,8,80,48,
</I>&gt;<i>                           {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>   {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}},
</I>&gt;<i>                         {[],[]},
</I>&gt;<i>                         {[],[]},
</I>&gt;<i>                         undefined,undefined,#Ref&lt;0.0.742.237570&gt;,undefined,
</I>&gt;<i>                         {state,none,5000,undefined},
</I>&gt;<i>                         {dict,0,16,16,8,80,48,
</I>&gt;<i>                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>                         undefined,undefined},
</I>&gt;<i>                        {noproc,
</I>&gt;<i>                         {gen_server2,call,
</I>&gt;<i>                          [msg_store_transient,
</I>&gt;<i>                           {client_terminate,&lt;&lt;&quot;&#1850;&#65533;o$&#65533;&#65533;W&#65533;&#65533;&#65533;&#65533;\b?J&quot;&gt;&gt;},
</I>&gt;<i>                           infinity]}},
</I>&gt;<i>                        shutdown]}}
</I>&gt;<i> ** When handler state == {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,exchange,&lt;&lt;&quot;amq.rabbitmq.log&quot;&gt;&gt;}
</I>&gt;<i> ** Reason == {badarg,[{ets,lookup,[rabbit_registry,{exchange,topic}]},
</I>&gt;<i>                        {rabbit_registry,lookup_module,2},
</I>&gt;<i>                        {rabbit_exchange,type_to_module,1},
</I>&gt;<i>                        {rabbit_exchange,route1,2},
</I>&gt;<i>                        {rabbit_basic,publish,2},
</I>&gt;<i>                        {rabbit_error_logger,publish1,4},
</I>&gt;<i>                        {rabbit_error_logger,handle_event,2},
</I>&gt;<i>                        {gen_event,server_update,4}]}
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 22-Jul-2013::14:50:27 ===
</I>&gt;<i>      application: rabbit
</I>&gt;<i>      exited: shutdown
</I>&gt;<i>      type: permanent
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028787.html">[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
</A></li>
	<LI>Next message: <A HREF="028789.html">[rabbitmq-discuss] Connection timed out when connecting to remote rabbitmq server using rabbitmq client library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28788">[ date ]</a>
              <a href="thread.html#28788">[ thread ]</a>
              <a href="subject.html#28788">[ subject ]</a>
              <a href="author.html#28788">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
