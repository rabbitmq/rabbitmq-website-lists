<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to not publish messages,	if queue is full?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20not%20publish%20messages%2C%0A%09if%20queue%20is%20full%3F&In-Reply-To=%3C51E528E0.7090006%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028581.html">
   <LINK REL="Next"  HREF="028779.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to not publish messages,	if queue is full?</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20not%20publish%20messages%2C%0A%09if%20queue%20is%20full%3F&In-Reply-To=%3C51E528E0.7090006%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] How to not publish messages,	if queue is full?">emile at rabbitmq.com
       </A><BR>
    <I>Tue Jul 16 12:05:04 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028581.html">[rabbitmq-discuss] How to not publish messages, if queue is full?
</A></li>
        <LI>Next message: <A HREF="028779.html">[rabbitmq-discuss] How to not publish messages,	if queue is full?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28598">[ date ]</a>
              <a href="thread.html#28598">[ thread ]</a>
              <a href="subject.html#28598">[ subject ]</a>
              <a href="author.html#28598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 15/07/13 15:14, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sergey at openbridge.com</A> wrote:

&gt;<i> What are the possible ways to not drop the messages? 
</I>
There's no simple answer to this question. If you don't want messages to
be dropped then you should consider using a different solution.
Determine what you hope to achieve by limiting queue length and check
whether the same aims can be achieved in another way.

&gt;<i> Ideally I would like to throw an Exception if queue is full.
</I>
You can notify publishers that the queue was full after the fact, by
configuring a dead-letter-exchange for overflow messages. Publishers can
bind a private queue to the DLX and consume from it. Publishers can
treat it as an exception when messages they sent reach them via that
subscription.

However this does not prevent messages from being dropped in the first
place.

&gt;<i> First I was thinking to check the queue size, and if it's full than
</I>&gt;<i> stop. But for example if I have 5 producers and queue limit size is set
</I>&gt;<i> to 10, and I already have 9 messages in the queue, than all 5 producers
</I>&gt;<i> will check the size, and publish their messages and 4 messages will be lost.
</I>
That won't work well if many publishers monitor the same queue. You
could craft a solution around the same idea if each publisher published
to a separate length-limited queue.



-Emile




</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028581.html">[rabbitmq-discuss] How to not publish messages, if queue is full?
</A></li>
	<LI>Next message: <A HREF="028779.html">[rabbitmq-discuss] How to not publish messages,	if queue is full?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28598">[ date ]</a>
              <a href="thread.html#28598">[ thread ]</a>
              <a href="subject.html#28598">[ subject ]</a>
              <a href="author.html#28598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
