<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] What is occuered when the master node output warning log of msg_store_persistent ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20occuered%20when%20the%20master%20node%20output%0A%20warning%20log%20of%20msg_store_persistent%20%3F&In-Reply-To=%3CCACi3n5JiS9zRUKWreGdeTdudK5A7FT3%3DkXQZWy09icip%2B-E1eQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028263.html">
   <LINK REL="Next"  HREF="028358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] What is occuered when the master node output warning log of msg_store_persistent ?</H1>
    <B>t.otoda</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20occuered%20when%20the%20master%20node%20output%0A%20warning%20log%20of%20msg_store_persistent%20%3F&In-Reply-To=%3CCACi3n5JiS9zRUKWreGdeTdudK5A7FT3%3DkXQZWy09icip%2B-E1eQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] What is occuered when the master node output warning log of msg_store_persistent ?">t.otoda.freemail at gmail.com
       </A><BR>
    <I>Thu Jul  4 20:11:12 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028263.html">[rabbitmq-discuss] What is occuered when the master node output warning log of msg_store_persistent ?
</A></li>
        <LI>Next message: <A HREF="028358.html">[rabbitmq-discuss] What is occuered when the master node output warning log of msg_store_persistent ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28337">[ date ]</a>
              <a href="thread.html#28337">[ thread ]</a>
              <a href="subject.html#28337">[ subject ]</a>
              <a href="author.html#28337">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you for reply.

I made sure we shut down the server using 'rabbitmqctl stop'.
And our app disconnect the server when we shut down,
so any loads didn't depend on it.

Well, in case that message is output the server log,
does our app  have risks to be affected by using it ?




2013/7/3 Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;

&gt;<i> This is nothing to do with master vs slave (which is a term applied to
</I>&gt;<i> individual queue-node combinations by the way, not to entire nodes).
</I>&gt;<i>
</I>&gt;<i> That message means the broker was shut down unexpectedly, and it was not
</I>&gt;<i> able to trust its indices as a consequence. This can take quite some time -
</I>&gt;<i> so make sure you shut down the server properly (with e.g. rabbitmqctl stop,
</I>&gt;<i> or /etc/init.d/rabbitmq-server stop, or stopping the Windows service).
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 02/07/13 19:32, t.otoda wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I use RabbitMQ 3.0.1 and have a cluster with 2 disk nodes.
</I>&gt;&gt;<i> When I stoped and restarted both, the master node output log below.
</I>&gt;&gt;<i>   =WARNING REPORT==== 19-Jun-2013::23:56:59 ===
</I>&gt;&gt;<i> msg_store_persistent: recovery terms differ from present
</I>&gt;&gt;<i> rebuilding indices from scratch
</I>&gt;&gt;<i> Please tell me why this log is output
</I>&gt;&gt;<i> and what is occuered within RabbitMQ nodes.
</I>&gt;&gt;<i> I expect that
</I>&gt;&gt;<i> when a slave disk node is started,
</I>&gt;&gt;<i> the master node compares the indices it owns and the indices started
</I>&gt;&gt;<i> slave owns.
</I>&gt;&gt;<i> And then,
</I>&gt;&gt;<i> since the slave node was stopped by the abnormal way(&#8251;),
</I>&gt;&gt;<i> the indices differed from the other, and the master node output log.
</I>&gt;&gt;<i> Is this correct?
</I>&gt;&gt;<i>   (&#8251;)For example, I stoped the node
</I>&gt;&gt;<i>         beore it becomes the new master node instead of the stopped
</I>&gt;&gt;<i> master node.
</I>&gt;&gt;<i> Thank you.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/254114ed/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130705/254114ed/attachment.htm</A>&gt;
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028263.html">[rabbitmq-discuss] What is occuered when the master node output warning log of msg_store_persistent ?
</A></li>
	<LI>Next message: <A HREF="028358.html">[rabbitmq-discuss] What is occuered when the master node output warning log of msg_store_persistent ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28337">[ date ]</a>
              <a href="thread.html#28337">[ thread ]</a>
              <a href="subject.html#28337">[ subject ]</a>
              <a href="author.html#28337">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
