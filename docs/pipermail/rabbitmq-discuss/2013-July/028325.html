<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Consistent%20Hashing%20Exchange&In-Reply-To=%3C46e760f0-355b-437d-af29-215a79bf85b2%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028308.html">
   <LINK REL="Next"  HREF="028379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange</H1>
    <B>John Turner</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Consistent%20Hashing%20Exchange&In-Reply-To=%3C46e760f0-355b-437d-af29-215a79bf85b2%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange">john.turner at thoughtforge.net
       </A><BR>
    <I>Thu Jul  4 11:48:53 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028308.html">[rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
</A></li>
        <LI>Next message: <A HREF="028379.html">[rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28325">[ date ]</a>
              <a href="thread.html#28325">[ thread ]</a>
              <a href="subject.html#28325">[ subject ]</a>
              <a href="author.html#28325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tim,

I've added some comments inline.  I'm very happy to help you with 
requirements here so if a call would help let me know and I'll set it up.

Do you have a timeline for this feature?

Regards

John

On Wednesday, 3 July 2013 21:24:26 UTC+1, hyperthunk wrote:
&gt;<i>
</I>&gt;<i> We've got an open bug to provide a 'message groups' feature like this and 
</I>&gt;<i> are hoping to get it ready for a feature release ASAP. 
</I>&gt;<i>
</I>&gt;<i> Just out of interest, for your use-case, how would you expect failover to 
</I>&gt;<i> work.
</I>
 

&gt;<i> Do you want all future messages delivered to another random consumer? 
</I>&gt;<i> (Yes)
</I>
 

&gt;<i> What about un-acked messages that were already delivered - we plan on 
</I>&gt;<i> redelivering these (Agree) - and how do you plan on explicitly 
</I>&gt;<i> terminating a group? (This is not a requirement.  Groups should only be 
</I>&gt;<i> terminated by a connection closing either explicitly or due to failure)
</I>
 

&gt;<i> Would a special message (or header) given by the producer suit that 
</I>&gt;<i> purpose? (If people want this functionality I would suggest this is the 
</I>&gt;<i> best way.  You might also consider giving the consumer the ability to 
</I>&gt;<i> terminate a message group but we don't have a specific use case for this. 
</I>&gt;<i>  It might be something for future releases.)
</I>
 

&gt;<i> What about consumers that don't disconnect but indicate they'd like to 
</I>&gt;<i> stop processing that group of messages? (I referred to this above.  I'd 
</I>&gt;<i> suggest you add this to a future release as it really is not a must have).Do you have consumers that want to recieve more than one group in parallel? 
</I>&gt;<i> (Absolutely) And what about producers that go away - do you close the 
</I>&gt;<i> group when they disconnect or keep it open indefinitely, or use a timeout? (I 
</I>&gt;<i> would keep it open indefinitely because multiple producers may be 
</I>&gt;<i> contributing messages to a single group.  You have some challenges around 
</I>&gt;<i> clean up here though.  It could be reasonable to say that when all messages 
</I>&gt;<i> in a group have been processed that the group closes after a timeout.  When 
</I>&gt;<i> subsequent messages arrive the group is recreated.)
</I>&gt;<i>
</I>&gt;<i> None of those things are very clear to me from the activemq docs, so 
</I>&gt;<i> hearing from a real world user would be nice! :) 
</I>&gt;<i>
</I>&gt;<i> Cheers, 
</I>&gt;<i> Tim 
</I>&gt;<i>
</I>&gt;<i> On 3 Jul 2013, at 11:57, John Turner &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">john.... at thoughtforge.net</A>&lt;javascript:&gt;&gt; 
</I>&gt;<i> wrote: 
</I>&gt;<i>
</I>&gt;<i> &gt; Hi All, 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm very familiar with JMS and have used the GroupID extension to 
</I>&gt;<i> provide processing affinity to a single consumer.  For further information 
</I>&gt;<i> on how this works see this ActiveMQ documentation: 
</I>&gt;<i> <A HREF="http://activemq.apache.org/message-groups.html">http://activemq.apache.org/message-groups.html</A> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This solves the following requirement: 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; * Messages are distributed to a queue with a GroupID header. 
</I>&gt;<i> &gt; * The broker guarantees that messages with a specific GroupID (say 
</I>&gt;<i> '1234') will only be processed by a single consumer. 
</I>&gt;<i> &gt; * If the consumer fails (i.e. the connection is broken or closed), the 
</I>&gt;<i> broker will allow another consumer to process messages with that GroupID 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Using RabbitMQ and the Consistent Hashing Plugin does not not appear to 
</I>&gt;<i> solve the problem because if we are using static (durable) queues, the 
</I>&gt;<i> consumer failover mechanism needs to be implemented outside the server. 
</I>&gt;<i>  Does anyone have any insight into this problem they could share? 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; An alternative would be to extend the queue to ensure apply the same 
</I>&gt;<i> consistent hashing mechanism to the actual queue rather than the broker. 
</I>&gt;<i>  Does anyone know if it si possible to extend the queue implementation? 
</I>&gt;<i> &gt; _______________________________________________ 
</I>&gt;<i> &gt; rabbitmq-discuss mailing list 
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq... at lists.rabbitmq.com</A> &lt;javascript:&gt; 
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A> 
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/bbd8fd20/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/bbd8fd20/attachment.htm</A>&gt;
</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028308.html">[rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
</A></li>
	<LI>Next message: <A HREF="028379.html">[rabbitmq-discuss] RabbitMQ Consistent Hashing Exchange
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28325">[ date ]</a>
              <a href="thread.html#28325">[ thread ]</a>
              <a href="subject.html#28325">[ subject ]</a>
              <a href="author.html#28325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
