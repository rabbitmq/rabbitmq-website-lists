<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Trouble with confirms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Trouble%20with%20confirms&In-Reply-To=%3C51F69D9D.9000704%40lshift.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028960.html">
   <LINK REL="Next"  HREF="028987.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Trouble with confirms</H1>
    <B>Ceri Storey</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Trouble%20with%20confirms&In-Reply-To=%3C51F69D9D.9000704%40lshift.net%3E"
       TITLE="[rabbitmq-discuss] Trouble with confirms">ceri at lshift.net
       </A><BR>
    <I>Mon Jul 29 17:51:41 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028960.html">[rabbitmq-discuss] Trouble with confirms
</A></li>
        <LI>Next message: <A HREF="028987.html">[rabbitmq-discuss] Trouble with confirms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28962">[ date ]</a>
              <a href="thread.html#28962">[ thread ]</a>
              <a href="subject.html#28962">[ subject ]</a>
              <a href="author.html#28962">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>(29/07/13 17:25), Tom Anderson wrote:
&gt;<i> On 29/07/13 13:40, Matthias Radestock wrote:
</I>&gt;&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> Aha. I didn't realise, that, thanks.
</I>&gt;<i>
</I>&gt;<i> What i'm looking for is a way to get some sort of feedback at the
</I>&gt;<i> sender when a message has been acknowledged by the consumer. Given
</I>&gt;<i> that transient messages are confirmed as soon as the message has
</I>&gt;<i> reached the queue, and persistent messages are confirmed as soon as
</I>&gt;<i> they are written to disk, am i right in concluding that there is no
</I>&gt;<i> way to do this with confirms? Is there any other mechanism in RabbitMQ
</I>&gt;<i> that might let me do this?
</I>&gt;<i>
</I>&gt;<i> My real goal here is to write a test for an application of ours, to
</I>&gt;<i> assert that it is only acknowledging messages after it has
</I>&gt;<i> successfully processed them, and not immediately on receipt. If anyone
</I>&gt;<i> has any thoughts on how i might be able to do that, i would be very
</I>&gt;<i> excited to hear them!
</I>For your test, I'd be very tempted to provide an adapter which enforces
the guarantees you want to make. Then you can have tests that:

  * For the happy path, asserts that no more messages exist on the
    expected (ie: that a basic.get will return no messages)
  * For the failure path, asserts that the sent message is available to
    other consumers once your adapter has properly failed and shut down.

Granted, the latter does assume that you can shut down the adapter
reasonably easily.

&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> tom
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i>
</I>&gt;<i> Tom Anderson | Developer | +44 20 7826 4312 | timgroup.com
</I>&gt;<i> &lt;<A HREF="http://timgroup.com/">http://timgroup.com/</A>&gt;
</I>&gt;<i>
</I>&gt;<i> STATEMENT OF CONFIDENTIALITY: The information contained in this
</I>&gt;<i> electronic message and any attachments to this message are intended
</I>&gt;<i> for the exclusive use of the addressee(s) and may contain confidential
</I>&gt;<i> or privileged information. If you are not the intended recipient,
</I>&gt;<i> please notify Tom Anderson at TIM Group at <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tom.anderson at timgroup.com</A>
</I>&gt;<i> and destroy all copies of this message and any attachments.
</I>&gt;<i>
</I>&gt;<i> TIM Group is the trading name for YouDevise Limited. YouDevise Limited
</I>&gt;<i> is registered in England, No. 3331176. Registered office: 3 Copthall
</I>&gt;<i> Avenue, London, EC2R 7BH.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/6cabb88d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130729/6cabb88d/attachment.htm</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028960.html">[rabbitmq-discuss] Trouble with confirms
</A></li>
	<LI>Next message: <A HREF="028987.html">[rabbitmq-discuss] Trouble with confirms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28962">[ date ]</a>
              <a href="thread.html#28962">[ thread ]</a>
              <a href="subject.html#28962">[ subject ]</a>
              <a href="author.html#28962">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
