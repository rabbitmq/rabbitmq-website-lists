<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Statistics gathering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Statistics%20gathering&In-Reply-To=%3C51F10BCF.5060606%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028876.html">
   <LINK REL="Next"  HREF="028887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Statistics gathering</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Statistics%20gathering&In-Reply-To=%3C51F10BCF.5060606%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Statistics gathering">simon at rabbitmq.com
       </A><BR>
    <I>Thu Jul 25 12:28:15 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028876.html">[rabbitmq-discuss] Statistics gathering
</A></li>
        <LI>Next message: <A HREF="028887.html">[rabbitmq-discuss] Statistics gathering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28884">[ date ]</a>
              <a href="thread.html#28884">[ thread ]</a>
              <a href="subject.html#28884">[ subject ]</a>
              <a href="author.html#28884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/07/2013 10:45AM, Flavio Pompermaier wrote:
&gt;<i> Yes, probably what I need is to correctly set those two parameters:
</I>&gt;<i>   - sample_retention_policies
</I>&gt;<i>   - collect_statistics_interval
</I>
It's not obvious to me that you want to change collect_statistics_interval.

&gt;<i> Are they strictly related or they serve different purposes?
</I>
Well, they both have to do with statistics.

collect_statistics_interval controls how frequently the various 
components in RabbitMQ emit stats events. It therefore controls the 
maximum possible resolution of stats you can get. The expectation is 
usually that you would leave it alone, but if you had a huge number of 
not-quite-idle queues / channels / connections you might want to 
increase it so that your server does not spend all its time emitting 
stats events.

sample_retention_policies controls how long the management plugin holds 
onto statistics, and with what resolution. You might want to change this 
if you want it to hold statistics for longer.

&gt;<i> How do I ask for global/basic/detailed cumulative stats (like those
</I>&gt;<i> collected by sample_retention_policies)?
</I>
Those names refer to different classes of stats you can get through the 
web UI / HTTP API. See 
<A HREF="http://www.rabbitmq.com/management.html#sample-retention">http://www.rabbitmq.com/management.html#sample-retention</A> for the mapping.

&gt;<i> I think that I need those metrics..
</I>&gt;<i> With a small collect_statistics_interval (1 s) I have more precise data
</I>&gt;<i> but more overhead on the broker,
</I>
Yes.

&gt;<i> but changing this parameters require also to change
</I>&gt;<i> sample_retention_policies right?
</I>
No.

&gt;<i> Or it just run every 5 s and thus collects 5 samples (for default global
</I>&gt;<i> conf for example)..?
</I>
Not sure what you mean. If collect_statistics_interval is shorter than 
the shortest resolution in sample_retention_policies you'll be doing 
more work for no gain.

Cheers, Simon

&gt;<i>
</I>&gt;<i> Best,
</I>&gt;<i> Flavio
</I>&gt;<i>
</I>&gt;<i> On Thu, Jul 25, 2013 at 11:28 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     On 24/07/2013 6:17PM, Flavio Pompermaier wrote:
</I>&gt;<i>
</I>&gt;<i>         have you ever tried to set statistics interval to something like
</I>&gt;<i>         a week?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     I assume you mean sample_retention_policies (i.e. how long we hold
</I>&gt;<i>     stats for) rather than collect_statistics_interval (i.e. how
</I>&gt;<i>     frequently the broker should emit stats for the management plugin to
</I>&gt;<i>     collect).
</I>&gt;<i>
</I>&gt;<i>     No I haven't, although you should be fine as long as you reduce the
</I>&gt;<i>     resolution for data that's held for longer. Or put up with increased
</I>&gt;<i>     memory use.
</I>&gt;<i>
</I>&gt;<i>         Does it affect performance?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Shouldn't do particularly.
</I>&gt;<i>
</I>&gt;<i>     Cheers, Simon
</I>&gt;<i>
</I></PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028876.html">[rabbitmq-discuss] Statistics gathering
</A></li>
	<LI>Next message: <A HREF="028887.html">[rabbitmq-discuss] Statistics gathering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28884">[ date ]</a>
              <a href="thread.html#28884">[ thread ]</a>
              <a href="subject.html#28884">[ subject ]</a>
              <a href="author.html#28884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
