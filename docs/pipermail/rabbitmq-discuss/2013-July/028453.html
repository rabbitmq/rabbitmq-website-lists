<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Monitor and restart
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Monitor%20and%20restart&In-Reply-To=%3CF188379A-7C46-4B65-86C8-C1158F2526B0%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028399.html">
   <LINK REL="Next"  HREF="028488.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Monitor and restart</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Monitor%20and%20restart&In-Reply-To=%3CF188379A-7C46-4B65-86C8-C1158F2526B0%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Monitor and restart">tim at rabbitmq.com
       </A><BR>
    <I>Wed Jul 10 11:09:44 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028399.html">[rabbitmq-discuss] Monitor and restart
</A></li>
        <LI>Next message: <A HREF="028488.html">[rabbitmq-discuss] Monitor and restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28453">[ date ]</a>
              <a href="thread.html#28453">[ thread ]</a>
              <a href="subject.html#28453">[ subject ]</a>
              <a href="author.html#28453">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jorge,

On 8 Jul 2013, at 16:21, Jorge Diz Pico wrote:
&gt;<i> I peeked around and noticed Rabbit is not using heart, which makes me unease about potential crashes. I tried to tweak the start scripts myself but it's not as straight-forward as it would seem to make it work.
</I>&gt;<i> 
</I>
So you can indeed add some settings to RABBITMQ_SERVER_ERL_ARGS when starting up (or set these in the rabbitmq user's default environment) and of course you'll need to set the HEART_COMMAND environment variable to whatever command you normally use to start the broker (depending on how you installed it).

&gt;<i> So before I make a mess of it, I'd like to know if there's any reason why Rabbit doesn't use heart or even offer a quick flag to enable it (at least I couldn't find any reference to it). Does it use any other mechanism underneath to ensure reliability?
</I>&gt;<i> 
</I>
There are a couple of reasons we don't do this out of the box.

1. it would be fiddly to set this up in a packaged install for all possible environments
2. there's a plethora of other generic options out there (such as monit, god, etc)
3. automatically restarting a clustered node could have unintended consequences, depending on how it died

In short, by all means turn heart on if you like, but if I were you I'd consider looking at other generic options too. And make sure you understand what the potential consequences of automatic restart might be, for example if several clustered nodes go offline together, the order in which they're restarted can be important.

Cheers,
Tim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/70a99c93/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130710/70a99c93/attachment.htm</A>&gt;
</PRE>























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028399.html">[rabbitmq-discuss] Monitor and restart
</A></li>
	<LI>Next message: <A HREF="028488.html">[rabbitmq-discuss] Monitor and restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28453">[ date ]</a>
              <a href="thread.html#28453">[ thread ]</a>
              <a href="subject.html#28453">[ subject ]</a>
              <a href="author.html#28453">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
