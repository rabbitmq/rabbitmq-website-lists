<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ghost consumers problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ghost%20consumers%20problem&In-Reply-To=%3CCAC_Or%3DTd2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028327.html">
   <LINK REL="Next"  HREF="028333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ghost consumers problem</H1>
    <B>Jose Ramon Palanco</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ghost%20consumers%20problem&In-Reply-To=%3CCAC_Or%3DTd2cdPahbSkO-xcSwGwQjjxegv_uCGsGhWet3gukDx1A%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Ghost consumers problem">jpalanco at gmail.com
       </A><BR>
    <I>Thu Jul  4 15:06:25 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028327.html">[rabbitmq-discuss] ANN HotBunnies 2.0.0.pre8 is released
</A></li>
        <LI>Next message: <A HREF="028333.html">[rabbitmq-discuss] Ghost consumers problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28330">[ date ]</a>
              <a href="thread.html#28330">[ thread ]</a>
              <a href="subject.html#28330">[ subject ]</a>
              <a href="author.html#28330">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have an rabbitmq installation and we use rabbitmq-c clients compiled for
microsoft windows and running as a service. Everything works fine, even we
have enabled encrypted communications using OpenSSL.

It turns out that we have a problem with ghost consumers and having read a
lot, we still come up with the solution.

The scenario is as follows:

Clients connect to the broker and everything works fine until Windows
restarts. To speedup system reboot, Microsoft doesn't give us a chance to
finish executing our tasks: so we can't closed session properly.

This implies that the queue remains alive with a ghost consumer.

After reboot, the service starts and when trying to create the queue, it
conflicts with the former queue. We tried to create the queue as exclusive,
but it doesn't allow us to connect because we haven't permission.

Is there a way to close the communications when a connection is not
stablished? Or in the worst case, there is a procedure to clean the queues
with ghost consumers?


Best regards

J.R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/15efd0e9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130704/15efd0e9/attachment.htm</A>&gt;
</PRE>




















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028327.html">[rabbitmq-discuss] ANN HotBunnies 2.0.0.pre8 is released
</A></li>
	<LI>Next message: <A HREF="028333.html">[rabbitmq-discuss] Ghost consumers problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28330">[ date ]</a>
              <a href="thread.html#28330">[ thread ]</a>
              <a href="subject.html#28330">[ subject ]</a>
              <a href="author.html#28330">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
