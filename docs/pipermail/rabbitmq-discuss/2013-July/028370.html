<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] load distribution among queue consumers and	consumer_tag in non-exclusive mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20load%20distribution%20among%20queue%20consumers%20and%0A%09consumer_tag%20in%20non-exclusive%20mode&In-Reply-To=%3C683BEB67-77C7-429A-9259-3D2D7366522E%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028369.html">
   <LINK REL="Next"  HREF="028368.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] load distribution among queue consumers and	consumer_tag in non-exclusive mode</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20load%20distribution%20among%20queue%20consumers%20and%0A%09consumer_tag%20in%20non-exclusive%20mode&In-Reply-To=%3C683BEB67-77C7-429A-9259-3D2D7366522E%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] load distribution among queue consumers and	consumer_tag in non-exclusive mode">watson.timothy at gmail.com
       </A><BR>
    <I>Sun Jul  7 09:40:19 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028369.html">[rabbitmq-discuss] load distribution among queue consumers and consumer_tag in non-exclusive mode
</A></li>
        <LI>Next message: <A HREF="028368.html">[rabbitmq-discuss] Binary builds of the UDP and Presence Exchange	plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28370">[ date ]</a>
              <a href="thread.html#28370">[ thread ]</a>
              <a href="subject.html#28370">[ subject ]</a>
              <a href="author.html#28370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7 Jul 2013, at 04:15, Ashok Anand &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ashok.anand at gmail.com</A>&gt; wrote:

&gt;<i> Another question I had, regarding reading multiple messages. Consider a distributed WAN deployment situation, where consumer and rabbitmq broker are 60 ms apart (RTT of 120 ms). If consumer can get only one message from queue in one read, then it can only get 7-8 messages/second.
</I>
Are you assuming the use of a synchronous method such as basic.get? Otherwise the consumer can avoid the round trip by using streaming delivery with basic.consume instead.

&gt;<i> We can use  multi-threading, but if there is support of reading multiple messages in one read, that could improve the read rate even in WAN deployment and with single thread - I was wondering if there is a support for such read or if there is a plan.. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
The broker won't batch messages, though if you're using basic.consume with a prefetch count &gt; 1 your clients can ack or reject multiple messages easily.

Your application can batch messages itself of course, if that offers particular advantages for your specific deployment topology. We've had several people ask for this feature in the past. One of the problems with it is that confirms and transactions would be difficult in the face of batches, and since it's very easy to do it at the application layer, it doesn't seem worth the cost in complexity. Besides, batching tends to be useful in synchronous protocols, whereas AMQP publishing and consuming is asynchronous by default. And of course you can have packets coalesced at the tcp layer by turning on nagle's algorithm, though we tend to disable that for producers.

Cheers,
Tim
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028369.html">[rabbitmq-discuss] load distribution among queue consumers and consumer_tag in non-exclusive mode
</A></li>
	<LI>Next message: <A HREF="028368.html">[rabbitmq-discuss] Binary builds of the UDP and Presence Exchange	plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28370">[ date ]</a>
              <a href="thread.html#28370">[ thread ]</a>
              <a href="subject.html#28370">[ subject ]</a>
              <a href="author.html#28370">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
