<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%202.6.1%20crash%20on%20CentOS&In-Reply-To=%3CCA%2BKtg7BFBcccyPTXG%3DzAYWG0jorc_L5Rqx%3DAgemyUijP3Z0CTw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028841.html">
   <LINK REL="Next"  HREF="028788.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS</H1>
    <B>mail.zhang.yee</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%202.6.1%20crash%20on%20CentOS&In-Reply-To=%3CCA%2BKtg7BFBcccyPTXG%3DzAYWG0jorc_L5Rqx%3DAgemyUijP3Z0CTw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS">mail.zhang.yee at gmail.com
       </A><BR>
    <I>Tue Jul 23 06:47:27 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028841.html">[rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different regions
</A></li>
        <LI>Next message: <A HREF="028788.html">[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28787">[ date ]</a>
              <a href="thread.html#28787">[ thread ]</a>
              <a href="subject.html#28787">[ subject ]</a>
              <a href="author.html#28787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All
Nice to see you here, we recently got a problem during openstack deployment
in CentOS6.3.
The rabbitmq constantly crash after running one or two days.
Cloud somebody here can take a look at what's happened inside rabbitmq
and how to fix it?
detailed status and logs as below. thanks in advance.
======================================
 rabbitmqctl status
Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A> ...
[{pid,29272},
 {running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;2.6.1&quot;},
                        {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.7&quot;},
                        {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.10&quot;},
                        {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.5&quot;},
                        {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.5&quot;},
                        {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.5&quot;}]},
 {os,{unix,linux}},
 {erlang_version,&quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:32:32]
[rq:32] [async-threads:30] [kernel-poll:true]\n&quot;},
 {memory,[{total,74666016},
          {processes,45884208},
          {processes_used,45866296},
          {system,28781808},
          {atom,1119593},
          {atom_used,1113078},
          {binary,3421464},
          {code,11053747},
          {ets,7607264}]}]
...done.
======================================
=ERROR REPORT==== 22-Jul-2013::14:50:26 ===
** Generic server &lt;0.1921.0&gt; terminating
** Last message in was {'EXIT',&lt;0.237.0&gt;,shutdown}
** When Server state == {q,
                         {amqqueue,
                          {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,
                           &lt;&lt;&quot;conductor.ci91szcmp004.webex.com&quot;&gt;&gt;},
                          false,false,none,
                          [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
                          &lt;0.1921.0&gt;,[],all},
                         none,true,rabbit_mirror_queue_master,
                         {state,&lt;0.1923.0&gt;,&lt;0.1922.0&gt;,rabbit_variable_queue,
                          {vqstate,
                           {[],[]},
                           {0,{[],[]}},
                           {delta,undefined,0,undefined},
                           {0,{[],[]}},
                           {[],[]},
                           0,
                           {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                            {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                              []}}},
                           undefined,
                           {0,nil},
                           {qistate,
                            &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>
/queues/A1FBAI3711PERTSXW5DHR0X8Y&quot;,
                            {{dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             []},
                            undefined,0,262144,
                            #Fun&lt;rabbit_variable_queue.2.41165857&gt;,[]},
                           {undefined,
                            {client_msstate,msg_store_transient,

 &lt;&lt;207,96,115,58,236,124,180,246,67,18,228,236,182,
                               66,117,84&gt;&gt;,
                             {dict,0,16,16,8,80,48,
                              {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                               []},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                []}}},
                             {state,200768,
                              &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>
/msg_store_transient&quot;},
                             rabbit_msg_store_ets_index,
                             &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>
/msg_store_transient&quot;,
                             &lt;0.228.0&gt;,204865,196671,208962}},

 false,0,#Fun&lt;rabbit_amqqueue_process.5.31190493&gt;,0,
                           0,infinity,0,0,0,0,0,0,
                           {rates,
                            {{1374,213408,350099},0},
                            {{1374,213408,350099},0},
                            0.0,0.0,
                            {1374,213451,550036}},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           {0,nil},
                           0,0,
                           {rates,
                            {{1374,213408,350099},0},
                            {{1374,213408,350099},0},
                            0.0,0.0,
                            {1374,213451,550036}}},
                          0,
                          {dict,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          [],
                          {dict,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}},
                          {set,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                           {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                             []}}}},
                         {[],[]},
                         {[],[]},
                         undefined,undefined,#Ref&lt;0.0.742.237144&gt;,undefined,
                         {state,none,5000,undefined},
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,undefined}
** Reason for termination ==
** {noproc,
       {gen_server2,call,
           [msg_store_transient,
            {client_terminate,

&lt;&lt;207,96,115,58,236,124,180,246,67,18,228,236,182,66,117,84&gt;&gt;},
            infinity]}}
** In 'terminate' callback with reason ==
** shutdown

=ERROR REPORT==== 22-Jul-2013::14:50:26 ===
** gen_event handler rabbit_error_logger crashed.
** Was installed in error_logger
** Last event was: {error,&lt;0.119.0&gt;,
                    {&lt;0.1887.0&gt;,
                     &quot;** Generic server ~p terminating~n** Last message in
was ~p~n** When Server state == ~p~n** Reason for termination == ~n**
~p~n** In 'terminate' callback with reason ==~n** ~p~n&quot;,
                     [&lt;0.1887.0&gt;,
                      {'EXIT',&lt;0.237.0&gt;,shutdown},
                      {q,
                       {amqqueue,
                        {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;consoleauth&quot;&gt;&gt;},
                        false,false,none,
                        [{&lt;&lt;&quot;x-ha-policy&quot;&gt;&gt;,longstr,&lt;&lt;&quot;all&quot;&gt;&gt;}],
                        &lt;0.1887.0&gt;,[],all},
                       none,true,rabbit_mirror_queue_master,
                       {state,&lt;0.1889.0&gt;,&lt;0.1888.0&gt;,rabbit_variable_queue,
                        {vqstate,
                         {[],[]},
                         {0,{[],[]}},
                         {delta,undefined,0,undefined},
                         {0,{[],[]}},
                         {[],[]},
                         8,
                         {dict,0,16,16,8,80,48,
                          {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                         undefined,
                         {0,nil},
                         {qistate,
                          &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>
/queues/1AV7T4P6H9GB74RNTGRVPV2OY&quot;,
                          {{dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                            {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                              []}}},
                           []},
                          undefined,0,262144,
                          #Fun&lt;rabbit_variable_queue.2.41165857&gt;,[]},
                         {undefined,
                          {client_msstate,msg_store_transient,
                           &lt;&lt;&quot;&#1850;&#65533;o$&#65533;&#65533;W&#65533;&#65533;&#65533;&#65533;\b?J&quot;&gt;&gt;,
                           {dict,0,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
                            {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                              []}}},
                           {state,200768,
                            &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>
/msg_store_transient&quot;},
                           rabbit_msg_store_ets_index,
                           &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ci91szcmp001</A>
/msg_store_transient&quot;,
                           &lt;0.228.0&gt;,204865,196671,208962}},

 false,0,#Fun&lt;rabbit_amqqueue_process.5.31190493&gt;,0,0,
                         infinity,0,0,0,0,0,0,
                         {rates,
                          {{1374,460116,880026},2},
                          {{1374,460116,880026},2},
                          0.0016008717049531846,0.0016008717049531846,
                          {1374,461800,598037}},
                         {0,nil},
                         {0,nil},
                         {0,nil},
                         {0,nil},
                         0,0,
                         {rates,
                          {{1374,460116,880026},2},
                          {{1374,460116,880026},2},
                          0.0016008717049531846,0.0016008717049531846,
                          {1374,461800,598037}}},
                        0,
                        {dict,0,16,16,8,80,48,
                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                        [],
                        {dict,0,16,16,8,80,48,
                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                        {set,0,16,16,8,80,48,
                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}},
                       {[],[]},
                       {[],[]},
                       undefined,undefined,#Ref&lt;0.0.742.237570&gt;,undefined,
                       {state,none,5000,undefined},
                       {dict,0,16,16,8,80,48,
                        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
                       undefined,undefined},
                      {noproc,
                       {gen_server2,call,
                        [msg_store_transient,
                         {client_terminate,&lt;&lt;&quot;&#1850;&#65533;o$&#65533;&#65533;W&#65533;&#65533;&#65533;&#65533;\b?J&quot;&gt;&gt;},
                         infinity]}},
                      shutdown]}}
** When handler state == {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,exchange,&lt;&lt;&quot;amq.rabbitmq.log&quot;&gt;&gt;}
** Reason == {badarg,[{ets,lookup,[rabbit_registry,{exchange,topic}]},
                      {rabbit_registry,lookup_module,2},
                      {rabbit_exchange,type_to_module,1},
                      {rabbit_exchange,route1,2},
                      {rabbit_basic,publish,2},
                      {rabbit_error_logger,publish1,4},
                      {rabbit_error_logger,handle_event,2},
                      {gen_event,server_update,4}]}

=INFO REPORT==== 22-Jul-2013::14:50:27 ===
    application: rabbit
    exited: shutdown
    type: permanent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/a6dae31b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130723/a6dae31b/attachment.htm</A>&gt;
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028841.html">[rabbitmq-discuss] Set rabbitmq to use in Amazon EC2 with different regions
</A></li>
	<LI>Next message: <A HREF="028788.html">[rabbitmq-discuss] Rabbitmq 2.6.1 crash on CentOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28787">[ date ]</a>
              <a href="thread.html#28787">[ thread ]</a>
              <a href="subject.html#28787">[ subject ]</a>
              <a href="author.html#28787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
