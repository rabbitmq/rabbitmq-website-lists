<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Checking queue size in bytes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Checking%20queue%20size%20in%20bytes&In-Reply-To=%3C51DD0F09.7000103%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028395.html">
   <LINK REL="Next"  HREF="028465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Checking queue size in bytes</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Checking%20queue%20size%20in%20bytes&In-Reply-To=%3C51DD0F09.7000103%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Checking queue size in bytes">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Jul 10 08:36:41 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="028395.html">[rabbitmq-discuss] Checking queue size in bytes
</A></li>
        <LI>Next message: <A HREF="028465.html">[rabbitmq-discuss] Checking queue size in bytes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28440">[ date ]</a>
              <a href="thread.html#28440">[ thread ]</a>
              <a href="subject.html#28440">[ subject ]</a>
              <a href="author.html#28440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Joe,

On 08/07/13 15:28, Joseph Weeks wrote:
&gt;<i> Is there a way to determine a queue's size in bytes?  I'm mostly
</I>&gt;<i> interested in size on disk, but the sum of memory and disk would be
</I>&gt;<i> sufficient if that happens to be more readily available.
</I>
In general that is impossible, since messages sent to multiple queues 
are only stored on disk once and their payloads are shared in memory.

Then there's the added complication that actual memory use of a message
is difficult to work out at best, and impossible if taking into account 
memory fragmentation and gc effects. on-disk size is quite hard to 
calculate too.

Having said that, I suppose we could track the &quot;total payload size of 
messages in a queue&quot;, which would probably suffice for your use case.

I have just filed a feature request for that. It's not a trivial piece 
of work though, and we haven't had many requests for this functionality, 
so I wouldn't expect to see this in a release soon.

&gt;<i> On a related note, would it be possible for some future version of
</I>&gt;<i> RabbitMQ to allow queue policies like &quot;x-max-length&quot; and &quot;x-message-ttl&quot;
</I>&gt;<i> in addition to the queue declaration arguments?
</I>
Yes. It's on our todo list, but not a priority.

Regards,

Matthias.
</PRE>





















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028395.html">[rabbitmq-discuss] Checking queue size in bytes
</A></li>
	<LI>Next message: <A HREF="028465.html">[rabbitmq-discuss] Checking queue size in bytes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28440">[ date ]</a>
              <a href="thread.html#28440">[ thread ]</a>
              <a href="subject.html#28440">[ subject ]</a>
              <a href="author.html#28440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
