<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] is it possible to have broker listen on multiple ports
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20is%20it%20possible%20to%20have%20broker%20listen%20on%0A%20multiple%20ports&In-Reply-To=4B0588A2.9030704%40echostar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005502.html">
   <LINK REL="Next"  HREF="005501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] is it possible to have broker listen on multiple ports</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20is%20it%20possible%20to%20have%20broker%20listen%20on%0A%20multiple%20ports&In-Reply-To=4B0588A2.9030704%40echostar.com"
       TITLE="[rabbitmq-discuss] is it possible to have broker listen on multiple ports">matthew at lshift.net
       </A><BR>
    <I>Fri Nov 20 12:53:09 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005502.html">[rabbitmq-discuss] is it possible to have broker listen on multiple ports
</A></li>
        <LI>Next message: <A HREF="005501.html">[rabbitmq-discuss] is it possible to have broker listen on multiple ports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5500">[ date ]</a>
              <a href="thread.html#5500">[ thread ]</a>
              <a href="subject.html#5500">[ subject ]</a>
              <a href="author.html#5500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Mark,

Staggeringly, this doesn't seem to be on our website, and the FAQ entry
is wrong. You want to alter the tcp_listeners argument to Rabbit.
Unfortunately, the ways of doing this are all pretty grim and I've
raised a bug internally for us to look at this and sort things out.
Ideally, you should be able to make an entry in
/etc/rabbitmq/rabbitmq.config so that the file looks a bit like:

[{rabbit, [{tcp_listeners, [{'10.224.189.156', 3333},
                            {'10.224.189.156', 3334}
                           ]
           }
          ]
 }
].

That will tell Rabbit to listen on ports 3333 and 3334 on the indicated
IP. You can use '0.0.0.0' to indicate all network interfaces. Don't
forget the quotes around the IP addresses, otherwise Rabbit will fail to
parse the configuration file.

However, sadly, Rabbit's start-up scripts override the configuration for
tcp_listeners. Thus, edit /usr/lib/rabbitmq/bin/rabbitmq-server. Towards
the bottom, you'll find a line:

    -rabbit tcp_listeners '[{&quot;'${RABBITMQ_NODE_IP_ADDRESS}'&quot;, '${RABBITMQ_NODE_PORT}'}]' \

Just remove that line completely, and save the file. Then, when starting
rabbit, you should find entries in the logs indicating it has correctly
started listening on all the interfaces specified.

This will definitely work on 1.7. On 1.6, the configuration file didn't
exist, and whilst there are ways around, they're even more hairy, so I
would encourage you to stick with 1.7!

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005502.html">[rabbitmq-discuss] is it possible to have broker listen on multiple ports
</A></li>
	<LI>Next message: <A HREF="005501.html">[rabbitmq-discuss] is it possible to have broker listen on multiple ports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5500">[ date ]</a>
              <a href="thread.html#5500">[ thread ]</a>
              <a href="subject.html#5500">[ subject ]</a>
              <a href="author.html#5500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
