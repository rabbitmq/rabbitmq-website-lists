<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] intermittent erl.exe crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20intermittent%20erl.exe%20crash&In-Reply-To=20091110151225.GC3233%40mrnibble.lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005403.html">
   <LINK REL="Next"  HREF="005464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] intermittent erl.exe crash</H1>
    <B>JD Conley</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20intermittent%20erl.exe%20crash&In-Reply-To=20091110151225.GC3233%40mrnibble.lshift.net"
       TITLE="[rabbitmq-discuss] intermittent erl.exe crash">jdc at hive7.com
       </A><BR>
    <I>Tue Nov 10 19:01:31 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005403.html">[rabbitmq-discuss] intermittent erl.exe crash
</A></li>
        <LI>Next message: <A HREF="005464.html">[rabbitmq-discuss] intermittent erl.exe crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5422">[ date ]</a>
              <a href="thread.html#5422">[ thread ]</a>
              <a href="subject.html#5422">[ subject ]</a>
              <a href="author.html#5422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; //start consuming
</I>&gt;<i> &gt; _model.QueueDeclare(userQueue, false, false, false, false, false,
</I>&gt;<i> null);
</I>&gt;<i> &gt; consumerTag = _model.BasicConsume(userQueue, true, null, _consumer);
</I>&gt;<i> 
</I>&gt;<i> Ok, you're setting noAck true, so you shouldn't need to ack explicitly.
</I>
Yeah, that's what I thought. But yesterday I added acking just to see if it
would help and the memory footprint no longer grows out of control and the
process hasn't crashed since. I wonder if either the .NET client or rabbit
isn't honoring the noack for this use case?

&gt;<i> Expiration is not implemented. There is no notion of Time To Live or
</I>&gt;<i> messages expiring in RabbitMQ. This is an oft requested feature and is
</I>&gt;<i> high on our todo list, but is not in active development yet.
</I>
Add one more to that request number.

&gt;<i> &gt; Crash dump was written to: erl_crash.dump
</I>&gt;<i> &gt; temp_alloc: Cannot allocate 9176036 bytes of memory (of type
</I>&gt;<i> &quot;tmp_heap&quot;).
</I>&gt;<i> 
</I>&gt;<i> Err, that's odd, that's only about 8MB of RAM. How much RAM do you have
</I>&gt;<i> in this machine that's available to Rabbit? Also, before it crashes,
</I>&gt;<i> run:
</I>
As I said doing an Ack when I receive a message (even though I have noack
set) seems to have resolved the memory usage and crashing issue.

The dump is over 1GB. What is the VM limit for erlang by default? Maybe we
just hit that? The system has 4gb ram and plenty free to use the 2GB imposed
user land limit in Windows, not to mention swap space.

-JD



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005403.html">[rabbitmq-discuss] intermittent erl.exe crash
</A></li>
	<LI>Next message: <A HREF="005464.html">[rabbitmq-discuss] intermittent erl.exe crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5422">[ date ]</a>
              <a href="thread.html#5422">[ thread ]</a>
              <a href="subject.html#5422">[ subject ]</a>
              <a href="author.html#5422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
