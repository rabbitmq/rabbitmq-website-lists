<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-server restart also restarts epmd
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq-server%20restart%20also%20restarts%20epmd&In-Reply-To=ce2570e20911021002u26650618i82e660ef5eec5d58%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005282.html">
   <LINK REL="Next"  HREF="005284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-server restart also restarts epmd</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq-server%20restart%20also%20restarts%20epmd&In-Reply-To=ce2570e20911021002u26650618i82e660ef5eec5d58%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq-server restart also restarts epmd">matthias at lshift.net
       </A><BR>
    <I>Mon Nov  2 18:21:08 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005282.html">[rabbitmq-discuss] rabbitmq-server restart also restarts epmd
</A></li>
        <LI>Next message: <A HREF="005284.html">[rabbitmq-discuss] rabbitmq-server restart also restarts epmd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5283">[ date ]</a>
              <a href="thread.html#5283">[ thread ]</a>
              <a href="subject.html#5283">[ subject ]</a>
              <a href="author.html#5283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Garrett,

Garrett Smith wrote:
&gt;<i> # pgrep epmd
</I>&gt;<i> 28133
</I>&gt;<i> # /etc/init.d/rabbitmq-server restart
</I>&gt;<i> Restarting rabbitmq-server: SUCCESS
</I>&gt;<i> rabbitmq-server.
</I>&gt;<i> # pgrep epmd
</I>&gt;<i> 29027
</I>&gt;<i> 
</I>&gt;<i> Needless to say, this makes other registered Erlang nodes running on
</I>&gt;<i> the server very cranky :)
</I>&gt;<i> 
</I>&gt;<i> Is this by design? Is there a preferred way to restart rabbitmq on Debian?
</I>
This was introduced in order to prevent failures during package purge 
(which attempts to remove the 'rabbitmq' user, and failed when epmd was 
started by that user and is still running).

Note that it will only kill a 'rabbitmq' owned epmd, so one way to keep 
epmd running is to start it explicitly, as a different user.

We could do a few other things, e.g.

- only kill epmd if it was started by the init script

- only kill epmd on package purge

- start epmd as a different user, e.g. root

They all have drawbacks too though. Any other suggestions?


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005282.html">[rabbitmq-discuss] rabbitmq-server restart also restarts epmd
</A></li>
	<LI>Next message: <A HREF="005284.html">[rabbitmq-discuss] rabbitmq-server restart also restarts epmd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5283">[ date ]</a>
              <a href="thread.html#5283">[ thread ]</a>
              <a href="subject.html#5283">[ subject ]</a>
              <a href="author.html#5283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
