<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Slow throughput on consume side using java client API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Slow%20throughput%20on%20consume%20side%20using%20java%0A%20client%20API&In-Reply-To=401b577e0911251719tfd405auaf542a8c87b54b3%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005531.html">
   <LINK REL="Next"  HREF="005553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Slow throughput on consume side using java client API</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Slow%20throughput%20on%20consume%20side%20using%20java%0A%20client%20API&In-Reply-To=401b577e0911251719tfd405auaf542a8c87b54b3%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Slow throughput on consume side using java client API">matthew at lshift.net
       </A><BR>
    <I>Thu Nov 26 10:10:33 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005531.html">[rabbitmq-discuss] Slow throughput on consume side using java	client API
</A></li>
        <LI>Next message: <A HREF="005553.html">[rabbitmq-discuss] Slow throughput on consume side using java	client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5534">[ date ]</a>
              <a href="thread.html#5534">[ thread ]</a>
              <a href="subject.html#5534">[ subject ]</a>
              <a href="author.html#5534">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Scott,

I must admit I'm a little confused by your description as it would
appear somewhat complex to me. However, am I correct in the following?

1. You have 1 queue, which is being published to by 50 threads.
2. You have 25 consumers on that queue.
3. To receive, you randomly select a consumer, and get that consumer to
consume a message.

If that's correct, I'm not surprised by your findings. Consumers on a
queue are round-robin'd by the broker. Thus each of your 25 consumers
will receive one 25th of the messages. Thus if you randomly select a
consumer then it may well have nothing waiting on it as messages have
been sent to the other consumers. Thus you will have to wait for up to
25 publishes before that consumer gets a message.

Why are you using so many threads and consumers?

Also, please let me know if I misunderstood anything about your setup.

Best wishes,

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005531.html">[rabbitmq-discuss] Slow throughput on consume side using java	client API
</A></li>
	<LI>Next message: <A HREF="005553.html">[rabbitmq-discuss] Slow throughput on consume side using java	client API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5534">[ date ]</a>
              <a href="thread.html#5534">[ thread ]</a>
              <a href="subject.html#5534">[ subject ]</a>
              <a href="author.html#5534">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
