<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory not flushing to disk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20not%20flushing%20to%20disk&In-Reply-To=%3C51768974.9030608%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026629.html">
   <LINK REL="Next"  HREF="026653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory not flushing to disk</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20not%20flushing%20to%20disk&In-Reply-To=%3C51768974.9030608%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Memory not flushing to disk">emile at rabbitmq.com
       </A><BR>
    <I>Tue Apr 23 14:15:32 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026629.html">[rabbitmq-discuss] Memory not flushing to disk
</A></li>
        <LI>Next message: <A HREF="026653.html">[rabbitmq-discuss] EXT :Re:  Memory not flushing to disk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26649">[ date ]</a>
              <a href="thread.html#26649">[ thread ]</a>
              <a href="subject.html#26649">[ subject ]</a>
              <a href="author.html#26649">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

On 22/04/13 17:38, Rodrian, Logan P (IS) wrote:
&gt;<i> It appears that at some point the flushing stops and then once the
</I>&gt;<i> vm_memory_high_watermark is hit, I get a message informing me.
</I>
I assume you get a memory alarm message. This will clear as soon as the
broker has cleared enough RAM by flushing messages to disk. It will not
necessary save messages from queue E.

&gt;<i> My question is two-fold:
</I>&gt;<i>   1) Has this been seen before/is there a solution already out there?
</I>
In the backing_queue_status queue E won't try to reduce memory use,
because of the {target_ram_count, infinity} entry.

&gt;<i>   2) Is there a configuration parameter that tells rabbitmq to write
</I>&gt;<i> messages immediately to disk instead of buffering to memory first?
</I>
No, it is not possible send messages from the network to disk without
going via memory, and it is impossible for the broker to deliver
messages from disk without going through memory.


If you are able to get the broker in a state that the memory alarm
remains set indefinitely while ram_msg_counts remain high then please
send us the output of &quot;rabbitmqctl report&quot; at the time when that happens.



-Emile





</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026629.html">[rabbitmq-discuss] Memory not flushing to disk
</A></li>
	<LI>Next message: <A HREF="026653.html">[rabbitmq-discuss] EXT :Re:  Memory not flushing to disk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26649">[ date ]</a>
              <a href="thread.html#26649">[ thread ]</a>
              <a href="subject.html#26649">[ subject ]</a>
              <a href="author.html#26649">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
