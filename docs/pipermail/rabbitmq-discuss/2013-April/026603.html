<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] JSON Data to be send between Java Producer and Python Consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20JSON%20Data%20to%20be%20send%20between%20Java%20Producer%0A%20and%20Python%20Consumer&In-Reply-To=%3CCD98572B.9246%25Michael.Laing%40nytimes.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026602.html">
   <LINK REL="Next"  HREF="026790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] JSON Data to be send between Java Producer and Python Consumer</H1>
    <B>Laing, Michael P.</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20JSON%20Data%20to%20be%20send%20between%20Java%20Producer%0A%20and%20Python%20Consumer&In-Reply-To=%3CCD98572B.9246%25Michael.Laing%40nytimes.com%3E"
       TITLE="[rabbitmq-discuss] JSON Data to be send between Java Producer and Python Consumer">Michael.Laing at nytimes.com
       </A><BR>
    <I>Sat Apr 20 19:32:34 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026602.html">[rabbitmq-discuss] JSON Data to be send between Java Producer and Python Consumer
</A></li>
        <LI>Next message: <A HREF="026790.html">[rabbitmq-discuss] JSON Data to be send between Java Producer	and Python Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26603">[ date ]</a>
              <a href="thread.html#26603">[ thread ]</a>
              <a href="subject.html#26603">[ subject ]</a>
              <a href="author.html#26603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes &#8211; that's what I do too.

Unfortunately he said he has no control over the python code&#8230; :-/

From: &quot;Gavin M. Roy&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at meetme.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at meetme.com</A>&gt;&gt;
Reply-To: rabbitmq &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;
Date: Saturday, April 20, 2013 2:28 PM
To: rabbitmq &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;
Cc: &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&gt;&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&gt;&gt;
Subject: Re: [rabbitmq-discuss] JSON Data to be send between Java Producer and Python Consumer

To add to this the consumer probably needs to use json.loads(value, ensure_ascii=False) (not the default value for ensure_ascii) to allow it to decode UTF-8 in a JSON string.

On Saturday, April 20, 2013 at 7:03 AM, Laing, Michael P. wrote:

Hi Arun,

Probably you are sending unicode in your json from the java side.

On the python side it is probably complaining about not being able to decode using the ascii codec&#8230; is that correct? This would mean that the received data is encoded in another scheme, probably utf8.

Really guessing here but&#8230; you could first try forcing the java side to only send ascii, stripping out or transforming any non-ascii characters. This would tell you if you are on the right track. Then you could try to really fix the problem by getting the java side to encode unicode as ascii rather than utf8 (you will see '\unnnn' strings in the output). I don't know how to do that.

I usually handle problems like this on the python side by decoding json using the utf8 codec, but that is not an option open to you.

Michael

From: Arun Viswanath &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">arun.viswanath at gmail.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">arun.viswanath at gmail.com</A>&gt;&gt;
Reply-To: rabbitmq &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;
Date: Saturday, April 20, 2013 2:38 AM
To: &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&gt;&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups.com</A>&gt;&gt;
Subject: [rabbitmq-discuss] JSON Data to be send between Java Producer and Python Consumer

Hi,

I'm facing an issue while sending the JSON data between Java Producer and  Python Consumer.

I doing the following serialization in my Java Producer for my JSON data and placing the serialize data in the Queue

Java Code:
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;


// Reading the JSON content from the file and making it an JSONObject
JSONObject serviceObj = (JSONObject) parser.parse(new FileReader(&quot;C:\\Msg2.json&quot;));

String jsonText = new flexjson.JSONSerializer().serialize(jsonObj);

channel.basicPublish(&quot;&quot;, CONDUCTOR_QUEUE_NAME, null, jsonText .getBytes());

-----------------
My python consumer successfully takes the data from the Queue but it is not able to process it.
Python consumer is expected to deserialize the json message read from the Queue to Python dictionary but the data got after deserialize is python unicode type.

My python consumer is third party code so I can't change my consumer side.
I'm not sure whether I'm doing the correct stuff in my Java producer.

Any help to resolve this issue will be appreciated.

Thanks In Advance,
Arun V
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130420/72d87b2d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130420/72d87b2d/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026602.html">[rabbitmq-discuss] JSON Data to be send between Java Producer and Python Consumer
</A></li>
	<LI>Next message: <A HREF="026790.html">[rabbitmq-discuss] JSON Data to be send between Java Producer	and Python Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26603">[ date ]</a>
              <a href="thread.html#26603">[ thread ]</a>
              <a href="subject.html#26603">[ subject ]</a>
              <a href="author.html#26603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
