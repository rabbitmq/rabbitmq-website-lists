<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] no next heap size found after crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20no%20next%20heap%20size%20found%20after%20crash&In-Reply-To=%3C1986553897.13075.1366869845240.JavaMail.root%40ns22265.ovh.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026738.html">
   <LINK REL="Next"  HREF="026692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] no next heap size found after crash</H1>
    <B>Gilles Danycan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20no%20next%20heap%20size%20found%20after%20crash&In-Reply-To=%3C1986553897.13075.1366869845240.JavaMail.root%40ns22265.ovh.net%3E"
       TITLE="[rabbitmq-discuss] no next heap size found after crash">gdanycan at slip-software.com
       </A><BR>
    <I>Thu Apr 25 07:04:05 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026738.html">[rabbitmq-discuss] Queue peeking
</A></li>
        <LI>Next message: <A HREF="026692.html">[rabbitmq-discuss] no next heap size found after crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26691">[ date ]</a>
              <a href="thread.html#26691">[ thread ]</a>
              <a href="subject.html#26691">[ subject ]</a>
              <a href="author.html#26691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All, 

Unfortunately i have a new problem now :( 
i'm still on : RabbitMQ 3.0.4.40411, Erlang R14A 
server: 1To disk , 48Go ram , bi xeon 16 cores 

the server just reboot without reason apparently but the rabbitmq is not able to start after the reboot... 
i have the message : 

Crash dump was written to: erl_crash.dump 
no next heap size found: -2063447786, offset 0 
or 
Crash dump was written to: erl_crash.dump 
eheap_alloc: Cannot allocate 18446744065900154288 bytes of memory (of type &quot;heap&quot;). 

i tried to change the vm_memory_high_watermark in the config file but the second message appears. 

unforutnatly the partition of the rabbit is : 
/dev/sda2 910G 864G 1006M 100% /var 

i don't understand because we have only 5millions of messages in all queues... the last night i deleted some messages (more than 1millions) but the space disk available didn't change... 
is there some problem with erlang or indexes? we consume and requeue messages and when we don't requeue message the space disk used is still the same. 

it a rabbitmq server used in production, 
how can we start the rabbit now? 

REgards, 
Gilles Danycan 

IT Director - Slip Software 
Calle Guitard, 43, p3 
08034 Barcelona 
Tel : +34 932 055 731 
Fax : +34 933 301 973 
Skype: gilles_beverly 
Web: www.slip-software.com 




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130425/1d5ca3b9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130425/1d5ca3b9/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026738.html">[rabbitmq-discuss] Queue peeking
</A></li>
	<LI>Next message: <A HREF="026692.html">[rabbitmq-discuss] no next heap size found after crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26691">[ date ]</a>
              <a href="thread.html#26691">[ thread ]</a>
              <a href="subject.html#26691">[ subject ]</a>
              <a href="author.html#26691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
