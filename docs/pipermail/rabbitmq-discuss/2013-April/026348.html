<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster reverted to old config!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20reverted%20to%20old%20config%21&In-Reply-To=%3CCAEWH9M-FpCE%3DpNAznoFWxJ0rDRb1qCWa%3DAd%3DVA0%3DsYZv_%2B8aDw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026347.html">
   <LINK REL="Next"  HREF="026349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster reverted to old config!</H1>
    <B>Pete Kelly</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20reverted%20to%20old%20config%21&In-Reply-To=%3CCAEWH9M-FpCE%3DpNAznoFWxJ0rDRb1qCWa%3DAd%3DVA0%3DsYZv_%2B8aDw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Cluster reverted to old config!">pkelly at gmail.com
       </A><BR>
    <I>Thu Apr  4 15:29:34 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026347.html">[rabbitmq-discuss] Cluster reverted to old config!
</A></li>
        <LI>Next message: <A HREF="026349.html">[rabbitmq-discuss] Cluster reverted to old config!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26348">[ date ]</a>
              <a href="thread.html#26348">[ thread ]</a>
              <a href="subject.html#26348">[ subject ]</a>
              <a href="author.html#26348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4 April 2013 15:07, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Pete,
</I>&gt;<i>
</I>&gt;<i> On 04/04/13 13:06, Pete Kelly wrote:
</I>&gt;<i> &gt; boxes lost network connectivity for a short period (or eth1 became eth0
</I>&gt;<i> &gt; and vice versa) which caused rabbitmq on both boxes to crash.
</I>&gt;<i>
</I>&gt;<i> Brokers will survive network interruptions, but probably not network
</I>&gt;<i> hardware reconfiguration.
</I>&gt;<i>
</I>&gt;<i> &gt; Is it possible it lost the definitions (because both cluster nodes
</I>&gt;<i> &gt; crashed at the same time) so it just loaded in the last one which was
</I>&gt;<i> &gt; imported via the management GUI?
</I>&gt;<i>
</I>&gt;<i> If the management plugin was configured to load an out-of-date
</I>&gt;<i> definition at startup (available on brokers since v2.8.0) then it could
</I>&gt;<i> appear like a reversion. The same could happen on a pre-v2.8.0 broker if
</I>&gt;<i> you scripted the load of a configuration file at startup.
</I>&gt;<i>
</I>&gt;<i> Disc nodes will retain configuration for durable resources during a
</I>&gt;<i> restart, assuming the Mnesia database directory survives intact.
</I>&gt;<i> Transient resources will not survive a broker restart, so that may
</I>&gt;<i> explain the discrepancy you see for exchanges and queues, but not for
</I>&gt;<i> vhosts. E.g. see
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#exchange.declare.durable">http://www.rabbitmq.com/amqp-0-9-1-reference.html#exchange.declare.durable</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare.durable">http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare.durable</A>
</I>

Thanks Emile

All exchanges and queues are marked with the durable bit.

Do you know how I could check to see if there is any predefined startup
configuration anywhere? It certainly looks like the configuration that
could have been active at the point the cluster was created if that would
make any sense?


&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130404/4559940b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130404/4559940b/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026347.html">[rabbitmq-discuss] Cluster reverted to old config!
</A></li>
	<LI>Next message: <A HREF="026349.html">[rabbitmq-discuss] Cluster reverted to old config!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26348">[ date ]</a>
              <a href="thread.html#26348">[ thread ]</a>
              <a href="subject.html#26348">[ subject ]</a>
              <a href="author.html#26348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
