<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 3.0.4 - Losing messages in a HA cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.0.4%20-%20Losing%20messages%20in%20a%20HA%20cluster&In-Reply-To=%3C517A3E71.8030104%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026718.html">
   <LINK REL="Next"  HREF="026734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 3.0.4 - Losing messages in a HA cluster</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.0.4%20-%20Losing%20messages%20in%20a%20HA%20cluster&In-Reply-To=%3C517A3E71.8030104%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] 3.0.4 - Losing messages in a HA cluster">emile at rabbitmq.com
       </A><BR>
    <I>Fri Apr 26 09:44:33 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026718.html">[rabbitmq-discuss] 3.0.4 - Losing messages in a HA cluster
</A></li>
        <LI>Next message: <A HREF="026734.html">[rabbitmq-discuss] 3.0.4 - Losing messages in a HA cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26724">[ date ]</a>
              <a href="thread.html#26724">[ thread ]</a>
              <a href="subject.html#26724">[ subject ]</a>
              <a href="author.html#26724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hi Jason,

On 25/04/13 21:09, Jason McIntosh wrote:
&gt;<i> I have 2 nodes in an rabbit cluster, one disc, one ram node.  I'm seeing
</I>&gt;<i> messages get lost
</I>
The explanation can be found here:
<A HREF="http://www.rabbitmq.com/ha.html#behaviour">http://www.rabbitmq.com/ha.html#behaviour</A>

 &quot;should there be no slave that is synchronised with the master,
  messages that only the master held will be lost.&quot;

Messages can get lost if you recycle nodes in the cluster faster than it
takes for the queue contents to be replaced entirely with new messages.
The solution is to wait for slaves to become synchronised before
restarting each node.

The next version of RabbitMQ will feature manual eager synchronisation
which will allow slaves to catch up on old messages held only on the
master node. You can obtain this feature now by installing a nightly
build of the broker, or wait for the next release.


-Emile





</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026718.html">[rabbitmq-discuss] 3.0.4 - Losing messages in a HA cluster
</A></li>
	<LI>Next message: <A HREF="026734.html">[rabbitmq-discuss] 3.0.4 - Losing messages in a HA cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26724">[ date ]</a>
              <a href="thread.html#26724">[ thread ]</a>
              <a href="subject.html#26724">[ subject ]</a>
              <a href="author.html#26724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
