<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ manager and Idle queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20manager%20and%20Idle%20queues&In-Reply-To=%3C516D4907.2050109%40sophiacom.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026509.html">
   <LINK REL="Next"  HREF="026511.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ manager and Idle queues</H1>
    <B>Antoine Berry</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20manager%20and%20Idle%20queues&In-Reply-To=%3C516D4907.2050109%40sophiacom.fr%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ manager and Idle queues">aberry at sophiacom.fr
       </A><BR>
    <I>Tue Apr 16 13:50:15 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026509.html">[rabbitmq-discuss] RabbitMQ Queues memory leak?
</A></li>
        <LI>Next message: <A HREF="026511.html">[rabbitmq-discuss] RabbitMQ manager and Idle queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26510">[ date ]</a>
              <a href="thread.html#26510">[ thread ]</a>
              <a href="subject.html#26510">[ subject ]</a>
              <a href="author.html#26510">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everybody,

We have a little problem with the rabbitMQ management plugin. Basically 
we would want to delete the Idle queues. So to do that we send a http 
request to the rabbitMQ management plugin REST API, to get the value of 
the &quot;last_event&quot; field.
But we always get last_event = now, even though we haven't used  the 
queue nor the virtual host in general for a day... Plus these queues 
don't even have any consumers, and the application is not even running. 
And all the queues are marked as active in the web management page too.

Here are an exemple of request, and a screen shot of the web manager 
page, which shows a queue without any consumers but marked as active :

HTTP/1.1 200 OK
Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
Date: Tue, 16 Apr 2013 09:54:44 GMT
Content-Type: application/json
Content-Length: 909
Cache-Control: no-cache

{&quot;policy&quot;:&quot;&quot;,&quot;exclusive_consumer_tag&quot;:&quot;&quot;,&quot;messages_ready&quot;:0,&quot;messages_unacknowledged&quot;:0,&quot;messages&quot;:0,&quot;consumers&quot;:0,&quot;active_consumers&quot;:0,&quot;memory&quot;:44356,&quot;backing_queue_status&quot;:{&quot;q1&quot;:0,&quot;q2&quot;:0,&quot;delta&quot;&quot;delta&quot;,&quot;undefined&quot;,0,&quot;undefined&quot;],&quot;q3&quot;:0,&quot;q4&quot;:0,&quot;len&quot;:0,&quot;pending_acks&quot;:0,&quot;target_ram_count&quot;:&quot;infinity&quot;,&quot;ram_msg_count&quot;:0,&quot;ram_ack_count&quot;:0,&quot;next_seq_id&quot;:66,&quot;persistent_count&quot;:0,&quot;avg_ingress_rate&quot;:0.0,&quot;avg_egress_rate&quot;:0.0,&quot;avg_ack_ingress_rate&quot;:0.0,&quot;avg_ack_egress_rate&quot;:0.0},&quot;messages_details&quot;:{&quot;rate&quot;:0.0,&quot;interval&quot;:10001924,&quot;last_event&quot;:1366106079385},&quot;messages_ready_details&quot;:{&quot;rate&quot;:0.0,&quot;interval&quot;:10001924,&quot;last_event&quot;:1366106079385},&quot;messages_unacknowledged_details&quot;:{&quot;rate&quot;:0.0,&quot;interval&quot;:10001924,&quot;last_event&quot;:1366106079385},&quot;consumer_details&quot;],&quot;name&quot;:&quot;theQueue&quot;,&quot;vhost&quot;:&quot;myHost&quot;,&quot;durable&quot;:true,&quot;auto_delete&quot;:false,&quot;arguments&quot;:{},&quot;node&quot;:&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at myServer</A>&quot;}

Does anybody ever had this kind of problem? We're using RabbitMQ 3.0.1, 
with the java client.

Thank you.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026509.html">[rabbitmq-discuss] RabbitMQ Queues memory leak?
</A></li>
	<LI>Next message: <A HREF="026511.html">[rabbitmq-discuss] RabbitMQ manager and Idle queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26510">[ date ]</a>
              <a href="thread.html#26510">[ thread ]</a>
              <a href="subject.html#26510">[ subject ]</a>
              <a href="author.html#26510">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
