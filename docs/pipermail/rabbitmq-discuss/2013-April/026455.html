<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connect%20to%20RabbitMQ%20server%20over%20BigIP%20failed&In-Reply-To=%3C9CF3785F-89A7-4E07-BC1B-B7CDB312DE54%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026448.html">
   <LINK REL="Next"  HREF="026449.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connect%20to%20RabbitMQ%20server%20over%20BigIP%20failed&In-Reply-To=%3C9CF3785F-89A7-4E07-BC1B-B7CDB312DE54%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed">watson.timothy at gmail.com
       </A><BR>
    <I>Wed Apr 10 21:27:01 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026448.html">[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed
</A></li>
        <LI>Next message: <A HREF="026449.html">[rabbitmq-discuss] Federated Link Not Producing Logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26455">[ date ]</a>
              <a href="thread.html#26455">[ thread ]</a>
              <a href="subject.html#26455">[ subject ]</a>
              <a href="author.html#26455">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Looks like the LB isn't responding. Suggest checking the BigIP logs and rabbit server logs to see if connections are making it through ok.

Cheers
Tim

On 10 Apr 2013, at 18:58, Jim Wu &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">JWU2 at lifetouch.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>  
</I>&gt;<i> I need help on an issue  in BigIP/F5 load balanced rabbitMQ cluster. We set up a cluster of two RabbitMQ servers which were fronted by a BigIP load balancer.
</I>&gt;<i>  
</I>&gt;<i> When running a client program (Java based) to send messages to each rabbitMQ server directly, it works fine.  However, when using the same client to send messages via BigIP VIP (pointing to the RabbitMQ cluster), I got the following error.  Double checked the BigIP setup, and it seems right (TCP/IP timeout set at 5mins).  Thanks for shedding some light on it.
</I>&gt;<i>  
</I>&gt;<i> java.io.IOException
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:360)
</I>&gt;<i>        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)
</I>&gt;<i>        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)
</I>&gt;<i>        at com.rabbitmq.examples.SendString.main(SendString.java:44)
</I>&gt;<i> Caused by: com.rabbitmq.client.ShutdownSignalException: connection error; reason: java.net.SocketTimeoutException: Timeout during Connection negotiation
</I>&gt;<i>        at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
</I>&gt;<i>        at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:313)
</I>&gt;<i>        ... 3 more
</I>&gt;<i> Caused by: java.net.SocketTimeoutException: Timeout during Connection negotiation
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQConnection.handleSocketTimeout(AMQConnection.java:566)
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQConnection.access$500(AMQConnection.java:59)
</I>&gt;<i>        at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:541)
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> Jim Wu
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> This email has been scanned by the Symantec Email Security.cloud service.
</I>&gt;<i> For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
</I>&gt;<i> _____________________________________________________________________
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130410/9a25e677/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130410/9a25e677/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026448.html">[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed
</A></li>
	<LI>Next message: <A HREF="026449.html">[rabbitmq-discuss] Federated Link Not Producing Logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26455">[ date ]</a>
              <a href="thread.html#26455">[ thread ]</a>
              <a href="subject.html#26455">[ subject ]</a>
              <a href="author.html#26455">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
