<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ingress does not work for me and the RMQ	goes down
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ingress%20does%20not%20work%20for%20me%20and%20the%20RMQ%0A%09goes%20down&In-Reply-To=%3CB2E7B16C-C8FE-45FD-8F98-FC9747E8740A%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026377.html">
   <LINK REL="Next"  HREF="026373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ingress does not work for me and the RMQ	goes down</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ingress%20does%20not%20work%20for%20me%20and%20the%20RMQ%0A%09goes%20down&In-Reply-To=%3CB2E7B16C-C8FE-45FD-8F98-FC9747E8740A%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Ingress does not work for me and the RMQ	goes down">tim at rabbitmq.com
       </A><BR>
    <I>Fri Apr  5 13:23:06 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026377.html">[rabbitmq-discuss] Ingress does not work for me and the RMQ goes down
</A></li>
        <LI>Next message: <A HREF="026373.html">[rabbitmq-discuss] Ingress does not work for me and the RMQ	goes down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26372">[ date ]</a>
              <a href="thread.html#26372">[ thread ]</a>
              <a href="subject.html#26372">[ subject ]</a>
              <a href="author.html#26372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 5 Apr 2013, at 13:07, Cermak, Marek wrote:
&gt;<i> Hello everybody,
</I>&gt;<i> I continue with stress testing on limited memory. This time I have problem with RMQ going down without any warning after consuming a lot of memory.
</I>&gt;<i>  
</I>&gt;<i> Producer asks for ingress on the channel
</I>&gt;<i> amqp_channel:register_flow_handler(Channel, self()),
</I>
The process represented by 'self()' in that call should receive `#channel.flow{}` messages yes.

&gt;<i> The broker warns once on the console and then it is killed:
</I>&gt;<i>  
</I>&gt;<i> 13:48:24.429 [warning] Undefined: memory resource limit alarm set on node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">hare at xxx</A>
</I>&gt;<i> Killed
</I>&gt;<i>  
</I>&gt;<i> shouldn't the producer be warned instead?
</I>
The producer should get throttled as well as receiving a flow notification - rabbit stops reading from the socket, at which point TCP back-pressure is exerted. Who does the killing here, i.e., where does that 'Killed' come from? Are you saying that rabbit crashes (with OOM for example) before the producer gets the flow notification?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130405/ef75b87e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130405/ef75b87e/attachment.htm</A>&gt;
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026377.html">[rabbitmq-discuss] Ingress does not work for me and the RMQ goes down
</A></li>
	<LI>Next message: <A HREF="026373.html">[rabbitmq-discuss] Ingress does not work for me and the RMQ	goes down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26372">[ date ]</a>
              <a href="thread.html#26372">[ thread ]</a>
              <a href="subject.html#26372">[ subject ]</a>
              <a href="author.html#26372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
