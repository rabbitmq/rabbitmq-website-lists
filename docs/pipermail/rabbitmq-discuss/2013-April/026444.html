<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustering and Scalability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20and%20Scalability&In-Reply-To=%3CA57B6B00637AF741A9FA2D006B40C3C882A0C8774E%40AUSP01VMBX29.collaborationhost.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026441.html">
   <LINK REL="Next"  HREF="026426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustering and Scalability</H1>
    <B>Chris Nicel</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20and%20Scalability&In-Reply-To=%3CA57B6B00637AF741A9FA2D006B40C3C882A0C8774E%40AUSP01VMBX29.collaborationhost.net%3E"
       TITLE="[rabbitmq-discuss] Clustering and Scalability">Chris.Nicel at 15below.com
       </A><BR>
    <I>Wed Apr 10 14:25:40 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026441.html">[rabbitmq-discuss] Clustering and Scalability
</A></li>
        <LI>Next message: <A HREF="026426.html">[rabbitmq-discuss] Newbee consulting question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26444">[ date ]</a>
              <a href="thread.html#26444">[ thread ]</a>
              <a href="subject.html#26444">[ subject ]</a>
              <a href="author.html#26444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Simon,

Thanks for coming back to me. Yes in all cases I was referring to &quot;exactly&quot; mode for the ha policy.

It seems we do have some options by programmatically adding ha policies and then removing them after the migration has occurred.

In terms of ideas for an automatic system of spreading load out across a cluster. You could monitor the size/speed of various queues and migrate them to even the load on any individual node. Similar to VMWare's vsphere DRS and storage DRS. Monitoring CPU and RAM usage (in the case of DRS) and storage IO to determine which hosts the vm's should be running on. This could allow you to add nodes and have the load balanced &quot;automatically&quot;.

As with most software development you &quot;could&quot; do almost anything... I hope that my ideas are in some way helpful :o)

Cheers

Chris

-----Original Message-----
From: Simon MacMullen [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>]
Sent: 10 April 2013 12:40
To: Discussions about RabbitMQ
Cc: Chris Nicel
Subject: Re: [rabbitmq-discuss] Clustering and Scalability

Sorry about the previous response, hit &quot;send&quot; too early...

On 09/04/13 13:45, Chris Nicel wrote:
&gt;<i> Hi Guys,
</I>&gt;<i>
</I>&gt;<i> We are looking to use RabbitMQ as a messagebus in a scalable
</I>&gt;<i> application. In order to achieve complete scalability it is important
</I>&gt;<i> that we can ramp up our RabbitMQ cluster to have more nodes when a
</I>&gt;<i> performance bottleneck is realised.
</I>&gt;<i>
</I>&gt;<i> I have reviewed the clustering guidelines and understand the queues do
</I>&gt;<i> not migrate across a cluster when the nodes are being taken down.
</I>&gt;<i> If a node fails/is taken down then queues for which it maintained will
</I>&gt;<i> no longer be protected if an HA policy of exactly two nodes is used,
</I>&gt;<i> until that node is restored that is.
</I>
Or until another node comes on line, or you change the policy.

&gt;<i> I believe these three questions will further my understanding:
</I>
I assume you are asking these questions in the context of &quot;exactly&quot; mode...

&gt;<i> Is there a way to re-nice the queues across the cluster to even out
</I>&gt;<i> the load?
</I>
&gt;<i> Is there a way to migrate already existing queues to new nodes as
</I>&gt;<i> slaves?
</I>
You could do both of these by setting a (queue-specific?) policy using &quot;nodes&quot; with a higher priority, waiting for the queues to migrate, and then deleting it again.

But it's becoming apparent that people seem to want something more automated that that. What exactly that would look like I'm less sure.

&gt;<i> If a queue loses a node and a new node is added to the cluster, will
</I>&gt;<i> the new node join the ha policy for that particular queue?
</I>
Yes. (Again assuming &quot;exactly&quot; mode).

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware

 15below Limited: Company registered in England and Wales No 3945289
Registered Office: Lyndean House, 43-46 Queens Road, Brighton BN1 3XB, United Kingdom

15below Australia Pty Limited: ABN 25 132 716 379
Level 50, 120 Collins Street, Melbourne, Victoria 3000, Australia

Please think about the environment before printing this email.

************************************************************************
This email and any attachments may be confidential and/or legally privileged and are solely for the use of the intended recipient.  If you have received this email in error please contact the sender.  Any views or opinions expressed within this e-mail are solely those of the sender, and do not necessarily represent those of 15below unless otherwise specifically stated.  Although 15below has taken every reasonable precaution to ensure that any attachment to this e-mail has been checked for viruses, it is strongly recommended that you carry out your own virus check before opening any attachment, as we cannot accept liability for any damage sustained as a result of software virus infection.
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026441.html">[rabbitmq-discuss] Clustering and Scalability
</A></li>
	<LI>Next message: <A HREF="026426.html">[rabbitmq-discuss] Newbee consulting question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26444">[ date ]</a>
              <a href="thread.html#26444">[ thread ]</a>
              <a href="subject.html#26444">[ subject ]</a>
              <a href="author.html#26444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
