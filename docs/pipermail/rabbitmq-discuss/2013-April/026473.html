<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Configuring RabbitMQ to support change	in	hostname
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Configuring%20RabbitMQ%20to%20support%20change%09in%0A%09hostname&In-Reply-To=%3C3969c7a8.000002c0.00000010%40KAPILPC.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026392.html">
   <LINK REL="Next"  HREF="026474.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Configuring RabbitMQ to support change	in	hostname</H1>
    <B>Kapil Goyal</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Configuring%20RabbitMQ%20to%20support%20change%09in%0A%09hostname&In-Reply-To=%3C3969c7a8.000002c0.00000010%40KAPILPC.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Configuring RabbitMQ to support change	in	hostname">goyalk at vmware.com
       </A><BR>
    <I>Thu Apr 11 22:27:48 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026392.html">[rabbitmq-discuss] Configuring RabbitMQ to support change	in hostname
</A></li>
        <LI>Next message: <A HREF="026474.html">[rabbitmq-discuss] Configuring RabbitMQ to support change	in	hostname
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26473">[ date ]</a>
              <a href="thread.html#26473">[ thread ]</a>
              <a href="subject.html#26473">[ subject ]</a>
              <a href="author.html#26473">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias, Tim,

Thanks for your response.

&gt;<i> The real problem is that the mnesia schema contains for each table a
</I>reference to the node(s) on which it has copies. So if the host name
changes and rabbit is restarted it will think that its tables still live
on the host with the &gt; old hostname.

So, if I change the node-name to <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at localhost</A> in the evn-config file,
RabbitMQ still won't be able to handle the change in hostname because of
the old hostname being in mnesia tables. Is this correct? I am trying to
understand how RabbitMQ uses the hostname stored in mnesia tables.

Thanks
Kapil

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>
[mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Matthias
Radestock
Sent: Sunday, April 07, 2013 2:34 PM
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Configuring RabbitMQ to support change in
hostname

On 03/04/13 10:48, Tim Watson wrote:
&gt;<i> You cannot use '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at 987sdfkjhisd7f7d87sdf</A>' to connect to other 
</I>&gt;<i> Erlang nodes unless the part after the @ is actually the hostname.
</I>
Indeed.

&gt;<i> In addition to this, mnesia - Erlang's distributed database - insists 
</I>&gt;<i> on creating its on-disk schema in a folder which is named 
</I>&gt;<i> Mnesia.&lt;node-name&gt;, and we have no control over that.
</I>
Actually, that directory is configurable. The real problem is that the
mnesia schema contains for each table a reference to the node(s) on which
it has copies. So if the host name changes and rabbit is restarted it will
think that its tables still live on the host with the old hostname.

Matthias.
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026392.html">[rabbitmq-discuss] Configuring RabbitMQ to support change	in hostname
</A></li>
	<LI>Next message: <A HREF="026474.html">[rabbitmq-discuss] Configuring RabbitMQ to support change	in	hostname
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26473">[ date ]</a>
              <a href="thread.html#26473">[ thread ]</a>
              <a href="subject.html#26473">[ subject ]</a>
              <a href="author.html#26473">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
