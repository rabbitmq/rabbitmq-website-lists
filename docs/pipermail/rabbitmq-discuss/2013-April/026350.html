<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Durable + Exclusive queue disappeared
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Durable%20%2B%20Exclusive%20queue%20disappeared&In-Reply-To=%3Cbb7f3ae3-9110-4620-83b7-c4d7f75a286a%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026344.html">
   <LINK REL="Next"  HREF="026351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Durable + Exclusive queue disappeared</H1>
    <B>Jonathan Schwietert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Durable%20%2B%20Exclusive%20queue%20disappeared&In-Reply-To=%3Cbb7f3ae3-9110-4620-83b7-c4d7f75a286a%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Durable + Exclusive queue disappeared">jonathan.schwietert at gmail.com
       </A><BR>
    <I>Thu Apr  4 16:11:00 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026344.html">[rabbitmq-discuss] Durable + Exclusive queue disappeared
</A></li>
        <LI>Next message: <A HREF="026351.html">[rabbitmq-discuss] Durable + Exclusive queue disappeared
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26350">[ date ]</a>
              <a href="thread.html#26350">[ thread ]</a>
              <a href="subject.html#26350">[ subject ]</a>
              <a href="author.html#26350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Again, pasting in a response i received via email that isn't showing up on 
this list, from *Emile Joubert:*
*
*Hi Jonathan,

On 03/04/13 17:28, Jonathan Schwietert wrote:

Thanks for the quick response Emile. I did happen to see that result in

my searching but unfortunately our broker is standalone - so there are

no other nodes to bring up.


If your broker has only ever been standalone then the explanation that
involves another broker does not apply, though that is the only way I
know of to replicate the error condition. If you can recreate the error
with a small sequence of steps then please post them. The only way to
recover from the error is to move or delete the broker database directory.

-Emile

On Wednesday, April 3, 2013 10:28:46 AM UTC-6, Jonathan Schwietert wrote:
&gt;<i>
</I>&gt;<i> Thanks for the quick response Emile. I did happen to see that result in my 
</I>&gt;<i> searching but unfortunately our broker is standalone - so there are no 
</I>&gt;<i> other nodes to bring up.
</I>&gt;<i>
</I>&gt;<i> On Wednesday, April 3, 2013 10:28:02 AM UTC-6, Jonathan Schwietert wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Pasting in a response i received via email that isn't showing up on this 
</I>&gt;&gt;<i> list, from *Emile Joubert:*
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 02/04/13 23:32, Jonathan Schwietert wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi, I have a queue which was declared with BOTH durable and exclusive
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (on accident) whose owner disconnected then reconnected and now
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> receives: &quot;NOT_FOUND - no queue 'test.queue' in vhost '/test.vhost'&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> See the documentation for the exclusive parameter:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare.exclusive">http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare.exclusive</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &quot;Exclusive queues may only be accessed by the current connection, and
</I>&gt;&gt;<i> are deleted when that connection closes.&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So your 'test.queue' should not longer exist. The presence of the string
</I>&gt;&gt;<i> in the internal Mnesia files does not necessarily mean that the queue
</I>&gt;&gt;<i> still exists since the name could appear in internal logs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The scenario you describe can occur if a queue was declared on a node
</I>&gt;&gt;<i> which leaves a cluster. A &quot;Not Found&quot; error will result when attempting
</I>&gt;&gt;<i> to redeclare or delete the queue on any remaining nodes in the cluster.
</I>&gt;&gt;<i> The solution is for the node that left the cluster to rejoin. The use of
</I>&gt;&gt;<i> mirrored queues will prevent this condition.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Emile
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130404/cc4e9df7/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130404/cc4e9df7/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026344.html">[rabbitmq-discuss] Durable + Exclusive queue disappeared
</A></li>
	<LI>Next message: <A HREF="026351.html">[rabbitmq-discuss] Durable + Exclusive queue disappeared
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26350">[ date ]</a>
              <a href="thread.html#26350">[ thread ]</a>
              <a href="subject.html#26350">[ subject ]</a>
              <a href="author.html#26350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
