<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Why Clustering ? Load Balancing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20Clustering%20%3F%20Load%20Balancing&In-Reply-To=%3C058319FB-37F5-4A78-A5EC-35290DDA79E7%40alertme.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026768.html">
   <LINK REL="Next"  HREF="026771.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Why Clustering ? Load Balancing</H1>
    <B>Dmitry Andrianov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20Clustering%20%3F%20Load%20Balancing&In-Reply-To=%3C058319FB-37F5-4A78-A5EC-35290DDA79E7%40alertme.com%3E"
       TITLE="[rabbitmq-discuss] Why Clustering ? Load Balancing">dmitry.andrianov at alertme.com
       </A><BR>
    <I>Tue Apr 30 09:26:12 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026768.html">[rabbitmq-discuss] Why Clustering ? Load Balancing
</A></li>
        <LI>Next message: <A HREF="026771.html">[rabbitmq-discuss] Why Clustering ? Load Balancing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26769">[ date ]</a>
              <a href="thread.html#26769">[ thread ]</a>
              <a href="subject.html#26769">[ subject ]</a>
              <a href="author.html#26769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>How many RabbitMQ servers you running? Where is RabbitMQ on your picture?
I would assume you are running it on &quot;producer server&quot; but how many instances of rabbit do you have?


On 30 Apr 2013, at 07:30, tluck &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tilak.chauhan at ymail.com</A>&gt; wrote:

&gt;<i> Hi Simon,
</I>&gt;<i> 
</I>&gt;<i> Thanks for your reply. 
</I>&gt;<i> 
</I>&gt;&gt;<i> I assume that each consumer is churning through messages quite fast? It
</I>&gt;<i> would need to be in order for the short pause mentioned about to be 
</I>&gt;<i> enough to have only 5-8 messages unacknowledged in this scenario. 
</I>&gt;<i> 
</I>&gt;<i> Consumers are taking long time to consume each message (30+ seconds/
</I>&gt;<i> message). While consuming a message each consumer has to do some tasks (DB
</I>&gt;<i> update, Data Scrapping, sending email etc...) and all this takes certainly a
</I>&gt;<i> good amount of time. I also tried to slow down message consuming process by
</I>&gt;<i> adding sleep function in consumer code, but still I see only  5-8 messages
</I>&gt;<i> being consumed at a time by all the consumers. This means, load is not being
</I>&gt;<i> properly balanced among the consumers.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> I'm not sure what this means. From your description it sounds like you
</I>&gt;<i> *do* have a cluster. You say you have multiple RabbitMQ servers, and you 
</I>&gt;<i> are observing the message stats for all of them in one management 
</I>&gt;<i> interface? That sounds like a cluster to me. 
</I>&gt;<i> 
</I>&gt;<i> Sorry for not being clear. I've one producer server which is responsible for
</I>&gt;<i> creating queues and adding messages into them. RabbitMQ management plugin is
</I>&gt;<i> also installed in the producer server. On the other hand, I have 3 consumers
</I>&gt;<i> (on different servers) and every consumer sever is running 5 parallel
</I>&gt;<i> processes (because I've 5 queues) . Please also see the attached file to
</I>&gt;<i> understand producer and consumer association.  ProducerConsumerDiagram.pdf
</I>&gt;<i> &lt;<A HREF="http://rabbitmq.1065348.n5.nabble.com/file/n26292/ProducerConsumerDiagram..pdf">http://rabbitmq.1065348.n5.nabble.com/file/n26292/ProducerConsumerDiagram..pdf</A>&gt; 
</I>&gt;<i> . RabbitMQ has tutorial/guidelines (at
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A>) for implementing clustering on
</I>&gt;<i> rabbitmq servers. This tutorial asks developers to copy erlang.cookie from
</I>&gt;<i> one server to another and there is step wise process described to apply
</I>&gt;<i> clustering on the rabbitmq severs. When started to setup my severs, I never
</I>&gt;<i> followed such tutorial (I mean, i didn't copy cookie or ran join_cluster or
</I>&gt;<i> any other clustering related commands), But all my consumer servers are
</I>&gt;<i> still being able to communicate with producer server through private IP. I'm
</I>&gt;<i> trying to say that I didn't follow clustering guidelines provided by
</I>&gt;<i> Rabbitmq, is this can be the possible cause for my problem  ? (load should
</I>&gt;<i> be balanced properly among the consumers).
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> T.luck
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Why-Clustering-Load-Balancing-tp26284p26292.html">http://rabbitmq.1065348.n5.nabble.com/Why-Clustering-Load-Balancing-tp26284p26292.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>This email is for the use of the intended recipient(s) only.
If you have received this email in error, please notify the sender immediately and then delete it.
If you are not the intended recipient, you must not use, disclose or distribute this email without the
author's prior permission. AlertMe.com Ltd. is not responsible for any personal views expressed
in this message or any attachments that are those of the individual sender.

AlertMe.com Ltd, 30 Station Road, Cambridge, CB1 2RE, UK.
Registered in England, Company number 578 2908, VAT registration number GB 895 9914 42.


</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026768.html">[rabbitmq-discuss] Why Clustering ? Load Balancing
</A></li>
	<LI>Next message: <A HREF="026771.html">[rabbitmq-discuss] Why Clustering ? Load Balancing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26769">[ date ]</a>
              <a href="thread.html#26769">[ thread ]</a>
              <a href="subject.html#26769">[ subject ]</a>
              <a href="author.html#26769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
