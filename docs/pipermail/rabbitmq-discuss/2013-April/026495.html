<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 3.0.4 extremely unstable in production...?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.0.4%20extremely%20unstable%20in%20production...%3F&In-Reply-To=%3C516BC567.8020602%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026490.html">
   <LINK REL="Next"  HREF="026496.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 3.0.4 extremely unstable in production...?</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.0.4%20extremely%20unstable%20in%20production...%3F&In-Reply-To=%3C516BC567.8020602%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] 3.0.4 extremely unstable in production...?">emile at rabbitmq.com
       </A><BR>
    <I>Mon Apr 15 10:16:23 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026490.html">[rabbitmq-discuss] 3.0.4 extremely unstable in production...?
</A></li>
        <LI>Next message: <A HREF="026496.html">[rabbitmq-discuss] 3.0.4 extremely unstable in production...?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26495">[ date ]</a>
              <a href="thread.html#26495">[ thread ]</a>
              <a href="subject.html#26495">[ subject ]</a>
              <a href="author.html#26495">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

On 12/04/13 19:36, Matt Wise wrote:
&gt;<i> Since creating the new server farm though we've had 3 outages. In the
</I>&gt;<i> first two outages we received a Network Partition Split, and effectively
</I>&gt;<i> all 3 of the systems decided to run their own queues independently of
</I>&gt;<i> the other servers. This was the first time we'd ever seen this failure,
</I>&gt;<i> ever. In the most recent failure we had 2 machines split off, and the
</I>&gt;<i> 3rd rabbitmq service effectively became unresponsive entirely.
</I>
Versions 2.8.x and 3.0.x are equally susceptible to partitions. You can
confirm this experimentally by setting up a cluster of v2.8.x nodes and
interrupting connectivity for twice the net_ticktime (60s by default).

See <A HREF="https://www.rabbitmq.com/partitions.html">https://www.rabbitmq.com/partitions.html</A>

&gt;<i> Up until recently though I had felt extremely comfortable with
</I>&gt;<i> RabbitMQ's clustering technology and reliability... now ... not so much.
</I>&gt;<i> Has anyone else seen similar behaviors? Is it simply due to the fact
</I>&gt;<i> that we're running cross-zone now in Amazon, or is it more likely the 3
</I>&gt;<i> servers that caused the problem? Or the 3.0.x upgrade?
</I>
A network outage coincided with the period when nodes were running
v3.0.4. The network interruption is the cause of the partition rather
than the broker version.

At the time of writing RabbitMQ clustering does not tolerate network
partitions well, so it should not be used over a WAN. The shovel or
federation plugins are better solutions for that case.

See <A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A>



-Emile







</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026490.html">[rabbitmq-discuss] 3.0.4 extremely unstable in production...?
</A></li>
	<LI>Next message: <A HREF="026496.html">[rabbitmq-discuss] 3.0.4 extremely unstable in production...?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26495">[ date ]</a>
              <a href="thread.html#26495">[ thread ]</a>
              <a href="subject.html#26495">[ subject ]</a>
              <a href="author.html#26495">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
