<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connect%20to%20RabbitMQ%20server%20over%20BigIP%20failed&In-Reply-To=%3C2E0219B99692FF489BBB96C50340D70314876FCE%40LTIVW-P-MBX01.LIFETOUCH.NET%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026463.html">
   <LINK REL="Next"  HREF="026455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed</H1>
    <B>Jim Wu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connect%20to%20RabbitMQ%20server%20over%20BigIP%20failed&In-Reply-To=%3C2E0219B99692FF489BBB96C50340D70314876FCE%40LTIVW-P-MBX01.LIFETOUCH.NET%3E"
       TITLE="[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed">JWU2 at lifetouch.com
       </A><BR>
    <I>Wed Apr 10 18:58:46 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026463.html">[rabbitmq-discuss] Rabbit Cluster Failure
</A></li>
        <LI>Next message: <A HREF="026455.html">[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26448">[ date ]</a>
              <a href="thread.html#26448">[ thread ]</a>
              <a href="subject.html#26448">[ subject ]</a>
              <a href="author.html#26448">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I need help on an issue  in BigIP/F5 load balanced rabbitMQ cluster. We set up a cluster of two RabbitMQ servers which were fronted by a BigIP load balancer.

When running a client program (Java based) to send messages to each rabbitMQ server directly, it works fine.  However, when using the same client to send messages via BigIP VIP (pointing to the RabbitMQ cluster), I got the following error.  Double checked the BigIP setup, and it seems right (TCP/IP timeout set at 5mins).  Thanks for shedding some light on it.

java.io.IOException
       at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:106)
       at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:102)
       at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:360)
       at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:516)
       at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:533)
       at com.rabbitmq.examples.SendString.main(SendString.java:44)
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error; reason: java.net.SocketTimeoutException: Timeout during Connection negotiation
       at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
       at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
       at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
       at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:313)
       ... 3 more
Caused by: java.net.SocketTimeoutException: Timeout during Connection negotiation
       at com.rabbitmq.client.impl.AMQConnection.handleSocketTimeout(AMQConnection.java:566)
       at com.rabbitmq.client.impl.AMQConnection.access$500(AMQConnection.java:59)
       at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:541)


Jim Wu


______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
_____________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130410/e351e8dd/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130410/e351e8dd/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026463.html">[rabbitmq-discuss] Rabbit Cluster Failure
</A></li>
	<LI>Next message: <A HREF="026455.html">[rabbitmq-discuss] Connect to RabbitMQ server over BigIP failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26448">[ date ]</a>
              <a href="thread.html#26448">[ thread ]</a>
              <a href="subject.html#26448">[ subject ]</a>
              <a href="author.html#26448">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
