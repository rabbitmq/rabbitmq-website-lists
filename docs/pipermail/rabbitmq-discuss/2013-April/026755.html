<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Creating an auth plugin (Kerberos)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Creating%20an%20auth%20plugin%20%28Kerberos%29&In-Reply-To=%3C20130429112426.GC391%40kaka.it.su.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026778.html">
   <LINK REL="Next"  HREF="026761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Creating an auth plugin (Kerberos)</H1>
    <B>Simon Lundstr&#246;m</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Creating%20an%20auth%20plugin%20%28Kerberos%29&In-Reply-To=%3C20130429112426.GC391%40kaka.it.su.se%3E"
       TITLE="[rabbitmq-discuss] Creating an auth plugin (Kerberos)">simlu at su.se
       </A><BR>
    <I>Mon Apr 29 12:24:26 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026778.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
        <LI>Next message: <A HREF="026761.html">[rabbitmq-discuss] Creating an auth plugin (Kerberos)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26755">[ date ]</a>
              <a href="thread.html#26755">[ thread ]</a>
              <a href="subject.html#26755">[ subject ]</a>
              <a href="author.html#26755">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To resurrect my work and this old thread, I'm now starting very near to
release. A few questions though.

I've tried to read the code but I guess I've failed, I'm trying to
understand the structure of the {refused} and {error} messages when
authentication fails. {refused} seems to have two &quot;arguments&quot; while
{error} only has one? What's the correct structure and thinking here?


When a user authenticate via my plugin via the management GUI we get
this error message in the log:
=ERROR REPORT==== 29-Apr-2013::09:28:54 ===
webmachine error: path=&quot;/api/whoami&quot;
{error,function_clause,
       [{rabbit_auth_backend_internal,check_password,[&lt;&lt;&quot;totally_secret_password&quot;&gt;&gt;,&lt;&lt;&gt;&gt;]},
        {rabbit_auth_backend_internal,internal_check_user_login,2},
        {rabbit_access_control,'-check_user_login/2-fun-0-',4},
        {lists,foldl,3},
        {rabbit_mgmt_util,is_authorized,4},
        {webmachine_resource,resource_call,3},
        {webmachine_resource,do,3},
        {webmachine_decision_core,resource_call,1}]}

If I understand the code correctly it's because the function
check_password can't compare the stored hash to the password that the
user has supplied when trying to login. Since the password is cleared
and thus there exists no hash it errors out.
Some mechanism for checking if a password (and/or hash) is empty and
then refusing the client might be needed?

Br,
- Simon
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026778.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
	<LI>Next message: <A HREF="026761.html">[rabbitmq-discuss] Creating an auth plugin (Kerberos)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26755">[ date ]</a>
              <a href="thread.html#26755">[ thread ]</a>
              <a href="subject.html#26755">[ subject ]</a>
              <a href="author.html#26755">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
