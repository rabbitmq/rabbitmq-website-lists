<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] error parsing DN
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20error%20parsing%20DN&In-Reply-To=%3C4B5D885B77E8CC43852B8F0315AD03BA41BCD015%40EXMBX01.austin.utexas.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026456.html">
   <LINK REL="Next"  HREF="026453.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] error parsing DN</H1>
    <B>Warren Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20error%20parsing%20DN&In-Reply-To=%3C4B5D885B77E8CC43852B8F0315AD03BA41BCD015%40EXMBX01.austin.utexas.edu%3E"
       TITLE="[rabbitmq-discuss] error parsing DN">wsmith at tacc.utexas.edu
       </A><BR>
    <I>Wed Apr 10 20:58:38 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026456.html">[rabbitmq-discuss] Issue with specifying custom vhost and port	in federation URI.
</A></li>
        <LI>Next message: <A HREF="026453.html">[rabbitmq-discuss] error parsing DN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26452">[ date ]</a>
              <a href="thread.html#26452">[ thread ]</a>
              <a href="subject.html#26452">[ subject ]</a>
              <a href="author.html#26452">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi, I'm getting an error parsing a distinguished name in an X.509 certificate and I'm wondering if this is a bug in the RabbitMQ code. The error in the RabbitMQ log file is:

{handshake_error,opening,0,
                 {error,badarg,'connection.open',
                        [{io_lib,format,
                                 [&quot;\\~2.16.0B&quot;,
                                  [[60,60,
                                    [&quot;19&quot;,44,&quot;7&quot;,44,&quot;99&quot;,44,&quot;101&quot;,44,&quot;114&quot;,44,
                                     &quot;116&quot;,44,&quot;109&quot;,44,&quot;97&quot;,44,&quot;110&quot;],
                                    62,62]]],
                                 [{file,&quot;io_lib.erl&quot;},{line,152}]},
                         {rabbit_misc,format,2,
                                      [{file,&quot;src/rabbit_misc.erl&quot;},
                                       {line,608}]},
                         {rabbit_ssl,escape_rdn_value,2,
                                     [{file,&quot;src/rabbit_ssl.erl&quot;},{line,196}]},
                         {rabbit_ssl,format_rdn,1,
                                     [{file,&quot;src/rabbit_ssl.erl&quot;},{line,149}]},
                         {rabbit_ssl,'-format_complex_rdn/1-lc$^0/1-0-',1,
                                     [{file,&quot;src/rabbit_ssl.erl&quot;},{line,144}]},
                         {rabbit_ssl,format_complex_rdn,1,
                                     [{file,&quot;src/rabbit_ssl.erl&quot;},{line,144}]},
                         {rabbit_ssl,'-format_rdn_sequence/1-lc$^0/1-0-',1,
                                     [{file,&quot;src/rabbit_ssl.erl&quot;},{line,140}]},
                         {rabbit_ssl,'-format_rdn_sequence/1-lc$^0/1-0-',1,
                                     [{file,&quot;src/rabbit_ssl.erl&quot;},
                                      {line,140}]}]}}

It looks like there is a failure to parse either the subject or the issue of the client certificate. The client certificate is:

-----BEGIN CERTIFICATE-----
MIIEWzCCA0OgAwIBAgICB0YwDQYJKoZIhvcNAQEFBQAwZzELMAkGA1UEBhMCVVMx
DTALBgNVBAoTBFNEU0MxEDAOBgNVBAsTB1NEU0MtQ0ExHjAcBgNVBAMTFUNlcnRp
ZmljYXRlIEF1dGhvcml0eTEXMBUGCgmSJomT8ixkAQETB2NlcnRtYW4wHhcNMTIw
NTE0MTYzODQ1WhcNMTMwNTE1MTYzODQ1WjA/MQswCQYDVQQGEwJVUzENMAsGA1UE
ChMEU0RTQzENMAsGA1UECxMEU0RTQzESMBAGA1UEAxMJSW5jYSBJbmNhMIIBIjAN
BgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyKfvUWlReQgoQHhOFskbfaak6Q4y
BkmhCr9XbmDIOLwN7RoUm2/Av+e4kQnjo2fyraUa9Fio7KWWfDaxnIWcS6Rnx+dI
usMvxXgpx0tsCIAAB05QKBF1VuMvT0Hu+MFnkNgeRrbP4hInYPEzt6wuzcG/PTc7
6+zTsZ20xo9vbrV6saALuKaYyMZ/R6UUgHqIDaYiVXd+s2psC2wbgBX44cLvlXK9
cQXKoEHwHE7wWkGplgVRAR2wKSzKQkkRZb4d+BDHUg6+1rHM2rIrPo5MyVK9ZAo8
7cMQQOgiWMF97GDs7Nw9wYWjrAcRkw7iMqAjnz3FqEmFc5Ge8oQVF+OZkQIDAQAB
o4IBNzCCATMwCQYDVR0TBAIwADARBglghkgBhvhCAQEEBAMCBLAwLAYJYIZIAYb4
QgENBB8WHU9wZW5TU0wgR2VuZXJhdGVkIENlcnRpZmljYXRlMDIGCWCGSAGG+EIB
BAQlFiNodHRwOi8vd3d3LnNkc2MuZWR1L0NBL1NEU0NfQ1JMLnBlbTAdBgNVHQ4E
FgQUGo1yIlgWwzgzxPKg3dQ+HpnjvD4wgZEGA1UdIwSBiTCBhoAUv6OHLPYNdL1I
bA4nvwHk8k9Guieha6RpMGcxCzAJBgNVBAYTAlVTMQ0wCwYDVQQKEwRTRFNDMRAw
DgYDVQQLEwdTRFNDLUNBMR4wHAYDVQQDExVDZXJ0aWZpY2F0ZSBBdXRob3JpdHkx
FzAVBgoJkiaJk/IsZAEBEwdjZXJ0bWFuggEAMA0GCSqGSIb3DQEBBQUAA4IBAQBv
/3MSvUFWU0oV313RpR7922vnIjzZnuvUDPyTRhfqPpCQ9Yw9CFEsS8rM9xyqJ4wc
eLEB4zFn03DtUF3/5rqRG9KyEh8K8eJt5Ow7tBy6OQzgirZs1jhKL/2Ck6d+Adr8
XtaUy9c3VLYB4sU1yIEjDxD3YkLHZsLEFnfcWWmWr3p629/pEUhk04sUjz8ZUn7k
dlBMiX9nuBFWovpzn0urlqcqYKLqa7g7equH0ToxstABVOuw3e9L0pDQQs+SZZc6
EqwcEnwQ+TnaADGUr821gUaW8pxbpsi53d/0FpwA4Lc9OvCg6EVR2Tr/8p+jnH/v
0opU2WNT6IuglYjI6tvD
-----END CERTIFICATE-----

This certificate (and its CA certificate below) can be parsed by OpenSSL and Erlang.

In case it is helpful, the CA certificate for the above is:

-----BEGIN CERTIFICATE-----
MIIEDjCCAvagAwIBAgIBADANBgkqhkiG9w0BAQQFADBnMQswCQYDVQQGEwJVUzEN
MAsGA1UEChMEU0RTQzEQMA4GA1UECxMHU0RTQy1DQTEeMBwGA1UEAxMVQ2VydGlm
aWNhdGUgQXV0aG9yaXR5MRcwFQYKCZImiZPyLGQBARMHY2VydG1hbjAeFw0wNDA5
MDkwMjQyMjlaFw0xNDA5MDkwMjQyMjlaMGcxCzAJBgNVBAYTAlVTMQ0wCwYDVQQK
EwRTRFNDMRAwDgYDVQQLEwdTRFNDLUNBMR4wHAYDVQQDExVDZXJ0aWZpY2F0ZSBB
dXRob3JpdHkxFzAVBgoJkiaJk/IsZAEBEwdjZXJ0bWFuMIIBIjANBgkqhkiG9w0B
AQEFAAOCAQ8AMIIBCgKCAQEArXaQKLYiWyAq6ywSOAmKnmiV3u6tXCBmOYlF7Pzp
hHssQvgomjeh7H31PLzNlxTy/dXQOeyBaDowAL2kCzgwrh/cUo79tZu77Xzgc9o5
WR+Jq1huI2Au8QEz77PIi2c3fhsWyOYJMvHWXkDXhEr6YxYd1eTaIj435bZOJxVq
ZF6HePoB5cpflx54KkjjoY3Vh0407EUW9kA7Jcx86dIqH7cSupmPTORsAxvYTmwd
1qODvd6i06dBcR9VMCTSA4trJTS6pCodKSjLCR6Ru9dgUpwB65gNwH6AVEmmxVet
oXVsotHTMEghLAp5FBpMNF+s7olt7g19fq8VHnuhRRGkmQIDAQABo4HEMIHBMB0G
A1UdDgQWBBS/o4cs9g10vUhsDie/AeTyT0a6JzCBkQYDVR0jBIGJMIGGgBS/o4cs
9g10vUhsDie/AeTyT0a6J6FrpGkwZzELMAkGA1UEBhMCVVMxDTALBgNVBAoTBFNE
U0MxEDAOBgNVBAsTB1NEU0MtQ0ExHjAcBgNVBAMTFUNlcnRpZmljYXRlIEF1dGhv
cml0eTEXMBUGCgmSJomT8ixkAQETB2NlcnRtYW6CAQAwDAYDVR0TBAUwAwEB/zAN
BgkqhkiG9w0BAQQFAAOCAQEAWExIzttzYctC98r6ZC6h2uXPbyo9bvaU0fxtBrDF
prD23yq8WXClIzKbOxBpRETr1kkeQbzX2R5quFLTTMd6GNqP+I28sklM9FUCLqKV
DD75UjTqa0AVPgbNdRUECrm2wXXWTVpNIzTgX1M/uVX3yyQRHyi5gj7pqsESOTZ1
0xyOx4YnpCjrG9HCWIp0wjigWGw8I/GXe0UEPbAJTcPY844Z7E/PfyZuwcdYQSZF
L030oKjrlWbKm/vGywbqt5QahKM1J60Z6WyIh7VeJV4YuvsP3bT0Sd4FXzmnhybq
ca98K+/TyIvcWUgD/BGv4XYaUTOYWQRWOZGRSgGfwRq0FQ==
-----END CERTIFICATE-----


</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026456.html">[rabbitmq-discuss] Issue with specifying custom vhost and port	in federation URI.
</A></li>
	<LI>Next message: <A HREF="026453.html">[rabbitmq-discuss] error parsing DN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26452">[ date ]</a>
              <a href="thread.html#26452">[ thread ]</a>
              <a href="subject.html#26452">[ subject ]</a>
              <a href="author.html#26452">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
