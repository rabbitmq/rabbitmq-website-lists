<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Queues memory leak?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Queues%20memory%20leak%3F&In-Reply-To=%3CCAHWt7w1K8oznU%3D_%2BWNiULEdRMgLf3vXvvdoTi0NCssTGcsqJgQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026285.html">
   <LINK REL="Next"  HREF="026287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Queues memory leak?</H1>
    <B>Dmitry Saprykin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Queues%20memory%20leak%3F&In-Reply-To=%3CCAHWt7w1K8oznU%3D_%2BWNiULEdRMgLf3vXvvdoTi0NCssTGcsqJgQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Queues memory leak?">saprykin.dmitry at gmail.com
       </A><BR>
    <I>Mon Apr  1 17:03:57 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026285.html">[rabbitmq-discuss] RabbitMQ and AMQP
</A></li>
        <LI>Next message: <A HREF="026287.html">[rabbitmq-discuss] RabbitMQ Queues memory leak?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26286">[ date ]</a>
              <a href="thread.html#26286">[ thread ]</a>
              <a href="subject.html#26286">[ subject ]</a>
              <a href="author.html#26286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have durable persistent queue which is mirrored between 2 nodes.
Nodes live on separate hosts.
Clients publish about 400 messages per second which is received and acked
by 60 consumers.
So queue is almost empty all the time.

Meanwhile management plugin shows steady grows of memory consumption by
Queues on master node. (~1Mb per minute)

rabbitmqctl stop_app &amp;&amp; rabbitmqctl start_app solves the problem temporary.

I have tried to set {queue_index_max_journal_entries, 65536} instead
of 262144 it does not change anything.

RabbitMQ version is 3.0.4
Erlang version R14B04

What am I missing here? Or should I schedule stop_app &amp;&amp; start_app to free
Queues memory?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130401/cf8724d7/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130401/cf8724d7/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026285.html">[rabbitmq-discuss] RabbitMQ and AMQP
</A></li>
	<LI>Next message: <A HREF="026287.html">[rabbitmq-discuss] RabbitMQ Queues memory leak?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26286">[ date ]</a>
              <a href="thread.html#26286">[ thread ]</a>
              <a href="subject.html#26286">[ subject ]</a>
              <a href="author.html#26286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
