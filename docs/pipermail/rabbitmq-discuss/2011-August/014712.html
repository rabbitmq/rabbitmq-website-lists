<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management Plugin stops gathering stats ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20Plugin%20stops%20gathering%20stats%20%3F&In-Reply-To=%3CCAHiEoM5FNKFBGTPiL1MU-B0qQdwwnqFJ7j3KMYe0y1E9H-aOUg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014711.html">
   <LINK REL="Next"  HREF="014713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management Plugin stops gathering stats ?</H1>
    <B>Aaron Westendorf</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20Plugin%20stops%20gathering%20stats%20%3F&In-Reply-To=%3CCAHiEoM5FNKFBGTPiL1MU-B0qQdwwnqFJ7j3KMYe0y1E9H-aOUg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Management Plugin stops gathering stats ?">aaron at agoragames.com
       </A><BR>
    <I>Tue Aug 23 20:54:07 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014711.html">[rabbitmq-discuss] Management Plugin stops gathering stats ?
</A></li>
        <LI>Next message: <A HREF="014713.html">[rabbitmq-discuss] Management Plugin stops gathering stats ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14712">[ date ]</a>
              <a href="thread.html#14712">[ thread ]</a>
              <a href="subject.html#14712">[ subject ]</a>
              <a href="author.html#14712">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When we load tested on 2.4 we found that the collector plugin grew in
memory until rabbit was OOMkilled. Even though it was on a separate
cluster node, the problem was repeatable and so we dropped it use.

Are you seeing this on the reporting nodes, or collector node?

-Aaron


On Mon, Aug 22, 2011 at 1:31 PM, Rene Parra &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rparra at homeaway.com</A>&gt; wrote:
&gt;<i> Hi everyone...
</I>&gt;<i>
</I>&gt;<i> I&#8217;ve been performing a load/soak test on RabbitMQ before we promote our
</I>&gt;<i> configuration into production, and have run into a little bit of a snag.
</I>&gt;<i>
</I>&gt;<i> The Management Plugin seems to gather statistics on the test just fine, but
</I>&gt;<i> after about ~6min to about ~12min into the soak test, the management plugin
</I>&gt;<i> seems to &#160;STOP collecting stats on my queues!! &#160;Thereafter, the throughput
</I>&gt;<i> seemingly (but falsely) goes to zero. The test is actually proceeding just
</I>&gt;<i> fine and queues are happily receiving, delivering, and receiving acks for
</I>&gt;<i> their messages.
</I>&gt;<i>
</I>&gt;<i> Restarting the disk node seems to clear the management plugin to resume
</I>&gt;<i> collecting statistics.
</I>&gt;<i>
</I>&gt;<i> My question is: Is there some upper threshold in the management plugin that
</I>&gt;<i> I need to set to continue gathering statistics throughout my test ? &#160;This
</I>&gt;<i> feels like a classic &#8220;invisible threshold being hit somewhere&#8221; problem.
</I>&gt;<i>
</I>&gt;<i> Here&#8217;s a snapshot of the management UI screen working as expected:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://i.imgur.com/8eXNM.png">http://i.imgur.com/8eXNM.png</A>
</I>&gt;<i>
</I>&gt;<i> Here&#8217;s a ScreenCast of the management UI working and then &#8220;FAILS&#8221;:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://goo.gl/jrvAP">http://goo.gl/jrvAP</A>
</I>&gt;<i>
</I>&gt;<i> (please fast forward to these time points in the screencast)
</I>&gt;<i>
</I>&gt;<i> @2m 16s: &#160;The system runs normally and then I demo the queues stats
</I>&gt;<i> collection working perfectly.
</I>&gt;<i> @2m 56s: &#160;Connection View shows normal operating behavior.
</I>&gt;<i> @3m 34s: &#160;The &#8220;weird behavior&#8221; begins... it seems that TPS drops off to 30
</I>&gt;<i> TPS then 0 TPS!!
</I>&gt;<i> @4m 22s: &#160;Connection View showing throughput has &#8220;stopped&#8221;.
</I>&gt;<i>
</I>&gt;<i> External metric gathering confirms the test still &#8220;runs&#8221; and messages are
</I>&gt;<i> being delivered successfully.
</I>&gt;<i>
</I>&gt;<i> Has anyone else experienced this weirdness with the mgmt plugin?
</I>&gt;<i>
</I>&gt;<i> Any help would be greatly appreciated.
</I>&gt;<i> -rparra
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Aaron Westendorf
Senior Software Engineer
Agora Games
359 Broadway
Troy, NY 12180
Phone: 518.268.1000
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aaron at agoragames.com</A>
www.agoragames.com
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014711.html">[rabbitmq-discuss] Management Plugin stops gathering stats ?
</A></li>
	<LI>Next message: <A HREF="014713.html">[rabbitmq-discuss] Management Plugin stops gathering stats ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14712">[ date ]</a>
              <a href="thread.html#14712">[ thread ]</a>
              <a href="subject.html#14712">[ subject ]</a>
              <a href="author.html#14712">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
