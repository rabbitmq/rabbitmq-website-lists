<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unable to start RabbitMQ server after crash because of vm_memory_high_watermark alarm.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20start%20RabbitMQ%20server%20after%20crash%0A%20because%20of%20vm_memory_high_watermark%20alarm.&In-Reply-To=%3Ca5bd0a65-42f3-4112-b9d8-6f54d1a9e61b%40v9g2000pri.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014641.html">
   <LINK REL="Next"  HREF="014709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unable to start RabbitMQ server after crash because of vm_memory_high_watermark alarm.</H1>
    <B>ChrisStoyles</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20start%20RabbitMQ%20server%20after%20crash%0A%20because%20of%20vm_memory_high_watermark%20alarm.&In-Reply-To=%3Ca5bd0a65-42f3-4112-b9d8-6f54d1a9e61b%40v9g2000pri.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Unable to start RabbitMQ server after crash because of vm_memory_high_watermark alarm.">cstoyles at gmail.com
       </A><BR>
    <I>Mon Aug 22 01:08:39 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014641.html">[rabbitmq-discuss] rabbitmq
</A></li>
        <LI>Next message: <A HREF="014709.html">[rabbitmq-discuss] Unable to start RabbitMQ server after crash because of vm_memory_high_watermark alarm.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14656">[ date ]</a>
              <a href="thread.html#14656">[ thread ]</a>
              <a href="subject.html#14656">[ subject ]</a>
              <a href="author.html#14656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I need some advice on moving /var/lib/rabbitmq to a new server with
more RAM. What has happened is that on our 8GB RAM server we've had a
surge in activity and one of our queues has grown much faster than it
can be consumed by our &quot;workers&quot;.

This has resulted in RabbitMQ crashing, with an erl_crash.dump file
appearing.

At present when I attempt to start the server up again, it tries to
roll the persister.LOG file and recover what was in the queue at the
time of the crash. However even with rabbitmq.config set up as below,
the vm_memory_high_watermark alarm is triggered and erl_crash.dump is
created all over again.

[
  {rabbit, [{vm_memory_high_watermark, 0.9}]}
].

I've got another server with 24GB of RAM, so I set it's HOSTNAME to
the same as the 8GB server and installed the same version of RabbitMQ.
I then copied over the contents of /var/lib/rabbitmq and attempted to
start RabbitMQ. I no longer hit the vm_memory_high_watermark however
Erlang seems to close/shutdown while attempting to recover
persister.LOG.

Is there a step I am missing?

Thank You.
Chris.
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014641.html">[rabbitmq-discuss] rabbitmq
</A></li>
	<LI>Next message: <A HREF="014709.html">[rabbitmq-discuss] Unable to start RabbitMQ server after crash because of vm_memory_high_watermark alarm.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14656">[ date ]</a>
              <a href="thread.html#14656">[ thread ]</a>
              <a href="subject.html#14656">[ subject ]</a>
              <a href="author.html#14656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
