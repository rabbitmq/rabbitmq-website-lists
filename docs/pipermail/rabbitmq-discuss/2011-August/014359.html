<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and Spring
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20Spring&In-Reply-To=%3C27D6B27DB616654BBEF4DDB8B31EAF916B590E9528%40vs-msx01.IT-NG.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014345.html">
   <LINK REL="Next"  HREF="014362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and Spring</H1>
    <B>Arno Puschmann</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20Spring&In-Reply-To=%3C27D6B27DB616654BBEF4DDB8B31EAF916B590E9528%40vs-msx01.IT-NG.local%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and Spring">arno.puschmann at acodeas.de
       </A><BR>
    <I>Fri Aug  5 08:51:33 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014345.html">[rabbitmq-discuss] RabbitMQ and Spring
</A></li>
        <LI>Next message: <A HREF="014362.html">[rabbitmq-discuss] RabbitMQ and Spring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14359">[ date ]</a>
              <a href="thread.html#14359">[ thread ]</a>
              <a href="subject.html#14359">[ subject ]</a>
              <a href="author.html#14359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Can you be more specific?
</I>
I use this Code 

			template.setExchange(&quot;exchange&quot;);
			template.setQueue(&quot;someQueue&quot;);
			template.setRoutingKey(&quot;someQueue&quot;);
			Message response = template.sendAndReceive(&quot;exchange&quot;, &quot;anotherQueue&quot; , message);

Because I couldn't find any manual about template.sendAndReceive, I believe that the message is written on the Queue which is set through the parameters and Messages are read from the Queue which is set Default through template.setQueue and template.setExchange. 

After this my response is Null, although there is a message on the Queue.

During the Receive I get this Error on my Management Plugin

Got response code 500 with body {&quot;error&quot;:&quot;JSON encode error: {bad_term,&lt;0.6351.1&gt;}&quot;,&quot;reason&quot;:&quot;While encoding:\n[[{memory,4128},\n {owner_pid_details,[{name,&lt;&lt;\&quot;127.0.0.1:46088\&quot;&gt;&gt;},\n {peer_address,&lt;&lt;\&quot;127.0.0.1\&quot;&gt;&gt;},\n {peer_port,46088}]},\n {idle_since,&lt;&lt;\&quot;2011-8-5 9:20:6\&quot;&gt;&gt;},\n {exclusive_consumer_pid,&lt;0.6351.1&gt;},\n {exclusive_consumer_tag,&lt;&lt;\&quot;c4df9e97-a433-4011-8287-723181e0b0af\&quot;&gt;&gt;},\n {messages_ready,0},\n {messages_unacknowledged,0},\n {messages,0},\n {consumers,1},\n {backing_queue_status,{struct,[{q1,0},\n {q2,0},\n {delta,[delta,undefined,0,undefined]},\n {q3,0},\n {q4,0},\n {len,0},\n {pending_acks,0},\n {outstanding_txns,0},\n {target_ram_count,infinity},\n {ram_msg_count,0},\n {ram_ack_count,0},\n {ram_index_count,0},\n {next_seq_id,0},\n {persistent_count,0},\n {avg_ingress_rate,0.0},\n {avg_egress_rate,0.0},\n {avg_ack_ingress_rate,0.0},\n {avg_ack_egress_rate,0.0}]}},\n {name,&lt;&lt;\&quot;amq.gen-hBMby7Fm+ry0WBI3SZVelA==\&quot;&gt;&gt;},\n {vhost,&lt;&lt;\&quot;/\&quot;&gt;&gt;},\n {durable,false},\n {auto_delete,true},\n {arguments,{struct,[]}},\n {node,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at apuschmann-laptop</A>'}],\n [{memory,34072},\n {idle_since,&lt;&lt;\&quot;2011-8-5 9:20:7\&quot;&gt;&gt;},\n {exclusive_consumer_pid,''},\n {exclusive_consumer_tag,''},\n {messages_ready,3},\n {messages_unacknowledged,0},\n {messages,3},\n {consumers,0},\n {backing_queue_status,{struct,[{q1,0},\n {q2,0},\n {delta,[delta,0,0,0]},\n {q3,0},\n {q4,3},\n {len,3},\n {pending_acks,0},\n {outstanding_txns,0},\n {target_ram_count,infinity},\n {ram_msg_count,3},\n {ram_ack_count,0},\n {ram_index_count,0},\n {next_seq_id,4},\n {persistent_count,3},\n {avg_ingress_rate,0.0040401263408916714},\n {avg_egress_rate,0.0},\n {avg_ack_ingress_rate,0.0},\n {avg_ack_egress_rate,0.0}]}},\n {message_stats,[{publish,1}]},\n {name,&lt;&lt;\&quot;bla\&quot;&gt;&gt;},\n {vhost,&lt;&lt;\&quot;/\&quot;&gt;&gt;},\n {durable,true},\n {auto_delete,false},\n {arguments,{struct,[]}},\n {node,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at apuschmann-laptop</A>'}],\n [{memory,6352},\n {idle_since,&lt;&lt;\&quot;2011-8-5 9:13:4\&quot;&gt;&gt;},\n {exclusive_consumer_pid,''},\n {exclusive_consumer_tag,''},\n {messages_ready,1},\n {messages_unacknowledged,0},\n {messages,1},\n {consumers,0},\n {backing_queue_status,{struct,[{q1,0},\n {q2,0},\n {delta,[delta,0,0,0]},\n {q3,0},\n {q4,1},\n {len,1},\n {pending_acks,0},\n {outstanding_txns,0},\n {target_ram_count,infinity},\n {ram_msg_count,1},\n {ram_ack_count,0},\n {ram_index_count,0},\n {next_seq_id,5},\n {persistent_count,0},\n {avg_ingress_rate,0.0},\n {avg_egress_rate,0.0531915006790427},\n {avg_ack_ingress_rate,0.0},\n {avg_ack_egress_rate,0.0}]}},\n {name,&lt;&lt;\&quot;blub\&quot;&gt;&gt;},\n ............and so on........

After a Refresh this error is gone.
The Message is written on the Queue but, the other Message isn't read.

On the same Queues with template.send and template.receive it works fine.

&gt;<i> If you use SpringSource ToolSuite it
</I>&gt;<i>should work (but you might need to use an explicit version number in
</I>&gt;<i>your schema declaration - i.e. */spring-rabbit-1.0.xsd).
</I>
Im using SpringSource ToolSuite with the decleration 

<A HREF="http://www.springframework.org/schema/rabbit">http://www.springframework.org/schema/rabbit</A> <A HREF="http://www.springframework.org/schema/rabbit/spring-rabbit-1.0.xsd&quot;">http://www.springframework.org/schema/rabbit/spring-rabbit-1.0.xsd&quot;</A>&gt;

but the same behaviour.

Thanks again.
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014345.html">[rabbitmq-discuss] RabbitMQ and Spring
</A></li>
	<LI>Next message: <A HREF="014362.html">[rabbitmq-discuss] RabbitMQ and Spring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14359">[ date ]</a>
              <a href="thread.html#14359">[ thread ]</a>
              <a href="subject.html#14359">[ subject ]</a>
              <a href="author.html#14359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
