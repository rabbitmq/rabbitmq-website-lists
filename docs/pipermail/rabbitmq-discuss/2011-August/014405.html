<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20facing%20issues%20with%20the%20SSL%20implementations%0A%20with%20RabbitMQ%20%2B%20Windows%20%2B%20.Net&In-Reply-To=%3C20110809102426.GA3214%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014594.html">
   <LINK REL="Next"  HREF="014407.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20facing%20issues%20with%20the%20SSL%20implementations%0A%20with%20RabbitMQ%20%2B%20Windows%20%2B%20.Net&In-Reply-To=%3C20110809102426.GA3214%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net">alexandru at rabbitmq.com
       </A><BR>
    <I>Tue Aug  9 11:24:26 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014594.html">[rabbitmq-discuss] Issues starting RabbitMQ 2.5.1 on Ubuntu 10.04
</A></li>
        <LI>Next message: <A HREF="014407.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14405">[ date ]</a>
              <a href="thread.html#14405">[ thread ]</a>
              <a href="subject.html#14405">[ subject ]</a>
              <a href="author.html#14405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Abhijit,

&gt;<i> Thanks for the reply, i had tried with those escape sequences in the 
</I>&gt;<i> config earlier but without any success. i haven't used that dot in the 
</I>&gt;<i> config , but tried that now and also restarted the rabbitMQ server 
</I>&gt;<i> before running my application. But the application failed. Am posting 
</I>&gt;<i> all the broker log's content and full stack trace from the .Net Client.
</I>
Great.

&gt;<i> Am getting the error, the moment am writing the code Ssl.Enabled = true; 
</I>&gt;<i> else the connection is working fine.
</I>
Unless you use Ssl.Enabled = true, the client will just use a normal
(non-SSL) connection.

&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; Limiting to approx 924 file handles (829 sockets)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; Memory limit set to 804MB.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; msg_store_transient: using rabbit_msg_store_ets_index to provide index
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; msg_store_persistent: using rabbit_msg_store_ets_index to provide index
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; started TCP Listener on [::]:5672
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; started TCP Listener on 0.0.0.0:5672
</I>
If that's the entire log, then the SSL listener isn't started.  The SSL
Listener is started by the {ssl_listeners, [{&quot;0.0.0.0&quot;,5671}]} entry.
It will start even if the other ssl_options are wrong or missing (so the
paths don't matter for this, at least).  When started, the next lines in
the log should be:

 =INFO REPORT==== 9-Aug-2011::10:38:08 ===
 started SSL Listener on 0.0.0.0:5671

Thinking about it, since you didn't get an error earlier when you forgot
the dot, I suspect rabbit isn't using the configuration file you wrote.

If you're using the default configuration (i.e. if you downloaded the
installer and are using the service), the configuration file should be
C:\Users\Administrator\AppData\Roaming\RabbitMQ\rabbitmq.config.  Is
that what you're editing?

You can also run the C:\Program Files\RabbitMQ
Server\rabbitmq-server-2.5.1\sbin\rabbitmq-server.bat from a console to
get slightly more detailed output.

Cheers,
Alex

On Tue, Aug 09, 2011 at 12:20:48PM +0530, Abhijit wrote:
&gt;<i> Hi Sir,
</I>&gt;<i> 
</I>&gt;<i> Thanks for the reply, i had tried with those escape sequences in the 
</I>&gt;<i> config earlier but without any success. i haven't used that dot in the 
</I>&gt;<i> config , but tried that now and also restarted the rabbitMQ server 
</I>&gt;<i> before running my application. But the application failed. Am posting 
</I>&gt;<i> all the broker log's content and full stack trace from the .Net Client.
</I>&gt;<i> 
</I>&gt;<i> Am getting the error, the moment am writing the code Ssl.Enabled = true; 
</I>&gt;<i> else the connection is working fine.
</I>&gt;<i> 
</I>&gt;<i> _Exception Details and Stack-trace :_
</I>&gt;<i> 
</I>&gt;<i> &gt; Exception Message: None of the specified endpoints were reachable
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Source: RabbitMQ.Client
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Stacktrace: at 
</I>&gt;<i> &gt; RabbitMQ.Client.ConnectionFactory.CreateConnection(Int32 maxRedirects)
</I>&gt;<i> &gt;                    at RabbitMQ.Client.ConnectionFactory.CreateConnection()
</I>&gt;<i> &gt;                    at RabbitProducer.Program.Main(String[] args) in 
</I>&gt;<i> &gt; C:\Users\pc 1\Documents\Visual Studio 
</I>&gt;<i> &gt; 2008\Projects\RabbitProducer\RabbitProducer\Program.cs:line 36
</I>&gt;<i> 
</I>&gt;<i> Brokers Log :
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; Limiting to approx 924 file handles (829 sockets)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; Memory limit set to 804MB.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; msg_store_transient: using rabbit_msg_store_ets_index to provide index
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; msg_store_persistent: using rabbit_msg_store_ets_index to provide index
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; started TCP Listener on [::]:5672
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; =INFO REPORT==== 9-Aug-2011::11:39:05 ===
</I>&gt;<i> &gt; started TCP Listener on 0.0.0.0:5672
</I>&gt;<i> 
</I>&gt;<i> Thanks and Regards,
</I>&gt;<i> Abhijit
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 8/8/2011 8:31 PM, Alexandru Scvor&#355;ov wrote:
</I>&gt;<i> &gt; Hello Abhijit,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Could you please also post the broker log and the full stacktrace from
</I>&gt;<i> &gt; the .NET client?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In the meantime, I suspect your config is wrong.  It should probably be:
</I>&gt;<i> &gt; [
</I>&gt;<i> &gt;   {rabbit, [
</I>&gt;<i> &gt; 	   {ssl_listeners, [{&quot;0.0.0.0&quot;,5671}]},
</I>&gt;<i> &gt; 	   {ssl_options,
</I>&gt;<i> &gt; 	   [{cacertfile,&quot;C:\\testca\\cacert.cer&quot;},
</I>&gt;<i> &gt; 	    {certfile,&quot;C:\\server\\cert.pem&quot;},
</I>&gt;<i> &gt; 	    {keyfile,&quot;C:\\server\\key.pem&quot;},
</I>&gt;<i> &gt; 	    {verify,verify_peer},
</I>&gt;<i> &gt; 	    {fail_if_no_peer_cert,false}]}
</I>&gt;<i> &gt; 	  ]}
</I>&gt;<i> &gt; ].
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (there should be a dot at the end of the file, ssl_listeners has the wrong
</I>&gt;<i> &gt; format, and the paths don't look properly escaped)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You can check the broker's log file to see if SSL is working or not as
</I>&gt;<i> &gt; suggested here:
</I>&gt;<i> &gt;    <A HREF="http://stackoverflow.com/questions/6978843/ssl-support-for-rabbit-net-windows">http://stackoverflow.com/questions/6978843/ssl-support-for-rabbit-net-windows</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; Alex
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Mon, Aug 08, 2011 at 07:39:19PM +0530, Abhijit wrote:
</I>&gt;<i> &gt;    
</I>&gt;<i> &gt;&gt; Hi,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; We had develop an application for the RabbitMQ both the publisher as
</I>&gt;<i> &gt;&gt; well as subscriber using the fanout exchange, which is working fine. But
</I>&gt;<i> &gt;&gt; now we want to implement the ssl with our publisher as well as
</I>&gt;<i> &gt;&gt; subscriber to provide traffic encryption. But haven't been able to
</I>&gt;<i> &gt;&gt; implement and getting it worked still, i have followed the steps as
</I>&gt;<i> &gt;&gt; provided in this link : <A HREF="_http://www.rabbitmq.com/ssl.html_.">_http://www.rabbitmq.com/ssl.html_.</A> I have
</I>&gt;<i> &gt;&gt; created the certificates as instructed in this blog, also i have
</I>&gt;<i> &gt;&gt; implemented the code for .net as provided. I have not been able to find
</I>&gt;<i> &gt;&gt; out does my code refers to the rabbitmq.config file which i have created
</I>&gt;<i> &gt;&gt; as per the rabbitmq blog and placed it in the appdata/rabbitMQ as for
</I>&gt;<i> &gt;&gt; windows. But am not sure is this being referred,
</I>&gt;<i> &gt;&gt; the config file:
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt;&gt;&gt; [
</I>&gt;<i> &gt;&gt;&gt;    {rabbit, [
</I>&gt;<i> &gt;&gt;&gt;       {ssl_listeners, [5671]},
</I>&gt;<i> &gt;&gt;&gt;       {ssl_options, [{cacertfile,&quot;C:\testca/cacert.cer&quot;},
</I>&gt;<i> &gt;&gt;&gt;                      {certfile,&quot;C:\server/cert.pem&quot;},
</I>&gt;<i> &gt;&gt;&gt;                      {keyfile,&quot;C:\server/key.pem&quot;},
</I>&gt;<i> &gt;&gt;&gt;                      {verify,verify_peer},
</I>&gt;<i> &gt;&gt;&gt;                      {fail_if_no_peer_cert,false}]}
</I>&gt;<i> &gt;&gt;&gt;     ]}
</I>&gt;<i> &gt;&gt;&gt; ]
</I>&gt;<i> &gt;&gt;&gt;        
</I>&gt;<i> &gt;&gt; we are using the rabbitMQ Service with the latest version of 2.5.1,
</I>&gt;<i> &gt;&gt; Erlang R14B02 and on .Net on Windows. Am i missing something or do we
</I>&gt;<i> &gt;&gt; need something extra for running on .net and windows.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks and Regards,
</I>&gt;<i> &gt;&gt; Abhijit
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt;    
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt;    
</I>&gt;<i> 
</I></PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014594.html">[rabbitmq-discuss] Issues starting RabbitMQ 2.5.1 on Ubuntu 10.04
</A></li>
	<LI>Next message: <A HREF="014407.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14405">[ date ]</a>
              <a href="thread.html#14405">[ thread ]</a>
              <a href="subject.html#14405">[ subject ]</a>
              <a href="author.html#14405">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
