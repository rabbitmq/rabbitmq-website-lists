<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Error Creating cluster in RabbitMQ on EC2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Error%20Creating%20cluster%20in%20RabbitMQ%20on%20EC2&In-Reply-To=%3CCABzX%2BqzTxZhic_MNNxGB4Y76yGt2_1au54S_t%2Br7j88N8QZKZA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014386.html">
   <LINK REL="Next"  HREF="014367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Error Creating cluster in RabbitMQ on EC2</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Error%20Creating%20cluster%20in%20RabbitMQ%20on%20EC2&In-Reply-To=%3CCABzX%2BqzTxZhic_MNNxGB4Y76yGt2_1au54S_t%2Br7j88N8QZKZA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Error Creating cluster in RabbitMQ on EC2">majek04 at gmail.com
       </A><BR>
    <I>Mon Aug  8 11:57:30 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014386.html">[rabbitmq-discuss] Error Creating cluster in RabbitMQ on EC2
</A></li>
        <LI>Next message: <A HREF="014367.html">[rabbitmq-discuss] Inconsistent log rotation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14387">[ date ]</a>
              <a href="thread.html#14387">[ thread ]</a>
              <a href="subject.html#14387">[ subject ]</a>
              <a href="author.html#14387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 8, 2011 at 11:39, News Aanad &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">news.anand11 at gmail.com</A>&gt; wrote:
&gt;<i> Thanks for reply Marek Majkowski,
</I>&gt;<i> &#160;&#160;&#160; I have tried with that by setting up the port in erlang with command
</I>&gt;<i>
</I>&gt;<i>         application:set_env(kernel, inet_dist_listen_min, 9100).
</I>&gt;<i> 	application:set_env(kernel, inet_dist_listen_max, 9105).
</I>&gt;<i>
</I>&gt;<i> and I have also open the port 9100-9105 and also open the port 4369.
</I>&gt;<i> But when I am checking&#160; connectivity&#160; by command
</I>&gt;<i> net_adm:ping(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">nodename at host</A>).&#160; it gives me repies me as &quot;pang&quot;
</I>&gt;<i> Now I am confused that what should be the problem.
</I>&gt;<i> Is it mendatory to set it over both the EC2 Instance?
</I>
RabbitMQ clustering is based on Erlang clustering. If you want to setup
a rabbitmq cluster, you should make sure that the firewall is properly
configured and that erlang clustering indeed works.

I propose that before you try to cluster rabbits, you should try
to set up the most straightforward erlang cluster, to prove
that the firewall and settings are correct.

One of the options to play with it is by using erlang interperter.

Actually I misled you, running erlang interpreter without any options
won't work,
you must set a cookie, make sure that the inet_dist_listen_min/max settings
are correct.

There is plenty of resources about erlang clustering available online.

Cheers,
  Marek

&gt;<i> On Mon, Aug 8, 2011 at 3:34 PM, Marek Majkowski &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sat, Aug 6, 2011 at 06:40, News Aanad &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">news.anand11 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; I have opened all the prot required for rabbitmq clustering i.e.
</I>&gt;&gt;<i> &gt; 5672,4369.
</I>&gt;&gt;<i> &gt; I can also ping the host name of other AMI.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> And what about erlang vm port controlled via inet_dist_listen_min and
</I>&gt;&gt;<i> inet_dist_listen_max?
</I>&gt;&gt;<i> <A HREF="http://www.erlang.org/faq/how_do_i.html#id55256">http://www.erlang.org/faq/how_do_i.html#id55256</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To check if the connectivity is all right, open an erlang interpreter,
</I>&gt;&gt;<i> type
</I>&gt;&gt;<i> &gt; net_adm:ping(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">nodename at host</A>).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It should print 'pong', see the erlang docs:
</I>&gt;&gt;<i> <A HREF="http://www.erlang.org/doc/man/net_adm.html#ping-1">http://www.erlang.org/doc/man/net_adm.html#ping-1</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> &#160; Marek
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; On Fri, Aug 5, 2011 at 7:59 PM, Marek Majkowski &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt;
</I>&gt;&gt;<i> &gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; On Fri, Aug 5, 2011 at 11:11, News Aanad &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">news.anand11 at gmail.com</A>&gt;
</I>&gt;&gt;<i> &gt;&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt; I want to create a cluster of RabbitMQ on EC2. I have created an AMI
</I>&gt;&gt;<i> &gt;&gt; &gt; of
</I>&gt;&gt;<i> &gt;&gt; &gt; Ubantu and install the rabbitmq-server-2.3.1 on it. I have also
</I>&gt;&gt;<i> &gt;&gt; &gt; installed
</I>&gt;&gt;<i> &gt;&gt; &gt; the management plugins for GUI. For cluster purpose I have also
</I>&gt;&gt;<i> &gt;&gt; &gt; copied
</I>&gt;&gt;<i> &gt;&gt; &gt; the
</I>&gt;&gt;<i> &gt;&gt; &gt; .erlang.cookie file in another node. My ploblem is when I am trying
</I>&gt;&gt;<i> &gt;&gt; &gt; to
</I>&gt;&gt;<i> &gt;&gt; &gt; connect with another node it gives me following error:
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Error: {failed_to_cluster_with,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-58-54-170</A>'], &quot;Mnesia
</I>&gt;&gt;<i> &gt;&gt; &gt; could
</I>&gt;&gt;<i> &gt;&gt; &gt; not
</I>&gt;&gt;<i> &gt;&gt; &gt; connect to some nodes.&quot;}
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Anybody has any idea why it is happening?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Isn't that a firewall issue?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Cheers,
</I>&gt;&gt;<i> &gt;&gt; &#160; Marek
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014386.html">[rabbitmq-discuss] Error Creating cluster in RabbitMQ on EC2
</A></li>
	<LI>Next message: <A HREF="014367.html">[rabbitmq-discuss] Inconsistent log rotation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14387">[ date ]</a>
              <a href="thread.html#14387">[ thread ]</a>
              <a href="subject.html#14387">[ subject ]</a>
              <a href="author.html#14387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
