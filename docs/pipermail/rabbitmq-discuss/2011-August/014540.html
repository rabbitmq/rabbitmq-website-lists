<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and Spring
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20Spring&In-Reply-To=%3C32263108.post%40talk.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014473.html">
   <LINK REL="Next"  HREF="014313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and Spring</H1>
    <B>Dave Syer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20Spring&In-Reply-To=%3C32263108.post%40talk.nabble.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and Spring">david_syer at hotmail.com
       </A><BR>
    <I>Mon Aug 15 10:18:30 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014473.html">[rabbitmq-discuss] RabbitMQ and Spring
</A></li>
        <LI>Next message: <A HREF="014313.html">[rabbitmq-discuss] RabbitMQ + CEP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14540">[ date ]</a>
              <a href="thread.html#14540">[ thread ]</a>
              <a href="subject.html#14540">[ subject ]</a>
              <a href="author.html#14540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>


Arno Puschmann wrote:
&gt;<i> 
</I>&gt;<i> But i can't explain why i get always null as a response.
</I>&gt;<i> 
</I>&gt;<i> template.setExchange(&quot;exchange&quot;); //direct and durable
</I>&gt;<i> template.setQueue(&quot;someQueue&quot;);
</I>&gt;<i> template.setRoutingKey(&quot;someQueue&quot;);
</I>&gt;<i> Message response = template.sendAndReceive(&quot;exchange&quot;, &quot;anotherQueue&quot; ,
</I>&gt;<i> message); 
</I>&gt;<i> 
</I>
I think you need to get down to basics with what the RabbitTemplate is doing
behind the scenes here.  Your expectations do not seem to match the
implementation.

In this code snippet, you first set the default exchange for sending
messages, and then use an explicit value in your call to sendAndReceive(),
so the first line is redundant.

In the third line you set the default routing key, and then don't use it, so
that line is redundant.

The second line does nothing because that sets the default queue for
receive() calls, which is not used by sendAndReceive().

So you have sent a message to an exchange called &quot;exchange&quot; with routing key
&quot;anotherQueue&quot;.  The message will have a reply-to header added by the
template which your consumer should respect.  If the consumer replies to the
correct address (it will be a temporary exclusive queue) then you will
receive the reply in your response variable.

I know the javadocs for RabbitTemplate are pretty thin.  You can read the
source code to work out all of the above, but please feel free to raise a
JIRA ticket to get the docs improved as well.  Thank you.
-- 
View this message in context: <A HREF="http://old.nabble.com/RabbitMQ-and-Spring-tp32137903p32263108.html">http://old.nabble.com/RabbitMQ-and-Spring-tp32137903p32263108.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014473.html">[rabbitmq-discuss] RabbitMQ and Spring
</A></li>
	<LI>Next message: <A HREF="014313.html">[rabbitmq-discuss] RabbitMQ + CEP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14540">[ date ]</a>
              <a href="thread.html#14540">[ thread ]</a>
              <a href="subject.html#14540">[ subject ]</a>
              <a href="author.html#14540">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
