<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ warrens
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20warrens&In-Reply-To=%3CCACOPnvcYgHHqzCntP-n3HQy-wyUuUfhfe-a6ycLGr74oqRkU3Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014443.html">
   <LINK REL="Next"  HREF="014445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ warrens</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20warrens&In-Reply-To=%3CCACOPnvcYgHHqzCntP-n3HQy-wyUuUfhfe-a6ycLGr74oqRkU3Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ warrens">alexis at rabbitmq.com
       </A><BR>
    <I>Tue Aug  9 22:57:07 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014443.html">[rabbitmq-discuss] RabbitMQ warrens
</A></li>
        <LI>Next message: <A HREF="014445.html">[rabbitmq-discuss] RabbitMQ warrens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14444">[ date ]</a>
              <a href="thread.html#14444">[ thread ]</a>
              <a href="subject.html#14444">[ subject ]</a>
              <a href="author.html#14444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Joe

I can't comment on the text of the book since it's not in front of me,
but have bcc'd the authors.

Re HA, I'll send you some draft docs offline.  It's imminent.

alexis


On Tue, Aug 9, 2011 at 10:54 PM, Joe Van Dyk &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">joevandyk at gmail.com</A>&gt; wrote:
&gt;<i> Hm -- that seems like it would work -- but the &quot;RabbitMQ In Action&quot;
</I>&gt;<i> seems to indicate that haproxy will only send traffic to the standby
</I>&gt;<i> if the master isn't up.
</I>&gt;<i>
</I>&gt;<i> Do you have any details/links about the active/active HA approach?
</I>&gt;<i>
</I>&gt;<i> On Tue, Aug 9, 2011 at 2:52 PM, Alexis Richardson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis at rabbitmq.com</A>&gt; wrote:
</I>&gt;&gt;<i> Joe,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The idea is to send two (or more) copies of the whole data stream to
</I>&gt;&gt;<i> the brokers, such that each copy shares the fate of a broker.
</I>&gt;&gt;<i> Therefore the death of a broker does not imply the death of a copy of
</I>&gt;&gt;<i> the stream.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But hang in there because &quot;active/active&quot; HA is looming and this will
</I>&gt;&gt;<i> go further than the 'warren' approach..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> alexis
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, Aug 9, 2011 at 5:17 PM, Joe Van Dyk &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">joevandyk at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> The Manning RabbitMQ In Action book states:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &quot;Now if what we really need is absolute &quot;high availability&quot; with no
</I>&gt;&gt;&gt;<i> possibilities of message loss we can build a &quot;warren&quot; using two
</I>&gt;&gt;&gt;<i> standalone RabbitMQ servers with a load balancer making them appear as
</I>&gt;&gt;&gt;<i> one to our applications.&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> A &quot;warren&quot; is two unconnected rabbitmq instances with a load balancer
</I>&gt;&gt;&gt;<i> in front -- one rabbitmq is the master and the other is the standby.
</I>&gt;&gt;&gt;<i> If the load balancer notices the master is down, it will send the
</I>&gt;&gt;&gt;<i> traffic to the standby one, using a config like:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> listen rabbitmq 0.0.0.0:5680
</I>&gt;&gt;&gt;<i> &#160;mode tcp
</I>&gt;&gt;&gt;<i> &#160;balance roundrobin
</I>&gt;&gt;&gt;<i> &#160;server master :5675 check inter 5000 rise 2 fall 3
</I>&gt;&gt;&gt;<i> &#160;server standby :5675 backup check inter 5000 rise 2 fall 3
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I don't get how this prevents message loss. &#160;If there's messages in
</I>&gt;&gt;&gt;<i> the master's queue and it goes down (hard drive explodes), those
</I>&gt;&gt;&gt;<i> messages are lost, right?
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I></PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014443.html">[rabbitmq-discuss] RabbitMQ warrens
</A></li>
	<LI>Next message: <A HREF="014445.html">[rabbitmq-discuss] RabbitMQ warrens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14444">[ date ]</a>
              <a href="thread.html#14444">[ thread ]</a>
              <a href="subject.html#14444">[ subject ]</a>
              <a href="author.html#14444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
