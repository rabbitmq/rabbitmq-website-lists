<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management Plugin stops gathering stats ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20Plugin%20stops%20gathering%20stats%20%3F&In-Reply-To=%3CCA77FCAF.E905%25rparra%40homeaway.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014684.html">
   <LINK REL="Next"  HREF="014697.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management Plugin stops gathering stats ?</H1>
    <B>Rene Parra</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20Plugin%20stops%20gathering%20stats%20%3F&In-Reply-To=%3CCA77FCAF.E905%25rparra%40homeaway.com%3E"
       TITLE="[rabbitmq-discuss] Management Plugin stops gathering stats ?">rparra at homeaway.com
       </A><BR>
    <I>Mon Aug 22 18:31:43 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014684.html">[rabbitmq-discuss] Temporary queue being made when task fails
</A></li>
        <LI>Next message: <A HREF="014697.html">[rabbitmq-discuss] Management Plugin stops gathering stats ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14691">[ date ]</a>
              <a href="thread.html#14691">[ thread ]</a>
              <a href="subject.html#14691">[ subject ]</a>
              <a href="author.html#14691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone...

I&#185;ve been performing a load/soak test on RabbitMQ before we promote our
configuration into production, and have run into a little bit of a snag.

The Management Plugin seems to gather statistics on the test just fine, but
after about ~6min to about ~12min into the soak test, the management plugin
seems to  STOP collecting stats on my queues!!  Thereafter, the throughput
seemingly (but falsely) goes to zero. The test is actually proceeding just
fine and queues are happily receiving, delivering, and receiving acks for
their messages.

Restarting the disk node seems to clear the management plugin to resume
collecting statistics.

My question is: Is there some upper threshold in the management plugin that
I need to set to continue gathering statistics throughout my test ?  This
feels like a classic &#179;invisible threshold being hit somewhere&#178; problem.

Here&#185;s a snapshot of the management UI screen working as expected:

<A HREF="http://i.imgur.com/8eXNM.png">http://i.imgur.com/8eXNM.png</A>

Here&#185;s a ScreenCast of the management UI working and then &#179;FAILS&#178;:

<A HREF="http://goo.gl/jrvAP">http://goo.gl/jrvAP</A>

(please fast forward to these time points in the screencast)

* @2m 16s:  The system runs normally and then I demo the queues stats
collection working perfectly.
* @2m 56s:  Connection View shows normal operating behavior.
* @3m 34s:  The &#179;weird behavior&#178; begins... it seems that TPS drops off to 30
TPS then 0 TPS!! 
* @4m 22s:  Connection View showing throughput has &#179;stopped&#178;.

External metric gathering confirms the test still &#179;runs&#178; and messages are
being delivered successfully.

Has anyone else experienced this weirdness with the mgmt plugin?

Any help would be greatly appreciated.
-rparra
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110822/63160ff1/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110822/63160ff1/attachment.htm</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014684.html">[rabbitmq-discuss] Temporary queue being made when task fails
</A></li>
	<LI>Next message: <A HREF="014697.html">[rabbitmq-discuss] Management Plugin stops gathering stats ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14691">[ date ]</a>
              <a href="thread.html#14691">[ thread ]</a>
              <a href="subject.html#14691">[ subject ]</a>
              <a href="author.html#14691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
