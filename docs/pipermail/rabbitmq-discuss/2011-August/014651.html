<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] STOMP &amp; ack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20%26%20ack&In-Reply-To=%3C20110822111913.c2e1.abe10f7e5afbbb3a79ce619739541149%40cern.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014702.html">
   <LINK REL="Next"  HREF="014655.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] STOMP &amp; ack</H1>
    <B>Lionel Cons</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20%26%20ack&In-Reply-To=%3C20110822111913.c2e1.abe10f7e5afbbb3a79ce619739541149%40cern.ch%3E"
       TITLE="[rabbitmq-discuss] STOMP &amp; ack">lionel.cons at cern.ch
       </A><BR>
    <I>Mon Aug 22 10:29:26 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014702.html">[rabbitmq-discuss] sinatra web server
</A></li>
        <LI>Next message: <A HREF="014655.html">[rabbitmq-discuss] STOMP &amp; ack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14651">[ date ]</a>
              <a href="thread.html#14651">[ thread ]</a>
              <a href="subject.html#14651">[ subject ]</a>
              <a href="author.html#14651">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to use client-side acknowledgment in STOMP and it seems
that RabbitMQ does not follow the STOMP 1.1 spec.

Here is what I tried:
 - p: send two messages to a queue
 - c: subscribe with ack:client to the queue but acks only the 2nd message

Unless I messed up my test, c only receives the first message and not
the second one.

The STOMP 1.1 spec [1] states that ack:client should be treated as
cumulative so the broker should send both messages, even if the first
one has not been ack'ed. Otherwise, there is no way the client can use
cumulative acks, ack'ing several messages with one ACK frame.

Is this indeed a bug?

Cheers,

Lionel

[1] <A HREF="http://stomp.github.com/stomp-specification-1.1.html#SUBSCRIBE_ack_Header">http://stomp.github.com/stomp-specification-1.1.html#SUBSCRIBE_ack_Header</A>
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014702.html">[rabbitmq-discuss] sinatra web server
</A></li>
	<LI>Next message: <A HREF="014655.html">[rabbitmq-discuss] STOMP &amp; ack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14651">[ date ]</a>
              <a href="thread.html#14651">[ thread ]</a>
              <a href="subject.html#14651">[ subject ]</a>
              <a href="author.html#14651">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
