<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Issues -&gt; Losing confidence in it.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Issues%20-%3E%20Losing%20confidence%20in%20it.&In-Reply-To=%3CCAGTBvKv%2BLDMh7TzO2LeuUviMv%3DfJGgQG-%2Bw2hix4D7-wZzqd%3DQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014331.html">
   <LINK REL="Next"  HREF="014306.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Issues -&gt; Losing confidence in it.</H1>
    <B>Abhishek K</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Issues%20-%3E%20Losing%20confidence%20in%20it.&In-Reply-To=%3CCAGTBvKv%2BLDMh7TzO2LeuUviMv%3DfJGgQG-%2Bw2hix4D7-wZzqd%3DQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Issues -&gt; Losing confidence in it.">abhishek.kona at gmail.com
       </A><BR>
    <I>Tue Aug  2 15:00:29 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014331.html">[rabbitmq-discuss] jspon rpc
</A></li>
        <LI>Next message: <A HREF="014306.html">[rabbitmq-discuss] RabbitMQ Issues -&gt; Losing confidence in it.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14297">[ date ]</a>
              <a href="thread.html#14297">[ thread ]</a>
              <a href="subject.html#14297">[ subject ]</a>
              <a href="author.html#14297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We have been running a single RabbitMQ instance for 6 months now (RabbitMQ
2.2).
Off late we observed RabbitMQ was consuming 11G of Memory when the entire
queue-size was about 7MB.
We decided to do a restart of RabbitMQ (thinking this was a memory leak).
On doing a restart of the APP we kept getting restart TIME-OUT without any
messages in the startup_{err,log).

We kept on retrying the restart and after 10minutes RabbitMQ restarted on
its own, without any message or log of what went wrong.

What was an expected down time of &lt;1min ended up being a down time of 10
min.
Also it forced our team to frantically set up RabbittMQ on a new machine
with all the queues and Exchanges (the original Rabbit came back up in the
meanwhile).

We are trying to analyze why this happened to us. Specifically answer the
following questions

   - Why was rabbitmq consuming high amounts of memory? Was it a memory
   leak? Is the memory leak fixed in the later version.
   - Why did rabbitMQ not restart immediately? Why was no message present in
   the log.
   - In situations like these how do we start a new rabbitmq instance
   automatically with all the queues and preferably data.
   - How do we upgrade to latest Rabbit without any data loss?

Any opinions and thoughts on this are welcome.

-Abhishek Kona
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110802/05857590/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110802/05857590/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014331.html">[rabbitmq-discuss] jspon rpc
</A></li>
	<LI>Next message: <A HREF="014306.html">[rabbitmq-discuss] RabbitMQ Issues -&gt; Losing confidence in it.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14297">[ date ]</a>
              <a href="thread.html#14297">[ thread ]</a>
              <a href="subject.html#14297">[ subject ]</a>
              <a href="author.html#14297">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
