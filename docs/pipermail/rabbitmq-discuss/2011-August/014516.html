<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] API aliveness test
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20API%20aliveness%20test&In-Reply-To=%3C4E44F6F6.1080002%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014505.html">
   <LINK REL="Next"  HREF="014531.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] API aliveness test</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20API%20aliveness%20test&In-Reply-To=%3C4E44F6F6.1080002%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] API aliveness test">simon at rabbitmq.com
       </A><BR>
    <I>Fri Aug 12 10:48:38 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014505.html">[rabbitmq-discuss] API aliveness test
</A></li>
        <LI>Next message: <A HREF="014531.html">[rabbitmq-discuss] API aliveness test
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14516">[ date ]</a>
              <a href="thread.html#14516">[ thread ]</a>
              <a href="subject.html#14516">[ subject ]</a>
              <a href="author.html#14516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/08/11 21:43, Jason J. W. Williams wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> The documentation for the API aliveness-test call
</I>&gt;<i> (/api/aliveness-test/&lt;vhost&gt;) defines the success result
</I>&gt;<i> ({&quot;status&quot;:&quot;ok&quot;}), but not the failure results. When I use
</I>&gt;<i> &quot;rabbitmqctl stop_app&quot; to simulate a failure, I get fairly ugly
</I>&gt;<i> traceback returned over HTTP (<A HREF="https://gist.github.com/1140707">https://gist.github.com/1140707</A>) that'll
</I>&gt;<i> crash the JSON parser. So should I just do a string match for
</I>&gt;<i> {&quot;status&quot;: &quot;ok&quot;} (or HTTP error code match) and consider any other
</I>&gt;<i> return a failure, or are there JSON-friendly error outputs as well?
</I>
No, no JSON-friendly error outputs. The reason being that you always 
have to allow for the possibility that *something* might go wrong that 
would prevent it from outputting properly formatted JSON. Or replying at 
all.

So for monitoring with this, I would just do the string match, and also 
have a timeout for whether it replies at all.

Actually, you could ignore the body and just check the HTTP status code, 
it won't return 200 OK unless things are good.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014505.html">[rabbitmq-discuss] API aliveness test
</A></li>
	<LI>Next message: <A HREF="014531.html">[rabbitmq-discuss] API aliveness test
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14516">[ date ]</a>
              <a href="thread.html#14516">[ thread ]</a>
              <a href="subject.html#14516">[ subject ]</a>
              <a href="author.html#14516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
