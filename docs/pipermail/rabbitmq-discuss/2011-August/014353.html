<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Channel error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channel%20error&In-Reply-To=%3C1312482274.33057.YahooMailNeo%40web111003.mail.gq1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014352.html">
   <LINK REL="Next"  HREF="014361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Channel error</H1>
    <B>Dave Greggory</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channel%20error&In-Reply-To=%3C1312482274.33057.YahooMailNeo%40web111003.mail.gq1.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] Channel error">davegreggory at yahoo.com
       </A><BR>
    <I>Thu Aug  4 19:24:34 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014352.html">[rabbitmq-discuss] Channel error
</A></li>
        <LI>Next message: <A HREF="014361.html">[rabbitmq-discuss] Channel error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14353">[ date ]</a>
              <a href="thread.html#14353">[ thread ]</a>
              <a href="subject.html#14353">[ subject ]</a>
              <a href="author.html#14353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I can confirm that error never happened on 2.0.0. Let me know if you need any other information. Can you tell me what this error means (does it mean a channel was closed by server? Does it affect producing channels or consuming channels?).



----- Original Message -----
From: Alexandru Scvor&#355;ov &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexandru at rabbitmq.com</A>&gt;
To: Dave Greggory &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">davegreggory at yahoo.com</A>&gt;
Cc: &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Sent: Thursday, August 4, 2011 1:51 PM
Subject: Re: [rabbitmq-discuss] Channel error

Hi,

We've had reports of similar errors to this (not exactly this one,
though).&#160; We have a bug open, but we haven't been able to
reproduce them.

As far as we know, it doesn't cause any problems on either the client or
the server; it's just annoying.

&gt;<i> Usage pattern -
</I>&gt;<i> 
</I>&gt;<i> 6 fanout exchanges used for publish/subscribe pattern with 56 exclusive, auto-deleting queues (total, not each) bound to them
</I>&gt;<i> 37 topic exchanges used for work queue pattern with 34 durable queues (total, not each) bound to them
</I>
Thanks for the info.&#160; We'll have another look at this issue soon.

&gt;<i> We upgraded to RabbitMQ 2.5.1 from 2.0.0 and have been running 2.5.1 in production for over month. 
</I>
I don't suppose you had the script running for 2.0.0 and can confirm
that the error doesn't happen there, right?

Cheers,
Alex

On Thu, Aug 04, 2011 at 10:40:06AM -0700, Dave Greggory wrote:
&gt;<i> We upgraded to RabbitMQ 2.5.1 from 2.0.0 and have been running 2.5.1 in production for over month. We have monitoring in on rabbitmq log that alerts us whenever there's any entries in those logs that we do not expect. Basically we look for lines that match following query. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Query Terms: 'host=rabbitmq* AND NOT
</I>&gt;<i> &quot;starting TCP connection&quot; AND NOT &quot;closing TCP connection&quot;
</I>&gt;<i> AND NOT &quot;accepted TCP connection&quot; AND NOT
</I>&gt;<i> &quot;connection_closed_abruptly&quot; AND NOT &quot;timeout,running&quot;' 
</I>&gt;<i> 
</I>&gt;<i> Several times within the last week or so, it alerted us with the following error in the SASL logs. Client functionality seems to be unaffected, but I'm curious to what this error means. Can anybody from the Rabbit team clarify?
</I>&gt;<i> 
</I>&gt;<i> =SUPERVISOR REPORT==== 3-Aug-2011::14:22:30 ===
</I>&gt;<i> &#160;&#160;&#160;&#160; Supervisor: {&lt;0.16968.672&gt;,
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; rabbit_channel_sup_sup}
</I>&gt;<i> &#160;&#160;&#160;&#160; Context:&#160;&#160;&#160; shutdown_error
</I>&gt;<i> &#160;&#160;&#160;&#160; Reason:&#160;&#160;&#160;&#160; shutdown
</I>&gt;<i> &#160;&#160;&#160;&#160; Offender:&#160;&#160; [{pid,&lt;0.20327.672&gt;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {name,channel_sup},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {mfa,{rabbit_channel_sup,start_link,[]}},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {restart_type,temporary},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {shutdown,infinity},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {child_type,supervisor}]
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Usage pattern -
</I>&gt;<i> 
</I>&gt;<i> 6 fanout exchanges used for publish/subscribe pattern with 56 exclusive, auto-deleting queues (total, not each) bound to them
</I>&gt;<i> 37 topic exchanges used for work queue pattern with 34 durable queues (total, not each) bound to them
</I>&gt;<i> 
</I>&gt;<i> At peak times we have less than 100 messages/sec going through RabbitMQ
</I>&gt;<i> Total connections = ~60-70 (2 connections each per app node, 1 for producing, 1 for consuming)
</I>&gt;<i> Heartbeat of 30 seconds enabled, no transactions used, work queue messages are persistent
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> RabbitMQ setup info -
</I>&gt;<i> 
</I>&gt;<i> [13:22:00 <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at rabbitmq1</A> /opt/rabbitmq_server/sbin] ./rabbitmqctl status
</I>&gt;<i> Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq1</A> ...
</I>&gt;<i> [{pid,3841},
</I>&gt;<i> &#160;{running_applications,
</I>&gt;<i> &#160;&#160;&#160;&#160; [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.5.1&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.5.1-hg0c4b60a&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.5.1&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.5.1&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {rabbit,&quot;RabbitMQ&quot;,&quot;2.5.1&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {os_mon,&quot;CPO&#160; CXC 138 46&quot;,&quot;2.2.5&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {sasl,&quot;SASL&#160; CXC 138 11&quot;,&quot;2.1.9&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.5.1&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq2.5.1-git9a53dbd&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {inets,&quot;INETS&#160; CXC 138 49&quot;,&quot;5.3&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {mnesia,&quot;MNESIA&#160; CXC 138 12&quot;,&quot;4.4.13&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {stdlib,&quot;ERTS&#160; CXC 138 10&quot;,&quot;1.16.5&quot;},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {kernel,&quot;ERTS&#160; CXC 138 10&quot;,&quot;2.13.5&quot;}]},
</I>&gt;<i> &#160;{os,{unix,linux}},
</I>&gt;<i> &#160;{erlang_version,
</I>&gt;<i> &#160;&#160;&#160;&#160; &quot;Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2] [async-threads:30] [hipe] [kernel-poll:true]\n&quot;},
</I>&gt;<i> &#160;{memory,
</I>&gt;<i> &#160;&#160;&#160;&#160; [{total,149009336},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {processes,82465760},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {processes_used,82358928},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {system,66543576},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {atom,1279561},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {atom_used,1275735},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {binary,5745136},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {code,15200224},
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160; {ets,7624288}]}]
</I>&gt;<i> ...done.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014352.html">[rabbitmq-discuss] Channel error
</A></li>
	<LI>Next message: <A HREF="014361.html">[rabbitmq-discuss] Channel error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14353">[ date ]</a>
              <a href="thread.html#14353">[ thread ]</a>
              <a href="subject.html#14353">[ subject ]</a>
              <a href="author.html#14353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
