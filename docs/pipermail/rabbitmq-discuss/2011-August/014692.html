<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Temporary queue being made when task fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Temporary%20queue%20being%20made%20when%20task%20fails&In-Reply-To=%3CCAH24rBMc24umzdmez0h_yOGZ5%2BxRRxaTo8QyEt1msxEOqDNZtA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014688.html">
   <LINK REL="Next"  HREF="014645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Temporary queue being made when task fails</H1>
    <B>Mark Steele</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Temporary%20queue%20being%20made%20when%20task%20fails&In-Reply-To=%3CCAH24rBMc24umzdmez0h_yOGZ5%2BxRRxaTo8QyEt1msxEOqDNZtA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Temporary queue being made when task fails">msteele at beringmedia.com
       </A><BR>
    <I>Mon Aug 22 18:47:13 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014688.html">[rabbitmq-discuss] Temporary queue being made when task fails
</A></li>
        <LI>Next message: <A HREF="014645.html">[rabbitmq-discuss] STOMP &amp; expiration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14692">[ date ]</a>
              <a href="thread.html#14692">[ thread ]</a>
              <a href="subject.html#14692">[ subject ]</a>
              <a href="author.html#14692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This was not in the context of celery. One of our applications creates
an auto_delete non-durable private queue and binds it to an exchange.
Every once in a while (let's call it once every quarter or so) we've
observed that if communication is broken (network issue, cable
unplugged, etc...) the client disconnects (and restarts), however the
queue remains there forever until manually deleted, accumulating
messages. To finally get it to be deleted, we have to do a
`rabbitmqctl close_connection` with the pid.

If I remember correctly, the server is aware that there is no clients
connected to the queue, however it doesn't delete it for some reason.
Next time it happens, I'll post more details. I suspect it's somehow
related to an unclean connection teardown and/or ssl.

Cheers,

Mark

On Mon, Aug 22, 2011 at 11:36 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:
&gt;<i> Mark,
</I>&gt;<i>
</I>&gt;<i> On 22/08/11 15:42, Mark Steele wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Incidentally, I have also seen this behavior (where autodelete queues
</I>&gt;&gt;<i> don't get deleted). I'm assuming it's a bug.
</I>&gt;<i>
</I>&gt;<i> Have you seen this in the context of celery or in general?
</I>&gt;<i>
</I>&gt;<i> I am not aware of any problems with auto-delete queues in Rabbit.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I></PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014688.html">[rabbitmq-discuss] Temporary queue being made when task fails
</A></li>
	<LI>Next message: <A HREF="014645.html">[rabbitmq-discuss] STOMP &amp; expiration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14692">[ date ]</a>
              <a href="thread.html#14692">[ thread ]</a>
              <a href="subject.html#14692">[ subject ]</a>
              <a href="author.html#14692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
