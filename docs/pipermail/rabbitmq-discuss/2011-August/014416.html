<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20facing%20issues%20with%20the%20SSL%20implementations%0A%20with%20RabbitMQ%20%2B%20Windows%20%2B%20.Net&In-Reply-To=%3C20110809124819.GB28785%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014415.html">
   <LINK REL="Next"  HREF="014417.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20facing%20issues%20with%20the%20SSL%20implementations%0A%20with%20RabbitMQ%20%2B%20Windows%20%2B%20.Net&In-Reply-To=%3C20110809124819.GB28785%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net">alexandru at rabbitmq.com
       </A><BR>
    <I>Tue Aug  9 13:48:19 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014415.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
        <LI>Next message: <A HREF="014417.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14416">[ date ]</a>
              <a href="thread.html#14416">[ thread ]</a>
              <a href="subject.html#14416">[ subject ]</a>
              <a href="author.html#14416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Am basically getting this error, i tried debugging and solved most of 
</I>&gt;<i> the problems but still getting this:
</I>
Oh, great. My guess about the really long error was that you needed some
clients to connect without providing certificates, but
fail_if_no_peer_cert was set to true in the config file.  Was that
right?

&gt;<i> &gt; [{amqp-0-<A HREF="9://localhost:5671}]">9://localhost:5671}]</A> = 
</I>&gt;<i> &gt; {System.Security.Authentication.AuthenticationException: A call to 
</I>&gt;<i> &gt; SSPI failed, see inner exception. ---&gt; 
</I>&gt;<i> &gt; System.ComponentModel.Win32Exception: The certificate chain was issued 
</I>&gt;<i> &gt; by an authority that is not trusted
</I>
I haven't seen that before.  Did you follow the steps in our SSL guide
to generate the certificate (in particular, were the client certificates
signed by the CA set in the broker)?

Alex

On Tue, Aug 09, 2011 at 06:08:19PM +0530, Abhijit wrote:
&gt;<i> hi sir,
</I>&gt;<i> 
</I>&gt;<i> Am basically getting this error, i tried debugging and solved most of 
</I>&gt;<i> the problems but still getting this:
</I>&gt;<i> 
</I>&gt;<i> &gt; [{amqp-0-<A HREF="9://localhost:5671}]">9://localhost:5671}]</A> = 
</I>&gt;<i> &gt; {System.Security.Authentication.AuthenticationException: A call to 
</I>&gt;<i> &gt; SSPI failed, see inner exception. ---&gt; 
</I>&gt;<i> &gt; System.ComponentModel.Win32Exception: The certificate chain was issued 
</I>&gt;<i> &gt; by an authority that is not trusted
</I>&gt;<i> &gt;    --- End of inner exception stack trace -...
</I>&gt;<i> 
</I>&gt;<i> Thanks and Regards,
</I>&gt;<i> Abhijit
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 8/9/2011 5:39 PM, Alexandru Scvor&#355;ov wrote:
</I>&gt;<i> &gt;&gt; i would go ahead for now, if any queries i would again seek your help.
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt; Excellent.  Don't hesitate to ask us any more questions.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Also, in the future, could you please make sure to CC the mailing list
</I>&gt;<i> &gt; when replying?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; Alex
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Tue, Aug 09, 2011 at 05:31:22PM +0530, Abhijit wrote:
</I>&gt;<i> &gt;    
</I>&gt;<i> &gt;&gt; hi sir,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; finally got this:
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt;&gt;&gt; =INFO REPORT==== 9-Aug-2011::17:28:33 ===
</I>&gt;<i> &gt;&gt;&gt; started TCP Listener on 0.0.0.0:5672
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; =INFO REPORT==== 9-Aug-2011::17:28:33 ===
</I>&gt;<i> &gt;&gt;&gt; started SSL Listener on 0.0.0.0:5671
</I>&gt;<i> &gt;&gt;&gt;        
</I>&gt;<i> &gt;&gt; your this step
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Could you copy the config file to &quot;...\AppData\Roaming\RabbitMQ.config&quot;
</I>&gt;<i> &gt;&gt; and try again
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; helped...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; i would go ahead for now, if any queries i would again seek your help.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks and Regards,
</I>&gt;<i> &gt;&gt; Abhijit
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 8/9/2011 5:20 PM, Alexandru Scvor&#355;ov wrote:
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt;&gt;&gt; That's a bit odd.  I'm not sure how that can happen.  It looks like you
</I>&gt;<i> &gt;&gt;&gt; somehow set the RABBITMQ_CONFIG_FILE variable at some point.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; The file is normally in:
</I>&gt;<i> &gt;&gt;&gt; ...\AppData\Roaming\RabbitMQ\rabbitmq.config
</I>&gt;<i> &gt;&gt;&gt; but your system is looking for it in:
</I>&gt;<i> &gt;&gt;&gt; ...\AppData\Roaming\RabbitMQ.config
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Could you copy the config file to &quot;...\AppData\Roaming\RabbitMQ.config&quot;
</I>&gt;<i> &gt;&gt;&gt; and try again?  Alternatively, unset the RABBITMQ_CONFIG_FILE variable
</I>&gt;<i> &gt;&gt;&gt; and try again without copying the file.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Cheers,
</I>&gt;<i> &gt;&gt;&gt; Alex
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On Tue, Aug 09, 2011 at 05:02:04PM +0530, Abhijit wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;        
</I>&gt;<i> &gt;&gt;&gt;&gt; I deleted the dot as you asked to and also wrote the line find which
</I>&gt;<i> &gt;&gt;&gt;&gt; config we are using, and found we are using the same config file and
</I>&gt;<i> &gt;&gt;&gt;&gt; also broker is running successfully without the dot. Am attaching the
</I>&gt;<i> &gt;&gt;&gt;&gt; print-screen for the command line output i received when i tried running
</I>&gt;<i> &gt;&gt;&gt;&gt; rabbit-mq server
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; thanks and regards,
</I>&gt;<i> &gt;&gt;&gt;&gt; Abhijit
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; On 8/9/2011 4:50 PM, Alexandru Scvor&#355;ov wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;          
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Ok.  Could you delete the dot at the end (or introduce some other
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; syntactic error) and try again?
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; If it still runs, it's using a different configuration file.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Could you also add the following line to the rabbitmq-server.bat file?
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;      echo CONFIG_FILE: !RABBITMQ_CONFIG_FILE!.config
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; It should go in towards the end, right before the &quot;!ERLANG_HOME!\bin\erl.exe&quot;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; line.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; That way, when you start the server manually with the .bat, we will know
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; which config file it's using.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Alex
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; On Tue, Aug 09, 2011 at 04:42:32PM +0530, Abhijit wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;            
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; hi sir,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; It didn't worked as we wanted...this are the last two phrases in the log
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; file of the broker.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;              
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; =INFO REPORT==== 9-Aug-2011::16:39:52 ===
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; started TCP Listener on [::]:5692
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; =INFO REPORT==== 9-Aug-2011::16:39:53 ===
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; started TCP Listener on 0.0.0.0:5692
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;                
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; i copied the rabbitmq.config which you sent me but didn't worked out.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Thanks and Regards,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Abhijit
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; On 8/9/2011 4:19 PM, Alexandru Scvor&#355;ov wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;              
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Am using the same path, C:\Users\Administrator\AppData\Roaming\RabbitMQ\rabbitmq.config for including ssl in my app.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;                  
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Ok.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;                
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; But the file wasn't present earlier i had created that file in order to have SSL in my app at the same location.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;                  
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; That's fine.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;                
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; i tried running the bat file for the rabbitmq-server that didn't help sir, do you need any part of code for inspection.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;                  
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; The code isn't the problem right now.  It's getting rabbit to enable
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; ssl.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; I'm attaching a rabbitmq.config.  Please try using that one.  Restart
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; the broker and the last lines in the broker log should be:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; =INFO REPORT==== 9-Aug-2011::11:44:37 ===
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; started TCP Listener on [::]:5672
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; =INFO REPORT==== 9-Aug-2011::11:44:37 ===
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; started SSL Listener on 0.0.0.0:5671
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Let me know how it goes, please.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Cheers,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Alex
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Aug 09, 2011 at 04:09:42PM +0530, Abhijit wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;                
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi Sir,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Am using the same path, C:\Users\Administrator\AppData\Roaming\RabbitMQ\rabbitmq.config for including ssl in my app.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; But the file wasn't present earlier i had created that file in order to have SSL in my app at the same location.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; i tried running the bat file for the rabbitmq-server that didn't help sir, do you need any part of code for inspection.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks a lot for your time and replies.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Abhijit
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;                  
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;              
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;          
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> 
</I></PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014415.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
	<LI>Next message: <A HREF="014417.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14416">[ date ]</a>
              <a href="thread.html#14416">[ thread ]</a>
              <a href="subject.html#14416">[ subject ]</a>
              <a href="author.html#14416">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
