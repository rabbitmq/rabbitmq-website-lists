<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the spec wrt content-type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-stomp%202.5.1%20does%20not%20respect%20the%0A%20spec%20wrt%20content-type&In-Reply-To=%3C1D9CBD89533EE94D8295DFBFD923C23F374BEC52%40PLOXCHG03.cern.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014423.html">
   <LINK REL="Next"  HREF="014433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the spec wrt content-type</H1>
    <B>Lionel Cons</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-stomp%202.5.1%20does%20not%20respect%20the%0A%20spec%20wrt%20content-type&In-Reply-To=%3C1D9CBD89533EE94D8295DFBFD923C23F374BEC52%40PLOXCHG03.cern.ch%3E"
       TITLE="[rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the spec wrt content-type">Lionel.Cons at cern.ch
       </A><BR>
    <I>Tue Aug  9 15:40:01 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014423.html">[rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the	spec wrt content-type
</A></li>
        <LI>Next message: <A HREF="014433.html">[rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the	spec wrt content-type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14430">[ date ]</a>
              <a href="thread.html#14430">[ thread ]</a>
              <a href="subject.html#14430">[ subject ]</a>
              <a href="author.html#14430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Steve,

I confirm that my test message did include a content-length header and no content-type. It should have been treated as binary.

Even if the spec indeed uses SHOULD for this matter, I consider it bad practice to add something to the message that can be incorrect.

Cheers,

Lionel

From: Steve Powell [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">steve at rabbitmq.com</A>]
Sent: Tuesday, August 09, 2011 4:08 PM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Cc: Lionel Cons
Subject: Re: [rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the spec wrt content-type

Dear Lionel,
Yes, indeed, this does look like a bug.

You do not say whether your test message included a content-length header.  You ought to know that without it there is no way a STOMP server can determine the length of a binary body, other than by using the NULL byte terminator (the usual rule).

If the SENDer gave a message with content-type binary (explicitly or implicitly) and omitted the content-length header, would you wish us to reject the message (with an ERROR) or use the NULL terminator rule, which would almost always indicate a potential error in the binary case?

Notice that the requirement to include a content-length header and the requirement to assume binary when the content-type is omitted are both imposed with the SHOULD keyword.  We are not clear what the force of that term is in this context.  We are going to clarify this.

Thank you for pointing this out.
Steve Powell  (a hoppy bunny)
----------some definitions from the SPD----------
Rigatoni n. A prime-ministerial grin.
Nigella n. The next bottle-size up from a Nebuchadnezzar.
Homily adv. Rather like a frenchman.

On 9 Aug 2011, at 13:08, Lionel Cons wrote:

<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-August/014412.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-August/014412.html</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110809/6521285f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110809/6521285f/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014423.html">[rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the	spec wrt content-type
</A></li>
	<LI>Next message: <A HREF="014433.html">[rabbitmq-discuss] rabbitmq-stomp 2.5.1 does not respect the	spec wrt content-type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14430">[ date ]</a>
              <a href="thread.html#14430">[ thread ]</a>
              <a href="subject.html#14430">[ subject ]</a>
              <a href="author.html#14430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
