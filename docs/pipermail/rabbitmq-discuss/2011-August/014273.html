<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queuing fundamentals.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queuing%20fundamentals.&In-Reply-To=%3Cef8e1fbb-d982-4087-8ea1-a4a9152fe92a%40bl1g2000vbb.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014280.html">
   <LINK REL="Next"  HREF="014274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queuing fundamentals.</H1>
    <B>Andrew</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queuing%20fundamentals.&In-Reply-To=%3Cef8e1fbb-d982-4087-8ea1-a4a9152fe92a%40bl1g2000vbb.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Queuing fundamentals.">aph at repido.co.uk
       </A><BR>
    <I>Mon Aug  1 17:37:57 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014280.html">[rabbitmq-discuss] Recommended ways of basic queue introspection
</A></li>
        <LI>Next message: <A HREF="014274.html">[rabbitmq-discuss] Queuing fundamentals.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14273">[ date ]</a>
              <a href="thread.html#14273">[ thread ]</a>
              <a href="subject.html#14273">[ subject ]</a>
              <a href="author.html#14273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everybody,

I wondered if somebody might be able to clarify some behaviour for me
as I am getting confused about whether the scenario I am experiencing
is due to a lack of understanding of how RabbitMQ works or something
else.

I have one reader process which may die due to system failure and at
restart I'd like the same single consumer process to start up again
and pick up where it left off. So a summary of what I'd like to happen
is:

(1) My transmitter process sends and queues up messages 1, 2, 3, 4, 5
&amp; 6.
(2) My single consumer process reads and acknowledges messages 1 and 2
in sequence.
(3) My consumer process reads message 3 and then dies without
acknowledging.
(4) I restart my consumer process which will request the next message,
which should be the unacknowledged message (3).
(5) My consumer process would then continue reading messages from the
queue (4, 5, &amp; 6) in sequence.

What I am experiencing is that when my consumer process is restarted
messages 3, 4, 5 &amp; 6 are delivered out of sequence and all with a
redelivery count of 1. I understand that message 3 might be out of
sequence because it was unacknowledged and from what I have read, when
a message is redelivered then it's sequence is no longer guaranteed.
However I'm not clear as to why the remaining queued messages are out
of sequence too.

More importantly is what I am trying to do is something that is
contrary to how RabbitMQ works, or am I just going about it the wrong
way?

Many thanks for your help,
Andrew

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014280.html">[rabbitmq-discuss] Recommended ways of basic queue introspection
</A></li>
	<LI>Next message: <A HREF="014274.html">[rabbitmq-discuss] Queuing fundamentals.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14273">[ date ]</a>
              <a href="thread.html#14273">[ thread ]</a>
              <a href="subject.html#14273">[ subject ]</a>
              <a href="author.html#14273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
