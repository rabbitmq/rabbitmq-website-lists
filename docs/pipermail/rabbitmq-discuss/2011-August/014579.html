<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Scenario ideas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Scenario%20ideas&In-Reply-To=%3CCAEWH9M9P-_HjkqyuFQs6eZXPrtpAZOyTCPKSgM0RV7O_%2B3SaAQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014563.html">
   <LINK REL="Next"  HREF="014581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Scenario ideas</H1>
    <B>Pete Kelly</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Scenario%20ideas&In-Reply-To=%3CCAEWH9M9P-_HjkqyuFQs6eZXPrtpAZOyTCPKSgM0RV7O_%2B3SaAQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Scenario ideas">pkelly at gmail.com
       </A><BR>
    <I>Tue Aug 16 20:58:29 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014563.html">[rabbitmq-discuss] push server for android
</A></li>
        <LI>Next message: <A HREF="014581.html">[rabbitmq-discuss] Scenario ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14579">[ date ]</a>
              <a href="thread.html#14579">[ thread ]</a>
              <a href="subject.html#14579">[ subject ]</a>
              <a href="author.html#14579">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I have been playing with rabbitmq and am thinking through some common
scenarios I think I will need to deal with, I was wondering if anyone would
be able to take the time to read my thoughts and validate them or throw a
few more options in/give me some article links?

I have a topic exchange and need to attach some consumers to process
messages.

If I attach a consumer with no queue name, a unique one time queue will be
created and I can bind the exchange to this queue using a routing key like
'animal.mammals.#'.

This is great until

- the consumer crashes, meaning the exchange will drop all messages (or they
get rejected depending on the publish settings I use)
or
- I need another consumer to process animals.mammals.#, which I can't do as
I am using a one time queue and adding another will mean each message is
delivered to 2 queues.

Are the above assumptions correct?


So my second option is to use a named queue. I attach a consumer with a
queue name and bind the exchange to this queue using a routing key like
'animal.mammals.#'.

Now if I need another consumer I simply bring another one up and attach it
to the same queue name, and they get the messages in round robin which is
great.

What's not so great is if I then decide to attach a consumer to this queue
name (maybe by accident) and bind the exchange to a routing key
'animal.mammals.rabbit'

Then the queue gets 2 copies of each message. Is there any way to avoid this
other than careful management of bindings? Maybe a way of telling the
exchange to only deliver the message once to a given queue?

My worry is developers who will create bindings willy nilly without
realising the consequences of what is happening.


Any help would be appreciated, I am just trying to piece what's happening
together in my mind at the moment so I can understand what's happening in
the background.

Thanks

Pete
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110816/7914d3b7/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110816/7914d3b7/attachment.htm</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014563.html">[rabbitmq-discuss] push server for android
</A></li>
	<LI>Next message: <A HREF="014581.html">[rabbitmq-discuss] Scenario ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14579">[ date ]</a>
              <a href="thread.html#14579">[ thread ]</a>
              <a href="subject.html#14579">[ subject ]</a>
              <a href="author.html#14579">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
