<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Persistent PHP consumer over SSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistent%20PHP%20consumer%20over%20SSL&In-Reply-To=%3CCAHrXUcXWS6195DUazoKPehVCMqyQuVB%2BJq5WvAYfvy-UF7bZFA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014748.html">
   <LINK REL="Next"  HREF="014787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Persistent PHP consumer over SSL</H1>
    <B>Iain Emsley</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistent%20PHP%20consumer%20over%20SSL&In-Reply-To=%3CCAHrXUcXWS6195DUazoKPehVCMqyQuVB%2BJq5WvAYfvy-UF7bZFA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Persistent PHP consumer over SSL">iainemsley at gmail.com
       </A><BR>
    <I>Sat Aug 27 20:12:42 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014748.html">[rabbitmq-discuss] Problem auto-deleting large number of queues?
</A></li>
        <LI>Next message: <A HREF="014787.html">[rabbitmq-discuss] Persistent PHP consumer over SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14745">[ date ]</a>
              <a href="thread.html#14745">[ thread ]</a>
              <a href="subject.html#14745">[ subject ]</a>
              <a href="author.html#14745">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Evening,

I've been using and adapting the php-amqplib producer/consumer to link
systems together. The main change was replacing fsockopen with a
stream_socket_client() using the STREAM_CLIENT_CONNECT |
STREAM_CLIENT_PERSISTENT flag.

 Whilst the consumer is fine over non-SSL and running on the command line as
per the Readme, it appears to crash on SSL after about an hour or so. The
server reports that it is running as does the server, but no messages are
being passed to the linked system, rather are queueing up on the server.

Is there a way of closing a listener via a PID or only by connection on the
server using rabbitmqctl list_connections?  If messages are being queued, is
there a way of kicking the queue to see if a connection is accepting or
failing and sending any error back? The log suggests a timeout but I'd like
to try and figure out where and get the timing exact.

Alternatively, does any body know of a PHP library which I can rebuild the
persistent SSL connections quickly for the consumer?

Thanks in advance for any help and advice received.

Yours,

Iain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110827/f131ca13/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110827/f131ca13/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014748.html">[rabbitmq-discuss] Problem auto-deleting large number of queues?
</A></li>
	<LI>Next message: <A HREF="014787.html">[rabbitmq-discuss] Persistent PHP consumer over SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14745">[ date ]</a>
              <a href="thread.html#14745">[ thread ]</a>
              <a href="subject.html#14745">[ subject ]</a>
              <a href="author.html#14745">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
