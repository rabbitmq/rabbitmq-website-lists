<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message payload encoding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20payload%20encoding&In-Reply-To=%3CBDE140BF4C952041931EF8CAAC83341D026B6B8D7E%40exch-mbx-111.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014408.html">
   <LINK REL="Next"  HREF="014295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message payload encoding</H1>
    <B>Helena Edelson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20payload%20encoding&In-Reply-To=%3CBDE140BF4C952041931EF8CAAC83341D026B6B8D7E%40exch-mbx-111.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Message payload encoding">hedelson at vmware.com
       </A><BR>
    <I>Tue Aug  2 13:13:38 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014408.html">[rabbitmq-discuss] Slow startup/recovery time
</A></li>
        <LI>Next message: <A HREF="014295.html">[rabbitmq-discuss] Error while connect to rabbitmq using	rabbitmq-erlang-client library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14292">[ date ]</a>
              <a href="thread.html#14292">[ thread ]</a>
              <a href="subject.html#14292">[ subject ]</a>
              <a href="author.html#14292">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Pete. Some payloads are Scala objects (serialized/deser by scalaxb/base64) and some plain xsl schemas (which some are doing base64 but I'd prefer UTF-8).
 
cheers,
Helena
________________________________________
From: Peter Ohler [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">peter at ohler.com</A>]
Sent: Friday, July 29, 2011 8:12 PM
To: Helena Edelson
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Message payload encoding

If you don't mind I will take a shot at that one.

There are a few consideration that should be looked at. It is often the case that message size is not the most significant factor in performance, especially if the message size is small. Consider what it is you are sending. If it is a UTF-8 string then sending the string directly takes no preparation and is smaller than base64 encoding which also incurs and overhead in serialization and deserialization.

If what you are sending is an Java, Python, or Ruby object then there will be significant overhead in the serialization itself. For Ruby I wrote a fast object to XML serializer (Ox gem) that is much faster than the native Marshal encoding and that alone improved performance of our systems significantly.

Something else worth considering besides is how difficult it will be to debug and trace message exchanges. A binary format or base64 requires extra decoding to see what is in the body of a message while UTF-8 strings or XML can be viewed and understood directly. That is a real time saver during development and even in production when trying to fix a problem quickly.

-Pete

On Jul 30, 2011, at 3:00 AM, Helena Edelson wrote:

&gt;<i> Is there a preference, as in performance or other reason (please specify if so) for a message payload to be encoded for Rabbit as UTF-8 or base64?
</I>&gt;<i> I have been doing UTF-8; just curious.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Helena
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014408.html">[rabbitmq-discuss] Slow startup/recovery time
</A></li>
	<LI>Next message: <A HREF="014295.html">[rabbitmq-discuss] Error while connect to rabbitmq using	rabbitmq-erlang-client library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14292">[ date ]</a>
              <a href="thread.html#14292">[ thread ]</a>
              <a href="subject.html#14292">[ subject ]</a>
              <a href="author.html#14292">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
