<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] queue gets removed from a node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20gets%20removed%20from%20a%20node&In-Reply-To=%3C4E563B8B.6000704%40thebestisp.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014733.html">
   <LINK REL="Next"  HREF="014760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] queue gets removed from a node</H1>
    <B>Cezary Siwek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queue%20gets%20removed%20from%20a%20node&In-Reply-To=%3C4E563B8B.6000704%40thebestisp.co.uk%3E"
       TITLE="[rabbitmq-discuss] queue gets removed from a node">czarek at thebestisp.co.uk
       </A><BR>
    <I>Thu Aug 25 13:09:47 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014733.html">[rabbitmq-discuss] Cannot start 'guid generator' (rabbitmq)
</A></li>
        <LI>Next message: <A HREF="014760.html">[rabbitmq-discuss] queue gets removed from a node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14726">[ date ]</a>
              <a href="thread.html#14726">[ thread ]</a>
              <a href="subject.html#14726">[ subject ]</a>
              <a href="author.html#14726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi list,

I'm facing an issue with my rabittmq cluster where a queue disappears 
from a node.
I have 2 nodes in a cluster working in &quot;disk mode&quot;.
Node1 - only consumes messages from the queue.
Node2 - only publishes messages to the queue.

The consumer script on Node1 creates a durable queue and waits for 
messages.
Everything works fine until some no-activity time. I can't say how long 
it needs to be but usually after more than 24h the queue disappears from 
Node2 and the consumer stops receiving messages. The list_queues command 
shows the queue exists on Node1 but not on Node2.
I've done a packet trace when it happened and I can see some packets are 
being exchanged between nodes. Also cluster_status commands shows that 
both nodes are up and running in the cluster.
When I try to declare_queue on the Node2 i get 'NOT_FOUND - no queue 
'msgs' in vhost '/vhost1'.
All I need to do to have the Node2 running is to run stop_app and start_app.

Both nodes are sitting behind firewalls (in separate networks) but both 
firewalls have been granted to pass all the traffic between these two boxes.
It happens on my dev platfrom. On production I don't think I will ever 
have such long quiet periods but I need to find out what is causing this.

Do you have any idea what is the problem?

Regards,
Cezary






</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014733.html">[rabbitmq-discuss] Cannot start 'guid generator' (rabbitmq)
</A></li>
	<LI>Next message: <A HREF="014760.html">[rabbitmq-discuss] queue gets removed from a node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14726">[ date ]</a>
              <a href="thread.html#14726">[ thread ]</a>
              <a href="subject.html#14726">[ subject ]</a>
              <a href="author.html#14726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
