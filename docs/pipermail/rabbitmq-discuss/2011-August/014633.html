<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] a shared queue problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20a%20shared%20queue%20problem&In-Reply-To=%3Ce575aa91-6569-46ce-9487-b348676ed1fe%40bl1g2000vbb.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014631.html">
   <LINK REL="Next"  HREF="014634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] a shared queue problem</H1>
    <B>Valentin Bernard</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20a%20shared%20queue%20problem&In-Reply-To=%3Ce575aa91-6569-46ce-9487-b348676ed1fe%40bl1g2000vbb.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] a shared queue problem">vbernard42 at gmail.com
       </A><BR>
    <I>Fri Aug 19 15:28:19 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014631.html">[rabbitmq-discuss] a shared queue problem
</A></li>
        <LI>Next message: <A HREF="014634.html">[rabbitmq-discuss] Spec file for txAMQP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14633">[ date ]</a>
              <a href="thread.html#14633">[ thread ]</a>
              <a href="subject.html#14633">[ subject ]</a>
              <a href="author.html#14633">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

The routing key determines the way your exchange will route your
messages to your queues. What you are doing is binding one queue to
one exchange with two routing keys, &quot;aa&quot; and &quot;bb&quot; -- that is, the
message will be routed to your queue if you send a message with the
routing key &quot;aa&quot; or &quot;bb&quot;.

Then, you have two clients consuming your queue. In that case, the
messages will be delivered in a round-robin fashion: your first client
will get the first message, then your second client will get the
second message, and so on.

What you probably want to do is creating two queues, each with one
routing key, and make your clients consume only one of these queues.

Regards,

Valentin.

On Aug 19, 2:55 pm, &#38470;&#20113;&#40857; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">l... at wawame.cn</A>&gt; wrote:
&gt;<i> on java api guide page ,you can find that If several clients want to share a queue with a well-known name, this code would be appropriate:
</I>&gt;<i>
</I>&gt;<i> channel.exchangeDeclare(exchangeName, &quot;direct&quot;, true);
</I>&gt;<i> channel.queueDeclare(queueName, true, false, false, null);
</I>&gt;<i> channel.queueBind(queueName, exchangeName, routingKey);
</I>&gt;<i>
</I>&gt;<i> when i do that one routingKey is aa,another is bb,start aa first,then start bb,when i send message by routing bb,the first routingKey aa client receives the message,but the message i want to send to routingKey bb client.
</I>&gt;<i>
</I>&gt;<i> start aa routingKey client---&gt;start bb routingKey client---&gt;send routingKey bb message---&gt;routingKey aa receive the message---&gt;send routingKey bb message---&gt;routingKey bb receive the message--...
</I>&gt;<i> why message is not arrive the correct client by routingKey???
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014631.html">[rabbitmq-discuss] a shared queue problem
</A></li>
	<LI>Next message: <A HREF="014634.html">[rabbitmq-discuss] Spec file for txAMQP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14633">[ date ]</a>
              <a href="thread.html#14633">[ thread ]</a>
              <a href="subject.html#14633">[ subject ]</a>
              <a href="author.html#14633">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
