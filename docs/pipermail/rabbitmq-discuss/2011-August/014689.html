<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] NotImplementedError: &lt;class	'pika.spec.CancelOk'&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20NotImplementedError%3A%20%3Cclass%0A%09%27pika.spec.CancelOk%27%3E&In-Reply-To=%3CCABzX%2BqxHZYRbu9yqsQHVRnT0Cp7jBKy5UEKUNqKWTaMYw1zvyg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014575.html">
   <LINK REL="Next"  HREF="014557.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] NotImplementedError: &lt;class	'pika.spec.CancelOk'&gt;</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20NotImplementedError%3A%20%3Cclass%0A%09%27pika.spec.CancelOk%27%3E&In-Reply-To=%3CCABzX%2BqxHZYRbu9yqsQHVRnT0Cp7jBKy5UEKUNqKWTaMYw1zvyg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] NotImplementedError: &lt;class	'pika.spec.CancelOk'&gt;">majek04 at gmail.com
       </A><BR>
    <I>Mon Aug 22 16:57:34 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014575.html">[rabbitmq-discuss] NotImplementedError: &lt;class 'pika.spec.CancelOk'&gt;
</A></li>
        <LI>Next message: <A HREF="014557.html">[rabbitmq-discuss] aliveness-test API call timeout length
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14689">[ date ]</a>
              <a href="thread.html#14689">[ thread ]</a>
              <a href="subject.html#14689">[ subject ]</a>
              <a href="author.html#14689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matt,

Were you able to get it working?

Cheers,
  Marek

On Tue, Aug 16, 2011 at 17:51, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at hotmail.com</A>&gt; wrote:
&gt;<i> Thanks for the quick reply Gavin.
</I>&gt;<i> I've got no idea how my install would be non-standard. It's an Ubuntu 11.04
</I>&gt;<i> box, recently updated via &quot;sudo apt-get upgrade&quot;. FWIW, my Python 2.7
</I>&gt;<i> install is based in /usr/local/lib/python2.7, so the /local/ in the path
</I>&gt;<i> isn't surprising (to me at least...)
</I>&gt;<i> Per the instructions on the RabbitMq site, I did: &quot;sudo pip install
</I>&gt;<i> pika==0.9.5&quot;.&#160;I didn't notice any errors:
</I>&gt;<i> ----------------
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at rabbitmq</A>:/usr/local/lib/python2.7$sudo pip install pika==0.9.5
</I>&gt;<i> Downloading/unpacking pika==0.9.5
</I>&gt;<i> &#160; Downloading pika-0.9.5.tar.gz
</I>&gt;<i> &#160; Running setup.py egg_info for package pika
</I>&gt;<i>
</I>&gt;<i> Installing collected packages: pika
</I>&gt;<i> &#160; Running setup.py install for pika
</I>&gt;<i>
</I>&gt;<i> Successfully installed pika
</I>&gt;<i> Cleaning up...
</I>&gt;<i> ----------------
</I>&gt;<i> The output from Interactive Python that you requested:
</I>&gt;<i> Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53)
</I>&gt;<i> [GCC 4.5.2] on linux2
</I>&gt;<i> Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</I>&gt;&gt;&gt;&gt;<i> import pika
</I>&gt;&gt;&gt;&gt;<i> pika.__version__
</I>&gt;<i> '0.9.5'
</I>&gt;<i> Also, FWIW, the contents of
</I>&gt;<i> &#160;/usr/local/lib/python2.7/dist-packages/pika-0.9.5.egg-info/PKG_INFO&#160;are:
</I>&gt;<i> Metadata-Version: 1.0
</I>&gt;<i> Name: pika
</I>&gt;<i> Version: 0.9.5
</I>&gt;<i> Summary: Pika Python AMQP Client Library
</I>&gt;<i> Home-page: <A HREF="http://pika.github.com/">http://pika.github.com/</A>
</I>&gt;<i> Author: Gavin M. Roy
</I>&gt;<i> Author-email: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at myyearbook.com</A>
</I>&gt;<i> License: MPL v1.1 and GPL v2.0 or newer
</I>&gt;<i> Description: Pika is a pure-Python implementation of the AMQP 0-9-1 protocol
</I>&gt;<i> that
</I>&gt;<i> &#160; &#160; &#160; &#160; tries to stay fairly independent of the underlying network support
</I>&gt;<i> &#160; &#160; &#160; &#160; library. Pika was developed primarily for use with RabbitMQ, but
</I>&gt;<i> &#160; &#160; &#160; &#160; should also work with other AMQP 0-9-1 brokers.
</I>&gt;<i>
</I>&gt;<i> Platform: UNKNOWN
</I>&gt;<i> Classifier: Development Status :: 4 - Beta
</I>&gt;<i> Classifier: Intended Audience :: Developers
</I>&gt;<i> Classifier: License :: OSI Approved :: GNU General Public License (GPL)
</I>&gt;<i> Classifier: License :: OSI Approved :: Mozilla Public License 1.1 (MPL 1.1)
</I>&gt;<i> Classifier: Operating System :: OS Independent
</I>&gt;<i> Classifier: Topic :: Communications
</I>&gt;<i> Classifier: Topic :: Internet
</I>&gt;<i> Classifier: Topic :: Software Development :: Libraries
</I>&gt;<i> Thanks much for your help,
</I>&gt;<i> Matt
</I>&gt;<i> From: &quot;Gavin M. Roy&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at myyearbook.com</A>&gt;
</I>&gt;<i> Date: Tue, 16 Aug 2011 12:32:44 -0400
</I>&gt;<i> To: Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at hotmail.com</A>&gt;
</I>&gt;<i> Cc: Marek Majkowski &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt;,
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] NotImplementedError: &lt;class
</I>&gt;<i> 'pika.spec.CancelOk'&gt;
</I>&gt;<i>
</I>&gt;<i> It looks like to me that you have a non-standard pika install, perhaps the
</I>&gt;<i> new debian package?
</I>&gt;<i> I say that because I see:
</I>&gt;<i>
</I>&gt;<i> /usr/local/lib/python2.7/dist-packages/pika/connection.py
</I>&gt;<i>
</I>&gt;<i> And I'd expect something like:
</I>&gt;<i> /usr/lib/python2.7/site-packages/pika/connection.py
</I>&gt;<i> Can you use slocate or find to see if you have more than one version of pika
</I>&gt;<i> installed?
</I>&gt;<i> What happens when you run the following in python2.7 interactively?
</I>&gt;<i> import pika
</I>&gt;<i> pika.__version__
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tuesday, August 16, 2011 at 12:18 PM, Matt Pietrek wrote:
</I>&gt;<i>
</I>&gt;<i> Alas, no luck with a Pika reinstall. I did a &quot;pip uninstall&quot; of what was
</I>&gt;<i> there, verified the files were removed, then &quot;pip install&quot;.
</I>&gt;<i>
</I>&gt;<i> All other aspects of my Pika-based code seem to work. I'm sending and
</I>&gt;<i> receiving 1000's of messages before shutting down. It's only at shutdown
</I>&gt;<i> where the problem occurs.
</I>&gt;<i>
</I>&gt;<i> Does my shutdown sequence look OK? That is, calling
</I>&gt;<i> channel.stop_consuming() from a different thread than I called
</I>&gt;<i> .start_consuming on?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 8/16/11 4:29 AM, &quot;Marek Majkowski&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> On Tue, Aug 16, 2011 at 00:36, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at hotmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> I'm getting the following error from code that used to work without
</I>&gt;<i> error until I did an &quot;apt-get upgrade&quot; today.
</I>&gt;<i>
</I>&gt;<i> This is an Ubuntu 11.04 system running Python 2.7 and Pika 0.95. Any
</I>&gt;<i> clues what's happening?
</I>&gt;<i>
</I>&gt;<i> Nope. Maybe it's just a python installation issue?
</I>&gt;<i>
</I>&gt;<i> Can you try removing pika and installing it again? Or maybe
</I>&gt;<i> installing a fresh local copy (for example using venv)?
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Marek
</I>&gt;<i>
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i> File &quot;/usr/lib/python2.7/threading.py&quot;, line 552, in
</I>&gt;<i> __bootstrap_inner
</I>&gt;<i> self.run()
</I>&gt;<i> File &quot;ConfigMgr.py&quot;, line 101, in run
</I>&gt;<i> self.channel.start_consuming()
</I>&gt;<i> File &quot;/usr/local/lib/python2.7/dist-packages/pika/adapters/
</I>&gt;<i> blocking_connection.py&quot;, line 293, in start_consuming
</I>&gt;<i> self.transport.connection.process_data_events()
</I>&gt;<i> File &quot;/usr/local/lib/python2.7/dist-packages/pika/adapters/
</I>&gt;<i> blocking_connection.py&quot;, line 94, in process_data_events
</I>&gt;<i> self._handle_read()
</I>&gt;<i> File &quot;/usr/local/lib/python2.7/dist-packages/pika/adapters/
</I>&gt;<i> base_connection.py&quot;, line 162, in _handle_read
</I>&gt;<i> self._on_data_available(data)
</I>&gt;<i> File &quot;/usr/local/lib/python2.7/dist-packages/pika/connection.py&quot;,
</I>&gt;<i> line 599, in _on_data_available
</I>&gt;<i> self._channels[frame.channel_number].transport.deliver(frame)
</I>&gt;<i> File &quot;/usr/local/lib/python2.7/dist-packages/pika/channel.py&quot;, line
</I>&gt;<i> 64, in deliver
</I>&gt;<i> self.frame_dispatcher.process(frame)
</I>&gt;<i> File &quot;/usr/local/lib/python2.7/dist-packages/pika/frame.py&quot;, line
</I>&gt;<i> 202, in process
</I>&gt;<i> self._handler(frame)
</I>&gt;<i> File &quot;/usr/local/lib/python2.7/dist-packages/pika/frame.py&quot;, line
</I>&gt;<i> 220, in _handle_method_frame
</I>&gt;<i> raise NotImplementedError(frame.method.__class__)
</I>&gt;<i> NotImplementedError: &lt;class 'pika.spec.CancelOk'&gt;
</I>&gt;<i>
</I>&gt;<i> Here's what my code looks like:
</I>&gt;<i>
</I>&gt;<i> class ListenForLongRunningEventCompletion(threading.Thread):
</I>&gt;<i> def run(self):
</I>&gt;<i> self.connection =
</I>&gt;<i> pika.BlockingConnection(pika.ConnectionParameters(host=MQ_BINDING))
</I>&gt;<i> self.channel = self.connection.channel()
</I>&gt;<i>
</I>&gt;<i> self.channel.queue_declare(queue=RESPONSE_QUEUE_NAME)
</I>&gt;<i> self.channel.basic_consume(ResponseCallback,
</I>&gt;<i> queue=RESPONSE_QUEUE_NAME,
</I>&gt;<i> no_ack=True)
</I>&gt;<i> self.channel.start_consuming()
</I>&gt;<i>
</I>&gt;<i> def shutdown(self):
</I>&gt;<i> self.channel.stop_consuming()
</I>&gt;<i>
</I>&gt;<i> def ResponseCallback(ch, method, properties, body):
</I>&gt;<i> print &quot;Long Running Task response({0})&quot;.format(body)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #========================================================================
</I>&gt;<i> ======
</I>&gt;<i> #
</I>&gt;<i> # Main program
</I>&gt;<i> #
</I>&gt;<i>
</I>&gt;<i> #========================================================================
</I>&gt;<i> ======
</I>&gt;<i>
</I>&gt;<i> if __name__ == '__main__':
</I>&gt;<i> listener = ListenForLongRunningEventCompletion()
</I>&gt;<i> listener.start()
</I>&gt;<i>
</I>&gt;<i> # Main app logic - not important here
</I>&gt;<i>
</I>&gt;<i> # Shut down the connections we've opened up
</I>&gt;<i> listener.shutdown()
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014575.html">[rabbitmq-discuss] NotImplementedError: &lt;class 'pika.spec.CancelOk'&gt;
</A></li>
	<LI>Next message: <A HREF="014557.html">[rabbitmq-discuss] aliveness-test API call timeout length
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14689">[ date ]</a>
              <a href="thread.html#14689">[ thread ]</a>
              <a href="subject.html#14689">[ subject ]</a>
              <a href="author.html#14689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
