<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Recommended ways of basic queue introspection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Recommended%20ways%20of%20basic%20queue%20introspection&In-Reply-To=%3C4E36A43C.3070901%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014268.html">
   <LINK REL="Next"  HREF="014271.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Recommended ways of basic queue introspection</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Recommended%20ways%20of%20basic%20queue%20introspection&In-Reply-To=%3C4E36A43C.3070901%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Recommended ways of basic queue introspection">emile at rabbitmq.com
       </A><BR>
    <I>Mon Aug  1 14:03:56 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014268.html">[rabbitmq-discuss] Recommended ways of basic queue introspection
</A></li>
        <LI>Next message: <A HREF="014271.html">[rabbitmq-discuss] Recommended ways of basic queue introspection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14270">[ date ]</a>
              <a href="thread.html#14270">[ thread ]</a>
              <a href="subject.html#14270">[ subject ]</a>
              <a href="author.html#14270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael,

On 01/08/11 13:19, Michael Klishin wrote:
&gt;<i> I have a need of introspecting some queues (very basic form of querying:
</I>&gt;<i> list all messages in the queue) and draining with basic.get + requeuing
</I>&gt;<i> is not an option
</I>&gt;<i> for various reasons. Number of messages at any given time will always be
</I>&gt;<i> low (&lt; 100).
</I>&gt;<i> 
</I>&gt;<i> Does RabbitMQ HTTP management API offer anything like this? If I am
</I>&gt;<i> willing to put together a small extension that will query Mnesia, are
</I>&gt;<i> there any caveats
</I>&gt;<i> or extension points or something I should be aware of? Finally, would it
</I>&gt;<i> make sense to try to extend HTTP API of the management plugin and
</I>&gt;<i> contribute back to it?
</I>
The feature you are asking for is &quot;queue browsing&quot;. RabbitMQ queues are
strictly FIFO, precluding queue browsing. If you don't care about
message order then you could attempt to emulate browsing by fetching and
requeueing messages, but you say that is not possible in your case.

The other possibility is to provide your own browsable queue
implementation. This is not a trivial undertaking, but it is possible to
slot in your own implementation and make it free from FIFO restrictions.

The HTTP management API does not have privileged access to queue
contents. You can fetch and requeue messages, but not in a way that
ignores the FIFO property of queues.

Queue contents are not stored in Mnesia, but in an optimised persistent
format. But knowing that is not much help because transient messages are
not guaranteed to be on disk. If you are only interested in browsing
persistent messages then you could use a database message store and
browse that. See <A HREF="http://hg.rabbitmq.com/rabbitmq-toke">http://hg.rabbitmq.com/rabbitmq-toke</A> for a possible
starting point.


-Emile
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014268.html">[rabbitmq-discuss] Recommended ways of basic queue introspection
</A></li>
	<LI>Next message: <A HREF="014271.html">[rabbitmq-discuss] Recommended ways of basic queue introspection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14270">[ date ]</a>
              <a href="thread.html#14270">[ thread ]</a>
              <a href="subject.html#14270">[ subject ]</a>
              <a href="author.html#14270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
