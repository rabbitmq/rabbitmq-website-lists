<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20facing%20issues%20with%20the%20SSL%20implementations%0A%20with%20RabbitMQ%20%2B%20Windows%20%2B%20.Net&In-Reply-To=%3C20110810104000.GE2869%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014463.html">
   <LINK REL="Next"  HREF="014465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20facing%20issues%20with%20the%20SSL%20implementations%0A%20with%20RabbitMQ%20%2B%20Windows%20%2B%20.Net&In-Reply-To=%3C20110810104000.GE2869%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net">alexandru at rabbitmq.com
       </A><BR>
    <I>Wed Aug 10 11:40:00 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014463.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
        <LI>Next message: <A HREF="014465.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14464">[ date ]</a>
              <a href="thread.html#14464">[ thread ]</a>
              <a href="subject.html#14464">[ subject ]</a>
              <a href="author.html#14464">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; AMQP server protocol negotiation failure: server version 
</I>&gt;<i> &gt; unknown-unknown, client version 0-9
</I>
That means the client connected successfully but closed the connection
later because it wasn't talking to an AMQP server.

That means that the client and certificates are fine, so the problem is
configuring the server.

When you try the other command (the openssl s_client) on the server,
what output do you get?  Could you please post it?

Alex

On Wed, Aug 10, 2011 at 04:00:26PM +0530, Abhijit wrote:
&gt;<i> yes sir
</I>&gt;<i> no problem i thought so after looking at client cmd lines i did put 
</I>&gt;<i> slash instead of dot, and now am getting this errors:
</I>&gt;<i> 
</I>&gt;<i> &gt; AMQP server protocol negotiation failure: server version 
</I>&gt;<i> &gt; unknown-unknown, client version 0-9
</I>&gt;<i> 
</I>&gt;<i> Can you tell me what are next steps?
</I>&gt;<i> 
</I>&gt;<i> Thanks and Regards,
</I>&gt;<i> Abhijit
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 8/10/2011 3:57 PM, Alexandru Scvor&#355;ov wrote:
</I>&gt;<i> &gt;&gt; Am still getting the same error am using the same config file.
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt; Ok, but are you sure it's actually the file used by the server? (we had
</I>&gt;<i> &gt; some problems earlier about which file the server was using when started
</I>&gt;<i> &gt; from the command prompt or as a service)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    
</I>&gt;<i> &gt;&gt;&gt; openssl s_server -accept 5671 -CAfile testca/cacert.pem -cert
</I>&gt;<i> &gt;&gt;&gt; server/cert.pem -key server.key.pem -state
</I>&gt;<i> &gt;&gt;&gt;        
</I>&gt;<i> &gt; My mistake.  That should be:
</I>&gt;<i> &gt;    openssl s_server -accept 5671 -CAfile testca/cacert.pem -cert
</I>&gt;<i> &gt;    server/cert.pem -key server/key.pem -state
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (dot instead of slash in server.key.pem)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; BTW, if they're disposable, could you send the certificates and keys?
</I>&gt;<i> &gt; We've had problems before with the certificates generated by OpenSSL,
</I>&gt;<i> &gt; which were usually solved by using a different version.  Maybe this is
</I>&gt;<i> &gt; happening here.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; Alex
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Wed, Aug 10, 2011 at 03:46:39PM +0530, Abhijit wrote:
</I>&gt;<i> &gt;    
</I>&gt;<i> &gt;&gt; hi sir,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Am still getting the same error am using the same config file.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; But i was not able to run this command you sent me:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> &gt;&gt;&gt; openssl s_server -accept 5671 -CAfile testca/cacert.pem -cert
</I>&gt;<i> &gt;&gt;&gt; server/cert.pem -key server.key.pem -state
</I>&gt;<i> &gt;&gt;&gt;        
</I>&gt;<i> &gt;&gt; was getting an error: unable to load server certificate private key file.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks and Regards,
</I>&gt;<i> &gt;&gt; Abhijit
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;      
</I>&gt;<i> 
</I></PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014463.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
	<LI>Next message: <A HREF="014465.html">[rabbitmq-discuss] facing issues with the SSL implementations with RabbitMQ + Windows + .Net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14464">[ date ]</a>
              <a href="thread.html#14464">[ thread ]</a>
              <a href="subject.html#14464">[ subject ]</a>
              <a href="author.html#14464">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
