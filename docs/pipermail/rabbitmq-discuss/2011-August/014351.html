<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Channel error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channel%20error&In-Reply-To=%3C1312479606.50183.YahooMailNeo%40web111005.mail.gq1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014347.html">
   <LINK REL="Next"  HREF="014352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Channel error</H1>
    <B>Dave Greggory</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channel%20error&In-Reply-To=%3C1312479606.50183.YahooMailNeo%40web111005.mail.gq1.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] Channel error">davegreggory at yahoo.com
       </A><BR>
    <I>Thu Aug  4 18:40:06 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014347.html">[rabbitmq-discuss] |Spam| &#22238;&#22797;&#65306;  Error: unable to connect to node rabbit at dev: nodedown
</A></li>
        <LI>Next message: <A HREF="014352.html">[rabbitmq-discuss] Channel error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14351">[ date ]</a>
              <a href="thread.html#14351">[ thread ]</a>
              <a href="subject.html#14351">[ subject ]</a>
              <a href="author.html#14351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We upgraded to RabbitMQ 2.5.1 from 2.0.0 and have been running 2.5.1 in production for over month. We have monitoring in on rabbitmq log that alerts us whenever there's any entries in those logs that we do not expect. Basically we look for lines that match following query. 


Query Terms: 'host=rabbitmq* AND NOT
&quot;starting TCP connection&quot; AND NOT &quot;closing TCP connection&quot;
AND NOT &quot;accepted TCP connection&quot; AND NOT
&quot;connection_closed_abruptly&quot; AND NOT &quot;timeout,running&quot;' 

Several times within the last week or so, it alerted us with the following error in the SASL logs. Client functionality seems to be unaffected, but I'm curious to what this error means. Can anybody from the Rabbit team clarify?

=SUPERVISOR REPORT==== 3-Aug-2011::14:22:30 ===
&#160;&#160;&#160;&#160; Supervisor: {&lt;0.16968.672&gt;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; rabbit_channel_sup_sup}
&#160;&#160;&#160;&#160; Context:&#160;&#160;&#160; shutdown_error
&#160;&#160;&#160;&#160; Reason:&#160;&#160;&#160;&#160; shutdown
&#160;&#160;&#160;&#160; Offender:&#160;&#160; [{pid,&lt;0.20327.672&gt;},
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {name,channel_sup},
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {mfa,{rabbit_channel_sup,start_link,[]}},
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {restart_type,temporary},
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {shutdown,infinity},
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {child_type,supervisor}]



Usage pattern -

6 fanout exchanges used for publish/subscribe pattern with 56 exclusive, auto-deleting queues (total, not each) bound to them
37 topic exchanges used for work queue pattern with 34 durable queues (total, not each) bound to them

At peak times we have less than 100 messages/sec going through RabbitMQ
Total connections = ~60-70 (2 connections each per app node, 1 for producing, 1 for consuming)
Heartbeat of 30 seconds enabled, no transactions used, work queue messages are persistent


RabbitMQ setup info -

[13:22:00 <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at rabbitmq1</A> /opt/rabbitmq_server/sbin] ./rabbitmqctl status
Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq1</A> ...
[{pid,3841},
&#160;{running_applications,
&#160;&#160;&#160;&#160; [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.5.1&quot;},
&#160;&#160;&#160;&#160;&#160; {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.5.1-hg0c4b60a&quot;},
&#160;&#160;&#160;&#160;&#160; {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.5.1&quot;},
&#160;&#160;&#160;&#160;&#160; {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.5.1&quot;},
&#160;&#160;&#160;&#160;&#160; {rabbit,&quot;RabbitMQ&quot;,&quot;2.5.1&quot;},
&#160;&#160;&#160;&#160;&#160; {os_mon,&quot;CPO&#160; CXC 138 46&quot;,&quot;2.2.5&quot;},
&#160;&#160;&#160;&#160;&#160; {sasl,&quot;SASL&#160; CXC 138 11&quot;,&quot;2.1.9&quot;},
&#160;&#160;&#160;&#160;&#160; {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.5.1&quot;},
&#160;&#160;&#160;&#160;&#160; {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq2.5.1-git9a53dbd&quot;},
&#160;&#160;&#160;&#160;&#160; {inets,&quot;INETS&#160; CXC 138 49&quot;,&quot;5.3&quot;},
&#160;&#160;&#160;&#160;&#160; {mnesia,&quot;MNESIA&#160; CXC 138 12&quot;,&quot;4.4.13&quot;},
&#160;&#160;&#160;&#160;&#160; {stdlib,&quot;ERTS&#160; CXC 138 10&quot;,&quot;1.16.5&quot;},
&#160;&#160;&#160;&#160;&#160; {kernel,&quot;ERTS&#160; CXC 138 10&quot;,&quot;2.13.5&quot;}]},
&#160;{os,{unix,linux}},
&#160;{erlang_version,
&#160;&#160;&#160;&#160; &quot;Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2] [async-threads:30] [hipe] [kernel-poll:true]\n&quot;},
&#160;{memory,
&#160;&#160;&#160;&#160; [{total,149009336},
&#160;&#160;&#160;&#160;&#160; {processes,82465760},
&#160;&#160;&#160;&#160;&#160; {processes_used,82358928},
&#160;&#160;&#160;&#160;&#160; {system,66543576},
&#160;&#160;&#160;&#160;&#160; {atom,1279561},
&#160;&#160;&#160;&#160;&#160; {atom_used,1275735},
&#160;&#160;&#160;&#160;&#160; {binary,5745136},
&#160;&#160;&#160;&#160;&#160; {code,15200224},
&#160;&#160;&#160;&#160;&#160; {ets,7624288}]}]
...done.

</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014347.html">[rabbitmq-discuss] |Spam| &#22238;&#22797;&#65306;  Error: unable to connect to node rabbit at dev: nodedown
</A></li>
	<LI>Next message: <A HREF="014352.html">[rabbitmq-discuss] Channel error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14351">[ date ]</a>
              <a href="thread.html#14351">[ thread ]</a>
              <a href="subject.html#14351">[ subject ]</a>
              <a href="author.html#14351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
