<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] STOMP &amp; message-id
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20%26%20message-id&In-Reply-To=%3CCAM8fPiTj-YOXWX9AKO003rkWtBWVRFNbECmyUUi__Kq7uHCSOQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014659.html">
   <LINK REL="Next"  HREF="014668.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] STOMP &amp; message-id</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20%26%20message-id&In-Reply-To=%3CCAM8fPiTj-YOXWX9AKO003rkWtBWVRFNbECmyUUi__Kq7uHCSOQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] STOMP &amp; message-id">tonygarnockjones+rabbitmq at gmail.com
       </A><BR>
    <I>Mon Aug 22 12:58:27 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014659.html">[rabbitmq-discuss] STOMP &amp; message-id
</A></li>
        <LI>Next message: <A HREF="014668.html">[rabbitmq-discuss] STOMP &amp; message-id
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14667">[ date ]</a>
              <a href="thread.html#14667">[ thread ]</a>
              <a href="subject.html#14667">[ subject ]</a>
              <a href="author.html#14667">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22 August 2011 06:28, Lionel Cons &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lionel.cons at cern.ch</A>&gt; wrote:

&gt;<i> Matthias Radestock writes:
</I>&gt;<i>  &gt; Yes. I think you'll find that currently there are *two* message-ids in
</I>&gt;<i>  &gt; the MESSAGE frame - the original and Rabbit's. I will file a bug to get
</I>&gt;<i>  &gt; that fixed.
</I>&gt;<i>
</I>
Isn't the user-supplied message-id sent in the MESSAGE as &quot;amqp-message-id&quot;?
In which case there really is only one &quot;message-id&quot; header in the MESSAGE?


&gt;<i> According to the
</I>&gt;<i> STOMP 1.1 spec, only the first one (the user supplied one) should be
</I>&gt;<i> taken into account. Hence the buggy behavior.
</I>&gt;<i>
</I>
STOMP mentions &quot;message-id&quot; for MESSAGE and ACK and NACK only. It doesn't
say anything about SEND. For compatibility with the spec, the client code
should take the &quot;message-id&quot; from the MESSAGE and use that in any related
ACK or NACK. Don't use the &quot;message-id&quot; from the SEND, in other words, since
that's a RabbitMQ (and presumably also ActiveMQ etc) extension.

I'm not sure this is a bug. It's certainly something that'd be difficult to
change, because of the way STOMP 1.1 is defined and the way RabbitMQ wants
to use the message ID field. In particular, there's no real way to let
people use their own user-supplied message-id values in an ACK or NACK
frame.

Cheers,
  Tony
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110822/d58ee123/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110822/d58ee123/attachment.htm</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014659.html">[rabbitmq-discuss] STOMP &amp; message-id
</A></li>
	<LI>Next message: <A HREF="014668.html">[rabbitmq-discuss] STOMP &amp; message-id
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14667">[ date ]</a>
              <a href="thread.html#14667">[ thread ]</a>
              <a href="subject.html#14667">[ subject ]</a>
              <a href="author.html#14667">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
