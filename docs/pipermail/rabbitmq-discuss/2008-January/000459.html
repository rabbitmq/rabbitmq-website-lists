<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Scalable multithreaded consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Scalable%20multithreaded%20consumer&In-Reply-To=47A07C18.1010405%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000457.html">
   <LINK REL="Next"  HREF="000461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Scalable multithreaded consumer</H1>
    <B>Karel Alfonso</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Scalable%20multithreaded%20consumer&In-Reply-To=47A07C18.1010405%40lshift.net"
       TITLE="[rabbitmq-discuss] Scalable multithreaded consumer">karel.alfonso at inventri.com
       </A><BR>
    <I>Wed Jan 30 21:55:29 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000457.html">[rabbitmq-discuss] Scalable multithreaded consumer
</A></li>
        <LI>Next message: <A HREF="000461.html">[rabbitmq-discuss] Scalable multithreaded consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#459">[ date ]</a>
              <a href="thread.html#459">[ thread ]</a>
              <a href="subject.html#459">[ subject ]</a>
              <a href="author.html#459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Tony for your reply.

I have to say I decided to use ActiveMQ with clustered queue consumers where
each of them has a thread pool managed by Jencks, an MDB solution that
integrates nicely with ActiveMQ. 

I would have loved to have RabbitMQ and Erlang consumers but I have to wait
till we have Erlang client implemented in RabbitMQ, then we can move away
from consuming messages in Java.

In my solution each message means &quot;poll the pop3 account of user XYZ for new
mails&quot;, that's right. So this is a solution where I need thousands of
clients/consumers to poll a POP3 account for a specific user.

I looked into an Erlang solution without RabbitMQ, but I don't think
enterprise APIs in Erlang are as mature and proven as those for Java. For
example, the POP3 client in Erlang, epop, dates back since 1998, and we
don't have yet a JavaMail-like package in Erlang, so, things become more
difficult.

Scala offeres the Acto model as well, but using the threading capability
offered by Java.

For the moment I'll use ActiveMQ with clustered consumers, in the future
I'll move the implementation to use RabbitMQ with Erlang consumers.

Thanks for your support,

  Cheers,

  Karel


-----Original Message-----
From: Tony Garnock-Jones [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>] 
Sent: Thursday, 31 January 2008 12:31 AM
To: Karel Alfonso
Cc: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Scalable multithreaded consumer

Hi Karel,

Karel Alfonso wrote:
&gt;<i>   There is a Java component in the system that is activated via a
</I>scheduled
&gt;<i> task that sends 10 000 events (messages) to start the mail download via
</I>POP3
&gt;<i> for each user.
</I>
Each message is basically &quot;please poll the POP3 mailbox for user XYZ&quot;, then?

&gt;<i> In Java [...] I wished I could have 10 000 threads running at the same
</I>time

Oh yes, wouldn't that be nice :-)

&gt;<i>   I'm considering Erlang because of the scalability and concurrency
</I>&gt;<i> features. I know I can have thousands of Erlang process connected to POP3
</I>&gt;<i> accounts on the internet, provided I have enough file descriptors, without
</I>&gt;<i> doing many fancy stuff.
</I>
Absolutely. Because of the file-descriptor limit, you'd probably still
want some kind of queueing system in place, though. (Even if it was just
an ad-hoc one on the erlang side.)

&gt;<i>   When I came across RabbitMQ, I thought that was a good way to interface
</I>&gt;<i> Java with Erlang ... But first I wanted to know if I could process or
</I>&gt;<i> consume the messages on the Java side with an efficient thread pool, then
</I>in
&gt;<i> a second phase, move the message consumption to Erlang.
</I>
Yes, that is a sensible thing to do. A queue containing all the
poll-requests could have several consumers, in one or several JVMs,
consuming from it, making a simple load-balancing worker pool.

How are you getting on? If you're using RabbitMQ, and have any questions
or comments, we'd love to hear about it.

Thanks,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] <A HREF="http://www.lshift.net/">http://www.lshift.net/</A> | Email: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000457.html">[rabbitmq-discuss] Scalable multithreaded consumer
</A></li>
	<LI>Next message: <A HREF="000461.html">[rabbitmq-discuss] Scalable multithreaded consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#459">[ date ]</a>
              <a href="thread.html#459">[ thread ]</a>
              <a href="subject.html#459">[ subject ]</a>
              <a href="author.html#459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
