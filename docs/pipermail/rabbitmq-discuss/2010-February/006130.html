<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Garbage Collection Problem in Consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Garbage%20Collection%20Problem%20in%20Consumer&In-Reply-To=558967a41002012148u60c8b8c4sae08ad2e1fc67803%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006129.html">
   <LINK REL="Next"  HREF="006131.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Garbage Collection Problem in Consumer</H1>
    <B>Gustavo Aquino</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Garbage%20Collection%20Problem%20in%20Consumer&In-Reply-To=558967a41002012148u60c8b8c4sae08ad2e1fc67803%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Garbage Collection Problem in Consumer">aquino.gustavo at gmail.com
       </A><BR>
    <I>Tue Feb  2 11:31:50 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006129.html">[rabbitmq-discuss] Garbage Collection Problem in Consumer
</A></li>
        <LI>Next message: <A HREF="006131.html">[rabbitmq-discuss] Garbage Collection Problem in Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6130">[ date ]</a>
              <a href="thread.html#6130">[ thread ]</a>
              <a href="subject.html#6130">[ subject ]</a>
              <a href="author.html#6130">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Seema,

You can't control when your GC will run, if you declare this objects into
loop and don't are using hash tables or maps to reutilize it, so it will
be eligible to GC automatically, because your life cycle over in next loop.

Today I have a consumer in Java consuming about 1.000 m/s and never used
more than 15Mb and this objects never go throw eden memory, if you don't
forward this objects created inside consumer loop, this objects will be
automatic eligible for GC but GC don't run immediately you need to wait.

Can you post your consumer code ?



On Tue, Feb 2, 2010 at 3:48 AM, Seema Biradar &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">seemasbiradar at gmail.com</A>&gt;wrote:

&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> i tried the rabbit MQ with Producer and Consumer Program.
</I>&gt;<i>
</I>&gt;<i> in Consumer side i am getting the all the Message, but the following
</I>&gt;<i> objects
</I>&gt;<i>
</I>&gt;<i> com.rabbitmq.client.QueueingConsumer.Delivery
</I>&gt;<i> com.rabbitmq.client.Envelop
</I>&gt;<i> com.rabbitmq.client.AMQP.BasicProperties
</I>&gt;<i>
</I>&gt;<i> are created for each message and not garbage collected immediately after
</I>&gt;<i> consuming.
</I>&gt;<i>
</I>&gt;<i> *in Producer.java
</I>&gt;<i> *
</I>&gt;<i> used basic publish as shown below.
</I>&gt;<i>
</I>&gt;<i> channel.basicPublish(exchangeName, routingKey, true, false,
</I>&gt;<i> MessageProperties.PERSISTENT_TEXT_PLAIN, bao.toByteArray()) ;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *Consumer.java
</I>&gt;<i> *
</I>&gt;<i> channel.basicConsume(queueName, true, consumer);
</I>&gt;<i>
</I>&gt;<i> with no-acknowledgement *true*.
</I>&gt;<i>
</I>&gt;<i> Please let me know, how to make the above object eligible for garbage
</I>&gt;<i> collection immediately after consuming.
</I>&gt;<i> for Consumer program The Heap Memory allocated is more , as this is
</I>&gt;<i> performace issue
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Seema
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100202/e73e5e6c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100202/e73e5e6c/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006129.html">[rabbitmq-discuss] Garbage Collection Problem in Consumer
</A></li>
	<LI>Next message: <A HREF="006131.html">[rabbitmq-discuss] Garbage Collection Problem in Consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6130">[ date ]</a>
              <a href="thread.html#6130">[ thread ]</a>
              <a href="subject.html#6130">[ subject ]</a>
              <a href="author.html#6130">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
