<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Monitoring Message Throughput
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Monitoring%20Message%20Throughput&In-Reply-To=af1bce591002061340u1c84f840i300464eb647ffcf3%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006214.html">
   <LINK REL="Next"  HREF="006215.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Monitoring Message Throughput</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Monitoring%20Message%20Throughput&In-Reply-To=af1bce591002061340u1c84f840i300464eb647ffcf3%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Monitoring Message Throughput">matthew at lshift.net
       </A><BR>
    <I>Thu Feb 11 16:17:26 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006214.html">[rabbitmq-discuss] Monitoring Message Throughput
</A></li>
        <LI>Next message: <A HREF="006215.html">[rabbitmq-discuss] Monitoring Message Throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6304">[ date ]</a>
              <a href="thread.html#6304">[ thread ]</a>
              <a href="subject.html#6304">[ subject ]</a>
              <a href="author.html#6304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Feb 06, 2010 at 04:40:02PM -0500, Gavin M. Roy wrote:
&gt;<i> On Sat, Feb 6, 2010 at 4:17 PM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt;wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; By &quot;throughput&quot; do you mean:
</I>&gt;<i> &gt; - rate at which messages are enqueued?
</I>&gt;<i> 
</I>&gt;<i> For me, yes
</I>&gt;<i> 
</I>&gt;<i> &gt; - rate at which messages are dequeued?
</I>&gt;<i> 
</I>&gt;<i> For me, yes
</I>
Ironically enough, in the new persister, we actually use these rates
(ingress and egress rates) internally to make various decisions.
Currently, you can get hold of them (if you're using the new persister -
branch bug21673) by the magic name &quot;raw_vq_status&quot;. Note this is
undocumented and will not last too much longer - it exists for debugging
purposes only. However:

rabbitmqctl list_queues name messages messages_unacknowledged durable memory raw_vq_status
testA   3503    0       true    6657424  [{q1,0},{q2,0},{delta,{delta,undefined,0,undefined}},{q3,0},{q4,3503},{len,3503},{outstanding_txns,0},{target_ram_msg_count,undefined},{ram_msg_count,3503},{ram_index_count,0},{avg_egress_rate,0},{avg_ingress_rate,0},{next_seq_id,3503}]

the two fields there you're interested in are the avg_egress_rate and
avg_ingress_rate. It's a rolling average, smoothed over the last two
sample periods, where a period length is nominally 5 seconds.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006214.html">[rabbitmq-discuss] Monitoring Message Throughput
</A></li>
	<LI>Next message: <A HREF="006215.html">[rabbitmq-discuss] Monitoring Message Throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6304">[ date ]</a>
              <a href="thread.html#6304">[ thread ]</a>
              <a href="subject.html#6304">[ subject ]</a>
              <a href="author.html#6304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
