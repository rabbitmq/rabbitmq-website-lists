<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Disabling channel.flow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Disabling%20channel.flow&In-Reply-To=64de5c8b1002010913o1ee469e5r520d23f4b6a65a38%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006126.html">
   <LINK REL="Next"  HREF="006113.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Disabling channel.flow</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Disabling%20channel.flow&In-Reply-To=64de5c8b1002010913o1ee469e5r520d23f4b6a65a38%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Disabling channel.flow">matthew at lshift.net
       </A><BR>
    <I>Mon Feb  1 17:23:44 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006126.html">[rabbitmq-discuss] Disabling channel.flow
</A></li>
        <LI>Next message: <A HREF="006113.html">[rabbitmq-discuss] RabbitMQ-shovel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6127">[ date ]</a>
              <a href="thread.html#6127">[ thread ]</a>
              <a href="subject.html#6127">[ subject ]</a>
              <a href="author.html#6127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Mon, Feb 01, 2010 at 10:43:44PM +0530, Rajkumar S wrote:
&gt;<i> On Mon, Feb 1, 2010 at 3:47 PM, Matthew Sackman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at lshift.net</A>&gt; wrote:
</I>&gt;<i> &gt; Which version of Rabbit are you using? - the details for disabling
</I>&gt;<i> &gt; memory monitoring have changed between 1.7.0 and 1.7.1.
</I>&gt;<i> 
</I>&gt;<i> I downloaded rabbitmq-public-umbrella using hg, the tip points to:
</I>&gt;<i> 
</I>&gt;<i> changeset:   44:259da26ec626
</I>&gt;<i> tag:         tip
</I>&gt;<i> parent:      43:0d8d8a6dddae
</I>&gt;<i> parent:      42:b08e26cc7170
</I>&gt;<i> user:        David Wragg &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dpw at lshift.net</A>&gt;
</I>&gt;<i> date:        Mon Oct 05 13:03:37 2009 +0100
</I>&gt;<i> summary:     Merge bug21745 into default
</I>&gt;<i> 
</I>&gt;<i> I used hg to install stomp plugin also along with rabbit. I can always
</I>&gt;<i> try and install latest/other  versions if that helps.
</I>
You should *never* use tip. Tip is one of the daftest features of hg and
just points to the most recent commit. Given that we do branch per bug,
you could simply get *any* currently active branch.

There are later revisions than this. I would recommend you pull and hg
up -C default.

What you've actually given is the revision under
rabbitmq-public-umbrella. I should have been more clear: I was asking
for which version of rabbitmq-server are you using? However, I assume
you're building from source, in which case the details at
<A HREF="http://www.rabbitmq.com/extensions.html#memsup">http://www.rabbitmq.com/extensions.html#memsup</A> should help.

&gt;<i> I understand, but the flow control keeps hitting frequently enough to
</I>&gt;<i> make rabbit-stomp almost useless :( So far I have not been able to
</I>&gt;<i> exercise any sort of control over when the flow control kicks in. Is
</I>&gt;<i> it possible to know how much memory rabbit thinks it has and how much
</I>&gt;<i> more memory it can use before flow control kicks in?
</I>
Yes. In the logs, at start up you should see a message like:

=INFO REPORT==== 1-Feb-2010::13:36:41 ===
Memory limit set to 3151MB.

This is controlled by the vm_memory_high_watermark parameter which is
documented in the link above. When the Erlang VM has allocated more than
this amount of RAM, flow control will be invoked. If you set the
parameter to 0, then Rabbit will not monitor memory, nor will flow
control be used.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006126.html">[rabbitmq-discuss] Disabling channel.flow
</A></li>
	<LI>Next message: <A HREF="006113.html">[rabbitmq-discuss] RabbitMQ-shovel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6127">[ date ]</a>
              <a href="thread.html#6127">[ thread ]</a>
              <a href="subject.html#6127">[ subject ]</a>
              <a href="author.html#6127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
