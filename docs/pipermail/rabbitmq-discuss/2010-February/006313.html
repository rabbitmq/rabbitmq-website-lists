<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Changing hostname under rabbitmq-server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Changing%20hostname%20under%20rabbitmq-server&In-Reply-To=670a00381002120713s3b446c53v8ac345900f84cb5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006312.html">
   <LINK REL="Next"  HREF="006316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Changing hostname under rabbitmq-server</H1>
    <B>Robert Raschke</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Changing%20hostname%20under%20rabbitmq-server&In-Reply-To=670a00381002120713s3b446c53v8ac345900f84cb5%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Changing hostname under rabbitmq-server">rtrlists at googlemail.com
       </A><BR>
    <I>Fri Feb 12 15:51:34 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006312.html">[rabbitmq-discuss] Changing hostname under rabbitmq-server
</A></li>
        <LI>Next message: <A HREF="006316.html">[rabbitmq-discuss] Bad cookie when clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6313">[ date ]</a>
              <a href="thread.html#6313">[ thread ]</a>
              <a href="subject.html#6313">[ subject ]</a>
              <a href="author.html#6313">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Feb 12, 2010 at 3:13 PM, Peter Fitzgibbons &lt;
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">peter.fitzgibbons at gmail.com</A>&gt; wrote:

&gt;<i> HI Folks,
</I>&gt;<i>
</I>&gt;<i> My newbie status is visible in this problem.
</I>&gt;<i> I'm wanting to use Alice/Wonderland to monitor my RabbitMQ instance.
</I>&gt;<i> Unfortunately, my hostname at the time if RabbitMQ install was
</I>&gt;<i> 'vm-peter-u804B'  -- no domain
</I>&gt;<i> So, I changed the system hostname to 'vm-peter-u804B.peter' (/etc/hosts and
</I>&gt;<i> /etc/hostname).  hostname and hostname -s show 'vm-peter-u804B.peter' and
</I>&gt;<i> 'vm-peter-u804B'
</I>&gt;<i> I have rebooted several times.
</I>&gt;<i>
</I>&gt;<i> Now rabbit fails to start with /var/log/rabbitmq/startup_log :
</I>&gt;<i>
</I>&gt;<i> node          : <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at vm-peter-u804B</A>
</I>&gt;<i> app descriptor:
</I>&gt;<i> /usr/lib/rabbitmq/lib/rabbitmq_server-1.7.1/sbin/../ebin/rabbit.app
</I>&gt;<i> home dir      : /var/lib/rabbitmq
</I>&gt;<i> cookie hash   : x3xctmeBS7wtsHr18+Og1w==
</I>&gt;<i> log           : /var/log/rabbitmq/rabbit.log
</I>&gt;<i> sasl log      : /var/log/rabbitmq/rabbit-sasl.log
</I>&gt;<i> database dir  : /var/lib/rabbitmq/mnesia/rabbit
</I>&gt;<i>
</I>&gt;<i> starting database             ...timeout
</I>&gt;<i> {&quot;init terminating in
</I>&gt;<i> do_boot&quot;,{{nocatch,{error,{cannot_start_application,rabbit,{{timeout_waiting_for_tables,[rabbit_user,rabbit_user_permission,rabbit_vhost,rabbit_config,rabbit_durable_route,rabbit_durable_exchange,rabbit_durable_queue]},{rabbit,start,[normal,[]]}}}}},[{init,start_it,1},{init,start_em,1}]}}
</I>&gt;<i>
</I>&gt;<i> Could anyone shed light on how to make Rabbit/Mnesia happy again?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>The Erlang Mnesia database is host specific (because it is a distributed
DB). The simplest way to get you fixed is to clear out the database dir.
That's assuming that you can stand losing any persisted exchanges etc. The
persisted messages are also stored in that folder, but not in Mnesia.

If you need to keep any persisted exchanges, queues, message etc. then that
is a bit harder.

Robby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100212/28c1d02c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100212/28c1d02c/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006312.html">[rabbitmq-discuss] Changing hostname under rabbitmq-server
</A></li>
	<LI>Next message: <A HREF="006316.html">[rabbitmq-discuss] Bad cookie when clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6313">[ date ]</a>
              <a href="thread.html#6313">[ thread ]</a>
              <a href="subject.html#6313">[ subject ]</a>
              <a href="author.html#6313">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
