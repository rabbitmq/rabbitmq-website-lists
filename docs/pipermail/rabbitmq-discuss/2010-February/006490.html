<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang Client Example Code
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20Client%20Example%20Code&In-Reply-To=269388e31002252318r27002d5r92bdf40794979990%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006484.html">
   <LINK REL="Next"  HREF="006501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang Client Example Code</H1>
    <B>Glenn Rempe</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20Client%20Example%20Code&In-Reply-To=269388e31002252318r27002d5r92bdf40794979990%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Erlang Client Example Code">glenn at rempe.us
       </A><BR>
    <I>Fri Feb 26 22:14:41 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006484.html">[rabbitmq-discuss] Erlang Client Example Code
</A></li>
        <LI>Next message: <A HREF="006501.html">[rabbitmq-discuss] Erlang Client Example Code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6490">[ date ]</a>
              <a href="thread.html#6490">[ thread ]</a>
              <a href="subject.html#6490">[ subject ]</a>
              <a href="author.html#6490">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Feb 25, 2010 at 11:18 PM, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:
&gt;<i> Glenn,
</I>&gt;<i>
</I>&gt;<i> On Fri, Feb 26, 2010 at 3:53 PM, Glenn Rempe &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">glenn at rempe.us</A>&gt; wrote:
</I>&gt;&gt;<i> Thanks Ben. &#160;I've made your suggested changes, and I've sent Dane a
</I>&gt;&gt;<i> pull request.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You can take a look here.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://github.com/grempe/rabbitmq-erlang-client-examples">http://github.com/grempe/rabbitmq-erlang-client-examples</A>
</I>&gt;<i>
</I>&gt;<i> That looks a look terser :-)
</I>
Great.

&gt;<i>
</I>&gt;<i> On second glance here a few more comments:
</I>&gt;<i>
</I>&gt;<i> - In analogy to amqp_connection:close/1, there is also the shorter
</I>&gt;<i> amqp_channel:close/1 as well;
</I>&gt;<i> - It doesn't seem like you need to declare a specific queue name - you
</I>&gt;<i> could potentially use a server generated queue name if you'd like;
</I>
I'll look at making those changes.

&gt;<i>
</I>&gt;&gt;<i> It might be nice to figure out a way to pull these examples into the
</I>&gt;&gt;<i> Erlang client codebase so others can see it without hunting.
</I>&gt;<i>
</I>&gt;<i> Fair point. ATM we do have a programmers guide for the Erlang client
</I>&gt;<i> and generated API docs, but this is not on the RabbitMQ website
</I>&gt;<i> because the Erlang client is not a officially supported client yet. So
</I>&gt;<i> that may follow at some stage.
</I>&gt;<i>
</I>&gt;<i> If you did decide to include say an examples directory into the core
</I>&gt;<i> client source tree, you'd need to create a patch against this and
</I>&gt;<i> submit that. Having said that, you'd need to make sure of the
</I>&gt;<i> following in order for the patch to be seriously considered:
</I>&gt;<i>
</I>&gt;<i> - It would have to bind in the current Makefile, i.e. you'd need to
</I>&gt;<i> have a target to run all of the examples;
</I>&gt;<i> - The examples would have to be reasonably canonical and expressive in
</I>&gt;<i> nature. In your stocks example you'd need to delve in to the routing
</I>&gt;<i> key matching mechanics a little bit more. Though they can be
</I>&gt;<i> informative, I'm not sure that the code verbosity introduced by the
</I>&gt;<i> log statements is a good thing. You may want to ask on the list what
</I>&gt;<i> the intention of the amqp_dbg module is;
</I>&gt;<i> - You'd need to document them as well :-(
</I>&gt;<i>
</I>&gt;<i> So it may be less effort on your part to remain separate from the core
</I>&gt;<i> client source tree, but that's down to you.
</I>
Yes, it would be more effort.  I don't think I'll be taking that on at
the moment.  :-)


&gt;<i> In the meantime, I'm sure that Alexis will link your github tree into
</I>&gt;<i> an appropriate space on the community part of the RabbitMQ website.
</I>
That's great.  However please link to 'careo's github repo.  I forked
his and he has been pulling my changes in.  My intention in doing this
was both to aid in my own learning, as well as to provide at least one
working version of code for the community to look at.  I think I've
accomplished that.  Hopefully others will find it helpful.

<A HREF="http://github.com/careo/rabbitmq-erlang-client-examples">http://github.com/careo/rabbitmq-erlang-client-examples</A>

&gt;<i>
</I>&gt;&gt;<i> I'm struggling a bit with how I can best make use of the direct client
</I>&gt;&gt;<i> since it seems that it can only run on the same node as the RabbitMQ
</I>&gt;&gt;<i> server process (and not across nodes). &#160;If I am mistaken please feel
</I>&gt;&gt;<i> free to correct me. :-)
</I>&gt;<i>
</I>&gt;<i> The motivation behind the direct client is to provide the AMQP library
</I>&gt;<i> semantics transparently to an application that is co-located on the
</I>&gt;<i> same node as the server. The advantage of this is that you don't incur
</I>&gt;<i> the network and marshalling overhead (having said this, I don't think
</I>&gt;<i> anybody has actually benchmarked this yet). This provides the
</I>&gt;<i> application with a non-Rabbit specific API but lets you embed this
</I>&gt;<i> directly into a running instance of Rabbit.
</I>&gt;<i>
</I>&gt;<i> One example use case of this is the rabbit_shovel plugin, which can
</I>&gt;<i> take advantage of the colocation if you configure it to do so.
</I>
Thanks.  I was a bit surprised of the limitations of the direct
client.  Being an Erlang noob I was naively hoping that it would allow
me to take advantage of the distributed nature of Erlang nodes to
communicate with a rabbit instance anywhere in the distributed erlang
node cloud.  That would be nice.  ;-)  I think I'll probably have to
use the network client despite its additional overhead.

I'm surprised too that the Erlang client isn't a first class supported
client.  I saw the same thing working with the CouchDB team even
though you've both created excellent 'poster children' applications
for Erlang.  That's too bad.  :-(

Cheers and thanks for the look at the code.

Glenn


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006484.html">[rabbitmq-discuss] Erlang Client Example Code
</A></li>
	<LI>Next message: <A HREF="006501.html">[rabbitmq-discuss] Erlang Client Example Code
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6490">[ date ]</a>
              <a href="thread.html#6490">[ thread ]</a>
              <a href="subject.html#6490">[ subject ]</a>
              <a href="author.html#6490">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
