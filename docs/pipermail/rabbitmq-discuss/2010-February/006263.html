<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] PHP Client libraries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%3D%3Fwindows-1251%3Fq%3FPHP_Client_libraries%3F%3D&In-Reply-To=4B711AF9.4010304%40stresstiming.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006265.html">
   <LINK REL="Next"  HREF="006271.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] PHP Client libraries</H1>
    <B>Alexandre Kalendarev</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%3D%3Fwindows-1251%3Fq%3FPHP_Client_libraries%3F%3D&In-Reply-To=4B711AF9.4010304%40stresstiming.de"
       TITLE="[rabbitmq-discuss] PHP Client libraries">akalend at mail.ru
       </A><BR>
    <I>Tue Feb  9 11:00:07 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006265.html">[rabbitmq-discuss] How can we increase the memory size of rabbitmq server?
</A></li>
        <LI>Next message: <A HREF="006271.html">[rabbitmq-discuss] PHP Client libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6263">[ date ]</a>
              <a href="thread.html#6263">[ thread ]</a>
              <a href="subject.html#6263">[ subject ]</a>
              <a href="author.html#6263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dieter,

&gt;<i> thank you for your reply. Am I right, the module does not support 
</I>&gt;<i> consuming messages? 
</I>
The module is support Consume and Get methods. But Consume 
methods is sync and GET is async.

If You use the  the consume in the WEB pages, the HTTP protocol is async and You can't wait if you have not commet technology.
My recomendation  is use the series of GET method:

// get queue items
$queue = new AMQPQueue(APMQConection(), 'my_queue');
$i=0;
$res = true;
while ($res = $queue-&gt;get() !== false  ){
    $i++;
    echo &quot;$i : {$res['msg']}&lt;br&gt;\n&quot;;
}

But, You can use the Consume, You must the read queue lenght and make Consume of len messages. 
It is guarantie of absent waiting new messages.


// consume
$i=0;
$queue = new AMQPQueue(APMQConection());

$n = $queue-&gt;declare('my_queue');  // we get the lenght of queue
   
$queueMessages = $queue-&gt;consume( $n ); // we reading $n messages,  all queue.
foreach($queueMessages as $item){
  $i++;
  echo &quot;$i.$item&quot;;
}

If $n less lenght of queue, the all nonreaded messages will be gone.

The Consume method is faster.

&gt;<i>Or Am i mixing up the Modules?
</I>the module php-amqp  <A HREF="http://code.google.com/p/php-amqp/">http://code.google.com/p/php-amqp/</A>   don't support consume, bind and queue. It is only publish.

If You have any questions send me, I will very happeness ask You. Sorry for my English.

Alexandre


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006265.html">[rabbitmq-discuss] How can we increase the memory size of rabbitmq server?
</A></li>
	<LI>Next message: <A HREF="006271.html">[rabbitmq-discuss] PHP Client libraries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6263">[ date ]</a>
              <a href="thread.html#6263">[ thread ]</a>
              <a href="subject.html#6263">[ subject ]</a>
              <a href="author.html#6263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
