<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ (branch bug21673) running out of	file descriptors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20%28branch%20bug21673%29%20running%20out%20of%0A%09file%20descriptors&In-Reply-To=ae4b61c1002172358pd38ae5dw36ca54e0e6730f36%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006396.html">
   <LINK REL="Next"  HREF="006401.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ (branch bug21673) running out of	file descriptors</H1>
    <B>Andrey Smirnov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20%28branch%20bug21673%29%20running%20out%20of%0A%09file%20descriptors&In-Reply-To=ae4b61c1002172358pd38ae5dw36ca54e0e6730f36%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ (branch bug21673) running out of	file descriptors">smirnov.andrey at gmail.com
       </A><BR>
    <I>Thu Feb 18 08:02:42 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006396.html">[rabbitmq-discuss] RabbitMQ (branch bug21673) running out of file	descriptors
</A></li>
        <LI>Next message: <A HREF="006401.html">[rabbitmq-discuss] RabbitMQ (branch bug21673) running out of file descriptors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6397">[ date ]</a>
              <a href="thread.html#6397">[ thread ]</a>
              <a href="subject.html#6397">[ subject ]</a>
              <a href="author.html#6397">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Forgot to add: at the time of crash we had more than 10k queues...
(Looks like more than file descriptor limit)

2010/2/18 Andrey Smirnov &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">smirnov.andrey at gmail.com</A>&gt;:
&gt;<i> Hello!
</I>&gt;<i>
</I>&gt;<i> We're running RabbitMQ from branch bug21673 (built yesterday). We have
</I>&gt;<i> a lot of non-persisten queues (2k - 10k+) that are created/destroyed
</I>&gt;<i> all the time. Some queues have unconsumed messaged and they will get
</I>&gt;<i> destroyed with unconsumed messages.
</I>&gt;<i>
</I>&gt;<i> When file descriptor limit for RabbitMQ was left to default 1024 files
</I>&gt;<i> it was dying in 2 hours. I've raised the limit to 10240 files and it
</I>&gt;<i> worked for 16 hours and crashed.
</I>&gt;<i>
</I>&gt;<i> Crash for clients looks like &quot;INTERNAL_ERROR&quot; error on connections.
</I>&gt;<i> RabbitMQ is still running and eating 100% of CPU. Restarting RabbitMQ
</I>&gt;<i> helps to revive it.
</I>&gt;<i>
</I>&gt;<i> Adding log file excerpt (log is huge, it contains dump of all internal
</I>&gt;<i> state, I have it if someone will be interested):
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 16-Feb-2010::04:42:05 ===
</I>&gt;<i> Limiting to approx 10190 file handles
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 16-Feb-2010::04:42:05 ===
</I>&gt;<i> Memory limit set to 3196MB.
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 16-Feb-2010::04:42:05 ===
</I>&gt;<i> Using rabbit_msg_store_ets_index to provide index for message store
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 16-Feb-2010::04:42:05 ===
</I>&gt;<i> started TCP Listener on 0.0.0.0:5672
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 16-Feb-2010::04:42:26 ===
</I>&gt;<i> accepted TCP connection on 0.0.0.0:5672 from &lt;redacted&gt;:35525
</I>&gt;<i>
</I>&gt;<i> .....
</I>&gt;<i>
</I>&gt;<i> ERROR REPORT==== 17-Feb-2010::17:32:16 ===
</I>&gt;<i> ** Generic server &lt;0.7466.264&gt; terminating
</I>&gt;<i> ** Last message in was {'$gen_cast',
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {method,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {'queue.declare',0,
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;&quot;qik.item.session.83c5e30a-180e-4f2a-b59d-c6bd7938faac&quot;&gt;&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; false,false,false,false,false,[]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; none}}
</I>&gt;<i> ** When Server state == {ch,running,3,&lt;0.1622.0&gt;,&lt;0.7464.264&gt;,undefined,none,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{set,0,16,16,8,80,48,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[],[]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [],[]}}},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;1,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{[],[]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{[],[]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;&lt;&quot;guest&quot;&gt;&gt;,&lt;&lt;&quot;localhost&quot;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;&quot;qik.item.session.6c6a3c8e-38d7-4c69-bb1c-26ae3cc00d67&quot;&gt;&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{dict,0,16,16,8,80,48,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [],[]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[],[]}}}}
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i> ** {{badmatch,{error,{{badmatch,{error,emfile}},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[{rabbit_queue_index,get_journal_handle,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {rabbit_queue_index,load_journal,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {rabbit_queue_index,init,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {rabbit_variable_queue,init,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {rabbit_amqqueue_process,init,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {gen_server2,init_it,6},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {proc_lib,init_p_do_apply,3}]}}},
</I>&gt;<i> &#160; &#160;[{rabbit_amqqueue,start_queue_process,1},
</I>&gt;<i> &#160; &#160; {rabbit_amqqueue,declare,4},
</I>&gt;<i> &#160; &#160; {rabbit_channel,handle_method,3},
</I>&gt;<i> &#160; &#160; {rabbit_channel,handle_cast,2},
</I>&gt;<i> &#160; &#160; {gen_server2,handle_msg,7},
</I>&gt;<i> &#160; &#160; {proc_lib,wake_up,3}]}
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 17-Feb-2010::17:32:16 ===
</I>&gt;<i> connection &lt;0.1622.0&gt; (running), channel 3 - error:
</I>&gt;<i> {{badmatch,{error,{{badmatch,{error,emfile}},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [{rabbit_queue_index,get_journal_handle,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_queue_index,load_journal,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_queue_index,init,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_variable_queue,init,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_amqqueue_process,init,1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{gen_server2,init_it,6},
</I>&gt;<i>
</I>&gt;<i> ....
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 17-Feb-2010::17:33:08 ===
</I>&gt;<i> Mnesia(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SM2</A>): ** ERROR ** (core dumped to file:
</I>&gt;<i> &quot;/usr/local/sbin/<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbit at SM2_1266_456788_594733</A>&quot;)
</I>&gt;<i> &#160;** FATAL ** Cannot open log file
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;:
</I>&gt;<i> {file_error,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;,
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;emfile}
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 17-Feb-2010::17:33:08 ===
</I>&gt;<i> ** gen_event handler rabbit_error_logger crashed.
</I>&gt;<i> ** Was installed in error_logger
</I>&gt;<i> ** Last event was: {error,&lt;0.58.0&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {&lt;0.61.0&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&quot;Mnesia(~p): ** ERROR ** (core dumped to file:
</I>&gt;<i> ~p)~n ** FATAL ** Cannot open log file ~p: ~p~n&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SM2</A>,
</I>&gt;<i>
</I>&gt;<i> &quot;/usr/local/sbin/<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbit at SM2_1266_456788_594733</A>&quot;,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {file_error,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; emfile}]}}
</I>&gt;<i> ** When handler state == {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,exchange,&lt;&lt;&quot;amq.rabbitmq.log&quot;&gt;&gt;}
</I>&gt;<i> ** Reason == {{function_clause,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; [{gen,call,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [{rex,{error,{<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">node_not_running,rabbit at SM2</A>}}},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;'$gen_call',
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{call,mnesia_lib,db_select_cont,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [ram_copies,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_route,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {binding,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{resource,&lt;&lt;&quot;localhost&quot;&gt;&gt;,exchange,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;&lt;&quot;qik.exc.session&quot;&gt;&gt;},
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;&quot;qik.item.session.22ff9df4-c115-4cdf-a721-27f99eba9aaa&quot;&gt;&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{resource,&lt;&lt;&quot;localhost&quot;&gt;&gt;,queue,
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;&quot;qik.item.session.22ff9df4-c115-4cdf-a721-27f99eba9aaa&quot;&gt;&gt;},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [],100,&lt;&lt;&gt;&gt;,[],0,0},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[{'$1',[],['$1']}]],
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;0.0.0&gt;},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;infinity]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{gen_server,call,3},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rpc,do_call,3},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{mnesia,do_dirty_rpc,5},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{mnesia,select_cont,3},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{mnesia,'-qlc_select/1-fun-0-',1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_exchange,'-match_bindings/2-fun-1-',10},
</I>&gt;<i> &#160; &#160;{rabbit_variable_queue,flush_journal,1},
</I>&gt;<i> &#160; &#160; {rabbit_amqqueue_process,handle_pre_hibernate,1}]}
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 17-Feb-2010::17:33:08 ===
</I>&gt;<i> Mnesia(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SM2</A>): ** ERROR ** (core dumped to file:
</I>&gt;<i> &quot;/usr/local/sbin/<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbit at SM2_1266_456788_594733</A>&quot;)
</I>&gt;<i> &#160;** FATAL ** Cannot open log file
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;:
</I>&gt;<i> {file_error,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;,
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;emfile}
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 17-Feb-2010::17:33:08 ===
</I>&gt;<i> ** gen_event handler rabbit_error_logger crashed.
</I>&gt;<i> ** Was installed in error_logger
</I>&gt;<i> ** Last event was: {error,&lt;0.58.0&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {&lt;0.61.0&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&quot;Mnesia(~p): ** ERROR ** (core dumped to file:
</I>&gt;<i> ~p)~n ** FATAL ** Cannot open log file ~p: ~p~n&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SM2</A>,
</I>&gt;<i>
</I>&gt;<i> &quot;/usr/local/sbin/<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbit at SM2_1266_456788_594733</A>&quot;,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {file_error,
</I>&gt;<i>
</I>&gt;<i> &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_durable_route.DCL&quot;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; emfile}]}}
</I>&gt;<i>
</I>&gt;<i> ** When handler state == {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,exchange,&lt;&lt;&quot;amq.rabbitmq.log&quot;&gt;&gt;}
</I>&gt;<i> ** Reason == {{function_clause,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; [{gen,call,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [{rex,{error,{<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">node_not_running,rabbit at SM2</A>}}},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;'$gen_call',
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{call,mnesia_lib,db_select_cont,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [ram_copies,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_route,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {binding,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{resource,&lt;&lt;&quot;localhost&quot;&gt;&gt;,exchange,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;&lt;&quot;qik.exc.session&quot;&gt;&gt;},
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;&quot;qik.item.session.22ff9df4-c115-4cdf-a721-27f99eba9aaa&quot;&gt;&gt;,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{resource,&lt;&lt;&quot;localhost&quot;&gt;&gt;,queue,
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;&quot;qik.item.session.22ff9df4-c115-4cdf-a721-27f99eba9aaa&quot;&gt;&gt;},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [],100,&lt;&lt;&gt;&gt;,[],0,0},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;[{'$1',[],['$1']}]],
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;0.0.0&gt;},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;infinity]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{gen_server,call,3},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rpc,do_call,3},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{mnesia,do_dirty_rpc,5},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{mnesia,select_cont,3},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{mnesia,'-qlc_select/1-fun-0-',1},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_exchange,'-match_bindings/2-fun-1-',10},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{qlc,collect,1}]},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160;{gen_server,call,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; [{rex,{error,{<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">node_not_running,rabbit at SM2</A>}}},
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{call,mnesia_lib,db_select_cont,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; [ram_copies,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{rabbit_route,
</I>&gt;<i>
</I>&gt;<i> .....
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i> ** {{badmatch,{error,emfile}},
</I>&gt;<i> &#160; &#160;[{rabbit_queue_index,get_segment_handle,1},
</I>&gt;<i> &#160; &#160; {rabbit_queue_index,append_journal_to_segment,2},
</I>&gt;<i> &#160; &#160; {rabbit_queue_index,'-flush_journal/1-fun-0-',3},
</I>&gt;<i> &#160; &#160; {lists,foldl,3},
</I>&gt;<i> &#160; &#160; {rabbit_queue_index,segment_fold,3},
</I>&gt;<i> &#160; &#160; {rabbit_queue_index,flush_journal,1},
</I>&gt;<i> &#160; &#160; {rabbit_variable_queue,flush_journal,1},
</I>&gt;<i> &#160; &#160; {rabbit_amqqueue_process,handle_pre_hibernate,1}]}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Andrey Smirnov
</I>&gt;<i>
</I>


-- 
Andrey Smirnov,
phone. +7 (905) 769-83-20
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006396.html">[rabbitmq-discuss] RabbitMQ (branch bug21673) running out of file	descriptors
</A></li>
	<LI>Next message: <A HREF="006401.html">[rabbitmq-discuss] RabbitMQ (branch bug21673) running out of file descriptors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6397">[ date ]</a>
              <a href="thread.html#6397">[ thread ]</a>
              <a href="subject.html#6397">[ subject ]</a>
              <a href="author.html#6397">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
