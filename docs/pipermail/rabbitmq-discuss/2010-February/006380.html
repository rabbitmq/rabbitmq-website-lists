<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] a common-lisp amqp client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20a%20common-lisp%20amqp%20client&In-Reply-To=4B7C6850.8000509%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006379.html">
   <LINK REL="Next"  HREF="006384.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] a common-lisp amqp client</H1>
    <B>james anderson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20a%20common-lisp%20amqp%20client&In-Reply-To=4B7C6850.8000509%40lshift.net"
       TITLE="[rabbitmq-discuss] a common-lisp amqp client">james.anderson at setf.de
       </A><BR>
    <I>Wed Feb 17 23:03:25 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006379.html">[rabbitmq-discuss] a common-lisp amqp client
</A></li>
        <LI>Next message: <A HREF="006384.html">[rabbitmq-discuss] a common-lisp amqp client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6380">[ date ]</a>
              <a href="thread.html#6380">[ thread ]</a>
              <a href="subject.html#6380">[ subject ]</a>
              <a href="author.html#6380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>good evening;

On 2010-02-17, at 23:06 , Matthias Radestock wrote:

&gt;<i> James,
</I>&gt;<i>
</I>&gt;<i> james anderson wrote:
</I>&gt;&gt;<i> the transcript did not indicate that there was any reframing.
</I>&gt;&gt;<i> the two frames with non-zero length were forwarded as published.
</I>&gt;<i>
</I>&gt;<i> That just means the re-framing in that case was sub-optimal - the  
</I>&gt;<i> broker only dropped the zero length frame but left the others  
</I>&gt;<i> unchanged. What version of rabbitmq are you running? In 1.7.2 the  
</I>&gt;<i> re-framing is more aggressive.
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> That is something a broker is permitted to do and in some cases   
</I>&gt;&gt;&gt;<i> even has to do since the negotiated max frame size on the  
</I>&gt;&gt;&gt;<i> publisher  connection and consumer connection may be different.
</I>&gt;&gt;<i> if that were to apply.
</I>&gt;&gt;<i> and where a writer and a reader agree on a frame size?
</I>&gt;<i>
</I>&gt;<i> Even if the publisher and consumer connection happen to have the  
</I>&gt;<i> same negotiated frame size, the server is still entitled to re- 
</I>&gt;<i> frame the content.
</I>&gt;<i>
</I>&gt;&gt;<i> anyway, it seems quite peculiar for a broker to muck with the   
</I>&gt;&gt;<i> clients' data without cause.
</I>&gt;<i>
</I>&gt;<i> You are conflating layers here, which admittedly aren't  
</I>&gt;<i> particularly well-defined in the AMQP specs. Framing is a transport- 
</I>&gt;<i> level concern; it does not appear at the application level. Think  
</I>&gt;<i> of the framing as the same kind of thing your tcp stack does when  
</I>&gt;<i> deciding how to split up a data stream into packets.
</I>&gt;<i>
</I>&gt;<i> Now, atm AMQP only defines one transport, but that will change. In  
</I>&gt;<i> fact RabbitMQ already exposes AMQP over other transports like HTTP  
</I>&gt;<i> and SMTP, and we have gateways to STOMP, etc. Most of these have no  
</I>&gt;<i> notion of framing.
</I>&gt;<i>
</I>&gt;&gt;<i> is there any way to turn it off?
</I>&gt;<i>
</I>&gt;<i> Not without changing the code. If you want to experiment with this,  
</I>&gt;<i> the place to look is rabbit_binary_generator:build_content_frames,  
</I>&gt;<i> iirc.
</I>&gt;<i>
</I>
ok. if there were any other way to do this without incurring  
unnecessary overhead, i'd not be so vocal.
problem is, as you note above, the layers are less than clear, and,  
in fact all thrown into the clients lap to disambiguate. in the  
process of which, i had gathered the following from the specifications.

i had read the passages at the bottom of amqp0-9-1.pdf/page 35 to  
imply that, if frames are strictly sequential, they would also  
continue to exist. frames sent as 1,2,3 and arriving as 1,3 don't  
fall in my classification of a strict order. it is difficult to think  
about a strict ordering between sets with - as you describe, disjoint  
constituents. if the intent is to specify an order for the content of  
the body frames, the specification could be rephrased to say that.

the next paragraph on that page implied that there might be an  
alternative to using a zero-length frame to carry early termination  
information, but i could not make out any command which could be sent  
proactively to actually have the described effect without additional  
disruption. what kind of termination was this passage intended to imply?

i had read the last paragraph of 3.1.1 on page 26 to limit, if not  
preclude, the actions which you describe. yes, there is a possible  
conflict between that paragraph and the passage at the close of  
4.2.6.2 on page 36, but the &quot;MUST NOT&quot;s in the earlier passage are  
neither lightweight nor contingent stipulations, and, as  
demonstrated, the practice most certainly removes information.

in any case, thank you for the pointer.





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100218/f804393d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100218/f804393d/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006379.html">[rabbitmq-discuss] a common-lisp amqp client
</A></li>
	<LI>Next message: <A HREF="006384.html">[rabbitmq-discuss] a common-lisp amqp client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6380">[ date ]</a>
              <a href="thread.html#6380">[ thread ]</a>
              <a href="subject.html#6380">[ subject ]</a>
              <a href="author.html#6380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
