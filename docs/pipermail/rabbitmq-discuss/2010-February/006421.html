<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Re-creation of queues not allowed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Re-creation%20of%20queues%20not%20allowed&In-Reply-To=20100220181140.GA20598%40wellquite.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006419.html">
   <LINK REL="Next"  HREF="006422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Re-creation of queues not allowed</H1>
    <B>Arun Suresh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Re-creation%20of%20queues%20not%20allowed&In-Reply-To=20100220181140.GA20598%40wellquite.org"
       TITLE="[rabbitmq-discuss] Re-creation of queues not allowed">arun.suresh at gmail.com
       </A><BR>
    <I>Sun Feb 21 05:18:37 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006419.html">[rabbitmq-discuss] Re-creation of queues not allowed
</A></li>
        <LI>Next message: <A HREF="006422.html">[rabbitmq-discuss] Re-creation of queues not allowed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6421">[ date ]</a>
              <a href="thread.html#6421">[ thread ]</a>
              <a href="subject.html#6421">[ subject ]</a>
              <a href="author.html#6421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Mathew..

Thank you for your reply..


&gt;<i> Also, It would be really awesome if somebody would explain to me what is
</I>&gt;<i> the
</I>&gt;<i> &gt; recommended approach to a situation when a node goes down.
</I>&gt;<i>
</I>&gt;<i> Depends massively on your situation. Clustering in Rabbit is meant to
</I>&gt;<i> facilitate scalability, not high availability. If you could provide some
</I>&gt;<i> further details of your scenario, we'd be better able to advise.
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i>
</I>&gt;<i>
</I>Ok.. Here is a very simplistic description of our setup..

Assume we have 2 rabbit nodes.. R1 and R2.
and 2 Clinets C1 and C2 (running the same code-base). C1 on startup creates
a connection to R1, creates and subscribes to a queue 'Q'. C2 on startup
creates connection to R2 and subscribes to the same Q. So now we have Q
created on R1 but 2 consumers subscribing to it.

Q is bound to a direct exchange X. The idea is that a producer might publish
an event on X.. which can be handled by either C1 or C2.

Up until now (since we were using Rabbit 1.7.0), If say R1 goes down, C1 is
notified (since it is connected to R1) so C1 reconnects to R2 and recreates
the Q on R2.. it also notifies C2.. so C2 can re-connect to R2 and
re-subscribe to the new queue (also named Q)..
Thus... Thus any event sent on X will still be routed to C1 or C2. (Only
caveat is... when R1 comes back, all messages that were in the Old queue is
appended to the New queue.... since we arnt really particular about the
ordering.. that should be fine..)

How do think we should tackle this situation now ?

Thanx in Advance
-Arun
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100221/464414e3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100221/464414e3/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006419.html">[rabbitmq-discuss] Re-creation of queues not allowed
</A></li>
	<LI>Next message: <A HREF="006422.html">[rabbitmq-discuss] Re-creation of queues not allowed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6421">[ date ]</a>
              <a href="thread.html#6421">[ thread ]</a>
              <a href="subject.html#6421">[ subject ]</a>
              <a href="author.html#6421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
