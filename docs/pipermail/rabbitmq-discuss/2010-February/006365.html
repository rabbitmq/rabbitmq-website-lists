<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] amqp_login -&gt; AMQP_RESPONSE_NONE (RabbitMQ C	Client)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20amqp_login%20-%3E%20AMQP_RESPONSE_NONE%20%28RabbitMQ%0A%20C%09Client%29&In-Reply-To=D2EDA5E6-B26E-48E6-92F3-728BB218C54B%40consequor.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006364.html">
   <LINK REL="Next"  HREF="006369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] amqp_login -&gt; AMQP_RESPONSE_NONE (RabbitMQ C	Client)</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20amqp_login%20-%3E%20AMQP_RESPONSE_NONE%20%28RabbitMQ%0A%20C%09Client%29&In-Reply-To=D2EDA5E6-B26E-48E6-92F3-728BB218C54B%40consequor.de"
       TITLE="[rabbitmq-discuss] amqp_login -&gt; AMQP_RESPONSE_NONE (RabbitMQ C	Client)">tonyg at lshift.net
       </A><BR>
    <I>Wed Feb 17 07:12:08 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006364.html">[rabbitmq-discuss] Handling Channel.Flow method
</A></li>
        <LI>Next message: <A HREF="006369.html">[rabbitmq-discuss] amqp_login -&gt; AMQP_RESPONSE_NONE (RabbitMQ	C	Client)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6365">[ date ]</a>
              <a href="thread.html#6365">[ thread ]</a>
              <a href="subject.html#6365">[ subject ]</a>
              <a href="author.html#6365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Frank,

Frank Goenninger - Consequor Consulting AG wrote:
&gt;<i> Being new to RabbitMQ I am using the C client to write an abstraction  
</I>&gt;<i> layer on top of RabbitMQ. I am trying to do an amqp_login call but  
</I>&gt;<i> always get a AMQP_RESPONSE_NONE in amqp_rpc_reply.
</I>
That looks like a bug in the library to me. Looking at the code paths, I
notice two things:

 1. I'm ignoring the result of amqp_login_inner(). If there's a reason
    for that, I've forgotten it!

 2. Setting aside (1), if the code proceeds to the call to
    amqp_simple_rpc() in amqp_login(), there seems not to be a path
    that can avoid setting reply_type to some non-zero value, which
    makes your AMQP_RESPONSE_NONE result unusual to say the least.

&gt;<i> Is this normal, i.e. this is NOT an error? Do I get a server error if  
</I>&gt;<i> the login fails or do I get this AMQP_RESPONSE_NONE if the login fails?
</I>
You ought to get some non-zero reply_type that is not
AMQP_RESPONSE_NORMAL. AMQP_RESPONSE_NONE is probably a bug in the
library. Unfortunately, during the login procedure, the server is not
allowed to tell you the cause of the problem if it decides it is going
to hang up on you: it will simply drop the connection. So check the
server's error logs to get a clue as to what is going wrong.

Can you post the code you're using for connecting to and logging in to
the broker? It would help in figuring out how you can possibly be seeing
AMQP_RESPONSE_NONE here.

Regards,
  Tony



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006364.html">[rabbitmq-discuss] Handling Channel.Flow method
</A></li>
	<LI>Next message: <A HREF="006369.html">[rabbitmq-discuss] amqp_login -&gt; AMQP_RESPONSE_NONE (RabbitMQ	C	Client)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6365">[ date ]</a>
              <a href="thread.html#6365">[ thread ]</a>
              <a href="subject.html#6365">[ subject ]</a>
              <a href="author.html#6365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
