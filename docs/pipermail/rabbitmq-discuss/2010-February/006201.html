<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to compile rabbitmq-c with visual c++	2005?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20How%20to%20compile%20rabbitmq-c%20with%20visual%20c%2B%2B%0A%092005%3F&In-Reply-To=20100129104223.GB11306%40wellquite.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006249.html">
   <LINK REL="Next"  HREF="006202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to compile rabbitmq-c with visual c++	2005?</H1>
    <B>Erik Anderson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20How%20to%20compile%20rabbitmq-c%20with%20visual%20c%2B%2B%0A%092005%3F&In-Reply-To=20100129104223.GB11306%40wellquite.org"
       TITLE="[rabbitmq-discuss] How to compile rabbitmq-c with visual c++	2005?">erikba at odysseus.anderson.name
       </A><BR>
    <I>Fri Feb  5 18:14:40 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006249.html">[rabbitmq-discuss] connecting to multiple rabbitmq servers	(point-multipoint)
</A></li>
        <LI>Next message: <A HREF="006202.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6201">[ date ]</a>
              <a href="thread.html#6201">[ thread ]</a>
              <a href="subject.html#6201">[ subject ]</a>
              <a href="author.html#6201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Going through the list of digests, missed this thread.  I do have a
**basic** compile of rabbitmq-c working, but I still need to do some
massive code review, I don't believe that it's doing any error
checking at all right now for instance.  Plus as I did it as part of
my job, I'm going to be a bit slow in releasing source
(unfortunately).  I can tell you the issues that I ran into however.

amqp_framing.[ch] are not included in the source and must be
generated.  This cannot be done on a Windows machine.  Find a linux
box and follow at least part of the instructions to build these files

There are a number of references to use of a block as the result of an
expression i.e. expressions of the form &quot;myThing = ({var innerVar;
innerVar=someFunc(); func2(); innerVar });  This structure is unknown
to MS and must be removed.  I rewrote some macros including
AMQP_SIMPLE_RPC, AMQP_MULTIPLE_RESPONSE_RPC to either push casts into
the caller or into a new wrapper function)

Many of the D_ and E_ macros had similar issues and needed to be
changed to functions.

All code calls to AMQP_CHECK_RESULT that expected a response needed to
be rewritten.

There are a number of refrerences in amqp_framing to empty
structures.  These need to be modified as follows:
when declaring, the braces { } must be removed
in amqp_decode_method, any attempt to dereference an empty structure
must be replaced with &quot;*decoded = NULL&quot;

All the datatypes in use must be typedef'ed against the MS-specific
types.  For example, &quot;typedef unsigned __int64 uint64_t&quot;

All socket operations must be translated to use Winsock.  The data
type of a socket changes from &quot;int&quot; to &quot;SOCKET&quot;, all references to
read(),write(), close(), and errno must be changed to send(), recv(),
closesocket(), and something I haven't looked for yet

A shortcut is used to initialize structs that is not supported by MS.
The members of a struct must be initialized explicitly.  #defines
describing common structs have been changed to &quot;static const&quot;.

Other than some of the usual porting dust, those were the highlights.
Still wanna do it?

On Jan 29, 2:42&#160;am, Matthew Sackman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt... at lshift.net</A>&gt; wrote:
&gt;<i> On Fri, Jan 29, 2010 at 05:32:10PM +0800, techabc wrote:
</I>&gt;<i> &gt; Can rabbitmq-c be compiled use microsoft vc8, and how?
</I>&gt;<i> &gt; My application developed with vc++, so I want it.
</I>&gt;<i>
</I>&gt;<i> It's unlikely. Rabbitmq-c is in a highly experimental state and I
</I>&gt;<i> believe it contains some features of C that are specific to gcc.
</I>&gt;<i>
</I>&gt;<i> Yesterday someone else reported on this list that they managed to get
</I>&gt;<i> Rabbitmq-c to compile under Windows, but it took them two weeks of
</I>&gt;<i> effort. You might like to liaise with them to share the necessary
</I>&gt;<i> details.
</I>&gt;<i>
</I>&gt;<i> This was mentioned near the bottom <A HREF="ofhttp://old.nabble.com/Re:-error-message-trying-to-start-stomp-adapter...">ofhttp://old.nabble.com/Re:-error-message-trying-to-start-stomp-adapter...</A>
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttp</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006249.html">[rabbitmq-discuss] connecting to multiple rabbitmq servers	(point-multipoint)
</A></li>
	<LI>Next message: <A HREF="006202.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6201">[ date ]</a>
              <a href="thread.html#6201">[ thread ]</a>
              <a href="subject.html#6201">[ subject ]</a>
              <a href="author.html#6201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
