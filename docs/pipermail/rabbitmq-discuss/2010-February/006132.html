<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Poor performance using a single RabbitMQ connection on high-latency networks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Poor%20performance%20using%20a%20single%20RabbitMQ%0A%20connection%20on%20high-latency%20networks&In-Reply-To=20100201145037.GU11819%40mrnibble.lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006124.html">
   <LINK REL="Next"  HREF="006142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Poor performance using a single RabbitMQ connection on high-latency networks</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Poor%20performance%20using%20a%20single%20RabbitMQ%0A%20connection%20on%20high-latency%20networks&In-Reply-To=20100201145037.GU11819%40mrnibble.lshift.net"
       TITLE="[rabbitmq-discuss] Poor performance using a single RabbitMQ connection on high-latency networks">matthias at lshift.net
       </A><BR>
    <I>Tue Feb  2 12:35:12 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006124.html">[rabbitmq-discuss] Poor performance using a single RabbitMQ connection on high-latency networks
</A></li>
        <LI>Next message: <A HREF="006142.html">[rabbitmq-discuss] Poor performance using a single RabbitMQ	connection on high-latency networks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6132">[ date ]</a>
              <a href="thread.html#6132">[ thread ]</a>
              <a href="subject.html#6132">[ subject ]</a>
              <a href="author.html#6132">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthew Sackman wrote:
&gt;<i> I wonder whether Matthias or Tony may recall why our server options
</I>&gt;<i> are set as they are.
</I>
We don't want to set very large buffer sizes since we do not want to 
increase the memory footprint of connections unnecessarily. The figures 
we currently use are the minimum numbers above which I saw no 
significant performance improvements in the tests I ran ~2 years ago. 
But those tests weren't very extensive.

&gt;<i> Indeed, I'm glad that's fixed. I'll raise a bug internally to have a
</I>&gt;<i> look at these options again. It's really a matter of providing some
</I>&gt;<i> sensible defaults - I'm sure that on every platform, things can be
</I>&gt;<i> improved by specific tunings, but it's a case of finding something that
</I>&gt;<i> works well out of the box.
</I>&gt;<i> 
</I>&gt;<i> If you have any comments or advice for us on these options then we're
</I>&gt;<i> certainly all ears.
</I>
The difficulty is that there are so many variables affecting the result. 
To work out the ideal default settings for the server we'd have to run 
tests that vary all of the following in a sufficiently broad range to 
capture most common rabbit deployments ...

- client buffer sizes
- network characteristics (latency and bandwidth)
- operating system
- message size

...and plot the latency stats achieved for various message rates (we may 
find that certain settings improve latency for low throughput but 
actually reduce overall throughput capacity).

Performing these tests and producing a report would make an ideal 
community project since it requires very little knowledge of the server 
or client internals.

Holger, do you want to have a first stab at it?


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006124.html">[rabbitmq-discuss] Poor performance using a single RabbitMQ connection on high-latency networks
</A></li>
	<LI>Next message: <A HREF="006142.html">[rabbitmq-discuss] Poor performance using a single RabbitMQ	connection on high-latency networks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6132">[ date ]</a>
              <a href="thread.html#6132">[ thread ]</a>
              <a href="subject.html#6132">[ subject ]</a>
              <a href="author.html#6132">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
