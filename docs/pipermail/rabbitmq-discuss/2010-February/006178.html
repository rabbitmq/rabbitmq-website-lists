<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shoveling &amp; Security
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Shoveling%20%26%20Security&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006177.html">
   <LINK REL="Next"  HREF="006180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shoveling &amp; Security</H1>
    <B>Lionel Cons</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Shoveling%20%26%20Security&In-Reply-To="
       TITLE="[rabbitmq-discuss] Shoveling &amp; Security">lionel.cons at cern.ch
       </A><BR>
    <I>Thu Feb  4 13:53:58 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006177.html">[rabbitmq-discuss] does native web xmpp plugin in rabbitmq	makes sense?
</A></li>
        <LI>Next message: <A HREF="006180.html">[rabbitmq-discuss] Shoveling &amp; Security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6178">[ date ]</a>
              <a href="thread.html#6178">[ thread ]</a>
              <a href="subject.html#6178">[ subject ]</a>
              <a href="author.html#6178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The recently announced RabbitMQ-shovel plugin
(<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2010-February/006113.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2010-February/006113.html</A>)
brings interesting security questions.

The current RabbitMQ security model
(<A HREF="http://www.rabbitmq.com/admin-guide.html#access-control">http://www.rabbitmq.com/admin-guide.html#access-control</A>) requires
the user identity to be known by the broker so that it can then
enforce ACLs.

If you shovel from Broker1 to Broker2, with messages ending up in a
resource protected by ACLs, what should Broker2 use to perform
security checks: the identity of the shovel source (i.e. Broker1) or
the identity of the real user who connected to Broker1?

It would make sense to use the identity of the real user but in this
case the shovel must be a special connection, allowing the source to
tag messages with the identity of the user who produced the messages,
i.e. JMSXUserID in the JMS world.

And it's getting worse with read access. If the source queue on
Broker1 is protected, how does Broker1 know that Broker2 will not
violate its security policy? It probably only works if all brokers
share the same security policy.

Reading the RabbitMQ-shovel documentation, it seems that the plugin
does not need to run on one end of the link. So maybe you could shovel
from Broker1 to Broker2 but run the plugin on Broker3. A kind of
man-in-the middle attack...

Cheers,
__________________________________________________________
Lionel Cons        <A HREF="http://cern.ch/lionel.cons">http://cern.ch/lionel.cons</A>
CERN               <A HREF="http://cern.ch">http://cern.ch</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006177.html">[rabbitmq-discuss] does native web xmpp plugin in rabbitmq	makes sense?
</A></li>
	<LI>Next message: <A HREF="006180.html">[rabbitmq-discuss] Shoveling &amp; Security
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6178">[ date ]</a>
              <a href="thread.html#6178">[ thread ]</a>
              <a href="subject.html#6178">[ subject ]</a>
              <a href="author.html#6178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
