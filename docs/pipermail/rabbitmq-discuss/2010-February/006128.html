<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] messages get stuck when using rabbitmq on	windows, but not on osx or 	ubuntu
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20messages%20get%20stuck%20when%20using%20rabbitmq%20on%0A%09windows%2C%20but%20not%20on%20osx%20or%20%09ubuntu&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006121.html">
   <LINK REL="Next"  HREF="006205.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] messages get stuck when using rabbitmq on	windows, but not on osx or 	ubuntu</H1>
    <B>Matthew Scott</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20messages%20get%20stuck%20when%20using%20rabbitmq%20on%0A%09windows%2C%20but%20not%20on%20osx%20or%20%09ubuntu&In-Reply-To="
       TITLE="[rabbitmq-discuss] messages get stuck when using rabbitmq on	windows, but not on osx or 	ubuntu">matt at 11craft.com
       </A><BR>
    <I>Tue Feb  2 05:25:53 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006121.html">[rabbitmq-discuss] .NET BasicPublish randomly blocks forever
</A></li>
        <LI>Next message: <A HREF="006205.html">[rabbitmq-discuss] messages get stuck when using rabbitmq on windows, but not on osx or ubuntu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6128">[ date ]</a>
              <a href="thread.html#6128">[ thread ]</a>
              <a href="subject.html#6128">[ subject ]</a>
              <a href="author.html#6128">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm experiencing a problem with messages getting &quot;stalled&quot; when serving
RabbitMQ with Windows XP.

The context is a distributed job processing system, wherein some message
payloads can be around 250-500 kB.  The clients connecting to the broker are
several programs written in Python using the txAMQP library and the AMQP 0-8
protocol.  (*)

We can submit one job in our system, which results in several small
messages, and four larger messages being routed through RabbitMQ with the
size ranges noted above, and this succeeds.  However, when we submit an
identical job, one message with a larger payload is successfully routed, but
the second one is not.  I can see that it successfully reaches the broker
but never reaches the intended destination, because I get this output:

C:\rabbitmq_server-1.7.1\sbin&gt;rabbitmqctl list_connections send_oct
send_pend
Listing connections ...
594     0
1183650 0
236655  0
616     0
610     0
2492155 256809    &lt;-- here is the stuck message
616     0
616     0
367     0


Configuration:
- rabbitmq 1.7.1 on Windows XP, installed from packages available at
rabbitmq.com
- (also exhibited problem with rabbitmq 1.6.0 on Windows XP)
- all clients running on Windows, OR some clients on Windows (required as
they call out to Windows executables) and some on OS X
- ***exhibits problems noted above***

Configuration:
- rabbitmq 1.7.0 on Mac OS X 10.6, installed via
<A HREF="http://github.com/mxcl/homebrew/blob/master/Library/Formula/rabbitmq.rb">http://github.com/mxcl/homebrew/blob/master/Library/Formula/rabbitmq.rb</A>
- all clients running on Windows
- no problems exhibited; can run many jobs successfully

Configuration:
- rabbitmq 1.6.0 on Ubuntu 9.10, installed using official Ubuntu packages
- all clients running on Windows
- no problems exhibited; can run many jobs successfully


We would prefer to run RabbitMQ as a service on Windows, as we have more
combined experience with Windows administration, but if stumped we will
consider running RabbitMQ on a locked down Ubuntu VM.

If needed I can try to create and post a script that triggers this problem,
but I thought I'd post this first to see if anyone has experienced a similar
problem and can offer a potential solution, or other troubleshooting
techniques.


(*) These programs originally used py-amqplib, and experienced the same
problem, but were ported to txAMQP to see if that would fix the problem and
to also improve performance when the system is idle.  Unfortunately while
the system performance improved, the problem with RabbitMQ on Windows still
persists.


-- 
Matthew Scott
ElevenCraft Inc.
+1 360 389-2512
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100201/c4f8d310/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100201/c4f8d310/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006121.html">[rabbitmq-discuss] .NET BasicPublish randomly blocks forever
</A></li>
	<LI>Next message: <A HREF="006205.html">[rabbitmq-discuss] messages get stuck when using rabbitmq on windows, but not on osx or ubuntu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6128">[ date ]</a>
              <a href="thread.html#6128">[ thread ]</a>
              <a href="subject.html#6128">[ subject ]</a>
              <a href="author.html#6128">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
