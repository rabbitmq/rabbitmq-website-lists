<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster Pathology
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Cluster%20Pathology&In-Reply-To=3b949f090902110850sa5a081fx8df758289423bfa1%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002985.html">
   <LINK REL="Next"  HREF="002990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster Pathology</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Cluster%20Pathology&In-Reply-To=3b949f090902110850sa5a081fx8df758289423bfa1%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Cluster Pathology">0x6e6562 at gmail.com
       </A><BR>
    <I>Wed Feb 11 17:32:23 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002985.html">[rabbitmq-discuss] Cluster Pathology
</A></li>
        <LI>Next message: <A HREF="002990.html">[rabbitmq-discuss] Cluster Pathology
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2986">[ date ]</a>
              <a href="thread.html#2986">[ thread ]</a>
              <a href="subject.html#2986">[ subject ]</a>
              <a href="author.html#2986">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jason,

On Wed, Feb 11, 2009 at 4:50 PM, Jason J. W. Williams
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jasonjwwilliams at gmail.com</A>&gt; wrote:
&gt;<i> That's the road we've started going down. We were going to give Qpid a
</I>&gt;<i> shot, but it doesn't work on OpenSolaris (particularly the persister).
</I>&gt;<i> Unclustered Rabbit nodes eliminates the orphaned consumer problem. In
</I>&gt;<i> RAS terms, RabbitMQ clustering seems to only provide the A. It seems
</I>&gt;<i> to me on a node failure, either Rabbit needs to migrate an empty
</I>&gt;<i> version of the queue to another node, or send a &quot;you're dead&quot; notice
</I>&gt;<i> to consumers attached to the queue via nodes that aren't hosting the
</I>&gt;<i> queue. Also, if the queue has been redeclared, there optimally would
</I>&gt;<i> be a way for the dead node to replay its messages (if desired) into
</I>&gt;<i> the recreated queue(s) when it comes back up.
</I>

I'm going to try to summarize this as best as possible due to the fact
that the thread has moved on a bit:

- The reason why the consumer does not get notified about the removal
of a queue (for whatever reason it may have disappeared) is because
that this behaviour is not specified in the protocol. It is possible
that this was an oversight, you would have to seek reference from your
local AMQP representative. In practical terms, this notion has been
addressed to an extent in the 0-10 version of the protocol, but YMMV.
Going forwards, this is exactly the kind of thing that needs to get
nailed down in the 1.0 version of the protocol;

- Quorum decisions are difficult at the best of times, hence why we
would need to think long and hard about how to do transparent
replication;

- Replay logic is potentially equally as tricky, once you have
considered all of the corner cases;

I can tell you right now that Rabbit does not currently cater for
these circumstances OOTB, so if these are hard requirements for you,
you may want to look somewhere else.

If your application could subscribe to AMQP level events OTOH, there
may be a simple way to solve this issue for you in a protocol
compliant fashion - for example, we do have patches that allow clients
to subscribe to presence events. If the above is a not a KO critiereon
for you, we could look into this option.

BTW what is RAS?

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002985.html">[rabbitmq-discuss] Cluster Pathology
</A></li>
	<LI>Next message: <A HREF="002990.html">[rabbitmq-discuss] Cluster Pathology
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2986">[ date ]</a>
              <a href="thread.html#2986">[ thread ]</a>
              <a href="subject.html#2986">[ subject ]</a>
              <a href="author.html#2986">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
