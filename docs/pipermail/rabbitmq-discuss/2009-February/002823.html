<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] error on startup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20error%20on%20startup&In-Reply-To=c092994d0902020930k284687a7mb1c37c65b0291a1c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002822.html">
   <LINK REL="Next"  HREF="002824.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] error on startup</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20error%20on%20startup&In-Reply-To=c092994d0902020930k284687a7mb1c37c65b0291a1c%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] error on startup">matthias at lshift.net
       </A><BR>
    <I>Mon Feb  2 18:38:14 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002822.html">[rabbitmq-discuss] error on startup
</A></li>
        <LI>Next message: <A HREF="002824.html">[rabbitmq-discuss] error on startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2823">[ date ]</a>
              <a href="thread.html#2823">[ thread ]</a>
              <a href="subject.html#2823">[ subject ]</a>
              <a href="author.html#2823">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Billy,

Billy Chasen wrote:
&gt;<i> I'm on fc4 and installed rabbitmq with:
</I>&gt;<i> 
</I>&gt;<i> yum install erlang
</I>&gt;<i> rpm -i rabbitmq-server-1.5.1-1.i386.rpm
</I>&gt;<i> 
</I>&gt;<i> Everything installed fine, but on startup, I get:
</I>&gt;<i> 
</I>&gt;<i> Starting rabbitmq-server: FAILED - check /var/log/rabbitmq/startup_log, _err
</I>&gt;<i> 
</I>&gt;<i> Output of that log file is:
</I>&gt;<i> 
</I>&gt;<i> Starting all nodes...
</I>&gt;<i> Starting node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at domU-11-22-33-01-BA-45...</A>
</I>&gt;<i> {error_logger,{{2009,2,2},{12,19,53}},&quot;Protocol: ~p: register error:
</I>&gt;<i> ~p~n&quot;,[&quot;inet_tcp&quot;,{function_clause,[{prim_inet,enc_opt_val,[[t],[22,[0,0,0,0],23,[0,0,0,2]\
</I>&gt;<i> ]]},{prim_inet,setopts,2},{inet,open,7},{inet_tcp,listen,2},{inet_tcp_dist,do_listen,3},{inet_tcp_dist,listen,1},{net_kernel,start_protos,4},{net_kernel,start_\
</I>&gt;<i> protos,3}]}]}
</I>
That's a new one. Looks like Erlang is unhappy about some tcp socket 
options it was told to use.

What version of erlang are you running? Just start an erlang shell with 
'erl' and report the number it displays.

Also, try running the following:

erl -sname test -kernel inet_default_listen_options \
  '[{nodelay,true},{sndbuf,16384},{recbuf,4096}]'

and let me know whether that starts an erlang shell ok.

Finally, locate the rabbitmq-server script - it should live under 
/usr/lib/rabbitmq/bin/ - and change the line that reads
   exec erl \
to
   echo erl \
Then try to start the server normally (e.g. with 
&quot;/etc/init.d/rabbitmq-server start&quot;) and send me the output of 
/var/log/rabbitmq/startup_log. That will tell me which options erlang is 
being started with.


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002822.html">[rabbitmq-discuss] error on startup
</A></li>
	<LI>Next message: <A HREF="002824.html">[rabbitmq-discuss] error on startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2823">[ date ]</a>
              <a href="thread.html#2823">[ thread ]</a>
              <a href="subject.html#2823">[ subject ]</a>
              <a href="author.html#2823">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
