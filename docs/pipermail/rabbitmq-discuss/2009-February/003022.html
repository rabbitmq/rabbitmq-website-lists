<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Multiple subscription in the same thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Multiple%20subscription%20in%20the%20same%20thread&In-Reply-To=499AC561.6030608%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003020.html">
   <LINK REL="Next"  HREF="003029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Multiple subscription in the same thread</H1>
    <B>Wilson, Roger</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Multiple%20subscription%20in%20the%20same%20thread&In-Reply-To=499AC561.6030608%40lshift.net"
       TITLE="[rabbitmq-discuss] Multiple subscription in the same thread">roger.wilson at lehman.com
       </A><BR>
    <I>Tue Feb 17 14:19:48 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003020.html">[rabbitmq-discuss] Multiple subscription in the same thread
</A></li>
        <LI>Next message: <A HREF="003029.html">[rabbitmq-discuss] Multiple subscription in the same thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3022">[ date ]</a>
              <a href="thread.html#3022">[ thread ]</a>
              <a href="subject.html#3022">[ subject ]</a>
              <a href="author.html#3022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is the subscription code...

consumerTag = new Long(_consumerTagCounter++).toString();
_logger.info(String.format(&quot;Starting registration of consumer for
dispatch %s and consumer tag %s&quot;, _queueName, consumerTag));
_channelAMQP.basicConsume(_queueName, false, consumerTag, false, false,
this);
_logger.info(String.format(&quot;Completed registration of consumer for
dispatch %s and consumer tag %s&quot;, _queueName, consumerTag));

This is within a Consumer derived object.  When the above snippet sat in
a loop over two queues it would often hang on the second subscription.
I have since adapted the code to use a topic subscription, side stepping
the issue.  Just wondering if it should have worked.

Roger

-----Original Message-----
From: Tony Garnock-Jones [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>] 
Sent: 17 February 2009 14:11
To: Wilson, Roger
Cc: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Multiple subscription in the same thread

Wilson, Roger wrote:
&gt;<i> This tends to work for a few calls and then when calling 
</I>&gt;<i> Channel.basicConsume for the second queue it hangs.  Always the second
</I>
&gt;<i> queue.
</I>
The hang is unusual. That shouldn't happen. Are you using
server-generated or your own consumer tags? (Phrased differently: which
overload of Channel.basicConsume are you using, and if it's the one with
an explicit consumer tag, how are you building the consumer tag string?)

Regards,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] <A HREF="http://www.lshift.net/">http://www.lshift.net/</A> | Email: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>

----------------------------------------
This message is intended only for the personal and confidential use of
the designated recipient(s) named above.  If you are not the intended
recipient of this message you are hereby notified that any review,
dissemination, distribution or copying of this message is strictly
prohibited.  This communication is for information purposes only and
should not be regarded as an offer to sell or as a solicitation of an
offer to buy any financial product, an official confirmation of any
transaction, or as an official statement of Lehman Brothers.  Email
transmission cannot be guaranteed to be secure or error-free.
Therefore, we do not represent that this information is complete or
accurate and it should not be relied upon as such.  All information is
subject to change without notice.
----------------------------------------



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003020.html">[rabbitmq-discuss] Multiple subscription in the same thread
</A></li>
	<LI>Next message: <A HREF="003029.html">[rabbitmq-discuss] Multiple subscription in the same thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3022">[ date ]</a>
              <a href="thread.html#3022">[ thread ]</a>
              <a href="subject.html#3022">[ subject ]</a>
              <a href="author.html#3022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
