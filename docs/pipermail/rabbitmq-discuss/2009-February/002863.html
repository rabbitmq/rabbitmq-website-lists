<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] getting started, broker runs;	can't get status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20getting%20started%2C%20broker%20runs%3B%0A%09can%27t%20get%20status&In-Reply-To=1598059d-146a-4636-b127-fe53bb585306%40v18g2000pro.googlegroups.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002860.html">
   <LINK REL="Next"  HREF="002864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] getting started, broker runs;	can't get status</H1>
    <B>Dmitriy Samovskiy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20getting%20started%2C%20broker%20runs%3B%0A%09can%27t%20get%20status&In-Reply-To=1598059d-146a-4636-b127-fe53bb585306%40v18g2000pro.googlegroups.com"
       TITLE="[rabbitmq-discuss] getting started, broker runs;	can't get status">dmitriy.samovskiy at cohesiveft.com
       </A><BR>
    <I>Tue Feb  3 19:19:16 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002860.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
        <LI>Next message: <A HREF="002864.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2863">[ date ]</a>
              <a href="thread.html#2863">[ thread ]</a>
              <a href="subject.html#2863">[ subject ]</a>
              <a href="author.html#2863">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Doug Barth wrote:
&gt;<i> We don't get exactly that error. Instead we are getting
</I>&gt;<i> {error,address}.
</I>&gt;<i> 
</I>&gt;<i>   [<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at db1</A> home]# erl -sname foo -cookie coo
</I>&gt;<i>   Erlang (BEAM) emulator version 5.6.3 [source] [64-bit] [smp:8]
</I>&gt;<i> [async-threads:0] [hipe] [kernel-poll:false]
</I>&gt;<i> 
</I>&gt;<i>   Eshell V5.6.3  (abort with ^G)
</I>&gt;<i>   (<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">foo at db1</A>)1&gt; net_adm:names().
</I>&gt;<i> 
</I>&gt;<i>   ... long pause ...
</I>&gt;<i> 
</I>&gt;<i>   {error,address}
</I>&gt;<i>   (<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">foo at db1</A>)2&gt;
</I>&gt;<i>   BREAK: (a)bort (c)ontinue (p)roc info (i)nfo (l)oaded
</I>&gt;<i>          (v)ersion (k)ill (D)b-tables (d)istribution
</I>&gt;<i> 
</I>
Fixed.

According to net_adm man page [1], names/0 returns {error, address} when node can't 
communicate with epmd.

We did net_adm:localhost() to see the local host name that erlang sees. It was an FQDN 
(a.example.com). In /etc/hosts however, a.example.com resolved to an Internet-facing IP on 
ISP's frontend, not to a private IP of the local box. With tcpdump, we observed SYN 
packets in response to net_adm:names() call going out to the network to ISP's IP address, 
instead of going locally to our epmd.

Once we changed /etc/hosts and put something like &quot;127.0.0.1 a.example.com&quot; there, 
net_adm:names() started working and erlang is happy now.

Please note that this turned out to be totally unrelated to what we observed with snoopy, 
even though some (all?) symptoms looked very similar.


[1] <A HREF="http://erlang.org/doc/man/net_adm.html">http://erlang.org/doc/man/net_adm.html</A>


- Dmitriy


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002860.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
	<LI>Next message: <A HREF="002864.html">[rabbitmq-discuss] getting started, broker runs;	can't get status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2863">[ date ]</a>
              <a href="thread.html#2863">[ thread ]</a>
              <a href="subject.html#2863">[ subject ]</a>
              <a href="author.html#2863">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
