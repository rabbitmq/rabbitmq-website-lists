<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] STOMP Error?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20STOMP%20Error%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002932.html">
   <LINK REL="Next"  HREF="002935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] STOMP Error?</H1>
    <B>Darien Kindlund</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20STOMP%20Error%3F&In-Reply-To="
       TITLE="[rabbitmq-discuss] STOMP Error?">darien at kindlund.com
       </A><BR>
    <I>Fri Feb  6 19:30:29 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002932.html">[rabbitmq-discuss] OpenSolaris Issue
</A></li>
        <LI>Next message: <A HREF="002935.html">[rabbitmq-discuss] STOMP Error?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2934">[ date ]</a>
              <a href="thread.html#2934">[ thread ]</a>
              <a href="subject.html#2934">[ subject ]</a>
              <a href="author.html#2934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias,

Okay, that makes sense. Couple of questions:

1) Is there any sort of default idle timeout in RabbitMQ or the STOMP  
connector, where idle connections are terminated by the server?

The reason I ask, is that the 75 STOMP connections may be idle for  
upwards of an hour and then be tremendously bursty. So, you're saying  
that keeping the connections alive would resolve these RabbitMQ  
errors, right?

2) The data I'm working with can be shared. That said, I'm wondering  
if LShift could install the latest STOMP adapter on dev.rabbitmq.com  
so I could replicate future issues on that server, making it easier to  
troubleshoot from your end. Just a thought.

Regards,
-- Darien

On Feb 6, 2009, at 12:18 PM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt;  
wrote:

&gt;<i> Darien,
</I>&gt;<i>
</I>&gt;<i> Darien Kindlund wrote:
</I>&gt;&gt;<i> -rw-r--r-- 1 rabbitmq rabbitmq 158842429 2009-02-05 16:44  
</I>&gt;&gt;<i> rabbit_persister.LOG
</I>&gt;<i>
</I>&gt;<i> That's a non-negligible amount of persisted data. The persister  
</I>&gt;<i> writes a new snapshot every 500 events (publishes, acks, etc).  
</I>&gt;<i> Writing ~160MB of data to disk could take a few seconds. The  
</I>&gt;<i> persister is queried by channels the first time they need a guid,  
</I>&gt;<i> e.g. for generating names of auto-delete queues or unique ids of  
</I>&gt;<i> persisted messages. That call might time out when the persister is  
</I>&gt;<i> in the middle of writing a snapshot. The error you are seeing is a  
</I>&gt;<i> result of that.
</I>&gt;<i>
</I>&gt;<i> We will remove the dependency of the guid generation on the  
</I>&gt;<i> persister in the next release, at which point you should no longer  
</I>&gt;<i> see the error.
</I>&gt;<i>
</I>&gt;<i> Meanwhile you can reduce the likelihood of the error occuring by  
</I>&gt;<i> reducing the frequency with which you establish new connections,  
</I>&gt;<i> e.g. by keeping them open for longer and re-using them, reducing the  
</I>&gt;<i> rate at which you publish persisted messages, or turning off message  
</I>&gt;<i> persistence altogether.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002932.html">[rabbitmq-discuss] OpenSolaris Issue
</A></li>
	<LI>Next message: <A HREF="002935.html">[rabbitmq-discuss] STOMP Error?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2934">[ date ]</a>
              <a href="thread.html#2934">[ thread ]</a>
              <a href="subject.html#2934">[ subject ]</a>
              <a href="author.html#2934">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
