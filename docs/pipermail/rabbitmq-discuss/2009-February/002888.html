<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ/Erlang Dependency on SSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/Erlang%20Dependency%20on%20SSL&In-Reply-To=F5037BD22D1BC94A82CDC6B5E966C1E50BB66BF9%40LOPETS1EXMS001.leh.lbcorp.lehman.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002969.html">
   <LINK REL="Next"  HREF="002895.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ/Erlang Dependency on SSL</H1>
    <B>Wilson, Roger</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/Erlang%20Dependency%20on%20SSL&In-Reply-To=F5037BD22D1BC94A82CDC6B5E966C1E50BB66BF9%40LOPETS1EXMS001.leh.lbcorp.lehman.com"
       TITLE="[rabbitmq-discuss] RabbitMQ/Erlang Dependency on SSL">roger.wilson at lehman.com
       </A><BR>
    <I>Wed Feb  4 15:55:15 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002969.html">[rabbitmq-discuss] [New project] amqp-utils, CLI utilities for  AMQP queues
</A></li>
        <LI>Next message: <A HREF="002895.html">[rabbitmq-discuss] RabbitMQ/Erlang Dependency on SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2888">[ date ]</a>
              <a href="thread.html#2888">[ thread ]</a>
              <a href="subject.html#2888">[ subject ]</a>
              <a href="author.html#2888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is more an observation than a bug or issue.

I managed to build a version of Elang without SSL.  

RabbitMQ worked fine except when I asked it to create a randomly named
temporary queue.  

(In python using amqplib &quot;queue=chan.declare_queue()&quot;) (In java using
the java client &quot;queue=chan.queueDeclare()&quot;)

This threw an internal error and closed the channel.

Noticing this in the logs....

=ERROR REPORT==== 4-Feb-2009::12:22:03 === connection &lt;0.221.0&gt;
(running), channel 1 - error:
{undef,[{ssl_base64,encode,
 
[&lt;&lt;245,100,205,50,82,140,18,122,97,89,5,240,91,175,45,136&gt;&gt;]},
        {rabbit_misc,string_guid,1},
        {rabbit_misc,binstring_guid,1},
        {rabbit_channel,handle_method,3},
        {rabbit_channel,handle_message,2},
        {buffering_proxy,'-mainloop/4-fun-0-',3},
        {lists,foldl,3},
        {buffering_proxy,mainloop,4}]}

=WARNING REPORT==== 4-Feb-2009::12:22:03 === Non-AMQP exit reason
'{undef,
                          [{ssl_base64,encode,
 
[&lt;&lt;245,100,205,50,82,140,18,122,97,89,5,240,
                                  91,175,45,136&gt;&gt;]},
                           {rabbit_misc,string_guid,1},
                           {rabbit_misc,binstring_guid,1},
                           {rabbit_channel,handle_method,3},
                           {rabbit_channel,handle_message,2},
                           {buffering_proxy,'-mainloop/4-fun-0-',3},
                           {lists,foldl,3},
                           {buffering_proxy,mainloop,4}]}'

=INFO REPORT==== 4-Feb-2009::12:22:03 === closing TCP connection
&lt;0.221.0&gt; from 127.0.0.1:57464

It looked like the ssl library call is missing.  My guess is it uses
some call into SSL to produce the random queue name.

Installing OpenSSL
(<A HREF="http://www.erlang.org/pipermail/erlang-bugs/2006-September/000233.html">http://www.erlang.org/pipermail/erlang-bugs/2006-September/000233.html</A>)
and rebuilding Erlang solved this.

There was no need to rebuild RabbitMQ itself.



----------------------------------------

This message is intended only for the personal and confidential use of

the designated recipient(s) named above.  If you are not the intended

recipient of this message you are hereby notified that any review,

dissemination, distribution or copying of this message is strictly

prohibited.  This communication is for information purposes only and

should not be regarded as an offer to sell or as a solicitation of an

offer to buy any financial product, an official confirmation of any

transaction, or as an official statement of Lehman Brothers.  Email

transmission cannot be guaranteed to be secure or error-free.

Therefore, we do not represent that this information is complete or

accurate and it should not be relied upon as such.  All information is

subject to change without notice.

----------------------------------------




----------------------------------------
This message is intended only for the personal and confidential use of
the designated recipient(s) named above.  If you are not the intended
recipient of this message you are hereby notified that any review,
dissemination, distribution or copying of this message is strictly
prohibited.  This communication is for information purposes only and
should not be regarded as an offer to sell or as a solicitation of an
offer to buy any financial product, an official confirmation of any
transaction, or as an official statement of Lehman Brothers.  Email
transmission cannot be guaranteed to be secure or error-free.
Therefore, we do not represent that this information is complete or
accurate and it should not be relied upon as such.  All information is
subject to change without notice.
----------------------------------------



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002969.html">[rabbitmq-discuss] [New project] amqp-utils, CLI utilities for  AMQP queues
</A></li>
	<LI>Next message: <A HREF="002895.html">[rabbitmq-discuss] RabbitMQ/Erlang Dependency on SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2888">[ date ]</a>
              <a href="thread.html#2888">[ thread ]</a>
              <a href="subject.html#2888">[ subject ]</a>
              <a href="author.html#2888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
