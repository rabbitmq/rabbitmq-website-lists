<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Millions of Queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Millions%20of%20Queues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003039.html">
   <LINK REL="Next"  HREF="003042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Millions of Queues</H1>
    <B>Ryan Williams (Which)</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Millions%20of%20Queues&In-Reply-To="
       TITLE="[rabbitmq-discuss] Millions of Queues">rdw at lindenlab.com
       </A><BR>
    <I>Tue Feb 17 22:28:08 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003039.html">[rabbitmq-discuss] Topic exchange trouble with python's amqplib
</A></li>
        <LI>Next message: <A HREF="003042.html">[rabbitmq-discuss] Millions of Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3041">[ date ]</a>
              <a href="thread.html#3041">[ thread ]</a>
              <a href="subject.html#3041">[ subject ]</a>
              <a href="author.html#3041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey all, we have a different use case for rabbit than usual.  We'd like 
to create a rabbit cluster that handles at least 250,000 queues, with at 
leat 1 million total bindings; ideally we would have 20+ million and 80+ 
million respectively.  Basically we want infinite scalability along the 
# of queues axis.  We've been testing this configuration by using a 
modified ScalabilityTest that simply created oodles of queues with 4 
bindings each.  We observed that we were able to get up around 200,000 
queues before the test would halt.  At this time the server was 
consuming a large amount of physical memory and was entering swap.

We repeated the experiment with a cluster of two machines and achieved 
basically the same result -- except the &quot;primary&quot; machine (the one 
ScalabilityTest was interacting with) had most of its memory consumed, 
and the &quot;secondary&quot; machine had 40% of its memory consumed by beam 
processes.  Would we have achieved better results by manually targeting 
ScalabilityTest at the secondary machine as well?

Are we doing something wrong in our setup here?  What's the maximum 
number of queues that has been achieved by anyone on this list, and how 
did you get there?

I see that in this email: 
<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2008-October/002150.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2008-October/002150.html</A> 
, Ben Hood mentions that routing complexity is O(n), where n is the 
number of bindings, which doesn't bode well for our particular 
application.  Assuming that I'm interpreting that correctly, is there 
anything we can do to tackle that problem to enable huge numbers of queues?


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003039.html">[rabbitmq-discuss] Topic exchange trouble with python's amqplib
</A></li>
	<LI>Next message: <A HREF="003042.html">[rabbitmq-discuss] Millions of Queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3041">[ date ]</a>
              <a href="thread.html#3041">[ thread ]</a>
              <a href="subject.html#3041">[ subject ]</a>
              <a href="author.html#3041">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
