<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] NPE in RpcClient
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20NPE%20in%20RpcClient&In-Reply-To=848F8FFF-0C9C-4E8A-B9EE-7B0FA226206A%40mulesource.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000592.html">
   <LINK REL="Next"  HREF="000596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] NPE in RpcClient</H1>
    <B>Neil Ellis</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20NPE%20in%20RpcClient&In-Reply-To=848F8FFF-0C9C-4E8A-B9EE-7B0FA226206A%40mulesource.com"
       TITLE="[rabbitmq-discuss] NPE in RpcClient">neil.ellis at mangala.co.uk
       </A><BR>
    <I>Sat Mar 15 18:49:00 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000592.html">[rabbitmq-discuss] great introduction to RabbitMQ for the Ruby	community
</A></li>
        <LI>Next message: <A HREF="000596.html">[rabbitmq-discuss] Archives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#595">[ date ]</a>
              <a href="thread.html#595">[ thread ]</a>
              <a href="subject.html#595">[ subject ]</a>
              <a href="author.html#595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ross,

Yeah, guessed you might be busy! I did (bar the NPE mentioned at the  
bottom) get the connector working in sync.

I'm going to be back on this properly tomorrow and will detail  
further. However in summary I'm using async on the connector so it's  
calling the RPCClient.publish() method. When I have one instance call  
another it was working okay, when I introduced a third node so that A  
calls B and B calls C I'm getting connection closed errors when the  
exchange is started (i.e. on startup). I'll reset any local hacks on  
the connector tomorrow and send the stack traces back to this list.

If we could get a fixed release together (presuming it's not my screw  
up!!!!!) between us that would be great as I am working on a Mule 
+RabbitMQ+Newton article and we might be able to squeeze that out  
prior to MuleCon if there is the will.

Kind regards
Neil

On 15 Mar 2008, at 18:35, Ross Mason wrote:

&gt;<i> Hi Neil,
</I>&gt;<i>
</I>&gt;<i> This does sound interesting.  There is still a fair way to go on the  
</I>&gt;<i> Mule Rabbit Transport, but there are some simple use cases that work.
</I>&gt;<i> What is the problem you have with A -&gt; B -&gt; C? is it that the  
</I>&gt;<i> message doesn't get to C? If so, Are you trying to perform an RPC  
</I>&gt;<i> call from A? (i.e.  RPC from A to get a response from C via B).
</I>&gt;<i>
</I>&gt;<i> BTW Guys, I would like to do a Beta release of the Rabbit Connector  
</I>&gt;<i> before MuleCon, but right now I snowed under this weekend.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Ross Mason
</I>&gt;<i> CTO, Co-Founder
</I>&gt;<i> MuleSource Inc.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://mulesource.com">http://mulesource.com</A> | <A HREF="http://blog.rossmason.com">http://blog.rossmason.com</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 15 Mar 2008, at 17:22, Neil Ellis wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Alexis
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No probs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alas I don't have the budget for jet-setting :-(
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've been having problems with getting the Mule connector to  
</I>&gt;&gt;<i> handle  A-&gt;B-&gt;C messages although A-&gt;B seems okay. If anyone from  
</I>&gt;&gt;<i> the RabbitMQ side could give me a little hand on getting it up and  
</I>&gt;&gt;<i> running that would be fabulous - I'm pretty busy at the moment  
</I>&gt;&gt;<i> between this work and project:Einstein/deesel ( <A HREF="http://einstein.codecauldron.org">http://einstein.codecauldron.org</A> 
</I>&gt;&gt;<i>  / <A HREF="http://deesel.codecauldron.org">http://deesel.codecauldron.org</A> ) so any help would increase the  
</I>&gt;&gt;<i> chances of having a demo ready for you.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've restructured the current demo to show
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1 Polller Mule instance reading from an RSS feed.
</I>&gt;&gt;<i> 3-5 Worker Mule instances transforming the feed (at least a  
</I>&gt;&gt;<i> notional idea of work).
</I>&gt;&gt;<i> 1 Displayer Mule instance displaying the transformed results to the  
</I>&gt;&gt;<i> screen.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's a bit noddy but it shows how Newton can distribute a set of  
</I>&gt;&gt;<i> Mule nodes based upon simple criteria, so on a single Newton  
</I>&gt;&gt;<i> instance you would have all the Mule instances at the same time on  
</I>&gt;&gt;<i> one instance, on 7 instances you would have 1 poller, 3-5 workers  
</I>&gt;&gt;<i> and 1 displayer - and in between it scales appropriately. And then  
</I>&gt;&gt;<i> shows RabbitMQ as the internode protocol. We could easily turn this  
</I>&gt;&gt;<i> into a demo of running RabbitMQ on a large number of nodes with  
</I>&gt;&gt;<i> super-easy deployment and failover in the future - that's something  
</I>&gt;&gt;<i> to think about.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We could certainly help with providing materials (i.e. slides or  
</I>&gt;&gt;<i> user guide) and help getting you running the demo before hand - in  
</I>&gt;&gt;<i> return would you be able to ensure that Paremus/myself get  
</I>&gt;&gt;<i> appropriate credit at the demo for our part (i.e. powered by Newton  
</I>&gt;&gt;<i> and the appropriate links)?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Anyway let us know - I'm on Skype most of the time - I think you  
</I>&gt;&gt;<i> have me as a contact (neilellis).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All the best
</I>&gt;&gt;<i> Neil
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 15 Mar 2008, at 12:16, Alexis Richardson wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Neil
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thank-you very much.  That sounds like a really interesting demo.
</I>&gt;&gt;&gt;<i> Please let us know how you get on.  Also - will you be at  
</I>&gt;&gt;&gt;<i> MuleCon?  I
</I>&gt;&gt;&gt;<i> am going and would love to show anything you have to folks at the
</I>&gt;&gt;&gt;<i> conference.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> alexis
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Thu, Mar 13, 2008 at 5:48 PM, Neil Ellis &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">neil.ellis at mangala.co.uk</A> 
</I>&gt;&gt;&gt;<i> &gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> Hi Folks
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Not sure if this has already been reported; in version 1.2.0 of  
</I>&gt;&gt;&gt;&gt;<i> lib-
</I>&gt;&gt;&gt;&gt;<i> rabbitmq there is a NPE if the publish() method has been called on
</I>&gt;&gt;&gt;&gt;<i> RpcClient because the temp queue picks it up and attempts to call
</I>&gt;&gt;&gt;&gt;<i> setBody() on the blocker. Trivially chaning blocker.set(body) to  
</I>&gt;&gt;&gt;&gt;<i> have
</I>&gt;&gt;&gt;&gt;<i> a NP check fixes this:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>               if(blocker != null) {
</I>&gt;&gt;&gt;&gt;<i>                       blocker.set(body);
</I>&gt;&gt;&gt;&gt;<i>                }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This was line 150 of RpcClient. I've cc-ed the list for the mule
</I>&gt;&gt;&gt;&gt;<i> transport as it is the mule transport using publish() that caused  
</I>&gt;&gt;&gt;&gt;<i> my
</I>&gt;&gt;&gt;&gt;<i> problem.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Btw. The website for the work I'm doing is <A HREF="http://mule4newton.codecauldron.org/mule4newton-examples/mule4newton-rabbitmq/index.html">http://mule4newton.codecauldron.org/mule4newton-examples/mule4newton-rabbitmq/index.html</A>
</I>&gt;&gt;&gt;&gt;<i> and the src is at <A HREF="http://svn.codecauldron.org/mule4newton/trunk/examples/rabbitmq/">http://svn.codecauldron.org/mule4newton/trunk/examples/rabbitmq/</A>
</I>&gt;&gt;&gt;&gt;<i> - basically we're combining Newton, Mule and RabbitMQ as an
</I>&gt;&gt;&gt;&gt;<i> illustration of a flexible open-source based messaging system.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Kind regards
</I>&gt;&gt;&gt;&gt;<i> Neil
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -- 
</I>&gt;&gt;&gt;<i> Alexis Richardson
</I>&gt;&gt;&gt;<i> +44 20 7617 7339 (UK)
</I>&gt;&gt;&gt;<i> +44 77 9865 2911 (cell)
</I>&gt;&gt;&gt;<i> +1 650 206 2517 (US)
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2431 bytes
Desc: not available
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080315/76be2d7f/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080315/76be2d7f/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000592.html">[rabbitmq-discuss] great introduction to RabbitMQ for the Ruby	community
</A></li>
	<LI>Next message: <A HREF="000596.html">[rabbitmq-discuss] Archives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#595">[ date ]</a>
              <a href="thread.html#595">[ thread ]</a>
              <a href="subject.html#595">[ subject ]</a>
              <a href="author.html#595">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
