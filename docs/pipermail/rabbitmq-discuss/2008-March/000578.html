<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ running at 100% CPU.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20running%20at%20100%25%20CPU.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000604.html">
   <LINK REL="Next"  HREF="000579.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ running at 100% CPU.</H1>
    <B>Michael Arnoldus</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20running%20at%20100%25%20CPU.&In-Reply-To="
       TITLE="[rabbitmq-discuss] RabbitMQ running at 100% CPU.">chime at mu.dk
       </A><BR>
    <I>Thu Mar 13 09:38:16 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000604.html">[rabbitmq-discuss] rabbitmq mnesia table timeout and	disk_almost_full alarm activated
</A></li>
        <LI>Next message: <A HREF="000579.html">[rabbitmq-discuss] RabbitMQ running at 100% CPU.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#578">[ date ]</a>
              <a href="thread.html#578">[ thread ]</a>
              <a href="subject.html#578">[ subject ]</a>
              <a href="author.html#578">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We've had a rabbit server running for quite some time (not sure  
precisely how long but between 1 and 2 weeks). This morning we had  
some difficulty connecting to it from the outside and on further  
investigation we found it used constantly between 99.8 and 100.3 %  
CPU. We are using 5.5.5 (11-5 as far as I remember), not compiled with  
SMP, running on Mac OS X 10.5.2. Going into erlang it looks like it  
isn't doing anything. No messages waiting in queues, at at most 30.000  
reductions on any process in 10 sec. Now it is some time ago that I  
have debugged erlang programs, so I'm not sure here, but as far as I  
remember, 30.000 really isn't anything and certainly doesn't explain  
100% CPU utilization. It's not using a lot of memory - and in short  
everything looks quite ok (for me) - if it wasn't because it's hogging  
the CPU.

I've kept it running. I'm sure if I restart erlang everything will  
just run perfectly, but I'd rather use this incident to try to find  
the problem if it's possible. However i'm running out of things to  
try, so any suggestions will be welcome.

BTW - noting beyond the ordinary in rabbit.log and nothing in rabbit- 
sasl.log. Also, we using QPID pythin client so we're conecting in lax  
mode.

If nobody has any other suggestions I'd be inclined to upgrade to the  
latest version of erlang. Does anybody have any experince using this  
with Rabbit?

Regards,

Michael Arnoldus



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000604.html">[rabbitmq-discuss] rabbitmq mnesia table timeout and	disk_almost_full alarm activated
</A></li>
	<LI>Next message: <A HREF="000579.html">[rabbitmq-discuss] RabbitMQ running at 100% CPU.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#578">[ date ]</a>
              <a href="thread.html#578">[ thread ]</a>
              <a href="subject.html#578">[ subject ]</a>
              <a href="author.html#578">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
