<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fw: Errors using Windows .NET Client Library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fw%3A%20Errors%20using%20Windows%20.NET%20Client%20Library&In-Reply-To=705677.78244.qm%40web808.biz.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000633.html">
   <LINK REL="Next"  HREF="000637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fw: Errors using Windows .NET Client Library</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fw%3A%20Errors%20using%20Windows%20.NET%20Client%20Library&In-Reply-To=705677.78244.qm%40web808.biz.mail.mud.yahoo.com"
       TITLE="[rabbitmq-discuss] Fw: Errors using Windows .NET Client Library">tonyg at lshift.net
       </A><BR>
    <I>Sun Mar 30 19:10:21 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000633.html">[rabbitmq-discuss] Fw: Errors using Windows .NET Client Library
</A></li>
        <LI>Next message: <A HREF="000637.html">[rabbitmq-discuss] Fwd: Fw: Errors using Windows .NET Client Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#636">[ date ]</a>
              <a href="thread.html#636">[ thread ]</a>
              <a href="subject.html#636">[ subject ]</a>
              <a href="author.html#636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wow, that's really weird. Everything looks normal up until the 
connection goes away. Neither side is sending any complaint to the other.

Have you checked the RabbitMQ server logs? They will contain lines like:

=INFO REPORT==== 30-Mar-2008::18:51:31 ===
accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:52676
=INFO REPORT==== 30-Mar-2008::18:51:31 ===
closing TCP connection from 127.0.0.1:52676

etc etc. Perhaps the server is suffering from some problem it doesn't 
get the opportunity to inform the client about.

Regards,
   Tony

BTW. If you use IRC, I'm in #rabbitmq on freenode.



BillC wrote:
&gt;<i> Thanks a lot guys for all your help.  Tony I ran the tool as per your 
</I>&gt;<i> instructions and this is what appears on the screen dump of the Tracer:
</I>&gt;<i> 
</I>&gt;<i> Microsoft Windows XP [Version 5.1.2600]
</I>&gt;<i> (C) Copyright 1985-2001 Microsoft Corp.
</I>&gt;<i> 
</I>&gt;<i> C:\Documents and Settings\Development&gt;cd 
</I>&gt;<i> C:\downloads\complete-rabbitmq-bundle-1
</I>&gt;<i> .2.0\librabbitmq-java-1.2.0
</I>&gt;<i> 
</I>&gt;<i> C:\downloads\complete-rabbitmq-bundle-1.2.0\librabbitmq-java-1.2.0&gt;runjava 
</I>&gt;<i> com.r
</I>&gt;<i> abbitmq.tools.Tracer
</I>&gt;<i> Usage: Tracer [&lt;listenport&gt; [&lt;connecthost&gt; [&lt;connectport&gt;]]]
</I>&gt;<i> Invoked as: Tracer 5673 localhost 5672
</I>&gt;<i> conn#0 ch#0 -&gt; {#method&lt;connection.start-ok&gt;(client 
</I>&gt;<i> properties={product=RabbitMQ
</I>&gt;<i> , information=Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/,">http://www.rabbitmq.com/,</A> 
</I>&gt;<i> platform=.N
</I>&gt;<i> ET, copyright=Copyright (C) 2007 LShift Ltd., Cohesive Financial 
</I>&gt;<i> Technologies LL
</I>&gt;<i> C., and Rabbit Technologies Ltd., version=1.2.8025.1832}, 
</I>&gt;<i> mechanism=PLAIN, respo
</I>&gt;<i> nse= guest guest, locale=en_US),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#0 &lt;- {#method&lt;connection.start&gt;(version major=8, version 
</I>&gt;<i> minor=0, serv
</I>&gt;<i> er properties={product=RabbitMQ, information=Licensed under the MPL.  
</I>&gt;<i> See http:/
</I>&gt;<i> /www.rabbitmq.com/, platform=Erlang/OTP, copyright=Copyright (C) 2007 
</I>&gt;<i> LShift Ltd
</I>&gt;<i> ., Cohesive Financial Technologies LLC., and Rabbit Technologies Ltd., 
</I>&gt;<i> version=1
</I>&gt;<i> .2.0}, mechanisms=PLAIN AMQPLAIN, locales=en_US),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#0 -&gt; {#method&lt;connection.tune-ok&gt;(channel max=0, frame 
</I>&gt;<i> max=131072, hea
</I>&gt;<i> rtbeat=3),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#0 -&gt; {#method&lt;connection.open&gt;(virtual host=/, capabilities=, 
</I>&gt;<i> insist=t
</I>&gt;<i> rue),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#0 &lt;- {#method&lt;connection.tune&gt;(channel max=0, frame 
</I>&gt;<i> max=131072, heartb
</I>&gt;<i> eat=0),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;channel.open&gt;(out of band=),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#0 &lt;- {#method&lt;connection.open-ok&gt;(known 
</I>&gt;<i> hosts=billcmacxp:5672),null,&quot;&quot;
</I>&gt;<i> }
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;access.request&gt;(realm=/data, exclusive=false, 
</I>&gt;<i> passive=tr
</I>&gt;<i> ue, active=true, write=true, read=true),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;channel.open-ok&gt;(),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;exchange.declare&gt;(ticket=101, 
</I>&gt;<i> exchange=testexchange, typ
</I>&gt;<i> e=direct, passive=false, durable=false, auto delete=false, 
</I>&gt;<i> internal=false, nowai
</I>&gt;<i> t=false, arguments={}),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;access.request-ok&gt;(ticket=101),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;exchange.declare-ok&gt;(),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;queue.declare&gt;(ticket=101, queue=testqueue, 
</I>&gt;<i> passive=fals
</I>&gt;<i> e, durable=false, exclusive=false, auto delete=false, nowait=false, 
</I>&gt;<i> arguments={}
</I>&gt;<i> ),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;queue.declare-ok&gt;(queue=testqueue, message 
</I>&gt;<i> count=3, cons
</I>&gt;<i> umer count=0),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;queue.bind&gt;(ticket=101, queue=testqueue, 
</I>&gt;<i> exchange=testex
</I>&gt;<i> change, routing key=routingkey, nowait=false, arguments={}),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;queue.bind-ok&gt;(),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;basic.consume&gt;(ticket=101, queue=testqueue, 
</I>&gt;<i> consumer tag
</I>&gt;<i> =, no local=false, no ack=false, exclusive=false, nowait=false),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;basic.consume-ok&gt;(consumer 
</I>&gt;<i> tag=<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.ctag13_rabbit at billcma</A>
</I>&gt;<i> cxp_20080330164613_),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;basic.deliver&gt;(consumer 
</I>&gt;<i> tag=<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.ctag13_rabbit at billcmacxp</A>
</I>&gt;<i> _20080330164613_, delivery tag=10000, redelivered=false, 
</I>&gt;<i> exchange=testexchange,
</I>&gt;<i> routing key=routingkey),#contentHeader&lt;basic&gt;(content type=text/plain, 
</I>&gt;<i> content e
</I>&gt;<i> ncoding=null, headers=null, delivery mode=2, priority=null, correlation 
</I>&gt;<i> id=null,
</I>&gt;<i>  reply to=null, expiration=null, message id=null, timestamp=null, 
</I>&gt;<i> type=null, use
</I>&gt;<i> r id=null, app id=null, cluster id=null),&quot;Hello, world! .. hello Vero 
</I>&gt;<i> hello&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;basic.deliver&gt;(consumer 
</I>&gt;<i> tag=<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.ctag13_rabbit at billcmacxp</A>
</I>&gt;<i> _20080330164613_, delivery tag=10001, redelivered=false, 
</I>&gt;<i> exchange=testexchange,
</I>&gt;<i> routing key=routingkey),#contentHeader&lt;basic&gt;(content type=text/plain, 
</I>&gt;<i> content e
</I>&gt;<i> ncoding=null, headers=null, delivery mode=2, priority=null, correlation 
</I>&gt;<i> id=null,
</I>&gt;<i>  reply to=null, expiration=null, message id=null, timestamp=null, 
</I>&gt;<i> type=null, use
</I>&gt;<i> r id=null, app id=null, cluster id=null),&quot;Hello, world! .. hello Vero 
</I>&gt;<i> hello&quot;}
</I>&gt;<i> conn#0 ch#1 &lt;- {#method&lt;basic.deliver&gt;(consumer 
</I>&gt;<i> tag=<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">amq.ctag13_rabbit at billcmacxp</A>
</I>&gt;<i> _20080330164613_, delivery tag=10002, redelivered=false, 
</I>&gt;<i> exchange=testexchange,
</I>&gt;<i> routing key=routingkey),#contentHeader&lt;basic&gt;(content type=text/plain, 
</I>&gt;<i> content e
</I>&gt;<i> ncoding=null, headers=null, delivery mode=2, priority=null, correlation 
</I>&gt;<i> id=null,
</I>&gt;<i>  reply to=null, expiration=null, message id=null, timestamp=null, 
</I>&gt;<i> type=null, use
</I>&gt;<i> r id=null, app id=null, cluster id=null),&quot;Hello, world! .. hello Vero 
</I>&gt;<i> hello&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;basic.ack&gt;(delivery tag=10000, 
</I>&gt;<i> multiple=false),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;basic.ack&gt;(delivery tag=10001, 
</I>&gt;<i> multiple=false),null,&quot;&quot;}
</I>&gt;<i> conn#0 ch#1 -&gt; {#method&lt;basic.ack&gt;(delivery tag=10002, 
</I>&gt;<i> multiple=false),null,&quot;&quot;}
</I>&gt;<i> java.io.EOFException
</I>&gt;<i>         at java.io.DataInputStream.readUnsignedByte(Unknown Source)
</I>&gt;<i>         at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:103)
</I>&gt;<i>         at 
</I>&gt;<i> com.rabbitmq.tools.Tracer$DirectionHandler.readFrame(Tracer.java:144)
</I>&gt;<i> 
</I>&gt;<i>         at 
</I>&gt;<i> com.rabbitmq.tools.Tracer$DirectionHandler.doFrame(Tracer.java:152)
</I>&gt;<i>         at com.rabbitmq.tools.Tracer$DirectionHandler.run(Tracer.java:170)
</I>&gt;<i>         at java.lang.Thread.run(Unknown Source)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ----- Forwarded Message ----
</I>&gt;<i> From: Bill Chikirivao &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">billc at inworksol.com</A>&gt;
</I>&gt;<i> To: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Sent: Sunday, March 30, 2008 1:00:37 AM
</I>&gt;<i> Subject: Errors using Windows .NET Client Library
</I>&gt;<i> 
</I>&gt;<i> Please can someone help me with an explanation.  I really appreciate any 
</I>&gt;<i> help you can give me.I am getting some errors when I try to run any of 
</I>&gt;<i> the examples that come with the .NET 
</I>&gt;<i> rabbitmq-dotnet-1.2.8025.1832-net-2.0 download.  I am running RabbitMQ 
</I>&gt;<i> server 1.2.0 which comes from the bundles in the windows 
</I>&gt;<i> complete-rabbitmq-bundle-1.2.0.zip 
</I>&gt;<i> &lt;<A HREF="http://www.rabbitmq.com/releases/windows/complete-rabbitmq-bundle-1.2.0.zip">http://www.rabbitmq.com/releases/windows/complete-rabbitmq-bundle-1.2.0.zip</A>&gt; 
</I>&gt;<i> download.  When I run any of the samples I get the following error:
</I>&gt;<i> 
</I>&gt;<i> {RabbitMQ.Client.Exceptions.ProtocolVersionMismatchException: AMQP 
</I>&gt;<i> server protocol negotiation failure: server version 0-8, transport 
</I>&gt;<i> parameters -1:-1
</I>&gt;<i>    at RabbitMQ.Client.Impl.ConnectionBase.Open(Boolean insist)
</I>&gt;<i>    at RabbitMQ.Client.Impl.ConnectionBase..ctor(ConnectionParameters 
</I>&gt;<i> parameters, Boolean insist, IFrameHandler frameHandler)
</I>&gt;<i>    at 
</I>&gt;<i> RabbitMQ.Client.Framing.Impl.v0_9.Connection..ctor(ConnectionParameters 
</I>&gt;<i> parameters, Boolean insist, IFrameHandler frameHandler)
</I>&gt;<i>    at 
</I>&gt;<i> RabbitMQ.Client.Framing.Impl.v0_9.ProtocolBase.CreateConnection(ConnectionParameters 
</I>&gt;<i> parameters, Boolean insist, IFrameHandler frameHandler)
</I>&gt;<i>    at RabbitMQ.Client.ConnectionFactory.FollowRedirectChain(Int32 
</I>&gt;<i> maxRedirects, IDictionary connectionAttempts, IDictionary 
</I>&gt;<i> connectionErrors, AmqpTcpEndpoint[]&amp; mostRecentKnownHosts, 
</I>&gt;<i> AmqpTcpEndpoint endpoint)}
</I>&gt;<i> 
</I>&gt;<i> If I make code changes such that I change the protocol to AMQP_0_8 in my 
</I>&gt;<i> app.config file and then set the protocol as 
</I>&gt;<i> Protocols.FromConfiguration(&quot;my-protocol&quot;);
</I>&gt;<i> Then I am able to connect and I don't get the same exception.  Is this 
</I>&gt;<i> the expected behavior?  and further does the RabbitMQ server only 
</I>&gt;<i> support AMQP 0-8?  And if the examples are primarily targeted for 
</I>&gt;<i> RabbitMQ then why have the default to AMQP 0-9 such that you have to 
</I>&gt;<i> explicitly change the protocol to 0-8 when running against RabbitMQ?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000633.html">[rabbitmq-discuss] Fw: Errors using Windows .NET Client Library
</A></li>
	<LI>Next message: <A HREF="000637.html">[rabbitmq-discuss] Fwd: Fw: Errors using Windows .NET Client Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#636">[ date ]</a>
              <a href="thread.html#636">[ thread ]</a>
              <a href="subject.html#636">[ subject ]</a>
              <a href="author.html#636">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
