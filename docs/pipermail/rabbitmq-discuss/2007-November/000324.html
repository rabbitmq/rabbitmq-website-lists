<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] beam instances and growing memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20beam%20instances%20and%20growing%20memory%20usage&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000325.html">
   <LINK REL="Next"  HREF="000326.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] beam instances and growing memory usage</H1>
    <B>matt</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20beam%20instances%20and%20growing%20memory%20usage&In-Reply-To="
       TITLE="[rabbitmq-discuss] beam instances and growing memory usage">matt at corp.meez.com
       </A><BR>
    <I>Sat Nov 17 02:14:01 GMT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000325.html">[rabbitmq-discuss] Exchange-queue binding ?
</A></li>
        <LI>Next message: <A HREF="000326.html">[rabbitmq-discuss] beam instances and growing memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#324">[ date ]</a>
              <a href="thread.html#324">[ thread ]</a>
              <a href="subject.html#324">[ subject ]</a>
              <a href="author.html#324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey gang,

When we did a complete site restart on Tuesday night, Wednesday worked  
flawlessly.  We rebuilt the cluster (disk based nodes) and created a  
total of 7 brokers on the box.  When I was watching the instances on  
Wednesday, each instance was taking up about 0.1% of the server ram,  
according to top.

I checked yesterday (Thursday) and each instance was taking 2.0% :

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
11093 root      16   0  341m 323m 1772 S   33  2.0 132:21.11 beam
11038 root      16   0  341m 322m 1772 R   26  2.0 129:54.36 beam
11142 root      16   0  340m 323m 1776 S   23  2.0 132:18.13 beam
11230 root      16   0  340m 321m 1772 S   18  2.0 126:56.12 beam
11186 root      16   0  340m 322m 1776 S    8  2.0 131:59.12 beam
10683 root      16   0  335m 318m 1772 S    2  2.0 128:45.69 beam
10729 root      16   0  341m 322m 1772 S    1  2.0 129:16.77 beam

I just looked now (Friday) and it's taking 2.9%:

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
10729 root      16   0  483m 462m 1792 S   48  2.9 183:10.47 beam
11230 root      17   0  487m 468m 1792 R   36  2.9 312:12.13 beam
11038 root      16   0  490m 471m 1792 S   17  2.9 321:37.75 beam
11093 root      16   0  491m 472m 1792 S    2  2.9 332:11.46 beam
10683 root      16   0  487m 466m 1792 S    1  2.9 311:57.63 beam
11142 root      16   0  492m 472m 1792 S    1  2.9 348:10.30 beam
11186 root      16   0  485m 466m 1792 S    1  2.9 249:32.93 beam

Durable is set to false - so it doesn't appear that things should be  
persisting anywhere.

Any ideas why it'd be growing over time?

--
Matt Darling
Director, Server Engineering
Meez
182 2nd Street, 5th Floor
San Francisco, CA 94105
(m) 415.505.4623
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt at corp.meez.com</A>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071116/7fdc2b74/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071116/7fdc2b74/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000325.html">[rabbitmq-discuss] Exchange-queue binding ?
</A></li>
	<LI>Next message: <A HREF="000326.html">[rabbitmq-discuss] beam instances and growing memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#324">[ date ]</a>
              <a href="thread.html#324">[ thread ]</a>
              <a href="subject.html#324">[ subject ]</a>
              <a href="author.html#324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
