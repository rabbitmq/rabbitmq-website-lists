<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue inspector.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20inspector.&In-Reply-To=774027CA-57D9-4343-94D2-5129B9C10DA2%40corp.meez.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000292.html">
   <LINK REL="Next"  HREF="000294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue inspector.</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20inspector.&In-Reply-To=774027CA-57D9-4343-94D2-5129B9C10DA2%40corp.meez.com"
       TITLE="[rabbitmq-discuss] Queue inspector.">matthias at lshift.net
       </A><BR>
    <I>Mon Nov  5 18:20:14 GMT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000292.html">[rabbitmq-discuss] Queue inspector.
</A></li>
        <LI>Next message: <A HREF="000294.html">[rabbitmq-discuss] Queue inspector.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#293">[ date ]</a>
              <a href="thread.html#293">[ thread ]</a>
              <a href="subject.html#293">[ subject ]</a>
              <a href="author.html#293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matt,

matt wrote:
&gt;<i> First off, I want to say how much we love amqp and rabbitMQ!
</I>
Thank you. It is always nice to hear from real users.

&gt;<i> We've ( meez.com) been using it in our production environment (when
</I>&gt;<i> it was alpha) for about 6 months now I think.
</I>&gt;<i> 
</I>&gt;<i> In brief, we use rabbitMQ as a way of communicating with our
</I>&gt;<i> rendering cluster.  We have user facing tomcat servers that provide a
</I>&gt;<i> way of giving the user options to create an avatar.  Upon save, we
</I>&gt;<i> send export requests via rabbitMQ and they're picked up by nodes in
</I>&gt;<i> the export cloud.  Upon success of the rendered images, a
</I>&gt;<i> notification is sent back and the user is notified that the exports
</I>&gt;<i> were successful.
</I>
That is a pretty neat use case, and it is good to hear that RabbitMQ
worked out well for you.

&gt;<i> the big immediate need we're looking for is a way to see how much is
</I>&gt;<i> being queued up on the rabbitMQ cluster.  That way, we can
</I>&gt;<i> programatically bring EC2 nodes up or take then down based on need.
</I>&gt;<i> 
</I>&gt;<i> I know that this is in the pipeline - but is there *any* way of doing
</I>&gt;<i>  this now and/or is there something that could be easily added to 
</I>&gt;<i> support this?
</I>
queue.declare-ok, the result of a queue.declare operation, in one of its 
fields contains the number of messages in the queue. This is part of the 
amqp 0-8 spec and implemented by RabbitMQ. In combination with 
queue.declare's passive flag it allows you to determine the length of 
existing queues.

If you are using the RabbitMQ Java client, check out
<A HREF="http://www.rabbitmq.com/javadoc/com/rabbitmq/client/impl/ChannelN.html#queueDeclare(int,%20java.lang.String,%20boolean,%20boolean,%20boolean,%20boolean,%20java.util.Map">http://www.rabbitmq.com/javadoc/com/rabbitmq/client/impl/ChannelN.html#queueDeclare(int,%20java.lang.String,%20boolean,%20boolean,%20boolean,%20boolean,%20java.util.Map</A>),
  and
<A HREF="http://www.rabbitmq.com/javadoc/com/rabbitmq/client/impl/AMQImpl.Queue.DeclareOk.html#getMessageCount(">http://www.rabbitmq.com/javadoc/com/rabbitmq/client/impl/AMQImpl.Queue.DeclareOk.html#getMessageCount(</A>)

This is only a very limited interface - you need to know the names of 
queues and you only get a report on the number of messages, not their 
storage size etc - but perhaps that is sufficient for your needs?


Hope this helps, and thank you for using RabbitMQ,


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000292.html">[rabbitmq-discuss] Queue inspector.
</A></li>
	<LI>Next message: <A HREF="000294.html">[rabbitmq-discuss] Queue inspector.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#293">[ date ]</a>
              <a href="thread.html#293">[ thread ]</a>
              <a href="subject.html#293">[ subject ]</a>
              <a href="author.html#293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
