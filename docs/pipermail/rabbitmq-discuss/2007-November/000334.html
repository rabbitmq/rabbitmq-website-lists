<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message routing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Message%20routing&In-Reply-To=85FA03E6BB6F0340B5A117013571A9B70FDD2E%40exchange3.ad.sis.tv">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000333.html">
   <LINK REL="Next"  HREF="000335.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message routing</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Message%20routing&In-Reply-To=85FA03E6BB6F0340B5A117013571A9B70FDD2E%40exchange3.ad.sis.tv"
       TITLE="[rabbitmq-discuss] Message routing">tonyg at lshift.net
       </A><BR>
    <I>Mon Nov 26 16:42:46 GMT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000333.html">[rabbitmq-discuss] Message routing
</A></li>
        <LI>Next message: <A HREF="000335.html">[rabbitmq-discuss] Message routing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#334">[ date ]</a>
              <a href="thread.html#334">[ thread ]</a>
              <a href="subject.html#334">[ subject ]</a>
              <a href="author.html#334">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi John,

John Watson wrote:
&gt;<i> OK - I've successfully got simple enqueue and dequeue working against a
</I>&gt;<i> single queue.
</I>
Cool.

&gt;<i> Next question, can you point me at some documentation
</I>&gt;<i> that explains how message routing works (or if not yet implemented,
</I>&gt;<i> where it lives in the roadmap, and how it's maybe expected to work)?
</I>
Routing is implemented for

 - fanout
 - direct
 - topic

exchanges, all of which are documented in the AMQP 0-8 specification.
See
<A HREF="https://jira.amqp.org/confluence/download/attachments/720900/amqp0-8.pdf?version=1,">https://jira.amqp.org/confluence/download/attachments/720900/amqp0-8.pdf?version=1,</A>
sections 2.1.3 and 3.1.3.

The API for all this is largely in the interaction of exchangeDeclare(),
queueBind(), and basicPublish().

&gt;<i> Ideally I'd like to be able to do content-based-routing based (say) on
</I>&gt;<i> XPath expressions into XML content.
</I>
There is no XPath exchange defined by AMQP 0-8. If you can shoehorn your
routing into routing-keys, then maybe direct or topic exchanges will
server your purpose; otherwise, I'm afraid you're stuck with simulating
a router at an application level:

      exchange ---&gt; app-level router's queue
                               |
                               V
                        Java application doing
                           xpath-based routing
                              /|\
                             / | \
                            V  V  V
                      exchanges, queues that are
                      actual targets

So messages enter the broker, leave the broker, are routed, and are
delivered again.

The xpath-router can be implemented in Java or Erlang. If it's
implemented in Erlang, it can be colocated on the broker's node.

If it's implemented in erlang, we can go even further, and make it an
experimental exchange type: we could get some experience with xpath
exchanges, which could then subsequently be proposed for standardisation...

Regards,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] <A HREF="http://www.lshift.net/">http://www.lshift.net/</A> | Email: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000333.html">[rabbitmq-discuss] Message routing
</A></li>
	<LI>Next message: <A HREF="000335.html">[rabbitmq-discuss] Message routing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#334">[ date ]</a>
              <a href="thread.html#334">[ thread ]</a>
              <a href="subject.html#334">[ subject ]</a>
              <a href="author.html#334">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
