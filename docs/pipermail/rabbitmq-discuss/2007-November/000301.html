<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue inspector.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20inspector.&In-Reply-To=6ce0ac130711061001i514b18c2qe21c70195dbc3090%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000300.html">
   <LINK REL="Next"  HREF="000302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue inspector.</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Queue%20inspector.&In-Reply-To=6ce0ac130711061001i514b18c2qe21c70195dbc3090%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Queue inspector.">alexis.richardson at cohesiveft.com
       </A><BR>
    <I>Tue Nov  6 18:13:17 GMT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000300.html">[rabbitmq-discuss] Queue inspector.
</A></li>
        <LI>Next message: <A HREF="000302.html">[rabbitmq-discuss] Queue inspector.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#301">[ date ]</a>
              <a href="thread.html#301">[ thread ]</a>
              <a href="subject.html#301">[ subject ]</a>
              <a href="author.html#301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Brian

Thanks for your note - that helps.

On 11/6/07, Brian Granger &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ellisonbg.net at gmail.com</A>&gt; wrote:
&gt;<i> I am evaluating rabbitmq/amqp to see if it would do what we need it
</I>&gt;<i> to.  Our system has a worker/master architecture and we would like to
</I>&gt;<i> use rabbitmq for the master&lt;-&gt; worker messaging.
</I>
Great :-)

Work queues are a common pattern and we would love to hear how you get on.



&gt;<i> There are a few
</I>&gt;<i> constraints in our system though:
</I>&gt;<i>
</I>&gt;<i> - workers come and go at any time.
</I>
Indeed this is also a common situation when you want your system to be
robust - as I assume you do.  Some of this will be supported more
'inherently' in future versions of AMQP, eg for federations of
brokers.  But I think there is enough in RabbitMQ as it is today, and
as it currently clusters, to get you going.


&gt;<i> - each worker needs a private queue
</I>
Is that strictly needed for your use case?

You could have workers in groups, sharing a queue on a round robin
basis.  Then they can 'pull' work and no registry is needed.


&gt;<i> - the master process needs to be
</I>&gt;<i> able to see which workers are currently connected.
</I>
Yes - if you want to 'push' work and each worker must have a private queue.


&gt;<i> My initial thought
</I>&gt;<i> is that this could be accomplished by the master getting a list of
</I>&gt;<i> queues.
</I>
Got it.


&gt;<i> My current thought is to have a separate queue that workers use to
</I>&gt;<i> register/unregister themselves.  They could put the name of their
</I>&gt;<i> private queue on this registration queue.
</I>
I would certainly do this if you want to 'push' work.  In effect you
are making the registry explicit and this would be very useful for
other implementation patterns, eg shared services 'fed' by queues (a
bit like an 'ESB').


&gt;<i> But, it would be nice to have more introspection capabilities.
</I>
I wholly agree!

alexis





&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Brian
</I>&gt;<i>
</I>&gt;<i> On 11/6/07, Alexis Richardson &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis.richardson at cohesiveft.com</A>&gt; wrote:
</I>&gt;<i> &gt; Brian
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Not yet, I'm afraid :-(
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Management features are due in a future version of AMQP.  How
</I>&gt;<i> &gt; important is this for you today?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; alexis
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 11/5/07, Brian Granger &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ellisonbg.net at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; On a related note, is there a way of querying the server to get the
</I>&gt;<i> &gt; &gt; names of all the queues?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Brian
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On 11/5/07, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; Matt,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; matt wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; Getting the message count only appears to get updated when you declare
</I>&gt;<i> &gt; &gt; &gt; &gt; the queue.  What if you wanted to poll the queue and see how many
</I>&gt;<i> &gt; &gt; &gt; &gt; messages were on it every 15 seconds or so?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; queue.declare has a passive mode of operation where it doesn't actually
</I>&gt;<i> &gt; &gt; &gt; create a new queue. That's what I was referring to when I wrote that &quot;in
</I>&gt;<i> &gt; &gt; &gt; combination with queue.declare's passive flag it allows you to determine
</I>&gt;<i> &gt; &gt; &gt; the length of existing queues&quot;.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Matthias.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; &gt; &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Alexis Richardson
</I>&gt;<i> &gt; +44 20 7617 7339 (UK)
</I>&gt;<i> &gt; +44 77 9865 2911 (cell)
</I>&gt;<i> &gt; +1 650 206 2517 (US)
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>

-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000300.html">[rabbitmq-discuss] Queue inspector.
</A></li>
	<LI>Next message: <A HREF="000302.html">[rabbitmq-discuss] Queue inspector.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#301">[ date ]</a>
              <a href="thread.html#301">[ thread ]</a>
              <a href="subject.html#301">[ subject ]</a>
              <a href="author.html#301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
