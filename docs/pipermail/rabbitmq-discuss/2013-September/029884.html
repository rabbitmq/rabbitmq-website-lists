<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel breaking: Was there a change in shovel config from 3.0.4 to 3.1.5?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20breaking%3A%20Was%20there%20a%20change%20in%0A%20shovel%20config%20from%203.0.4%20to%203.1.5%3F&In-Reply-To=%3C5228B20F.7060305%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029883.html">
   <LINK REL="Next"  HREF="029885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel breaking: Was there a change in shovel config from 3.0.4 to 3.1.5?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20breaking%3A%20Was%20there%20a%20change%20in%0A%20shovel%20config%20from%203.0.4%20to%203.1.5%3F&In-Reply-To=%3C5228B20F.7060305%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Shovel breaking: Was there a change in shovel config from 3.0.4 to 3.1.5?">simon at rabbitmq.com
       </A><BR>
    <I>Thu Sep  5 17:32:15 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029883.html">[rabbitmq-discuss] Shovel breaking: Was there a change in shovel	config from 3.0.4 to 3.1.5?
</A></li>
        <LI>Next message: <A HREF="029885.html">[rabbitmq-discuss] Shovel breaking: Was there a change in shovel config from 3.0.4 to 3.1.5?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29884">[ date ]</a>
              <a href="thread.html#29884">[ thread ]</a>
              <a href="subject.html#29884">[ subject ]</a>
              <a href="author.html#29884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmm. The config you posted looks OK to me (at least I was able to load 
it). What error message are you seeing?

The only change to the shovel in 3.1.x is support for failover in 
clusters - in older versions if you started multiple shovels with the 
same name on different nodes they would run simultaneously, now only one 
runs with another starting if the first one's node fails.

Cheers, Simon

On 05/09/2013 5:10PM, Jason McIntosh wrote:
&gt;<i> I have the exact same configuration of shovel that i used in 3.0.4 and
</I>&gt;<i> tried to use it in 3.1.5 and I get syntax errors now.  Did something
</I>&gt;<i> change in 3.1.5?  Below is the config file I'm using that fails (this
</I>&gt;<i> same config file works perfectly fine on a 3.0.4 server).  I've looked
</I>&gt;<i> at this and looked at this, and can't see anything wrong or that doesn't
</I>&gt;<i> match the documentation.  As soon as I remove the shovel configuration
</I>&gt;<i> section, the server starts fine.  I get a crash message saying an
</I>&gt;<i> invalid configuration (4) before the .
</I>&gt;<i> Anyone see anything wrong?
</I>&gt;<i> Thanks!
</I>&gt;<i> Jason
</I>&gt;<i>
</I>&gt;<i> [
</I>&gt;<i>
</I>&gt;<i>   {rabbit, [ {vm_memory_high_watermark, 0.6}, {hipe_compile, false} ]},
</I>&gt;<i>   {rabbitmq_shovel,[{shovels, [  { service.unknown.errors, [
</I>&gt;<i>                    {sources,      [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@/vhost&quot;}]">amqp://username:password@/vhost&quot;}]</A> }
</I>&gt;<i>                  , {destinations, [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@destinationserver/vhost&quot;}]">amqp://username:password@destinationserver/vhost&quot;}]</A> }
</I>&gt;<i>                  , {queue, &lt;&lt;&quot;service.unknown.errors&quot;&gt;&gt;}
</I>&gt;<i>                  , {prefetch_count, 15}
</I>&gt;<i>                  , {publish_properties, [
</I>&gt;<i>                          {delivery_mode, 2}
</I>&gt;<i>                          , {headers,
</I>&gt;<i> [{&lt;&lt;&quot;source&quot;&gt;&gt;,longstr,&lt;&lt;&quot;originatinghost&quot;&gt;&gt;}] }
</I>&gt;<i>                          ]}
</I>&gt;<i>                  , {reconnect_delay, 5}
</I>&gt;<i>          ] },
</I>&gt;<i>          { prod.service.activity, [
</I>&gt;<i>                    {sources,      [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@/vhost&quot;}]">amqp://username:password@/vhost&quot;}]</A> }
</I>&gt;<i>                  , {destinations, [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@destinationserver/vhost&quot;}]">amqp://username:password@destinationserver/vhost&quot;}]</A> }
</I>&gt;<i>                  , {queue, &lt;&lt;&quot;prod.service.activity&quot;&gt;&gt;}
</I>&gt;<i>                  , {prefetch_count, 15}
</I>&gt;<i>                  , {publish_properties, [
</I>&gt;<i>                          {delivery_mode, 2}
</I>&gt;<i>                          , {headers,
</I>&gt;<i> [{&lt;&lt;&quot;source&quot;&gt;&gt;,longstr,&lt;&lt;&quot;originatinghost&quot;&gt;&gt;}] }
</I>&gt;<i>                          ]}
</I>&gt;<i>                  , {reconnect_delay, 5}
</I>&gt;<i>          ] },
</I>&gt;<i>          { prod.service.activity.errors, [
</I>&gt;<i>                    {sources,      [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@/vhost&quot;}]">amqp://username:password@/vhost&quot;}]</A> }
</I>&gt;<i>                  , {destinations, [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@destinationserver/vhost&quot;}]">amqp://username:password@destinationserver/vhost&quot;}]</A> }
</I>&gt;<i>                  , {queue, &lt;&lt;&quot;prod.service.activity.errors&quot;&gt;&gt;}
</I>&gt;<i>                  , {prefetch_count, 15}
</I>&gt;<i>                  , {publish_properties, [
</I>&gt;<i>                          {delivery_mode, 2}
</I>&gt;<i>                          , {headers,
</I>&gt;<i> [{&lt;&lt;&quot;source&quot;&gt;&gt;,longstr,&lt;&lt;&quot;originatinghost&quot;&gt;&gt;}] }
</I>&gt;<i>                          ]}
</I>&gt;<i>                  , {reconnect_delay, 5}
</I>&gt;<i>          ] },
</I>&gt;<i>          { monitoring.service.activity, [
</I>&gt;<i>                    {sources,      [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@/vhost&quot;}]">amqp://username:password@/vhost&quot;}]</A> }
</I>&gt;<i>                  , {destinations, [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@destinationserver/vhost&quot;}]">amqp://username:password@destinationserver/vhost&quot;}]</A> }
</I>&gt;<i>                  , {queue, &lt;&lt;&quot;monitoring.service.activity&quot;&gt;&gt;}
</I>&gt;<i>                  , {prefetch_count, 15}
</I>&gt;<i>                  , {publish_properties, [
</I>&gt;<i>                          {delivery_mode, 2}
</I>&gt;<i>                          , {headers,
</I>&gt;<i> [{&lt;&lt;&quot;source&quot;&gt;&gt;,longstr,&lt;&lt;&quot;originatinghost&quot;&gt;&gt;}] }
</I>&gt;<i>                          ]}
</I>&gt;<i>                  , {reconnect_delay, 5}
</I>&gt;<i>          ] },
</I>&gt;<i>          { monitoring.service.activity.errors, [
</I>&gt;<i>                    {sources,      [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@/vhost&quot;}]">amqp://username:password@/vhost&quot;}]</A> }
</I>&gt;<i>                  , {destinations, [{broker,
</I>&gt;<i> &quot;<A HREF="amqp://username:password@destinationserver/vhost&quot;}]">amqp://username:password@destinationserver/vhost&quot;}]</A> }
</I>&gt;<i>                  , {queue, &lt;&lt;&quot;monitoring.service.activity.errors&quot;&gt;&gt;}
</I>&gt;<i>                  , {prefetch_count, 15}
</I>&gt;<i>                  , {publish_properties, [
</I>&gt;<i>                          {delivery_mode, 2}
</I>&gt;<i>                          , {headers,
</I>&gt;<i> [{&lt;&lt;&quot;source&quot;&gt;&gt;,longstr,&lt;&lt;&quot;originatinghost&quot;&gt;&gt;}] }
</I>&gt;<i>                          ]}
</I>&gt;<i>                  , {reconnect_delay, 5}
</I>&gt;<i>          ] }]}]}
</I>&gt;<i> ].
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Jason McIntosh
</I>&gt;<i> <A HREF="http://mcintosh.poetshome.com/blog/">http://mcintosh.poetshome.com/blog/</A>
</I>&gt;<i> 573-424-7612
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>
-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029883.html">[rabbitmq-discuss] Shovel breaking: Was there a change in shovel	config from 3.0.4 to 3.1.5?
</A></li>
	<LI>Next message: <A HREF="029885.html">[rabbitmq-discuss] Shovel breaking: Was there a change in shovel config from 3.0.4 to 3.1.5?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29884">[ date ]</a>
              <a href="thread.html#29884">[ thread ]</a>
              <a href="subject.html#29884">[ subject ]</a>
              <a href="author.html#29884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
