<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federation setup query
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20setup%20query&In-Reply-To=%3C523C6F1A.6030002%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030293.html">
   <LINK REL="Next"  HREF="030324.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federation setup query</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20setup%20query&In-Reply-To=%3C523C6F1A.6030002%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Federation setup query">simon at rabbitmq.com
       </A><BR>
    <I>Fri Sep 20 16:51:54 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030293.html">[rabbitmq-discuss] Federation setup query
</A></li>
        <LI>Next message: <A HREF="030324.html">[rabbitmq-discuss] Federation setup query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30294">[ date ]</a>
              <a href="thread.html#30294">[ thread ]</a>
              <a href="subject.html#30294">[ subject ]</a>
              <a href="author.html#30294">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/09/2013 1:26PM, Jain, Punit wrote:
&gt;<i> Hi, We are using federation setup with two URIs defined in an
</I>&gt;<i> upstream, as suggested by you. I simulated link failure by closing
</I>&gt;<i> one of the Ethernet port. I observed that it takes around 15-20
</I>&gt;<i> minutes to switch link. Why is it taking this much time? Is there a
</I>&gt;<i> way I can decrease the switch time?
</I>
It should switch as soon as the &quot;old&quot; AMQP connection goes down - so 
check your heartbeat settings.

&gt;<i> One more question: on the same setup, I stopped RabbitMQ server on
</I>&gt;<i> downstream and started it after few seconds. Sometimes the messages
</I>&gt;<i> published to upstream exchange during that duration are lost. Though,
</I>&gt;<i> they were present in the upstream queue during that period, but lost
</I>&gt;<i> after the downstream broker was started.
</I>
Hmm.

Of course that shouldn't be happening. How do you know they are lost? In 
particular, it's possible for the downstream bindings to change while a 
link is down, in which case messages can be queued on the upstream, then 
when the link comes back they get transferred over and then dropped. 
Could something like that be happening? The tracer might be helpful to 
see if these messages are indeed getting published downstream.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030293.html">[rabbitmq-discuss] Federation setup query
</A></li>
	<LI>Next message: <A HREF="030324.html">[rabbitmq-discuss] Federation setup query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30294">[ date ]</a>
              <a href="thread.html#30294">[ thread ]</a>
              <a href="subject.html#30294">[ subject ]</a>
              <a href="author.html#30294">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
