<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ - strange synchronization behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20-%20strange%20synchronization%20behavior&In-Reply-To=%3C5243F01C.5030205%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030413.html">
   <LINK REL="Next"  HREF="030415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ - strange synchronization behavior</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20-%20strange%20synchronization%20behavior&In-Reply-To=%3C5243F01C.5030205%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ - strange synchronization behavior">simon at rabbitmq.com
       </A><BR>
    <I>Thu Sep 26 09:28:12 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030413.html">[rabbitmq-discuss] RabbitMQ - strange synchronization behavior
</A></li>
        <LI>Next message: <A HREF="030415.html">[rabbitmq-discuss] msg_store_transient usage question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30419">[ date ]</a>
              <a href="thread.html#30419">[ thread ]</a>
              <a href="subject.html#30419">[ subject ]</a>
              <a href="author.html#30419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/09/2013 9:34PM, Peter Sokolowski wrote:
&gt;<i> When I restart one of the nodes(by &quot;stop_app&quot; and &quot;start_app&quot; from the
</I>&gt;<i> commandline)  the whole cluster is blocked. It doesn't accept any
</I>&gt;<i> publish and receive operations during synchronization stage. When
</I>&gt;<i> synchronization is finished everything get back to normal - cluster
</I>&gt;<i> accepts publish and receive operations.
</I>&gt;<i> Is this behavior normal?
</I>
Yes.

&quot;If a queue is set to automatically synchronise it will synchronise 
whenever a new slave joins - becoming unresponsive until it has done so.&quot;
    -- <A HREF="http://www.rabbitmq.com/ha.html#unsynchronised-slaves">http://www.rabbitmq.com/ha.html#unsynchronised-slaves</A>

While any given queue is (explicitly) syncing it will not do anything 
else; publishes to it will block. Therefore it's a reasonable idea to 
only explicitly sync queues that are not busy, if a queue is being 
actively published to and consumed from then it will become synchronised 
after a while anyway, explicit syncing is not needed. We envisaged 
explicit syncing being used more for queues that are not very active.

And yes, it would be nice if explicit syncing could happen in the 
background while other things happened. Let's just say that it would be 
complicated to do that...

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030413.html">[rabbitmq-discuss] RabbitMQ - strange synchronization behavior
</A></li>
	<LI>Next message: <A HREF="030415.html">[rabbitmq-discuss] msg_store_transient usage question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30419">[ date ]</a>
              <a href="thread.html#30419">[ thread ]</a>
              <a href="subject.html#30419">[ subject ]</a>
              <a href="author.html#30419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
