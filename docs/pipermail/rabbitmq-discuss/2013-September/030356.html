<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Determining home node for queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Determining%20home%20node%20for%20queue&In-Reply-To=%3C1073b2a0-3aa2-49a4-88b3-7e0b8ff2e463%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030355.html">
   <LINK REL="Next"  HREF="030364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Determining home node for queue</H1>
    <B>Paul Bowsher</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Determining%20home%20node%20for%20queue&In-Reply-To=%3C1073b2a0-3aa2-49a4-88b3-7e0b8ff2e463%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Determining home node for queue">paul.bowsher at gmail.com
       </A><BR>
    <I>Mon Sep 23 20:12:57 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030355.html">[rabbitmq-discuss] Generated Message-ID in AMQP Header
</A></li>
        <LI>Next message: <A HREF="030364.html">[rabbitmq-discuss] Determining home node for queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30356">[ date ]</a>
              <a href="thread.html#30356">[ thread ]</a>
              <a href="subject.html#30356">[ subject ]</a>
              <a href="author.html#30356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We currently run a two-node cluster with mirrored queues. We see a huge 
drop-off in throughput when our publishers or consumers connect to the 
non-home node for the queue. This was also confirmed outside of production 
with two fresh Vagrant VMs on both CentOS and Ubuntu, see 
gist <A HREF="https://gist.github.com/boffbowsh/6675281">https://gist.github.com/boffbowsh/6675281</A> and the Java Client 
MulticastMain example. Do others see this behaviour? We see this being 
easily mitigated by always connecting to the home node for the queue, and 
failing over if the home node goes down. However, we haven't yet been able 
to think of a nice clean way of ensuring clients always connect to this. We 
do have a dynamic LB at our disposal so we can create a sort of floating IP 
if that's easiest. 

Does anyone have any experience of this sort of setup in production, and 
can they provide any tips?

Many thanks,

Paul Bowsher
Senior Engineer
Globaldev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130923/5b377d1f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130923/5b377d1f/attachment.htm</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030355.html">[rabbitmq-discuss] Generated Message-ID in AMQP Header
</A></li>
	<LI>Next message: <A HREF="030364.html">[rabbitmq-discuss] Determining home node for queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30356">[ date ]</a>
              <a href="thread.html#30356">[ thread ]</a>
              <a href="subject.html#30356">[ subject ]</a>
              <a href="author.html#30356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
