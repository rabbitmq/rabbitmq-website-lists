<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 'hang' when trying to access HA	queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20%27hang%27%20when%20trying%20to%20access%20HA%0A%09queues&In-Reply-To=%3C5231D8EE.5040602%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030082.html">
   <LINK REL="Next"  HREF="030037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 'hang' when trying to access HA	queues</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20%27hang%27%20when%20trying%20to%20access%20HA%0A%09queues&In-Reply-To=%3C5231D8EE.5040602%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 'hang' when trying to access HA	queues">matthias at rabbitmq.com
       </A><BR>
    <I>Thu Sep 12 16:08:30 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030082.html">[rabbitmq-discuss] RabbitMQ 'hang' when trying to access HA queues
</A></li>
        <LI>Next message: <A HREF="030037.html">[rabbitmq-discuss] Getting SocketTimeoutException on java Producer client during load testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30085">[ date ]</a>
              <a href="thread.html#30085">[ thread ]</a>
              <a href="subject.html#30085">[ subject ]</a>
              <a href="author.html#30085">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Andrew,

On 12/09/13 15:18, Andrew Rendell wrote:
&gt;<i> - Are there any known conditions that you are aware of that would
</I>&gt;<i> cause list_queues or declare queue to hang?
</I>
The fact that you don't see confirms, and declare and list_queue hangs 
all point to one thing: That the Erlang process for the queue (master, 
in case of mirrored queues) has gotten stuck.

Since you are not seeing any errors, the queue process is likely waiting
for some task to complete.

&gt;<i> We understand that flow control at 2.7.1 is rudimentary but it would
</I>&gt;<i> simply involve publishers blocking (on basic publish) but could it in
</I>&gt;<i> any way explain what we saw?
</I>
No, since that flow control - both old and new - wouldn't affect
list_queues. Besides, you'd know that flow control is happening
by the 'blocked' state of the connection in list_connections.

&gt;<i> Some of our RabbitMQ clients are written in erlang and are embedded
</I>&gt;<i> (with a significant amount of other application code) within the same
</I>&gt;<i> cluster as RabbitMQ. Are there issues with this approach at 2.7.1?
</I>
There shouldn't be any issue as long as these clients and associated
application code are &quot;well behaved&quot;. Since you are sharing a VM with
rabbit, there is of course the potential for one to affect the other.
And the sort of embedding, at that scale, as you describe above is
somewhat off the well-trodden path. Still, I struggle to see how even a
mis-behaved embedded Erlang client / app could cause the symptoms you
describe.

&gt;<i> - We are running the broker (and collocated application code) on
</I>&gt;<i> Erlang R15B (erts-5.9) on Solaris SPARC. Again, are there any known
</I>&gt;<i> issues with this configuration?
</I>
R15B is quite ancient, so definitely recommend upgrading that. But, 
again, it's very unlikely that this is the source of your problem.


Regards,

Matthias.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030082.html">[rabbitmq-discuss] RabbitMQ 'hang' when trying to access HA queues
</A></li>
	<LI>Next message: <A HREF="030037.html">[rabbitmq-discuss] Getting SocketTimeoutException on java Producer client during load testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30085">[ date ]</a>
              <a href="thread.html#30085">[ thread ]</a>
              <a href="subject.html#30085">[ subject ]</a>
              <a href="author.html#30085">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
