<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] clearing a queue error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20clearing%20a%20queue%20error&In-Reply-To=%3C4B5D885B77E8CC43852B8F0315AD03BA542F8E9F%40EXMBX03.austin.utexas.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030497.html">
   <LINK REL="Next"  HREF="030509.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] clearing a queue error</H1>
    <B>Warren Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20clearing%20a%20queue%20error&In-Reply-To=%3C4B5D885B77E8CC43852B8F0315AD03BA542F8E9F%40EXMBX03.austin.utexas.edu%3E"
       TITLE="[rabbitmq-discuss] clearing a queue error">wsmith at tacc.utexas.edu
       </A><BR>
    <I>Sat Sep 28 00:58:44 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030497.html">[rabbitmq-discuss] clearing a queue error
</A></li>
        <LI>Next message: <A HREF="030509.html">[rabbitmq-discuss] clearing a queue error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30508">[ date ]</a>
              <a href="thread.html#30508">[ thread ]</a>
              <a href="subject.html#30508">[ subject ]</a>
              <a href="author.html#30508">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I believe this error started when the servers were at version 3.1.1. I also upgraded today to 3.1.5, to confuse things more.

I'll send you the mnesia directory.

Yep, I'm ok with losing the queue and the data. I'd just prefer not to lose the rest of the configuration.

Thanks,


Warren


&gt;<i> -----Original Message-----
</I>&gt;<i> From: Matthias Radestock [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>]
</I>&gt;<i> Sent: Friday, September 27, 2013 1:25 PM
</I>&gt;<i> To: Discussions about RabbitMQ
</I>&gt;<i> Cc: Warren Smith
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] clearing a queue error
</I>&gt;<i> 
</I>&gt;<i> Warren,
</I>&gt;<i> 
</I>&gt;<i> On 27/09/13 17:01, Warren Smith wrote:
</I>&gt;<i> &gt; =ERROR REPORT==== 27-Sep-2013::09:02:35 ===
</I>&gt;<i> &gt; ** Generic server &lt;0.249.0&gt; terminating
</I>&gt;<i> &gt; ** Last message in was {init,&lt;0.126.0&gt;}
</I>&gt;<i> &gt; ** When Server state == {q,{amqqueue,
</I>&gt;<i> &gt;                                 {resource,&lt;&lt;&quot;xsede_public&quot;&gt;&gt;,queue,
</I>&gt;<i> &gt;                                     &lt;&lt;&quot;carnac.sysinfo&quot;&gt;&gt;},
</I>&gt;<i> &gt;                                 true,false,none,[],&lt;0.249.0&gt;,[],[],
</I>&gt;<i> &gt;                                 [{vhost,&lt;&lt;&quot;xsede_public&quot;&gt;&gt;},
</I>&gt;<i> &gt;                                  {name,&lt;&lt;&quot;ha-carnac&quot;&gt;&gt;},
</I>&gt;<i> &gt;                                  {pattern,&lt;&lt;&quot;^carnac\\.&quot;&gt;&gt;},
</I>&gt;<i> &gt;                                  {definition,[{&lt;&lt;&quot;ha-
</I>&gt;<i> mode&quot;&gt;&gt;,&lt;&lt;&quot;all&quot;&gt;&gt;}]},
</I>&gt;<i> &gt;                                  {priority,0}],
</I>&gt;<i> &gt;                                 []},
</I>&gt;<i> &gt;                             none,false,undefined,undefined,
</I>&gt;<i> &gt;                             {[],[]},
</I>&gt;<i> &gt;                             undefined,undefined,undefined,undefined,
</I>&gt;<i> &gt;                             {state,fine,5000,undefined},
</I>&gt;<i> &gt;                             {0,nil},
</I>&gt;<i> &gt;                             undefined,undefined,undefined,
</I>&gt;<i> &gt;                             {dict,0,16,16,8,80,48,
</I>&gt;<i> &gt;
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &gt;                                  []},
</I>&gt;<i> &gt;
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i> &gt;                                   []}}},
</I>&gt;<i> &gt;                             undefined,undefined,undefined,running}
</I>&gt;<i> &gt; ** Reason for termination ==
</I>&gt;<i> &gt; **
</I>&gt;<i> {function_clause,[{rabbit_variable_queue,d,[{delta,49152,15059,49152}],
</I>&gt;<i> []},
</I>&gt;<i> &gt;
</I>&gt;<i> {rabbit_variable_queue,maybe_deltas_to_betas,1,[]},
</I>&gt;<i> &gt;                       {rabbit_variable_queue,init,6,[]},
</I>&gt;<i> &gt;                       {rabbit_mirror_queue_master,init,3,[]},
</I>&gt;<i> &gt;                       {rabbit_amqqueue_process,declare,3,[]},
</I>&gt;<i> &gt;                       {gen_server2,handle_msg,2,[]},
</I>&gt;<i> &gt;                       {proc_lib,init_p_do_apply,3,
</I>&gt;<i> &gt;                                 [{file,&quot;proc_lib.erl&quot;},{line,239}]}]}
</I>&gt;<i> 
</I>&gt;<i> Interesting. We've seen this once before in our testing but have not
</I>&gt;<i> been able to reproduce it.
</I>&gt;<i> 
</I>&gt;<i> What RabbitMQ version is this on?
</I>&gt;<i> 
</I>&gt;<i> &gt; There may be a bug here for you to look in to
</I>&gt;<i> 
</I>&gt;<i> There certainly is. So right now whenever you bounce the node you get
</I>&gt;<i> the above? If so, could you possible send us the contents of the entire
</I>&gt;<i> RABBITMQ_MNESIA_DIR directory? That should allow is to reproduce the
</I>&gt;<i> problem and hopefully track down the cause.
</I>&gt;<i> 
</I>&gt;<i> &gt; do you have a suggestion for how I can clear this error?
</I>&gt;<i> 
</I>&gt;<i> Are you ok with losing the queue and its data? If so we may be able to
</I>&gt;<i> come up with some 'rabbitmqctl eval' magic for you to clear the error.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i> Matthias.
</I></PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030497.html">[rabbitmq-discuss] clearing a queue error
</A></li>
	<LI>Next message: <A HREF="030509.html">[rabbitmq-discuss] clearing a queue error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30508">[ date ]</a>
              <a href="thread.html#30508">[ thread ]</a>
              <a href="subject.html#30508">[ subject ]</a>
              <a href="author.html#30508">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
