<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Strange behaviour of RabbitMQ or client when	network problems occurs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Strange%20behaviour%20of%20RabbitMQ%20or%20client%20when%0A%09network%20problems%20occurs&In-Reply-To=%3C934A8980-E88B-42F5-9F4D-5009B1756127%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030056.html">
   <LINK REL="Next"  HREF="030066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Strange behaviour of RabbitMQ or client when	network problems occurs</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Strange%20behaviour%20of%20RabbitMQ%20or%20client%20when%0A%09network%20problems%20occurs&In-Reply-To=%3C934A8980-E88B-42F5-9F4D-5009B1756127%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Strange behaviour of RabbitMQ or client when	network problems occurs">mklishin at gopivotal.com
       </A><BR>
    <I>Thu Sep 12 10:53:10 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030056.html">[rabbitmq-discuss] Strange behaviour of RabbitMQ or client when network problems occurs
</A></li>
        <LI>Next message: <A HREF="030066.html">[rabbitmq-discuss] Strange behaviour of RabbitMQ or client when network problems occurs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30058">[ date ]</a>
              <a href="thread.html#30058">[ thread ]</a>
              <a href="subject.html#30058">[ subject ]</a>
              <a href="author.html#30058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Haster:

&gt;<i> And in result we get 11 duplicated messages and only to times we were in
</I>&gt;<i> point (2), where
</I>&gt;<i> we couldn't send ack.
</I>&gt;<i> I can't understand where from 9 duplicated messages come? 
</I>
So, are you getting 11 or 9 redeliveries?

All unacknowledged messages will be requeued when the channel closes.
Looks like your way of creating network interference causes TCP connection
to be closed, which in turn makes RabbitMQ consider all your channels closed.

With prefetch = 20, if 9 messages were acked and then connection terminated,
you will get exactly 11 redeliveries after you reconnect and re-register your consumer(s).

MK



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130912/607414bc/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130912/607414bc/attachment.pgp</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030056.html">[rabbitmq-discuss] Strange behaviour of RabbitMQ or client when network problems occurs
</A></li>
	<LI>Next message: <A HREF="030066.html">[rabbitmq-discuss] Strange behaviour of RabbitMQ or client when network problems occurs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30058">[ date ]</a>
              <a href="thread.html#30058">[ thread ]</a>
              <a href="subject.html#30058">[ subject ]</a>
              <a href="author.html#30058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
