<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ queue durability question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20queue%20durability%20question&In-Reply-To=%3C522596C5.5010300%40econsys.co.za%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029814.html">
   <LINK REL="Next"  HREF="029801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ queue durability question</H1>
    <B>Jan Jacobs</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20queue%20durability%20question&In-Reply-To=%3C522596C5.5010300%40econsys.co.za%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ queue durability question">janj at econsys.co.za
       </A><BR>
    <I>Tue Sep  3 08:59:01 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029814.html">[rabbitmq-discuss] How to Topic Echange configuration using @config annotations in Spring-AMQP?
</A></li>
        <LI>Next message: <A HREF="029801.html">[rabbitmq-discuss] RabbitMQ queue durability question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29799">[ date ]</a>
              <a href="thread.html#29799">[ thread ]</a>
              <a href="subject.html#29799">[ subject ]</a>
              <a href="author.html#29799">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have the following environment:
Server: (Language: Erlang, Version: 2.7.1)
Broker: (Version: 3.1.5)
Client: (Language: Grails/Groovy, Version: 2.8.4)

I am using RPC functionality over the broker.
A queue is created by the server or the client has the following 
configuration:
|<i>auto delete|, |durable| and |exclusive| attributes are set to |false|
</I>
The problem:
If the client and the server is not active and the broker restarts the 
queue does not survive the restart and it behaves as required.
If the client and the server is active and the broker restarts then the 
broker change the queue durability to|durable|: true and it survives the 
restart.

This causes chaos with the server behaviour.
The server tries to recover the connection and recreate the queue with 
configuration of |auto delete|, |durable| and |exclusive| attributes are 
set to |false. |In turn the creation of the queue to fails because of 
the changed durability.

Why does the broker change the durability of the queue?
Is that the correct behaviour?

Any help or advice shall be highly appreciated.

Thanks
-- 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130903/38786a47/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130903/38786a47/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: JanEmailSignature.gif
Type: image/gif
Size: 9261 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130903/38786a47/attachment.gif">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130903/38786a47/attachment.gif</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: janj.vcf
Type: text/x-vcard
Size: 167 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130903/38786a47/attachment.vcf">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130903/38786a47/attachment.vcf</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029814.html">[rabbitmq-discuss] How to Topic Echange configuration using @config annotations in Spring-AMQP?
</A></li>
	<LI>Next message: <A HREF="029801.html">[rabbitmq-discuss] RabbitMQ queue durability question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29799">[ date ]</a>
              <a href="thread.html#29799">[ thread ]</a>
              <a href="subject.html#29799">[ subject ]</a>
              <a href="author.html#29799">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
