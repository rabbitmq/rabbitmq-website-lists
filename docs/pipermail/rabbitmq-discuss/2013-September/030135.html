<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss]  Re:  Proper process to change erlang cookie?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Futf-8%3Fq%3F_Re%3D3A__Proper_process_to_change_erl%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fang_cookie%3D3F%3F%3D&In-Reply-To=%3CetPan.52339570.3c387f34.22ad%40heartoftheneutronstar.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030134.html">
   <LINK REL="Next"  HREF="030139.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss]  Re:  Proper process to change erlang cookie?</H1>
    <B>Ben Hsu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Futf-8%3Fq%3F_Re%3D3A__Proper_process_to_change_erl%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fang_cookie%3D3F%3F%3D&In-Reply-To=%3CetPan.52339570.3c387f34.22ad%40heartoftheneutronstar.local%3E"
       TITLE="[rabbitmq-discuss]  Re:  Proper process to change erlang cookie?">ben.hsu at criticalmedia.com
       </A><BR>
    <I>Fri Sep 13 23:45:04 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030134.html">[rabbitmq-discuss] Proper process to change erlang cookie?
</A></li>
        <LI>Next message: <A HREF="030139.html">[rabbitmq-discuss] Proper process to change erlang cookie?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30135">[ date ]</a>
              <a href="thread.html#30135">[ thread ]</a>
              <a href="subject.html#30135">[ subject ]</a>
              <a href="author.html#30135">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you Alvaro,

I understand&#160; the difference between rabbitmq-server and rabbitmqctl now.

I'm still not able to copy or edit the Erlang cookie without killing the process. I see two different .erlang.cookie files: one in /var/lib/rabbitmq and one in the users home directory. I copied the first to the second and still got the &quot;unable to connect&quot; problem

I am running version 3.1.3.1 on CentOS
--&#160;
Ben Hsu
Sent with Airmail

On September 13, 2013 at 7:39:41 PM, Ben Hsu (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ben.hsu at criticalmedia.com</A>) wrote:

The Erlang cookie belongs to each particular user on your machines. The&#160;cookie can be found on ~/.erlang.cookie and you need to have the same value there for every node in the cluster.

start_app stops the Rabbit application inside the Erlang VM but the VM has to be running for that to work.&#160;

stop_app will stop the rabbit app, but not the Erlang VM

rabbitmq-server takes care of preparing the env parameters and starting the Erlang VM to then run RabbitMQ on it.

Regards,

Alvaro

On Friday, September 13, 2013, Ben Hsu wrote:
Hello all

I need to change the erlang cookie on my RabbitMQ server to get clustering working, and wish to know the correct procedure.

I tried doing this:

rabbitmqctl stop_app
vi /var/lib/rabbitmq/.erlang.cookie
rabbitmqctl start_app # this gave me an error message:&#160;Error: unable to connect to node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ben-amqp-test4</A>': nodedown

By trial and error, I found this worked:
pkill beam
pkill epmd
vi /var/lib/rabbitmq/.erlang.cookie
rabbitmq-server&#160;
# now in a separate window, for some reason it didn't work with rabbitmq-server -detached
rabbitmqctl start_app

That seemed to work, but is ugly, and doesn't feel like the right way of doing it.

Also, what is the difference between &quot;rabbitmqctl start_app&quot; and &quot;rabbitmq-server&quot;?

Thanks in advance

--&#160;
Ben Hsu
Sent with Airmail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130913/a76745ca/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130913/a76745ca/attachment.htm</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030134.html">[rabbitmq-discuss] Proper process to change erlang cookie?
</A></li>
	<LI>Next message: <A HREF="030139.html">[rabbitmq-discuss] Proper process to change erlang cookie?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30135">[ date ]</a>
              <a href="thread.html#30135">[ thread ]</a>
              <a href="subject.html#30135">[ subject ]</a>
              <a href="author.html#30135">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
