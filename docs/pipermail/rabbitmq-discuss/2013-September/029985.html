<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20get%20notification%20when%20a%20queue%20becomes%0A%20non-empty%20without%20removing%20any%20messages%3F&In-Reply-To=%3CCAKgmDnGcTdWhsdHN2hcGCTJmv8iUNa9dGfOVjD1CtHWU5bPQnw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029984.html">
   <LINK REL="Next"  HREF="030007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20get%20notification%20when%20a%20queue%20becomes%0A%20non-empty%20without%20removing%20any%20messages%3F&In-Reply-To=%3CCAKgmDnGcTdWhsdHN2hcGCTJmv8iUNa9dGfOVjD1CtHWU5bPQnw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?">michael.laing at nytimes.com
       </A><BR>
    <I>Tue Sep 10 00:43:11 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029984.html">[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
</A></li>
        <LI>Next message: <A HREF="030007.html">[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29985">[ date ]</a>
              <a href="thread.html#29985">[ thread ]</a>
              <a href="subject.html#29985">[ subject ]</a>
              <a href="author.html#29985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Why don't you just subscribe to that queue with basic.consume, acks on, and
a prefetch of 1

When you get a message, reject it and cancel your consumer (if your logic
calls for it).

The message will be at the front of the queue.

Then spawn your 'consumer process'. The message (and any others) will be
there waiting.

I use python pika async to do this sort of thing. Event driven, no polling.

If speed is important, use the tornado adapter; if you are feeling lucky,
use the libev adapter (full disclosure: I wrote it)

-ml


On Mon, Sep 9, 2013 at 7:20 PM, vitaly &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vitaly.krugl.numenta at gmail.com</A>&gt;wrote:

&gt;<i> I need to be able to spawn a consumer process for a queue when that queue
</I>&gt;<i> becomes non-empty. The trigger needs to happen in an event-driven way,
</I>&gt;<i> without polling, and without removing any messages from that queue. Is this
</I>&gt;<i> possible with AMQP/RabbitMQ and how?  I am coding in Python.
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i> Vitaly
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130909/d8f8e630/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130909/d8f8e630/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029984.html">[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
</A></li>
	<LI>Next message: <A HREF="030007.html">[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29985">[ date ]</a>
              <a href="thread.html#29985">[ thread ]</a>
              <a href="subject.html#29985">[ subject ]</a>
              <a href="author.html#29985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
