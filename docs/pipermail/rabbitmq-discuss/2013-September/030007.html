<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20get%20notification%20when%20a%20queue%20becomes%0A%20non-empty%20without%20removing%20any%20messages%3F&In-Reply-To=%3Cb0c87349-2f3f-4003-b10f-512435edfedc%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029985.html">
   <LINK REL="Next"  HREF="029990.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?</H1>
    <B>vitaly</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20get%20notification%20when%20a%20queue%20becomes%0A%20non-empty%20without%20removing%20any%20messages%3F&In-Reply-To=%3Cb0c87349-2f3f-4003-b10f-512435edfedc%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?">vitaly.krugl.numenta at gmail.com
       </A><BR>
    <I>Tue Sep 10 20:33:21 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029985.html">[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
</A></li>
        <LI>Next message: <A HREF="029990.html">[rabbitmq-discuss] Web-Stomp Plugin browser support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30007">[ date ]</a>
              <a href="thread.html#30007">[ thread ]</a>
              <a href="subject.html#30007">[ subject ]</a>
              <a href="author.html#30007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday, September 9, 2013 4:20:09 PM UTC-7, vitaly wrote:
&gt;<i>
</I>&gt;<i> I need to be able to spawn a consumer process for a queue when that queue 
</I>&gt;<i> becomes non-empty. The trigger needs to happen in an event-driven way, 
</I>&gt;<i> without polling, and without removing any messages from that queue. Is this 
</I>&gt;<i> possible with AMQP/RabbitMQ and how?  I am coding in Python.
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i> Vitaly
</I>&gt;<i>
</I>The following reply was posted to the rabbitmq-discuss mailing list by 
Michael Laing:
==
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CAKgmDnGcTdWhsdHN2hcGCTJmv8iUNa9dGfOVjD1CtHWU5bPQnw at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;

Why don't you just subscribe to that queue with basic.consume, acks on, and
a prefetch of 1

When you get a message, reject it and cancel your consumer (if your logic
calls for it).

The message will be at the front of the queue.

Then spawn your 'consumer process'. The message (and any others) will be
there waiting.

I use python pika async to do this sort of thing. Event driven, no polling.

If speed is important, use the tornado adapter; if you are feeling lucky,
use the libev adapter (full disclosure: I wrote it)

-ml
==
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130910/a60988a9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130910/a60988a9/attachment.htm</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029985.html">[rabbitmq-discuss] How to get notification when a queue becomes non-empty without removing any messages?
</A></li>
	<LI>Next message: <A HREF="029990.html">[rabbitmq-discuss] Web-Stomp Plugin browser support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30007">[ date ]</a>
              <a href="thread.html#30007">[ thread ]</a>
              <a href="subject.html#30007">[ subject ]</a>
              <a href="author.html#30007">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
