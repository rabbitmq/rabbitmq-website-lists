<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Getting SocketTimeoutException on java Producer client during load testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Getting%20SocketTimeoutException%20on%20java%20Producer%0A%20client%20during%20load%20testing&In-Reply-To=%3Cc4b4a15f-fffc-485c-9990-9f05864a088c%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030085.html">
   <LINK REL="Next"  HREF="030038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Getting SocketTimeoutException on java Producer client during load testing</H1>
    <B>Sean Stephens</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Getting%20SocketTimeoutException%20on%20java%20Producer%0A%20client%20during%20load%20testing&In-Reply-To=%3Cc4b4a15f-fffc-485c-9990-9f05864a088c%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Getting SocketTimeoutException on java Producer client during load testing">errant01 at gmail.com
       </A><BR>
    <I>Wed Sep 11 16:01:22 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030085.html">[rabbitmq-discuss] RabbitMQ 'hang' when trying to access HA	queues
</A></li>
        <LI>Next message: <A HREF="030038.html">[rabbitmq-discuss] Getting SocketTimeoutException on java	Producer client during load testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30037">[ date ]</a>
              <a href="thread.html#30037">[ thread ]</a>
              <a href="subject.html#30037">[ subject ]</a>
              <a href="author.html#30037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am getting the following &quot;caused by&quot; stack on an IO Exception occuring in 
my send method on the basicPublish call.

Caused by: com.rabbitmq.client.ShutdownSignalException: connection error; 
reason: java.net.SocketTimeoutException: Timeout during Connection 
negotiation
        at 
com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:67)
        at 
com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:33)
        at 
com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:343)
        at 
com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:313)
        ... 87 more
Caused by: java.net.SocketTimeoutException: Timeout during Connection 
negotiation
        at 
com.rabbitmq.client.impl.AMQConnection.handleSocketTimeout(AMQConnection.java:566)
        at 
com.rabbitmq.client.impl.AMQConnection.access$500(AMQConnection.java:59)
        at 
com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:541)

My belief at this point is that my producer load has overrun the connection 
factory pool in writing to the queues.

I have been unable to locate information on settings related to the 
connection factory pool to make it larger or change the timeout.  When the 
connections do timeout, it doesn't look like the pool catches up unless I 
kill the Producer application.  Anyone have advice on how to get past this 
issue? Is there a way to throttle the load at the Producer connection, or 
will it be necessary to just add more nodes to handle the incoming load?

I have not implemented &quot;confirms&quot; yet, because it seems that will only 
provide a way to solve message loss, not prevent connection failure under 
load. Am I wrong on this?

Thanks in advance for your help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130911/851bda5b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130911/851bda5b/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030085.html">[rabbitmq-discuss] RabbitMQ 'hang' when trying to access HA	queues
</A></li>
	<LI>Next message: <A HREF="030038.html">[rabbitmq-discuss] Getting SocketTimeoutException on java	Producer client during load testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30037">[ date ]</a>
              <a href="thread.html#30037">[ thread ]</a>
              <a href="subject.html#30037">[ subject ]</a>
              <a href="author.html#30037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
