<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 3.2 and federated queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.2%20and%20federated%20queues&In-Reply-To=%3C52459531.8000004%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030478.html">
   <LINK REL="Next"  HREF="030488.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 3.2 and federated queues</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.2%20and%20federated%20queues&In-Reply-To=%3C52459531.8000004%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 3.2 and federated queues">simon at rabbitmq.com
       </A><BR>
    <I>Fri Sep 27 15:24:49 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030478.html">[rabbitmq-discuss] RabbitMQ 3.2 and federated queues
</A></li>
        <LI>Next message: <A HREF="030488.html">[rabbitmq-discuss] RabbitMQ 3.2 and federated queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30487">[ date ]</a>
              <a href="thread.html#30487">[ thread ]</a>
              <a href="subject.html#30487">[ subject ]</a>
              <a href="author.html#30487">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/09/2013 2:16PM, Mariusz Gronczewski wrote:
&gt;<i> I've tested it for a bit and have another question: Is federating
</I>&gt;<i> autogenerated (amq.*) queues planned (on current nightly trying to
</I>&gt;<i> federate those returns &quot;queue name contains reserved prefix amq&quot;) or it
</I>&gt;<i> is something that should not be used at all ?
</I>
Hmm. That's kinda problematic - you shouldn't be able to declare your 
own named queue in the server-generated namespace. But the downstream 
federated queue is just another AMQP client from the perspective of the 
upstream, so it can't violate that requirement.

Not sure if that's the right thing to do, but that's how it is now. Hmm.

Of course, you could have your client generate a reply queue name based 
on a UUID or something, that would get round the problem.

&gt;<i> I'm trying to fix mcollective over federated servers, the original code
</I>&gt;<i> used very simple method of sending request to exchange with 'reply-to'
</I>&gt;<i> header containing name of autogenerated queue, and server then sent
</I>&gt;<i> reply to that address. Obviously that didnt work over federation
</I>
Interesting. I hadn't really thought people would do RPC over federation 
but I think your plan should work.

&gt;<i> My first try was just replacing reply queue with direct exchange that
</I>&gt;<i> client subscribed to to get replies and it worked partially, over
</I>&gt;<i> federation when client did simple
</I>&gt;<i> &quot;subscribe(reply_exchange);publish(request_exchange), but sometimes
</I>&gt;<i> messages were &quot;lost&quot; probably because server sent reply too fast (before
</I>&gt;<i> federation managed to subscribe to remote exchange.
</I>
Yeah, I think that analysis is right.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030478.html">[rabbitmq-discuss] RabbitMQ 3.2 and federated queues
</A></li>
	<LI>Next message: <A HREF="030488.html">[rabbitmq-discuss] RabbitMQ 3.2 and federated queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30487">[ date ]</a>
              <a href="thread.html#30487">[ thread ]</a>
              <a href="subject.html#30487">[ subject ]</a>
              <a href="author.html#30487">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
