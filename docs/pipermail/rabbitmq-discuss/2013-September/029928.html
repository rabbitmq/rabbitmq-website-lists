<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq up and running but	connection_closed_abruptly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20up%20and%20running%20but%0A%09connection_closed_abruptly&In-Reply-To=%3C5229F99B.4070408%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029940.html">
   <LINK REL="Next"  HREF="029942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq up and running but	connection_closed_abruptly</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%20up%20and%20running%20but%0A%09connection_closed_abruptly&In-Reply-To=%3C5229F99B.4070408%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq up and running but	connection_closed_abruptly">simon at rabbitmq.com
       </A><BR>
    <I>Fri Sep  6 16:49:47 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029940.html">[rabbitmq-discuss] Ubuntu Charm Championship Contest
</A></li>
        <LI>Next message: <A HREF="029942.html">[rabbitmq-discuss] Rabbitmq up and running but	connection_closed_abruptly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29928">[ date ]</a>
              <a href="thread.html#29928">[ thread ]</a>
              <a href="subject.html#29928">[ subject ]</a>
              <a href="author.html#29928">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/09/2013 3:51PM, Ken Henry wrote:
&gt;<i> Simon,
</I>&gt;<i>
</I>&gt;<i> Anything else you can think of to troubleshoot more?
</I>
&gt;<i> You are essential saying that Zenoss is at fault?
</I>
I still don't think I am 100% sure what you are saying your problem is. 
Are you saying:

1) Zenoss should be connecting to node A and node B to monitor them
2) It should also be routing connections from clients to node A but not 
node B since node A has not failed
3) But you're seeing long-lived connections to node B, which shouldn't 
be happening

That's what I've understood from you.

However, I've just Googled &quot;zenoss rabbitmq&quot; and they claim their plugin 
monitors RabbitMQ by invoking rabbitmqctl over ssh. So I don't think 
that adds up with what I've understood.

So please can you explain what you expect to be happening, and why the 
results you're seeing don't match your expectations?

Cheers, Simon

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Fri, Sep 6, 2013 at 9:30 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     On 06/09/2013 2:23PM, Ken Henry wrote:
</I>&gt;<i>
</I>&gt;<i>         Simon, thank you very much for your help!
</I>&gt;<i>
</I>&gt;<i>         Yes I figured that if my connection was closed those connections
</I>&gt;<i>         would
</I>&gt;<i>         not listed
</I>&gt;<i>
</I>&gt;<i>         I actually killed the connections yesterday and they kept coming
</I>&gt;<i>         back
</I>&gt;<i>         under different pids
</I>&gt;<i>
</I>&gt;<i>         I started the zenoss service that connects to rabbitmq and it
</I>&gt;<i>         looks like
</I>&gt;<i>         its trying to connect to a PID that does not exist which it
</I>&gt;<i>         sounds like
</I>&gt;<i>         from your e-mail that that is ok?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     The pid is effectively just a connection identifier in this case. So
</I>&gt;<i>     if the connections logging as &quot;closed_abruptly&quot; don't show up under
</I>&gt;<i>     &quot;rabbitmqctl list_connections&quot; I'd say you're good.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         sorry I am running a little slow this morning but I couldn't get
</I>&gt;<i>         that
</I>&gt;<i>         command to work all together but was able to just run it with
</I>&gt;<i>         pid option
</I>&gt;<i>
</I>&gt;<i>         rabbitmqctl list_connections zenoss localhost client_properties pid
</I>&gt;<i>         Listing connections ...
</I>&gt;<i>         Error: {bad_argument,zenoss}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     You don't need to make substitutions there - I mean literally
</I>&gt;<i>     &quot;rabbitmqctl list_connections user peer_host peer_port
</I>&gt;<i>     client_properties pid&quot;. That command means &quot;give me a listing with
</I>&gt;<i>     columns for user, peer host, etc&quot;. See
</I>&gt;<i>     <A HREF="http://www.rabbitmq.com/man/__rabbitmqctl.1.man.html#list___connections">http://www.rabbitmq.com/man/__rabbitmqctl.1.man.html#list___connections</A>
</I>&gt;<i>     &lt;<A HREF="http://www.rabbitmq.com/man/rabbitmqctl.1.man.html#list_connections">http://www.rabbitmq.com/man/rabbitmqctl.1.man.html#list_connections</A>&gt; for
</I>&gt;<i>     more details.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         Is there anyway to turn on more logging?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Afraid not.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     --
</I>&gt;<i>     Simon MacMullen
</I>&gt;<i>     RabbitMQ, Pivotal
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029940.html">[rabbitmq-discuss] Ubuntu Charm Championship Contest
</A></li>
	<LI>Next message: <A HREF="029942.html">[rabbitmq-discuss] Rabbitmq up and running but	connection_closed_abruptly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29928">[ date ]</a>
              <a href="thread.html#29928">[ thread ]</a>
              <a href="subject.html#29928">[ subject ]</a>
              <a href="author.html#29928">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
