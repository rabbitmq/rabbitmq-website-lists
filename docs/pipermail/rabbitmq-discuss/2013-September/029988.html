<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Questions about running .NET binaries	SendString.exe, SingleGet.exe, rabbitmqclt.bat
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questions%20about%20running%20.NET%20binaries%0A%09SendString.exe%2C%20SingleGet.exe%2C%20rabbitmqclt.bat&In-Reply-To=%3CC9C9CC7A-28DD-40CA-9B8E-635389360169%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029981.html">
   <LINK REL="Next"  HREF="029995.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Questions about running .NET binaries	SendString.exe, SingleGet.exe, rabbitmqclt.bat</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questions%20about%20running%20.NET%20binaries%0A%09SendString.exe%2C%20SingleGet.exe%2C%20rabbitmqclt.bat&In-Reply-To=%3CC9C9CC7A-28DD-40CA-9B8E-635389360169%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Questions about running .NET binaries	SendString.exe, SingleGet.exe, rabbitmqclt.bat">tim at rabbitmq.com
       </A><BR>
    <I>Tue Sep 10 09:53:47 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029981.html">[rabbitmq-discuss] Questions about running .NET binaries SendString.exe, SingleGet.exe, rabbitmqclt.bat
</A></li>
        <LI>Next message: <A HREF="029995.html">[rabbitmq-discuss] Questions about running .NET binaries	SendString.exe, SingleGet.exe, rabbitmqclt.bat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29988">[ date ]</a>
              <a href="thread.html#29988">[ thread ]</a>
              <a href="subject.html#29988">[ subject ]</a>
              <a href="author.html#29988">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 9 Sep 2013, at 19:29, Li, Mike wrote:
&gt;<i> I was able to complete <A HREF="http://www.rabbitmq.com/tutorials/tutorial-one-python.html">http://www.rabbitmq.com/tutorials/tutorial-one-python.html</A> to tutorial-three-phython.html
</I>&gt;<i>  
</I>&gt;<i> When I tried using SendString and SingleGet .NET binaries, and rabbitmqctl.bat I net getting much luck.
</I>
Have you tried writing code similar to the python tutorial using the .NET client? Looking at <A HREF="https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/dotnet">https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/dotnet</A> might help, though that's probably very out of date.

&gt;<i> But no message in the hello queue found.
</I>
Well indeed - queues are not magically created for you, you've got to declare them either in your code or using one of the various management tools.

&gt;<i>  
</I>&gt;<i> Manually added message via Queue &gt; hello &gt; Publish message (and added messages using steps in tutorial-one-python.html)
</I>&gt;<i>  
</I>
That's one way to do it.

&gt;<i> Tried getting the message failed also:
</I>&gt;<i> c:\RabbitMQ.NetClient\bin&gt;singleget &quot;<A HREF="amqp://guest:guest@127.0.0.1:5672/&quot;">amqp://guest:guest@127.0.0.1:5672/&quot;</A> hello
</I>&gt;<i>  
</I>
The reason for the the failure is tucked away in the exception message here:

&gt;<i> text=&quot;PRECONDITION_FAILED - parameters for queue 'hello' in vhost '/' not equivalent&quot;
</I>
Before singleget attempts to issue a basic.get, it declares the target queue - using queue.declare - to ensure it's present. This is fine, since queue.declare is idempotent - if the queue already exists, the declaration acts like an assertion, otherwise it creates the queue. As you can see below, the code in SingleGet that declares the queue makes very specific assumptions about parameters:

            using (IModel ch = conn.CreateModel()) {
                conn.AutoClose = true;

                ch.QueueDeclare(queueName, false, false, false, null);
                BasicGetResult result = ch.BasicGet(queueName, false);
                if (result == null) {
                    Console.WriteLine(&quot;No message available.&quot;);
                } else {
                    ch.BasicAck(result.DeliveryTag, false);
                    Console.WriteLine(&quot;Message:&quot;);
                    DebugUtil.DumpProperties(result, Console.Out, 0);
                }

                return 0;
            }

So at the time that queue.declare method is issued to the server, if the queue that you manually created on the server was configured with *different* parameters, the queue.declare method will fail and a channel error will be raised, invalidating the channel and throwing an exception in the client.

&gt;<i>  
</I>&gt;<i> Please advise.
</I>
Make sure that the queue you're consuming via SingleGet was declared with exactly these same parameters. Alternatively, write you own code to consume messages from the queue, and ensure that when calling the channel's QueueDeclare method, you provide the same parameters that the queue was originally declared/created with.

Cheers,
Tim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130910/16949737/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130910/16949737/attachment.htm</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029981.html">[rabbitmq-discuss] Questions about running .NET binaries SendString.exe, SingleGet.exe, rabbitmqclt.bat
</A></li>
	<LI>Next message: <A HREF="029995.html">[rabbitmq-discuss] Questions about running .NET binaries	SendString.exe, SingleGet.exe, rabbitmqclt.bat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29988">[ date ]</a>
              <a href="thread.html#29988">[ thread ]</a>
              <a href="subject.html#29988">[ subject ]</a>
              <a href="author.html#29988">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
