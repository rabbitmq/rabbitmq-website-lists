<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unable to list queues via rabbitmqctl or	Management Plugin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20list%20queues%20via%20rabbitmqctl%20or%0A%09Management%20Plugin&In-Reply-To=%3C0B8CD6850421B745BE39BC5C7601923272010E25%40DDCEP50016.na.corp.mckesson.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030084.html">
   <LINK REL="Next"  HREF="030093.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unable to list queues via rabbitmqctl or	Management Plugin</H1>
    <B>Cordell, Ron</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20list%20queues%20via%20rabbitmqctl%20or%0A%09Management%20Plugin&In-Reply-To=%3C0B8CD6850421B745BE39BC5C7601923272010E25%40DDCEP50016.na.corp.mckesson.com%3E"
       TITLE="[rabbitmq-discuss] Unable to list queues via rabbitmqctl or	Management Plugin">Ron.Cordell at RelayHealth.com
       </A><BR>
    <I>Thu Sep 12 20:13:09 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030084.html">[rabbitmq-discuss] Intsallation problem
</A></li>
        <LI>Next message: <A HREF="030093.html">[rabbitmq-discuss] reusing auto-generated queue name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30092">[ date ]</a>
              <a href="thread.html#30092">[ thread ]</a>
              <a href="subject.html#30092">[ subject ]</a>
              <a href="author.html#30092">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are using the LDAP plugin to manage access to RabbitMQ. Here is the rabbit.config file:

[
  {rabbit, [{auth_backends, [rabbit_auth_backend_ldap]},
            {ssl_listeners, [5671]},
{frame_max, 0},
{cluster_partition_handling, pause_minority},
            {ssl_options, [{fail_if_no_peer_cert, false},
                          { verify, verify_none}]},
            {default_vhost, &lt;&lt;&quot;/&quot;&gt;&gt;}]},
  {rabbitmq_auth_backend_ldap,
   [ {servers,               [&quot;RHB.AD&quot;]},
     {dn_lookup_attribute,   &quot;userPrincipalName&quot;},
     {dn_lookup_base,        &quot;DC=RHB,DC=AD&quot;},
     {user_dn_pattern,       &quot;${username}@RHB.AD&quot;},
     {use_ssl,               false},
     {port,                  389},
     {log,                   false},
     {vhost_access_query,    {in_group, &quot;CN=INRMQ_DG - ${vhost} vHost Read Permissions,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}},
     {resource_access_query,
      {for, [{permission, configure, {in_group, &quot;CN=INRMQ_DG - ${vhost} vHost Read Permissions,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}},
             {permission, write,
              {for, [{resource, queue,    {in_group, &quot;CN=INRMQ_DG - ${vhost} vHost Write Permissions,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}},
                     {resource, exchange, {in_group, &quot;CN=INRMQ_DG - ${vhost} vHost Write Permissions,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}}]}},
             {permission, read,
              {for, [{resource, exchange, {in_group, &quot;CN=INRMQ_DG - ${vhost} vHost Read Permissions,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}},
                     {resource, queue,    {in_group, &quot;CN=INRMQ_DG - ${vhost} vHost Read Permissions,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}}]}}
            ]
      }},

{tag_queries,    [{management,  {in_group, &quot;CN=INRMQ_DG - RabbitMQ User Access Management,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}},
 {monitoring,        {in_group, &quot;CN=INRMQ_DG - RabbitMQ User Access Monitoring,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}},
 {administrator,     {in_group, &quot;CN=Access Profile - SCM,OU=Access Profiles,OU=Servers,DC=RHB,DC=AD&quot;}},
                      {administrator,     {in_group, &quot;CN=INRMQ_DG - RabbitMQ User Access Administrator,OU=INRMQ,OU=INTEGRATION,OU=Environments,OU=Servers,DC=RHB,DC=AD&quot;}}]}
   ]
  }
].
My user is in all groups.

I am able to see all the queues from the Management Plugin.
However, I am not able to list queues from the rabbitmqctl command:


Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Windows\system32&gt;e:

E:\&gt;cd RabbitMQ\rabbitmq_server-3.1.5\sbin

E:\RabbitMQ\rabbitmq_server-3.1.5\sbin&gt;rabbitmqctl list_queues -p vortex name
Listing queues ...
Terminate batch job (Y/N)? y

E:\RabbitMQ\rabbitmq_server-3.1.5\sbin&gt;


No output appears and I have to kill the command. Examining the rabbitmq log, I see the following:


=ERROR REPORT==== 12-Sep-2013::11:54:22 ===
webmachine error: path=&quot;/api/queues&quot;
&quot;Unauthorized&quot;

=ERROR REPORT==== 12-Sep-2013::11:54:32 ===
webmachine error: path=&quot;/api/queues&quot;
&quot;Unauthorized&quot;

=ERROR REPORT==== 12-Sep-2013::11:54:42 ===
webmachine error: path=&quot;/api/queues&quot;
&quot;Unauthorized&quot;



I'm not sure what's happening here and why I am unable to list the queues from a particular vHost.

Cheers,

Ron




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130912/c276f587/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130912/c276f587/attachment.htm</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030084.html">[rabbitmq-discuss] Intsallation problem
</A></li>
	<LI>Next message: <A HREF="030093.html">[rabbitmq-discuss] reusing auto-generated queue name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30092">[ date ]</a>
              <a href="thread.html#30092">[ thread ]</a>
              <a href="subject.html#30092">[ subject ]</a>
              <a href="author.html#30092">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
