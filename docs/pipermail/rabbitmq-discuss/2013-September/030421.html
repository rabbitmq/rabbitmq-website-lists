<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] memory leak rabbitmq 3.1.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20memory%20leak%20rabbitmq%203.1.5&In-Reply-To=%3C7c569223-7049-4993-8690-9333de7056b4%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030459.html">
   <LINK REL="Next"  HREF="030423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] memory leak rabbitmq 3.1.5</H1>
    <B>Santi Nu&#241;ez-Cacho</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20memory%20leak%20rabbitmq%203.1.5&In-Reply-To=%3C7c569223-7049-4993-8690-9333de7056b4%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] memory leak rabbitmq 3.1.5">brian.santiago at gmail.com
       </A><BR>
    <I>Thu Sep 26 10:15:23 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030459.html">[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish	AMQP_STATUS_SSL_ERROR
</A></li>
        <LI>Next message: <A HREF="030423.html">[rabbitmq-discuss] memory leak rabbitmq 3.1.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30421">[ date ]</a>
              <a href="thread.html#30421">[ thread ]</a>
              <a href="subject.html#30421">[ subject ]</a>
              <a href="author.html#30421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!


I 'm running 3.1.5 rabbitmq cluster composed by 2 virtual servers. Centos 
6.3/6.4 kvm virtual machines.

( actually I have 6 clusters composed by 2 virtuals each )

When running 3.0.4 version cluster performance was so good. 

But I upgrade to 3.1.5 and start to notice a strange behaviour. 

Although the cluster was not used, no queues were created, memory used by 
&quot;beam.smp &quot; start growing gradually.

All seems like a memory leak.

I check the report command and all the memory was used by plugins.


 [{total,756328224},
      {connection_procs,1207264},
      {queue_procs,2457672},
      {plugins,696907152},
      {other_proc,3627680},
      {mnesia,1369320},
      {mgmt_db,3730856},
      {msg_index,167952},
      {other_ets,1476848},
      {binary,4091872},
      {code,17899383},
      {atom,1803449},
      {other_system,21588776}]},



These are the plugins I am using.


[root@ ~]# rabbitmq-plugins list                  
[e] amqp_client                       3.1.5
[e] mochiweb                          2.7.0-rmq3.1.5-git680dba8
[E] rabbitmq_federation               3.1.5
[E] rabbitmq_federation_management    3.1.5
[E] rabbitmq_management               3.1.5
[e] rabbitmq_management_agent         3.1.5
[E] rabbitmq_stomp                    3.1.5
[e] rabbitmq_web_dispatch             3.1.5
[e] webmachine                        1.10.3-rmq3.1.5-gite9359c7
[root@ ~]# 



I start disabling one by one the plugins and I come across with the most 
feasible candidate. Stomp.


I disable stomp plugin and memory settle.




Any of you experienced same behaviour?


Any feedback will be really appreciated.

Thanks!










-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130926/6e4eaaab/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130926/6e4eaaab/attachment.htm</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030459.html">[rabbitmq-discuss] Rabbitmq-C amqp_basic_publish	AMQP_STATUS_SSL_ERROR
</A></li>
	<LI>Next message: <A HREF="030423.html">[rabbitmq-discuss] memory leak rabbitmq 3.1.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30421">[ date ]</a>
              <a href="thread.html#30421">[ thread ]</a>
              <a href="subject.html#30421">[ subject ]</a>
              <a href="author.html#30421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
