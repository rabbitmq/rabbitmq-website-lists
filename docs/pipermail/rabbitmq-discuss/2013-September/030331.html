<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] consumer in background
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Futf-8%3Fq%3Fconsumer_in_background%3F%3D&In-Reply-To=%3C443920.47598.bm%40smtp206.mail.gq1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030322.html">
   <LINK REL="Next"  HREF="030332.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] consumer in background</H1>
    <B>tyger2007@yahoo.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Futf-8%3Fq%3Fconsumer_in_background%3F%3D&In-Reply-To=%3C443920.47598.bm%40smtp206.mail.gq1.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] consumer in background">tyger2007 at yahoo.com
       </A><BR>
    <I>Mon Sep 23 10:53:06 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030322.html">[rabbitmq-discuss] federate the unnamed queue?
</A></li>
        <LI>Next message: <A HREF="030332.html">[rabbitmq-discuss] consumer in background
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30331">[ date ]</a>
              <a href="thread.html#30331">[ thread ]</a>
              <a href="subject.html#30331">[ subject ]</a>
              <a href="author.html#30331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks alvaro like I said this concept is totally new to me , however I would like to know if the consumers would run stand alone , that is apart from the web server ? , if that is the case does it mean I would have to keep my command line open always on my servers?

----- Reply message -----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-request at lists.rabbitmq.com</A>
To: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Subject: rabbitmq-discuss Digest, Vol 76, Issue 24
Date: Mon, Sep 23, 2013 12:00 PM


Send rabbitmq-discuss mailing list submissions to
	<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>

To subscribe or unsubscribe via the World Wide Web, visit
	<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
or, via email, send a message with subject or body 'help' to
	<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-request at lists.rabbitmq.com</A>

You can reach the person managing the list at
	<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-owner at lists.rabbitmq.com</A>

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of rabbitmq-discuss digest...&quot;


Today's Topics:

   1. Troubleshooting RabbitMQ (Sukhjeet Singh)
   2. federate the unnamed queue? (Greg Roy)
   3. Re: Troubleshooting RabbitMQ (Michael Klishin)
   4. Re: federate the unnamed queue? (Michael Klishin)
   5. Re: federate the unnamed queue? (Alvaro Videla)
   6. Re: Producer consumer in background on a web	server
      (Alvaro Videla)
   7. Re: Federation setup query (Jain, Punit)
   8. Re: Questiong about plugins and clustering (Simon MacMullen)
   9. Re: federate the unnamed queue? (Simon MacMullen)
  10. Re: Troubleshooting RabbitMQ (Simon MacMullen)
  11. Re: Questiong about plugins and clustering (Emile Joubert)
  12. Re: How do the Producer gets response from the subscribers
      (Matthias Radestock)


----------------------------------------------------------------------

Message: 1
Date: Sun, 22 Sep 2013 07:39:55 -0400
From: Sukhjeet Singh &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">princu.chana at gmail.com</A>&gt;
Subject: [rabbitmq-discuss] Troubleshooting RabbitMQ
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID:
	&lt;CAB9W+YKEJ6qNX89Cj2SfEO7d85cweod-XYKS=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">uMGr_VhDmAYBQ at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Sir/Madam,
                 This is for first time I am using RabbitMQ. After
searching, I come to know that first I have to install RabbitMq sever and
after doing that I used a code sample given in rabbitMq's official site.I
am pasting that code here also. I also tried to search the resolution of
this error but I am not able to get it's solution. This is a request to
please help me as soon as it can br possible.

Actually, the problem is that createConnection() method is throwing an
exception and the exception is &quot;BrokerUnreachableException was Unhandled&quot;.

Please HELP ASAP.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/734cd42a/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/734cd42a/attachment.html</A>&gt;

------------------------------

Message: 2
Date: Sun, 22 Sep 2013 10:47:13 -0400
From: Greg Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gj.roy75 at gmail.com</A>&gt;
Subject: [rabbitmq-discuss] federate the unnamed queue?
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID:
	&lt;CAKAqKjuD_5=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">59Yb4m55UUk+PdeWHu0VRLb8H0-TczarUnA2FWA at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hello All,

I would like to federate all messages to the default unnamed queue - is
this possible?  I have tried variations of pattern matching nothing, but
believe I'll need to alter my publishing behaviour.  True or false?

Thanks in advance,

Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/960fa966/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/960fa966/attachment-0001.htm</A>&gt;

------------------------------

Message: 3
Date: Sun, 22 Sep 2013 19:31:17 +0100
From: Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Troubleshooting RabbitMQ
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">BCD3D9F4-D067-4352-B546-9D2F20CDA81E at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;


On sep 22, 2013, at 12:39 p.m., Sukhjeet Singh &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">princu.chana at gmail.com</A>&gt; wrote:

&gt;<i> Actually, the problem is that createConnection() method is throwing an exception and the exception is &quot;BrokerUnreachableException was Unhandled&quot;. 
</I>
Sukhjeet,

Can you please be a bit more specific about

 * What the stack trace look like
 * How did you install RabbitMQ
 * If it is running
 * If there's anything in the log
 * What tutorial are you following and for what language

Then it will be much easier to provide specific advice.

MK



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/7b2dd9a8/attachment-0001.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/7b2dd9a8/attachment-0001.pgp</A>&gt;

------------------------------

Message: 4
Date: Sun, 22 Sep 2013 19:33:20 +0100
From: Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] federate the unnamed queue?
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">3E151093-B43C-4B67-91B8-B5DC40A66711 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Greg,

On sep 22, 2013, at 3:47 p.m., Greg Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gj.roy75 at gmail.com</A>&gt; wrote:

&gt;<i> I would like to federate all messages to the default unnamed queue - is this possible?
</I>
It's the default exchange that is &quot;unnamed&quot; (clients specify an empty string to refer to it).
Queue federation will be supposed in the next release (3.2). Are you talking about
exchanges?

&gt;<i>  I have tried variations of pattern matching nothing, but believe I'll need to alter my publishing behaviour.
</I>
It should be possible to federate any exchange, as far as I know. Can you post some specific
federation configuration examples and you code, and explain what your queues and bindings
setup is?

MK



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/c4af5071/attachment-0001.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/c4af5071/attachment-0001.pgp</A>&gt;

------------------------------

Message: 5
Date: Sun, 22 Sep 2013 14:47:50 -0500
From: Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] federate the unnamed queue?
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
	&lt;CAMcAHLXy=RSE9=L=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">8rr9HS4sGJtZj4eGwDqSOwFpTXLtVq_87A at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hi,

If by &quot;unnamed queue&quot; you mean the default exchange with no name, then no,
you can't federate that exchange.

Regards,

Alvaro


On Sun, Sep 22, 2013 at 9:47 AM, Greg Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gj.roy75 at gmail.com</A>&gt; wrote:

&gt;<i> Hello All,
</I>&gt;<i>
</I>&gt;<i> I would like to federate all messages to the default unnamed queue - is
</I>&gt;<i> this possible?  I have tried variations of pattern matching nothing, but
</I>&gt;<i> believe I'll need to alter my publishing behaviour.  True or false?
</I>&gt;<i>
</I>&gt;<i> Thanks in advance,
</I>&gt;<i>
</I>&gt;<i> Greg
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/9f82ec8f/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/9f82ec8f/attachment-0001.htm</A>&gt;

------------------------------

Message: 6
Date: Sun, 22 Sep 2013 14:59:19 -0500
From: Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Producer consumer in background on a
	web	server
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
	&lt;CAMcAHLVv+65CpZ_eZwLn1b=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">fd_+dfawHXOB_gWERnkfURu6TXg at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hi

On Sun, Sep 22, 2013 at 6:34 AM, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tyger2007 at yahoo.com</A> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tyger2007 at yahoo.com</A>&gt;wrote:

&gt;<i> how do I make my php consumers work without running them on a command-line
</I>&gt;<i> to listen to producer messages ?
</I>

What do you mean by this? You can just run the PHP consumer directly on the
webserver process, although I wouldn't recommend doing that since you would
end up blocking all the server threads.

Is there a reason why you don't want to run the consumer from the command
line directly?

Regards,

Alvaro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/1934f66e/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130922/1934f66e/attachment-0001.htm</A>&gt;

------------------------------

Message: 7
Date: Mon, 23 Sep 2013 02:23:27 -0400
From: &quot;Jain, Punit&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Punit.Jain at emc.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Federation setup query
To: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
	&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">DB14E94115BBC84E8960C12C176D06760127ECAD05 at MX25A.corp.emc.com</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;



&gt;<i> -----Original Message-----
</I>&gt;<i> From: Simon MacMullen [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>]
</I>&gt;<i> Sent: Friday, September 20, 2013 9:22 PM
</I>&gt;<i> To: Jain, Punit
</I>&gt;<i> Cc: Discussions about RabbitMQ
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] Federation setup query
</I>&gt;<i> 
</I>&gt;<i> On 20/09/2013 1:26PM, Jain, Punit wrote:
</I>&gt;<i> &gt; Hi, We are using federation setup with two URIs defined in an
</I>&gt;<i> &gt; upstream, as suggested by you. I simulated link failure by closing one
</I>&gt;<i> &gt; of the Ethernet port. I observed that it takes around 15-20 minutes to
</I>&gt;<i> &gt; switch link. Why is it taking this much time? Is there a way I can
</I>&gt;<i> &gt; decrease the switch time?
</I>&gt;<i> 
</I>&gt;<i> It should switch as soon as the &quot;old&quot; AMQP connection goes down - so check
</I>&gt;<i> your heartbeat settings.
</I>&gt;<i> 
</I>
I think it was set to default value which is 600. I changed it to 30 seconds on upstream.
Now it detects the failure in around a minute and changes the link.


&gt;<i> &gt; One more question: on the same setup, I stopped RabbitMQ server on
</I>&gt;<i> &gt; downstream and started it after few seconds. Sometimes the messages
</I>&gt;<i> &gt; published to upstream exchange during that duration are lost. Though,
</I>&gt;<i> &gt; they were present in the upstream queue during that period, but lost
</I>&gt;<i> &gt; after the downstream broker was started.
</I>&gt;<i> 
</I>&gt;<i> Hmm.
</I>&gt;<i> 
</I>&gt;<i> Of course that shouldn't be happening. How do you know they are lost? In
</I>&gt;<i> particular, it's possible for the downstream bindings to change while a link is
</I>&gt;<i> down, in which case messages can be queued on the upstream, then when the
</I>&gt;<i> link comes back they get transferred over and then dropped.
</I>&gt;<i> Could something like that be happening? The tracer might be helpful to see if
</I>&gt;<i> these messages are indeed getting published downstream.
</I>&gt;<i>
</I>

This behavior was observed when both links were up, but we just stopped and started the downstream broker. 
Bindings were not changed, there was only one queue listening to downstream stream with '#' routing key.
I will use tracer when I observe this next time.
 
Thank you, Simon.

&gt;<i> Cheers, Simon
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>


------------------------------

Message: 8
Date: Mon, 23 Sep 2013 09:41:23 +0100
From: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Questiong about plugins and clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">523FFEB3.9050109 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 21/09/2013 02:53, Alvaro Videla wrote:
&gt;<i> Is there a way for a plugin to know when a node joins or leaves the
</I>&gt;<i> cluster?
</I>
No, not at the moment. Currently we just ask Mnesia whenever we need to 
know.

&gt;<i> Is there any notification that can be received by my plugin about this
</I>&gt;<i> event happening or I need to poll Mnesia once in a while?
</I>
Well, you can invoke rabbit_mnesia:cluster_nodes(running) or 
rabbit_mnesia:cluster_nodes(all) or whatever.

&gt;<i> I see there's rabbit_node_monitor:notify_joined_cluster/0 but that's
</I>&gt;<i> doesn't seem to help me.
</I>
No, that's the other way round - used to tell the node monitor that a 
node has joined.

What are you trying to do?

Cheers, Simon



------------------------------

Message: 9
Date: Mon, 23 Sep 2013 10:01:39 +0100
From: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] federate the unnamed queue?
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Greg Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gj.roy75 at gmail.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">52400373.5080005 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 22/09/2013 19:33, Michael Klishin wrote:
&gt;<i> It should be possible to federate any exchange, as far as I know.
</I>
As Alvaro pointed out, it's any exchange other than the default exchange 
(since the &quot;default exchange&quot; really just means &quot;publish to queue&quot;).

I'll update the documentation to make this clearer.

Cheers, Simon



------------------------------

Message: 10
Date: Mon, 23 Sep 2013 10:04:51 +0100
From: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Troubleshooting RabbitMQ
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Sukhjeet Singh &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">princu.chana at gmail.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">52400433.1060904 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 22/09/2013 12:39, Sukhjeet Singh wrote:
&gt;<i> Actually, the problem is that createConnection() method is throwing an
</I>&gt;<i> exception and the exception is &quot;BrokerUnreachableException was Unhandled&quot;.
</I>
The clue's in the name. The broker was not reachable. Catch the 
exception to find out more, but I would bet that you haven't pointed the 
ConnectionFactory at the broker.

Cheers, Simon


------------------------------

Message: 11
Date: Mon, 23 Sep 2013 10:06:36 +0100
From: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Questiong about plugins and clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">5240049C.4060204 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1



Hi Alvaro,

On 21/09/13 02:53, Alvaro Videla wrote:

&gt;<i> Is there a way for a plugin to know when a node joins or leaves the
</I>&gt;<i> cluster? 
</I>
A plugin could subscribe to Mnesia system events that will report when
Mnesia stops and starts on nodes:
 <A HREF="http://www.erlang.org/doc/apps/mnesia/Mnesia_chap5.html#id76679">http://www.erlang.org/doc/apps/mnesia/Mnesia_chap5.html#id76679</A>

Depending on the kind of plugin you are writing you could use the
information sent to the log exchange (amq.rabbitmq.log) to determine
when nodes leave and join.



-Emile





------------------------------

Message: 12
Date: Mon, 23 Sep 2013 10:16:53 +0100
From: Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] How do the Producer gets response from
	the subscribers
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: ramkkk &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mramu789 at gmail.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">52400705.3000600 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 19/09/13 13:15, ramkkk wrote:
&gt;<i> Producer the sends a command to the consumer  to spawn the process . so each
</I>&gt;<i> consumer has to give the response back to the Producer ..
</I>&gt;<i>
</I>&gt;<i>   but i am not getting the response back to the Producer, consumer is going
</I>&gt;<i> on the infinite loop...
</I>&gt;<i> [...]
</I>&gt;<i> consumer code
</I>&gt;<i> [...]
</I>&gt;<i>      def on_request(self,ch, method, props, body):
</I>&gt;<i>          self.spawn_processes(2)
</I>&gt;<i>          self.response = [process.pid for process in self.spawned_processes]
</I>&gt;<i>          ch.basic_publish(exchange='logs',
</I>&gt;<i>                       routing_key='',
</I>&gt;<i>                       properties=pika.BasicProperties(correlation_id = \
</I>&gt;<i>                                                       props.correlation_id,
</I>&gt;<i>                                                       delivery_mode=2 ,
</I>&gt;<i>                                                       ),
</I>&gt;<i>
</I>&gt;<i>                       body=str(self.response))
</I>&gt;<i>          ch.basic_ack(delivery_tag = method.delivery_tag)
</I>
The consumer is publishing the response to the 'logs' exchange with a '' 
routing key, whereas...

&gt;<i> Producer
</I>&gt;<i> [...]
</I>&gt;<i>      def __init__(self):
</I>&gt;<i>          self.connection = pika.BlockingConnection(pika.ConnectionParameters(
</I>&gt;<i>                  host='localhost'))
</I>&gt;<i>          self.channel = self.connection.channel()
</I>&gt;<i>          self.channel.exchange_declare(exchange='logs',
</I>&gt;<i>                           type='fanout')
</I>&gt;<i>          result = self.channel.queue_declare(exclusive=True)
</I>&gt;<i>          self.callback_queue = result.method.queue
</I>&gt;<i>
</I>&gt;<i>          self.channel.basic_qos(prefetch_count=1)
</I>&gt;<i>          self.channel.basic_consume(self.on_response, no_ack=True,
</I>&gt;<i>                                     queue=self.callback_queue)
</I>
...the producer is expecting replies on an exclusive, server-named queue.

Clearly that isn't going to work. And because the 'logs' exchange is 
also the exchange on which the consumer queue is bound you end up with 
the 'infinite loop' at the consumer since the response published by the 
consumer will be consumed by the consumer!

You need to change your consumer to publish the response to the default 
exchange ('') with the routing_key taken from props.reply_to of the request.

Matthias.


------------------------------

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>


End of rabbitmq-discuss Digest, Vol 76, Issue 24
************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130923/16da1935/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130923/16da1935/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030322.html">[rabbitmq-discuss] federate the unnamed queue?
</A></li>
	<LI>Next message: <A HREF="030332.html">[rabbitmq-discuss] consumer in background
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30331">[ date ]</a>
              <a href="thread.html#30331">[ thread ]</a>
              <a href="subject.html#30331">[ subject ]</a>
              <a href="author.html#30331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
