<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] clearing a queue error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20clearing%20a%20queue%20error&In-Reply-To=%3C5245CD81.3000400%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030494.html">
   <LINK REL="Next"  HREF="030508.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] clearing a queue error</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20clearing%20a%20queue%20error&In-Reply-To=%3C5245CD81.3000400%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] clearing a queue error">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Sep 27 19:25:05 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030494.html">[rabbitmq-discuss] clearing a queue error
</A></li>
        <LI>Next message: <A HREF="030508.html">[rabbitmq-discuss] clearing a queue error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30497">[ date ]</a>
              <a href="thread.html#30497">[ thread ]</a>
              <a href="subject.html#30497">[ subject ]</a>
              <a href="author.html#30497">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Warren,

On 27/09/13 17:01, Warren Smith wrote:
&gt;<i> =ERROR REPORT==== 27-Sep-2013::09:02:35 ===
</I>&gt;<i> ** Generic server &lt;0.249.0&gt; terminating
</I>&gt;<i> ** Last message in was {init,&lt;0.126.0&gt;}
</I>&gt;<i> ** When Server state == {q,{amqqueue,
</I>&gt;<i>                                 {resource,&lt;&lt;&quot;xsede_public&quot;&gt;&gt;,queue,
</I>&gt;<i>                                     &lt;&lt;&quot;carnac.sysinfo&quot;&gt;&gt;},
</I>&gt;<i>                                 true,false,none,[],&lt;0.249.0&gt;,[],[],
</I>&gt;<i>                                 [{vhost,&lt;&lt;&quot;xsede_public&quot;&gt;&gt;},
</I>&gt;<i>                                  {name,&lt;&lt;&quot;ha-carnac&quot;&gt;&gt;},
</I>&gt;<i>                                  {pattern,&lt;&lt;&quot;^carnac\\.&quot;&gt;&gt;},
</I>&gt;<i>                                  {definition,[{&lt;&lt;&quot;ha-mode&quot;&gt;&gt;,&lt;&lt;&quot;all&quot;&gt;&gt;}]},
</I>&gt;<i>                                  {priority,0}],
</I>&gt;<i>                                 []},
</I>&gt;<i>                             none,false,undefined,undefined,
</I>&gt;<i>                             {[],[]},
</I>&gt;<i>                             undefined,undefined,undefined,undefined,
</I>&gt;<i>                             {state,fine,5000,undefined},
</I>&gt;<i>                             {0,nil},
</I>&gt;<i>                             undefined,undefined,undefined,
</I>&gt;<i>                             {dict,0,16,16,8,80,48,
</I>&gt;<i>                                 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                  []},
</I>&gt;<i>                                 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>                                   []}}},
</I>&gt;<i>                             undefined,undefined,undefined,running}
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i> ** {function_clause,[{rabbit_variable_queue,d,[{delta,49152,15059,49152}],[]},
</I>&gt;<i>                       {rabbit_variable_queue,maybe_deltas_to_betas,1,[]},
</I>&gt;<i>                       {rabbit_variable_queue,init,6,[]},
</I>&gt;<i>                       {rabbit_mirror_queue_master,init,3,[]},
</I>&gt;<i>                       {rabbit_amqqueue_process,declare,3,[]},
</I>&gt;<i>                       {gen_server2,handle_msg,2,[]},
</I>&gt;<i>                       {proc_lib,init_p_do_apply,3,
</I>&gt;<i>                                 [{file,&quot;proc_lib.erl&quot;},{line,239}]}]}
</I>
Interesting. We've seen this once before in our testing but have not 
been able to reproduce it.

What RabbitMQ version is this on?

&gt;<i> There may be a bug here for you to look in to
</I>
There certainly is. So right now whenever you bounce the node you get 
the above? If so, could you possible send us the contents of the entire 
RABBITMQ_MNESIA_DIR directory? That should allow is to reproduce the 
problem and hopefully track down the cause.

&gt;<i> do you have a suggestion for how I can clear this error?
</I>
Are you ok with losing the queue and its data? If so we may be able to 
come up with some 'rabbitmqctl eval' magic for you to clear the error.


Regards,

Matthias.
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030494.html">[rabbitmq-discuss] clearing a queue error
</A></li>
	<LI>Next message: <A HREF="030508.html">[rabbitmq-discuss] clearing a queue error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30497">[ date ]</a>
              <a href="thread.html#30497">[ thread ]</a>
              <a href="subject.html#30497">[ subject ]</a>
              <a href="author.html#30497">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
