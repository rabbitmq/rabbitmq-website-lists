<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Channel best practices
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channel%20best%20practices&In-Reply-To=%3C3CB93AD8-8875-4E45-BAB9-2F3F348E8730%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030337.html">
   <LINK REL="Next"  HREF="030341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Channel best practices</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channel%20best%20practices&In-Reply-To=%3C3CB93AD8-8875-4E45-BAB9-2F3F348E8730%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Channel best practices">tim at rabbitmq.com
       </A><BR>
    <I>Mon Sep 23 11:40:06 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="030337.html">[rabbitmq-discuss] Channel best practices
</A></li>
        <LI>Next message: <A HREF="030341.html">[rabbitmq-discuss] Channel best practices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30339">[ date ]</a>
              <a href="thread.html#30339">[ thread ]</a>
              <a href="subject.html#30339">[ subject ]</a>
              <a href="author.html#30339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 23 Sep 2013, at 11:20, Mike Hadlow wrote:

&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> Are channel best practices for connected RabbitMQ clients published anywhere? I understand the threading limitations, that channels should not be shared between threads. Does the channel concept exist only to support multi-threaded applications, or does it have some other purpose?
</I>&gt;<i> 
</I>
The channel concept exists (in AMQP) to provide a lightweight alternative to having one TCP connection per client, since the latter are resource intensive (to both client and server's detriment). Multiplexing multiple &quot;clients&quot; over a single TCP connection turns out to be a fairly common approach amongst network intensive applications. Channels also provide a unit of atomicity with regards message ordering, i.e., messages are always fully (FIFO) ordered from client to server over a single channel, whereas there are no ordering guarantees regarding messages concurrently sent (or delivered) over multiple channels.

&gt;<i> If I marshal all calls to a channel onto a single thread in my application code, is there any problem with simply maintaining a single channel for all declares, publishes and consumes?
</I>&gt;<i> 
</I>
One problem you might run into relates to the answer I've given below about correlating ACKs with the correct channel.

&gt;<i> Additional questions:
</I>&gt;<i> 
</I>&gt;<i> 1. Should each basic consume be invoked on a dedicated channel?
</I>&gt;<i> 
</I>
That's not strictly necessary, though neither is it wrong. Depending on your application logic, you might find that introduces unnecessary overhead (in terms of threads and associated synchronisation primitives used in the client and/or additional resource use on the server), so if I were you I would only do it if it is (a) necessary or (b) significantly simplifies your client code. Remember that a channel provides a FIFO ordering guarantee, so having multiple consumers on a single channel means that you're potentially dealing with messages from more than one source queue, in which case you might inadvertently introduce a serial bottleneck. 

&gt;<i> 2. Do I need to basic.ack on the same channel on which I invoked basic.consume?
</I>&gt;<i> 
</I>
Yes, that is absolutely necessary. An ACK sent on another channel to the one on which the delivery was received will be treated as a channel error.

Cheers,
Tim
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030337.html">[rabbitmq-discuss] Channel best practices
</A></li>
	<LI>Next message: <A HREF="030341.html">[rabbitmq-discuss] Channel best practices
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30339">[ date ]</a>
              <a href="thread.html#30339">[ thread ]</a>
              <a href="subject.html#30339">[ subject ]</a>
              <a href="author.html#30339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
