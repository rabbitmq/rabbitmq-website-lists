<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Searching%20for%20a%20client%20library/example%3A%0A%20Problems%20getting%20a%20reliable%20connection%20in%20Python%20and%20Erlang&In-Reply-To=%3CCAE0Sz%3Dy_u_KSisGT_aOfd7EP5rhero_9_2M9drWYXs88KSGpDA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023568.html">
   <LINK REL="Next"  HREF="023572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Searching%20for%20a%20client%20library/example%3A%0A%20Problems%20getting%20a%20reliable%20connection%20in%20Python%20and%20Erlang&In-Reply-To=%3CCAE0Sz%3Dy_u_KSisGT_aOfd7EP5rhero_9_2M9drWYXs88KSGpDA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang">jerryk at rbcon.com
       </A><BR>
    <I>Sun Nov  4 18:24:38 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023568.html">[rabbitmq-discuss] Searching for a client library/example:	Problems getting a reliable connection in Python and Erlang
</A></li>
        <LI>Next message: <A HREF="023572.html">[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23569">[ date ]</a>
              <a href="thread.html#23569">[ thread ]</a>
              <a href="subject.html#23569">[ subject ]</a>
              <a href="author.html#23569">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Also, further to what Alvaro said:  The Erlang client is quite reliable
and, indeed, is used by us internally for a range of things.  Its main
downside is that the documentation can be a bit sparse, especially if
you're new to Erlang, and it has had some API changes over the years that
have rendered some of what you might read about it on the internet out of
date (again, in ways that are probably harder to sort out if you're new to
the whole mess)...

+1 to Alvaro's request for some more specifics on what you're up to helping
us provide guidance... :-)

Best regards,
Jerry

On Sun, Nov 4, 2012 at 10:20 AM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt;wrote:

&gt;<i> Would you mind sharing some code? Is hard for us to help you without code.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Alvaro
</I>&gt;<i>
</I>&gt;<i> Sent from my iPhone
</I>&gt;<i>
</I>&gt;<i> On Nov 4, 2012, at 7:06 PM, Daniel Neugebauer &lt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mailinglists at energiequant.de</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I wanted to use RabbitMQ for simple log collection but for some reason I
</I>&gt;<i> &gt; can't find any useful AMQP client library (and what good is a server
</I>&gt;<i> &gt; without a working client?). I'd like to implement in either Python or
</I>&gt;<i> &gt; Erlang but I'm unable to get a reliable connection - either connection
</I>&gt;<i> &gt; setup fails, strange error messages appear after a short uptime or the
</I>&gt;<i> &gt; client just cannot handle connection loss.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What I've written so far is a simple Python script that takes lines from
</I>&gt;<i> &gt; stdin, builds a dictionary from it and tries to send it via amqplib,
</I>&gt;<i> &gt; Pika or Kombu (which seems to decide on using amqplib internally). It's
</I>&gt;<i> &gt; nothing special, I already have a serialized string, that's all I need
</I>&gt;<i> &gt; to send.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; However, Pika or amqplib (it's been a while since I tried them, so I
</I>&gt;<i> &gt; don't remember which one it was) appeared to have some buffer issue -
</I>&gt;<i> &gt; although the connection (to localhost) was still alive, I would get
</I>&gt;<i> &gt; error messages about messages queueing up in the client after a few
</I>&gt;<i> &gt; minutes. The other library would loose connection a few seconds after
</I>&gt;<i> &gt; connecting but doesn't notice. Kombu terminates when the connection to
</I>&gt;<i> &gt; RabbitMQ is lost, although I would expect Kombu to retry since I set
</I>&gt;<i> &gt; retry = True when calling publish on the Producer object. I'm already
</I>&gt;<i> &gt; running a reconnect in a loop with a try/except inside but my script
</I>&gt;<i> &gt; just terminates. Strange...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I also tried to use amqp_client in Erlang but failed to get any
</I>&gt;<i> &gt; connection (I always get unknown_host unless I enter nothing as host
</I>&gt;<i> &gt; name). I should add that I only read into Erlang theoretically so far
</I>&gt;<i> &gt; and didn't get to write much but example programs yet, so it's likely I
</I>&gt;<i> &gt; do something wrong here (yes, I already tried both binary lists and
</I>&gt;<i> &gt; regular lists, no difference; I even tried supplying IP addresses in
</I>&gt;<i> &gt; various forms - without success). Documentation is scarce and what I
</I>&gt;<i> &gt; found suggests that I'm doing nothing wrong. I would prefer staying with
</I>&gt;<i> &gt; Python for this implementatin anyway, just thought the client that comes
</I>&gt;<i> &gt; with RabbitMQ should be able to work fine - unfortunately I seem to be
</I>&gt;<i> &gt; wrong here. :(
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; My question is: Does anyone have a complete working example of a
</I>&gt;<i> &gt; *reliable* client in Python (or Erlang)? Maybe I'm too stupid to read
</I>&gt;<i> &gt; the (very brief?) documentation correctly or the libraries I tried so
</I>&gt;<i> &gt; far are just too buggy... What I started with was an example from
</I>&gt;<i> &gt; &quot;RabbitMQ in Action&quot; but even that didn't work as expected.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If it wasn't for getting logs piped in on the console I would try Java
</I>&gt;<i> &gt; clients instead as I expect them to be more mature - to me, the Python
</I>&gt;<i> &gt; libraries appear to be a bit messy, pardon my (maybe wrong) impression
</I>&gt;<i> &gt; but I'm starting to get very frustrated with this: I've never had more
</I>&gt;<i> &gt; problems to just get a simple plain string handed over to some other
</I>&gt;<i> &gt; system. All in all I've spent too many hours in trying to get anything
</I>&gt;<i> &gt; working and nothing has worked so far.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; Daniel
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121104/7befbf1a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121104/7befbf1a/attachment.htm</A>&gt;
</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023568.html">[rabbitmq-discuss] Searching for a client library/example:	Problems getting a reliable connection in Python and Erlang
</A></li>
	<LI>Next message: <A HREF="023572.html">[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23569">[ date ]</a>
              <a href="thread.html#23569">[ thread ]</a>
              <a href="subject.html#23569">[ subject ]</a>
              <a href="author.html#23569">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
