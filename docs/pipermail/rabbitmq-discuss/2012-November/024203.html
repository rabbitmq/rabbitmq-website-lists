<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Negative policy for HA queue name matching
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Negative%20policy%20for%20HA%20queue%20name%20matching&In-Reply-To=%3CCCDC1E51.668C%25Michael.Laing%40nytimes.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024214.html">
   <LINK REL="Next"  HREF="024207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Negative policy for HA queue name matching</H1>
    <B>Laing, Michael P.</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Negative%20policy%20for%20HA%20queue%20name%20matching&In-Reply-To=%3CCCDC1E51.668C%25Michael.Laing%40nytimes.com%3E"
       TITLE="[rabbitmq-discuss] Negative policy for HA queue name matching">Michael.Laing at nytimes.com
       </A><BR>
    <I>Thu Nov 29 01:02:25 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024214.html">[rabbitmq-discuss] unable to connect to node
</A></li>
        <LI>Next message: <A HREF="024207.html">[rabbitmq-discuss] Negative policy for HA queue name matching
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24203">[ date ]</a>
              <a href="thread.html#24203">[ thread ]</a>
              <a href="subject.html#24203">[ subject ]</a>
              <a href="author.html#24203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I thought I would post this because I found it useful in our case &#8211; and it is not particularly intuitive.

Most of our queues are HA, but apps create temporary queues which might as well be local, and sometimes we create local queues too.

Here is the pattern for a policy that will match all queue names EXCEPT those which start with 'amq.' or 'local.'

^(?!local\.|amq\.).*$

With this, temporary queues will not be HA, nor will queues we create that are prefixed with 'local.'.

In case you are wondering that regex uses a compound negative lookahead&#8230; inefficient but that doesn't matter in our case, as we don't create lots of temporary or local queues.

This makes our transition to 3.0 a little easier, as we don't have to rename queues, and I hope it helps someone else too.

Michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121128/bc790913/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121128/bc790913/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024214.html">[rabbitmq-discuss] unable to connect to node
</A></li>
	<LI>Next message: <A HREF="024207.html">[rabbitmq-discuss] Negative policy for HA queue name matching
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24203">[ date ]</a>
              <a href="thread.html#24203">[ thread ]</a>
              <a href="subject.html#24203">[ subject ]</a>
              <a href="author.html#24203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
