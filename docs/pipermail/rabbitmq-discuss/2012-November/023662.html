<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] publish msg in immediate mode and rabbitmq server's memory is pilling up
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish%20msg%20in%20immediate%20mode%20and%20rabbitmq%0A%20server%27s%20memory%20is%20pilling%20up&In-Reply-To=%3C509A746C.1090709%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023660.html">
   <LINK REL="Next"  HREF="023674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] publish msg in immediate mode and rabbitmq server's memory is pilling up</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20publish%20msg%20in%20immediate%20mode%20and%20rabbitmq%0A%20server%27s%20memory%20is%20pilling%20up&In-Reply-To=%3C509A746C.1090709%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] publish msg in immediate mode and rabbitmq server's memory is pilling up">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Nov  7 14:47:08 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023660.html">[rabbitmq-discuss] publish msg in immediate mode and rabbitmq server's memory is pilling up
</A></li>
        <LI>Next message: <A HREF="023674.html">[rabbitmq-discuss] publish msg in immediate mode and rabbitmq server's memory is pilling up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23662">[ date ]</a>
              <a href="thread.html#23662">[ thread ]</a>
              <a href="subject.html#23662">[ subject ]</a>
              <a href="author.html#23662">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/11/12 13:30, &#38472;&#23431;&#21073; wrote:
&gt;<i> i check out that  i use the rabbitmq 2.8.6.
</I>
Hmm, that should be fine.

However, ...

note that any 'mandatory'/'immediate' messages that cannot be 
routed/delivered are *returned to the sender*. If the sender is not 
draining those messages from the socket then they could easily pile up 
at the server, causing memory usage to creep up.

As Simon said, 'immediate' is going away, so I recommend that you 
replace it with a per-queue message ttl 
(<A HREF="http://www.rabbitmq.com/ttl.html#per-queue-message-ttl">http://www.rabbitmq.com/ttl.html#per-queue-message-ttl</A>) of 0, as 
previously suggested. Messages discarded that way will simply get 
dropped rather than returned.

Regards,

Matthias.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023660.html">[rabbitmq-discuss] publish msg in immediate mode and rabbitmq server's memory is pilling up
</A></li>
	<LI>Next message: <A HREF="023674.html">[rabbitmq-discuss] publish msg in immediate mode and rabbitmq server's memory is pilling up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23662">[ date ]</a>
              <a href="thread.html#23662">[ thread ]</a>
              <a href="subject.html#23662">[ subject ]</a>
              <a href="author.html#23662">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
