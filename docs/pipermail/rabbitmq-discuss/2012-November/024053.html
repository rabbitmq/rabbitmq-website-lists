<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Advanced per-user authorization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Advanced%20per-user%20authorization&In-Reply-To=%3C8971f9ab-0038-49dd-b520-c5fb147479e1%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024056.html">
   <LINK REL="Next"  HREF="024066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Advanced per-user authorization</H1>
    <B>Jonas Schwertfeger</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Advanced%20per-user%20authorization&In-Reply-To=%3C8971f9ab-0038-49dd-b520-c5fb147479e1%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Advanced per-user authorization">jschwertfeger at gmail.com
       </A><BR>
    <I>Wed Nov 21 14:40:43 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024056.html">[rabbitmq-discuss] message broadcasting in rabbitmq
</A></li>
        <LI>Next message: <A HREF="024066.html">[rabbitmq-discuss] Advanced per-user authorization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24053">[ date ]</a>
              <a href="thread.html#24053">[ thread ]</a>
              <a href="subject.html#24053">[ subject ]</a>
              <a href="author.html#24053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I'm working on an application where untrusted clients connect to RabbitMQ 
as consumers in a pub/sub scheme. Clients can connect either as anonymous 
guests or as registered users via username/password.

I have a backend that acts as a producer. The producer publishes two types 
of messages:

1) Public messages with information that every client should be able to 
consume by binding their queues to the relevant topic exchange and routing 
key.

2) Private messages that are targeted at specific users (each message is 
targeted at one particular user). Clients should only be able to consume 
messages targeted at the user with which they connected.

My question now is, how to best enforce this authorization scheme. It 
doesn't seem like RabbitMQ supports authorization based on routing keys but 
only on vhosts, exchanges and queues.

They way I would solve this is by having the producer create a topic 
exchange per user and only give that particular user the right to bind its 
queues against it. Private messages would be published to the target user's 
topic exchange while public messages would be published to amq.topic.

Is this secure or am I missing something?

How light-weight are exchanges in RabbitMQ? What dose the memory and 
computational complexity look like if there are N exchanges? O(1) or worse?

We are not talking about a few hundred users but hundreds of thousands, if 
not millions, of users - and hence millions of exchanges.

-Jonas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121121/df95ddb6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121121/df95ddb6/attachment.htm</A>&gt;
</PRE>




















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024056.html">[rabbitmq-discuss] message broadcasting in rabbitmq
</A></li>
	<LI>Next message: <A HREF="024066.html">[rabbitmq-discuss] Advanced per-user authorization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24053">[ date ]</a>
              <a href="thread.html#24053">[ thread ]</a>
              <a href="subject.html#24053">[ subject ]</a>
              <a href="author.html#24053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
