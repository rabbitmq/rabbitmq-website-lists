<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] WinXP Embedded - Interactive Server works, Service does not.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20WinXP%20Embedded%20-%20Interactive%20Server%20works%2C%0A%20Service%20does%20not.&In-Reply-To=%3C50984440.9000902%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023609.html">
   <LINK REL="Next"  HREF="023613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] WinXP Embedded - Interactive Server works, Service does not.</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20WinXP%20Embedded%20-%20Interactive%20Server%20works%2C%0A%20Service%20does%20not.&In-Reply-To=%3C50984440.9000902%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] WinXP Embedded - Interactive Server works, Service does not.">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Nov  5 22:57:04 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023609.html">[rabbitmq-discuss] WinXP Embedded - Interactive Server works, Service does not.
</A></li>
        <LI>Next message: <A HREF="023613.html">[rabbitmq-discuss] WinXP Embedded - Interactive Server works, Service does not.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23610">[ date ]</a>
              <a href="thread.html#23610">[ thread ]</a>
              <a href="subject.html#23610">[ subject ]</a>
              <a href="author.html#23610">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Daniel,

On 05/11/12 22:12, Daniel Lewis wrote:
&gt;<i> Well for instance, the lines below generate the errormessage:
</I>&gt;<i>
</I>&gt;<i> &quot;!ERLANG_SERVICE_MANAGER_PATH!\erlsrv&quot; list !RABBITMQ_SERVICENAME! 2&gt;NUL 1&gt;NUL
</I>&gt;<i> if errorlevel 1 (
</I>&gt;<i>      &quot;!ERLANG_SERVICE_MANAGER_PATH!\erlsrv&quot; add !RABBITMQ_SERVICENAME!
</I>&gt;<i> ) else (
</I>&gt;<i>      echo !RABBITMQ_SERVICENAME! service is already present - only updating service parameters
</I>&gt;<i> )
</I>&gt;<i>
</I>&gt;<i> but the condition still appears to be correct
</I>
Right, but why would the output redirection cause a &quot;system cannot find 
the file specified&quot; message? I can't see anything wrong with the output 
redirection. Can you? Does it work for ordinary commands, e.g. &quot;dir 
2&gt;NUL 1&gt;NUL&quot;?

&gt;<i> Sorry - here is the set command:
</I>&gt;<i>
</I>&gt;<i> C:\PROGRA~1\Ticketmaster\TMDS\rabbitmq\sbin&gt;&quot;!ERLANG_SERVICE_MANAGER_PATH!\erlsrv&quot; set !RABBITMQ_SERVICENAME! -machine &quot;!ERLANG_SERVICE_MANAGER_PATH!\erl.exe&quot; -env ERL_CRASH_DUMP=&quot;!RABBITMQ_BASE_UNIX!/erl_crash.dump&quot; -workdir &quot;!RABBITMQ_BASE!&quot; -stopaction &quot;rabbit:stop_and_halt().&quot; -sname !RABBITMQ_NODENAME! !CONSOLE_FLAG! -args &quot;!ERLANG_SERVICE_ARGUMENTS!&quot;  1&gt;NUL
</I>&gt;<i>
</I>&gt;<i> which expands to:
</I>&gt;<i>
</I>&gt;<i> &quot;c:\progra~1\ticketmaster\tmds\erlang\erts-5.9.2\bin\erlsrv&quot; set RabbitMQ -machine &quot;c:\progra~1\ticketmaster\tmds\erlang\erts-5.9.2\bin\erl.exe&quot; -env ERL_CRASH_DUMP=&quot;C:/Documents and Settings/Administrator/Application Data/RabbitMQ/erl_crash.dump&quot; -workdir &quot;C:\Documents and Settings\Administrator\Application Data\RabbitMQ&quot; -stopaction &quot;rabbit:stop_and_halt().&quot; -sname <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at DANIEL-WYSE</A>  -args &quot;  -boot \&quot;C:/Documents and Settings/Administrator/Application Data/RabbitMQ/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at DANIEL-WYSE-plugins-expand</A>\\rabbit\&quot;  -s rabbit +W w +A30 -kernel inet_default_listen_options \&quot;[{nodelay,true}]\&quot; -kernel inet_default_connect_options \&quot;[{nodelay,true}]\&quot;  -kernel error_logger {file,\\\&quot;\&quot;C:/Documents and Settings/Administrator/Application Data/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at DANIEL-WYSE.log</A>\&quot;\\\&quot;}  -sasl errlog_type error -sasl sasl_error_logger {file,\\\&quot;\&quot;C:/Documents and Settings/Administrator/Application Data/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at DANIEL-WYSE-sasl.log</A>\&quot;\\\&quot;} -os_mon start_cpu_sup true -os_m
</I> on start
 _
disksup false -os_mon start_memsup false -mnesia dir \\\&quot;\&quot;C:/Documents and Settings/Administrator/Application Data/RabbitMQ/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at DANIEL-WYSE-mnesia</A>\&quot;\\\&quot;  install&quot;

That looks reasonable.

&gt;<i> When I do a rabbitmq-service.bat list, it shows me this:
</I>&gt;<i>
</I>&gt;<i> &quot;c:\progra~1\ticketmaster\tmds\erlang\erts-5.9.2\bin\erlsrv&quot; list RabbitMQ
</I>&gt;<i> Service name: RabbitMQ
</I>&gt;<i> StopAction:
</I>&gt;<i> OnFail: ignore
</I>&gt;<i> Machine: c:\progra~1\ticketmaster\tmds\erlang\erts-5.9.2\bin\erl.exe
</I>&gt;<i> WorkDir:
</I>&gt;<i> SName: RabbitMQ
</I>&gt;<i> Priority: default
</I>&gt;<i> DebugType: none
</I>&gt;<i> Args:
</I>&gt;<i> InternalServiceName: RabbitMQ01cdbba1e5d12470
</I>&gt;<i> Comment:
</I>&gt;<i> Env:
</I>
You got the above after running &quot;rabbitmq-service.bat remove&quot; followed 
by &quot;rabbitmq-server.bat install&quot;?

I wonder whether it's unhappy about the long, non-DOS-y paths. You may 
want to experiment with your env var settings s.t. the expanded command 
line above only has very short paths in it. e.g. &quot;C:\RabbitMQ&quot; instead 
of &quot;C:\Documents and Settings\Administrator\Application Data\RabbitMQ&quot;.

Regards,

Matthias.
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023609.html">[rabbitmq-discuss] WinXP Embedded - Interactive Server works, Service does not.
</A></li>
	<LI>Next message: <A HREF="023613.html">[rabbitmq-discuss] WinXP Embedded - Interactive Server works, Service does not.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23610">[ date ]</a>
              <a href="thread.html#23610">[ thread ]</a>
              <a href="subject.html#23610">[ subject ]</a>
              <a href="author.html#23610">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
