<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Searching for a client library/example:	Problems getting a reliable connection in Python and Erlang
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Searching%20for%20a%20client%20library/example%3A%0A%09Problems%20getting%20a%20reliable%20connection%20in%20Python%20and%20Erlang&In-Reply-To=%3C33A8266E-A9CB-464A-A72A-81D52B5D3583%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023566.html">
   <LINK REL="Next"  HREF="023569.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Searching for a client library/example:	Problems getting a reliable connection in Python and Erlang</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Searching%20for%20a%20client%20library/example%3A%0A%09Problems%20getting%20a%20reliable%20connection%20in%20Python%20and%20Erlang&In-Reply-To=%3C33A8266E-A9CB-464A-A72A-81D52B5D3583%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Searching for a client library/example:	Problems getting a reliable connection in Python and Erlang">videlalvaro at gmail.com
       </A><BR>
    <I>Sun Nov  4 18:20:34 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023566.html">[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang
</A></li>
        <LI>Next message: <A HREF="023569.html">[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23568">[ date ]</a>
              <a href="thread.html#23568">[ thread ]</a>
              <a href="subject.html#23568">[ subject ]</a>
              <a href="author.html#23568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Would you mind sharing some code? Is hard for us to help you without code. 

Regards,

Alvaro

Sent from my iPhone

On Nov 4, 2012, at 7:06 PM, Daniel Neugebauer &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mailinglists at energiequant.de</A>&gt; wrote:

&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> I wanted to use RabbitMQ for simple log collection but for some reason I
</I>&gt;<i> can't find any useful AMQP client library (and what good is a server
</I>&gt;<i> without a working client?). I'd like to implement in either Python or
</I>&gt;<i> Erlang but I'm unable to get a reliable connection - either connection
</I>&gt;<i> setup fails, strange error messages appear after a short uptime or the
</I>&gt;<i> client just cannot handle connection loss.
</I>&gt;<i> 
</I>&gt;<i> What I've written so far is a simple Python script that takes lines from
</I>&gt;<i> stdin, builds a dictionary from it and tries to send it via amqplib,
</I>&gt;<i> Pika or Kombu (which seems to decide on using amqplib internally). It's
</I>&gt;<i> nothing special, I already have a serialized string, that's all I need
</I>&gt;<i> to send.
</I>&gt;<i> 
</I>&gt;<i> However, Pika or amqplib (it's been a while since I tried them, so I
</I>&gt;<i> don't remember which one it was) appeared to have some buffer issue -
</I>&gt;<i> although the connection (to localhost) was still alive, I would get
</I>&gt;<i> error messages about messages queueing up in the client after a few
</I>&gt;<i> minutes. The other library would loose connection a few seconds after
</I>&gt;<i> connecting but doesn't notice. Kombu terminates when the connection to
</I>&gt;<i> RabbitMQ is lost, although I would expect Kombu to retry since I set
</I>&gt;<i> retry = True when calling publish on the Producer object. I'm already
</I>&gt;<i> running a reconnect in a loop with a try/except inside but my script
</I>&gt;<i> just terminates. Strange...
</I>&gt;<i> 
</I>&gt;<i> I also tried to use amqp_client in Erlang but failed to get any
</I>&gt;<i> connection (I always get unknown_host unless I enter nothing as host
</I>&gt;<i> name). I should add that I only read into Erlang theoretically so far
</I>&gt;<i> and didn't get to write much but example programs yet, so it's likely I
</I>&gt;<i> do something wrong here (yes, I already tried both binary lists and
</I>&gt;<i> regular lists, no difference; I even tried supplying IP addresses in
</I>&gt;<i> various forms - without success). Documentation is scarce and what I
</I>&gt;<i> found suggests that I'm doing nothing wrong. I would prefer staying with
</I>&gt;<i> Python for this implementatin anyway, just thought the client that comes
</I>&gt;<i> with RabbitMQ should be able to work fine - unfortunately I seem to be
</I>&gt;<i> wrong here. :(
</I>&gt;<i> 
</I>&gt;<i> My question is: Does anyone have a complete working example of a
</I>&gt;<i> *reliable* client in Python (or Erlang)? Maybe I'm too stupid to read
</I>&gt;<i> the (very brief?) documentation correctly or the libraries I tried so
</I>&gt;<i> far are just too buggy... What I started with was an example from
</I>&gt;<i> &quot;RabbitMQ in Action&quot; but even that didn't work as expected.
</I>&gt;<i> 
</I>&gt;<i> If it wasn't for getting logs piped in on the console I would try Java
</I>&gt;<i> clients instead as I expect them to be more mature - to me, the Python
</I>&gt;<i> libraries appear to be a bit messy, pardon my (maybe wrong) impression
</I>&gt;<i> but I'm starting to get very frustrated with this: I've never had more
</I>&gt;<i> problems to just get a simple plain string handed over to some other
</I>&gt;<i> system. All in all I've spent too many hours in trying to get anything
</I>&gt;<i> working and nothing has worked so far.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Daniel
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023566.html">[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang
</A></li>
	<LI>Next message: <A HREF="023569.html">[rabbitmq-discuss] Searching for a client library/example: Problems getting a reliable connection in Python and Erlang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23568">[ date ]</a>
              <a href="thread.html#23568">[ thread ]</a>
              <a href="subject.html#23568">[ subject ]</a>
              <a href="author.html#23568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
