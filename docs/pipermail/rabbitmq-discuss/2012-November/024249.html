<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] The rabbitmq-server stop command hangs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20The%20rabbitmq-server%20stop%20command%20hangs&In-Reply-To=%3CE94F626F5C43D14F8B8479C5EBD79038A85ECF82%40vmexchange02.seegrid.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024247.html">
   <LINK REL="Next"  HREF="024250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] The rabbitmq-server stop command hangs</H1>
    <B>Elizabeth Liao</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20The%20rabbitmq-server%20stop%20command%20hangs&In-Reply-To=%3CE94F626F5C43D14F8B8479C5EBD79038A85ECF82%40vmexchange02.seegrid.local%3E"
       TITLE="[rabbitmq-discuss] The rabbitmq-server stop command hangs">eliao at seegrid.com
       </A><BR>
    <I>Fri Nov 30 15:18:45 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024247.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
        <LI>Next message: <A HREF="024250.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24249">[ date ]</a>
              <a href="thread.html#24249">[ thread ]</a>
              <a href="subject.html#24249">[ subject ]</a>
              <a href="author.html#24249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>One more question please. Is the node that you're trying to shut down hanging *indefinitely* or for a very long time, or for a minute or so?
</I>
In all cases for which I've sent logs/trace outputs, the shutdown hangs indefinitely.   I've also seen instances where it hangs for a very long time (~5 minutes) but those were not reproducible.

&gt;<i> When the rabbit is stuck shutting down, is the source host for shovelB and shovelB_realtime (server.local) accessible - i.e., you can ping it, telnet to the amqp port, etc? It seems these two shovels have never got properly started, and they're hung (still trying to establish connections/channels) when you're trying to shut down. We are filing a bug and looking at how to fix this, but it would be helpful for me to understand the topology so I can simulate this bug when producing a fix.
</I>
I checked the connections to and from server.local using ping and telneting to the amqp port and both look okay at the time the shutdown is hanging.

Other information that may be of use:
  * server.local does not have any special configuration (no rabbitmq.config file)
  * I can reproduce this more reliably with 2.8.7 than 3.0.0
  * We're initiating the shutdown shortly after bootup

Liz


Email Confidentiality Notice

The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024247.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
	<LI>Next message: <A HREF="024250.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24249">[ date ]</a>
              <a href="thread.html#24249">[ thread ]</a>
              <a href="subject.html#24249">[ subject ]</a>
              <a href="author.html#24249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
