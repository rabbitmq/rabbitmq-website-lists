<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publishing: Connection timeout issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publishing%3A%20Connection%20timeout%20issue&In-Reply-To=%3C7F989F7A-3CC0-4659-9AE8-207C8B920DEE%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024243.html">
   <LINK REL="Next"  HREF="024255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publishing: Connection timeout issue</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publishing%3A%20Connection%20timeout%20issue&In-Reply-To=%3C7F989F7A-3CC0-4659-9AE8-207C8B920DEE%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Publishing: Connection timeout issue">tim at rabbitmq.com
       </A><BR>
    <I>Fri Nov 30 12:39:57 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024243.html">[rabbitmq-discuss] Publishing: Connection timeout issue
</A></li>
        <LI>Next message: <A HREF="024255.html">[rabbitmq-discuss] Publishing: Connection timeout issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24246">[ date ]</a>
              <a href="thread.html#24246">[ thread ]</a>
              <a href="subject.html#24246">[ subject ]</a>
              <a href="author.html#24246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 30 Nov 2012, at 12:13, Borman Squirrel wrote:

&gt;<i> Hi Alan, thanks for the response!
</I>&gt;<i> 
</I>&gt;<i> I've checked there are no problems with creating an other connection for
</I>&gt;<i> publishing if the connection dies due to time connection problem (since the
</I>&gt;<i> source ports are different), thus the broken connections are still on the
</I>&gt;<i> server.
</I>&gt;<i> 
</I>
If a connection has timed out, the broker will have cleaned up any server resources automatically. When you send an explicit connection.close to the broker, it responds with connection.close_ok, after which the connection is removed from the server and resources are released. If a connection isn't closed explicitly, the underlying network infrastructure will eventually notify the broker that the socket is no longer in use (because successive retries have exhausted kernel configured limits, etc) and the resources will be cleaned up then. This can take a while. 

&gt;<i> Does exist some way for cleaning these dead connections on the server?
</I>&gt;<i> 
</I>
Enabling AMQP heartbeats can make this happen sooner, as can configuring tcp keepalives at the OS level, though I'd advise against the latter unless you fully understand all the potential consequences.  
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024243.html">[rabbitmq-discuss] Publishing: Connection timeout issue
</A></li>
	<LI>Next message: <A HREF="024255.html">[rabbitmq-discuss] Publishing: Connection timeout issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24246">[ date ]</a>
              <a href="thread.html#24246">[ thread ]</a>
              <a href="subject.html#24246">[ subject ]</a>
              <a href="author.html#24246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
