<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] redelivery after ACK
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20redelivery%20after%20ACK&In-Reply-To=%3C1352423071.99837856%40apps.rackspace.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023730.html">
   <LINK REL="Next"  HREF="023736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] redelivery after ACK</H1>
    <B>larry.edelstein at therealreal.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20redelivery%20after%20ACK&In-Reply-To=%3C1352423071.99837856%40apps.rackspace.com%3E"
       TITLE="[rabbitmq-discuss] redelivery after ACK">larry.edelstein at therealreal.com
       </A><BR>
    <I>Fri Nov  9 01:04:31 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023730.html">[rabbitmq-discuss] redelivery after ACK
</A></li>
        <LI>Next message: <A HREF="023736.html">[rabbitmq-discuss] redelivery after ACK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23734">[ date ]</a>
              <a href="thread.html#23734">[ thread ]</a>
              <a href="subject.html#23734">[ subject ]</a>
              <a href="author.html#23734">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Yes, I'll take up this issue with the ruby-amqp groups.
 
I'm asking questions and carefully reporting the behavior I've observed. I'm new to these tools - RabbitMQ server, and the ruby amqp gem. These tools have been around for a while, and the platforms I'm using - RabbitMQ and Ruby and Ubuntu, RabbitMQ and Ruby and Mac OS - are used by many, many developers. It would be -arrogant- and foolish of me to assume that I've immediately stumbled upon a bug in code that I expect has been well-exercised out there in the world. So I'm trying to determine if I'm traversing less-used code paths, using new features, implementing an unusual use case or pattern, misunderstanding how ACKs are supposed to work, or misunderstanding how client-side state is propagated.
 
-larry
 
 
 
 
 
-----Original Message-----
From: &quot;Matthias Radestock&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Sent: Thursday, November 8, 2012 3:42pm
To: &quot;Discussions about RabbitMQ&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">larry.edelstein at therealreal.com</A>
Subject: Re: [rabbitmq-discuss] redelivery after ACK



Larry,

On 08/11/12 22:18, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">larry.edelstein at therealreal.com</A> wrote:
&gt;<i> When I run a capture with Wireshark and consume/ack a few messages, I
</I>&gt;<i> see the expected traffic, but no acks.
</I>&gt;<i>
</I>&gt;<i> However: when I set channel.prefetch(1), now I see the acks. If I kill
</I>&gt;<i> and restart the consumer, delivery begins with the first un-ack'd
</I>&gt;<i> message, as I'd expect.
</I>&gt;<i>
</I>&gt;<i> In fact, if I set channel.prefetch(..) to n, and kill/restart the
</I>&gt;<i> consumer after n+1 messages have been received and ack'd, delivery
</I>&gt;<i> resumes with the first un-ack'd message.
</I>&gt;<i>
</I>&gt;<i> And if I issue a queue.unsubscribe, then kill and restart, delivery
</I>&gt;<i> resumes with un-ack'd messages.
</I>&gt;<i>
</I>&gt;<i> Have I misunderstood the way RabbitMQ and/or the gem are supposed to
</I>&gt;<i> behave? I really thought an ack was an ack.
</I>
It's not clear what in the above you find surprising, except for the 
first observation. If your app is sending an ack but that doesn't show 
up on the wire then clearly there is a problem with either the app, or 
the client library, or the app's use of the client library.

I suggest you post on <A HREF="http://groups.google.com/group/ruby-amqp">http://groups.google.com/group/ruby-amqp</A> or 
perhaps file an issue at <A HREF="https://github.com/ruby-amqp/amqp/issues">https://github.com/ruby-amqp/amqp/issues</A>

Regards,

Matthias.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121108/121a79f8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121108/121a79f8/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023730.html">[rabbitmq-discuss] redelivery after ACK
</A></li>
	<LI>Next message: <A HREF="023736.html">[rabbitmq-discuss] redelivery after ACK
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23734">[ date ]</a>
              <a href="thread.html#23734">[ thread ]</a>
              <a href="subject.html#23734">[ subject ]</a>
              <a href="author.html#23734">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
