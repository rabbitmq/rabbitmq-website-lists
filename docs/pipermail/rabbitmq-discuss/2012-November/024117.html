<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] something about rabbitmq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20something%20about%20rabbitmq&In-Reply-To=%3C50AFAFD8.505%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024106.html">
   <LINK REL="Next"  HREF="024111.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] something about rabbitmq</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20something%20about%20rabbitmq&In-Reply-To=%3C50AFAFD8.505%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] something about rabbitmq">emile at rabbitmq.com
       </A><BR>
    <I>Fri Nov 23 17:18:16 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024106.html">[rabbitmq-discuss] something about rabbitmq
</A></li>
        <LI>Next message: <A HREF="024111.html">[rabbitmq-discuss] not_mgmt_user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24117">[ date ]</a>
              <a href="thread.html#24117">[ thread ]</a>
              <a href="subject.html#24117">[ subject ]</a>
              <a href="author.html#24117">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 23/11/12 08:12, liangliangxinxin wrote:
&gt;<i> second recently i use rabbitmq and rabbitmq-c.i met a problem. for
</I>&gt;<i> example i have two threads and set the qos 5000.one thread consume
</I>&gt;<i> messages from the queue and put them in a list .the other get many
</I>&gt;<i> messages from the list and compress them &#65292;then send the them bythe
</I>&gt;<i> socket.when the socket succeed to send them and got a response,i
</I>&gt;<i> acked them.but a few minutes later,the consumer thread can not
</I>&gt;<i> receive messages any more. and in the web gui,i saw there was 0
</I>&gt;<i> messages no-acked in the queue but many messages in the channel. why
</I>&gt;<i> thesehanppened?
</I>
If I understand your question correctly, you said you have 2 threads, 
and one of them is a consumer. You set qos, and you acknowledge 
messages, but messages are not being acknowledged properly.

The condition you describe sounds like the message acknowledgements are 
not being made correctly. If no more messages are being delivered then 
it could mean the the qos limit has been reached and the broker is 
waiting for acknowledgements from the consumer.

If your application has multiple channels then make sure you acknowledge 
messages on the same channel that they were received on.

You can use &quot;rabbitmqctl list_queues name messages_unacknowledged&quot; to 
diagnose problems with acknowledgements. The number next to each name 
should decrease each time an acknowledgement is received by the broker.

You should also check the broker logfile in case there is a relevant 
error being reported there.




-Emile


</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024106.html">[rabbitmq-discuss] something about rabbitmq
</A></li>
	<LI>Next message: <A HREF="024111.html">[rabbitmq-discuss] not_mgmt_user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24117">[ date ]</a>
              <a href="thread.html#24117">[ thread ]</a>
              <a href="subject.html#24117">[ subject ]</a>
              <a href="author.html#24117">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
