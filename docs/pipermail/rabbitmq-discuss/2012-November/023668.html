<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] best practice for &quot;work queue&quot; type	application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20best%20practice%20for%20%22work%20queue%22%20type%0A%09application&In-Reply-To=%3C395D59AF-7692-4AEF-8221-AE66726087AD%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023567.html">
   <LINK REL="Next"  HREF="023576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] best practice for &quot;work queue&quot; type	application</H1>
    <B>Ask Solem</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20best%20practice%20for%20%22work%20queue%22%20type%0A%09application&In-Reply-To=%3C395D59AF-7692-4AEF-8221-AE66726087AD%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] best practice for &quot;work queue&quot; type	application">ask at rabbitmq.com
       </A><BR>
    <I>Wed Nov  7 18:44:57 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023567.html">[rabbitmq-discuss] best practice for &quot;work queue&quot; type	application
</A></li>
        <LI>Next message: <A HREF="023576.html">[rabbitmq-discuss] Newbie trying to get rabbit cluster to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23668">[ date ]</a>
              <a href="thread.html#23668">[ thread ]</a>
              <a href="subject.html#23668">[ subject ]</a>
              <a href="author.html#23668">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 4 Nov 2012, at 18:12, John Cartwright &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">john.c.cartwright at noaa.gov</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> I'm not quite clear however on the point at which the worker consumes
</I>&gt;<i> the next message in the queue.  Assuming I'm using
</I>&gt;<i> &quot;channel.start_consuming()&quot; as in the tutorial and my worker acks the
</I>&gt;<i> message as soon as it receives it, won't it try to consume a second
</I>&gt;<i> message and the single worker will end up concurrently processing two
</I>&gt;<i> jobs?
</I>&gt;<i> 
</I>

Hey John,

Short answer: No!

Python isn't implicitly parallel so for it to consume messages and
process them at the same time you would have to start multiple (OS) threads
reading from the same socket.  This wouldn't work well since connections
aren't thread safe.

If you are using an asynchronous event loop then the next message
will be consumed when control is given back to the loop
so that it reads from the socket again.

Similarly, when used synchronously the next message will
be consumed when you call 'connection.drain_events()' again
after processing the message.

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023567.html">[rabbitmq-discuss] best practice for &quot;work queue&quot; type	application
</A></li>
	<LI>Next message: <A HREF="023576.html">[rabbitmq-discuss] Newbie trying to get rabbit cluster to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23668">[ date ]</a>
              <a href="thread.html#23668">[ thread ]</a>
              <a href="subject.html#23668">[ subject ]</a>
              <a href="author.html#23668">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
