<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Creating an auth plugin (Kerberos)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Creating%20an%20auth%20plugin%20%28Kerberos%29&In-Reply-To=%3C50B4A5D3.6030802%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024152.html">
   <LINK REL="Next"  HREF="024158.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Creating an auth plugin (Kerberos)</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Creating%20an%20auth%20plugin%20%28Kerberos%29&In-Reply-To=%3C50B4A5D3.6030802%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Creating an auth plugin (Kerberos)">simon at rabbitmq.com
       </A><BR>
    <I>Tue Nov 27 11:36:51 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024152.html">[rabbitmq-discuss] Creating an auth plugin (Kerberos)
</A></li>
        <LI>Next message: <A HREF="024158.html">[rabbitmq-discuss] Creating an auth plugin (Kerberos)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24156">[ date ]</a>
              <a href="thread.html#24156">[ thread ]</a>
              <a href="subject.html#24156">[ subject ]</a>
              <a href="author.html#24156">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/11/12 10:07, Simon Lundstr&#246;m wrote:
&gt;<i> Is there a way to do this without using a seperate function?
</I>&gt;<i> &lt;<A HREF="https://github.com/simmel/rabbitmq-auth-backend-kerberos/commit/8911bd68d729142d0d2b5b1959fb2d53de42800e">https://github.com/simmel/rabbitmq-auth-backend-kerberos/commit/8911bd68d729142d0d2b5b1959fb2d53de42800e</A>&gt;
</I>
This is starting to look like erlang-questions territory :-)

But try this (untested, and condensed to fit on one line):

-define(APP, begin {ok,A}=application:get_application(?MODULE),A end).

&gt;<i> While developing the plugin I've noticed a weird issue. When using the
</I>&gt;<i> API's /api/aliveness-test/%2F it makes a few authentication requests.
</I>&gt;<i> In the third (or so) request password is undefined. In all other
</I>&gt;<i> requests the password is a binary which is the password being used.
</I>&gt;<i>
</I>&gt;<i> Is this a bug? Are auth plugins supposed to handle this? Why is it
</I>&gt;<i> undefined?
</I>
Auth plugins should be able to handle the case where a password is 
undefined - there are some legitimate cases around the direct client 
(for example local federation connections) where no password is supplied 
(we take direct connections on trust, since anything which can do Erlang 
message passing can control the broker anyway). In this case the auth 
plugin should just answer the question &quot;does the user exist?&quot;

In 2.x this also happened with the management plugin when it was using 
the direct client (after it had validated the username / password 
itself). But this was less than useful for auth plugins, so in 3.0 the 
management plugin always passes the password in. I assume you're using 2.x?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024152.html">[rabbitmq-discuss] Creating an auth plugin (Kerberos)
</A></li>
	<LI>Next message: <A HREF="024158.html">[rabbitmq-discuss] Creating an auth plugin (Kerberos)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24156">[ date ]</a>
              <a href="thread.html#24156">[ thread ]</a>
              <a href="subject.html#24156">[ subject ]</a>
              <a href="author.html#24156">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
