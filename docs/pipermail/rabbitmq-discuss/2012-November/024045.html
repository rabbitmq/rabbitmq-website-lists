<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 3.0 Policy ha-all delete issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.0%20Policy%20ha-all%20delete%20issue&In-Reply-To=%3C1353507095099-23572.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024020.html">
   <LINK REL="Next"  HREF="024068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 3.0 Policy ha-all delete issue</H1>
    <B>Mark Ward</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.0%20Policy%20ha-all%20delete%20issue&In-Reply-To=%3C1353507095099-23572.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 3.0 Policy ha-all delete issue">ward.mark at gmail.com
       </A><BR>
    <I>Wed Nov 21 14:11:35 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024020.html">[rabbitmq-discuss] RabbitMQ 3.0 Policy ha-all delete issue
</A></li>
        <LI>Next message: <A HREF="024068.html">[rabbitmq-discuss] RabbitMQ 3.0 Policy ha-all delete issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24045">[ date ]</a>
              <a href="thread.html#24045">[ thread ]</a>
              <a href="subject.html#24045">[ subject ]</a>
              <a href="author.html#24045">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias,

&gt;<i>I see. If you can move off the one-queue-per-reply model then making the 
</I>&gt;<i>reply queues HA won't be so much of an issue. w/o that though the 
</I>&gt;<i>penalty is massive. 
</I>
I agree.  I am going to take another look at this.  A result queue per
thread might work if the results do not need to be accessed beyond the
life-time of the thread.  Probably a dual approach to the result queue's
intent will be taken.  It is something I had thought about before.   Your
suggestion has motivated me to investigate further.

&gt;<i>Interesting. How large are the messages? 
</I>
With RabbitMQ 3.0 installed I am going to run my cluster buster tests again
and report back if I happen to experience the same issues.  

The size of the message may not be exactly the problem but more like how
large of a message, queue size, client count can the rabbitMQ cluster manage
before breaking.  That is probably stating the obvious. It seems even with
the RabbitMQ's high watermark and flow control I was still able to push
rabbitMQ above the highwater mark and enough that erlang would crash and
bring down rabbitmq.  The other was the erlang's heartbeat.  It would
timeout if the cluster nodes could not exchange messages before the node
timeout happened.

The lower the high watermark the larger the message rabbitMQ was able to
manage. But that also greatly increased the use of flow control.  

My test cluster is pretty weak.  I have VMWare vSphere 5 hypervisor
installed on an Intel Core 2 Duo 3.16GHz only 4 gig of ram.  I have 3 VMs
running on this poor workstation with each VM being Windows 2008 r2.  Each
VM only has 1 gig of ram given to it.  Not a very well planned cluster
setup.... Scavengers of  hardware can't be choosers.  My cluster issues
might be due to resource starvation.  

All of this could still be a result of me still learning about RabbitMQ and
could be doing something wrong but I have not figured it out yet.  So, I
solved the problem by having my framework split large messages.

-Mark




--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-3-0-Policy-ha-all-delete-issue-tp23527p23572.html">http://rabbitmq.1065348.n5.nabble.com/RabbitMQ-3-0-Policy-ha-all-delete-issue-tp23527p23572.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024020.html">[rabbitmq-discuss] RabbitMQ 3.0 Policy ha-all delete issue
</A></li>
	<LI>Next message: <A HREF="024068.html">[rabbitmq-discuss] RabbitMQ 3.0 Policy ha-all delete issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24045">[ date ]</a>
              <a href="thread.html#24045">[ thread ]</a>
              <a href="subject.html#24045">[ subject ]</a>
              <a href="author.html#24045">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
