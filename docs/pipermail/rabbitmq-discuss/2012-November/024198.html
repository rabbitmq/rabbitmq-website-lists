<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] unable to connect to node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20unable%20to%20connect%20to%20node&In-Reply-To=%3CCAKH7ZWyvFBXw8mecfaUMjDh3Jv-acokozhtE-5Enfn5Vtj-%3DVQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024197.html">
   <LINK REL="Next"  HREF="024200.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] unable to connect to node</H1>
    <B>John Cartwright - NOAA Federal</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20unable%20to%20connect%20to%20node&In-Reply-To=%3CCAKH7ZWyvFBXw8mecfaUMjDh3Jv-acokozhtE-5Enfn5Vtj-%3DVQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] unable to connect to node">john.c.cartwright at noaa.gov
       </A><BR>
    <I>Wed Nov 28 18:42:56 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024197.html">[rabbitmq-discuss] unable to connect to node
</A></li>
        <LI>Next message: <A HREF="024200.html">[rabbitmq-discuss] unable to connect to node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24198">[ date ]</a>
              <a href="thread.html#24198">[ thread ]</a>
              <a href="subject.html#24198">[ subject ]</a>
              <a href="author.html#24198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Tim.  There seem to be a couple of problems re: the RPM
install, but the &quot;unable to connect to node&quot; appears to be related to
relocating the SYS_PREFIX outside the install directory.  In other
words:

1) I stopped the server started by the init.d script and killed the
epmd process manually to get a clean start
2) install the rabbitmq-server-generic-unix-3.0.0.tar.gz, modifying
rabbitmq-defaults to set SYS_PREFIX to a directory other than the
install directory.
3) started the server
4) same problem with the status reporting &quot;unable to connect to node&quot;.
Also found that I was unable to install a plugin getting the error:
           Error: {cannot_read_enabled_plugins_file,
           &quot;/data/rabbitmq/etc/rabbitmq/enabled_plugins&quot;,eisdir}

5) stopped the server with &quot;rabbitmqctl stop&quot;
6) unset the custom SYS_PREFIX in rabbitmq-defaults and restarted the server
7) started the server and not status reports normally

The init.d script packaged in the RPM is removing the
/var/run/rabbitmq directory on stopping and not re-creating it on
startup, but that's a different issue...

So, do you know of any reason why relocating the data (log, mnesia,
enabled_plugins) should be any different that simply changing the
SYS_PREFIX in rabbitmq-defaults?

--john

On Wed, Nov 28, 2012 at 11:21 AM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:
&gt;<i> I seem to remember having problems when using the init.d script directly rather than `/sbin/service rabbitmq-server start` although that may have been to do with the account from which I ran it the first time. Anyway, are you sure that the rabbitmq-server process is running? You should see an instance of 'beam.smp' when running `ps` if it is, or alternatively you can run `epmd -names` as any user to see which erlang nodes are up and running.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i> On 28 Nov 2012, at 16:55, John Cartwright - NOAA Federal wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hello All,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've installed the RPM ( from
</I>&gt;&gt;<i> <A HREF="http://www.rabbitmq.com/install-rpm.html">http://www.rabbitmq.com/install-rpm.html</A>) on a RHEL6 server and used
</I>&gt;&gt;<i> the init.d script &quot;rabbitmq-server&quot; to start the server.  However,
</I>&gt;&gt;<i> when I  run &quot;rabbitmqctl status&quot;, I get the following suggesting
</I>&gt;&gt;<i> there's a problem:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at squall</A> rabbitmq]$ ./bin/rabbitmqctl status
</I>&gt;&gt;<i> Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at squall</A> ...
</I>&gt;&gt;<i> Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at squall</A>: nodedown
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> DIAGNOSTICS
</I>&gt;&gt;<i> ===========
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> nodes in question: [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at squall</A>]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> hosts, their running nodes and ports:
</I>&gt;&gt;<i> - squall: [{rabbitmqctl23373,52427}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> current node details:
</I>&gt;&gt;<i> - node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl23373 at squall</A>
</I>&gt;&gt;<i> - home dir: /home/rabbitmq
</I>&gt;&gt;<i> - cookie hash: 0W8f6ODD6SgYDvLAojR/Zw==
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've confirmed there's a .erlang.cookie in the home directory of the
</I>&gt;&gt;<i> process owner.  Can someone please help me understand what the problem
</I>&gt;&gt;<i> might be?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --john
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024197.html">[rabbitmq-discuss] unable to connect to node
</A></li>
	<LI>Next message: <A HREF="024200.html">[rabbitmq-discuss] unable to connect to node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24198">[ date ]</a>
              <a href="thread.html#24198">[ thread ]</a>
              <a href="subject.html#24198">[ subject ]</a>
              <a href="author.html#24198">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
