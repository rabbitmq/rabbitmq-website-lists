<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Intermittent failure connecting to RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20failure%20connecting%20to%20RabbitMQ&In-Reply-To=%3C02d001cdbc7e%24a2aa1890%24e7fe49b0%24%40greenbutton.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023634.html">
   <LINK REL="Next"  HREF="023654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Intermittent failure connecting to RabbitMQ</H1>
    <B>Peter Soukalopoulos</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Intermittent%20failure%20connecting%20to%20RabbitMQ&In-Reply-To=%3C02d001cdbc7e%24a2aa1890%24e7fe49b0%24%40greenbutton.com%3E"
       TITLE="[rabbitmq-discuss] Intermittent failure connecting to RabbitMQ">peter at greenbutton.com
       </A><BR>
    <I>Wed Nov  7 00:27:10 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023634.html">[rabbitmq-discuss] Intermittent failure connecting to RabbitMQ
</A></li>
        <LI>Next message: <A HREF="023654.html">[rabbitmq-discuss] Intermittent failure connecting to RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23636">[ date ]</a>
              <a href="thread.html#23636">[ thread ]</a>
              <a href="subject.html#23636">[ subject ]</a>
              <a href="author.html#23636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Brett,

 

You're spot on with the file descriptors. There's a leak in a new component
that we did not have running originally. I looked at the open file handles
in the erl.exe service and can clearly see that number growing.

 

I've stopped the offending process and the file handles is now ok and
RabbitMQ continues to work. Yay!

 

I'll upgrade to 2.8 shortly after I fix the leak.

 

Thanks again for your pointers which have been most helpful.

 

Regards,

Peter

 

Peter Soukalopoulos 
Development Team Leader | GreenButton Limited | www.greenbutton.com
&lt;<A HREF="http://www.greenbutton.com/">http://www.greenbutton.com/</A>&gt; 
Level 13, Simpl House, 40 Mercer Street, Wellington, New Zealand 
Mobile: +64 22 632 5023| <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">peter.soukalopoulos at greenbutton.com</A> | Skype:
psoukal | HQ: +644 499 0424

Description: Description: GreenButton_words_small               Description:
cid:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">image003.jpg at 01CC4E01.BA075BC0</A>
This message contains confidential information, intended only for the
person(s) named above, which may also be privileged. Any use, distribution,
copying or disclosure by any other person is strictly prohibited. In such
case, you should delete this message and kindly notify the sender via reply
e-mail. Please advise immediately if you or your employer does not consent
to Internet e-mail for messages of this kind.

 

From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>
[mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Brett
Cameron
Sent: Wednesday, 7 November 2012 1:07 p.m.
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Intermittent failure connecting to RabbitMQ

 

Peter,

It's unfortunate that you've dropped back to 2.7.1 as you get better
visibility via rabbitmqctl of available descriptors with 2.8.*. If you fire
up an Erlang shell and enter &quot;erlang:system_info(check_io).&quot;, you'll see
max_fds listed in the output. I've not got a Windows server readily
available to check, but my guess is the default limit is something like 256.


ERL_MAX_PORTS is set as a Windows environment variable.

In your original post the following message makes me thing that you'd hit
the fd limit. 

=INFO REPORT==== 6-Nov-2012::16:30:13 ===

    alarm_handler: {clear,file_descriptor_limit}

This message is logged when the situation is cleared, so somewhere higher up
in the log there should be a corresponding &quot;alarm_handler:
{set,{file_descriptor_limit,[]}}&quot; or some such message.

</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023634.html">[rabbitmq-discuss] Intermittent failure connecting to RabbitMQ
</A></li>
	<LI>Next message: <A HREF="023654.html">[rabbitmq-discuss] Intermittent failure connecting to RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23636">[ date ]</a>
              <a href="thread.html#23636">[ thread ]</a>
              <a href="subject.html#23636">[ subject ]</a>
              <a href="author.html#23636">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
