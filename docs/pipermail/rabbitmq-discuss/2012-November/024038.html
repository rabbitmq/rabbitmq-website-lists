<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is internal delivery (between exchanges)	guaranteed?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20internal%20delivery%20%28between%20exchanges%29%0A%09guaranteed%3F&In-Reply-To=%3C50ACB641.2020704%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024037.html">
   <LINK REL="Next"  HREF="024041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is internal delivery (between exchanges)	guaranteed?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20internal%20delivery%20%28between%20exchanges%29%0A%09guaranteed%3F&In-Reply-To=%3C50ACB641.2020704%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Is internal delivery (between exchanges)	guaranteed?">simon at rabbitmq.com
       </A><BR>
    <I>Wed Nov 21 11:08:49 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024037.html">[rabbitmq-discuss] Is internal delivery (between exchanges)	guaranteed?
</A></li>
        <LI>Next message: <A HREF="024041.html">[rabbitmq-discuss] Is internal delivery (between exchanges)	guaranteed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24038">[ date ]</a>
              <a href="thread.html#24038">[ thread ]</a>
              <a href="subject.html#24038">[ subject ]</a>
              <a href="author.html#24038">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That's a logical way to look at the Rabbit internals. But it's not how 
things are built in terms of Erlang processes.

In terms of Erlang processes, a message first goes to the reader (read 
side of a connection) then to a channel, then to queues. Exchanges are 
just routing logic which runs in the channel process.

Therefore messages can't exist &quot;in&quot; exchanges. But they can and do exist 
in the reader and channel processes before they get to the queues.

There are lots of ways (primarily node failure) that messages could get 
as far as reader or channel, but be lost before they reach the queue. IF 
you use tx or confirms, then you know that when a message has been 
confirmed / tx.commit finishes it has made it as far as the queue.

Cheers, Simon

On 21/11/12 11:01, Micha&#322; Michalak wrote:
&gt;<i> Assuming I have single host RabbitMQ server and settings like below:
</I>&gt;<i>
</I>&gt;<i>                    .--------------.
</I>&gt;<i>                 .-&gt;| EX fanout    |
</I>&gt;<i> .-----------.--'  | &quot;monitoring&quot; |
</I>&gt;<i> | EX fanout |     '--------------'      .----.
</I>&gt;<i> | &quot;common&quot;  |--.  .-----------.      .-&gt;| Q1 |
</I>&gt;<i> '-----------'  '-&gt;| EX direct |--q1--'  '----'
</I>&gt;<i>                    | &quot;queues&quot;  |--q2--.  .----.
</I>&gt;<i>                    '-----------'      '-&gt;| Q2 |
</I>&gt;<i>                                          '----'
</I>&gt;<i>
</I>&gt;<i> When I send message to exchange &quot;common&quot; with routing key &quot;q1&quot; - is it
</I>&gt;<i> guaranteed that message reach Q1 queue? I want to make sure such message
</I>&gt;<i> wont get stuck somewhere between exchanges or between exchange and queue.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>
</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024037.html">[rabbitmq-discuss] Is internal delivery (between exchanges)	guaranteed?
</A></li>
	<LI>Next message: <A HREF="024041.html">[rabbitmq-discuss] Is internal delivery (between exchanges)	guaranteed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24038">[ date ]</a>
              <a href="thread.html#24038">[ thread ]</a>
              <a href="subject.html#24038">[ subject ]</a>
              <a href="author.html#24038">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
