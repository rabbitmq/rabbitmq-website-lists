<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] The rabbitmq-server stop command hangs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20The%20rabbitmq-server%20stop%20command%20hangs&In-Reply-To=%3CE94F626F5C43D14F8B8479C5EBD79038A85EB6F1%40vmexchange02.seegrid.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023916.html">
   <LINK REL="Next"  HREF="024078.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] The rabbitmq-server stop command hangs</H1>
    <B>Elizabeth Liao</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20The%20rabbitmq-server%20stop%20command%20hangs&In-Reply-To=%3CE94F626F5C43D14F8B8479C5EBD79038A85EB6F1%40vmexchange02.seegrid.local%3E"
       TITLE="[rabbitmq-discuss] The rabbitmq-server stop command hangs">eliao at seegrid.com
       </A><BR>
    <I>Wed Nov 21 21:59:16 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023916.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
        <LI>Next message: <A HREF="024078.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24075">[ date ]</a>
              <a href="thread.html#24075">[ thread ]</a>
              <a href="subject.html#24075">[ subject ]</a>
              <a href="author.html#24075">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I took another look at this so I have a couple of things to add:
  * Trying RabbitMQ 3.0.0 did not resolve any issues
  * When rabbit hangs, there appears to be lots of channels (400-500) open.  However, it's unclear whether that's cause or effect.

Liz
________________________________________
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] on behalf of Elizabeth Liao [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eliao at seegrid.com</A>]
Sent: Thursday, November 15, 2012 7:32 PM
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] The rabbitmq-server stop command hangs

Hi Tim,

I ended up running the script with these commands:
# su rabbitmq
$ escript suptree_inspect.beam <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at TEST2</A> rabbit_sup | tee output-rabbit.log

The output is attached.

Thanks!

Liz
________________________________________
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] on behalf of Tim Watson [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>]
Sent: Tuesday, November 13, 2012 7:32 AM
To: Matthias Radestock
Cc: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] The rabbitmq-server stop command hangs

Thanks Matthias!

On 13 Nov 2012, at 11:40, Matthias Radestock wrote:

&gt;<i> On 13/11/12 11:34, Tim Watson wrote:
</I>&gt;&gt;<i> Are you using the same account to launch both executables?
</I>&gt;<i>
</I>&gt;<i> Almost certainly not, given...
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> # rabbitmqctl status Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">test2 at test2</A> ...
</I>&gt;<i>
</I>&gt;<i> and
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> #  escript suptree_inspect.beam <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">test2 at test2</A> rabbit_sup | tee output.log
</I>&gt;<i>
</I>&gt;<i> rabbitmqctl likely is the system-wide version which switches to the rabbitmq user. So the escript will need to be run like this:
</I>&gt;<i>
</I>&gt;<i> sudo rabbitmq escript suptree_inspect.beam <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">test2 at test2</A> rabbit_sup | tee output.log
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
Email Confidentiality Notice

The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
Email Confidentiality Notice

The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023916.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
	<LI>Next message: <A HREF="024078.html">[rabbitmq-discuss] The rabbitmq-server stop command hangs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24075">[ date ]</a>
              <a href="thread.html#24075">[ thread ]</a>
              <a href="subject.html#24075">[ subject ]</a>
              <a href="author.html#24075">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
