<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Crash when purging or deleting a queue with 10k	messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crash%20when%20purging%20or%20deleting%20a%20queue%20with%2010k%0A%09messages&In-Reply-To=%3C04beae11-2bb1-4578-8a70-1653648441e8%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024089.html">
   <LINK REL="Next"  HREF="024090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Crash when purging or deleting a queue with 10k	messages</H1>
    <B>Sidnei da Silva</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crash%20when%20purging%20or%20deleting%20a%20queue%20with%2010k%0A%09messages&In-Reply-To=%3C04beae11-2bb1-4578-8a70-1653648441e8%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Crash when purging or deleting a queue with 10k	messages">sidnei.da.silva at gmail.com
       </A><BR>
    <I>Thu Nov 22 15:06:45 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024089.html">[rabbitmq-discuss] HTTP API Question
</A></li>
        <LI>Next message: <A HREF="024090.html">[rabbitmq-discuss] Crash when purging or deleting a queue with 10k messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24087">[ date ]</a>
              <a href="thread.html#24087">[ thread ]</a>
              <a href="subject.html#24087">[ subject ]</a>
              <a href="author.html#24087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

We're currently experiencing a crash while trying to either purge or delete 
a persistent queue that's not in use anymore but contains about 10k 
messages still. We're using the camqadm command from celery to perform the 
purge as follows:

   <A HREF="http://paste.ubuntu.com/1377215/">http://paste.ubuntu.com/1377215/</A>

After the 514 INTERNAL ERROR is returned we find that the rabbitmq-server 
process has crashed and has to be started again. Here's some information 
from the logs:

   <A HREF="http://paste.ubuntu.com/1377224/">http://paste.ubuntu.com/1377224/</A>

For completeness, here's the output of rabbitmqctl report:

   <A HREF="http://paste.ubuntu.com/1377225/">http://paste.ubuntu.com/1377225/</A>

This is using rabbitmq 2.8.4 on Ubuntu 12.04.

I'm tempted to upgrade to 2.9.x or 3.0.x to see if the problem goes away, 
but would be nice if anyone could confirm this as something that might have 
been fixed in one of those later releases.

-- Sidnei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121122/c6fbdaf8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121122/c6fbdaf8/attachment.htm</A>&gt;
</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024089.html">[rabbitmq-discuss] HTTP API Question
</A></li>
	<LI>Next message: <A HREF="024090.html">[rabbitmq-discuss] Crash when purging or deleting a queue with 10k messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24087">[ date ]</a>
              <a href="thread.html#24087">[ thread ]</a>
              <a href="subject.html#24087">[ subject ]</a>
              <a href="author.html#24087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
