<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Crash when purging or deleting a queue with 10k messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crash%20when%20purging%20or%20deleting%20a%20queue%20with%0A%2010k%20messages&In-Reply-To=%3C50AE4A32.2060606%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024087.html">
   <LINK REL="Next"  HREF="024091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Crash when purging or deleting a queue with 10k messages</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Crash%20when%20purging%20or%20deleting%20a%20queue%20with%0A%2010k%20messages&In-Reply-To=%3C50AE4A32.2060606%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Crash when purging or deleting a queue with 10k messages">matthias at rabbitmq.com
       </A><BR>
    <I>Thu Nov 22 15:52:18 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024087.html">[rabbitmq-discuss] Crash when purging or deleting a queue with 10k	messages
</A></li>
        <LI>Next message: <A HREF="024091.html">[rabbitmq-discuss] Crash when purging or deleting a queue with 10k messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24090">[ date ]</a>
              <a href="thread.html#24090">[ thread ]</a>
              <a href="subject.html#24090">[ subject ]</a>
              <a href="author.html#24090">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sidnei,

On 22/11/12 15:06, Sidnei da Silva wrote:
&gt;<i> We're currently experiencing a crash while trying to either purge or
</I>&gt;<i> delete a persistent queue that's not in use anymore but contains about
</I>&gt;<i> 10k messages still.
</I>
Thanks for reporting this and including all the logs etc. This looks 
like a bug - the queue asks the message store to remove its messages but 
for some reason the message store knows nothing about them.

&gt;<i> I'm tempted to upgrade to 3.0.x to see if the problem goes away
</I>
We haven't seen this bug before. Nor have we touched the code in that 
area since 2.8.4. So I'm afraid an upgrade is unlikely to improve matters.

Btw, are you saying that after restarting the broker, a renewed attempt 
at purging the queue fails again? If so then it would be incredibly 
useful if you sent us a copy of the entire rabbitmq mnesia dir (usually 
under /var/lib/rabbitmq/mnesia/&lt;nodename&gt;) since that should allow us to 
reproduce the problem.

Regards,

Matthias.
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024087.html">[rabbitmq-discuss] Crash when purging or deleting a queue with 10k	messages
</A></li>
	<LI>Next message: <A HREF="024091.html">[rabbitmq-discuss] Crash when purging or deleting a queue with 10k messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24090">[ date ]</a>
              <a href="thread.html#24090">[ thread ]</a>
              <a href="subject.html#24090">[ subject ]</a>
              <a href="author.html#24090">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
