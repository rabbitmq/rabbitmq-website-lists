<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Changing SockJS URL used in iframe mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Changing%20SockJS%20URL%20used%20in%20iframe%20mode&In-Reply-To=%3CCABzX%2BqxqrFm3j07dxzGU2-QNPaOkye%3Dzi72wJWz4DYg27%3DOjtQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024234.html">
   <LINK REL="Next"  HREF="024244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Changing SockJS URL used in iframe mode</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Changing%20SockJS%20URL%20used%20in%20iframe%20mode&In-Reply-To=%3CCABzX%2BqxqrFm3j07dxzGU2-QNPaOkye%3Dzi72wJWz4DYg27%3DOjtQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Changing SockJS URL used in iframe mode">majek04 at gmail.com
       </A><BR>
    <I>Fri Nov 30 11:46:20 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="024234.html">[rabbitmq-discuss] Changing SockJS URL used in iframe mode
</A></li>
        <LI>Next message: <A HREF="024244.html">[rabbitmq-discuss] Changing SockJS URL used in iframe mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24241">[ date ]</a>
              <a href="thread.html#24241">[ thread ]</a>
              <a href="subject.html#24241">[ subject ]</a>
              <a href="author.html#24241">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Nov 30, 2012 at 2:11 AM, Adam Ashley &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aashley at adamashley.name</A>&gt; wrote:
&gt;<i> I'm trying to make use of the Web STOMP plugin with RabbitMQ 3.0.0 and am
</I>&gt;<i> running into a problem with using the CDN hosted versions of sockjs.js as
</I>&gt;<i> used within the iframe comms mode.
</I>&gt;<i>
</I>&gt;<i> Our production sites are deployed with no or minimal internet access so
</I>&gt;<i> relying on files hosted on the internet for a critical component like the
</I>&gt;<i> message queue connectivity is a none starter. Unfortunately I also need to
</I>&gt;<i> support some legacy clients where the iframe options are the only reliable
</I>&gt;<i> connection method.
</I>&gt;<i>
</I>&gt;<i> Looking into the source code for the module I came up with the following
</I>&gt;<i> config file that as far as I could tell should change it use an internally
</I>&gt;<i> hosted version of sockjs.
</I>&gt;<i>
</I>&gt;<i> [
</I>&gt;<i>     {sockjs, [
</I>&gt;<i>         {sockjs_url, &quot;<A HREF="http://host.internal/htmlUi/js/sockjs.js&quot;}">http://host.internal/htmlUi/js/sockjs.js&quot;}</A>
</I>&gt;<i>     ]}
</I>&gt;<i> ].
</I>&gt;<i>
</I>&gt;<i> However it doesn't seem to work. In place of sockjs I've tried sockjs,
</I>&gt;<i> sockjs_handler, rabbitmq_sockjs and rabbitmq_sockjs_handler none of them
</I>&gt;<i> work. Can someone point out what I'm missing?
</I>
Looking at the source code:
   <A HREF="https://github.com/rabbitmq/rabbitmq-web-stomp/blob/master/src/rabbit_ws_sockjs.erl#L29">https://github.com/rabbitmq/rabbitmq-web-stomp/blob/master/src/rabbit_ws_sockjs.erl#L29</A>

It looks like this has higher chances to work:

[
    {sockjs, [
        {sockjs_opts, [
            {sockjs_url, &quot;<A HREF="http://host.internal/htmlUi/js/sockjs.js&quot;}">http://host.internal/htmlUi/js/sockjs.js&quot;}</A>
         ]}
    ]}
].

Can you give it a shot?

Marek
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024234.html">[rabbitmq-discuss] Changing SockJS URL used in iframe mode
</A></li>
	<LI>Next message: <A HREF="024244.html">[rabbitmq-discuss] Changing SockJS URL used in iframe mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24241">[ date ]</a>
              <a href="thread.html#24241">[ thread ]</a>
              <a href="subject.html#24241">[ subject ]</a>
              <a href="author.html#24241">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
