<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Recurring partitioning problem on local network
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Recurring%20partitioning%20problem%20on%20local%0A%20network&In-Reply-To=%3C25870F6AB6D0E34489AD94C19EA928DB01F2481C%40OFLEXMB06P.centene.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032434.html">
   <LINK REL="Next"  HREF="032452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Recurring partitioning problem on local network</H1>
    <B>Bill Chmura</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Recurring%20partitioning%20problem%20on%20local%0A%20network&In-Reply-To=%3C25870F6AB6D0E34489AD94C19EA928DB01F2481C%40OFLEXMB06P.centene.com%3E"
       TITLE="[rabbitmq-discuss] Recurring partitioning problem on local network">bchmura at nurturhealth.com
       </A><BR>
    <I>Wed Dec 11 03:19:39 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032434.html">[rabbitmq-discuss] Recurring partitioning problem on local	network
</A></li>
        <LI>Next message: <A HREF="032452.html">[rabbitmq-discuss] Recurring partitioning problem on local	network
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32444">[ date ]</a>
              <a href="thread.html#32444">[ thread ]</a>
              <a href="subject.html#32444">[ subject ]</a>
              <a href="author.html#32444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One of our sets went down today

Both nodes basically have this, just naming the other node:

=INFO REPORT==== 10-Dec-2013::18:29:24 ===
rabbit on node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at NURWEB-QAWEB01</A>' down

=ERROR REPORT==== 10-Dec-2013::18:29:35 ===
Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at NURWEB-QAWEB02</A>'): ** ERROR ** mnesia_event got {inconsistent_database, running_partitioned_network, '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at NURWEB-QAWEB01</A>'}

=INFO REPORT==== 10-Dec-2013::18:29:47 ===
node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at NURWEB-QAWEB01</A>' down: connection_closed

Not much more info with the patched base file... does this help at all?

I tried searching and got a lot on connection closed abruptly... but it did not sound right.



-----Original Message-----
From: Simon MacMullen [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>] 
Sent: Tuesday, December 10, 2013 12:09 PM
To: Bill Chmura
Cc: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Recurring partitioning problem on local network

On 10/12/13 16:56, Bill Chmura wrote:
&gt;<i> What do you mean by a patched version?  Are there instructions?
</I>
I've attached a modified rabbit_node_monitor.beam which can replace the one in your RabbitMQ installation's ebin directory. This version has been modified to additionally log messages on node down like this:

&gt;<i> =INFO REPORT==== 10-Dec-2013::16:32:02 === node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">hare at smacmullen</A> down: 
</I>&gt;<i> connection_closed
</I>
giving the reason why the runtime considers the other node to be down. 
(This feature will make its way into a future release eventually). I am curious as to whether you are really seeing net_ticktime-related timeouts or something else, and it would be good to get some data on that.

Cheers, Simon

--
Simon MacMullen
RabbitMQ, Pivotal

This email and all attachments are confidential and intended solely 
for the use of the individual or entity to which they are addressed. 
If you have received this email in error please notify the sender 
by replying to this message. If you are not the intended recipient, 
please delete this message and all attachments immediately.  Do not 
copy, disclose, use or act upon the information contained. Please 
note that any views or opinions presented in this email are solely 
those of the author and do not necessarily represent those of the 
company. Finally, the recipient should check this email and any 
attachments for the presence of viruses. While every attempt is made 
to verify that the contents are safe, the company accepts no liability 
for any damage caused by any virus transmitted by this email.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032434.html">[rabbitmq-discuss] Recurring partitioning problem on local	network
</A></li>
	<LI>Next message: <A HREF="032452.html">[rabbitmq-discuss] Recurring partitioning problem on local	network
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32444">[ date ]</a>
              <a href="thread.html#32444">[ thread ]</a>
              <a href="subject.html#32444">[ subject ]</a>
              <a href="author.html#32444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
