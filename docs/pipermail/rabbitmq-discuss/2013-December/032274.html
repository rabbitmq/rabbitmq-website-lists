<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] durable queues on fanout exchange not durable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20durable%20queues%20on%20fanout%20exchange%20not%20durable&In-Reply-To=%3C1386064016660-31781.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032312.html">
   <LINK REL="Next"  HREF="032275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] durable queues on fanout exchange not durable</H1>
    <B>pann</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20durable%20queues%20on%20fanout%20exchange%20not%20durable&In-Reply-To=%3C1386064016660-31781.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] durable queues on fanout exchange not durable">pa at zid.nu
       </A><BR>
    <I>Tue Dec  3 09:46:56 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032312.html">[rabbitmq-discuss] how the bug 25827 going ?
</A></li>
        <LI>Next message: <A HREF="032275.html">[rabbitmq-discuss] durable queues on fanout exchange not durable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32274">[ date ]</a>
              <a href="thread.html#32274">[ thread ]</a>
              <a href="subject.html#32274">[ subject ]</a>
              <a href="author.html#32274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am having trouble getting my queues durable on my fanout exchange.
What I am trying to accomplish is the following:

* One producer, submitting messages to the exchange. The producer is not
aware of how many subscribers there will be.
* Multiple subscribers that creates their on queues. These queues should be
durable. If a subscriber needs to be restarted, the queue should survive in
order not to lose the messages.

The problem is that the queues do not survive the restart unless they are
also declared on the producer side. However that is not possible since the
producer is not aware of how many consumers there will be.

The queues are created on the consumer side like this:
$ch-&gt;queue_declare($queue, false, true, false, false);
$ch-&gt;exchange_declare($exchange, 'fanout', false, true, false);
$ch-&gt;queue_bind($queue, $exchange);

and I only declare the exchange on the producer side:
$ch-&gt;exchange_declare($exchange, 'fanout', false, true, false);

I am probably missing something rather simple, but I have not been able to
find the answer by googling the problem.

/PA






--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/durable-queues-on-fanout-exchange-not-durable-tp31781.html">http://rabbitmq.1065348.n5.nabble.com/durable-queues-on-fanout-exchange-not-durable-tp31781.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032312.html">[rabbitmq-discuss] how the bug 25827 going ?
</A></li>
	<LI>Next message: <A HREF="032275.html">[rabbitmq-discuss] durable queues on fanout exchange not durable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32274">[ date ]</a>
              <a href="thread.html#32274">[ thread ]</a>
              <a href="subject.html#32274">[ subject ]</a>
              <a href="author.html#32274">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
