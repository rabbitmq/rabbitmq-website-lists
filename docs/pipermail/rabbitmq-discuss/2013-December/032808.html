<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] MQTT cannot connect client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQTT%20cannot%20connect%20client&In-Reply-To=%3CCALP4UdAZ572vUtCg4%2Bj15KTHmb%3D__s4x8SO%2BsDF0bM5Bp8LiUA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032807.html">
   <LINK REL="Next"  HREF="032809.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] MQTT cannot connect client</H1>
    <B>tom collins</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQTT%20cannot%20connect%20client&In-Reply-To=%3CCALP4UdAZ572vUtCg4%2Bj15KTHmb%3D__s4x8SO%2BsDF0bM5Bp8LiUA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] MQTT cannot connect client">tom.collins.work at gmail.com
       </A><BR>
    <I>Mon Dec 30 18:58:01 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032807.html">[rabbitmq-discuss] rabbitmq-server_3.2.2-1_all.deb installs Erlang	14b?
</A></li>
        <LI>Next message: <A HREF="032809.html">[rabbitmq-discuss] Cluster + Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32808">[ date ]</a>
              <a href="thread.html#32808">[ thread ]</a>
              <a href="subject.html#32808">[ subject ]</a>
              <a href="author.html#32808">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,



I'm having timeout issues connecting clients and I'm stumped. I&#8217;m doubting
it&#8217;s a bug but I have no idea how to get around the problem without
restarting RMQ every time it occurs.



I'm working on an Android app using MQTT, which at times does not close
cleanly meaning it doesn't disconnect. The application restarts and seems
to connect on a new connection (clean session set to false, is this correct
behaviour?) which can be seen in the management interface and the client
connection is made successfully.


However after about five cycles (The amount of times seems to differ) of
the client abruptly closing and connecting RMQ seems to hang and does not
respond to any client connection. The MQTT client attempts to connect,
appears in the management interface connections but does not respond
meaning the client times out(or waits for the response if a timeout isn't
specified).


Heartbeats are configured so I'm assuming this should disconnect the old
client connections but for some reason it isn't...



I&#8217;ve checked the logs (Displaying all levels) and nothing stands out. There
was a  reoccurring error which seemed to be my closest lead but I haven&#8217;t
seen it (See below for log) for at least a week and even though the problem
still occurs, I still have no inkling as to why this error was occurring.







=SUPERVISOR REPORT==== 23-Dec-2013::19:04:14 ===

     Supervisor: {&lt;0.6080.0&gt;,amqp_connection_sup}

     Context:    shutdown

     Reason:     reached_max_restart_intensity

     Offender:   [{pid,&lt;0.6082.0&gt;},

                  {name,connection},

                  {mfargs,

                      {amqp_gen_connection,start_link,

                          [&lt;0.6081.0&gt;,

                           {amqp_params_direct,&lt;&lt;&quot;public-mqtt-client&quot;&gt;&gt;,

                               &lt;&lt;&quot;-------------&quot;&gt;&gt;,&lt;&lt;&quot;---------&quot;&gt;&gt;,

                               '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at -----------</A>,

                               {amqp_adapter_info,

                                   {----------------},

                                   1883,

                                   {----------------,79},

                                   57632,

                                   &lt;&lt;&quot;---------------:57632 -&gt;
-------------:1883&quot;&gt;&gt;,

                                   {'MQTT',{3,1}},

                                   [{ssl,false}]},

                               []}]}},

                  {restart_type,intrinsic},

                  {shutdown,brutal_kill},

                  {child_type,worker}]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131230/4be46543/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131230/4be46543/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032807.html">[rabbitmq-discuss] rabbitmq-server_3.2.2-1_all.deb installs Erlang	14b?
</A></li>
	<LI>Next message: <A HREF="032809.html">[rabbitmq-discuss] Cluster + Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32808">[ date ]</a>
              <a href="thread.html#32808">[ thread ]</a>
              <a href="subject.html#32808">[ subject ]</a>
              <a href="author.html#32808">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
