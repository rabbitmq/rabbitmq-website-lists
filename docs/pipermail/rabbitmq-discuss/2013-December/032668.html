<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbit,failure_during_boot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%2Cfailure_during_boot&In-Reply-To=%3Ce5791327-de4d-4e81-9f0a-9b65971d1775%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032643.html">
   <LINK REL="Next"  HREF="032669.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbit,failure_during_boot</H1>
    <B>Tiziana Stoesselli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%2Cfailure_during_boot&In-Reply-To=%3Ce5791327-de4d-4e81-9f0a-9b65971d1775%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] rabbit,failure_during_boot">tiziana.stoesselli at gmail.com
       </A><BR>
    <I>Tue Dec 17 11:31:51 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032643.html">[rabbitmq-discuss] rabbit,failure_during_boot
</A></li>
        <LI>Next message: <A HREF="032669.html">[rabbitmq-discuss] rabbit,failure_during_boot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32668">[ date ]</a>
              <a href="thread.html#32668">[ thread ]</a>
              <a href="subject.html#32668">[ subject ]</a>
              <a href="author.html#32668">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/12/2013 15:50, Tiziana Stoesselli wrote:

&gt;<i>                   [{rabbit_queue_index,parse_pub_record_body,
</I>&gt;<i>                        [&lt;&lt;0,0,0,0,0,0,0,0&gt;&gt;]},
</I>&gt;<i>                    {rabbit_queue_index,load_journal_entries,1},
</I>&gt;<i>
</I>
The queue index has ended up with a whole load of zeroes appended to it.

We've seen this happen a few times, usually associated with OS crashes or 
power loss or similar.

We changed the queue index file format to be more resilient to this sort of 
corruption in 3.2.0. I'm not sure if there's anything you can do though if 
you've already got a corrupt file with an older version of RabbitMQ apart 
from reset the node and start again.

Cheers, Simon

Il giorno luned&#236; 9 dicembre 2013 16:50:04 UTC+1, Tiziana Stoesselli ha 
scritto:
&gt;<i>
</I>&gt;<i> Anyone can help me?
</I>&gt;<i>
</I>&gt;<i> Activating RabbitMQ plugins ...
</I>&gt;<i> 0 plugins activated:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> +---+   +---+
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   +---+   +-------+
</I>&gt;<i> |                   |
</I>&gt;<i> | RabbitMQ  +---+   |
</I>&gt;<i> |           |   |   |
</I>&gt;<i> |   v2.8.4  +---+   |
</I>&gt;<i> |                   |
</I>&gt;<i> +-------------------+
</I>&gt;<i> AMQP 0-9-1 / 0-9 / 0-8
</I>&gt;<i> Copyright (C) 2007-2012 VMware, Inc.
</I>&gt;<i> Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>
</I>&gt;<i>
</I>&gt;<i> node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Name at zenossoc</A>
</I>&gt;<i> app descriptor : 
</I>&gt;<i> /usr/lib/rabbitmq/lib/rabbitmq_server-2.8.4/sbin/../ebin/rabbit.app
</I>&gt;<i> home dir       : /var/lib/rabbitmq
</I>&gt;<i> config file(s) : (none)
</I>&gt;<i> cookie hash    : otG5wqMg04+qfhmRCVkglQ==
</I>&gt;<i> log            : /var/log/rabbitmq/Name.log
</I>&gt;<i> sasl log       : /var/log/rabbitmq/Name-sasl.log
</I>&gt;<i> database dir   : /var/lib/rabbitmq/mnesia/Name
</I>&gt;<i> erlang version : 5.8.5
</I>&gt;<i>
</I>&gt;<i> -- rabbit boot start
</I>&gt;<i> starting file handle cache server                                     
</I>&gt;<i> ...done
</I>&gt;<i> starting worker pool                                                  
</I>&gt;<i> ...done
</I>&gt;<i> starting database                                                     
</I>&gt;<i> ...done
</I>&gt;<i> starting database sync                                                
</I>&gt;<i> ...done
</I>&gt;<i> starting codec correctness check                                      
</I>&gt;<i> ...done
</I>&gt;<i> -- external infrastructure ready
</I>&gt;<i> starting plugin registry                                              
</I>&gt;<i> ...done
</I>&gt;<i> starting auth mechanism cr-demo                                       
</I>&gt;<i> ...done
</I>&gt;<i> starting auth mechanism amqplain                                      
</I>&gt;<i> ...done
</I>&gt;<i> starting auth mechanism plain                                         
</I>&gt;<i> ...done
</I>&gt;<i> starting statistics event manager                                     
</I>&gt;<i> ...done
</I>&gt;<i> starting logging server                                               
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type direct                                         
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type fanout                                         
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type headers                                        
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type topic                                          
</I>&gt;<i> ...done
</I>&gt;<i> -- kernel ready
</I>&gt;<i> starting alarm handler                                                
</I>&gt;<i> ...done
</I>&gt;<i> starting node monitor                                                 
</I>&gt;<i> ...done
</I>&gt;<i> starting cluster delegate                                             
</I>&gt;<i> ...done
</I>&gt;<i> starting guid generator                                               
</I>&gt;<i> ...done
</I>&gt;<i> starting memory monitor                                               
</I>&gt;<i> ...done
</I>&gt;<i> -- core initialized
</I>&gt;<i> starting empty DB check                                               
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange, queue and binding recovery                         ...
</I>&gt;<i>
</I>&gt;<i> BOOT FAILED
</I>&gt;<i> ===========
</I>&gt;<i>
</I>&gt;<i> Error description:
</I>&gt;<i>    {badmatch,
</I>&gt;<i>        {error,
</I>&gt;<i>            {{{function_clause,
</I>&gt;<i>                  [{rabbit_queue_index,parse_pub_record_body,
</I>&gt;<i>                       [&lt;&lt;0,0,0,0,0,0,0,0&gt;&gt;]},
</I>&gt;<i>                   {rabbit_queue_index,load_journal_entries,1},
</I>&gt;<i>                   {rabbit_queue_index,recover_journal,1},
</I>&gt;<i>                   {rabbit_queue_index,scan_segments,3},
</I>&gt;<i>                   {rabbit_queue_index,queue_index_walker_reader,2},
</I>&gt;<i>                   {rabbit_queue_index,'-queue_index_walker/1-fun-0-',2},
</I>&gt;<i>                   {worker_pool_worker,handle_cast,2},
</I>&gt;<i>                   {gen_server2,handle_msg,2}]},
</I>&gt;<i>              {gen_server2,call,[&lt;0.184.0&gt;,out,infinity]}},
</I>&gt;<i>             {child,undefined,msg_store_persistent,
</I>&gt;<i>                 {rabbit_msg_store,start_link,
</I>&gt;<i>                     
</I>&gt;<i> [msg_store_persistent,&quot;/var/lib/rabbitmq/mnesia/Name&quot;,[],
</I>&gt;<i>                      {#Fun&lt;rabbit_queue_index.2.89252852&gt;,
</I>&gt;<i>                       {start,
</I>&gt;<i>                           [{resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,
</I>&gt;<i>                                &lt;&lt;&quot;zenoss.queues.zep.heartbeats&quot;&gt;&gt;},
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,
</I>&gt;<i>                                &lt;&lt;&quot;zenoss.queues.zep.migrated.archive&quot;&gt;&gt;},
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,
</I>&gt;<i>                                &lt;&lt;&quot;zenoss.queues.zep.zenevents&quot;&gt;&gt;},
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,&lt;&lt;&quot;celery&quot;&gt;&gt;},
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,
</I>&gt;<i>                                &lt;&lt;&quot;zenoss.queues.zep.modelchange&quot;&gt;&gt;},
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,
</I>&gt;<i>                                &lt;&lt;&quot;zenoss.queues.zep.rawevents&quot;&gt;&gt;},
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,
</I>&gt;<i>                                &lt;&lt;&quot;zenoss.queues.zep.migrated.summary&quot;&gt;&gt;},
</I>&gt;<i>                            {resource,&lt;&lt;&quot;/zenoss&quot;&gt;&gt;,queue,
</I>&gt;<i>                                &lt;&lt;&quot;zenoss.queues.zep.signal&quot;&gt;&gt;}]}}]},
</I>&gt;<i>                 transient,4294967295,worker,
</I>&gt;<i>                 [rabbit_msg_store]}}}}
</I>&gt;<i>
</I>&gt;<i> Log files (may contain more information):
</I>&gt;<i>    /var/log/rabbitmq/Name.log
</I>&gt;<i>    /var/log/rabbitmq/Name-sasl.log
</I>&gt;<i>
</I>&gt;<i> Stack trace:
</I>&gt;<i>    [{rabbit_variable_queue,start_msg_store,2},
</I>&gt;<i>     {rabbit_amqqueue,start,0},
</I>&gt;<i>     {rabbit,recover,0},
</I>&gt;<i>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
</I>&gt;<i>     {rabbit,run_boot_step,1},
</I>&gt;<i>     {rabbit,'-start/2-lc$^0/1-0-',1},
</I>&gt;<i>     {rabbit,start,2},
</I>&gt;<i>     {application_master,start_it_old,4}]
</I>&gt;<i>
</I>&gt;<i> {&quot;Kernel pid 
</I>&gt;<i> terminated&quot;,application_controller,&quot;{application_start_failure,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}}}&quot;}
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131217/464dfa9a/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131217/464dfa9a/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032643.html">[rabbitmq-discuss] rabbit,failure_during_boot
</A></li>
	<LI>Next message: <A HREF="032669.html">[rabbitmq-discuss] rabbit,failure_during_boot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32668">[ date ]</a>
              <a href="thread.html#32668">[ thread ]</a>
              <a href="subject.html#32668">[ subject ]</a>
              <a href="author.html#32668">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
