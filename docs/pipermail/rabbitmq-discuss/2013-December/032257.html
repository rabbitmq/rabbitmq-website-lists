<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exclusive queue with no connections still alive &amp; locked
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exclusive%20queue%20with%20no%20connections%20still%0A%20alive%20%26%20locked&In-Reply-To=%3CCAK4%2BxQYozo4kD6fmrP6VaO9V9tWmGMAoc%3DDwOOq9VBEPHxTmVg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032255.html">
   <LINK REL="Next"  HREF="032253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exclusive queue with no connections still alive &amp; locked</H1>
    <B>Brian Reischl</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exclusive%20queue%20with%20no%20connections%20still%0A%20alive%20%26%20locked&In-Reply-To=%3CCAK4%2BxQYozo4kD6fmrP6VaO9V9tWmGMAoc%3DDwOOq9VBEPHxTmVg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Exclusive queue with no connections still alive &amp; locked">breischl at gmail.com
       </A><BR>
    <I>Mon Dec  2 16:38:59 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032255.html">[rabbitmq-discuss] Exclusive queue with no connections still alive &amp; locked
</A></li>
        <LI>Next message: <A HREF="032253.html">[rabbitmq-discuss] Configuration strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32257">[ date ]</a>
              <a href="thread.html#32257">[ thread ]</a>
              <a href="subject.html#32257">[ subject ]</a>
              <a href="author.html#32257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Simon,
  Thanks for the info. I'm not sure that was the case here. I don't believe
that any messages had been published to the queue at all, and I'm fairly
sure the queue has existed since last week Wednesday. Perhaps the
connection got hung up in some sort of zombie state?

  In any case, restarting the server seems to have cleared up whatever the
issue was.


On Mon, Dec 2, 2013 at 9:30 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> The queue can take a while to delete itself, especially if it contains
</I>&gt;<i> lots of persistent messages. But the connection goes away immediately. I
</I>&gt;<i> think that's what you're seeing.
</I>&gt;<i>
</I>&gt;<i> In particular the combination &quot;Exclusive Owner: unknown&quot; and &quot;Status:
</I>&gt;<i> Active&quot; makes some sense, as the queue can still be working. You should
</I>&gt;<i> never see the combination &quot;Exclusive Owner: unknown&quot; and &quot;Status: Idle&quot;.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> On 02/12/13 16:18, Brian Reischl wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I have run into a situation that seems like it should be impossible,
</I>&gt;&gt;<i> assuming I understand everything correctly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have created an Exclusive, AutoDelete queue with a client-specified
</I>&gt;&gt;<i> name. The queue is undeletable - delete attempts fail with &quot;405
</I>&gt;&gt;<i> RESOURCE_LOCKED - cannot obtain exclusive access to locked
</I>&gt;&gt;<i> queue&quot;. However, there there are no connections at all to the server.
</I>&gt;&gt;<i> When I go to the Connections tab in the admin UI, it says &quot;... no
</I>&gt;&gt;<i> connections ...&quot; The Queue properties in Admin UI says &quot;Exclusive Owner:
</I>&gt;&gt;<i> *unknown*&quot; and &quot;Status: Active&quot;. There are no publishers or consumers
</I>&gt;&gt;<i> listed. So shouldn't the queue have been deleted already, since it is
</I>&gt;&gt;<i> Exclusive?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is on my dev machine, so it's not a huge problem. I'm wondering if
</I>&gt;&gt;<i> this is a bug in the server code, or merely in my understanding of it.
</I>&gt;&gt;<i> I'm using RabbitMQ 3.1.3, Erlang R16B01.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131202/8a67230c/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131202/8a67230c/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032255.html">[rabbitmq-discuss] Exclusive queue with no connections still alive &amp; locked
</A></li>
	<LI>Next message: <A HREF="032253.html">[rabbitmq-discuss] Configuration strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32257">[ date ]</a>
              <a href="thread.html#32257">[ thread ]</a>
              <a href="subject.html#32257">[ subject ]</a>
              <a href="author.html#32257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
