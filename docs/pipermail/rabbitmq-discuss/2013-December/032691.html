<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connection.Blocked triggering?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection.Blocked%20triggering%3F&In-Reply-To=%3CD2E0AA4B-818C-4134-9478-E4D5ECFB6DBB%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032690.html">
   <LINK REL="Next"  HREF="032692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connection.Blocked triggering?</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection.Blocked%20triggering%3F&In-Reply-To=%3CD2E0AA4B-818C-4134-9478-E4D5ECFB6DBB%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Connection.Blocked triggering?">tim at rabbitmq.com
       </A><BR>
    <I>Thu Dec 19 09:10:36 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032690.html">[rabbitmq-discuss] Connection.Blocked triggering?
</A></li>
        <LI>Next message: <A HREF="032692.html">[rabbitmq-discuss] Recommended queue architecture
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32691">[ date ]</a>
              <a href="thread.html#32691">[ thread ]</a>
              <a href="subject.html#32691">[ subject ]</a>
              <a href="author.html#32691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry Gavin, I was getting confused between channel.flow and connection.blocked there. Someone pointed out that you're talking about <A HREF="http://www.rabbitmq.com/connection-blocked.html">http://www.rabbitmq.com/connection-blocked.html</A> - duh! I suspect however, that just because you've managed to get a publisher subject to flow control, doesn't necessarily mean that you've actually triggered a resource alarm such that connection.blocked will be sent. Producers can (and do) enter flow control if the broker/queue cannot keep up with publishing rates, but only when a low memory or disk alarm is trigger will the connection.blocked signal be sent.

Hope that makes sense and sorry for misunderstanding the question.

Cheers,
Tim

On 19 Dec 2013, at 08:25, Tim Watson wrote:

&gt;<i> AFAIK Rabbit hasn't sent connection.block to clients for quite some time. Instead, we introduce flow control in the broker through TCP back-pressure (i.e., not reading from producer's sockets). That is why you can see the connection in a flow state in the UI (because server-side flow control is in effect), but no connection.block is delivered to the client.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i> 
</I>&gt;<i> On 19 Dec 2013, at 00:05, Gavin M. Roy wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> At what point should Connection.Block be sent from RabbitMQ to a client application? I am able to see that I am triggering a Flow state in the RabbitMQ management UI but am not seeing any Connection.Block frames delivered to the client.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks in advance,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Gavin
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131219/f2e49d27/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131219/f2e49d27/attachment.html</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032690.html">[rabbitmq-discuss] Connection.Blocked triggering?
</A></li>
	<LI>Next message: <A HREF="032692.html">[rabbitmq-discuss] Recommended queue architecture
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32691">[ date ]</a>
              <a href="thread.html#32691">[ thread ]</a>
              <a href="subject.html#32691">[ subject ]</a>
              <a href="author.html#32691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
