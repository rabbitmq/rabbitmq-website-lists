<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbit,failure_during_boot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%2Cfailure_during_boot&In-Reply-To=%3C661b6321-1b6e-4318-9eea-f566fbe6d7de%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032668.html">
   <LINK REL="Next"  HREF="032418.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbit,failure_during_boot</H1>
    <B>Tiziana Stoesselli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%2Cfailure_during_boot&In-Reply-To=%3C661b6321-1b6e-4318-9eea-f566fbe6d7de%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] rabbit,failure_during_boot">tiziana.stoesselli at gmail.com
       </A><BR>
    <I>Tue Dec 17 11:36:45 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032668.html">[rabbitmq-discuss] rabbit,failure_during_boot
</A></li>
        <LI>Next message: <A HREF="032418.html">[rabbitmq-discuss] Best way to ping server from client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32669">[ date ]</a>
              <a href="thread.html#32669">[ thread ]</a>
              <a href="subject.html#32669">[ subject ]</a>
              <a href="author.html#32669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/12/2013 15:50, Tiziana Stoesselli wrote:

                      [{rabbit_queue_index,parse_pub_record_body,
                           [&lt;&lt;0,0,0,0,0,0,0,0&gt;&gt;]},
                       {rabbit_queue_index,load_journal_entries,1},


The queue index has ended up with a whole load of zeroes appended to it.

We've seen this happen a few times, usually associated with OS crashes or 
power loss or similar.

We changed the queue index file format to be more resilient to this sort of 
corruption in 3.2.0. I'm not sure if there's anything you can do though if 
you've already got a corrupt file with an older version of RabbitMQ apart 
from reset the node and start again.

Cheers, Simon


Hello Simon,

thank you for the response.
Following you can find my attempt

#rabbitmqctl reset
Resetting node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Name at zenossoc</A>' ...
Error: unable to connect to node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Name at zenossoc</A>': nodedown

DIAGNOSTICS
===========

nodes in question: ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Name at zenossoc</A>']

hosts, their running nodes and ports:
- zenossoc: [{rabbitmqctl32151,33034}]

current node details:
- node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl32151 at zenossoc</A>
- home dir: /var/lib/rabbitmq
- cookie hash: otG5wqMg04+qfhmRCVkglQ==

[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at zenossoc</A> ~]# rabbitmqctl force_reset
Forcefully resetting node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Name at zenossoc</A>' ...
Error: unable to connect to node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Name at zenossoc</A>': nodedown

DIAGNOSTICS
===========

nodes in question: ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Name at zenossoc</A>']

hosts, their running nodes and ports:
- zenossoc: [{rabbitmqctl32189,44438}]

current node details:
- node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl32189 at zenossoc</A>
- home dir: /var/lib/rabbitmq
- cookie hash: otG5wqMg04+qfhmRCVkglQ==


any idea?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131217/6da9e97f/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131217/6da9e97f/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032668.html">[rabbitmq-discuss] rabbit,failure_during_boot
</A></li>
	<LI>Next message: <A HREF="032418.html">[rabbitmq-discuss] Best way to ping server from client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32669">[ date ]</a>
              <a href="thread.html#32669">[ thread ]</a>
              <a href="subject.html#32669">[ subject ]</a>
              <a href="author.html#32669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
