<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbit_limiter Exception and Broker Issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit_limiter%20Exception%20and%20Broker%20Issues&In-Reply-To=%3C52B041C7.3060200%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032627.html">
   <LINK REL="Next"  HREF="032628.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbit_limiter Exception and Broker Issues</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit_limiter%20Exception%20and%20Broker%20Issues&In-Reply-To=%3C52B041C7.3060200%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbit_limiter Exception and Broker Issues">simon at rabbitmq.com
       </A><BR>
    <I>Tue Dec 17 12:21:27 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032627.html">[rabbitmq-discuss] rabbit_limiter Exception and Broker Issues
</A></li>
        <LI>Next message: <A HREF="032628.html">[rabbitmq-discuss] RabbitMQ 3.1.5 crashed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32645">[ date ]</a>
              <a href="thread.html#32645">[ thread ]</a>
              <a href="subject.html#32645">[ subject ]</a>
              <a href="author.html#32645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So that's very odd. You have a limiter (internal component responsible 
for a channel's prefetch count and a few other bits) and a supervisor 
crashing after receiving 'stat' - that's a message which should be sent 
only to queues.

Can you post the complete logs somewhere? I would like to see if there 
is any indication of how this could be happening.

Cheers, Simon

On 16/12/2013 20:24, Chris Larsen wrote:
&gt;<i> Hiya, we ran into some problems with a cluster over the weekend. There
</I>&gt;<i> was a sharp increase in message publishing traffic to this 2 node
</I>&gt;<i> cluster that increased memory and FD usage but we didn&#8217;t observe the
</I>&gt;<i> normal limit messages in the logs. Instead we say this &#8220;rabbit_limiter&#8221;
</I>&gt;<i> exception and the nodes stopped accepting published messages. Thankfully
</I>&gt;<i> we were able to consume the queued, in-memory, data before restarting
</I>&gt;<i> the nodes. Did we simply throw too many messages at Rabbit or was there
</I>&gt;<i> an actual bug in the limiter code? We&#8217;re running 3.1.5 with Erlang
</I>&gt;<i> R16B01 on both nodes. Below are some bits from the main logs on both
</I>&gt;<i> nodes and the full SASL logs are in pastebin. Thanks!
</I>&gt;<i>
</I>&gt;<i> Node 1 sasl
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://pastebin.com/h55i3AqQ">http://pastebin.com/h55i3AqQ</A>
</I>&gt;<i>
</I>&gt;<i> Node 2 sasl
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://pastebin.com/3hw7f6xA">http://pastebin.com/3hw7f6xA</A>
</I>&gt;<i>
</I>&gt;<i> ------ NODE1 Rabbit LOG ------
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 14-Dec-2013::11:39:15 ===
</I>&gt;<i>
</I>&gt;<i> ** Generic server &lt;0.21763.1353&gt; terminating
</I>&gt;<i>
</I>&gt;<i> ** Last message in was stat
</I>&gt;<i>
</I>&gt;<i> ** When Server state == {lim,0,&lt;0.26407.1167&gt;,false,[],0}
</I>&gt;<i>
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i>
</I>&gt;<i> ** {function_clause,[{rabbit_limiter,handle_call,
</I>&gt;<i>
</I>&gt;<i>                                       [stat,
</I>&gt;<i>
</I>&gt;<i>                                        {&lt;0.234.0&gt;,#Ref&lt;0.0.8426.115176&gt;},
</I>&gt;<i>
</I>&gt;<i>                                        {lim,0,&lt;0.26407.1167&gt;,false,[],0}],
</I>&gt;<i>
</I>&gt;<i>                                       []},
</I>&gt;<i>
</I>&gt;<i>                       {gen_server2,handle_msg,2,[]},
</I>&gt;<i>
</I>&gt;<i>                       {proc_lib,init_p_do_apply,3,
</I>&gt;<i>
</I>&gt;<i>                                 [{file,&quot;proc_lib.erl&quot;},{line,239}]}]}
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 14-Dec-2013::11:55:10 ===
</I>&gt;<i>
</I>&gt;<i> ** Generic server &lt;0.28277.6695&gt; terminating
</I>&gt;<i>
</I>&gt;<i> ** Last message in was {'$gen_cast',
</I>&gt;<i>
</I>&gt;<i>                             {method,
</I>&gt;<i>
</I>&gt;<i>                                 {'queue.declare',0,
</I>&gt;<i>
</I>&gt;<i>                                     &lt;&lt;&quot;notification.somehost&quot;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                                     false,false,false,false,false,
</I>&gt;<i>
</I>&gt;<i>                                     [{&lt;&lt;&quot;x-expires&quot;&gt;&gt;,signedint,10800000}]},
</I>&gt;<i>
</I>&gt;<i>                                 none,noflow}}
</I>&gt;<i>
</I>&gt;<i> ** When Server state == {ch,running,rabbit_framing_amqp_0_9_1,247,
</I>&gt;<i>
</I>&gt;<i>                              &lt;0.4536.6658&gt;,&lt;0.13044.6658&gt;,&lt;0.4536.6658&gt;,
</I>&gt;<i>
</I>&gt;<i>                              &lt;&lt;C_IP -&gt; S_IP&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                              {lstate,&lt;0.20106.6569&gt;,false,false},
</I>&gt;<i>
</I>&gt;<i>                              none,1,
</I>&gt;<i>
</I>&gt;<i>                              {[],[]},
</I>&gt;<i>
</I>&gt;<i>                              {user,&lt;&lt;&quot;app_user&quot;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                                  [administrator],
</I>&gt;<i>
</I>&gt;<i>                                  rabbit_auth_backend_internal,
</I>&gt;<i>
</I>&gt;<i>                                  {internal_user,&lt;&lt;&quot;app_user&quot;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;79,159,188,106,120,27,224,243,230,15,223,
</I>&gt;<i>
</I>&gt;<i>                                        54,140,137,70,36,212,30,111,89&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                                      [administrator]}},
</I>&gt;<i>
</I>&gt;<i>                              &lt;&lt;&quot;/app_user&quot;&gt;&gt;,&lt;&lt;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                     {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {set,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {set,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              &lt;0.8820.6668&gt;,
</I>&gt;<i>
</I>&gt;<i>                              {state,fine,5000,#Ref&lt;0.0.6989.167017&gt;},
</I>&gt;<i>
</I>&gt;<i>                              false,1,
</I>&gt;<i>
</I>&gt;<i>                              {{0,nil},{0,nil}},
</I>&gt;<i>
</I>&gt;<i>                              [],
</I>&gt;<i>
</I>&gt;<i>                              [{&lt;&lt;&quot;consumer_cancel_notify&quot;&gt;&gt;,bool,true},
</I>&gt;<i>
</I>&gt;<i>                               {&lt;&lt;&quot;publisher_confirms&quot;&gt;&gt;,bool,true}],
</I>&gt;<i>
</I>&gt;<i>                              none}
</I>&gt;<i>
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i>
</I>&gt;<i> ** {{{function_clause,
</I>&gt;<i>
</I>&gt;<i>           [{supervisor2,handle_call,
</I>&gt;<i>
</I>&gt;<i>                [stat,
</I>&gt;<i>
</I>&gt;<i>                 {&lt;7347.227.0&gt;,#Ref&lt;7347.0.8145.90172&gt;},
</I>&gt;<i>
</I>&gt;<i>                 {state,
</I>&gt;<i>
</I>&gt;<i>                     {&lt;7347.9746.1239&gt;,rabbit_intermediate_sup},
</I>&gt;<i>
</I>&gt;<i>                     one_for_one,[],
</I>&gt;<i>
</I>&gt;<i>                     {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>
</I>&gt;<i>                     10,10,[],rabbit_intermediate_sup,[]}],
</I>&gt;<i>
</I>&gt;<i>                []},
</I>&gt;<i>
</I>&gt;<i>            {gen_server,handle_msg,5,[{file,&quot;gen_server.erl&quot;},{line,585}]},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},
</I>&gt;<i>
</I>&gt;<i>       {gen_server2,call,[&lt;7347.9746.1239&gt;,stat,infinity]}},
</I>&gt;<i>
</I>&gt;<i>      [{gen_server2,call,3,[]},
</I>&gt;<i>
</I>&gt;<i>       {delegate,safe_invoke,2,[]},
</I>&gt;<i>
</I>&gt;<i>       {delegate,'-safe_invoke/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>
</I>&gt;<i>       {delegate,handle_call,3,[]},
</I>&gt;<i>
</I>&gt;<i>       {gen_server2,handle_msg,2,[]},
</I>&gt;<i>
</I>&gt;<i>       {proc_lib,wake_up,3,[{file,&quot;proc_lib.erl&quot;},{line,249}]}]}
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 14-Dec-2013::11:55:10 ===
</I>&gt;<i>
</I>&gt;<i> AMQP connection &lt;0.4536.6658&gt; (running), channel 247 - error:
</I>&gt;<i>
</I>&gt;<i> {{{function_clause,
</I>&gt;<i>
</I>&gt;<i>        [{supervisor2,handle_call,
</I>&gt;<i>
</I>&gt;<i>             [stat,
</I>&gt;<i>
</I>&gt;<i>              {&lt;7347.227.0&gt;,#Ref&lt;7347.0.8145.90172&gt;},
</I>&gt;<i>
</I>&gt;<i>              {state,
</I>&gt;<i>
</I>&gt;<i>                  {&lt;7347.9746.1239&gt;,rabbit_intermediate_sup},
</I>&gt;<i>
</I>&gt;<i>                  one_for_one,[],
</I>&gt;<i>
</I>&gt;<i>                  {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>                      {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>                      {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>
</I>&gt;<i>                  10,10,[],rabbit_intermediate_sup,[]}],
</I>&gt;<i>
</I>&gt;<i>             []},
</I>&gt;<i>
</I>&gt;<i>         {gen_server,handle_msg,5,[{file,&quot;gen_server.erl&quot;},{line,585}]},
</I>&gt;<i>
</I>&gt;<i>         {proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},
</I>&gt;<i>
</I>&gt;<i>    {gen_server2,call,[&lt;7347.9746.1239&gt;,stat,infinity]}},
</I>&gt;<i>
</I>&gt;<i> [{gen_server2,call,3,[]},
</I>&gt;<i>
</I>&gt;<i>    {delegate,safe_invoke,2,[]},
</I>&gt;<i>
</I>&gt;<i>    {delegate,'-safe_invoke/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>
</I>&gt;<i>    {delegate,handle_call,3,[]},
</I>&gt;<i>
</I>&gt;<i>    {gen_server2,handle_msg,2,[]},
</I>&gt;<i>
</I>&gt;<i>    {proc_lib,wake_up,3,[{file,&quot;proc_lib.erl&quot;},{line,249}]}]}
</I>&gt;<i>
</I>&gt;<i> =WARNING REPORT==== 14-Dec-2013::11:55:10 ===
</I>&gt;<i>
</I>&gt;<i> Non-AMQP exit reason '{{{function_clause,
</I>&gt;<i>
</I>&gt;<i>                           [{supervisor2,handle_call,
</I>&gt;<i>
</I>&gt;<i>                             [stat,
</I>&gt;<i>
</I>&gt;<i>                              {&lt;7347.227.0&gt;,#Ref&lt;7347.0.8145.90172&gt;},
</I>&gt;<i>
</I>&gt;<i>                              {state,
</I>&gt;<i>
</I>&gt;<i>                               {&lt;7347.9746.1239&gt;,rabbit_intermediate_sup},
</I>&gt;<i>
</I>&gt;<i>                               one_for_one,[],
</I>&gt;<i>
</I>&gt;<i>                               {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                 []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                            {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                  []}}},
</I>&gt;<i>
</I>&gt;<i>                               10,10,[],rabbit_intermediate_sup,[]}],
</I>&gt;<i>
</I>&gt;<i>                             []},
</I>&gt;<i>
</I>&gt;<i>                            {gen_server,handle_msg,5,
</I>&gt;<i>
</I>&gt;<i>                             [{file,&quot;gen_server.erl&quot;},{line,585}]},
</I>&gt;<i>
</I>&gt;<i>                            {proc_lib,init_p_do_apply,3,
</I>&gt;<i>
</I>&gt;<i>                             [{file,&quot;proc_lib.erl&quot;},{line,239}]}]},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {gen_server2,call,[&lt;7347.9746.1239&gt;,stat,infinity]}},
</I>&gt;<i>
</I>&gt;<i>                         [{gen_server2,call,3,[]},
</I>&gt;<i>
</I>&gt;<i>                          {delegate,safe_invoke,2,[]},
</I>&gt;<i>
</I>&gt;<i>                          {delegate,'-safe_invoke/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>
</I>&gt;<i>                          {delegate,handle_call,3,[]},
</I>&gt;<i>
</I>&gt;<i>                          {gen_server2,handle_msg,2,[]},
</I>&gt;<i>
</I>&gt;<i>                          {proc_lib,wake_up,3,
</I>&gt;<i>
</I>&gt;<i>                           [{file,&quot;proc_lib.erl&quot;},{line,249}]}]}'
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 14-Dec-2013::12:27:35 ===
</I>&gt;<i>
</I>&gt;<i> ** Generic server &lt;0.17415.2019&gt; terminating
</I>&gt;<i>
</I>&gt;<i> ** Last message in was {'$gen_cast',
</I>&gt;<i>
</I>&gt;<i>                             {method,
</I>&gt;<i>
</I>&gt;<i>                                 {'queue.declare',0,
</I>&gt;<i>
</I>&gt;<i>                                     &lt;&lt;&quot;notification.somehost&quot;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                                     false,false,false,false,false,
</I>&gt;<i>
</I>&gt;<i>                                     [{&lt;&lt;&quot;x-expires&quot;&gt;&gt;,signedint,10800000}]},
</I>&gt;<i>
</I>&gt;<i>                                 none,noflow}}
</I>&gt;<i>
</I>&gt;<i> ** When Server state == {ch,running,rabbit_framing_amqp_0_9_1,240,
</I>&gt;<i>
</I>&gt;<i>                              &lt;0.23804.2237&gt;,&lt;0.9694.2017&gt;,&lt;0.23804.2237&gt;,
</I>&gt;<i>
</I>&gt;<i>                              &lt;&lt;C_IP -&gt; S_IP&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                              {lstate,&lt;0.8750.2014&gt;,false,false},
</I>&gt;<i>
</I>&gt;<i>                              none,1,
</I>&gt;<i>
</I>&gt;<i>                              {[],[]},
</I>&gt;<i>
</I>&gt;<i>                              {user,&lt;&lt;&quot;app_user&quot;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                                  [administrator],
</I>&gt;<i>
</I>&gt;<i>                                  rabbit_auth_backend_internal,
</I>&gt;<i>
</I>&gt;<i>                                  {internal_user,&lt;&lt;&quot;app_user&quot;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;&lt;199,64,175,52,127,65,248,9,70,171,15,9,5,
</I>&gt;<i>
</I>&gt;<i>                                        122,73,4,195,147,238,67&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                                      [administrator]}},
</I>&gt;<i>
</I>&gt;<i>                              &lt;&lt;&quot;/app_user&quot;&gt;&gt;,&lt;&lt;&gt;&gt;,
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {set,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                          {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              {set,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                   []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                    [],[]}}},
</I>&gt;<i>
</I>&gt;<i>                              &lt;0.6852.2217&gt;,
</I>&gt;<i>
</I>&gt;<i>                              {state,fine,5000,#Ref&lt;0.0.8928.158612&gt;},
</I>&gt;<i>
</I>&gt;<i>                              false,1,
</I>&gt;<i>
</I>&gt;<i>                              {{0,nil},{0,nil}},
</I>&gt;<i>
</I>&gt;<i>                              [],
</I>&gt;<i>
</I>&gt;<i>                              [{&lt;&lt;&quot;consumer_cancel_notify&quot;&gt;&gt;,bool,true},
</I>&gt;<i>
</I>&gt;<i>                               {&lt;&lt;&quot;publisher_confirms&quot;&gt;&gt;,bool,true}],
</I>&gt;<i>
</I>&gt;<i>                              none}
</I>&gt;<i>
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i>
</I>&gt;<i> ** {{{function_clause,
</I>&gt;<i>
</I>&gt;<i>           [{supervisor2,handle_call,
</I>&gt;<i>
</I>&gt;<i>                [stat,
</I>&gt;<i>
</I>&gt;<i>                 {&lt;7347.226.0&gt;,#Ref&lt;7347.0.8518.17139&gt;},
</I>&gt;<i>
</I>&gt;<i>                 {state,
</I>&gt;<i>
</I>&gt;<i>                     {&lt;7347.8508.1220&gt;,rabbit_connection_sup},
</I>&gt;<i>
</I>&gt;<i>                     one_for_all,
</I>&gt;<i>
</I>&gt;<i>                     [{child,&lt;7347.27376.2037&gt;,reader,
</I>&gt;<i>
</I>&gt;<i>                          {rabbit_reader,start_link,
</I>&gt;<i>
</I>&gt;<i>                              [&lt;7347.29450.2047&gt;,&lt;7347.19330.2055&gt;,
</I>&gt;<i>
</I>&gt;<i>                               #Fun&lt;rabbit_heartbeat.2.69784259&gt;]},
</I>&gt;<i>
</I>&gt;<i>                          intrinsic,4294967295,worker,
</I>&gt;<i>
</I>&gt;<i>                          [rabbit_reader]},
</I>&gt;<i>
</I>&gt;<i>                      {child,&lt;7347.29450.2047&gt;,channel_sup3,
</I>&gt;<i>
</I>&gt;<i>                          {rabbit_intermediate_sup,start_link,[]},
</I>&gt;<i>
</I>&gt;<i>                          intrinsic,infinity,supervisor,
</I>&gt;<i>
</I>&gt;<i>                          [rabbit_intermediate_sup]},
</I>&gt;<i>
</I>&gt;<i>                      {child,&lt;7347.19330.2055&gt;,collector,
</I>&gt;<i>
</I>&gt;<i>                          {rabbit_queue_collector,start_link,[]},
</I>&gt;<i>
</I>&gt;<i>                          intrinsic,4294967295,worker,
</I>&gt;<i>
</I>&gt;<i>                          [rabbit_queue_collector]}],
</I>&gt;<i>
</I>&gt;<i>                     {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>
</I>&gt;<i>                     0,1,[],rabbit_connection_sup,[]}],
</I>&gt;<i>
</I>&gt;<i>                []},
</I>&gt;<i>
</I>&gt;<i>            {gen_server,handle_msg,5,[{file,&quot;gen_server.erl&quot;},{line,585}]},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},
</I>&gt;<i>
</I>&gt;<i>       {gen_server2,call,[&lt;7347.8508.1220&gt;,stat,infinity]}},
</I>&gt;<i>
</I>&gt;<i>      [{gen_server2,call,3,[]},
</I>&gt;<i>
</I>&gt;<i>       {delegate,safe_invoke,2,[]},
</I>&gt;<i>
</I>&gt;<i>       {delegate,'-safe_invoke/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>
</I>&gt;<i>       {delegate,handle_call,3,[]},
</I>&gt;<i>
</I>&gt;<i>       {gen_server2,handle_msg,2,[]},
</I>&gt;<i>
</I>&gt;<i>       {proc_lib,wake_up,3,[{file,&quot;proc_lib.erl&quot;},{line,249}]}]}
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 14-Dec-2013::12:27:35 ===
</I>&gt;<i>
</I>&gt;<i> AMQP connection &lt;0.23804.2237&gt; (running), channel 240 - error:
</I>&gt;<i>
</I>&gt;<i> {{{function_clause,
</I>&gt;<i>
</I>&gt;<i>        [{supervisor2,handle_call,
</I>&gt;<i>
</I>&gt;<i>             [stat,
</I>&gt;<i>
</I>&gt;<i>              {&lt;7347.226.0&gt;,#Ref&lt;7347.0.8518.17139&gt;},
</I>&gt;<i>
</I>&gt;<i>              {state,
</I>&gt;<i>
</I>&gt;<i>                  {&lt;7347.8508.1220&gt;,rabbit_connection_sup},
</I>&gt;<i>
</I>&gt;<i>                  one_for_all,
</I>&gt;<i>
</I>&gt;<i>                  [{child,&lt;7347.27376.2037&gt;,reader,
</I>&gt;<i>
</I>&gt;<i>                       {rabbit_reader,start_link,
</I>&gt;<i>
</I>&gt;<i>                           [&lt;7347.29450.2047&gt;,&lt;7347.19330.2055&gt;,
</I>&gt;<i>
</I>&gt;<i>                            #Fun&lt;rabbit_heartbeat.2.69784259&gt;]},
</I>&gt;<i>
</I>&gt;<i>                       intrinsic,4294967295,worker,
</I>&gt;<i>
</I>&gt;<i>                       [rabbit_reader]},
</I>&gt;<i>
</I>&gt;<i>                   {child,&lt;7347.29450.2047&gt;,channel_sup3,
</I>&gt;<i>
</I>&gt;<i>                       {rabbit_intermediate_sup,start_link,[]},
</I>&gt;<i>
</I>&gt;<i>                       intrinsic,infinity,supervisor,
</I>&gt;<i>
</I>&gt;<i>                       [rabbit_intermediate_sup]},
</I>&gt;<i>
</I>&gt;<i>                   {child,&lt;7347.19330.2055&gt;,collector,
</I>&gt;<i>
</I>&gt;<i>                       {rabbit_queue_collector,start_link,[]},
</I>&gt;<i>
</I>&gt;<i>                       intrinsic,4294967295,worker,
</I>&gt;<i>
</I>&gt;<i>                       [rabbit_queue_collector]}],
</I>&gt;<i>
</I>&gt;<i>                  {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>                      {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>                      {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>
</I>&gt;<i>                  0,1,[],rabbit_connection_sup,[]}],
</I>&gt;<i>
</I>&gt;<i>             []},
</I>&gt;<i>
</I>&gt;<i>         {gen_server,handle_msg,5,[{file,&quot;gen_server.erl&quot;},{line,585}]},
</I>&gt;<i>
</I>&gt;<i>         {proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},
</I>&gt;<i>
</I>&gt;<i>    {gen_server2,call,[&lt;7347.8508.1220&gt;,stat,infinity]}},
</I>&gt;<i>
</I>&gt;<i> [{gen_server2,call,3,[]},
</I>&gt;<i>
</I>&gt;<i>    {delegate,safe_invoke,2,[]},
</I>&gt;<i>
</I>&gt;<i>    {delegate,'-safe_invoke/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>
</I>&gt;<i>    {delegate,handle_call,3,[]},
</I>&gt;<i>
</I>&gt;<i>    {gen_server2,handle_msg,2,[]},
</I>&gt;<i>
</I>&gt;<i>    {proc_lib,wake_up,3,[{file,&quot;proc_lib.erl&quot;},{line,249}]}]}
</I>&gt;<i>
</I>&gt;<i> =WARNING REPORT==== 14-Dec-2013::12:27:35 ===
</I>&gt;<i>
</I>&gt;<i> Non-AMQP exit reason '{{{function_clause,
</I>&gt;<i>
</I>&gt;<i>                           [{supervisor2,handle_call,
</I>&gt;<i>
</I>&gt;<i>                             [stat,
</I>&gt;<i>
</I>&gt;<i>                              {&lt;7347.226.0&gt;,#Ref&lt;7347.0.8518.17139&gt;},
</I>&gt;<i>
</I>&gt;<i>                              {state,
</I>&gt;<i>
</I>&gt;<i>                               {&lt;7347.8508.1220&gt;,rabbit_connection_sup},
</I>&gt;<i>
</I>&gt;<i>                               one_for_all,
</I>&gt;<i>
</I>&gt;<i>                               [{child,&lt;7347.27376.2037&gt;,reader,
</I>&gt;<i>
</I>&gt;<i>                                 {rabbit_reader,start_link,
</I>&gt;<i>
</I>&gt;<i>                                  [&lt;7347.29450.2047&gt;,&lt;7347.19330.2055&gt;,
</I>&gt;<i>
</I>&gt;<i>                                   #Fun&lt;rabbit_heartbeat.2.69784259&gt;]},
</I>&gt;<i>
</I>&gt;<i>                                 intrinsic,4294967295,worker,
</I>&gt;<i>
</I>&gt;<i>                                 [rabbit_reader]},
</I>&gt;<i>
</I>&gt;<i>                                {child,&lt;7347.29450.2047&gt;,channel_sup3,
</I>&gt;<i>
</I>&gt;<i>                                 {rabbit_intermediate_sup,start_link,[]},
</I>&gt;<i>
</I>&gt;<i>                                 intrinsic,infinity,supervisor,
</I>&gt;<i>
</I>&gt;<i>                                 [rabbit_intermediate_sup]},
</I>&gt;<i>
</I>&gt;<i>                                {child,&lt;7347.19330.2055&gt;,collector,
</I>&gt;<i>
</I>&gt;<i>                                 {rabbit_queue_collector,start_link,[]},
</I>&gt;<i>
</I>&gt;<i>                                 intrinsic,4294967295,worker,
</I>&gt;<i>
</I>&gt;<i>                                 [rabbit_queue_collector]}],
</I>&gt;<i>
</I>&gt;<i>                               {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                 []},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                      {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                  []}}},
</I>&gt;<i>
</I>&gt;<i>                               0,1,[],rabbit_connection_sup,[]}],
</I>&gt;<i>
</I>&gt;<i>                             []},
</I>&gt;<i>
</I>&gt;<i>                            {gen_server,handle_msg,5,
</I>&gt;<i>
</I>&gt;<i>                             [{file,&quot;gen_server.erl&quot;},{line,585}]},
</I>&gt;<i>
</I>&gt;<i>                            {proc_lib,init_p_do_apply,3,
</I>&gt;<i>
</I>&gt;<i>                             [{file,&quot;proc_lib.erl&quot;},{line,239}]}]},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {gen_server2,call,[&lt;7347.8508.1220&gt;,stat,infinity]}},
</I>&gt;<i>
</I>&gt;<i>                         [{gen_server2,call,3,[]},
</I>&gt;<i>
</I>&gt;<i>                          {delegate,safe_invoke,2,[]},
</I>&gt;<i>
</I>&gt;<i>                          {delegate,'-safe_invoke/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>
</I>&gt;<i>                          {delegate,handle_call,3,[]},
</I>&gt;<i>
</I>&gt;<i>                          {gen_server2,handle_msg,2,[]},
</I>&gt;<i>
</I>&gt;<i>                          {proc_lib,wake_up,3,
</I>&gt;<i>
</I>&gt;<i>                           [{file,&quot;proc_lib.erl&quot;},{line,249}]}]}'
</I>&gt;<i>
</I>&gt;<i> ------ NODE2 Rabbit LOG ------
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 14-Dec-2013::11:55:10 ===
</I>&gt;<i>
</I>&gt;<i> ** Generic server &lt;0.9746.1239&gt; terminating
</I>&gt;<i>
</I>&gt;<i> ** Last message in was stat
</I>&gt;<i>
</I>&gt;<i> ** When Server state == {state,{&lt;0.9746.1239&gt;,rabbit_intermediate_sup},
</I>&gt;<i>
</I>&gt;<i>                                 one_for_one,[],
</I>&gt;<i>
</I>&gt;<i>                                 {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                 {[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                        [],[],[]},
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> {{[],[],[],[],[],[],[],[],[],[],[],[],[],
</I>&gt;<i>
</I>&gt;<i>                                         [],[],[]}}},
</I>&gt;<i>
</I>&gt;<i>                                 10,10,[],rabbit_intermediate_sup,[]}
</I>&gt;<i>
</I>&gt;<i> ** Reason for termination ==
</I>&gt;<i>
</I>&gt;<i> ** {function_clause,
</I>&gt;<i>
</I>&gt;<i>         [{supervisor2,handle_call,
</I>&gt;<i>
</I>&gt;<i>              [stat,
</I>&gt;<i>
</I>&gt;<i>               {&lt;0.227.0&gt;,#Ref&lt;0.0.8145.90172&gt;},
</I>&gt;<i>
</I>&gt;<i>               {state,
</I>&gt;<i>
</I>&gt;<i>                   {&lt;0.9746.1239&gt;,rabbit_intermediate_sup},
</I>&gt;<i>
</I>&gt;<i>                   one_for_one,[],
</I>&gt;<i>
</I>&gt;<i>                   {dict,0,16,16,8,80,48,
</I>&gt;<i>
</I>&gt;<i>                       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
</I>&gt;<i>
</I>&gt;<i>                       {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},
</I>&gt;<i>
</I>&gt;<i>                   10,10,[],rabbit_intermediate_sup,[]}],
</I>&gt;<i>
</I>&gt;<i>              []},
</I>&gt;<i>
</I>&gt;<i>          {gen_server,handle_msg,5,[{file,&quot;gen_server.erl&quot;},{line,585}]},
</I>&gt;<i>
</I>&gt;<i>          {proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032627.html">[rabbitmq-discuss] rabbit_limiter Exception and Broker Issues
</A></li>
	<LI>Next message: <A HREF="032628.html">[rabbitmq-discuss] RabbitMQ 3.1.5 crashed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32645">[ date ]</a>
              <a href="thread.html#32645">[ thread ]</a>
              <a href="subject.html#32645">[ subject ]</a>
              <a href="author.html#32645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
