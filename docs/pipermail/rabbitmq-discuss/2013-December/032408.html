<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Running Rabbitmq on AWS EC2 and changing	hostnames
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Running%20Rabbitmq%20on%20AWS%20EC2%20and%20changing%0A%09hostnames&In-Reply-To=%3CCAE1See_SM64vva5ONcCLDYYkqV9jKVbNNBK7w8haL3tfgEYxPA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032406.html">
   <LINK REL="Next"  HREF="032409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Running Rabbitmq on AWS EC2 and changing	hostnames</H1>
    <B>Pradeepto Bhattacharya</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Running%20Rabbitmq%20on%20AWS%20EC2%20and%20changing%0A%09hostnames&In-Reply-To=%3CCAE1See_SM64vva5ONcCLDYYkqV9jKVbNNBK7w8haL3tfgEYxPA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Running Rabbitmq on AWS EC2 and changing	hostnames">pradeeptob at gmail.com
       </A><BR>
    <I>Mon Dec  9 01:29:59 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032406.html">[rabbitmq-discuss] Setting message-expiry on a queue using	rabbitmqadmin
</A></li>
        <LI>Next message: <A HREF="032409.html">[rabbitmq-discuss] Running Rabbitmq on AWS EC2 and changing	hostnames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32408">[ date ]</a>
              <a href="thread.html#32408">[ thread ]</a>
              <a href="subject.html#32408">[ subject ]</a>
              <a href="author.html#32408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am still very new to Rabbitmq.

For my project, I have to run Rabbitmq on an AWS EC2 instance.
Everything works great until, I Stop/Start my instance for some
reason. I have read [1] but that doesn't help because setting the
hostname to a fixed string is not an option for my project as it is
expected that someone can change it later again.

My application doesn't work properly after the stop/start routine. I
am running an CentOS 6.4 based instance.

I have tried modifiying the init script ( /etc/init.d/rabbitmq-server
) to something like this -

        &quot;RABBITMQ_MNESIA_DIR=/var/lib/rabbitmq/mnesia/myapplication \
        RABBITMQ_PLUGINS_EXPAND_DIR=/var/lib/rabbitmq/mnesia/myapplication-plugins-expand
\
        RABBITMQ_PID_FILE=$PID_FILE $START_PROG $DAEMON \
            &gt; &quot;${INIT_LOG_DIR}/startup_log&quot; \
            2&gt; &quot;${INIT_LOG_DIR}/startup_err&quot; \
            0&lt;&amp;- &amp;
        $CONTROL wait $PID_FILE &gt;/dev/null 2&gt;&amp;1&quot;

Note that I have added RABBITMQ_MNESIA_DIR and
RABBITMQ_PLUGINS_EXPAND_DIR at the beginning. The reason, I did this
because I noticed that those directories used the internal ip for the
EC2 instance and thus changed everytime the instance stopped and
started.

Is this the right way to get this done? What would be solution when
hostnames/nodenames keep changing for instances that run rabbitmq? I
have tried many things but in vain and almost at my wits end right
now.

Thank you in advance.

[1] <A HREF="http://www.rabbitmq.com/ec2.html">http://www.rabbitmq.com/ec2.html</A>

Regards,

Pradeepto
-- 
Pradeepto Kumar Bhattacharya
KDE e.V. Board of Director | Proud KDE Contributor
The KDE Project : <A HREF="http://www.kde.org">http://www.kde.org</A>
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032406.html">[rabbitmq-discuss] Setting message-expiry on a queue using	rabbitmqadmin
</A></li>
	<LI>Next message: <A HREF="032409.html">[rabbitmq-discuss] Running Rabbitmq on AWS EC2 and changing	hostnames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32408">[ date ]</a>
              <a href="thread.html#32408">[ thread ]</a>
              <a href="subject.html#32408">[ subject ]</a>
              <a href="author.html#32408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
