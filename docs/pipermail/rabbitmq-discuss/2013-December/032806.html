<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] MQ consumer become very slow if there are a lot of ready message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQ%20consumer%20become%20very%20slow%20if%20there%20are%20a%0A%20lot%20of%20ready%20message&In-Reply-To=%3CCAMcAHLXye%3DBjeao7kVEWo%2B8ZvmF6VuaC3Ey6DKD5xNLjQ%3DJ8cg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032805.html">
   <LINK REL="Next"  HREF="032807.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] MQ consumer become very slow if there are a lot of ready message</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20MQ%20consumer%20become%20very%20slow%20if%20there%20are%20a%0A%20lot%20of%20ready%20message&In-Reply-To=%3CCAMcAHLXye%3DBjeao7kVEWo%2B8ZvmF6VuaC3Ey6DKD5xNLjQ%3DJ8cg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] MQ consumer become very slow if there are a lot of ready message">videlalvaro at gmail.com
       </A><BR>
    <I>Mon Dec 30 16:50:17 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032805.html">[rabbitmq-discuss] MQ consumer become very slow if there are a lot	of ready message
</A></li>
        <LI>Next message: <A HREF="032807.html">[rabbitmq-discuss] rabbitmq-server_3.2.2-1_all.deb installs Erlang	14b?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32806">[ date ]</a>
              <a href="thread.html#32806">[ thread ]</a>
              <a href="subject.html#32806">[ subject ]</a>
              <a href="author.html#32806">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

See: <A HREF="http://www.rabbitmq.com/blog/2011/10/27/performance-of-queues-when-less-is-more/">http://www.rabbitmq.com/blog/2011/10/27/performance-of-queues-when-less-is-more/</A>

Usually RabbitMQ queues are faster with fewer messages for the reasons
explained there.

Apart from that, that blog post explains how you could configure your
basic.qos settings to reduce latency.

Regards,

Alvaro

On Mon, Dec 30, 2013 at 5:44 PM, &#26928;&#39118; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">1006798382 at qq.com</A>&gt; wrote:
&gt;<i> I have 1 node with 8 cores cpu(Intel(R) Xeon(R) CPU E5-2620 0 @ 2.00GHz) and
</I>&gt;<i> 16G RAM
</I>&gt;<i> OS: centos 6.3 64bits
</I>&gt;<i> Rabbit MQ version: rabbitmq-server-3.2.2-1.noarch
</I>&gt;<i>
</I>&gt;<i> exchange: ex-statcen, direct type
</I>&gt;<i> queue :4 queues, use the same direct routine key to get 4 copies from the
</I>&gt;<i> ex-statcen
</I>&gt;<i>
</I>&gt;<i> It worked ok at start, the speed to ex-statcen exchange is 7k/sec, and the
</I>&gt;<i> consumer is very quickly.
</I>&gt;<i> After a while, the queue consumer become slow, about 2,000,000 messages
</I>&gt;<i> stayed in queue.
</I>&gt;<i> Then I stop the consumer and restart a new consumer, the speed of
</I>&gt;<i> consumption was still very slow, about 10~700/sec.
</I>&gt;<i>
</I>&gt;<i> My question is why the speed of consumption can not back to the 7k/sec? How
</I>&gt;<i> to improve the speed.
</I>&gt;<i>
</I>&gt;<i> Note that I've enabled the HiPE. with erlang R16B03 version
</I>&gt;<i>
</I>&gt;<i> thx!
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032805.html">[rabbitmq-discuss] MQ consumer become very slow if there are a lot	of ready message
</A></li>
	<LI>Next message: <A HREF="032807.html">[rabbitmq-discuss] rabbitmq-server_3.2.2-1_all.deb installs Erlang	14b?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32806">[ date ]</a>
              <a href="thread.html#32806">[ thread ]</a>
              <a href="subject.html#32806">[ subject ]</a>
              <a href="author.html#32806">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
