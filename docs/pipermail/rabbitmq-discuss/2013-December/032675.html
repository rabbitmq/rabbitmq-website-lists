<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publisher confirms requires seperate call to get ack?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publisher%20confirms%20requires%20seperate%20call%20to%0A%20get%20ack%3F&In-Reply-To=%3C52B1724D.2060009%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032664.html">
   <LINK REL="Next"  HREF="032661.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publisher%20confirms%20requires%20seperate%20call%20to%0A%20get%20ack%3F&In-Reply-To=%3C52B1724D.2060009%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?">simon at rabbitmq.com
       </A><BR>
    <I>Wed Dec 18 10:00:45 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032664.html">[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?
</A></li>
        <LI>Next message: <A HREF="032661.html">[rabbitmq-discuss] 2 Way Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32675">[ date ]</a>
              <a href="thread.html#32675">[ thread ]</a>
              <a href="subject.html#32675">[ subject ]</a>
              <a href="author.html#32675">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18/12/2013 05:53, Michael Klishin wrote:
&gt;<i> It depends on your client library. E.g. in Java, C# and Ruby (Bunny) you
</I>&gt;<i> can publish as many messages
</I>&gt;<i> as you want and then use Channel#waitForConfirms to wait for all
</I>&gt;<i> outstanding confirms to arrive.
</I>
You can do so in the Erlang client - either call 
amqp_channel:wait_for_confirms/1 every so often or (better) call 
amqp_channel:register_conform_handler/2 and accept the confirms 
yourself. That's better because every time you call 
amqp_channel:wait_for_confirms/1 the channel comes to a halt until all 
confirms have arrived.

&gt;<i> it doesn't have to be done per message and RabbitMQ pushes confirms to
</I>&gt;<i> you, you do not poll for acknowledgements.
</I>
This is the key point. It sounds like the OP is publishing one message, 
waiting for one confirm, publishing the next message, and so on. That's 
an antipattern (at least when you want to go fast) since you can never 
go faster than 1 / (network round trip time) messages per second.

Cheers, Simon

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032664.html">[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?
</A></li>
	<LI>Next message: <A HREF="032661.html">[rabbitmq-discuss] 2 Way Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32675">[ date ]</a>
              <a href="thread.html#32675">[ thread ]</a>
              <a href="subject.html#32675">[ subject ]</a>
              <a href="author.html#32675">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
