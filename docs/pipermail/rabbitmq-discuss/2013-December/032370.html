<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory usage for Durable Queues and Persistent Messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage%20for%20Durable%20Queues%20and%0A%20Persistent%20Messages&In-Reply-To=%3C52A09F3A.6030504%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032368.html">
   <LINK REL="Next"  HREF="032382.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory usage for Durable Queues and Persistent Messages</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage%20for%20Durable%20Queues%20and%0A%20Persistent%20Messages&In-Reply-To=%3C52A09F3A.6030504%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Memory usage for Durable Queues and Persistent Messages">simon at rabbitmq.com
       </A><BR>
    <I>Thu Dec  5 15:43:54 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032368.html">[rabbitmq-discuss] Memory usage for Durable Queues and Persistent	Messages
</A></li>
        <LI>Next message: <A HREF="032382.html">[rabbitmq-discuss] Option for surviving connection failure feature	suggestion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32370">[ date ]</a>
              <a href="thread.html#32370">[ thread ]</a>
              <a href="subject.html#32370">[ subject ]</a>
              <a href="author.html#32370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/12/2013 14:14, Dan Gritsko wrote:
&gt;<i> Additionally, when I view the &quot;Memory details&quot; for the primary node for
</I>&gt;<i> this queue, the majority of the memory is occupied by the &quot;Binaries&quot;
</I>&gt;<i> category of the breakdown. The documentation page states that &quot;In-memory
</I>&gt;<i> message bodies show up&quot; in this category. But shouldn't the message
</I>&gt;<i> bodies all be on the disk, and not in memory and affecting the report in
</I>&gt;<i> this way?
</I>&gt;<i>
</I>
Marking a message &quot;persistent&quot; means it will be on disk. But it doesn't 
guarantee it will not be in memory. After all, if it's in memory too it 
can be delivered more quickly. RabbitMQ will keep messages (persistent 
or not) in memory until it starts to come under memory pressure, at 
which point it will start to evict them.

See <A HREF="http://www.rabbitmq.com/memory.html#memsup-paging">http://www.rabbitmq.com/memory.html#memsup-paging</A>

So the differences in memory use can probably be explained that the 
nodes had come under different amounts of memory pressure and thus some 
had paged out and some had not.

Cheers, Simon

</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032368.html">[rabbitmq-discuss] Memory usage for Durable Queues and Persistent	Messages
</A></li>
	<LI>Next message: <A HREF="032382.html">[rabbitmq-discuss] Option for surviving connection failure feature	suggestion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32370">[ date ]</a>
              <a href="thread.html#32370">[ thread ]</a>
              <a href="subject.html#32370">[ subject ]</a>
              <a href="author.html#32370">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
