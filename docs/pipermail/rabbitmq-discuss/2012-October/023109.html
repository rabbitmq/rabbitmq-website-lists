<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Safely replaying archived messages from an external store
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Safely%20replaying%20archived%20messages%20from%20an%0A%20external%20store&In-Reply-To=%3C507E84F4.1070905%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023092.html">
   <LINK REL="Next"  HREF="023131.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Safely replaying archived messages from an external store</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Safely%20replaying%20archived%20messages%20from%20an%0A%20external%20store&In-Reply-To=%3C507E84F4.1070905%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Safely replaying archived messages from an external store">emile at rabbitmq.com
       </A><BR>
    <I>Wed Oct 17 11:14:12 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023092.html">[rabbitmq-discuss] Safely replaying archived messages from an	external store
</A></li>
        <LI>Next message: <A HREF="023131.html">[rabbitmq-discuss] Safely replaying archived messages from an external store
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23109">[ date ]</a>
              <a href="thread.html#23109">[ thread ]</a>
              <a href="subject.html#23109">[ subject ]</a>
              <a href="author.html#23109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Charles,

On 16/10/12 17:39, Charles Duffy wrote:
&gt;<i> Does this have obvious holes? Is a better approach (again, not trusting 
</I>&gt;<i> the clocks of the clients which add content to the exchange to be 
</I>&gt;<i> accurate) available?
</I>
I've not analysed your description in detail, but here are some thoughts:

You are correct that AMQP timestamps have 1sec resolution, but nothing
prevents publishers from adding a custom header with greater resolution.

There is a potential for messages to arrive inbetween retrieving
messages from the database and normally consuming messages from the
broker. Make sure you don't leave the door open for race conditions.

You may also want to look at the last value cached plugin:
<A HREF="https://github.com/squaremo/rabbitmq-lvc-plugin">https://github.com/squaremo/rabbitmq-lvc-plugin</A>
though I'm not sure whether that is used in production.


-Emile


</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023092.html">[rabbitmq-discuss] Safely replaying archived messages from an	external store
</A></li>
	<LI>Next message: <A HREF="023131.html">[rabbitmq-discuss] Safely replaying archived messages from an external store
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23109">[ date ]</a>
              <a href="thread.html#23109">[ thread ]</a>
              <a href="subject.html#23109">[ subject ]</a>
              <a href="author.html#23109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
