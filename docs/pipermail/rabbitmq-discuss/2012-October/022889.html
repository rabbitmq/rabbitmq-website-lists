<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Performance Tests and max of ~4000 msg/sec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Performance%20Tests%20and%20max%20of%20%7E4000%0A%20msg/sec&In-Reply-To=%3C5072A8F5.2060000%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022885.html">
   <LINK REL="Next"  HREF="022887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Performance Tests and max of ~4000 msg/sec</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Performance%20Tests%20and%20max%20of%20%7E4000%0A%20msg/sec&In-Reply-To=%3C5072A8F5.2060000%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Performance Tests and max of ~4000 msg/sec">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Oct  8 11:20:37 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022885.html">[rabbitmq-discuss] RabbitMQ Performance Tests and max of ~4000	msg/sec
</A></li>
        <LI>Next message: <A HREF="022887.html">[rabbitmq-discuss] [ANN] php-amqplib now supports basic_return
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22889">[ date ]</a>
              <a href="thread.html#22889">[ thread ]</a>
              <a href="subject.html#22889">[ subject ]</a>
              <a href="author.html#22889">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jason,

On 08/10/12 02:55, McIntosh Jason wrote:
&gt;<i> So an interesting addendum:
</I>&gt;<i>
</I>&gt;<i> I tossed a slight modification of my main method:
</I>&gt;<i>
</I>&gt;<i> List&lt;Thread&gt; threadsStarted = new ArrayList&lt;Thread&gt;();
</I>&gt;<i> for (int i = 0; i &lt; 5; i++) {
</I>&gt;<i> Thread t = new Thread(new RabbitMqTester(&quot;TestExchange&quot;, &quot;Test&quot;, channel));
</I>&gt;<i> threadsStarted.add(t);
</I>&gt;<i> t.start();
</I>&gt;<i> }
</I>&gt;<i> for (Thread t : threadsStarted) {
</I>&gt;<i> t.join();
</I>&gt;<i> }
</I>&gt;<i> And started seeing 16k messages per second.  I'll be doing some more
</I>&gt;<i> testing to see where my block might be.  Could be as simple as how I'm
</I>&gt;<i> handling threads...
</I>
Your messages are marked as 'persistent', and I am guessing you declared 
the queues as durable.

As a result every message has to be written to disk, which limits the 
throughput to disk write speed. Additionally, rabbit has to do an fsync 
every now and then in order to bound the number of messages that might 
be lost in a crash. That is an expensive operation but is coalesced 
across concurrent activities. Hence you are seeing a higher overall 
throughput with multiple publishers.

Regards,

Matthias.
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022885.html">[rabbitmq-discuss] RabbitMQ Performance Tests and max of ~4000	msg/sec
</A></li>
	<LI>Next message: <A HREF="022887.html">[rabbitmq-discuss] [ANN] php-amqplib now supports basic_return
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22889">[ date ]</a>
              <a href="thread.html#22889">[ thread ]</a>
              <a href="subject.html#22889">[ subject ]</a>
              <a href="author.html#22889">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
