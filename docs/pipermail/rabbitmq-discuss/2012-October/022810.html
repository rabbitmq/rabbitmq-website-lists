<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Proper protocol for dealing with crash dumps?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Proper%20protocol%20for%20dealing%20with%20crash%20dumps%3F&In-Reply-To=%3C506CAD22.5030305%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022782.html">
   <LINK REL="Next"  HREF="022878.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Proper protocol for dealing with crash dumps?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Proper%20protocol%20for%20dealing%20with%20crash%20dumps%3F&In-Reply-To=%3C506CAD22.5030305%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Proper protocol for dealing with crash dumps?">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Oct  3 22:24:50 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022782.html">[rabbitmq-discuss] Proper protocol for dealing with crash dumps?
</A></li>
        <LI>Next message: <A HREF="022878.html">[rabbitmq-discuss] Proper protocol for dealing with crash dumps?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22810">[ date ]</a>
              <a href="thread.html#22810">[ thread ]</a>
              <a href="subject.html#22810">[ subject ]</a>
              <a href="author.html#22810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alex,

On 02/10/12 15:09, Alex Zepeda wrote:
&gt;<i> =erl_crash_dump:0.1
</I>&gt;<i> Fri Sep 28 20:38:32 2012
</I>&gt;<i> Slogan: eheap_alloc: Cannot allocate 747325720 bytes of memory (of type &quot;heap&quot;).
</I>&gt;<i> System version: Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:4:4] [rq:4] [async-threads:30] [hipe] [kernel-poll:true]
</I>&gt;<i> Compiled: Fri Sep 24 19:15:42 2010
</I>&gt;<i>
</I>&gt;<i> Nothing else should be using a lot of memory,
</I>
&quot;should&quot; - you may want to check that ;)

Mind you, the above is trying to allocate 740MB - does that seem 
reasonable for your rabbit?

&gt;<i> unless there have been memory leaks fixed since R13B03 + 2.8.6?
</I>
R13B03 is ancient, and countless bugs have been fixed since then, 
including memory leaks. Though, tbh, it's not the first place I'd look. 
Rabbit 2.8.7 plugs some leaks, but they were confined to HA queues (see 
the release notes for more details), so unless you are using those then 
upgrading won't help.

Have you changed the memory watermark settings of rabbit at all? If not 
then rabbit really shouldn't run out of memory unless another program is 
stealing the memory, or your app is creating lots of exchanges, queues 
or bindings. Or lots of connections. Or you are using some exotic 
plug-ins with hitherto undiscovered bugs. In all those cases, grabbing 
the output of 'rabbitmqctl report' before rabbit dies should offer some 
clues.

Regards,

Matthias.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022782.html">[rabbitmq-discuss] Proper protocol for dealing with crash dumps?
</A></li>
	<LI>Next message: <A HREF="022878.html">[rabbitmq-discuss] Proper protocol for dealing with crash dumps?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22810">[ date ]</a>
              <a href="thread.html#22810">[ thread ]</a>
              <a href="subject.html#22810">[ subject ]</a>
              <a href="author.html#22810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
