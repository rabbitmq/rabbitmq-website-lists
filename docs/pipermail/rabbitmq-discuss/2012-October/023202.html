<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Web Management Plugin Sluggishness
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Web%20Management%20Plugin%20Sluggishness&In-Reply-To=%3CCAHW0W4OuH7E-nhn2pBzkLHoem_YwM%3DsEAGwV3wJ9R2HABg3-Jg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023201.html">
   <LINK REL="Next"  HREF="023232.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Web Management Plugin Sluggishness</H1>
    <B>Dave Seltzer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Web%20Management%20Plugin%20Sluggishness&In-Reply-To=%3CCAHW0W4OuH7E-nhn2pBzkLHoem_YwM%3DsEAGwV3wJ9R2HABg3-Jg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Web Management Plugin Sluggishness">dseltzer at tveyes.com
       </A><BR>
    <I>Fri Oct 19 19:25:51 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023201.html">[rabbitmq-discuss] Web Management Plugin Sluggishness
</A></li>
        <LI>Next message: <A HREF="023232.html">[rabbitmq-discuss] Web Management Plugin Sluggishness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23202">[ date ]</a>
              <a href="thread.html#23202">[ thread ]</a>
              <a href="subject.html#23202">[ subject ]</a>
              <a href="author.html#23202">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Running that script produces this:

[{490415,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,os_pid}},
 {7465,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,os_pid}},
 {470,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_ets}},
 {912,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_ets}},
 {249,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_binary}},
 {584,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_binary}},
 {173,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_proc}},
 {660,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_proc}},
 {172,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_proc_used}},
 {555,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_proc_used}},
 {144,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_atom}},
 {1066,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_atom}},
 {256,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_atom_used}},
 {716,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_atom_used}},
 {178,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_code}},
 {474,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_code}},
 {62,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,fd_used}},
 {422,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,fd_used}},
 {62,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,fd_total}},
 {437,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,fd_total}},
 {76,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,sockets_used}},
 {446,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,sockets_used}},
 {78,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,sockets_total}},
 {678,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,sockets_total}},
 {181,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_used}},
 {1126,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_used}},
 {71,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_limit}},
 {7747,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_limit}},
 {94,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,mem_alarm}},
 {636,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,mem_alarm}},
 {87,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,disk_free_limit}},
 {588,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,disk_free_limit}},
 {1152028,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,disk_free}},
 {1694075,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,disk_free}},
 {635870,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,disk_free_alarm}},
 {310155,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,disk_free_alarm}},
 {999554,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,proc_used}},
 {823,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,proc_used}},
 {1286885,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,proc_total}},
 {27490,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,proc_total}},
 {1207,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,statistics_level}},
 {960135,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,statistics_level}},
 {70,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,erlang_version}},
 {956790,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,erlang_version}},
 {47244,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,uptime}},
 {2882,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,uptime}},
 {949552,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,run_queue}},
 {93713,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,run_queue}},
 {974491,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,processors}},
 {789,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,processors}},
 {99,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,exchange_types}},
 {938,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,exchange_types}},
 {87,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,auth_mechanisms}},
 {428,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,auth_mechanisms}},
 {153,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,applications}},
 {585,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,applications}}]
...done.

Seems like the big values are:
{490415,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,os_pid}}
{1152028,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,disk_free}}
{1694075,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,disk_free}}
{635870,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,disk_free_alarm}}
{310155,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,disk_free_alarm}}
{1286885,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,proc_total}}
{960135,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,statistics_level}}
{956790,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,erlang_version}}
{949552,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,run_queue}}
{93713,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue02</A>,run_queue}}
{974491,{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A>,processors}}

The worst offenders are DiskFree on both servers and proc_total on queue01.

I'm not sure what I should be l looking for here.

Again! Thanks so much for your help!

-Dave

On Fri, Oct 19, 2012 at 12:58 PM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;wrote:

&gt;<i> On 19/10/12 17:51, Dave Seltzer wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> In terms of looking for the cause of the slowness is this usually
</I>&gt;&gt;<i> related to DiskIO, or am I looking at a CPU issue.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Depends on what's slow!
</I>&gt;<i>
</I>&gt;<i> Let's iterate again:
</I>&gt;<i>
</I>&gt;<i> rabbitmqctl eval '[timer:tc(fun () -&gt; rabbit_mgmt_external_stats:**info(N,
</I>&gt;<i> [K]), {N, K} end) || K &lt;- [os_pid,mem_ets,mem_binary,**
</I>&gt;<i> mem_proc,mem_proc_used,mem_**atom,mem_atom_used,mem_code,**
</I>&gt;<i> fd_used,fd_total,sockets_used,**sockets_total,mem_used,mem_**
</I>&gt;<i> limit,mem_alarm,disk_free_**limit,disk_free,disk_free_**
</I>&gt;<i> alarm,proc_used,proc_total,**statistics_level,erlang_**
</I>&gt;<i> version,uptime,run_queue,**processors,exchange_types,**auth_mechanisms,applications],
</I>&gt;<i> N &lt;- [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at queue01</A><A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at queue02</A>**]].'
</I>&gt;<i>
</I>&gt;<i> This will provide a time for each individual info item.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i>
</I>


-- 
Dave Seltzer &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dseltzer at tveyes.com</A>&gt;
Chief Systems Architect
TVEyes
(203) 254-3600 x222
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121019/f0c7bfbb/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121019/f0c7bfbb/attachment.htm</A>&gt;
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023201.html">[rabbitmq-discuss] Web Management Plugin Sluggishness
</A></li>
	<LI>Next message: <A HREF="023232.html">[rabbitmq-discuss] Web Management Plugin Sluggishness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23202">[ date ]</a>
              <a href="thread.html#23202">[ thread ]</a>
              <a href="subject.html#23202">[ subject ]</a>
              <a href="author.html#23202">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
