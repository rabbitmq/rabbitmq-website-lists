<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Issues about RabbitMQ Management HTTP API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issues%20about%20RabbitMQ%20Management%20HTTP%20API&In-Reply-To=%3C201210232142260561404%40edocom.cn%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023280.html">
   <LINK REL="Next"  HREF="023296.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Issues about RabbitMQ Management HTTP API</H1>
    <B>johnson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issues%20about%20RabbitMQ%20Management%20HTTP%20API&In-Reply-To=%3C201210232142260561404%40edocom.cn%3E"
       TITLE="[rabbitmq-discuss] Issues about RabbitMQ Management HTTP API">johnson at edocom.cn
       </A><BR>
    <I>Tue Oct 23 14:42:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023280.html">[rabbitmq-discuss] STOMP 1.0 adapter escapes colon as \c (STOMP 1.1 style)
</A></li>
        <LI>Next message: <A HREF="023296.html">[rabbitmq-discuss] RABBIT MANAGEMENT HTTP API CANNOT SUPPORT	&quot;Create Queue and Exchange&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23285">[ date ]</a>
              <a href="thread.html#23285">[ thread ]</a>
              <a href="subject.html#23285">[ subject ]</a>
              <a href="author.html#23285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Today I tried to use RabbitMQ Management HTTP API. I just followed the example.

curl -i -u guest:guest -H &quot;content-type:application/json&quot; -XPUT  -d'{&quot;type&quot;:&quot;direct&quot;}'  <A HREF="http://198.216.26.95:55672/api/exchanges/%2f/my-new-exchange">http://198.216.26.95:55672/api/exchanges/%2f/my-new-exchange</A>

HTTP/1.1 204 No Content
Server: MochiWeb/1.1 WebMachine/1.7 (participate in the frantic)
Date: Tue, 23 Oct 2012 13:23:32 GMT
Content-Type: application/json
Content-Length: 0

It works fine. 

However, when I write the JAVA program to do the same thing. My Java code is:

DefaultHttpClient httpclient = new DefaultHttpClient();  
httpclient.getCredentialsProvider().setCredentials(new AuthScope(&quot;198.216.26.95&quot;, 55672),new UsernamePasswordCredentials(&quot;guest&quot;, &quot;guest&quot;));
HttpPut httpput = new HttpPut(<A HREF="http://198.216.26.95:55672/api/exchanges/%2f/my-new-exchange">http://198.216.26.95:55672/api/exchanges/%2f/my-new-exchange</A>);
httpput.addHeader(&quot;content-type&quot;, &quot;application/json&quot;);
JSONObject param = new JSONObject();
param.put(&quot;type&quot;, &quot;direct&quot;);
StringEntity  entity = new StringEntity(param.toString());
httpput.setEntity(entity);
HttpResponse response = httpclient.execute(httpput); 
 
It always returned the following exception.
org.apache.http.NoHttpResponseException: The target server failed to respond
at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:95)
at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1066)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1044)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1035)


Could anyone help me about this issue?




johnson

From: rabbitmq-discuss-request
Date: 2012-10-23 19:00
To: rabbitmq-discuss
Subject: rabbitmq-discuss Digest, Vol 65, Issue 23
Send rabbitmq-discuss mailing list submissions to
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>

To subscribe or unsubscribe via the World Wide Web, visit
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
or, via email, send a message with subject or body 'help' to
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-request at lists.rabbitmq.com</A>

You can reach the person managing the list at
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-owner at lists.rabbitmq.com</A>

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of rabbitmq-discuss digest...&quot;


Today's Topics:

   1. Re: intenal error when connecting from rabbitmq-c
      (Matthias Radestock)
   2. Re: Upgrading RabbitMQ2.8.6 (Matthias Radestock)
   3. Re: Rabbit Management HTTP API issue - deleted queues linger
      in API responses (Simon MacMullen)
   4. Re: PHP Client Library (Matthias Radestock)
   5. Clustering (chetan dev)
   6. Re: Clustering (Tim Watson)
   7. Re: Clustering (chetan dev)
   8. Adding slave for mirrored queue (Artsiom)
   9. Re: Clustering (Tim Watson)
  10. Re: Adding slave for mirrored queue (Tim Watson)
  11. Re: Adding slave for mirrored queue (Artsiom)
  12. Re: Adding slave for mirrored queue (Tim Watson)
  13. Re: Upgrading RabbitMQ2.8.6 (Matt Long)
  14. Re: Adding slave for mirrored queue (Simon MacMullen)
  15. Channel thread-safety (Laurent Vauthrin)
  16. Re: Clustering (chetan dev)
  17. Re: Channel thread-safety (Michael Klishin)
  18. Re: RabbitMQ + Messages between virtual machines and physical
      hosts on a cloud (Desta Haileselassie Hagos)
  19. Re: RabbitMQ + Messages between virtual machines and physical
      hosts on a cloud (Brett Cameron)
  20. Re: Clustering (Matthias Radestock)
  21. Re: {SSL upgrade error, timeout} (Dharshan Rangegowda)
  22. Re: nodename variable and mnesia directory (Elizabeth Liao)
  23. Memory leak caused by error_logger in 2.8.6? (Travis)
  24. How to structure Master with many slaves? RPC?? (theBuckWheat)
  25. Re: Channel thread-safety (Laurent Vauthrin)
  26. Re: Clustering (Tim Watson)
  27. Re: RabbitMQ + Messages between virtual machines and physical
      hosts on a cloud (Tim Watson)
  28. Re: Clustering (Tim Watson)
  29. Re: STOMP plugin - durable subscription limitation
      (Michael Justin)
  30. Re: nodename variable and mnesia directory (Tim Watson)
  31. Re: Memory leak caused by error_logger in 2.8.6? (Tim Watson)
  32. Re: RabbitMQ + Messages between virtual machines and physical
      hosts on a cloud (Tim Watson)
  33. Re: Memory leak caused by error_logger in 2.8.6? (Tim Watson)
  34. Re: Clustering (chetan dev)
  35. STOMP 1.0 adapter escapes colon as \c (STOMP 1.1 style)
      (Michael Justin)
  36. Re: How to structure Master with many slaves? RPC??
      (Emile Joubert)
  37. Re: Clustering (Tim Watson)
  38. Re: Memory leak caused by error_logger in 2.8.6? (Simon MacMullen)
  39. Re: Clustering (chetan dev)
  40. Re: Upgrading RabbitMQ2.8.6 (Simon MacMullen)
  41. Re: Clustering (Tim Watson)
  42. Re: STOMP 1.0 adapter escapes colon as \c (STOMP 1.1 style)
      (Emile Joubert)
  43. Re: STOMP plugin - durable subscription limitation (Emile Joubert)
  44. Re: Channel thread-safety (Tim Watson)
  45. Re: Channel thread-safety (Tim Watson)


----------------------------------------------------------------------

Message: 1
Date: Mon, 22 Oct 2012 12:13:31 +0100
From: Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] intenal error when connecting from
rabbitmq-c
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: &quot;Gotthard, Petr&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Petr.Gotthard at Honeywell.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50852A5B.2070606 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=windows-1252; format=flowed

Petr,

On 22/10/12 11:52, Gotthard, Petr wrote:
&gt;<i> While the rabbitmq-c on one machine is fine, on another machine I?m
</I>&gt;<i> getting ?server connection error 541, message: INTERNAL_ERROR? and the
</I>&gt;<i> rabbitmq log contains the following entries:
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 22-Oct-2012::12:38:17 ===
</I>&gt;<i>
</I>&gt;<i> AMQP connection &lt;0.2315.0&gt;, channel 1 - error:
</I>&gt;<i>
</I>&gt;<i> {{badmatch,{undefined,&lt;&lt;40,17,97,112,112,108,105,99,97,116,105,111,110,47,
</I>&gt;<i>
</I>&gt;<i>                          110,111,116,97,109&gt;&gt;}},
</I>&gt;<i>
</I>&gt;<i> [{rabbit_framing_amqp_0_9_1,decode_properties,2},
</I>
Looks like the basic.publish headers/properties are invalid. I suggest 
you try sending a message without any headers/properties. If that works 
then carefully check your code that is constructing the 
amqp_basic_properties_t. In particularly, make sure that you are setting 
the flags correctly. See e.g. 
<A HREF="http://comments.gmane.org/gmane.comp.networking.rabbitmq.general/2717">http://comments.gmane.org/gmane.comp.networking.rabbitmq.general/2717</A>

Regards,

Matthias.


------------------------------

Message: 2
Date: Mon, 22 Oct 2012 12:21:29 +0100
From: Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Upgrading RabbitMQ2.8.6
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50852C39.8040704 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 19/10/12 10:24, PSL 88506 wrote:
&gt;<i> When i try to understand about installation procedure for 2.8.6
</I>&gt;<i>
</I>&gt;<i> All links are getting redirected to same page with following URL:
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/download.html">http://www.rabbitmq.com/download.html</A>
</I>
Links will always point to the latest version, which is 2.8.7. I 
recommend you install that rather than 2.8.6. If you really must install 
2.8.6, follow the &quot;Older Versions / Download&quot; link on the download.html 
page.

Regards,

Matthias.


------------------------------

Message: 3
Date: Mon, 22 Oct 2012 12:35:10 +0100
From: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Rabbit Management HTTP API issue -
deleted queues linger in API responses
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Matt Campbell &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt at soupmatt.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50852F6E.5010407 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

No - this certainly should not be happening.

When this is happening, do you see the queues in &quot;rabbitmqctl list_queues&quot;?

Also, can you post logs (including the sasl log) somewhere?

Cheers, Simon

On 18/10/12 19:13, Matt Campbell wrote:
&gt;<i> On Thursday, October 18, 2012 12:20:54 PM UTC-5, Matt Campbell wrote:
</I>&gt;<i>
</I>&gt;<i>     RabbitMQ version: 2.8.7
</I>&gt;<i>     Erlang version: R14B04
</I>&gt;<i>
</I>&gt;<i>     We are seeing an issue where queues that have been deleted using the
</I>&gt;<i>     amqp basic.delete command tend to linger in the Management console
</I>&gt;<i>     and in calls to the HTTP API. This is an issue for us as we are
</I>&gt;<i>     using that API to discover dynamically created and deleted queues.
</I>&gt;<i>     Can anyone confirm this behavior or offer a suggestion as to how we
</I>&gt;<i>     can mitigate it?
</I>&gt;<i>
</I>&gt;<i>     Thanks,
</I>&gt;<i>
</I>&gt;<i>     Matt
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I learned some more about what is going on. If I try to redeclare the
</I>&gt;<i> queue, rabbit returns an error unless I match the queue arguments, as I
</I>&gt;<i> would expect, but then if I go to delete the queue, I get an error
</I>&gt;<i> saying it doesn't exist.
</I>&gt;<i>
</I>&gt;<i> Our setup for this environment is a single node running in cluster mode
</I>&gt;<i> (we are planning on adding a second node in the near future) and all our
</I>&gt;<i> queues are declared with x-ha-policy set to all.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, VMware


------------------------------

Message: 4
Date: Mon, 22 Oct 2012 12:44:47 +0100
From: Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] PHP Client Library
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">508531AF.4020509 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Andre,

On 22/10/12 08:23, Andre Torgal wrote:
&gt;<i> will RabbitMQ list the PECL library in the Get Started page if a repo
</I>&gt;<i> with examples exists for it.
</I>
Yes.

Matthias.



------------------------------

Message: 5
Date: Mon, 22 Oct 2012 18:34:33 +0530
From: chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt;
Subject: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CAB0ZxM5P5GDa0j3KbgG14SQqU+Sj8pkppfUp_1q_TgSeX5oEgg at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hi,
I have two nodes clustered together , but when i stop a node using
rabbbitmqctl stop command and start the broker with rabbitmq-server
detached commnad
now when  i see the cluster status it shows only one broker running while
both of the brokers are running fine.
can anybody explain this or tell me what mistake i am making?

Thanks



-- 
Cheten  Dev

B.Tech Final Year
Dept. of Electrical Engg.
IIT Delhi, New Delhi
ph 8527333215
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/5fd4d601/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/5fd4d601/attachment.html</A>&gt;

------------------------------

Message: 6
Date: Mon, 22 Oct 2012 14:09:38 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">578609C0-3747-4EA0-9105-A1F954D27660 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=iso-8859-1

Works for me! ;)

What version(s) of rabbit are you running and can you please post the exact commands you're using to start each node, to stop one of the applications (not the node) and cluster it with the other one and then finally the command you're using to start again.

Cheers
Tim

On 22 Oct 2012, at 14:04, chetan dev wrote:

&gt;<i> Hi,
</I>&gt;<i> I have two nodes clustered together , but when i stop a node using rabbbitmqctl stop command and start the broker with rabbitmq-server detached commnad
</I>&gt;<i> now when  i see the cluster status it shows only one broker running while both of the brokers are running fine.
</I>&gt;<i> can anybody explain this or tell me what mistake i am making?
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Cheten  Dev 
</I>&gt;<i> 
</I>&gt;<i> B.Tech Final Year
</I>&gt;<i> Dept. of Electrical Engg.
</I>&gt;<i> IIT Delhi, New Delhi
</I>&gt;<i> ph 8527333215
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>


------------------------------

Message: 7
Date: Mon, 22 Oct 2012 18:47:02 +0530
From: chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CAB0ZxM6iN1av-2AdBgWVdZB-bF3hrDER8651s90JoQrr5tRCaQ at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hi,

Thanks for your reply i am using 2.8.6
here is what i am doing
1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered
2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server start commnad
4. and then i check cluster status it shows only one running node
Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
[{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
 {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
...done.

On Mon, Oct 22, 2012 at 6:39 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:

&gt;<i> Works for me! ;)
</I>&gt;<i>
</I>&gt;<i> What version(s) of rabbit are you running and can you please post the
</I>&gt;<i> exact commands you're using to start each node, to stop one of the
</I>&gt;<i> applications (not the node) and cluster it with the other one and then
</I>&gt;<i> finally the command you're using to start again.
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i> On 22 Oct 2012, at 14:04, chetan dev wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; I have two nodes clustered together , but when i stop a node using
</I>&gt;<i> rabbbitmqctl stop command and start the broker with rabbitmq-server
</I>&gt;<i> detached commnad
</I>&gt;<i> &gt; now when  i see the cluster status it shows only one broker running
</I>&gt;<i> while both of the brokers are running fine.
</I>&gt;<i> &gt; can anybody explain this or tell me what mistake i am making?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Cheten  Dev
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; B.Tech Final Year
</I>&gt;<i> &gt; Dept. of Electrical Engg.
</I>&gt;<i> &gt; IIT Delhi, New Delhi
</I>&gt;<i> &gt; ph 8527333215
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Cheten  Dev

B.Tech Final Year
Dept. of Electrical Engg.
IIT Delhi, New Delhi
ph 8527333215
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/6d857aaa/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/6d857aaa/attachment-0001.htm</A>&gt;

------------------------------

Message: 8
Date: Mon, 22 Oct 2012 16:47:04 +0300
From: Artsiom &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">u2.storm at gmail.com</A>&gt;
Subject: [rabbitmq-discuss] Adding slave for mirrored queue
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50854E58.50807 at gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;windows-1251&quot;; Format=&quot;flowed&quot;

Hi all.

Let me ask question regarding mirrored queues.
I have a cluster of 8 nodes(node01, node02, node03 ... and etc.).The 
queue is declared as HA withfollowing params:
x-ha-policy: nodes
x-ha-policy: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node01</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node02</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node03</A>

Is it possible to add more slavesfor that queuew\o deleting and 
redeclaring. If possible, what side-effects are expected?
Will other consumers be able to continue receive messages from that 
queue or they'll get cancellation consumer notification?
I don't want all nodes to be mirrors of that queue (it generates too 
much network traffic).

P.S. Does rabbitmq-c support consumer cancellation notification feature?

--
Best regards,
Artsiom

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/1d289091/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/1d289091/attachment-0001.htm</A>&gt;

------------------------------

Message: 9
Date: Mon, 22 Oct 2012 15:21:42 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">F0BE6B42-22CA-4517-8858-C402166ADF37 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;

Yes but how did you cluster them on the first place? You do realise that rabbit nodes are not clustered automatically?



On 22 Oct 2012, at 14:17, chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Thanks for your reply i am using 2.8.6
</I>&gt;<i> here is what i am doing 
</I>&gt;<i> 1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered 
</I>&gt;<i> 2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
</I>&gt;<i> 3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server start commnad
</I>&gt;<i> 4. and then i check cluster status it shows only one running node  
</I>&gt;<i> Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;<i> [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;<i>  {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;<i> ...done.
</I>&gt;<i> 
</I>&gt;<i> On Mon, Oct 22, 2012 at 6:39 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i> Works for me! ;)
</I>&gt;<i> 
</I>&gt;<i> What version(s) of rabbit are you running and can you please post the exact commands you're using to start each node, to stop one of the applications (not the node) and cluster it with the other one and then finally the command you're using to start again.
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> Tim
</I>&gt;<i> 
</I>&gt;<i> On 22 Oct 2012, at 14:04, chetan dev wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; I have two nodes clustered together , but when i stop a node using rabbbitmqctl stop command and start the broker with rabbitmq-server detached commnad
</I>&gt;<i> &gt; now when  i see the cluster status it shows only one broker running while both of the brokers are running fine.
</I>&gt;<i> &gt; can anybody explain this or tell me what mistake i am making?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Cheten  Dev
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; B.Tech Final Year
</I>&gt;<i> &gt; Dept. of Electrical Engg.
</I>&gt;<i> &gt; IIT Delhi, New Delhi
</I>&gt;<i> &gt; ph 8527333215
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Cheten  Dev 
</I>&gt;<i> 
</I>&gt;<i> B.Tech Final Year
</I>&gt;<i> Dept. of Electrical Engg.
</I>&gt;<i> IIT Delhi, New Delhi
</I>&gt;<i> ph 8527333215
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/f2244317/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/f2244317/attachment-0001.htm</A>&gt;

------------------------------

Message: 10
Date: Mon, 22 Oct 2012 15:24:12 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Adding slave for mirrored queue
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&quot;
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">81DBF17F-B324-485B-82DB-151415D01FDA at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;

Hi

On 22 Oct 2012, at 14:47, Artsiom &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">u2.storm at gmail.com</A>&gt; wrote:

&gt;<i> Hi all.
</I>&gt;<i> 
</I>&gt;<i> Let me ask question regarding mirrored queues.
</I>&gt;<i> I have a cluster of 8 nodes(node01, node02, node03 ... and etc.). The queue is                             declared as HA with following params:
</I>&gt;<i> x-ha-policy: nodes
</I>&gt;<i> x-ha-policy: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node01</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node02</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node03</A>
</I>&gt;<i> 
</I>&gt;<i> Is it possible to add more slaves for that queue w\o deleting and redeclaring.
</I>
In the current version of rabbit no. In the next feature release 3.0 yes, because ha is controlled by policy rather than at queue declaration time and can be changed at runtime. Check out next.rabbitmq.com for more info.

&gt;<i> If possible, what side-effects are expected?
</I>&gt;<i> Will other consumers be able to continue receive messages from that queue or they'll                                                           get cancellation consumer notification?
</I>&gt;<i> I don't want all nodes to be mirrors of that queue (it generates too much network traffic).
</I>&gt;<i> 
</I>&gt;<i> P.S. Does rabbitmq-c support consumer cancellation notification feature?
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Best regards,
</I>&gt;<i> Artsiom
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/7b1050fe/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/7b1050fe/attachment-0001.htm</A>&gt;

------------------------------

Message: 11
Date: Mon, 22 Oct 2012 17:52:16 +0300
From: Artsiom &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">u2.storm at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Adding slave for mirrored queue
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50855DA0.20008 at gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;windows-1251&quot;; Format=&quot;flowed&quot;

Tim, thanks for response.

Does this feature available in nightly builds?
Could you uncover the mystery, when rabbitmq 3.0 release is expected? :)


On 10/22/2012 05:24 PM, Tim Watson wrote:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> On 22 Oct 2012, at 14:47, Artsiom &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">u2.storm at gmail.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">u2.storm at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi all.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Let me ask question regarding mirrored queues.
</I>&gt;&gt;<i> I have a cluster of 8 nodes(node01, node02, node03 ... and etc.).The 
</I>&gt;&gt;<i> queue is declared as HA withfollowing params:
</I>&gt;&gt;<i> x-ha-policy: nodes
</I>&gt;&gt;<i> x-ha-policy: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node01</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node02</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node03</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is it possible to add more slavesfor that queuew\o deleting and 
</I>&gt;&gt;<i> redeclaring.
</I>&gt;<i>
</I>&gt;<i> In the current version of rabbit no. In the next feature release 3.0 
</I>&gt;<i> yes, because ha is controlled by policy rather than at queue 
</I>&gt;<i> declaration time and can be changed at runtime. Check out 
</I>&gt;<i> next.rabbitmq.com &lt;<A HREF="http://next.rabbitmq.com">http://next.rabbitmq.com</A>&gt; for more info.
</I>&gt;<i>
</I>&gt;&gt;<i> If possible, what side-effects are expected?
</I>&gt;&gt;<i> Will other consumers be able to continue receive messages from that 
</I>&gt;&gt;<i> queue or they'll get cancellation consumer notification?
</I>&gt;&gt;<i> I don't want all nodes to be mirrors of that queue (it generates too 
</I>&gt;&gt;<i> much network traffic).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> P.S. Does rabbitmq-c support consumer cancellation notification feature?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i> Artsiom
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> 
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/2dd0a326/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/2dd0a326/attachment-0001.htm</A>&gt;

------------------------------

Message: 12
Date: Mon, 22 Oct 2012 16:30:54 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Adding slave for mirrored queue
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;,
Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">86B6A351-B208-4F74-955F-6897271F6445 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;


Artisom,

On 22 Oct 2012, at 15:52, Artsiom &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">u2.storm at gmail.com</A>&gt; wrote:

&gt;<i> Tim, thanks for response.
</I>&gt;<i> 
</I>&gt;<i> Does this feature available in nightly builds?
</I>
Yes it is!

&gt;<i> Could you uncover the mystery, when rabbitmq 3.0 release is expected? :)
</I>&gt;<i> 
</I>&gt;<i> 
</I>
LOL not really, but most of the tickets associated with it are complete so it should be coming soon!

&gt;<i> On 10/22/2012 05:24 PM, Tim Watson wrote:
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 22 Oct 2012, at 14:47, Artsiom &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">u2.storm at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi all.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Let me ask question regarding mirrored queues.
</I>&gt;&gt;&gt;<i> I have a cluster of 8 nodes(node01, node02, node03 ... and etc.). The queue is declared as HA with following params:
</I>&gt;&gt;&gt;<i> x-ha-policy: nodes
</I>&gt;&gt;&gt;<i> x-ha-policy: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node01</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node02</A>, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node03</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Is it possible to add more slaves for that queue w\o deleting and redeclaring.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> In the current version of rabbit no. In the next feature release 3.0 yes, because ha is controlled by policy rather than at queue declaration time and can be changed at runtime. Check out next.rabbitmq.com for more info.
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> If possible, what side-effects are expected?
</I>&gt;&gt;&gt;<i> Will other consumers be able to continue receive messages from that queue or they'll get cancellation consumer notification?
</I>&gt;&gt;&gt;<i> I don't want all nodes to be mirrors of that queue (it generates too much network traffic).
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> P.S. Does rabbitmq-c support consumer cancellation notification feature?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Best regards,
</I>&gt;&gt;&gt;<i> Artsiom
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/1b7d75e5/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/1b7d75e5/attachment-0001.htm</A>&gt;

------------------------------

Message: 13
Date: Mon, 22 Oct 2012 09:07:36 -0700
From: Matt Long &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt at crocodoc.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Upgrading RabbitMQ2.8.6
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;CAFX3A=1HJW68iyzJNE15QxwUyP-HG=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">QcC711ueWV68-JahxwsQ at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

While we're on the topic of older versions, it appears they are removed
from the RabbitMQ APT repository; only the newest version is ever
available. Is this done on purpose? It has led to some issues for us since
we specify explicit package versions in our provisioning system and
occasionally they'll no longer be there!

Thanks,
Matt

On Mon, Oct 22, 2012 at 4:21 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> On 19/10/12 10:24, PSL 88506 wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> When i try to understand about installation procedure for 2.8.6
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All links are getting redirected to same page with following URL:
</I>&gt;&gt;<i> <A HREF="http://www.rabbitmq.com/**download.html&lt;http://www.rabbitmq.com/download.html">http://www.rabbitmq.com/**download.html&lt;http://www.rabbitmq.com/download.html</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Links will always point to the latest version, which is 2.8.7. I recommend
</I>&gt;<i> you install that rather than 2.8.6. If you really must install 2.8.6,
</I>&gt;<i> follow the &quot;Older Versions / Download&quot; link on the download.html page.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;<i>
</I>


-- 
Matt Long
Cofounder and Lead Developer
crocodoc.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/b9f3889b/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/b9f3889b/attachment-0001.htm</A>&gt;

------------------------------

Message: 14
Date: Mon, 22 Oct 2012 17:13:41 +0100
From: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Adding slave for mirrored queue
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">508570B5.5000501 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 22/10/12 14:47, Artsiom wrote:
&gt;<i> Is it possible to add more slavesfor that queuew\o deleting and
</I>&gt;<i> redeclaring.
</I>
As Tim notes, not until 3.0.

&gt;<i> If possible, what side-effects are expected?
</I>
The same as with adding a new cluster node with x-ha-policy:all in 2.8.x 
- the new mirror will be initially unsynchronised and will become 
synchronised when all old messages have been consumed. Producers and 
consumers won't see any side effects when the new mirror comes on line.

&gt;<i> Will other consumers be able to continue receive messages from that
</I>&gt;<i> queue or they'll get cancellation consumer notification?
</I>
They will continue to receive messages.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware


------------------------------

Message: 15
Date: Mon, 22 Oct 2012 15:05:42 -0400
From: Laurent Vauthrin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>&gt;
Subject: [rabbitmq-discuss] Channel thread-safety
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CAM8Y7yBqrHE8kvF38htNLnqZ3CSCGqkUQLJoaTwDK0p0qfWpoQ at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hello,

I've done some searching but can't seem to answer a couple of questions.
 In the API guide, I saw:

&quot;Channel instances are safe for use by multiple threads. Requests into a
Channel are serialized, with only one thread being able to run a command on
the Channel at a time. Even so, applications should prefer using a Channel
per thread instead of sharing the same Channel across multiple threads.&quot;

And in the Javadocs for Channel, I saw:

&quot;While a Channel can be used by multiple threads, it's important to ensure
that only one thread executes a command at once. Concurrent execution of
commands will likely cause an UnexpectedFrameError to be thrown.&quot;

Currently, our service shares the same channel across each request thread
and we synchronize the call to 'basicPublish'.  Looking at the basicPublish
code, it looks like the sequence number member variable is not thread safe
but it doesn't affect us since we're not ack'ing our messages.

My questions are:
1. Should we be using a channel per thread considering that we're
synchronizing the basicPublish call anyway?
2. Can we just share one channel across all threads and not synchronize the
call to basicPublish?

Thanks,
Laurent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/ab4de8ca/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/ab4de8ca/attachment-0001.htm</A>&gt;

------------------------------

Message: 16
Date: Tue, 23 Oct 2012 00:58:33 +0530
From: chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;CAB0ZxM7=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">S7ZnhkrAYhjzZURJO07KyMmfqap+gV67eTUEQvJDuA at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hi,

Yes i clustered them as given on rabbitmq clustering documentation for e.g
on the first place both nodes are running
now i stopped app using rabbitmqctl stop_app then i reset that node than i
clusterd that node with another using rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
then i started the node using rabbitmqctl start_app
when i checked the cluster status it was showing fine then i did as i
mentioned earlier

Thanks

On Mon, Oct 22, 2012 at 7:51 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;wrote:

&gt;<i> Yes but how did you cluster them on the first place? You do realise that
</I>&gt;<i> rabbit nodes are not clustered automatically?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 22 Oct 2012, at 14:17, chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Thanks for your reply i am using 2.8.6
</I>&gt;<i> here is what i am doing
</I>&gt;<i> 1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered
</I>&gt;<i> 2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
</I>&gt;<i> 3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server start
</I>&gt;<i> commnad
</I>&gt;<i> 4. and then i check cluster status it shows only one running node
</I>&gt;<i> Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;<i> [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;<i>  {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;<i> ...done.
</I>&gt;<i>
</I>&gt;<i> On Mon, Oct 22, 2012 at 6:39 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Works for me! ;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What version(s) of rabbit are you running and can you please post the
</I>&gt;&gt;<i> exact commands you're using to start each node, to stop one of the
</I>&gt;&gt;<i> applications (not the node) and cluster it with the other one and then
</I>&gt;&gt;<i> finally the command you're using to start again.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers
</I>&gt;&gt;<i> Tim
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 22 Oct 2012, at 14:04, chetan dev wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Hi,
</I>&gt;&gt;<i> &gt; I have two nodes clustered together , but when i stop a node using
</I>&gt;&gt;<i> rabbbitmqctl stop command and start the broker with rabbitmq-server
</I>&gt;&gt;<i> detached commnad
</I>&gt;&gt;<i> &gt; now when  i see the cluster status it shows only one broker running
</I>&gt;&gt;<i> while both of the brokers are running fine.
</I>&gt;&gt;<i> &gt; can anybody explain this or tell me what mistake i am making?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Cheten  Dev
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; B.Tech Final Year
</I>&gt;&gt;<i> &gt; Dept. of Electrical Engg.
</I>&gt;&gt;<i> &gt; IIT Delhi, New Delhi
</I>&gt;&gt;<i> &gt; ph 8527333215
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Cheten  Dev
</I>&gt;<i>
</I>&gt;<i> B.Tech Final Year
</I>&gt;<i> Dept. of Electrical Engg.
</I>&gt;<i> IIT Delhi, New Delhi
</I>&gt;<i> ph 8527333215
</I>&gt;<i>
</I>&gt;<i>  _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Cheten  Dev

B.Tech Final Year
Dept. of Electrical Engg.
IIT Delhi, New Delhi
ph 8527333215
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/025d40da/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/025d40da/attachment-0001.htm</A>&gt;

------------------------------

Message: 17
Date: Mon, 22 Oct 2012 23:46:23 +0400
From: Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Channel thread-safety
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;CAE3HoVTr6esOVC4A6PkKBiZm__PO5=uB-7Hj=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">oXyKN_5eDtdbg at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;

2012/10/22 Laurent Vauthrin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>&gt;

&gt;<i> My questions are:
</I>&gt;<i> 1. Should we be using a channel per thread considering that we're
</I>&gt;<i> synchronizing the basicPublish call anyway?
</I>&gt;<i>
</I>
Yes. Channels are just integer on the wire and a little bit of memory
allocated on the JVM heap. They are very cheap
for all intents and purposes and you are much more likely to max out your
OS and hardware resources (assuming 1 channel per JVM thread) before
you run into issues with channel objects.


&gt;<i> 2. Can we just share one channel across all threads and not synchronize
</I>&gt;<i> the call to basicPublish?
</I>&gt;<i>
</I>

No. The real issue with shared channels is that large messages will result
in multiple protocol frames being sent
for a single basicPublish operation. When publishing on the same channel
from multiple threads, this may result
in frames being delivered out of order:

T1 =&gt; basicPublish =&gt; [Frame11] [Frame12] [Frame13]
T2 =&gt; basicPublish =&gt; [Frame21] [Frame22] [Frame23]

may result in the following delivery order, all on the same channel:

[Frame11][Frame21][Frame12][Frame13][Frame22][Frame23]

and because all frames are on the same channel, RabbitMQ won't be able to
tell how to reconstruct your messages.
-- 
MK

<A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
<A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/9625fb67/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/9625fb67/attachment-0001.htm</A>&gt;

------------------------------

Message: 18
Date: Mon, 22 Oct 2012 21:50:04 +0200
From: Desta Haileselassie Hagos &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">deshai-0 at student.ltu.se</A>&gt;
Subject: Re: [rabbitmq-discuss] RabbitMQ + Messages between virtual
machines and physical hosts on a cloud
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID:
&lt;CAKiRAqUZZyg4bqvsGEeH8a-+wwS0m=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">8sC9tJJ6JUMB1T1V1eQg at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Dear Sir/Madam,

The problem is that I am not able to send and receive messages between the
Virtual machines and the physical hosts on my cloud. I want to receive full
information by manipulating the VMs APIs if it is possible.


&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/c8eb2876/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/c8eb2876/attachment-0001.htm</A>&gt;

------------------------------

Message: 19
Date: Tue, 23 Oct 2012 09:10:05 +1300
From: Brett Cameron &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">brett.r.cameron at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] RabbitMQ + Messages between virtual
machines and physical hosts on a cloud
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;CALPqkipaNufyui=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">8F522qDrX1A4P66FwtQ_Z4jWrgz+3Lv9ToA at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Desta,

Have you looked at the security profile associated with your VM's? Is it
possible that port 5672 is blocked?

Brett

On Tue, Oct 23, 2012 at 8:50 AM, Desta Haileselassie Hagos &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">deshai-0 at student.ltu.se</A>&gt; wrote:

&gt;<i> Dear Sir/Madam,
</I>&gt;<i>
</I>&gt;<i> The problem is that I am not able to send and receive messages between the
</I>&gt;<i> Virtual machines and the physical hosts on my cloud. I want to receive full
</I>&gt;<i> information by manipulating the VMs APIs if it is possible.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/1f36fb06/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/1f36fb06/attachment-0001.htm</A>&gt;

------------------------------

Message: 20
Date: Mon, 22 Oct 2012 21:26:58 +0100
From: Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">5085AC12.5060409 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 22/10/12 20:28, chetan dev wrote:
&gt;&gt;<i>     here is what i am doing
</I>&gt;&gt;<i>     1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered
</I>
yes, but...

&gt;&gt;<i> i clustered them as given on rabbitmq clustering documentation for e.g
</I>&gt;&gt;<i> on the first place both nodes are running
</I>&gt;&gt;<i> now i stopped app using rabbitmqctl stop_app then i reset that node than
</I>&gt;&gt;<i> i clusterd that node with another using rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;&gt;<i> then i started the node using rabbitmqctl start_app
</I>&gt;&gt;<i> when i checked the cluster status it was showing fine then i did as i
</I>&gt;&gt;<i> mentioned earlier
</I>
That will make <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> a *ram* node. To make both nodes disk 
nodes the node itself would have to be mentioned in the cluster command 
too, i.e. 'rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHAR</A> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>'.

&gt;&gt;<i>     2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
</I>&gt;&gt;<i>     3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server
</I>&gt;&gt;<i>     start commnad
</I>
You have just stopped and restarted the clusters' only disk node. Rabbit 
clusters won't function properly if they have only ram nodes.

&gt;&gt;<i>     4. and then i check cluster status it shows only one running node
</I>&gt;&gt;<i>     Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;&gt;<i>     [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;&gt;<i>      {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;&gt;<i>     ...done.
</I>
Try running that command against <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.</A> I suspect it will tell 
you that it only knows about itself.

Anyway, I suggest you change your cluster configuration s.t. both nodes 
are disk nodes.

Regards,

Matthias.


------------------------------

Message: 21
Date: Mon, 22 Oct 2012 13:48:36 -0700
From: Dharshan Rangegowda &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dharshanr at scalegrid.net</A>&gt;
Subject: Re: [rabbitmq-discuss] {SSL upgrade error, timeout}
To: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;CAC3-Q1RBiLnjMCtuACu-L4_ZM3H7P6+B=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">LPOyvzHOWQ6yaVsgQ at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;

Hi Emile,

I ran through the troubleshooting wizard and the openssl connection test
passes - so that makes me think it is not a network issue. However my java
client still fails with the &quot;Remote host closed connection during
handshake&quot; error. I have included the results of the connection test below.
Any other thoughts on how I can debug this?

C:\temp&gt;openssl s_client -connect 199.71.180.59:5671 -CAfile ssltest.pem
CONNECTED(00000003)
depth=1 /CN=ScaleGridCA
verify return:1
depth=0 /CN=i-19-483-VM/O=server
verify return:1
---
Certificate chain
 0 s:/CN=i-19-483-VM/O=server
   i:/CN=ScaleGridCA
 1 s:/CN=ScaleGridCA
   i:/CN=ScaleGridCA
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIC5zCCAc+gAwIBAgIBNDANBgkqhkiG9w0BAQUFADAWMRQwEgYDVQQDEwtTY2Fs
ZUdyaWRDQTAeFw0xMjEwMjIxNjIxNTJaFw0xMzEwMjIxNjIxNTJaMCcxFDASBgNV
BAMTC2ktMTktNDgzLVZNMQ8wDQYDVQQKEwZzZXJ2ZXIwggEiMA0GCSqGSIb3DQEB
AQUAA4IBDwAwggEKAoIBAQDX7e0Jql/WTD7OUDTIQmg+igwhiVO+17QBuDkgSsQ/
9nRJSCZzEKC9guH7V+Veq8UG9G2brqwF10jzuZSOq3CGaBWH+F5KE/U+q2yuR3kt
sOLz6wgMgYnobI1SWjvlkbwYKhgnv689m58Ub5lTISB3aKwT4C0ilnWBbF0v61mq
TFtjwDRAbCPXl9HwbBFoeLpTsiRu76VXWkA6pv9Ndl4hhcg2YLGwWAOdZO2/NUCB
QjqrHOir9ekjmpjWMQmWakN61/ckFuuFtGLOqrcujbRuVpAFFWGd53/quCZ+WKNw
81ZdafFnUSI8ioK2sHGQFxsQKNkpaRuE2/YbrLam+4HPAgMBAAGjLzAtMAkGA1Ud
EwQCMAAwCwYDVR0PBAQDAgUgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMA0GCSqGSIb3
DQEBBQUAA4IBAQBqBdvs5eHfVbh8jtp3KF/Q/UG/RtMBrkBnlFWLdBKbhYbWCC1K
5VncFIpQQ2K44G+RWaqMpPgwj4AZso83/JXn11b52ZxGdR8iogrAX4vWw41CNKfr
VX0jj4/TPlwFvdS9Jzd3w/NAvLgQ1JXZdBaWxAagfXl8++5nVdC94sj4GNkrCwyN
r4zBiA6BOsmznVLBLjpoj3WLlrJDGZCTv+PSHDplZtuquDyl37PLOG6F2WUFAxaL
vhj7zKVTGIj7ESXuNYKnTSyLEkxvrlWdKooJKmH+v5xxEM6H2PqFcS/LGwIaUuxc
26AKWBnVcK+Pd86765KirNUwf7Fm2ChKwj9M
-----END CERTIFICATE-----
subject=/CN=i-19-483-VM/O=server
issuer=/CN=ScaleGridCA
---
No client certificate CA names sent
---
SSL handshake has read 1632 bytes and written 444 bytes
---
New, TLSv1/SSLv3, Cipher is AES256-SHA
Server public key is 2048 bit
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : AES256-SHA
    Session-ID:
A0F1A911ED174A49B8AACDD54C3F21C1FD332949D892EEDABF84479DC21BB22D
    Session-ID-ctx:
    Master-Key:
8FCF38B3652F0A2E6BA8EEBACF2F7387C84416DDCC365A4FF8A4A4FA4B06343DEE463499007DDD03E1155A4A4D8317EE
    Key-Arg   : None
    Start Time: 1350938613
    Timeout   : 300 (sec)
    Verify return code: 0 (ok)
---
12345678
AMQP    ?closed

On Mon, Oct 22, 2012 at 2:24 AM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> On 21/10/12 21:23, dharshanr wrote:
</I>&gt;<i> &gt; =ERROR REPORT==== 21-Oct-2012::09:12:49 ===
</I>&gt;<i> &gt; error on AMQP connection &lt;0.7614.0&gt;: {ssl_upgrade_error,timeout}
</I>&gt;<i>
</I>&gt;<i> Are you sure the problem is not network-related?
</I>&gt;<i>
</I>&gt;<i> &gt; The certs are self signed certs and not trusted. Any thoughts on how I
</I>&gt;<i> &gt; can debug this error?
</I>&gt;<i>
</I>&gt;<i> It is strange that a working setup stops working suddenly. The tips in
</I>&gt;<i> the SSL troubleshooting guide might provide more debugging information:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/troubleshooting-ssl.html">http://www.rabbitmq.com/troubleshooting-ssl.html</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
regards,
Dharshan.
www.scalegrid.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/75aee49f/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/75aee49f/attachment-0001.htm</A>&gt;

------------------------------

Message: 22
Date: Mon, 22 Oct 2012 22:14:40 +0000
From: Elizabeth Liao &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eliao at seegrid.com</A>&gt;
Subject: Re: [rabbitmq-discuss] nodename variable and mnesia directory
To: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;, Discussions about RabbitMQ
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">E94F626F5C43D14F8B8479C5EBD79038A85DDCE1 at vmexchange02.seegrid.local</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;

Hi,

This is what I tried
 * I start running rabbit with no NODENAME set and entered the following commands
  * rabbitmqctl stop
  * /etc/init.d/rabbitmq-server stop
  * epmd -kill ( Is this correct? I didn't see a restart in the documentation )
  * In /etc/hosts changed line from 127.0.1.1 &lt;oldhostname&gt; &lt;oldhostname&gt;.localdomain -&gt; 127.0.1.1 &lt;newhostname&gt; &lt;newhostname&gt;.localdomain
  * in /etc/sysconfig/network changed HOSTNAME=&lt;oldhostname&gt; -&gt; HOSTNAME=&lt;newhostname&gt;
  * /bin/hostname &lt;newhostname&gt;
 * /etc/init.d/rabbitmq-server start

The error I get is this:
Activating RabbitMQ plugins ...
3 plugins activated:
* amqp_client-2.8.6
* erlando-2.8.6
* rabbitmq_shovel-2.8.6

ERROR: epmd error for host &quot;&lt;oldhostname&gt;&quot;: nxdomain (non-existing domain)



________________________________________
From: Tim Watson [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>]
Sent: Monday, October 22, 2012 6:41 AM
To: Discussions about RabbitMQ
Cc: Elizabeth Liao
Subject: Re: [rabbitmq-discuss] nodename variable and mnesia directory

Hi again,

On 20 Oct 2012, at 10:52, Tim Watson wrote:

&gt;<i> Hi Liz,
</I>&gt;<i>
</I>&gt;<i> Sorry i wasn't aware of the context. What Ian recommended should not be necessary, though I'll follow up with him on Monday to try and figure out why he needed to do that.
</I>&gt;<i>
</I>&gt;<i> Once you change the hostname you,ll possibly need to restart epmd and restart your rabbit, but you shouldn't need to change the node name from say rabbit to hare.
</I>&gt;<i>
</I>
Were you able to try this again (changing only the host name but not the node name) and did it work for you? If not I'd like to know so we can investigate.

Cheers
Tim

&gt;<i> Cheers
</I>&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 19 Oct 2012, at 19:44, Elizabeth Liao &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eliao at seegrid.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Tim,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm going to back up a bit because it seems that I've misunderstood something previously.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The first thing I'm going to say is that this isn't really a desirable
</I>&gt;&gt;<i> state of affairs. Why do you need to change NODENAME at all, just
</I>&gt;&gt;<i> because the host name has changed? This seems like an odd step to me -
</I>&gt;&gt;<i> can you explain the rationale behind it?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I had an earlier problem changing the hostname and restarting the rabbitmq-server. The proposed fix was to add the NODENAME variable which I'm guessing was not right? :
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-July/021435.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-July/021435.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Can you explain a bit more about this 'bug' please? What exactly is
</I>&gt;&gt;<i> going wrong?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The bug is on our end where the NODENAME is set to an empty string. Of course this is moot if NODENAME doesn't even have to be set in the first place.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Liz
</I>&gt;&gt;<i> ________________________________________
</I>&gt;&gt;<i> From: Tim Watson [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>]
</I>&gt;&gt;<i> Sent: Friday, October 19, 2012 12:48 PM
</I>&gt;&gt;<i> To: Discussions about RabbitMQ
</I>&gt;&gt;<i> Cc: Elizabeth Liao
</I>&gt;&gt;<i> Subject: Re: [rabbitmq-discuss] nodename variable and mnesia directory
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 10/19/2012 03:41 PM, Elizabeth Liao wrote:
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We are currently running rabbitmq on a system where there is a need to change the hostname occasionally.  Right now, when the hostname is changed, we also update the NODENAME variable in the rabbitmq-env.conf file.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The first thing I'm going to say is that this isn't really a desirable
</I>&gt;&gt;<i> state of affairs. Why do you need to change NODENAME at all, just
</I>&gt;&gt;<i> because the host name has changed? This seems like an odd step to me -
</I>&gt;&gt;<i> can you explain the rationale behind it?
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The problem we're having right now is that due to a bug when setting up the rabbitmq-env.conf file, sometimes the NODENAME variable exists but is not set to anything ( NODENAME=) so rabbit never successfully starts up.  Even after setting the NODENAME variable to the hostname, rabbit still doesn't start up properly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can you explain a bit more about this 'bug' please? What exactly is
</I>&gt;&gt;<i> going wrong?
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The only way that I could find to recover from this situation without killing the erlang process, was to also set a MNESIA_DIR variable. After I did that, once the NODENAME was set to the correct hostname, rabbit started up properly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Now this makes no sense at all to me. If you are trying to recover
</I>&gt;&gt;<i> 'without killing the erlang process' then how are you planning on
</I>&gt;&gt;<i> changing the NODENAME? Once an erlang node has become part of a
</I>&gt;&gt;<i> distributed system, you cannot arbitrarily change the node's name
</I>&gt;&gt;<i> without restarting the net_kernel AFAIK so I can't see how this is even
</I>&gt;&gt;<i> possible. Also, because you're stating that 'rabbit started up properly'
</I>&gt;&gt;<i> I'm assuming that you have in fact taken the node offline (using
</I>&gt;&gt;<i> `rabbitmqctl stop` or one of the various service scripts that invokes
</I>&gt;&gt;<i> it) and that you are now starting the node again. The rabbit startup
</I>&gt;&gt;<i> scripts (and associated infrastructure) is not set up to handle changing
</I>&gt;&gt;<i> the name of a node post-installation in this manner, so I would not
</I>&gt;&gt;<i> expect this to work smoothly.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> A couple of questions:
</I>&gt;&gt;&gt;<i> Is this the proper way to fix the situation?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No. As I said a moment ago, rabbit is not set up for this kind of
</I>&gt;&gt;<i> scenario so I'd be very cautious about doing this and would really
</I>&gt;&gt;<i> recommend against it.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Will this have unintended consequences?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have no idea, but it is entirely possible that various things could
</I>&gt;&gt;<i> break in obscure and alarming ways. I really would not do this if I were
</I>&gt;&gt;<i> you.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We are running rabbitmq-server-2.8.6 and erlang-R15B.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Liz. I would like to help you find a safe work-around so that you can
</I>&gt;&gt;<i> use rabbit in your environment. I would really like to understand why
</I>&gt;&gt;<i> the changing of a machine's host-name is causing problems for you. I
</I>&gt;&gt;<i> fully realise that after changing the hostname, it is possible that a
</I>&gt;&gt;<i> restart may be required (although I'd have to do some research to verify
</I>&gt;&gt;<i> whether or not this is a hard requirement). But I cannot understand why
</I>&gt;&gt;<i> a change to the machine's host name requires changing the rabbit
</I>&gt;&gt;<i> NODENAME at all, unless you've altered the rabbit start scripts to use
</I>&gt;&gt;<i> 'longnames' configuration (i.e., including the complete host name in the
</I>&gt;&gt;<i> node name) in which case, a simple solution to your problem might be to
</I>&gt;&gt;<i> switch back to using 'shortnames'. If erlang is started using -sname
</I>&gt;&gt;<i> rabbit@`hostname -s` and your /etc/hosts configuration supports
</I>&gt;&gt;<i> resolving the machine's IP to the short version of the name, then
</I>&gt;&gt;<i> changing the hostname shouldn't cause all of these headaches.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For example, if I launch rabbit with something like this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> env RABBITMQ_NODENAME=rabbit RABBITMQ_NODE_PORT=5672
</I>&gt;&gt;<i> RABBITMQ_LOG_BASE=&quot;/tmp&quot;
</I>&gt;&gt;<i> RABBITMQ_MNESIA_DIR=&quot;/tmp/rabbitmq-rabbit-mnesia&quot;
</I>&gt;&gt;<i> RABBITMQ_PID_FILE=&quot;/tmp/rabbitmq-rabbit.pid&quot;
</I>&gt;&gt;<i> RABBITMQ_PLUGINS_EXPAND_DIR=&quot;/tmp/rabbitmq-rabbit-plugins-scratch&quot;
</I>&gt;&gt;<i> RABBITMQ_ENABLED_PLUGINS_FILE=&quot;/tmp/enabled-plugins&quot;
</I>&gt;&gt;<i> RABBITMQ_CONFIG_FILE=&quot;/tmp/etc/rabbit&quot; ./scripts/rabbitmq-server
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then change the hostname, then stop rabbit and start it again,
</I>&gt;&gt;<i> everything is fine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> Tim
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Liz
</I>&gt;&gt;&gt;<i> Email Confidentiality Notice
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Email Confidentiality Notice
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
Email Confidentiality Notice

The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.


------------------------------

Message: 23
Date: Mon, 22 Oct 2012 18:05:43 -0500
From: Travis &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">hcoyote at ghostar.org</A>&gt;
Subject: [rabbitmq-discuss] Memory leak caused by error_logger in
2.8.6?
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CAChq9g0hgKBX6LdhDxtva0OAfG+86TVrTcAWCksYs9WYUH1ofw at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1

Hello,

We're seeing large amounts of memory being used in some of our single
instance 2.8.6 rabbitmq.  When we do a memory
dump, the output appears to say that error_logger is taking up
hundreds of megabytes.  For example:

[{{memory,847631144},
  &lt;4865.6.0&gt;,
  [{registered_name,error_logger},
   {current_function,{gen_event,fetch_msg,5}},
   {initial_call,{proc_lib,init_p,5}},
   {status,waiting},
   {message_queue_len,0},
   {messages,[]},
   {links,[&lt;4865.0.0&gt;,&lt;4865.30.0&gt;]},
   {dictionary,
    [{{xtype_to_module,topic},rabbit_exchange_type_topic},
     {'$ancestors',[&lt;4865.2.0&gt;]},
     {'$initial_call',{gen_event,init_it,6}},
     {guid,{{36630272,1263673450,3038695659,1008081001},3102285}}]},
   {trap_exit,true},
   {error_handler,error_handler},
   {priority,normal},
   {group_leader,&lt;4865.30.0&gt;},
   {total_heap_size,105953765},
   {heap_size,12538050},
   {stack_size,8},
   {reductions,3561515316},
   {garbage_collection,
    [{min_bin_vheap_size,46368},
     {min_heap_size,233},
     {fullsweep_after,65535},
     {minor_gcs,578}]},
   {suspending,[]}]},

(If more of the dump is needed, I can provide)

 We're a bit perplexed as to what's causing this.  There's nothing odd
looking in the logs.  For example, we see stuff like this:

=INFO REPORT==== 22-Oct-2012::18:03:11 ===
accepting AMQP connection &lt;0.1339.402&gt; (127.0.0.1:32803 -&gt; 127.0.0.1:5672)

=WARNING REPORT==== 22-Oct-2012::18:03:11 ===
closing AMQP connection &lt;0.1339.402&gt; (127.0.0.1:32803 -&gt; 127.0.0.1:5672):
connection_closed_abruptly

=INFO REPORT==== 22-Oct-2012::18:03:12 ===
closing AMQP connection &lt;0.1331.402&gt; (127.0.0.1:32796 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:12 ===
accepting AMQP connection &lt;0.1347.402&gt; (127.0.0.1:32840 -&gt; 127.0.0.1:5672)

=WARNING REPORT==== 22-Oct-2012::18:03:13 ===
closing AMQP connection &lt;0.1347.402&gt; (127.0.0.1:32840 -&gt; 127.0.0.1:5672):
connection_closed_abruptly

=INFO REPORT==== 22-Oct-2012::18:03:13 ===
closing AMQP connection &lt;0.32496.401&gt; (127.0.0.1:57108 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:13 ===
closing AMQP connection &lt;0.32476.401&gt; (127.0.0.1:57104 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:13 ===
closing AMQP connection &lt;0.32492.401&gt; (127.0.0.1:57107 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:13 ===
closing AMQP connection &lt;0.32468.401&gt; (127.0.0.1:57103 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:14 ===
accepting AMQP connection &lt;0.1355.402&gt; (127.0.0.1:32875 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:14 ===
closing AMQP connection &lt;0.1355.402&gt; (127.0.0.1:32875 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:15 ===
accepting AMQP connection &lt;0.1363.402&gt; (127.0.0.1:32898 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:15 ===
accepting AMQP connection &lt;0.1371.402&gt; (127.0.0.1:32899 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:15 ===
closing AMQP connection &lt;0.1371.402&gt; (127.0.0.1:32899 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:15 ===
closing AMQP connection &lt;0.32484.401&gt; (127.0.0.1:57106 -&gt; 127.0.0.1:5672)

=INFO REPORT==== 22-Oct-2012::18:03:15 ===
closing AMQP connection &lt;0.32452.401&gt; (127.0.0.1:57081 -&gt; 127.0.0.1:5672)

=WARNING REPORT==== 22-Oct-2012::18:03:15 ===
closing AMQP connection &lt;0.1363.402&gt; (127.0.0.1:32898 -&gt; 127.0.0.1:5672):
connection_closed_abruptly


Is there a way to tell what's really going on with the error_logger
and if we're really generating so many messages that it's causing
memory to balloon so much?

Travis

-- 
Travis Campbell
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">travis at ghostar.org</A>


------------------------------

Message: 24
Date: Mon, 22 Oct 2012 17:41:05 -0700 (PDT)
From: theBuckWheat &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tbw at rg6.org</A>&gt;
Subject: [rabbitmq-discuss] How to structure Master with many slaves?
RPC??
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">1350952865620-22782.post at n5.nabble.com</A>&gt;
Content-Type: text/plain; charset=us-ascii

I have a SETI-like slave pool, but I maintain the list of which slaves I want
to send work to and which are kept idle.  The slave does the work assigned
and prepares the response dataset to be sent back..   

Question: since I may turn on a slave to accept some work and later take
others out of the pool dynamically, what is the best RabbitMQ queue
topology?  RPC?  





--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/How-to-structure-Master-with-many-slaves-RPC-tp22782.html">http://rabbitmq.1065348.n5.nabble.com/How-to-structure-Master-with-many-slaves-RPC-tp22782.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.


------------------------------

Message: 25
Date: Mon, 22 Oct 2012 21:08:54 -0400
From: Laurent Vauthrin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Channel thread-safety
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CAM8Y7yCLUSV9ker3OWqENkKEFEWPoppos0k3jehWb3-8wqyPaA at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Thanks for clearing that up!

On Mon, Oct 22, 2012 at 3:46 PM, Michael Klishin &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2012/10/22 Laurent Vauthrin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>&gt;
</I>&gt;<i>
</I>&gt;&gt;<i> My questions are:
</I>&gt;&gt;<i> 1. Should we be using a channel per thread considering that we're
</I>&gt;&gt;<i> synchronizing the basicPublish call anyway?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes. Channels are just integer on the wire and a little bit of memory
</I>&gt;<i> allocated on the JVM heap. They are very cheap
</I>&gt;<i> for all intents and purposes and you are much more likely to max out your
</I>&gt;<i> OS and hardware resources (assuming 1 channel per JVM thread) before
</I>&gt;<i> you run into issues with channel objects.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> 2. Can we just share one channel across all threads and not synchronize
</I>&gt;&gt;<i> the call to basicPublish?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> No. The real issue with shared channels is that large messages will result
</I>&gt;<i> in multiple protocol frames being sent
</I>&gt;<i> for a single basicPublish operation. When publishing on the same channel
</I>&gt;<i> from multiple threads, this may result
</I>&gt;<i> in frames being delivered out of order:
</I>&gt;<i>
</I>&gt;<i> T1 =&gt; basicPublish =&gt; [Frame11] [Frame12] [Frame13]
</I>&gt;<i> T2 =&gt; basicPublish =&gt; [Frame21] [Frame22] [Frame23]
</I>&gt;<i>
</I>&gt;<i> may result in the following delivery order, all on the same channel:
</I>&gt;<i>
</I>&gt;<i> [Frame11][Frame21][Frame12][Frame13][Frame22][Frame23]
</I>&gt;<i>
</I>&gt;<i> and because all frames are on the same channel, RabbitMQ won't be able to
</I>&gt;<i> tell how to reconstruct your messages.
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
</I>&gt;<i> <A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/ddb12951/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121022/ddb12951/attachment-0001.htm</A>&gt;

------------------------------

Message: 26
Date: Tue, 23 Oct 2012 09:12:01 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">140F445C-D95D-45F5-874C-F62DB4D695B3 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;

Please provide me with full details of your environments (os, version, etc) and can you please post a full transcript of all the commands and their output.

Thanks



On 22 Oct 2012, at 20:28, chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Yes i clustered them as given on rabbitmq clustering documentation for e.g
</I>&gt;<i> on the first place both nodes are running 
</I>&gt;<i> now i stopped app using rabbitmqctl stop_app then i reset that node than i clusterd that node with another using rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;<i> then i started the node using rabbitmqctl start_app
</I>&gt;<i> when i checked the cluster status it was showing fine then i did as i mentioned earlier 
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> On Mon, Oct 22, 2012 at 7:51 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt; wrote:
</I>&gt;<i> Yes but how did you cluster them on the first place? You do realise that rabbit nodes are not clustered automatically?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 22 Oct 2012, at 14:17, chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks for your reply i am using 2.8.6
</I>&gt;&gt;<i> here is what i am doing 
</I>&gt;&gt;<i> 1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered 
</I>&gt;&gt;<i> 2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
</I>&gt;&gt;<i> 3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server start commnad
</I>&gt;&gt;<i> 4. and then i check cluster status it shows only one running node  
</I>&gt;&gt;<i> Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;&gt;<i> [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;&gt;<i>  {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;&gt;<i> ...done.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Mon, Oct 22, 2012 at 6:39 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:
</I>&gt;&gt;<i> Works for me! ;)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> What version(s) of rabbit are you running and can you please post the exact commands you're using to start each node, to stop one of the applications (not the node) and cluster it with the other one and then finally the command you're using to start again.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Cheers
</I>&gt;&gt;<i> Tim
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 22 Oct 2012, at 14:04, chetan dev wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &gt; Hi,
</I>&gt;&gt;<i> &gt; I have two nodes clustered together , but when i stop a node using rabbbitmqctl stop command and start the broker with rabbitmq-server detached commnad
</I>&gt;&gt;<i> &gt; now when  i see the cluster status it shows only one broker running while both of the brokers are running fine.
</I>&gt;&gt;<i> &gt; can anybody explain this or tell me what mistake i am making?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Cheten  Dev
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; B.Tech Final Year
</I>&gt;&gt;<i> &gt; Dept. of Electrical Engg.
</I>&gt;&gt;<i> &gt; IIT Delhi, New Delhi
</I>&gt;&gt;<i> &gt; ph 8527333215
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> Cheten  Dev 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> B.Tech Final Year
</I>&gt;&gt;<i> Dept. of Electrical Engg.
</I>&gt;&gt;<i> IIT Delhi, New Delhi
</I>&gt;&gt;<i> ph 8527333215
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Cheten  Dev 
</I>&gt;<i> 
</I>&gt;<i> B.Tech Final Year
</I>&gt;<i> Dept. of Electrical Engg.
</I>&gt;<i> IIT Delhi, New Delhi
</I>&gt;<i> ph 8527333215
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/01aa6e11/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/01aa6e11/attachment-0001.htm</A>&gt;

------------------------------

Message: 27
Date: Tue, 23 Oct 2012 09:18:22 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] RabbitMQ + Messages between virtual
machines and physical hosts on a cloud
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&quot;
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">9ACEF152-DE73-41F6-8927-DCA43DC8C2E8 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;

Hi

On 22 Oct 2012, at 20:50, Desta Haileselassie Hagos &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">deshai-0 at student.ltu.se</A>&gt; wrote:

&gt;<i> Dear Sir/Madam,
</I>&gt;<i> 
</I>&gt;<i> The problem is that I am not able to send and receive messages between the Virtual machines and the physical hosts on my cloud. I want to receive full information by manipulating the VMs APIs if it is possible.
</I>&gt;<i> 
</I>&gt;<i> 
</I>
Ok, let's try and address one problem at a time. Are you saying that you don't know *how* to configure messaging between hosts using rabbit? If so, I would recommend reading through the tutorials on our website in the first instance, then coming back with any questions you might have.

Or are you saying that youve set up rabbit and/or deployed a messaging client application on these machines, but it is not working as expected? In that case: What are you doing to test sending messages between hosts (virtual or otherwise) - how are your rabbit nodes set up? What client(s) are you using? What version of rabbit? Which os/vsn? Can you post a transcript of the failing commands or application and/or server logs, demonstrating the errors you're encountering?


&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/5d29091c/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/5d29091c/attachment-0001.htm</A>&gt;

------------------------------

Message: 28
Date: Tue, 23 Oct 2012 09:20:31 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">31488449-99C6-4430-807E-4657D7A9137A at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=us-ascii

Ah of course - sorry i missed that guys. After so recently looking at the 3.0 cluster commands I'd forgotten that the choice of disk/ram was done that way in 2.8.x. 

On 22 Oct 2012, at 21:26, Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 22/10/12 20:28, chetan dev wrote:
</I>&gt;&gt;&gt;<i>    here is what i am doing
</I>&gt;&gt;&gt;<i>    1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered
</I>&gt;<i> 
</I>&gt;<i> yes, but...
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> i clustered them as given on rabbitmq clustering documentation for e.g
</I>&gt;&gt;&gt;<i> on the first place both nodes are running
</I>&gt;&gt;&gt;<i> now i stopped app using rabbitmqctl stop_app then i reset that node than
</I>&gt;&gt;&gt;<i> i clusterd that node with another using rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;&gt;&gt;<i> then i started the node using rabbitmqctl start_app
</I>&gt;&gt;&gt;<i> when i checked the cluster status it was showing fine then i did as i
</I>&gt;&gt;&gt;<i> mentioned earlier
</I>&gt;<i> 
</I>&gt;<i> That will make <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> a *ram* node. To make both nodes disk nodes the node itself would have to be mentioned in the cluster command too, i.e. 'rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHAR</A> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>'.
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i>    2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
</I>&gt;&gt;&gt;<i>    3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server
</I>&gt;&gt;&gt;<i>    start commnad
</I>&gt;<i> 
</I>&gt;<i> You have just stopped and restarted the clusters' only disk node. Rabbit clusters won't function properly if they have only ram nodes.
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i>    4. and then i check cluster status it shows only one running node
</I>&gt;&gt;&gt;<i>    Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;&gt;&gt;<i>    [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;&gt;&gt;<i>     {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;&gt;&gt;<i>    ...done.
</I>&gt;<i> 
</I>&gt;<i> Try running that command against <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.</A> I suspect it will tell you that it only knows about itself.
</I>&gt;<i> 
</I>&gt;<i> Anyway, I suggest you change your cluster configuration s.t. both nodes are disk nodes.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i> Matthias.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

------------------------------

Message: 29
Date: Tue, 23 Oct 2012 10:27:40 +0200
From: Michael Justin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.justin at gmx.net</A>&gt;
Subject: Re: [rabbitmq-discuss] STOMP plugin - durable subscription
limitation
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID: &lt;k65kdv$jok$<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">1 at ger.gmane.org</A>&gt;
Content-Type: text/plain; charset=UTF-8; format=flowed

Am 22.10.2012 11:49, Emile Joubert wrote:&gt; Hi Michael,
 &gt;
 &gt; On 21/10/12 09:32, Michael Justin wrote:
 &gt;&gt; So I understand with the frames shown, the clients would use the same
 &gt;&gt; shared queue.
 &gt;&gt;
 &gt;&gt; Does this mean that all waiting messages in the topic will be
 &gt;&gt; distributed between the two clients because of the identical
 &gt;&gt; subscription ID x destination?
 &gt;
 &gt; Yes, this is correct. Both clients will be consuming from the same queue
 &gt; and messages will be distributed between them. You can use the prefetch
 &gt; header to control the distribution:
 &gt;
 &gt; <A HREF="http://www.rabbitmq.com/stomp.html#pear.p">http://www.rabbitmq.com/stomp.html#pear.p</A>

This is interesting - so the behavior of the broker is not undefined, 
and clients could implement load balancing with durable subscribers if 
they all use the same subscription ID (instead of using STOMP queues), 
is this correct (just curious)?

-- 
Michael Justin



------------------------------

Message: 30
Date: Tue, 23 Oct 2012 09:33:26 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] nodename variable and mnesia directory
To: Elizabeth Liao &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eliao at seegrid.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">1EDE5727-72BE-4384-A943-9F79DDB75819 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=us-ascii

Hi

On 22 Oct 2012, at 23:14, Elizabeth Liao &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eliao at seegrid.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> This is what I tried
</I>&gt;<i> * I start running rabbit with no NODENAME set and entered the following commands
</I>&gt;<i>  * rabbitmqctl stop
</I>&gt;<i>  * /etc/init.d/rabbitmq-server stop
</I>&gt;<i>  * epmd -kill ( Is this correct? I didn't see a restart in the documentation )
</I>
That is correct.

&gt;<i>  * In /etc/hosts changed line from 127.0.1.1 &lt;oldhostname&gt; &lt;oldhostname&gt;.localdomain -&gt; 127.0.1.1 &lt;newhostname&gt; &lt;newhostname&gt;.localdomain
</I>&gt;<i>  * in /etc/sysconfig/network changed HOSTNAME=&lt;oldhostname&gt; -&gt; HOSTNAME=&lt;newhostname&gt;
</I>&gt;<i>  * /bin/hostname &lt;newhostname&gt;
</I>
At this point I found I needed to log out and back in again, though that was on centos an I'm not sure it's necessary to restart a profile on all operating systems. What os are you running an what does the documentation state about hostname changes? Do you, for example, have to restart the os networking sub system?

&gt;<i> * /etc/init.d/rabbitmq-server start
</I>&gt;<i> 
</I>&gt;<i> The error I get is this:
</I>&gt;<i> Activating RabbitMQ plugins ...
</I>&gt;<i> 3 plugins activated:
</I>&gt;<i> * amqp_client-2.8.6
</I>&gt;<i> * erlando-2.8.6
</I>&gt;<i> * rabbitmq_shovel-2.8.6
</I>&gt;<i> 
</I>&gt;<i> ERROR: epmd error for host &quot;&lt;oldhostname&gt;&quot;: nxdomain (non-existing domain)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ________________________________________
</I>&gt;<i> From: Tim Watson [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>]
</I>&gt;<i> Sent: Monday, October 22, 2012 6:41 AM
</I>&gt;<i> To: Discussions about RabbitMQ
</I>&gt;<i> Cc: Elizabeth Liao
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] nodename variable and mnesia directory
</I>&gt;<i> 
</I>&gt;<i> Hi again,
</I>&gt;<i> 
</I>&gt;<i> On 20 Oct 2012, at 10:52, Tim Watson wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi Liz,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Sorry i wasn't aware of the context. What Ian recommended should not be necessary, though I'll follow up with him on Monday to try and figure out why he needed to do that.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Once you change the hostname you,ll possibly need to restart epmd and restart your rabbit, but you shouldn't need to change the node name from say rabbit to hare.
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Were you able to try this again (changing only the host name but not the node name) and did it work for you? If not I'd like to know so we can investigate.
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> Tim
</I>&gt;<i> 
</I>&gt;&gt;<i> Cheers
</I>&gt;&gt;<i> Tim
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 19 Oct 2012, at 19:44, Elizabeth Liao &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eliao at seegrid.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi Tim,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I'm going to back up a bit because it seems that I've misunderstood something previously.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> The first thing I'm going to say is that this isn't really a desirable
</I>&gt;&gt;&gt;<i> state of affairs. Why do you need to change NODENAME at all, just
</I>&gt;&gt;&gt;<i> because the host name has changed? This seems like an odd step to me -
</I>&gt;&gt;&gt;<i> can you explain the rationale behind it?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I had an earlier problem changing the hostname and restarting the rabbitmq-server. The proposed fix was to add the NODENAME variable which I'm guessing was not right? :
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-July/021435.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-July/021435.html</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Can you explain a bit more about this 'bug' please? What exactly is
</I>&gt;&gt;&gt;<i> going wrong?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> The bug is on our end where the NODENAME is set to an empty string. Of course this is moot if NODENAME doesn't even have to be set in the first place.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Liz
</I>&gt;&gt;&gt;<i> ________________________________________
</I>&gt;&gt;&gt;<i> From: Tim Watson [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>]
</I>&gt;&gt;&gt;<i> Sent: Friday, October 19, 2012 12:48 PM
</I>&gt;&gt;&gt;<i> To: Discussions about RabbitMQ
</I>&gt;&gt;&gt;<i> Cc: Elizabeth Liao
</I>&gt;&gt;&gt;<i> Subject: Re: [rabbitmq-discuss] nodename variable and mnesia directory
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On 10/19/2012 03:41 PM, Elizabeth Liao wrote:
</I>&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> We are currently running rabbitmq on a system where there is a need to change the hostname occasionally.  Right now, when the hostname is changed, we also update the NODENAME variable in the rabbitmq-env.conf file.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> The first thing I'm going to say is that this isn't really a desirable
</I>&gt;&gt;&gt;<i> state of affairs. Why do you need to change NODENAME at all, just
</I>&gt;&gt;&gt;<i> because the host name has changed? This seems like an odd step to me -
</I>&gt;&gt;&gt;<i> can you explain the rationale behind it?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> The problem we're having right now is that due to a bug when setting up the rabbitmq-env.conf file, sometimes the NODENAME variable exists but is not set to anything ( NODENAME=) so rabbit never successfully starts up.  Even after setting the NODENAME variable to the hostname, rabbit still doesn't start up properly.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Can you explain a bit more about this 'bug' please? What exactly is
</I>&gt;&gt;&gt;<i> going wrong?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> The only way that I could find to recover from this situation without killing the erlang process, was to also set a MNESIA_DIR variable. After I did that, once the NODENAME was set to the correct hostname, rabbit started up properly.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Now this makes no sense at all to me. If you are trying to recover
</I>&gt;&gt;&gt;<i> 'without killing the erlang process' then how are you planning on
</I>&gt;&gt;&gt;<i> changing the NODENAME? Once an erlang node has become part of a
</I>&gt;&gt;&gt;<i> distributed system, you cannot arbitrarily change the node's name
</I>&gt;&gt;&gt;<i> without restarting the net_kernel AFAIK so I can't see how this is even
</I>&gt;&gt;&gt;<i> possible. Also, because you're stating that 'rabbit started up properly'
</I>&gt;&gt;&gt;<i> I'm assuming that you have in fact taken the node offline (using
</I>&gt;&gt;&gt;<i> `rabbitmqctl stop` or one of the various service scripts that invokes
</I>&gt;&gt;&gt;<i> it) and that you are now starting the node again. The rabbit startup
</I>&gt;&gt;&gt;<i> scripts (and associated infrastructure) is not set up to handle changing
</I>&gt;&gt;&gt;<i> the name of a node post-installation in this manner, so I would not
</I>&gt;&gt;&gt;<i> expect this to work smoothly.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> A couple of questions:
</I>&gt;&gt;&gt;&gt;<i> Is this the proper way to fix the situation?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> No. As I said a moment ago, rabbit is not set up for this kind of
</I>&gt;&gt;&gt;<i> scenario so I'd be very cautious about doing this and would really
</I>&gt;&gt;&gt;<i> recommend against it.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Will this have unintended consequences?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I have no idea, but it is entirely possible that various things could
</I>&gt;&gt;&gt;<i> break in obscure and alarming ways. I really would not do this if I were
</I>&gt;&gt;&gt;<i> you.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> We are running rabbitmq-server-2.8.6 and erlang-R15B.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Thanks!
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Liz. I would like to help you find a safe work-around so that you can
</I>&gt;&gt;&gt;<i> use rabbit in your environment. I would really like to understand why
</I>&gt;&gt;&gt;<i> the changing of a machine's host-name is causing problems for you. I
</I>&gt;&gt;&gt;<i> fully realise that after changing the hostname, it is possible that a
</I>&gt;&gt;&gt;<i> restart may be required (although I'd have to do some research to verify
</I>&gt;&gt;&gt;<i> whether or not this is a hard requirement). But I cannot understand why
</I>&gt;&gt;&gt;<i> a change to the machine's host name requires changing the rabbit
</I>&gt;&gt;&gt;<i> NODENAME at all, unless you've altered the rabbit start scripts to use
</I>&gt;&gt;&gt;<i> 'longnames' configuration (i.e., including the complete host name in the
</I>&gt;&gt;&gt;<i> node name) in which case, a simple solution to your problem might be to
</I>&gt;&gt;&gt;<i> switch back to using 'shortnames'. If erlang is started using -sname
</I>&gt;&gt;&gt;<i> rabbit@`hostname -s` and your /etc/hosts configuration supports
</I>&gt;&gt;&gt;<i> resolving the machine's IP to the short version of the name, then
</I>&gt;&gt;&gt;<i> changing the hostname shouldn't cause all of these headaches.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> For example, if I launch rabbit with something like this:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> env RABBITMQ_NODENAME=rabbit RABBITMQ_NODE_PORT=5672
</I>&gt;&gt;&gt;<i> RABBITMQ_LOG_BASE=&quot;/tmp&quot;
</I>&gt;&gt;&gt;<i> RABBITMQ_MNESIA_DIR=&quot;/tmp/rabbitmq-rabbit-mnesia&quot;
</I>&gt;&gt;&gt;<i> RABBITMQ_PID_FILE=&quot;/tmp/rabbitmq-rabbit.pid&quot;
</I>&gt;&gt;&gt;<i> RABBITMQ_PLUGINS_EXPAND_DIR=&quot;/tmp/rabbitmq-rabbit-plugins-scratch&quot;
</I>&gt;&gt;&gt;<i> RABBITMQ_ENABLED_PLUGINS_FILE=&quot;/tmp/enabled-plugins&quot;
</I>&gt;&gt;&gt;<i> RABBITMQ_CONFIG_FILE=&quot;/tmp/etc/rabbit&quot; ./scripts/rabbitmq-server
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Then change the hostname, then stop rabbit and start it again,
</I>&gt;&gt;&gt;<i> everything is fine.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Cheers,
</I>&gt;&gt;&gt;<i> Tim
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Liz
</I>&gt;&gt;&gt;&gt;<i> Email Confidentiality Notice
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Email Confidentiality Notice
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> Email Confidentiality Notice
</I>&gt;<i> 
</I>&gt;<i> The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law. This message is intended for the sole use of the individual or entity to whom it's addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer.
</I>

------------------------------

Message: 31
Date: Tue, 23 Oct 2012 09:38:50 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Memory leak caused by error_logger in
2.8.6?
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&quot;
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">8A746A1E-A89E-420F-BA54-9D27B0E4AE5F at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=us-ascii

How log does the situation last when this happens? Can you post the logs 'after' the memory goes up unexpectedly - is there any larger terms in there?



On 23 Oct 2012, at 00:05, Travis &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">hcoyote at ghostar.org</A>&gt; wrote:

&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> We're seeing large amounts of memory being used in some of our single
</I>&gt;<i> instance 2.8.6 rabbitmq.  When we do a memory
</I>&gt;<i> dump, the output appears to say that error_logger is taking up
</I>&gt;<i> hundreds of megabytes.  For example:
</I>&gt;<i> 
</I>&gt;<i> [{{memory,847631144},
</I>&gt;<i>  &lt;4865.6.0&gt;,
</I>&gt;<i>  [{registered_name,error_logger},
</I>&gt;<i>   {current_function,{gen_event,fetch_msg,5}},
</I>&gt;<i>   {initial_call,{proc_lib,init_p,5}},
</I>&gt;<i>   {status,waiting},
</I>&gt;<i>   {message_queue_len,0},
</I>&gt;<i>   {messages,[]},
</I>&gt;<i>   {links,[&lt;4865.0.0&gt;,&lt;4865.30.0&gt;]},
</I>&gt;<i>   {dictionary,
</I>&gt;<i>    [{{xtype_to_module,topic},rabbit_exchange_type_topic},
</I>&gt;<i>     {'$ancestors',[&lt;4865.2.0&gt;]},
</I>&gt;<i>     {'$initial_call',{gen_event,init_it,6}},
</I>&gt;<i>     {guid,{{36630272,1263673450,3038695659,1008081001},3102285}}]},
</I>&gt;<i>   {trap_exit,true},
</I>&gt;<i>   {error_handler,error_handler},
</I>&gt;<i>   {priority,normal},
</I>&gt;<i>   {group_leader,&lt;4865.30.0&gt;},
</I>&gt;<i>   {total_heap_size,105953765},
</I>&gt;<i>   {heap_size,12538050},
</I>&gt;<i>   {stack_size,8},
</I>&gt;<i>   {reductions,3561515316},
</I>&gt;<i>   {garbage_collection,
</I>&gt;<i>    [{min_bin_vheap_size,46368},
</I>&gt;<i>     {min_heap_size,233},
</I>&gt;<i>     {fullsweep_after,65535},
</I>&gt;<i>     {minor_gcs,578}]},
</I>&gt;<i>   {suspending,[]}]},
</I>&gt;<i> 
</I>&gt;<i> (If more of the dump is needed, I can provide)
</I>&gt;<i> 
</I>&gt;<i> We're a bit perplexed as to what's causing this.  There's nothing odd
</I>&gt;<i> looking in the logs.  For example, we see stuff like this:
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:11 ===
</I>&gt;<i> accepting AMQP connection &lt;0.1339.402&gt; (127.0.0.1:32803 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =WARNING REPORT==== 22-Oct-2012::18:03:11 ===
</I>&gt;<i> closing AMQP connection &lt;0.1339.402&gt; (127.0.0.1:32803 -&gt; 127.0.0.1:5672):
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:12 ===
</I>&gt;<i> closing AMQP connection &lt;0.1331.402&gt; (127.0.0.1:32796 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:12 ===
</I>&gt;<i> accepting AMQP connection &lt;0.1347.402&gt; (127.0.0.1:32840 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =WARNING REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;<i> closing AMQP connection &lt;0.1347.402&gt; (127.0.0.1:32840 -&gt; 127.0.0.1:5672):
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;<i> closing AMQP connection &lt;0.32496.401&gt; (127.0.0.1:57108 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;<i> closing AMQP connection &lt;0.32476.401&gt; (127.0.0.1:57104 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;<i> closing AMQP connection &lt;0.32492.401&gt; (127.0.0.1:57107 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;<i> closing AMQP connection &lt;0.32468.401&gt; (127.0.0.1:57103 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:14 ===
</I>&gt;<i> accepting AMQP connection &lt;0.1355.402&gt; (127.0.0.1:32875 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:14 ===
</I>&gt;<i> closing AMQP connection &lt;0.1355.402&gt; (127.0.0.1:32875 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;<i> accepting AMQP connection &lt;0.1363.402&gt; (127.0.0.1:32898 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;<i> accepting AMQP connection &lt;0.1371.402&gt; (127.0.0.1:32899 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;<i> closing AMQP connection &lt;0.1371.402&gt; (127.0.0.1:32899 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;<i> closing AMQP connection &lt;0.32484.401&gt; (127.0.0.1:57106 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;<i> closing AMQP connection &lt;0.32452.401&gt; (127.0.0.1:57081 -&gt; 127.0.0.1:5672)
</I>&gt;<i> 
</I>&gt;<i> =WARNING REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;<i> closing AMQP connection &lt;0.1363.402&gt; (127.0.0.1:32898 -&gt; 127.0.0.1:5672):
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Is there a way to tell what's really going on with the error_logger
</I>&gt;<i> and if we're really generating so many messages that it's causing
</I>&gt;<i> memory to balloon so much?
</I>&gt;<i> 
</I>&gt;<i> Travis
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Travis Campbell
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">travis at ghostar.org</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

------------------------------

Message: 32
Date: Tue, 23 Oct 2012 09:40:46 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] RabbitMQ + Messages between virtual
machines and physical hosts on a cloud
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">84B878DB-6611-4FD8-A1AB-BDE520F6385B at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;

And of course of you have set it up and it's not working, Brett's question (which I foolishly forgot to ask) is perhaps the most important one: is there any firewall between the nodes preventing traffic on the relevant ports from getting through?



On 23 Oct 2012, at 09:18, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt; wrote:

&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> On 22 Oct 2012, at 20:50, Desta Haileselassie Hagos &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">deshai-0 at student.ltu.se</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Dear Sir/Madam,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The problem is that I am not able to send and receive messages between the Virtual machines and the physical hosts on my cloud. I want to receive full information by manipulating the VMs APIs if it is possible.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Ok, let's try and address one problem at a time. Are you saying that you don't know *how* to configure messaging between hosts using rabbit? If so, I would recommend reading through the tutorials on our website in the first instance, then coming back with any questions you might have.
</I>&gt;<i> 
</I>&gt;<i> Or are you saying that youve set up rabbit and/or deployed a messaging client application on these machines, but it is not working as expected? In that case: What are you doing to test sending messages between hosts (virtual or otherwise) - how are your rabbit nodes set up? What client(s) are you using? What version of rabbit? Which os/vsn? Can you post a transcript of the failing commands or application and/or server logs, demonstrating the errors you're encountering?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/bbaaf626/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/bbaaf626/attachment-0001.htm</A>&gt;

------------------------------

Message: 33
Date: Tue, 23 Oct 2012 09:42:36 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Memory leak caused by error_logger in
2.8.6?
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">FA9367DD-D418-4E1D-BB68-8E0B1E563CBC at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=us-ascii

Hi - sorry typing on my phone isn't too reliable....

s/how log/how long/

On 23 Oct 2012, at 09:38, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt; wrote:

&gt;<i> How log does the situation last when this happens? Can you post the logs 'after' the memory goes up unexpectedly - is there any larger terms in there?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 23 Oct 2012, at 00:05, Travis &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">hcoyote at ghostar.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> We're seeing large amounts of memory being used in some of our single
</I>&gt;&gt;<i> instance 2.8.6 rabbitmq.  When we do a memory
</I>&gt;&gt;<i> dump, the output appears to say that error_logger is taking up
</I>&gt;&gt;<i> hundreds of megabytes.  For example:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> [{{memory,847631144},
</I>&gt;&gt;<i> &lt;4865.6.0&gt;,
</I>&gt;&gt;<i> [{registered_name,error_logger},
</I>&gt;&gt;<i>  {current_function,{gen_event,fetch_msg,5}},
</I>&gt;&gt;<i>  {initial_call,{proc_lib,init_p,5}},
</I>&gt;&gt;<i>  {status,waiting},
</I>&gt;&gt;<i>  {message_queue_len,0},
</I>&gt;&gt;<i>  {messages,[]},
</I>&gt;&gt;<i>  {links,[&lt;4865.0.0&gt;,&lt;4865.30.0&gt;]},
</I>&gt;&gt;<i>  {dictionary,
</I>&gt;&gt;<i>   [{{xtype_to_module,topic},rabbit_exchange_type_topic},
</I>&gt;&gt;<i>    {'$ancestors',[&lt;4865.2.0&gt;]},
</I>&gt;&gt;<i>    {'$initial_call',{gen_event,init_it,6}},
</I>&gt;&gt;<i>    {guid,{{36630272,1263673450,3038695659,1008081001},3102285}}]},
</I>&gt;&gt;<i>  {trap_exit,true},
</I>&gt;&gt;<i>  {error_handler,error_handler},
</I>&gt;&gt;<i>  {priority,normal},
</I>&gt;&gt;<i>  {group_leader,&lt;4865.30.0&gt;},
</I>&gt;&gt;<i>  {total_heap_size,105953765},
</I>&gt;&gt;<i>  {heap_size,12538050},
</I>&gt;&gt;<i>  {stack_size,8},
</I>&gt;&gt;<i>  {reductions,3561515316},
</I>&gt;&gt;<i>  {garbage_collection,
</I>&gt;&gt;<i>   [{min_bin_vheap_size,46368},
</I>&gt;&gt;<i>    {min_heap_size,233},
</I>&gt;&gt;<i>    {fullsweep_after,65535},
</I>&gt;&gt;<i>    {minor_gcs,578}]},
</I>&gt;&gt;<i>  {suspending,[]}]},
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> (If more of the dump is needed, I can provide)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> We're a bit perplexed as to what's causing this.  There's nothing odd
</I>&gt;&gt;<i> looking in the logs.  For example, we see stuff like this:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:11 ===
</I>&gt;&gt;<i> accepting AMQP connection &lt;0.1339.402&gt; (127.0.0.1:32803 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =WARNING REPORT==== 22-Oct-2012::18:03:11 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.1339.402&gt; (127.0.0.1:32803 -&gt; 127.0.0.1:5672):
</I>&gt;&gt;<i> connection_closed_abruptly
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:12 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.1331.402&gt; (127.0.0.1:32796 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:12 ===
</I>&gt;&gt;<i> accepting AMQP connection &lt;0.1347.402&gt; (127.0.0.1:32840 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =WARNING REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.1347.402&gt; (127.0.0.1:32840 -&gt; 127.0.0.1:5672):
</I>&gt;&gt;<i> connection_closed_abruptly
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.32496.401&gt; (127.0.0.1:57108 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.32476.401&gt; (127.0.0.1:57104 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.32492.401&gt; (127.0.0.1:57107 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:13 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.32468.401&gt; (127.0.0.1:57103 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:14 ===
</I>&gt;&gt;<i> accepting AMQP connection &lt;0.1355.402&gt; (127.0.0.1:32875 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:14 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.1355.402&gt; (127.0.0.1:32875 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;&gt;<i> accepting AMQP connection &lt;0.1363.402&gt; (127.0.0.1:32898 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;&gt;<i> accepting AMQP connection &lt;0.1371.402&gt; (127.0.0.1:32899 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.1371.402&gt; (127.0.0.1:32899 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.32484.401&gt; (127.0.0.1:57106 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =INFO REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.32452.401&gt; (127.0.0.1:57081 -&gt; 127.0.0.1:5672)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> =WARNING REPORT==== 22-Oct-2012::18:03:15 ===
</I>&gt;&gt;<i> closing AMQP connection &lt;0.1363.402&gt; (127.0.0.1:32898 -&gt; 127.0.0.1:5672):
</I>&gt;&gt;<i> connection_closed_abruptly
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Is there a way to tell what's really going on with the error_logger
</I>&gt;&gt;<i> and if we're really generating so many messages that it's causing
</I>&gt;&gt;<i> memory to balloon so much?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Travis
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> Travis Campbell
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">travis at ghostar.org</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

------------------------------

Message: 34
Date: Tue, 23 Oct 2012 14:16:10 +0530
From: chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;CAB0ZxM7WUWg2Z6RRupkfOcaSwabKpGki6AN1PTLhcX5DpxJa=<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">w at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Hi,

Thanks you very much for this information
another problem i am facing is i have two nodes clustered lets say
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>(ram) and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>(disc)
now if i stop <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmwctl stop command  and then i
stop  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>  using stop_app command and then reset it this way i
remove it from cluster and restart the node
now <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> starts and works fine but when i try to start
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> it fails .
i think it is trying to cluster with <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> but that node is now
not in cluster but is there a way so that i can reset <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and
start it normally
here is the error that i got:
node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
app descriptor : c:/Program Files/RabbitMQ
Server/rabbitmq_server-2.8.6/sbin/../
ebin/rabbit.app
home dir       : C:\Users\Acer
config file(s) : (none)
cookie hash    : +3xbT32/GKScN3yhCcE0Ag==
log            :
C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
sasl log       :
C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl</A>
.log
database dir   :
c:/Users/Acer/AppData/Roaming/RabbitMQ/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-mnesi</A>
a
erlang version : 5.9.1

-- rabbit boot start
starting file handle cache server
...done
starting worker pool
 ...done
starting database                                                     ...

BOOT FAILED
===========

Error description:
   {error,{failed_to_cluster_with,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>],
                                  &quot;Mnesia could not connect to any disc
nodes.&quot;}
}

Log files (may contain more information):
   C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
   C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl.log</A>

Stack trace:
   [{rabbit_mnesia,init_db,3,[]},
    {rabbit_mnesia,init,0,[]},
    {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
    {rabbit,run_boot_step,1,[]},
    {rabbit,'-start/2-lc$^0/1-0-',1,[]},
    {rabbit,start,2,[]},
    {application_master,start_it_old,4,
                        [{file,&quot;application_master.erl&quot;},{line,274}]}]

{&quot;Kernel pid
terminated&quot;,application_controller,&quot;{application_start_failure,rabb
it,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}
}}}&quot;}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller)
({application_start_failure,rabbi
t,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}
}})



Thanks





On Tue, Oct 23, 2012 at 1:50 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;wrote:

&gt;<i> Ah of course - sorry i missed that guys. After so recently looking at the
</I>&gt;<i> 3.0 cluster commands I'd forgotten that the choice of disk/ram was done
</I>&gt;<i> that way in 2.8.x.
</I>&gt;<i>
</I>&gt;<i> On 22 Oct 2012, at 21:26, Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; On 22/10/12 20:28, chetan dev wrote:
</I>&gt;<i> &gt;&gt;&gt;    here is what i am doing
</I>&gt;<i> &gt;&gt;&gt;    1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; yes, but...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;&gt; i clustered them as given on rabbitmq clustering documentation for e.g
</I>&gt;<i> &gt;&gt;&gt; on the first place both nodes are running
</I>&gt;<i> &gt;&gt;&gt; now i stopped app using rabbitmqctl stop_app then i reset that node
</I>&gt;<i> than
</I>&gt;<i> &gt;&gt;&gt; i clusterd that node with another using rabbitmqctl cluster
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;<i> &gt;&gt;&gt; then i started the node using rabbitmqctl start_app
</I>&gt;<i> &gt;&gt;&gt; when i checked the cluster status it was showing fine then i did as i
</I>&gt;<i> &gt;&gt;&gt; mentioned earlier
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That will make <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> a *ram* node. To make both nodes disk
</I>&gt;<i> nodes the node itself would have to be mentioned in the cluster command
</I>&gt;<i> too, i.e. 'rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHAR</A> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>'.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;&gt;    2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
</I>&gt;<i> &gt;&gt;&gt;    3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server
</I>&gt;<i> &gt;&gt;&gt;    start commnad
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You have just stopped and restarted the clusters' only disk node. Rabbit
</I>&gt;<i> clusters won't function properly if they have only ram nodes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;&gt;    4. and then i check cluster status it shows only one running node
</I>&gt;<i> &gt;&gt;&gt;    Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;<i> &gt;&gt;&gt;    [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;<i> &gt;&gt;&gt;     {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;<i> &gt;&gt;&gt;    ...done.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Try running that command against <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.</A> I suspect it will
</I>&gt;<i> tell you that it only knows about itself.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Anyway, I suggest you change your cluster configuration s.t. both nodes
</I>&gt;<i> are disk nodes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Matthias.
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Cheten  Dev

B.Tech Final Year
Dept. of Electrical Engg.
IIT Delhi, New Delhi
ph 8527333215
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/1830ac65/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/1830ac65/attachment-0001.htm</A>&gt;

------------------------------

Message: 35
Date: Tue, 23 Oct 2012 10:48:17 +0200
From: Michael Justin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.justin at gmx.net</A>&gt;
Subject: [rabbitmq-discuss] STOMP 1.0 adapter escapes colon as \c
(STOMP 1.1 style)
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Message-ID: &lt;k65lkj$uhe$<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">1 at ger.gmane.org</A>&gt;
Content-Type: text/plain; charset=UTF-8; format=flowed

Hello,

a test showed that a colon in a SEND frame will be escaped STOMP 
1.1-style as \c, so this

SEND
destination:/queue/ExampleQueue
testcolon1:a:test

will be received as:

MESSAGE
destination:/queue/ExampleQueue
testcolon1:a\ctest

Is this as designed? The STOMP plugin page does not cover this escape 
mechanism, which was introduced with STOMP 1.1


I also noticed that messages with header line which contains a backslash 
seem to be dropped on the broker side:

SEND
destination:/queue/ExampleQueue
testbackslash:\x

-&gt; the message does not appear in the Management console


Regards
-- 
Michael Justin
habarisoft - Enterprise Messaging Software for Delphi
<A HREF="http://www.habarisoft.com/">http://www.habarisoft.com/</A>



------------------------------

Message: 36
Date: Tue, 23 Oct 2012 10:13:53 +0100
From: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] How to structure Master with many
slaves? RPC??
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: theBuckWheat &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tbw at rg6.org</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50865FD1.7040305 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1

Hi,

On 23/10/12 01:41, theBuckWheat wrote:
&gt;<i> I have a SETI-like slave pool, but I maintain the list of which slaves I want
</I>&gt;<i> to send work to and which are kept idle.  The slave does the work assigned
</I>&gt;<i> and prepares the response dataset to be sent back..   
</I>&gt;<i> 
</I>&gt;<i> Question: since I may turn on a slave to accept some work and later take
</I>&gt;<i> others out of the pool dynamically, what is the best RabbitMQ queue
</I>&gt;<i> topology?  RPC?
</I>
If the slaves are interchangeable and you don't care about separating
different types of work items then you only need one work queue and one
response queue. Slaves all consume from the same shared work queue and
send completed work to the shared response queue in this scenario. This
corresponds to the pattern in tutorial 2 and 6:
<A HREF="http://www.rabbitmq.com/tutorials/tutorial-two-python.html">http://www.rabbitmq.com/tutorials/tutorial-two-python.html</A>
<A HREF="http://www.rabbitmq.com/tutorials/tutorial-six-python.html">http://www.rabbitmq.com/tutorials/tutorial-six-python.html</A>


-Emile



------------------------------

Message: 37
Date: Tue, 23 Oct 2012 10:08:28 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50865E8C.3070906 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; Format=&quot;flowed&quot;

Don't do that - take the second node out of the cluster whilst the other 
node(s) are still running, so that they can see it leaving. See the 
clustering transcripts in <A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A> for 
details.

On 10/23/2012 09:46 AM, chetan dev wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Thanks you very much for this information
</I>&gt;<i> another problem i am facing is i have two nodes clustered lets say 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>(ram) and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>(disc)
</I>&gt;<i> now if i stop <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmwctl stop command  and then 
</I>&gt;<i> i stop  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>  using stop_app command and then reset it 
</I>&gt;<i> this way i remove it from cluster and restart the node
</I>&gt;<i> now <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> starts and works fine but when i try to start 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> it fails .
</I>&gt;<i> i think it is trying to cluster with <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> but that node is 
</I>&gt;<i> now not in cluster but is there a way so that i can reset 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and start it normally
</I>&gt;<i> here is the error that i got:
</I>&gt;<i> node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;<i> app descriptor : c:/Program Files/RabbitMQ 
</I>&gt;<i> Server/rabbitmq_server-2.8.6/sbin/../
</I>&gt;<i> ebin/rabbit.app
</I>&gt;<i> home dir       : C:\Users\Acer
</I>&gt;<i> config file(s) : (none)
</I>&gt;<i> cookie hash    : +3xbT32/GKScN3yhCcE0Ag==
</I>&gt;<i> log            : 
</I>&gt;<i> C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
</I>&gt;<i> sasl log       : 
</I>&gt;<i> C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl</A>
</I>&gt;<i> .log
</I>&gt;<i> database dir   : 
</I>&gt;<i> c:/Users/Acer/AppData/Roaming/RabbitMQ/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-mnesi</A>
</I>&gt;<i> a
</I>&gt;<i> erlang version : 5.9.1
</I>&gt;<i>
</I>&gt;<i> -- rabbit boot start
</I>&gt;<i> starting file handle cache server                                     
</I>&gt;<i> ...done
</I>&gt;<i> starting worker pool                                                 
</I>&gt;<i>  ...done
</I>&gt;<i> starting database                                                     ...
</I>&gt;<i>
</I>&gt;<i> BOOT FAILED
</I>&gt;<i> ===========
</I>&gt;<i>
</I>&gt;<i> Error description:
</I>&gt;<i>    {error,{failed_to_cluster_with,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>],
</I>&gt;<i>                                   &quot;Mnesia could not connect to any 
</I>&gt;<i> disc nodes.&quot;}
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Log files (may contain more information):
</I>&gt;<i>    C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
</I>&gt;<i>    C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl.log</A>
</I>&gt;<i>
</I>&gt;<i> Stack trace:
</I>&gt;<i>    [{rabbit_mnesia,init_db,3,[]},
</I>&gt;<i>     {rabbit_mnesia,init,0,[]},
</I>&gt;<i>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
</I>&gt;<i>     {rabbit,run_boot_step,1,[]},
</I>&gt;<i>     {rabbit,'-start/2-lc$^0/1-0-',1,[]},
</I>&gt;<i>     {rabbit,start,2,[]},
</I>&gt;<i>     {application_master,start_it_old,4,
</I>&gt;<i>                         [{file,&quot;application_master.erl&quot;},{line,274}]}]
</I>&gt;<i>
</I>&gt;<i> {&quot;Kernel pid 
</I>&gt;<i> terminated&quot;,application_controller,&quot;{application_start_failure,rabb
</I>&gt;<i> it,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}
</I>&gt;<i> }}}&quot;}
</I>&gt;<i>
</I>&gt;<i> Crash dump was written to: erl_crash.dump
</I>&gt;<i> Kernel pid terminated (application_controller) 
</I>&gt;<i> ({application_start_failure,rabbi
</I>&gt;<i> t,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}
</I>&gt;<i> }})
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Oct 23, 2012 at 1:50 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     Ah of course - sorry i missed that guys. After so recently looking
</I>&gt;<i>     at the 3.0 cluster commands I'd forgotten that the choice of
</I>&gt;<i>     disk/ram was done that way in 2.8.x.
</I>&gt;<i>
</I>&gt;<i>     On 22 Oct 2012, at 21:26, Matthias Radestock
</I>&gt;<i>     &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     &gt; On 22/10/12 20:28, chetan dev wrote:
</I>&gt;<i>     &gt;&gt;&gt;    here is what i am doing
</I>&gt;<i>     &gt;&gt;&gt;    1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; yes, but...
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&gt;&gt; i clustered them as given on rabbitmq clustering documentation
</I>&gt;<i>     for e.g
</I>&gt;<i>     &gt;&gt;&gt; on the first place both nodes are running
</I>&gt;<i>     &gt;&gt;&gt; now i stopped app using rabbitmqctl stop_app then i reset that
</I>&gt;<i>     node than
</I>&gt;<i>     &gt;&gt;&gt; i clusterd that node with another using rabbitmqctl cluster
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;<i>     &gt;&gt;&gt; then i started the node using rabbitmqctl start_app
</I>&gt;<i>     &gt;&gt;&gt; when i checked the cluster status it was showing fine then i
</I>&gt;<i>     did as i
</I>&gt;<i>     &gt;&gt;&gt; mentioned earlier
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; That will make <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> a *ram* node. To make both nodes
</I>&gt;<i>     disk nodes the node itself would have to be mentioned in the
</I>&gt;<i>     cluster command too, i.e. 'rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHAR</A>
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>'.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&gt;&gt;    2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop
</I>&gt;<i>     commnad
</I>&gt;<i>     &gt;&gt;&gt;    3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server
</I>&gt;<i>     &gt;&gt;&gt;    start commnad
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; You have just stopped and restarted the clusters' only disk
</I>&gt;<i>     node. Rabbit clusters won't function properly if they have only
</I>&gt;<i>     ram nodes.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&gt;&gt;    4. and then i check cluster status it shows only one
</I>&gt;<i>     running node
</I>&gt;<i>     &gt;&gt;&gt;    Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;<i>     &gt;&gt;&gt;    [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;<i>     &gt;&gt;&gt;     {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;<i>     &gt;&gt;&gt;    ...done.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Try running that command against <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.</A> I suspect it
</I>&gt;<i>     will tell you that it only knows about itself.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Anyway, I suggest you change your cluster configuration s.t.
</I>&gt;<i>     both nodes are disk nodes.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Regards,
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Matthias.
</I>&gt;<i>     &gt; _______________________________________________
</I>&gt;<i>     &gt; rabbitmq-discuss mailing list
</I>&gt;<i>     &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i>     &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     rabbitmq-discuss mailing list
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Cheten  Dev
</I>&gt;<i>
</I>&gt;<i> B.Tech Final Year
</I>&gt;<i> Dept. of Electrical Engg.
</I>&gt;<i> IIT Delhi, New Delhi
</I>&gt;<i> ph 8527333215
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/7ad3d6e3/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/7ad3d6e3/attachment-0001.htm</A>&gt;

------------------------------

Message: 38
Date: Tue, 23 Oct 2012 10:18:52 +0100
From: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Memory leak caused by error_logger in
2.8.6?
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">508660FC.8020706 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

On 23/10/12 00:05, Travis wrote:
&gt;<i>     {total_heap_size,105953765},
</I>&gt;<i>     {heap_size,12538050},
</I>
&gt;<i> Is there a way to tell what's really going on with the error_logger
</I>&gt;<i> and if we're really generating so many messages that it's causing
</I>&gt;<i> memory to balloon so much?
</I>
Hmm.

Looks like it is progressing too slowly towards GC; what happens if you 
GC it manually?

We are considering adding some background process that will GC the 
biggest process every so often, since it seems to be possible to end up 
with processes that consume a lot of memory but haven't chalked up 
enough reductions to get GCed.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware


------------------------------

Message: 39
Date: Tue, 23 Oct 2012 14:51:15 +0530
From: chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID:
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CAB0ZxM5xb-dPXybW4wq0V+6cG1y2MEznbzue-1gCFHFy5ZTU_w at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

Yes , but now the node is failing to start because it is not able to find
other node for clustering
so how do i reset this node to run it normally?

Thanks

On Tue, Oct 23, 2012 at 2:38 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:

&gt;<i>  Don't do that - take the second node out of the cluster whilst the other
</I>&gt;<i> node(s) are still running, so that they can see it leaving. See the
</I>&gt;<i> clustering transcripts in <A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A> for
</I>&gt;<i> details.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 10/23/2012 09:46 AM, chetan dev wrote:
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>  Thanks you very much for this information
</I>&gt;<i> another problem i am facing is i have two nodes clustered lets say
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>(ram) and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>(disc)
</I>&gt;<i> now if i stop <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmwctl stop command  and then i
</I>&gt;<i> stop  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>  using stop_app command and then reset it this way
</I>&gt;<i> i remove it from cluster and restart the node
</I>&gt;<i> now <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> starts and works fine but when i try to start
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> it fails .
</I>&gt;<i> i think it is trying to cluster with <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> but that node is
</I>&gt;<i> now not in cluster but is there a way so that i can reset <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARMand</A> start it normally
</I>&gt;<i> here is the error that i got:
</I>&gt;<i>  node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;<i> app descriptor : c:/Program Files/RabbitMQ
</I>&gt;<i> Server/rabbitmq_server-2.8.6/sbin/../
</I>&gt;<i> ebin/rabbit.app
</I>&gt;<i> home dir       : C:\Users\Acer
</I>&gt;<i> config file(s) : (none)
</I>&gt;<i> cookie hash    : +3xbT32/GKScN3yhCcE0Ag==
</I>&gt;<i> log            :
</I>&gt;<i> C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
</I>&gt;<i> sasl log       :
</I>&gt;<i> C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl</A>
</I>&gt;<i> .log
</I>&gt;<i> database dir   :
</I>&gt;<i> c:/Users/Acer/AppData/Roaming/RabbitMQ/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-mnesi</A>
</I>&gt;<i> a
</I>&gt;<i> erlang version : 5.9.1
</I>&gt;<i>
</I>&gt;<i>  -- rabbit boot start
</I>&gt;<i> starting file handle cache server
</I>&gt;<i> ...done
</I>&gt;<i> starting worker pool
</I>&gt;<i>  ...done
</I>&gt;<i> starting database                                                     ...
</I>&gt;<i>
</I>&gt;<i>  BOOT FAILED
</I>&gt;<i> ===========
</I>&gt;<i>
</I>&gt;<i>  Error description:
</I>&gt;<i>    {error,{failed_to_cluster_with,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>],
</I>&gt;<i>                                   &quot;Mnesia could not connect to any disc
</I>&gt;<i> nodes.&quot;}
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>  Log files (may contain more information):
</I>&gt;<i>    C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
</I>&gt;<i>    C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl.log</A>
</I>&gt;<i>
</I>&gt;<i>  Stack trace:
</I>&gt;<i>    [{rabbit_mnesia,init_db,3,[]},
</I>&gt;<i>     {rabbit_mnesia,init,0,[]},
</I>&gt;<i>     {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
</I>&gt;<i>     {rabbit,run_boot_step,1,[]},
</I>&gt;<i>     {rabbit,'-start/2-lc$^0/1-0-',1,[]},
</I>&gt;<i>     {rabbit,start,2,[]},
</I>&gt;<i>     {application_master,start_it_old,4,
</I>&gt;<i>                         [{file,&quot;application_master.erl&quot;},{line,274}]}]
</I>&gt;<i>
</I>&gt;<i>  {&quot;Kernel pid
</I>&gt;<i> terminated&quot;,application_controller,&quot;{application_start_failure,rabb
</I>&gt;<i>
</I>&gt;<i> it,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}
</I>&gt;<i> }}}&quot;}
</I>&gt;<i>
</I>&gt;<i>  Crash dump was written to: erl_crash.dump
</I>&gt;<i> Kernel pid terminated (application_controller)
</I>&gt;<i> ({application_start_failure,rabbi
</I>&gt;<i>
</I>&gt;<i> t,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}
</I>&gt;<i> }})
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Thanks
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Oct 23, 2012 at 1:50 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Ah of course - sorry i missed that guys. After so recently looking at the
</I>&gt;&gt;<i> 3.0 cluster commands I'd forgotten that the choice of disk/ram was done
</I>&gt;&gt;<i> that way in 2.8.x.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 22 Oct 2012, at 21:26, Matthias Radestock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; On 22/10/12 20:28, chetan dev wrote:
</I>&gt;&gt;<i> &gt;&gt;&gt;    here is what i am doing
</I>&gt;&gt;<i> &gt;&gt;&gt;    1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are clustered
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; yes, but...
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; i clustered them as given on rabbitmq clustering documentation for e.g
</I>&gt;&gt;<i> &gt;&gt;&gt; on the first place both nodes are running
</I>&gt;&gt;<i> &gt;&gt;&gt; now i stopped app using rabbitmqctl stop_app then i reset that node
</I>&gt;&gt;<i> than
</I>&gt;&gt;<i> &gt;&gt;&gt; i clusterd that node with another using rabbitmqctl cluster
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;&gt;<i> &gt;&gt;&gt; then i started the node using rabbitmqctl start_app
</I>&gt;&gt;<i> &gt;&gt;&gt; when i checked the cluster status it was showing fine then i did as i
</I>&gt;&gt;<i> &gt;&gt;&gt; mentioned earlier
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; That will make <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> a *ram* node. To make both nodes disk
</I>&gt;&gt;<i> nodes the node itself would have to be mentioned in the cluster command
</I>&gt;&gt;<i> too, i.e. 'rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHAR</A> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>'.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;    2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl stop commnad
</I>&gt;&gt;<i> &gt;&gt;&gt;    3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmq-server
</I>&gt;&gt;<i> &gt;&gt;&gt;    start commnad
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; You have just stopped and restarted the clusters' only disk node.
</I>&gt;&gt;<i> Rabbit clusters won't function properly if they have only ram nodes.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;    4. and then i check cluster status it shows only one running node
</I>&gt;&gt;<i> &gt;&gt;&gt;    Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;&gt;<i> &gt;&gt;&gt;    [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;&gt;<i> &gt;&gt;&gt;     {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;&gt;<i> &gt;&gt;&gt;    ...done.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Try running that command against <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.</A> I suspect it will
</I>&gt;&gt;<i> tell you that it only knows about itself.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Anyway, I suggest you change your cluster configuration s.t. both nodes
</I>&gt;&gt;<i> are disk nodes.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Regards,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Matthias.
</I>&gt;&gt;<i>   &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  --
</I>&gt;<i> Cheten  Dev
</I>&gt;<i>
</I>&gt;<i> B.Tech Final Year
</I>&gt;<i> Dept. of Electrical Engg.
</I>&gt;<i> IIT Delhi, New Delhi
</I>&gt;<i> ph 8527333215
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">listrabbitmq-discuss at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Cheten  Dev

B.Tech Final Year
Dept. of Electrical Engg.
IIT Delhi, New Delhi
ph 8527333215
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/51afb9ec/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/51afb9ec/attachment-0001.htm</A>&gt;

------------------------------

Message: 40
Date: Tue, 23 Oct 2012 10:28:58 +0100
From: Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Upgrading RabbitMQ2.8.6
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Matt Long &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt at crocodoc.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">5086635A.3000407 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Somewhat on purpose - due to the vagaries of our build system, we treat 
the apt repository as just another build artefact, so it gets created 
from scratch each time. I know this is not ideal.

If you want to pin to a particular version you will need to download the 
deb directly.

Cheers, Simon

On 22/10/12 17:07, Matt Long wrote:
&gt;<i> While we're on the topic of older versions, it appears they are removed
</I>&gt;<i> from the RabbitMQ APT repository; only the newest version is ever
</I>&gt;<i> available. Is this done on purpose? It has led to some issues for us
</I>&gt;<i> since we specify explicit package versions in our provisioning system
</I>&gt;<i> and occasionally they'll no longer be there!
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Matt
</I>&gt;<i>
</I>&gt;<i> On Mon, Oct 22, 2012 at 4:21 AM, Matthias Radestock
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     On 19/10/12 10:24, PSL 88506 wrote:
</I>&gt;<i>
</I>&gt;<i>         When i try to understand about installation procedure for 2.8.6
</I>&gt;<i>
</I>&gt;<i>         All links are getting redirected to same page with following URL:
</I>&gt;<i>         <A HREF="http://www.rabbitmq.com/__download.html">http://www.rabbitmq.com/__download.html</A>
</I>&gt;<i>         &lt;<A HREF="http://www.rabbitmq.com/download.html">http://www.rabbitmq.com/download.html</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Links will always point to the latest version, which is 2.8.7. I
</I>&gt;<i>     recommend you install that rather than 2.8.6. If you really must
</I>&gt;<i>     install 2.8.6, follow the &quot;Older Versions / Download&quot; link on the
</I>&gt;<i>     download.html page.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Regards,
</I>&gt;<i>
</I>&gt;<i>     Matthias.
</I>&gt;<i>     _________________________________________________
</I>&gt;<i>     rabbitmq-discuss mailing list
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.__rabbitmq.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss">https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss</A>
</I>&gt;<i>     &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Matt Long
</I>&gt;<i> Cofounder and Lead Developer
</I>&gt;<i> crocodoc.com &lt;<A HREF="http://crocodoc.com/">http://crocodoc.com/</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, VMware


------------------------------

Message: 41
Date: Tue, 23 Oct 2012 10:31:32 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Clustering
To: chetan dev &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">dev440 at gmail.com</A>&gt;
Cc: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">508663F4.3040507 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; Format=&quot;flowed&quot;

Post me the *exact* commands you're using on each node, in sequence 
please. If you follow the 'Breaking up a cluster' transcript from 
<A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A> then you should not have *any* 
problems. In particular, note the use of 'force_reset' on the surviving 
node, so that it does not attempt to connect to nodes that are no longer 
part of the cluster - who's residual configuration is still present on 
the extant node we're now resetting.

On 10/23/2012 10:21 AM, chetan dev wrote:
&gt;<i> Yes , but now the node is failing to start because it is not able to 
</I>&gt;<i> find other node for clustering
</I>&gt;<i> so how do i reset this node to run it normally?
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> On Tue, Oct 23, 2012 at 2:38 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     Don't do that - take the second node out of the cluster whilst the
</I>&gt;<i>     other node(s) are still running, so that they can see it leaving.
</I>&gt;<i>     See the clustering transcripts in
</I>&gt;<i>     <A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A> for details.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     On 10/23/2012 09:46 AM, chetan dev wrote:
</I>&gt;&gt;<i>     Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Thanks you very much for this information
</I>&gt;&gt;<i>     another problem i am facing is i have two nodes clustered lets
</I>&gt;&gt;<i>     say <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>(ram) and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>(disc)
</I>&gt;&gt;<i>     now if i stop <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using rabbitmwctl stop command  and
</I>&gt;&gt;<i>     then i stop  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>  using stop_app command and then
</I>&gt;&gt;<i>     reset it this way i remove it from cluster and restart the node
</I>&gt;&gt;<i>     now <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> starts and works fine but when i try to
</I>&gt;&gt;<i>     start <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> it fails .
</I>&gt;&gt;<i>     i think it is trying to cluster with <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> but that
</I>&gt;&gt;<i>     node is now not in cluster but is there a way so that i can reset
</I>&gt;&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and start it normally
</I>&gt;&gt;<i>     here is the error that i got:
</I>&gt;&gt;<i>     node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;&gt;<i>     app descriptor : c:/Program Files/RabbitMQ
</I>&gt;&gt;<i>     Server/rabbitmq_server-2.8.6/sbin/../
</I>&gt;&gt;<i>     ebin/rabbit.app
</I>&gt;&gt;<i>     home dir       : C:\Users\Acer
</I>&gt;&gt;<i>     config file(s) : (none)
</I>&gt;&gt;<i>     cookie hash    : +3xbT32/GKScN3yhCcE0Ag==
</I>&gt;&gt;<i>     log            :
</I>&gt;&gt;<i>     C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
</I>&gt;&gt;<i>     &lt;mailto:C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>&gt;
</I>&gt;&gt;<i>     sasl log       :
</I>&gt;&gt;<i>     C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl</A>
</I>&gt;&gt;<i>     .log
</I>&gt;&gt;<i>     database dir   :
</I>&gt;&gt;<i>     c:/Users/Acer/AppData/Roaming/RabbitMQ/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-mnesi</A>
</I>&gt;&gt;<i>     a
</I>&gt;&gt;<i>     erlang version : 5.9.1
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     -- rabbit boot start
</I>&gt;&gt;<i>     starting file handle cache server                                
</I>&gt;&gt;<i>         ...done
</I>&gt;&gt;<i>     starting worker pool                                            
</I>&gt;&gt;<i>          ...done
</I>&gt;&gt;<i>     starting database                                                
</I>&gt;&gt;<i>         ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     BOOT FAILED
</I>&gt;&gt;<i>     ===========
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Error description:
</I>&gt;&gt;<i>        {error,{failed_to_cluster_with,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>],
</I>&gt;&gt;<i>                                       &quot;Mnesia could not connect to
</I>&gt;&gt;<i>     any disc nodes.&quot;}
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Log files (may contain more information):
</I>&gt;&gt;<i>     C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>
</I>&gt;&gt;<i>     &lt;mailto:C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.log</A>&gt;
</I>&gt;&gt;<i>     C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl.log</A>
</I>&gt;&gt;<i>     &lt;mailto:C:/Users/Acer/AppData/Roaming/RabbitMQ/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM-sasl.log</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Stack trace:
</I>&gt;&gt;<i>        [{rabbit_mnesia,init_db,3,[]},
</I>&gt;&gt;<i>         {rabbit_mnesia,init,0,[]},
</I>&gt;&gt;<i>         {rabbit,'-run_boot_step/1-lc$^1/1-1-',1,[]},
</I>&gt;&gt;<i>         {rabbit,run_boot_step,1,[]},
</I>&gt;&gt;<i>         {rabbit,'-start/2-lc$^0/1-0-',1,[]},
</I>&gt;&gt;<i>         {rabbit,start,2,[]},
</I>&gt;&gt;<i>         {application_master,start_it_old,4,
</I>&gt;&gt;<i>                            
</I>&gt;&gt;<i>     [{file,&quot;application_master.erl&quot;},{line,274}]}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     {&quot;Kernel pid
</I>&gt;&gt;<i>     terminated&quot;,application_controller,&quot;{application_start_failure,rabb
</I>&gt;&gt;<i>     it,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}
</I>&gt;&gt;<i>     }}}&quot;}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Crash dump was written to: erl_crash.dump
</I>&gt;&gt;<i>     Kernel pid terminated (application_controller)
</I>&gt;&gt;<i>     ({application_start_failure,rabbi
</I>&gt;&gt;<i>     t,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{rabbit,failure_during_boot}}}
</I>&gt;&gt;<i>     }})
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Thanks
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     On Tue, Oct 23, 2012 at 1:50 PM, Tim Watson
</I>&gt;&gt;<i>     &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">watson.timothy at gmail.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Ah of course - sorry i missed that guys. After so recently
</I>&gt;&gt;<i>         looking at the 3.0 cluster commands I'd forgotten that the
</I>&gt;&gt;<i>         choice of disk/ram was done that way in 2.8.x.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         On 22 Oct 2012, at 21:26, Matthias Radestock
</I>&gt;&gt;<i>         &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         &gt; On 22/10/12 20:28, chetan dev wrote:
</I>&gt;&gt;<i>         &gt;&gt;&gt;    here is what i am doing
</I>&gt;&gt;<i>         &gt;&gt;&gt;    1. two nodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> and <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> are
</I>&gt;&gt;<i>         clustered
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt; yes, but...
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt;&gt;&gt; i clustered them as given on rabbitmq clustering
</I>&gt;&gt;<i>         documentation for e.g
</I>&gt;&gt;<i>         &gt;&gt;&gt; on the first place both nodes are running
</I>&gt;&gt;<i>         &gt;&gt;&gt; now i stopped app using rabbitmqctl stop_app then i reset
</I>&gt;&gt;<i>         that node than
</I>&gt;&gt;<i>         &gt;&gt;&gt; i clusterd that node with another using rabbitmqctl
</I>&gt;&gt;<i>         cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>
</I>&gt;&gt;<i>         &gt;&gt;&gt; then i started the node using rabbitmqctl start_app
</I>&gt;&gt;<i>         &gt;&gt;&gt; when i checked the cluster status it was showing fine
</I>&gt;&gt;<i>         then i did as i
</I>&gt;&gt;<i>         &gt;&gt;&gt; mentioned earlier
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt; That will make <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> a *ram* node. To make both
</I>&gt;&gt;<i>         nodes disk nodes the node itself would have to be mentioned
</I>&gt;&gt;<i>         in the cluster command too, i.e. 'rabbitmqctl cluster
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHAR</A> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>'.
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt;&gt;&gt;    2. now i stop node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using  rabbitmqctl
</I>&gt;&gt;<i>         stop commnad
</I>&gt;&gt;<i>         &gt;&gt;&gt;    3. now i start the node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A> using
</I>&gt;&gt;<i>         rabbitmq-server
</I>&gt;&gt;<i>         &gt;&gt;&gt;    start commnad
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt; You have just stopped and restarted the clusters' only disk
</I>&gt;&gt;<i>         node. Rabbit clusters won't function properly if they have
</I>&gt;&gt;<i>         only ram nodes.
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt;&gt;&gt;    4. and then i check cluster status it shows only one
</I>&gt;&gt;<i>         running node
</I>&gt;&gt;<i>         &gt;&gt;&gt;    Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A> ...
</I>&gt;&gt;<i>         &gt;&gt;&gt;  
</I>&gt;&gt;<i>          [{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM</A>]},{ram,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]},
</I>&gt;&gt;<i>         &gt;&gt;&gt;     {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at CHETANDEV</A>]}]
</I>&gt;&gt;<i>         &gt;&gt;&gt;    ...done.
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt; Try running that command against <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at SHIKHARM.</A> I suspect
</I>&gt;&gt;<i>         it will tell you that it only knows about itself.
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt; Anyway, I suggest you change your cluster configuration
</I>&gt;&gt;<i>         s.t. both nodes are disk nodes.
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt; Regards,
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         &gt; Matthias.
</I>&gt;&gt;<i>         &gt; _______________________________________________
</I>&gt;&gt;<i>         &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i>         &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>         &gt;
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>         _______________________________________________
</I>&gt;&gt;<i>         rabbitmq-discuss mailing list
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     -- 
</I>&gt;&gt;<i>     Cheten  Dev
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     B.Tech Final Year
</I>&gt;&gt;<i>     Dept. of Electrical Engg.
</I>&gt;&gt;<i>     IIT Delhi, New Delhi
</I>&gt;&gt;<i>     ph 8527333215
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     _______________________________________________
</I>&gt;&gt;<i>     rabbitmq-discuss mailing list
</I>&gt;&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>  &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> Cheten  Dev
</I>&gt;<i>
</I>&gt;<i> B.Tech Final Year
</I>&gt;<i> Dept. of Electrical Engg.
</I>&gt;<i> IIT Delhi, New Delhi
</I>&gt;<i> ph 8527333215
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/27fa243d/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/27fa243d/attachment-0001.htm</A>&gt;

------------------------------

Message: 42
Date: Tue, 23 Oct 2012 11:05:50 +0100
From: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] STOMP 1.0 adapter escapes colon as \c
(STOMP 1.1 style)
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Michael Justin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.justin at gmx.net</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50866BFE.9060605 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1


Hi Michael,

On 23/10/12 09:48, Michael Justin wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> a test showed that a colon in a SEND frame will be escaped STOMP 
</I>&gt;<i> 1.1-style as \c, so this
</I>&gt;<i> 
</I>&gt;<i> SEND
</I>&gt;<i> destination:/queue/ExampleQueue
</I>&gt;<i> testcolon1:a:test
</I>&gt;<i> 
</I>&gt;<i> will be received as:
</I>&gt;<i> 
</I>&gt;<i> MESSAGE
</I>&gt;<i> destination:/queue/ExampleQueue
</I>&gt;<i> testcolon1:a\ctest
</I>&gt;<i> 
</I>&gt;<i> Is this as designed? The STOMP plugin page does not cover this escape 
</I>&gt;<i> mechanism, which was introduced with STOMP 1.1
</I>
The only difference in framing between 1.0 and 1.1 in the RabbitMQ STOMP
implementation at present is trimming. If the negotiated version is 1.0
then headers are trimmed. Only 1.1 frame parsing is implemented, under
the assumption that this is backwards-compatible.

Are you relying on the STOMP 1.0 behaviour w.r.t colons in header values?

&gt;<i> I also noticed that messages with header line which contains a backslash 
</I>&gt;<i> seem to be dropped on the broker side:
</I>&gt;<i> 
</I>&gt;<i> SEND
</I>&gt;<i> destination:/queue/ExampleQueue
</I>&gt;<i> testbackslash:\x
</I>&gt;<i> 
</I>&gt;<i> -&gt; the message does not appear in the Management console
</I>
This is compatible with 1.1, which says that undefined escape sequences
must be treated as a fatal protocol error.

We'd be interested in your opinion of how important strict STOMP 1.0
framing support is to help us decide whether to invest in that effort or
focus on 1.2 instead.


-Emile




------------------------------

Message: 43
Date: Tue, 23 Oct 2012 11:18:11 +0100
From: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] STOMP plugin - durable subscription
limitation
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Cc: Michael Justin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.justin at gmx.net</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">50866EE3.4000409 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=ISO-8859-1

On 23/10/12 09:27, Michael Justin wrote:
&gt;<i> This is interesting - so the behavior of the broker is not undefined, 
</I>&gt;<i> and clients could implement load balancing with durable subscribers if 
</I>&gt;<i> they all use the same subscription ID (instead of using STOMP queues), 
</I>&gt;<i> is this correct (just curious)?
</I>
Yes, I don't see anything preventing it being used in that way.


-Emile






------------------------------

Message: 44
Date: Tue, 23 Oct 2012 11:29:57 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Channel thread-safety
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">508671A5.6050007 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; Format=&quot;flowed&quot;

Actually, that's not quite right. Channels *are* thread safe in the 
java-client, and can be shared across multiple threads if you wish. As 
the Java client API documentation 
(<A HREF="http://www.rabbitmq.com/api-guide.html">http://www.rabbitmq.com/api-guide.html</A>) states however:

&quot;Channel instances are safe for use by multiple threads. Requests into a 
Channel are serialized, with only one thread being able to run a command 
on the Channel at a time. Even so, applications should prefer using a 
Channel per thread instead of sharing the same Channel across multiple 
threads.&quot;

In other words, because the transmission of AMQP commands via a given 
Channel is serialised, there is probably little or no benefit in sharing 
the channel between threads.

Unfortunately, whilst we've updated the documentation on the website to 
reflect this change (which was merged in September 2011 and released in 
2.7.0) we appear to have missed the javadocs for the Channel class - I 
will get that fixed asap so as to avoid any further confusion!

Cheers,
Tim

On 10/23/2012 02:08 AM, Laurent Vauthrin wrote:
&gt;<i> Thanks for clearing that up!
</I>&gt;<i>
</I>&gt;<i> On Mon, Oct 22, 2012 at 3:46 PM, Michael Klishin 
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     2012/10/22 Laurent Vauthrin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>         My questions are:
</I>&gt;<i>         1. Should we be using a channel per thread considering that
</I>&gt;<i>         we're synchronizing the basicPublish call anyway?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Yes. Channels are just integer on the wire and a little bit of
</I>&gt;<i>     memory allocated on the JVM heap. They are very cheap
</I>&gt;<i>     for all intents and purposes and you are much more likely to max
</I>&gt;<i>     out your OS and hardware resources (assuming 1 channel per JVM
</I>&gt;<i>     thread) before
</I>&gt;<i>     you run into issues with channel objects.
</I>&gt;<i>
</I>&gt;<i>         2. Can we just share one channel across all threads and not
</I>&gt;<i>         synchronize the call to basicPublish?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     No. The real issue with shared channels is that large messages
</I>&gt;<i>     will result in multiple protocol frames being sent
</I>&gt;<i>     for a single basicPublish operation. When publishing on the same
</I>&gt;<i>     channel from multiple threads, this may result
</I>&gt;<i>     in frames being delivered out of order:
</I>&gt;<i>
</I>&gt;<i>     T1 =&gt; basicPublish =&gt; [Frame11] [Frame12] [Frame13]
</I>&gt;<i>     T2 =&gt; basicPublish =&gt; [Frame21] [Frame22] [Frame23]
</I>&gt;<i>
</I>&gt;<i>     may result in the following delivery order, all on the same channel:
</I>&gt;<i>
</I>&gt;<i>     [Frame11][Frame21][Frame12][Frame13][Frame22][Frame23]
</I>&gt;<i>
</I>&gt;<i>     and because all frames are on the same channel, RabbitMQ won't be
</I>&gt;<i>     able to tell how to reconstruct your messages.
</I>&gt;<i>     -- 
</I>&gt;<i>     MK
</I>&gt;<i>
</I>&gt;<i>     <A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
</I>&gt;<i>     <A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     rabbitmq-discuss mailing list
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/5eefd15e/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/5eefd15e/attachment-0001.htm</A>&gt;

------------------------------

Message: 45
Date: Tue, 23 Oct 2012 11:42:58 +0100
From: Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
Subject: Re: [rabbitmq-discuss] Channel thread-safety
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Message-ID: &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">508674B2.8050706 at rabbitmq.com</A>&gt;
Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; Format=&quot;flowed&quot;

Important addendum: channel calls are *not* thread-safe for 
confirmations: The channel interface is thread-safe now, except for 
counting confirms and checking!

There is an outstanding bug to review this, and the problems associated 
with the fact that publishing and receiving a seqno is not an atomic 
operation.

Anyway - you *may* wish to share a Channel between threads or not, but 
if you're using confirms then you should *not* share a Channel between 
multiple threads. I'll make sure the javadoc changes reflect this state 
of affairs.

Cheers,
Tim

On 10/23/2012 11:29 AM, Tim Watson wrote:
&gt;<i> Actually, that's not quite right. Channels *are* thread safe in the 
</I>&gt;<i> java-client, and can be shared across multiple threads if you wish. As 
</I>&gt;<i> the Java client API documentation 
</I>&gt;<i> (<A HREF="http://www.rabbitmq.com/api-guide.html">http://www.rabbitmq.com/api-guide.html</A>) states however:
</I>&gt;<i>
</I>&gt;<i> &quot;Channel instances are safe for use by multiple threads. Requests into 
</I>&gt;<i> a Channel are serialized, with only one thread being able to run a 
</I>&gt;<i> command on the Channel at a time. Even so, applications should prefer 
</I>&gt;<i> using a Channel per thread instead of sharing the same Channel across 
</I>&gt;<i> multiple threads.&quot;
</I>&gt;<i>
</I>&gt;<i> In other words, because the transmission of AMQP commands via a given 
</I>&gt;<i> Channel is serialised, there is probably little or no benefit in 
</I>&gt;<i> sharing the channel between threads.
</I>&gt;<i>
</I>&gt;<i> Unfortunately, whilst we've updated the documentation on the website 
</I>&gt;<i> to reflect this change (which was merged in September 2011 and 
</I>&gt;<i> released in 2.7.0) we appear to have missed the javadocs for the 
</I>&gt;<i> Channel class - I will get that fixed asap so as to avoid any further 
</I>&gt;<i> confusion!
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i> On 10/23/2012 02:08 AM, Laurent Vauthrin wrote:
</I>&gt;&gt;<i> Thanks for clearing that up!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mon, Oct 22, 2012 at 3:46 PM, Michael Klishin 
</I>&gt;&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     2012/10/22 Laurent Vauthrin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>
</I>&gt;&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lvauthrin at gmail.com</A>&gt;&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         My questions are:
</I>&gt;&gt;<i>         1. Should we be using a channel per thread considering that
</I>&gt;&gt;<i>         we're synchronizing the basicPublish call anyway?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Yes. Channels are just integer on the wire and a little bit of
</I>&gt;&gt;<i>     memory allocated on the JVM heap. They are very cheap
</I>&gt;&gt;<i>     for all intents and purposes and you are much more likely to max
</I>&gt;&gt;<i>     out your OS and hardware resources (assuming 1 channel per JVM
</I>&gt;&gt;<i>     thread) before
</I>&gt;&gt;<i>     you run into issues with channel objects.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         2. Can we just share one channel across all threads and not
</I>&gt;&gt;<i>         synchronize the call to basicPublish?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     No. The real issue with shared channels is that large messages
</I>&gt;&gt;<i>     will result in multiple protocol frames being sent
</I>&gt;&gt;<i>     for a single basicPublish operation. When publishing on the same
</I>&gt;&gt;<i>     channel from multiple threads, this may result
</I>&gt;&gt;<i>     in frames being delivered out of order:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     T1 =&gt; basicPublish =&gt; [Frame11] [Frame12] [Frame13]
</I>&gt;&gt;<i>     T2 =&gt; basicPublish =&gt; [Frame21] [Frame22] [Frame23]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     may result in the following delivery order, all on the same channel:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     [Frame11][Frame21][Frame12][Frame13][Frame22][Frame23]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     and because all frames are on the same channel, RabbitMQ won't be
</I>&gt;&gt;<i>     able to tell how to reconstruct your messages.
</I>&gt;&gt;<i>     -- 
</I>&gt;&gt;<i>     MK
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     <A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
</I>&gt;&gt;<i>     <A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     _______________________________________________
</I>&gt;&gt;<i>     rabbitmq-discuss mailing list
</I>&gt;&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i>     &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/6b69fdfd/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/6b69fdfd/attachment-0001.htm</A>&gt;

------------------------------

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>


End of rabbitmq-discuss Digest, Vol 65, Issue 23
************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/ac92b725/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121023/ac92b725/attachment.htm</A>&gt;
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023280.html">[rabbitmq-discuss] STOMP 1.0 adapter escapes colon as \c (STOMP 1.1 style)
</A></li>
	<LI>Next message: <A HREF="023296.html">[rabbitmq-discuss] RABBIT MANAGEMENT HTTP API CANNOT SUPPORT	&quot;Create Queue and Exchange&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23285">[ date ]</a>
              <a href="thread.html#23285">[ thread ]</a>
              <a href="subject.html#23285">[ subject ]</a>
              <a href="author.html#23285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
