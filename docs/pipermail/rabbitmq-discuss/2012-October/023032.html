<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ stops responding for a few seconds,	logs a &quot;Context: shutdown_error&quot;,	then resumes as if nothing happened
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20stops%20responding%20for%20a%20few%20seconds%2C%0A%09logs%20a%20%22Context%3A%20shutdown_error%22%2C%0A%09then%20resumes%20as%20if%20nothing%20happened&In-Reply-To=%3C26A02451-6DDB-42BB-AB23-B2451597A93B%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023017.html">
   <LINK REL="Next"  HREF="023061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ stops responding for a few seconds,	logs a &quot;Context: shutdown_error&quot;,	then resumes as if nothing happened</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20stops%20responding%20for%20a%20few%20seconds%2C%0A%09logs%20a%20%22Context%3A%20shutdown_error%22%2C%0A%09then%20resumes%20as%20if%20nothing%20happened&In-Reply-To=%3C26A02451-6DDB-42BB-AB23-B2451597A93B%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ stops responding for a few seconds,	logs a &quot;Context: shutdown_error&quot;,	then resumes as if nothing happened">tim at rabbitmq.com
       </A><BR>
    <I>Mon Oct 15 08:25:47 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023017.html">[rabbitmq-discuss] RabbitMQ stops responding for a few seconds, logs a &quot;Context: shutdown_error&quot;, then resumes as if nothing happened
</A></li>
        <LI>Next message: <A HREF="023061.html">[rabbitmq-discuss] RabbitMQ stops responding for a few seconds, logs a &quot;Context: shutdown_error&quot;, then resumes as if nothing happened
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23032">[ date ]</a>
              <a href="thread.html#23032">[ thread ]</a>
              <a href="subject.html#23032">[ subject ]</a>
              <a href="author.html#23032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt,

Usual request for any scrubbed log(s) you can provide please! :)

Also, if you could confirm that /api/queues every 5 seconds is the only non-amqp traffic the broker(s) will be subject to, that'd be quite useful to know as well.

Cheers,

Tim


On 13 Oct 2012, at 00:43, Matt Pietrek wrote:

&gt;<i> We've hit an odd circumstance in production that we can't make heads or tails of. Our setup is two RabbitMQ 2.8.6 nodes running clustered with all HA queues.
</I>&gt;<i> 
</I>&gt;<i> In front of them is a VIP managed by a keepalive instances running on the same host as the RabbitMQ nodes. Every 5 seconds the keepalive instance runs a custom script that queries the node local broker via the HTTP API,  requesting the set of queues (/api/queues).
</I>&gt;<i> 
</I>&gt;<i> From our logs, I can see that there was a single interval where the HTTP request returned a 404 error. (The time was the same on both brokers) Previous to this moment in time, all HTTP queries were successful, and after this moment in time, all queries were sucessful - As I said, just one blip on each broker.
</I>&gt;<i> 
</I>&gt;<i> The only interesting thing we noticed in the logs was that the primary broker's <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at xxx-sasl</A> file had this little snippet about 30 seconds after the hiccup occurred:
</I>&gt;<i> 
</I>&gt;<i> =SUPERVISOR REPORT==== 12-Oct-2012::15:06:47 ===
</I>&gt;<i> Supervisor: {&lt;0.25499.41&gt;, rabbit_channel_sup_sup}
</I>&gt;<i> Context: shutdown_error
</I>&gt;<i> Reason: shutdown
</I>&gt;<i> Offender: [{pid,&lt;0.25503.41&gt;},
</I>&gt;<i> {name,channel_sup},
</I>&gt;<i> {mfa,{rabbit_channel_sup,start_link,[]}},
</I>&gt;<i> {restart_type,temporary},
</I>&gt;<i> {shutdown,infinity},
</I>&gt;<i> {child_type,supervisor}]
</I>&gt;<i> 
</I>&gt;<i> I'm mostly at a loss to process what the snippet is telling me, nor can tell if the two things are related. Any help is appreciated!
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Matt
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023017.html">[rabbitmq-discuss] RabbitMQ stops responding for a few seconds, logs a &quot;Context: shutdown_error&quot;, then resumes as if nothing happened
</A></li>
	<LI>Next message: <A HREF="023061.html">[rabbitmq-discuss] RabbitMQ stops responding for a few seconds, logs a &quot;Context: shutdown_error&quot;, then resumes as if nothing happened
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23032">[ date ]</a>
              <a href="thread.html#23032">[ thread ]</a>
              <a href="subject.html#23032">[ subject ]</a>
              <a href="author.html#23032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
