<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RABBIT MANAGEMENT HTTP API CANNOT SUPPORT	&quot;Create Queue and Exchange&quot;?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RABBIT%20MANAGEMENT%20HTTP%20API%20CANNOT%20SUPPORT%0A%09%22Create%20Queue%20and%20Exchange%22%3F&In-Reply-To=%3C201210240213188495325%40edocom.cn%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023285.html">
   <LINK REL="Next"  HREF="023304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RABBIT MANAGEMENT HTTP API CANNOT SUPPORT	&quot;Create Queue and Exchange&quot;?</H1>
    <B>johnson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RABBIT%20MANAGEMENT%20HTTP%20API%20CANNOT%20SUPPORT%0A%09%22Create%20Queue%20and%20Exchange%22%3F&In-Reply-To=%3C201210240213188495325%40edocom.cn%3E"
       TITLE="[rabbitmq-discuss] RABBIT MANAGEMENT HTTP API CANNOT SUPPORT	&quot;Create Queue and Exchange&quot;?">johnson at edocom.cn
       </A><BR>
    <I>Tue Oct 23 19:13:19 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023285.html">[rabbitmq-discuss] Issues about RabbitMQ Management HTTP API
</A></li>
        <LI>Next message: <A HREF="023304.html">[rabbitmq-discuss] RABBIT MANAGEMENT HTTP API CANNOT SUPPORT	&quot;Create Queue and Exchange&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23296">[ date ]</a>
              <a href="thread.html#23296">[ thread ]</a>
              <a href="subject.html#23296">[ subject ]</a>
              <a href="author.html#23296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I wrote a sample code to use Rabbitmq management HTTP API. For &quot;Create a new vhost&quot;, it works fine.

    HttpPut httpput httpput = new HttpPut();
httpput.setHeader(&quot;content-type&quot;, &quot;application/json&quot;);
    httpput.setURI(new URI(&quot;<A HREF="http://192.168.2.129:55672/api/vhosts/my-vhost&quot;">http://192.168.2.129:55672/api/vhosts/my-vhost&quot;</A>));
    DefaultHttpClient httpclient = new DefaultHttpClient();  
    httpclient.getCredentialsProvider().setCredentials(new AuthScope(&quot;192.168.2.129&quot;, 55672),
                                            new UsernamePasswordCredentials(&quot;guest&quot;, &quot;guest&quot;));
    HttpResponse response = httpclient.execute(httpput);


But if I want to create a new Exchange or Queue using the same code, it always returns NoHTTPResponseException. It seems that once I setEntity for httpput, the exception occurs.

    HttpPut httpput = new HttpPut();
    httpput.setHeader(&quot;content-type&quot;, &quot;application/json&quot;);

    JSONObject param = new JSONObject();
    param.put(&quot;type&quot;, &quot;direct&quot;);
    StringEntity  entity = new StringEntity(param.toString());
    httpput.setEntity(entity);

    httpput.setURI(new URI(&quot;<A HREF="http://192.168.2.129:55672/api/exchanges/%2f/my-new-exchange&quot;">http://192.168.2.129:55672/api/exchanges/%2f/my-new-exchange&quot;</A>));
    DefaultHttpClient httpclient = new DefaultHttpClient();  
    httpclient.getCredentialsProvider().setCredentials(new AuthScope(&quot;192.168.2.129&quot;, 55672),
                                            new UsernamePasswordCredentials(&quot;guest&quot;, &quot;guest&quot;));
    
    HttpResponse response = httpclient.execute(httpput);


Could anyone give me some example how to use HTTP API? Thanks.

Johnson



Best regards,
Johnson &#21016;&#23792;
MOBILE:13776621689                                                                 
TEL: 025-83191712
FAX: 025-58783331
&#22320;&#22336;&#65306; &#21335;&#20140;&#24066;&#38632;&#33457;&#21306;&#36719;&#20214;&#22823;&#36947;48&#21495;&#33487;&#35946;&#22269;&#38469;&#24191;&#22330;A&#24162;&#19968;&#27004;A&#21306;
&#37038;&#32534;&#65306; 210012
 Information System Co. Ltd.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121024/169d91c6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121024/169d91c6/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 14489 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121024/169d91c6/attachment.jpeg">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121024/169d91c6/attachment.jpeg</A>&gt;
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023285.html">[rabbitmq-discuss] Issues about RabbitMQ Management HTTP API
</A></li>
	<LI>Next message: <A HREF="023304.html">[rabbitmq-discuss] RABBIT MANAGEMENT HTTP API CANNOT SUPPORT	&quot;Create Queue and Exchange&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23296">[ date ]</a>
              <a href="thread.html#23296">[ thread ]</a>
              <a href="subject.html#23296">[ subject ]</a>
              <a href="author.html#23296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
