<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] do we need to delete data folder during rpm	upgrades?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20do%20we%20need%20to%20delete%20data%20folder%20during%20rpm%0A%09upgrades%3F&In-Reply-To=%3CCAJinw2rWhAYSM3th4m--CH4_Evxfu%3D_5nR9vCgno%3DXAM5xrZjw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022870.html">
   <LINK REL="Next"  HREF="022891.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] do we need to delete data folder during rpm	upgrades?</H1>
    <B>Nithya Vijayakumar</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20do%20we%20need%20to%20delete%20data%20folder%20during%20rpm%0A%09upgrades%3F&In-Reply-To=%3CCAJinw2rWhAYSM3th4m--CH4_Evxfu%3D_5nR9vCgno%3DXAM5xrZjw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] do we need to delete data folder during rpm	upgrades?">nithyanirmal at gmail.com
       </A><BR>
    <I>Fri Oct  5 18:52:19 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022870.html">[rabbitmq-discuss] do we need to delete data folder during rpm upgrades?
</A></li>
        <LI>Next message: <A HREF="022891.html">[rabbitmq-discuss] do we need to delete data folder during rpm upgrades?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22874">[ date ]</a>
              <a href="thread.html#22874">[ thread ]</a>
              <a href="subject.html#22874">[ subject ]</a>
              <a href="author.html#22874">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Simon. After the rpm upgrade, when we try to start the nodes and
they error out. We also tried killall -u rabbitmq before restart. Issue
doesn't happen always, only once in a while.

       {merge_schema_failed,

               &quot;Bad cookie in table definition rabbit_topic_trie_node:...


After we delete the data folder, rabbitmq starts fine. We would prefer not
to delete the data folder as we need to copy out the queues and users and
restore them.

Thanks,

Nithya


On Fri, Oct 5, 2012 at 2:35 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 04/10/12 23:28, Nithya Vijayakumar wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> We recently upgraded from 2.7.1 to 2.8.6. After the rpm upgrade, in some
</I>&gt;&gt;<i> instances we notice that our two node HA setup doesn't start until the
</I>&gt;&gt;<i> data folder is deleted. Is this required for upgrades? Is there any
</I>&gt;&gt;<i> format/schema change that might be needing this?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There are schema changes, but RabbitMQ should take care of them for you
</I>&gt;<i> automatically. What are you seeing when it doesn't start?
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121005/5c392f2b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121005/5c392f2b/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022870.html">[rabbitmq-discuss] do we need to delete data folder during rpm upgrades?
</A></li>
	<LI>Next message: <A HREF="022891.html">[rabbitmq-discuss] do we need to delete data folder during rpm upgrades?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22874">[ date ]</a>
              <a href="thread.html#22874">[ thread ]</a>
              <a href="subject.html#22874">[ subject ]</a>
              <a href="author.html#22874">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
