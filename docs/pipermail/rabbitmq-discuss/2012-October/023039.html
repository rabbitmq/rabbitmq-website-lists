<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory limit cleanup, hanging connections.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20limit%20cleanup%2C%20hanging%20connections.&In-Reply-To=%3CCAAcXTOYbW%3DwAuD77ZDLTjQzGO%2ByZtCfO9BKuO5qK2HptJF7eeA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023038.html">
   <LINK REL="Next"  HREF="023043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory limit cleanup, hanging connections.</H1>
    <B>Irmo Manie</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20limit%20cleanup%2C%20hanging%20connections.&In-Reply-To=%3CCAAcXTOYbW%3DwAuD77ZDLTjQzGO%2ByZtCfO9BKuO5qK2HptJF7eeA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Memory limit cleanup, hanging connections.">irmo.manie at gmail.com
       </A><BR>
    <I>Mon Oct 15 10:49:51 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023038.html">[rabbitmq-discuss] disconnect a node from the cluster
</A></li>
        <LI>Next message: <A HREF="023043.html">[rabbitmq-discuss] Memory limit cleanup, hanging connections.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23039">[ date ]</a>
              <a href="thread.html#23039">[ thread ]</a>
              <a href="subject.html#23039">[ subject ]</a>
              <a href="author.html#23039">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We ran into a situation where we hit a memory limit by queues being filled
upt, causing all connections to be in a blocked or blocking state.

We're killed all connections from the client side and deleted the filled up
queues.
While the broker is still cleaning up /msg_store_transient (which is
horribly slow), it also still lists all the connections as alive, being
still blocked.

Is it possible that when the broker is still in memory alarm mode, the
connections (blocked) are not checked for their heartbeat and therefore are
kept alive?

And what is the cause of the slowness of the cleanup when deleting queues
with only transient messages?

- Irmo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121015/0db0b661/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121015/0db0b661/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023038.html">[rabbitmq-discuss] disconnect a node from the cluster
</A></li>
	<LI>Next message: <A HREF="023043.html">[rabbitmq-discuss] Memory limit cleanup, hanging connections.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23039">[ date ]</a>
              <a href="thread.html#23039">[ thread ]</a>
              <a href="subject.html#23039">[ subject ]</a>
              <a href="author.html#23039">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
