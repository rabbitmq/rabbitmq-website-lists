<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Two nodes in a cluster losing sight of each	other?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Two%20nodes%20in%20a%20cluster%20losing%20sight%20of%20each%0A%09other%3F&In-Reply-To=%3CCACLE7ixh5ZWsmcX74vYJfF8MXNRFSfQMant3TiK7%2Bp57QMNEmA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023308.html">
   <LINK REL="Next"  HREF="023321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Two nodes in a cluster losing sight of each	other?</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Two%20nodes%20in%20a%20cluster%20losing%20sight%20of%20each%0A%09other%3F&In-Reply-To=%3CCACLE7ixh5ZWsmcX74vYJfF8MXNRFSfQMant3TiK7%2Bp57QMNEmA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Two nodes in a cluster losing sight of each	other?">mpietrek at skytap.com
       </A><BR>
    <I>Wed Oct 24 17:19:39 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023308.html">[rabbitmq-discuss] Two nodes in a cluster losing sight of each	other?
</A></li>
        <LI>Next message: <A HREF="023321.html">[rabbitmq-discuss] Two nodes in a cluster losing sight of each	other?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23320">[ date ]</a>
              <a href="thread.html#23320">[ thread ]</a>
              <a href="subject.html#23320">[ subject ]</a>
              <a href="author.html#23320">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Tim. I'd come across the net_ticktime before but wasn't sure it was
germane to this issue. We don't touch this value, so it would seem our VM
would have to be busy for 60 seconds. Seems somewhat unlikely (it's
dedicated to hosting MQ and nothing else), but not completely impossible.
I'll continue to dig in this direction.

Matt

On Wed, Oct 24, 2012 at 2:05 AM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:

&gt;<i> Hi Matt,
</I>&gt;<i>
</I>&gt;<i> On 24 Oct 2012, at 02:22, Matt Pietrek wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I'm trying to track down a fun one. This is with 2.8.6. (We're in the
</I>&gt;<i> process of moving these guys to 2.8.7, but want to understand what's
</I>&gt;<i> happening first.)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We have two nodes, mq1 and mq2. They simultaneously lose communication
</I>&gt;<i> with each other,  breaking the cluster, although they still continue to
</I>&gt;<i> function independently. That is, each one things the other is down.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Now the obvious solution is some sort of network partition. However, in
</I>&gt;<i> all of our extensive logs and by pouring over all sorts of system data, I
</I>&gt;<i> don't see any evidence of a a network blip. Not saying it's not possible,
</I>&gt;<i> just pretty unlikely. The only thing of note I can think of is that we were
</I>&gt;<i> in towards the end an &quot;apt-get update&quot; when this happened.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Whilst it looks like there's been a network partition here (indeed the
</I>&gt;<i> mnesia running_partitioned_network message is pretty explicit about what it
</I>&gt;<i> thinks has happened), there could be another explanation. If either node is
</I>&gt;<i> heavily loaded, it is possible that the erlang net kernel cannot get a
</I>&gt;<i> response back from the other node quickly enough, causing the distribution
</I>&gt;<i> sub system to see the other node as unreachable (which is indistinguishable
</I>&gt;<i> from 'down'). If this is what is happening, then you *could* tweak the
</I>&gt;<i> net_ticktime and give it a higher setting, allowing the net kernel more
</I>&gt;<i> time to potentially see a response from the other node. This is *not* a
</I>&gt;<i> panacea however, and can have other consequences as all the rabbits in your
</I>&gt;<i> cluster will take longer to notice if another node goes down - use with
</I>&gt;<i> caution!
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121024/063c25ca/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121024/063c25ca/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023308.html">[rabbitmq-discuss] Two nodes in a cluster losing sight of each	other?
</A></li>
	<LI>Next message: <A HREF="023321.html">[rabbitmq-discuss] Two nodes in a cluster losing sight of each	other?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23320">[ date ]</a>
              <a href="thread.html#23320">[ thread ]</a>
              <a href="subject.html#23320">[ subject ]</a>
              <a href="author.html#23320">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
