<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Per Connection Flow Control Issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Per%20Connection%20Flow%20Control%20Issue&In-Reply-To=%3CCAHZsVQYHNXSzOfCy84C5wA4J_8M%3DiBAp7%2Bcaj26nv3fK7txxvg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023341.html">
   <LINK REL="Next"  HREF="023342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Per Connection Flow Control Issue</H1>
    <B>Brendan Hay</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Per%20Connection%20Flow%20Control%20Issue&In-Reply-To=%3CCAHZsVQYHNXSzOfCy84C5wA4J_8M%3DiBAp7%2Bcaj26nv3fK7txxvg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Per Connection Flow Control Issue">brendan at soundcloud.com
       </A><BR>
    <I>Thu Oct 25 13:00:20 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023341.html">[rabbitmq-discuss] Node not running
</A></li>
        <LI>Next message: <A HREF="023342.html">[rabbitmq-discuss] Per Connection Flow Control Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23338">[ date ]</a>
              <a href="thread.html#23338">[ thread ]</a>
              <a href="subject.html#23338">[ subject ]</a>
              <a href="author.html#23338">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a strange occurrence with ruby-amqp 0.9.8 and RabbitMQ 2.8.7 /
Erlang R15B02:

Out of a few hundred connections, it appears that less than half a dozen
are marked as 'flow' in the mgmt interface.
The actual channels belonging to these connections are _not_ marked as
blocked, and are considered 'idle'.

On the client machines, netstat shows the peer sockets to have huge (and
growing) send queues.

Does anybody have any experience with similar problems? I am yet to catch
it in the act,
but it appears flow control must kick in at some point and the connection
simply does not
resume reading the pending bytes off the socket after it is issued new
credits.

Posted this here as I'm not sure who/what to point the proverbial finger
at, suggestions appreciated.

- Brendan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121025/dca27542/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121025/dca27542/attachment.htm</A>&gt;
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023341.html">[rabbitmq-discuss] Node not running
</A></li>
	<LI>Next message: <A HREF="023342.html">[rabbitmq-discuss] Per Connection Flow Control Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23338">[ date ]</a>
              <a href="thread.html#23338">[ thread ]</a>
              <a href="subject.html#23338">[ subject ]</a>
              <a href="author.html#23338">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
