<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] AMQP restart
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AMQP%20restart&In-Reply-To=%3CCAKwS4ihkJQL0GUikY0C1t62LLJntNM3BDiFssV2pjHvB27r_1Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023090.html">
   <LINK REL="Next"  HREF="023079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] AMQP restart</H1>
    <B>tom kelly</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AMQP%20restart&In-Reply-To=%3CCAKwS4ihkJQL0GUikY0C1t62LLJntNM3BDiFssV2pjHvB27r_1Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] AMQP restart">ttom.kelly at gmail.com
       </A><BR>
    <I>Mon Oct 15 16:07:10 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023090.html">[rabbitmq-discuss] Field Type 'A'
</A></li>
        <LI>Next message: <A HREF="023079.html">[rabbitmq-discuss] AMQP restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23056">[ date ]</a>
              <a href="thread.html#23056">[ thread ]</a>
              <a href="subject.html#23056">[ subject ]</a>
              <a href="author.html#23056">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi List,
New user here, debugging some code I inherited so apologies if my questions
below are irrelevant.

I'm investigating an amqp crash that I've seen in my logs a few times and
after a code review of the amqp component I'm a bit concerned that my
connections may be dying &amp; silently failing when this crash occurs.

I'm using an older version that unlinked from the process that called
&quot;start_link&quot;, anyone know why that was? I'm publishing through this channel
by calling amqp_channel:cast, so now I'm worried that if the connection &amp;
channel were closed down everything that I thought I was publishing after
this error just silently failed. And because of the unlink there's no way
the application would have known.

I plan upgrading to the latest version but I'm not sure that it has all the
features to help solve this problem. I see that the unlink is gone and the
supervision policy is still:{one_for_all, 0, 1} So I guess this means I
have to trap exits and I have responsibility for reopening the connection &amp;
channel if it dies?
But before I restart it, what happens to any attempts to publish messages?
I see there's new confirmation functionality that sounds like it might do
what's required but from my reading it seems that if amqp_channel is shut
down after a crash on the connection then all the confirm info is
discarded. Is there no way to keep this process alive and try to re-open
the connection immediately on failure?

I'm just about to plug in the new version and play with the confirmations
but any explanations of the current design might help enormously,
Thanks,
//TTom.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121015/c6319e82/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121015/c6319e82/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023090.html">[rabbitmq-discuss] Field Type 'A'
</A></li>
	<LI>Next message: <A HREF="023079.html">[rabbitmq-discuss] AMQP restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23056">[ date ]</a>
              <a href="thread.html#23056">[ thread ]</a>
              <a href="subject.html#23056">[ subject ]</a>
              <a href="author.html#23056">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
