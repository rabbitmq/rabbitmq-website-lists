<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Validity of /api/aliveness-test in a clustered	environment
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Validity%20of%20/api/aliveness-test%20in%20a%20clustered%0A%09environment&In-Reply-To=%3CCACLE7izef-nB9T_BXAx08KG6m7%2B%3DSESB9ozDY%2B8NDZR4a5ENxA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023378.html">
   <LINK REL="Next"  HREF="023381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Validity of /api/aliveness-test in a clustered	environment</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Validity%20of%20/api/aliveness-test%20in%20a%20clustered%0A%09environment&In-Reply-To=%3CCACLE7izef-nB9T_BXAx08KG6m7%2B%3DSESB9ozDY%2B8NDZR4a5ENxA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Validity of /api/aliveness-test in a clustered	environment">mpietrek at skytap.com
       </A><BR>
    <I>Fri Oct 26 01:18:12 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023378.html">[rabbitmq-discuss] Persistent messages on durable queue sometimes not delivered to consumers
</A></li>
        <LI>Next message: <A HREF="023381.html">[rabbitmq-discuss] Validity of /api/aliveness-test in a clustered environment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23365">[ date ]</a>
              <a href="thread.html#23365">[ thread ]</a>
              <a href="subject.html#23365">[ subject ]</a>
              <a href="author.html#23365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In our platform, we're using keepalive to manage a VIP that transfers
between multiple nodes that are clustered with all my queues declared HA.

On each node, keepalive runs a script every five seconds (I call it
rabbitmq_alive) which connects specifically to the local rabbitmq node on
that box and determines if the that box's rabbitmq node is responsive.

So for example, with two nodes (mq1 and mq2), each node has:

A rabbitmq instance
A keepalive instance
A rabbitmq_alive instance which connects to the local rabbitmq instance to
check its health.

So far, I've been using /api/aliveness-test/. However, I've noticed that
the /api/aliveness-test queue actually lives on ONLY mq1.  Now imagine the
case where the mq1 node goes highly unresponsive. I'm wondering if my
rabbitmq_alive check on mq2 is actually timing out if mq1 is not alive and
responding in a timely manner.

If this is an issue, I'm wondering if there are alternative, &quot;approved&quot;
manners of checking the health of an individual broker within a cluster?

Thanks,

Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121025/b550f1c1/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121025/b550f1c1/attachment.htm</A>&gt;
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023378.html">[rabbitmq-discuss] Persistent messages on durable queue sometimes not delivered to consumers
</A></li>
	<LI>Next message: <A HREF="023381.html">[rabbitmq-discuss] Validity of /api/aliveness-test in a clustered environment
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23365">[ date ]</a>
              <a href="thread.html#23365">[ thread ]</a>
              <a href="subject.html#23365">[ subject ]</a>
              <a href="author.html#23365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
