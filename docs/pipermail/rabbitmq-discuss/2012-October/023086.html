<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problem with RabbitMQ HA cluster on EC2	(Windows)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20with%20RabbitMQ%20HA%20cluster%20on%20EC2%0A%09%28Windows%29&In-Reply-To=%3CE76308DC-F385-48F1-A649-8F4778297C76%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023081.html">
   <LINK REL="Next"  HREF="023091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problem with RabbitMQ HA cluster on EC2	(Windows)</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20with%20RabbitMQ%20HA%20cluster%20on%20EC2%0A%09%28Windows%29&In-Reply-To=%3CE76308DC-F385-48F1-A649-8F4778297C76%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Problem with RabbitMQ HA cluster on EC2	(Windows)">watson.timothy at gmail.com
       </A><BR>
    <I>Tue Oct 16 15:28:33 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023081.html">[rabbitmq-discuss] Problem with RabbitMQ HA cluster on EC2 (Windows)
</A></li>
        <LI>Next message: <A HREF="023091.html">[rabbitmq-discuss] Problem with RabbitMQ HA cluster on	EC2	(Windows)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23086">[ date ]</a>
              <a href="thread.html#23086">[ thread ]</a>
              <a href="subject.html#23086">[ subject ]</a>
              <a href="author.html#23086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

On 16 Oct 2012, at 13:46, &quot;Richard Urwin&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">richard at psonar.com</A>&gt; wrote:

&gt;<i> Hi everyone,
</I>&gt;<i>  
</I>
Snip

&gt;<i> 
</I>&gt;<i> The problem is when attempting to cluster. Running the command:
</I>&gt;<i>  
</I>&gt;<i> C:\Program Files (x86)\RabbitMQ Server\rabbitmq_server-2.8.7\sbin&gt;rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ec2-XX-XX-XX-XX.compute-1.amazonaws.com</A>
</I>&gt;<i>  
</I>&gt;<i> I get the result:
</I>&gt;<i>  
</I>&gt;<i> Clustering node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at IP-0XXXXXXX</A>' with ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ec2-</A> XX-XX-XX-XX.compute-1.amazonaws.com'] ...
</I>&gt;<i> Error: {no_running_cluster_nodes,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ec2-</A> XX-XX-XX-XX.compute-1.amazonaws.com'], ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ec2-</A> XX-XX-XX-XX.compute-1.amazonaws.com']}
</I>&gt;<i>  
</I>&gt;<i> I think this is because I&#8217;m attempting to use the EC2 Public DNS.
</I>&gt;<i>  
</I>&gt;<i> I then added mappings to my hosts file, to map to my two instances:
</I>&gt;<i>  
</I>&gt;<i> 10.XXX.XX.XX     rabbit01               # Public DNS: ec2-XX-XX-XX-XX.compute-1.amazonaws.com
</I>&gt;<i> 10.XXX.XX.XX     rabbit02               # Public DNS: ec2-XX-XX-XX-XX.compute-1.amazonaws.com
</I>&gt;<i>  
</I>&gt;<i> Running the command (with different hostname):
</I>&gt;<i>  
</I>&gt;<i> C:\Program Files (x86)\RabbitMQ Server\rabbitmq_server-2.8.7\sbin&gt;rabbitmqctl cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit02</A>
</I>&gt;<i>  
</I>&gt;<i> I get the same result:
</I>&gt;<i>  
</I>&gt;<i> Clustering node 'rabbit@ IP-0AAXXXXX&#8217; with [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit02</A>] ...
</I>&gt;<i> Error: {no_running_cluster_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit02</A>],[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit02</A>]}
</I>&gt;<i>  
</I>
Ok but what do those rabbits think the node names are?

&gt;<i> I know this mapping can be used to access the other Windows computer, because I can use it to access the management console in a web browser:
</I>&gt;<i>  
</I>&gt;<i> <A HREF="http://rabbit02:55672/#/">http://rabbit02:55672/#/</A>
</I>&gt;<i>  
</I>
That doesn't mean that erlang knows the nodes as <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A> though.

&gt;<i> I then tried to change the computer name from IP-0AAXXXXX to rabbit01 (in case this was a problem) but upon reboot, it hadn&#8217;t changed.
</I>&gt;<i>  
</I>
When you start rabbit on the host, run rabbitmqctl status on the host itself and see what the node name looks like. This needs to match up so that all the nodes have a consistent view of the names. I would expect some /etc/hosts configuration to solve any naming difficulties. Remember that rabbit uses short names (without the domain) by default.

&gt;<i> Does anyone have any suggestions?
</I>&gt;<i>  
</I>&gt;<i> Thanks,
</I>&gt;<i> Rich
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121016/babc491c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121016/babc491c/attachment.htm</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023081.html">[rabbitmq-discuss] Problem with RabbitMQ HA cluster on EC2 (Windows)
</A></li>
	<LI>Next message: <A HREF="023091.html">[rabbitmq-discuss] Problem with RabbitMQ HA cluster on	EC2	(Windows)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23086">[ date ]</a>
              <a href="thread.html#23086">[ thread ]</a>
              <a href="subject.html#23086">[ subject ]</a>
              <a href="author.html#23086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
