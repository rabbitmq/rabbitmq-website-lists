<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Batching messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Batching%20messages&In-Reply-To=%3C50890F2C.1020703%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023384.html">
   <LINK REL="Next"  HREF="023373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Batching messages</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Batching%20messages&In-Reply-To=%3C50890F2C.1020703%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Batching messages">emile at rabbitmq.com
       </A><BR>
    <I>Thu Oct 25 11:06:36 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023384.html">[rabbitmq-discuss] Batching messages
</A></li>
        <LI>Next message: <A HREF="023373.html">[rabbitmq-discuss] Batching messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23332">[ date ]</a>
              <a href="thread.html#23332">[ thread ]</a>
              <a href="subject.html#23332">[ subject ]</a>
              <a href="author.html#23332">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 25/10/12 06:33, Srdan Kvrgic wrote:
&gt;<i> You think?
</I>
There may be other ways of achieving higher throughput that you should
explore first before investing in more complex solutions. A potential
improvement would be to use auto-ack or to acknowledge messages in
batches. And not to use persistence unless necessary. I assume you have
exhausted other options.

Do you get any throughput improvement if you turn off Nagle's algorithm?
Both publishing and consuming can be asynchronous when using RabbitMQ.
If that were not the case then the throughput due to batching would be
more dramatic. I suspect you will see some improvement due to network
batching when turning off Nagle's algorithm.

If the above don't give acceptable gains and you really need batching of
messages then this can be implemented in a library that sits between
your application and the broker. Such a library would be in the best
position to judge the throughput/latency trade-off and limit the batches
based on size or latency constraints. It should be able to pack messages
on the publishing side and unpack on the consuming side.

A possible approach that a library might take to rejecting an individual
message would be to acknowledge the aggregate batch message and to
re-publish the rejected message with a suitable header. Message ordering
will be lost, but this might be a close enough approximation to
rejecting an individual message in many cases.



-Emile



</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023384.html">[rabbitmq-discuss] Batching messages
</A></li>
	<LI>Next message: <A HREF="023373.html">[rabbitmq-discuss] Batching messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23332">[ date ]</a>
              <a href="thread.html#23332">[ thread ]</a>
              <a href="subject.html#23332">[ subject ]</a>
              <a href="author.html#23332">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
