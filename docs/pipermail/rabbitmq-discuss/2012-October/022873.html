<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Statistics database could not be contacted. Message rates and queue lengths will not be shown.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Statistics%20database%20could%20not%20be%20contacted.%0A%20Message%20rates%20and%20queue%20lengths%20will%20not%20be%20shown.&In-Reply-To=%3CCACLE7iy%2BKYPiE_zoignvjFgwrj-b6uhsr8Z-%2BV%2BkPdq%2BoNFUxw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022872.html">
   <LINK REL="Next"  HREF="022892.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Statistics database could not be contacted. Message rates and queue lengths will not be shown.</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Statistics%20database%20could%20not%20be%20contacted.%0A%20Message%20rates%20and%20queue%20lengths%20will%20not%20be%20shown.&In-Reply-To=%3CCACLE7iy%2BKYPiE_zoignvjFgwrj-b6uhsr8Z-%2BV%2BkPdq%2BoNFUxw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Statistics database could not be contacted. Message rates and queue lengths will not be shown.">mpietrek at skytap.com
       </A><BR>
    <I>Fri Oct  5 17:13:33 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022872.html">[rabbitmq-discuss] Statistics database could not be contacted. Message rates and queue lengths will not be shown.
</A></li>
        <LI>Next message: <A HREF="022892.html">[rabbitmq-discuss] Statistics database could not be contacted. Message rates and queue lengths will not be shown.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22873">[ date ]</a>
              <a href="thread.html#22873">[ thread ]</a>
              <a href="subject.html#22873">[ subject ]</a>
              <a href="author.html#22873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> We really don't recommend use of clusters on networks that may be subject
</I>to partitions.

A follow up question then. We run our brokers in clusters, and hopefully
nothing ever goes down, we never have network partitions, etc... (and in
fact, we've had clusters running for months at a time without issue.)

The question is, in the unfortunate event of a network partition, should we
just expect to lose the capability of the statistics database? It's
important for us to know, as I've written additional tooling that uses the
HTTP API to manipulate various things, and when the stats database isn't
available, various fields returned by the HTTP APIs (like message counts)
seem to vanish.

Thanks,

Matt

On Fri, Oct 5, 2012 at 3:21 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> Hmm. I see various messages about network partitions in the logs; that's
</I>&gt;<i> not encouraging. We really don't recommend use of clusters on networks that
</I>&gt;<i> may be subject to partitions. I suspect that may be the root of the problem.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 04/10/12 10:36, Wong Kam Hoong wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Simon,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The RabbitMQ was clustered (3 RabbitMQs), attached are the full log. The
</I>&gt;&gt;<i> problem happened in between 3-Oct to 4-Oct, I upgraded RabbitMQ to
</I>&gt;&gt;<i> v2.8.7 on 3-Oct.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks &amp; Regards,
</I>&gt;&gt;<i> Wong
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thu, Oct 4, 2012 at 5:27 PM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Hi. There's no good set of circumstances to see that message - the
</I>&gt;&gt;<i>     stats db should be restarted if it fails. Is this clustered or
</I>&gt;&gt;<i>     standalone? Can you post logs?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Cheers, Simon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     On 03/10/12 22:56, Wong Kam Hoong wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Hi RabbitMQ  team,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Recently I upgrade my rabbitmq nodes with the latest version
</I>&gt;&gt;<i>         2.8.7, but
</I>&gt;&gt;<i>         i saw weird message show on the web admin page:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         &quot;Statistics database could not be contacted. Message rates and
</I>&gt;&gt;<i> queue
</I>&gt;&gt;<i>         lengths will not be shown.&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         I not able to see any statistic such as current produce/consume
</I>&gt;&gt;<i>         rate,
</I>&gt;&gt;<i>         and how many messages in each queue.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Please advise how can i enable back the statistic.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         Regards,
</I>&gt;&gt;<i>         Wong
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         ______________________________**___________________
</I>&gt;&gt;<i>         rabbitmq-discuss mailing list
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.__rabbi</A>**tmq.com &lt;<A HREF="http://rabbitmq.com">http://rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>         &lt;mailto:rabbitmq-discuss@**lists.rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/__**cgi-bin/mailman/listinfo/__**">https://lists.rabbitmq.com/__**cgi-bin/mailman/listinfo/__**</A>
</I>&gt;&gt;<i> rabbitmq-discuss&lt;<A HREF="https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss">https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/__rabbitmq-discuss</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         &lt;<A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**</A>
</I>&gt;&gt;<i> rabbitmq-discuss&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     --
</I>&gt;&gt;<i>     Simon MacMullen
</I>&gt;&gt;<i>     RabbitMQ, VMware
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121005/4525cf4b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121005/4525cf4b/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022872.html">[rabbitmq-discuss] Statistics database could not be contacted. Message rates and queue lengths will not be shown.
</A></li>
	<LI>Next message: <A HREF="022892.html">[rabbitmq-discuss] Statistics database could not be contacted. Message rates and queue lengths will not be shown.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22873">[ date ]</a>
              <a href="thread.html#22873">[ thread ]</a>
              <a href="subject.html#22873">[ subject ]</a>
              <a href="author.html#22873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
