<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Response times for publisher confirms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Response%20times%20for%20publisher%20confirms&In-Reply-To=%3CCACxyq569DhWAA5y0GEcpmyyQ8-m3%2B4dLqrot3%2B8EdWs9ZXodZg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023077.html">
   <LINK REL="Next"  HREF="023089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Response times for publisher confirms</H1>
    <B>Aaron Pfeifer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Response%20times%20for%20publisher%20confirms&In-Reply-To=%3CCACxyq569DhWAA5y0GEcpmyyQ8-m3%2B4dLqrot3%2B8EdWs9ZXodZg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Response times for publisher confirms">aaron.pfeifer at gmail.com
       </A><BR>
    <I>Tue Oct 16 15:46:11 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023077.html">[rabbitmq-discuss] Response times for publisher confirms
</A></li>
        <LI>Next message: <A HREF="023089.html">[rabbitmq-discuss] Response times for publisher confirms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23087">[ date ]</a>
              <a href="thread.html#23087">[ thread ]</a>
              <a href="subject.html#23087">[ subject ]</a>
              <a href="author.html#23087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the notes!  A couple of clarifications:

* There aren't really any other applications running on the box -- it's
entirely meant for RabbitMQ processing only.  I've run atop during the
spikes and no other applications are writing to or reading from the disk.
 I've added atop output to the gist if there's additional info there worth
noting.  You'll notice that both RDDSK and WRDSK drop during this spike for
the RabbitMQ process. <A HREF="https://gist.github.com/3874134">https://gist.github.com/3874134</A>

* Currently we're waiting for the confirm after every publish.  It's not
ideal, but it's what we're limited to right now.  We internally &quot;batch&quot;
publishes (i.e. we group multiple related messages into a single RabbitMQ
message) just due to the reduction in network usage from compression -- is
there an additional batching mechanism supported by the RabbitMQ protocol?
(happy to dive into our batches further, but I'm not sure it's related here)

* I'd say there's a pretty constant throughput in the management UI most of
the time.

-Aaron

On Tue, Oct 16, 2012 at 7:38 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> On 16/10/12 12:28, Tim Watson wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Yes they're generally much faster than transactions. Bare in mind
</I>&gt;&gt;<i> though, that if you're asking for confirms and the messages are
</I>&gt;&gt;<i> persistent, then you're asking rabbit to fsync to disk repeatedly
</I>&gt;&gt;<i> which is very expensive. Whether or not this is related to what
</I>&gt;&gt;<i> you're seeing every 10 minutes is a little unclear to me, though some
</I>&gt;&gt;<i> of the more knowledgeable rabbits may spot something I've missed
</I>&gt;&gt;<i> here.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Nothing in rabbit is scheduled at a ten minute interval.
</I>&gt;<i>
</I>&gt;<i> I can just about imagine that with a very regular load some ten minute
</I>&gt;<i> pattern might emerge, but the more likely cause is some other application
</I>&gt;<i> causing io contention.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.</A>**rabbitmq.com&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/**cgi-bin/mailman/listinfo/**rabbitmq-discuss&lt;https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121016/47716ebc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121016/47716ebc/attachment.htm</A>&gt;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023077.html">[rabbitmq-discuss] Response times for publisher confirms
</A></li>
	<LI>Next message: <A HREF="023089.html">[rabbitmq-discuss] Response times for publisher confirms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23087">[ date ]</a>
              <a href="thread.html#23087">[ thread ]</a>
              <a href="subject.html#23087">[ subject ]</a>
              <a href="author.html#23087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
