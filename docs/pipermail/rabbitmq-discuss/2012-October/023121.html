<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Use a mysql databse table as the provider for rabbitmq queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Use%20a%20mysql%20databse%20table%20as%20the%20provider%0A%20for%20rabbitmq%20queue&In-Reply-To=%3CCAG%3DbwtOfCBi6zY0kHiHz90mHc1hmV7wJyWF6Up-9ZVXGH8E0qg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023117.html">
   <LINK REL="Next"  HREF="023125.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Use a mysql databse table as the provider for rabbitmq queue</H1>
    <B>Ryan R.</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Use%20a%20mysql%20databse%20table%20as%20the%20provider%0A%20for%20rabbitmq%20queue&In-Reply-To=%3CCAG%3DbwtOfCBi6zY0kHiHz90mHc1hmV7wJyWF6Up-9ZVXGH8E0qg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Use a mysql databse table as the provider for rabbitmq queue">ryan.rajkomar at gmail.com
       </A><BR>
    <I>Wed Oct 17 14:03:25 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="023117.html">[rabbitmq-discuss] Use a mysql databse table as the provider for rabbitmq queue
</A></li>
        <LI>Next message: <A HREF="023125.html">[rabbitmq-discuss] Use a mysql databse table as the provider for rabbitmq queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23121">[ date ]</a>
              <a href="thread.html#23121">[ thread ]</a>
              <a href="subject.html#23121">[ subject ]</a>
              <a href="author.html#23121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok I've definitely got what you're trying to say concerning the use of DBs
and message broker.

To explain a bit more, I'll answer the few questiosn you've scattered
across your reply :

Is it a distributed architecture ?

Definitely yes, each app will run on a different server

Why do I need to keep apps separate ?

Simply because my project can be viewed as a application suite composed of
about 5 different apps. The end-user will be able to choose which of the
apps he wants and I want to only provide what is absolutely necessary for
the end-user based on what he asked for, nothing more nothing less.
Therefore if the end user only wants one app out five I'm not going to
provide him with a RabbitMQ, he will have no use for it. However should he
asked for a set of apps that need to communicate, then I'll install a
RabbitMQ to let them communicate.
Now like I said, I'm looking for a way to do this without changing anything
in the apps' code.
What I'm looking for is a solution where I would have something like a
&quot;watcher&quot; external app that would keep an eye on what's going on in each
app and manage the content of each RabbitMQ queues accordingly.

That peculiar aspect of the apps is for my longterm evolution of my app :
for my personal use, the simpler approach of the code for pushing a mesage
in the queues embedded in the app would be fine. But since I'd like to make
it evolve to something else, I'd rather think ahead and try to do so right
now.

Hope these explanations help a little more.

Cheers,
Ryan.

2012/10/17 Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;

&gt;<i> On 10/17/2012 11:40 AM, Ryan R. wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I think I understand what you mean with the shared library.
</I>&gt;&gt;<i> However, in my case, RabbitMQ would only be installed if need be (meaning
</I>&gt;&gt;<i> more than one of the apps are present, and two of those need to be
</I>&gt;&gt;<i> synchronised for part of their data).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> That actually complicates the picture somewhat - is there a reason why
</I>&gt;<i> this is the case? In a typical integration architecture, the messaging
</I>&gt;<i> broker is deployed centrally (on the LAN somewhere) and clients choose
</I>&gt;<i> whether or not they want to connect to it from whatever machine they're
</I>&gt;<i> running on. To me, it is sounding like you're describing an architecture
</I>&gt;<i> where both applications reside on the same machine and assuming that the
</I>&gt;<i> broker will also need to be co-resident with them, which is not really the
</I>&gt;<i> case, though there's nothing to prohibit that either.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  That said, using a shared library would require me to &quot;include/import&quot;
</I>&gt;&gt;<i> said library when I need to, therefore making me change my app code
</I>&gt;&gt;<i> depending of the situation I'm in.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> Well yes, if you're going to add messaging capabilities to your
</I>&gt;<i> applications that don't currently support it, then you are going to have to
</I>&gt;<i> write *some* code and integrate it into them! :)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  And said library would only be required when there's a RabbitMQ available
</I>&gt;&gt;<i> anyway.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> I think you're making your life more complicated than it needs to be by
</I>&gt;<i> thinking about whether the messaging broker is available vs. not. The
</I>&gt;<i> broker should *always* be available when applications residing on different
</I>&gt;<i> machines need to communicate with one another, regardless of whether those
</I>&gt;<i> applications are running or not. Again, it feels like you're trying to deal
</I>&gt;<i> with applications running on the same machine - have I picked that up
</I>&gt;<i> correctly? It might help if you explained your architecture in a bit more
</I>&gt;<i> detail, so I can understand exactly what you're trying to achieve.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  Now a bit further in your message you talk about a listener library.
</I>&gt;&gt;<i> I'd like to know a bit more about this.
</I>&gt;&gt;<i> How would an external library be able to listen to anything happening
</I>&gt;&gt;<i> within my app ?
</I>&gt;&gt;<i> Would it be listening on the DB queries ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> No, not at all. Let's say you've got two applications, App1 and App2.
</I>&gt;<i> You'll write some library code that both applications share, that probably
</I>&gt;<i> looks something like this (with *wide* variations depending on
</I>&gt;<i> language/platform - I've just written pseudo code to keep things simple):
</I>&gt;<i>
</I>&gt;<i> ------------------------------**-------
</I>&gt;<i>
</I>&gt;<i> function init = do
</I>&gt;<i>     read_config_file_for_this_app
</I>&gt;<i>     open_connection_to_broker
</I>&gt;<i>     store_connection_somewhere_in_**memory
</I>&gt;<i> end
</I>&gt;<i>
</I>&gt;<i> function listen = do
</I>&gt;<i>     get_connection_from_memory
</I>&gt;<i>     read_message_from_broker
</I>&gt;<i>     pass_message_to_application_**thread_somehow
</I>&gt;<i>     listen
</I>&gt;<i> end
</I>&gt;<i>
</I>&gt;<i> function publish = do
</I>&gt;<i>     get_connection_from_memory
</I>&gt;<i>     send_message_to_broker
</I>&gt;<i> end
</I>&gt;<i>
</I>&gt;<i> ------------------------------**-------
</I>&gt;<i>
</I>&gt;<i> Now in your applications, you'll call the shared 'init' library function
</I>&gt;<i> when you're starting up to bootstrap the connection to the broker. When
</I>&gt;<i> your application is publishing data, it calls publish and if/when you need
</I>&gt;<i> to subscribe to data then you'll call 'listen'. The fact is that 'how to
</I>&gt;<i> listen' for incoming messages really depends on how you're going to use
</I>&gt;<i> them. But the point is that the applications read from and write to the
</I>&gt;<i> messaging broker, and do so independently of database tables. You *may*
</I>&gt;<i> decide to do something like write a middle-man application that
</I>&gt;<i> periodically reads a database table and publishes each row to the messaging
</I>&gt;<i> broker so it can be read from a queue, or do that with a worker thread
</I>&gt;<i> instead of a separate application. I would *not* do anything here with the
</I>&gt;<i> database though. If applications need to share data, then **they should
</I>&gt;<i> send it to one another via message queues.** If they need to persist data,
</I>&gt;<i> they should persist their own data in their own tables in the database, but
</I>&gt;<i> they should **not use the database to communicate with one another.** That
</I>&gt;<i> is the key thing with using messaging instead shared data(bases).
</I>&gt;<i>
</I>&gt;<i> There is an overhead in sending (and in some cases, duplicating) data
</I>&gt;<i> between applications of course. This is *more* than compensated for by the
</I>&gt;<i> reduced coupling that comes from integrating using messaging technology.
</I>&gt;<i> This approach may not be suited to integrating applications that are
</I>&gt;<i> running on the same physical machine and are tightly and deliberately
</I>&gt;<i> coupled however. I can't really elaborate on the suitability of messaging
</I>&gt;<i> for your project without understanding a good deal more about it I'm afraid.
</I>&gt;<i>
</I>&gt;<i> I hope that clears a few things up at least! :)
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121017/5dccd217/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20121017/5dccd217/attachment.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023117.html">[rabbitmq-discuss] Use a mysql databse table as the provider for rabbitmq queue
</A></li>
	<LI>Next message: <A HREF="023125.html">[rabbitmq-discuss] Use a mysql databse table as the provider for rabbitmq queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23121">[ date ]</a>
              <a href="thread.html#23121">[ thread ]</a>
              <a href="subject.html#23121">[ subject ]</a>
              <a href="author.html#23121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
