<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] message availability after close without ack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20message%20availability%20after%20close%20without%20ack&In-Reply-To=%3C1276622622.10343.17.camel%40bede%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007649.html">
   <LINK REL="Next"  HREF="007578.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] message availability after close without ack</H1>
    <B>Tim Cole</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20message%20availability%20after%20close%20without%20ack&In-Reply-To=%3C1276622622.10343.17.camel%40bede%3E"
       TITLE="[rabbitmq-discuss] message availability after close without ack">tim.cole at canonical.com
       </A><BR>
    <I>Tue Jun 15 18:23:42 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007649.html">[rabbitmq-discuss] auto-trigger for binding removal
</A></li>
        <LI>Next message: <A HREF="007578.html">[rabbitmq-discuss] message availability after close without ack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7576">[ date ]</a>
              <a href="thread.html#7576">[ thread ]</a>
              <a href="subject.html#7576">[ subject ]</a>
              <a href="author.html#7576">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My understanding had been that if a consumer is canceled (and its
channel closed) without having acked delivered messages, then those
messages become available to later consumers on the same queue.  That
doesn't actually appear to be happening, however.

I have a bit of code which is essentially doing:

 ==&gt; basic.consume
 &lt;== basic.deliver
 # transient application error happens
 ==&gt; basic.cancel
 ==&gt; channel.close

 ==&gt; channel.open
 ==&gt; basic.consume
 # no message delivered

I would expect to get a basic.deliver with the same message as before,
since the message wasn't acked the first time.  I'm not, though.  Is
there more to it than this?

[Note that I am not using no_ack, and that the queue in question is
durable and not exclusive or autodeleted]

Thanks,
Tim

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100615/d53d4615/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100615/d53d4615/attachment.pgp</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007649.html">[rabbitmq-discuss] auto-trigger for binding removal
</A></li>
	<LI>Next message: <A HREF="007578.html">[rabbitmq-discuss] message availability after close without ack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7576">[ date ]</a>
              <a href="thread.html#7576">[ thread ]</a>
              <a href="subject.html#7576">[ subject ]</a>
              <a href="author.html#7576">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
