<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Debugging rabbitmq crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Debugging%20rabbitmq%20crash&In-Reply-To=%3CAANLkTikZ-8t7A0qa7nUb7uBtdnP6NVFk0rEoaNQNo2qb%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007766.html">
   <LINK REL="Next"  HREF="007769.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Debugging rabbitmq crash</H1>
    <B>Matt Calder</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Debugging%20rabbitmq%20crash&In-Reply-To=%3CAANLkTikZ-8t7A0qa7nUb7uBtdnP6NVFk0rEoaNQNo2qb%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Debugging rabbitmq crash">mvcalder at gmail.com
       </A><BR>
    <I>Fri Jun 25 17:32:37 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007766.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
        <LI>Next message: <A HREF="007769.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7767">[ date ]</a>
              <a href="thread.html#7767">[ thread ]</a>
              <a href="subject.html#7767">[ subject ]</a>
              <a href="author.html#7767">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthew,

I had not checked, but, the client was writing right up to 6:27. The
client was processing a very large job at the time of the memory
warning, so, that makes sense. But it appears to have pushed on and
processed several hundred more jobs (each job results in 10-100+
message exchanges between client and server).

Matt



On Fri, Jun 25, 2010 at 12:16 PM, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&gt; wrote:
&gt;<i> Hi Matt,
</I>&gt;<i>
</I>&gt;<i> On Fri, Jun 25, 2010 at 12:00:07PM -0400, Matt Calder wrote:
</I>&gt;&gt;<i> =INFO REPORT==== 23-Jun-2010::01:59:00 ===
</I>&gt;&gt;<i> &#160; &#160;alarm_handler: {set,{system_memory_high_watermark,[]}}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =INFO REPORT==== 23-Jun-2010::02:02:55 ===
</I>&gt;&gt;<i> &#160; &#160;alarm_handler: {clear,system_memory_high_watermark}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =WARNING REPORT==== 23-Jun-2010::06:27:37 ===
</I>&gt;&gt;<i> exception on TCP connection &lt;0.15425.0&gt; from 127.0.0.1:47025
</I>&gt;&gt;<i> connection_closed_abruptly
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> =INFO REPORT==== 23-Jun-2010::06:27:37 ===
</I>&gt;&gt;<i> closing TCP connection &lt;0.15425.0&gt; from 127.0.0.1:47025
</I>&gt;<i>
</I>&gt;<i> This is very interesting. Rabbit did run out of memory, but then later
</I>&gt;<i> recovered. And then some 4 hours later, the client was kicked off. The
</I>&gt;<i> python client doesn't handle channel.flow (the server raises this when
</I>&gt;<i> it runs out of memory which is asking the client to stop publishing
</I>&gt;<i> messages - see <A HREF="http://www.rabbitmq.com/extensions.html#memsup">http://www.rabbitmq.com/extensions.html#memsup</A>). Do you
</I>&gt;<i> have any evidence that the client managed to do anything at all between
</I>&gt;<i> 2am and 6:30am? I wonder if there is some very long timeout somewhere
</I>&gt;<i> and that you're actually hitting a limitation in the python client which
</I>&gt;<i> for some reason takes 4.5 hours until the client gets kicked off. Lots
</I>&gt;<i> of guessing here though...
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i>
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007766.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
	<LI>Next message: <A HREF="007769.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7767">[ date ]</a>
              <a href="thread.html#7767">[ thread ]</a>
              <a href="subject.html#7767">[ subject ]</a>
              <a href="author.html#7767">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
