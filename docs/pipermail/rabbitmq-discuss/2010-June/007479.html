<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ordering of messages after txRollback()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ordering%20of%20messages%20after%20txRollback%28%29&In-Reply-To=%3C73BC8F83-C281-40F7-8AE8-10D2E1B3306C%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007477.html">
   <LINK REL="Next"  HREF="007480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ordering of messages after txRollback()</H1>
    <B>Oleg Zhurakousky</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ordering%20of%20messages%20after%20txRollback%28%29&In-Reply-To=%3C73BC8F83-C281-40F7-8AE8-10D2E1B3306C%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Ordering of messages after txRollback()">ozhurakousky at vmware.com
       </A><BR>
    <I>Sun Jun  6 19:05:49 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007477.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
        <LI>Next message: <A HREF="007480.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7479">[ date ]</a>
              <a href="thread.html#7479">[ thread ]</a>
              <a href="subject.html#7479">[ subject ]</a>
              <a href="author.html#7479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Matthew

Let me get this straight. TX are only for publishers, not consumers, thus the only way to implement TX behavior on the consumer side is by not sending ACK. Is that correct?

Since the spec is &quot;completely silent&quot; on the 'ordering', does that mean that when I retrieve messages initially and they come in order it is just a coincidence?
I was under the impression that Queue semantics imply FIFO ordering, regardless of which spec implements such Queue. Am I missing something?

Cheers
Oleg


On Jun 6, 2010, at 1:32 PM, Matthew Sackman wrote:

&gt;<i> On Sun, Jun 06, 2010 at 09:58:20AM -0700, Oleg Zhurakousky wrote:
</I>&gt;&gt;<i> I have a simple test where I receive 20 messages in the order in which they came in, then rollback each and every one of them.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Upon the next attempt to receive messages the order is completely arbitrary. Is this by design?
</I>&gt;<i> 
</I>&gt;<i> Yes, pretty much. Not quite sure what you mean by rollback though:
</I>&gt;<i> Transactions are only on what you send to the server, not what it sends
</I>&gt;<i> to you. I suspect you're not meaning to use transactions and are
</I>&gt;<i> actually just closing the connection or channel on which you've done the
</I>&gt;<i> consume, which will cause all unacked messages to be requeued. If you
</I>&gt;<i> use basic.recover{requeue=true} then the order will be more predictable,
</I>&gt;<i> however, that's a facet of the design: the spec is completely silent on
</I>&gt;<i> the order, and you should not rely on RabbitMQ doing any particular
</I>&gt;<i> ordering.
</I>&gt;<i> 
</I>&gt;<i> Matthew
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007477.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
	<LI>Next message: <A HREF="007480.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7479">[ date ]</a>
              <a href="thread.html#7479">[ thread ]</a>
              <a href="subject.html#7479">[ subject ]</a>
              <a href="author.html#7479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
