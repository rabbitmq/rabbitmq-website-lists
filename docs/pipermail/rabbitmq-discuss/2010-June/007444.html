<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20does%20not%20start%20with%20rabbit-status%0A%09plugin%20-%20broker%20is%20running&In-Reply-To=%3CB36BE88613F4AB40B178E7F6105136A205E99877%40gws-ex2.gws-muenster.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007432.html">
   <LINK REL="Next"  HREF="007445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running</H1>
    <B>Steverding, Kai</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20does%20not%20start%20with%20rabbit-status%0A%09plugin%20-%20broker%20is%20running&In-Reply-To=%3CB36BE88613F4AB40B178E7F6105136A205E99877%40gws-ex2.gws-muenster.local%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running">Kai.Steverding at gws.ms
       </A><BR>
    <I>Wed Jun  2 10:19:57 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007432.html">[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running
</A></li>
        <LI>Next message: <A HREF="007445.html">[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7444">[ date ]</a>
              <a href="thread.html#7444">[ thread ]</a>
              <a href="subject.html#7444">[ subject ]</a>
              <a href="author.html#7444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi !

Without plugins, everything is fine :

<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at rabbit-cl1</A>:~# rabbitmq-deactivate-plugins 
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at rabbit-cl1</A>:~# /etc/init.d/rabbitmq-server restart
Restarting rabbitmq-server: No nodes running
SUCCESS
rabbitmq-server.
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at rabbit-cl1</A>:~# rabbitmqctl status
Status of node '<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-cl1</A>' ...
[{running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;1.7.2&quot;},
                        {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.12&quot;},
                        {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.4&quot;},
                        {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.8&quot;},
                        {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.16.4&quot;},
                        {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.13.4&quot;}]},
 {nodes,['<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-cl1</A>']},
 {running_nodes,['<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-cl1</A>']}]
...done.

And now for the logs :


cat /var/log/rabbitmq/rabbit.log

=INFO REPORT==== 2-Jun-2010::11:16:25 ===
Memory limit set to 803MB.

=INFO REPORT==== 2-Jun-2010::11:16:25 ===
Rolling persister log to &quot;/var/lib/rabbitmq/mnesia/rabbit/rabbit_persister.LOG.previous&quot;

=INFO REPORT==== 2-Jun-2010::11:16:25 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 2-Jun-2010::11:16:25 ===
    application: rabbit_status
    exited: {shutdown,{rabbit_status_app,start,[normal,[]]}}
    type: permanent

=INFO REPORT==== 2-Jun-2010::11:16:25 ===
stopped TCP Listener on 0.0.0.0:5672

-----------------------------------------------------------------------------------------------

cat /var/log/rabbitmq/rabbit-sasl.log

=CRASH REPORT==== 2-Jun-2010::11:16:25 ===
  crasher:
    initial call: rabbit_status_web:init/1
    pid: &lt;0.156.0&gt;
    registered_name: []
    exception exit: {undef,[{httpd_util,rfc1123_date,[{{2010,6,2},{9,16,25}}]},
                            {rabbit_status_web,internal_update,1},
                            {rabbit_status_web,init,1},
                            {gen_server,init_it,6},
                            {proc_lib,init_p_do_apply,3}]}
      in function  gen_server:init_it/6
    ancestors: [rabbit_status_sup,&lt;0.154.0&gt;]
    messages: []
    links: [&lt;0.155.0&gt;]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 6765
    stack_size: 24
    reductions: 13565
  neighbours:

=SUPERVISOR REPORT==== 2-Jun-2010::11:16:25 ===
     Supervisor: {local,rabbit_status_sup}
     Context:    start_error
     Reason:     {undef,[{httpd_util,rfc1123_date,[{{2010,6,2},{9,16,25}}]},
                         {rabbit_status_web,internal_update,1},
                         {rabbit_status_web,init,1},
                         {gen_server,init_it,6},
                         {proc_lib,init_p_do_apply,3}]}
     Offender:   [{pid,undefined},
                  {name,rabbit_status_web},
                  {mfa,{rabbit_status_web,start_link,[]}},
                  {restart_type,permanent},
                  {shutdown,5000},
                  {child_type,worker}]

----------------------------------------------------------------------------------------------------

cat /var/log/rabbitmq/startup_log 
Starting all nodes...
Starting node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-cl1...</A>

+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v1.7.2  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 8-0
Copyright (C) 2007-2010 LShift Ltd., Cohesive Financial Technologies LLC., and Rabbit Technologies Ltd.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node          : <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit-cl1</A>
app descriptor: /usr/lib/rabbitmq/lib/rabbitmq_server-1.7.2/sbin/../ebin/rabbit.app
home dir      : /var/lib/rabbitmq
cookie hash   : TIQTKMN1LFm80SCVc+2Upw==
log           : /var/log/rabbitmq/rabbit.log
sasl log      : /var/log/rabbitmq/rabbit-sasl.log
database dir  : /var/lib/rabbitmq/mnesia/rabbit

starting internal event notification system                           ...done
starting logging server                                               ...done
starting database                                                     ...done
-- kernel ready
starting alarm handler                                                ...done
starting queue supervisor                                             ...done
starting node monitor                                                 ...done
starting cluster router                                               ...done
-- core initialized
starting empty DB check                                               ...done
starting codec correctness check                                      ...done
starting exchange recovery                                            ...done
starting queue recovery                                               ...done
starting persister                                                    ...done
starting guid generator                                               ...done
-- message delivery logic ready
starting error log relay                                              ...done
starting networking                                                   ...done
-- network listeners available

broker running
{&quot;Kernel pid terminated&quot;,application_controller,&quot;{application_start_failure,rabbit_status,{shutdown,{rabbit_status_app,start,[normal,[]]}}}&quot;}

--------------------------------------------------------------------------------------------------------

cat /var/log/rabbitmq/startup_err 
Erlang has closed
Error: {node_start_failed,normal}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,rabbit_status,{shutdown,{rabbit_status_app,start,[normal,[]]}}})


Mit freundlichen Gr&#252;&#223;en
Kai Steverding

_________________________________________________
GWS Gesellschaft f&#252;r Warenwirtschafts-Systeme mbH
Kr&#246;gerweg 10 - 48155 M&#252;nster
Kai Steverding
Branchensoftware-Entwicklung
Tel:   +49 (251) 7000-02
Fax:   +49 (251) 7000-3999
mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Kai.Steverding at gws.ms</A>
Internet: <A HREF="http://www.gws.ms">http://www.gws.ms</A>


GWS Gesellschaft f&#252;r Warenwirtschafts-Systeme mbH
M&#252;nster, M&#252;nchen, N&#252;rnberg, Leonberg
Gesch&#228;ftsf&#252;hrer: Dipl. Betriebswirt Helmut Benefader
Sitz: M&#252;nster (Westf.)
Amtsgericht M&#252;nster HRB 3844







-----Urspr&#252;ngliche Nachricht-----
Von: Marek Majkowski [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>] 
Gesendet: Dienstag, 1. Juni 2010 17:18
An: Steverding, Kai
Cc: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Betreff: Re: [rabbitmq-discuss] RabbitMQ does not start with rabbit-status plugin - broker is running

2010/6/1 Steverding, Kai &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Kai.Steverding at gws.ms</A>&gt;:
&gt;<i> Strange !
</I>&gt;<i> I did the same on another Ubuntu system without rabbit and get the same error. I followed your instructions step by step
</I>
That's strange.

Can you attach following logs (if they aren't too big):
/var/log/rabbitmq/rabbit.log
/var/log/rabbitmq/rabbit-sasl.log
/var/log/rabbitmq/startup_log
/var/log/rabbitmq/startup_err

Do you get the same issue without any plugins? To check:
sudo rabbitmq-deactivate-plugins
sudo /etc/init.d/rabbitmq-server restart
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007432.html">[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running
</A></li>
	<LI>Next message: <A HREF="007445.html">[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7444">[ date ]</a>
              <a href="thread.html#7444">[ thread ]</a>
              <a href="subject.html#7444">[ subject ]</a>
              <a href="author.html#7444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
