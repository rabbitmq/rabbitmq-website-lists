<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbit crash, new persister
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3CD18B2E7B-7DFA-4823-9F5A-2594EA5165C1%40tjervaag.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007659.html">
   <LINK REL="Next"  HREF="007681.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbit crash, new persister</H1>
    <B>&#216;yvind Tjervaag</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3CD18B2E7B-7DFA-4823-9F5A-2594EA5165C1%40tjervaag.com%3E"
       TITLE="[rabbitmq-discuss] Rabbit crash, new persister">oyvind at tjervaag.com
       </A><BR>
    <I>Sat Jun 19 13:59:23 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007659.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
        <LI>Next message: <A HREF="007681.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7678">[ date ]</a>
              <a href="thread.html#7678">[ thread ]</a>
              <a href="subject.html#7678">[ subject ]</a>
              <a href="author.html#7678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jun 18, 2010, at 7:51 PM, &#216;yvind Tjervaag wrote:

&gt;<i> On Jun 18, 2010, at 6:39 PM, Matthew Sackman wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hmm, I would certainly try moving it and see if life improves. I've
</I>&gt;&gt;<i> noticed Windows do strange things to files created by Rabbit / Erlang,
</I>&gt;&gt;<i> but then again, I've noticed Windows do strange things.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> You should be able to set the environment variable RABBITMQ_MNESIA_BASE
</I>&gt;&gt;<i> to the directory you want to use. When Rabbit starts up, it will display
</I>&gt;&gt;<i> this directory just under the banner so it should be pretty easy to
</I>&gt;&gt;<i> check if it's taken effect.
</I>&gt;<i> 
</I>&gt;<i> Changed the folder to c:\mnesia, but strangely enough rabbit decided it would be better to put it in;
</I>&gt;<i> 
</I>&gt;<i> c:/Program Files/RabbitMQ/rabbitmq_server-1.7.2/sbin/mnesia/rabbit-mnesia
</I>&gt;<i> 
</I>&gt;<i> .. some default value? I don't mind the location as long as it works though! I'm running a test right now to see if I can kill it again. Thanks for the help so far!
</I>&gt;<i> 
</I>&gt;<i> &#216;yvind
</I>
Tested further with the changed folder, and was looking at the contents of the mnesia store folder to see if I could see what was happening. When I start up all my components, rabbit starts creating store files (I publish at times faster than my consumer can get the messages, but in normal operation the consumer should read off all the messages in a timely manner..).

So, rabbit created, and happily deleted 42 store files before it stopped again, without me touching any files/permissions etc. Have attached the rabbit and sasl logs again, but the error is basically the same as before. No access to the file it seems.

Is there anything else I can try? I'm publishing with persistent = true as I can't loose any messages. I also tried without persistance, but the result was the same.

I'm a bit lost now as to what I should try next. Update Erlang/OTP? Change my whole architecture to use immediate messages (this would mean I would have to create my own store at the beginning of my message-chain as my datasource only outputs realtime &quot;now-values&quot;)? Write my own persister? (&lt;- yes that was a joke, although I have plans of trying out some Erlang programming at some point....)

Help? :)

/&#216;yvind

-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit-sasl.log
Type: application/octet-stream
Size: 5370 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100619/39dafdb1/attachment-0002.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100619/39dafdb1/attachment-0002.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit.log
Type: application/octet-stream
Size: 24109 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100619/39dafdb1/attachment-0003.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100619/39dafdb1/attachment-0003.obj</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007659.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
	<LI>Next message: <A HREF="007681.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7678">[ date ]</a>
              <a href="thread.html#7678">[ thread ]</a>
              <a href="subject.html#7678">[ subject ]</a>
              <a href="author.html#7678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
