<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] how does the rabbitmq transport cope with WAN links?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20does%20the%20rabbitmq%20transport%20cope%20with%0A%20WAN%20links%3F&In-Reply-To=%3C20100601155240.GE9109%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007435.html">
   <LINK REL="Next"  HREF="007437.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] how does the rabbitmq transport cope with WAN links?</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20does%20the%20rabbitmq%20transport%20cope%20with%0A%20WAN%20links%3F&In-Reply-To=%3C20100601155240.GE9109%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] how does the rabbitmq transport cope with WAN links?">matthew at rabbitmq.com
       </A><BR>
    <I>Tue Jun  1 16:52:40 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007435.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN	links?
</A></li>
        <LI>Next message: <A HREF="007437.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN links?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7436">[ date ]</a>
              <a href="thread.html#7436">[ thread ]</a>
              <a href="subject.html#7436">[ subject ]</a>
              <a href="author.html#7436">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Nikos,

On Tue, Jun 01, 2010 at 11:46:59AM -0400, Nikos Michalakis wrote:
&gt;<i> I was reading the RabbitMQ docs, but couldn't find many details on what exactly the underlying protocol is for sending messages between cluster nodes.
</I>
AMQP over TCP.

&gt;<i> I 've seen that RabbitMQ relies on distributed Erlang over TCP, but is there more specific information on how links are made reliable in RabbitMQ? More particularly I'm looking to find out more details on how RabbitMQ configures its transports between cluster nodes. 
</I>
Clustering is intended for scalability only, and really needs to work in
a LAN situation, given the all-to-all connections made between erlang
nodes in a cluster. I think it's more likely you'll find utility in the
rabbitmq-shovel, which makes a broker look like a client, hence makes it
very easy to do store-and-forward (amongst other things).

We always rely on TCP.

&gt;<i> Are there single or multiple TCP connections between nodes? 
</I>
Normally single, in a clustering environment. But if you're using the
shovel then it'll be one per shovel configuration.

&gt;<i> What happens when a TCP connection fails? Do nodes detect that event and try to reestablish the connection automatically? Distributed Erlang has APIs for detecting a node is down. Is that used in Rabbit?
</I>
Yes and yes. And the shovel does that too.

&gt;<i> Do connections rely on TCP to deal with packet loss or is there some Rabbit magic as well?
</I>
TCP is a reliable transport by definition, and sorts out packet loss and
reording itself. We rely on that.

&gt;<i> How are messages serialized into AMQP packets?
</I>
The AMQP payload is totally opaque. The client APIs tend to present just
byte arrays to set a message payload.

Matthew

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007435.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN	links?
</A></li>
	<LI>Next message: <A HREF="007437.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN links?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7436">[ date ]</a>
              <a href="thread.html#7436">[ thread ]</a>
              <a href="subject.html#7436">[ subject ]</a>
              <a href="author.html#7436">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
