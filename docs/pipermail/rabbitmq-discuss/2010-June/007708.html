<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] STOMP plugin problems (was: Claim on new ocamlmq	broker...)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20plugin%20problems%20%28was%3A%20Claim%20on%20new%20ocamlmq%0A%09broker...%29&In-Reply-To=%3CAANLkTikUftXY-tDNwKVir_8fGlp3NapJoiIToSNf6DvW%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007701.html">
   <LINK REL="Next"  HREF="007713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] STOMP plugin problems (was: Claim on new ocamlmq	broker...)</H1>
    <B>Steven Davidson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20plugin%20problems%20%28was%3A%20Claim%20on%20new%20ocamlmq%0A%09broker...%29&In-Reply-To=%3CAANLkTikUftXY-tDNwKVir_8fGlp3NapJoiIToSNf6DvW%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] STOMP plugin problems (was: Claim on new ocamlmq	broker...)">steven.davidson at physics.org
       </A><BR>
    <I>Mon Jun 21 15:16:22 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007701.html">[rabbitmq-discuss] Portability of the RabbitMQ database
</A></li>
        <LI>Next message: <A HREF="007713.html">[rabbitmq-discuss] STOMP plugin problems (was: Claim on new	ocamlmq broker...)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7708">[ date ]</a>
              <a href="thread.html#7708">[ thread ]</a>
              <a href="subject.html#7708">[ subject ]</a>
              <a href="author.html#7708">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,


&gt;<i> &gt; - our STOMP adapter was written by TonyG and is largely unloved.
</I>&gt;<i>
</I>&gt;<i> I dunno, I love it a little :-)
</I>&gt;<i>
</I>
Glad to hear it! I'm having problems with the stomp adaptor, plugin
installation and mercurial tags, I think. (But I'm new to erlang as well as
the above!)

If I do this:

hg clone <A HREF="http://hg.rabbitmq.com/rabbitmq-public-umbrella">http://hg.rabbitmq.com/rabbitmq-public-umbrella</A>
cd rabbitmq-public-umbrella/
make co
make
cd rabbitmq-stomp/
make cover
cd ../rabbitmq-server/
mkdir plugins
cd plugins/
ln -s ../../rabbitmq-stomp/
ln -s ../../rabbitmq-erlang-client/
cd ..
./scripts/rabbitmq-activate-plugins
make cleandb run

on ubuntu 10.04 LTS, the tests pass and I can use Orbited's handy STOMP test
demo to verify everything is working from outside the server (connections
passing through nginx to Orbited).

I have also installed the ubuntu package via apt-get which according to the
startup log is v1.7.2. However, I can't seem to install the stomp plugin
into this installation: I copy the .ez file into a plugins directory, run
rabbitmq-activate-plugins and start (or restart) rabbit. I get
&gt;<i> broker running
</I>&gt;<i> starting STOMP Adapter (binding to [{&quot;127.0.0.1&quot;,61613}])  ...done
</I>in the startup_log which looks good

But then the STOMP test produces this error from rabbitmq:
=INFO REPORT==== 21-Jun-2010::13:24:48 ===
starting STOMP connection &lt;0.176.0&gt; from 127.0.0.1:59714

=ERROR REPORT==== 21-Jun-2010::13:24:48 ===
STOMP error frame sent:
Message: &quot;Processing error&quot;
Detail: &quot;Processing error\n&quot;
Server private detail:
{undef,[{rabbit_reader_queue_collector,start_link,[]},
                               {rabbit_stomp_server,do_login,4},
                               {rabbit_stomp_server,process_frame,3},

{rabbit_stomp_server,process_received_bytes,2},
                               {rabbit_stomp_server,init,1},
                               {proc_lib,init_p_do_apply,3}]}

=INFO REPORT==== 21-Jun-2010::13:24:48 ===
ending STOMP connection &lt;0.176.0&gt; from 127.0.0.1:59714

I've tried hg up-ping rabbitmq-server and codegen to the 1_7_2 tag (the
other repositories don't have this tag), rebuilding and installing the
resulting plugin but no luck so far.

So my first question is: am I missing some step that would make this work?
(or alternatively are the plugins precompiled somewhere for different
releases of the broker?)

I decided some 6 months or more ago that STOMP was the way to go for my
problem (then parked the problem ;-), but lately I've seen some posts about
the rabbitmq-jsonrpc-channel that have me second-guessing myself.

I'm looking to provide a queue per client (typically connecting over
HTTP using a long polling technique) for the delivery of text based messages
(100% reliability not required). STOMP support is not a requirement for me
so I'm wondering if I should investigate
the rabbitmq-jsonrpc-channel approach and thus eliminate the Orbited
component completely: any thoughts on this? And is
the rabbitmq-jsonrpc-channel plugin more loved/robust/stable ;-) ?

Thanks,
Steven.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100621/05c775a0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100621/05c775a0/attachment.htm</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007701.html">[rabbitmq-discuss] Portability of the RabbitMQ database
</A></li>
	<LI>Next message: <A HREF="007713.html">[rabbitmq-discuss] STOMP plugin problems (was: Claim on new	ocamlmq broker...)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7708">[ date ]</a>
              <a href="thread.html#7708">[ thread ]</a>
              <a href="subject.html#7708">[ subject ]</a>
              <a href="author.html#7708">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
