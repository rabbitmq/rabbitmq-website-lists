<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] how does the rabbitmq transport cope with WAN	links?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20does%20the%20rabbitmq%20transport%20cope%20with%20WAN%0A%09links%3F&In-Reply-To=%3C48B24296-C97F-498A-B6B2-BA573BB1E1C4%40adconion.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007430.html">
   <LINK REL="Next"  HREF="007436.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] how does the rabbitmq transport cope with WAN	links?</H1>
    <B>Nikos Michalakis</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20does%20the%20rabbitmq%20transport%20cope%20with%20WAN%0A%09links%3F&In-Reply-To=%3C48B24296-C97F-498A-B6B2-BA573BB1E1C4%40adconion.com%3E"
       TITLE="[rabbitmq-discuss] how does the rabbitmq transport cope with WAN	links?">nmichalakis at adconion.com
       </A><BR>
    <I>Tue Jun  1 16:46:59 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007430.html">[rabbitmq-discuss] Can the consumer know who sent the message?
</A></li>
        <LI>Next message: <A HREF="007436.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN links?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7435">[ date ]</a>
              <a href="thread.html#7435">[ thread ]</a>
              <a href="subject.html#7435">[ subject ]</a>
              <a href="author.html#7435">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

I'm evaluating RabbitMQ to possibly replace our existing solution. We have 2 datacenters, one in the US, one in Europe and sometimes the link shows 1-10% packet loss (our RTT is about 200 ms). We have publishers and subscribers on both US+Europe. Our existing solution does not deal with packet loss very well. Our queues end up filling up and we have huge delays and/or dropped packets. We believe it might be that our solution is using RMI over a single TCP connection (among other things).

I was reading the RabbitMQ docs, but couldn't find many details on what exactly the underlying protocol is for sending messages between cluster nodes.

I 've seen that RabbitMQ relies on distributed Erlang over TCP, but is there more specific information on how links are made reliable in RabbitMQ? More particularly I'm looking to find out more details on how RabbitMQ configures its transports between cluster nodes. 

Are there single or multiple TCP connections between nodes? 

What happens when a TCP connection fails? Do nodes detect that event and try to reestablish the connection automatically? Distributed Erlang has APIs for detecting a node is down. Is that used in Rabbit?

Do connections rely on TCP to deal with packet loss or is there some Rabbit magic as well?

How are messages serialized into AMQP packets?

I found some useful information about WAN setups in this thread:
<A HREF="http://old.nabble.com/RabbitMQ-and-a-two-site-deployment-connected-via-WAN.-td28445648ef25704.html#a28445648">http://old.nabble.com/RabbitMQ-and-a-two-site-deployment-connected-via-WAN.-td28445648ef25704.html#a28445648</A>
and I've read the Distributed Erlang docs, but not much info is there either.

I was hoping to get a better understanding of the transport with these questions.

many thanks,
nikos
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007430.html">[rabbitmq-discuss] Can the consumer know who sent the message?
</A></li>
	<LI>Next message: <A HREF="007436.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN links?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7435">[ date ]</a>
              <a href="thread.html#7435">[ thread ]</a>
              <a href="subject.html#7435">[ subject ]</a>
              <a href="author.html#7435">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
