<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to implement the Aggregator pattern?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20implement%20the%20Aggregator%20pattern%3F&In-Reply-To=%3C20100625125409.GU14541%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007724.html">
   <LINK REL="Next"  HREF="007773.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to implement the Aggregator pattern?</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20implement%20the%20Aggregator%20pattern%3F&In-Reply-To=%3C20100625125409.GU14541%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] How to implement the Aggregator pattern?">matthew at rabbitmq.com
       </A><BR>
    <I>Fri Jun 25 13:54:09 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007724.html">[rabbitmq-discuss] How to implement the Aggregator pattern?
</A></li>
        <LI>Next message: <A HREF="007773.html">[rabbitmq-discuss] How to implement the Aggregator pattern?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7756">[ date ]</a>
              <a href="thread.html#7756">[ thread ]</a>
              <a href="subject.html#7756">[ subject ]</a>
              <a href="author.html#7756">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Shane,

On Wed, Jun 23, 2010 at 07:31:42AM -0700, Shane wrote:
&gt;<i> I'm trying to determine the best way to implement the Aggregator
</I>&gt;<i> pattern with RabbitMQ. For example, given consumers A, B and C, I need
</I>&gt;<i> to run C with the results of A and B.
</I>
If you have a consumer A and B, are you saying that they're actually
doing some transformation of the message(s), publishing that, and then C
needs to receive one message from A and one message from B before
starting any work?

If so, I suggest that A and B both publish the transformed message,
maybe via different exchanges, but that each message goes to a different
queue. C consumes from both queues, but sets qos prefetch to 1, and does
not ack any message until it has received one message from each queue.
If you want to be uber purist, you would wrap both of those acks in a
transaction to have them treated atomically.

But that's a fair guess from your original description so I might be
solving the wrong problem here!

Matthew
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007724.html">[rabbitmq-discuss] How to implement the Aggregator pattern?
</A></li>
	<LI>Next message: <A HREF="007773.html">[rabbitmq-discuss] How to implement the Aggregator pattern?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7756">[ date ]</a>
              <a href="thread.html#7756">[ thread ]</a>
              <a href="subject.html#7756">[ subject ]</a>
              <a href="author.html#7756">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
