<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can the consumer know who sent the message?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20the%20consumer%20know%20who%20sent%20the%20message%3F&In-Reply-To=%3C20100601145321.GC9109%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007446.html">
   <LINK REL="Next"  HREF="007435.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can the consumer know who sent the message?</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20the%20consumer%20know%20who%20sent%20the%20message%3F&In-Reply-To=%3C20100601145321.GC9109%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Can the consumer know who sent the message?">matthew at rabbitmq.com
       </A><BR>
    <I>Tue Jun  1 15:53:21 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007446.html">[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running
</A></li>
        <LI>Next message: <A HREF="007435.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN	links?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7430">[ date ]</a>
              <a href="thread.html#7430">[ thread ]</a>
              <a href="subject.html#7430">[ subject ]</a>
              <a href="author.html#7430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Bob,

On Fri, May 28, 2010 at 03:26:44PM -0500, Bob Goldstein wrote:
&gt;<i> Is there a way for the message consumer to know the rabbitmq userid of
</I>&gt;<i> the process that sent the message?
</I>
No, not by default, and intentially not by design. Of course, there's
nothing to stop you putting any information, including userid, into any
of the headers, property tables, or even the payload, when publishing a
message.

&gt;<i> I realize there is the props hash, which has a user_id attribute.
</I>&gt;<i> But I believe props is filled in by the sender, so the sender
</I>&gt;<i> could forge anything.
</I>
Yes, exactly. But non-repudiation is really something that AMQP isn't
trying to solve anyway - if you want that, then you need to layer all
sorts of extra crypto on top anyway.

&gt;<i> The best I can figure is to create a queue, and make sure that a
</I>&gt;<i> particular sender is the only one with privs to write to that queue.
</I>&gt;<i> However, that seems cumbersome, fragile, and not particularly scalable.
</I>
Well, see above about doing it &quot;properly&quot;, but you could have something
like an rpc service which hands out private/anonymous queues to
publishers and forwards the queue name to the consumer which is then
able to subscribe to the queue. There you'd be relying on the queue name
from being unforgeable, and as you say, you'd probably want to set up
some additional restrictions so that only the publisher in question can
publish. Queues aren't /that/ heavyweight - 10s of thousands are
perfectly feasible, but it depends on quite what your scalability
requirements are.

Matthew

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007446.html">[rabbitmq-discuss] RabbitMQ does not start with rabbit-status	plugin - broker is running
</A></li>
	<LI>Next message: <A HREF="007435.html">[rabbitmq-discuss] how does the rabbitmq transport cope with WAN	links?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7430">[ date ]</a>
              <a href="thread.html#7430">[ thread ]</a>
              <a href="subject.html#7430">[ subject ]</a>
              <a href="author.html#7430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
