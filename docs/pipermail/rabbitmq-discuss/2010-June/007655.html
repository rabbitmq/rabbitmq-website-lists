<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbit crash, new persister
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3C2EE6A869-2315-40DA-8CBD-9890210C6984%40tjervaag.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007651.html">
   <LINK REL="Next"  HREF="007656.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbit crash, new persister</H1>
    <B>&#216;yvind Tjervaag</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3C2EE6A869-2315-40DA-8CBD-9890210C6984%40tjervaag.com%3E"
       TITLE="[rabbitmq-discuss] Rabbit crash, new persister">oyvind at tjervaag.com
       </A><BR>
    <I>Fri Jun 18 16:41:43 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007651.html">[rabbitmq-discuss] is there java client 1.8.0 changelog or	migration howto?
</A></li>
        <LI>Next message: <A HREF="007656.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7655">[ date ]</a>
              <a href="thread.html#7655">[ thread ]</a>
              <a href="subject.html#7655">[ subject ]</a>
              <a href="author.html#7655">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

Having some problems with getting my new persister install stable. Running the new persister branch on Windows (compiled rabbit on OSX). Checked out latest sources maybe a bit over a week ago. When I don't stress rabbit too much it's behaving very well, but if I up my publish rate I can get it to crash after a couple of minutes. Maybe even under a minute.

All my clients are .NET, using version 1.7.2 of the .NET client library and my server is running Erlang dist R13B03.

When publishing small messages (maybe a couple of KB's) a couple of times per second, everything is seemingly stable and running for days. It crashes however when the messages comes in at 5 msgs/sec and the message size is around 500KB. Just doing a basic publish followed by a tx.commit for every message. Also I've been trying to figure out how to use the Channelflow in the .Net lib. Right now I don't have any code checking for it, but what exactly do I check for? Will I get it in one of the events?

I've attached the rabbit.log and rabbit-sasl.log from a crash. Can anyone see what is going wrong? I'm apparently not too good at decoding these error messages, but it seems to be the new persister?

When the crash happens rabbitmqctl list_queues does not list any queues (but is responding). If I do a stop_app and start_app the queues come back up.

Would appreciate any help :)

regards,
&#216;yvind Tjervaag

PS! Still think RabbitMQ is awesome!



-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit-sasl.log
Type: application/octet-stream
Size: 19855 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100618/40b0a914/attachment-0002.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100618/40b0a914/attachment-0002.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rabbit.log
Type: application/octet-stream
Size: 157194 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100618/40b0a914/attachment-0003.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100618/40b0a914/attachment-0003.obj</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007651.html">[rabbitmq-discuss] is there java client 1.8.0 changelog or	migration howto?
</A></li>
	<LI>Next message: <A HREF="007656.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7655">[ date ]</a>
              <a href="thread.html#7655">[ thread ]</a>
              <a href="subject.html#7655">[ subject ]</a>
              <a href="author.html#7655">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
