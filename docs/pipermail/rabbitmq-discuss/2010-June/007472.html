<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 'immediate' vs 'mandatory'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%27immediate%27%20vs%20%27mandatory%27&In-Reply-To=%3C4C0935AD.6010400%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007471.html">
   <LINK REL="Next"  HREF="007476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 'immediate' vs 'mandatory'</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%27immediate%27%20vs%20%27mandatory%27&In-Reply-To=%3C4C0935AD.6010400%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] 'immediate' vs 'mandatory'">simon at rabbitmq.com
       </A><BR>
    <I>Fri Jun  4 18:19:41 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007471.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
        <LI>Next message: <A HREF="007476.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7472">[ date ]</a>
              <a href="thread.html#7472">[ thread ]</a>
              <a href="subject.html#7472">[ subject ]</a>
              <a href="author.html#7472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/06/10 18:03, Oleg Zhurakousky wrote:
&gt;<i> Well, 'a' and 'b' are actually different IMHO.
</I>&gt;<i>
</I>&gt;<i> If I have a consumer with noAck set to 'false', then I am sending the
</I>&gt;<i> basicAck conditionally inside of the handleDelivery() method. This
</I>&gt;<i> means that even though handleDelivery() was successfully invoked, the
</I>&gt;<i> ACK might not have been sent, right?
</I>
 From the perspective of the client, or of an all-knowing observer, 
that's true. From the perspective of the server, suppose it delivers the 
message and then the connection goes away - did the client crash or lose 
power? Did it get as far as invoking handleDelivery() (or whatever the 
client API looks like) or not?

The only way it'll know the client has processed the message 
successfully is if it receives an ack.

But to return to the immediate flag, my &quot;Hmm&quot; in the last mail may have 
been premature. The spec says:

&quot;When a message arrives in a message queue, the message queue tries 
immediately to pass it to a consumer application via AMQP. If this is 
not possible, the message queue stores the message (in memory or on disk
as requested by the producer) and waits for a consumer to be ready. If 
there are no consumers, the message queue may return the message to the 
producer via AMQP (again, if the producer asked for this).&quot;

I think the motivation for this behaviour is that if the server waited 
for an ack, it could have to wait a long time.

Cheers, Simon
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007471.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
	<LI>Next message: <A HREF="007476.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7472">[ date ]</a>
              <a href="thread.html#7472">[ thread ]</a>
              <a href="subject.html#7472">[ subject ]</a>
              <a href="author.html#7472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
