<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 1.8.0 release
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%201.8.0%20release&In-Reply-To=%3C9A0230F0-96B1-46ED-91A4-B9066380D79D%40hypotheticalabs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007590.html">
   <LINK REL="Next"  HREF="007594.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 1.8.0 release</H1>
    <B>Kevin A. Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%201.8.0%20release&In-Reply-To=%3C9A0230F0-96B1-46ED-91A4-B9066380D79D%40hypotheticalabs.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 1.8.0 release">kevin at hypotheticalabs.com
       </A><BR>
    <I>Wed Jun 16 16:52:58 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007590.html">[rabbitmq-discuss] RabbitMQ 1.8.0 release
</A></li>
        <LI>Next message: <A HREF="007594.html">[rabbitmq-discuss] RabbitMQ 1.8.0 release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7593">[ date ]</a>
              <a href="thread.html#7593">[ thread ]</a>
              <a href="subject.html#7593">[ subject ]</a>
              <a href="author.html#7593">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Congrats on 1.8.0! Very interested to dig into the pluggable persistence API now that it's stabilized.

I recently had some issues with Maven and Sonatype during the last Riak release. If you're seeing bad checksum errors when attempting to close a staging repo then you need to update Maven. There was a bug which was apparently triggered by some infrastructure updates Sonatype did recently.

--Kevin
On Jun 16, 2010, at 11:10 AM, Matthew Sackman wrote:

&gt;<i> The RabbitMQ team is pleased to announce the release of RabbitMQ 1.8.0.
</I>&gt;<i> 
</I>&gt;<i> This release introduces several APIs to extend Rabbit in a pluggable
</I>&gt;<i> way, first with pluggable exchange types, and then with pluggable
</I>&gt;<i> backing queues. Other improvements include optimisations for cross-node
</I>&gt;<i> routing within a cluster, and more rigorous enforcement of channel.flow
</I>&gt;<i> to ensure that Rabbit can stop producers who are failing to obey the
</I>&gt;<i> instruction to stop sending messages to Rabbit when Rabbit comes under
</I>&gt;<i> memory pressure.
</I>&gt;<i> 
</I>&gt;<i> There are many semantic changes to bring the behaviour of Rabbit closer
</I>&gt;<i> towards the AMQP 0-9-1 specification. These are covered in detail in the
</I>&gt;<i> release notes below.
</I>&gt;<i> 
</I>&gt;<i> Please note this release of the RabbitMQ broker requires at least Erlang
</I>&gt;<i> version R12B-3.
</I>&gt;<i> 
</I>&gt;<i> This release does *not* contain the new persister, which is making good
</I>&gt;<i> progress through QA and will appear in a future release.
</I>&gt;<i> 
</I>&gt;<i> Finally, due to an issue we're currently seeing with the nexus/sonatype
</I>&gt;<i> maven repository, the 1.8.0 release is not yet available in maven. We
</I>&gt;<i> will rectify this as soon as we can.
</I>&gt;<i> 
</I>&gt;<i> For details see the attached release notes.
</I>&gt;<i> 
</I>&gt;<i> Binary and source distributions of the new release can be found in the
</I>&gt;<i> usual place, at <A HREF="http://www.rabbitmq.com/download.html">http://www.rabbitmq.com/download.html</A>
</I>&gt;<i> 
</I>&gt;<i> We recommend that all users of earlier versions of RabbitMQ upgrade to
</I>&gt;<i> this latest release.
</I>&gt;<i> 
</I>&gt;<i> As always, we welcome any questions, bug reports, and other feedback
</I>&gt;<i> on this release, as well as general suggestions for features and
</I>&gt;<i> enhancements in future releases. Mail us via the RabbitMQ discussion
</I>&gt;<i> list at <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>, or directly at
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">info at rabbitmq.com.</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i> The RabbitMQ Team
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Release: RabbitMQ 1.8.0
</I>&gt;<i> 
</I>&gt;<i> Release Highlights
</I>&gt;<i> ==================
</I>&gt;<i> 
</I>&gt;<i> server
</I>&gt;<i> ------
</I>&gt;<i> bug fixes
</I>&gt;<i> - prevent a change in host name from preventing RabbitMQ from being
</I>&gt;<i>  restarted.
</I>&gt;<i> - ensure that durable exclusive queues do not survive a restart of the
</I>&gt;<i>  broker.
</I>&gt;<i> - fix a race condition that could occur when concurrently declaring
</I>&gt;<i>  exclusive queues.
</I>&gt;<i> - ensure that queues being recovered by a node in a cluster cannot be
</I>&gt;<i>  accessed via other nodes until the queue is fully initialised.
</I>&gt;<i> - prevent bursts of declarations or deletions of queues or exchanges
</I>&gt;<i>  from exhausting mnesia's transactional capacity.
</I>&gt;<i> - prevent bursts of connections from exhausting TCP backlog buffers.
</I>&gt;<i> - various corrections to documentation to correct discrepancies
</I>&gt;<i>  between the website, the man pages, and the commands' usage outputs.
</I>&gt;<i> 
</I>&gt;<i> enhancements
</I>&gt;<i> ------------
</I>&gt;<i> - introduce a pluggable exchange type API permitting plugins to the
</I>&gt;<i>  broker to define new exchange types which can then be used by
</I>&gt;<i>  clients.
</I>&gt;<i> - introduce a backing queue API permitting plugins to the broker to
</I>&gt;<i>  define new ways in which messages can be stored.
</I>&gt;<i> - several semantic changes to bring the behaviour inline with the AMQP
</I>&gt;<i>  0-9-1 spec:
</I>&gt;<i>  + honour many of the queue exclusivity requirements for AMQP 0-9-1,
</I>&gt;<i>    such as queue redeclaration, basic.get, queue.bind and
</I>&gt;<i>    queue.unbind.
</I>&gt;<i>  + honour exchange and queue equivalence requirements for AMQP 0-9-1,
</I>&gt;<i>    especially for queue and exchange redeclaration.
</I>&gt;<i>  + ensure that exclusive queues are synchronously deleted before the
</I>&gt;<i>    connection fully closes.
</I>&gt;<i>  + permit durable queues to be bound to transient exchanges.
</I>&gt;<i>  + enforce detection and raising exceptions due to invalid and reused
</I>&gt;<i>    delivery-tags in basic.ack rigorously
</I>&gt;<i>  + queue.purge now does not remove unacknowledged messages.
</I>&gt;<i> - require clients to respond to channel.flow messages within 10
</I>&gt;<i>  seconds to avoid an exception being raised and more rigorously deal
</I>&gt;<i>  with clients that disobey channel.flow messages. See
</I>&gt;<i>  <A HREF="http://www.rabbitmq.com/extensions.html#memsup">http://www.rabbitmq.com/extensions.html#memsup</A>
</I>&gt;<i> - the server now supports the client sending channel.flow messages to
</I>&gt;<i>  temporarily halt the flow of deliveries to the client.
</I>&gt;<i> - optimise cross-node routing of messages in a cluster scenario whilst
</I>&gt;<i>  maintaining visibility guarantees.
</I>&gt;<i> - ensure that clients who present invalid credentials cannot flood the
</I>&gt;<i>  broker with requests.
</I>&gt;<i> - drop support for versions of Erlang older than R12B-3.
</I>&gt;<i> - ensure that the minimum number of frames are used to deliver
</I>&gt;<i>  messages, regardless of incoming and outgoing frame sizes.
</I>&gt;<i> - display the current version of Erlang when booting Rabbit, and
</I>&gt;<i>  ensure the version is sufficiently youthful.
</I>&gt;<i> - work around some name resolver issues, especially under Windows.
</I>&gt;<i> - introduce a Pacemaker OCF script (and then fix it, thanks to patches
</I>&gt;<i>  by Florian Haas) to permit RabbitMQ to be used in basic
</I>&gt;<i>  active/passive HA scenarios (see
</I>&gt;<i>  <A HREF="http://www.rabbitmq.com/pacemaker.html">http://www.rabbitmq.com/pacemaker.html</A>).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> java client
</I>&gt;<i> -----------
</I>&gt;<i> bug fixes
</I>&gt;<i> - fix a race condition when closing channels which could lead to the
</I>&gt;<i>  same channel being closed twice.
</I>&gt;<i> - MulticastMain could calculate negative rates, due to integer
</I>&gt;<i>  wrapping.
</I>&gt;<i> - be consistent about naming conventions.
</I>&gt;<i> 
</I>&gt;<i> enhancements
</I>&gt;<i> - Java client is now available via Maven Central.
</I>&gt;<i> - redesign the ConnectionFactory to be more idiomatic.
</I>&gt;<i> - expose server properties in connection.start.
</I>&gt;<i> - allow additional client properties to be set in connection.start_ok.
</I>&gt;<i> - attempt to infer authentication failures and construct appropriate
</I>&gt;<i>  exceptions.
</I>&gt;<i> - MulticastMain now logs returned publishes.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> .net client
</I>&gt;<i> -----------
</I>&gt;<i> bug fixes
</I>&gt;<i> - prevent memory leak due to DomainUnload event handler.
</I>&gt;<i> - improvements to catching connections which are timing out.
</I>&gt;<i> - ensure explicitly numbered closed channels return their channel
</I>&gt;<i>  number to the pool correctly.
</I>&gt;<i> - removed artificial limitation on maximum incoming message size.
</I>&gt;<i> 
</I>&gt;<i> enhancements
</I>&gt;<i> - expose server properties in connection.start.
</I>&gt;<i> - allow additional client properties to be set in connection.start_ok.
</I>&gt;<i> - attempt to infer authentication failures and construct appropriate
</I>&gt;<i>  exceptions.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> code generation
</I>&gt;<i> ---------------
</I>&gt;<i> enhancements
</I>&gt;<i> - permit multiple specifications to easily be combined and merged.
</I>&gt;<i> - permit any number of different &quot;actions&quot; in code generation.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> building &amp; packaging
</I>&gt;<i> --------------------
</I>&gt;<i> bug fixes
</I>&gt;<i> - stop the INSTALL file from being installed in the wrong place by the
</I>&gt;<i>  Debian packages.
</I>&gt;<i> 
</I>&gt;<i> enhancements
</I>&gt;<i> - source rpm (.src.rpm) packages are now available
</I>&gt;<i> - rpm packages are now noarch, matching the debs
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Upgrading
</I>&gt;<i> =========
</I>&gt;<i> The database schema and the format in which persistent messages are
</I>&gt;<i> stored have both changed since the last release (1.7.2). When
</I>&gt;<i> starting, the RabbitMQ server will detect the existence of an old
</I>&gt;<i> database and will move it to a backup location, before creating a
</I>&gt;<i> fresh, empty database, and will log a warning. If your RabbitMQ
</I>&gt;<i> installation contains important data then we recommend you contact
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">support at rabbitmq.com</A> for assistance with the upgrade.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Important notes on the AMQP 0-9-1 semantic changes
</I>&gt;<i> ==================================================
</I>&gt;<i> 
</I>&gt;<i> This release incorporates a number of semantic changes to the broker
</I>&gt;<i> behaviour which bring the broker more in-line with the AMQP 0-9-1
</I>&gt;<i> specification. We don't think any of these changes are going to be a
</I>&gt;<i> big problem for anyone, and will probably be irrelevant for most
</I>&gt;<i> people. In almost all cases they're tightening up or tidying up edge
</I>&gt;<i> cases where the 0-8 spec was incomplete or specified something
</I>&gt;<i> unhelpful. However, it's probably worth reading the list below to make
</I>&gt;<i> absolutely sure you're not depending on any of our existing weird
</I>&gt;<i> behaviour.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Reuse of delivery tags
</I>&gt;<i> ----------------------
</I>&gt;<i> 
</I>&gt;<i> In previous versions of RabbitMQ, you could ack the same message with
</I>&gt;<i> the same delivery tag multiple times. In 1.8.0 this will cause a
</I>&gt;<i> not-found exception. Note that if a message is redelivered for any
</I>&gt;<i> reason it will get a new delivery tag so you can ack it again.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Exchange equivalence
</I>&gt;<i> --------------------
</I>&gt;<i> 
</I>&gt;<i> In previous versions of RabbitMQ you could actively declare an
</I>&gt;<i> exchange with one set of durable and auto-delete parameters, then
</I>&gt;<i> actively declare it again with different parameters and get the same
</I>&gt;<i> exchange back. This now causes a precondition_failed exception, as it
</I>&gt;<i> would if the type does not match. Note that with the old behaviour the
</I>&gt;<i> exchange did not actually change to match the new parameters; you just
</I>&gt;<i> got back something that was not what you asked for.
</I>&gt;<i> 
</I>&gt;<i> In previous versions, when passively declaring an exchange, the type
</I>&gt;<i> parameter was checked (but not the durable and auto-delete
</I>&gt;<i> parameters).  Now only the name is checked. Passive declaration cannot
</I>&gt;<i> create an exchange, and exchanges are only identified by their
</I>&gt;<i> name. Therefore it does not make sense to require the other parameters
</I>&gt;<i> of exchange.declare to match the exchange declaration in the passive
</I>&gt;<i> case.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Queue equivalence
</I>&gt;<i> -----------------
</I>&gt;<i> 
</I>&gt;<i> Similarly, when actively redeclaring a queue you could vary the
</I>&gt;<i> durable and auto-delete parameters and get back a queue which did not
</I>&gt;<i> match what you asked for. Again, this is now causes a
</I>&gt;<i> precondition_failed exception.  Likewise, passive declaration of
</I>&gt;<i> queues only needs to match on the queue name, not any other
</I>&gt;<i> parameters.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Purging unacknowledged messages
</I>&gt;<i> -------------------------------
</I>&gt;<i> 
</I>&gt;<i> When queue.purge is called, messages which had been send but not
</I>&gt;<i> acknowledged used to be purged. Now they are not. This makes much more
</I>&gt;<i> sense as consumers from a queue may have no idea whether or not a
</I>&gt;<i> queue has been purged by some other client.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Binding durable queues to transient exchanges
</I>&gt;<i> ---------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> This used not to be permitted. Now it is. The binding is considered
</I>&gt;<i> transient.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Queue exclusivity enforcement
</I>&gt;<i> -----------------------------
</I>&gt;<i> 
</I>&gt;<i> In previous versions of RabbitMQ, an exclusive queue could still be
</I>&gt;<i> accessed by other connections for (un)binding or basic.get. This is now
</I>&gt;<i> not permitted.
</I>&gt;<i> 
</I>&gt;<i> Also, an exclusive queue would continue to exist for a short time after
</I>&gt;<i> the connection was closed. It's now deleted while the connection is
</I>&gt;<i> being closed (assuming that's happening in an orderly manner).
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007590.html">[rabbitmq-discuss] RabbitMQ 1.8.0 release
</A></li>
	<LI>Next message: <A HREF="007594.html">[rabbitmq-discuss] RabbitMQ 1.8.0 release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7593">[ date ]</a>
              <a href="thread.html#7593">[ thread ]</a>
              <a href="subject.html#7593">[ subject ]</a>
              <a href="author.html#7593">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
