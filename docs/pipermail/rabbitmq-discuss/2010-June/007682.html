<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbit crash, new persister
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3C05B62F3F-E2D2-4393-B3A7-B6C83F41517B%40tjervaag.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007681.html">
   <LINK REL="Next"  HREF="007684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbit crash, new persister</H1>
    <B>&#216;yvind Tjervaag</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3C05B62F3F-E2D2-4393-B3A7-B6C83F41517B%40tjervaag.com%3E"
       TITLE="[rabbitmq-discuss] Rabbit crash, new persister">oyvind at tjervaag.com
       </A><BR>
    <I>Sat Jun 19 20:46:37 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007681.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
        <LI>Next message: <A HREF="007684.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7682">[ date ]</a>
              <a href="thread.html#7682">[ thread ]</a>
              <a href="subject.html#7682">[ subject ]</a>
              <a href="author.html#7682">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jun 19, 2010, at 6:00 PM, Matthew Sackman wrote:
&gt;&gt;<i> So, rabbit created, and happily deleted 42 store files before it
</I>&gt;&gt;<i> stopped again, without me touching any files/permissions etc. Have
</I>&gt;&gt;<i> attached the rabbit and sasl logs again, but the error is basically
</I>&gt;&gt;<i> the same as before. No access to the file it seems.
</I>&gt;<i> 
</I>&gt;<i> This is bizarre and very strange. However, it seems similar to some
</I>&gt;<i> other weird reports of file handling in Erlang under Windows, for
</I>&gt;<i> example, <A HREF="http://www.erlang.org/cgi-bin/ezmlm-cgi/2/679">http://www.erlang.org/cgi-bin/ezmlm-cgi/2/679</A>
</I>
Ah, Yes, that looks familiar. I got as far as finding the file delete in RabbitMQs source but quickly had to give up on trying to modify it to check the return value as one guy suggested in your link. Would definitely like to get some Erlang practice now ;)

&gt;<i> 
</I>&gt;<i> We have in the past seen strange things going on with windows firewalls
</I>&gt;<i> and such like. It's not beyond the realms of possibility that it's some
</I>&gt;<i> virus scanner which is trying to scan the file at the same time as
</I>&gt;<i> Rabbit's trying to delete it. Maybe try to see if you could turn any
</I>&gt;<i> such things off?
</I>
No virus scanners installed, but have not fiddled with the firewall so far. 

&gt;<i> 
</I>&gt;<i> Also, in the recently released Erlang R14A, there are some comments in
</I>&gt;<i> the release notes about changes regarding file handling under Windows.
</I>&gt;<i> You might like to try that, though note that R14A is, as the name
</I>&gt;<i> suggests, an alpha release.
</I>
Understood ;) Am seeing the windows file comment in the release notes for R14A, so Alpha or not, I'm giving that a try. Installed, an so far Rabbit has gone trough and deleted about 100 store files without stopping. Crossing my fingers :)

&gt;<i> 
</I>&gt;<i> Or, the somewhat easier way out, would be to not run it under Windows!
</I>
Now, that would be the waaaay to easy way out of it :P Client requirement is Windows though, so not much I can do about that right now. If I had a choice though; yes, this would be running on a linux box ;)

Thanks again!
/&#216;yvind

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007681.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
	<LI>Next message: <A HREF="007684.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7682">[ date ]</a>
              <a href="thread.html#7682">[ thread ]</a>
              <a href="subject.html#7682">[ subject ]</a>
              <a href="author.html#7682">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
