<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Ordering of messages after txRollback()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ordering%20of%20messages%20after%20txRollback%28%29&In-Reply-To=%3C20100606173208.GA27119%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007475.html">
   <LINK REL="Next"  HREF="007479.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Ordering of messages after txRollback()</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Ordering%20of%20messages%20after%20txRollback%28%29&In-Reply-To=%3C20100606173208.GA27119%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Ordering of messages after txRollback()">matthew at rabbitmq.com
       </A><BR>
    <I>Sun Jun  6 18:32:09 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007475.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
        <LI>Next message: <A HREF="007479.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7477">[ date ]</a>
              <a href="thread.html#7477">[ thread ]</a>
              <a href="subject.html#7477">[ subject ]</a>
              <a href="author.html#7477">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jun 06, 2010 at 09:58:20AM -0700, Oleg Zhurakousky wrote:
&gt;<i> I have a simple test where I receive 20 messages in the order in which they came in, then rollback each and every one of them.
</I>&gt;<i> 
</I>&gt;<i> Upon the next attempt to receive messages the order is completely arbitrary. Is this by design?
</I>
Yes, pretty much. Not quite sure what you mean by rollback though:
Transactions are only on what you send to the server, not what it sends
to you. I suspect you're not meaning to use transactions and are
actually just closing the connection or channel on which you've done the
consume, which will cause all unacked messages to be requeued. If you
use basic.recover{requeue=true} then the order will be more predictable,
however, that's a facet of the design: the spec is completely silent on
the order, and you should not rely on RabbitMQ doing any particular
ordering.

Matthew
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007475.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
	<LI>Next message: <A HREF="007479.html">[rabbitmq-discuss] Ordering of messages after txRollback()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7477">[ date ]</a>
              <a href="thread.html#7477">[ thread ]</a>
              <a href="subject.html#7477">[ subject ]</a>
              <a href="author.html#7477">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
