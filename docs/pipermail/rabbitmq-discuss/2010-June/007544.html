<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] WCF and queue creation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20WCF%20and%20queue%20creation&In-Reply-To=%3C1753EE61AD475A47A4DEBDD983A7BBCF0B344F91%40GBR1-LDN01.uk.mizuho-sc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007543.html">
   <LINK REL="Next"  HREF="007557.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] WCF and queue creation</H1>
    <B>Jonathan Graham</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20WCF%20and%20queue%20creation&In-Reply-To=%3C1753EE61AD475A47A4DEBDD983A7BBCF0B344F91%40GBR1-LDN01.uk.mizuho-sc.com%3E"
       TITLE="[rabbitmq-discuss] WCF and queue creation">Jonathan.Graham at uk.mizuho-sc.com
       </A><BR>
    <I>Fri Jun 11 16:18:29 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007543.html">[rabbitmq-discuss] WCF and queue creation
</A></li>
        <LI>Next message: <A HREF="007557.html">[rabbitmq-discuss] WCF and queue creation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7544">[ date ]</a>
              <a href="thread.html#7544">[ thread ]</a>
              <a href="subject.html#7544">[ subject ]</a>
              <a href="author.html#7544">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Emile,

Thanks for your reply. Since my initial message I have taken a look at
the source for the RabbitMQ WCF binding and had concluded what you
confirmed.

I have two WCF services (let's call them A and B) in an existing
application.  I want to send asynchronous, one-way messages from service
A to service B.  The operation being invoked on service B can take some
time to complete, and service A's call to B is due to an end user
initiated operation on A. I don't want to make end users wait for B to
complete, hence the asynchronous requirement.  Service B is also a
little fragile and is not always available, so I want any messages sent
to it to be stored in a durable queue until B is able to process the
messages.

At present, I've been using MSMQ to meet these requirement, but for
various reasons, MSMQ has shown itself not to be fit for purpose.  A
colleague of mine recently brought RabbitMQ to my attention and its WCF
binding made it appear as if it could work as a drop-in replacement for
MSMQ, which was ideal as project time constraints mean major re-coding
at this stage is not feasible. Unfortunately because Rabbit's WCF
binding doesn't let us use durable queues, we haven't yet been able to
make use of it.

It looks like the following options are available:

1. Change the way the WCF binding works so that existing queues can be
used and/or that queues declared by the binding can be made durable. (As
an aside, if I can find the time, I wouldn't mind contributing this
change, but I don't have a whole lot of free time at present.)

2. No longer implement service B as a WCF service and instead use the
RabbitMQ .NET client API to consume messages from RabbitMQ.

3. Find some other message queue with WCF bindings.

Your advice would be appreciated.

Regards,
Jon

-----Original Message-----
From: Emile Joubert [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>] 
Sent: 11 June 2010 15:40
To: Graham Jonathan
Cc: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] WCF and queue creation



Hi Jon,

All service queues are autogenerated and I can confirm that there is no 
way to make use of an pre-declared queue. Perhaps there is a different 
way of achieving your aim - can you explain your use case?

Regards

Emile


On 10/06/10 13:11, Jon Graham wrote:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I've just started trying to use RabbitMQ with WCF.  What I'd like to
</I>be able
&gt;<i> to do is send one way messages to a WCF service and have RabbitMQ
</I>provide a
&gt;<i> durable queue for messages sent to the WCF service.  I have been able
</I>to set
&gt;<i> up a one way messaging example with relative ease, but the problem
</I>I've
&gt;<i> encountered is that the queue is always generated on the fly by the
</I>RabbitMQ
&gt;<i> WCF client and is automatically deleted when the consumer disconnects
</I>from
&gt;<i> the broker.
</I>&gt;<i>
</I>&gt;<i> I used the .NET client to declare a durable queue and bound it using
</I>the
&gt;<i> same key as was being used in the WCF configuration. Unfortunately,
</I>the
&gt;<i> RabbitMQ WCF client still creates a non-durable queue with a random
</I>name
&gt;<i> (e.g. &quot;amq.gen-qJXrh8ZClEjNDG8PsCe4hA==&quot;) and uses that rather than
</I>the
&gt;<i> queue I had declared earlier.
</I>&gt;<i>
</I>&gt;<i> Is there a way to get the RabbitMQ WCF client to use a pre-existing
</I>queue?
&gt;<i>
</I>&gt;<i> My WCF configuration is as follows:
</I>&gt;<i>
</I>&gt;<i> &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
</I>&gt;<i> &lt;configuration&gt;
</I>&gt;<i>      &lt;system.serviceModel&gt;
</I>&gt;<i>          &lt;extensions&gt;
</I>&gt;<i>              &lt;bindingExtensions&gt;
</I>&gt;<i>                  &lt;add name=&quot;rabbitMQBinding&quot;
</I>&gt;<i>
</I>type=&quot;RabbitMQ.ServiceModel.RabbitMQBindingSection,
&gt;<i> RabbitMQ.ServiceModel, Version=1.0.110.0, Culture=neutral,
</I>&gt;<i> PublicKeyToken=null&quot;/&gt;
</I>&gt;<i>              &lt;/bindingExtensions&gt;
</I>&gt;<i>          &lt;/extensions&gt;
</I>&gt;<i>
</I>&gt;<i>          &lt;bindings&gt;
</I>&gt;<i>              &lt;rabbitMQBinding&gt;
</I>&gt;<i>                  &lt;binding name=&quot;OneWayRMQBinding&quot;
</I>&gt;<i>                           protocolversion=&quot;AMQP_0_8&quot;
</I>&gt;<i>                           broker=&quot;<A HREF="amqp://MyHost:5672/&quot;">amqp://MyHost:5672/&quot;</A>
</I>&gt;<i>                           oneWay=&quot;true&quot; /&gt;
</I>&gt;<i>              &lt;/rabbitMQBinding&gt;
</I>&gt;<i>          &lt;/bindings&gt;
</I>&gt;<i>
</I>&gt;<i>          &lt;services&gt;
</I>&gt;<i>              &lt;service
</I>&gt;<i> name=&quot;AMQPTests.SimpleMessaging.ServiceImpl.OneWayService&quot;&gt;
</I>&gt;<i>                  &lt;host&gt;
</I>&gt;<i>                      &lt;baseAddresses&gt;
</I>&gt;<i>                          &lt;add baseAddress=&quot;soap.<A HREF="amqp://amq.direct/&quot;">amqp://amq.direct/&quot;</A> /&gt;
</I>&gt;<i>                      &lt;/baseAddresses&gt;
</I>&gt;<i>                  &lt;/host&gt;
</I>&gt;<i>
</I>&gt;<i>                  &lt;endpoint address=&quot;OneWayService&quot;
</I>&gt;<i>                            binding=&quot;rabbitMQBinding&quot;
</I>&gt;<i>                            bindingConfiguration=&quot;OneWayRMQBinding&quot;
</I>&gt;<i>
</I>&gt;<i> contract=&quot;AMQPTests.SimpleMessaging.Client.IOneWayService&quot; /&gt;
</I>&gt;<i>              &lt;/service&gt;
</I>&gt;<i>          &lt;/services&gt;
</I>&gt;<i>
</I>&gt;<i>          &lt;client&gt;
</I>&gt;<i>              &lt;endpoint name=&quot;OneWayServiceEndPoint&quot;
</I>&gt;<i>                        address=&quot;soap.<A HREF="amqp://amq.direct/OneWayService&quot;">amqp://amq.direct/OneWayService&quot;</A>
</I>&gt;<i>                        binding=&quot;rabbitMQBinding&quot;
</I>&gt;<i>                        bindingConfiguration=&quot;OneWayRMQBinding&quot;
</I>&gt;<i>
</I>&gt;<i> contract=&quot;AMQPTests.SimpleMessaging.Client.IOneWayService&quot; /&gt;
</I>&gt;<i>          &lt;/client&gt;
</I>&gt;<i>      &lt;/system.serviceModel&gt;
</I>&gt;<i> &lt;/configuration&gt;
</I>

This message and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this message in error please delete it and any files transmitted with it, after notifying <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">postmaster at uk.mizuho-sc.com</A> 
Any opinions expressed in this message may be those of the author and not necessarily those of the company. The company accepts no responsibility for the accuracy or completeness of any information contained herein. This message is not intended to create legal relations between the company and the recipient. 
Recipients should please note that messages sent via the Internet may be intercepted and that caution should therefore be exercised before dispatching to the company any confidential or sensitive information. 
Mizuho International plc Bracken House, One Friday Street, London EC4M 9JA. TEL. 020 72361090. Wholly owned subsidiary of Mizuho Securities Co., Ltd. Member of Mizuho Financial Group. Authorised and regulated by the Financial Services Authority. Member of the London Stock Exchange. 

Registered in England No. 1203696. Registered office as above.

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007543.html">[rabbitmq-discuss] WCF and queue creation
</A></li>
	<LI>Next message: <A HREF="007557.html">[rabbitmq-discuss] WCF and queue creation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7544">[ date ]</a>
              <a href="thread.html#7544">[ thread ]</a>
              <a href="subject.html#7544">[ subject ]</a>
              <a href="author.html#7544">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
