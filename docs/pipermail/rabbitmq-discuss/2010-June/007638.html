<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Highly Dynamic Bindings?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Highly%20Dynamic%20Bindings%3F&In-Reply-To=%3CAANLkTikqxo6xPnxyZdYnpQlFHpe3qj_1o_EbAhsjVsKw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007618.html">
   <LINK REL="Next"  HREF="007586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Highly Dynamic Bindings?</H1>
    <B>Michael Artz</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Highly%20Dynamic%20Bindings%3F&In-Reply-To=%3CAANLkTikqxo6xPnxyZdYnpQlFHpe3qj_1o_EbAhsjVsKw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Highly Dynamic Bindings?">mlartz at gmail.com
       </A><BR>
    <I>Fri Jun 18 03:07:03 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007618.html">[rabbitmq-discuss] Highly Dynamic Bindings?
</A></li>
        <LI>Next message: <A HREF="007586.html">[rabbitmq-discuss]  rabbitmq-stomp listening address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7638">[ date ]</a>
              <a href="thread.html#7638">[ thread ]</a>
              <a href="subject.html#7638">[ subject ]</a>
              <a href="author.html#7638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> &#160;- Are there any issues having a large (30K+) number of non-wildcarded bindings for a single queue?
</I>&gt;<i>
</I>&gt;<i> Yup. Are these bindings all to a single exchange or to lots of
</I>&gt;<i> exchanges. What's the average number of bindings per exchange? If you're
</I>&gt;<i> using topic exchanges then the matching of bindings is not as efficient
</I>&gt;<i> as it could be, even for bindings without wildcards. Using direct
</I>&gt;<i> exchanges are more efficient.
</I>
We have been using a single topic exchange for all of our traffic.  We
currently have between 15-50 queues on the exchange at any given time,
and plan to have each queue bind to between 10 and 1,000 routing keys.

&gt;<i> What kind of chat are you trying to do - just p2p or with chat rooms
</I>&gt;<i> etc? Are you doing presence notification etc too?
</I>
Its a bit more complicated than chat, but IRC is the closest network
analogy that I could think of.  We have a distributed computing system
whereby a number of distributed workers connect to a number of servers
(but only one at any given time) to get their jobs.  The workers
remain connected to the server for a minute or two and then disconnect
if they do not get a job.  If they do get a job, they process the job
and return the results.

We have a very basic notion of presence in that when a worker
connects, the server sends a connection message to a particular
routing key.  Disconnects are inferred.  We have a series of control
nodes that have a queues bound to this connection routing key, and
will give the worker a job based on a series of metrics.  The problem
is that the control nodes should route the job message to the correct
server, which will then pass the message on to the worker.

Our current proposal is to create a routing key for each worker
(worker.a, worker.b, etc).  Each server will bind its queue to a given
worker's routing key upon connect, and unbind the routing key upon
worker disconnect.  This will allow the control nodes to send job
messages to the worker's routing key, and it will end up in the queue
of the server to which the worker is connected.

So I guess that is a long-winded way of saying &quot;yes&quot;, we are
interested in having a notion of presence.

-Mike
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007618.html">[rabbitmq-discuss] Highly Dynamic Bindings?
</A></li>
	<LI>Next message: <A HREF="007586.html">[rabbitmq-discuss]  rabbitmq-stomp listening address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7638">[ date ]</a>
              <a href="thread.html#7638">[ thread ]</a>
              <a href="subject.html#7638">[ subject ]</a>
              <a href="author.html#7638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
