<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Strange behavior with SSL configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Strange%20behavior%20with%20SSL%20configuration&In-Reply-To=%3C9C264785-21FE-459D-A647-3B2542D702DB%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007617.html">
   <LINK REL="Next"  HREF="007611.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Strange behavior with SSL configuration</H1>
    <B>romary.kremer at gmail.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Strange%20behavior%20with%20SSL%20configuration&In-Reply-To=%3C9C264785-21FE-459D-A647-3B2542D702DB%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Strange behavior with SSL configuration">romary.kremer at gmail.com
       </A><BR>
    <I>Thu Jun 17 10:51:16 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007617.html">[rabbitmq-discuss] Rabbitmq Crash
</A></li>
        <LI>Next message: <A HREF="007611.html">[rabbitmq-discuss] Strange behavior with SSL configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7609">[ date ]</a>
              <a href="thread.html#7609">[ thread ]</a>
              <a href="subject.html#7609">[ subject ]</a>
              <a href="author.html#7609">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
we are facing stange behavior while testing SSL connections.

One month ago, we start experimenting the SSL features as described in  
the rabbitMQ SSL web page.

	- We had set up a broker (1.7.2) on an Ubuntu with latest Erlang  
distribution R13B04 (built from sources)
	
	- We wrote down a simple Java client exemple that both presents a  
certificate and verify the broker certificate, based on the second  
Java example of the documentation.

	- On the broker side, we have experimented both fail_if_no_peer_cert   
with value true and false.

Everything seemed to work perfectly at this time, and we stated that  
SSL support was good enough and we paused our work on that part right  
after that.


Today, we are back on using SSL, and so we tried to start from the  
previous successful achievement we got, but strange things start to  
happened now :

Runnning against the &quot;apparently&quot; same configuration, the Java client  
almost never manage to connect.

The most disturbing thing is that it sometimes manage to !!!! amongst  
20 executions,  we have observed 2 successful executions.

All the others led to stack trace at the client side
	
	javax.net.ssl.SSLHandshakeException: Remote host closed connection  
during handshake
	at  
com 
.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java: 
742)
	at  
com 
.sun 
.net 
.ssl 
.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java: 
1030)
	at  
com 
.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java: 
622)
	at  
com 
.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java: 
65)
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
	at java.io.DataOutputStream.flush(DataOutputStream.java:106)
	at  
com 
.rabbitmq 
.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:109)
	at  
com 
.rabbitmq 
.client.impl.SocketFrameHandler.sendHeader(SocketFrameHandler.java:122)
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:230)
	at  
com 
.rabbitmq 
.client.ConnectionFactory.newConnection(ConnectionFactory.java:201)
	at  
com 
.rabbitmq 
.client.ConnectionFactory.newConnection(ConnectionFactory.java:251)
	at  
com 
.rabbitmq 
.client.ConnectionFactory.newConnection(ConnectionFactory.java:265)
	at  
com 
.rabbitmq 
.client.ConnectionFactory.newConnection(ConnectionFactory.java:276)
	at  
com 
.schneider 
.middleware 
.rabbitmq.osgi.hc.HCSimulator.createConnections(HCSimulator.java:174)
	at  
com 
.schneider 
.middleware.rabbitmq.osgi.hc.HCSimulator.main(HCSimulator.java:373)
2010-06-17 11:19:57,234 ERROR - Exception while creating connection  
for hc_1. Remote host closed connection during handshake
2010-06-17 11:19:57,234  INFO - Canceling the simulation.
Caused by: java.io.EOFException: SSL peer shut down incorrectly
	at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:333)
	at  
com 
.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java: 
723)
	... 15 more

and on the broker side, we get

=INFO REPORT==== 17-Jun-2010::11:12:07 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 17-Jun-2010::11:12:07 ===
started SSL Listener on 0.0.0.0:5671

=INFO REPORT==== 17-Jun-2010::11:12:17 ===
Rolling persister log to &quot;/var/lib/rabbitmq/mnesia/rabbit/ 
rabbit_persister.LOG.previous&quot;

=INFO REPORT==== 17-Jun-2010::11:12:18 ===
accepted TCP connection on 0.0.0.0:5671 from 192.168.0.71:2693

=INFO REPORT==== 17-Jun-2010::11:12:18 ===
starting TCP connection &lt;0.234.0&gt; from 192.168.0.71:2693

=ERROR REPORT==== 17-Jun-2010::11:12:23 ===
** State machine &lt;0.235.0&gt; terminating
** Last event in was {ssl_tls,undefined,22,
                               {3,1},
                                
&lt;&lt;1,0,0,97,3,1,0,57,0,0,0,32,0,0,4,1,0,128,0,0,
                                  
5,0,0,47,0,0,51,0,0,50,0,0,10,7,0,192,0,0,22,
                                  
0,0,19,0,0,9,6,0,64,0,0,21,0,0,18,0,0,3,2,0,
                                  
128,0,0,8,0,0,20,0,0,17,76,25,232,184,7,237,
                                  
210,174,78,125,57,168,183,15,57,152,10,189,
                                  
188,145,39,117,76,117,95,107,98,71,33,64,209,
                                 53&gt;&gt;} (for all states)
** When State == hello
**      Data  == {state,server,
                      {#Ref&lt;0.0.0.764&gt;,&lt;0.234.0&gt;},
                      gen_tcp,tcp,tcp_closed,&quot;localhost&quot;, 
5671,#Port&lt;0.2741&gt;,
                      {ssl_options,[],verify_peer,#Fun&lt;ssl. 
2.93623501&gt;,true,
                          false,1,
                          &quot;/home/komak/rabbitmq-ssl-scripts/simple/ 
server/cert.pem&quot;,
                          &quot;/home/komak/rabbitmq-ssl-scripts/simple/ 
server/key.pem&quot;,
                          undefined,undefined,
                          &quot;/home/komak/rabbitmq-ssl-scripts/simple/ 
testca/cacert.pem&quot;,
                          [&lt;&lt;0,10&gt;&gt;,&lt;&lt;0,47&gt;&gt;,&lt;&lt;0,5&gt;&gt;,&lt;&lt;0,4&gt;&gt;,&lt;&lt;0,9&gt;&gt;],
                          #Fun&lt;ssl.0.126056736&gt;,true,[]},
                      {socket_options,binary,0,0,0,false},
                      {connection_states,
                          {connection_state,
                              {security_parameters,undefined, 
0,0,0,undefined,
                                  undefined,undefined,undefined, 
0,undefined,0,
                                   
undefined,undefined,undefined,undefined},
                              undefined,undefined,undefined,1},
                          {connection_state,
                              {security_parameters,undefined, 
0,undefined,
                                   
undefined,undefined,undefined,undefined,
                                   
undefined,undefined,undefined,undefined,
                                  undefined,undefined,
                                   
&lt;&lt;76,25,230,243,171,3,214,49,238,15,225,242,
                                     
21,64,243,210,229,226,75,36,29,18,98,226,56,
                                    156,175,67,146,121,66,231&gt;&gt;,
                                  undefined},
                              undefined,undefined,undefined,undefined},
                          {connection_state,
                              {security_parameters,undefined, 
0,0,0,undefined,
                                  undefined,undefined,undefined, 
0,undefined,0,
                                   
undefined,undefined,undefined,undefined},
                              undefined,undefined,undefined,0},
                          {connection_state,
                              {security_parameters,undefined, 
0,undefined,
                                   
undefined,undefined,undefined,undefined,
                                   
undefined,undefined,undefined,undefined,
                                  undefined,undefined,
                                   
&lt;&lt;76,25,230,243,171,3,214,49,238,15,225,242,
                                     
21,64,243,210,229,226,75,36,29,18,98,226,56,
                                    156,175,67,146,121,66,231&gt;&gt;,
                                  undefined},
                              undefined,undefined,undefined,undefined}},
                      &lt;&lt;&gt;&gt;,&lt;&lt;&gt;&gt;,
                       
{{&lt;&lt;1,35,69,103,137,171,205,239,254,220,186,152,118,84,50,
                           
16,0,0,0,0,0,0,0,0,105,98,47,115,115,108,45,51,46,49,
                           
48,46,56,47,101,98,105,110,47,115,115,108,95,104,97,
                           
110,100,115,104,97,107,101,46,98,101,97,109,116,105,
                           
111,110,46,98,101,33,0,0,0,3,0,0,0,180,210,66,183,0,0,
                          0,0,0,0,0,0,0,0,0,0&gt;&gt;,
                         
&lt;&lt;1,35,69,103,137,171,205,239,254,220,186,152,118,84,
                           
50,16,240,225,210,195,0,0,0,0,0,0,0,0,115,108,45,51,
                           
46,49,48,46,56,47,101,98,105,110,47,115,115,108,95,
                           
99,111,110,110,101,99,116,105,111,110,46,98,101,97,
                           
109,0,0,0,0,0,0,113,7,0,0,3,0,0,0,156,157,68,183,0,0,
                          0,0,0,0,0,0,0,0,0,0,0,0,0,0&gt;&gt;},
                        
{&lt;&lt;1,35,69,103,137,171,205,239,254,220,186,152,118,84,50,
                           
16,0,0,0,0,0,0,0,0,105,98,47,115,115,108,45,51,46,49,
                           
48,46,56,47,101,98,105,110,47,115,115,108,95,104,97,
                           
110,100,115,104,97,107,101,46,98,101,97,109,116,105,
                           
111,110,46,98,101,33,0,0,0,3,0,0,0,180,210,66,183,0,0,
                          0,0,0,0,0,0,0,0,0,0&gt;&gt;,
                         
&lt;&lt;1,35,69,103,137,171,205,239,254,220,186,152,118,84,
                           
50,16,240,225,210,195,0,0,0,0,0,0,0,0,115,108,45,51,
                           
46,49,48,46,56,47,101,98,105,110,47,115,115,108,95,
                           
99,111,110,110,101,99,116,105,111,110,46,98,101,97,
                           
109,0,0,0,0,0,0,113,7,0,0,3,0,0,0,156,157,68,183,0,
                          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0&gt;&gt;}},
                      [],
                       
&lt;&lt;48,130,2,229,48,130,1,205,160,3,2,1,2,2,1,1,48,13,6,9,
                         
42,134,72,134,247,13,1,1,5,5,0,48,19,49,17,48,15,6,3,85,
                         
4,3,19,8,77,121,84,101,115,116,67,65,48,30,23,13,49,48,
                         
48,54,49,55,48,56,52,51,52,57,90,23,13,49,49,48,54,49,
                         
55,48,56,52,51,52,57,90,48,40,49,21,48,19,6,3,85,4,3,19,
                         
12,109,121,115,116,105,99,45,98,117,110,116,117,49,15,
                         
48,13,6,3,85,4,10,19,6,115,101,114,118,101,114,48,130,1,
                         
34,48,13,6,9,42,134,72,134,247,13,1,1,1,5,0,3,130,1,15,
                         
0,48,130,1,10,2,130,1,1,0,183,13,146,242,20,154,134,161,
                         
178,135,188,88,74,200,203,154,206,75,148,73,181,170,132,
                         
162,80,149,96,158,178,155,135,78,201,18,87,248,83,86,45,
                         
72,160,93,201,238,178,140,231,197,155,96,233,76,54,157,
                         
93,98,232,83,79,156,215,58,165,212,6,74,93,164,69,143,
                         
215,240,148,220,233,108,55,102,185,62,89,229,151,249,
                         
232,147,230,65,54,196,49,187,159,168,132,140,228,58,244,
                         
151,49,183,151,33,207,154,250,139,127,96,178,195,152,
                         
200,65,3,187,27,187,42,247,76,175,10,6,252,46,3,14,208,
                         
128,201,153,146,22,108,216,107,76,117,33,218,75,11,20,
                         
135,72,133,45,27,113,182,94,33,107,253,8,173,123,136,
                         
141,204,75,156,254,41,33,102,59,109,58,169,72,62,214,
                         
190,18,57,194,191,54,199,156,49,201,201,188,24,11,211,
                         
101,13,85,118,194,129,1,152,238,214,3,10,74,243,95,88,
                         
110,162,28,195,200,197,243,63,200,150,245,16,21,149,134,
                         
186,65,210,105,31,70,29,12,189,223,115,109,242,181,241,
                         
2,140,177,84,117,239,23,246,54,214,27,63,195,190,206,
                         
179,80,162,173,43,2,3,1,0,1,163,47,48,45,48,9,6,3,85,29,
                         
19,4,2,48,0,48,11,6,3,85,29,15,4,4,3,2,5,32,48,19,6,3,
                         
85,29,37,4,12,48,10,6,8,43,6,1,5,5,7,3,1,48,13,6,9,42,
                         
134,72,134,247,13,1,1,5,5,0,3,130,1,1,0,30,153,203,32,
                         
43,26,226,164,59,215,1,229,141,35,10,88,189,68,95,246,
                         
223,182,162,206,213,46,214,177,75,253,187,217,194,206,
                         
31,215,40,174,253,2,76,78,177,121,208,242,11,200,227,
                         
167,123,195,205,28,163,14,10,40,221,162,23,140,126,39,
                         
203,187,21,140,126,56,158,47,72,176,229,51,153,195,55,
                         
41,2,47,236,211,123,178,252,225,164,247,138,243,42,205,
                         
74,68,174,208,122,28,210,207,23,47,235,143,101,79,158,
                         
254,3,108,44,237,10,209,187,131,82,68,230,67,203,196,
                         
216,28,27,205,3,2,140,200,216,112,249,87,108,227,69,220,
                         
243,50,152,250,160,61,245,146,191,191,148,40,150,201,53,
                         
154,119,221,179,94,232,161,80,97,211,31,161,147,3,210,4,
                         
217,145,36,10,253,110,226,8,245,97,227,99,167,18,20,55,
                         
15,38,23,32,73,60,91,4,108,117,199,99,154,112,232,123,
                         
102,253,26,146,190,33,39,191,189,33,202,1,41,44,36,214,
                         
125,205,192,67,33,143,224,20,120,120,162,124,155,43,146,
                         
201,155,98,160,199,53,167,157,4,87,218,210,5,111,102,
                        194,229,19,173,30,87,114&gt;&gt;,
                      {session,undefined,undefined,undefined,undefined,
                          undefined,false,undefined},
                       
217142,ssl_session_cache,undefined,undefined,false,
                      undefined,undefined,
                      {'RSAPrivateKey','two-prime',
                           
23108303400795980946580897607740805964637076898699380796207226519526125534587738491695252811020543441024556194006460906767821548775329768232168126348535701046836297823880142435369663292641876769025238599905446381094783070506873924567016846636672807406641689524958805551783880020565959080266735022473560286521556204861516355220678119047287321058685267163713568264033159664072921927888564457619200600254426883553065038860474015930782999320845123886931905279423910931093743768836935138203525402774305196802643907357698764164346149737799934470864302449992811127514207460970301049940664333139184489189062646293731007966507,
                          65537,
                           
20071717824897557339886134493807244450264211093862432699453688292476382746485298589190110414992209521038846168482197645875738005463107054894428652400787261883991581146899875003943086850689516381231391539124731605716168367313178786883400735382953134284802144989979401041172122162606118996050839848548261582163087653365293290807672326674835257901335368888348022820746913783138357781855960931947807083868427593491763241631650299467134910847641402828400573317722777264407351203132834977775597195884146761297079752399058680875386106138694729040994851112154129305484862612716995779116049982282978617961236399572513695211873,
                           
155564147011531111744542449428558048705480843387887695987762112701917645812591345229711614061998685580028658714091361441355226315417981898604389423176894224970634129268319682821602163084958161002104973032020461023155866344423285444271238717676755030418453297404830066757570266871731826244142282802070198054449,
                           
148545174738001102127757128580268550957984461113306890341568151185873777912703694786266625973102081246296150602009080907036545034906727106203872930931291566422370495085231951851324848355849867682370893342329883843339089049737888250841117182693830848197002454305326013908986596985422453277365687711532043234843,
                           
85811060601093446765597358580524009624362390242390223807217116076216867018188042196000801989033896614181546930331214542417760753905053078664682271652164473914176639259945143257758820173097982489083981263722350526391316725166641623752224710968344158332812077978577166232096719680180314182095421907893857360977,
                           
115899552391060749747482079021368876889170658323814555605623477466751144541071314359841885538071651470895942214064304791192863478873317116264535124437198269030341530672570465934748993634557992188692696647187028402967804133074403433457584052060154517169011756693906349012346012943109872680849246615522216439117,
                           
120404330973009648632995051456199271210062511487765196947914865904545696851042870348806399525675792384776341194670905662882223236326485243094092276576841947094379853384825519718974030983114946877025268437726384149009550737876777399999401663924597468849868432098321761757578135112204559332037284625076740919909,
                          asn1_NOVALUE},
                      undefined,undefined,#Ref&lt;0.0.0.767&gt;,
                      {&lt;0.234.0&gt;,#Ref&lt;0.0.0.773&gt;},
                      0,&lt;&lt;&gt;&gt;,true}
** Reason for termination =
** {{case_clause,{{file,&quot;/home/komak/rabbitmq-ssl-scripts/simple/ 
server/key.pem&quot;},
                    
[{rsa_private_key,&lt;&lt;48,130,4,165,2,1,0,2,130,1,1,0,183,13,
                                        
146,242,20,154,134,161,178,135,188,88,74,
                                        
200,203,154,206,75,148,73,181,170,132,
                                        
162,80,149,96,158,178,155,135,78,201,18,
                                        
87,248,83,86,45,72,160,93,201,238,178,
                                        
140,231,197,155,96,233,76,54,157,93,98,
                                        
232,83,79,156,215,58,165,212,6,74,93,164,
                                        
69,143,215,240,148,220,233,108,55,102,
                                        
185,62,89,229,151,249,232,147,230,65,54,
                                        
196,49,187,159,168,132,140,228,58,244,
                                        
151,49,183,151,33,207,154,250,139,127,96,
                                        
178,195,152,200,65,3,187,27,187,42,247,
                                        
76,175,10,6,252,46,3,14,208,128,201,153,
                                        
146,22,108,216,107,76,117,33,218,75,11,
                                        
20,135,72,133,45,27,113,182,94,33,107,
                                        
253,8,173,123,136,141,204,75,156,254,41,
                                        
33,102,59,109,58,169,72,62,214,190,18,57,
                                        
194,191,54,199,156,49,201,201,188,24,11,
                                        
211,101,13,85,118,194,129,1,152,238,214,
                                        
3,10,74,243,95,88,110,162,28,195,200,197,
                                        
243,63,200,150,245,16,21,149,134,186,65,
                                        
210,105,31,70,29,12,189,223,115,109,242,
                                        
181,241,2,140,177,84,117,239,23,246,54,
                                        
214,27,63,195,190,206,179,80,162,173,43,
                                        
2,3,1,0,1,2,130,1,1,0,158,255,166,92,169,
                                        
114,211,112,78,31,66,132,186,104,145,25,
                                        
165,8,215,3,243,76,234,170,6,46,201,222,
                                        
238,170,211,43,166,209,77,34,0,89,1,58,
                                        
109,57,41,246,48,150,221,150,177,240,202,
                                        
148,13,120,64,174,113,184,51,149,187,9,
                                        
81,18,202,103,251,208,125,47,133,84,142,
                                        
41,24,131,139,215,169,29,180,126,13,180,
                                        
223,196,223,162,83,140,180,218,16,195,18,
                                        
103,66,178,198,211,49,55,19,138,37,198,
                                        
170,203,82,87,206,206,192,189,104,99,114,
                                        
57,147,40,173,231,168,190,159,244,153,
                                        
141,76,61,232,85,49,36,166,7,36,45,175,
                                        
74,17,181,30,119,12,89,45,73,62,73,7,132,
                                        
161,84,80,17,221,18,187,136,108,159,234,
                                        
41,168,180,88,233,182,132,191,232,207,24,
                                        
175,102,76,98,51,109,84,18,108,57,125,
                                        
178,134,32,45,246,10,177,255,249,100,237,
                                        
126,27,20,50,64,207,93,193,152,134,92,72,
                                        
6,204,41,132,58,249,159,64,206,85,107,
                                        
177,173,238,209,156,108,197,127,33,161,
                                        
236,193,66,144,205,110,232,28,148,248,34,
                                        
26,96,107,144,142,28,64,247,60,45,192,90,
                                        
108,160,33,97,2,129,129,0,221,135,219,
                                        
223,251,186,130,95,181,157,17,157,180,24,
                                        
117,72,226,212,115,156,236,236,252,90,20,
                                        
237,195,33,108,211,193,171,28,77,234,163,
                                        
138,204,3,148,40,179,23,162,26,162,206,
                                        
186,82,220,104,163,2,166,181,91,228,122,
                                        
119,14,28,175,104,52,97,74,112,1,1,186,
                                        
242,218,93,32,106,51,216,173,129,216,72,
                                        
145,94,72,1,2,44,68,235,226,106,0,62,240,
                                        
30,68,138,85,132,206,158,5,13,128,60,23,
                                        
201,229,65,25,31,97,242,70,24,105,143,
                                        
241,160,248,158,157,158,98,195,222,110,
                                        
49,2,129,129,0,211,137,12,186,141,67,8,
                                        
71,238,67,0,40,204,211,115,20,218,61,215,
                                        
15,57,146,238,23,166,180,234,45,151,82,
                                        
220,231,243,212,18,167,111,209,232,184,
                                        
247,216,119,216,159,169,243,197,231,92,
                                        
42,100,160,190,164,105,191,173,110,132,
                                        
110,118,119,133,58,57,48,100,231,110,123,
                                        
16,251,135,7,50,235,233,127,197,119,96,0,
                                        
139,228,233,107,37,144,192,184,231,57,
                                        
126,212,236,204,125,84,191,203,218,2,26,
                                        
157,207,36,14,47,185,191,212,212,178,68,
                                        
98,1,199,217,53,224,22,235,90,201,20,110,
                                        
27,2,129,128,122,50,242,23,168,173,38,51,
                                        
147,99,244,14,177,4,120,213,222,193,224,
                                        
144,100,165,9,66,203,158,167,239,173,47,
                                        
85,250,132,95,122,154,1,251,45,210,49,
                                        
109,49,17,43,110,57,104,208,66,98,185,
                                        
224,193,130,243,16,162,121,63,224,148,
                                        
229,127,87,87,143,87,14,212,72,24,42,28,
                                        
178,88,173,34,112,168,148,199,19,97,214,
                                        
164,147,52,229,133,124,129,108,54,90,11,
                                        
230,222,235,166,105,198,81,191,53,230,
                                        
205,104,215,178,250,251,181,127,243,1,
                                        
111,244,146,157,242,40,241,240,123,41,28,
                                        
81,2,129,129,0,165,11,227,144,146,179,96,
                                        
124,175,28,59,189,153,194,201,161,213,
                                        
126,54,148,60,121,181,167,98,124,249,210,
                                        
68,165,116,146,206,30,3,199,252,105,45,
                                        
73,84,167,227,42,115,185,40,232,154,209,
                                        
192,137,239,25,144,50,170,73,105,87,142,
                                        
208,132,4,193,30,233,241,112,217,52,208,
                                        
85,80,79,127,157,173,251,241,88,104,225,
                                        
68,69,129,18,6,167,96,151,100,97,233,225,
                                        
188,56,248,248,237,4,226,190,141,129,223,
                                        
162,228,38,188,169,62,40,14,71,104,168,
                                        
183,3,117,19,185,14,61,49,114,237,77,2,
                                        
129,129,0,171,118,34,41,37,204,142,158,
                                        
139,48,2,92,50,252,254,77,243,18,75,206,
                                        
23,147,103,195,177,152,72,80,137,87,168,
                                        
65,111,21,82,107,171,31,157,156,21,246,4,
                                        
113,134,33,242,4,189,168,60,72,44,145,17,
                                        
233,7,31,81,159,58,166,69,64,233,174,112,
                                        
229,63,254,92,162,202,37,51,75,129,216,
                                        
85,163,207,58,44,218,125,186,64,177,249,
                                        
64,40,92,67,193,106,11,225,138,191,242,
                                        
152,235,61,211,241,156,229,112,233,247,0,
                                        
251,65,102,221,37,233,218,98,195,68,187,
                                       8,97,41,67,146,101&gt;&gt;,
                                     not_encrypted}]}},
     [{ssl_certificate,find_issuer,2},
      {ssl_certificate,certificate_chain,4},
      {ssl_handshake,certificate,3},
      {ssl_connection,certify_server,1},
      {ssl_connection,server_certify_and_key_exchange,1},
      {ssl_connection,do_server_hello,2},
      {lists,foldl,3},
      {ssl_connection,handle_event,3}]}

=ERROR REPORT==== 17-Jun-2010::11:12:23 ===
error on TCP connection &lt;0.234.0&gt;:{ssl_upgrade_failure,
                                    {{{case_clause,
                                       {{file,
                                         &quot;/home/komak/rabbitmq-ssl- 
scripts/simple/server/key.pem&quot;},
                                        [{rsa_private_key,
                                           
&lt;&lt;48,130,4,165,2,1,0,2,130,1,1,0,183,
                                             
13,146,242,20,154,134,161,178,135,
                                             
188,88,74,200,203,154,206,75,148,73,
                                             
181,170,132,162,80,149,96,158,178,
                                             
155,135,78,201,18,87,248,83,86,45,
                                             
72,160,93,201,238,178,140,231,197,
                                             
155,96,233,76,54,157,93,98,232,83,
                                             
79,156,215,58,165,212,6,74,93,164,
                                             
69,143,215,240,148,220,233,108,55,
                                             
102,185,62,89,229,151,249,232,147,
                                             
230,65,54,196,49,187,159,168,132,
                                             
140,228,58,244,151,49,183,151,33,
                                             
207,154,250,139,127,96,178,195,152,
                                             
200,65,3,187,27,187,42,247,76,175,
                                             
10,6,252,46,3,14,208,128,201,153,
                                             
146,22,108,216,107,76,117,33,218,75,
                                             
11,20,135,72,133,45,27,113,182,94,
                                             
33,107,253,8,173,123,136,141,204,75,
                                             
156,254,41,33,102,59,109,58,169,72,
                                             
62,214,190,18,57,194,191,54,199,156,
                                             
49,201,201,188,24,11,211,101,13,85,
                                             
118,194,129,1,152,238,214,3,10,74,
                                             
243,95,88,110,162,28,195,200,197,
                                             
243,63,200,150,245,16,21,149,134,
                                             
186,65,210,105,31,70,29,12,189,223,
                                             
115,109,242,181,241,2,140,177,84,
                                             
117,239,23,246,54,214,27,63,195,190,
                                             
206,179,80,162,173,43,2,3,1,0,1,2,
                                             
130,1,1,0,158,255,166,92,169,114,
                                             
211,112,78,31,66,132,186,104,145,25,
                                             
165,8,215,3,243,76,234,170,6,46,201,
                                             
222,238,170,211,43,166,209,77,34,0,
                                             
89,1,58,109,57,41,246,48,150,221,
                                             
150,177,240,202,148,13,120,64,174,
                                             
113,184,51,149,187,9,81,18,202,103,
                                             
251,208,125,47,133,84,142,41,24,131,
                                             
139,215,169,29,180,126,13,180,223,
                                             
196,223,162,83,140,180,218,16,195,
                                             
18,103,66,178,198,211,49,55,19,138,
                                             
37,198,170,203,82,87,206,206,192,
                                             
189,104,99,114,57,147,40,173,231,
                                             
168,190,159,244,153,141,76,61,232,
                                             
85,49,36,166,7,36,45,175,74,17,181,
                                             
30,119,12,89,45,73,62,73,7,132,161,
                                             
84,80,17,221,18,187,136,108,159,234,
                                             
41,168,180,88,233,182,132,191,232,
                                             
207,24,175,102,76,98,51,109,84,18,
                                             
108,57,125,178,134,32,45,246,10,177,
                                             
255,249,100,237,126,27,20,50,64,207,
                                             
93,193,152,134,92,72,6,204,41,132,
                                             
58,249,159,64,206,85,107,177,173,
                                             
238,209,156,108,197,127,33,161,236,
                                             
193,66,144,205,110,232,28,148,248,
                                             
34,26,96,107,144,142,28,64,247,60,
                                             
45,192,90,108,160,33,97,2,129,129,0,
                                             
221,135,219,223,251,186,130,95,181,
                                             
157,17,157,180,24,117,72,226,212,
                                             
115,156,236,236,252,90,20,237,195,
                                             
33,108,211,193,171,28,77,234,163,
                                             
138,204,3,148,40,179,23,162,26,162,
                                             
206,186,82,220,104,163,2,166,181,91,
                                             
228,122,119,14,28,175,104,52,97,74,
                                             
112,1,1,186,242,218,93,32,106,51,
                                             
216,173,129,216,72,145,94,72,1,2,44,
                                             
68,235,226,106,0,62,240,30,68,138,
                                             
85,132,206,158,5,13,128,60,23,201,
                                             
229,65,25,31,97,242,70,24,105,143,
                                             
241,160,248,158,157,158,98,195,222,
                                             
110,49,2,129,129,0,211,137,12,186,
                                             
141,67,8,71,238,67,0,40,204,211,115,
                                             
20,218,61,215,15,57,146,238,23,166,
                                             
180,234,45,151,82,220,231,243,212,
                                             
18,167,111,209,232,184,247,216,119,
                                             
216,159,169,243,197,231,92,42,100,
                                             
160,190,164,105,191,173,110,132,110,
                                             
118,119,133,58,57,48,100,231,110,
                                             
123,16,251,135,7,50,235,233,127,197,
                                             
119,96,0,139,228,233,107,37,144,192,
                                             
184,231,57,126,212,236,204,125,84,
                                             
191,203,218,2,26,157,207,36,14,47,
                                             
185,191,212,212,178,68,98,1,199,217,
                                             
53,224,22,235,90,201,20,110,27,2,
                                             
129,128,122,50,242,23,168,173,38,51,
                                             
147,99,244,14,177,4,120,213,222,193,
                                             
224,144,100,165,9,66,203,158,167,
                                             
239,173,47,85,250,132,95,122,154,1,
                                             
251,45,210,49,109,49,17,43,110,57,
                                             
104,208,66,98,185,224,193,130,243,
                                             
16,162,121,63,224,148,229,127,87,87,
                                             
143,87,14,212,72,24,42,28,178,88,
                                             
173,34,112,168,148,199,19,97,214,
                                             
164,147,52,229,133,124,129,108,54,
                                             
90,11,230,222,235,166,105,198,81,
                                             
191,53,230,205,104,215,178,250,251,
                                             
181,127,243,1,111,244,146,157,242,
                                             
40,241,240,123,41,28,81,2,129,129,0,
                                             
165,11,227,144,146,179,96,124,175,
                                             
28,59,189,153,194,201,161,213,126,
                                             
54,148,60,121,181,167,98,124,249,
                                             
210,68,165,116,146,206,30,3,199,252,
                                             
105,45,73,84,167,227,42,115,185,40,
                                             
232,154,209,192,137,239,25,144,50,
                                             
170,73,105,87,142,208,132,4,193,30,
                                             
233,241,112,217,52,208,85,80,79,127,
                                             
157,173,251,241,88,104,225,68,69,
                                             
129,18,6,167,96,151,100,97,233,225,
                                             
188,56,248,248,237,4,226,190,141,
                                             
129,223,162,228,38,188,169,62,40,14,
                                             
71,104,168,183,3,117,19,185,14,61,
                                             
49,114,237,77,2,129,129,0,171,118,
                                             
34,41,37,204,142,158,139,48,2,92,50,
                                             
252,254,77,243,18,75,206,23,147,103,
                                             
195,177,152,72,80,137,87,168,65,111,
                                             
21,82,107,171,31,157,156,21,246,4,
                                             
113,134,33,242,4,189,168,60,72,44,
                                             
145,17,233,7,31,81,159,58,166,69,64,
                                             
233,174,112,229,63,254,92,162,202,
                                             
37,51,75,129,216,85,163,207,58,44,
                                             
218,125,186,64,177,249,64,40,92,67,
                                             
193,106,11,225,138,191,242,152,235,
                                             
61,211,241,156,229,112,233,247,0,
                                             
251,65,102,221,37,233,218,98,195,68,
                                            187,8,97,41,67,146,101&gt;&gt;,
                                          not_encrypted}]}},
                                      [{ssl_certificate,find_issuer,2},
                                        
{ssl_certificate,certificate_chain,4},
                                       {ssl_handshake,certificate,3},
                                       {ssl_connection,certify_server, 
1},
                                       {ssl_connection,
                                         
server_certify_and_key_exchange,1},
                                       {ssl_connection,do_server_hello, 
2},
                                       {lists,foldl,3},
                                       {ssl_connection,handle_event, 
3}]},
                                     {gen_fsm,sync_send_all_state_event,
                                      [&lt;0.235.0&gt;,started,5000]}}}

=INFO REPORT==== 17-Jun-2010::11:12:23 ===
closing TCP connection &lt;0.234.0&gt;


We do not have the skills to interpret the error at the Erlang/SSL  
level, and so we are not able to find out what s wrong with that !


We would realy enjoy if someone can tell what the problem is.

Best regards.

</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007617.html">[rabbitmq-discuss] Rabbitmq Crash
</A></li>
	<LI>Next message: <A HREF="007611.html">[rabbitmq-discuss] Strange behavior with SSL configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7609">[ date ]</a>
              <a href="thread.html#7609">[ thread ]</a>
              <a href="subject.html#7609">[ subject ]</a>
              <a href="author.html#7609">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
