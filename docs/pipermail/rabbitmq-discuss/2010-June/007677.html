<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbit crash, new persister
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3C504DAA5D-213D-4FB2-9569-6D257072BBF9%40tjervaag.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007665.html">
   <LINK REL="Next"  HREF="007664.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbit crash, new persister</H1>
    <B>&#216;yvind Tjervaag</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20crash%2C%20new%20persister&In-Reply-To=%3C504DAA5D-213D-4FB2-9569-6D257072BBF9%40tjervaag.com%3E"
       TITLE="[rabbitmq-discuss] Rabbit crash, new persister">oyvind at tjervaag.com
       </A><BR>
    <I>Sat Jun 19 11:38:50 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007665.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
        <LI>Next message: <A HREF="007664.html">[rabbitmq-discuss] Error running rabbitmqctl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7677">[ date ]</a>
              <a href="thread.html#7677">[ thread ]</a>
              <a href="subject.html#7677">[ subject ]</a>
              <a href="author.html#7677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks John! I've been looking for more examples of what you can do with the config file.. Is there a definitive list somewhere? I suppose I have to go and dig in the Erlang/OTP docs to find it? Will try out the ones you sent though, can't hurt to squeeze a bit more performance out of my setup.

Don't have any spesific numbers, and it might not be a fair comparison, but so far my bottleneck seems to be WebsphereMQ and not rabbit so far..

I don't have that much more code that what can be found in the examples in the docs. But I don't mind helping out if you hit any problems. Don't know if I would be able to help, but I will try my best ;)

thanks again,
/&#216;yvind

On Jun 18, 2010, at 10:23 PM, John Apps wrote:

&gt;<i> I have been using the Java programs which are available with the kit. .NET is something I have yet to try and really should start.
</I>&gt;<i> One word of warning: since Erlang is 32-bit mode only, you will run out of memory quite quickly with certain tests, leading invariably to a crash. You probably already know this, but in case you did not...
</I>&gt;<i> If you have a handy little .NET example lying around, I would love to give a go. However, I will download the .NET kit and give it a whirl.
</I>&gt;<i> 
</I>&gt;<i> I have the following lines in my rabbitmq.config file:
</I>&gt;<i> 
</I>&gt;<i> [
</I>&gt;<i>         {kernel,
</I>&gt;<i>                 [{inet_dist_listen_min, 65535},
</I>&gt;<i>                  {inet_dist_listen_max, 65535},
</I>&gt;<i>                  {inet_default_listen_options,
</I>&gt;<i>                         [{nodelay,true}, {sndbuf,65535}, {recbuf,65535}]},
</I>&gt;<i>                  {inet_default_connect_options, [{nodelay,true}]}
</I>&gt;<i>                 ]
</I>&gt;<i>         },
</I>&gt;<i>         {os_mon,
</I>&gt;<i>                 [{start_cpu_sup,true},
</I>&gt;<i>                  {start_disksup,false},
</I>&gt;<i>                  {start_memsup, false},
</I>&gt;<i>                  {system_memory_high_watermark, 0.9}
</I>&gt;<i>                 ]
</I>&gt;<i>         },
</I>&gt;<i>         {rabbit, [{vm_memory_high_watermark, 0.4}]},
</I>&gt;<i>         {rabbit, [{memory_alarms, true}]},
</I>&gt;<i>         {mnesia, [{dump_log_write_threshold, 1000}]},
</I>&gt;<i>         {rabbit, []}
</I>&gt;<i> ].
</I>&gt;<i> The important ones are the vm_memory_high_watermark and the memory_alarms true. I have found that using the maximum sndbuf and recbuf give me the best performance on Windows 7 X64.
</I>&gt;<i> 2010/6/18 &#216;yvind Tjervaag &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">oyvind at tjervaag.com</A>&gt;
</I>&gt;<i> Ah, neat, wich also remind me I have to start looking into 1.8.0. Are you using the .NET client lib, and did you have to change a lot of you code to get it working?
</I>&gt;<i> 
</I>&gt;<i> /&#216;yvind
</I>&gt;<i> 
</I>&gt;<i> On Jun 18, 2010, at 8:41 PM, John Apps wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I define the RABBITMQ_* variables thus:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; RABBITMQ_BASE=C:\AMQP\RabbitMQ\rabbitmq_server-1.8.0
</I>&gt;<i> &gt; RABBITMQ_CONFIG_FILE=C:\AMQP\RabbitMQ\rabbitmq
</I>&gt;<i> &gt; RABBITMQ_NODENAME=BIGPOOH
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; which leads to log and DB being defined under RABBITMQ_BASE. Good to have as I am running 3 different versions of RabbitMQ right now, 1.7.1, 1.7.2 and 1.8.0. No need, really, it was just so easy to setup.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> ---
</I>&gt;<i> John Apps
</I>&gt;<i> (49) 171 869 1813
</I>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007665.html">[rabbitmq-discuss] Rabbit crash, new persister
</A></li>
	<LI>Next message: <A HREF="007664.html">[rabbitmq-discuss] Error running rabbitmqctl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7677">[ date ]</a>
              <a href="thread.html#7677">[ thread ]</a>
              <a href="subject.html#7677">[ subject ]</a>
              <a href="author.html#7677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
