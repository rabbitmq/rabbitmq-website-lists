<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 'immediate' vs 'mandatory'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%27immediate%27%20vs%20%27mandatory%27&In-Reply-To=%3CB738630B-F917-4F61-B4A4-58F8CA2CA540%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007472.html">
   <LINK REL="Next"  HREF="007478.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 'immediate' vs 'mandatory'</H1>
    <B>Oleg Zhurakousky</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%27immediate%27%20vs%20%27mandatory%27&In-Reply-To=%3CB738630B-F917-4F61-B4A4-58F8CA2CA540%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] 'immediate' vs 'mandatory'">ozhurakousky at vmware.com
       </A><BR>
    <I>Sun Jun  6 18:20:56 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007472.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
        <LI>Next message: <A HREF="007478.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7476">[ date ]</a>
              <a href="thread.html#7476">[ thread ]</a>
              <a href="subject.html#7476">[ subject ]</a>
              <a href="author.html#7476">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, if the only way for the server to know &quot;the client has processed the message successfully is if it receives an ack&quot;, but at the same time server can not wait for an ack forever (in case of client failures), then what is the purpose of an ACK in relation to 'immediate' flag? It seem to be meaningless... right? 

Oleg
On Jun 4, 2010, at 1:19 PM, Simon MacMullen wrote:

&gt;<i> On 04/06/10 18:03, Oleg Zhurakousky wrote:
</I>&gt;&gt;<i> Well, 'a' and 'b' are actually different IMHO.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> If I have a consumer with noAck set to 'false', then I am sending the
</I>&gt;&gt;<i> basicAck conditionally inside of the handleDelivery() method. This
</I>&gt;&gt;<i> means that even though handleDelivery() was successfully invoked, the
</I>&gt;&gt;<i> ACK might not have been sent, right?
</I>&gt;<i> 
</I>&gt;<i> From the perspective of the client, or of an all-knowing observer, 
</I>&gt;<i> that's true. From the perspective of the server, suppose it delivers the 
</I>&gt;<i> message and then the connection goes away - did the client crash or lose 
</I>&gt;<i> power? Did it get as far as invoking handleDelivery() (or whatever the 
</I>&gt;<i> client API looks like) or not?
</I>&gt;<i> 
</I>&gt;<i> The only way it'll know the client has processed the message 
</I>&gt;<i> successfully is if it receives an ack.
</I>&gt;<i> 
</I>&gt;<i> But to return to the immediate flag, my &quot;Hmm&quot; in the last mail may have 
</I>&gt;<i> been premature. The spec says:
</I>&gt;<i> 
</I>&gt;<i> &quot;When a message arrives in a message queue, the message queue tries 
</I>&gt;<i> immediately to pass it to a consumer application via AMQP. If this is 
</I>&gt;<i> not possible, the message queue stores the message (in memory or on disk
</I>&gt;<i> as requested by the producer) and waits for a consumer to be ready. If 
</I>&gt;<i> there are no consumers, the message queue may return the message to the 
</I>&gt;<i> producer via AMQP (again, if the producer asked for this).&quot;
</I>&gt;<i> 
</I>&gt;<i> I think the motivation for this behaviour is that if the server waited 
</I>&gt;<i> for an ack, it could have to wait a long time.
</I>&gt;<i> 
</I>&gt;<i> Cheers, Simon
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007472.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
	<LI>Next message: <A HREF="007478.html">[rabbitmq-discuss] 'immediate' vs 'mandatory'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7476">[ date ]</a>
              <a href="thread.html#7476">[ thread ]</a>
              <a href="subject.html#7476">[ subject ]</a>
              <a href="author.html#7476">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
