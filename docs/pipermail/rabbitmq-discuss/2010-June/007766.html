<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Debugging rabbitmq crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Debugging%20rabbitmq%20crash&In-Reply-To=%3C20100625161607.GB21998%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007765.html">
   <LINK REL="Next"  HREF="007767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Debugging rabbitmq crash</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Debugging%20rabbitmq%20crash&In-Reply-To=%3C20100625161607.GB21998%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Debugging rabbitmq crash">matthew at rabbitmq.com
       </A><BR>
    <I>Fri Jun 25 17:16:08 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007765.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
        <LI>Next message: <A HREF="007767.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7766">[ date ]</a>
              <a href="thread.html#7766">[ thread ]</a>
              <a href="subject.html#7766">[ subject ]</a>
              <a href="author.html#7766">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt,

On Fri, Jun 25, 2010 at 12:00:07PM -0400, Matt Calder wrote:
&gt;<i> =INFO REPORT==== 23-Jun-2010::01:59:00 ===
</I>&gt;<i>    alarm_handler: {set,{system_memory_high_watermark,[]}}
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 23-Jun-2010::02:02:55 ===
</I>&gt;<i>    alarm_handler: {clear,system_memory_high_watermark}
</I>&gt;<i> 
</I>&gt;<i> =WARNING REPORT==== 23-Jun-2010::06:27:37 ===
</I>&gt;<i> exception on TCP connection &lt;0.15425.0&gt; from 127.0.0.1:47025
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 23-Jun-2010::06:27:37 ===
</I>&gt;<i> closing TCP connection &lt;0.15425.0&gt; from 127.0.0.1:47025
</I>
This is very interesting. Rabbit did run out of memory, but then later
recovered. And then some 4 hours later, the client was kicked off. The
python client doesn't handle channel.flow (the server raises this when
it runs out of memory which is asking the client to stop publishing
messages - see <A HREF="http://www.rabbitmq.com/extensions.html#memsup">http://www.rabbitmq.com/extensions.html#memsup</A>). Do you
have any evidence that the client managed to do anything at all between
2am and 6:30am? I wonder if there is some very long timeout somewhere
and that you're actually hitting a limitation in the python client which
for some reason takes 4.5 hours until the client gets kicked off. Lots
of guessing here though...

Matthew
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007765.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
	<LI>Next message: <A HREF="007767.html">[rabbitmq-discuss] Debugging rabbitmq crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7766">[ date ]</a>
              <a href="thread.html#7766">[ thread ]</a>
              <a href="subject.html#7766">[ subject ]</a>
              <a href="author.html#7766">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
