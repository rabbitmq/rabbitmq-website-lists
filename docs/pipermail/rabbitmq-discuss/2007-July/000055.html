<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] FW: Multiple consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20FW%3A%20Multiple%20consumers&In-Reply-To=lylkd8x6l8.fsf%40tanto.lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000054.html">
   <LINK REL="Next"  HREF="000056.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] FW: Multiple consumers</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20FW%3A%20Multiple%20consumers&In-Reply-To=lylkd8x6l8.fsf%40tanto.lshift.net"
       TITLE="[rabbitmq-discuss] FW: Multiple consumers">0x6e6562 at gmail.com
       </A><BR>
    <I>Sun Jul 22 11:01:16 BST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000054.html">[rabbitmq-discuss] FW: Multiple consumers
</A></li>
        <LI>Next message: <A HREF="000056.html">[rabbitmq-discuss] FW: Multiple consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55">[ date ]</a>
              <a href="thread.html#55">[ thread ]</a>
              <a href="subject.html#55">[ subject ]</a>
              <a href="author.html#55">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

&gt;<i> The most direct route actually looks more like this:
</I>&gt;<i>
</I>&gt;<i> rpc:
</I>&gt;<i> caller --&gt; channel
</I>&gt;<i> caller &lt;-- channel
</I>&gt;<i>
</I>&gt;<i> message to subscriber:
</I>&gt;<i> consumer &lt;-- channel &lt;-- queue
</I>&gt;<i>
</I>&gt;<i> Here the channel plays the role of the client channel, server channel,
</I>&gt;<i> and server writer.
</I>
Agreed.

&gt;<i>
</I>&gt;<i> That is reasonably challenging to implement. OTOH it will probably force
</I>&gt;<i> the kind of abstractions that would be good to have in any case.
</I>
That's why I'm asking the question, because you will need to
incoporate this refactored flow into the flow of the current *socket
based* channel. By passing the messages back to the initiating client
to pass on to the actual subscriber, you don't have to change this.
The only reason I can see right now why you may do this is to optimize
this extra hop away. But as far as I can see, this is only relevant
for the non-networked case, which is why I didn't understand the way
you answered my question about direct dispatching below (because
you're probably envisaging something I haven't thought about).

&gt;<i>
</I>&gt;<i> &gt; So the question I was trying to ask was: Does this direct dispatch
</I>&gt;<i> &gt; gain you anything?
</I>&gt;<i>
</I>&gt;<i> In the networked case we need to add quite a few actors:
</I>&gt;<i>
</I>&gt;<i> rpc:
</I>&gt;<i> caller --&gt; c_channel --&gt; c_writer --&gt; s_reader --&gt; s_channel
</I>&gt;<i> caller &lt;-- c_channel &lt;-- c_reader &lt;-- s_writer &lt;-- s_channel
</I>&gt;<i>
</I>&gt;<i> message to subscriber:
</I>&gt;<i> consumer &lt;-- c_channel &lt;-- c_reader &lt;-- s_writer &lt;-- queue
</I>
Agreed.

&gt;<i>
</I>&gt;<i> I reckon the short-circuit route is worthwhile since it simplifies (and
</I>&gt;<i> as a result speeds up) things considerably -- If we are going to have a
</I>&gt;<i> direct client at all, we might as well go the most direct route.
</I>
Please understand this in the context of what I said above. I don't
see the relevance of the direct route in the networked case. In the
networked case, you will be using the same socket connection to send
the messages back to the subscriber, so this is exactly the same thing
as the current Java client, as you've correctly pointed out in the
diagram.

So I don't see where the short-circuit route comes into play in the
networked case, only in the non-networked case where you can utilize
erlang message passing.

I hope I haven't totally misunderstood what you have said.

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000054.html">[rabbitmq-discuss] FW: Multiple consumers
</A></li>
	<LI>Next message: <A HREF="000056.html">[rabbitmq-discuss] FW: Multiple consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55">[ date ]</a>
              <a href="thread.html#55">[ thread ]</a>
              <a href="subject.html#55">[ subject ]</a>
              <a href="author.html#55">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
