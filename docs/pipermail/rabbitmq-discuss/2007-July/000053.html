<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] FW: Multiple consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20FW%3A%20Multiple%20consumers&In-Reply-To=lyr6n1wf90.fsf%40tanto.lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000052.html">
   <LINK REL="Next"  HREF="000054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] FW: Multiple consumers</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20FW%3A%20Multiple%20consumers&In-Reply-To=lyr6n1wf90.fsf%40tanto.lshift.net"
       TITLE="[rabbitmq-discuss] FW: Multiple consumers">0x6e6562 at gmail.com
       </A><BR>
    <I>Sun Jul 22 00:23:06 BST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000052.html">[rabbitmq-discuss] FW:  Multiple consumers
</A></li>
        <LI>Next message: <A HREF="000054.html">[rabbitmq-discuss] FW: Multiple consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53">[ date ]</a>
              <a href="thread.html#53">[ thread ]</a>
              <a href="subject.html#53">[ subject ]</a>
              <a href="author.html#53">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

&gt;<i> &gt; a) pass the Pid of a subscriber into the channel
</I>&gt;<i> &gt; b) have subscription events get sent back to the client process, which
</I>&gt;<i> &gt; then in turn can forward them on to a subscriber.
</I>
&gt;<i> In the Java client code it is the *channel* that keeps handles to
</I>&gt;<i> Consumers, and dispatches messages to them. So that is actually closer
</I>&gt;<i> to option (a).
</I>
I agree that the client side terminology uses a *channel* that
dispatches to consumers, but I think we may may actually be talking
about the same thing. The analogy I was trying to draw in option (b)
was that in the Java client you have a thread that deframes data off
the wire and passes it on to event consumers. With the erlang client
in option (b), the server sends all events to the client process which
in turn would multiplex them to the consumers registered with the
client. The difference is that only the client knows about the
existence of the physical consumer process. Option (a) could make use
of the fact that as an erlang process, the server channel could
directly send an event to a consumer process, thus bypassing the
client process as follows:

client                       server

reader 1..n  &lt;-----  writer 1..n

So the question I was trying to ask was: Does this direct dispatch
gain you anything? Certainly it is less intrusive to keep it as you
have illustrated below, at the (potentially negliable) cost of
shoveling data from the server writer to the consumer via the client
reader:


client processes       data shovel        server

consumer 1..n &lt;----- reader &lt;---------- writer 1..n

&gt;<i>
</I>&gt;<i> Ultimately, certainly when moving to a full networked client, you will
</I>&gt;<i> end up with reader/channel/writer processes that are wired like this
</I>&gt;<i>
</I>&gt;<i> client         server
</I>&gt;<i>
</I>&gt;<i> reader &lt;------ writer1..n
</I>&gt;<i>
</I>&gt;<i> channel1..n    channel1..n
</I>&gt;<i>
</I>&gt;<i> writer1..n --&gt; reader
</I>&gt;<i>
</I>&gt;<i> Consumer processes would hang off the client channel1..n processes.
</I>&gt;<i>
</I>&gt;<i> The &quot;wires&quot; may either be straight Erlang communication, bypassing any
</I>&gt;<i> framing and marshalling, or fully-fledged AMQP communication of TCP/IP
</I>&gt;<i> etc involving framing and marshalling.
</I>
I like the way you represented this, it helps in clarifying the interaction.

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000052.html">[rabbitmq-discuss] FW:  Multiple consumers
</A></li>
	<LI>Next message: <A HREF="000054.html">[rabbitmq-discuss] FW: Multiple consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53">[ date ]</a>
              <a href="thread.html#53">[ thread ]</a>
              <a href="subject.html#53">[ subject ]</a>
              <a href="author.html#53">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
