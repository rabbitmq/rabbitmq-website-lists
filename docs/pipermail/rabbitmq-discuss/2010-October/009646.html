<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] spring-amqp
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20spring-amqp&In-Reply-To=%3C288738a0-1d7d-4184-aa21-74755b78b484%40l17g2000yqe.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009643.html">
   <LINK REL="Next"  HREF="009628.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] spring-amqp</H1>
    <B>Dave Syer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20spring-amqp&In-Reply-To=%3C288738a0-1d7d-4184-aa21-74755b78b484%40l17g2000yqe.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] spring-amqp">david.syer at googlemail.com
       </A><BR>
    <I>Wed Oct 27 01:43:25 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009643.html">[rabbitmq-discuss] spring-amqp
</A></li>
        <LI>Next message: <A HREF="009628.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9646">[ date ]</a>
              <a href="thread.html#9646">[ thread ]</a>
              <a href="subject.html#9646">[ subject ]</a>
              <a href="author.html#9646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> That said, what is the intended model for retry? &#160;I don't see a &quot;delayed
</I>&gt;<i> retry&quot; being part of AMQP.
</I>
Neither do I.  AMQP gives you redelivery of unacked messages.  That's
as far as we expect it to take us for now.  Rabbit happens to re-queue
unacked messages at the *back* of the queue, which gives you some
useful delay in practice under load, but not if volume is low.

We have a retry abstraction in Spring Batch, and it has moved to
Spring Commons so that Spring Data can use it for JDBC connection
retry in an Oracle cluster.  The Batch piece is used heavily by at
least one large client I know of purely to handle delayed retry (with
JMS in that case, but the idea is the same).  From Rabbit's point of
view I'dsay this is an &quot;application&quot; concern, but there are higher
level frameworks like the Spring family that can help to take the pain
out of implementing such concerns.  Spring AMQP could use Spring
Commons to implement a stateful retry (e.g. with a delay).  Out of the
box it is likely to use simple Java Thread APIs (e.g. sleeping) which
is best for short delays.  For longer delays of the sort that Jon was
talking about in that other thread you mentioned, we would need to
think about scheduling, triggers and persistence (all of which are
ingredients in existing Spring frameworks, so no reason why it
wouldn't be do-able - but maybe not the first thing we do).

Anyway, to summarize, if you want the AMQP behaviour (unacked message
= &quot;rolled back&quot; in Spring transaction terms, and re-delivered) you
will get that with no effort from Spring AMQP 1.0.0.M2.  More
complicated retry patterns will come later, and/or require some custom
components (e.g. implementation of retry policy or retry operations).
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009643.html">[rabbitmq-discuss] spring-amqp
</A></li>
	<LI>Next message: <A HREF="009628.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9646">[ date ]</a>
              <a href="thread.html#9646">[ thread ]</a>
              <a href="subject.html#9646">[ subject ]</a>
              <a href="author.html#9646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
