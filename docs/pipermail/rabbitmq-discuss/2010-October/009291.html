<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using Toke
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20Toke&In-Reply-To=%3CAANLkTimPtFcKZoQYOq-eXw6978dbq5nvAgb2x5QFPvwx%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009290.html">
   <LINK REL="Next"  HREF="009295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using Toke</H1>
    <B>tsuraan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20Toke&In-Reply-To=%3CAANLkTimPtFcKZoQYOq-eXw6978dbq5nvAgb2x5QFPvwx%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Using Toke">tsuraan at gmail.com
       </A><BR>
    <I>Mon Oct  4 19:53:15 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009290.html">[rabbitmq-discuss] Using Toke
</A></li>
        <LI>Next message: <A HREF="009295.html">[rabbitmq-discuss] Using Toke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9291">[ date ]</a>
              <a href="thread.html#9291">[ thread ]</a>
              <a href="subject.html#9291">[ subject ]</a>
              <a href="author.html#9291">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Strange, some things are getting the -0.0.0 part, and some aren't.
</I>&gt;<i> The amqp_client and rabbit_common didn't get the -0.0.0, but the toke
</I>&gt;<i> did, so I made links from the files that were created to the -0.0.0
</I>&gt;<i> locations. &#160;I haven't been able to get the actual rabbitmq-toke to
</I>&gt;<i> build yet; I get this error:
</I>&gt;<i>
</I>&gt;<i> ERL_LIBS=/home/tsuraan/rabbitmq-public-umbrella/rabbitmq-toke/dist
</I>&gt;<i> erlc &#160;-Wall +debug_info -I
</I>&gt;<i> /home/tsuraan/rabbitmq-public-umbrella/rabbitmq-toke/include -pa
</I>&gt;<i> /home/tsuraan/rabbitmq-public-umbrella/rabbitmq-toke/ebin -o
</I>&gt;<i> /home/tsuraan/rabbitmq-public-umbrella/rabbitmq-toke/ebin
</I>&gt;<i> /home/tsuraan/rabbitmq-public-umbrella/rabbitmq-toke/src/rabbit_msg_store_toke_index.erl
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:46: can't find include lib
</I>&gt;<i> &quot;rabbit_common/include/rabbit_msg_store_index.hrl&quot;
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:73: record msg_location undefined
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:76: record msg_location undefined
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:77: variable 'Guid' is unbound
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:86: record msg_location undefined
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:95: record msg_location undefined
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:96: variable 'Guid' is unbound
</I>&gt;<i> src/rabbit_msg_store_toke_index.erl:101: record msg_location undefined
</I>&gt;<i> make: *** [/home/tsuraan/rabbitmq-public-umbrella/rabbitmq-toke/ebin/rabbit_msg_store_toke_index.beam]
</I>&gt;<i> Error 1
</I>&gt;<i>
</I>&gt;<i> I don't think the dist dir is being included somehow, although ls
</I>&gt;<i> dist/rabbit_common/include (from the rabbitmq-toke dir) does give me
</I>&gt;<i> rabbit.hrl and rabbit_msg_store_index.hrl. &#160;Could this be related to
</I>&gt;<i> the fact that I'm using links to the 0.0.0 files instead of getting
</I>&gt;<i> them generated properly?
</I>
Ok, so it looks like it was due to this. I modified
rabbitmq-erlang-client/common.mk and added APPEND_VERSION=1 near the
top, and everything built nicely.  For toke to build, I had to change
its makefile so that CFLAGS was set to
&quot;-I/usr/lib64/erlang/usr/include/&quot;; apparently gentoo doesn't put
erlang headers into the common include dir.  Erlang also doesn't
appear to do the pkgconfig thing, so I'm not sure how you can automate
the detection of the header paths.  Anyhow, off to testing now :)
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009290.html">[rabbitmq-discuss] Using Toke
</A></li>
	<LI>Next message: <A HREF="009295.html">[rabbitmq-discuss] Using Toke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9291">[ date ]</a>
              <a href="thread.html#9291">[ thread ]</a>
              <a href="subject.html#9291">[ subject ]</a>
              <a href="author.html#9291">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
