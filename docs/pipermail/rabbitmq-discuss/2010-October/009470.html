<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [Ticket #16] messages get stuck when using	rabbitmq on windows, but not on ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BTicket%20%2316%5D%20messages%20get%20stuck%20when%20using%0A%09rabbitmq%20on%20windows%2C%20but%20not%20on%20...&In-Reply-To=%3C4cb9b6bde524d_191838afdba4681%40BIGPOOH.tmail%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009471.html">
   <LINK REL="Next"  HREF="009473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [Ticket #16] messages get stuck when using	rabbitmq on windows, but not on ...</H1>
    <B>John Apps</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BTicket%20%2316%5D%20messages%20get%20stuck%20when%20using%0A%09rabbitmq%20on%20windows%2C%20but%20not%20on%20...&In-Reply-To=%3C4cb9b6bde524d_191838afdba4681%40BIGPOOH.tmail%3E"
       TITLE="[rabbitmq-discuss] [Ticket #16] messages get stuck when using	rabbitmq on windows, but not on ...">johndapps at gmail.com
       </A><BR>
    <I>Sat Oct 16 15:29:17 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009471.html">[rabbitmq-discuss] [Ticket #15] New Comment: Disabling channel.flow
</A></li>
        <LI>Next message: <A HREF="009473.html">[rabbitmq-discuss] [Ticket #17] Simple client/server running on	different OS are lagging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9470">[ date ]</a>
              <a href="thread.html#9470">[ thread ]</a>
              <a href="subject.html#9470">[ subject ]</a>
              <a href="author.html#9470">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a notification from the Help Desk.


Your ticket has been submitted.  Please reply to this email (keeping the subject intact) with any additional information or comments.

Help Desk: <A HREF="http://BIGPOOH:9675/portal/view-help-request/16">http://BIGPOOH:9675/portal/view-help-request/16</A>
Ticket: # 16
Submitted: Oct 16, 2010 @ 04:29 pm
Summary: [rabbitmq-discuss] messages get stuck when using rabbitmq on windows, but not on ...
Status: open
Priority: Med

Description:
----------------------------------------------------------------------------------------------------
I'm experiencing a problem with messages getting &quot;stalled&quot; when serving
RabbitMQ with Windows XP.

The context is a distributed job processing system, wherein some message
payloads can be around 250-500 kB.  The clients connecting to the broker are
several programs written in Python using the txAMQP library and the AMQP 0-8
protocol.  (*)

We can submit one job in our system, which results in several small
messages, and four larger messages being routed through RabbitMQ with the
size ranges noted above, and this succeeds.  However, when we submit an
identical job, one message with a larger payload is successfully routed, but
the second one is not.  I can see that it successfully reaches the broker
but never reaches the intended destination, because I get this output:

C:\rabbitmq_server-1.7.1\sbin&gt;rabbitmqctl list_connections send_oct
send_pend
Listing connections ...
594     0
1183650 0
236655  0
616     0
610     0
2492155 256809    &lt;-- here is the stuck message
616     0
616     0
367     0


Configuration:
- rabbitmq 1.7.1 on Windows XP, installed from packages available at
rabbitmq.com
- (also exhibited problem with rabbitmq 1.6.0 on Windows XP)
- all clients running on Windows, OR some clients on Windows (required as
they call out to Windows executables) and some on OS X
- ***exhibits problems noted above***

Configuration:
- rabbitmq 1.7.0 on Mac OS X 10.6, installed via
<A HREF="http://github.com/mxcl/homebrew/blob/master/Library/Formula/rabbitmq.rb">http://github.com/mxcl/homebrew/blob/master/Library/Formula/rabbitmq.rb</A>
- all clients running on Windows
- no problems exhibited; can run many jobs successfully

Configuration:
- rabbitmq 1.6.0 on Ubuntu 9.10, installed using official Ubuntu packages
- all clients running on Windows
- no problems exhibited; can run many jobs successfully


We would prefer to run RabbitMQ as a service on Windows, as we have more
combined experience with Windows administration, but if stumped we will
consider running RabbitMQ on a locked down Ubuntu VM.

If needed I can try to create and post a script that triggers this problem,
but I thought I'd post this first to see if anyone has experienced a similar
problem and can offer a potential solution, or other troubleshooting
techniques.


(*) These programs originally used py-amqplib, and experienced the same
problem, but were ported to txAMQP to see if that would fix the problem and
to also improve performance when the system is idle.  Unfortunately while
the system performance improved, the problem with RabbitMQ on Windows still
persists.


-- 
Matthew Scott
ElevenCraft Inc.
+1 360 389-2512
----------------------------------------------------------------------------------------------------
This is an automated message sent from your help desk.
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009471.html">[rabbitmq-discuss] [Ticket #15] New Comment: Disabling channel.flow
</A></li>
	<LI>Next message: <A HREF="009473.html">[rabbitmq-discuss] [Ticket #17] Simple client/server running on	different OS are lagging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9470">[ date ]</a>
              <a href="thread.html#9470">[ thread ]</a>
              <a href="subject.html#9470">[ subject ]</a>
              <a href="author.html#9470">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
