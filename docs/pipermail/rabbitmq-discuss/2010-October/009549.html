<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue replication (I know, I know)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20replication%20%28I%20know%2C%20I%20know%29&In-Reply-To=%3C4CBF040B.702%40cpicorp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009538.html">
   <LINK REL="Next"  HREF="009551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue replication (I know, I know)</H1>
    <B>Derek Chen-Becker</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20replication%20%28I%20know%2C%20I%20know%29&In-Reply-To=%3C4CBF040B.702%40cpicorp.com%3E"
       TITLE="[rabbitmq-discuss] Queue replication (I know, I know)">dbecker at cpicorp.com
       </A><BR>
    <I>Wed Oct 20 16:00:27 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009538.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
        <LI>Next message: <A HREF="009551.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9549">[ date ]</a>
              <a href="thread.html#9549">[ thread ]</a>
              <a href="subject.html#9549">[ subject ]</a>
              <a href="author.html#9549">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/20/2010 05:05 AM, Simon MacMullen wrote:
&gt;<i> On 20/10/10 05:14, Derek Chen-Becker wrote:
</I>&gt;&gt;<i> What's more interesting is that if I copy the /var/lib/rabbitmq
</I>&gt;&gt;<i> directory to the backup host *without stopping the primary broker*, and
</I>&gt;&gt;<i> then stop the primary and start the backup, everything still appears to
</I>&gt;&gt;<i> work fine. Now, I suspect that with the low volume I'm pushing here I'm
</I>&gt;&gt;<i> just getting lucky and not copying files in an inconsistent state,
</I>&gt;<i> 
</I>&gt;<i> Probably not. Rabbit is designed to repair queues when it comes up 
</I>&gt;<i> again, so if you're copying queues when they're inconsistent it'll get 
</I>&gt;<i> fixed by the time the backup broker is accepting connections. Of course, 
</I>&gt;<i> if you're unlucky, you could lose a few messages in such a process but 
</I>&gt;<i> from what you've said before it sounds like that isn't your biggest concern?
</I>
OK, that helps us a lot. Our main concern is with not having to
retransmit a large time-span of messages, but we can deal with a few
lost ones in the case where the primary broker goes down. Your note on
doing transacted publishes makes sense, so we'll modify our wrappers to
do that. I'm assuming there's some performance overhead with transacted
messages but with the low volume we're talking about that shouldn't be
an issue.

&gt;<i> Hmm, interesting idea. I'll see if we're interested in doing that. We're 
</I>&gt;<i> currently looking at how to make the HA experience better so this might 
</I>&gt;<i> be a possibility.
</I>
Thanks, any work to improve HA would be greatly appreciated.

Derek
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009538.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
	<LI>Next message: <A HREF="009551.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9549">[ date ]</a>
              <a href="thread.html#9549">[ thread ]</a>
              <a href="subject.html#9549">[ subject ]</a>
              <a href="author.html#9549">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
