<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] another approach to retrieve message from queue?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20another%20approach%20to%20retrieve%20message%20from%0A%20queue%3F&In-Reply-To=%3C29968590.post%40talk.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009429.html">
   <LINK REL="Next"  HREF="009447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] another approach to retrieve message from queue?</H1>
    <B>sam_mis</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20another%20approach%20to%20retrieve%20message%20from%0A%20queue%3F&In-Reply-To=%3C29968590.post%40talk.nabble.com%3E"
       TITLE="[rabbitmq-discuss] another approach to retrieve message from queue?">sameek at arosys.com
       </A><BR>
    <I>Fri Oct 15 05:24:23 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009429.html">[rabbitmq-discuss] another approach to retrieve message from	queue?
</A></li>
        <LI>Next message: <A HREF="009447.html">[rabbitmq-discuss] another approach to retrieve message from	queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9446">[ date ]</a>
              <a href="thread.html#9446">[ thread ]</a>
              <a href="subject.html#9446">[ subject ]</a>
              <a href="author.html#9446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Thanks for reply.i tried that code code but it read queue only once time when
another message come it's not show next message it only show old message
repeatedly.please guide me where i am doing mistake.
<A HREF="http://old.nabble.com/file/p29968590/Result.java">http://old.nabble.com/file/p29968590/Result.java</A> Result.java 


Rob Harrop-5 wrote:
&gt;<i> 
</I>&gt;<i> Using Channel.basicConsume along with QueueingConsumer (or another
</I>&gt;<i> implementation of Consumer) is what I would recommend.
</I>&gt;<i> 
</I>&gt;<i> If you want to just grab a message of the queue as a one-shot action then
</I>&gt;<i> you can use Channel.basicGet:
</I>&gt;<i> 
</I>&gt;<i> GetResponse r = channel.basicGet(&quot;thequeue&quot;, true); // note use of noAck =
</I>&gt;<i> true
</I>&gt;<i> 
</I>&gt;<i> if(r != null) {
</I>&gt;<i>  // got a message
</I>&gt;<i>  byte[] contents = r.getBody();
</I>&gt;<i>  doSomethingWithBody(r);
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Note the null check - this is important. Channel.basicGet does not block
</I>&gt;<i> until a message becomes available, instead it just returns null if there
</I>&gt;<i> is no message.
</I>&gt;<i> 
</I>&gt;<i> Hope this helps,
</I>&gt;<i> 
</I>&gt;<i> Rob
</I>&gt;<i> 
</I>&gt;<i> On 14 Oct 2010, at 07:35, sam_mis wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> i am using the following code to read an queue and extract the messages
</I>&gt;&gt;<i> from
</I>&gt;&gt;<i> queue. I want to know that there is another approach to retrieve message
</I>&gt;&gt;<i> from queue? if there is another approach please describe the details
</I>&gt;&gt;<i> information to get the messages from queue. 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> while (runInfinite)
</I>&gt;&gt;<i> {
</I>&gt;&gt;<i>     QueueingConsumer.Delivery delivery;
</I>&gt;&gt;<i>            try
</I>&gt;&gt;<i>            {
</I>&gt;&gt;<i>              delivery = consumer.nextDelivery();
</I>&gt;&gt;<i>            } catch (InterruptedException ie)
</I>&gt;&gt;<i>            {
</I>&gt;&gt;<i>               continue;
</I>&gt;&gt;<i>            }
</I>&gt;&gt;<i>         System.out.println(&quot;Message received-&quot;
</I>&gt;&gt;<i> + new String(delivery.getBody()));
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> file included that contain the  code for reading and extracting message:
</I>&gt;&gt;<i> --------------------------------------------------------------------------
</I>&gt;&gt;<i> <A HREF="http://old.nabble.com/file/p29959643/Result.java">http://old.nabble.com/file/p29959643/Result.java</A> Result.java 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> View this message in context:
</I>&gt;&gt;<i> <A HREF="http://old.nabble.com/another-approach-to-retrieve-message-from-queue--tp29959643p29959643.html">http://old.nabble.com/another-approach-to-retrieve-message-from-queue--tp29959643p29959643.html</A>
</I>&gt;&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://old.nabble.com/another-approach-to-retrieve-message-from-queue--tp29959643p29968590.html">http://old.nabble.com/another-approach-to-retrieve-message-from-queue--tp29959643p29968590.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009429.html">[rabbitmq-discuss] another approach to retrieve message from	queue?
</A></li>
	<LI>Next message: <A HREF="009447.html">[rabbitmq-discuss] another approach to retrieve message from	queue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9446">[ date ]</a>
              <a href="thread.html#9446">[ thread ]</a>
              <a href="subject.html#9446">[ subject ]</a>
              <a href="author.html#9446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
