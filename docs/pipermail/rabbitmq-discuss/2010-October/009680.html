<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] problem with new persiter with 1000	topics/queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C4CC9F68F.8040201%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009678.html">
   <LINK REL="Next"  HREF="009679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] problem with new persiter with 1000	topics/queues</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C4CC9F68F.8040201%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] problem with new persiter with 1000	topics/queues">matthias at rabbitmq.com
       </A><BR>
    <I>Thu Oct 28 23:17:51 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009678.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
        <LI>Next message: <A HREF="009679.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9680">[ date ]</a>
              <a href="thread.html#9680">[ thread ]</a>
              <a href="subject.html#9680">[ subject ]</a>
              <a href="author.html#9680">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alex,

alex chen wrote:
&gt;<i> The broker's memory usage grew from 6.2GB to 10 GB 1 hour after the
</I>&gt;<i> consumers were started.
</I>
A spike like that is not unusual if you are, say, starting a lot of 
connections all at once, have them all declare queues and then start 
consuming from them. But rabbit should reduce the memory usage down 
below the set limit eventually. Though see below.

&gt;<i> I think the broker only throttles the publisher when the mem high
</I>&gt;<i> water mark is reached
</I>
Correct, as long as producers and consumers are on different connections.

&gt;<i> but the consumers can still increase the broker's mem usage?
</I>
Delivered but unacknowledged messages are held in RAM. This is something
we are going to change in a future release. Meanwhile, are you setting a 
prefetch count? That will bound the number of unacked messages and thus 
the memory taken up by them.

Regards,

Matthias.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009678.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
	<LI>Next message: <A HREF="009679.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9680">[ date ]</a>
              <a href="thread.html#9680">[ thread ]</a>
              <a href="subject.html#9680">[ subject ]</a>
              <a href="author.html#9680">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
