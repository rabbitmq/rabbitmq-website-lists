<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue replication (I know, I know)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20replication%20%28I%20know%2C%20I%20know%29&In-Reply-To=%3C4CBE6C8E.9070304%40cpicorp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009497.html">
   <LINK REL="Next"  HREF="009538.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue replication (I know, I know)</H1>
    <B>Derek Chen-Becker</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20replication%20%28I%20know%2C%20I%20know%29&In-Reply-To=%3C4CBE6C8E.9070304%40cpicorp.com%3E"
       TITLE="[rabbitmq-discuss] Queue replication (I know, I know)">dbecker at cpicorp.com
       </A><BR>
    <I>Wed Oct 20 05:14:06 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009497.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
        <LI>Next message: <A HREF="009538.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9532">[ date ]</a>
              <a href="thread.html#9532">[ thread ]</a>
              <a href="subject.html#9532">[ subject ]</a>
              <a href="author.html#9532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So, I've been doing some testing today with backing up the data store
for a broker to another machine and so far things have been working. If
I shut down the broker, copy the /var/lib/rabbitmq directory from the
server to a backup host, then start a new broker on the backup host,
durable queues/exchanges show up, persistent messages are exactly as
they were on the primary host, etc. I would be rather surprised if this
didn't work, but I wanted to throw this out there as a data point.

What's more interesting is that if I copy the /var/lib/rabbitmq
directory to the backup host *without stopping the primary broker*, and
then stop the primary and start the backup, everything still appears to
work fine. Now, I suspect that with the low volume I'm pushing here I'm
just getting lucky and not copying files in an inconsistent state, but
it made me think of possibly another approach to making backups: would
it be possible to implement a &quot;pause/snapshot&quot; for the broker such that
it would flush data, hold off on writes, etc. so that I could copy the
data in a consistent state. I could then issue a &quot;resume&quot; and all of the
clients would just continue on their merry way. At least this way the
sockets and socket bindings would stay open so that as far as clients
are concerned my broker is just being reaaaaallly slow.

Thanks,

Derek
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009497.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
	<LI>Next message: <A HREF="009538.html">[rabbitmq-discuss] Queue replication (I know, I know)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9532">[ date ]</a>
              <a href="thread.html#9532">[ thread ]</a>
              <a href="subject.html#9532">[ subject ]</a>
              <a href="author.html#9532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
