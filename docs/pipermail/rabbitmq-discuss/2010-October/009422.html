<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] About PHP PECL extension
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20About%20PHP%20PECL%20extension&In-Reply-To=%3CF5337DD6-2768-4C36-A5A0-222AFD7363E4%40mozilla.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009410.html">
   <LINK REL="Next"  HREF="009432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] About PHP PECL extension</H1>
    <B>Christian Legnitto</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20About%20PHP%20PECL%20extension&In-Reply-To=%3CF5337DD6-2768-4C36-A5A0-222AFD7363E4%40mozilla.com%3E"
       TITLE="[rabbitmq-discuss] About PHP PECL extension">clegnitto at mozilla.com
       </A><BR>
    <I>Thu Oct 14 06:41:11 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009410.html">[rabbitmq-discuss] About PHP PECL extension
</A></li>
        <LI>Next message: <A HREF="009432.html">[rabbitmq-discuss] About PHP PECL extension
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9422">[ date ]</a>
              <a href="thread.html#9422">[ thread ]</a>
              <a href="subject.html#9422">[ subject ]</a>
              <a href="author.html#9422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, I wasn't interested in this before but now I am :-). I plan to write a mediawiki extension that publishes messages into rabbit and this is a rather crucial piece.

Let me know what help I can give.

I would also take a look at carrot (python) as it has an API that is fairly easy to use and can be generalized for other protocols (like stomp). Every time I do something amqp specific it seems like the next question is if it will support stomp. That being said, I like what has been proposed so far.

Thanks,
Christian

On Oct 12, 2010, at 9:09 PM, Brad Rodriguez wrote:

&gt;<i> I generally like the API of the Java client, although we would obviously not want the php client to be quite as verbose.
</I>&gt;<i> 
</I>&gt;<i> I'm on board with disabling auto-connect in favor of explicitly controlling when we connect and disconnect. Specifically, having disconnect and reconnect methods will be especially useful.
</I>&gt;<i> 
</I>&gt;<i> I like the following API:
</I>&gt;<i> 
</I>&gt;<i> $connection = new AMQPConnection($params);
</I>&gt;<i> $connection-&gt;connect();
</I>&gt;<i> 
</I>&gt;<i> $exchangeList = $connection-&gt;listExchanges();
</I>&gt;<i> $exchange = $connection-&gt;exchangeDeclare('my_exchange', AMQP_EX_TYPE_TOPIC, $flags);
</I>&gt;<i> 
</I>&gt;<i> $queueList = $exchange-&gt;listQueues();
</I>&gt;<i> $queue = $connection-&gt;queueDeclare('my_queue', $flags);
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> $queue-&gt;bind($exchange, $routingKey);
</I>&gt;<i> $queue-&gt;unbind($exchange, $routingKey);
</I>&gt;<i> 
</I>&gt;<i> $exchange-&gt;publish($message, $routingKey);
</I>&gt;<i> 
</I>&gt;<i> $connection-&gt;disconnect();
</I>&gt;<i> 
</I>&gt;<i> -Brad
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Oct 8, 2010, at 6:54 PM, Pieter de Zwart wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Happy too. Though I&#8217;m gonna point at you if we start annoying people =)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I looked through the Java client, which would seem to be the most mature and well built client to date. The major difference between the PHP extension (hereby PHPE) and the Java client (hereby JC... get it?) is that the JC allows the creation of multiple channels, and the ability to act within a channel. PHPE instead uses one channel for everything (channel 1.)
</I>&gt;&gt;<i> As far as objects go, since I want PHPE to be OO, the current layout seems to make sense to me, with AMQPConnection, AMQPExchange and AMQPQueue. From there, the methods I think need to be cleaned up:
</I>&gt;&gt;<i> AMQPConnection should continue to allow the $params = array() setup, whereby a user can create and set username, password, host, port and vhost, like so:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> $cnn = new AMQPConnection(array(&#8216;login&#8217; =&gt; &#8216;guest&#8217;, &#8216;password&#8217; =&gt; &#8216;&#8217;, &#8216;host&#8217; =&gt; &#8216;localhost&#8217;)); 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> However, I want to remove the auto-connect portion of the constructor, so users have to call:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> $cnn-&gt;connect();
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> That way, we can also add the following method: setLogin, setPassword, setPort, setHost, setVHost. I also want to add the following action methods: reconnect, disconnect.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The connection object should in turn give access to exchanges and queues, but how I am not yet sure, and I would love feedback from everyone on this. I like JC&#8217;s approach of using AMQPConnection-&gt;queueDeclare and AMQPConnectio-&gt;exchangeDeclare which would return instances of AMQPQueue and AMQPExchange respectively. I guess those methods would also accept an additional bit mask for options, and if the queue/exchange already exists, the new bit mask values would be applied...
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I am tired, so I will stop here and look for others to poke holes in my theory. Feedback from JC users in particular would be much appreciated in terms of likes and dislikes of their client.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Pieter 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 10/8/10 12:41 AM, &quot;Pedram Nimreezi&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mc at majorcomputing.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Keep it on the air ways...  if you would...
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Fri, Oct 8, 2010 at 3:11 AM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> Well,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> I said where is the place to contribute, not that I had something to contribute right now&#8230;
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> But we might start using this extension in prod and I remember last time I checked the API there was some stuff I'd like it to be &quot;different&quot;
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Alvaro
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On Oct 8, 2010, at 3:09 PM, Pieter de Zwart wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> &gt; Oh thank you deity of your choice for answering me. I need help.
</I>&gt;&gt;&gt;&gt;<i> &gt; Lets take this off list so we don't pollute the airways.
</I>&gt;&gt;&gt;&gt;<i> &gt; Pieter
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt; On 10/8/10 12:06 AM, &quot;Alvaro Videla&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt; Hi Pieter,
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt; My question is more where is the source code that we can contribute back. I
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt; know about the PECL stuff :)
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt; Regards,
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt; Alvaro
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt; On Oct 8, 2010, at 3:05 PM, Pieter de Zwart wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; Excellent question. The source code for this:
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; <A HREF="http://php.net/manual/en/book.amqp.php">http://php.net/manual/en/book.amqp.php</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; is available here:
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; <A HREF="http://pecl.php.net/package/amqp">http://pecl.php.net/package/amqp</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; I am reworking it right now to work with Rabbit 2.0.* and 2.1.*. The one
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; listed works with 1.7.*.
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; Pieter
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt; On 10/7/10 11:45 PM, &quot;Alvaro Videla&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt; I think is php-rabbit
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt; Thanks!
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt; On Oct 8, 2010, at 2:41 PM, Alexis Richardson wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; Could it be one of these?
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="http://www.delicious.com/alexisrichardson/rabbitmq+client+php">http://www.delicious.com/alexisrichardson/rabbitmq+client+php</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; On Fri, Oct 8, 2010 at 7:04 AM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Hi,
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; I would like to know where's the code for the PHP extension that appears
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; on
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; the PHP website.
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Regards,
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Alvaro
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt; rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101013/58aed3c9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101013/58aed3c9/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009410.html">[rabbitmq-discuss] About PHP PECL extension
</A></li>
	<LI>Next message: <A HREF="009432.html">[rabbitmq-discuss] About PHP PECL extension
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9422">[ date ]</a>
              <a href="thread.html#9422">[ thread ]</a>
              <a href="subject.html#9422">[ subject ]</a>
              <a href="author.html#9422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
