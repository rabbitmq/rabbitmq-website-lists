<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] ? short-string encoding and rabbitmq 2.0.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3F%20short-string%20encoding%20and%20rabbitmq%202.0.1&In-Reply-To=%3C4CC1B962.2040506%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009603.html">
   <LINK REL="Next"  HREF="009606.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] ? short-string encoding and rabbitmq 2.0.1</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3F%20short-string%20encoding%20and%20rabbitmq%202.0.1&In-Reply-To=%3C4CC1B962.2040506%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] ? short-string encoding and rabbitmq 2.0.1">emile at rabbitmq.com
       </A><BR>
    <I>Fri Oct 22 17:18:42 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009603.html">[rabbitmq-discuss] ? short-string encoding and rabbitmq 2.0.1
</A></li>
        <LI>Next message: <A HREF="009606.html">[rabbitmq-discuss] ? short-string encoding and rabbitmq 2.0.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9604">[ date ]</a>
              <a href="thread.html#9604">[ thread ]</a>
              <a href="subject.html#9604">[ subject ]</a>
              <a href="author.html#9604">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi James,

On 22/10/10 16:16, james anderson wrote:
&gt;<i> good afternoon;
</I>&gt;<i> 
</I>&gt;<i> thank you for your note.
</I>&gt;<i> 
</I>&gt;<i> On 2010-10-22, at 13:53 , Simon MacMullen wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On 22/10/10 12:44, james anderson wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;snip&gt;
</I>&gt;&gt;&gt;<i> i understand this, and the code in the repository[3] to indicate that
</I>&gt;&gt;&gt;<i> the 115,6,83 at the start of the fourth line of the content vector,
</I>&gt;&gt;&gt;<i> above, was decoded as a short 16/signed instead of the intended six byte
</I>&gt;&gt;&gt;<i> short string. given which state, the subsequent vector
</I>&gt;&gt;&gt;<i> &lt;&lt;84,82,73,78,71,7,80, ...&gt;&gt; matched no pattern. do i understand these
</I>&gt;&gt;&gt;<i> events correctly?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> See <A HREF="http://dev.rabbitmq.com/wiki/Amqp091Errata#section_3">http://dev.rabbitmq.com/wiki/Amqp091Errata#section_3</A> for a bit
</I>&gt;&gt;<i> more information, but in short this is an area where we believe the
</I>&gt;&gt;<i> spec to be incorrect.
</I>&gt;<i> 
</I>&gt;<i> ok. it would help, if the page which describes that rabbitmq implements
</I>&gt;<i> 0.9.1 were to include something to the effect that the specification
</I>&gt;<i> which version 2 purports to support is not the one to which the page
</I>&gt;<i> links, but some other. perhaps it could also include a link to that
</I>&gt;<i> other specification, or at least to the wiki errata page. perhaps the
</I>&gt;<i> release notes page could include the topic. or perhaps the release news
</I>&gt;<i> page.
</I>
That is a good suggestion, thanks.

&gt;&gt;<i> The upshot is that there isn't a way to put short strings in tables;
</I>&gt;&gt;<i> you have to use long strings.
</I>&gt;<i> 
</I>&gt;<i> evidently.
</I>&gt;<i> the question remains, whether rabbitmq's intention is that, a library
</I>&gt;<i> which purports to implement the standard now needs to not only negotiate
</I>&gt;<i> protocol version, but also implementation?
</I>
That should be possible by inspecting the server properties which are
returned by the server during protocol negotiation. If a library wishes
to use short strings and interoperate with multiple brokers then that
would be the only way at present.

&gt;<i> the errata describes a mail thread which includes contributions from
</I>&gt;<i> tony [garnock-jones] and john o'hara. a link would be helpful here.
</I>
That discussion may not have taken place in public.

&gt;<i> without additional background, it is difficult to comprehend, why a
</I>&gt;<i> standard would set one encoding and two prominent implementations would
</I>&gt;<i> &quot;gratuitously&quot; disregard it. given the versioned nature of the protocol,
</I>&gt;<i> as demonstrated by the variations to framing, there is no inherent
</I>&gt;<i> reason that the type codes be identical across version. there must have
</I>&gt;<i> been more at issue than the errata describes.
</I>
I can assure you that there is nothing gratuitous about the way RabbitMQ
interprets the spec. We believe the spec contains a mistake in this case
and we have implemented what was probably intended.

&gt;<i> in any case, did their discussion ever progress further? can one expect
</I>&gt;<i> that discussion to proceed to a conclusion? to a ratified errata for the
</I>&gt;<i> specification itself? if one expects implementors to follow a ratified,
</I>&gt;<i> published, standard specification to which the implementations purport
</I>&gt;<i> to conform, that would be appropriate.
</I>
The RabbitMQ project is in a good position to motivate that the
collected errata inform subsequent revisions of the spec. If concerned
members of the AMQP community such as yourself petition for this cause
then it becomes ever more likely.


Regards

Emile





</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009603.html">[rabbitmq-discuss] ? short-string encoding and rabbitmq 2.0.1
</A></li>
	<LI>Next message: <A HREF="009606.html">[rabbitmq-discuss] ? short-string encoding and rabbitmq 2.0.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9604">[ date ]</a>
              <a href="thread.html#9604">[ thread ]</a>
              <a href="subject.html#9604">[ subject ]</a>
              <a href="author.html#9604">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
