<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] problem with new persiter with 1000	topics/queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C798016.63886.qm%40web31802.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009681.html">
   <LINK REL="Next"  HREF="009680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] problem with new persiter with 1000	topics/queues</H1>
    <B>alex chen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C798016.63886.qm%40web31802.mail.mud.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] problem with new persiter with 1000	topics/queues">chen650 at yahoo.com
       </A><BR>
    <I>Thu Oct 28 23:02:21 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009681.html">[rabbitmq-discuss] queue architecture
</A></li>
        <LI>Next message: <A HREF="009680.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9678">[ date ]</a>
              <a href="thread.html#9678">[ thread ]</a>
              <a href="subject.html#9678">[ subject ]</a>
              <a href="author.html#9678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

&gt;<i> i increased the timeout of login from 10 sec to 5 minutes, then the
</I>
&gt;<i> consumers could consume the 200 GB of messages without any problems. the
</I>&gt;<i> 2.1.1 broker's memory kept below 6.2 GB. (the memory usage for release
</I>&gt;<i> 2.0.0 was 10 GB for this test case).
</I>
There is another problem:   The broker's memory usage grew from 6.2GB to 10 GB 1 hour after the consumers were started.
This caused swapping and the consume rate dropped from 30 MB/sec to less than 10 MB/sec.  I think the broker only throttles the publisher when the mem high water mark is reached, but the consumers can still increase the broker's mem usage?
if this cannot be avoided, we have to increase the RAM to 16GB.

thanks.

-alex


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101028/86472d4d/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101028/86472d4d/attachment-0001.htm</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009681.html">[rabbitmq-discuss] queue architecture
</A></li>
	<LI>Next message: <A HREF="009680.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9678">[ date ]</a>
              <a href="thread.html#9678">[ thread ]</a>
              <a href="subject.html#9678">[ subject ]</a>
              <a href="author.html#9678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
