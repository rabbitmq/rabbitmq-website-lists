<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Simpler STOMP Behaviour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Simpler%20STOMP%20Behaviour&In-Reply-To=%3C4CAB0DA7.9010704%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009296.html">
   <LINK REL="Next"  HREF="009299.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Simpler STOMP Behaviour</H1>
    <B>Michael Bridgen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Simpler%20STOMP%20Behaviour&In-Reply-To=%3C4CAB0DA7.9010704%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Simpler STOMP Behaviour">mikeb at rabbitmq.com
       </A><BR>
    <I>Tue Oct  5 12:36:07 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009296.html">[rabbitmq-discuss] Simpler STOMP Behaviour
</A></li>
        <LI>Next message: <A HREF="009299.html">[rabbitmq-discuss] Simpler STOMP Behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9298">[ date ]</a>
              <a href="thread.html#9298">[ thread ]</a>
              <a href="subject.html#9298">[ subject ]</a>
              <a href="author.html#9298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lionel,

On 10/05/2010 08:07 AM, Lionel Cons wrote:
&gt;<i> Michael Bridgen&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mikeb at rabbitmq.com</A>&gt;  writes:
</I>&gt;&gt;<i> Since there's no reply from the server to SUBSCRIBE, and we generally
</I>&gt;&gt;<i> want reply queues to have different properties to shared queues, really
</I>&gt;&gt;<i> the only option is to have a distinguished prefix for reply queue
</I>&gt;&gt;<i> destinations, and require clients to supply their own (preferably fresh)
</I>&gt;&gt;<i> names.
</I>&gt;<i>
</I>&gt;<i> In practice, other solutions exist. I'm not sure which one is
</I>&gt;<i> preferable.
</I>&gt;<i>
</I>&gt;<i> (1) With ActiveMQ, one can subscribe to /temp-queue/whatever and a
</I>&gt;<i> private queue with a random name will be created on the broker. The
</I>&gt;<i> client program can send a message to itself, examine the destination
</I>&gt;<i> header of the received message and find out this way what is the real
</I>&gt;<i> queue name.
</I>
I don't quite understand this -- when sending the tracer message, does 
the client also use &quot;/temp-queue/whatever&quot; as the destination; and if 
that works, why bother finding out the &quot;real&quot; queue name?

&gt;<i> (2) We could imagine using the RECEIPT frame to allow the broker to
</I>&gt;<i> &quot;reply&quot; to the client. Something like:
</I>&gt;<i>
</I>&gt;<i>    SUBSCRIBE /i-want-a-private-queue
</I>&gt;<i>    receipt:123
</I>&gt;<i>
</I>&gt;<i>    RECEIPT
</I>&gt;<i>    receipt-id:123
</I>&gt;<i>    destination:/queue/004b2782fba54d18576bc2c710b517b1
</I>
Ah, RECEIPT, good call.  I was wrong about the server no being able to 
reply.  This would be my preferred style; with the following as a option 
too.

&gt;&gt;<i> SUBSCRIBE /reply/&lt;md5 of some client properties&gt;
</I>&gt;<i>
</I>&gt;<i> This would work too.
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> Also, what about AMQP 1.0? Have you considered it in order to get a
</I>&gt;&gt;&gt;<i> syntax that can be adapted/extended to the new AMQP 1.0 concepts?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do you mean using something like /node/ for destinations?
</I>&gt;<i>
</I>&gt;<i> For instance. AMQP 1.0 has nodes, queues, links and filters (and no more
</I>&gt;<i> exchanges). They should be exposed via STOMP somehow.
</I>
Not any more; queues are mentioned only in passing if at all.  And nodes 
really are just a stand-in something for addresses to be addressing. 
Links are an abstraction in the transfer protocol rather than part of a 
model.

It's not true to say there are &quot;no more exchanges&quot; in the sense that 
AMQP 1.0 somehow does away with the exchange/binding/queue model.  The 
recommendation sets out a message transfer protocol, and tries very hard 
to not take any position on where messages are when they are not being 
transferred.  So it's not the case that the AMQP 1.0 recommendation 
supplants the broker model given in previous versions of AMQP with 
something else (nodes, links, whatever) -- it simply steers clear of 
saying anything about a broker model.

&gt;<i> In addition, AMQP 1.0 introduced the notion of global addressing,
</I>&gt;<i> something like <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">node-name at container.</A> This should also be usable from
</I>&gt;<i> STOMP.
</I>
This was mooted at some point but doesn't actually appear in the 
recommendation, which says next to nothing about the form of addresses. 
  It may still come about, in some ancillary part of the specification.

&gt;<i> However, I'm not up-to-date with what AMQP 1.0 really is today. Concepts
</I>&gt;<i> like remote addressing have been described for instance in last year's
</I>&gt;<i> F2F meeting:
</I>&gt;<i> <A HREF="http://www.amqp.org/confluence/download/attachments/2523324/AMQP+F2F+Presentation.pdf">http://www.amqp.org/confluence/download/attachments/2523324/AMQP+F2F+Presentation.pdf</A>
</I>&gt;<i> I don't know if these are still relevant...
</I>
If you want to catch up it is worth reading the recommendation; it's 
significantly different to the previous most long-lived revision (PR2) 
which was itself something of a departure from earlier revisions.


Michael.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009296.html">[rabbitmq-discuss] Simpler STOMP Behaviour
</A></li>
	<LI>Next message: <A HREF="009299.html">[rabbitmq-discuss] Simpler STOMP Behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9298">[ date ]</a>
              <a href="thread.html#9298">[ thread ]</a>
              <a href="subject.html#9298">[ subject ]</a>
              <a href="author.html#9298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
