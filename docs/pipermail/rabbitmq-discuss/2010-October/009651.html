<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Backup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Backup&In-Reply-To=%3CAANLkTinF%3Davg%2B9j3KxObT4_ROGMDnr55sg4CYhPgFVeO%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009644.html">
   <LINK REL="Next"  HREF="009659.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Backup</H1>
    <B>Alex Lovell-Troy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Backup&In-Reply-To=%3CAANLkTinF%3Davg%2B9j3KxObT4_ROGMDnr55sg4CYhPgFVeO%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Backup">alex.lovelltroy at gmail.com
       </A><BR>
    <I>Wed Oct 27 09:43:04 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009644.html">[rabbitmq-discuss] RabbitMQ Backup
</A></li>
        <LI>Next message: <A HREF="009659.html">[rabbitmq-discuss] RabbitMQ Backup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9651">[ date ]</a>
              <a href="thread.html#9651">[ thread ]</a>
              <a href="subject.html#9651">[ subject ]</a>
              <a href="author.html#9651">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We've been tackling this problem as well for transactional persistent
messages on durable queues in a very low traffic situation.  Our solution
was to write a small wrapper around the transaction that also commits the
message content to a database and then transactionally deletes the message
from the database as part of the ack.  The wrapper also stores information
about the queues and routing on startup.  With that, an additional small
script can recreate our queues in the case of host death.  It's certainly
not fast, but it is durable and keeps us from using the anti-pattern of
polling the database for status changes.

Since our queues and routing don't change very often, we think that a
slow/triggered update of that information is good enough which only leaves
the messages themselves.   We've been thinking of using erlang directly to
bind to the ETS table on the rabbitmq host and dump the messages to a fresh
ETS table on another node for a less db-centric backup/HA option.  We're
still not sure if that's a good idea or if it is workable, but it may point
you in another direction.

I'd be happy to hear if anyone else has already ascertained if this route is
fraught with danger.

-sascha



On Tue, Oct 26, 2010 at 6:17 PM, Ahmed M. Osman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">a.medhat.cs at gmail.com</A>&gt;wrote:

&gt;<i> Hello Friends,
</I>&gt;<i>
</I>&gt;<i> i just have a little question about RabbitMQ backup and i hope that i can
</I>&gt;<i> found the answer here
</I>&gt;<i>
</I>&gt;<i> simply, i want to make backup and and restore system to my Rabbit server,
</I>&gt;<i> mainly backup the persistent messages, do i have to handle this using
</I>&gt;<i> extra consumer that consume the messages then save it and enqueue it again
</I>&gt;<i> in the queue ?
</I>&gt;<i>
</I>&gt;<i> or backuping Mnesia, but according to the following link
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/faq.html#migrate-to-another-machine">http://www.rabbitmq.com/faq.html#migrate-to-another-machine</A>
</I>&gt;<i> i think backupping Mnesia won't be a good solution.
</I>&gt;<i>
</I>&gt;<i> and if backuping Mnesia is the solution are there a way to use any other
</I>&gt;<i> language to make this backup other than using Erlang or any command or
</I>&gt;<i> command line tool.
</I>&gt;<i>
</I>&gt;<i> *--
</I>&gt;<i> Kind Regards,
</I>&gt;<i>
</I>&gt;<i> Ahmed
</I>&gt;<i> *
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101027/1fd936a8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101027/1fd936a8/attachment.htm</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009644.html">[rabbitmq-discuss] RabbitMQ Backup
</A></li>
	<LI>Next message: <A HREF="009659.html">[rabbitmq-discuss] RabbitMQ Backup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9651">[ date ]</a>
              <a href="thread.html#9651">[ thread ]</a>
              <a href="subject.html#9651">[ subject ]</a>
              <a href="author.html#9651">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
