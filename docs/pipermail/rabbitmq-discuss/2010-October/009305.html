<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ clustering and node failure recovery strategies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20clustering%20and%20node%20failure%0A%20recovery%20strategies&In-Reply-To=%3C20101006102640.GD3070%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009304.html">
   <LINK REL="Next"  HREF="009316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ clustering and node failure recovery strategies</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20clustering%20and%20node%20failure%0A%20recovery%20strategies&In-Reply-To=%3C20101006102640.GD3070%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ clustering and node failure recovery strategies">alexandru at rabbitmq.com
       </A><BR>
    <I>Wed Oct  6 11:26:40 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009304.html">[rabbitmq-discuss] RabbitMQ clustering and node failure recovery strategies
</A></li>
        <LI>Next message: <A HREF="009316.html">[rabbitmq-discuss] RabbitMQ clustering and node failure recovery strategies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9305">[ date ]</a>
              <a href="thread.html#9305">[ thread ]</a>
              <a href="subject.html#9305">[ subject ]</a>
              <a href="author.html#9305">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> I have been reading the mailing list to gather information about
</I>&gt;<i> scalable
</I>&gt;<i> and HA configurations for RabbitMQ. From my understanding, I assune
</I>&gt;<i> that if
</I>&gt;<i> a RabbitMQ node in a cluster fails all the queues and messages on that
</I>&gt;<i> node
</I>&gt;<i> will be lost until the node is not recovered and any attempt of
</I>&gt;<i> re-creating
</I>&gt;<i> the queues on another node is forbidden by the cluster implementation.
</I>&gt;<i> Is
</I>&gt;<i> still the case in the latest RabbitMQ release?
</I>
We're talking about durable queues.  Yes, this is still the case with
the latest broker.  You can't recreate the lost queue on a different
node
because it causes all sorts of problems if the original node comes back
up.

&gt;<i> I was thinking about fail-over strategies and I was wondering if there
</I>&gt;<i> is
</I>&gt;<i> any way to say to the cluster to forget about the binding
</I>&gt;<i> (queue-cluster
</I>&gt;<i> node) after the failure. If I did that, then I could re-create the
</I>&gt;<i> queue on
</I>&gt;<i> another node.
</I>
The only way to remove a queue from a downed node is either to restart
the node and remove the queue, or have another node masquerade as that
node and remove it.  In the second case, you lose the messages.

If you don't care about losing some messages, you can just use
non-durable queues.  This way, when the node goes down, the queue is
deleted from the cluster and can be redeclared on any other node.  Of
course, whatever messages were on the queue are lost.

Does this help?

Cheers,
Alex


On Wed, Oct 06, 2010 at 02:26:57AM -0700, Armax wrote:
&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have been reading the mailing list to gather information about scalable
</I>&gt;<i> and HA configurations for RabbitMQ. From my understanding, I assune that if
</I>&gt;<i> a RabbitMQ node in a cluster fails all the queues and messages on that node
</I>&gt;<i> will be lost until the node is not recovered and any attempt of re-creating
</I>&gt;<i> the queues on another node is forbidden by the cluster implementation. Is
</I>&gt;<i> still the case in the latest RabbitMQ release?
</I>&gt;<i> 
</I>&gt;<i> I was thinking about fail-over strategies and I was wondering if there is
</I>&gt;<i> any way to say to the cluster to forget about the binding (queue-cluster
</I>&gt;<i> node) after the failure. If I did that, then I could re-create the queue on
</I>&gt;<i> another node. 
</I>&gt;<i> 
</I>&gt;<i> If this is not available, is there a specific reason why this is not
</I>&gt;<i> possible?
</I>&gt;<i> 
</I>&gt;<i> Many thanks and keep up the good work :)
</I>&gt;<i> -- 
</I>&gt;<i> View this message in context: <A HREF="http://old.nabble.com/RabbitMQ-clustering-and-node-failure-recovery-strategies-tp29894938p29894938.html">http://old.nabble.com/RabbitMQ-clustering-and-node-failure-recovery-strategies-tp29894938p29894938.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009304.html">[rabbitmq-discuss] RabbitMQ clustering and node failure recovery strategies
</A></li>
	<LI>Next message: <A HREF="009316.html">[rabbitmq-discuss] RabbitMQ clustering and node failure recovery strategies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9305">[ date ]</a>
              <a href="thread.html#9305">[ thread ]</a>
              <a href="subject.html#9305">[ subject ]</a>
              <a href="author.html#9305">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
