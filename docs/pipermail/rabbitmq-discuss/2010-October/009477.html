<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [Ticket #16] New Comment: messages get stuck	when using rabbitmq on windows, but not on ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BTicket%20%2316%5D%20New%20Comment%3A%20messages%20get%20stuck%0A%09when%20using%20rabbitmq%20on%20windows%2C%20but%20not%20on%20...&In-Reply-To=%3C4cb9b71f39bd_191838afdba94c0%40BIGPOOH.tmail%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009476.html">
   <LINK REL="Next"  HREF="009478.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [Ticket #16] New Comment: messages get stuck	when using rabbitmq on windows, but not on ...</H1>
    <B>John Apps</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BTicket%20%2316%5D%20New%20Comment%3A%20messages%20get%20stuck%0A%09when%20using%20rabbitmq%20on%20windows%2C%20but%20not%20on%20...&In-Reply-To=%3C4cb9b71f39bd_191838afdba94c0%40BIGPOOH.tmail%3E"
       TITLE="[rabbitmq-discuss] [Ticket #16] New Comment: messages get stuck	when using rabbitmq on windows, but not on ...">johndapps at gmail.com
       </A><BR>
    <I>Sat Oct 16 15:30:55 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009476.html">[rabbitmq-discuss] [Ticket #19] Is there more infos about AMQP 1.0	and rabbitmq roadmap toward...
</A></li>
        <LI>Next message: <A HREF="009478.html">[rabbitmq-discuss] [Ticket #23]  Monitoring Message Throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9477">[ date ]</a>
              <a href="thread.html#9477">[ thread ]</a>
              <a href="subject.html#9477">[ subject ]</a>
              <a href="author.html#9477">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a notification from the Help Desk.


A new comment has been added.  Please reply to this email (keeping the subject intact) with any additional information or comments.

Help Desk: <A HREF="http://BIGPOOH:9675/portal/view-help-request/16">http://BIGPOOH:9675/portal/view-help-request/16</A>
Ticket: # 16
Submitted: Oct 16, 2010 @ 04:29 pm
Summary: [rabbitmq-discuss] messages get stuck when using rabbitmq on windows, but not on ...
Status: open
Priority: Med

Comment:
----------------------------------------------------------------------------------------------------
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A> said: Matthew,

Matthew Scott wrote:
&gt;<i> I'm experiencing a problem with messages getting &quot;stalled&quot; when serving 
</I>&gt;<i> RabbitMQ with Windows XP.
</I>&gt;<i> 
</I>&gt;<i> The context is a distributed job processing system, wherein some message 
</I>&gt;<i> payloads can be around 250-500 kB.  The clients connecting to the broker 
</I>&gt;<i> are several programs written in Python using the txAMQP library and the 
</I>&gt;<i> AMQP 0-8 protocol.  (*)
</I>&gt;<i> 
</I>&gt;<i> We can submit one job in our system, which results in several small 
</I>&gt;<i> messages, and four larger messages being routed through RabbitMQ with 
</I>&gt;<i> the size ranges noted above, and this succeeds.  However, when we submit 
</I>&gt;<i> an identical job, one message with a larger payload is successfully 
</I>&gt;<i> routed, but the second one is not.  I can see that it successfully 
</I>&gt;<i> reaches the broker but never reaches the intended destination, because I 
</I>&gt;<i> get this output:
</I>&gt;<i> 
</I>&gt;<i> C:\rabbitmq_server-1.7.1\sbin&gt;rabbitmqctl list_connections send_oct 
</I>&gt;<i> send_pend
</I>&gt;<i> Listing connections ...
</I>&gt;<i> 594     0
</I>&gt;<i> 1183650 0
</I>&gt;<i> 236655  0
</I>&gt;<i> 616     0
</I>&gt;<i> 610     0
</I>&gt;<i> 2492155 256809    &lt;-- here is the stuck message
</I>&gt;<i> 616     0
</I>&gt;<i> 616     0
</I>&gt;<i> 367     0
</I>
On the surface this does look like a client problem, namely that for
some reason the client has stopped reading data from the socket, causing
the tcp flow control to stall the connection and thus data backing up in
the server's tcp buffers.

It could also be some weird networking problem in the O/S.

I suggest sticking the AMQP tracer
(<A HREF="http://www.rabbitmq.com/examples.html#tracer">http://www.rabbitmq.com/examples.html#tracer</A>) inbetween the broker and
the client, running it on either the client or server machine (it's
worth trying both options). That will tell you what's going on at the
AMQP protocol level. If you need help interpreting the output, feel free
to post it here.

It's possible that inserting the tracer alters the behaviour, and
&quot;fixes&quot; the problem. If so then a lower-level tool to capture the
network traffic, such as wireshark, is your best bet.


Regards,

Matthias.

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
----------------------------------------------------------------------------------------------------
This is an automated message sent from your help desk.
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009476.html">[rabbitmq-discuss] [Ticket #19] Is there more infos about AMQP 1.0	and rabbitmq roadmap toward...
</A></li>
	<LI>Next message: <A HREF="009478.html">[rabbitmq-discuss] [Ticket #23]  Monitoring Message Throughput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9477">[ date ]</a>
              <a href="thread.html#9477">[ thread ]</a>
              <a href="subject.html#9477">[ subject ]</a>
              <a href="author.html#9477">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
