<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Failed upgrade from 1.8.1 to 2.1.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Failed%20upgrade%20from%201.8.1%20to%202.1.0&In-Reply-To=%3C20101011212340.GA25597%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009367.html">
   <LINK REL="Next"  HREF="009334.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Failed upgrade from 1.8.1 to 2.1.0</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Failed%20upgrade%20from%201.8.1%20to%202.1.0&In-Reply-To=%3C20101011212340.GA25597%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Failed upgrade from 1.8.1 to 2.1.0">matthew at rabbitmq.com
       </A><BR>
    <I>Mon Oct 11 22:23:41 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009367.html">[rabbitmq-discuss] Failed upgrade from 1.8.1 to 2.1.0
</A></li>
        <LI>Next message: <A HREF="009334.html">[rabbitmq-discuss] Uncaught exception 'AMQPConnectionException' with message 'Parameter 'host' exceeds 32 characters limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9380">[ date ]</a>
              <a href="thread.html#9380">[ thread ]</a>
              <a href="subject.html#9380">[ subject ]</a>
              <a href="author.html#9380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi David,

On Fri, Oct 08, 2010 at 11:53:28AM -0700, David King wrote:
&gt;<i> And as you can see in the memory graph I included at the end there,
</I>&gt;<i> the bump at the end was this attempted upgrade, and the machine
</I>&gt;<i> definitely didn't run out of RAM. But that &quot;924 file handles&quot; does
</I>&gt;<i> look quite low, how can I increase that?
</I>
ulimit -n and /etc/security/limits.conf

However, for the number of queues you have, 924 is more than plenty.

The rest of your details leave me puzzled. Is there any possibility of
you being able to attempt the migration again, but without any consumers
at all? - literally just duplicate all your incoming streams into a new
Rabbit? - I'm curious if the queues will continue to fill correctly for
some time before exhausting RAM. Also, during this time, the output of
&quot;rabbitmqctl list_queues name backing_queue_status&quot; would be useful.

I remember when I was in your office we talking briefly about the
monitoring you were doing, but I've since forgotten - how are the stats
for those graphs being obtained? - is something just shelling out to
rabbitmqctl or is something else going on or...?

Your graphs that you posted didn't include the unacknowledged_messages
field which is available from rabbitmqctl list_queues, or from
rabbitmqctl list_channels. Do you have that data for that period of
time?

Best wishes,

Matthew
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009367.html">[rabbitmq-discuss] Failed upgrade from 1.8.1 to 2.1.0
</A></li>
	<LI>Next message: <A HREF="009334.html">[rabbitmq-discuss] Uncaught exception 'AMQPConnectionException' with message 'Parameter 'host' exceeds 32 characters limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9380">[ date ]</a>
              <a href="thread.html#9380">[ thread ]</a>
              <a href="subject.html#9380">[ subject ]</a>
              <a href="author.html#9380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
