<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Durable exclusive queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Durable%20exclusive%20queues&In-Reply-To=%3C20101011180054.GB2568%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009375.html">
   <LINK REL="Next"  HREF="009379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Durable exclusive queues</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Durable%20exclusive%20queues&In-Reply-To=%3C20101011180054.GB2568%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Durable exclusive queues">alexandru at rabbitmq.com
       </A><BR>
    <I>Mon Oct 11 19:00:54 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="009375.html">[rabbitmq-discuss] Durable exclusive queues
</A></li>
        <LI>Next message: <A HREF="009379.html">[rabbitmq-discuss] Durable exclusive queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9376">[ date ]</a>
              <a href="thread.html#9376">[ thread ]</a>
              <a href="subject.html#9376">[ subject ]</a>
              <a href="author.html#9376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Brennan,

I don't think exclusive queues are quite what you expect them to be.
An exclusive queue can only be accessed by the channel that created it.
A durable queue is one that survives a broker restart.  Since the
connection and channel will be closed on a broker restart, a durable
exclusive queue would become completely unaccessible.

What you probably want is exclusive consumers.  If a consumer sets the
exclusive bit in the basic.consume method, only that consumer is
allowed to consume from the queue.  Using this, you can ensure that only
one consumer consumes from any queue at any time.

I'm not familiar with txAMQP, but have a look at basic.consume.  There
should (fingers crossed) be an 'exclusive' parameter.

Cheers,
Alex

On Mon, Oct 11, 2010 at 01:35:31PM -0400, Brennan Sellner wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> Does anyone have a preferred mechanism for creating what amounts to a
</I>&gt;<i> durable, exclusive queue?  We need durable queues, and want to ensure
</I>&gt;<i> that only one client subscribes to each queue at a time.  I'm not seeing
</I>&gt;<i> an AMQP way to do this, since exclusive and durable are mutually
</I>&gt;<i> exclusive: am I missing something?
</I>&gt;<i> 
</I>&gt;<i> Alternatively, I could hack around this if there were a way to retrieve
</I>&gt;<i> the number of clients subscribed to a given queue, but again I haven't
</I>&gt;<i> been able to find any way to get that information.
</I>&gt;<i> 
</I>&gt;<i> We're using Rabbit 2.1.0, with txAMQP 0.3.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> -Brennan
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009375.html">[rabbitmq-discuss] Durable exclusive queues
</A></li>
	<LI>Next message: <A HREF="009379.html">[rabbitmq-discuss] Durable exclusive queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9376">[ date ]</a>
              <a href="thread.html#9376">[ thread ]</a>
              <a href="subject.html#9376">[ subject ]</a>
              <a href="author.html#9376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
