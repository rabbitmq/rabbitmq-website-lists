<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unable to manage Service after log off
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20manage%20Service%20after%20log%20off&In-Reply-To=%3CDF08B645FD232746AA7806A1B7F3CC0F03B47FE0%40CH1PRD0102MB133.prod.exchangelabs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014852.html">
   <LINK REL="Next"  HREF="014857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unable to manage Service after log off</H1>
    <B>max at haventon.se</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20manage%20Service%20after%20log%20off&In-Reply-To=%3CDF08B645FD232746AA7806A1B7F3CC0F03B47FE0%40CH1PRD0102MB133.prod.exchangelabs.com%3E"
       TITLE="[rabbitmq-discuss] Unable to manage Service after log off">max at haventon.se
       </A><BR>
    <I>Fri Sep  2 12:46:10 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014852.html">[rabbitmq-discuss] Unable to manage Service after log off
</A></li>
        <LI>Next message: <A HREF="014857.html">[rabbitmq-discuss] Unable to manage Service after log off
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14856">[ date ]</a>
              <a href="thread.html#14856">[ thread ]</a>
              <a href="subject.html#14856">[ subject ]</a>
              <a href="author.html#14856">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Reinstalling the service helped.

I get the following output when the service is started:

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at HOST</A>
app descriptor : c:/Program Files/RabbitMQ Server/rabbitmq_server-2.5.1/sbin/../ebin/rabbit.app
home dir       : C:\WINDOWS
config file(s) : c:/RabbitHome/rabbitmq.config
cookie hash    : zTZa14A3pDxcfHm3E+Hbqw==
log            : c:/RabbitHome/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at HOST.log</A>
sasl log       : c:/RabbitHome/log/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at HOST</A> -sasl.log
database dir   : c:/RabbitHome/db/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at HOST</A> -mnesia
erlang version : 5.8.4

The cookie hash is the same as when I run the failed rabbitmqctl status:

&gt;&gt;<i>rabbitmqctl status
</I>Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at HOST...</A>
Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at HOST</A>: nodedown
diagnostics:
- nodes and their ports on HOST: [{rabbitmqctl26790,1262}]
- current node: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl26790 at HOST</A>
- current node home dir: C:\Documents and Settings\username
- current node cookie hash: zTZa14A3pDxcfHm3E+Hbqw==

The Service's log doesn't show anything at all when the failed connection attempt is made. Also note that the Service's node is not listed in the list of nodes.

Note that I'm using Remote Desktop to connect to HOST.

BR
Max

-----Original Message-----
From: Emile Joubert [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>] 
Sent: den 2 september 2011 13:08
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">max at haventon.se</A>
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Unable to manage Service after log off

Hi Max,

On 02/09/11 11:50, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">max at haventon.se</A> wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I've set the environment variables:
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> SET
</I>&gt;<i> ....
</I>&gt;<i> RABBITMQ_BASE=C:\RabbitHome
</I>&gt;<i> RABBITMQ_CONSOLE_LOG=new
</I>&gt;<i> ...
</I>&gt;<i> SESSIONNAME=RDP-TCP#9
</I>&gt;<i> 
</I>&gt;<i> But no file is created in C:\RabbitHome when I start the service.
</I>
Please see <A HREF="http://www.rabbitmq.com/install.html#running-windows-service">http://www.rabbitmq.com/install.html#running-windows-service</A>
After setting environment variables, you may need to install the service again. Please let me know if that still doesn't work.

Emile

</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014852.html">[rabbitmq-discuss] Unable to manage Service after log off
</A></li>
	<LI>Next message: <A HREF="014857.html">[rabbitmq-discuss] Unable to manage Service after log off
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14856">[ date ]</a>
              <a href="thread.html#14856">[ thread ]</a>
              <a href="subject.html#14856">[ subject ]</a>
              <a href="author.html#14856">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
