<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustering and data partitioning - how best to	implement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20and%20data%20partitioning%20-%20how%20best%20to%0A%09implement&In-Reply-To=%3Cbda81ef9-38fc-4226-931f-9ed248691dbb%40q25g2000vbx.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015279.html">
   <LINK REL="Next"  HREF="015281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustering and data partitioning - how best to	implement</H1>
    <B>justin.adam.miller at gmail.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20and%20data%20partitioning%20-%20how%20best%20to%0A%09implement&In-Reply-To=%3Cbda81ef9-38fc-4226-931f-9ed248691dbb%40q25g2000vbx.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Clustering and data partitioning - how best to	implement">justin.adam.miller at gmail.com
       </A><BR>
    <I>Mon Sep 26 21:05:32 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015279.html">[rabbitmq-discuss] [ANNOUNCEMENT] amqp-0.2.0 (beta) Released.
</A></li>
        <LI>Next message: <A HREF="015281.html">[rabbitmq-discuss] Clustering and data partitioning - how best	to implement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15280">[ date ]</a>
              <a href="thread.html#15280">[ thread ]</a>
              <a href="subject.html#15280">[ subject ]</a>
              <a href="author.html#15280">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to implement some of the ideas from this article:

<A HREF="http://blog.springsource.com/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/">http://blog.springsource.com/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/</A>

Our situation is that we have two rabbit instances, not clustered, so
that we can spread out load. In our current setup, it's still possible
for us to hit one broker harder than the other, so ideally we'd like
to setup these nodes in a cluster. That way, we can have consumers
evenly distributed across brokers.

We could create one queue that all consumers consume from, but I'm not
sure that would solve our problems since that queue (and the broker it
was created on) would become a hotspot. Right?

So from that article, I like the idea of each node creating a queue,
e.g. myQueue.1, myQueue.2, etc. and having the producer round robin
them. What I don't know, is how the producer knows how many queues/
nodes there are. The producers could send to an exchange and just set
the routingKey, but still, I think the problem is the same.

I guess I could use the management plugin, but I'm trying to figure
out how to do that without issuing a request for every message I
produce.

I could imagine some kind of handshake when a producer comes online,
he sends a &quot;who's-alive&quot; message to a topic exchange and waits for
responses from consumers. Also, when a consumer comes online, he
immediately sends out a &quot;I'm-alive&quot; message. In a direct exchange
(either the default or one that I create), is a routingKey assumed to
be a queue name? If I made the queues auto_delete, what would happen
when the producer tries to send a message to a queue that no longer
exists? Would I get an exception such that I can catch it and send the
message to the next guy in the list?

Thanks,
Justin
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015279.html">[rabbitmq-discuss] [ANNOUNCEMENT] amqp-0.2.0 (beta) Released.
</A></li>
	<LI>Next message: <A HREF="015281.html">[rabbitmq-discuss] Clustering and data partitioning - how best	to implement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15280">[ date ]</a>
              <a href="thread.html#15280">[ thread ]</a>
              <a href="subject.html#15280">[ subject ]</a>
              <a href="author.html#15280">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
