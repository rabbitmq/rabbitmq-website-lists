<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] pika basic_ack not always working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20pika%20basic_ack%20not%20always%20working&In-Reply-To=%3C9f2fe003-b7b3-4e7e-b7b4-3f91733e359a%40v7g2000yqk.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015293.html">
   <LINK REL="Next"  HREF="015229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] pika basic_ack not always working</H1>
    <B>Stephen Young</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20pika%20basic_ack%20not%20always%20working&In-Reply-To=%3C9f2fe003-b7b3-4e7e-b7b4-3f91733e359a%40v7g2000yqk.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] pika basic_ack not always working">stephen.t.young at gmail.com
       </A><BR>
    <I>Thu Sep 22 23:49:02 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015293.html">[rabbitmq-discuss] Pika - how to properly publish from a periodic background thread?
</A></li>
        <LI>Next message: <A HREF="015229.html">[rabbitmq-discuss] pika basic_ack dying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15228">[ date ]</a>
              <a href="thread.html#15228">[ thread ]</a>
              <a href="subject.html#15228">[ subject ]</a>
              <a href="author.html#15228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I'm running a setup with a single exchange routing to four queues. My
client servers connect to the exchange and follow all four queues and
spawn handler processes that manage the data from the queues.

I've found that using basic_ack only seems to work if the queues are
empty when my client server joins, otherwise it doesn't send - anyone
have any idea why this would be?

here's the code my process uses:

def _onComplete():
    return channel.basic_ack(delivery_tag=method.delivery_tag)
kwargs = {
     'data': message['data'],
    'oncomplete': _onComplete
}
p = Process(target=self._registry(message['key']),
args=[],kwargs=kwargs)
p.start()
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015293.html">[rabbitmq-discuss] Pika - how to properly publish from a periodic background thread?
</A></li>
	<LI>Next message: <A HREF="015229.html">[rabbitmq-discuss] pika basic_ack dying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15228">[ date ]</a>
              <a href="thread.html#15228">[ thread ]</a>
              <a href="subject.html#15228">[ subject ]</a>
              <a href="author.html#15228">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
