<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20on%20a%20queue%2C%0A%20then%20Monitor%20on%20a%20reply%20queue%2C%0A%20with%20only%201%20connection%20to%20the%20RabbitMQ%20server%3F%20Non-blocking%3F&In-Reply-To=%3C5798631D5F355D4C99FDF23580295AF8043DA6D2%40TLMAIL1.Transparent.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014905.html">
   <LINK REL="Next"  HREF="014909.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?</H1>
    <B>Christopher Lefevre</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20on%20a%20queue%2C%0A%20then%20Monitor%20on%20a%20reply%20queue%2C%0A%20with%20only%201%20connection%20to%20the%20RabbitMQ%20server%3F%20Non-blocking%3F&In-Reply-To=%3C5798631D5F355D4C99FDF23580295AF8043DA6D2%40TLMAIL1.Transparent.local%3E"
       TITLE="[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?">CLefevre at Transparent.com
       </A><BR>
    <I>Tue Sep  6 15:52:17 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014905.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
        <LI>Next message: <A HREF="014909.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14907">[ date ]</a>
              <a href="thread.html#14907">[ thread ]</a>
              <a href="subject.html#14907">[ subject ]</a>
              <a href="author.html#14907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here is the very basic publish, and then basic consume with a new queue.

def _on_queue_declared(self, frame):
        self.StrReturn_Message = None

        self.channel.basic_publish(exchange='',
                            routing_key=self.routing_key,
                            body=self.message,
                            properties = pika.BasicProperties(
                                content_type=self.content_type,
                                delivery_mode=self.delivery_mode,
                                reply_to = self.reply_to,
                                correlation_id = self.correlationID
                            )
        )
        self.channel.basic_consume(self._return_stack, queue=self.reply_to)


-Christopher Lefevre

From: Michael Klishin [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A>]
Sent: Tuesday, September 06, 2011 9:38 AM
To: Christopher Lefevre
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?

2011/9/6 Christopher Lefevre &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CLefevre at transparent.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CLefevre at transparent.com</A>&gt;&gt;
Though I also wanted it to be non-blocking so the website isn&#8217;t stuck waiting for the reply, but rather can be updated as needed. Currently, I can get it to work if there is a pause, like when stepping through the program in a debugger, but when it runs without myself stepping through, it simply hangs when the queue is created and the message is never picked up.

Please post a code example that is at least similar to your actual code.

--
MK

<A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
<A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
The information contained in this electronic message and any attached document(s) is intended only for the personal and confidential use of the designated recipients named above. This message may be confidential. If the reader of this message is not the intended recipient, you are hereby notified that you have received this document in error, and that any review, dissemination, distribution, or copying of this message is strictly prohibited. If you have received this communication in error, please notify sender immediately by telephone (603) 262-6300 or by electronic mail immediately. Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110906/47908329/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110906/47908329/attachment.htm</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014905.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
	<LI>Next message: <A HREF="014909.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14907">[ date ]</a>
              <a href="thread.html#14907">[ thread ]</a>
              <a href="subject.html#14907">[ subject ]</a>
              <a href="author.html#14907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
