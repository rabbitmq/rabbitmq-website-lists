<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Work on plugins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Work%20on%20plugins&In-Reply-To=%3C20110919220105.GA10957%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015169.html">
   <LINK REL="Next"  HREF="015180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Work on plugins</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Work%20on%20plugins&In-Reply-To=%3C20110919220105.GA10957%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Work on plugins">matthew at rabbitmq.com
       </A><BR>
    <I>Mon Sep 19 23:01:06 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015169.html">[rabbitmq-discuss] Work on plugins
</A></li>
        <LI>Next message: <A HREF="015180.html">[rabbitmq-discuss] Work on plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15175">[ date ]</a>
              <a href="thread.html#15175">[ thread ]</a>
              <a href="subject.html#15175">[ subject ]</a>
              <a href="author.html#15175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alvaro,

On Mon, Sep 19, 2011 at 10:51:53PM +0200, Alvaro Videla wrote:
&gt;<i> Something I noticed while playing with custom exchanges for RabbitMQ
</I>&gt;<i> is that if you create them and later you remove the plugin without
</I>&gt;<i> deleting the exchange then RabbitMQ won't start at all because the
</I>&gt;<i> recovery process will fail since it can't find the custom exchange
</I>&gt;<i> module.
</I>
Yeah, I can certainly believe that'll seriously upset things.

&gt;<i> Wouldn't it be nice to have an &quot;uninstall plugin&quot; kind of command?
</I>&gt;<i> Perhaps also in the same way you do -rabbit_boot_step(). declarations
</I>&gt;<i> on your modules, you could add something like a
</I>&gt;<i> -rabbit_uninstall_plugin(). declaration that could be executed to
</I>&gt;<i> remove the plugin. Then it's up to the plugin developer to take care
</I>&gt;<i> at this point of removing Mnesia entries and other stuff related to
</I>&gt;<i> his plugin.
</I>
Well I've often thought about having a -rabbit_shutdown_step()
complement to -rabbit_boot_step() but so far there haven't really been
any problems that we can't solve just by careful use of supervisor
shutdown sequences. That's not to say that we won't need it eventually.

But that's a different issue from what you're after. Currently, all
plugin installation and removal is done with Rabbit shutdown. The boot
steps are run every time rabbit is booted, not just when a new plugin is
discovered. There is currently no uninstallation step, as you know, and
there is no uninstallation tool. However, that's changing soon, though
again, it'll at least in its first guise again work with Rabbit shutdown
and it won't support any uninstall hooks. But I think it's a reasonable
thing to want - there's definitely utility for it, so I'll raise a bug
for it. I can't really promise that it'll get looked at promptly though.

Matthew
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015169.html">[rabbitmq-discuss] Work on plugins
</A></li>
	<LI>Next message: <A HREF="015180.html">[rabbitmq-discuss] Work on plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15175">[ date ]</a>
              <a href="thread.html#15175">[ thread ]</a>
              <a href="subject.html#15175">[ subject ]</a>
              <a href="author.html#15175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
