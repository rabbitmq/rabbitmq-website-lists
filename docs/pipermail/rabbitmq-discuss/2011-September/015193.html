<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ, SSL, .NET Client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%2C%20SSL%2C%20.NET%20Client&In-Reply-To=%3C4E78F144.8000307%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015192.html">
   <LINK REL="Next"  HREF="015169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ, SSL, .NET Client</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%2C%20SSL%2C%20.NET%20Client&In-Reply-To=%3C4E78F144.8000307%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ, SSL, .NET Client">emile at rabbitmq.com
       </A><BR>
    <I>Tue Sep 20 21:02:12 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015192.html">[rabbitmq-discuss] RabbitMQ, SSL, .NET Client
</A></li>
        <LI>Next message: <A HREF="015169.html">[rabbitmq-discuss] Work on plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15193">[ date ]</a>
              <a href="thread.html#15193">[ thread ]</a>
              <a href="subject.html#15193">[ subject ]</a>
              <a href="author.html#15193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jeremy,

Op 20/09/11 18:14, het jeremyalan geskryf:
&gt;<i> 
</I>&gt;&gt;<i> For a test I would instead suggest creating certificates in the way
</I>&gt;&gt;<i> described here:
</I>&gt;&gt;<i> <A HREF="http://www.rabbitmq.com/ssl.html">http://www.rabbitmq.com/ssl.html</A>
</I>&gt;<i> 
</I>&gt;<i> I've attempted to regenerate self-signed certificates, and have not had any
</I>&gt;<i> luck getting the .NET client to connect.  I tried loading the certs in .pem
</I>&gt;<i> format, but that didn't work, apparently because .NET does not work well
</I>&gt;<i> with PEM files, so I converted them to .cer format, using the following
</I>&gt;<i> command:
</I>
The need for DER format and the required openssl commands are documented
here:
<A HREF="https://www.rabbitmq.com/ssl.html#keys-and-certs">https://www.rabbitmq.com/ssl.html#keys-and-certs</A>

&gt;&gt;<i> The common name (CN) field is expected to contain the hostname.
</I>&gt;<i> 
</I>&gt;<i> I'm not sure what the proper hostname should be, since everything is running
</I>&gt;<i> on localhost.  
</I>
On Windows you can substitute %COMPUTERNAME%.

&gt;&gt;<i> It is possible that you are attempting to connect to the SSL port with a
</I>&gt;&gt;<i> client that is not configured to use SSL. Could that be the case?
</I>&gt;&gt;<i> Confirm the port numbers that are set up in your configuration file.
</I>&gt;<i> 
</I>&gt;<i> The port numbers are configured properly.  I can't say for sure
</I>
The default (unencrypted) AMQP port is specified as 5672 in the protocol
and the default SSL port is defined as 5671 in the AmqpTcpEndpoint class.

The following diagnostic test can help to distinguish between the two
kinds of ports.

non-SSL test:
If you connect to the port using telnet or netcat, and send the string
&quot;AMQP^A^A^I^A&quot; then you will either get a reply from the server or the
connection will close. If you get a reply containing &quot;PLAIN AMQPLAIN&quot;
then you have connected to a non-SSL port. If the connection drops while
generating &quot;record overflow&quot; broker logfile entries then try the SSL test.

SSL test:
If you connect with &quot;openssl s_client -connect &lt;host&gt;:&lt;port&gt;&quot; and an SSL
session gets established then you have connected to an SSL port.
(Sending &quot;AMQP^A^A^I^A&quot; and carriage return at this point should also
yield output containing &quot;PLAIN AMQPLAIN&quot;.) If you get an &quot;unknown
protocol&quot; SSL error then you are probably not connecting to an SSL port
- try the non-SSL test.

The error message you report is consistent with attempting to establish
a non-SSL connection to a port on the server which expects SSL
connections. Carefully check the broker configuration file ensuring that
the results from the  diagnostic tests are consistent with it. Then
check that the default example works correctly before elaborating on it:
<A HREF="https://www.rabbitmq.com/ssl.html#code-snippet">https://www.rabbitmq.com/ssl.html#code-snippet</A>



-Emile
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015192.html">[rabbitmq-discuss] RabbitMQ, SSL, .NET Client
</A></li>
	<LI>Next message: <A HREF="015169.html">[rabbitmq-discuss] Work on plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15193">[ date ]</a>
              <a href="thread.html#15193">[ thread ]</a>
              <a href="subject.html#15193">[ subject ]</a>
              <a href="author.html#15193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
