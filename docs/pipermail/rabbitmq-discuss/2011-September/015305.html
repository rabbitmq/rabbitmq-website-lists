<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] defining role type in a cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20defining%20role%20type%20in%20a%20cluster&In-Reply-To=%3C20110927203152.GB3094%40southbank.Home%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015304.html">
   <LINK REL="Next"  HREF="015277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] defining role type in a cluster</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20defining%20role%20type%20in%20a%20cluster&In-Reply-To=%3C20110927203152.GB3094%40southbank.Home%3E"
       TITLE="[rabbitmq-discuss] defining role type in a cluster">alexandru at rabbitmq.com
       </A><BR>
    <I>Tue Sep 27 21:31:52 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015304.html">[rabbitmq-discuss] defining role type in a cluster
</A></li>
        <LI>Next message: <A HREF="015277.html">[rabbitmq-discuss] [ANNOUNCEMENT] amqp-0.2.0 (beta) Released.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15305">[ date ]</a>
              <a href="thread.html#15305">[ thread ]</a>
              <a href="subject.html#15305">[ subject ]</a>
              <a href="author.html#15305">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Kyle,

&gt;<i> It does help, thanks.  It looks like each rabbit node 'remembers' whether it was set to be a disc or ram node.
</I>
They &quot;remember&quot; until they're reset.

&gt;<i> Leads to another question though...  Is it possible setup a primary and secondary disc node, where the secondary is a ram node unless the primary leaves the cluster?
</I>
There's no automatic way to do this in RabbitMQ.  Also, there's no way
to convert a standalone ram node into a disc node without losing the
information on it (because rabbit has to be stopped to do the
conversion, so the database contents will be lost).

Clustering in RabbitMQ is designed to improve scalability (more nodes =
higher capacity).  What you're looking for is High Availability.  There
are a few ways to achieve that with Rabbit; see our two guides (you sort
of described an active/passive scenario):
  Active/Passive HA: <A HREF="http://www.rabbitmq.com/pacemaker.html">http://www.rabbitmq.com/pacemaker.html</A>
  Active/Active HA: <A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A>

Cheers,
Alex

On Tue, Sep 27, 2011 at 04:17:01PM -0400, Kyle O'Donnell wrote:
&gt;<i> Hi Alex,
</I>&gt;<i> 
</I>&gt;<i> It does help, thanks.  It looks like each rabbit node 'remembers' whether it was set to be a disc or ram node.
</I>&gt;<i> 
</I>&gt;<i> Leads to another question though...  Is it possible setup a primary and secondary disc node, where the secondary is a ram node unless the primary leaves the cluster?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Kyle
</I>&gt;<i> 
</I>&gt;<i> ----- Original Message -----
</I>&gt;<i> From: &quot;Alexandru Scvor&#355;ov&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexandru at rabbitmq.com</A>&gt;
</I>&gt;<i> To: &quot;Kyle O'Donnell&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kyleo at 0b10.mx</A>&gt;
</I>&gt;<i> Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Sent: Tuesday, September 27, 2011 8:07:43 AM
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] defining role type in a cluster
</I>&gt;<i> 
</I>&gt;<i> Hi Kyle,
</I>&gt;<i> 
</I>&gt;<i> &gt; Does anyone know if it's possible to define whether a node in a cluster is a disc or ram node via the rabbitmq.config file?  I am trying to ensure that if a node leaves the cluster for some reason it comes back as the appropriate node type.
</I>&gt;<i> 
</I>&gt;<i> You can auto-configure the cluster by setting cluster_nodes in
</I>&gt;<i> rabbitmq.config:
</I>&gt;<i>   <A HREF="http://www.rabbitmq.com/clustering.html#auto-config">http://www.rabbitmq.com/clustering.html#auto-config</A>
</I>&gt;<i> 
</I>&gt;<i> As with manual plugin configuration, the node type is implicit: if the
</I>&gt;<i> current node is in the cluster node list, it will be disc; otherwise,
</I>&gt;<i> it will be ram.
</I>&gt;<i> 
</I>&gt;<i> So, if the '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>' clusters with ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>',
</I>&gt;<i> '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A>'], it will be a ram node.  If it clusters with
</I>&gt;<i> ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>', '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>', '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A>'], it will be a
</I>&gt;<i> disc node.  In other respects, both clusters are identical.
</I>&gt;<i> 
</I>&gt;<i> Note that any manual configuration (via &quot;rabbitmqctl cluster ...&quot;) will
</I>&gt;<i> take precedence over the config file.  You can remove the manual
</I>&gt;<i> configuration by resetting the node (at which point, rabbit will use the
</I>&gt;<i> settings in the config file).
</I>&gt;<i> 
</I>&gt;<i> Hope this helps.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Alex
</I>&gt;<i> 
</I>&gt;<i> On Mon, Sep 26, 2011 at 09:28:58AM -0400, Kyle O'Donnell wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Does anyone know if it's possible to define whether a node in a cluster is a disc or ram node via the rabbitmq.config file?  I am trying to ensure that if a node leaves the cluster for some reason it comes back as the appropriate node type.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; Kyle
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015304.html">[rabbitmq-discuss] defining role type in a cluster
</A></li>
	<LI>Next message: <A HREF="015277.html">[rabbitmq-discuss] [ANNOUNCEMENT] amqp-0.2.0 (beta) Released.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15305">[ date ]</a>
              <a href="thread.html#15305">[ thread ]</a>
              <a href="subject.html#15305">[ subject ]</a>
              <a href="author.html#15305">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
