<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Not receiving notifications about queue	deletions from the server.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Not%20receiving%20notifications%20about%20queue%0A%09deletions%20from%20the%20server.&In-Reply-To=%3C19327880.2778.1316866691162.JavaMail.geo-discussion-forums%40yqjw35%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015257.html">
   <LINK REL="Next"  HREF="015260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Not receiving notifications about queue	deletions from the server.</H1>
    <B>Njal Karevoll</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Not%20receiving%20notifications%20about%20queue%0A%09deletions%20from%20the%20server.&In-Reply-To=%3C19327880.2778.1316866691162.JavaMail.geo-discussion-forums%40yqjw35%3E"
       TITLE="[rabbitmq-discuss] Not receiving notifications about queue	deletions from the server.">nkvoll at gmail.com
       </A><BR>
    <I>Sat Sep 24 13:18:11 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015257.html">[rabbitmq-discuss] HA queue seems never to get fully created,	is never usable
</A></li>
        <LI>Next message: <A HREF="015260.html">[rabbitmq-discuss] Not receiving notifications about queue deletions from the server.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15259">[ date ]</a>
              <a href="thread.html#15259">[ thread ]</a>
              <a href="subject.html#15259">[ subject ]</a>
              <a href="author.html#15259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I don't seem to receive any notifications from the server when a queue I am 
consuming is deleted. Both the server and the client is stating they support 
consumer_cancel_notify. 

Here is a dump of all the frames received and sent by the client:

2011-09-24 14:15:25+0200 SENDING &lt;ProtocolHeader(['frame_type=-1', 
'major=0', 'minor=9', 'revision=1'])&gt;
2011-09-24 14:15:25+0200 RECEIVED: &lt;Method(['frame_type=1', 
'channel_number=0', 
'method=&lt;Connection.Start([&quot;server_properties={\'information\': \'Licensed 
under the MPL.  See <A HREF="http://www.rabbitmq.com/\',">http://www.rabbitmq.com/\',</A> \'product\': \'RabbitMQ\', 
\'copyright\': \'Copyright (C) 2007-2011 VMware, Inc.\', \'capabilities\': 
{\'exchange_exchange_bindings\': True, \'consumer_cancel_notify\': True, 
\'publisher_confirms\': True, \'basic.nack\': True}, \'platform\': 
\'Erlang/OTP\', \'version\': \'2.6.1\'}&quot;, \'version_minor=9\', 
\'mechanisms=PLAIN AMQPLAIN\', \'locales=en_US\', \'version_major=0\'])&gt;'])&gt;
2011-09-24 14:15:25+0200 SENDING &lt;Method(['frame_type=1', 
'channel_number=0', 'method=&lt;Connection.StartOk([\'locale=en_US\', 
\'mechanism=PLAIN\', &quot;client_properties={\'client-properties\': 
{\'consumer_cancel_notify\': True, \'publisher_confirms\': True, 
\'basic.nack\': True}, \'platform\': \'Python 2.7.1\', \'product\': \'Pika 
Python Client Library\', \'version\': \'0.9.6-pre0\', \'information\': \'See 
<A HREF="http://pika.github.com\'}&quot;,">http://pika.github.com\'}&quot;,</A> \'response=\\x00guest\\x00guest\'])&gt;'])&gt;
2011-09-24 14:15:25+0200 RECEIVED: &lt;Method(['frame_type=1', 
'channel_number=0', &quot;method=&lt;Connection.Tune(['frame_max=131072', 
'channel_max=0', 'heartbeat=0'])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 SENDING &lt;Method(['frame_type=1', 
'channel_number=0', &quot;method=&lt;Connection.TuneOk(['frame_max=131072', 
'channel_max=0', 'heartbeat=True'])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 SENDING &lt;Method(['frame_type=1', 
'channel_number=0', &quot;method=&lt;Connection.Open(['insist=True', 
'capabilities=', 'virtual_host=/'])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 RECEIVED: &lt;Method(['frame_type=1', 
'channel_number=0', &quot;method=&lt;Connection.OpenOk(['known_hosts='])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 SENDING &lt;Method(['frame_type=1', 
'channel_number=1', &quot;method=&lt;Channel.Open(['out_of_band='])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 finished keeping connect working
2011-09-24 14:15:25+0200 RECEIVED: &lt;Method(['frame_type=1', 
'channel_number=1', &quot;method=&lt;Channel.OpenOk(['channel_id='])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 SENDING &lt;Method(['frame_type=1', 
'channel_number=1', &quot;method=&lt;Basic.Qos(['prefetch_count=2', 
'prefetch_size=0', 'global_=False'])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 RECEIVED: &lt;Method(['frame_type=1', 
'channel_number=1', 'method=&lt;Basic.QosOk([])&gt;'])&gt;
2011-09-24 14:15:25+0200 SENDING &lt;Method(['frame_type=1', 
'channel_number=1', &quot;method=&lt;Basic.Consume(['exclusive=False', 
'nowait=False', 'no_local=False', 'consumer_tag=ctag1.0', 
'queue=operations', 'arguments={}', 'ticket=0', 'no_ack=False'])&gt;&quot;])&gt;
2011-09-24 14:15:25+0200 RECEIVED: &lt;Method(['frame_type=1', 
'channel_number=1', &quot;method=&lt;Basic.ConsumeOk(['consumer_tag=ctag1.0'])&gt;&quot;])&gt;
2011-09-24 14:15:26+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:27+0200 SENDING &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:27+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
# &lt;&lt; deleted the queue using rabbitmq-management here &gt;&gt;
2011-09-24 14:15:28+0200 SENDING &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:28+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:29+0200 SENDING &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:29+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:30+0200 SENDING &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:30+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:31+0200 SENDING &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:31+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:32+0200 SENDING &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:32+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:33+0200 SENDING &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;
2011-09-24 14:15:33+0200 RECEIVED: &lt;Heartbeat(['frame_type=8', 
'channel_number=0'])&gt;

rabbitmq-management says the following about the connection:

client-propertiesconsumer_cancel_notify:truepublisher_confirms:true
basic.nack:trueplatformPython 2.7.1productPika Python Client Libraryversion
0.9.6-pre0informationSee <A HREF="http://pika.github.com">http://pika.github.com</A>
Im using RabbitMQ 2.6.1 (on OSX), Erlang 5.8.4.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110924/07c15755/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110924/07c15755/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015257.html">[rabbitmq-discuss] HA queue seems never to get fully created,	is never usable
</A></li>
	<LI>Next message: <A HREF="015260.html">[rabbitmq-discuss] Not receiving notifications about queue deletions from the server.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15259">[ date ]</a>
              <a href="thread.html#15259">[ thread ]</a>
              <a href="subject.html#15259">[ subject ]</a>
              <a href="author.html#15259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
