<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] defining role type in a cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20defining%20role%20type%20in%20a%20cluster&In-Reply-To=%3C650e70c6-aa3a-4c2f-bc15-7cd5fe3b2e20%40mx1.0b10.mx%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015297.html">
   <LINK REL="Next"  HREF="015305.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] defining role type in a cluster</H1>
    <B>Kyle O'Donnell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20defining%20role%20type%20in%20a%20cluster&In-Reply-To=%3C650e70c6-aa3a-4c2f-bc15-7cd5fe3b2e20%40mx1.0b10.mx%3E"
       TITLE="[rabbitmq-discuss] defining role type in a cluster">kyleo at 0b10.mx
       </A><BR>
    <I>Tue Sep 27 21:17:01 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015297.html">[rabbitmq-discuss] defining role type in a cluster
</A></li>
        <LI>Next message: <A HREF="015305.html">[rabbitmq-discuss] defining role type in a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15304">[ date ]</a>
              <a href="thread.html#15304">[ thread ]</a>
              <a href="subject.html#15304">[ subject ]</a>
              <a href="author.html#15304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alex,

It does help, thanks.  It looks like each rabbit node 'remembers' whether it was set to be a disc or ram node.

Leads to another question though...  Is it possible setup a primary and secondary disc node, where the secondary is a ram node unless the primary leaves the cluster?

Thanks,
Kyle

----- Original Message -----
From: &quot;Alexandru Scvor&#355;ov&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexandru at rabbitmq.com</A>&gt;
To: &quot;Kyle O'Donnell&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kyleo at 0b10.mx</A>&gt;
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Tuesday, September 27, 2011 8:07:43 AM
Subject: Re: [rabbitmq-discuss] defining role type in a cluster

Hi Kyle,

&gt;<i> Does anyone know if it's possible to define whether a node in a cluster is a disc or ram node via the rabbitmq.config file?  I am trying to ensure that if a node leaves the cluster for some reason it comes back as the appropriate node type.
</I>
You can auto-configure the cluster by setting cluster_nodes in
rabbitmq.config:
  <A HREF="http://www.rabbitmq.com/clustering.html#auto-config">http://www.rabbitmq.com/clustering.html#auto-config</A>

As with manual plugin configuration, the node type is implicit: if the
current node is in the cluster node list, it will be disc; otherwise,
it will be ram.

So, if the '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>' clusters with ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>',
'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A>'], it will be a ram node.  If it clusters with
['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit1</A>', '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit2</A>', '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit3</A>'], it will be a
disc node.  In other respects, both clusters are identical.

Note that any manual configuration (via &quot;rabbitmqctl cluster ...&quot;) will
take precedence over the config file.  You can remove the manual
configuration by resetting the node (at which point, rabbit will use the
settings in the config file).

Hope this helps.

Cheers,
Alex

On Mon, Sep 26, 2011 at 09:28:58AM -0400, Kyle O'Donnell wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Does anyone know if it's possible to define whether a node in a cluster is a disc or ram node via the rabbitmq.config file?  I am trying to ensure that if a node leaves the cluster for some reason it comes back as the appropriate node type.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Kyle
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015297.html">[rabbitmq-discuss] defining role type in a cluster
</A></li>
	<LI>Next message: <A HREF="015305.html">[rabbitmq-discuss] defining role type in a cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15304">[ date ]</a>
              <a href="thread.html#15304">[ thread ]</a>
              <a href="subject.html#15304">[ subject ]</a>
              <a href="author.html#15304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
