<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Number of connections and memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Number%20of%20connections%20and%20memory%20usage&In-Reply-To=%3CCAD7X3-nscg5ZB_A2V_PYNs271FC%2BhQVQQxTynsMj8BhibOZvXA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015241.html">
   <LINK REL="Next"  HREF="015249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Number of connections and memory usage</H1>
    <B>Raphael Simon</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Number%20of%20connections%20and%20memory%20usage&In-Reply-To=%3CCAD7X3-nscg5ZB_A2V_PYNs271FC%2BhQVQQxTynsMj8BhibOZvXA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Number of connections and memory usage">raphael at rightscale.com
       </A><BR>
    <I>Fri Sep 23 19:11:58 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015241.html">[rabbitmq-discuss] Spring-amqp for Spring 2.5.6
</A></li>
        <LI>Next message: <A HREF="015249.html">[rabbitmq-discuss] Number of connections and memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15247">[ date ]</a>
              <a href="thread.html#15247">[ thread ]</a>
              <a href="subject.html#15247">[ subject ]</a>
              <a href="author.html#15247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

We are using RabbitMQ 2.4 in our production environment and are running into
issues with memory usage. We are seeing a direct relation between the number
of connections and the memory usage (the graphs are identical). The ratio is
200 KB / connection which seems hefty especially with about 50,000
connections open on each broker this ends up consuming all the ram. What is
surprising is how constant that number is and I'm wondering if there is a
setting somewhere that can be tweaked to change that ratio. Note that we
have very few or no messages in memory (only around 500 MB of memory is used
by messages according to rabbitmqctl).

Thank you!

--
Raphael.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110923/d7f3e710/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110923/d7f3e710/attachment.htm</A>&gt;
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015241.html">[rabbitmq-discuss] Spring-amqp for Spring 2.5.6
</A></li>
	<LI>Next message: <A HREF="015249.html">[rabbitmq-discuss] Number of connections and memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15247">[ date ]</a>
              <a href="thread.html#15247">[ thread ]</a>
              <a href="subject.html#15247">[ subject ]</a>
              <a href="author.html#15247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
