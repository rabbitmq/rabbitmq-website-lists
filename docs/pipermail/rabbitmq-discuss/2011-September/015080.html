<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Channels closed unexpectedly in Java client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channels%20closed%20unexpectedly%20in%20Java%20client&In-Reply-To=%3C20110914121225.GB5367%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015078.html">
   <LINK REL="Next"  HREF="015090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Channels closed unexpectedly in Java client</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Channels%20closed%20unexpectedly%20in%20Java%20client&In-Reply-To=%3C20110914121225.GB5367%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Channels closed unexpectedly in Java client">matthew at rabbitmq.com
       </A><BR>
    <I>Wed Sep 14 13:12:25 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015078.html">[rabbitmq-discuss] Channels closed unexpectedly in Java client
</A></li>
        <LI>Next message: <A HREF="015090.html">[rabbitmq-discuss] Channels closed unexpectedly in Java client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15080">[ date ]</a>
              <a href="thread.html#15080">[ thread ]</a>
              <a href="subject.html#15080">[ subject ]</a>
              <a href="author.html#15080">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Iain,

On Wed, Sep 14, 2011 at 06:47:10AM -0500, Iain Hull wrote:
&gt;<i> &gt; Certainly my testing of ext4 is not favourable. It seems to have very
</I>&gt;<i> &gt; inconsistent performance. That said, if it works for you...
</I>&gt;<i> Ok thanks I will add xfs and jfs to my mix for testing.  Do you still 
</I>&gt;<i> have those results? And are they in a consumable format?  Our ops team
</I>&gt;<i> would be really interested in looking over them as the basis for our own
</I>&gt;<i> testing.
</I>
I don't still have them, but I'm sure they'd have been simple enough -
probably just measuring overall performance with something like
MulticastMain (Java client) with various flags or I may have written
some custom tests with the Erlang client - certainly you could just use
MulticastMain with -f persistent -r X and tune X for each file system
until you find the highest point at which the latency doesn't grow,
although you'll need to leave it running for a few mins before you can
be sure it's stable.

That'll just measure the cost of writing msgs to disk, though only some
bits of that writing are actually in the path of the msg - other bits
may be done asynchronously at leisure, though ultimately, all bits are
competing for disk bandwidth, so measuring the rate at which data is
written to disk may be indicative of performance.

You could also try creating a durable queue, filling it with a few
million persistent msgs, cleanly shutting down and restarting rabbit,
and then timing how long it takes to drain the queue from a client.

Ideally, you should write your own tests which are as close a match to
the access patterns you expect to see in your applications as possible.
Only performance under those conditions is actually of any use to you.
Especially when you start using features such as publisher confirms.

Matthew
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015078.html">[rabbitmq-discuss] Channels closed unexpectedly in Java client
</A></li>
	<LI>Next message: <A HREF="015090.html">[rabbitmq-discuss] Channels closed unexpectedly in Java client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15080">[ date ]</a>
              <a href="thread.html#15080">[ thread ]</a>
              <a href="subject.html#15080">[ subject ]</a>
              <a href="author.html#15080">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
