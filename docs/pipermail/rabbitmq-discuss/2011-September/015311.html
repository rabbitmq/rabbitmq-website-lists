<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ, Gretty, and Channel question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%2C%20Gretty%2C%20and%20Channel%20question&In-Reply-To=%3CCANBeYQRHfr%3DotG1KVNX929R4uu1PFY5u_%2BR1MkuEyt5MW-Qgkw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015248.html">
   <LINK REL="Next"  HREF="015313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ, Gretty, and Channel question</H1>
    <B>Peter Ledbrook</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%2C%20Gretty%2C%20and%20Channel%20question&In-Reply-To=%3CCANBeYQRHfr%3DotG1KVNX929R4uu1PFY5u_%2BR1MkuEyt5MW-Qgkw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ, Gretty, and Channel question">peter at cacoethes.co.uk
       </A><BR>
    <I>Wed Sep 28 14:57:28 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015248.html">[rabbitmq-discuss] RabbitMQ, Gretty, and Channel question
</A></li>
        <LI>Next message: <A HREF="015313.html">[rabbitmq-discuss] RabbitMQ, Gretty, and Channel question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15311">[ date ]</a>
              <a href="thread.html#15311">[ thread ]</a>
              <a href="subject.html#15311">[ subject ]</a>
              <a href="author.html#15311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Testing the above web service with: &#160;'ab -n 10000 -c 100
</I>&gt;<i> <A HREF="http://localhost:8080/web-service/activity">http://localhost:8080/web-service/activity</A>
</I>&gt;<i> This works great. &#160;this puts 10,000 messages on the queue perfectly (a
</I>&gt;<i> bit slowly) every time.
</I>&gt;<i> I think works perfectly because a new thread is created by tomcat for
</I>&gt;<i> every request.
</I>&gt;<i> That's why I don't have to worry about channel thread safety.
</I>&gt;<i>
</I>&gt;<i> This is NOT the case with Gretty, for reasons I don't understand.
</I>
Apparently the channel is not thread-safe, but that is very unlikely
to result in extra messages.

Are you looking on the queue directly through the RabbitMQ management
interface or the rabbit command line tools? Or are you consuming?
Also, are you able to check how many times basicPublish() is called?
Perhaps it's called 1003 times for some reason. Finally, are you
checking the number of messages on the queue before running ab? I
assume you are, but I have to ask :)

Cheers,

Peter

-- 
Peter Ledbrook
Grails Advocate
SpringSource - A Division of VMware
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015248.html">[rabbitmq-discuss] RabbitMQ, Gretty, and Channel question
</A></li>
	<LI>Next message: <A HREF="015313.html">[rabbitmq-discuss] RabbitMQ, Gretty, and Channel question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15311">[ date ]</a>
              <a href="thread.html#15311">[ thread ]</a>
              <a href="subject.html#15311">[ subject ]</a>
              <a href="author.html#15311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
