<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq query
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20query&In-Reply-To=%3C1315820574.49991.YahooMailNeo%40web114315.mail.gq1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015021.html">
   <LINK REL="Next"  HREF="015025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq query</H1>
    <B>Nithesh Shetty</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20query&In-Reply-To=%3C1315820574.49991.YahooMailNeo%40web114315.mail.gq1.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq query">knitheshshetty at yahoo.com
       </A><BR>
    <I>Mon Sep 12 10:42:54 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="015021.html">[rabbitmq-discuss] rabbitmq query
</A></li>
        <LI>Next message: <A HREF="015025.html">[rabbitmq-discuss] rabbitmq query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15022">[ date ]</a>
              <a href="thread.html#15022">[ thread ]</a>
              <a href="subject.html#15022">[ subject ]</a>
              <a href="author.html#15022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>Assume you have 2 consumers A,B; they get a message each - MA,MB, and
</I>&gt;<i>then A crashes (requeueing MA) and then B crashes (requeueing MB). The
</I>&gt;<i>mutual ordering of MA and MB in the queue is now still not equal to
</I>&gt;<i>the order in which they were in the queue initially. Would this
</I>&gt;<i>situation be ok from your application's point of view?
</I>&#160;
when u requeue MA/MB then those message will be placed at the back of the queue changing the order.
&#160;
If this is what happens then it won't help me.
&#160;
Please confirm.
&#160;
Nithesh


From: Eugene Kirpichov &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ekirpichov at gmail.com</A>&gt;
To: Nithesh Shetty &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">knitheshshetty at yahoo.com</A>&gt;
Cc: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;; &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
Sent: Monday, September 12, 2011 2:52 PM
Subject: Re: [rabbitmq-discuss] rabbitmq query

Hi Nithesh,

Would it be ok for you if RabbitMQ placed unack'd messages after a
reconnect to the front of the queue?

Because this strategy does not always behave intuitively with respect
to message ordering either (unless you have exactly 1 consumer).

Assume you have 2 consumers A,B; they get a message each - MA,MB, and
then A crashes (requeueing MA) and then B crashes (requeueing MB). The
mutual ordering of MA and MB in the queue is now still not equal to
the order in which they were in the queue initially. Would this
situation be ok from your application's point of view?

On Mon, Sep 12, 2011 at 1:09 PM, Nithesh Shetty
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">knitheshshetty at yahoo.com</A>&gt; wrote:
&gt;<i> In that case it won't help us since. our system is a online trading system
</I>&gt;<i>
</I>&gt;<i> and the order of the messages has to be maintained in any case.
</I>&gt;<i>
</I>&gt;<i> Thanks for u r help emile.
</I>&gt;<i>
</I>&gt;<i> Nithesh
</I>&gt;<i>
</I>&gt;<i> From: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;
</I>&gt;<i> To: Nithesh Shetty &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">knitheshshetty at yahoo.com</A>&gt;
</I>&gt;<i> Cc: &quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&quot;
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> Sent: Monday, September 12, 2011 2:32 PM
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] rabbitmq query
</I>&gt;<i>
</I>&gt;<i> Hi Nitesh,
</I>&gt;<i>
</I>&gt;<i> Op 12/09/11 09:45, het Nithesh Shetty geskryf:
</I>&gt;&gt;&gt;<i>Examples where the condition of a single path does not hold is when a
</I>&gt;&gt;&gt;<i>consumer reconnects or requeues messages. In these cases you cannot rely
</I>&gt;&gt;&gt;<i>on messages being received in publication order.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When u say reconnects or requeues. I assume that the application using
</I>&gt;&gt;<i> queue to receive message crashes and then it connects
</I>&gt;&gt;<i> again to receive the message at that moment u cannot gaurantee the order
</I>&gt;&gt;<i> right
</I>&gt;<i>
</I>&gt;<i> If a consumer holds unacknowledged messages when it disconnects then the
</I>&gt;<i> broker needs to return those messages to the queue. The current version
</I>&gt;<i> of rabbit places those messages at the back of the queue, so you cannot
</I>&gt;<i> rely on the order of messages once a reconnect occurs.
</I>&gt;<i>
</I>&gt;<i> The same goes for AMQP methods that accept a &quot;requeue&quot; argument like
</I>&gt;<i> basic.reject, basic.recover and basic.nack.
</I>&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Eugene Kirpichov
Principal Engineer, Mirantis Inc. <A HREF="http://www.mirantis.com/">http://www.mirantis.com/</A>
Editor, <A HREF="http://fprog.ru/">http://fprog.ru/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110912/b2052cc8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110912/b2052cc8/attachment.htm</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015021.html">[rabbitmq-discuss] rabbitmq query
</A></li>
	<LI>Next message: <A HREF="015025.html">[rabbitmq-discuss] rabbitmq query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15022">[ date ]</a>
              <a href="thread.html#15022">[ thread ]</a>
              <a href="subject.html#15022">[ subject ]</a>
              <a href="author.html#15022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
