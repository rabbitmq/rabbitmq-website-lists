<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Mirror queue recovery questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mirror%20queue%20recovery%20questions&In-Reply-To=%3CCAFDmHdOoWQSDxkZAzieBS5rRZ0Ap%2BZV53c_wXKwXohMqaawQsQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014943.html">
   <LINK REL="Next"  HREF="014912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Mirror queue recovery questions</H1>
    <B>Elias Levy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Mirror%20queue%20recovery%20questions&In-Reply-To=%3CCAFDmHdOoWQSDxkZAzieBS5rRZ0Ap%2BZV53c_wXKwXohMqaawQsQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Mirror queue recovery questions">fearsome.lucidity at gmail.com
       </A><BR>
    <I>Tue Sep  6 17:59:26 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014943.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
        <LI>Next message: <A HREF="014912.html">[rabbitmq-discuss] Mirror queue recovery questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14911">[ date ]</a>
              <a href="thread.html#14911">[ thread ]</a>
              <a href="subject.html#14911">[ subject ]</a>
              <a href="author.html#14911">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I did not get a response to my questions, so let me try again.

What happens to persisted messages in mirrored queue slaves if they are
restarted and they don't find a queue master?

When using mirrored queued,must we ensure that the last node shutdown that
was participating in a mirrored queue, and thus the one that became master
last, is the one that is restarted first, so that the last master is online
when slaves join the cluster?

Thanks for your time.


---------- Forwarded message ----------
From: Elias Levy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">fearsome.lucidity at gmail.com</A>&gt;
Date: Thu, Sep 1, 2011 at 12:16 PM
Subject: Re: [rabbitmq-discuss] RabbitMQ 2.6.0 is released
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>


Congratulations on releasing 2.6.0.  We've been looking forward to mirrored
queues, and the federation plugin will be put to use once we deploy to more
than one Amazon region.

I've gone through he mirrored queue documentation and its largely clear.
 The only question I was left with is what happens to the persisted messages
in a durable mirrored queue of a slave that is restarting and does not find
a master.  The docs say that if the master exists the slave will clear is
queue before joining, as its queue may be stale compared to that of the
master, but its silent on what happens if the master does not exists.

This also begs the question as to whether we must now be careful about the
order that nodes must be restarted after a full cluster shutdown.  Must we
ensure that the last node shutdown that was participating in a mirrored
queue, and thus the one that became master last, is the one that is
restarted first, so that the last master is online when slaves join the
cluster?

Elias Levy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110906/242f7876/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110906/242f7876/attachment.htm</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014943.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
	<LI>Next message: <A HREF="014912.html">[rabbitmq-discuss] Mirror queue recovery questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14911">[ date ]</a>
              <a href="thread.html#14911">[ thread ]</a>
              <a href="subject.html#14911">[ subject ]</a>
              <a href="author.html#14911">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
