<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] pika error - need a help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20pika%20error%20-%20need%20a%20help&In-Reply-To=%3C1734456435.144856.1315394475963.JavaMail.root%40zimbra-prod-mbox-4.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014921.html">
   <LINK REL="Next"  HREF="014929.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] pika error - need a help</H1>
    <B>Ann Witbrock (c)</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20pika%20error%20-%20need%20a%20help&In-Reply-To=%3C1734456435.144856.1315394475963.JavaMail.root%40zimbra-prod-mbox-4.vmware.com%3E"
       TITLE="[rabbitmq-discuss] pika error - need a help">awitbrock at vmware.com
       </A><BR>
    <I>Wed Sep  7 12:21:16 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014921.html">[rabbitmq-discuss] pika error - need a help
</A></li>
        <LI>Next message: <A HREF="014929.html">[rabbitmq-discuss] pika error - need a help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14927">[ date ]</a>
              <a href="thread.html#14927">[ thread ]</a>
              <a href="subject.html#14927">[ subject ]</a>
              <a href="author.html#14927">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Sergey, 
I'm not the most experienced about the pika, but I would recommend using normal E xception handling around the connection and queue set up , and also around your processing code, so that it doesn't interfere with the normal running of the processing. If you record the exception messages somewhere, you will be able to get more inf ormation about the failure. 

Your exact needs may differ, but our java tutorial at <A HREF="https://github.com/rabbitmq/rabbitmq-tutorials/blob/master/java/RPCServer.java">https://github.com/rabbitmq/rabbitmq-tutorials/blob/master/java/RPCServer.java</A> &#160;has some Exception context (the &quot;try&quot; blocks) which may be helpful. Unfortunately, we don't have such an example for the pika. 

I hope to &#160; add some guidance on exceptions to our documentation at some point soon. 
Ann 
----- Original Message -----

From: &quot;Sergey Almazov&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sergey.almazoff at gmail.com</A>&gt; 
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> 
Sent: Wednesday, 7 September, 2011 6:39:59 AM 
Subject: [rabbitmq-discuss] pika error - need a help 


#!/usr/bin/env python 
import pika 
import sys 
import psutil 
import json 
import time 


serverName = &quot;salmazov&quot; 
connection = pika.AsyncoreConnection(pika.ConnectionParameters(host='192.168.0.25')) 
channel = connection.channel() 


channel.exchange_declare(exchange='cmd', type='topic') 


cmd_data_queue = channel.queue_declare(exclusive=True).queue 


channel.queue_bind(exchange='cmd', queue=cmd_data_queue, routing_key='cmd.*') 


def callback(ch, method, properties, body): 
&#160; &#160; print &quot; [x] %r:%r&quot; % (method.routing_key, body,) 
&#160; &#160; procCmd = decodeddict[&quot;ProcCmd&quot;] 
&#160; &#160; proc = psutil.Popen(procCmd) 
&#160; &#160;&#160; 
channel.basic_consume(callback, queue=cmd_data_queue, no_ack=True) 
pika.asyncore_loop() 
-------------------------------------------- 


When I start this code -&gt; have an error:&#160; error: uncaptured python exception, closing channel &lt;pika.asyncore_adapter.RabbitDispatcher connected at 0x12ad6c0&gt; 


I need to run processes that arrived via RmQ 
_______________________________________________ 
rabbitmq-discuss mailing list 
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> 
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110907/c66bcda8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110907/c66bcda8/attachment.htm</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014921.html">[rabbitmq-discuss] pika error - need a help
</A></li>
	<LI>Next message: <A HREF="014929.html">[rabbitmq-discuss] pika error - need a help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14927">[ date ]</a>
              <a href="thread.html#14927">[ thread ]</a>
              <a href="subject.html#14927">[ subject ]</a>
              <a href="author.html#14927">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
