<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20on%20a%20queue%2C%0A%20then%20Monitor%20on%20a%20reply%20queue%2C%0A%20with%20only%201%20connection%20to%20the%20RabbitMQ%20server%3F%20Non-blocking%3F&In-Reply-To=%3CCABzX%2BqwysHXuTVA3NquX-mZ8VscKubGE6ghFAc3D%2BKmGg8toKg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014909.html">
   <LINK REL="Next"  HREF="014914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20on%20a%20queue%2C%0A%20then%20Monitor%20on%20a%20reply%20queue%2C%0A%20with%20only%201%20connection%20to%20the%20RabbitMQ%20server%3F%20Non-blocking%3F&In-Reply-To=%3CCABzX%2BqwysHXuTVA3NquX-mZ8VscKubGE6ghFAc3D%2BKmGg8toKg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?">majek04 at gmail.com
       </A><BR>
    <I>Tue Sep  6 17:43:03 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014909.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
        <LI>Next message: <A HREF="014914.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14910">[ date ]</a>
              <a href="thread.html#14910">[ thread ]</a>
              <a href="subject.html#14910">[ subject ]</a>
              <a href="author.html#14910">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Sep 6, 2011 at 17:19, Christopher Lefevre
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">CLefevre at transparent.com</A>&gt; wrote:
&gt;<i> To note, if this is an easier description, I&#8217;m trying to implement the RPC
</I>&gt;<i> example on the RabbitMQ tutorial with a synchronous connection. Which I&#8217;ve
</I>&gt;<i> copied below so you guys don&#8217;t need to go find it. However, the main impetus
</I>&gt;<i> to me moving forward is lines 13/14:
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; result = self.channel.queue_declare(exclusive=True)
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160; self.callback_queue = result.method.queue
</I>
Synchronous methods in AMQP return data. This data is captured
under 'result.method'.
result.method.queue contains a fresh, unique, exclusive queue name
that was just created.

&gt;<i> Line 13 declares the result variable as the product of the channel getting
</I>&gt;<i> an exclusive queue created, which I get. However the part that I get caught
</I>&gt;<i> up in is where the callback is set to result.method.queue in line 14. What
</I>&gt;<i> exactly is the method.queue of the result object?
</I>
If you're interested in other fields under 'result.method' please take a look
at amqp spec, for example results of queue-declare are under queue-declare-ok
method: <A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare-ok">http://www.rabbitmq.com/amqp-0-9-1-reference.html#queue.declare-ok</A>

&gt;<i> I am hoping to simply
</I>&gt;<i> modify my Monitor/Publish classes to be able to have a synchronous
</I>&gt;<i> publish/monitor without creating 2 connections. My current attempt at simply
</I>&gt;<i> using one connection with 2 channels does not seem to be operating how I
</I>&gt;<i> expected.
</I>
The problem is that RPC client does only listen for messages when
there is an RPC call running. So, you won't be able to get 'realtime'
data from other things that are hanging on the same connection.
You may hear the results only during the rpc call.

Cheers,
  Marek
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014909.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
	<LI>Next message: <A HREF="014914.html">[rabbitmq-discuss] Publish on a queue, then Monitor on a reply queue, with only 1 connection to the RabbitMQ server? Non-blocking?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14910">[ date ]</a>
              <a href="thread.html#14910">[ thread ]</a>
              <a href="subject.html#14910">[ subject ]</a>
              <a href="author.html#14910">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
