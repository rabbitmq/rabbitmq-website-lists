<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Thread locked
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Thread%20locked&In-Reply-To=%3C16365_1315558628_4E69D4E4_16365_28912_1_4E69D4E4.3060504%40orange-ftgroup.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014984.html">
   <LINK REL="Next"  HREF="015119.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Thread locked</H1>
    <B>jeanphilippe1.caruana at orange-ftgroup.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Thread%20locked&In-Reply-To=%3C16365_1315558628_4E69D4E4_16365_28912_1_4E69D4E4.3060504%40orange-ftgroup.com%3E"
       TITLE="[rabbitmq-discuss] Thread locked">jeanphilippe1.caruana at orange-ftgroup.com
       </A><BR>
    <I>Fri Sep  9 09:57:08 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014984.html">[rabbitmq-discuss] Thread locked
</A></li>
        <LI>Next message: <A HREF="015119.html">[rabbitmq-discuss] Thread locked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14991">[ date ]</a>
              <a href="thread.html#14991">[ thread ]</a>
              <a href="subject.html#14991">[ subject ]</a>
              <a href="author.html#14991">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 08/09/2011 18:14, Michael Klishin wrote:
&gt;&gt;<i> How can java.net.SocketOutputStream.socketWrite be locking everything else ?
</I>&gt;&gt;<i> How much asynchronous is publishing ?
</I>&gt;<i>
</I>&gt;<i> SocketFrameHandler.writeFrame does synchronization on the output stream it uses. It is difficult to tell what's going on
</I>&gt;<i> from just this stack trace, but
</I>&gt;<i>
</I>&gt;<i> locked&lt;0x2eb153f8&gt;  (a java.io.BufferedOutputStream)
</I>&gt;<i>
</I>&gt;<i> makes me believe this *may* be a BufferedOutputStream issue. Deadlocks and running out of memory are usually not related to each other, though. Can you explain how you came to the conclusion about out of memory issues?
</I>
I didn't come to any conclusion : we had several OutOfMemoryError and we 
did a thread dump. According to this dump, the thread lock occured at 
the OutOfMemoryError time when the jvm crashed, that's all I can say for 
now.

You say &quot;this may be a BufferedOutputStream&quot; : what do you mean ? Where 
should I be looking ? What kind of information is needed ?

Thanks for your input.

-- 
Jean-Philippe Caruana

























********************************************************************************
IMPORTANT.Les informations contenues dans ce message electronique y compris les fichiers attaches sont strictement confidentielles
et peuvent etre protegees par la loi.
Ce message electronique est destine exclusivement au(x) destinataire(s) mentionne(s) ci-dessus.
Si vous avez recu ce message par erreur ou s il ne vous est pas destine, veuillez immediatement le signaler  a l expediteur et effacer ce message 
et tous les fichiers eventuellement attaches.
Toute lecture, exploitation ou transmission des informations contenues dans ce message est interdite.
Tout message electronique est susceptible d alteration.
A ce titre, le Groupe France Telecom decline toute responsabilite notamment s il a ete altere, deforme ou falsifie.
De meme, il appartient au destinataire de s assurer de l absence de tout virus.

IMPORTANT.This e-mail message and any attachments are strictly confidential and may be protected by law. This message is
intended only for the named recipient(s) above.
If you have received this message in error, or are not the named recipient(s), please immediately notify the sender and delete this e-mail message.
Any unauthorized view, usage or disclosure ofthis message is prohibited.
Since e-mail messages may not be reliable, France Telecom Group shall not be liable for any message if modified, changed or falsified.
Additionally the recipient should ensure they are actually virus free.
********************************************************************************

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014984.html">[rabbitmq-discuss] Thread locked
</A></li>
	<LI>Next message: <A HREF="015119.html">[rabbitmq-discuss] Thread locked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14991">[ date ]</a>
              <a href="thread.html#14991">[ thread ]</a>
              <a href="subject.html#14991">[ subject ]</a>
              <a href="author.html#14991">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
