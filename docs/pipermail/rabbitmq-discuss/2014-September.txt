From mrhol at qq.com  Tue Sep  9 05:34:34 2014
From: mrhol at qq.com (singledon)
Date: Mon, 8 Sep 2014 21:34:34 -0700 (PDT)
Subject: [rabbitmq-discuss] question about amqp_queue_declare
Message-ID: <1410237274095-37060.post@n5.nabble.com>

when i called amqp_queue_declare with arguments, it return some error message
like "received bad AMQP data
, -6", i have no idea what's wrong.please help..

queue durable
exchange durable
arguments in c++:
    amqp_table_t  arg;
    arg = (amqp_table_t) {0};
    amqp_table_entry_t entries = {0};
    entries.key = amqp_cstring_bytes("x-ha-policy");
    entries.value.kind = AMQP_FIELD_KIND_UTF8;
    entries.value.value.bytes = amqp_cstring_bytes("all");
    arg.num_entries = 1;
    arg.entries = &entries;



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/question-about-amqp-queue-declare-tp37060.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at pivotal.io  Tue Sep  9 05:36:48 2014
From: mklishin at pivotal.io (Michael Klishin)
Date: Tue, 9 Sep 2014 08:36:48 +0400
Subject: [rabbitmq-discuss] question about amqp_queue_declare
In-Reply-To: <1410237274095-37060.post@n5.nabble.com>
References: <1410237274095-37060.post@n5.nabble.com>
Message-ID: <etPan.540e83fc.140e0f76.870a@mercurio.local>

On 9 September 2014 at 08:35:38, singledon (mrhol at qq.com) wrote:
> > when i called amqp_queue_declare with arguments, it return  
> some error message
> like "received bad AMQP data
> , -6", i have no idea what's wrong.please help..

?What's the exact message? What is in RabbitMQ log?

Also, this list has moved to rabbitmq-users:
https://groups.google.com/forum/#!forum/rabbitmq-users

Please start new discussions there.
--  
MK  

Staff Software Engineer, Pivotal/RabbitMQ

From jsosic at gmail.com  Tue Sep  9 20:56:34 2014
From: jsosic at gmail.com (Jakov Sosic)
Date: Tue, 09 Sep 2014 21:56:34 +0200
Subject: [rabbitmq-discuss] Changing file descriptor limit wihtout
	restart?
In-Reply-To: <53BA69F5.8010005@rabbitmq.com>
References: <53B849C2.8040909@gmail.com>
 <etPan.53b84ad9.19495cff.cc3d@mercurio.local> <53B85F72.5020903@gmail.com>
 <CAM8fPiSZtrDkCcJMCAHW6PgWPMhTEG=hxtbvhoqKb2EuAsKdvQ@mail.gmail.com>
 <53B88441.6060006@gmail.com> <53BA69F5.8010005@rabbitmq.com>
Message-ID: <540F5B72.6020501@gmail.com>

On 07/07/2014 11:35 AM, Simon MacMullen wrote:

> It's not Erlang, it's RabbitMQ. The problem is that the file handle
> cache (the component which manages file descriptors inside the broker)
> only checks the limit at startup.
>
> But you can tell it the limit has changed with something like:
>
> $ rabbitmqctl eval 'file_handle_cache:set_limit(4096).'
>
> BIG FAT WARNING:
>
> This number is not validated; it's taken entirely on trust. If you tell
> the FHC that it has a larger limit than the one the OS will enforce, you
> can run out of file descriptors and crash the server.



That will increase "Network sockets count and limit managed by 
RabbitMQ". File descriptor count stays hard locked at 1024.


From sagu.prf1 at gmail.com  Wed Sep 10 04:08:43 2014
From: sagu.prf1 at gmail.com (sagu prf)
Date: Tue, 9 Sep 2014 20:08:43 -0700
Subject: [rabbitmq-discuss] Regarding rabbit n statistics
Message-ID: <CAMK+tBgpcROH1n3y1T6BJM1fO9_pma7Ewu62-OSXBVmXUSHtgA@mail.gmail.com>

Hi Team ,

I would like to collect exchange level publishing rate through the script.


Rabbitmqctl list_exchanges not providing publish in and out data .

how can i collect the exchange publish in and publish out data through
the managemne api ?


Thank you ,

Regards
sagu

From mklishin at pivotal.io  Wed Sep 10 06:52:02 2014
From: mklishin at pivotal.io (Michael Klishin)
Date: Wed, 10 Sep 2014 09:52:02 +0400
Subject: [rabbitmq-discuss] Regarding rabbit n statistics
In-Reply-To: <CAMK+tBgpcROH1n3y1T6BJM1fO9_pma7Ewu62-OSXBVmXUSHtgA@mail.gmail.com>
References: <CAMK+tBgpcROH1n3y1T6BJM1fO9_pma7Ewu62-OSXBVmXUSHtgA@mail.gmail.com>
Message-ID: <etPan.540fe71d.4db127f8.14a@mercurio.local>

This list has moved to rabbitmq-users:
https://groups.google.com/forum/#!forum/rabbitmq-users

Please start all new discussions there.

On 10 September 2014 at 07:10:53, sagu prf (sagu.prf1 at gmail.com) wrote:
> Rabbitmqctl list_exchanges not providing publish in and out 
> data .
> 
> how can i collect the exchange publish in and publish out data 
> through
> the managemne api ?

Exchange details (and listing ) should include message rates, see
http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_3_5/priv/www/api/index.html
-- 
MK 

Staff Software Engineer, Pivotal/RabbitMQ

From simon at rabbitmq.com  Wed Sep 10 14:18:39 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Wed, 10 Sep 2014 14:18:39 +0100
Subject: [rabbitmq-discuss] Changing file descriptor limit wihtout
	restart?
In-Reply-To: <540F5B72.6020501@gmail.com>
References: <53B849C2.8040909@gmail.com>
 <etPan.53b84ad9.19495cff.cc3d@mercurio.local> <53B85F72.5020903@gmail.com>
 <CAM8fPiSZtrDkCcJMCAHW6PgWPMhTEG=hxtbvhoqKb2EuAsKdvQ@mail.gmail.com>
 <53B88441.6060006@gmail.com> <53BA69F5.8010005@rabbitmq.com>
 <540F5B72.6020501@gmail.com>
Message-ID: <54104FAF.1040007@rabbitmq.com>

On 09/09/14 20:56, Jakov Sosic wrote:
> That will increase "Network sockets count and limit managed by
> RabbitMQ". File descriptor count stays hard locked at 1024.

Ah. It looks like the old value is cached in the management plugin 
indefinitely.

However, if you look at "rabbitmqctl status" then you will see the 
correct new value. And that's the number the file handle cache will 
actually take account of.

Cheers, Simon

From chris.friesen at windriver.com  Wed Sep 10 16:35:04 2014
From: chris.friesen at windriver.com (Chris Friesen)
Date: Wed, 10 Sep 2014 09:35:04 -0600
Subject: [rabbitmq-discuss] best practices for HA?
Message-ID: <54106FA8.7090805@windriver.com>

Hi,

I'm working on an OpenStack controller using RabbitMQ 3.2.4 and I want 
to extend it to a 2-node HA setup.

I'm looking at how to handle the HA for RabbitMQ.

The RabbitMQ docs (at https://www.rabbitmq.com/ha.html) seem to 
recommend active/active with mirrored queues.

On the other hand, the OpenStack high availability guide currently 
recommends using active/standby with the messages stored on a replicated 
filesystem.  Do you know why they would recommend that over the 
active/active model?

Thanks,
Chris

From 0cool.c at gmail.com  Mon Sep 15 03:45:56 2014
From: 0cool.c at gmail.com (kelvin)
Date: Sun, 14 Sep 2014 19:45:56 -0700 (PDT)
Subject: [rabbitmq-discuss] MQTT plugin, QoS 1, Android,
	not consuming on reconnect
In-Reply-To: <CAD34VhPCTcCOzOzNr1KtpG3HBkGUXKQACJ9ye_7DETRjF0A--w@mail.gmail.com>
References: <1406315315443-36888.post@n5.nabble.com>
 <etPan.53d2b306.6b8b4567.1552e@mercurio.local>
 <CAD34VhOqqvcy8HE3vpBWWc_kp-Mi1hP1vmavY8CedEyds9-oMg@mail.gmail.com>
 <etPan.53d2b72c.66334873.1552e@mercurio.local>
 <etPan.53d2bcbf.74b0dc51.1552e@mercurio.local>
 <1406466367573-36902.post@n5.nabble.com>
 <etPan.53d50b6c.327b23c6.cf3e@mercurio.local>
 <CAD34VhPCTcCOzOzNr1KtpG3HBkGUXKQACJ9ye_7DETRjF0A--w@mail.gmail.com>
Message-ID: <1410749156162-37074.post@n5.nabble.com>

hi, brydev.
i have met the same problem these days, i wonder how you fix it.
thx~



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/MQTT-plugin-QoS-1-Android-not-consuming-on-reconnect-tp36888p37074.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From rom.t.cabral at gmail.com  Tue Sep 16 15:47:35 2014
From: rom.t.cabral at gmail.com (Rom Cabral)
Date: Tue, 16 Sep 2014 07:47:35 -0700 (PDT)
Subject: [rabbitmq-discuss] Problem Extending DefaultBasicConsumer Class
Message-ID: <c2361808-9e8f-4625-9794-34a978b67568@googlegroups.com>

Hi guys,

I'm in the process of exploring RabbitMQ so my probIem might be very easy 
to some of you. Anyway, I decided to post this question after long hours of 
debugging my code. Basically, I have 2 problems that I noticed when I try 
extending DefaultConsumer. 

First is that, acknowledgement is not working, message is moved back from 
unacknowledge to ready upon closing the channel. Second is that I'm 
encountering "AlreadyClosedException" when trying to close the connection. 
I'm wonder why this is happening even if I have checking to close only open 
connection. Hope to hear your comments and suggestions.

class SampleConsumer : DefaultBasicConsumer
    {

        public SampleConsumer(IModel channel) : base(channel)
        {
        }

        public override void HandleBasicDeliver(string consumerTag, ulong 
deliveryTag, bool redelivered, string exchange, string routingKey,
            IBasicProperties properties, byte[] body)
        {
            try
            {
                Console.WriteLine(Encoding.ASCII.GetString(body));
                Model.BasicAck(deliveryTag, false);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                Model.BasicNack(deliveryTag, false, false);
                
            }
            //base.HandleBasicDeliver(consumerTag, deliveryTag, 
redelivered, exchange, routingKey, properties, body);
        }
    }
}

class Receiver : IDisposable
{
// create xchange, queue and binding here
public void Subscribe(string queue)
        {
            var consumer = new SampleConsumer(Channel);
            Channel.BasicConsume(queue, false, consumer);
        }

    public void Dispose()
        {
            if (Channel != null && Channel.IsOpen)
                Channel.Close();

            if (Connection != null && Connection.IsOpen)
                Connection.Close();
        }
}

Main
  using(var r = new Receiver(server...)
     r.Subscribe(queue);
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140916/fe29ace0/attachment.html>

From mklishin at pivotal.io  Tue Sep 16 15:53:19 2014
From: mklishin at pivotal.io (Michael Klishin)
Date: Tue, 16 Sep 2014 18:53:19 +0400
Subject: [rabbitmq-discuss] Problem Extending DefaultBasicConsumer Class
In-Reply-To: <c2361808-9e8f-4625-9794-34a978b67568@googlegroups.com>
References: <c2361808-9e8f-4625-9794-34a978b67568@googlegroups.com>
Message-ID: <etPan.54184efd.12200854.ca6b@mercurio.local>

Rom,

This list has been deprecated in late July. We've announced that it will be
discontinued on Oct 1st in August. We are 2 weeks away from that, time to
start posting new questions to the new list, rabbitmq-users:

https://groups.google.com/forum/#!forum/rabbitmq-users

On 16 September 2014 at 18:49:42, Rom Cabral (rom.t.cabral at gmail.com) wrote:
> First is that, acknowledgement is not working, message is moved  
> back from unacknowledge to ready upon closing the channel.

This is by design. Closing channel or connection or when connection goes
away all result in unacknowledged messages being re-queued. Acknowledgements
would not make much sense otherwise.

?Second  
> is that I'm encountering "AlreadyClosedException" when trying  
> to close the connection. I'm wonder why this is happening even  
> if I have checking to close only open connection

Something tries to use a channel after it is closed. Please see your stack trace
to figure out what it may be.
--  
MK  

Staff Software Engineer, Pivotal/RabbitMQ

From DeepNightTwo at gmail.com  Fri Sep 19 08:02:17 2014
From: DeepNightTwo at gmail.com (DeepNightTwo)
Date: Fri, 19 Sep 2014 00:02:17 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
Message-ID: <1411110137540-37080.post@n5.nabble.com>

I created consumer like this:

    ConnectionFactory factory = new ConnectionFactory();
	factory.setHost(host);
	factory.setVirtualHost(vhost);
	factory.setUsername(username);
	factory.setPassword(passwd);
	Connection connection = factory.newConnection();
	Channel channel = connection.createChannel();
	channel.basicQos(4096);
	QueueingConsumer consumer = new QueueingConsumer(channel);
	channel.basicConsume(queueName, true, consumer);
	
	while(true){
		consumer.nextDelivery();
	}

and I found that there is a thread keep pulling data from rabbitmq server.
If the data is consumed slower than produced, lots of Delivery instances may
cause OOM. If I use a fix sized blocking queue to create QueueingConsumer,
it will still keep pulling data and cause the queue full exception:

2014-09-19 14:46:16 STDIO [ERROR] DefaultExceptionHandler: Consumer
com.rabbitmq.client.QueueingConsumer at 2316ea4
(amq.ctag-1Ee7d70sWHCKBdbunbBw-w) method handleDelivery for channel
AMQChannel(amqp://sec-read at 10.8.91.153:5672infosec,1) threw an exception for
channel AMQChannel(amqp://sec-read at 10.8.91.153:5672infosec,1):
2014-09-19 14:46:16 STDIO [ERROR] java.lang.IllegalStateException: Queue
full
2014-09-19 14:46:16 STDIO [ERROR] at
java.util.AbstractQueue.add(AbstractQueue.java:98)
2014-09-19 14:46:16 STDIO [ERROR] at
com.rabbitmq.client.QueueingConsumer.handleDelivery(QueueingConsumer.java:125)
2014-09-19 14:46:16 STDIO [ERROR] at
com.rabbitmq.client.impl.ConsumerDispatcher$5.run(ConsumerDispatcher.java:140)
2014-09-19 14:46:16 STDIO [ERROR] at
com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:85)
2014-09-19 14:46:16 STDIO [ERROR] at
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
2014-09-19 14:46:16 STDIO [ERROR] at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)



my question is, is there a size setting for consumer to limit the count of
un-consumed delivery? Or I should use the basicGet api?







--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-java-client-keeps-pulling-data-tp37080.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From mklishin at pivotal.io  Fri Sep 19 08:05:30 2014
From: mklishin at pivotal.io (Michael Klishin)
Date: Fri, 19 Sep 2014 11:05:30 +0400
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <1411110137540-37080.post@n5.nabble.com>
References: <1411110137540-37080.post@n5.nabble.com>
Message-ID: <etPan.541bd5d5.5bd062c2.5400@mercurio.local>

On 19 September 2014 at 11:03:34, DeepNightTwo (deepnighttwo at gmail.com) wrote:
> my question is, is there a size setting for consumer to limit  
> the count of
> un-consumed delivery? Or I should use the basicGet api?

Yes, basic.qos + ?manual acknowledgements (see tutorial 2). I'd also extend
DefaultConsumer instead of using QueueingConsumer.

http://www.rabbitmq.com/tutorials/tutorial-two-java.html
--  
MK  

Staff Software Engineer, Pivotal/RabbitMQ

From DeepNightTwo at gmail.com  Fri Sep 19 09:08:48 2014
From: DeepNightTwo at gmail.com (DeepNightTwo)
Date: Fri, 19 Sep 2014 01:08:48 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
References: <1411110137540-37080.post@n5.nabble.com>
 <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
Message-ID: <1411114128949-37082.post@n5.nabble.com>

Is it designed so for some purpose? My understanding is, if a fixed-size
queue is used to create a consumer, it is expected the consumer should stop
pulling data if the queue is full. 

I extends from QueueingConsumer and it works for me. 


class BlockingConsumer extends QueueingConsumer {

    private BlockingQueue<Delivery> q;

    public BlockingConsumer(Channel ch) {
        super(ch);
    }

    public BlockingConsumer(Channel ch, LinkedBlockingDeque<Delivery> q) {
        super(ch, q);
        this.q = q;
    }

    @Override
    public void handleDelivery(String consumerTag, Envelope envelope,
AMQP.BasicProperties properties, byte[] body) throws IOException {
        if (q == null) {
            super.handleDelivery(consumerTag, envelope, properties, body);
        } else {
            try {
                this.q.put(new Delivery(envelope, properties, body));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }
    }
}

q.put will block until the queue has a slot available. But I'm not sure if
this will bring network issue. For example, if the queue keeps full, will
the connection be timeout/reset?

And this impl is ugly. 

Because the _queue is private, I have to store a reference in subclass. And
because the _checkShutdown method is private, I didn't invoke it in the sub
class.





--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-java-client-keeps-pulling-data-tp37080p37082.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael at rabbitmq.com  Fri Sep 19 09:23:33 2014
From: michael at rabbitmq.com (Michael Klishin)
Date: Fri, 19 Sep 2014 12:23:33 +0400
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <1411114128949-37082.post@n5.nabble.com>
References: <1411110137540-37080.post@n5.nabble.com>
 <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
 <1411114128949-37082.post@n5.nabble.com>
Message-ID: <8B0A3359-AE5F-430D-ABE2-D6A1A8ADEB4E@rabbitmq.com>

You are reinventing basic.qos in the client, except that if your entire JVM goes down, RabbitMQ won't notice and re-queue unacknowledged deliveries.

basic.qos exist precisely for consumer-controlled delivery rate limiting.

MK

> On 19/9/2014, at 12:08, DeepNightTwo <DeepNightTwo at gmail.com> wrote:
> 
> Is it designed so for some purpose? My understanding is, if a fixed-size
> queue is used to create a consumer, it is expected the consumer should stop
> pulling data if the queue is full.

From DeepNightTwo at gmail.com  Fri Sep 19 09:41:09 2014
From: DeepNightTwo at gmail.com (DeepNightTwo)
Date: Fri, 19 Sep 2014 01:41:09 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <8B0A3359-AE5F-430D-ABE2-D6A1A8ADEB4E@rabbitmq.com>
References: <1411110137540-37080.post@n5.nabble.com>
 <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
 <1411114128949-37082.post@n5.nabble.com>
 <8B0A3359-AE5F-430D-ABE2-D6A1A8ADEB4E@rabbitmq.com>
Message-ID: <1411116069304-37084.post@n5.nabble.com>

        Channel channel = connection.createChannel(); 
        channel.basicQos(4096); 


I've set the basic.qos like above. But it seems not work as I expected and
keeps pulling data and cause OOM. 



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-java-client-keeps-pulling-data-tp37080p37084.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael at rabbitmq.com  Fri Sep 19 10:04:08 2014
From: michael at rabbitmq.com (Michael Klishin)
Date: Fri, 19 Sep 2014 13:04:08 +0400
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <1411116069304-37084.post@n5.nabble.com>
References: <1411110137540-37080.post@n5.nabble.com>
 <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
 <1411114128949-37082.post@n5.nabble.com>
 <8B0A3359-AE5F-430D-ABE2-D6A1A8ADEB4E@rabbitmq.com>
 <1411116069304-37084.post@n5.nabble.com>
Message-ID: <FD7681E0-2777-4B13-872D-DC10832239C8@rabbitmq.com>

Did you switch basicConsume to use manual acknowledgements?
basic.qos has no effect without them.

This is covered in tutorial 2, please do read it.

MK

> On 19/9/2014, at 12:41, DeepNightTwo <DeepNightTwo at gmail.com> wrote:
> 
> I've set the basic.qos like above. But it seems not work as I expected and
> keeps pulling data and cause OOM.

From DeepNightTwo at gmail.com  Fri Sep 19 10:30:34 2014
From: DeepNightTwo at gmail.com (DeepNightTwo)
Date: Fri, 19 Sep 2014 02:30:34 -0700 (PDT)
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <FD7681E0-2777-4B13-872D-DC10832239C8@rabbitmq.com>
References: <1411110137540-37080.post@n5.nabble.com>
 <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
 <1411114128949-37082.post@n5.nabble.com>
 <8B0A3359-AE5F-430D-ABE2-D6A1A8ADEB4E@rabbitmq.com>
 <1411116069304-37084.post@n5.nabble.com>
 <FD7681E0-2777-4B13-872D-DC10832239C8@rabbitmq.com>
Message-ID: <1411119034478-37086.post@n5.nabble.com>

Do you mean I need to use manual ack to make basicQos work? I did use autoack
in previous use case :

channel.basicConsume(queueName, true, consumer); 


So if I use 

channel.basicConsume(queueName, false, consumer);  

and ack it after the message is proceed. BasicQos would works, right?



--
View this message in context: http://rabbitmq.1065348.n5.nabble.com/rabbitmq-java-client-keeps-pulling-data-tp37080p37086.html
Sent from the RabbitMQ mailing list archive at Nabble.com.

From michael at rabbitmq.com  Fri Sep 19 10:47:19 2014
From: michael at rabbitmq.com (Michael Klishin)
Date: Fri, 19 Sep 2014 13:47:19 +0400
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <1411119034478-37086.post@n5.nabble.com>
References: <1411110137540-37080.post@n5.nabble.com>
 <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
 <1411114128949-37082.post@n5.nabble.com>
 <8B0A3359-AE5F-430D-ABE2-D6A1A8ADEB4E@rabbitmq.com>
 <1411116069304-37084.post@n5.nabble.com>
 <FD7681E0-2777-4B13-872D-DC10832239C8@rabbitmq.com>
 <1411119034478-37086.post@n5.nabble.com>
Message-ID: <3B8556A5-ADEB-408C-AAF7-41ED1E58586B@rabbitmq.com>

Tutorial 2 answers this.

MK

> On 19/9/2014, at 13:30, DeepNightTwo <DeepNightTwo at gmail.com> wrote:
> 
> Do you mean I need to use manual ack to make basicQos work? I did use autoack
> in previous use case :
> 
> channel.basicConsume(queueName, true, consumer); 
> 
> 
> So if I use 
> 
> channel.basicConsume(queueName, false, consumer);  
> 
> and ack it after the message is proceed. BasicQos would works, right?

From mklishin at pivotal.io  Fri Sep 19 10:58:59 2014
From: mklishin at pivotal.io (Michael Klishin)
Date: Fri, 19 Sep 2014 13:58:59 +0400
Subject: [rabbitmq-discuss] rabbitmq java client keeps pulling data?
In-Reply-To: <1411119034478-37086.post@n5.nabble.com>
References: <1411110137540-37080.post@n5.nabble.com>
 <etPan.541bd5d5.5bd062c2.5400@mercurio.local>
 <1411114128949-37082.post@n5.nabble.com>
 <8B0A3359-AE5F-430D-ABE2-D6A1A8ADEB4E@rabbitmq.com>
 <1411116069304-37084.post@n5.nabble.com>
 <FD7681E0-2777-4B13-872D-DC10832239C8@rabbitmq.com>
 <1411119034478-37086.post@n5.nabble.com>
Message-ID: <etPan.541bfe81.4db127f8.5400@mercurio.local>

?On 19 September 2014 at 13:31:48, DeepNightTwo (deepnighttwo at gmail.com) wrote:
> Do you mean I need to use manual ack to make basicQos work? I did  
> use autoack
> in previous use case :
>  
> channel.basicConsume(queueName, true, consumer);
>  
>  
> So if I use
>  
> channel.basicConsume(queueName, false, consumer);
>  
> and ack it after the message is proceed. BasicQos would works,  
> right

Also, I've noticed this is posted to rabbitmq-discuss. rabbitmq-discuss
is the legacy list that has been deprecated in late July. It will be
discontinued on Oct 1st.

Please start all new discussions on rabbitmq-users:
https://groups.google.com/forum/#!forum/rabbitmq-users
--  
MK  

Staff Software Engineer, Pivotal/RabbitMQ

From Nikunj.Badjatya at emc.com  Thu Sep 25 06:34:25 2014
From: Nikunj.Badjatya at emc.com (Badjatya, Nikunj)
Date: Thu, 25 Sep 2014 05:34:25 +0000
Subject: [rabbitmq-discuss] Way to get federation status for a particular
	exchange
Message-ID: <022ADF639A140D4790580A766237164C3A703CC7@MX101CL02.corp.emc.com>

Hello All,

Is there a way to get federation status for a particular exchange?

The command "rabbitmqctl eval 'rabbit_federation_status:status().'" gives information of available exchanges and queues. Is it possible to get information of only one exchange of interest?


Thanks
Nikunj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140925/f6073447/attachment.html>

From simon at rabbitmq.com  Thu Sep 25 12:50:21 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Sep 2014 12:50:21 +0100
Subject: [rabbitmq-discuss] Way to get federation status for a
 particular exchange
In-Reply-To: <022ADF639A140D4790580A766237164C3A703CC7@MX101CL02.corp.emc.com>
References: <022ADF639A140D4790580A766237164C3A703CC7@MX101CL02.corp.emc.com>
Message-ID: <5424017D.40100@rabbitmq.com>

On 25/09/14 06:34, Badjatya, Nikunj wrote:
> Hello All,

Hi. NB: this list is going away soon, redirecting to the new list.

> Is there a way to get federation status for a particular exchange?
>
> The command ?*rabbitmqctl eval 'rabbit_federation_status:status().'*?
> gives information of available exchanges and queues. Is it possible to
> get information of only one exchange of interest?

You can filter the list returned by rabbit_federation_status:status() 
with something like:

$ rabbitmqctl eval '[S || S <- rabbit_federation_status:status(), 
proplists:get_value(exchange, S) =:= <<"amq.topic">>].'

Obviously you can use this to filter on other keys too.

Cheers, Simon

From Nikunj.Badjatya at emc.com  Thu Sep 25 13:44:11 2014
From: Nikunj.Badjatya at emc.com (Badjatya, Nikunj)
Date: Thu, 25 Sep 2014 12:44:11 +0000
Subject: [rabbitmq-discuss] Way to get federation status for a
 particular exchange
In-Reply-To: <5424017D.40100@rabbitmq.com>
References: <022ADF639A140D4790580A766237164C3A703CC7@MX101CL02.corp.emc.com>
 <5424017D.40100@rabbitmq.com>
Message-ID: <022ADF639A140D4790580A766237164C3A70C481@MX101CL02.corp.emc.com>

Thanks, Simon.

{{{
user at server:~> sudo rabbitmqctl eval '["MyExchange" || " MyExchange " <- rabbit_federation_status:status(),proplists:get_value(exchange, " MyExchange ") =:= <<"amq.topic">>].'
[]
...done.
user at server:~>
}}}

Is this the right syntax?

I was expecting something of the sort:

{{{
user at server:~> sudo rabbitmqctl eval 'rabbit_federation_status:status().'
...
...
 [{exchange,<<"MyExchange">>},
  {vhost,<<"/">>},
  {connection,<<"myupstream">>},
  {uri,<<"amqp://128.221.252.65">>},
  {upstream_exchange,<<"MyExchange">>},
  {status,{running,<<"<rabbit at localhost.3.12017.22>">>}},
  {timestamp,{{2014,9,24},{7,23,46}}}]]
...done.
user at server:~>
}}}


Thanks
Nikunj

-----Original Message-----
From: rabbitmq-discuss [mailto:rabbitmq-discuss-bounces at lists.rabbitmq.com] On Behalf Of Simon MacMullen
Sent: Thursday, September 25, 2014 5:20 PM
To: rabbitmq-users at googlegroups.com
Cc: Legacy list about RabbitMQ
Subject: Re: [rabbitmq-discuss] Way to get federation status for a particular exchange

On 25/09/14 06:34, Badjatya, Nikunj wrote:
> Hello All,

Hi. NB: this list is going away soon, redirecting to the new list.

> Is there a way to get federation status for a particular exchange?
>
> The command "*rabbitmqctl eval 'rabbit_federation_status:status().'*"
> gives information of available exchanges and queues. Is it possible to 
> get information of only one exchange of interest?

You can filter the list returned by rabbit_federation_status:status() with something like:

$ rabbitmqctl eval '[S || S <- rabbit_federation_status:status(),
proplists:get_value(exchange, S) =:= <<"amq.topic">>].'

Obviously you can use this to filter on other keys too.

Cheers, Simon
_______________________________________________
rabbitmq-discuss mailing list has moved to https://groups.google.com/forum/#!forum/rabbitmq-users,
please subscribe to the new list!

rabbitmq-discuss at lists.rabbitmq.com
https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

From simon at rabbitmq.com  Thu Sep 25 13:49:42 2014
From: simon at rabbitmq.com (Simon MacMullen)
Date: Thu, 25 Sep 2014 13:49:42 +0100
Subject: [rabbitmq-discuss] Way to get federation status for a
 particular exchange
In-Reply-To: <022ADF639A140D4790580A766237164C3A70C481@MX101CL02.corp.emc.com>
References: <022ADF639A140D4790580A766237164C3A703CC7@MX101CL02.corp.emc.com>
 <5424017D.40100@rabbitmq.com>
 <022ADF639A140D4790580A766237164C3A70C481@MX101CL02.corp.emc.com>
Message-ID: <54240F66.7080104@rabbitmq.com>

On 25/09/14 13:44, Badjatya, Nikunj wrote:
> {{{
> user at server:~> sudo rabbitmqctl eval '["MyExchange" || " MyExchange " <- rabbit_federation_status:status(),proplists:get_value(exchange, " MyExchange ") =:= <<"amq.topic">>].'
> []
> ...done.
> user at server:~>
> }}}
>
> Is this the right syntax?

No, the 'S's in the example I posted were meant literally. The only bit 
you should replace is "amq.topic".

Cheers, Simon


