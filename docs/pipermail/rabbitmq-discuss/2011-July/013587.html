<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Issue with rabbit starting up every time
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20with%20rabbit%20starting%20up%20every%20time&In-Reply-To=%3C4E0DB897.2050500%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013585.html">
   <LINK REL="Next"  HREF="013589.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Issue with rabbit starting up every time</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20with%20rabbit%20starting%20up%20every%20time&In-Reply-To=%3C4E0DB897.2050500%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Issue with rabbit starting up every time">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Jul  1 13:07:51 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013585.html">[rabbitmq-discuss] Moving ActiveMQ to RabbitMQ
</A></li>
        <LI>Next message: <A HREF="013589.html">[rabbitmq-discuss] Issue with rabbit starting up every time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13587">[ date ]</a>
              <a href="thread.html#13587">[ thread ]</a>
              <a href="subject.html#13587">[ subject ]</a>
              <a href="author.html#13587">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris,

On 30/06/11 20:47, Chris Madden wrote:
&gt;<i> I have 2 nodes in a cluster, both are disc nodes. Occasionally,
</I>&gt;<i> following a reboot, rabbit will not start. [...]
</I> &gt; Interestingly, it seems to correct itself if I continue to restart
&gt;<i> rabbit. Sometimes it can take 15-20 attempts to get it to start
</I>&gt;<i> correctly.
</I>
Are you restarting both nodes or just one? And when you are &quot;restarting 
rabbit&quot;, are you just restarting the rabbitmq server process or 
rebooting the entire machine?

&gt;<i> I'm suspicious of
</I>&gt;<i> <A HREF="http://hg.rabbitmq.com/rabbitmq-server/file/5f84b55205fd/src/rabbit_mnesia.erl#l610,">http://hg.rabbitmq.com/rabbitmq-server/file/5f84b55205fd/src/rabbit_mnesia.erl#l610,</A>
</I>&gt;<i> with a hard coded timeout a heavily loaded system (which this is
</I>&gt;<i> definitely at boot time) may take more than 30 seconds (assuming I'm
</I>&gt;<i> reading that correctly).
</I>
We filed a bug back in 2009 to come up with something better than the 30 
second timeout. But until now we've had no evidence that it is actually 
causing problems. Yes, users have been reporting rabbit failing to start 
with a timeout_waiting_for_tables error, but in all cases I recall the 
underlying problem wasn't the timeout duration, i.e. increasing the 
timeout would simply have led to waiting for longer and then still failing.

So another thing to try would be to increase the timeout in the code and 
see whether that changes the behaviour you are seeing or merely delays 
the failure.


Regards,

Matthias.
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013585.html">[rabbitmq-discuss] Moving ActiveMQ to RabbitMQ
</A></li>
	<LI>Next message: <A HREF="013589.html">[rabbitmq-discuss] Issue with rabbit starting up every time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13587">[ date ]</a>
              <a href="thread.html#13587">[ thread ]</a>
              <a href="subject.html#13587">[ subject ]</a>
              <a href="author.html#13587">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
