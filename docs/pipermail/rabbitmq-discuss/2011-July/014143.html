<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel with exchange-exchange bindings
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20with%20exchange-exchange%20bindings&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E520208AA%40GSVCLU03.ges.ferlan.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014141.html">
   <LINK REL="Next"  HREF="014145.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel with exchange-exchange bindings</H1>
    <B>Busoli, Simone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20with%20exchange-exchange%20bindings&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E520208AA%40GSVCLU03.ges.ferlan.it%3E"
       TITLE="[rabbitmq-discuss] Shovel with exchange-exchange bindings">Simone.Busoli at ferrari.com
       </A><BR>
    <I>Mon Jul 25 10:45:09 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014141.html">[rabbitmq-discuss] [announcement] Ruby amqp gem 0.8.0.rc14 is	released
</A></li>
        <LI>Next message: <A HREF="014145.html">[rabbitmq-discuss] Shovel with exchange-exchange bindings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14143">[ date ]</a>
              <a href="thread.html#14143">[ thread ]</a>
              <a href="subject.html#14143">[ subject ]</a>
              <a href="author.html#14143">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to set up a shovel with exchange-exchange bindings to workaround the issue with infinite loops when configuring a symmetric shovel between two brokers (to achieve transparent bidirectional communication), but I get an error on broker startup as if the shovel didn't support exchange-exchange bindings.

As suggested by Matthew some time ago on the list this is what I'm trying to accomplish:

              /---------------------[ Shovel 2 ]---------------------\
              |                                                      |
              V                                                      |
---&gt;[X1]---&gt;[X2]----&gt;[[my queues]]        [[my queues]]&lt;---[X2]&lt;---[X1]&lt;---
     |                                                       ^
     |                                                       |
     \------------------[ Shovel 1 ]-------------------------/


But on broker startup I get  this:

{&quot;Kernel pid terminated&quot;,application_controller,&quot;{application_start_failure,rabbitmq_shovel,{{invalid_shovel_configuration,test1,{invalid_parameter_value,sources,{unknown_method_name,'exchange.bind'}}},{rabbit_shovel,start,[normal,[]]}}}&quot;}

Here is the configuration fragment:

{test1,
      [{sources, [{broker, &quot;<A HREF="amqp://&quot;},">amqp://&quot;},</A>
                       {declarations,
                          [	{'exchange.declare',
                                  [{exchange, &lt;&lt;&quot;X1&quot;&gt;&gt;},
                                   {type, &lt;&lt;&quot;topic&quot;&gt;&gt;}]},
		{'exchange.declare',
                                  [{exchange, &lt;&lt;&quot;X2&quot;&gt;&gt;},
                                   {type, &lt;&lt;&quot;topic&quot;&gt;&gt;}]},
		{'queue.declare',
		   [{queue, &lt;&lt;&quot;xshovelqueue&quot;&gt;&gt;}]},
                           {	'queue.bind',
                                  [{exchange, &lt;&lt;&quot;X1&quot;&gt;&gt;},
                                   {queue,    &lt;&lt;&quot;xshovelqueue&quot;&gt;&gt;},
		   {routing_key, &lt;&lt;&quot;#&quot;&gt;&gt;}]},
		{'exchange.bind',
                                  [{source, &lt;&lt;&quot;X1&quot;&gt;&gt;},
                                   {destination,    &lt;&lt;&quot;X2&quot;&gt;&gt;},
		    {routing_key, &lt;&lt;&quot;#&quot;&gt;&gt;}]}
                          ]}]},
       {destinations, [{broker, &quot;<A HREF="amqp://localhost/shovel&quot;},">amqp://localhost/shovel&quot;},</A>
                       {declarations,
                          [{'exchange.declare',
                                  [{exchange, &lt;&lt;&quot;X2&quot;&gt;&gt;},
                                   {type, &lt;&lt;&quot;topic&quot;&gt;&gt;}]}
                          ]}]},
       {queue, &lt;&lt;&quot;xshovelqueue&quot;&gt;&gt;},
       {auto_ack, false},
       {tx_size, 0}
      ]}

_________________________________________________________________________________________________________________
Questo messaggio e da intendersi esclusivamente ad uso del destinatario e puo contenere informazioni che sono di natura privilegiata, confidenziale
o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non e il destinatario designato, o il dipendente/agente responsabile
per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione e 
strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo
immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from 
disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the 
message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly 
prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from 
your system.
_________________________________________________________________________________________________________________

</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014141.html">[rabbitmq-discuss] [announcement] Ruby amqp gem 0.8.0.rc14 is	released
</A></li>
	<LI>Next message: <A HREF="014145.html">[rabbitmq-discuss] Shovel with exchange-exchange bindings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14143">[ date ]</a>
              <a href="thread.html#14143">[ thread ]</a>
              <a href="subject.html#14143">[ subject ]</a>
              <a href="author.html#14143">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
