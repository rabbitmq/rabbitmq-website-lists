<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-ha-test setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-ha-test%20setup&In-Reply-To=%3C20110729134717.GF24507%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014237.html">
   <LINK REL="Next"  HREF="014244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-ha-test setup</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-ha-test%20setup&In-Reply-To=%3C20110729134717.GF24507%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq-ha-test setup">matthew at rabbitmq.com
       </A><BR>
    <I>Fri Jul 29 14:47:17 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014237.html">[rabbitmq-discuss] rabbitmq-ha-test setup
</A></li>
        <LI>Next message: <A HREF="014244.html">[rabbitmq-discuss] rabbitmq-ha-test setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14240">[ date ]</a>
              <a href="thread.html#14240">[ thread ]</a>
              <a href="subject.html#14240">[ subject ]</a>
              <a href="author.html#14240">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jul 29, 2011 at 09:25:55AM -0400, Mark Steele wrote:
&gt;<i> Out of curiosity, does the master election occur on a per queue basis or is
</I>&gt;<i> it cluster-wide?
</I>
Per queue. And it's not really master election. It's simply a list which
is appended to when new slaves join and removed from as people die. It's
done in such a way as to ensure that when the master dies, the new
master is the most likely to have been in the same state as the old
master.

&gt;<i> Mirrored queues are great, however there is still the thorny issue of being
</I>&gt;<i> limited to the throughput of the master when you've got one queue that has
</I>&gt;<i> lots of messages in it.
</I>&gt;<i> 
</I>&gt;<i> If the election process operates on a per queue basis, then it would be
</I>&gt;<i> possible to declare multiple queues to the same exchange and effectively get
</I>&gt;<i> load balanced usage of the cluster with all the goodness of high
</I>&gt;<i> availability.
</I>
Slaves have to do almost as much work as the master, and there's much
greater communication overhead. Thus even though the design is async and
has been substantially tuned, you will find mirrored queues perform less
well than non-mirrored queues. At the end of the day, you just have to
do quite a lot more work and that'll take more time.

Matthew
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014237.html">[rabbitmq-discuss] rabbitmq-ha-test setup
</A></li>
	<LI>Next message: <A HREF="014244.html">[rabbitmq-discuss] rabbitmq-ha-test setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14240">[ date ]</a>
              <a href="thread.html#14240">[ thread ]</a>
              <a href="subject.html#14240">[ subject ]</a>
              <a href="author.html#14240">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
