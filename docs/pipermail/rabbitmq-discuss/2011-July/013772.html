<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Plugin filenames
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Plugin%20filenames&In-Reply-To=%3C5662914C-0D52-45E5-AD6A-39307AA87EF6%40exacttarget.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013776.html">
   <LINK REL="Next"  HREF="013786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Plugin filenames</H1>
    <B>Greg Swallow</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Plugin%20filenames&In-Reply-To=%3C5662914C-0D52-45E5-AD6A-39307AA87EF6%40exacttarget.com%3E"
       TITLE="[rabbitmq-discuss] Plugin filenames">gswallow at exacttarget.com
       </A><BR>
    <I>Fri Jul  8 16:17:10 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013776.html">[rabbitmq-discuss] are multiple threads per connection ok for java api?
</A></li>
        <LI>Next message: <A HREF="013786.html">[rabbitmq-discuss] Publish/subscribe in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13772">[ date ]</a>
              <a href="thread.html#13772">[ thread ]</a>
              <a href="subject.html#13772">[ subject ]</a>
              <a href="author.html#13772">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hrm. Well, there's always the almighty symlink.

On Jun 29, 2011, at 11:19 AM, Matthew Sackman wrote:

On Wed, Jun 29, 2011 at 10:28:35AM -0400, Greg Swallow wrote:
The first plugin I try to install is mochiweb.  It fails because the
mochiweb plugin is named
mochiweb-1.3-rmq2.5.0-git9a53dbd.ez&lt;<A HREF="http://www.rabbitmq.com/releases/plugins/v2.5.0/mochiweb-1.3-rmq2.5.0-git9a53dbd.ez">http://www.rabbitmq.com/releases/plugins/v2.5.0/mochiweb-1.3-rmq2.5.0-git9a53dbd.ez</A>&gt;.

I can modify my cookbook to store plugins and their filenames as a
hash.  However, could you guys consider creating predictable plugin
filenames in the future?

Ahh, but they are entirely predictable.

Things like mochiweb present a problem because to give them just the
Rabbit version is misleading. Equally we can't just use the upstream
version because in some cases we patch some upstream code. So as a
result we do -$upstream_ver-rmq$rabbit_ver-$hg_or_git$short_hash where
the hash is grabbed from hg or git, as per:

ifdef UPSTREAM_GIT
echo UPSTREAM_SHORT_HASH:=`git --git-dir=$(CLONE_DIR)/.git log -n 1 HEAD | grep commit | cut -b 8-14` &gt;$$@
endif
ifdef UPSTREAM_HG
echo UPSTREAM_SHORT_HASH:=`hg id -R $(CLONE_DIR) -i | cut -c -7` &gt;$$@
endif

This allows us to make it clear which versions of upstream projects
we're shipping, which is important for many reasons, not least of which
is the ability to identify the status of bugs uncovered and so forth.

Really, I wonder whether you might be better off trying to semantically
understand <A HREF="http://www.rabbitmq.com/plugins.html">http://www.rabbitmq.com/plugins.html</A> such that by scraping
that, you can figure out what plugins are available, and what their
dependencies are. Utterly gross, I know, but I can't think of a better
solution atm.

Matthew

ExactTarget
Greg Swallow
System Administrator
Phone | 317 524-5250
Yahoo IM | gswallow01
Email  | <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gswallow at exacttarget.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gswallow at exacttarget.com</A>&gt;



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110708/7ea04819/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110708/7ea04819/attachment.htm</A>&gt;
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013776.html">[rabbitmq-discuss] are multiple threads per connection ok for java api?
</A></li>
	<LI>Next message: <A HREF="013786.html">[rabbitmq-discuss] Publish/subscribe in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13772">[ date ]</a>
              <a href="thread.html#13772">[ thread ]</a>
              <a href="subject.html#13772">[ subject ]</a>
              <a href="author.html#13772">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
