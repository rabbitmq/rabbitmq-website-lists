<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Patching rabbitmq to get more information about	framing exceptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Patching%20rabbitmq%20to%20get%20more%20information%20about%0A%09framing%20exceptions&In-Reply-To=%3CCAE3HoVRoV19iC511vE2vFL3ifQGg_DkF37OedMwXQhyD0WMfJA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014180.html">
   <LINK REL="Next"  HREF="014051.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Patching rabbitmq to get more information about	framing exceptions</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Patching%20rabbitmq%20to%20get%20more%20information%20about%0A%09framing%20exceptions&In-Reply-To=%3CCAE3HoVRoV19iC511vE2vFL3ifQGg_DkF37OedMwXQhyD0WMfJA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Patching rabbitmq to get more information about	framing exceptions">michael.s.klishin at gmail.com
       </A><BR>
    <I>Wed Jul 20 22:30:56 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014180.html">[rabbitmq-discuss] RabbitMQ-C: amqp_simple_rpc blocks waiting	for frames already received
</A></li>
        <LI>Next message: <A HREF="014051.html">[rabbitmq-discuss] Patching rabbitmq to get more information about	framing exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14049">[ date ]</a>
              <a href="thread.html#14049">[ thread ]</a>
              <a href="subject.html#14049">[ subject ]</a>
              <a href="author.html#14049">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am investigating a rare (but nonetheless top priority) amqp gem issue when
frames are delivered out of order. Neither the Tracer tool nor Wireshark
give me
good understanding of what frame exactly RabbitMQ chokes on, it just says
&quot;expected a method frame, got a non-method frame instead&quot;.

So I am trying to patch RabbitMQ to get some more information. What's the
right way to do it? Right now I am trying to make
rabbit_command_assembler:process/2 do what I want and I am not sure how to
get a string representation of

1. Method that was delivered out of order.
2. # of the channel on which it happened
3. Ideally, 10-20 most recent frames

Can I ask someone from the RabbitMQ team help me a little bit? Where should
I be looking? Is it a good idea to make Rabbit log such
issues with more detail (it shouldn't affect hot code path performance
anyway)?

At this point I have an app that reproduces the issue roughly every other
time and I am using a Rabbit instance compiled from HEAD sources.
-- 
MK

<A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
<A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110721/49d020d1/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110721/49d020d1/attachment.htm</A>&gt;
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014180.html">[rabbitmq-discuss] RabbitMQ-C: amqp_simple_rpc blocks waiting	for frames already received
</A></li>
	<LI>Next message: <A HREF="014051.html">[rabbitmq-discuss] Patching rabbitmq to get more information about	framing exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14049">[ date ]</a>
              <a href="thread.html#14049">[ thread ]</a>
              <a href="subject.html#14049">[ subject ]</a>
              <a href="author.html#14049">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
