<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Persistent connections with Amqphp
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistent%20connections%20with%20Amqphp&In-Reply-To=%3CCAOvN6FAgUR7mpBroCAhRM9KnHwhqTV5Kaz_2kLu0rzBTwyvT6Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013728.html">
   <LINK REL="Next"  HREF="013707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Persistent connections with Amqphp</H1>
    <B>Robin Harvey</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistent%20connections%20with%20Amqphp&In-Reply-To=%3CCAOvN6FAgUR7mpBroCAhRM9KnHwhqTV5Kaz_2kLu0rzBTwyvT6Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Persistent connections with Amqphp">harvey.robin at gmail.com
       </A><BR>
    <I>Thu Jul  7 19:55:10 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013728.html">[rabbitmq-discuss] Persistent connections with Amqphp
</A></li>
        <LI>Next message: <A HREF="013707.html">[rabbitmq-discuss] rabbitmq-c: amqp_exchange_declare() always sets	auto-delete to no
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13741">[ date ]</a>
              <a href="thread.html#13741">[ thread ]</a>
              <a href="subject.html#13741">[ subject ]</a>
              <a href="author.html#13741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> I don't think there is a workaround. Maybe there is a atexit(3)
</I>&gt;<i> equivalent in php?
</I>&gt;<i>
</I>Not that I know of.


It should be fine as far as the TCP/IP connection is intact.  But don't use
&gt;<i> AMQP heartbeats :)
</I>&gt;<i>
</I>Yes, heartbeats do screw things up!  I'll have to remember to note that in
the docs.

Thanks,
--Robin




On Thu, Jul 7, 2011 at 1:46 PM, Marek Majkowski &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt; wrote:

&gt;<i> On Wed, Jul 6, 2011 at 19:24, Robin Harvey &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">harvey.robin at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; A couple of people recently asked about support for persistent
</I>&gt;<i> connections,
</I>&gt;<i> &gt; after a bit of hacking around I've uploaded an update which has basic
</I>&gt;<i> &gt; persistent connection support: <A HREF="https://github.com/BraveSirRobin/amqphp">https://github.com/BraveSirRobin/amqphp</A>
</I>&gt;<i> &gt; (check the 0.9.1 tag)
</I>&gt;<i>
</I>&gt;<i> Nice!
</I>&gt;<i>
</I>&gt;<i> &gt; I'd be interested to hear what the RabbitMQ people think about the likely
</I>&gt;<i> &gt; behavior of PHP &quot;persistent connections&quot;, which may include:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  * If the web server is restarted, all open client connections are
</I>&gt;<i> dropped
</I>&gt;<i> &gt; without going through the amqp shutdown sequence, so you get lots of
</I>&gt;<i> &quot;closed
</I>&gt;<i> &gt; abruptly&quot; errors in the log.
</I>&gt;<i>
</I>&gt;<i> I don't think there is a workaround. Maybe there is a atexit(3)
</I>&gt;<i> equivalent in php?
</I>&gt;<i>
</I>&gt;<i> &gt;  * If a web server has no web requests to process then the persistent
</I>&gt;<i> client
</I>&gt;<i> &gt; can't respond to any messages the broker sends; the client will &quot;go
</I>&gt;<i> quiet&quot;.
</I>&gt;<i>
</I>&gt;<i> It should be fine as far as the TCP/IP connection is intact.  But don't use
</I>&gt;<i> AMQP heartbeats :)
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>   Marek
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110707/4d405f92/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110707/4d405f92/attachment.htm</A>&gt;
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013728.html">[rabbitmq-discuss] Persistent connections with Amqphp
</A></li>
	<LI>Next message: <A HREF="013707.html">[rabbitmq-discuss] rabbitmq-c: amqp_exchange_declare() always sets	auto-delete to no
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13741">[ date ]</a>
              <a href="thread.html#13741">[ thread ]</a>
              <a href="subject.html#13741">[ subject ]</a>
              <a href="author.html#13741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
