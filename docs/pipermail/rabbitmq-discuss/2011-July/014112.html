<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika blocking receive does not block
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20blocking%20receive%20does%20not%20block&In-Reply-To=%3CCAK27CLqM22Kd%3DMXoF6x%2Bcqye8SJOoxObKmv8%3Dz%3DD_rc5Fvg2gA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014184.html">
   <LINK REL="Next"  HREF="014113.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika blocking receive does not block</H1>
    <B>Jim Irrer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20blocking%20receive%20does%20not%20block&In-Reply-To=%3CCAK27CLqM22Kd%3DMXoF6x%2Bcqye8SJOoxObKmv8%3Dz%3DD_rc5Fvg2gA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Pika blocking receive does not block">irrer at umich.edu
       </A><BR>
    <I>Fri Jul 22 19:12:29 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014184.html">[rabbitmq-discuss] Are there any unused delivery tag values?
</A></li>
        <LI>Next message: <A HREF="014113.html">[rabbitmq-discuss]  RabbitMQ integration with websphere
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14112">[ date ]</a>
              <a href="thread.html#14112">[ thread ]</a>
              <a href="subject.html#14112">[ subject ]</a>
              <a href="author.html#14112">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi -

I'm trying to implement a blocking client that does an RPC style call to a
server and get a result.  Currently my client sends a message that the
server
receives, and then the client immediately checks for a response using
basic_consume.  The basic_consume method is executed before the
server can respond, and returns without getting a result.

If I add a 'sleep' before the basic_consume, everything works fine, but
that is a poor solution.  I want to block until there is something on the
queue to read.

outline of the code:

use channel.queue_declare to declare the reply queue

use queue_bind to bind the reply queue to a unique string

call basic_consume to set up the reply queue handler (I thought that this
would block but it does not)

use basic_publish to send a message to the server, with the reply_to
property set to the unique string

sleep long enough for server to process message (do not want to do this, but
if I don't then I get no reply)

call basic_get (not sure why, but it makes things work)


I have some holes in my understanding, but to not know how to make the
program wait until there is something on the queue and then read it.

Thanks for any hints,

- Jim

Jim Irrer     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>       (734) 647-4409
University of Michigan Hospital Radiation Oncology
519 W. William St.             Ann Arbor, MI 48103
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110722/29da51b3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110722/29da51b3/attachment.htm</A>&gt;
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014184.html">[rabbitmq-discuss] Are there any unused delivery tag values?
</A></li>
	<LI>Next message: <A HREF="014113.html">[rabbitmq-discuss]  RabbitMQ integration with websphere
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14112">[ date ]</a>
              <a href="thread.html#14112">[ thread ]</a>
              <a href="subject.html#14112">[ subject ]</a>
              <a href="author.html#14112">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
