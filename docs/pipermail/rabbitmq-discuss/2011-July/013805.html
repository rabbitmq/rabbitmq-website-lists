<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ won't start on RHEL 6.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20won%27t%20start%20on%20RHEL%206.1&In-Reply-To=%3Cfdbdc8fe-645f-4c80-a6f3-897eca33c594%40r2g2000vbj.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013802.html">
   <LINK REL="Next"  HREF="013806.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ won't start on RHEL 6.1</H1>
    <B>Dana Rea</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20won%27t%20start%20on%20RHEL%206.1&In-Reply-To=%3Cfdbdc8fe-645f-4c80-a6f3-897eca33c594%40r2g2000vbj.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ won't start on RHEL 6.1">danarea at gmail.com
       </A><BR>
    <I>Sat Jul  9 22:15:39 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013802.html">[rabbitmq-discuss] Quick question: Writing to multiple queues
</A></li>
        <LI>Next message: <A HREF="013806.html">[rabbitmq-discuss] RabbitMQ won't start on RHEL 6.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13805">[ date ]</a>
              <a href="thread.html#13805">[ thread ]</a>
              <a href="subject.html#13805">[ subject ]</a>
              <a href="author.html#13805">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When starting rabbit, the network start fails (messages below). From
the messages, it seems like rabbit and epmd are both trying to connect
on 5672 since there's an 'eaddrinuse' message in the log file.

I installed RabbitMQ and Erlang using Fedora's EPEL 6 repo. Rabbit is
version 2.1.1 and Erlang is R14B.

Startup Messages:

Activating RabbitMQ plugins ...
*WARNING* Undefined function fdsrv:bind_socket/2
*WARNING* Undefined function fdsrv:start/0
*WARNING* Undefined function fdsrv:stop/0
*WARNING* Undefined function webmachine_resource:start_link/2
8 plugins activated:
* amqp_client-2.1.1
* erlang_smtp-0.0
* mochiweb-1.4.1
* rabbit_stomp-2.1.1
* rabbit_management-2.1.1
* rabbit_mochiweb-2.1.1
* rabbitmq_smtp_server-2.1.1
* webmachine-1.7.0


+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.1.1  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2010 LShift Ltd., Cohesive Financial Technologies
LLC., and Rabbit Technologies Ltd.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at srv6</A>
app descriptor : /usr/lib/rabbitmq/lib/rabbitmq_server-2.1.1/sbin/../
ebin/rabbit.app
home dir       : /var/lib/rabbitmq
cookie hash    : LohMTiS/RBnxf/P8CT1n0A==
log            : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at srv6.log</A>
sasl log       : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at srv6-sasl.log</A>
database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at srv6</A>
erlang version : 5.8.1

starting file handle cache
server                                     ...done
starting worker
pool                                                  ...done
starting
database                                                     ...done
starting codec correctness
check                                      ...done
-- external infrastructure ready
starting exchange type
registry                                       ...done
starting exchange type
topic                                          ...done
starting exchange type
headers                                        ...done
starting exchange type
fanout                                         ...done
starting exchange type
direct                                         ...done
starting statistics event
manager                                     ...done
starting logging
server                                               ...done
-- kernel ready
starting alarm
handler                                                ...done
starting node
monitor                                                 ...done
starting cluster
delegate                                             ...done
starting guid
generator                                               ...done
starting memory
monitor                                               ...done
-- core initialized
starting empty DB
check                                               ...done
starting exchange
recovery                                            ...done
starting management statistics
database                               ...done
starting queue supervisor and queue
recovery                          ...done
-- message delivery logic ready
starting error log
relay                                              ...done
starting
networking                                                   ...BOOT
ERROR: FAILED
Reason: {{badmatch,
             {error,
                 {shutdown,
 
{child,undefined,'rabbit_tcp_listener_sup_0.0.0.0:5672',
                         {tcp_listener_sup,start_link,
                             [{0,0,0,0},
                              5672,
                              [binary,
                               {packet,raw},
                               {reuseaddr,true},
                               {backlog,128},
                               {exit_on_close,false}],
                              {rabbit_networking,tcp_listener_started,
[]},
                              {rabbit_networking,tcp_listener_stopped,
[]},
                              {rabbit_networking,start_client,[]},
                              &quot;TCP Listener&quot;]},
                         transient,infinity,supervisor,
                         [tcp_listener_sup]}}}},
         [{rabbit_networking,start_listener,4},
          {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1},
          {rabbit_networking,boot_tcp,0},
          {rabbit_networking,boot,0},
          {rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
          {rabbit,run_boot_step,1},
          {rabbit,'-start/2-lc$^0/1-0-',1},
          {rabbit,start,2}]}
Erlang has closed
{&quot;Kernel pid
terminated&quot;,application_controller,&quot;{application_start_failure,rabbit,
{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',
{rabbit,failure_during_boot}}}}}&quot;}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller)
({application_start_failure,rabbit,{bad_return,{{rabbit,start,[normal,
[]]},{'EXIT',{rabbit,failure_during_boot}}}}})

Log:


=INFO REPORT==== 9-Jul-2011::17:11:50 ===
Limiting to approx 924 file handles (829 sockets)

=INFO REPORT==== 9-Jul-2011::17:11:50 ===
Memory limit set to 12844MB.

=INFO REPORT==== 9-Jul-2011::17:11:50 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 9-Jul-2011::17:11:50 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide
index

=ERROR REPORT==== 9-Jul-2011::17:11:50 ===
failed to start TCP Listener on 0.0.0.0:5672 - eaddrinuse

=ERROR REPORT==== 9-Jul-2011::17:11:50 ===
FAILED
Reason: {{badmatch,
             {error,
                 {shutdown,
 
{child,undefined,'rabbit_tcp_listener_sup_0.0.0.0:5672',
                         {tcp_listener_sup,start_link,
                             [{0,0,0,0},
                              5672,
                              [binary,
                               {packet,raw},
                               {reuseaddr,true},
                               {backlog,128},
                               {exit_on_close,false}],
                              {rabbit_networking,tcp_listener_started,
[]},
                              {rabbit_networking,tcp_listener_stopped,
[]},
                              {rabbit_networking,start_client,[]},
                              &quot;TCP Listener&quot;]},
                         transient,infinity,supervisor,
                         [tcp_listener_sup]}}}},
         [{rabbit_networking,start_listener,4},
          {rabbit_networking,'-boot_tcp/0-lc$^0/1-0-',1},
          {rabbit_networking,boot_tcp,0},
          {rabbit_networking,boot,0},
          {rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
          {rabbit,run_boot_step,1},
          {rabbit,'-start/2-lc$^0/1-0-',1},
          {rabbit,start,2}]}

=INFO REPORT==== 9-Jul-2011::17:11:51 ===
    application: rabbit
    exited: {bad_return,{{rabbit,start,[normal,[]]},
                         {'EXIT',{rabbit,failure_during_boot}}}}
    type: permanent
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013802.html">[rabbitmq-discuss] Quick question: Writing to multiple queues
</A></li>
	<LI>Next message: <A HREF="013806.html">[rabbitmq-discuss] RabbitMQ won't start on RHEL 6.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13805">[ date ]</a>
              <a href="thread.html#13805">[ thread ]</a>
              <a href="subject.html#13805">[ subject ]</a>
              <a href="author.html#13805">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
