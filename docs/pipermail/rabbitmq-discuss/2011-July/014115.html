<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika blocking receive does not block
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20blocking%20receive%20does%20not%20block&In-Reply-To=%3CCAK27CLrAuAQgUtX0xnSGBzYuXGwdPWeRERSfXYwUpptKcEFHWA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014210.html">
   <LINK REL="Next"  HREF="014116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika blocking receive does not block</H1>
    <B>Jim Irrer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20blocking%20receive%20does%20not%20block&In-Reply-To=%3CCAK27CLrAuAQgUtX0xnSGBzYuXGwdPWeRERSfXYwUpptKcEFHWA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Pika blocking receive does not block">irrer at umich.edu
       </A><BR>
    <I>Fri Jul 22 21:15:51 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014210.html">[rabbitmq-discuss] RabbitMQ integration with websphere
</A></li>
        <LI>Next message: <A HREF="014116.html">[rabbitmq-discuss] Reading messages without acking them
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14115">[ date ]</a>
              <a href="thread.html#14115">[ thread ]</a>
              <a href="subject.html#14115">[ subject ]</a>
              <a href="author.html#14115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Excellent!  Problem solved.

Many thanks,

- Jim

Jim Irrer     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>       (734) 647-4409
University of Michigan Hospital Radiation Oncology
519 W. William St.             Ann Arbor, MI 48103


2011/7/22 Rapha&#235;l De GIUSTI &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">raphael.degiusti at guardis.com</A>&gt;

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> You should try the start_consuming() method. See the example on github :
</I>&gt;<i> <A HREF="https://github.com/pika/pika/blob/master/examples/blocking/demo_receive.py">https://github.com/pika/pika/blob/master/examples/blocking/demo_receive.py</A>
</I>&gt;<i>
</I>&gt;<i> Raph
</I>&gt;<i>
</I>&gt;<i> On Fri, Jul 22, 2011 at 8:12 PM, Jim Irrer &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi -
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm trying to implement a blocking client that does an RPC style call to a
</I>&gt;&gt;<i> server and get a result.  Currently my client sends a message that the
</I>&gt;&gt;<i> server
</I>&gt;&gt;<i> receives, and then the client immediately checks for a response using
</I>&gt;&gt;<i> basic_consume.  The basic_consume method is executed before the
</I>&gt;&gt;<i> server can respond, and returns without getting a result.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If I add a 'sleep' before the basic_consume, everything works fine, but
</I>&gt;&gt;<i> that is a poor solution.  I want to block until there is something on the
</I>&gt;&gt;<i> queue to read.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> outline of the code:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> use channel.queue_declare to declare the reply queue
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> use queue_bind to bind the reply queue to a unique string
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> call basic_consume to set up the reply queue handler (I thought that this
</I>&gt;&gt;<i> would block but it does not)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> use basic_publish to send a message to the server, with the reply_to
</I>&gt;&gt;<i> property set to the unique string
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> sleep long enough for server to process message (do not want to do this,
</I>&gt;&gt;<i> but if I don't then I get no reply)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> call basic_get (not sure why, but it makes things work)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have some holes in my understanding, but to not know how to make the
</I>&gt;&gt;<i> program wait until there is something on the queue and then read it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for any hints,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - Jim
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jim Irrer     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>       (734) 647-4409
</I>&gt;&gt;<i> University of Michigan Hospital Radiation Oncology
</I>&gt;&gt;<i> 519 W. William St.             Ann Arbor, MI 48103
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110722/6fe4fac6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110722/6fe4fac6/attachment.htm</A>&gt;
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014210.html">[rabbitmq-discuss] RabbitMQ integration with websphere
</A></li>
	<LI>Next message: <A HREF="014116.html">[rabbitmq-discuss] Reading messages without acking them
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14115">[ date ]</a>
              <a href="thread.html#14115">[ thread ]</a>
              <a href="subject.html#14115">[ subject ]</a>
              <a href="author.html#14115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
