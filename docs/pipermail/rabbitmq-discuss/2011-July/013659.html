<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq_auth_mechanism_ssl%20limitations&In-Reply-To=%3C083D5377F8EC294D884D590409EFE70D71E79CCBCD%40MAIL02.austin.utexas.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013655.html">
   <LINK REL="Next"  HREF="013661.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations</H1>
    <B>Warren Smith</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq_auth_mechanism_ssl%20limitations&In-Reply-To=%3C083D5377F8EC294D884D590409EFE70D71E79CCBCD%40MAIL02.austin.utexas.edu%3E"
       TITLE="[rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations">wsmith at tacc.utexas.edu
       </A><BR>
    <I>Tue Jul  5 14:40:32 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013655.html">[rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations
</A></li>
        <LI>Next message: <A HREF="013661.html">[rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13659">[ date ]</a>
              <a href="thread.html#13659">[ thread ]</a>
              <a href="subject.html#13659">[ subject ]</a>
              <a href="author.html#13659">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I actually ended up tweaking the rabbitmq_auth_mechanism_ssl to do exactly this. In my situation, there are 100s of users of our overall infrastructure and they get their certificates from multiple certificate authorities, so it is quite possible for 2 different users to have the same CN.

All I ended up doing to the DN is removing the quotes and calling the result the RabbitMQ username. I can handle escaping the spaces in the DN, but Erlang seems to put quotes in different places than openssl and that would have made it difficult to automate things.

This has been working fine so far, but I'm still in the prototype stage so I only have a handful of users added. The usernames are quite long, but I don't think this will be a big deal for me since I can script a lot of the user management.


Warren


-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Simon MacMullen
Sent: Tuesday, July 05, 2011 8:18 AM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations

On 05/07/11 14:01, Massimo Paladin wrote:
&gt;<i> This looks like limiting to certificates with only one and unique CN. Am
</I>&gt;<i> I wrong?
</I>
Yes, that's correct.

A future enhancement could be to allow rabbitmq_auth_mechanism_ssl to 
use the DN instead - after all, that's really what it's for.

However, the (substantial) speedbump here is that RabbitMQ requires each 
user to have a user name, and each user name to be a string (I really 
wouldn't want to change that, implications would be far-reaching). But a 
DN isn't a string, it's an ASN.1 mess. And while there are a bunch of 
ways to convert that to a string, there's no good *canonical* way of 
doing it that I'm aware of.

But I'm not a great expert in x509 / ASN.1. I don't know if you are or 
not :) but what would you do?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013655.html">[rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations
</A></li>
	<LI>Next message: <A HREF="013661.html">[rabbitmq-discuss] rabbitmq_auth_mechanism_ssl limitations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13659">[ date ]</a>
              <a href="thread.html#13659">[ thread ]</a>
              <a href="subject.html#13659">[ subject ]</a>
              <a href="author.html#13659">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
