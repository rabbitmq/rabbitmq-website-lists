<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ crash in production - help diagnose from log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20crash%20in%20production%20-%20help%20diagnose%0A%20from%20log&In-Reply-To=%3C4E0F0B67.3020408%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013615.html">
   <LINK REL="Next"  HREF="013679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ crash in production - help diagnose from log</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20crash%20in%20production%20-%20help%20diagnose%0A%20from%20log&In-Reply-To=%3C4E0F0B67.3020408%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ crash in production - help diagnose from log">matthias at rabbitmq.com
       </A><BR>
    <I>Sat Jul  2 13:13:27 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013615.html">[rabbitmq-discuss] RabbitMQ crash in production - help diagnose	from log
</A></li>
        <LI>Next message: <A HREF="013679.html">[rabbitmq-discuss] RabbitMQ crash in production - help diagnose from log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13616">[ date ]</a>
              <a href="thread.html#13616">[ thread ]</a>
              <a href="subject.html#13616">[ subject ]</a>
              <a href="author.html#13616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bryan,

On 02/07/11 02:56, Bryan Alves wrote:
&gt;<i> A production instance of RabbitMQ crashed on us yesterday, and we have
</I>&gt;<i> no idea why.  RabbitMQ 2.3.1 &amp; Erlang R14B01
</I>
Is that the first time it happened? And for how long had that rabbit 
been running when it perished?

&gt;<i> Attached is the SASL log and erl_crash.dump file.
</I>
Thanks. It looks like the crash might be triggered by a rare race 
condition. The message store gc is trying to combine two files, one of 
which appears to have vanished from its index. It should be impossible 
to end up in that situation. Nothing obvious jumps out at me from the 
code, so this may take a while to track down.

&gt;<i> Any advice about what could  have caused the crashed and how to avoid it
</I>&gt;<i> in the future would be appreciated.
</I>
I suggest you upgrade to 2.5.1. There have been some changes in that 
area of the code, though nothing specifically related to the above. So I 
doubt the problem will go away with 2.5.1, but it would help to find out 
for sure.

Thanks for bringing this problem to our attention.

Regards,

Matthias.
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013615.html">[rabbitmq-discuss] RabbitMQ crash in production - help diagnose	from log
</A></li>
	<LI>Next message: <A HREF="013679.html">[rabbitmq-discuss] RabbitMQ crash in production - help diagnose from log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13616">[ date ]</a>
              <a href="thread.html#13616">[ thread ]</a>
              <a href="subject.html#13616">[ subject ]</a>
              <a href="author.html#13616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
