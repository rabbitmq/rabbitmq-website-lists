<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message payload encoding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20payload%20encoding&In-Reply-To=%3CAC22A5D6-03C9-41C3-85A0-4334D611D2A9%40ohler.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014252.html">
   <LINK REL="Next"  HREF="014255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message payload encoding</H1>
    <B>Peter Ohler</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20payload%20encoding&In-Reply-To=%3CAC22A5D6-03C9-41C3-85A0-4334D611D2A9%40ohler.com%3E"
       TITLE="[rabbitmq-discuss] Message payload encoding">peter at ohler.com
       </A><BR>
    <I>Sat Jul 30 03:12:25 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014252.html">[rabbitmq-discuss] Message payload encoding
</A></li>
        <LI>Next message: <A HREF="014255.html">[rabbitmq-discuss] single broker and queue scalability question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14256">[ date ]</a>
              <a href="thread.html#14256">[ thread ]</a>
              <a href="subject.html#14256">[ subject ]</a>
              <a href="author.html#14256">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you don't mind I will take a shot at that one.

There are a few consideration that should be looked at. It is often the case that message size is not the most significant factor in performance, especially if the message size is small. Consider what it is you are sending. If it is a UTF-8 string then sending the string directly takes no preparation and is smaller than base64 encoding which also incurs and overhead in serialization and deserialization.

If what you are sending is an Java, Python, or Ruby object then there will be significant overhead in the serialization itself. For Ruby I wrote a fast object to XML serializer (Ox gem) that is much faster than the native Marshal encoding and that alone improved performance of our systems significantly.

Something else worth considering besides is how difficult it will be to debug and trace message exchanges. A binary format or base64 requires extra decoding to see what is in the body of a message while UTF-8 strings or XML can be viewed and understood directly. That is a real time saver during development and even in production when trying to fix a problem quickly.

-Pete

On Jul 30, 2011, at 3:00 AM, Helena Edelson wrote:

&gt;<i> Is there a preference, as in performance or other reason (please specify if so) for a message payload to be encoded for Rabbit as UTF-8 or base64?
</I>&gt;<i> I have been doing UTF-8; just curious. 
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Helena  
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014252.html">[rabbitmq-discuss] Message payload encoding
</A></li>
	<LI>Next message: <A HREF="014255.html">[rabbitmq-discuss] single broker and queue scalability question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14256">[ date ]</a>
              <a href="thread.html#14256">[ thread ]</a>
              <a href="subject.html#14256">[ subject ]</a>
              <a href="author.html#14256">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
