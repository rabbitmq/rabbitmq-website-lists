<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMq not honouring	high_watermark	setting?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMq%20not%20honouring%0A%09high_watermark%09setting%3F&In-Reply-To=%3C1056279598.130171.1310578983818.JavaMail.root%40zimbra-prod-mbox-4.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013869.html">
   <LINK REL="Next"  HREF="013879.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMq not honouring	high_watermark	setting?</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMq%20not%20honouring%0A%09high_watermark%09setting%3F&In-Reply-To=%3C1056279598.130171.1310578983818.JavaMail.root%40zimbra-prod-mbox-4.vmware.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMq not honouring	high_watermark	setting?">jerryk at vmware.com
       </A><BR>
    <I>Wed Jul 13 18:43:03 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013869.html">[rabbitmq-discuss] RabbitMq not honouring high_watermark	setting?
</A></li>
        <LI>Next message: <A HREF="013879.html">[rabbitmq-discuss] Problem starting RabbitMQ 2.4.1 on Ubuntu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13875">[ date ]</a>
              <a href="thread.html#13875">[ thread ]</a>
              <a href="subject.html#13875">[ subject ]</a>
              <a href="author.html#13875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You'll want to be mindful when bumping up against hard memory limits.  Erlang's garbage collector may exhibit ephemeral surges in its hunger for memory during copying phases, and those can be fatal in small heap environments as one is limited to on Windows with the 32-bit Erlang limitations that Emile and Simon have mentioned earlier in the thread...

Best regards,
Jerry

----- Original Message -----
From: &quot;Dan B&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">danbarua at gmail.com</A>&gt;
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Wednesday, July 13, 2011 5:27:07 AM
Subject: Re: [rabbitmq-discuss] RabbitMq not honouring high_watermark	setting?

Can I safely set Rabbit to hoover up 100% of the memory that's
available to Erlang under windows?

Thanks

-Dan

On Jul 13, 1:04&#160;pm, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">em... at rabbitmq.com</A>&gt; wrote:
&gt;<i> On 13/07/11 12:55, Dan B wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I should have RTFM a bit more thoroughly.
</I>&gt;<i>
</I>&gt;<i> &gt;&gt;&gt; Thus when RabbitMQ can't recognize your platform, if you actually have 8GB RAM
</I>&gt;<i> &gt;&gt;&gt; installed and you want RabbitMQ to throttle producers when the server is using
</I>&gt;<i> &gt;&gt;&gt; above 3GB, set vm_memory_high_watermark to 3
</I>&gt;<i>
</I>&gt;<i> &gt; On my server, vm_memory_high_watermark = n results in a watermark of
</I>&gt;<i> &gt; 2n for some reason. I've set it to 1.5 (3gb), I'm not sure if Rabbit
</I>&gt;<i> &gt; can access all of that though, probably not.
</I>&gt;<i>
</I>&gt;<i> You are certain to run out of memory at some point if you do that.
</I>&gt;<i> Unfortunately the Windows Erlang VM is 32bit and limited to 2Gb. Some
</I>&gt;<i> versions of Windows support an alternative memory model that may allow a
</I>&gt;<i> suitably patched Erlang VM access to slightly more memory, but I don't
</I>&gt;<i> know of anyone succeeding in making it work:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://support.microsoft.com/default.aspx?scid=kb%3BEN-US%3B297812">http://support.microsoft.com/default.aspx?scid=kb%3BEN-US%3B297812</A>
</I>&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I>_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013869.html">[rabbitmq-discuss] RabbitMq not honouring high_watermark	setting?
</A></li>
	<LI>Next message: <A HREF="013879.html">[rabbitmq-discuss] Problem starting RabbitMQ 2.4.1 on Ubuntu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13875">[ date ]</a>
              <a href="thread.html#13875">[ thread ]</a>
              <a href="subject.html#13875">[ subject ]</a>
              <a href="author.html#13875">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
