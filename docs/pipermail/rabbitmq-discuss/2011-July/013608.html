<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] First Python sample (send.py) gives error: AttributeError: 'ProtocolHeader' object has no attribute 'channel_number'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20First%20Python%20sample%20%28send.py%29%20gives%20error%3A%0A%20AttributeError%3A%20%27ProtocolHeader%27%20object%20has%20no%20attribute%20%27channel_number%27&In-Reply-To=%3CCA335EA0.8171%25mpietrek%40skytap.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013605.html">
   <LINK REL="Next"  HREF="013609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] First Python sample (send.py) gives error: AttributeError: 'ProtocolHeader' object has no attribute 'channel_number'</H1>
    <B>Matt Pietrek</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20First%20Python%20sample%20%28send.py%29%20gives%20error%3A%0A%20AttributeError%3A%20%27ProtocolHeader%27%20object%20has%20no%20attribute%20%27channel_number%27&In-Reply-To=%3CCA335EA0.8171%25mpietrek%40skytap.com%3E"
       TITLE="[rabbitmq-discuss] First Python sample (send.py) gives error: AttributeError: 'ProtocolHeader' object has no attribute 'channel_number'">mpietrek at skytap.com
       </A><BR>
    <I>Fri Jul  1 19:26:46 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013605.html">[rabbitmq-discuss] First Python sample (send.py) gives error: AttributeError: 'ProtocolHeader' object has no attribute 'channel_number'
</A></li>
        <LI>Next message: <A HREF="013609.html">[rabbitmq-discuss] First Python sample (send.py) gives error: AttributeError: 'ProtocolHeader' object has no attribute 'channel_number'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13608">[ date ]</a>
              <a href="thread.html#13608">[ thread ]</a>
              <a href="subject.html#13608">[ subject ]</a>
              <a href="author.html#13608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmm.. Perhaps it is an old version (1.7.2?). However, not sure how I got
it, given that I installed just yesterday. To be sure, I ran the
following, which does not seem to get me the latest:

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">foo at foo</A>:~$ sudo apt-get update
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security Release.gpg
Ign <A HREF="http://security.ubuntu.com/ubuntu/">http://security.ubuntu.com/ubuntu/</A> lucid-security/main
Translation-en_US
Ign <A HREF="http://security.ubuntu.com/ubuntu/">http://security.ubuntu.com/ubuntu/</A> lucid-security/restricted
Translation-en_US
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid Release.gpg
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid/main Translation-en_US
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid/restricted Translation-en_US
Ign <A HREF="http://security.ubuntu.com/ubuntu/">http://security.ubuntu.com/ubuntu/</A> lucid-security/universe
Translation-en_US
Ign <A HREF="http://security.ubuntu.com/ubuntu/">http://security.ubuntu.com/ubuntu/</A> lucid-security/multiverse
Translation-en_US
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security Release
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid/universe Translation-en_US
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid/multiverse Translation-en_US
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates Release.gpg
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid-updates/main
Translation-en_US
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid-updates/restricted
Translation-en_US
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid-updates/universe
Translation-en_US
Ign <A HREF="http://us.archive.ubuntu.com/ubuntu/">http://us.archive.ubuntu.com/ubuntu/</A> lucid-updates/multiverse
Translation-en_US
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid Release
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates Release
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/main Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/main Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/restricted Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/main Sources
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/restricted Sources
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/universe Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/universe Sources
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/restricted Packages
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/main Sources
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/restricted Sources
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/universe Packages
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/universe Sources
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/multiverse Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/multiverse Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid/multiverse Sources
Hit <A HREF="http://security.ubuntu.com">http://security.ubuntu.com</A> lucid-security/multiverse Sources
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/main Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/restricted Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/main Sources
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/restricted Sources
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/universe Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/universe Sources
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/multiverse Packages
Hit <A HREF="http://us.archive.ubuntu.com">http://us.archive.ubuntu.com</A> lucid-updates/multiverse Sources
Reading package lists... Done

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">highland at highland-desktop</A>:~$ apt-show-versions | grep rabbitmq
rabbitmq-server/lucid uptodate 1.7.2-1ubuntu1

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">highland at highland-desktop</A>:~$ sudo apt-get install rabbitmq-server
Reading package lists... Done
Building dependency tree
Reading state information... Done
rabbitmq-server is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 278 not upgraded.
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">highland at highland-desktop</A>:~$


I'm going to try explicitly attaching to the RabbitMQ APT, per the
directions, but I'd think the standard Ubuntu repositories would be up to
date. Either that, or I'm overlooking something beyond my current Linux
skills.



On 7/1/11 10:48 AM, &quot;Marek Majkowski&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt; wrote:

&gt;<i>Right,
</I>&gt;<i>
</I>&gt;<i>Google says it may be due to an outdated version of RabbitMQ.
</I>&gt;<i>
</I>&gt;<i>Can you make sure you're using RabbitMQ &gt; 2.0 ?
</I>&gt;<i>
</I>&gt;<i>Explanation: rabbitmq &lt; 2.0 spoke AMQP 0-8,
</I>&gt;<i>recent pika and recent RabbitMQ speak AMQP 0-9-1.
</I>&gt;<i>
</I>&gt;<i>Cheers,
</I>&gt;<i>  Marek
</I>&gt;<i>
</I>&gt;<i>On Fri, Jul 1, 2011 at 18:14, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>&gt; wrote:
</I>&gt;&gt;<i> Mark,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for getting back to me.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes, I installed it exactly as specified on the tutorial page. I
</I>&gt;&gt;<i> copied/pasted the command line.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Just to be sure, I ran it again and got this output:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">foo at foo</A>:~$ sudo pip install -e
</I>&gt;&gt;<i> git+<A HREF="http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5">http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5</A>
</I>&gt;&gt;<i> Checking out pika-v0.9.5 from
</I>&gt;&gt;<i> git+<A HREF="http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5">http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5</A> checkout from
</I>&gt;&gt;<i> git+<A HREF="http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5">http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5</A>
</I>&gt;&gt;<i>  Cloning <A HREF="http://github.com/pika/pika.git">http://github.com/pika/pika.git</A> (to revision v0.9.5) to
</I>&gt;&gt;<i> ./src/pika-v0.9.5
</I>&gt;&gt;<i>  Running setup.py egg_info for package pika-v0.9.5
</I>&gt;&gt;<i> Installing collected packages: pika-v0.9.5
</I>&gt;&gt;<i>  Running setup.py develop for pika-v0.9.5
</I>&gt;&gt;<i>    Creating /usr/local/lib/python2.6/dist-packages/pika.egg-link (link
</I>&gt;&gt;<i>to
</I>&gt;&gt;<i> .)
</I>&gt;&gt;<i>    Adding pika 0.9.5 to easy-install.pth file
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    Installed /home/highland/src/pika-v0.9.5
</I>&gt;&gt;<i> Successfully installed pika-v0.9.5
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 7/1/11 3:22 AM, &quot;Marek Majkowski&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Matt,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Looks like you have a wrong version of pika.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Are you sure you have pika 0.9.5 exactly?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Have you installed it as suggested on the tutorial page, using pip:
</I>&gt;&gt;&gt;<i>   pip install -e
</I>&gt;&gt;&gt;<i>git+<A HREF="http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5">http://github.com/pika/pika.git@v0.9.5#egg=pika-v0.9.5</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Cheers!
</I>&gt;&gt;&gt;<i>  Marek
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>On Thu, Jun 30, 2011 at 23:13, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> I've just now followed the directions verbatim from
</I>&gt;&gt;&gt;&gt;<i> here: <A HREF="http://www.rabbitmq.com/tutorials/tutorial-one-python.html">http://www.rabbitmq.com/tutorials/tutorial-one-python.html</A>
</I>&gt;&gt;&gt;&gt;<i> I've copied/pasted the sample code for send.py and receive.py directly
</I>&gt;&gt;&gt;&gt;<i>from
</I>&gt;&gt;&gt;&gt;<i> the web page so as to eliminate errors. Unfortunately, I'm getting the
</I>&gt;&gt;&gt;&gt;<i> following error:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">foo at foo-desktop</A>:~/rabbitmq-test$ python send.py
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Traceback (most recent call last):
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File &quot;send.py&quot;, line 4, in &lt;module&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     connection =
</I>&gt;&gt;&gt;&gt;<i> pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File 
</I>&gt;&gt;&gt;&gt;<i>&quot;/home/foo/src/pika-v0.9.5/pika/adapters/blocking_connection.py&quot;,
</I>&gt;&gt;&gt;&gt;<i> line 32, in __init__
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     BaseConnection.__init__(self, parameters, None,
</I>&gt;&gt;&gt;&gt;<i>reconnection_strategy)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File &quot;/home/foo/src/pika-v0.9.5/pika/adapters/base_connection.py&quot;,
</I>&gt;&gt;&gt;&gt;<i>line
</I>&gt;&gt;&gt;&gt;<i> 50, in __init__
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     reconnection_strategy)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File &quot;/home/foo/src/pika-v0.9.5/pika/connection.py&quot;, line 170, in
</I>&gt;&gt;&gt;&gt;<i>__init__
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     self._connect()
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File &quot;/home/foo/src/pika-v0.9.5/pika/connection.py&quot;, line 228, in
</I>&gt;&gt;&gt;&gt;<i>_connect
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     self.parameters.port or  spec.PORT)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File 
</I>&gt;&gt;&gt;&gt;<i>&quot;/home/foo/src/pika-v0.9.5/pika/adapters/blocking_connection.py&quot;,
</I>&gt;&gt;&gt;&gt;<i> line 44, in _adapter_connect
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     self._handle_read()
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File &quot;/home/foo/src/pika-v0.9.5/pika/adapters/base_connection.py&quot;,
</I>&gt;&gt;&gt;&gt;<i>line
</I>&gt;&gt;&gt;&gt;<i> 162, in _handle_read
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     self._on_data_available(data)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   File &quot;/home/foo/src/pika-v0.9.5/pika/connection.py&quot;, line 597, in
</I>&gt;&gt;&gt;&gt;<i> _on_data_available
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     elif frame.channel_number &gt; 0:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> AttributeError: 'ProtocolHeader' object has no attribute
</I>&gt;&gt;&gt;&gt;<i>'channel_number'
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Python version is 2.6.5. I'm running this on an ubuntu 10.4 system.
</I>&gt;&gt;&gt;&gt;<i>Pip
</I>&gt;&gt;&gt;&gt;<i>and
</I>&gt;&gt;&gt;&gt;<i> Pika were downloaded today per the web site instructions.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I've searched everywhere and can't see the error referenced.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Many thanks to anybody that can help me.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Matt Pietrek.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013605.html">[rabbitmq-discuss] First Python sample (send.py) gives error: AttributeError: 'ProtocolHeader' object has no attribute 'channel_number'
</A></li>
	<LI>Next message: <A HREF="013609.html">[rabbitmq-discuss] First Python sample (send.py) gives error: AttributeError: 'ProtocolHeader' object has no attribute 'channel_number'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13608">[ date ]</a>
              <a href="thread.html#13608">[ thread ]</a>
              <a href="subject.html#13608">[ subject ]</a>
              <a href="author.html#13608">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
