<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management plugin crash server at startup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20plugin%20crash%20server%20at%20startup&In-Reply-To=%3C4E25A117.3090605%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014001.html">
   <LINK REL="Next"  HREF="014011.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management plugin crash server at startup</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20plugin%20crash%20server%20at%20startup&In-Reply-To=%3C4E25A117.3090605%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Management plugin crash server at startup">simon at rabbitmq.com
       </A><BR>
    <I>Tue Jul 19 16:21:59 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="014001.html">[rabbitmq-discuss] Management plugin crash server at startup
</A></li>
        <LI>Next message: <A HREF="014011.html">[rabbitmq-discuss] Management plugin crash server at startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14009">[ date ]</a>
              <a href="thread.html#14009">[ thread ]</a>
              <a href="subject.html#14009">[ subject ]</a>
              <a href="author.html#14009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18/07/11 20:39, Julien Banchet wrote:
&gt;<i> Problem is, the management plugin seems to die, bringing down the
</I>&gt;<i> daemon with it after a couple of seconds (immediatly after start,
</I>&gt;<i> rabbitmq_ctl status does list plugins, two seconds later it's dead
</I>&gt;<i> already):
</I>
So this turns out to be a bug which can cause startup for the whole 
broker to fail when mochiweb takes too long (more than five seconds) to 
start an HTTP listening socket.

On Julien's machine this was happening because mochiweb tries to look up 
&quot;localhost&quot; as an IPv6 address, and it was taking a while to time out.

In case anybody else is bitten by this, you can download a version of 
rabbitmq_mochiweb which will wait longer than 5s from:

<A HREF="http://www.rabbitmq.com/releases/plugins/v2.5.1/rabbitmq_mochiweb-2.5.1-registry-timeout-fix.ez">http://www.rabbitmq.com/releases/plugins/v2.5.1/rabbitmq_mochiweb-2.5.1-registry-timeout-fix.ez</A>

...although the &quot;correct&quot; fix is probably to have IPv6 working properly, 
or turned off.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014001.html">[rabbitmq-discuss] Management plugin crash server at startup
</A></li>
	<LI>Next message: <A HREF="014011.html">[rabbitmq-discuss] Management plugin crash server at startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14009">[ date ]</a>
              <a href="thread.html#14009">[ thread ]</a>
              <a href="subject.html#14009">[ subject ]</a>
              <a href="author.html#14009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
