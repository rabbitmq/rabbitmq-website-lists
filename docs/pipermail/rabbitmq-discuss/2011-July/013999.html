<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Usage Patterms?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Usage%20Patterms%3F&In-Reply-To=%3CCABzX%2BqyBGvsNdFh5jbm3ey__HmcrSbwtAArzR1xx_xtMikLseg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013982.html">
   <LINK REL="Next"  HREF="014005.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Usage Patterms?</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Usage%20Patterms%3F&In-Reply-To=%3CCABzX%2BqyBGvsNdFh5jbm3ey__HmcrSbwtAArzR1xx_xtMikLseg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Usage Patterms?">majek04 at gmail.com
       </A><BR>
    <I>Tue Jul 19 14:20:05 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013982.html">[rabbitmq-discuss] RabbitMQ Usage Patterms?
</A></li>
        <LI>Next message: <A HREF="014005.html">[rabbitmq-discuss] RabbitMQ Usage Patterms?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13999">[ date ]</a>
              <a href="thread.html#13999">[ thread ]</a>
              <a href="subject.html#13999">[ subject ]</a>
              <a href="author.html#13999">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jul 19, 2011 at 03:31, csharpplusproject
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">csharpplusproject at gmail.com</A>&gt; wrote:
&gt;<i> Thank you for your explanation, although I do not really understand how this
</I>&gt;<i> works.
</I>&gt;<i>
</I>&gt;<i> You write: &quot;...listening for messages arriving from RabbitMQ and dispatching
</I>&gt;<i> them to your application.&quot;
</I>&gt;<i>
</I>&gt;<i> I have no problem writing code that is &quot;...listening for messages arriving
</I>&gt;<i> from RabbitMQ&quot;. The question is, how do I dispatch these messages to my
</I>&gt;<i> application while letting the application run continuously with no
</I>&gt;<i> interruptions?
</I>&gt;<i>
</I>&gt;<i> Can anybody provide sample code in python that demonstrates such a pattern?
</I>
Okay, where to start....

When Rabbitmq (or any other network application) sends data to tcp/ip
connection,
well, it is encoded as electrons on the wire.

On the other side of the wire, maybe on different computer, a network card
receives electrons, decodes them and appends to a tcp/ip receive
buffer for a particular tcp/ip connection.

That was easy. Now the hard part. It's the application that needs to ask
the kernel: &quot;is there more data available for me in the buffers?&quot;

Asking this question all over again would be quite inefficient, so it's usually
put as a blocking request: &quot;give me this number of bytes of data from
my tcp/ip buffers, wait if there isn't enough yet&quot;.

Most AMQP clients follow this pattern: you can do CPU intensive
work in your application *or* you can wait on the network and
receive and send data.

If you want to listen to messages: you shall block your program and wait
for network traffic.

Coming back to your question:
&gt;<i> The question is, how do I dispatch these messages to my
</I>&gt;<i> application while letting the application run continuously with no
</I>&gt;<i> interruptions?
</I>
You don't. If you want to receive data, you need to or:
 - block program and hang on socket till data is received
 - or poll kernel asking for more data which is quite inefficient

In normal programming languages people use threads to do that,
one thread does CPU stuff, the other does network stuff.
But a) threads in general are complex b) threads in python are weird.

Hope that helps,
  Marek
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013982.html">[rabbitmq-discuss] RabbitMQ Usage Patterms?
</A></li>
	<LI>Next message: <A HREF="014005.html">[rabbitmq-discuss] RabbitMQ Usage Patterms?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13999">[ date ]</a>
              <a href="thread.html#13999">[ thread ]</a>
              <a href="subject.html#13999">[ subject ]</a>
              <a href="author.html#13999">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
