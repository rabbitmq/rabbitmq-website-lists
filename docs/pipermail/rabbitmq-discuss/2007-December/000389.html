<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Disk/Memory Usage with RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Disk/Memory%20Usage%20with%20RabbitMQ&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000393.html">
   <LINK REL="Next"  HREF="000390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Disk/Memory Usage with RabbitMQ</H1>
    <B>Barry Pederson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Disk/Memory%20Usage%20with%20RabbitMQ&In-Reply-To="
       TITLE="[rabbitmq-discuss] Disk/Memory Usage with RabbitMQ">bp at barryp.org
       </A><BR>
    <I>Thu Dec 20 15:49:11 GMT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000393.html">[rabbitmq-discuss] Persisting Data
</A></li>
        <LI>Next message: <A HREF="000390.html">[rabbitmq-discuss] Disk/Memory Usage with RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#389">[ date ]</a>
              <a href="thread.html#389">[ thread ]</a>
              <a href="subject.html#389">[ subject ]</a>
              <a href="author.html#389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been experimenting with RabbitMQ 1.2.0 on a FreeBSD 6.2 box, 
installed using the Generic Unix instructions from 
<A HREF="http://www.rabbitmq.com/install.html">http://www.rabbitmq.com/install.html</A> - (not doing any clustering), and 
am seeing my memory and disk usage growing pretty steadily as I'm 
starting to make use of persistent messages and durable queues.  I 
should also mention I'm using my alternate Python client library.

In my mnesia/rabbit directory, rabbit_persister.LOG has grown to 23Mb, 
and &quot;top&quot; shows the SIZE of the process to be 113M, up from about 18M 
when the daemon first starts.

I found some earlier messages in Google about rabbit memory usage, for 
example:

<A HREF="http://www.nabble.com/beam-instances-and-growing-memory-usage-td13805341.html">http://www.nabble.com/beam-instances-and-growing-memory-usage-td13805341.html</A>

and used

	rabbit_amqqueue:stat_all().

To look at the queues, and just see

	[{ok,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;syslog_interpret&quot;&gt;&gt;},0,1}]

Which I take to mean just one queue named 'syslog_interpret' with zero 
messages and 1 consumer?

Does having a large and growing rabbit_persister.LOG file indicate 
messages are piling up somewhere?  Are there any other Erlang commands 
for examining the system to see where any logjams may be?

Would publishing persistent messages to a durable exchange with no 
queues bound to it at all (yet) cause the messages to stick around?

Do persistent messages require some kind of acknowledgment I'm perhaps 
missing out on?

Thanks for any suggestions.

	Barry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000393.html">[rabbitmq-discuss] Persisting Data
</A></li>
	<LI>Next message: <A HREF="000390.html">[rabbitmq-discuss] Disk/Memory Usage with RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#389">[ date ]</a>
              <a href="thread.html#389">[ thread ]</a>
              <a href="subject.html#389">[ subject ]</a>
              <a href="author.html#389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
