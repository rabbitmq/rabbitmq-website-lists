<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Best practices for setting up exchanges &amp; queues	for multi-tenancy.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Best%20practices%20for%20setting%20up%20exchanges%20%26%0A%20queues%09for%20multi-tenancy.&In-Reply-To=%3C4D146B25.100%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010503.html">
   <LINK REL="Next"  HREF="010504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Best practices for setting up exchanges &amp; queues	for multi-tenancy.</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Best%20practices%20for%20setting%20up%20exchanges%20%26%0A%20queues%09for%20multi-tenancy.&In-Reply-To=%3C4D146B25.100%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Best practices for setting up exchanges &amp; queues	for multi-tenancy.">emile at rabbitmq.com
       </A><BR>
    <I>Fri Dec 24 09:43:01 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010503.html">[rabbitmq-discuss] Best practices for setting up exchanges &amp; queues	for multi-tenancy.
</A></li>
        <LI>Next message: <A HREF="010504.html">[rabbitmq-discuss] Question : CPU usage of rabbitmq?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10506">[ date ]</a>
              <a href="thread.html#10506">[ thread ]</a>
              <a href="subject.html#10506">[ subject ]</a>
              <a href="author.html#10506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Filbar,

Op 23/12/2010 19:53, het Filbar geskryf:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I have been unable to find information on the best way to layout
</I>&gt;<i> virtual machines and exchanges for multi-tenant web apps.  If I have
</I>&gt;<i> missed something obvious please direct me to the docs.  I am building
</I>&gt;<i> a multi-tenant web app that needs to talk to computers/devices on the
</I>&gt;<i> client's LAN.  Each client will have 4-20 devices and there will be
</I>&gt;<i> about 100,000 clients and needs to scale to 1,000,000.
</I>&gt;<i>
</I>&gt;<i> My understanding is that different clients should be on different
</I>&gt;<i> virtual machines in order to protect exchanges and queues, but this
</I>&gt;<i> seems overkill for 4-20 exchanges/queues per VM.  The next best
</I>&gt;<i> solution seems to use one exchange per client and each of the
</I>&gt;<i> applications can have it's own queue.  What is the best way to handle
</I>&gt;<i> this so that the application can scale as the number of users grows?
</I>
There are a few ways you can isolate clients. Assigning a virtual 
machine to each client incurs alot of overhead, but gives you 
flexibility in resource allocation.

You could also run multiple separate RabbitMQ brokers on the same OS and 
use a different port for each of them. This still involves alot of 
overhead because each client has its own Erlang node, but you still have 
some resource allocation flexibility, e.g. using ulimits.

Probably the most suitable option is to set up a single broker and 
assign an AMQP vhost to each client. This offers the least overhead and 
the least resource isolation. You can use clustering to add capacity in 
line with user growth.

Regards

Emile
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010503.html">[rabbitmq-discuss] Best practices for setting up exchanges &amp; queues	for multi-tenancy.
</A></li>
	<LI>Next message: <A HREF="010504.html">[rabbitmq-discuss] Question : CPU usage of rabbitmq?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10506">[ date ]</a>
              <a href="thread.html#10506">[ thread ]</a>
              <a href="subject.html#10506">[ subject ]</a>
              <a href="author.html#10506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
