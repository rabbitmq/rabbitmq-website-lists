<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Question/clarification wrt durable messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question/clarification%20wrt%20durable%20messages&In-Reply-To=%3C4D0B68EB.6070202%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010412.html">
   <LINK REL="Next"  HREF="010426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Question/clarification wrt durable messages</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Question/clarification%20wrt%20durable%20messages&In-Reply-To=%3C4D0B68EB.6070202%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Question/clarification wrt durable messages">emile at rabbitmq.com
       </A><BR>
    <I>Fri Dec 17 13:43:07 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010412.html">[rabbitmq-discuss] Question/clarification wrt durable messages
</A></li>
        <LI>Next message: <A HREF="010426.html">[rabbitmq-discuss] Question/clarification wrt durable messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10425">[ date ]</a>
              <a href="thread.html#10425">[ thread ]</a>
              <a href="subject.html#10425">[ subject ]</a>
              <a href="author.html#10425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Brian,

On 16/12/10 20:03, Brian Parkinson wrote:

&gt;<i> However, as near as I can tell, there is no difference - in both
</I>&gt;<i> cases, the message remains in the queue until a consumer comes and
</I>&gt;<i> retrieves it. Is there a difference in this case?
</I>
If you are not seeing a difference then you are most likely shutting 
down the broker forcibly without the use of transactions. If you set the 
channel to transaction mode:

channel.txSelect();

and commit after the publish:

channel.txCommit();

then you will see persistent messages in durable queues even after an 
unclean shutdown.

&gt;<i> Perhaps it's more useful to outline what my use case is - I need to
</I>&gt;<i> have high availability, and so can form a multi-node broker, but
</I>&gt;<i> since the queues are (currently) tied to a node, if a node goes down,
</I>&gt;<i> I lose the queue (and all the messages in that queue). How does one
</I>&gt;<i> design this setup in RabbitMQ/AMQP - I'm guessing there's a pretty
</I>&gt;<i> standard pattern here (?).
</I>
For high availability you should look at the Pacemaker guide: 
<A HREF="http://www.rabbitmq.com/pacemaker.html">http://www.rabbitmq.com/pacemaker.html</A> . This uses persistent storage 
and a heartbeat mechanism between two brokers.

&gt;<i> ps. I'm using the whizzy mgmt web front end; when I launch the
</I>&gt;<i> server, I see some warnings about undefined functions (see below). Is
</I>&gt;<i> this something I should worry about?
</I>
Those warnings are normal. Mochiweb uses some functions in some modules 
we don't distribute.  One of our startup checks catches this and 
complains. Since we never actually use those functions, it shouldn't be 
a problem.


Regards


Emile
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010412.html">[rabbitmq-discuss] Question/clarification wrt durable messages
</A></li>
	<LI>Next message: <A HREF="010426.html">[rabbitmq-discuss] Question/clarification wrt durable messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10425">[ date ]</a>
              <a href="thread.html#10425">[ thread ]</a>
              <a href="subject.html#10425">[ subject ]</a>
              <a href="author.html#10425">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
