<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq-xmpp patches and the future.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-xmpp%20patches%20and%20the%20future.&In-Reply-To=%3C4D08BEE5.6060102%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010385.html">
   <LINK REL="Next"  HREF="010398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq-xmpp patches and the future.</H1>
    <B>Eric Liang</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-xmpp%20patches%20and%20the%20future.&In-Reply-To=%3C4D08BEE5.6060102%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq-xmpp patches and the future.">eric.l.2046 at gmail.com
       </A><BR>
    <I>Wed Dec 15 13:13:09 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010385.html">[rabbitmq-discuss] Rabbitmq-xmpp patches and the future.
</A></li>
        <LI>Next message: <A HREF="010398.html">[rabbitmq-discuss] Rabbitmq-xmpp patches and the future.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10386">[ date ]</a>
              <a href="thread.html#10386">[ thread ]</a>
              <a href="subject.html#10386">[ subject ]</a>
              <a href="author.html#10386">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/15/2010 05:38 PM, Alexis Richardson wrote:
&gt;<i> Eric
</I>&gt;<i>
</I>&gt;<i> Nice work!
</I>&gt;<i>
</I>&gt;<i> Please do tell us more about this.
</I>Thanks Alexis for your attention.

What I've done to the project have been already added to the text file
in the repository: README.CUSTOMIZED. As it might be too brief for you,
I'd like to explain some details in the following.

I've separated the initial modules to four individual ones, and the main
purpose is to index the codes by module. That is, the initial module (
mod_rabbitmq ) will communicate with the xmpp clients and route the
consume-related requests to the consumer processes, while all the
functions about how to consume are implemented in the consumer module (
mod_rabbitmq_consumer ). As these two modules will directly communicate
with the rabbitmq-node, some utility functions are distilled to an
individual module ( mod_rabbitmq_util ). To reduce the calls in function
like basic_consume, the mod_rabbitmq_util module will load a library to
the rabbitmq-node , and this is why the mod_rabbitmq_util_priv module is
designed.

Meanwhile,  a heartbeat check on the rabbitmq-node is added, which will
print error message when retrying to connect and grab the latest
rabbitmq-node configuration in ejabberd if the retry times overflowed a
default setting (5). The check on the connection is simply a ping
action. And once the rabbitmq-node was updated when retrying, it will
broadcast the change to all of the consumer processes, since the node
configuration is stored in the process data.

That's all I can think of it for now. Please do not hesitate to contact
me if any further information was required.

Thanks,
Eric

&gt;<i> On Wed, Dec 15, 2010 at 3:02 AM, Eric Liang &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eric.l.2046 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've done some patches for rabbitmq-xmpp recently, which was released by
</I>&gt;&gt;<i> Tony Garnock-Jones (
</I>&gt;&gt;<i> <A HREF="http://www.lshift.net/blog/2008/07/01/rabbitmq-xmpp-gateway-released">http://www.lshift.net/blog/2008/07/01/rabbitmq-xmpp-gateway-released</A> ).
</I>&gt;&gt;<i> The patches have been posted to github (
</I>&gt;&gt;<i> <A HREF="https://github.com/ericliang/rabbitmq-xmpp">https://github.com/ericliang/rabbitmq-xmpp</A> ). I've contacted Tony and he
</I>&gt;&gt;<i> has no time to check these patches right now and suggested that
</I>&gt;&gt;<i> I get in touch with the list ( thanks Tony for your attention and those
</I>&gt;&gt;<i> enlightening conversations ).  So would anyone here like to test/review
</I>&gt;&gt;<i> these patches and/or to merge them to the official repository if
</I>&gt;&gt;<i> valuable? Thanks in advance.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> By the way, as Tony suggested and we reach an agreement on the future
</I>&gt;&gt;<i> version of rabbitmq-xmpp, which the service should be a plugin as
</I>&gt;&gt;<i> rabbitmq-stomp and communicate with the ejabberd server with the help of
</I>&gt;&gt;<i> an xmpp client library. And in that case, the Rabbit team should be the
</I>&gt;&gt;<i> best one to do that I guess. Anyway, if there is no roadmap for it or
</I>&gt;&gt;<i> the future, this would be a suggestion and I'd like to do more work on
</I>&gt;&gt;<i> it when necessary.  Would you mind to tell something about this?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for your attention and any other suggestions are appreciated.
</I>&gt;&gt;<i> Eric
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> -----BEGIN GEEK CODE BLOCK-----
</I>&gt;&gt;<i> Version: 3.1
</I>&gt;&gt;<i> GCM/CS/E/MU/P d+(-) s: a- C++ UL$ P+&gt;++ L++ E++ W++ N+ o+&gt;++ K+++ w !O
</I>&gt;&gt;<i> M-(+) V-- PS+ PE+ Y+ PGP++ t? 5? X? R+&gt;* tv@ b++++ DI-- D G++ e++&gt;+++@ h*
</I>&gt;&gt;<i> r !y+
</I>&gt;&gt;<i> ------END GEEK CODE BLOCK------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>

-- 
-----BEGIN GEEK CODE BLOCK-----
Version: 3.1
GCM/CS/E/MU/P d+(-) s: a- C++ UL$ P+&gt;++ L++ E++ W++ N+ o+&gt;++ K+++ w !O
M-(+) V-- PS+ PE+ Y+ PGP++ t? 5? X? R+&gt;* tv@ b++++ DI-- D G++ e++&gt;+++@ h*
r !y+
------END GEEK CODE BLOCK------

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010385.html">[rabbitmq-discuss] Rabbitmq-xmpp patches and the future.
</A></li>
	<LI>Next message: <A HREF="010398.html">[rabbitmq-discuss] Rabbitmq-xmpp patches and the future.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10386">[ date ]</a>
              <a href="thread.html#10386">[ thread ]</a>
              <a href="subject.html#10386">[ subject ]</a>
              <a href="author.html#10386">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
