<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ not responding or in hung state
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20not%20responding%20or%20in%20hung%20state&In-Reply-To=%3CAANLkTikggMY3r_yc_E2yE49nM_Q1i%2BX9dcOL9wHNPUn8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010380.html">
   <LINK REL="Next"  HREF="010381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ not responding or in hung state</H1>
    <B>pradeep w</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20not%20responding%20or%20in%20hung%20state&In-Reply-To=%3CAANLkTikggMY3r_yc_E2yE49nM_Q1i%2BX9dcOL9wHNPUn8%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ not responding or in hung state">hpk.warrier at gmail.com
       </A><BR>
    <I>Tue Dec 14 13:24:42 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010380.html">[rabbitmq-discuss] Multi tenancy
</A></li>
        <LI>Next message: <A HREF="010381.html">[rabbitmq-discuss] RabbitMQ not responding or in hung state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10374">[ date ]</a>
              <a href="thread.html#10374">[ thread ]</a>
              <a href="subject.html#10374">[ subject ]</a>
              <a href="author.html#10374">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
I'm trying performance testing with RabbitMQ for my scenario. And getting
into this state where RabbitMQ is not responding.
My scenario is like this:
a- Trigger process gets some minimal information to process..This gets
almost say a million plus such information.
b- it then puts this on this information in 20queues []. The consumers for
each of these then get the detail for the information passed to them.
c- After the detail fetch and necessary transformation, the content is then
passed on to further queue for processing. there is one processing queue
corresponding to
    each queue in (b).

So in total i'm running 20 + 20= 40 queues.
The situation that i'm running into is like this:
After processing some entries[random count], suddenly there is no activity
in RabbitMQ. If i kill one of the consumer, then some activity happens and
other queues process for some time.Then again it repeats and i kill some
other consumer. Finally killing all the consumers.
If i restart all consumers again things work for some time before showing
the same inaction behavior.

During the whole processing i never noticed CPU usage to go beyond 60% or
memory causing any issues. The Rabbit MQ overview states that it is not even
using 2% of available Erlang processes. And it also states that it is not
even using 20% of available memory.

I also could not relate it to DB level locking for my application. The
reason being when the rabbitmq stopped responding, i launched other process
[not using queues] and do the similar action on DB and that went fine.

To eliminate any issues due to Exchange share among the multiple queues, i
also tried creating 40 different exchanges and binding each to one &amp; one
exchange only :( .
But still facing the same issues.

I'm running it [rabbitmq2.1.1] on windows 2003 server and using java client
to publish and consume message from rabbitmq.

At no time i see any rabbitmq or erlang related error or crash.

Some thing that i noticed for the first time, there are lots of connection
and channels each listening to some port [not specified by the application
code]. Seems to be created by RabbitMQ.

Any suggestion or remedy for my scenario.

thanks
pradeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101214/f89e2213/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101214/f89e2213/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010380.html">[rabbitmq-discuss] Multi tenancy
</A></li>
	<LI>Next message: <A HREF="010381.html">[rabbitmq-discuss] RabbitMQ not responding or in hung state
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10374">[ date ]</a>
              <a href="thread.html#10374">[ thread ]</a>
              <a href="subject.html#10374">[ subject ]</a>
              <a href="author.html#10374">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
