<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue / Exchange Purge
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20/%20Exchange%20Purge&In-Reply-To=%3CAANLkTinrw1RpGOtRC%2BcsCjrJyphUAxTu%2BZ2L-p%3Dog3K5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010471.html">
   <LINK REL="Next"  HREF="010480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue / Exchange Purge</H1>
    <B>Steven Taylor</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20/%20Exchange%20Purge&In-Reply-To=%3CAANLkTinrw1RpGOtRC%2BcsCjrJyphUAxTu%2BZ2L-p%3Dog3K5%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Queue / Exchange Purge">taylste at gmail.com
       </A><BR>
    <I>Wed Dec 22 18:35:08 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010471.html">[rabbitmq-discuss] Queue / Exchange Purge
</A></li>
        <LI>Next message: <A HREF="010480.html">[rabbitmq-discuss] Queue / Exchange Purge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10478">[ date ]</a>
              <a href="thread.html#10478">[ thread ]</a>
              <a href="subject.html#10478">[ subject ]</a>
              <a href="author.html#10478">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alexander,

the situation is where client connects, publishes, and disconnects. 2nd
client comes along to consume message, and fails in some task it tries to do
on the data (i.e. message is returned to the queue). 3rd client intervenes
(i.e. me manually during test phase with a little script), and wants to
clear out all messages that are hanging around on the broker.

Your test sounds like purge works for the 1st client in the above example,
but not for the 3rd.

Probably I'm not understanding what you intended purge for. Could you help
me out with this scenario?

thanks,
-Steven

On 22 December 2010 15:04, Alexandru Scvor&#355;ov &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexandru at rabbitmq.com</A>&gt;wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Using our .NET client, declaring a queue, then immediately purging it
</I>&gt;<i> works as expected.
</I>&gt;<i>
</I>&gt;<i> Could you supply the code that's causing the problem?
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Alex
</I>&gt;<i>
</I>&gt;<i> On Wed, Dec 22, 2010 at 02:37:50PM +0000, Steven Taylor wrote:
</I>&gt;<i> &gt; update:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  code: ch.QueuePurge(queueName,false);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The AMQP operation was interrupted: AMQP close-reason, initiated by Peer,
</I>&gt;<i> &gt; code=404, text=&quot;NOT_FOUND - no queue 'm.w' in vhost '/'&quot;, classId=50,
</I>&gt;<i> &gt; methodId=30, cause=
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; First off, this error relates to an exchange routing key, so slightly
</I>&gt;<i> &gt; expected. What wasn't expected was the error message should have had the
</I>&gt;<i> &gt; right queue name 'm.w.ctr'.  'm.w' is the queue (not bound to an
</I>&gt;<i> exchange)
</I>&gt;<i> &gt; that failed earlier when I tried to purge it because it wasn't yet
</I>&gt;<i> created.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; let me try something else...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If I first create the queue 'm.w' and then attempted to purge it, I still
</I>&gt;<i> &gt; get the same error message as above.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is anybody else seeing this behaviour?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; thanks,
</I>&gt;<i> &gt; -Steven
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 22 December 2010 13:32, Steven Taylor &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">taylste at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; is there equivilent to purge queue for an exchange?  If we can't
</I>&gt;<i> already,
</I>&gt;<i> &gt; &gt; it would be nice to be able to purge with a routing key.  I see
</I>&gt;<i> &gt; &gt; an ExchangeDelete. Perhaps I should delete and then redeclare.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Currently I'm using non-durable queues, and taking down the broker +
</I>&gt;<i> &gt; &gt; restarting it. I just wanted something a little simpler to execute.
</I>&gt;<i> This is
</I>&gt;<i> &gt; &gt; a test phase request.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; thanks,
</I>&gt;<i> &gt; &gt; -Steven
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i>  &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101222/a739419d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20101222/a739419d/attachment.htm</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010471.html">[rabbitmq-discuss] Queue / Exchange Purge
</A></li>
	<LI>Next message: <A HREF="010480.html">[rabbitmq-discuss] Queue / Exchange Purge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10478">[ date ]</a>
              <a href="thread.html#10478">[ thread ]</a>
              <a href="subject.html#10478">[ subject ]</a>
              <a href="author.html#10478">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
