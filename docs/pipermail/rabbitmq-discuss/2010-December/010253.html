<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] loadbalancing &amp; failover
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20loadbalancing%20%26%20failover&In-Reply-To=%3CAANLkTikGpfLZRVTU_U8RJJBPeSiSsr6q7Z68P0ucXepT%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010248.html">
   <LINK REL="Next"  HREF="010254.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] loadbalancing &amp; failover</H1>
    <B>Bruno Thomas</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20loadbalancing%20%26%20failover&In-Reply-To=%3CAANLkTikGpfLZRVTU_U8RJJBPeSiSsr6q7Z68P0ucXepT%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] loadbalancing &amp; failover">thomasbam at gmail.com
       </A><BR>
    <I>Tue Dec  7 10:29:51 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010248.html">[rabbitmq-discuss] Newbee questions
</A></li>
        <LI>Next message: <A HREF="010254.html">[rabbitmq-discuss] loadbalancing &amp; failover
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10253">[ date ]</a>
              <a href="thread.html#10253">[ thread ]</a>
              <a href="subject.html#10253">[ subject ]</a>
              <a href="author.html#10253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

We have a plateform that uses 2 rabbitmq nodes loadbalanced by a linux
LVS (ipvsadm) in front. We have ipvsadm configured with persistent
connections and clients with heartbeat. So far so good.

After deployment, we generally have half of the clients connected to
the first node and the other half connected to the second node.
We tried to stop one node (rabbitmqctl stop_app and start_app). The
clients are reconnecting rabbitmq cluster, and the LVS sends the
connections to the node up. So all the clients are connected to the
second node.

We have 2 questions :
1) when the first node is up, how do you manage to reconnect the
clients on the two nodes (loadbalancing) ?
2) is it a problem if all the clients are connected to one node ?

Thank you for your anwsers.

Bruno Thomas
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010248.html">[rabbitmq-discuss] Newbee questions
</A></li>
	<LI>Next message: <A HREF="010254.html">[rabbitmq-discuss] loadbalancing &amp; failover
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10253">[ date ]</a>
              <a href="thread.html#10253">[ thread ]</a>
              <a href="subject.html#10253">[ subject ]</a>
              <a href="author.html#10253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
