<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Trouble building rabbitmq-c on windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Trouble%20building%20rabbitmq-c%20on%20windows&In-Reply-To=%3C5C3F8D74DE0D8344AF4E68E53DAB10DD05EA0A47D3%40IS-EXCHANGEC101.wsod.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010396.html">
   <LINK REL="Next"  HREF="010400.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Trouble building rabbitmq-c on windows</H1>
    <B>Paul Pearcy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Trouble%20building%20rabbitmq-c%20on%20windows&In-Reply-To=%3C5C3F8D74DE0D8344AF4E68E53DAB10DD05EA0A47D3%40IS-EXCHANGEC101.wsod.local%3E"
       TITLE="[rabbitmq-discuss] Trouble building rabbitmq-c on windows">paul.pearcy at wallst.com
       </A><BR>
    <I>Wed Dec 15 21:28:02 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010396.html">[rabbitmq-discuss] Trouble building rabbitmq-c on windows
</A></li>
        <LI>Next message: <A HREF="010400.html">[rabbitmq-discuss] Trouble building rabbitmq-c on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10399">[ date ]</a>
              <a href="thread.html#10399">[ thread ]</a>
              <a href="subject.html#10399">[ subject ]</a>
              <a href="author.html#10399">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Was still curious and should have asked in my previous update... 

What is the general consensus of the reliability of the rabbitmq-c client? 
Are there production users of this client? 
Any major known gotchas to look out for? 

Beta doesn't scare me much, but experimental does a little :-) 

Thanks!

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis.richardson at gmail.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis.richardson at gmail.com</A>] On Behalf Of Alexis Richardson
Sent: Wednesday, December 15, 2010 2:16 PM
To: Paul Pearcy
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Trouble building rabbitmq-c on windows

Great, let us know if you have any more problems...

alexis

On Wed, Dec 15, 2010 at 8:55 PM, Paul Pearcy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">paul.pearcy at wallst.com</A>&gt; wrote:
&gt;<i> Sorry for the noise, I believe I have gotten to the bottom of this.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> By default on our systems, we have the $CL var have a couple of default
</I>&gt;<i> values that were not playing nice. After clearing this var and restarting
</I>&gt;<i> everything, things look sane.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: Paul Pearcy
</I>&gt;<i> Sent: Wednesday, December 15, 2010 1:36 PM
</I>&gt;<i> To: Paul Pearcy; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Subject: RE: Trouble building rabbitmq-c on windows
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I got past my initial error by adding spaces to the start and end of my $CL
</I>&gt;<i> env variable. For some reason mingw didn't like them, while cygwin is fine
</I>&gt;<i> either way.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Now stuck on this error:
</I>&gt;<i>
</I>&gt;<i> configure:3128: cl.exe -nologo&#160;&#160; conftest.c&#160; &gt;&amp;5
</I>&gt;<i>
</I>&gt;<i> conftest.c
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> LINK : error LNK2001: unresolved external symbol _mainCRTStartup
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> conftest.exe : fatal error LNK1120: 1 unresolved externals
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I can run the command outside of the configure script and get it to succeed,
</I>&gt;<i> so I am a little baffled.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Paul
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>
</I>&gt;<i> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Paul
</I>&gt;<i> Pearcy
</I>&gt;<i> Sent: Wednesday, December 15, 2010 11:12 AM
</I>&gt;<i> To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Subject: [rabbitmq-discuss] Trouble building rabbitmq-c on windows
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> &#160;&#160;I am unfortunately stuck on Windows and C land and am trying to get the
</I>&gt;<i> rabbitmq-c client built up on windows using the Visual Studio compiler.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> First off, this client is marked as experimental. I am curious how
</I>&gt;<i> experimental this is. for instance, would I be a fool to use this library
</I>&gt;<i> for production purposes? If so, is there a different recommended library or
</I>&gt;<i> should I be looking at a different messaging system with better C support?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am have gone through the README.windows many times and think I understand
</I>&gt;<i> the steps, but there is some disconnect.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here are the steps I took:
</I>&gt;<i>
</I>&gt;<i> 1)&#160;&#160;&#160;&#160;&#160; Grabbed the recommended mingw package using the given install script
</I>&gt;<i>
</I>&gt;<i> 2)&#160;&#160;&#160;&#160;&#160; Coped rabbitmq-c and rabbitmq-codegen(though I'm not sure what this
</I>&gt;<i> one does yet) into the mingw directory.
</I>&gt;<i>
</I>&gt;<i> 3)&#160;&#160;&#160;&#160;&#160; Start up the bash from my new mingw
</I>&gt;<i>
</I>&gt;<i> 4)&#160;&#160;&#160;&#160;&#160; Verify that python is available and that /bin is in my path for
</I>&gt;<i> mingw apps (I actually had to add /bin to my PATH)
</I>&gt;<i>
</I>&gt;<i> 5)&#160;&#160;&#160;&#160;&#160; Ran the mount command as specified: mount 'C:\mingw' /mingw - this
</I>&gt;<i> succeeds
</I>&gt;<i>
</I>&gt;<i> 6)&#160;&#160;&#160;&#160;&#160; Enter the rabbitmq-c directory and kick off the build:
</I>&gt;<i> etc/build-ms.sh
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Below are the outputs from the configure run. I have tried this on a
</I>&gt;<i> Windows7 machine and a WindowsXP machine and in both cases, I got the same
</I>&gt;<i> results. It looks to me like the command to verify the compiler isn't being
</I>&gt;<i> run correctly.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Please let me know if there are any ideas.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Paul
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here is the output from this:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Using Visual Studio install at /C/Program Files/Microsoft Visual Studio 8
</I>&gt;<i>
</I>&gt;<i> Using Windows SDK install at /C/Program Files (x86)/Microsoft Visual Studio
</I>&gt;<i> 8/VC
</I>&gt;<i>
</I>&gt;<i> /PlatformSDK
</I>&gt;<i>
</I>&gt;<i> + autoreconf -i
</I>&gt;<i>
</I>&gt;<i> C:\mingw\bin\libtoolize: Consider adding `AC_CONFIG_MACRO_DIR([m4])' to
</I>&gt;<i> configur
</I>&gt;<i>
</I>&gt;<i> e.ac and
</I>&gt;<i>
</I>&gt;<i> C:\mingw\bin\libtoolize: rerunning C:\mingw\bin\libtoolize, to keep the
</I>&gt;<i> correct
</I>&gt;<i>
</I>&gt;<i> libtool macros in-tree.
</I>&gt;<i>
</I>&gt;<i> C:\mingw\bin\libtoolize: Consider adding `-I m4' to ACLOCAL_AMFLAGS in
</I>&gt;<i> Makefile.
</I>&gt;<i>
</I>&gt;<i> am.
</I>&gt;<i>
</I>&gt;<i> + ./configure CC=cl.exe LD=link.exe CFLAGS=-nologo
</I>&gt;<i>
</I>&gt;<i> checking for a BSD-compatible install... /bin//install -c
</I>&gt;<i>
</I>&gt;<i> checking whether build environment is sane... yes
</I>&gt;<i>
</I>&gt;<i> checking for a thread-safe mkdir -p... /bin//mkdir -p
</I>&gt;<i>
</I>&gt;<i> checking for gawk... gawk
</I>&gt;<i>
</I>&gt;<i> checking whether make sets $(MAKE)... yes
</I>&gt;<i>
</I>&gt;<i> checking for style of include used by make... GNU
</I>&gt;<i>
</I>&gt;<i> checking for gcc... cl.exe
</I>&gt;<i>
</I>&gt;<i> checking whether the C compiler works... no
</I>&gt;<i>
</I>&gt;<i> configure: error: in `/rabbitmq-c-fd437100993d':
</I>&gt;<i>
</I>&gt;<i> configure: error: C compiler cannot create executables
</I>&gt;<i>
</I>&gt;<i> See `config.log' for more details.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here is what I see in the config.log:
</I>&gt;<i>
</I>&gt;<i> configure:3061: checking for C compiler version
</I>&gt;<i>
</I>&gt;<i> configure:3070: cl.exe --version &gt;&amp;5
</I>&gt;<i>
</I>&gt;<i> Microsoft (R) Incremental Linker Version 8.00.50727.42
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Copyright (C) Microsoft Corporation.&#160; All rights reserved.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> /out:Oy-.exe
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> C:/mingw/Oy-
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> LINK : fatal error LNK1181: cannot open input file 'C:/mingw/Oy-.obj'
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Microsoft (R) C/C++ Optimizing Compiler Version 14.00.50727.42 for x64
</I>&gt;<i>
</I>&gt;<i> Copyright (C) Microsoft Corporation.&#160; All rights reserved.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cl : Command line warning D9002 : ignoring unknown option '--version'
</I>&gt;<i>
</I>&gt;<i> cl : Command line warning D9024 : unrecognized source file type
</I>&gt;<i> 'C:/mingw/Oy-', object file assumed
</I>&gt;<i>
</I>&gt;<i> configure:3081: $? = 2
</I>&gt;<i>
</I>&gt;<i> configure:3070: cl.exe -v &gt;&amp;5
</I>&gt;<i>
</I>&gt;<i> Microsoft (R) Incremental Linker Version 8.00.50727.42
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Copyright (C) Microsoft Corporation.&#160; All rights reserved.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> /out:Oy-.exe
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> C:/mingw/Oy-
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> LINK : fatal error LNK1181: cannot open input file 'C:/mingw/Oy-.obj'
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Microsoft (R) C/C++ Optimizing Compiler Version 14.00.50727.42 for x64
</I>&gt;<i>
</I>&gt;<i> Copyright (C) Microsoft Corporation.&#160; All rights reserved.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cl : Command line warning D9002 : ignoring unknown option '-v'
</I>&gt;<i>
</I>&gt;<i> cl : Command line warning D9024 : unrecognized source file type
</I>&gt;<i> 'C:/mingw/Oy-', object file assumed
</I>&gt;<i>
</I>&gt;<i> configure:3081: $? = 2
</I>&gt;<i>
</I>&gt;<i> configure:3070: cl.exe -V &gt;&amp;5
</I>&gt;<i>
</I>&gt;<i> Microsoft (R) C/C++ Optimizing Compiler Version 14.00.50727.42 for x64
</I>&gt;<i>
</I>&gt;<i> Copyright (C) Microsoft Corporation.&#160; All rights reserved.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cl : Command line error D8004 : '/V' requires an argument
</I>&gt;<i>
</I>&gt;<i> configure:3081: $? = 2
</I>&gt;<i>
</I>&gt;<i> configure:3070: cl.exe -qversion &gt;&amp;5
</I>&gt;<i>
</I>&gt;<i> Microsoft (R) Incremental Linker Version 8.00.50727.42
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Copyright (C) Microsoft Corporation.&#160; All rights reserved.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> /out:Oy-.exe
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> C:/mingw/Oy-
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> LINK : fatal error LNK1181: cannot open input file 'C:/mingw/Oy-.obj'
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Microsoft (R) C/C++ Optimizing Compiler Version 14.00.50727.42 for x64
</I>&gt;<i>
</I>&gt;<i> Copyright (C) Microsoft Corporation.&#160; All rights reserved.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cl : Command line warning D9002 : ignoring unknown option '-qversion'
</I>&gt;<i>
</I>&gt;<i> cl : Command line warning D9024 : unrecognized source file type
</I>&gt;<i> 'C:/mingw/Oy-', object file assumed
</I>&gt;<i>
</I>&gt;<i> configure:3081: $? = 2
</I>&gt;<i>
</I>&gt;<i> configure:3101: checking whether the C compiler works
</I>&gt;<i>
</I>&gt;<i> configure:3123: cl.exe -nologo&#160;&#160; conftest.c&#160; &gt;&amp;5
</I>&gt;<i>
</I>&gt;<i> cl : Command line warning D9024 : unrecognized source file type
</I>&gt;<i> 'C:/mingw/Oy-', object file assumed
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> conftest.c
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> LINK : fatal error LNK1181: cannot open input file 'C:/mingw/Oy-.obj'
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> configure:3127: $? = 2
</I>&gt;<i>
</I>&gt;<i> configure:3165: result: no
</I>&gt;<i>
</I>&gt;<i> configure: failed program was:
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010396.html">[rabbitmq-discuss] Trouble building rabbitmq-c on windows
</A></li>
	<LI>Next message: <A HREF="010400.html">[rabbitmq-discuss] Trouble building rabbitmq-c on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10399">[ date ]</a>
              <a href="thread.html#10399">[ thread ]</a>
              <a href="subject.html#10399">[ subject ]</a>
              <a href="author.html#10399">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
