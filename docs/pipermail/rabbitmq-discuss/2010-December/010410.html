<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] error: &quot;Pipelining of requests forbidden&quot; on C# client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20error%3A%20%22Pipelining%20of%20requests%20forbidden%22%20on%0A%20C%23%20client&In-Reply-To=%3CA7A653F0-D8A0-4256-9784-EB987013D6F7%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010406.html">
   <LINK REL="Next"  HREF="010411.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] error: &quot;Pipelining of requests forbidden&quot; on C# client</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20error%3A%20%22Pipelining%20of%20requests%20forbidden%22%20on%0A%20C%23%20client&In-Reply-To=%3CA7A653F0-D8A0-4256-9784-EB987013D6F7%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] error: &quot;Pipelining of requests forbidden&quot; on C# client">jerryk at vmware.com
       </A><BR>
    <I>Thu Dec 16 17:54:09 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010406.html">[rabbitmq-discuss] error: &quot;Pipelining of requests forbidden&quot; on C# client
</A></li>
        <LI>Next message: <A HREF="010411.html">[rabbitmq-discuss] STOMP plugin, changes, usage example in python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10410">[ date ]</a>
              <a href="thread.html#10410">[ thread ]</a>
              <a href="subject.html#10410">[ subject ]</a>
              <a href="author.html#10410">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Steven:

Absolutely!  A self-contained snippet of code that reproduces a potential problem is always a valuable thing for us to have...  Please pass one on if you have one.

Jerry

On Dec 15, 2010, at 10:02 PM, Steven Taylor wrote:

Hi Jerry,

you found the same pdf that I did.

I'm not knowingly using RPC continuation at this stage, unless using the Subscription pattern falls under this category. Also, I am careful to use a different channel for each subscription or basic channe that lives on the same thread.

Would you like me to get in touch if I can repeat the error with a test case?

-Steven

On 15 December 2010 16:56, Jerry Kuch &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jerryk at vmware.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jerryk at vmware.com</A>&gt;&gt; wrote:
Steven:  Is there any chance that the channel instance on which you're doing this work is being used by more than one thread?

In the .NET client one expects this error when something tries to queue up more than one RPC continuation in the internal continuation queue at a time.  The Rabbit .NET client user guide talks about such thread safety issues:

<A HREF="http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v1.5.0/rabbitmq-dotnet-client-1.5.0-user-guide.pdf">http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v1.5.0/rabbitmq-dotnet-client-1.5.0-user-guide.pdf</A>

in some detail in a couple of spots.

The Rabbit Java client has similar restrictions.  With both the Java and .NET clients, it makes sense to structure your application so that a unique thread owns a given instance of a non-thread safe Rabbit client resource (e.g. Channels in the Java client, IModel in the .NET).

Best regards,
Jerry

On Dec 15, 2010, at 8:28 AM, Steven Taylor wrote:

Hi,

Got this error: &quot;Pipelining of requests forbidden&quot;

Found a reference in the documentation (see below).  As part of the &quot;I assert queue exists&quot; logic, I was (re-)declaring the exhange.  Is that wrong?

Could it be a threading issue?

<A HREF="http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v1.5.0/rabbitmq-dotnet-client-1.5.0-user-guide.pdf">http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v1.5.0/rabbitmq-dotnet-client-1.5.0-user-guide.pdf</A>

NotSupportedException

s being thrown from a method in class RpcContinuationQueue

complaining about

&quot;Pipelining of requests forbidden&quot; (which occurs in situations where

more than one AMQP RPC, such as

ExchangeDeclare, is run simultaneously).

Offending Line:
BasicGetResult msg=ch.BasicGet(QueueNme,false);

thanks,
-Steven
&lt;ATT00001..txt&gt;



</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010406.html">[rabbitmq-discuss] error: &quot;Pipelining of requests forbidden&quot; on C# client
</A></li>
	<LI>Next message: <A HREF="010411.html">[rabbitmq-discuss] STOMP plugin, changes, usage example in python
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10410">[ date ]</a>
              <a href="thread.html#10410">[ thread ]</a>
              <a href="subject.html#10410">[ subject ]</a>
              <a href="author.html#10410">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
