<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ persistence when clustering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20persistence%20when%20clustering&In-Reply-To=%3C309f4eff-7647-446f-91e8-04d1beaadd0c%40n2g2000pre.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010308.html">
   <LINK REL="Next"  HREF="010310.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ persistence when clustering</H1>
    <B>nathanmarz</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20persistence%20when%20clustering&In-Reply-To=%3C309f4eff-7647-446f-91e8-04d1beaadd0c%40n2g2000pre.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ persistence when clustering">nathan.marz at gmail.com
       </A><BR>
    <I>Thu Dec  9 23:12:53 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010308.html">[rabbitmq-discuss] RabbitMQ persistence when clustering
</A></li>
        <LI>Next message: <A HREF="010310.html">[rabbitmq-discuss] RabbitMQ persistence when clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10309">[ date ]</a>
              <a href="thread.html#10309">[ thread ]</a>
              <a href="subject.html#10309">[ subject ]</a>
              <a href="author.html#10309">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Alex for the quick reply.

To clarify #3, when a node goes down does any other node temporarily
handle the queues for the down node? Or does the queue just stay
unavailable until the node comes back up? If it stays unavailable, are
there any future plans to ensure high availability of queues?

Thanks,
Nathan


On Dec 9, 3:09&#160;pm, Alexandru Scvor&#355;ov &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexan... at rabbitmq.com</A>&gt; wrote:
&gt;<i> Hi Nathan,
</I>&gt;<i>
</I>&gt;<i> &gt; 1. When you cluster, do ram nodes persist messages to their queues? Or
</I>&gt;<i> &gt; only disk nodes?
</I>&gt;<i>
</I>&gt;<i> Ram and disk apply only to whether the cluster configuration is in
</I>&gt;<i> memory or also written to disk. &#160;Nodes of any type may persist messages
</I>&gt;<i> to disk. &#160;The broker will always try to write persistent messages (on
</I>&gt;<i> durable queues) to disk, and may also persist transient messages if it's
</I>&gt;<i> running low on memory.
</I>&gt;<i>
</I>&gt;<i> &gt; 2. What's the state that's replicated across all nodes in a cluster?
</I>&gt;<i>
</I>&gt;<i> Queues, bindings and exchanges.
</I>&gt;<i>
</I>&gt;<i> Note that while all three appear the same on every node in the cluster,
</I>&gt;<i> queues are tied to the node they were declared on. &#160;If that node goes
</I>&gt;<i> down, they'll also go down.
</I>&gt;<i>
</I>&gt;<i> &gt; 3. When a Rabbit node goes down, does its queue become unavailable?
</I>&gt;<i>
</I>&gt;<i> Yes. &#160;If the queue was non-durable, then the queue is deleted and can be
</I>&gt;<i> redeclared on any other node. &#160;If the queue was durable, then it becomes
</I>&gt;<i> unavailable, and attempting to redeclare it will result in an exception.
</I>&gt;<i>
</I>&gt;<i> &gt; 4. What are the conditions (if any) for which there will be lost
</I>&gt;<i> &gt; messages?
</I>&gt;<i>
</I>&gt;<i> If the broker goes down before it's had time to write (persistent) messages
</I>&gt;<i> to disk, those messages will be lost.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Alex
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, Dec 09, 2010 at 02:46:58PM -0800, nathanmarz wrote:
</I>&gt;<i> &gt; I'm trying to understand the behavior of a clustered RabbitMQ setup.
</I>&gt;<i>
</I>&gt;<i> &gt; Specifically:
</I>&gt;<i>
</I>&gt;<i> &gt; 1. When you cluster, do ram nodes persist messages to their queues? Or
</I>&gt;<i> &gt; only disk nodes?
</I>&gt;<i> &gt; 2. What's the state that's replicated across all nodes in a cluster?
</I>&gt;<i> &gt; 3. When a Rabbit node goes down, does its queue become unavailable?
</I>&gt;<i> &gt; 4. What are the conditions (if any) for which there will be lost
</I>&gt;<i> &gt; messages?
</I>&gt;<i>
</I>&gt;<i> &gt; Thanks in advance,
</I>&gt;<i> &gt; Nathan
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010308.html">[rabbitmq-discuss] RabbitMQ persistence when clustering
</A></li>
	<LI>Next message: <A HREF="010310.html">[rabbitmq-discuss] RabbitMQ persistence when clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10309">[ date ]</a>
              <a href="thread.html#10309">[ thread ]</a>
              <a href="subject.html#10309">[ subject ]</a>
              <a href="author.html#10309">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
