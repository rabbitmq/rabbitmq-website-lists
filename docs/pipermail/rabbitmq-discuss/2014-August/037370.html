<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%203.2.4%20running%20out%20of%20memory&In-Reply-To=%3CCAOU_jKAhMWXFo584sYGkJsSuR-2ze0Sy%2B4iA02zEa8a_kFk2Vg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037367.html">
   <LINK REL="Next"  HREF="037371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory</H1>
    <B>srikanth tns</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%203.2.4%20running%20out%20of%20memory&In-Reply-To=%3CCAOU_jKAhMWXFo584sYGkJsSuR-2ze0Sy%2B4iA02zEa8a_kFk2Vg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory">srikanthtns at gmail.com
       </A><BR>
    <I>Tue Aug 26 20:45:36 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037367.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
        <LI>Next message: <A HREF="037371.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37370">[ date ]</a>
              <a href="thread.html#37370">[ thread ]</a>
              <a href="subject.html#37370">[ subject ]</a>
              <a href="author.html#37370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>what are the changes we see on the UI statistics ? I have applied it on our
test instances and see one of the main charts for message rates is gone.
Currently we are servicing 10800 nodes on rabbitmq clustered and load
balanced on 3 nodes with 3600 nodes on each , having HA-TWO Queues policy.
Also we are bumping up from the RAM from 16G to 32G
here is the new config , we are using

[
 {rabbitmq_stomp, [{tcp_listeners, [{&quot;hosgtip&quot;, 6163}]}]},
 {rabbit, [{reverse_dns_lookups,
true},{vm_memory_high_watermark_paging_ratio,
0.7},{vm_memory_high_watermark, 0.7},{disk_free_limit,
1000000000},{cluster_partition_handling, autoheal},
  {collect_statistics_interval, 30000}]},
 {rabbitmq_management_agent, [{force_fine_statistics, false}]}
].



On Tue, Aug 26, 2014 at 12:01 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at pivotal.io</A>&gt;
wrote:

&gt;<i> On 26 August 2014 at 22:59:09, Jason McIntosh (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mcintoshj at gmail.com</A>) wrote:
</I>&gt;<i> &gt; {mgmt_db,3870226464},3870MB
</I>&gt;<i>
</I>&gt;<i> Thanks, Jason.  So here's our key offender.
</I>&gt;<i>
</I>&gt;<i> Besides memory leaks that are fixed in the statistics DB from time to time,
</I>&gt;<i> you can turn off fine grained stats. This should drastically reduce the
</I>&gt;<i> amount of RAM used by the stats database.
</I>&gt;<i>
</I>&gt;<i> See <A HREF="http://rabbitmq.com/management.html.">http://rabbitmq.com/management.html.</A>
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Staff Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list has moved to
</I>&gt;<i> <A HREF="https://groups.google.com/forum/#!forum/rabbitmq-users,">https://groups.google.com/forum/#!forum/rabbitmq-users,</A>
</I>&gt;<i> please subscribe to the new list!
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/2aea26f7/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/2aea26f7/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037367.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
	<LI>Next message: <A HREF="037371.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37370">[ date ]</a>
              <a href="thread.html#37370">[ thread ]</a>
              <a href="subject.html#37370">[ subject ]</a>
              <a href="author.html#37370">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
