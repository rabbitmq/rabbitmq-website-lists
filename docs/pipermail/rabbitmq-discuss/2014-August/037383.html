<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%203.2.4%20running%20out%20of%20memory&In-Reply-To=%3CCAOU_jKADLMZAaah5cbVsrKeyyw6WOU2DECwcU3Jd5%2B0Qu8h6ng%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037371.html">
   <LINK REL="Next"  HREF="037385.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory</H1>
    <B>srikanth tns</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%203.2.4%20running%20out%20of%20memory&In-Reply-To=%3CCAOU_jKADLMZAaah5cbVsrKeyyw6WOU2DECwcU3Jd5%2B0Qu8h6ng%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory">srikanthtns at gmail.com
       </A><BR>
    <I>Wed Aug 27 01:13:32 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037371.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
        <LI>Next message: <A HREF="037385.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37383">[ date ]</a>
              <a href="thread.html#37383">[ thread ]</a>
              <a href="subject.html#37383">[ subject ]</a>
              <a href="author.html#37383">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi ,

Thanks for suggesting the changes.
we have applied the relevant changes to config file for statistics and RAM
upgrade. Things seem to be stable now but we will monitor the usage to see
if it jumps off again.
here is a screenshot of how its looking now. Please let me know if this is
promising , also is there any possibility of memory leaks and how we can
avoid them?


[image: Inline image 1]


Memory stats

 {erlang_version,
     &quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:4:4] [rq:4]
[async-threads:30] [kernel-poll:true]\n&quot;},
 {memory,
     [{total,4337647904},
      {connection_procs,338878104},
      {queue_procs,1193259768},
      {plugins,328401480},
      {other_proc,566879328},
      {mnesia,331579864},
      {mgmt_db,755366192},
      {msg_index,22422152},
      {other_ets,58232552},
      {binary,402509464},
      {code,17776116},
      {atom,1621321},
      {other_system,320721563}]},
 {vm_memory_high_watermark,0.7},
 {vm_memory_limit,23567893708},
 {disk_free_limit,1000000000},
 {disk_free,19428507648},
 {file_descriptors,
     [{total_limit,327579},
      {total_used,4289},
      {sockets_limit,294819},
      {sockets_used,4287}]},
 {processes,[{limit,1048576},{used,197320}]},
 {run_queue,0},
 {uptime,4970}]

 {memory,
     [{total,2662846904},
      {connection_procs,188698640},
      {queue_procs,929974408},
      {plugins,265628672},
      {other_proc,285984288},
      {mnesia,333067736},
      {mgmt_db,9096},
      {msg_index,14039664},
      {other_ets,34617944},
      {binary,298184672},
      {code,17779316},
      {atom,1620513},
      {other_system,293241955}]},
 {vm_memory_high_watermark,0.7},
 {vm_memory_limit,23567893708},
 {disk_free_limit,1000000000},
 {disk_free,19331850240},
 {file_descriptors,
     [{total_limit,327579},
      {total_used,3360},
      {sockets_limit,294819},
      {sockets_used,3358}]},
 {processes,[{limit,1048576},{used,154555}]},
 {run_queue,0},
 {uptime,3812}]

 {memory,
     [{total,2548103256},
      {connection_procs,216784920},
      {queue_procs,846726064},
      {plugins,247802288},
      {other_proc,260433432},
      {mnesia,333461048},
      {mgmt_db,9096},
      {msg_index,8830272},
      {other_ets,33553920},
      {binary,291250680},
      {code,17776116},
      {atom,1620513},
      {other_system,289854907}]},
 {vm_memory_high_watermark,0.7},
 {vm_memory_limit,23567893708},
 {disk_free_limit,1000000000},
 {disk_free,19382099968},
 {file_descriptors,
     [{total_limit,327579},
      {total_used,3112},
      {sockets_limit,294819},
      {sockets_used,3110}]},
 {processes,[{limit,1048576},{used,143173}]},
 {run_queue,0},
 {uptime,3777}]


On Tue, Aug 26, 2014 at 12:50 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at pivotal.io</A>&gt;
wrote:

&gt;<i>  On 26 August 2014 at 23:47:50, srikanth tns (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">srikanthtns at gmail.com</A>)
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; &gt; what are the changes we see on the UI statistics ? I have applied
</I>&gt;<i> &gt; it on our test instances and see one of the main charts for message
</I>&gt;<i> &gt; rates is gone.
</I>&gt;<i>
</I>&gt;<i> Yes, message rate stats depend on fine grained statistics. This is
</I>&gt;<i> mentioned
</I>&gt;<i> in the docs.
</I>&gt;<i>
</I>&gt;<i> &gt; Also we are bumping up from the RAM from 16G to 32G
</I>&gt;<i>
</I>&gt;<i> You can also bump the watermark ratio depending on what other software
</I>&gt;<i> may be running on the same machine/VM.
</I>&gt;<i> (but remember that OS and system services
</I>&gt;<i> also need RAM, as do file system caches, so going above 0.85 is probably
</I>&gt;<i> not a good idea)
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Staff Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/5de2b51d/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/5de2b51d/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 73551 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/5de2b51d/attachment.png">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/5de2b51d/attachment.png</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037371.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
	<LI>Next message: <A HREF="037385.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37383">[ date ]</a>
              <a href="thread.html#37383">[ thread ]</a>
              <a href="subject.html#37383">[ subject ]</a>
              <a href="author.html#37383">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
