<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%203.2.4%20running%20out%20of%20memory&In-Reply-To=%3CCAOU_jKCbnmpZ8zfUmjxcCTZwb6TtzEnCBvzQPeiyKHYs4NSkcA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037358.html">
   <LINK REL="Next"  HREF="037362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory</H1>
    <B>srikanth tns</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq%203.2.4%20running%20out%20of%20memory&In-Reply-To=%3CCAOU_jKCbnmpZ8zfUmjxcCTZwb6TtzEnCBvzQPeiyKHYs4NSkcA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory">srikanthtns at gmail.com
       </A><BR>
    <I>Tue Aug 26 16:59:53 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="037358.html">[rabbitmq-discuss] AMQP version to be used for rabbitmq-3.2.4
</A></li>
        <LI>Next message: <A HREF="037362.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37361">[ date ]</a>
              <a href="thread.html#37361">[ thread ]</a>
              <a href="subject.html#37361">[ subject ]</a>
              <a href="author.html#37361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

Can someone please let us know wht we need to do ?

we are getting out of memory errors in the rabbitmq 3.2.4 when we are
trying to access rabbitmq on port 15672 using connections api . The script
calls curl via shell console.

curl -i -s --connect-timeout 5 -u admin:changeme <A HREF="http://">http://</A>
$hostname1:15672/api/connections?columns=node,name

This curl call is made from many hosts at same to get the number of
connections running on rabbitmq and we see the connections are blocked on
this port.

netstat -tan | grep ':15672' | awk '{print $6 }' | sort | uniq -c
      3 CLOSE_WAIT
   1882 ESTABLISHED
      1 LISTEN
     10 TIME_WAIT

Thanks
Srikanth

Logs show this:

vm_memory_high_watermark set. Memory used:14888001288  allowed:11753753804

=WARNING REPORT==== 26-Aug-2014::05:58:18  ===
memory resource limit alarm set on node  <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at adsmv0019.</A>

**********************************************************
***  Publishers will be blocked until this alarm clears  ***
**********************************************************


=INFO REPORT====  26-Aug-2014::05:58:20 ===
vm_memory_high_watermark clear. Memory  used:8686452200 allowed:11753753804
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/e6ac2fb4/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140826/e6ac2fb4/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="037358.html">[rabbitmq-discuss] AMQP version to be used for rabbitmq-3.2.4
</A></li>
	<LI>Next message: <A HREF="037362.html">[rabbitmq-discuss] Rabbitmq 3.2.4 running out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37361">[ date ]</a>
              <a href="thread.html#37361">[ thread ]</a>
              <a href="subject.html#37361">[ subject ]</a>
              <a href="author.html#37361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
