<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Odd behavior where server stops responding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Odd%20behavior%20where%20server%20stops%20responding&In-Reply-To=%3C2B32DAB5-8C1F-4B1B-A340-3315C25766B7%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034524.html">
   <LINK REL="Next"  HREF="034530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Odd behavior where server stops responding</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Odd%20behavior%20where%20server%20stops%20responding&In-Reply-To=%3C2B32DAB5-8C1F-4B1B-A340-3315C25766B7%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Odd behavior where server stops responding">tim at rabbitmq.com
       </A><BR>
    <I>Wed Mar 12 16:45:13 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034524.html">[rabbitmq-discuss] Odd behavior where server stops responding
</A></li>
        <LI>Next message: <A HREF="034530.html">[rabbitmq-discuss] Odd behavior where server stops responding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34529">[ date ]</a>
              <a href="thread.html#34529">[ thread ]</a>
              <a href="subject.html#34529">[ subject ]</a>
              <a href="author.html#34529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jason,

On 12 Mar 2014, at 14:32, Jason McIntosh wrote:

&gt;<i> I never could get any node up - nothing showed up in the logs for startup, shutdown, regular and sasl logs.  One interesting thing is on the startup after killing all the processes (including epmd) it appears to have started multiple beams instead of the typical one.  
</I>
Well, if there are rabbit (i.e., beam.smp) processes running, then you _do_ have a node up, though not necessarily responding properly. That's not the same as the program refusing to start though.

&gt;<i> 
</I>&gt;<i> By non-responsive, rabbitmqctl shows the node as being down,
</I>
Could this be a file system corruption issue? Have you checked all the usual suspects for when rabbitmqctl won't connect to a node that you know is running, like checking the erlang cookies match?

&gt;<i> but I could telnet to both the management port and the rabbitmq port (which I'm guessing is the epmd process)
</I>
I'm not really sure what you mean by &quot;the rabbitmq port&quot;, but we could be talking about several things here. (a) the port on which the broker accepts AMQP connections, (b) the port on which the broker accepts distributed erlang connections (which is assigned by epmd) or something else (?) so I'm not really sure what we're saying here. 

&gt;<i> , but nothing shows in the log files for rabbit itself, nothing in the sasl logs, no content from the management port, etc.
</I>
Hmn, so you're sure (via ps and/or top) that there are beam.smp processes running, and you can see (via netstat) that the management HTTP port is in use, but there's no response from the HTTP (management) server?

&gt;<i>  The OS was completely responsive - I could get to the shell, do most commands, though lsof (I think I mentioned this) wouldn't respond in any timely manner while rabbit server was running.
</I>
That _is_ very strange.

&gt;<i>  All the ways I know of to talk to rabbit and all the os things i know to do were failing and all the things I know to try and restart it (killing the processes, waiting for network connections in TIM_WAIT to drain, killing EPMD as well) all failed.
</I>&gt;<i> 
</I>&gt;<i> At that point, I recycled each of the servers and they're back to a running state.  I don't know that I have a box handy but I'll see what I can do to replicate this.  For some reason I think I've seen this before and it's something with the OEL 6.2 kernel that Oracle put together, dealing with disk io flush on a journaled file system.  I'm pretty sure I've seen the same thing about 6 months ago or so on a completely different set of servers.
</I>
Urgh, that sounds horrible. The more info you can provide us with the better. If you can replicate, that would be amazing since we can do the same thing and investigate.

Cheers,
Tim

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034524.html">[rabbitmq-discuss] Odd behavior where server stops responding
</A></li>
	<LI>Next message: <A HREF="034530.html">[rabbitmq-discuss] Odd behavior where server stops responding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34529">[ date ]</a>
              <a href="thread.html#34529">[ thread ]</a>
              <a href="subject.html#34529">[ subject ]</a>
              <a href="author.html#34529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
