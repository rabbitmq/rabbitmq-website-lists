<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] from zendJobQueue to RabbitMQ - Status	Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20from%20zendJobQueue%20to%20RabbitMQ%20-%20Status%0A%09Problem&In-Reply-To=%3CCAMcAHLW6j6a7H27DKQbPNV-H6Z3vDHwB%3DPSPFZBt0Dqx%3Dco%3D%3Dw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034581.html">
   <LINK REL="Next"  HREF="034572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] from zendJobQueue to RabbitMQ - Status	Problem</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20from%20zendJobQueue%20to%20RabbitMQ%20-%20Status%0A%09Problem&In-Reply-To=%3CCAMcAHLW6j6a7H27DKQbPNV-H6Z3vDHwB%3DPSPFZBt0Dqx%3Dco%3D%3Dw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] from zendJobQueue to RabbitMQ - Status	Problem">videlalvaro at gmail.com
       </A><BR>
    <I>Fri Mar 14 11:44:51 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034581.html">[rabbitmq-discuss] from zendJobQueue to RabbitMQ - Status	Problem
</A></li>
        <LI>Next message: <A HREF="034572.html">[rabbitmq-discuss] Is there a formal AMQP compliance test suite (for developers of client libraries)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34586">[ date ]</a>
              <a href="thread.html#34586">[ thread ]</a>
              <a href="subject.html#34586">[ subject ]</a>
              <a href="author.html#34586">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

So I completely misread your question.

What do you mean by &quot;check for open messages&quot;?

You want to know the amount of message that are ready to be consumed?
Or the messages that are being processed at the moment by consumers?

Regards,

Alvaro

On Fri, Mar 14, 2014 at 10:48 AM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt; wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> basic_get is used to get one message at a time, which makes it not optimal.
</I>&gt;<i>
</I>&gt;<i> See the tutorial here on basic_consume:
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/tutorials/tutorial-two-php.html">http://www.rabbitmq.com/tutorials/tutorial-two-php.html</A> there you can
</I>&gt;<i> read about message acknowledgments as well.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Alvaro
</I>&gt;<i>
</I>&gt;<i> On Fri, Mar 14, 2014 at 8:49 AM, Sascha Wojewsky
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sascha.wojewsky at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> we've to switch from zendJobQueue to RabbitMQ (publish via php and consume
</I>&gt;&gt;<i> via python worker).
</I>&gt;&gt;<i> I've read the examples and everything looks good, but i've to check for
</I>&gt;&gt;<i> running jobs and i don't know how...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In php I've a squence for jobs/messages:
</I>&gt;&gt;<i> $message = new \PhpAmqpLib\Message\AMQPMessage(json_encode(array(
</I>&gt;&gt;<i>     'id'    =&gt; $jobID,
</I>&gt;&gt;<i>     'data' =&gt; $data,
</I>&gt;&gt;<i> )));
</I>&gt;&gt;<i> $message-&gt;set('message_id', $jobID);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To check for open messages I've this method:
</I>&gt;&gt;<i> private function getRabbitMQJobIsFinished($jobID) {
</I>&gt;&gt;<i>   $result = true;
</I>&gt;&gt;<i>   $connection = new \PhpAmqpLib\Connection\AMQPConnection(...);
</I>&gt;&gt;<i>   $channel = $connection-&gt;channel();
</I>&gt;&gt;<i>   $messageData = $channel-&gt;basic_get(self::$queue, false);
</I>&gt;&gt;<i>   while (!empty($messageData)) {
</I>&gt;&gt;<i>     $messageID = $messageData-&gt;get('message_id');
</I>&gt;&gt;<i>     if ($messageID == $jobID){
</I>&gt;&gt;<i>       $result = false;
</I>&gt;&gt;<i>       break;
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>     $messageData = $channel-&gt;basic_get(self::$queue, false);
</I>&gt;&gt;<i>   }
</I>&gt;&gt;<i>   return $result;
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But this didn't work for unacknowledged/work in progress messages.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is ist possible to solve this problem with RabbitMQ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thank you a lot for your help.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I></PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034581.html">[rabbitmq-discuss] from zendJobQueue to RabbitMQ - Status	Problem
</A></li>
	<LI>Next message: <A HREF="034572.html">[rabbitmq-discuss] Is there a formal AMQP compliance test suite (for developers of client libraries)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34586">[ date ]</a>
              <a href="thread.html#34586">[ thread ]</a>
              <a href="subject.html#34586">[ subject ]</a>
              <a href="author.html#34586">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
