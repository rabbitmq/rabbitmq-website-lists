<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq webstomp ha-mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20webstomp%20ha-mode&In-Reply-To=%3C5329984B.9040608%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034668.html">
   <LINK REL="Next"  HREF="034679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq webstomp ha-mode</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20webstomp%20ha-mode&In-Reply-To=%3C5329984B.9040608%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq webstomp ha-mode">simon at rabbitmq.com
       </A><BR>
    <I>Wed Mar 19 13:14:51 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034668.html">[rabbitmq-discuss] rabbitmq webstomp ha-mode
</A></li>
        <LI>Next message: <A HREF="034679.html">[rabbitmq-discuss] rabbitmq webstomp ha-mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34669">[ date ]</a>
              <a href="thread.html#34669">[ thread ]</a>
              <a href="subject.html#34669">[ subject ]</a>
              <a href="author.html#34669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/03/14 11:04, Steve Flitcroft wrote:
&gt;<i> Having trouble getting the queues that are created via sockjs &amp; webstomp
</I>&gt;<i> being replicated across nodes.
</I>&gt;<i>
</I>&gt;<i> I have a policy set for any queues that start with amq to be replicated.
</I>&gt;<i>
</I>&gt;<i> You can see this here
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://gyazo.com/b0e3fbac0d1a1d0baabc25c5f43499f0">http://gyazo.com/b0e3fbac0d1a1d0baabc25c5f43499f0</A>
</I>&gt;<i>
</I>&gt;<i> the amq.gen queue created by webstomp does not replicate to the other
</I>&gt;<i> node, the queue I created called amqsteve does.
</I>
The amq.gen queue is declared as exclusive. From 
<A HREF="http://www.rabbitmq.com/ha.html:">http://www.rabbitmq.com/ha.html:</A>

   Exclusive queues will be deleted when the connection that declared
   them is closed. For this reason, it is not useful for an exclusive
   queue to be mirrored (or durable for that matter) since when the node
   hosting it goes down, the connection will close and the queue will
   need to be deleted anyway.

   For this reason, exclusive queues are never mirrored (even if they
   match a policy stating that they should be). They are also never
   durable (even if declared as such).

&gt;<i> The result of this is that any non websocket browsers have to be routed
</I>&gt;<i> to exactly the same node otherwise they get a 404 on the xhr_send method
</I>&gt;<i> and lose connection.
</I>
Uh, that's not the case; you can connect to any node to publish to a 
non-mirrored queue, it just gets routed inside the cluster.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034668.html">[rabbitmq-discuss] rabbitmq webstomp ha-mode
</A></li>
	<LI>Next message: <A HREF="034679.html">[rabbitmq-discuss] rabbitmq webstomp ha-mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34669">[ date ]</a>
              <a href="thread.html#34669">[ thread ]</a>
              <a href="subject.html#34669">[ subject ]</a>
              <a href="author.html#34669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
