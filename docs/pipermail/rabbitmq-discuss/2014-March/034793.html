<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federation/Connection issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation/Connection%20issues&In-Reply-To=%3C6DB033025329784B9280ABD9516177FCA228208B%40usbpx2pmxmbx12%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034767.html">
   <LINK REL="Next"  HREF="034768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federation/Connection issues</H1>
    <B>Ganann, Kale</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation/Connection%20issues&In-Reply-To=%3C6DB033025329784B9280ABD9516177FCA228208B%40usbpx2pmxmbx12%3E"
       TITLE="[rabbitmq-discuss] Federation/Connection issues">KGanann at kroll.com
       </A><BR>
    <I>Wed Mar 26 14:29:32 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034767.html">[rabbitmq-discuss] Federation/Connection issues
</A></li>
        <LI>Next message: <A HREF="034768.html">[rabbitmq-discuss] Federation/Connection issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34793">[ date ]</a>
              <a href="thread.html#34793">[ thread ]</a>
              <a href="subject.html#34793">[ subject ]</a>
              <a href="author.html#34793">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We see some errors related to users that were deleted in the past (user_does_not_exist).  It appears there were some artifacts in our config from when we changed our fed routing structure to prevent duplicate messages.  Some of our engineers removed those artifacts, but now when we load all the existing federation exchanges (although showing green for their upstreams) don't work unless we set up a new queue with the same routing key in the bindings.  I'm checking the logs to see if we have any new errors related to this.  I've attached some of the errors for you perusal, if I find new ones I'll send those up as well.


=ERROR REPORT==== 24-Mar-2014::09:54:58 ===
** Generic server &lt;0.6301.0&gt; terminating
 ** Last message in was {'$gen_cast',maybe_go}
** When Server state == {not_started,
                         {{upstream,
                           [&lt;&lt;&quot;<A HREF="amqp://shared_federation:shared_federation@localhost:5672/fed">amqp://shared_federation:shared_federation@localhost:5672/fed</A>&quot;&gt;&gt;],
                            &lt;&lt;&quot;e.fed.topic.tofed&quot;&gt;&gt;,&lt;&lt;&quot;e.fed.topic.tofed&quot;&gt;&gt;,
                           1000,2,1,none,none,false,'on-confirm',none,
                           &lt;&lt;&quot;datamartStage_to_fed&quot;&gt;&gt;},
                           {upstream_params,
                           &lt;&lt;&quot;<A HREF="amqp://shared_federation:shared_federation@localhost:5672/fed">amqp://shared_federation:shared_federation@localhost:5672/fed</A>&quot;&gt;&gt;,
                           {amqp_params_network,&lt;&lt;&quot;shared_federation&quot;&gt;&gt;,
                             &lt;&lt;&quot;shared_federation&quot;&gt;&gt;,&lt;&lt;&quot;fed&quot;&gt;&gt;,&quot;localhost&quot;,
                            5672,0,0,0,infinity,none,
                            [#Fun&lt;amqp_uri.7.121371571&gt;,
                              #Fun&lt;amqp_uri.7.121371571&gt;],
                            [],[]},
                           {exchange,
                            {resource,&lt;&lt;&quot;fed&quot;&gt;&gt;,exchange,
                              &lt;&lt;&quot;e.fed.topic.tofed&quot;&gt;&gt;},
                            topic,true,false,false,[],
                            [{federation,[]}],
                            [{vhost,&lt;&lt;&quot;datamartStage&quot;&gt;&gt;},
                              {name,&lt;&lt;&quot;federation enabled&quot;&gt;&gt;},
                             {pattern,&lt;&lt;&quot;(^|.*\\.)fed($|\\..*)&quot;&gt;&gt;},
                             {'apply-to',&lt;&lt;&quot;exchanges&quot;&gt;&gt;},
                              {definition,
                              [{&lt;&lt;&quot;federation-upstream-set&quot;&gt;&gt;,&lt;&lt;&quot;all&quot;&gt;&gt;}]},
                             {priority,60}],
                            {[],[rabbit_federation_exchange]}},
                            &lt;&lt;&quot;<A HREF="amqp://localhost:5672/fed">amqp://localhost:5672/fed</A>&quot;&gt;&gt;,
                           [{&lt;&lt;&quot;uri&quot;&gt;&gt;,longstr,
                             &lt;&lt;&quot;<A HREF="amqp://localhost:5672/fed">amqp://localhost:5672/fed</A>&quot;&gt;&gt;},
                             {&lt;&lt;&quot;virtual_host&quot;&gt;&gt;,longstr,&lt;&lt;&quot;fed&quot;&gt;&gt;},
                            {&lt;&lt;&quot;exchange&quot;&gt;&gt;,longstr,&lt;&lt;&quot;e.fed.topic.tofed&quot;&gt;&gt;}]},
                           {resource,&lt;&lt;&quot;datamartStage&quot;&gt;&gt;,exchange,
                           &lt;&lt;&quot;e.fed.topic.tofed&quot;&gt;&gt;}}}
** Reason for termination ==
** {error,user_does_not_exist}

=ERROR REPORT==== 24-Mar-2014::09:54:58 ===
** Generic server &lt;0.6310.0&gt; terminating
** Last message in was {'$gen_cast',maybe_go}
** When Server state == {not_started,
                         {{upstream,
                            [&lt;&lt;&quot;<A HREF="amqp://shared_federation:shared_federation@localhost:5672/fed">amqp://shared_federation:shared_federation@localhost:5672/fed</A>&quot;&gt;&gt;],
                           &lt;&lt;&quot;e.fed.topic&quot;&gt;&gt;,&lt;&lt;&quot;e.fed.topic&quot;&gt;&gt;,1000,2,1,none,
                            none,false,'on-confirm',none,
                           &lt;&lt;&quot;datamartStage_to_fed&quot;&gt;&gt;},
                          {upstream_params,
                           &lt;&lt;&quot;<A HREF="amqp://shared_federation:shared_federation@localhost:5672/fed">amqp://shared_federation:shared_federation@localhost:5672/fed</A>&quot;&gt;&gt;,
                            {amqp_params_network,&lt;&lt;&quot;shared_federation&quot;&gt;&gt;,
                            &lt;&lt;&quot;shared_federation&quot;&gt;&gt;,&lt;&lt;&quot;fed&quot;&gt;&gt;,&quot;localhost&quot;,
                             5672,0,0,0,infinity,none,
                            [#Fun&lt;amqp_uri.7.121371571&gt;,
                             #Fun&lt;amqp_uri.7.121371571&gt;],
                            [],[]},
                            {exchange,
                            {resource,&lt;&lt;&quot;fed&quot;&gt;&gt;,exchange,&lt;&lt;&quot;e.fed.topic&quot;&gt;&gt;},
                            topic,true,false,false,[],
                             [{federation,[]}],
                            [{vhost,&lt;&lt;&quot;datamartStage&quot;&gt;&gt;},
                             {name,&lt;&lt;&quot;federation enabled&quot;&gt;&gt;},
                             {pattern,&lt;&lt;&quot;(^|.*\\.)fed($|\\..*)&quot;&gt;&gt;},
                              {'apply-to',&lt;&lt;&quot;exchanges&quot;&gt;&gt;},
                             {definition,
                              [{&lt;&lt;&quot;federation-upstream-set&quot;&gt;&gt;,&lt;&lt;&quot;all&quot;&gt;&gt;}]},
                              {priority,60}],
                            {[],[rabbit_federation_exchange]}},
                           &lt;&lt;&quot;<A HREF="amqp://localhost:5672/fed">amqp://localhost:5672/fed</A>&quot;&gt;&gt;,
                           [{&lt;&lt;&quot;uri&quot;&gt;&gt;,longstr,
                              &lt;&lt;&quot;<A HREF="amqp://localhost:5672/fed">amqp://localhost:5672/fed</A>&quot;&gt;&gt;},
                            {&lt;&lt;&quot;virtual_host&quot;&gt;&gt;,longstr,&lt;&lt;&quot;fed&quot;&gt;&gt;},
                            {&lt;&lt;&quot;exchange&quot;&gt;&gt;,longstr,&lt;&lt;&quot;e.fed.topic&quot;&gt;&gt;}]},
                           {resource,&lt;&lt;&quot;datamartStage&quot;&gt;&gt;,exchange,
                           &lt;&lt;&quot;e.fed.topic&quot;&gt;&gt;}}}
** Reason for termination ==
** {error,user_does_not_exist

Thanks,
Kale


-----Original Message-----
From: rabbitmq-discuss [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Michael Klishin
Sent: Tuesday, March 25, 2014 3:55 AM
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Federation/Connection issues

&#160;On 25 March 2014 at 12:46:20, Ganann, Kale (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kganann at kroll.com</A>) wrote:
&gt;<i> &gt; I&#8217;ve attached the output of rabbitmqctl report from one of our
</I>&gt;<i> nodes while the processes were climbing. We&#8217;ve currently disabled 
</I>&gt;<i> federation in prod, but we&#8217;re looking for a better solution.
</I>&gt;<i> Ideas?
</I>
Can you please look at log files to see if there are any error messages, stack traces, etc. There likely will be something.
--
MK  

Software Engineer, Pivotal/RabbitMQ
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
This communication contains information that is confidential,
proprietary in nature, and may also be attorney-client privileged
and/or work product privileged. It is for the exclusive use of the
intended recipient(s). If you are not the intended recipient(s) or
the person responsible for delivering it to the intended
recipient(s), please note that any form of dissemination,
distribution or copying of this communication is strictly
prohibited and may be unlawful. If you have received this
communication in error, please immediately notify the sender by replying
to this message and delete this email immediately. Thank you for your cooperation. 

Please be advised that neither Altegrity, its affiliates, its employees
or agents accept liability for any errors, omissions or damages
caused by delays of receipt or by any virus infection in this
message or its attachments, or which may otherwise arise as a
result of this e-mail transmission.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034767.html">[rabbitmq-discuss] Federation/Connection issues
</A></li>
	<LI>Next message: <A HREF="034768.html">[rabbitmq-discuss] Federation/Connection issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34793">[ date ]</a>
              <a href="thread.html#34793">[ thread ]</a>
              <a href="subject.html#34793">[ subject ]</a>
              <a href="author.html#34793">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
