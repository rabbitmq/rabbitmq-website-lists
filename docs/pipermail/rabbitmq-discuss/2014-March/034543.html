<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] ulimit and cgroup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ulimit%20and%20cgroup&In-Reply-To=%3C5EF849EC-1094-4ECF-830D-CC51E5E0F43E%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034540.html">
   <LINK REL="Next"  HREF="034544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] ulimit and cgroup</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ulimit%20and%20cgroup&In-Reply-To=%3C5EF849EC-1094-4ECF-830D-CC51E5E0F43E%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] ulimit and cgroup">mklishin at gopivotal.com
       </A><BR>
    <I>Thu Mar 13 08:33:36 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034540.html">[rabbitmq-discuss] ulimit and cgroup
</A></li>
        <LI>Next message: <A HREF="034544.html">[rabbitmq-discuss] ulimit and cgroup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34543">[ date ]</a>
              <a href="thread.html#34543">[ thread ]</a>
              <a href="subject.html#34543">[ subject ]</a>
              <a href="author.html#34543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13 Mar 2014, at 07:58, ratheesh kannoth &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ratheesh.ksz at gmail.com</A>&gt; wrote:

&gt;<i> Suppose i restrict  REZ memory and file size   etc ( system resources
</I>&gt;<i> )  using  ulimit and cgroup, what will be the behaviour of rabbitMQ. ?
</I>&gt;<i> Suppose a lot of messages gets queued and writing to disk ; if i have
</I>&gt;<i> a limit on the file size. ??
</I>
It depends on message size but once you cross a certain threshold, RabbitMQ
will try to move messages to disk. There should be no giant files, though, on disk
message store will split them into multiple smaller files (16 MB by default, AFAIR).

There is a fixed (a few dozens of bytes) RAM cost per message until you use a 
custom queue index plugin, such as rabbitmq-toke [1].

If RabbitMQ cannot allocate memory or write to a file, of course, there is little it can do, so be
careful about setting RSS and file size limit. It&#8217;s a good idea to adjust RabbitMQ VM high memory watermark
to be lower than the OS limit you use.

1. <A HREF="http://hg.rabbitmq.com/rabbitmq-toke/">http://hg.rabbitmq.com/rabbitmq-toke/</A>

MK

Software Engineer, Pivotal/RabbitMQ


</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034540.html">[rabbitmq-discuss] ulimit and cgroup
</A></li>
	<LI>Next message: <A HREF="034544.html">[rabbitmq-discuss] ulimit and cgroup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34543">[ date ]</a>
              <a href="thread.html#34543">[ thread ]</a>
              <a href="subject.html#34543">[ subject ]</a>
              <a href="author.html#34543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
