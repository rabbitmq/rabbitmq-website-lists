<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unexaplainable%20behaviour%20with%20shovel%20plugin.&In-Reply-To=%3CCAK%2BmrqraGs21ou-fLLXzyAA3_gzxj%3Dfgwgn6MXR5enS_39o6UA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034315.html">
   <LINK REL="Next"  HREF="034884.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.</H1>
    <B>Claire Fautsch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unexaplainable%20behaviour%20with%20shovel%20plugin.&In-Reply-To=%3CCAK%2BmrqraGs21ou-fLLXzyAA3_gzxj%3Dfgwgn6MXR5enS_39o6UA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.">cfautsch at goodgamestudios.com
       </A><BR>
    <I>Mon Mar 31 13:49:52 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034315.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
        <LI>Next message: <A HREF="034884.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34883">[ date ]</a>
              <a href="thread.html#34883">[ thread ]</a>
              <a href="subject.html#34883">[ subject ]</a>
              <a href="author.html#34883">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear all,

As promised after some time, here my feedback: We changed the prefetch
count on our shovels to 1000. Since then we observe that our Shovels are
running not nececesarrily faster (not expected) but for sure much more
stable.

Two observations we made:
- If no prefetch count is set, and we have a lot of &quot;unacked&quot; Messages,
which are currently residing inside the shovel, a connection loss from the
shovel to the destination broker, can cause the whole source broker to
crash (and all messages are lost if not persisted)
- It seems that messages in &quot;unacked&quot; State in the Source queue cannot be
paged to disk in case of high memory usage.

Thanks again for your advice!

Cheers,
Claire


2014-02-27 16:25 GMT+01:00 Claire Fautsch &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">cfautsch at goodgamestudios.com</A>&gt;:

&gt;<i> Great, Thanks for your valuable comments.
</I>&gt;<i>
</I>&gt;<i> We will for sure try this out, and I will provide some feedback on the
</I>&gt;<i> outcome.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Claire
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2014-02-27 14:21 GMT+01:00 Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;:
</I>&gt;<i>
</I>&gt;&gt;<i> On 27/02/14 12:50, Jason McIntosh wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> SO I HIGHLY recommend setting a prefetch that's not unlimited if
</I>&gt;&gt;&gt;<i> you're doing WAN replication,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So do I. Maybe we should change the default. Hmm.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers, Simon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Simon MacMullen
</I>&gt;&gt;<i> RabbitMQ, Pivotal
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140331/294e3483/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140331/294e3483/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034315.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
	<LI>Next message: <A HREF="034884.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34883">[ date ]</a>
              <a href="thread.html#34883">[ thread ]</a>
              <a href="subject.html#34883">[ subject ]</a>
              <a href="author.html#34883">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
