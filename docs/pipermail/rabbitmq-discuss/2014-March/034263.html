<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unexaplainable%20behaviour%20with%20shovel%20plugin.&In-Reply-To=%3CCAKgmDnFFbEpvSfFd_yAC6zuUy0%3DTvwgDZ6gEjn2L3oFpOETAmg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034260.html">
   <LINK REL="Next"  HREF="034314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unexaplainable%20behaviour%20with%20shovel%20plugin.&In-Reply-To=%3CCAKgmDnFFbEpvSfFd_yAC6zuUy0%3DTvwgDZ6gEjn2L3oFpOETAmg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.">michael.laing at nytimes.com
       </A><BR>
    <I>Sun Mar  2 03:21:31 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034260.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
        <LI>Next message: <A HREF="034314.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34263">[ date ]</a>
              <a href="thread.html#34263">[ thread ]</a>
              <a href="subject.html#34263">[ subject ]</a>
              <a href="author.html#34263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Persistence might increase reliability when you plan to restart nodes and
need to regain state. We don't do that.

We have clusters of 3 nodes across independent zones - forming an AWS
region - and run with 3 regions, i.e. nine nodes in the core, replicating
the processing of important messages across these core clusters. We have
several other ancillary clusters for clients, proxies, etc., also in
multiple regions.

We target queue lengths of zero and are close most of the time. Anything
else stands out like a black spot on a white sheet.

So we never restart nodes that die. Just sync in new ones. Actually we have
not yet had any core nodes die in production.

Our Cassandra cluster of 18 nodes, 6 per region, synchronizes globally in
less than 1 sec, and persists all of our message traffic in multiple useful
inversions. We use a replication factor of 3 per region so every message
has nine copies; important ones have many more due to message replication.
We push and pull a lot from this cache.

Our instances are ridiculously small and inexpensive to run. We rely on
this global, headless, mutually supporting rabbit army for our reliability,
paired with a small Cassandra horde.

ml





On Sat, Mar 1, 2014 at 6:21 PM, Ben Hood &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:

&gt;<i> On Sat, Mar 1, 2014 at 6:00 PM, Laing, Michael
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.laing at nytimes.com</A>&gt; wrote:
</I>&gt;<i> &gt; We rely on replication
</I>&gt;<i> &gt; instead; our persistence requirements are 'outsourced' to a global
</I>&gt;<i> Cassandra
</I>&gt;<i> &gt; cluster.
</I>&gt;<i>
</I>&gt;<i> Interesting. So you're using Rabbit for event notification rather than
</I>&gt;<i> reliable(*) transfer of state?
</I>&gt;<i>
</I>&gt;<i> (*) For some value of reliable.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140301/80f5b69b/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140301/80f5b69b/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034260.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
	<LI>Next message: <A HREF="034314.html">[rabbitmq-discuss] Unexaplainable behaviour with shovel plugin.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34263">[ date ]</a>
              <a href="thread.html#34263">[ thread ]</a>
              <a href="subject.html#34263">[ subject ]</a>
              <a href="author.html#34263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
