<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using java threadlocal for channels
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20java%20threadlocal%20for%20channels&In-Reply-To=%3CE210B782-425E-4414-893F-BDA602D07185%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034718.html">
   <LINK REL="Next"  HREF="034725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using java threadlocal for channels</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20java%20threadlocal%20for%20channels&In-Reply-To=%3CE210B782-425E-4414-893F-BDA602D07185%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Using java threadlocal for channels">mklishin at gopivotal.com
       </A><BR>
    <I>Sat Mar 22 07:55:30 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034718.html">[rabbitmq-discuss] Using java threadlocal for channels
</A></li>
        <LI>Next message: <A HREF="034725.html">[rabbitmq-discuss] Writing custom exchange type plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34719">[ date ]</a>
              <a href="thread.html#34719">[ thread ]</a>
              <a href="subject.html#34719">[ subject ]</a>
              <a href="author.html#34719">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 21 Mar 2014, at 23:55, rails &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">stammailbox at gmail.com</A>&gt; wrote:

&gt;<i> Now, I understand that I would better open a channel for each thread. 
</I>&gt;<i> So I use java Threadlocal for channel.
</I>&gt;<i> 
</I>&gt;<i> Will this slow me down?
</I>&gt;<i> Is there a better way than opening a channel (and closing it for each http request)?
</I>
Clearly opening and closing a channel per request can&#8217;t be more efficient.

The question is whether the threads are long lived (e.g. you use a thread pool
such as an ExecutionService). If so, then using thread local storage for channels
should work fine. You may want to check if the channel is still open before publishing on it
and if not, open a new one.

MK

Software Engineer, Pivotal/RabbitMQ


</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034718.html">[rabbitmq-discuss] Using java threadlocal for channels
</A></li>
	<LI>Next message: <A HREF="034725.html">[rabbitmq-discuss] Writing custom exchange type plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34719">[ date ]</a>
              <a href="thread.html#34719">[ thread ]</a>
              <a href="subject.html#34719">[ subject ]</a>
              <a href="author.html#34719">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
