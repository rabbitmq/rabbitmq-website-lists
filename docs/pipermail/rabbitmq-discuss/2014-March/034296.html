<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federation chokes on load
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20chokes%20on%20load&In-Reply-To=%3C473755ed-4741-45d6-91d2-39c7ea9d567c%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034363.html">
   <LINK REL="Next"  HREF="034304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federation chokes on load</H1>
    <B>Patrik Ring</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20chokes%20on%20load&In-Reply-To=%3C473755ed-4741-45d6-91d2-39c7ea9d567c%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Federation chokes on load">patrik.ring at bloglovin.com
       </A><BR>
    <I>Mon Mar  3 21:41:23 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034363.html">[rabbitmq-discuss] Retrieving messages asynchronously through	callbacks
</A></li>
        <LI>Next message: <A HREF="034304.html">[rabbitmq-discuss] Federation chokes on load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34296">[ date ]</a>
              <a href="thread.html#34296">[ thread ]</a>
              <a href="subject.html#34296">[ subject ]</a>
              <a href="author.html#34296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Rabbitmq-discuss,

We're currently trying to achieve a sync of our rabbit servers between two 
different data centers (one in Europe and one on US East coast). We're 
currently only in need of a one way sync (Europe -&gt; US).

We thought setting up federation seemed like a good tool for this so we set 
it up and it worked like a charm when we were testing it internally with 
only developers. Then when starting to put load on it it just died. Some 
messages come through (but are heavily delayed, as in hours) but they seem 
completely random. We don't have any crazy number of messages being sent, 
it's just about a few 100 messages / second, and they aren't that big 
(&lt;1kb).

We do have quite a few bindings to the exchange we're federating (currently 
trying around 5000 simultaneously).

We have tried with both no-ack and on-confirm but doesn't seem to make a 
difference.

The message aren't routed to the queues on the receiver.

The error log is empty.
The web interface says everything is working
Small number of messages work, and the firewall is not blocking the 
traffic. Shouldn't be a network issue since we're on fairly good 
connections (&gt;gbit) and have good internal networks that work well for 
everything else.

Status:
<A HREF="http://f.cl.ly/items/0p0R3W1m0T2y412X402q/Pasted_Image_2014_33__15_32.png">http://f.cl.ly/items/0p0R3W1m0T2y412X402q/Pasted_Image_2014_33__15_32.png</A>

Config:
<A HREF="http://f.cl.ly/items/182i0C0U2Q453k2L3Z3X/Pasted_Image_2014_33__15_40.png">http://f.cl.ly/items/182i0C0U2Q453k2L3Z3X/Pasted_Image_2014_33__15_40.png</A>

We might be using the wrong tool, in which case I'd be happy to know more, 
or we're just missing something. In which case I'd be really happy for some 
pointers and some help.

----------
Thanks
/Patrik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140303/b43375a9/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140303/b43375a9/attachment.html</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034363.html">[rabbitmq-discuss] Retrieving messages asynchronously through	callbacks
</A></li>
	<LI>Next message: <A HREF="034304.html">[rabbitmq-discuss] Federation chokes on load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34296">[ date ]</a>
              <a href="thread.html#34296">[ thread ]</a>
              <a href="subject.html#34296">[ subject ]</a>
              <a href="author.html#34296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
