<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue Failover and restore
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Failover%20and%20restore&In-Reply-To=%3CCAAaVn2AU4NuMNtOwHdHZoceZ2AK8Bg-523mnc5YDZpiUGG5Qdg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034765.html">
   <LINK REL="Next"  HREF="034771.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue Failover and restore</H1>
    <B>Duncan McIntyre</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Failover%20and%20restore&In-Reply-To=%3CCAAaVn2AU4NuMNtOwHdHZoceZ2AK8Bg-523mnc5YDZpiUGG5Qdg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Queue Failover and restore">dmcintyre at gopivotal.com
       </A><BR>
    <I>Tue Mar 25 09:50:30 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034765.html">[rabbitmq-discuss] Queue Failover and restore
</A></li>
        <LI>Next message: <A HREF="034771.html">[rabbitmq-discuss] Nested consuming and publishing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34769">[ date ]</a>
              <a href="thread.html#34769">[ thread ]</a>
              <a href="subject.html#34769">[ subject ]</a>
              <a href="author.html#34769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You could use ha-mode nodes to move it to the node you want to be the
master, then change the policy to replicate it again. The disadvantage
being that you risk losing the queue if the master fails before the queue
has been replicated again.

Or, you could use ha-mode nodes to move it around pairs of nodes in the
cluster, until eventually the master was on the node you wanted, and it
will have been replicated at all times.


---
Duncan


On Tue, Mar 25, 2014 at 6:39 AM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;wrote:

&gt;<i> On 25 March 2014 at 09:59:06, Arun Rao (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">arunrao.seattle at gmail.com</A>) wrote:
</I>&gt;<i> &gt; &gt; I have 4 nodes with 4 queues on each node. HA policy is set to exactly
</I>&gt;<i> &gt; 2 nodes, so I have exactly one mirror.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; When a node fails, 4 queues on this node get distributed to the
</I>&gt;<i> &gt; other 3 nodes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; After I bring the failed node backup, this failed node now only
</I>&gt;<i> &gt; has mirrors and no queues now live on this failed node. How can
</I>&gt;<i> &gt; I push queues to this failed node without deleting the queue and
</I>&gt;<i> &gt; recreating it?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Even after restarting the entire cluster, I dont seem to get my
</I>&gt;<i> &gt; original setup back.
</I>&gt;<i>
</I>&gt;<i> You can't . Why do you need the queues to be on a specific node?
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140325/653744e2/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140325/653744e2/attachment.html</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034765.html">[rabbitmq-discuss] Queue Failover and restore
</A></li>
	<LI>Next message: <A HREF="034771.html">[rabbitmq-discuss] Nested consuming and publishing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34769">[ date ]</a>
              <a href="thread.html#34769">[ thread ]</a>
              <a href="subject.html#34769">[ subject ]</a>
              <a href="author.html#34769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
