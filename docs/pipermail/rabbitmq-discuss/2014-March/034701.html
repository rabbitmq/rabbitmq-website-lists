<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] : Delayed processing of data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3A%20Delayed%20processing%20of%20data&In-Reply-To=%3CCF51C071.11880%25aapte%40zynga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034686.html">
   <LINK REL="Next"  HREF="034702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] : Delayed processing of data</H1>
    <B>Ajinkya Apte</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3A%20Delayed%20processing%20of%20data&In-Reply-To=%3CCF51C071.11880%25aapte%40zynga.com%3E"
       TITLE="[rabbitmq-discuss] : Delayed processing of data">aapte at zynga.com
       </A><BR>
    <I>Fri Mar 21 10:22:04 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034686.html">[rabbitmq-discuss] : Delayed processing of data
</A></li>
        <LI>Next message: <A HREF="034702.html">[rabbitmq-discuss] : Delayed processing of data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34701">[ date ]</a>
              <a href="thread.html#34701">[ thread ]</a>
              <a href="subject.html#34701">[ subject ]</a>
              <a href="author.html#34701">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the reply.  So the only problem I see with what I want to do and with whats available in RabbitMQ is I will have to time slice and create multiple queues.
For example:
One queue with a timeout of 5 min, the other 10 min. Then according to the delay time just put incoming data into the proper queue.
The down side I can see is that new data that will be thrown in a queue with say a 10 min timeout, will be theoretically processed anywhere between 1-10 mins. I cannot kinda guarantee that the data will be handled only after 10 mins.

Does this make sense to you?

Do you create a new queue per request coming in, depending on a the delay?

AJ

From: &lt;Laing&gt;, Michael &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.laing at nytimes.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.laing at nytimes.com</A>&gt;&gt;
Reply-To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;
Date: Thursday, March 20, 2014 6:36 PM
To: Discussions about RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;
Subject: Re: [rabbitmq-discuss] : Delayed processing of data

We currently use TTLs and Dead Letter Exchanges to accomplish this.

An app we call Route looks at messages and either:

  1.  sends them to an exchange called Distribute, or
  2.  declares a queue with a name reflecting the embargo datetime and a DLX of Distribute and sends the message to it with a TTL calculated to release at that datetime.

This works fine. You can dynamically set a policy to delete the queue.

Probably we will move away from this in the next few months simply because we wish to persist as little as possible in rabbitmq. But it is quite simple and functional.

ml


On Thu, Mar 20, 2014 at 2:11 PM, Ajinkya Apte &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aapte at zynga.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aapte at zynga.com</A>&gt;&gt; wrote:
Hey guys,
I want to delay the processing of some data coming into a queue. The data has delayTime associated with it.

What I want to do?

  1.  Data is coming in with a delayTime associated with it.
  2.  Some data can come with the delayTime=5 mintes from now, some data with delayTime=10 and so on. This delayTime can be anything.
  3.  I want to delay the processing of this data.

Questions?

  1.  From the documentation seems like using message TTL won't be the way to go, right?
  2.  Will I have to use the 'Dead Letter Exchanges' concept along with multiple retry queues having different timeouts?
  3.  Any other suggestions?

Please let me know.
Thanks,

AJ

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140321/7e57c1e7/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140321/7e57c1e7/attachment.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034686.html">[rabbitmq-discuss] : Delayed processing of data
</A></li>
	<LI>Next message: <A HREF="034702.html">[rabbitmq-discuss] : Delayed processing of data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34701">[ date ]</a>
              <a href="thread.html#34701">[ thread ]</a>
              <a href="subject.html#34701">[ subject ]</a>
              <a href="author.html#34701">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
