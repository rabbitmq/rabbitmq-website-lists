<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Network partitioning
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Network%20partitioning&In-Reply-To=%3C96bb27bb-58bc-4db6-99f2-abaaacd02f63%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034681.html">
   <LINK REL="Next"  HREF="034693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Network partitioning</H1>
    <B>Geoffrey Samper</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Network%20partitioning&In-Reply-To=%3C96bb27bb-58bc-4db6-99f2-abaaacd02f63%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Network partitioning">geoffrey.samper at gmail.com
       </A><BR>
    <I>Thu Mar 20 09:41:22 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034681.html">[rabbitmq-discuss] ANN Bunny 1.1.7 is released
</A></li>
        <LI>Next message: <A HREF="034693.html">[rabbitmq-discuss] Network partitioning
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34683">[ date ]</a>
              <a href="thread.html#34683">[ thread ]</a>
              <a href="subject.html#34683">[ subject ]</a>
              <a href="author.html#34683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, 


We have a cluster with 3 nodes (Rabbit 1, Rabbit 3, rabbit 4). Sometimes we 
have problems of network partitioning. Over the day everything runs fine 
but at night 3AM and 4AM arround we expierence network partitioning. Most 
of the time between 3 and 1. What strange is the log of rabbit 1 is 
contains  &quot;Generic server &lt;0.263.0&gt; terminating in the log&quot;. 

Can anyone help me with this issue. The logs are below


RABBIT 04

===========

INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.PageDeletedConsumer' in vhost 'A105'): Master 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P04.1.264.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.264.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p14' in vhost 'A105'): Master 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P04.1.262.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.262.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.MNT_grbhstmntp01' in vhost 'A105'): Master 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P04.1.292.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.292.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p05' in vhost 'A105'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P04.1.24486.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.30101.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p09' in vhost 'A105'): Master 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P04.1.24669.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.30387.0</A>&gt;

Rabbit 03
=====================
=INFO REPORT==== 20-Mar-2014::03:41:27 ===
rabbit on node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01</A> down

=ERROR REPORT==== 20-Mar-2014::03:41:27 ===
Mnesia(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03</A>): ** ERROR ** mnesia_event got {inconsistent_database, 
running_partitioned_network, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01</A>}

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p21' in vhost 'A105'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.278.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.275.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p22' in vhost 'A105'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.270.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.268.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===

Mirrored-queue (queue 'ha.PageDeletedConsumer' in vhost 'A105.001'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.276.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.274.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p04' in vhost 'A105.001'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.274.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.271.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.MNT_grbhstmntp02' in vhost 'A105'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.282.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.280.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p03' in vhost 'A105.001'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.280.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.278.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.MNT_grbhstmntp01' in vhost 'A105.001'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.286.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.284.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.services_p20' in vhost 'A105.001'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.272.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.270.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:27 ===
Mirrored-queue (queue 'ha.PageDeleteConsumer' in vhost 'A105.001'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.284.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.282.0</A>&gt;

Rabbit 01
===================================

=INFO REPORT==== 20-Mar-2014::03:41:14 ===
rabbit on node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03</A> down

=ERROR REPORT==== 20-Mar-2014::03:41:15 ===
Mnesia(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01</A>): ** ERROR ** mnesia_event got {inconsistent_database, 
running_partitioned_network, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03</A>}


=ERROR REPORT==== 20-Mar-2014::03:41:15 ===

** Generic server &lt;0.263.0&gt; terminating

** Last message in was {'DOWN',#Ref&lt;0.0.0.1692&gt;,process,&lt;4625.265.0&gt;,

                               noconnection}

** When Server state == {state,

                            {31,&lt;0.263.0&gt;},

                            {{28,&lt;4625.265.0&gt;},#Ref&lt;0.0.0.1692&gt;},

                            {{25,&lt;5158.263.0&gt;},#Ref&lt;0.0.0.1693&gt;},

                            {resource,&lt;&lt;&quot;A105&quot;&gt;&gt;,queue,

                                &lt;&lt;&quot;ha.services_p14&quot;&gt;&gt;},

                            rabbit_mirror_queue_slave,

                            {32,

                             [{{25,&lt;5158.263.0&gt;},

                               {view_member,

                                   {25,&lt;5158.263.0&gt;},

                                   [],

                                   {31,&lt;0.263.0&gt;},

                                   {28,&lt;4625.265.0&gt;}}},

                              {{28,&lt;4625.265.0&gt;},

                               {view_member,

                                   {28,&lt;4625.265.0&gt;},

                                   [],

                                   {25,&lt;5158.263.0&gt;},

                                   {31,&lt;0.263.0&gt;}}},

                              {{31,&lt;0.263.0&gt;},

                               {view_member,

                                   {31,&lt;0.263.0&gt;},

                                   [],

                                   {28,&lt;4625.265.0&gt;},

                                   {25,&lt;5158.263.0&gt;}}}]},

                            0,

                            [{{25,&lt;5158.263.0&gt;},{member,{[],[]},6,6}},

                             {{28,&lt;4625.265.0&gt;},{member,{[],[]},1,1}},

                             {{31,&lt;0.263.0&gt;},{member,{[],[]},0,0}}],

                            [&lt;0.262.0&gt;],

                            {[],[]},

                            [],0,undefined,

                            #Fun&lt;rabbit_misc.execute_mnesia_transaction.1&gt;}

** Reason for termination == 

** {function_clause,[{orddict,fetch,

                              [{31,&lt;0.263.0&gt;},[]],

                              [{file,&quot;orddict.erl&quot;},{line,72}]},

                     {gm,check_neighbours,1,[]},

                     {gm,handle_info,2,[]},

                     {gen_server2,handle_msg,2,[]},

                    
 {proc_lib,wake_up,3,[{file,&quot;proc_lib.erl&quot;},{line,249}]}]}
=INFO REPORT==== 20-Mar-2014::03:41:15 ===

Mirrored-queue (queue 'ha.MNT_Pages_grbhstmntp01' in vhost 'A105'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.289.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.289.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:15 ===
Mirrored-queue (queue 'ha.services_p17' in vhost 'A105'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.266.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.268.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:15 ===
Mirrored-queue (queue 'ha.services_p06' in vhost 'A105'): Slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.30366.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.21958.0</A>&gt;

=INFO REPORT==== 20-Mar-2014::03:41:15 ===
Mirrored-queue (queue 'ha.services_p06' in vhost 'A105'): Promoting slave 
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.30366.0</A>&gt; to master

=INFO REPORT==== 20-Mar-2014::03:41:16 ===
Mirrored-queue (queue 'ha.ElasticSearchConsumer' in vhost 'A105.001'): 
Slave &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P01.3.286.0</A>&gt; saw deaths of mirrors &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at P03.2.288.0</A>&gt; 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140320/e13d3687/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140320/e13d3687/attachment.html</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034681.html">[rabbitmq-discuss] ANN Bunny 1.1.7 is released
</A></li>
	<LI>Next message: <A HREF="034693.html">[rabbitmq-discuss] Network partitioning
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34683">[ date ]</a>
              <a href="thread.html#34683">[ thread ]</a>
              <a href="subject.html#34683">[ subject ]</a>
              <a href="author.html#34683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
