<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Subscribe queueName in RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Subscribe%20queueName%20in%20RabbitMQ&In-Reply-To=%3Cc3904bba-e707-49cb-9b49-28284a37764e%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034280.html">
   <LINK REL="Next"  HREF="034290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Subscribe queueName in RabbitMQ</H1>
    <B>&#1050;&#1088;&#1080;&#1089;&#1090;&#1080;&#1085;&#1072; &#1051;&#1072;&#1087;&#1090;&#1077;&#1074;&#1072;</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Subscribe%20queueName%20in%20RabbitMQ&In-Reply-To=%3Cc3904bba-e707-49cb-9b49-28284a37764e%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Subscribe queueName in RabbitMQ">laptevakristi at gmail.com
       </A><BR>
    <I>Mon Mar  3 11:14:48 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034280.html">[rabbitmq-discuss] rabbitmq saw deaths of mirrors
</A></li>
        <LI>Next message: <A HREF="034290.html">[rabbitmq-discuss] Subscribe queueName in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34287">[ date ]</a>
              <a href="thread.html#34287">[ thread ]</a>
              <a href="subject.html#34287">[ subject ]</a>
              <a href="author.html#34287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> private int handledMessages;

clusteringMessageBroker.Subscribe(
               clusteringOutputQueueName, ProcessMessage, 
typeof(ClusteringOutputMessage));
Thread.Sleep(380000);
clusteringMessageBroker.Unsubscribe(clusteringOutputQueueName, 
ProcessMessage);

private void ProcessMessage(object message)
        {
            clusteringMessage = (ClusteringOutputMessage)message;
            log.InfoFormat(&quot;add message {0}&quot;, 
clusteringMessage.UpdatedClusters.Count());
            handledMessages++;
            log.InfoFormat(&quot;Consumed {0} messages &quot;, handledMessages);
            log.InfoFormat(&quot;ConsumedMessage {0}&quot;, handledMessages);

            var cluster = clusteringMessage.UpdatedClusters;
            var updatedClusters = cluster.Select(
                c =&gt;
                new ClusteringOutputMessage.Cluster
                    {
                        Id = c.Id,
                        MainArticleId = c.MainArticleId,
                        ArticlesIds = c.ArticlesIds
                    }).ToList();

            foreach (var updatedCluster in updatedClusters)
            {
                log.InfoFormat(&quot;id {0}&quot;, updatedCluster.Id);
                log.InfoFormat(&quot;mainid {0}&quot;, updatedCluster.MainArticleId);
                foreach (var articleId in updatedCluster.ArticlesIds)
                {
                    log.InfoFormat(&quot;ArticleId {0}&quot;, articleId);
                }
            }
        }

I want to sibscribing clusteringOutputQueueName, but listening to the queue 
happens once in stages, according to several reports, and it turns out that 
the cycle runs several times and can not count the number of clusters.
I want to count updatedCluster.Id and i want to compare 
updatedCluster.ArticlesIds with the known value.
Help me please!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140303/20dc904c/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140303/20dc904c/attachment.html</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034280.html">[rabbitmq-discuss] rabbitmq saw deaths of mirrors
</A></li>
	<LI>Next message: <A HREF="034290.html">[rabbitmq-discuss] Subscribe queueName in RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34287">[ date ]</a>
              <a href="thread.html#34287">[ thread ]</a>
              <a href="subject.html#34287">[ subject ]</a>
              <a href="author.html#34287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
