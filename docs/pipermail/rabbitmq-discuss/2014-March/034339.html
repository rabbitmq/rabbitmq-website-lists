<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management	plugin enabled
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.2.4%20fails%20to%20start%20if%20management%0A%09plugin%20enabled&In-Reply-To=%3C012a01cf38dc%24a3a42d40%24eaec87c0%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034327.html">
   <LINK REL="Next"  HREF="034616.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management	plugin enabled</H1>
    <B>Junius Wang</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.2.4%20fails%20to%20start%20if%20management%0A%09plugin%20enabled&In-Reply-To=%3C012a01cf38dc%24a3a42d40%24eaec87c0%24%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management	plugin enabled">wangjunbo924 at gmail.com
       </A><BR>
    <I>Thu Mar  6 01:37:25 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034327.html">[rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management plugin enabled
</A></li>
        <LI>Next message: <A HREF="034616.html">[rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management plugin enabled
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34339">[ date ]</a>
              <a href="thread.html#34339">[ thread ]</a>
              <a href="subject.html#34339">[ subject ]</a>
              <a href="author.html#34339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>No, not in a cluster.  Sasl log tells:


=SUPERVISOR REPORT==== 5-Mar-2014::10:31:09 ===
     Supervisor: {local,rabbit_mgmt_sup}
     Context:    child_terminated
     Reason:     {shutdown,
                     [{{badmatch,[]},
                       [{mirrored_supervisor,child,2},
                        {mirrored_supervisor,with_exit_handler,2},
                        {mirrored_supervisor,check_start,4},
                        {mnesia_tm,apply_fun,3},
                        {mnesia_tm,execute_transaction,5},
 
{rabbit_misc,'-execute_mnesia_transaction/1-fun-0-',1},
                        {worker_pool_worker,handle_call,3},
                        {gen_server2,handle_msg,2}]}]}
     Offender:   [{pid,&lt;0.353.0&gt;},
                  {name,mirroring},
                  {mfargs,
                      {mirrored_supervisor,start_internal,
                          [rabbit_mgmt_sup,
                           #Fun&lt;rabbit_misc.execute_mnesia_transaction.1&gt;,
                           [{rabbit_mgmt_db,
                                {rabbit_mgmt_db,start_link,[]},
                                permanent,4294967295,worker,
                                [rabbit_mgmt_db]}]]}},
                  {restart_type,permanent},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 5-Mar-2014::10:31:09 ===
     Supervisor: {local,rabbit_mgmt_sup}
     Context:    shutdown
     Reason:     reached_max_restart_intensity
     Offender:   [{pid,&lt;0.353.0&gt;},
                  {name,mirroring},
                  {mfargs,
                      {mirrored_supervisor,start_internal,
                          [rabbit_mgmt_sup,
                           #Fun&lt;rabbit_misc.execute_mnesia_transaction.1&gt;,
                           [{rabbit_mgmt_db,
                                {rabbit_mgmt_db,start_link,[]},
                                permanent,4294967295,worker,
                                [rabbit_mgmt_db]}]]}},
                  {restart_type,permanent},
                  {shutdown,4294967295},
                  {child_type,worker}]


=SUPERVISOR REPORT==== 5-Mar-2014::10:31:09 ===
     Supervisor: {local,rabbit_mgmt_sup_sup}
     Context:    start_error
     Reason:     {'EXIT',
                     {{shutdown,
                          [{{badmatch,[]},
                            [{mirrored_supervisor,child,2},
                             {mirrored_supervisor,with_exit_handler,2},
                             {mirrored_supervisor,check_start,4},
                             {mnesia_tm,apply_fun,3},
                             {mnesia_tm,execute_transaction,5},
                             {rabbit_misc,
                                 '-execute_mnesia_transaction/1-fun-0-',1},
                             {worker_pool_worker,handle_call,3},
                             {gen_server2,handle_msg,2}]}]},
                      {gen_server2,call,
                          [&lt;0.353.0&gt;,{init,&lt;0.351.0&gt;},infinity]}}}
     Offender:   [{pid,undefined},
                  {name,rabbit_mgmt_sup},
                  {mfargs,{rabbit_mgmt_sup,start_link,[]}},
                  {restart_type,temporary},
                  {shutdown,4294967295},
                  {child_type,supervisor}]


=CRASH REPORT==== 5-Mar-2014::10:31:09 ===
  crasher:
    initial call: application_master:init/4
    pid: &lt;0.314.0&gt;
    registered_name: []
    exception exit: {{shutdown,
                      {failed_to_start_child,rabbit_mgmt_sup,
                       {'EXIT',
                        {{shutdown,
                          [{{badmatch,[]},
                            [{mirrored_supervisor,child,2},
                             {mirrored_supervisor,with_exit_handler,2},
                             {mirrored_supervisor,check_start,4},
                             {mnesia_tm,apply_fun,3},
                             {mnesia_tm,execute_transaction,5},
                             {rabbit_misc,
                              '-execute_mnesia_transaction/1-fun-0-',1},
                             {worker_pool_worker,handle_call,3},
                             {gen_server2,handle_msg,2}]}]},
                         {gen_server2,call,
                          [&lt;0.353.0&gt;,{init,&lt;0.351.0&gt;},infinity]}}}}},
                     {rabbit_mgmt_app,start,[normal,[]]}}
      in function  application_master:init/4
    ancestors: [&lt;0.313.0&gt;]
    messages: [{'EXIT',&lt;0.315.0&gt;,normal}]
    links: [&lt;0.313.0&gt;,&lt;0.7.0&gt;]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 24
    reductions: 109
  neighbours:





-----Original Message-----
From: Simon MacMullen [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>] 
Sent: Wednesday, March 05, 2014 11:28 PM
To: Discussions about RabbitMQ; Junius Wang
Subject: Re: [rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management
plugin enabled

Is this in a cluster?
What does /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit4-sasl.log</A> show?

Cheers, Simon

On 05/03/14 10:32, Junius Wang wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I tried the latest release 3.2.4.  The initial start succeeded after 
</I>&gt;<i> installed. However, as long as I enabled the management plugin(by 
</I>&gt;<i> &quot;rabbitmq_plugins enable rabbitmq_management&quot;) ,RabbitMQ cannot start
</I>&gt;<i> anymore.  I'm CentOS 6.4 with erlong R14B04(erts-5.8.5).   What's the
</I>&gt;<i> matter?
</I>&gt;<i>
</I>&gt;<i> Before the plugin enabled, RabbitMQ is runing:
</I>&gt;<i>
</I>&gt;<i> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at rabbit4</A> rabbitmq]# sudo rabbitmqctl status
</I>&gt;<i>
</I>&gt;<i> Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit4</A> ...
</I>&gt;<i>
</I>&gt;<i> [{pid,28255},
</I>&gt;<i>
</I>&gt;<i> {running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;3.2.4&quot;},
</I>&gt;<i>
</I>&gt;<i>                          {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.7&quot;},
</I>&gt;<i>
</I>&gt;<i>                          {xmerl,&quot;XML parser&quot;,&quot;1.2.10&quot;},
</I>&gt;<i>
</I>&gt;<i>                          {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.5&quot;},
</I>&gt;<i>
</I>&gt;<i>                          {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.10&quot;},
</I>&gt;<i>
</I>&gt;<i>                          {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.5&quot;},
</I>&gt;<i>
</I>&gt;<i>                          {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.5&quot;}]},
</I>&gt;<i>
</I>&gt;<i> {os,{unix,linux}},
</I>&gt;<i>
</I>&gt;<i> {erlang_version,&quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit] [rq:1] 
</I>&gt;<i> [async-threads:30] [kernel-poll:true]\n&quot;},
</I>&gt;<i>
</I>&gt;<i> {memory,[{total,27470168},
</I>&gt;<i>
</I>&gt;<i>            {connection_procs,2648},
</I>&gt;<i>
</I>&gt;<i>            {queue_procs,5296},
</I>&gt;<i>
</I>&gt;<i>            {plugins,0},
</I>&gt;<i>
</I>&gt;<i>            {other_proc,9321128},
</I>&gt;<i>
</I>&gt;<i>            {mnesia,58928},
</I>&gt;<i>
</I>&gt;<i>            {mgmt_db,0},
</I>&gt;<i>
</I>&gt;<i>            {msg_index,21112},
</I>&gt;<i>
</I>&gt;<i>            {other_ets,775152},
</I>&gt;<i>
</I>&gt;<i>            {binary,6256},
</I>&gt;<i>
</I>&gt;<i>            {code,14561678},
</I>&gt;<i>
</I>&gt;<i>            {atom,1360113},
</I>&gt;<i>
</I>&gt;<i>            {other_system,1357857}]},
</I>&gt;<i>
</I>&gt;<i> {vm_memory_high_watermark,0.4},
</I>&gt;<i>
</I>&gt;<i> {vm_memory_limit,247676928},
</I>&gt;<i>
</I>&gt;<i> {disk_free_limit,50000000},
</I>&gt;<i>
</I>&gt;<i> {disk_free,5879087104},
</I>&gt;<i>
</I>&gt;<i> {file_descriptors,[{total_limit,924},
</I>&gt;<i>
</I>&gt;<i>                      {total_used,3},
</I>&gt;<i>
</I>&gt;<i>                      {sockets_limit,829},
</I>&gt;<i>
</I>&gt;<i>                      {sockets_used,1}]},
</I>&gt;<i>
</I>&gt;<i> {processes,[{limit,1048576},{used,124}]},
</I>&gt;<i>
</I>&gt;<i> {run_queue,0},
</I>&gt;<i>
</I>&gt;<i> {uptime,16}]
</I>&gt;<i>
</I>&gt;<i> ...done.
</I>&gt;<i>
</I>&gt;<i> After it's enabled. RabbitMQ fails to start:
</I>&gt;<i>
</I>&gt;<i> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at rabbit4</A> rabbitmq]# cat /var/log/rabbitmq/startup_log
</I>&gt;<i>
</I>&gt;<i>                RabbitMQ 3.2.4. Copyright (C) 2007-2013 GoPivotal, Inc.
</I>&gt;<i>
</I>&gt;<i>    ##  ##      Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>
</I>&gt;<i>
</I>&gt;<i>    ##  ##
</I>&gt;<i>
</I>&gt;<i>    ##########  Logs: /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit4.log</A>
</I>&gt;<i>
</I>&gt;<i>    ######  ##        /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit4-sasl.log</A>
</I>&gt;<i>
</I>&gt;<i>    ##########
</I>&gt;<i>
</I>&gt;<i>                Starting broker...
</I>&gt;<i>
</I>&gt;<i> BOOT FAILED
</I>&gt;<i>
</I>&gt;<i> ===========
</I>&gt;<i>
</I>&gt;<i> Error description:
</I>&gt;<i>
</I>&gt;<i>     {could_not_start,rabbitmq_management,
</I>&gt;<i>
</I>&gt;<i>         {{shutdown,
</I>&gt;<i>
</I>&gt;<i>              {failed_to_start_child,rabbit_mgmt_sup,
</I>&gt;<i>
</I>&gt;<i>                  {'EXIT',
</I>&gt;<i>
</I>&gt;<i>                      {{shutdown,
</I>&gt;<i>
</I>&gt;<i>                           [{{badmatch,[]},
</I>&gt;<i>
</I>&gt;<i>                             [{mirrored_supervisor,child,2},
</I>&gt;<i>
</I>&gt;<i>                              
</I>&gt;<i> {mirrored_supervisor,with_exit_handler,2},
</I>&gt;<i>
</I>&gt;<i>                              {mirrored_supervisor,check_start,4},
</I>&gt;<i>
</I>&gt;<i>                              {mnesia_tm,apply_fun,3},
</I>&gt;<i>
</I>&gt;<i>                              {mnesia_tm,execute_transaction,5},
</I>&gt;<i>
</I>&gt;<i>                              {rabbit_misc,
</I>&gt;<i>
</I>&gt;<i>                                  
</I>&gt;<i> '-execute_mnesia_transaction/1-fun-0-',1},
</I>&gt;<i>
</I>&gt;<i>                              {worker_pool_worker,handle_call,3},
</I>&gt;<i>
</I>&gt;<i>                              {gen_server2,handle_msg,2}]}]},
</I>&gt;<i>
</I>&gt;<i>                       {gen_server2,call,
</I>&gt;<i>
</I>&gt;<i>                           [&lt;0.353.0&gt;,{init,&lt;0.351.0&gt;},infinity]}}}}},
</I>&gt;<i>
</I>&gt;<i>          {rabbit_mgmt_app,start,[normal,[]]}}}
</I>&gt;<i>
</I>&gt;<i> Log files (may contain more information):
</I>&gt;<i>
</I>&gt;<i>     /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit4.log</A>
</I>&gt;<i>
</I>&gt;<i>     /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbit4-sasl.log</A>
</I>&gt;<i>
</I>&gt;<i> {&quot;init terminating in
</I>&gt;<i> do_boot&quot;,{rabbit,failure_during_boot,{could_not_start,rabbitmq_managem
</I>&gt;<i> ent,{{shutdown,{failed_to_start_child,rabbit_mgmt_sup,{'EXIT',{{shutdo
</I>&gt;<i> wn,[{{badmatch,[]},[{mirrored_supervisor,child,2},{mirrored_supervisor
</I>&gt;<i> ,with_exit_handler,2},{mirrored_supervisor,check_start,4},{mnesia_tm,a
</I>&gt;<i> pply_fun,3},{mnesia_tm,execute_transaction,5},{rabbit_misc,'-execute_m
</I>&gt;<i> nesia_transaction/1-fun-0-',1},{worker_pool_worker,handle_call,3},{gen
</I>&gt;<i> _server2,handle_msg,2}]}]},{gen_server2,call,[&lt;0.353.0&gt;,{init,&lt;0.351.0
</I>&gt;<i> &gt;},infinity]}}}}},{rabbit_mgmt_app,start,[normal,[]]}}}}}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

--
Simon MacMullen
RabbitMQ, Pivotal

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034327.html">[rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management plugin enabled
</A></li>
	<LI>Next message: <A HREF="034616.html">[rabbitmq-discuss] RabbitMQ 3.2.4 fails to start if management plugin enabled
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34339">[ date ]</a>
              <a href="thread.html#34339">[ thread ]</a>
              <a href="subject.html#34339">[ subject ]</a>
              <a href="author.html#34339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
