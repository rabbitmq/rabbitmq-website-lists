<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Transactions and duplicate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Transactions%20and%20duplicate&In-Reply-To=%3C53349CE9.2040205%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034868.html">
   <LINK REL="Next"  HREF="034869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Transactions and duplicate</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Transactions%20and%20duplicate&In-Reply-To=%3C53349CE9.2040205%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Transactions and duplicate">matthias at rabbitmq.com
       </A><BR>
    <I>Thu Mar 27 21:49:29 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034868.html">[rabbitmq-discuss] Transactions and duplicate
</A></li>
        <LI>Next message: <A HREF="034869.html">[rabbitmq-discuss] Transactions and duplicate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34829">[ date ]</a>
              <a href="thread.html#34829">[ thread ]</a>
              <a href="subject.html#34829">[ subject ]</a>
              <a href="author.html#34829">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/03/14 21:14, Simon MacMullen wrote:
  &gt; But if you are consuming (it was not very clear from your original mail
&gt;<i> whether you were using basic.consume or basic.get) then subsequent
</I>&gt;<i> messages can be duplicated.
</I>
The OP said &quot;I used a tx channel with basic.get and no autoack, I 
manually ack() and commit() every message.&quot;

Unlike publishes, acks do not have a corresponding confirmation. Not in 
the protocol, and, more importantly, not internally within the server. 
In a transaction context, the receipt of a commit-ok by a client 
therefore only indicates that the server has seen the acks, not that it 
has processed them, let alone persisted the information to disk.

We may want to make that clear in <A HREF="http://www.rabbitmq.com/semantics.html#tx">http://www.rabbitmq.com/semantics.html#tx</A>

Duplicates are unavoidable in general, i.e. even if the tx guarantees 
were stronger there would still be plenty of failure scenarios that 
result in duplicates. Apps need to be able to cope with that.

Matthias.
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034868.html">[rabbitmq-discuss] Transactions and duplicate
</A></li>
	<LI>Next message: <A HREF="034869.html">[rabbitmq-discuss] Transactions and duplicate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34829">[ date ]</a>
              <a href="thread.html#34829">[ thread ]</a>
              <a href="subject.html#34829">[ subject ]</a>
              <a href="author.html#34829">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
