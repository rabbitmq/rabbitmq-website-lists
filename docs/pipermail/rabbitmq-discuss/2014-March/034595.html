<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] File Description Exhaustion with Transient	Messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20File%20Description%20Exhaustion%20with%20Transient%0A%09Messages&In-Reply-To=%3C0ef901cf3faf%247e761bd0%247b625370%24%40euphoriaaudio.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034591.html">
   <LINK REL="Next"  HREF="034596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] File Description Exhaustion with Transient	Messages</H1>
    <B>Chris Larsen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20File%20Description%20Exhaustion%20with%20Transient%0A%09Messages&In-Reply-To=%3C0ef901cf3faf%247e761bd0%247b625370%24%40euphoriaaudio.com%3E"
       TITLE="[rabbitmq-discuss] File Description Exhaustion with Transient	Messages">clarsen at euphoriaaudio.com
       </A><BR>
    <I>Fri Mar 14 18:01:58 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034591.html">[rabbitmq-discuss] Issues with RabbitMQ, SSL and .NET
</A></li>
        <LI>Next message: <A HREF="034596.html">[rabbitmq-discuss] File Description Exhaustion with Transient Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34595">[ date ]</a>
              <a href="thread.html#34595">[ thread ]</a>
              <a href="subject.html#34595">[ subject ]</a>
              <a href="author.html#34595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello again, We had a 3.1.5 node exhaust the 65K FDs allocated to MQ and I'm
wondering what consumes and holds the FDs. I know from the list that each
connection will eat an FD and each queue will consume one or more
descriptors. However at the time of the alarm we only had 8K connections and
5K queues.  That wouldn't account for 65K FDs though. 

 

Lsof shows that there are of 50K handles consumed with references to the
transient message store, e.g. &quot;msg_store_transient/352.rdq&quot;. There are about
30M messages queued up and the devs said that most of them are marked for
persistence now (only about 2K unacked). Are these messages responsible for
holding open so many FDs? There isn't any memory or disk space pressure (7GB
of 32GB memory used).  Would disabling acknowledgements help to reduce the
FD usage?

 

Thank you!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140314/b0c8aa5b/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140314/b0c8aa5b/attachment.html</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034591.html">[rabbitmq-discuss] Issues with RabbitMQ, SSL and .NET
</A></li>
	<LI>Next message: <A HREF="034596.html">[rabbitmq-discuss] File Description Exhaustion with Transient Messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34595">[ date ]</a>
              <a href="thread.html#34595">[ thread ]</a>
              <a href="subject.html#34595">[ subject ]</a>
              <a href="author.html#34595">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
