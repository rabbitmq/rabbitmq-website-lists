<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 3.2.2 cluster shutting down
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.2.2%20cluster%20shutting%20down&In-Reply-To=%3C53189202.4030400%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034358.html">
   <LINK REL="Next"  HREF="034360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 3.2.2 cluster shutting down</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%203.2.2%20cluster%20shutting%20down&In-Reply-To=%3C53189202.4030400%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ 3.2.2 cluster shutting down">simon at rabbitmq.com
       </A><BR>
    <I>Thu Mar  6 15:19:30 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034358.html">[rabbitmq-discuss] RabbitMQ 3.2.2 cluster shutting down
</A></li>
        <LI>Next message: <A HREF="034360.html">[rabbitmq-discuss] RabbitMQ 3.2.2 cluster shutting down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34359">[ date ]</a>
              <a href="thread.html#34359">[ thread ]</a>
              <a href="subject.html#34359">[ subject ]</a>
              <a href="author.html#34359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/03/14 15:04, Andy Martin wrote:
&gt;<i> ** {{badmatch,{error,not_found}},
</I>&gt;<i>      [{rabbit_amqqueue_process,i,2,[]},
</I>&gt;<i>       {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>       {rabbit_amqqueue_process,'-infos/2-lc$^0/1-0-',2,[]},
</I>&gt;<i>       {rabbit_amqqueue_process,emit_stats,2,[]},
</I>
That's the exact stack trace of a bug we fixed in 3.2.1. Are you 
completely sure that both nodes are running 3.2.2?

&gt;<i> I have a two-node autoheal cluster. Yesterday I came in to find out
</I>&gt;<i> that neither server in the cluster was seeing the other, but there
</I>&gt;<i> was no message about a partition having occurred.
</I>
You will only be notified about the partition once the servers can see 
each other again - until that happens, A thinks B is down, and B thinks 
A is down; they have no way to know it's a partition.

&gt;<i> Today I came in to
</I>&gt;<i> find one of the servers down. I can't find anything in the logs that
</I>&gt;<i> would indicate why this is happening. What should I be looking for in
</I>&gt;<i> the logs?
</I>
&quot;Down&quot; as in the Erlang VM had exited, or &quot;down&quot; as in the Erlang VM was 
still running but the RabbitMQ application had stopped?

If the former, then it can't be anything to do with autoheal since that 
doesn't attempt to stop the node completely. You might want to look for 
&quot;Halting Erlang VM&quot; in the logs; that would imply the broker was shut 
down deliberately. If that's not there then please post the logs 
somewhere with an indication of when you became aware the server was down.

If the latter, it's possible that you ran into one of the bugs we fixed 
in 3.2.4, where an attempt at autoheal can get stuck. There should still 
be messages about autoheal in the logs in that case though.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034358.html">[rabbitmq-discuss] RabbitMQ 3.2.2 cluster shutting down
</A></li>
	<LI>Next message: <A HREF="034360.html">[rabbitmq-discuss] RabbitMQ 3.2.2 cluster shutting down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34359">[ date ]</a>
              <a href="thread.html#34359">[ thread ]</a>
              <a href="subject.html#34359">[ subject ]</a>
              <a href="author.html#34359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
