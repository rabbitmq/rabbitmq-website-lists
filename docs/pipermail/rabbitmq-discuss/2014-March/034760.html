<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue Failover and restore
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Failover%20and%20restore&In-Reply-To=%3CCAEJg2GDBBg5%3DgfMU7RxFMvggKABUKtUhCAYZPzU__qQ1JvTE_Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034759.html">
   <LINK REL="Next"  HREF="034761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue Failover and restore</H1>
    <B>Arun Rao</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Failover%20and%20restore&In-Reply-To=%3CCAEJg2GDBBg5%3DgfMU7RxFMvggKABUKtUhCAYZPzU__qQ1JvTE_Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Queue Failover and restore">arunrao.seattle at gmail.com
       </A><BR>
    <I>Tue Mar 25 07:06:14 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034759.html">[rabbitmq-discuss] Queue Failover and restore
</A></li>
        <LI>Next message: <A HREF="034761.html">[rabbitmq-discuss] Queue Failover and restore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34760">[ date ]</a>
              <a href="thread.html#34760">[ thread ]</a>
              <a href="subject.html#34760">[ subject ]</a>
              <a href="author.html#34760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael -

Thanks for your quick response, as always!

I am already monitoring node column in HTTP API for queues. I get to know
when there is a node failure and I see the queue distribution on nodes as a
pie chart.

After I bring the node back up, I cannot help redistribute queues evenly
again. I am processing several hundred Gigabytes of data per day. CPU Usage
on nodes where queues live and delivery rates are directly related to
number of messages remaining in my queues, that is why I want to
redistribute the queues back again.

(Please note: I have enough consumers to listen on all nodes.)

Please advise if this would make sense to provide an option via rabbitmqctl
or rabbitmqadmin or via management UI?

Thanks for your help!


On Mon, Mar 24, 2014 at 11:52 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;wrote:

&gt;<i> On 25 March 2014 at 10:49:26, Arun Rao (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">arunrao.seattle at gmail.com</A>) wrote:
</I>&gt;<i> &gt; &gt; I am under the impression I get more throughput having 16 queues
</I>&gt;<i> &gt; living on 4 different nodes compared to 16 queues living on 3 nodes.
</I>&gt;<i> &gt; This difference becomes noticeable when the number of messages
</I>&gt;<i> &gt; ready picked up are significantly higher? This actually goes
</I>&gt;<i> &gt; back to making queues local and providing more hardware. Am i
</I>&gt;<i> &gt; mistaken?
</I>&gt;<i>
</I>&gt;<i> This is partially true. What matters is publisher and consumer locality.
</I>&gt;<i> For maximum throughput you want to avoid intra-cluster traffic.
</I>&gt;<i>
</I>&gt;<i> In an HA setup, your clients need to reconnect to another node, so likely
</I>&gt;<i> you won't get in a situation when most clients are connected to a single
</I>&gt;<i> node.
</I>&gt;<i>
</I>&gt;<i> If that's not good enough, you can use HTTP API to find what node hosts
</I>&gt;<i> master
</I>&gt;<i> for the queue in question and connect there.
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140325/ad8bd609/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140325/ad8bd609/attachment.html</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034759.html">[rabbitmq-discuss] Queue Failover and restore
</A></li>
	<LI>Next message: <A HREF="034761.html">[rabbitmq-discuss] Queue Failover and restore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34760">[ date ]</a>
              <a href="thread.html#34760">[ thread ]</a>
              <a href="subject.html#34760">[ subject ]</a>
              <a href="author.html#34760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
