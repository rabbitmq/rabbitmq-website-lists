<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federating messages in upstream with specific routing key
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federating%20messages%20in%20upstream%20with%0A%20specific%20routing%20key&In-Reply-To=%3C538EF7B9.1060709%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036428.html">
   <LINK REL="Next"  HREF="036427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federating messages in upstream with specific routing key</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federating%20messages%20in%20upstream%20with%0A%20specific%20routing%20key&In-Reply-To=%3C538EF7B9.1060709%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Federating messages in upstream with specific routing key">simon at rabbitmq.com
       </A><BR>
    <I>Wed Jun  4 11:40:57 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036428.html">[rabbitmq-discuss] Federating messages in upstream with	specific routing key
</A></li>
        <LI>Next message: <A HREF="036427.html">[rabbitmq-discuss] Use of QueueDeclarePassive generates errors in	log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36441">[ date ]</a>
              <a href="thread.html#36441">[ thread ]</a>
              <a href="subject.html#36441">[ subject ]</a>
              <a href="author.html#36441">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/06/14 00:43, vish.ramachandran wrote:
&gt;<i> I am in reference to this FAQ at
</I>&gt;<i> <A HREF="https://www.rabbitmq.com/federated-exchanges.html">https://www.rabbitmq.com/federated-exchanges.html</A>
</I>&gt;<i>
</I>&gt;<i> ==========
</I>&gt;<i> Are all messages copied?
</I>&gt;<i> Only those messages that need to be copied are propagated. This is an
</I>&gt;<i> optimisation arranged dynamically by the federation plugin. (See below.)
</I>&gt;<i>
</I>&gt;<i> ==========
</I>&gt;<i>
</I>&gt;<i> My situation requires me to federate from an upstream exchange only messages
</I>&gt;<i> with a specific routing key. The above FAQ seems to indicate this is
</I>&gt;<i> possible. However, I didn't find any option that allows me to specify a
</I>&gt;<i> routing key while configuring upstream queue.
</I>&gt;<i>
</I>&gt;<i> Is this possible ?
</I>
It's automatic; there's nothing special to configure.

Federation will add a binding upstream when you add a binding 
downstream, and keep the bindings in sync. So only messages that will be 
delivered downstream get transmitted over the link.

Or are you saying you explicitly want to prevent messages from being 
federated, even if someone binds downstream saying they want them? In 
that case, you would need to do something like:

1) Declare two exchanges, A and B upstream. Ensure you publish to A.
2) Bind A (source) and B (destination) with the routing key you want to 
use to limit federated messages.
3) Set B as the upstream exchange for the federated exchange downstream.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036428.html">[rabbitmq-discuss] Federating messages in upstream with	specific routing key
</A></li>
	<LI>Next message: <A HREF="036427.html">[rabbitmq-discuss] Use of QueueDeclarePassive generates errors in	log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36441">[ date ]</a>
              <a href="thread.html#36441">[ thread ]</a>
              <a href="subject.html#36441">[ subject ]</a>
              <a href="author.html#36441">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
