<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] {disk_free_limit, {mem_relative, 1.0}}
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%7Bdisk_free_limit%2C%20%7Bmem_relative%2C%201.0%7D%7D&In-Reply-To=%3CCAEJg2GBHLOGO1E1rVRp%2BfP788EOYFP9btnedMDGrDUzGkoEJbw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036592.html">
   <LINK REL="Next"  HREF="036595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] {disk_free_limit, {mem_relative, 1.0}}</H1>
    <B>Arun Rao</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%7Bdisk_free_limit%2C%20%7Bmem_relative%2C%201.0%7D%7D&In-Reply-To=%3CCAEJg2GBHLOGO1E1rVRp%2BfP788EOYFP9btnedMDGrDUzGkoEJbw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] {disk_free_limit, {mem_relative, 1.0}}">arunrao.seattle at gmail.com
       </A><BR>
    <I>Fri Jun 13 01:57:40 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036592.html">[rabbitmq-discuss] {disk_free_limit, {mem_relative, 1.0}}
</A></li>
        <LI>Next message: <A HREF="036595.html">[rabbitmq-discuss] {disk_free_limit, {mem_relative, 1.0}}
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36594">[ date ]</a>
              <a href="thread.html#36594">[ thread ]</a>
              <a href="subject.html#36594">[ subject ]</a>
              <a href="author.html#36594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The location of the parameter also matters, is your rabbitmq.config file
similar to this?

[
{rabbit, [
...
{disk_free_limit, {mem_relative,1.0}}
...
]}
].

Also setting this relative to memory sets really &quot;low watermark&quot;. For
example, If you have 16G RAM and 100G Hard disk. Setting this relative to
RAM makes low watermark set at 16GB. This means that Publishers are blocked
when your available disk space approaches 84GB (100-16). So I set this
value to 0.1 and now publishers are not blocking in case of backup until
98.4 (100-1.6). HTH


On Thu, Jun 12, 2014 at 4:37 PM, carlhoerberg &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">carl.hoerberg at gmail.com</A>&gt;
wrote:

&gt;<i> It doesn't seems like we're able to configure disk_free_limit with
</I>&gt;<i> {mem_relative, 1.0} (as described here:
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/configure.html">http://www.rabbitmq.com/configure.html</A>). The mgmt interface reports &quot;(not
</I>&gt;<i> available)&quot; and the sasl log reports:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =CRASH REPORT==== 9-Jun-2014::15:17:09 ===
</I>&gt;<i>   crasher:
</I>&gt;<i>     initial call: rabbit_disk_monitor:init/1
</I>&gt;<i>     pid: &lt;0.251.0&gt;
</I>&gt;<i>     registered_name: []
</I>&gt;<i>     exception exit: {badarith,
</I>&gt;<i>                         [{rabbit_disk_monitor,interval,1,[]},
</I>&gt;<i>                          {rabbit_disk_monitor,start_timer,1,[]},
</I>&gt;<i>                          {rabbit_disk_monitor,init,1,[]},
</I>&gt;<i>                          {gen_server,init_it,6,
</I>&gt;<i>                              [{file,&quot;gen_server.erl&quot;},{line,306}]},
</I>&gt;<i>                          {proc_lib,init_p_do_apply,3,
</I>&gt;<i>                              [{file,&quot;proc_lib.erl&quot;},{line,239}]}]}
</I>&gt;<i>       in function  gen_server:init_it/6 (gen_server.erl, line 330)
</I>&gt;<i>     ancestors: [rabbit_disk_monitor_sup,rabbit_sup,&lt;0.96.0&gt;]
</I>&gt;<i>     messages: []
</I>&gt;<i>     links: [&lt;0.250.0&gt;]
</I>&gt;<i>     dictionary: []
</I>&gt;<i>     trap_exit: false
</I>&gt;<i>     status: running
</I>&gt;<i>     heap_size: 6772
</I>&gt;<i>     stack_size: 27
</I>&gt;<i>     reductions: 40670
</I>&gt;<i>   neighbours:
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 9-Jun-2014::15:17:09 ===
</I>&gt;<i>      Supervisor: {local,rabbit_disk_monitor_sup}
</I>&gt;<i>      Context:    start_error
</I>&gt;<i>      Reason:     {badarith,
</I>&gt;<i>                      [{rabbit_disk_monitor,interval,1,[]},
</I>&gt;<i>                       {rabbit_disk_monitor,start_timer,1,[]},
</I>&gt;<i>                       {rabbit_disk_monitor,init,1,[]},
</I>&gt;<i>                       {gen_server,init_it,6,
</I>&gt;<i>                           [{file,&quot;gen_server.erl&quot;},{line,306}]},
</I>&gt;<i>                       {proc_lib,init_p_do_apply,3,
</I>&gt;<i>                           [{file,&quot;proc_lib.erl&quot;},{line,239}]}]}
</I>&gt;<i>      Offender:   [{pid,undefined},
</I>&gt;<i>                   {name,rabbit_disk_monitor},
</I>&gt;<i>                   {mfargs,
</I>&gt;<i>
</I>&gt;<i> {rabbit_disk_monitor,start_link,[{mem_relative,1.0}]}},
</I>&gt;<i>                   {restart_type,{transient,1}},
</I>&gt;<i>                   {shutdown,4294967295},
</I>&gt;<i>                   {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://rabbitmq.1065348.n5.nabble.com/disk-free-limit-mem-relative-1-0-tp36187.html">http://rabbitmq.1065348.n5.nabble.com/disk-free-limit-mem-relative-1-0-tp36187.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140612/f4987372/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140612/f4987372/attachment.html</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036592.html">[rabbitmq-discuss] {disk_free_limit, {mem_relative, 1.0}}
</A></li>
	<LI>Next message: <A HREF="036595.html">[rabbitmq-discuss] {disk_free_limit, {mem_relative, 1.0}}
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36594">[ date ]</a>
              <a href="thread.html#36594">[ thread ]</a>
              <a href="subject.html#36594">[ subject ]</a>
              <a href="author.html#36594">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
