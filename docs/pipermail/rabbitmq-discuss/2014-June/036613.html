<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 3.3.x dynamic shovel, delivery-mode?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.3.x%20dynamic%20shovel%2C%20delivery-mode%3F&In-Reply-To=%3CCAD6m6fF2ZCtRdQYz1huWKNcvpv3%2BCA8uCg4ETAZ%2B%2BNAVWGOyOg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036600.html">
   <LINK REL="Next"  HREF="036572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 3.3.x dynamic shovel, delivery-mode?</H1>
    <B>Jason McIntosh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%203.3.x%20dynamic%20shovel%2C%20delivery-mode%3F&In-Reply-To=%3CCAD6m6fF2ZCtRdQYz1huWKNcvpv3%2BCA8uCg4ETAZ%2B%2BNAVWGOyOg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] 3.3.x dynamic shovel, delivery-mode?">mcintoshj at gmail.com
       </A><BR>
    <I>Fri Jun 13 21:39:04 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036600.html">[rabbitmq-discuss] 3.3.x dynamic shovel, delivery-mode?
</A></li>
        <LI>Next message: <A HREF="036572.html">[rabbitmq-discuss] Process for updating RabbitMQ Version 3.0.1 and	3.1.1 to 3.3.x?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36613">[ date ]</a>
              <a href="thread.html#36613">[ thread ]</a>
              <a href="subject.html#36613">[ subject ]</a>
              <a href="author.html#36613">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We also set the following in our shovels.  Looking at the dynamic support,
some of these appear to be able to be set.

delivery_mode - we override right now as well but I'm probably going to
disable this and let whatever originally was published just go through.
Course, looks like Michael needs this

reconnect_delay - we set to 30 seconds (default seems to be 5) as we were
getting spammed during data center disconnects with the shorter retries.
 It appears configuring this dynamically is supported from what I can tell
of the source code.
prefetch_count - we set this to 1500 which seemed to be a pretty decent
number for our systems.  If I'm looking at the right setting (the
rabbitmq_shovel.app.src) this is defaulted to 1000.

headers (currently) - we set a source on a header specifying where the
message came from.  Because though that overrides any message published
headers, we're looking to use the cluster_id property instead.  Though,
just digging through the source, I see &quot;AddHeaders&quot; from
&lt;&lt;&quot;add-forward-headers&quot;&gt;&gt;.  Looks like the dynamic shovel finally adds that
support without replacing existing headers!  Sadly, it's not in the static
shovel :(  I may play with adding this myself for some erlang programming
learning.






On Fri, Jun 13, 2014 at 4:20 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 12/06/2014 5:19PM, Laing, Michael wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> We will not be able to use dynamic shovels in our proxies and product
</I>&gt;&gt;<i> clusters until we can set delivery_mode, in our case to 1 as we never
</I>&gt;&gt;<i> persist messages in the core clusters.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Actually we set user_id too.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks, that's useful to know.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Jason McIntosh
<A HREF="https://github.com/jasonmcintosh/">https://github.com/jasonmcintosh/</A>
573-424-7612
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140613/9f658595/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140613/9f658595/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036600.html">[rabbitmq-discuss] 3.3.x dynamic shovel, delivery-mode?
</A></li>
	<LI>Next message: <A HREF="036572.html">[rabbitmq-discuss] Process for updating RabbitMQ Version 3.0.1 and	3.1.1 to 3.3.x?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36613">[ date ]</a>
              <a href="thread.html#36613">[ thread ]</a>
              <a href="subject.html#36613">[ subject ]</a>
              <a href="author.html#36613">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
