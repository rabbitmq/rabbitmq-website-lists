<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Persistant/Semaphore
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistant/Semaphore&In-Reply-To=%3C690b21bf-592c-4c41-9d44-e0aa7ebdce9c%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036545.html">
   <LINK REL="Next"  HREF="036504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Persistant/Semaphore</H1>
    <B>Larry Lewis</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Persistant/Semaphore&In-Reply-To=%3C690b21bf-592c-4c41-9d44-e0aa7ebdce9c%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Persistant/Semaphore">larry.gooroo at gmail.com
       </A><BR>
    <I>Fri Jun  6 05:44:46 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036545.html">[rabbitmq-discuss] Permissions and exchanges
</A></li>
        <LI>Next message: <A HREF="036504.html">[rabbitmq-discuss] Persistant/Semaphore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36494">[ date ]</a>
              <a href="thread.html#36494">[ thread ]</a>
              <a href="subject.html#36494">[ subject ]</a>
              <a href="author.html#36494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, been tinkering with RabbitMQ to solve a number of issues with 
distributed servers, mostly the tutorials/docs have given me the 
information needed but I have a special use case that I can't unravel.

In the simplest of the usages I have a queue called 'online' the message is 
either 'On' or 'Off' to indicate whether servers should be online or 
offline. The number of servers is variable depending on load (eg we are 
planning to use AWS for some of our sites) So there is always one and only 
one message persistently in the queue which indicates whether the server 
should be handling user web requests. So I need the value to be sticky, 
when a new server joins the queue it gets the last message and then is 
'subscribed' and will receive the state change.

My idea is that when everything is online I could just run a cron job which 
will ask the queue if it is on/off if off it will stop the web service (I 
already do this manually with a semaphore file) and wait for the message to 
'clear' back to 'online'. So how do I set up the sender and server side to 
do this sort of semaphore? I assume the consumer side will just be similar 
to what I have already being playing with on my local system here working 
through the tutorials.

Thanks in advance,
Larry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140605/23ac4c0d/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140605/23ac4c0d/attachment.html</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036545.html">[rabbitmq-discuss] Permissions and exchanges
</A></li>
	<LI>Next message: <A HREF="036504.html">[rabbitmq-discuss] Persistant/Semaphore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36494">[ date ]</a>
              <a href="thread.html#36494">[ thread ]</a>
              <a href="subject.html#36494">[ subject ]</a>
              <a href="author.html#36494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
