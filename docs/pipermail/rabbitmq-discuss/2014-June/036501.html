<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ waits forever for PID file during	startup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20waits%20forever%20for%20PID%20file%20during%0A%09startup&In-Reply-To=%3CCAHuDZ5qXfRaf4AOXYoe1gvB0tu%3Dxb6q8DPhJ_vHy2RW1QoSp3g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036500.html">
   <LINK REL="Next"  HREF="036502.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ waits forever for PID file during	startup</H1>
    <B>Cesar Munoz</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20waits%20forever%20for%20PID%20file%20during%0A%09startup&In-Reply-To=%3CCAHuDZ5qXfRaf4AOXYoe1gvB0tu%3Dxb6q8DPhJ_vHy2RW1QoSp3g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ waits forever for PID file during	startup">cesar.munoz at ammeon.com
       </A><BR>
    <I>Fri Jun  6 11:55:04 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036500.html">[rabbitmq-discuss] RabbitMQ waits forever for PID file during startup
</A></li>
        <LI>Next message: <A HREF="036502.html">[rabbitmq-discuss] What happens during a network partition?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36501">[ date ]</a>
              <a href="thread.html#36501">[ thread ]</a>
              <a href="subject.html#36501">[ subject ]</a>
              <a href="author.html#36501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Simon,

the ulimits for rabbitmq user are pretty much the same, the only difference
is that max user processes is set to 1024 instead of 2066207.

About the system itself, it is true that there has to be something strange
going on if a shell redirection can fail, but I'm checking the
configuration and I don't see anything specially awkward.

We are using Red Hat 6.4, and these are the parameters that we set in the
sysctl.conf:
<A HREF="http://pastebin.com/SfJBwrna">http://pastebin.com/SfJBwrna</A>

The rest of the parameters in the kickstart file are pretty much the
standard ones.
This is an intermittent issue (we are testing how often it happens, so far
we got 3 failures in 13 installations), so it is harder to track it!
Either way, restarting the service works, so it looks like whatever causes
the problem disappears after a while. I've been trying to find what could
make this non-deterministic, but so far I haven't noticed anything unusual.

Thanks again!
Cesar.


On 6 June 2014 11:27, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 06/06/2014 10:49AM, Cesar Munoz wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Simon,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> the set -e looks like a very good idea, at least the process will return
</I>&gt;&gt;<i> the failure straight away!
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sure!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  These are the ulimits:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at ms1</A> ~]# ulimit -a
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;snip&gt;
</I>&gt;<i>
</I>&gt;<i> Those are the ulimits which apply to root - maybe they are different for
</I>&gt;<i> the &quot;rabbitmq&quot; user?
</I>&gt;<i>
</I>&gt;<i> But more to the point: we're failing to do something very very simple
</I>&gt;<i> here, there has to be something weird about this system if echo or shell
</I>&gt;<i> redirection can fail with an error message about memory allocation.
</I>&gt;<i>
</I>&gt;<i> So have you configured anything unusual about this system?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>
-- 
This email and any files transmitted with it are confidential and intended 
solely for the use of the individual or entity to whom they are addressed. 
If you have received this email in error please notify the system manager. 
This message contains confidential information and is intended only for the 
individual named. If you are not the named addressee you should not 
disseminate, distribute or copy this e-mail.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140606/f30f31f9/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140606/f30f31f9/attachment.html</A>&gt;
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036500.html">[rabbitmq-discuss] RabbitMQ waits forever for PID file during startup
</A></li>
	<LI>Next message: <A HREF="036502.html">[rabbitmq-discuss] What happens during a network partition?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36501">[ date ]</a>
              <a href="thread.html#36501">[ thread ]</a>
              <a href="subject.html#36501">[ subject ]</a>
              <a href="author.html#36501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
