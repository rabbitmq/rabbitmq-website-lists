<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Web-STOMP plugin - Authentication with SSL Client Certificates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Web-STOMP%20plugin%20-%20Authentication%20with%20SSL%0A%20Client%20Certificates&In-Reply-To=%3CCANcm3vkrrEs5mx3CaN%3DiduadcBbDvkRA6V4%2Bn3ikDK_%3D6ymgvQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036738.html">
   <LINK REL="Next"  HREF="036754.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Web-STOMP plugin - Authentication with SSL Client Certificates</H1>
    <B>Andrei</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Web-STOMP%20plugin%20-%20Authentication%20with%20SSL%0A%20Client%20Certificates&In-Reply-To=%3CCANcm3vkrrEs5mx3CaN%3DiduadcBbDvkRA6V4%2Bn3ikDK_%3D6ymgvQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Web-STOMP plugin - Authentication with SSL Client Certificates">andrei002 at gmail.com
       </A><BR>
    <I>Thu Jun 19 16:47:28 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036738.html">[rabbitmq-discuss] Web-STOMP plugin - Authentication with SSL Client Certificates
</A></li>
        <LI>Next message: <A HREF="036754.html">[rabbitmq-discuss] Web-STOMP plugin - Authentication with SSL Client Certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36750">[ date ]</a>
              <a href="thread.html#36750">[ thread ]</a>
              <a href="subject.html#36750">[ subject ]</a>
              <a href="author.html#36750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael,

 * It will be hard to justify supporting such a homegrown authentication
&gt;<i> scheme
</I>&gt;<i>
</I>
Well it won't need that much support as the changes are minimal and impact
just a few lines of code in two source files, and also it'll be just a
temporary solution till proper support for SSL client auth will be
implemented :)

 * It may also run into limitations in SockJS
&gt;<i>
</I>
What kind of limitations do you mean here?

So I'd recommend combining HTTPS connection with credentials obtained from
&gt;<i> an HTTPS endpoint in your JS application.
</I>&gt;<i>
</I>
We have considered this approach, however the problem is that the JS code
initiating the websocket connection runs in the user's web browser, and
this makes such kind of solutions rather insecure.
On the other side using client certificate data for authentication is both
secure and happens completely transparently to the end-user.

So, I'd be very grateful if you could take a closer look at the solution
I've previously suggested and provide some hints on which changes should be
applied to the sockjs-erlang-wrapper and web-stomp source in order to
implement it.. unfortunately I'm having a bit of a hard time figuring out
where exactly to add that additional HTTP header processing code..

Another issue I ran into playing with this is an error showing up when
trying to compile the original web-stomp plugin from the
rabbitmq-public-umbrella:

../cowboy-wrapper/cowboy-git/src/cowboy_clock.erl: undefined parse
transform 'eunit_autoexport'
make: *** [../cowboy-wrapper/ebin/cowboy_clock.beam] Error 1

Could you please shed some light on this? I've checked out the latest
rabbitmq-public-umbrella and my Erlang version is R16B02.

Also, maybe you missed my last question from last time:

P.S.: Although you have CCd rabbitmq-discuss group in the previous
&gt;<i> messages, somehow these are not visible to me on the Rabbitmq-discuss
</I>&gt;<i> Google Group. Are there some viewing or access restrictions set up?
</I>&gt;<i>
</I>
Thank you!

Best regards,
Andy.

On Thu, Jun 19, 2014 at 10:30 AM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;
wrote:

&gt;<i> On 18 June 2014 at 19:51:57, Andrei (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">andrei002 at gmail.com</A>) wrote:
</I>&gt;<i> &gt; &gt; 1. Is there any possibility for this feature to be implemented
</I>&gt;<i> &gt; in one of the next releases, in order for Web-STOMP to be fully
</I>&gt;<i> &gt; compatible with STOMP plugin?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2. In case it is too complex to implement due to lack of client SSL
</I>&gt;<i> &gt; authentication mechanisms in Cowboy, could it be implemented
</I>&gt;<i> &gt; in the following way, as a workaround?
</I>&gt;<i>
</I>&gt;<i> It's possible to add SSL certificate authentication to Web STOMP
</I>&gt;<i> but it may involve upgrading Cowboy and SockJS first =&gt; not a trivial
</I>&gt;<i> amount of work.
</I>&gt;<i>
</I>&gt;<i> The workaround you suggest may work but
</I>&gt;<i>
</I>&gt;<i>  * It will be hard to justify supporting such a homegrown authentication
</I>&gt;<i> scheme
</I>&gt;<i>  * It may also run into limitations in SockJS
</I>&gt;<i>
</I>&gt;<i> So I'd recommend combining HTTPS connection with credentials obtained from
</I>&gt;<i> an HTTPS
</I>&gt;<i> endpoint in your JS application. This is not great but largely is the
</I>&gt;<i> state of
</I>&gt;<i> the art in Web messaging authentication. Fairly big Web players recommend
</I>&gt;<i> something
</I>&gt;<i> very similar [1].
</I>&gt;<i>
</I>&gt;<i> 1. <A HREF="https://devcenter.heroku.com/articles/websocket-security">https://devcenter.heroku.com/articles/websocket-security</A>
</I>&gt;<i> --
</I>&gt;<i> MK
</I>&gt;<i>
</I>&gt;<i> Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140619/7c1ee3fa/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140619/7c1ee3fa/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036738.html">[rabbitmq-discuss] Web-STOMP plugin - Authentication with SSL Client Certificates
</A></li>
	<LI>Next message: <A HREF="036754.html">[rabbitmq-discuss] Web-STOMP plugin - Authentication with SSL Client Certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36750">[ date ]</a>
              <a href="thread.html#36750">[ thread ]</a>
              <a href="subject.html#36750">[ subject ]</a>
              <a href="author.html#36750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
