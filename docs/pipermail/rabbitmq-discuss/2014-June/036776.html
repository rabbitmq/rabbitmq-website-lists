<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Autorecovery Issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Autorecovery%20Issue&In-Reply-To=%3CCAP2%2Bpdy0Y6bNFPTXb_hd6FJEXtCxrCwHFc84XNoSEzg%2BMK%3DDeA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036549.html">
   <LINK REL="Next"  HREF="036777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Autorecovery Issue</H1>
    <B>Ranjitha Shet</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Autorecovery%20Issue&In-Reply-To=%3CCAP2%2Bpdy0Y6bNFPTXb_hd6FJEXtCxrCwHFc84XNoSEzg%2BMK%3DDeA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Autorecovery Issue">ranjithavshet09 at gmail.com
       </A><BR>
    <I>Fri Jun 20 07:16:13 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036549.html">[rabbitmq-discuss] Autorecovery Issue
</A></li>
        <LI>Next message: <A HREF="036777.html">[rabbitmq-discuss] Autorecovery Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36776">[ date ]</a>
              <a href="thread.html#36776">[ thread ]</a>
              <a href="subject.html#36776">[ subject ]</a>
              <a href="author.html#36776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i>  Hi,
</I>&gt;<i>
</I>

*&gt;&gt; when I disconnect the network cable, say it gets disconnected when both
receiving and publishing takes place.. (Message published and received are
different messages(same exchange))  ----&gt; say the name is exchange1
published from server side*

Connections, channels, exchange, queue, binding all can be viewed  in
Management plugin after reconnecting the network cable. From this can i
assume that reconnection is successful?
But if from server side there is a publish to same exchange (exchange1)
 after reconnecting (say the server publish some message after 5mins of
reconnection) , then i still get this error.

DefaultExceptionHandler: Consumer
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">com.rabbitmq.client.QueueingConsumer at 5edcf5</A>
(amq.ctag-AcMX2m0FBSPePzrjNqDi7Z) method handleDelivery for channel
AMQChannel(<A HREF="amqp://guest@localhost:5672/,1">amqp://guest@localhost:5672/,1</A>) threw an exception for channel
AMQChannel(<A HREF="amqp://guest@localhost:5672/,1">amqp://guest@localhost:5672/,1</A>):
com.rabbitmq.client.ShutdownSignalException: connection error
at
com.rabbitmq.client.QueueingConsumer.checkShutdown(QueueingConsumer.java:172)
at
com.rabbitmq.client.QueueingConsumer.handleDelivery(QueueingConsumer.java:124)
at
com.rabbitmq.client.impl.ConsumerDispatcher$5.run(ConsumerDispatcher.java:140)
at
com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:85)
at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)
Caused by: java.net.SocketException: Software caused connection abort: recv
failed
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:129)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:271)
at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:95)
at
com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:139)
at
com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:532)
... 1 more


I am not getting how to solve this..
When checked in Management plugin, after getting this exception, Channel
and Queue is no more available.

to receive message what I do is --&gt;

while(true){

try{

QueueingConsumer.Delivery delivery = consumer.nextDelivery();
..
..
}
catch (ShutdownSignalException sse) {

// notify client about network disconnection
// check if connection and channel is open... if its open then this current
thread is delayed for some time so that exchange, queue, binding and
consumer are restored..

} catch (java.io.IOException ioe) {

}


} // end of while
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140620/febaa8a1/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140620/febaa8a1/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036549.html">[rabbitmq-discuss] Autorecovery Issue
</A></li>
	<LI>Next message: <A HREF="036777.html">[rabbitmq-discuss] Autorecovery Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36776">[ date ]</a>
              <a href="thread.html#36776">[ thread ]</a>
              <a href="subject.html#36776">[ subject ]</a>
              <a href="author.html#36776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
