<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-c TTL setting not working for me - please help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-c%20TTL%20setting%20not%20working%20for%20me%20-%0A%20please%20help&In-Reply-To=%3C53A06F5B.8040603%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036675.html">
   <LINK REL="Next"  HREF="036677.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-c TTL setting not working for me - please help</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-c%20TTL%20setting%20not%20working%20for%20me%20-%0A%20please%20help&In-Reply-To=%3C53A06F5B.8040603%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq-c TTL setting not working for me - please help">simon at rabbitmq.com
       </A><BR>
    <I>Tue Jun 17 17:39:55 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036675.html">[rabbitmq-discuss] rabbitmq-c TTL setting not working for me - please help
</A></li>
        <LI>Next message: <A HREF="036677.html">[rabbitmq-discuss] rabbitmq-c TTL setting not working for me - please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36676">[ date ]</a>
              <a href="thread.html#36676">[ thread ]</a>
              <a href="subject.html#36676">[ subject ]</a>
              <a href="author.html#36676">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/06/2014 5:33PM, Kim Tran wrote:
&gt;<i> And I still got all the messages. None of them was dropped.
</I>
Hang on. You originally said:

&gt;<i> Then every time I consume a message, I sleep for 5 secs just to delay
</I>&gt;<i> the consuming rate.
</I>
That would mean the broker sent you all the messages straight away, but 
your app delayed reading them off the socket. The queue can't expire 
messages when they are out for delivery.

So if you want a slow consumer, set basic.qos to a low value (e.g. 1), 
that way the broker will only send you one message at a time as you 
acknowledge them (you are using acks, right?)

Then you should see the messages expire.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036675.html">[rabbitmq-discuss] rabbitmq-c TTL setting not working for me - please help
</A></li>
	<LI>Next message: <A HREF="036677.html">[rabbitmq-discuss] rabbitmq-c TTL setting not working for me - please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36676">[ date ]</a>
              <a href="thread.html#36676">[ thread ]</a>
              <a href="subject.html#36676">[ subject ]</a>
              <a href="author.html#36676">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
