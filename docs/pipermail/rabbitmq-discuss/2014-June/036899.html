<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ sometimes does not show	messages_ready
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20sometimes%20does%20not%20show%0A%09messages_ready&In-Reply-To=%3C53AABB24.4080001%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036898.html">
   <LINK REL="Next"  HREF="036900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ sometimes does not show	messages_ready</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20sometimes%20does%20not%20show%0A%09messages_ready&In-Reply-To=%3C53AABB24.4080001%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ sometimes does not show	messages_ready">simon at rabbitmq.com
       </A><BR>
    <I>Wed Jun 25 13:05:56 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036898.html">[rabbitmq-discuss] RabbitMQ sometimes does not show messages_ready
</A></li>
        <LI>Next message: <A HREF="036900.html">[rabbitmq-discuss] RabbitMQ sometimes does not show messages_ready
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36899">[ date ]</a>
              <a href="thread.html#36899">[ thread ]</a>
              <a href="subject.html#36899">[ subject ]</a>
              <a href="author.html#36899">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmmm, that does sound like

25872 prevent empty queues from showing length as '?' after going idle
       (since 3.1.0)

from <A HREF="http://www.rabbitmq.com/release-notes/README-3.2.2.txt">http://www.rabbitmq.com/release-notes/README-3.2.2.txt</A>

...although it doesn't seem to be showing '?' in your case.

If it is that bug then the queues will stop showing lengths if they a) 
are empty and b) haven't done anything in an hour.

&quot;anything&quot; there is quite strictly defined - even replying to 
&quot;rabbitmqctl list_queues&quot; will wake them enough to untrigger the bug. So 
you could try that too.

Cheers, Simon

On 25/06/14 12:51, Malte Hurrelmann wrote:
&gt;<i> Hi there,
</I>&gt;<i>
</I>&gt;<i> I recently came across a strange behaviour when asking RabbitMQ (version
</I>&gt;<i> 3.1.5) for the number of messages in each queue.
</I>&gt;<i>
</I>&gt;<i> Normally it all works fine and the usual ways:
</I>&gt;<i> - REST-api's key 'messages_ready'
</I>&gt;<i> - management-console's 'ready'-column and
</I>&gt;<i> - 'rabbitmqctl list_queues'
</I>&gt;<i>
</I>&gt;<i> all return the expected number of messages for each queue.
</I>&gt;<i> But every now and then this information is just missing for most of the
</I>&gt;<i> queues. It will return after some time by itself (I saw times up to one
</I>&gt;<i> hour, but it may be even more) but as I wrote some scripts that depend
</I>&gt;<i> on the REST-api, this behaviour is somewhat annoying.
</I>&gt;<i>
</I>&gt;<i> Is this a known issue? I looked through the bugfix-sections of each
</I>&gt;<i> newer release but could not find an entry where this issue was fixed.
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Malte.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036898.html">[rabbitmq-discuss] RabbitMQ sometimes does not show messages_ready
</A></li>
	<LI>Next message: <A HREF="036900.html">[rabbitmq-discuss] RabbitMQ sometimes does not show messages_ready
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36899">[ date ]</a>
              <a href="thread.html#36899">[ thread ]</a>
              <a href="subject.html#36899">[ subject ]</a>
              <a href="author.html#36899">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
