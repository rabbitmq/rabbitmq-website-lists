<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] TTL on Consumers in PHP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TTL%20on%20Consumers%20in%20PHP&In-Reply-To=%3CCAP1nU1Fspa9SK-xH%2BbjtYC9kEu0QawG5DRCc%2Br4nJMQwwouRmQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036878.html">
   <LINK REL="Next"  HREF="036884.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] TTL on Consumers in PHP</H1>
    <B>Sean Joyce</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TTL%20on%20Consumers%20in%20PHP&In-Reply-To=%3CCAP1nU1Fspa9SK-xH%2BbjtYC9kEu0QawG5DRCc%2Br4nJMQwwouRmQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] TTL on Consumers in PHP">sean.joyce at patientco.com
       </A><BR>
    <I>Tue Jun 24 21:41:59 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036878.html">[rabbitmq-discuss] You still haven't accepted	prasadbchaure at gmail.com's friend request. Accept?
</A></li>
        <LI>Next message: <A HREF="036884.html">[rabbitmq-discuss] TTL on Consumers in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36879">[ date ]</a>
              <a href="thread.html#36879">[ thread ]</a>
              <a href="subject.html#36879">[ subject ]</a>
              <a href="author.html#36879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've got a pretty basic consumer running on an exchange that routes various
different messages to client-specific queues. To better manage resources,
I'd like for the consumers to expire after not receiving a message for a
period of time (low-usage clients).

I've been trying to figure out where to call basic_cancel in this code, but
not finding the right solution. Any tips on how to refactor and get what I
want?

  public function consume() {
    $callback = function($msg) {
      $pMsg = new ProcessorMessage();
      $pMsg-&gt;onMessage($msg-&gt;body);

$msg-&gt;delivery_info['channel']-&gt;basic_ack($msg-&gt;delivery_info['delivery_tag']);
    };

    $this-&gt;channel-&gt;basic_qos(null, 1, null);
    $this-&gt;channel-&gt;basic_consume($queue_name, '', false, false, false,
false, $callback);

    while(count($this-&gt;channel-&gt;callbacks)) {
        $this-&gt;channel-&gt;wait();
    }

  }

-- 
*Sean M. Joyce*
Director of Product Engineering | Patientco
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sean.joyce at patientco.com</A>
888.747.2455 x412


&lt;<A HREF="http://info.patientco.com/himss">http://info.patientco.com/himss</A>&gt;
&lt;<A HREF="http://info.patientco.com/happy-providers">http://info.patientco.com/happy-providers</A>&gt;

-- 


As a friendly reminder, never send Protected Health Information (PHI) via 
email. 

 

CONFIDENTIALITY NOTICE:  The information contained in this email message 
may be privileged, confidential, and protected from disclosure. 
Any unauthorized use, printing, copying, disclosure, dissemination of or 
reliance upon this communication by persons other than the intended 
recipient may be subject to legal restriction or sanction. If you are not 
the intended recipient, you are hereby notified that you are not authorized 
to read, print, retain, copy, or disseminate this message, any part of it, 
or any attachments.  If you think that you have received this email 
message in error, please reply to the sender and delete this email and any 
attachments and all copies thereof from your system without reading the 
content and destroy any printouts of the e-mail or attachments promptly. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140624/b51f22ed/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140624/b51f22ed/attachment.html</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036878.html">[rabbitmq-discuss] You still haven't accepted	prasadbchaure at gmail.com's friend request. Accept?
</A></li>
	<LI>Next message: <A HREF="036884.html">[rabbitmq-discuss] TTL on Consumers in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36879">[ date ]</a>
              <a href="thread.html#36879">[ thread ]</a>
              <a href="subject.html#36879">[ subject ]</a>
              <a href="author.html#36879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
