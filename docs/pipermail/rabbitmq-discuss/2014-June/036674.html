<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Reliability and Publisher Confirms...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reliability%20and%20Publisher%20Confirms...&In-Reply-To=%3C53A06C6E.5070509%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036671.html">
   <LINK REL="Next"  HREF="036673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Reliability and Publisher Confirms...</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reliability%20and%20Publisher%20Confirms...&In-Reply-To=%3C53A06C6E.5070509%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Reliability and Publisher Confirms...">simon at rabbitmq.com
       </A><BR>
    <I>Tue Jun 17 17:27:26 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036671.html">[rabbitmq-discuss] Reliability and Publisher Confirms...
</A></li>
        <LI>Next message: <A HREF="036673.html">[rabbitmq-discuss] PPA debs restart rabbit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36674">[ date ]</a>
              <a href="thread.html#36674">[ thread ]</a>
              <a href="subject.html#36674">[ subject ]</a>
              <a href="author.html#36674">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/06/2014 3:23PM, Shadi Mari wrote:
&gt;<i> Speaking of persistent queues and reliability, I am aware that in order
</I>&gt;<i> to increase rabbitmq reliability level, publisher confirms need to be
</I>&gt;<i> enabled in order to tell exactly when messages are delivered/persisted.
</I>
Yes.

&gt;<i> However, am not sure of how rabbitmq behaves where there are outstanding
</I>&gt;<i> confirms/acks not yet received by the publisher and the connection
</I>&gt;<i> between the publisher and the broker is broken. I am under the
</I>&gt;<i> assumption that rabbitmq does not redeliver the acks when the connection
</I>&gt;<i> is available again
</I>
Yes.

&gt;<i> and it discards messages with undelivered acks to
</I>&gt;<i> publisher,
</I>
No. The messages will not be discarded, the server may well have sent an 
ack to the publisher which is lost when the connection is lost, the 
server does not know what happens to acks after it has sent them. So it 
accepts the message anyway, the confirm is just to let you know.

&gt;<i> In case Yes, does this mean i
</I>&gt;<i> will have to track in memory all outstanding publish requests with no
</I>&gt;<i> confirmations and re-publish them when the connection is available? I am
</I>&gt;<i> afraid this might create a reliability hole.
</I>
Your publisher needs to take responsibility for messages until they are 
acknowledged by the server, yes.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036671.html">[rabbitmq-discuss] Reliability and Publisher Confirms...
</A></li>
	<LI>Next message: <A HREF="036673.html">[rabbitmq-discuss] PPA debs restart rabbit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36674">[ date ]</a>
              <a href="thread.html#36674">[ thread ]</a>
              <a href="subject.html#36674">[ subject ]</a>
              <a href="author.html#36674">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
