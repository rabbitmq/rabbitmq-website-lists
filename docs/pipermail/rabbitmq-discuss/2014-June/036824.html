<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] custom exchange checking auth user
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20custom%20exchange%20checking%20auth%20user&In-Reply-To=%3C53A7E749.6060009%40alertme.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036811.html">
   <LINK REL="Next"  HREF="036923.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] custom exchange checking auth user</H1>
    <B>Dmitry Andrianov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20custom%20exchange%20checking%20auth%20user&In-Reply-To=%3C53A7E749.6060009%40alertme.com%3E"
       TITLE="[rabbitmq-discuss] custom exchange checking auth user">dmitry.andrianov at alertme.com
       </A><BR>
    <I>Mon Jun 23 09:37:29 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036811.html">[rabbitmq-discuss] custom exchange checking auth user
</A></li>
        <LI>Next message: <A HREF="036923.html">[rabbitmq-discuss] custom exchange checking auth user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36824">[ date ]</a>
              <a href="thread.html#36824">[ thread ]</a>
              <a href="subject.html#36824">[ subject ]</a>
              <a href="author.html#36824">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,
we actually using that thing already - client sets the user ID property 
and server rejects a message if it does not match the actual auth user.
However, I did read it as that setUserId call being optional - it is up 
to the client to set it. And if client does not set it, no validation is 
performed.
So how do I prevent messages without an user id from being accepted?
If I need a custom exchange type or exchange decorator - it does not 
really makes life much easier.

Also, as I said, there was an idea to automatically add a header with 
client's IP address to each incoming message.
However after playing with custom exchange, I can see that its route 
call is not the place for it anyway, so we are back to square one with 
this specific idea.

Thanks


On 20/06/14 23:53, Matthias Radestock wrote:
&gt;<i> On 20/06/14 15:45, Dmitry Andrianov wrote:
</I>&gt;&gt;<i> So we do not trust AMQP headers we receive from the client but we do
</I>&gt;&gt;<i> trust the SSL certificate and we do trust AQMP headers after the message
</I>&gt;&gt;<i> came through the first Rabbit and was verified.
</I>&gt;<i>
</I>&gt;<i> Would <A HREF="https://www.rabbitmq.com/validated-user-id.html">https://www.rabbitmq.com/validated-user-id.html</A> help, perhaps?
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>
This email is for the use of the intended recipient(s) only.
If you have received this email in error, please notify the sender immediately and then delete it.
If you are not the intended recipient, you must not use, disclose or distribute this email without the
author's prior permission. AlertMe.com Ltd. is not responsible for any personal views expressed
in this message or any attachments that are those of the individual sender.

AlertMe.com Ltd, 30 Station Road, Cambridge, CB1 2RE, UK.
Registered in England, Company number 578 2908, VAT registration number GB 895 9914 42.


</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036811.html">[rabbitmq-discuss] custom exchange checking auth user
</A></li>
	<LI>Next message: <A HREF="036923.html">[rabbitmq-discuss] custom exchange checking auth user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36824">[ date ]</a>
              <a href="thread.html#36824">[ thread ]</a>
              <a href="subject.html#36824">[ subject ]</a>
              <a href="author.html#36824">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
