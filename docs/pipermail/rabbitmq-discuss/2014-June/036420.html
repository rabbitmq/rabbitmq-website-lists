<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RMQ stuck in startup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20stuck%20in%20startup&In-Reply-To=%3C083E352F62C9974389AD0F9F875EA238188FE9D54F%40THSONEA03CMS03P.ONE-03.GRP%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036434.html">
   <LINK REL="Next"  HREF="036448.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RMQ stuck in startup</H1>
    <B>EDDY James</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20stuck%20in%20startup&In-Reply-To=%3C083E352F62C9974389AD0F9F875EA238188FE9D54F%40THSONEA03CMS03P.ONE-03.GRP%3E"
       TITLE="[rabbitmq-discuss] RMQ stuck in startup">James.EDDY at us.thalesgroup.com
       </A><BR>
    <I>Tue Jun  3 17:53:12 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036434.html">[rabbitmq-discuss] Management plugin guest account login issue
</A></li>
        <LI>Next message: <A HREF="036448.html">[rabbitmq-discuss] RMQ stuck in startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36420">[ date ]</a>
              <a href="thread.html#36420">[ thread ]</a>
              <a href="subject.html#36420">[ subject ]</a>
              <a href="author.html#36420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I use RMQ 3.1.5 w/ erlang R16B02 on PPC linux. I've recently seen an issue on startup, I have only seen this a few times and does not seem to be easily reproduced.

What I see is this:
Precondition: node1 and node2 both are started with mnesia completely removed, so there is no existing state of the mnesia DB (I do this by stopping both nodes and doing rm -rf on the database)

(1) start node1, node1 is started and ready
(2) start node2, node2 is started and ready
(3) Both nodes will have clients auto connecting, creating exchanges and publishing.
(4) on node2, run:
      rabbitmqctl stop_app
      rabbitmqctl join_cluster <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node1</A>
      rabbitmqctl start_app
   After running start_app, the rabbitmqctl script hangs on &quot;Starting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node2</A> ...&quot; it does not ever show &quot;done&quot;
(5) any call to &quot;rabbitmqctl status&quot; returns:

Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node2</A> ...
Error: {{case_clause,starting},
        [{rabbit_vm,mnesia_memory,0,[]},
         {rabbit_vm,memory,0,[]},
         {rabbit,status,0,[]},
         {rpc,'-handle_call_call/6-fun-0-',5,[{file,&quot;rpc.erl&quot;},{line,205}]}]}


node2 will stay in this state indefinitely. Has anyone seen anything like this before? Any ideas what might cause this, or where to further investigate (like epmd? mnesia init issue? etc)?

Thanks!
James
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036434.html">[rabbitmq-discuss] Management plugin guest account login issue
</A></li>
	<LI>Next message: <A HREF="036448.html">[rabbitmq-discuss] RMQ stuck in startup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36420">[ date ]</a>
              <a href="thread.html#36420">[ thread ]</a>
              <a href="subject.html#36420">[ subject ]</a>
              <a href="author.html#36420">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
