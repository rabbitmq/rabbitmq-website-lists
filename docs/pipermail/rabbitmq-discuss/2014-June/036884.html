<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] TTL on Consumers in PHP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TTL%20on%20Consumers%20in%20PHP&In-Reply-To=%3CetPan.53aa42c0.66334873.143a2%40mercurio.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036879.html">
   <LINK REL="Next"  HREF="036901.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] TTL on Consumers in PHP</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20TTL%20on%20Consumers%20in%20PHP&In-Reply-To=%3CetPan.53aa42c0.66334873.143a2%40mercurio.local%3E"
       TITLE="[rabbitmq-discuss] TTL on Consumers in PHP">mklishin at gopivotal.com
       </A><BR>
    <I>Wed Jun 25 04:31:51 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036879.html">[rabbitmq-discuss] TTL on Consumers in PHP
</A></li>
        <LI>Next message: <A HREF="036901.html">[rabbitmq-discuss] TTL on Consumers in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36884">[ date ]</a>
              <a href="thread.html#36884">[ thread ]</a>
              <a href="subject.html#36884">[ subject ]</a>
              <a href="author.html#36884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25 June 2014 at 00:43:15, Sean Joyce (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sean.joyce at patientco.com</A>) wrote:
&gt;<i> &gt; I've been trying to figure out where to call basic_cancel in  
</I>&gt;<i> this code, but not finding the right solution. Any tips on how  
</I>&gt;<i> to refactor and get what I want?
</I>&gt;<i>  
</I>&gt;<i> public function consume() {
</I>&gt;<i> $callback = function($msg) {
</I>&gt;<i> $pMsg = new ProcessorMessage();
</I>&gt;<i> $pMsg-&gt;onMessage($msg-&gt;body);
</I>&gt;<i> $msg-&gt;delivery_info['channel']-&gt;basic_ack($msg-&gt;delivery_info['delivery_tag']);  
</I>&gt;<i> };
</I>&gt;<i>  
</I>&gt;<i> $this-&gt;channel-&gt;basic_qos(null, 1, null);
</I>&gt;<i> $this-&gt;channel-&gt;basic_consume($queue_name, '', false,  
</I>&gt;<i> false, false, false, $callback);
</I>&gt;<i>  
</I>&gt;<i> while(count($this-&gt;channel-&gt;callbacks)) {
</I>&gt;<i> $this-&gt;channel-&gt;wait();
</I>&gt;<i> }
</I>&gt;<i>  
</I>&gt;<i> }
</I>
Sean,

Take a look at the following 2 examples:

<A HREF="https://github.com/videlalvaro/php-amqplib/blob/master/demo/amqp_consumer_non_blocking.php">https://github.com/videlalvaro/php-amqplib/blob/master/demo/amqp_consumer_non_blocking.php</A>
<A HREF="https://github.com/videlalvaro/php-amqplib/blob/master/demo/amqp_consumer.php#L52-54&#160;">https://github.com/videlalvaro/php-amqplib/blob/master/demo/amqp_consumer.php#L52-54&#160;</A>
--  
MK  

Staff Software Engineer, Pivotal/RabbitMQ
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036879.html">[rabbitmq-discuss] TTL on Consumers in PHP
</A></li>
	<LI>Next message: <A HREF="036901.html">[rabbitmq-discuss] TTL on Consumers in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36884">[ date ]</a>
              <a href="thread.html#36884">[ thread ]</a>
              <a href="subject.html#36884">[ subject ]</a>
              <a href="author.html#36884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
