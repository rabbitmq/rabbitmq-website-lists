<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] federation Issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20federation%20Issues&In-Reply-To=%3C53AD5159.9050008%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036930.html">
   <LINK REL="Next"  HREF="036960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] federation Issues</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20federation%20Issues&In-Reply-To=%3C53AD5159.9050008%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] federation Issues">simon at rabbitmq.com
       </A><BR>
    <I>Fri Jun 27 12:11:21 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="036930.html">[rabbitmq-discuss] federation Issues
</A></li>
        <LI>Next message: <A HREF="036960.html">[rabbitmq-discuss] federation Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36948">[ date ]</a>
              <a href="thread.html#36948">[ thread ]</a>
              <a href="subject.html#36948">[ subject ]</a>
              <a href="author.html#36948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/06/14 00:27, Ganann, Kale wrote:
&gt;<i> We just upgraded from 3.2.1 to 3.3.4 and federation died on us.  Looking
</I>&gt;<i> at the cluster, it appears some... overenthusiastic dev renamed the
</I>&gt;<i> cluster
</I>
That should not be a problem.

 From 3.2.x to 3.3.x we changed from having the federation plugin give 
the cluster a name through the local_nodename parameter, to having a 
broker-wide cluster name that can be used by the federation plugin.

But the cluster name doesn't matter that much. It's used to name the 
queues which federation uses internally, and it shows up in transmitted 
bindings and messages so the plugin (and sysadmins) know where message 
have been. But it's not something you should have to get &quot;correct&quot; for 
things to work - there's no correct value.

&gt;<i> and now when federation creates new linkages, it creates them
</I>&gt;<i> as clustername:vHost:queue, rather than usertoken:vHost:queue.
</I>
I really do not understand any of this.

What do you mean by &quot;linkages&quot;? Bindings? Federation links (as shown in 
the status)? Something else?

Also, what do you mean by usertoken?

&gt;<i> Also, on
</I>&gt;<i> the federation upstreams, the parameter field seems to have vanished, so
</I>&gt;<i> I can't update the user tokens for specific vHosts.
</I>
I guess you are saying something about the local_username or 
local_nodename fields here? local_username is gone, there is no need to 
configure it at all any more. local_nodename is replaced by the cluster 
name.

&gt;<i> I've been going
</I>&gt;<i> through the patch notes - is this intentional, or is something else
</I>&gt;<i> going on?
</I>
The removal of local_username and local_nodename was intentional.

&gt;<i> And can I just remove the cluster name?
</I>
Clusters always have a name.

&gt;<i>  I've tried deleting
</I>&gt;<i> the old dynamically created fed stuff so that it gets recreated, but the
</I>&gt;<i> new stuff just doesn't seem to work.  Any help is appreciated.
</I>
What does the link status look like?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="036930.html">[rabbitmq-discuss] federation Issues
</A></li>
	<LI>Next message: <A HREF="036960.html">[rabbitmq-discuss] federation Issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36948">[ date ]</a>
              <a href="thread.html#36948">[ thread ]</a>
              <a href="subject.html#36948">[ subject ]</a>
              <a href="author.html#36948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
