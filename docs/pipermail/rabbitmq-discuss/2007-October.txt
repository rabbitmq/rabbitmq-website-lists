From codewalkerjoe at gmail.com  Mon Oct  1 01:22:20 2007
From: codewalkerjoe at gmail.com (joe lee)
Date: Sun, 30 Sep 2007 20:22:20 -0400
Subject: [rabbitmq-discuss] heart_beat_kill_pid & no error logger present
Message-ID: <50ec7a2e0709301722s2d40068cn51fc043aee96db5@mail.gmail.com>

Do I need to worry about heart_beat_kill_pid error?  What does it mean no
error logger present, where do you get error logger?  I am running Erlang
r11b-5 on Fedora 7.

[root at homie RabbitMQ]# rpm -i --nodeps rabbitmq-server-1.2.0-1.noarch.rpm
warning: rabbitmq-server-1.2.0-1.noarch.rpm: Header V3 DSA signature: NOKEY,
key ID 056e8e56
Starting rabbitmq-server: rabbitmq-server.
heart_beat_kill_pid = 9108
[root at homie RabbitMQ]# heart: Sun Sep 30 18:59:37 2007: Erlang has closed.
heart: Sun Sep 30 18:59:37 2007: Would reboot. Terminating.
init terminating in do_boot ()


[root at homie joe]# /etc/init.d/rabbitmq-server start
Starting rabbitmq-server: rabbitmq-server.
[root at homie joe]# (no error logger present) error: "Error in process <0.1.0>
with exit value:
{badarg,[{erl_prim_loader,check_file_result,3},{init,get_boot,1},{init,get_boot,2},{init,do_boot,3}]}
"
init terminating in do_boot ()

thanks,
joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070930/6d1685e5/attachment.htm 

From matthias at lshift.net  Mon Oct  1 05:08:32 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Mon, 01 Oct 2007 05:08:32 +0100
Subject: [rabbitmq-discuss] heart_beat_kill_pid & no error logger present
In-Reply-To: <50ec7a2e0709301722s2d40068cn51fc043aee96db5@mail.gmail.com>
References: <50ec7a2e0709301722s2d40068cn51fc043aee96db5@mail.gmail.com>
Message-ID: <470072C0.6050205@lshift.net>

Joe,

joe lee wrote:
> Do I need to worry about heart_beat_kill_pid error?  What does it mean 
> no error logger present, where do you get error logger?  I am running 
> Erlang r11b-5 on Fedora 7.
> 
> [root at homie RabbitMQ]# rpm -i --nodeps rabbitmq-server-1.2.0-1.noarch.rpm
> warning: rabbitmq-server-1.2.0-1.noarch.rpm: Header V3 DSA signature: 
> NOKEY, key ID 056e8e56
> Starting rabbitmq-server: rabbitmq-server.
> heart_beat_kill_pid = 9108
> [root at homie RabbitMQ]# heart: Sun Sep 30 18:59:37 2007: Erlang has closed.
> heart: Sun Sep 30 18:59:37 2007: Would reboot. Terminating.
> init terminating in do_boot ()

That tells you that RabbitMQ died and that the system would have 
rebooted if the heartbeat process had been instruct to do so (which it 
hasn't).

The root cause is probably the following ...

> [root at homie joe]# /etc/init.d/rabbitmq-server start
> Starting rabbitmq-server: rabbitmq-server.
> [root at homie joe]# (no error logger present) error: "Error in process 
> <0.1.0> with exit value: 
> {badarg,[{erl_prim_loader,check_file_result,3},{init,get_boot,1},{init,get_boot,2},{init,do_boot,3}]} 
> 
> "
> init terminating in do_boot ()

Looks like rabbit fails to start up.

I don't think you need to worry about the "no error logger present" 
message - it's probably there because rabbit died before initialising 
error logging.

Things to try:

- is there anything of interest in the log files in /var/log/rabbitmq?

- what happens when you start the server with /usr/sbin/rabbitmq-server? 
  Does it work? Any errors on the console?


Matthias



From ritchiem at apache.org  Mon Oct  1 08:57:05 2007
From: ritchiem at apache.org (Martin Ritchie)
Date: Mon, 1 Oct 2007 08:57:05 +0100
Subject: [rabbitmq-discuss] FW: Python client to RabbitMQ.....error?
In-Reply-To: <46FD52E6.80208@cohesiveft.com>
References: <0ML31I-1IbKwZ2QrX-0001Jp@mrelayeu.kundenserver.de>
	<46FD52E6.80208@cohesiveft.com>
Message-ID: <99e30fe50710010057t3918ef2foc8117e065b847438@mail.gmail.com>

On 28/09/2007, Dmitriy Samovskiy <dmitriy.samovskiy at cohesiveft.com> wrote:
>
>
> Lynton Grice wrote:
> >
> > msg = q.get(timeout=1)
> >
> > That throws the following exception:
> >
> > KeyError: __eq__
> >
> > Traceback (innermost last):
> >
> > File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
> >   import qpid
> > File "D:\tmp\Rabbit\rabbit.py", line 22, in ?
> >   msg = q.get(timeout=1)
> > File "D:\Python24\Lib\site-packages\qpid\queue.py", line 39, in get
> >   if result == Queue.END:
> > File "D:\Python24\Lib\site-packages\qpid\message.py", line 70, in
> > __getattr__
> >   env, key = self._slot(attr)
> > File "D:\Python24\Lib\site-packages\qpid\message.py", line 63, in _slot
> >   field = self.method.fields.bypyname[attr]
> >
>
> Could you please double check that you have the latest qpid python code
> from subversion? I am at rev 580460 now. Based on this traceback, what
> you have in d:\python24\lib\site-packages\qpid is not the latest: line
> numbers don't match the code and bypyname is never mentioned in any of
> the files. This can explain your vhost issue as well.
>
> svn co http://svn.apache.org/repos/asf/incubator/qpid/trunk
>
> http://cwiki.apache.org/qpid/source-repository.html
>
> - Dmitriy
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss

It sounds like you are using quite an old version of the python
client. When the Qpid Java broker had vhosts and started testing with
vhosts I seem to recall that hostname as vhost default behaviour.

If you are looking for a published version then our M2 release should
be coming version soon.

hth
-- 
Martin Ritchie



From lynton.grice at netweaverguru.com  Mon Oct  1 09:06:29 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Mon, 1 Oct 2007 10:06:29 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
In-Reply-To: <46FFBDF7.1040407@cohesiveft.com>
Message-ID: <0MKxQS-1IcGIU1kSh-0008Gx@mrelayeu.kundenserver.de>

Hi there,

Here is the code I am using.....still getting the " AttributeError:
__eq__"......not sure what is going wrong......I will try the other code you
recommended just now and see what happens....

import sys

sys.path = sys.path + ['D:\Python24\Lib\site-packages\python-qpid']

import qpid
from qpid.client import Client
from qpid.content import Content

client = Client("localhost", 5672, spec=qpid.spec.load('amqp0-8.xml'))
client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'}) 

ch = client.channel(1) 
ch.channel_open() 
ch.queue_declare(queue="testq", exclusive=True) 
ch.queue_bind(queue="testq", exchange="amq.direct", routing_key="test") 

print 'Sending message "ping"...  ', 
content=Content("ping"),exchange='amq.direct') 
ch.basic_publish(routing_key="test",
content=Content("ping"),exchange='amq.direct') 
print 'done' 

print 'Receiving message' 
t = ch.basic_consume(queue="testq", no_ack=True) 
q = client.queue(t.consumer_tag) 
msg = q.get(timeout=1) 
print 'Got message:', msg.content.body

-----Original Message-----
From: Dmitriy Samovskiy [mailto:dmitriy.samovskiy at cohesiveft.com] 
Sent: 30 September 2007 05:17 PM
To: Lynton Grice
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??

Hi Lynton,

Lynton Grice wrote:
> 
> print 'Receiving message'
> t = ch.basic_consume(queue="testq", no_ack=True)
> q = client.queue(t.consumer_tag)
> msg = q.get(timeout=1)
> print 'Got message:', msg.content.body
> 
> 
> AttributeError: __eq__
> 
> Traceback (innermost last):
> File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
>   import sys
> File "D:\tmp\Rabbit\rabbit.py", line 27, in ?
>   msg = q.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in 
> __getattr__
>   raise AttributeError(attr)

I can't reproduce your problem. Could you post your entire script?

Alternatively, could you try running disttailf.py that I posted to the 
list earlier, as Alexis once suggested? You would need to adjust 
QPID_SVN_PATH to match location of qpid python libs on your system. 
Start consumer in one window as "disttailf.py -c" and then start a 
producer in another window as "disttailf.py d:\tmp\rabbit\rabbit.py" and 
let us know what you see.

- Dmitriy




From lynton.grice at netweaverguru.com  Mon Oct  1 09:38:02 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Mon, 1 Oct 2007 10:38:02 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
In-Reply-To: <46FFBDF7.1040407@cohesiveft.com>
Message-ID: <0MKwtQ-1IcGmv3FrP-0006yU@mrelayeu.kundenserver.de>

Hi there,

I get EXACTLY the same error when I try to run the "disttailf.py -c" after
running disttailf.py d:\tmp\rabbit\rabbit.py.

The error seems to only be when I try to GET messages from
RabbitMQ....putting them on is fine.....

Here is the error again:

AttributeError: __eq__

Traceback (innermost last):

File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 1, in ?
File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 118, in ?
  consumer(client, ch)
File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 38, in
consumer
  msg = python_queue.get(timeout=1)
File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get
  if result == Queue.END:
File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in
__getattr__
  raise AttributeError(attr)

Here is my rabbit.log file again....

=INFO REPORT==== 1-Oct-2007::10:33:39 ===
accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:1462

=WARNING REPORT==== 1-Oct-2007::10:33:39 ===
Attempt by client to use invalid ticket 0

=WARNING REPORT==== 1-Oct-2007::10:33:39 ===
Lax ticket check mode: fabricating full ticket number 0

=INFO REPORT==== 1-Oct-2007::10:33:47 ===
accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:1466

=WARNING REPORT==== 1-Oct-2007::10:33:47 ===
Attempt by client to use invalid ticket 0

=WARNING REPORT==== 1-Oct-2007::10:33:47 ===
Lax ticket check mode: fabricating full ticket number 0

=INFO REPORT==== 1-Oct-2007::10:34:07 ===
Connection closed abruptly.

=INFO REPORT==== 1-Oct-2007::10:34:07 ===
closing TCP connection from 127.0.0.1:1462

=INFO REPORT==== 1-Oct-2007::10:34:11 ===
accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:1467

=WARNING REPORT==== 1-Oct-2007::10:34:11 ===
Attempt by client to use invalid ticket 0

=WARNING REPORT==== 1-Oct-2007::10:34:11 ===
Lax ticket check mode: fabricating full ticket number 0

=INFO REPORT==== 1-Oct-2007::10:34:28 ===
Connection closed abruptly.

=INFO REPORT==== 1-Oct-2007::10:34:28 ===
closing TCP connection from 127.0.0.1:1466

Any other ideas?

-----Original Message-----
From: Dmitriy Samovskiy [mailto:dmitriy.samovskiy at cohesiveft.com] 
Sent: 30 September 2007 05:17 PM
To: Lynton Grice
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??

Hi Lynton,

Lynton Grice wrote:
> 
> print 'Receiving message'
> t = ch.basic_consume(queue="testq", no_ack=True)
> q = client.queue(t.consumer_tag)
> msg = q.get(timeout=1)
> print 'Got message:', msg.content.body
> 
> 
> AttributeError: __eq__
> 
> Traceback (innermost last):
> File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
>   import sys
> File "D:\tmp\Rabbit\rabbit.py", line 27, in ?
>   msg = q.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in 
> __getattr__
>   raise AttributeError(attr)

I can't reproduce your problem. Could you post your entire script?

Alternatively, could you try running disttailf.py that I posted to the 
list earlier, as Alexis once suggested? You would need to adjust 
QPID_SVN_PATH to match location of qpid python libs on your system. 
Start consumer in one window as "disttailf.py -c" and then start a 
producer in another window as "disttailf.py d:\tmp\rabbit\rabbit.py" and 
let us know what you see.

- Dmitriy




From alexis.richardson at cohesiveft.com  Mon Oct  1 12:17:43 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Mon, 1 Oct 2007 12:17:43 +0100
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
In-Reply-To: <0MKwtQ-1IcGmv3FrP-0006yU@mrelayeu.kundenserver.de>
References: <46FFBDF7.1040407@cohesiveft.com>
	<0MKwtQ-1IcGmv3FrP-0006yU@mrelayeu.kundenserver.de>
Message-ID: <167204d20710010417j49e39e71w1b846e4c7b6930f2@mail.gmail.com>

Lynton

> I get EXACTLY the same error when I try to run the "disttailf.py -c" after
> running disttailf.py d:\tmp\rabbit\rabbit.py.
>
> The error seems to only be when I try to GET messages from
> RabbitMQ....putting them on is fine.....
....
> Any other ideas?

What spec file are you using?

alexis



From lynton.grice at netweaverguru.com  Mon Oct  1 12:50:38 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Mon, 1 Oct 2007 13:50:38 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
In-Reply-To: <167204d20710010417j49e39e71w1b846e4c7b6930f2@mail.gmail.com>
Message-ID: <0MKxQS-1IcJnO0yvK-0008Jl@mrelayeu.kundenserver.de>


Hi there,

I am using the spec file attached....

I got it from 

https://jira.amqp.org/confluence/pages/viewpageattachments.action?pageId=720
900&highlight=amqp0-8.xml#Download-attachment-amqp0-8.xml




-----Original Message-----
From: alexis.richardson at gmail.com [mailto:alexis.richardson at gmail.com] On
Behalf Of Alexis Richardson
Sent: 01 October 2007 01:18 PM
To: Lynton Grice
Cc: Dmitriy Samovskiy; rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??

Lynton

> I get EXACTLY the same error when I try to run the "disttailf.py -c" after
> running disttailf.py d:\tmp\rabbit\rabbit.py.
>
> The error seems to only be when I try to GET messages from
> RabbitMQ....putting them on is fine.....
....
> Any other ideas?

What spec file are you using?

alexis
-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp0-8.xml
Type: text/xml
Size: 145900 bytes
Desc: not available
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071001/36841dae/attachment.bin 

From lynton.grice at netweaverguru.com  Mon Oct  1 12:54:41 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Mon, 1 Oct 2007 13:54:41 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
In-Reply-To: <167204d20710010417j49e39e71w1b846e4c7b6930f2@mail.gmail.com>
Message-ID: <0MKxQS-1IcJrG1ZP1-0008B8@mrelayeu.kundenserver.de>


Hi there,

Also....see attached screenshot of the messages that come out on the broker
console when I try receive a message......may help a little...not sure....

Chat later

Lynton

-----Original Message-----
From: alexis.richardson at gmail.com [mailto:alexis.richardson at gmail.com] On
Behalf Of Alexis Richardson
Sent: 01 October 2007 01:18 PM
To: Lynton Grice
Cc: Dmitriy Samovskiy; rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??

Lynton

> I get EXACTLY the same error when I try to run the "disttailf.py -c" after
> running disttailf.py d:\tmp\rabbit\rabbit.py.
>
> The error seems to only be when I try to GET messages from
> RabbitMQ....putting them on is fine.....
....
> Any other ideas?

What spec file are you using?

alexis
-------------- next part --------------
A non-text attachment was scrubbed...
Name: RabbitMQ.jpg
Type: image/jpeg
Size: 41858 bytes
Desc: not available
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071001/0c42f726/attachment.jpg 

From dmitriy.samovskiy at cohesiveft.com  Mon Oct  1 16:01:07 2007
From: dmitriy.samovskiy at cohesiveft.com (Dmitriy Samovskiy)
Date: Mon, 01 Oct 2007 10:01:07 -0500
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
In-Reply-To: <0MKwtQ-1IcGmv3FrP-0006yU@mrelayeu.kundenserver.de>
References: <0MKwtQ-1IcGmv3FrP-0006yU@mrelayeu.kundenserver.de>
Message-ID: <47010BB3.4090500@cohesiveft.com>

Hi Lynton,

Lynton Grice wrote:
> 
> I get EXACTLY the same error when I try to run the "disttailf.py -c" after
> running disttailf.py d:\tmp\rabbit\rabbit.py.
> 
> The error seems to only be when I try to GET messages from
> RabbitMQ....putting them on is fine.....
> 
> Here is the error again:
> 
> AttributeError: __eq__
> 
> Traceback (innermost last):
> 
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 1, in ?
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 118, in ?
>   consumer(client, ch)
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 38, in
> consumer
>   msg = python_queue.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in
> __getattr__
>   raise AttributeError(attr)
> 


The good news is that I was able to run your code and successfully 
sent/received a message. The bad news is that I still can't tell you 
what's wrong with your setup. But I am almost positive it's not related 
to rabbitmq or qpid python libraries.

To make a long story short, my interpreter also raises AttributeError on 
'__eq__' (which appears to be correct behavior). My interpreter however 
catches and processes this exception internally, vs. your interpreter 
doesn't.

What kind of python are you using? Original from python.org or something 
like ActivePython or maybe yet another flavor? I use original from 
python.org. Or maybe this is platform related (I use Debian Linux). 
Also, is it possible that you have more than one interpreter on your 
system and the one which you actually call is not the one from 
d:\python24\bin? Maybe try "d:\python24\bin\python.exe 
d:\tmp\rabbit\rabbit.py" ? These are just guesses however.

Here is my output from your code, with certain debug print outs from 
qpid.message.__getattr__():

inside __getattr__ Method(name=start, id=10) (8, 0, {'platform': 
'Erlang/OTP', 'product': 'RabbitMQ', 'version': '1.2.0', 'copyright': 
'Copyright (C) 2007 LShift Ltd., Cohesive Financial Technologies LLC., 
and Rabbit Technologies Ltd.', 'information': 'Licensed under the MPL. 
See http://www.rabbitmq.com/'}, 'PLAIN AMQPLAIN', 'en_US') content = 
None start_ok
res 2
result is <function respond at 0xa7954c34>

inside __getattr__ Method(name=tune, id=30) (0, 131072L, 0) content = 
None tune_ok
result is <function respond at 0xa7954c34>

Sending message "ping"...   done
Receiving message
inside __getattr__ Method(name=consume_ok, id=21) 
('amq.ctag13_rabbit at dsy025_20071001141609_',) content = None consumer_tag
result is amq.ctag13_rabbit at dsy025_20071001141609_

inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping consumer_tag
result is amq.ctag13_rabbit at dsy025_20071001141609_

inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __eq__
raising AttributeError __eq__
inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __coerce__
raising AttributeError __coerce__
inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __cmp__
raising AttributeError __cmp__
Got message: ping




- Dmitriy



From lynton.grice at netweaverguru.com  Mon Oct  1 17:17:02 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Mon, 1 Oct 2007 18:17:02 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....the plot
	thickens.....
In-Reply-To: <47010BB3.4090500@cohesiveft.com>
Message-ID: <0MKwtQ-1IcNxC2G5Q-0006cK@mrelayeu.kundenserver.de>

Hi there,

I am using Python 2.4 from python.org and have installed
python-qpid-0.2.tar.gz on my Windows Box.....I also have RabbitMQ version
1.2....

mmmmmm......the plot thinkens.....I use WingIDE for all my Python
development, and I can see that the code does indeed run successfully in the
Python SHELL but the moment you try run it in the IDE it complains about the
"__eq__" stuff.

See attached screenshots of it working well in the Wing Python Shell.....and
then the moment you try run the SAME script in the IDE it
dies.....mmmmm......and the IDE uses Python 2.4 as well......and the shell
in the screenshot is run from Wing IDE.......so it should be EXACTLY the
same......let me dig into it more.......

Thanks for all your help.....must be some bug in WingIDE.....not sure yet, I
will let you guys know once I find out.....

Chat soon

Lynton

-----Original Message-----
From: Dmitriy Samovskiy [mailto:dmitriy.samovskiy at cohesiveft.com] 
Sent: 01 October 2007 05:01 PM
To: Lynton Grice
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??

Hi Lynton,

Lynton Grice wrote:
> 
> I get EXACTLY the same error when I try to run the "disttailf.py -c" after
> running disttailf.py d:\tmp\rabbit\rabbit.py.
> 
> The error seems to only be when I try to GET messages from
> RabbitMQ....putting them on is fine.....
> 
> Here is the error again:
> 
> AttributeError: __eq__
> 
> Traceback (innermost last):
> 
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 1, in ?
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 118, in
?
>   consumer(client, ch)
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 38, in
> consumer
>   msg = python_queue.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in
> __getattr__
>   raise AttributeError(attr)
> 


The good news is that I was able to run your code and successfully 
sent/received a message. The bad news is that I still can't tell you 
what's wrong with your setup. But I am almost positive it's not related 
to rabbitmq or qpid python libraries.

To make a long story short, my interpreter also raises AttributeError on 
'__eq__' (which appears to be correct behavior). My interpreter however 
catches and processes this exception internally, vs. your interpreter 
doesn't.

What kind of python are you using? Original from python.org or something 
like ActivePython or maybe yet another flavor? I use original from 
python.org. Or maybe this is platform related (I use Debian Linux). 
Also, is it possible that you have more than one interpreter on your 
system and the one which you actually call is not the one from 
d:\python24\bin? Maybe try "d:\python24\bin\python.exe 
d:\tmp\rabbit\rabbit.py" ? These are just guesses however.

Here is my output from your code, with certain debug print outs from 
qpid.message.__getattr__():

inside __getattr__ Method(name=start, id=10) (8, 0, {'platform': 
'Erlang/OTP', 'product': 'RabbitMQ', 'version': '1.2.0', 'copyright': 
'Copyright (C) 2007 LShift Ltd., Cohesive Financial Technologies LLC., 
and Rabbit Technologies Ltd.', 'information': 'Licensed under the MPL. 
See http://www.rabbitmq.com/'}, 'PLAIN AMQPLAIN', 'en_US') content = 
None start_ok
res 2
result is <function respond at 0xa7954c34>

inside __getattr__ Method(name=tune, id=30) (0, 131072L, 0) content = 
None tune_ok
result is <function respond at 0xa7954c34>

Sending message "ping"...   done
Receiving message
inside __getattr__ Method(name=consume_ok, id=21) 
('amq.ctag13_rabbit at dsy025_20071001141609_',) content = None consumer_tag
result is amq.ctag13_rabbit at dsy025_20071001141609_

inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping consumer_tag
result is amq.ctag13_rabbit at dsy025_20071001141609_

inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __eq__
raising AttributeError __eq__
inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __coerce__
raising AttributeError __coerce__
inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __cmp__
raising AttributeError __cmp__
Got message: ping




- Dmitriy
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wing.jpg
Type: image/jpeg
Size: 81808 bytes
Desc: not available
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071001/7ead2877/attachment.jpg 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: shell.jpg
Type: image/jpeg
Size: 29201 bytes
Desc: not available
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071001/7ead2877/attachment-0001.jpg 

From lynton.grice at netweaverguru.com  Mon Oct  1 19:05:10 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Mon, 1 Oct 2007 20:05:10 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....SUCCESS
In-Reply-To: <47010BB3.4090500@cohesiveft.com>
Message-ID: <0ML21M-1IcPdn0JUo-0006l3@mrelayeu.kundenserver.de>

Hi there,

As mentioned in my last mail I can now run the code via the shell but can't
get it to work through WingIDE (for Python).

Well I have just upgraded to version 3.0 of WingIDE and SUCCESS.....all
working now with RabbitMQ.....

I must have had some strange config on my previous version or something.....

See attached screenshot to show it working in Wing...

Thanks again

Lynton

-----Original Message-----
From: Dmitriy Samovskiy [mailto:dmitriy.samovskiy at cohesiveft.com] 
Sent: 01 October 2007 05:01 PM
To: Lynton Grice
Cc: rabbitmq-discuss at lists.rabbitmq.com
Subject: Re: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??

Hi Lynton,

Lynton Grice wrote:
> 
> I get EXACTLY the same error when I try to run the "disttailf.py -c" after
> running disttailf.py d:\tmp\rabbit\rabbit.py.
> 
> The error seems to only be when I try to GET messages from
> RabbitMQ....putting them on is fine.....
> 
> Here is the error again:
> 
> AttributeError: __eq__
> 
> Traceback (innermost last):
> 
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 1, in ?
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 118, in
?
>   consumer(client, ch)
> File "d:\Documents and Settings\Lynton\Desktop\disttailf.py", line 38, in
> consumer
>   msg = python_queue.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in
> __getattr__
>   raise AttributeError(attr)
> 


The good news is that I was able to run your code and successfully 
sent/received a message. The bad news is that I still can't tell you 
what's wrong with your setup. But I am almost positive it's not related 
to rabbitmq or qpid python libraries.

To make a long story short, my interpreter also raises AttributeError on 
'__eq__' (which appears to be correct behavior). My interpreter however 
catches and processes this exception internally, vs. your interpreter 
doesn't.

What kind of python are you using? Original from python.org or something 
like ActivePython or maybe yet another flavor? I use original from 
python.org. Or maybe this is platform related (I use Debian Linux). 
Also, is it possible that you have more than one interpreter on your 
system and the one which you actually call is not the one from 
d:\python24\bin? Maybe try "d:\python24\bin\python.exe 
d:\tmp\rabbit\rabbit.py" ? These are just guesses however.

Here is my output from your code, with certain debug print outs from 
qpid.message.__getattr__():

inside __getattr__ Method(name=start, id=10) (8, 0, {'platform': 
'Erlang/OTP', 'product': 'RabbitMQ', 'version': '1.2.0', 'copyright': 
'Copyright (C) 2007 LShift Ltd., Cohesive Financial Technologies LLC., 
and Rabbit Technologies Ltd.', 'information': 'Licensed under the MPL. 
See http://www.rabbitmq.com/'}, 'PLAIN AMQPLAIN', 'en_US') content = 
None start_ok
res 2
result is <function respond at 0xa7954c34>

inside __getattr__ Method(name=tune, id=30) (0, 131072L, 0) content = 
None tune_ok
result is <function respond at 0xa7954c34>

Sending message "ping"...   done
Receiving message
inside __getattr__ Method(name=consume_ok, id=21) 
('amq.ctag13_rabbit at dsy025_20071001141609_',) content = None consumer_tag
result is amq.ctag13_rabbit at dsy025_20071001141609_

inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping consumer_tag
result is amq.ctag13_rabbit at dsy025_20071001141609_

inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __eq__
raising AttributeError __eq__
inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __coerce__
raising AttributeError __coerce__
inside __getattr__ Method(name=deliver, id=60) 
('amq.ctag13_rabbit at dsy025_20071001141609_', 10000L, False, 
'amq.direct', 'test') content = {} ping __cmp__
raising AttributeError __cmp__
Got message: ping




- Dmitriy
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Wing IDE.jpg
Type: image/jpeg
Size: 35588 bytes
Desc: not available
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071001/b72a5631/attachment.jpg 

From alexis.richardson at cohesiveft.com  Mon Oct  1 19:09:21 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Mon, 1 Oct 2007 19:09:21 +0100
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....SUCCESS
In-Reply-To: <0ML21M-1IcPdn0JUo-0006l3@mrelayeu.kundenserver.de>
References: <47010BB3.4090500@cohesiveft.com>
	<0ML21M-1IcPdn0JUo-0006l3@mrelayeu.kundenserver.de>
Message-ID: <167204d20710011109s45dd6a1fi52ff8d88155755b6@mail.gmail.com>

Lynton

That is great news - well done.

So, now that you've got it working, can you share your use case with
the list?  I'm sure that will be most revealing, and I am keen to get
people talking on the list about business cases, as well as getting X
to work with Y.

alexis



On 10/1/07, Lynton Grice <lynton.grice at netweaverguru.com> wrote:
> Hi there,
>
> As mentioned in my last mail I can now run the code via the shell but can't
> get it to work through WingIDE (for Python).
>
> Well I have just upgraded to version 3.0 of WingIDE and SUCCESS.....all
> working now with RabbitMQ.....



From codewalkerjoe at gmail.com  Mon Oct  1 21:12:17 2007
From: codewalkerjoe at gmail.com (joe lee)
Date: Mon, 1 Oct 2007 16:12:17 -0400
Subject: [rabbitmq-discuss] heart_beat_kill_pid & no error logger present
In-Reply-To: <470072C0.6050205@lshift.net>
References: <50ec7a2e0709301722s2d40068cn51fc043aee96db5@mail.gmail.com>
	<470072C0.6050205@lshift.net>
Message-ID: <50ec7a2e0710011312v53acc148j153458d6b3edfca2@mail.gmail.com>

Matthias,

I reran it on same, but different, intel dual core processor machine.  Log
files are empty.  It creates a erl_crash.dump.  I opened it up on crash dump
viewer.  For untrained erlang eyes, all seem to gibberish info.  Erlang and
Rabbitmq are just regular make install.  I haven't tried to turn on smp.

[root at db1 rabbitmq]# /usr/sbin/rabbitmq-server
heart_beat_kill_pid = 2799
{"init terminating in
do_boot",{undef,[{rabbit,start,[]},{init,start_it,1},{init,start_em,1}]}}
heart: Mon Oct  1 15:35:09 2007: Erlang has closed.
heart: Mon Oct  1 15:35:09 2007: Would reboot. Terminating.

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()
[root at db1 rabbitmq]#

/var/log/rabbitmq:
-rw-r--r-- 1 rabbitmq rabbitmq      0 2007-10-01 15:35 rabbit-sasl.log
-rw-r--r-- 1 rabbitmq rabbitmq      0 2007-10-01 15:35 rabbit.log
-rw-r----- 1 root     root     306444 2007-10-01 15:35 erl_crash.dump

Erlang Crash Dump Viewer:
General Information   Help

Slogan     init terminating in do_boot ()
Node name     'rabbit at localhost'
Crashdump created on     Mon Oct 1 15:35:09 2007
System version     Erlang (BEAM) emulator version 5.5.5 [source]
[async-threads:30] [hipe] [kernel-poll:true]
Compiled     Sun Sep 30 18:30:55 2007
Memory allocated     2686111 bytes
Atoms     4570
Processes     36
ETS tables     14
Funs     298

Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071001/52511c81/attachment.htm 

From matthias at lshift.net  Mon Oct  1 21:20:00 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Mon, 01 Oct 2007 21:20:00 +0100
Subject: [rabbitmq-discuss] heart_beat_kill_pid & no error logger present
In-Reply-To: <50ec7a2e0710011312v53acc148j153458d6b3edfca2@mail.gmail.com>
References: <50ec7a2e0709301722s2d40068cn51fc043aee96db5@mail.gmail.com>	<470072C0.6050205@lshift.net>
	<50ec7a2e0710011312v53acc148j153458d6b3edfca2@mail.gmail.com>
Message-ID: <47015670.4070104@lshift.net>

Joe,

joe lee wrote:
> [root at db1 rabbitmq]# /usr/sbin/rabbitmq-server
> heart_beat_kill_pid = 2799
> {"init terminating in 
> do_boot",{undef,[{rabbit,start,[]},{init,start_it,1},{init,start_em,1}]}}

It looks like Erlang fails to find the rabbit modules. Where did you 
install the server, i.e. where is the rabbitmq_server-* directory? Our 
installation instructions suggest you place it alongside the OTP modules 
in /usr/lib/erlang/lib/ (or wherever Erlang/OTP has its modules on your 
system).


Matthias.



From codewalkerjoe at gmail.com  Mon Oct  1 21:36:17 2007
From: codewalkerjoe at gmail.com (joe lee)
Date: Mon, 1 Oct 2007 16:36:17 -0400
Subject: [rabbitmq-discuss] heart_beat_kill_pid & no error logger present
In-Reply-To: <47015670.4070104@lshift.net>
References: <50ec7a2e0709301722s2d40068cn51fc043aee96db5@mail.gmail.com>
	<470072C0.6050205@lshift.net>
	<50ec7a2e0710011312v53acc148j153458d6b3edfca2@mail.gmail.com>
	<47015670.4070104@lshift.net>
Message-ID: <50ec7a2e0710011336g46c1815bob864745212f31b4a@mail.gmail.com>

Matthias,

Thank you I got it to work.

Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071001/20eef92f/attachment.htm 

From tom at samplonius.org  Tue Oct  2 08:51:32 2007
From: tom at samplonius.org (Tom Samplonius)
Date: Tue, 2 Oct 2007 00:51:32 -0700 (PDT)
Subject: [rabbitmq-discuss] Support for other protocols in RabbitMQ?
Message-ID: <24576145.2961191311492578.JavaMail.root@ly.sdf.com>


  Is there any change that RabbitMQ may support a http REST interface at some point as an alternative for environments that may have some clients that don't have an AMQP client library (and no chance of getting one)?

  It would probably increase RabbitMQ's acceptance in some environments.   It would probabloy allow RabbitMQ to be used as a Comet server for web browsers too.

Tom



From alexis.richardson at cohesiveft.com  Tue Oct  2 08:56:43 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Tue, 2 Oct 2007 08:56:43 +0100
Subject: [rabbitmq-discuss] Support for other protocols in RabbitMQ?
In-Reply-To: <24576145.2961191311492578.JavaMail.root@ly.sdf.com>
References: <24576145.2961191311492578.JavaMail.root@ly.sdf.com>
Message-ID: <167204d20710020056h5a2ed56didafcd6c8d137349a@mail.gmail.com>

Tom

Very much so.  This is a feature that quite a few people have
discussed with us.  I agree with your observations about the benefits.
 It would be good if you could state some of the requirements you
would expect in a REST interface.

Also, we have made an AMQP-over-HTTP protocol binding for RabbitMQ
available, plus Javascript libs for interacting with RabbitMQ over
HTTP.  You can find this at the bottom of this web page:
http://www.rabbitmq.com/download.html

alexis



On 10/2/07, Tom Samplonius <tom at samplonius.org> wrote:
>
>   Is there any change that RabbitMQ may support a http REST interface at some point as an alternative for environments that may have some clients that don't have an AMQP client library (and no chance of getting one)?
>
>   It would probably increase RabbitMQ's acceptance in some environments.   It would probabloy allow RabbitMQ to be used as a Comet server for web browsers too.
>
> Tom
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From tonyg at lshift.net  Tue Oct  2 10:11:53 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Tue, 02 Oct 2007 10:11:53 +0100
Subject: [rabbitmq-discuss] PHP AMQP client?
In-Reply-To: <14381884.2751191028231737.JavaMail.root@ly.sdf.com>
References: <14381884.2751191028231737.JavaMail.root@ly.sdf.com>
Message-ID: <47020B59.7000207@lshift.net>

Hi Tom,

Tom Samplonius wrote:
> Well, what is challenging about the PHP environment, is any long
> running tasks.  That is anything that can't be done during the http
> request/response cycle.

This lines up nicely with your other thread, about RESTful access to 
AMQP. Creating a full AMQP connection for every PHP script invocation 
seems very heavy - it's not only a full TCP connection, but it's several 
roundtrips between the client and broker. Perhaps a lighter RESTful 
HTTP-to-AMQP portal would work better: PHP scripts would both submit and 
retrieve messages via AMQP-over-HTTP...

I'll have to dig out my sketchy notes on what a good AMQP-over-HTTP 
would look like.

Regards,
   Tony




From tom at samplonius.org  Thu Oct  4 06:07:39 2007
From: tom at samplonius.org (Tom Samplonius)
Date: Wed, 3 Oct 2007 22:07:39 -0700 (PDT)
Subject: [rabbitmq-discuss] Support for other protocols in RabbitMQ?
In-Reply-To: <167204d20710020056h5a2ed56didafcd6c8d137349a@mail.gmail.com>
Message-ID: <23470174.3121191474459405.JavaMail.root@ly.sdf.com>


  Does the AMQP over http support also work with the new Erlang RFC4727 1.10 module that was just released?

  Is there any documentation available for AMQP over http other than the sample code?  it is a bit hard to follow, in order to interpret Javascript, figure out what it is doing, and then convert it to PHP, just based on two test pages.


----- "Alexis Richardson" <alexis.richardson at cohesiveft.com> wrote:
> Tom
> 
> Very much so.  This is a feature that quite a few people have
> discussed with us.  I agree with your observations about the
> benefits.
>  It would be good if you could state some of the requirements you
> would expect in a REST interface.
> 
> Also, we have made an AMQP-over-HTTP protocol binding for RabbitMQ
> available, plus Javascript libs for interacting with RabbitMQ over
> HTTP.  You can find this at the bottom of this web page:
> http://www.rabbitmq.com/download.html
> 
> alexis
> 
> 
> 
> On 10/2/07, Tom Samplonius <tom at samplonius.org> wrote:
> >
> >   Is there any change that RabbitMQ may support a http REST
> interface at some point as an alternative for environments that may
> have some clients that don't have an AMQP client library (and no
> chance of getting one)?
> >
> >   It would probably increase RabbitMQ's acceptance in some
> environments.   It would probabloy allow RabbitMQ to be used as a
> Comet server for web browsers too.
> >
> > Tom
> >
> > _______________________________________________
> > rabbitmq-discuss mailing list
> > rabbitmq-discuss at lists.rabbitmq.com
> > http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> >
> 
> 
> -- 
> Alexis Richardson
> +44 20 7617 7339 (UK)
> +44 77 9865 2911 (cell)
> +1 650 206 2517 (US)




From tonyg at lshift.net  Thu Oct  4 12:20:19 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Thu, 04 Oct 2007 12:20:19 +0100
Subject: [rabbitmq-discuss] Support for other protocols in RabbitMQ?
In-Reply-To: <23470174.3121191474459405.JavaMail.root@ly.sdf.com>
References: <23470174.3121191474459405.JavaMail.root@ly.sdf.com>
Message-ID: <4704CC73.5010501@lshift.net>

Hi Tom,

Tom Samplonius wrote:
> Does the AMQP over http support also work with the new Erlang RFC4727
> 1.10 module that was just released?

Yes, it's built on top of both rfc4627.erl and mod_jsonrpc.erl. It's not
a RESTful mapping, more of an RPC-style mapping - it was the simplest
thing to get working in the time I had available initially.

Interestingly, Javascript's poor support for binary might mandate a
bunch of (as yet unimplemented) hacks for, say, optional base64- or
hex-encoding of published/delivered messages! This strikes me
particularly now that I've just finished wrestling with unicode support
for rfc4627.erl... ("chars are not bytes, chars are not bytes, ...")

> Is there any documentation available for AMQP over http other than
> the sample code?  it is a bit hard to follow, in order to interpret
> Javascript, figure out what it is doing, and then convert it to PHP,
> just based on two test pages.

Absolutely, I understand. Unfortunately there isn't at the moment. We
hope to have some progress for you over the next week or two, though.
I'll talk to the guys who are working on the HTTP binding and get back
to you as soon as I have some news.

Regards,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From njbartlett at gmail.com  Mon Oct  8 23:55:03 2007
From: njbartlett at gmail.com (Neil Bartlett)
Date: Mon, 8 Oct 2007 23:55:03 +0100
Subject: [rabbitmq-discuss] Wrangler - an Erlang Refactorer
Message-ID: <A876129A-FE63-49FB-8CCA-21171C098C25@gmail.com>

Found on reddit today, may be of interest:

http://www.cs.kent.ac.uk/projects/forse/wrangler/doc-0.2/index.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071008/f2b496c4/attachment.htm 

From tonyg at lshift.net  Fri Oct 12 12:45:13 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Fri, 12 Oct 2007 12:45:13 +0100
Subject: [rabbitmq-discuss] Differences between 0-8 and 0-9
Message-ID: <470F5E49.1010600@lshift.net>

Hi all,

There have been a few questions lately about the differences between 0-8
and 0-9. Semantically, there are few differences besides the
introduction of the "work-in-progress" (WIP) classes and methods; here's
a summary of the differences from the specification XML:

 - the advertised version number is major=0,minor=9 rather than
   major=8,minor=0.

 - some methods have been renumbered:
			AMQP 0-8	AMQP 0-9
   Connection Redirect	50		42
   Connection Close	60		50
   Connection CloseOk	61		51

 - some methods have been removed:
   Channel Alert

 - some classes have been removed:
   Test

 - some methods have been added:
   Queue Unbind, methodId 50
   Queue UnbindOk, methodId 51

 - some new status codes have been introduced:
   NO_ROUTE 312
   NO_CONSUMERS 313
   PRECONDITION_FAILED 406

 - some methods have new arguments:
   Channel OpenOk has a longstr ChannelId
   Basic Consume has a table Filter
   File Consume has a table Filter
   Stream Consume has a table Filter

The other differences are to do with the WIP sections of the spec.

Framing and connection establishment (modulo the spec version number
advertisement), in particular, is identical.

So, anyone sticking to using 0-8 semantics has only a small step to take
to move up to the 0-9 version of the protocol.

Regards,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From sustrik at imatix.com  Fri Oct 12 13:47:08 2007
From: sustrik at imatix.com (Martin Sustrik)
Date: Fri, 12 Oct 2007 14:47:08 +0200
Subject: [rabbitmq-discuss] Differences between 0-8 and 0-9
In-Reply-To: <470F5E49.1010600@lshift.net>
References: <470F5E49.1010600@lshift.net>
Message-ID: <470F6CCC.1020901@imatix.com>

Tony,

Yes, I've pointed this out already. The problem is that OpenAMQ 
implements 0-9 (sans wip) and it cannot downgrade to 0-8 because we need 
Queue.Unbind in the production. Consequently, OpenAMQ is incompatible 
with both RabbitMQ na Qpid.

Martin

Tony Garnock-Jones wrote:
> Hi all,
> 
> There have been a few questions lately about the differences between 0-8
> and 0-9. Semantically, there are few differences besides the
> introduction of the "work-in-progress" (WIP) classes and methods; here's
> a summary of the differences from the specification XML:
> 
>  - the advertised version number is major=0,minor=9 rather than
>    major=8,minor=0.
> 
>  - some methods have been renumbered:
> 			AMQP 0-8	AMQP 0-9
>    Connection Redirect	50		42
>    Connection Close	60		50
>    Connection CloseOk	61		51
> 
>  - some methods have been removed:
>    Channel Alert
> 
>  - some classes have been removed:
>    Test
> 
>  - some methods have been added:
>    Queue Unbind, methodId 50
>    Queue UnbindOk, methodId 51
> 
>  - some new status codes have been introduced:
>    NO_ROUTE 312
>    NO_CONSUMERS 313
>    PRECONDITION_FAILED 406
> 
>  - some methods have new arguments:
>    Channel OpenOk has a longstr ChannelId
>    Basic Consume has a table Filter
>    File Consume has a table Filter
>    Stream Consume has a table Filter
> 
> The other differences are to do with the WIP sections of the spec.
> 
> Framing and connection establishment (modulo the spec version number
> advertisement), in particular, is identical.
> 
> So, anyone sticking to using 0-8 semantics has only a small step to take
> to move up to the 0-9 version of the protocol.
> 
> Regards,
>   Tony




From cctrieloff at redhat.com  Fri Oct 12 14:09:02 2007
From: cctrieloff at redhat.com (Carl Trieloff)
Date: Fri, 12 Oct 2007 09:09:02 -0400
Subject: [rabbitmq-discuss] Differences between 0-8 and 0-9
In-Reply-To: <470F6CCC.1020901@imatix.com>
References: <470F5E49.1010600@lshift.net> <470F6CCC.1020901@imatix.com>
Message-ID: <470F71EE.4070406@redhat.com>


Martin,

Qpid M2.1 has been updated the 0-9.
Qpid M2 is 0-8.

Carl.


Martin Sustrik wrote:
> Tony,
>
> Yes, I've pointed this out already. The problem is that OpenAMQ 
> implements 0-9 (sans wip) and it cannot downgrade to 0-8 because we need 
> Queue.Unbind in the production. Consequently, OpenAMQ is incompatible 
> with both RabbitMQ na Qpid.
>
> Martin
>
> Tony Garnock-Jones wrote:
>   
>> Hi all,
>>
>> There have been a few questions lately about the differences between 0-8
>> and 0-9. Semantically, there are few differences besides the
>> introduction of the "work-in-progress" (WIP) classes and methods; here's
>> a summary of the differences from the specification XML:
>>
>>  - the advertised version number is major=0,minor=9 rather than
>>    major=8,minor=0.
>>
>>  - some methods have been renumbered:
>> 			AMQP 0-8	AMQP 0-9
>>    Connection Redirect	50		42
>>    Connection Close	60		50
>>    Connection CloseOk	61		51
>>
>>  - some methods have been removed:
>>    Channel Alert
>>
>>  - some classes have been removed:
>>    Test
>>
>>  - some methods have been added:
>>    Queue Unbind, methodId 50
>>    Queue UnbindOk, methodId 51
>>
>>  - some new status codes have been introduced:
>>    NO_ROUTE 312
>>    NO_CONSUMERS 313
>>    PRECONDITION_FAILED 406
>>
>>  - some methods have new arguments:
>>    Channel OpenOk has a longstr ChannelId
>>    Basic Consume has a table Filter
>>    File Consume has a table Filter
>>    Stream Consume has a table Filter
>>
>> The other differences are to do with the WIP sections of the spec.
>>
>> Framing and connection establishment (modulo the spec version number
>> advertisement), in particular, is identical.
>>
>> So, anyone sticking to using 0-8 semantics has only a small step to take
>> to move up to the 0-9 version of the protocol.
>>
>> Regards,
>>   Tony
>>     
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071012/5a58ffc8/attachment.htm 

From codewalkerjoe at gmail.com  Mon Oct 15 16:01:36 2007
From: codewalkerjoe at gmail.com (joe lee)
Date: Mon, 15 Oct 2007 11:01:36 -0400
Subject: [rabbitmq-discuss] RabbitMQ in synchronous mode
Message-ID: <50ec7a2e0710150801x2298950cw466c2b9c31a9dbc9@mail.gmail.com>

Can you have RabbitMQ work in synchronous mode?  For example, a message put
in a queue by the client(client waits for processing server to return)  and
one of the processing server picks up work, process it and sends a reply
back to the client.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071015/93fda1b4/attachment.htm 

From Ben.Hood at vocalink.com  Mon Oct 15 17:08:24 2007
From: Ben.Hood at vocalink.com (Ben Hood)
Date: Mon, 15 Oct 2007 17:08:24 +0100
Subject: [rabbitmq-discuss] RabbitMQ in synchronous mode
Message-ID: <AE8FD6F8A5C7A74EB55A0639892B0A6C13AA20@SPR3V4.office.local>

Joe,
 
Have a look at the way the RpcClient works in the java client - it sets
a response queue up for RPC requests that it registers itself as a
consumer for, i.e. at the transport layer it is asynchronous, but from
the client's perspective it is synchronous because it effectively does a
blocking receive.
 
HTH,
 
Ben 

	Can you have RabbitMQ work in synchronous mode?  For example, a
message put in a queue by the client(client waits for processing server
to return)  and one of the processing server picks up work, process it
and sends a reply back to the client.   
	
	


*****************************************************
This email is issued by a VocaLink group company. It is confidential and intended for the exclusive use of the addressee only. You should not disclose its contents to any other person. If you are not the addressee (or responsible for delivery of the message to the addressee), please notify the originator immediately by return message and destroy the original message. The contents of this email will have no contractual effect unless it is otherwise agreed between a specific VocaLink group company and the recipient.
 
The VocaLink group companies include, among others: VocaLink Limited (Company No 06119048, VAT No. 907 9619 87) which is registered in England and Wales at registered office Drake House, Homestead Road, Rickmansworth, WD3 1FX. United Kingdom, Voca Limited (Company no 1023742, VAT No. 907 9619 87) which is registered in England and Wales at registered office Drake House, Three Rivers Court, Homestead Road, Rickmansworth, Hertfordshire. WD3 1FX. United Kingdom, LINK Interchange Network Limited (Company No 3565766, VAT No. 907 9619 87) which is registered in England and Wales at registered office Arundel House, 1 Liverpool Gardens, Worthing, West Sussex, BN11 1SL and VocaLink Holdings Limited (Company No 06119036, VAT No. 907 9619 87) which is registered in England and Wales at registered office Drake House, Homestead Road, Rickmansworth, WD3 1FX. United Kingdom.
 
The views and opinions expressed in this email may not reflect those of any member of the VocaLink group. This message and any attachments have been scanned for viruses prior to leaving the VocaLink group network; however, VocaLink does not guarantee the security of this message and will not be responsible for any damages arising as a result of any virus being passed on or arising from any alteration of this message by a third party. The VocaLink group may monitor emails sent to and from the VocaLink group network.
 
This message has been checked for all email viruses by MessageLabs.
*************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071015/97ed9761/attachment.htm 

From landonf at threerings.net  Fri Oct 19 02:15:11 2007
From: landonf at threerings.net (Landon Fuller)
Date: Thu, 18 Oct 2007 18:15:11 -0700
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
Message-ID: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>

Howdy,

I'm investigating using AMQP and RabbitMQ as our service  
infrastructure backbone.

I've run into some interesting incompatibilities between Qpid at  
RabbitMQ --  an example:
	- Qpid does not support the Access Class
	- RabbitMQ's client API requires it
	- According to https://issues.apache.org/jira/browse/QPID-552, the  
Access class has been removed for 0-10, and replaced with sessions.

This leads to my questions:
	-- Is it crazy to hope for backwards compatibility with older  
clients as both the specification, and the RabbitMQ implementation,  
advance?
	-- Will RabbitMQ Java API compatibility be broken as the  
specification changes?

In other words, am I engaging in massive foot-shooting by trying to  
build on AMQP now, and should I exercise judicious patience?

Thanks!
Landon Fuller
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071018/51b63456/attachment.pgp 

From codewalkerjoe at gmail.com  Fri Oct 19 16:07:04 2007
From: codewalkerjoe at gmail.com (joe lee)
Date: Fri, 19 Oct 2007 11:07:04 -0400
Subject: [rabbitmq-discuss] Message Invisible Mode
Message-ID: <50ec7a2e0710190807i1d160c8ay32e5168e4f8eed79@mail.gmail.com>

Let say you have 1 producer and 3 consumers.  Producer places a message in
the queue.  One of the consumer picks up the message and process it.  While
it's processing it, is there a way to make the message in queue to go
invisible mode on user defined time (30sec, 1min so on), so that other 2
consumers don't pick up the same message and start processing?  Like in
Amazon SQS.  Once the time limit has passed 30sec, or 1min, message become
visible, if message has not been processed and deleted by consumer 1.

Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071019/e7e15013/attachment.htm 

From alexis.richardson at cohesiveft.com  Fri Oct 19 16:37:39 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Fri, 19 Oct 2007 16:37:39 +0100
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>
Message-ID: <167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>

Hi Landon

Welcome to the list.  Thanks for your questions and sorry for being
slow to reply.

I have discussed them with the team and my replies are below.


On 10/19/07, Landon Fuller <landonf at threerings.net> wrote:

> I'm investigating using AMQP and RabbitMQ as our service
> infrastructure backbone.

Great!  Please tell us more - several other people have reported
similar use cases and getting them discussed on this list is an
excellent way for community members to benefit from each other's ideas
and work.


> I've run into some interesting incompatibilities between Qpid at
> RabbitMQ --  an example:
>         - Qpid does not support the Access Class
>         - RabbitMQ's client API requires it
>         - According to https://issues.apache.org/jira/browse/QPID-552, the
> Access class has been removed for 0-10, and replaced with sessions.

Across implementations: we have a java client property
(com.rabbitmq.client.ConnectionParameters.suppressAccessRequest) that
allows us to suppress access.request checks, specifically developed
for working with QPid. This, plus migration to using the 0-9 XML or
the 0-8qpid XML, lets you interoperate at a very crude level.

That is - you should be able to drop in the XML as a config file, and
let RabbitMQ do rest automatically, to achieve interop.  Let me know
if this works.

We are intimately involved with Sessions design for 0-10.  Feel free
to ask more about that here.  The access tickets will be deprecated
from the AMQP spec, since a better solution for security is on its
way.  If 0-10 ends up ratified without access.request support, we may
remove access.request entirely from rabbitmq, even from the 0-8
implementation. No other implementation supports this part of the
specification.

You can also use SSL with AMQP -- we have experimented with this in
RabbitMQ but not released code yet.


> This leads to my questions:
>         -- Is it crazy to hope for backwards compatibility with older
> clients as both the specification, and the RabbitMQ implementation,
> advance?

No you are not crazy.

At RabbitMQ we are 100% committed to interop.


>         -- Will RabbitMQ Java API compatibility be broken as the
> specification changes?

No it will not.

We are developing clients with seamless interop.

MORE pedantically .... For 0-8 to 0-10 compatibility, the important
idea is to program to the model. The model isn't changing too far -
queues, exchanges, consumers, and bindings all still exist - so
*designing* for AMQP will be very similar. The API will change, but
will not change drastically. There will be added complications around
session setup and teardown, but the core operations (publish, get,
consume, declare, delete) will map in an obvious and mechanical way
from 0-8 to 0-10.




> In other words, am I engaging in massive foot-shooting by trying to
> build on AMQP now, and should I exercise judicious patience?

No you are not shooting yourself in the foot at all :-)

We have production users today who (as I understand it) are happy with
0-8, and are happy with the upgrade path should they need to follow
it.


> Thanks!
> Landon Fuller

My pleasure

alexis




-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From cctrieloff at redhat.com  Fri Oct 19 16:46:28 2007
From: cctrieloff at redhat.com (Carl Trieloff)
Date: Fri, 19 Oct 2007 11:46:28 -0400
Subject: [rabbitmq-discuss] Message Invisible Mode
In-Reply-To: <50ec7a2e0710190807i1d160c8ay32e5168e4f8eed79@mail.gmail.com>
References: <50ec7a2e0710190807i1d160c8ay32e5168e4f8eed79@mail.gmail.com>
Message-ID: <4718D154.20804@redhat.com>


AMQP 0-10 acquire-mode does this for you
Carl.

joe lee wrote:
> Let say you have 1 producer and 3 consumers.  Producer places a 
> message in the queue.  One of the consumer picks up the message and 
> process it.  While it's processing it, is there a way to make the 
> message in queue to go invisible mode on user defined time (30sec, 
> 1min so on), so that other 2 consumers don't pick up the same message 
> and start processing?  Like in Amazon SQS.  Once the time limit has 
> passed 30sec, or 1min, message become visible, if message has not been 
> processed and deleted by consumer 1.
>
> Joe
> ------------------------------------------------------------------------
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071019/05dcde8d/attachment.htm 

From tonyg at lshift.net  Fri Oct 19 17:13:37 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Fri, 19 Oct 2007 17:13:37 +0100
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>
	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>
Message-ID: <4718D7B1.5080004@lshift.net>

Hi,

Alexis Richardson wrote:
> That is - you should be able to drop in the XML as a config file, and
> let RabbitMQ do rest automatically, to achieve interop.  Let me know
> if this works.

To be precise: switching to a different AMQP specification XML file is
something that's done at compile-time, and is a bit of a hack. We have a
good approach in the pipeline for getting smooth interoperation for
current 0-8/0-9 implementations, but the *current* Java client can't
have its "dialect" switched at runtime.

> You can also use SSL with AMQP -- we have experimented with this in
> RabbitMQ but not released code yet.

Expect client-side support (as simple as using a different
SocketFactory) for SSL/TLS in the next release. The server-side of the
approach is to use relaying SSL proxy, e.g. stunnel4
(http://www.stunnel.org).

Regards,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From tonyg at lshift.net  Fri Oct 19 17:22:35 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Fri, 19 Oct 2007 17:22:35 +0100
Subject: [rabbitmq-discuss] Message Invisible Mode
In-Reply-To: <4718D154.20804@redhat.com>
References: <50ec7a2e0710190807i1d160c8ay32e5168e4f8eed79@mail.gmail.com>
	<4718D154.20804@redhat.com>
Message-ID: <4718D9CB.3020904@lshift.net>

Hi Joe,

Carl Trieloff wrote:
> AMQP 0-10 acquire-mode does this for you
> Carl.

(Aside: interesting! I'm looking forward to checking out the 0-10
transfer model.)

Just to add to Carl's point about 0-10, the current broker
implementations only support the kind of locking you mention partially.
There's no notion of timeout - instead, channel-closing or explicit
accept/reject is used.

That is, in 0-8/0-9, once a message is delivered to a consumer, either
via basic.deliver or basic.get-ok, the consumer is permitted to hold on
to it for as long as they please before accepting or rejecting it. While
they're holding on to it, the broker is forbidden from offering it to
any other consumer.

Messages are rejected either by explicit action, or by the closing of
the channel. Messages are accepted by basic.ack.

If a message is rejected, either explicitly or implicitly as part of
channel or connection closure, the message MAY be redelivered to some
other consumer by the broker.

So, to summarise: so long as you were after the basic "locking" feature,
and not the "timeout" part, then hopefully, current implementations do
what you want :-)

Regards,
  Tony

> joe lee wrote:
>> Let say you have 1 producer and 3 consumers.  Producer places a
>> message in the queue.  One of the consumer picks up the message and
>> process it.  While it's processing it, is there a way to make the
>> message in queue to go invisible mode on user defined time (30sec,
>> 1min so on), so that other 2 consumers don't pick up the same message
>> and start processing?  Like in Amazon SQS.  Once the time limit has
>> passed 30sec, or 1min, message become visible, if message has not been
>> processed and deleted by consumer 1.
>>
>> Joe

-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From binarysurgeon at gmail.com  Fri Oct 19 17:26:28 2007
From: binarysurgeon at gmail.com (binarysurgeon at gmail.com)
Date: Fri, 19 Oct 2007 11:26:28 -0500
Subject: [rabbitmq-discuss] Benchmarks
Message-ID: <4718DAB4.8050001@gmail.com>

I'm evaluated RabbitMQ for a distributed computing project and was 
wondering if anyone had benchmarks regarding non-persistent 
non-transactional messages.  The FAQ talks about persistant messages:

"From our testing, we expect easily-achievable throughputs of 4000 
persistent, non-transacted one-kilobyte messages per second (Intel 
Pentium D, 2.8GHz, dual core, gigabit ethernet) from a single RabbitMQ 
broker node writing to a single spindle."

but I'd have to imagine that the throughput for non-persistent messages 
per second is significantly higher.  OpenAMQ claims 100k+ non-persistent 
messages per second.

Can anyone provide information regarding the throughput of 
non-persistent non-transactional messages?  Please provide the hardware 
in your responses.

Thanks,

-- 
Matt




From landonf at threerings.net  Sat Oct 20 00:52:34 2007
From: landonf at threerings.net (Landon Fuller)
Date: Fri, 19 Oct 2007 16:52:34 -0700
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>
	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>
Message-ID: <5871C798-D967-4770-8CC2-C62181479269@threerings.net>


On Oct 19, 2007, at 8:37 AM, Alexis Richardson wrote:

> Hi Landon
>
> Welcome to the list.  Thanks for your questions and sorry for being
> slow to reply.

Thanks! That was pretty quick =)

> On 10/19/07, Landon Fuller <landonf at threerings.net> wrote:
>
>> I'm investigating using AMQP and RabbitMQ as our service
>> infrastructure backbone.
>
> Great!  Please tell us more - several other people have reported
> similar use cases and getting them discussed on this list is an
> excellent way for community members to benefit from each other's ideas
> and work.

Sure. Hope this isn't too verbose -- I'll throw this out there, with  
the caveat that
this is a rough explanation of my current thinking, I'm sure it's  
both incomplete
and imperfect, and I'd appreciate input.

First, an introduction to our problem space. We write reasonably  
large online
multiplayer games, using Java. All our games implement some variation  
of the "place" model:

	Within the game, there is the notion of a 'place', and your client  
is in it.
	A place could be a room, or a pirate ship, or a 10x10 grid of a larger
	virtual world. Each place is responsible for maintaining its own  
state, and
	allowing clients to permute the state of that place.

	A client may be in several places at once: you could be playing a
	puzzle (place A) while you're also aboard a pirate ship (place B).

In my ideal universe, I view places as a service, instances of which  
can be started on any server
in a cluster. I'd like implementing these services to be as easy as  
possible, with most of the
complexity hidden from the game developer. In some instances, the end- 
user may be a game
developer, and we'll run their code in a javascript sandbox on  
dedicated machines.

I see the following two abstractions as being most valuable for this  
sort of service building:

	- RPC:
		RPC services use a request queue, and per-client response queues.  
Any number of providers
		can attach to the request queue and respond to requests -- that's  
an application level detail.
		Service providers can detach from a queue, and requests simply  
queue up until they can be
		handled again.

		We can dispatch RPC requests to Java (possibly via a reflective  
dispatcher), JavaScript
		(via Rhino), or another server/language entirely.

		Incoming requests can arrive via AMPQ, or external RPC brokers,  
such as services implementing
		XML-RPC, JSON-RPC, Hessian -- etc.

	- Data queue:
		Very simple queue API for providing events/data to the RPC clients.  
An RPC service can place
		data in the queue for client consumption. This can be used to  
provide data to simple polling clients,
		without requiring long-blocking server-side RPC threads. This is  
also a prime candidate for wrapping
		with a HTTP REST interface.

"Place" is only the first step. We also need banking, currency  
exchanges, chat & presence (eg, jabber),
event logging services (for tracking server & user behavior); I'm  
hoping these abstractions are a good
foundation towards building those services out.

The above is actually what I've started working on now. In addition  
to the groundwork , I also expect to
solve issues like handling service lookups / request routing.

> No you are not shooting yourself in the foot at all :-)
>
> We have production users today who (as I understand it) are happy with
> 0-8, and are happy with the upgrade path should they need to follow
> it.

Thanks for your reply, that provides me with quite a bit more  
confidence.

-landonf
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071019/73aef262/attachment.pgp 

From 0x6e6562 at gmail.com  Sat Oct 20 13:15:22 2007
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Sat, 20 Oct 2007 13:15:22 +0100
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <5871C798-D967-4770-8CC2-C62181479269@threerings.net>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>
	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>
	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>
Message-ID: <269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>

Landon,

>         - RPC:
>                 RPC services use a request queue, and per-client response queues.
> Any number of providers
>                 can attach to the request queue and respond to requests -- that's
> an application level detail.
>                 Service providers can detach from a queue, and requests simply
> queue up until they can be
>                 handled again.
>
>                 We can dispatch RPC requests to Java (possibly via a reflective
> dispatcher), JavaScript
>                 (via Rhino), or another server/language entirely.
>
>                 Incoming requests can arrive via AMPQ, or external RPC brokers,
> such as services implementing
>                 XML-RPC, JSON-RPC, Hessian -- etc.

This is currently possible. I am using a wrapper around the Java
RpcClient to that puts Hessian encoded calls onto a queue that gets
consumed by an Erlang rpc handler, which in turn decodes the Hessian
payload, invokes a service API, encodes the response which goes back
out to the Java client. Pretty simple stuff really, though what I have
done on the Java side is a rough cut, because I've been concentrating
*productizing* the Erlang side of things. I envisage at some stage to
produce a SCA connector to hide this plumbing from the application
code, but I'm not going to harp on about what is currently vapourware.

HTH,

Ben



From alexis.richardson at cohesiveft.com  Sat Oct 20 18:53:42 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Sat, 20 Oct 2007 18:53:42 +0100
Subject: [rabbitmq-discuss] Benchmarks
In-Reply-To: <4718DAB4.8050001@gmail.com>
References: <4718DAB4.8050001@gmail.com>
Message-ID: <167204d20710201053l37978e59he318d41b704e0dbe@mail.gmail.com>

Matt

> I'm evaluated RabbitMQ for a distributed computing project and was
> wondering if anyone had benchmarks regarding non-persistent
> non-transactional messages.

Yes we have.

We have tested RabbitMQ quite a bit and continue to find ways to make
it faster, especially in clustered mode which we have tested with up
to 16 nodes.  I provide a snapshot of several scenarios below.

1) On an older and slower version of RabbitMQ we were able to achieve
166,400 messages per second, with each message being 500 bytes in
size.  The rate is an egress rate (ie "output messages per second").
This was for a pub-sub scenario with one producer and 64 consumers.
Please note when I say pub/sub I mean "1-many" but implemented using
TCP unicast and not UDP multicast.

There were four 2-way AMD machines in the cluster.  I can check for
more info on exactly which model of CPU these were, but they were not
especially recent or fast.

2) The same cluster was able to run with an egress rate of 224,000
messages per second with smaller messages.  When only one machine was
used, the rates in both 500 byte and 12 byte cases were around 65,000
mps (egress).

3) On the current version of RabbitMQ we measured an input rate of
80,000 mps for 256 byte messages, and an output rate of 320,000 mps.
Note this means each published message is replicated four times
instead of 64 as in the previous case.  Also, this was using 16 cores.

Anyway, the total message rate (ingress+egress) was 400,000 mps for
256 bytes per message.  For various reasons we believe we can get much
higher throughputs by tweaking the broker's design - please let us
know if you want to discuss this.

Here are some other factors to consider:

One issue is that different numbers of producers and consumers lead to
different message rates.  We think 1:64 is a good ratio for (say) a
trading floor.  The case we tested in (3) had a ratio of 1:4 for very
specific reasons to do with the use case.  Designing a system that can
cluster to 10s or 100s of nodes while keeping latency reasonable, for
multiple different use cases and pub/sub ratios, is an interesting
challenge as I am sure you appreciate.

Also note that a problem with testing message rates like the ones I
quote above, is that you run into the limits of the network.  We've
been testing using full TCP/IP stacks over 1GigE.  Of course this
means we flood the network with message rates as described above.  In
addition to any speed up due to design, I would expect RabbitMQ to
perform better if able to take advantage of Infiniband for example.



> The FAQ talks about persistant messages:
>
> "From our testing, we expect easily-achievable throughputs of 4000
> persistent, non-transacted one-kilobyte messages per second (Intel
> Pentium D, 2.8GHz, dual core, gigabit ethernet) from a single RabbitMQ
> broker node writing to a single spindle."
>
> but I'd have to imagine that the throughput for non-persistent messages
> per second is significantly higher.  OpenAMQ claims 100k+ non-persistent
> messages per second.
>
> Can anyone provide information regarding the throughput of
> non-persistent non-transactional messages?  Please provide the hardware
> in your responses.

I hope I have answered your questions.  If you need more info on
anything, eg on the exact hardware, please let us know.

To be quite honest I am not sure who would need more than a few 100k
messages per second in 2007, outside of people trading off financial
feeds.  I hope it is enough for your use case.

alexis






>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From tom at samplonius.org  Tue Oct 23 03:35:27 2007
From: tom at samplonius.org (Tom Samplonius)
Date: Mon, 22 Oct 2007 19:35:27 -0700 (PDT)
Subject: [rabbitmq-discuss] Support for other protocols in RabbitMQ?
In-Reply-To: <4704CC73.5010501@lshift.net>
Message-ID: <14644818.3661193106927155.JavaMail.root@ly.sdf.com>


  I've been trying to figure out how to use the rabbit-over-http support.

  The first issue, is where does it assume Rabbit is supposed to be installed?  I get a bunch of errors that the includes can't be found.  Is the http module supposed to be stuffed inside Rabbit?

Tom
  

----- "Tony Garnock-Jones" <tonyg at lshift.net> wrote:
> Hi Tom,
> 
> Tom Samplonius wrote:
> > Does the AMQP over http support also work with the new Erlang
> RFC4727
> > 1.10 module that was just released?
> 
> Yes, it's built on top of both rfc4627.erl and mod_jsonrpc.erl. It's
> not
> a RESTful mapping, more of an RPC-style mapping - it was the simplest
> thing to get working in the time I had available initially.
> 
> Interestingly, Javascript's poor support for binary might mandate a
> bunch of (as yet unimplemented) hacks for, say, optional base64- or
> hex-encoding of published/delivered messages! This strikes me
> particularly now that I've just finished wrestling with unicode
> support
> for rfc4627.erl... ("chars are not bytes, chars are not bytes, ...")
> 
> > Is there any documentation available for AMQP over http other than
> > the sample code?  it is a bit hard to follow, in order to interpret
> > Javascript, figure out what it is doing, and then convert it to
> PHP,
> > just based on two test pages.
> 
> Absolutely, I understand. Unfortunately there isn't at the moment. We
> hope to have some progress for you over the next week or two, though.
> I'll talk to the guys who are working on the HTTP binding and get
> back
> to you as soon as I have some news.
> 
> Regards,
>   Tony
> -- 
>  [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
>    [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
>  []  [] http://www.lshift.net/ | Email: tonyg at lshift.net




From landonf at threerings.net  Tue Oct 23 03:45:32 2007
From: landonf at threerings.net (Landon Fuller)
Date: Mon, 22 Oct 2007 19:45:32 -0700
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>
	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>
	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>
	<269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>
Message-ID: <BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>


On Oct 20, 2007, at 5:15 AM, Ben Hood wrote:

> This is currently possible. I am using a wrapper around the Java
> RpcClient to that puts Hessian encoded calls onto a queue that gets
> consumed by an Erlang rpc handler, which in turn decodes the Hessian
> payload, invokes a service API, encodes the response which goes back
> out to the Java client. Pretty simple stuff really, though what I have
> done on the Java side is a rough cut, because I've been concentrating
> *productizing* the Erlang side of things. I envisage at some stage to
> produce a SCA connector to hide this plumbing from the application
> code, but I'm not going to harp on about what is currently vapourware.

Neat -- This is roughly what I've got wired up, amusingly, also using  
Hessian.

Have you delved into security?  That's my next concern -- how to  
prevent a client/peer from reading requests off of the RPC service  
queue?

Cheers,
landonf
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071022/f40c4888/attachment.pgp 

From tonyg at lshift.net  Tue Oct 23 11:19:00 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Tue, 23 Oct 2007 11:19:00 +0100
Subject: [rabbitmq-discuss] Support for other protocols in RabbitMQ?
In-Reply-To: <14644818.3661193106927155.JavaMail.root@ly.sdf.com>
References: <14644818.3661193106927155.JavaMail.root@ly.sdf.com>
Message-ID: <471DCA94.3000906@lshift.net>

Hi Tom,

You're right - the HTTP support for rabbit builds on the server's
codebase. Communication between the JSON-RPC listener and the rabbit
broker uses internal Erlang messaging.

The code is broken, at the moment. I've just checked the trunk of the
development line, and it needs work before a new snapshot can be
released. I'll see what I can do about this later on this week.

Regards,
  Tony


Tom Samplonius wrote:
>   I've been trying to figure out how to use the rabbit-over-http support.
> 
> The first issue, is where does it assume Rabbit is supposed to be
installed? I get a bunch of errors that the includes can't be found. Is
the http module supposed to be stuffed inside Rabbit?
> 
> Tom
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From tonyg at lshift.net  Tue Oct 23 11:37:52 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Tue, 23 Oct 2007 11:37:52 +0100
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>	<269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>
	<BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>
Message-ID: <471DCF00.4060003@lshift.net>

Landon Fuller wrote:
> Have you delved into security?  That's my next concern -- how to prevent
> a client/peer from reading requests off of the RPC service queue?

Perhaps have a realm for the services? Client users would be permitted
only to write to exchanges/queues in the realm, and Server users would
be permitted only to read (and of course to create
queues/exchanges/bindings - this is the "active" permission).

http://www.rabbitmq.com/admin-guide.html#set_permissions contains info
on using the admin tool to configure realms and permissions. I'm
imagining something like:

rabbitmqctl add_realm / /data/services

rabbitmqctl add_user serviceuser pass1
rabbitmqctl map_user_vhost serviceuser /
rabbitmqctl set_permissions serviceuser / /data/services \
  active passive write read

rabbitmqctl add_user clientuser pass2
rabbitmqctl map_user_vhost clientuser /
rabbitmqctl set_permissions clientuser / /data/services \
  passive write

rabbitmqctl list_vhost_users /
rabbitmqctl list_realms /
rabbitmqctl list_permissions serviceuser /
rabbitmqctl list_permissions clientuser /


Regards,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From tonyg at lshift.net  Tue Oct 23 11:40:00 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Tue, 23 Oct 2007 11:40:00 +0100
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <471DCF00.4060003@lshift.net>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>	<269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>	<BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>
	<471DCF00.4060003@lshift.net>
Message-ID: <471DCF80.6010104@lshift.net>

Tony Garnock-Jones wrote:
> Perhaps have a realm for the services? Client users would be permitted
> only to write to exchanges/queues in the realm, and Server users would
> be permitted only to read (and of course to create
> queues/exchanges/bindings - this is the "active" permission).

Of course, clients need reply queues. You'd perhaps use either the
default realm, /data, for that, or set up a realm specifically for reply
queues, where the client user has active rights.

Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From 0x6e6562 at gmail.com  Tue Oct 23 18:31:42 2007
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Tue, 23 Oct 2007 18:31:42 +0100
Subject: [rabbitmq-discuss] Fwd: Implementation / Specification Stability?
In-Reply-To: <269388e30710222343m4db682d0g78f782858a1020a3@mail.gmail.com>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>
	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>
	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>
	<269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>
	<BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>
	<269388e30710222343m4db682d0g78f782858a1020a3@mail.gmail.com>
Message-ID: <269388e30710231031p73baddb3gdf128432f1c361f9@mail.gmail.com>

---------- Forwarded message ----------
From: Ben Hood <0x6e6562 at gmail.com>
Date: Oct 23, 2007 7:43 AM
Subject: Re: [rabbitmq-discuss] Implementation / Specification Stability?
To: Landon Fuller <landonf at threerings.net>


Landon,

> Have you delved into security?  That's my next concern -- how to
> prevent a client/peer from reading requests off of the RPC service
> queue?

Check out the section on setting user permissions in the admin guide
(http://www.rabbitmq.com/admin-guide.html#set_permissions).

At the moment this is achieved using the rabbitmqctl command, but I
gather there may be plans to expose this management functionality via
AMQP itself (maybe Tony can correct me on this).

HTH,

Ben



From landonf at threerings.net  Tue Oct 23 18:42:02 2007
From: landonf at threerings.net (Landon Fuller)
Date: Tue, 23 Oct 2007 10:42:02 -0700
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <471DCF80.6010104@lshift.net>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>	<269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>	<BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>
	<471DCF00.4060003@lshift.net> <471DCF80.6010104@lshift.net>
Message-ID: <67A21E5A-E7C1-4E66-8EB1-435037D07385@threerings.net>


On Oct 23, 2007, at 03:40, Tony Garnock-Jones wrote:

> Tony Garnock-Jones wrote:
>> Perhaps have a realm for the services? Client users would be  
>> permitted
>> only to write to exchanges/queues in the realm, and Server users  
>> would
>> be permitted only to read (and of course to create
>> queues/exchanges/bindings - this is the "active" permission).
>
> Of course, clients need reply queues. You'd perhaps use either the
> default realm, /data, for that, or set up a realm specifically for  
> reply
> queues, where the client user has active rights.

OK -- I was not sure if multiple realms were considered a reasonable  
implementation strategy.

As far as preventing clients from reading each other's reply queues,  
the best bet seems to be generating a 'securely' random queue name.

Thanks!
Landon
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071023/a9fa3331/attachment.pgp 

From cctrieloff at redhat.com  Tue Oct 23 18:46:57 2007
From: cctrieloff at redhat.com (Carl Trieloff)
Date: Tue, 23 Oct 2007 13:46:57 -0400
Subject: [rabbitmq-discuss] Implementation / Specification Stability?
In-Reply-To: <67A21E5A-E7C1-4E66-8EB1-435037D07385@threerings.net>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>	<269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>	<BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>	<471DCF00.4060003@lshift.net>
	<471DCF80.6010104@lshift.net>
	<67A21E5A-E7C1-4E66-8EB1-435037D07385@threerings.net>
Message-ID: <471E3391.7050701@redhat.com>

Landon Fuller wrote:
>
> On Oct 23, 2007, at 03:40, Tony Garnock-Jones wrote:
>
>> Tony Garnock-Jones wrote:
>>> Perhaps have a realm for the services? Client users would be permitted
>>> only to write to exchanges/queues in the realm, and Server users would
>>> be permitted only to read (and of course to create
>>> queues/exchanges/bindings - this is the "active" permission).
>>
>> Of course, clients need reply queues. You'd perhaps use either the
>> default realm, /data, for that, or set up a realm specifically for reply
>> queues, where the client user has active rights.
>
> OK -- I was not sure if multiple realms were considered a reasonable 
> implementation strategy.
>
> As far as preventing clients from reading each other's reply queues, 
> the best bet seems to be generating a 'securely' random queue name.
>

 From the Spec side we are discussing doing this with RBAC in the 
Security SIG for 0-11.
Carl.



From tonyg at lshift.net  Wed Oct 24 16:15:22 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Wed, 24 Oct 2007 16:15:22 +0100
Subject: [rabbitmq-discuss] Fwd: Implementation / Specification
	Stability?
In-Reply-To: <269388e30710231031p73baddb3gdf128432f1c361f9@mail.gmail.com>
References: <FCC31C7F-FD84-4506-AE6E-4FECF0438ED3@threerings.net>	<167204d20710190837k17e1501bg363b128bfbd801b3@mail.gmail.com>	<5871C798-D967-4770-8CC2-C62181479269@threerings.net>	<269388e30710200515q5357effdn5ae317181267d15d@mail.gmail.com>	<BA986CD3-B726-404D-86BA-8061810B11A2@threerings.net>	<269388e30710222343m4db682d0g78f782858a1020a3@mail.gmail.com>
	<269388e30710231031p73baddb3gdf128432f1c361f9@mail.gmail.com>
Message-ID: <471F618A.8080308@lshift.net>

Ben Hood wrote:
> At the moment this is achieved using the rabbitmqctl command, but I
> gather there may be plans to expose this management functionality via
> AMQP itself (maybe Tony can correct me on this).

Indeed. The idea is (eventually) to expose management features via an
AMQP exchange/queue, so that arbitrary AMQP clients can configure the
broker using AMQP.

Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From 0x6e6562 at gmail.com  Sat Oct 27 22:05:27 2007
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Sat, 27 Oct 2007 22:05:27 +0100
Subject: [rabbitmq-discuss] Exposing rabbit management via AMQP
Message-ID: <269388e30710271405h22b80807n9701c1e3505ef16e@mail.gmail.com>

Hi,

Recently on this list there was a question about using access controls
in rabbit, so I've added a first cut of exposing the rabbit management
API via AMQP using the Erlang direct client.

This is intended to be an AMQP alternative to the rabbitmqctl script
and is not my idea, I stole it from Tony.

On the client side it consists of calling the rabbit_access_control
module via RPC over AMQP.

I used Hessian to encode the functions, arguments and replies, but the
mechanism is not necessarily tied to this.

On the server side, it consists of firing up an RPC handler that is
*parameterized* with the rabbit_access_control module.

To test this, you need to:

1. Make sure the 0.1.3 release of the Erlang hessian library
(http://cotton.sourceforge.net/) is in your OTP path as well as the
amqp_erlang library
(http://dev.rabbitmq.com/viewmtn/branch/changes/com.rabbitmq.erlang-client).

2. Fire up the rabbit server and run the rpc handler in the same VM as
the server, e.g.:

erl -mnesia dir WHEREEVER -boot start_sasl -s rabbit

3. Boot the RPC handler:

1> direct_integration_test:start_rabbit_management().

4. Run the test from a different Erlang VM:

1> network_integration_test:rabbit_management_test().

That's it.

As this is only a POC, there are limitations and considerations at the
moment which include:

- I haven't tested every exported function in the
rabbit_access_control control module yet.
- The RPC handler could be registered with the rabbit supervisor so
that you don't have to start it explicitly.
- This piggybacks off an RpcClient pattern that is implemented in the
Erlang client, which is still experimental and may change.
- I haven't tested it with the Java client yet.

amongst others.

Any input, feedback or discussion is appreciated.

Ben



From simon at lshift.net  Mon Oct 29 15:50:59 2007
From: simon at lshift.net (Simon MacMullen)
Date: Mon, 29 Oct 2007 15:50:59 +0000
Subject: [rabbitmq-discuss] Erlang client release
Message-ID: <47260163.10408@lshift.net>

I'd just like to let the list know that we now have the Erlang client 
tidied up enough to make a preliminary release. As with the 
AMQP-over-HTTP binding, this code is considered experimental and is not 
yet part of the main release cycle.

The Erlang client can operate in both a networked mode that uses 
standard TCP-based AMQP framing and a direct mode that uses native 
Erlang message passing to a RabbitMQ broker.

The client can be downloaded from:

http://www.rabbitmq.com/download.html#rabbitmq-erlang-client

The client reuses some code from the broker, and currently depends on 
the broker from CVS HEAD. A suitable snapshot is available at:

http://dev.rabbitmq.com/snapshots/rabbitmq/rabbitmq-200710291145.tar.gz

I'd like to thank Ben Hood for his work on this.

Cheers, Simon
-- 
   [][][] Simon MacMullen
     [][] LShift Ltd
   []  [] www.lshift.net



From dmitriy.samovskiy at cohesiveft.com  Wed Oct 31 18:45:24 2007
From: dmitriy.samovskiy at cohesiveft.com (Dmitriy Samovskiy)
Date: Wed, 31 Oct 2007 13:45:24 -0500
Subject: [rabbitmq-discuss] Clustering
Message-ID: <4728CD44.4050506@cohesiveft.com>


Hello all,

My scenario might be common and I am hoping someone might be working on a similar issue.

I set up a cluster of 2 nodes - rabbit at node1 and rabbit at node2. Several producers will 
connect to either node and send a series of messages with topic hierarchy as routing key 
(for example, "a.b.c.d.e.f"). Consumers will also connect to either node and will register 
to receive some subset of what is being sent - in other words, for example, some of them 
will request "a.#" while others might want to get only "#.e.f". My goal is to make it 
happen if at least one of the nodes in the cluster is up and running. Both producers and 
consumers will know about existence of both cluster nodes, but they need to be able to 
randomly connect to either.

Any thoughts on how this setup can be accomplished? These requirements are somewhat 
flexible as long as I achieve a design with no single points of failure.

One scenario that I can think of is that I can force all clients (both producers and 
consumers) to connect to the same node. They will re-connect to another node only if the 
first node went down. This will achieve active-passive redundancy but is not as flexible...

Thanks,
Dmitriy




From codewalkerjoe at gmail.com  Wed Oct 31 22:08:15 2007
From: codewalkerjoe at gmail.com (joe lee)
Date: Wed, 31 Oct 2007 18:08:15 -0400
Subject: [rabbitmq-discuss] Windows Install of RabbitMQ and Erlang in non C
	drive
Message-ID: <50ec7a2e0710311508y3fc86b2aj52ad48e7b2020cc9@mail.gmail.com>

I have installed my erlang in I:\Program Files\erl5.5.5 and placed
rabbitmq-1.2.0 into I:\Program Files\erl5.5.5\lib.  I have them installed on
Windows XP.

I have set the ERLANG_HOME as windows environment variable:
ERLANG_HOME = I:\Program Files\erl5.5.5\bin

and set RABBITMQ_BASE in rabbitmq-server.bat as:
set RABBITMQ_BASE=G:\dev\erlang_apps\rabbitmq

When I click on:
I:\Program Files\erl5.5.5\lib\rabbitmq-
1.2.0\erlang\rabbit\scripts\rabbitmq-server.bat, I get ms-dos prompt which
opens and closes right away.  I can't seem to get the rabbitmq server
running.   Erlang  shell is working fine.

Any help appreciated.

Thanks,
Joe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20071031/e17fdd16/attachment.htm 

