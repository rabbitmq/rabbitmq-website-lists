<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publishing Performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publishing%20Performance&In-Reply-To=%3C52F0BFC7.2080108%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033542.html">
   <LINK REL="Next"  HREF="033570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publishing Performance</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publishing%20Performance&In-Reply-To=%3C52F0BFC7.2080108%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Publishing Performance">simon at rabbitmq.com
       </A><BR>
    <I>Tue Feb  4 10:24:07 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033542.html">[rabbitmq-discuss] Publishing Performance
</A></li>
        <LI>Next message: <A HREF="033570.html">[rabbitmq-discuss] Publishing Performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33550">[ date ]</a>
              <a href="thread.html#33550">[ thread ]</a>
              <a href="subject.html#33550">[ subject ]</a>
              <a href="author.html#33550">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/02/2014 7:30AM, Michael Klishin wrote:
&gt;<i> On 4 Feb 2014, at 11:24, Umutcan &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">umutcan at gamegos.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Does publishing get slower while number of the queued messages are increasing?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> While I am doing an operation, publishing speed get slower in time. Operation publishes a certain amount of messages to RMQ and then  a consumer processes messages. Since publishing speed is higher than consuming speed, messages waits for a while in the queue. I am not running operation again until queue is empty.
</I>&gt;<i>
</I>&gt;<i> If consumers do not keep up with publishers, eventually RabbitMQ will throttle publishers
</I>&gt;<i> until consumers drain enough messages to eliminate RAM and disk space pressure.
</I>
First of all, RabbitMQ will start paging messages out to disk. Since at 
all times RabbitMQ tries not to accept messages faster than it can do 
something sensible with them, this will mean the publishing rate goes 
down substantially at this point.

You can see if a queue is paging to disk in the management plugin web 
UI, or by looking at backing_queue_status.ram_msg_count in rabbitmqctl 
list_queues or the HTTP API.

Eventually if the disk fills up, or something else happens to make 
memory usage spike, then the memory alarm can go off and block 
publishers completely until memory use drops again.

&gt;<i> See <A HREF="http://rabbitmq.com/memory.html.">http://rabbitmq.com/memory.html.</A>
</I>&gt;<i>
</I>&gt;<i> OS swapping can also take place, which affects performance severely.
</I>
We try to avoid that, but on a machine where other services are running 
it's not always possible.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033542.html">[rabbitmq-discuss] Publishing Performance
</A></li>
	<LI>Next message: <A HREF="033570.html">[rabbitmq-discuss] Publishing Performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33550">[ date ]</a>
              <a href="thread.html#33550">[ thread ]</a>
              <a href="subject.html#33550">[ subject ]</a>
              <a href="author.html#33550">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
