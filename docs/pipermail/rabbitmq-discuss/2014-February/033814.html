<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Using rabbitmq (v3) clusters in AWS..
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20rabbitmq%20%28v3%29%20clusters%20in%20AWS..&In-Reply-To=%3C1392321083734-33344.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033812.html">
   <LINK REL="Next"  HREF="033817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Using rabbitmq (v3) clusters in AWS..</H1>
    <B>yossie</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Using%20rabbitmq%20%28v3%29%20clusters%20in%20AWS..&In-Reply-To=%3C1392321083734-33344.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] Using rabbitmq (v3) clusters in AWS..">joseph.silverman at autodesk.com
       </A><BR>
    <I>Thu Feb 13 19:51:23 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033812.html">[rabbitmq-discuss] PHP Documentation Report
</A></li>
        <LI>Next message: <A HREF="033817.html">[rabbitmq-discuss] Install php-amqplib client on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33814">[ date ]</a>
              <a href="thread.html#33814">[ thread ]</a>
              <a href="subject.html#33814">[ subject ]</a>
              <a href="author.html#33814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Currently I have an application that uses rabbitmq.

There are one or more web servers in a given amazon zone that are configured
to talk to a matching rabbitmq cluster in their own zone through a ELB (one
per zone.)  The web servers in all zones are all accessed through a single
multizone ELB.  This works.  We are using &quot;auto-discovery&quot; which is good
when instances don't move or are added/deleted.  We would like to switch to
an autoscaled model.  This means we can't automatically link up rabbitmq
clusters via config files and, instead, have to do so using the command line
tools.  My plan is:

1) new instance starting up will use an IAM account with limited access to
find it's own zone (can do from metadata), then figure out the name of it's
elb, then figure out other instances on the same elb, and from those get the
ip address, and do a join_cluster to one of them.

2) a cron job will wake up periodically and using a similar technique, get a
list of any instances that are no longer around but are referenced in the
cluster and issue forget_cluster_node on their behalf.

I note that disk vs ram rabbitmq (we are disk right now) difficultywill
present difficulty but I think the general idea outlined above will do the
job.

I am relatively new (OK, brand new) to rabbitmq so it is likely that I am
not entirely clear on the concepts.  I am seeking advice on how best to
handle this use case.

Thank you in advance for all help - Yossie



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Using-rabbitmq-v3-clusters-in-AWS-tp33344.html">http://rabbitmq.1065348.n5.nabble.com/Using-rabbitmq-v3-clusters-in-AWS-tp33344.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033812.html">[rabbitmq-discuss] PHP Documentation Report
</A></li>
	<LI>Next message: <A HREF="033817.html">[rabbitmq-discuss] Install php-amqplib client on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33814">[ date ]</a>
              <a href="thread.html#33814">[ thread ]</a>
              <a href="subject.html#33814">[ subject ]</a>
              <a href="author.html#33814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
