<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Diagnosing Network partition false positives
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Diagnosing%20Network%20partition%20false%20positives&In-Reply-To=%3C52F8BDE7.7000707%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033689.html">
   <LINK REL="Next"  HREF="033691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Diagnosing Network partition false positives</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Diagnosing%20Network%20partition%20false%20positives&In-Reply-To=%3C52F8BDE7.7000707%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Diagnosing Network partition false positives">simon at rabbitmq.com
       </A><BR>
    <I>Mon Feb 10 11:54:15 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033689.html">[rabbitmq-discuss] Diagnosing Network partition false positives
</A></li>
        <LI>Next message: <A HREF="033691.html">[rabbitmq-discuss] Using Message Broker for database replications	(currently RabbitMQ )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33690">[ date ]</a>
              <a href="thread.html#33690">[ thread ]</a>
              <a href="subject.html#33690">[ subject ]</a>
              <a href="author.html#33690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/02/14 11:36, Patrick Long wrote:
&gt;<i> When I checked our testing environments this morning I saw that one of
</I>&gt;<i> them was reporting a Suspected Network Partition.
</I>&gt;<i>
</I>&gt;<i> Both nodes are virtual machines on the same network so I don't think
</I>&gt;<i> &quot;network partition&quot; is a valid error.
</I>
As far as RabbitMQ is concerned, it's a real network partition. The two 
nodes did lose contact with each other.

In a virtualised environment it might be possible to provoke this error 
by (for example) suspending one of the machines.

&gt;<i> Any suggestions on how best to look into this?
</I>
Future releases of RabbitMQ (3.3.0, currently in the nightly builds) 
will log the reason why one node decided another was down. Unfortunately 
that's not available in 3.2.x, so I am afraid RabbitMQ is not going to 
help you determine what caused the partition.

I am suspicious though that the partition lasted about 10 seconds, and 
happened at almost exactly 1AM. 1AM is the sort of time when scheduled 
tasks happen - it might be worth looking at what was happening around then.

&gt;<i> Shouldn't the aliveness test flag up on one of the nodes that there is a
</I>&gt;<i> problem? During this time both reported {200:OK}
</I>
The aliveness test is just there to check that the node is alive, not 
that there are no problems with the cluster. You can check for network 
partitions via the HTTP API by looking at /api/nodes and checking if any 
node has a non-empty 'partitions' list.

Cheers, Simon


-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033689.html">[rabbitmq-discuss] Diagnosing Network partition false positives
</A></li>
	<LI>Next message: <A HREF="033691.html">[rabbitmq-discuss] Using Message Broker for database replications	(currently RabbitMQ )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33690">[ date ]</a>
              <a href="thread.html#33690">[ thread ]</a>
              <a href="subject.html#33690">[ subject ]</a>
              <a href="author.html#33690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
