<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Performance Observations and Interesting	Behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20Observations%20and%20Interesting%0A%09Behavior&In-Reply-To=%3CCAKgmDnEXJ5jtXj97cy_Y9jkwkF4TkC%2Bqse8rymddBG0pM2sKvA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033733.html">
   <LINK REL="Next"  HREF="033759.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Performance Observations and Interesting	Behavior</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20Observations%20and%20Interesting%0A%09Behavior&In-Reply-To=%3CCAKgmDnEXJ5jtXj97cy_Y9jkwkF4TkC%2Bqse8rymddBG0pM2sKvA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Performance Observations and Interesting	Behavior">michael.laing at nytimes.com
       </A><BR>
    <I>Wed Feb 12 00:05:28 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033733.html">[rabbitmq-discuss] Performance Observations and Interesting	Behavior
</A></li>
        <LI>Next message: <A HREF="033759.html">[rabbitmq-discuss] Performance Observations and Interesting	Behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33732">[ date ]</a>
              <a href="thread.html#33732">[ thread ]</a>
              <a href="subject.html#33732">[ subject ]</a>
              <a href="author.html#33732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That's interesting!

We have removed all the load balancers from our core configurations in
Amazon EC2 because we found they added no value, and, in fact provided
troublesome additional points of failure. (We do use ELBs to find websocket
endpoints in the client-facing retail layer)

Our core clusters in Oregon and Dublin each have 50 - 100 non-local
connections, randomly distributed, and are very stable.

We use DNS with health checks for internal client connections in lieu of
load balancers. Simple and rugged.

Michael Laing
NYTimes


On Tue, Feb 11, 2014 at 6:42 PM, Ron Cordell &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ron.cordell at gmail.com</A>&gt; wrote:

&gt;<i> Hi all --
</I>&gt;<i>
</I>&gt;<i> We've been performance testing RabbitMQ on Linux as we're about to move
</I>&gt;<i> our RabbitMQ infrastructure from Windows to Linux (as well as other
</I>&gt;<i> things). I wanted to share some of what we observed and if people have any
</I>&gt;<i> feedback. All tests were done using a 3-node cluster where most queues are
</I>&gt;<i> HA, with an F5 configured to provide a virtual IP to the application. There
</I>&gt;<i> is a single vHost.
</I>&gt;<i>
</I>&gt;<i> 1. On the same hardware the Linux installation easily outperforms the
</I>&gt;<i> Windows installation. It also uses fewer resources for the same throughput.
</I>&gt;<i>
</I>&gt;<i> 2. The Windows cluster becomes unstable and nodes start dropping
</I>&gt;<i> out/partitioning at around 1/3 max tested volume. The Linux cluster showed
</I>&gt;<i> no instability whatsoever up to maximum throughput.
</I>&gt;<i>
</I>&gt;<i> 3. Creating a cluster with 2 RAM nodes and 1 Disc node has the same disk
</I>&gt;<i> I/O requirements as 3 disc nodes. (This makes sense because as I believe
</I>&gt;<i> the RAM nodes will persist to disk for HA queues).
</I>&gt;<i>
</I>&gt;<i> 4. (here is the interesting one) When the F5 is configured to load balance
</I>&gt;<i> across the 3 nodes as a round-robin load balancer, maximum throughput is
</I>&gt;<i> significantly less than if the F5 sends all traffic to a single node.
</I>&gt;<i>
</I>&gt;<i> I'd love any feedback, especially on #4.
</I>&gt;<i>
</I>&gt;<i> Cheers!
</I>&gt;<i>
</I>&gt;<i> -ronc
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140211/3eae66de/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140211/3eae66de/attachment.html</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033733.html">[rabbitmq-discuss] Performance Observations and Interesting	Behavior
</A></li>
	<LI>Next message: <A HREF="033759.html">[rabbitmq-discuss] Performance Observations and Interesting	Behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33732">[ date ]</a>
              <a href="thread.html#33732">[ thread ]</a>
              <a href="subject.html#33732">[ subject ]</a>
              <a href="author.html#33732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
