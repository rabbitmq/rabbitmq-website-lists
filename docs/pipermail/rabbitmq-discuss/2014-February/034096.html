<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] &quot;None of the specified endpoints were reachable&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%22None%20of%20the%20specified%20endpoints%20were%0A%20reachable%22&In-Reply-To=%3C1fc4cf3a-fcd1-4819-869a-d674f0e861d3%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034151.html">
   <LINK REL="Next"  HREF="034097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] &quot;None of the specified endpoints were reachable&quot;</H1>
    <B>Tr&#7847;n &#272;&#7913;c Th&#244;ng</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%22None%20of%20the%20specified%20endpoints%20were%0A%20reachable%22&In-Reply-To=%3C1fc4cf3a-fcd1-4819-869a-d674f0e861d3%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] &quot;None of the specified endpoints were reachable&quot;">humg.thongit at gmail.com
       </A><BR>
    <I>Tue Feb 25 10:26:04 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034151.html">[rabbitmq-discuss] BrokerUnreachableException on specific	thread after node goes down
</A></li>
        <LI>Next message: <A HREF="034097.html">[rabbitmq-discuss] &quot;None of the specified endpoints were reachable&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34096">[ date ]</a>
              <a href="thread.html#34096">[ thread ]</a>
              <a href="subject.html#34096">[ subject ]</a>
              <a href="author.html#34096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all.

I am leaning rabbitmq use haproxy to execute failover in a cluster.

IP server rabbitmq_1: 10.0.0.101 port: 15672
IP server rabbitmq_2: 192.168.247.129 port: 15672
IP server haproxy: 192.168.247.131

Haproxy config

# HAProxy Config for Local RabbitMQ SLB Warren
global
log 127.0.0.1 local0 info
maxconn 4096
daemon
nbproc 1
defaults
log global
mode tcp
option tcplog
option dontlognull
retries 3
option redispatch
maxconn 2000
timeout connect 5s
timeout client 120s
timeout server 120s
listen rabbitmq_local_cluster 192.168.247.131:8088
mode tcp
balance roundrobin
server rabbit_a 10.0.0.101:15672 check inter 5000 rise 2 fall 3
server rabbit_b 192.168.247.129:15672 backup inter 5000 rise 2 fall 3
listen private_monitoring :8101
mode http
log global

maxconn 10

clitimeout      100s
        srvtimeout      100s
        contimeout      100s
        timeout queue   100s

option httplog
stats hide-version
stats show-node
stats enable
stats auth admin:123456
stats uri /stats
stats refresh 5s

Code APP send message

class Send
    {
        public static void Main()
        {
            var factory = new ConnectionFactory { HostName = 
&quot;192.168.247.131&quot;, Port=8088 };
            using (var connection = factory.CreateConnection())
            {
                using (var channel = connection.CreateModel())
                {
                    //channel.QueueDeclare(&quot;hello&quot;, false, false, false, 
null);
                    channel.QueueDeclare(&quot;q_A&quot;, false, false, false, null);
                    channel.QueueDeclare(&quot;q_B&quot;, false, false, false, null);
                    int i = 0;
                    while (true)
                    {
                        string message = &quot;Hello World! &quot; + i.ToString();
                        var body = Encoding.UTF8.GetBytes(message);

                        channel.BasicPublish(&quot;&quot;, &quot;q_A&quot;, null, body);
                        channel.BasicPublish(&quot;&quot;, &quot;q_B&quot;, null, body);
                        Console.WriteLine(&quot; [x] Sent {0}&quot;, message);
                        i++;
                        Thread.Sleep(1000);
                    }
                }
            }
            Console.Read();
        }
    }


pls help me.

Thanks so muck.

On Thursday, 16 July 2009 21:45:56 UTC+7, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Tammo.... at btc-ag.com</A> wrote:
&gt;<i>
</I>&gt;<i>  Hy,
</I>&gt;<i>  
</I>&gt;<i> i&#180;m building a client server .net application that uses rabbitmq as mom.
</I>&gt;<i>  
</I>&gt;<i> the code i&#180;m using to pulish messages is:
</I>&gt;<i>  
</I>&gt;<i>                           IProtocol protocol = Protocols
</I>&gt;<i> .FromEnvironment();
</I>&gt;<i>                     IConnection conn = 
</I>&gt;<i> factory.CreateConnection(rmqBrokerUrl);
</I>&gt;<i>                     IModel channel  = conn.CreateModel();
</I>&gt;<i>                     conn.AutoClose = true;
</I>&gt;<i>                     IBasicProperties props = 
</I>&gt;<i> channel.CreateBasicProperties();
</I>&gt;<i>                     channel.BasicPublish(exchange, routingKey, props, 
</I>&gt;<i> buffer);
</I>&gt;<i>                     channel.Close(200, &quot;Goodbye&quot;);
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> after sending about 4000msg each in a single thread using the above code,  
</I>&gt;<i> im getting error that states:
</I>&gt;<i>  
</I>&gt;<i> &quot;None of the specified endpoints were reachable&quot;.
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> any hints on this?
</I>&gt;<i>  
</I>&gt;<i> thanks a lot,
</I>&gt;<i>  
</I>&gt;<i> Tammo
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i>  
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140225/20fde409/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140225/20fde409/attachment.html</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034151.html">[rabbitmq-discuss] BrokerUnreachableException on specific	thread after node goes down
</A></li>
	<LI>Next message: <A HREF="034097.html">[rabbitmq-discuss] &quot;None of the specified endpoints were reachable&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34096">[ date ]</a>
              <a href="thread.html#34096">[ thread ]</a>
              <a href="subject.html#34096">[ subject ]</a>
              <a href="author.html#34096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
