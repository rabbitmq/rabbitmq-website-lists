<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ .NET client 3.2.3 bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20.NET%20client%203.2.3%20bug%3F&In-Reply-To=%3CCAA_kPjznX71HYUT9fQ3QpW%3DcNXd14JkF7N1dfnPGH7P5RFg36g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034058.html">
   <LINK REL="Next"  HREF="034051.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ .NET client 3.2.3 bug?</H1>
    <B>Steve T</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20.NET%20client%203.2.3%20bug%3F&In-Reply-To=%3CCAA_kPjznX71HYUT9fQ3QpW%3DcNXd14JkF7N1dfnPGH7P5RFg36g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ .NET client 3.2.3 bug?">ssteo at roboqa.com
       </A><BR>
    <I>Sun Feb 23 13:51:48 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034058.html">[rabbitmq-discuss] Load balancing connections to a rabbitmq	cluster
</A></li>
        <LI>Next message: <A HREF="034051.html">[rabbitmq-discuss] RabbitMQ .NET client 3.2.3 bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34050">[ date ]</a>
              <a href="thread.html#34050">[ thread ]</a>
              <a href="subject.html#34050">[ subject ]</a>
              <a href="author.html#34050">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Sorry for sending to this mail list, not sure if this is the right channel
to report this issue.

I'm using RabbitMQ .NET client 3.2.3 with RabbitMQ 3.2.3 but encountering
some random errors thrown from within the client itself. The error below
happens very occassionally during item publishing via my own function
EnqueueItem();


Stack Trace:
System.Net.Sockets.SocketException: The descriptor is not a socket
  at System.Net.Sockets.Socket.SetSocketOption (SocketOptionLevel
optionLevel, SocketOptionName optionName, Int32 optionValue)
  at System.Net.Sockets.TcpClient.set_ReceiveTimeout (Int32 value)
  at RabbitMQ.Client.Impl.SocketFrameHandler_0_9.set_Timeout (Int32 value)
  at RabbitMQ.Client.Impl.ConnectionBase.ClosingLoop ()


My code is fairly straightforward, shown below:


        private static void EnqueueItem(string queue, string json)
        {
            ConnectionFactory connectionFactory = new ConnectionFactory()
            {
                HostName = ROBOQA_RABBITMQ_HOSTNAME,
                UserName = ROBOQA_RABBITMQ_USERNAME,
                Password = ROBOQA_RABBITMQ_PASSWORD
            };

            using (IConnection iconnection =
connectionFactory.CreateConnection())
            {
                using (IModel channel = iconnection.CreateModel())
                {
                    channel.QueueDeclare(queue, true, false, false, null);
                    IBasicProperties properties =
channel.CreateBasicProperties();
                    properties.SetPersistent(true);

                    channel.BasicPublish(String.Empty, queue, properties,
Encoding.UTF8.GetBytes(json));
                }
            }
        }

Will be great if anyone can let me know if there is a problem with the way
I use it or maybe a bug in the client driver itself?

Thanks,
Steve.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140223/33d0899b/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140223/33d0899b/attachment.html</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034058.html">[rabbitmq-discuss] Load balancing connections to a rabbitmq	cluster
</A></li>
	<LI>Next message: <A HREF="034051.html">[rabbitmq-discuss] RabbitMQ .NET client 3.2.3 bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34050">[ date ]</a>
              <a href="thread.html#34050">[ thread ]</a>
              <a href="subject.html#34050">[ subject ]</a>
              <a href="author.html#34050">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
