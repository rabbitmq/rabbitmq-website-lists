<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to handle extremely large queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20handle%20extremely%20large%20queues&In-Reply-To=%3CCANpjuCs5nSnB56PMRbJnL%2BbLfHyt%2BNgH4xWKjGKB6OcDYaw8Hw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033871.html">
   <LINK REL="Next"  HREF="033873.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to handle extremely large queues</H1>
    <B>Greg Poirier</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20handle%20extremely%20large%20queues&In-Reply-To=%3CCANpjuCs5nSnB56PMRbJnL%2BbLfHyt%2BNgH4xWKjGKB6OcDYaw8Hw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] How to handle extremely large queues">greg.poirier at opower.com
       </A><BR>
    <I>Sun Feb 16 19:57:37 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033871.html">[rabbitmq-discuss] How to handle extremely large queues
</A></li>
        <LI>Next message: <A HREF="033873.html">[rabbitmq-discuss] How to handle extremely large queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33872">[ date ]</a>
              <a href="thread.html#33872">[ thread ]</a>
              <a href="subject.html#33872">[ subject ]</a>
              <a href="author.html#33872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If Rabbit inaccurately reports the amount of memory it's using, how are we
to provision systems? With some understanding of normal load, however
suboptimal the use case may be, we should have an understanding of memory
requirements... Particularly when rabbit provided a reporting mechanism to
confirm out expected memory usage.

I guess I am confused.

On Sunday, February 16, 2014, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Keep in mind that there's small memory footprint per message, even if
</I>&gt;<i> the message has been paged to disk.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Alvaro
</I>&gt;<i>
</I>&gt;<i> On Sun, Feb 16, 2014 at 8:28 PM, Greg Poirier &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">greg.poirier at opower.com</A>&lt;javascript:;&gt;&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; They are many small messages. Each node in the cluster has 8 gigs but is
</I>&gt;<i> &gt; only using maybe 2. Is memory really the problem?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Sunday, February 16, 2014, Michael Klishin &lt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">michael.s.klishin at gmail.com</A> &lt;javascript:;&gt;&gt;
</I>&gt;<i> &gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 2014-02-16 22:32 GMT+04:00 Greg Poirier &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">greg.poirier at opower.com</A>&lt;javascript:;&gt;
</I>&gt;<i> &gt;:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; In our current configuration, we have a 3-node cluster with 2 disc and
</I>&gt;<i> 1
</I>&gt;<i> &gt;&gt;&gt; ram node with HA mirroring to all nodes in the cluster. In periods of
</I>&gt;<i> high
</I>&gt;<i> &gt;&gt;&gt; utilization of the cluster, we are noticing frequent partitioning. We
</I>&gt;<i> have
</I>&gt;<i> &gt;&gt;&gt; narrowed it down to this particular use case as none of our other
</I>&gt;<i> clusters
</I>&gt;<i> &gt;&gt;&gt; (running on the same physical hardware with the same cluster
</I>&gt;<i> configuration)
</I>&gt;<i> &gt;&gt;&gt; experience this kind of partitioning.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Is there some better way that we can configure RabbitMQ to handle this
</I>&gt;<i> &gt;&gt;&gt; kind of load pattern? I understand this is perhaps not the best way to
</I>&gt;<i> use
</I>&gt;<i> &gt;&gt;&gt; RabbitMQ, but it is unavoidable for the time being. Any suggestions
</I>&gt;<i> would be
</I>&gt;<i> &gt;&gt;&gt; appreciated.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Short answer is: give it more RAM.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Relevant blog posts:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> <A HREF="http://blog.travis-ci.com/2013-08-08-solving-the-puzzle-of-scalable-log-processing/">http://blog.travis-ci.com/2013-08-08-solving-the-puzzle-of-scalable-log-processing/</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/blog/2014/01/23/preventing-unbounded-buffers-with-rabbitmq/">http://www.rabbitmq.com/blog/2014/01/23/preventing-unbounded-buffers-with-rabbitmq/</A>
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; MK
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; <A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> &lt;javascript:;&gt;
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> &lt;javascript:;&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140216/b5ea0e05/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140216/b5ea0e05/attachment.html</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033871.html">[rabbitmq-discuss] How to handle extremely large queues
</A></li>
	<LI>Next message: <A HREF="033873.html">[rabbitmq-discuss] How to handle extremely large queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33872">[ date ]</a>
              <a href="thread.html#33872">[ thread ]</a>
              <a href="subject.html#33872">[ subject ]</a>
              <a href="author.html#33872">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
