<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] eacces error in RabbitMQ when trying to set	up federation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20eacces%20error%20in%20RabbitMQ%20when%20trying%20to%20set%0A%09up%20federation&In-Reply-To=%3CCAML-b-5b0JEgiWCSApvKvixdSrJKCtpsMJ1ecmOaSs1PcvJ99g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033520.html">
   <LINK REL="Next"  HREF="033525.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] eacces error in RabbitMQ when trying to set	up federation</H1>
    <B>Daniel Ashton</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20eacces%20error%20in%20RabbitMQ%20when%20trying%20to%20set%0A%09up%20federation&In-Reply-To=%3CCAML-b-5b0JEgiWCSApvKvixdSrJKCtpsMJ1ecmOaSs1PcvJ99g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] eacces error in RabbitMQ when trying to set	up federation">jdashton at ashtonfam.org
       </A><BR>
    <I>Mon Feb  3 17:10:14 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033520.html">[rabbitmq-discuss] eacces error in RabbitMQ when trying to set up federation
</A></li>
        <LI>Next message: <A HREF="033525.html">[rabbitmq-discuss] eacces error in RabbitMQ when trying to set	up federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33523">[ date ]</a>
              <a href="thread.html#33523">[ thread ]</a>
              <a href="subject.html#33523">[ subject ]</a>
              <a href="author.html#33523">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks so much for the response, Simon.

I've tweaked the network configuration, so the IP addresses are different.
But the results are the same, whether connecting to the upstream or to
myself:

[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at localhost</A> jdashton]# rabbitmqctl eval
'gen_tcp:connect(&quot;192.168.199.2&quot;, 5672, []).'
{error,eacces}
...done.
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at localhost</A> jdashton]# rabbitmqctl eval
'gen_tcp:connect(&quot;192.168.199.1&quot;, 5672, []).'
{error,eacces}
...done.

*.2 is myself, *.1 is my intended upstream host.

&gt;<i>From the Mac side this works beautifully.  Exchanges are seeing the
</I>Fedora20 host as their upstream, federation status shows them all as
running, and the above command gets {ok,#Port&lt;5233.*some_number*&gt;} as the
response when connecting to *.2 (Fedora) or *.1 (Mac/self).

Thanks again for your help.  I would love to get this working.




On Mon, Feb 3, 2014 at 11:18 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> I doubt it's a firewall, that should lead to &quot;connection timed out&quot; or
</I>&gt;<i> &quot;connection refused&quot; type errors.
</I>&gt;<i>
</I>&gt;<i> SELinux is maybe a possibility.
</I>&gt;<i>
</I>&gt;<i> If you invoke:
</I>&gt;<i>
</I>&gt;<i> # rabbitmqctl eval 'gen_tcp:connect(&quot;172.30.42.19&quot;, 5672, []).'
</I>&gt;<i>
</I>&gt;<i> on the Fedora host then that will attempt to establish a vanilla TCP
</I>&gt;<i> connection to the Mac. What response does it give?
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 03/02/2014 4:01PM, Daniel Ashton wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I see no evidence that it ever reaches the upstream. The upstream's log
</I>&gt;&gt;<i> files have nothing about being connected to from the Fedora broker.
</I>&gt;&gt;<i>   That's why I wondered about Fedora (or upstream Mac host, for that
</I>&gt;&gt;<i> matter) firewalls or SELinux on Fedora.  eacces . . . can that indicate
</I>&gt;&gt;<i> an SELinux problem?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mon, Feb 3, 2014 at 10:57 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     That's quite odd. 'eacces' is an OS-level error, nothing in RabbitMQ
</I>&gt;&gt;<i>     should be generating that error for anything AMQPish.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Is there anything interesting in the logs on the upstream?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Cheers, Simon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     On 03/02/2014 2:35PM, J. Daniel Ashton wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         I'm trying to prototype federated message queuing between a Mac
</I>&gt;&gt;<i>         host and
</I>&gt;&gt;<i>         a Fedora 20 image running under VirtualBox. After a certain
</I>&gt;&gt;<i>         amount of
</I>&gt;&gt;<i>         head banging I managed to get the Mac exchanges federated from the
</I>&gt;&gt;<i>         Fedora exchanges, meaning that messages sent to the Fedora
</I>&gt;&gt;<i> upstream
</I>&gt;&gt;<i>         broker are received on the Mac (downstream) broker.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         However, when trying to go the other way (Fedora sees Mac as
</I>&gt;&gt;<i>         upstream),
</I>&gt;&gt;<i>         I get error messages about &quot;eacces&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         |==&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at localhost.log</A> &lt;==
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         =WARNING REPORT==== 29-Jan-2014::21:18:11 ===
</I>&gt;&gt;<i>         Federation exchange 'amq.direct' in vhost '/' did not connect to
</I>&gt;&gt;<i>         exchange 'amq.direct' in vhost '/' on <A HREF="amqp://172.30.42.19">amqp://172.30.42.19</A>
</I>&gt;&gt;<i>         &lt;<A HREF="http://172.30.42.19">http://172.30.42.19</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         {error,eacces}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         ==&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at localhost-sasl.log</A> &lt;==
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         =SUPERVISOR REPORT==== 29-Jan-2014::21:18:11 ===
</I>&gt;&gt;<i>            Supervisor: {&lt;0.15681.0&gt;,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  rabbit_federation_link_sup}
</I>&gt;&gt;<i>            Context:    child_terminated
</I>&gt;&gt;<i>            Reason:     {shutdown,restart}
</I>&gt;&gt;<i>            Offender:   [{pid,&lt;0.21716.0&gt;},
</I>&gt;&gt;<i>                         {name,
</I>&gt;&gt;<i>                             {upstream,
</I>&gt;&gt;<i>                                 [&lt;&lt;&quot;<A HREF="amqp://guest:guest@172.30.__42.19">amqp://guest:guest@172.30.__42.19</A>
</I>&gt;&gt;<i>         &lt;mailto:guest%<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">3Aguest at 172.30.42.19</A>&gt;&quot;&gt;&gt;],
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>           &lt;&lt;&quot;amq.direct&quot;&gt;&gt;,&lt;&lt;&quot;amq.__direct&quot;&gt;&gt;,1000,1,1,36000000,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>           none,false,'on-confirm',none,&lt;__&lt;&quot;mac_host&quot;&gt;&gt;}},
</I>&gt;&gt;<i>                         {mfargs,
</I>&gt;&gt;<i>                             {rabbit_federation_exchange___
</I>&gt;&gt;<i> link,start_link,
</I>&gt;&gt;<i>                                 [{{upstream,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>           [&lt;&lt;&quot;<A HREF="amqp://guest:guest@172.30.__42.19">amqp://guest:guest@172.30.__42.19</A>
</I>&gt;&gt;<i>         &lt;mailto:guest%<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">3Aguest at 172.30.42.19</A>&gt;&quot;&gt;&gt;],
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>           &lt;&lt;&quot;amq.direct&quot;&gt;&gt;,&lt;&lt;&quot;amq.__direct&quot;&gt;&gt;,1000,1,1,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>           36000000,none,false,'on-__confirm',none,
</I>&gt;&gt;<i>                                       &lt;&lt;&quot;mac_host&quot;&gt;&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>           {resource,&lt;&lt;&quot;/&quot;&gt;&gt;,exchange,&lt;&lt;&quot;__amq.direct&quot;&gt;&gt;}}]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                         {restart_type,{permanent,1}},
</I>&gt;&gt;<i>                         {shutdown,4294967295},
</I>&gt;&gt;<i>                         {child_type,worker}]
</I>&gt;&gt;<i>         |
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         My Google-fu is failing me. What may be causing the above error
</I>&gt;&gt;<i>         (/e.g./
</I>&gt;&gt;<i>         SELinux?) and how should I go about fixing it?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         BTW, on the theory that it might be the Linux or Mac firewalls,
</I>&gt;&gt;<i>         I tried
</I>&gt;&gt;<i>         opening a browser on the Fedora box and requesting
</I>&gt;&gt;<i>         |<A HREF="http://172.30.42.19:5672|.">http://172.30.42.19:5672|.</A> I got a (tiny) answer in return, so
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i>         firewall looks less likely to be the problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         _________________________________________________
</I>&gt;&gt;<i>         rabbitmq-discuss mailing list
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.__rabbitmq.com</A>
</I>&gt;&gt;<i>         &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;&gt;<i>         <A HREF="https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/_">https://lists.rabbitmq.com/__cgi-bin/mailman/listinfo/_</A>_
</I>&gt;&gt;<i> rabbitmq-discuss
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>         &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/</A>
</I>&gt;&gt;<i> rabbitmq-discuss&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     --
</I>&gt;&gt;<i>     Simon MacMullen
</I>&gt;&gt;<i>     RabbitMQ, Pivotal
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Daniel Ashton      PGP key available <A HREF="http://Daniel.AshtonFam.org">http://Daniel.AshtonFam.org</A>
</I>&gt;&gt;<i> mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jdashton at AshtonFam.org</A> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jdashton at AshtonFam.org</A>&gt;
</I>&gt;&gt;<i> <A HREF="http://ChamberMusicWeekend.org">http://ChamberMusicWeekend.org</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>


-- 
Daniel Ashton      PGP key available     <A HREF="http://Daniel.AshtonFam.org">http://Daniel.AshtonFam.org</A>
mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jdashton at AshtonFam.org</A>         <A HREF="http://ChamberMusicWeekend.org">http://ChamberMusicWeekend.org</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140203/f66f8989/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140203/f66f8989/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033520.html">[rabbitmq-discuss] eacces error in RabbitMQ when trying to set up federation
</A></li>
	<LI>Next message: <A HREF="033525.html">[rabbitmq-discuss] eacces error in RabbitMQ when trying to set	up federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33523">[ date ]</a>
              <a href="thread.html#33523">[ thread ]</a>
              <a href="subject.html#33523">[ subject ]</a>
              <a href="author.html#33523">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
