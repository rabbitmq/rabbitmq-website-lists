<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Performance Observations and Interesting	Behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20Observations%20and%20Interesting%0A%09Behavior&In-Reply-To=%3CCAFtA53zcExvwjvXkyHiuBV4VsvGXGg8F3n9D7sN-VwL7bxNkZQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033736.html">
   <LINK REL="Next"  HREF="033734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Performance Observations and Interesting	Behavior</H1>
    <B>Ron Cordell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20Observations%20and%20Interesting%0A%09Behavior&In-Reply-To=%3CCAFtA53zcExvwjvXkyHiuBV4VsvGXGg8F3n9D7sN-VwL7bxNkZQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Performance Observations and Interesting	Behavior">ron.cordell at gmail.com
       </A><BR>
    <I>Wed Feb 12 17:20:51 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033736.html">[rabbitmq-discuss] Performance Observations and Interesting	Behavior
</A></li>
        <LI>Next message: <A HREF="033734.html">[rabbitmq-discuss] [rabbitmq-c-master] memory leakinkg while	reconnect.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33751">[ date ]</a>
              <a href="thread.html#33751">[ thread ]</a>
              <a href="subject.html#33751">[ subject ]</a>
              <a href="author.html#33751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are testing the application against the RabbitMQ cluster, so there are
many queues involved, all of which are HA. Most of the queues present the
work or results of an activity, where each activity is part of a larger
finite state machine. The application processes incoming messages via these
state machines, and we drive the application and RabbitMQ testing by
pushing through levels of messages. In this case there are about 100
queues, but only 15 of those are actively used; the remainder represent
error states or other &quot;non-happy path&quot; activities. All of this is
accomplished using the MassTransit libraries, which manages sagas and
message retry/reprocessing as well as other things on top of an AMQP
messaging system.

So... all that being said - we pump through about 100K messages/hour, each
message is ~5K in size, and messages are real in the sense that the
application under test will process them successfully into the system using
RabbitMQ. We're not just testing raw performance of RabbitMQ but the
performance of RabbitMQ in the context of the application. This increases
the number of variables when testing but we can observe the Rabbit cluster
under test and still draw conclusions.

Hope this helps and if you have any other feedback it would be welcome!

Cheers,

-ronc


On Wed, Feb 12, 2014 at 3:10 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 11/02/14 23:42, Ron Cordell wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> 4. (here is the interesting one) When the F5 is configured to load
</I>&gt;&gt;<i> balance across the 3 nodes as a round-robin load balancer, maximum
</I>&gt;&gt;<i> throughput is significantly less than if the F5 sends all traffic to a
</I>&gt;&gt;<i> single node.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'd love any feedback, especially on #4.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Depends exactly what your tests are doing.
</I>&gt;<i>
</I>&gt;<i> If your tests are running through a single queue then it will be faster to
</I>&gt;<i> publish and consume on the node which hosts that queue since you can avoid
</I>&gt;<i> sending messages across the cluster.
</I>&gt;<i>
</I>&gt;<i> [This effect is particularly pronounced if using basic.qos or
</I>&gt;<i> mandatory=true, since those currently involve synchronous request-response
</I>&gt;<i> across the cluster. This will get fixed in 3.3.0.]
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140212/7e56d076/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140212/7e56d076/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033736.html">[rabbitmq-discuss] Performance Observations and Interesting	Behavior
</A></li>
	<LI>Next message: <A HREF="033734.html">[rabbitmq-discuss] [rabbitmq-c-master] memory leakinkg while	reconnect.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33751">[ date ]</a>
              <a href="thread.html#33751">[ thread ]</a>
              <a href="subject.html#33751">[ subject ]</a>
              <a href="author.html#33751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
