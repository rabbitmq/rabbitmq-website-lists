<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exclusive Producers?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exclusive%20Producers%3F&In-Reply-To=%3C53033671.5010503%40redhat.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033914.html">
   <LINK REL="Next"  HREF="033918.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exclusive Producers?</H1>
    <B>Gordon Sim</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exclusive%20Producers%3F&In-Reply-To=%3C53033671.5010503%40redhat.com%3E"
       TITLE="[rabbitmq-discuss] Exclusive Producers?">gsim at redhat.com
       </A><BR>
    <I>Tue Feb 18 10:31:13 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033914.html">[rabbitmq-discuss] Exclusive Producers?
</A></li>
        <LI>Next message: <A HREF="033918.html">[rabbitmq-discuss] Exclusive Producers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33916">[ date ]</a>
              <a href="thread.html#33916">[ thread ]</a>
              <a href="subject.html#33916">[ subject ]</a>
              <a href="author.html#33916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/18/2014 10:18 AM, Simon MacMullen wrote:
&gt;<i> On 18/02/2014 2:06AM, Tarun Mistry wrote:
</I>&gt;&gt;<i> Using Rabbit speak, I feel like I need something called an &quot;exclusive
</I>&gt;&gt;<i> producer&quot;.
</I>&gt;<i>
</I>&gt;<i> Yes, that sounds right. Sadly there's not really such a thing as a
</I>&gt;<i> &quot;producer&quot; in the sense of a client having agreed that it can produce
</I>&gt;<i> messages - there are just clients that may or may not publish messages.
</I>&gt;<i> So there's an asymmetry with consumers there.
</I>&gt;<i>
</I>&gt;&gt;<i> Do I need to fudge this by introducing a second queue and having all the
</I>&gt;&gt;<i> processes connect to this using the &quot;exclusive consumer&quot; pattern, and
</I>&gt;&gt;<i> then use this to determine who can control the main queue?
</I>&gt;<i>
</I>&gt;<i> So that's probably your best bet. I can't think of anything better,
</I>&gt;<i> anyway. It's a bit ugly, but should be workable.
</I>
What I often do in cases like that is have the second queue as you 
suggest, but instead of using an 'exclusive consumer' lock on it, just 
have a single message in it. The consumer compete to get that one 
message, when its delivered it indicates that the receiver has control. 
The receiver doesn't acknowledge the message however. That means if/when 
the current controller dies, the message will be automatically requeued 
and redelivered to one of the backups. (Saves the backups having to 
continually poll for ability to consume).

(And just in passing, I'll note that AMQP 1.0 did introduce the concept 
of 'producer' of incoming messages - i.e. a sending link - analogous to 
that of consumer of outgoing messages - i.e. a receiving link).

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033914.html">[rabbitmq-discuss] Exclusive Producers?
</A></li>
	<LI>Next message: <A HREF="033918.html">[rabbitmq-discuss] Exclusive Producers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33916">[ date ]</a>
              <a href="thread.html#33916">[ thread ]</a>
              <a href="subject.html#33916">[ subject ]</a>
              <a href="author.html#33916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
