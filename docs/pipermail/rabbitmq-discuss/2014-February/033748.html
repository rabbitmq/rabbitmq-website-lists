<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] STOMP perl headers-example-[recv|send].pl don't work - all messages are routed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20perl%20headers-example-%5Brecv%7Csend%5D.pl%0A%20don%27t%20work%20-%20all%20messages%20are%20routed&In-Reply-To=%3C52FB9B07.1020003%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033735.html">
   <LINK REL="Next"  HREF="033723.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] STOMP perl headers-example-[recv|send].pl don't work - all messages are routed</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20perl%20headers-example-%5Brecv%7Csend%5D.pl%0A%20don%27t%20work%20-%20all%20messages%20are%20routed&In-Reply-To=%3C52FB9B07.1020003%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] STOMP perl headers-example-[recv|send].pl don't work - all messages are routed">simon at rabbitmq.com
       </A><BR>
    <I>Wed Feb 12 16:02:15 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033735.html">[rabbitmq-discuss] STOMP perl headers-example-[recv|send].pl don't work - all messages are routed
</A></li>
        <LI>Next message: <A HREF="033723.html">[rabbitmq-discuss] {bad_header, &lt;&lt;&quot;GET /api&quot;&gt;&gt;} when trying to run plugin for get rabbitmq queue metrics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33748">[ date ]</a>
              <a href="thread.html#33748">[ thread ]</a>
              <a href="subject.html#33748">[ subject ]</a>
              <a href="author.html#33748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/02/14 06:03, Guido Brugnara wrote:
&gt;<i> The second message was not to be routed because X-header1='white' in
</I>&gt;<i> sent is different to X-B-header1='red' in subscribe! to destination
</I>&gt;<i> '/exchange/amq.headers'.
</I>&gt;<i>
</I>&gt;<i> Or am I that I did not understand the use of 'exchange' of type 'headers'?
</I>
Hi.

You understand the headers exchange type fine. However, this example is 
badly out of date.

STOMP says very little about broker semantics. Prior to RabbitMQ 2.2.0, 
the STOMP adapter implemented a very AMQP-ish set of semantics. This 
allowed you to use all the flexibility of AMQP over STOMP, but it was 
badly incompatible with what the other STOMP brokers (in particular 
ActiveMQ) were doing.

In RabbitMQ 2.2.0 we rewrote the STOMP adapter to use semantics that 
were much more similar to what other brokers do. Unfortunately this 
meant you could not longer bind a queue to an exchange with binding 
arguments via STOMP. This makes the headers exchange type rather less 
useful over STOMP. You can predeclare queues and bind them using AMQP or 
HTTP, and then SUBSCRIBE via STOMP, but that's obviously not ideal.

Unfortunately this example predates this change. We should probably just 
remove it.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033735.html">[rabbitmq-discuss] STOMP perl headers-example-[recv|send].pl don't work - all messages are routed
</A></li>
	<LI>Next message: <A HREF="033723.html">[rabbitmq-discuss] {bad_header, &lt;&lt;&quot;GET /api&quot;&gt;&gt;} when trying to run plugin for get rabbitmq queue metrics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33748">[ date ]</a>
              <a href="thread.html#33748">[ thread ]</a>
              <a href="subject.html#33748">[ subject ]</a>
              <a href="author.html#33748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
