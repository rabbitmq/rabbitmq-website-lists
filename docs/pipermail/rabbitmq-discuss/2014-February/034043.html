<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federation Issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20Issues&In-Reply-To=%3C6DB033025329784B9280ABD9516177FCA0BFC091%40USEPX2PMXMBX12.corp.altegrity.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033822.html">
   <LINK REL="Next"  HREF="033765.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federation Issues</H1>
    <B>Ganann, Kale</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20Issues&In-Reply-To=%3C6DB033025329784B9280ABD9516177FCA0BFC091%40USEPX2PMXMBX12.corp.altegrity.com%3E"
       TITLE="[rabbitmq-discuss] Federation Issues">KGanann at kroll.com
       </A><BR>
    <I>Sun Feb 23 09:17:42 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033822.html">[rabbitmq-discuss] Federation Issues
</A></li>
        <LI>Next message: <A HREF="033765.html">[rabbitmq-discuss] How to deal with untrusted publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34043">[ date ]</a>
              <a href="thread.html#34043">[ thread ]</a>
              <a href="subject.html#34043">[ subject ]</a>
              <a href="author.html#34043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We're trying that, I'll let you know the results.  Thanks for the idea!

Thanks,
Kale


-----Original Message-----
From: Simon MacMullen [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>] 
Sent: Friday, February 14, 2014 5:07 AM
To: Ganann, Kale; Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Federation Issues

I'm having trouble understanding exactly what problem you're describing. 
However, one thing leaps out at me: you've managed to (accidentally) make some of the queues used internally by federated exchanges
*themselves* be federated with each other. This is likely to lead to odd behaviour. I can't guarantee that this is the problem you're describing, but it's certainly *a* problem.

You can either:

a) Rework your policies so that no policy which matches queues beginning with &quot;^federation:&quot; enables federation. (The policy &quot;federation enabled&quot; 
in the vhosts ControlCenter, MediaManager and Review could be changed to apply to &quot;exchanges&quot; rather than &quot;all&quot;)

or

b) Upgrade to RabbitMQ 3.2.3, which prevents this confusing and unhelpful behaviour from happening.

Cheers, Simon

On 13/02/2014 6:51PM, Ganann, Kale wrote:
&gt;<i> I've attached the rabbitmqctl report for both nodes in this cluster.
</I>&gt;<i> You're right, Simon, I meant exchanges.  Pardon the slip.  I'm 
</I>&gt;<i> trolling through the logs now looking for anything that might be 
</I>&gt;<i> relevant to throw your way.  Thanks, guys.
</I>&gt;<i>
</I>&gt;<i> Kale
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks, Kale
</I>&gt;<i>
</I>&gt;<i> -----Original Message----- From: Simon MacMullen 
</I>&gt;<i> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>] Sent: Thursday, February 13, 2014 10:28 AM 
</I>&gt;<i> To: Discussions about RabbitMQ Cc: Ganann, Kale Subject: Re:
</I>&gt;<i> [rabbitmq-discuss] Federation Issues
</I>&gt;<i>
</I>&gt;<i> On 13/02/2014 04:51, Michael Klishin wrote:
</I>&gt;&gt;&gt;<i> Any ideas what might be causing this?  Any logs or test I can run to 
</I>&gt;&gt;&gt;<i> narrow the scope of the field?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Kale,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Having RabbitMQ logs around the time the issue happens would be very 
</I>&gt;&gt;<i> helpful.
</I>&gt;<i>
</I>&gt;<i> The output of &quot;rabbitmqctl report&quot; would also be useful (from each 
</I>&gt;<i> node in the federation).
</I>&gt;<i>
</I>&gt;<i> Also it would be good to understand whether you are talking about 
</I>&gt;<i> federated queues or exchanges. You say queues, but then you mention 
</I>&gt;<i> bindings and routing keys so I wonder if you mean exchanges?
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon This communication contains information that is 
</I>&gt;<i> confidential, proprietary in nature, and may also be attorney-client 
</I>&gt;<i> privileged and/or work product privileged. It is for the exclusive use 
</I>&gt;<i> of the intended recipient(s). If you are not the intended
</I>&gt;<i> recipient(s) or the person responsible for delivering it to the 
</I>&gt;<i> intended recipient(s), please note that any form of dissemination, 
</I>&gt;<i> distribution or copying of this communication is strictly prohibited 
</I>&gt;<i> and may be unlawful. If you have received this communication in error, 
</I>&gt;<i> please immediately notify the sender by replying to this message and 
</I>&gt;<i> delete this email immediately. Thank you for your cooperation.
</I>&gt;<i>
</I>&gt;<i> Please be advised that neither Altegrity, its affiliates, its 
</I>&gt;<i> employees or agents accept liability for any errors, omissions or 
</I>&gt;<i> damages caused by delays of receipt or by any virus infection in this 
</I>&gt;<i> message or its attachments, or which may otherwise arise as a result 
</I>&gt;<i> of this e-mail transmission.
</I>&gt;<i>
</I>
--
Simon MacMullen
RabbitMQ, Pivotal
This communication contains information that is confidential,
proprietary in nature, and may also be attorney-client privileged
and/or work product privileged. It is for the exclusive use of the
intended recipient(s). If you are not the intended recipient(s) or
the person responsible for delivering it to the intended
recipient(s), please note that any form of dissemination,
distribution or copying of this communication is strictly
prohibited and may be unlawful. If you have received this
communication in error, please immediately notify the sender by replying
to this message and delete this email immediately. Thank you for your cooperation. 

Please be advised that neither Altegrity, its affiliates, its employees
or agents accept liability for any errors, omissions or damages
caused by delays of receipt or by any virus infection in this
message or its attachments, or which may otherwise arise as a
result of this e-mail transmission.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033822.html">[rabbitmq-discuss] Federation Issues
</A></li>
	<LI>Next message: <A HREF="033765.html">[rabbitmq-discuss] How to deal with untrusted publishers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34043">[ date ]</a>
              <a href="thread.html#34043">[ thread ]</a>
              <a href="subject.html#34043">[ subject ]</a>
              <a href="author.html#34043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
