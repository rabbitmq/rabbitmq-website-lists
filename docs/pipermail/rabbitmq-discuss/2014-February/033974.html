<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] persistent messages are not delivered !!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20persistent%20messages%20are%20not%20delivered%20%21%21&In-Reply-To=%3CD340D188-DC14-4F93-8947-52F0CD86D83C%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033973.html">
   <LINK REL="Next"  HREF="033975.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] persistent messages are not delivered !!</H1>
    <B>Jonathan Holland</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20persistent%20messages%20are%20not%20delivered%20%21%21&In-Reply-To=%3CD340D188-DC14-4F93-8947-52F0CD86D83C%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] persistent messages are not delivered !!">joneholland at gmail.com
       </A><BR>
    <I>Wed Feb 19 17:07:50 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033973.html">[rabbitmq-discuss] persistent messages are not delivered !!
</A></li>
        <LI>Next message: <A HREF="033975.html">[rabbitmq-discuss] /api/queue message_stats-&gt;deliver_get_details-&gt;last_event removed in 3.1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33974">[ date ]</a>
              <a href="thread.html#33974">[ thread ]</a>
              <a href="subject.html#33974">[ subject ]</a>
              <a href="author.html#33974">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If the messages are sitting in unacked state after the first connection is closed then rabbit thinks the socket is still open, and they will not deliver to the new consumer. Try enabling heartbeats in the .Net client. This should mitigate this. 

Sent from my iPhone

&gt;<i> On Feb 19, 2014, at 12:03 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> On 19 Feb 2014, at 20:12, rafik moalla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moalla.rafik at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> When client A reconnect, the message is not delivered and all others incoming messages are not delivered but stocked in queue.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Ps: Client A is connected from another network and client B from the same server's network.
</I>&gt;&gt;<i>      The problem doesn't appear with client connected from the same server's network.
</I>&gt;<i> 
</I>&gt;<i> Are you sure that client A actually connects? (e.g. does management UI lists its connection?)
</I>&gt;<i> 
</I>&gt;<i> Do you see any channel exceptions in RabbitMQ log? Is there a consumer on the queue?
</I>&gt;<i> 
</I>&gt;<i> MK
</I>&gt;<i> 
</I>&gt;<i> Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033973.html">[rabbitmq-discuss] persistent messages are not delivered !!
</A></li>
	<LI>Next message: <A HREF="033975.html">[rabbitmq-discuss] /api/queue message_stats-&gt;deliver_get_details-&gt;last_event removed in 3.1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33974">[ date ]</a>
              <a href="thread.html#33974">[ thread ]</a>
              <a href="subject.html#33974">[ subject ]</a>
              <a href="author.html#33974">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
