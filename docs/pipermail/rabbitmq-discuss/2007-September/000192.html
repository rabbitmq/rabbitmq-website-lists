<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Server control classes in Java
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Server%20control%20classes%20in%20Java&In-Reply-To=46DD4206.2010305%40wizards.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000190.html">
   <LINK REL="Next"  HREF="000193.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Server control classes in Java</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Server%20control%20classes%20in%20Java&In-Reply-To=46DD4206.2010305%40wizards.de"
       TITLE="[rabbitmq-discuss] Server control classes in Java">alexis.richardson at cohesiveft.com
       </A><BR>
    <I>Wed Sep  5 11:26:42 BST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000190.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
        <LI>Next message: <A HREF="000193.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#192">[ date ]</a>
              <a href="thread.html#192">[ thread ]</a>
              <a href="subject.html#192">[ subject ]</a>
              <a href="author.html#192">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Holger,

Thanks for your detailed reply.


On 9/4/07, Holger Hoffst&#228;tte &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">holger at wizards.de</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> This might be useful for embedding the server and also more Java-centric
</I>&gt;<i> testing without having a backup human fiddle with an external server.
</I>&gt;<i> For now I was only thinking of starting/stopping an instance on the local
</I>&gt;<i> machine..
</I>
I understand.  That would certainly be very useful.



&gt;<i> &gt; 1.  Should a Java-based start/stop/ping control be wrapped using some
</I>&gt;<i> &gt; standard enterprise Java API or framework?
</I>&gt;<i>
</I>&gt;<i> I'm not aware of any extra APIs for that since external process control is
</I>&gt;<i> very system-dependent. Sadly it seems most prople just end up hardcoding
</I>&gt;<i> Strings into their apps until it sort of works..
</I>
Bootstrapping from there would be perfectly OK for a first pass.


&gt;<i> I think you are targeting JDK 1.4 compliance with the Java classes, right?
</I>&gt;<i> That rules out the new 1.5+ ProcessBuilder classes, but it's not too big a
</I>&gt;<i> problem.
</I>
We are currently targetting 1.5 with retrotranslator functionality.
So - go for it :-)



&gt;<i> &gt; 2.  To a degree, the commands to boot the Rabbit server are O/S and
</I>&gt;<i> &gt; package dependent.  What is the least painful way to abstract this
</I>&gt;<i> &gt; away?
</I>&gt;<i>
</I>&gt;<i> No idea yet. I have JDK 1.4 cross-platform helper classes to read OS
</I>&gt;<i> environment variables (Windows and Unix with sh/bash/csh/zsh, all of which
</I>&gt;<i> are different!) and e.g. parse VM property definitions from strings (the
</I>&gt;<i> -Dxxx -Dfoo=bar stuff, which was surprisingly difficult) since we had
</I>&gt;<i> similar problems in Mule.
</I>
Anything you have already to hand, would be useful at this stage.



&gt;<i> I guess platform-specific subclass instances that get returned from a
</I>&gt;<i> RabbitMQServerManagerFactory could do the trick - then Windows/Unix stuff
</I>&gt;<i> can be hidden behind common methods.
</I>
Sounds sensible.


&gt;<i> The actual communication with the
</I>&gt;<i> server for pings, stats etc. would be via the regular Java AMQP protocol,
</I>&gt;<i> right?
</I>
Initially yes.  We've thoughts on optimisations for the future -- I'd
ask Tony to articulate the options there if people want to discuss
these.


&gt;<i> Once we have such a server manager we might think about exposing
</I>&gt;<i> the server stats and operations via JMX.
</I>&gt;<i> I guess the common operations for the server manager would initially just
</I>&gt;<i> be start, stop and maybe notification/handling on unexpected process
</I>&gt;<i> death. Also an optional VM shutdown hook could be handy, to make sure both
</I>&gt;<i> processes go together.
</I>
All good.  If we can get this to work we can then do all sorts of
fancy stuff later, such as using the queues to present management
hooks.  But your starting point would in and of itself be extremely
useful.


&gt;<i>
</I>&gt;<i> cheers
</I>&gt;<i> Holger
</I>&gt;<i>
</I>&gt;<i> PS: Warning and Disclaimer: so far I've used rabbitmq exactly once for 5
</I>&gt;<i> minutes and have not even started reading my new Erlang book yet!
</I>
Hopefully you shouldn't have to read it, but do please let us know how
you get on ;-)

alexis




-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000190.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
	<LI>Next message: <A HREF="000193.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#192">[ date ]</a>
              <a href="thread.html#192">[ thread ]</a>
              <a href="subject.html#192">[ subject ]</a>
              <a href="author.html#192">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
