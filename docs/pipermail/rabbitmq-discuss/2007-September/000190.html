<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Server control classes in Java
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Server%20control%20classes%20in%20Java&In-Reply-To=167204d20709030236x6bf64fa5pfaf55b46a9a92e6e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000187.html">
   <LINK REL="Next"  HREF="000192.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Server control classes in Java</H1>
    <B>Holger Hoffst&#228;tte</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Server%20control%20classes%20in%20Java&In-Reply-To=167204d20709030236x6bf64fa5pfaf55b46a9a92e6e%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Server control classes in Java">holger at wizards.de
       </A><BR>
    <I>Tue Sep  4 12:31:18 BST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000187.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
        <LI>Next message: <A HREF="000192.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Alexis Richardson wrote:
&gt;<i> Your timing is excellent.  This is on our to do list, but we have not
</I>&gt;<i> begun addressing it.  If you would be willing to write something then
</I>&gt;<i> we would certainly look at including it.
</I>
It was more of a random idea.. :)

This might be useful for embedding the server and also more Java-centric
testing without having a backup human fiddle with an external server.
For now I was only thinking of starting/stopping an instance on the local
machine..remote activation is a different animal altogether and should
probably tie in with deployment/management mechanisms. Maybe a Jini
service :-D

&gt;<i> If you are keen to start the ball rolling, please can you comment on
</I>&gt;<i> the following issues --
</I>&gt;<i> 
</I>&gt;<i> 1.  Should a Java-based start/stop/ping control be wrapped using some
</I>&gt;<i> standard enterprise Java API or framework?
</I>
I'm not aware of any extra APIs for that since external process control is
very system-dependent. Sadly it seems most prople just end up hardcoding
Strings into their apps until it sort of works..
I think you are targeting JDK 1.4 compliance with the Java classes, right?
That rules out the new 1.5+ ProcessBuilder classes, but it's not too big a
problem. The differences between Unixen and Windows are probably a bit
trickier. Fortunately such a server manager does not really need much
interaction with the external process; the usual Runtime.exec() stuff can
be difficult to get right since stdin/out/err need to be read
asynchronously or stuff starts blocking/hanging etc.

&gt;<i> 2.  To a degree, the commands to boot the Rabbit server are O/S and
</I>&gt;<i> package dependent.  What is the least painful way to abstract this
</I>&gt;<i> away?
</I>
No idea yet. I have JDK 1.4 cross-platform helper classes to read OS
environment variables (Windows and Unix with sh/bash/csh/zsh, all of which
are different!) and e.g. parse VM property definitions from strings (the
-Dxxx -Dfoo=bar stuff, which was surprisingly difficult) since we had
similar problems in Mule.

I guess platform-specific subclass instances that get returned from a
RabbitMQServerManagerFactory could do the trick - then Windows/Unix stuff
can be hidden behind common methods. The actual communication with the
server for pings, stats etc. would be via the regular Java AMQP protocol,
right? Once we have such a server manager we might think about exposing
the server stats and operations via JMX.
I guess the common operations for the server manager would initially just
be start, stop and maybe notification/handling on unexpected process
death. Also an optional VM shutdown hook could be handy, to make sure both
processes go together.

cheers
Holger

PS: Warning and Disclaimer: so far I've used rabbitmq exactly once for 5
minutes and have not even started reading my new Erlang book yet!



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000187.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
	<LI>Next message: <A HREF="000192.html">[rabbitmq-discuss] Server control classes in Java
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
