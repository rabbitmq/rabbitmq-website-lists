<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ with Socket Server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20with%20Socket%20Server&In-Reply-To=22998192-570B-492D-A9EF-F4F390D22042%40mac.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004901.html">
   <LINK REL="Next"  HREF="004872.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ with Socket Server</H1>
    <B>Alex Gentle</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20with%20Socket%20Server&In-Reply-To=22998192-570B-492D-A9EF-F4F390D22042%40mac.com"
       TITLE="[rabbitmq-discuss] RabbitMQ with Socket Server">alexgentle at sify.com
       </A><BR>
    <I>Tue Sep 22 03:28:20 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004901.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
        <LI>Next message: <A HREF="004872.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4920">[ date ]</a>
              <a href="thread.html#4920">[ thread ]</a>
              <a href="subject.html#4920">[ subject ]</a>
              <a href="author.html#4920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Chuck,

&gt;<i>I think we are getting ahead of ourselves. Your original post indicated
</I>that your code did not work but now you are worried about performance. Let's
get your code working first and then you can worry &gt;about optimizing it
later.

&gt;<i>Can you successfully publish your messages yet? If so, can you pop them off
</I>of the queue to read them?

Yes. The code is working. I can publish and retrieve the messages from the
queue. It works well.

&gt;<i>Polling is usually a bad idea particularly since it requires a lot of
</I>unnecessary messaging. Most AMQP libraries I have seen allow for two ways to
fetch messages. One way is to &quot;get&quot; them from the &gt;queue which is a
synchronous operation. The second way is to &quot;subscribe&quot; to a queue and have
it asynchronously push messages to the subscriber. You want to investigate
this second methodology &gt;for your application. Async operations result in
slightly more complex code but they will let you scale better than
polling/synchronous operations.

This is news to me. I thought that client has to run the call to fetch the
message that is in the client's queue, even if the client subscribes to it.
Could you please explain pushing messages to the subscriber. If I have
socket server in the middle, will it block the pushed messages? I want to
trigger some kind of signal from rabbitmq to the client when a message is
waiting for the client so that client doesn't need to poll every few
seconds.

Thank you.


On Fri, Sep 18, 2009 at 5:27 AM, Chuck Remes &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">cremes.devlist at mac.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Sep 17, 2009, at 7:40 PM, Alex Gentle wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;Once you have parsed the message from socket server and determined it &gt;should go to rabbit, you publish the message to it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don&#8217;t know Ruby. I wrote a PHP program that parse the message from socket server and pass the message to RabbitMQ server.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I wrote the examples in ruby since the code is very compact. You can
</I>&gt;<i> perform the same operations in any language that has an AMQP library.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The catch here is the performance. iPhone needs to query for the message in the queue every few seconds.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think we are getting ahead of ourselves. Your original post indicated
</I>&gt;<i> that your code did not work but now you are worried about performance. Let's
</I>&gt;<i> get your code working first and then you can worry about optimizing it
</I>&gt;<i> later.
</I>&gt;<i>
</I>&gt;<i> Can you successfully publish your messages yet? If so, can you pop them off
</I>&gt;<i> of the queue to read them?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Let us assume
</I>&gt;<i>
</I>&gt;<i> that User A and User B chats thru iPhone application. User A sends the message to RabbitMQ.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> User A -&gt; Socket Server -&gt; RabbitMQ Server
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> RabbitMQ has no way of sending the notification to User B that some message is waiting for him.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> User B needs to check the RabbitMQ server every 5 seconds to see if there is any message in his queue.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Imagine there are 10,000 users like user A and B. All of them will be sending the message thru socket server to RabbitMQ server. Socket
</I>&gt;<i>
</I>&gt;<i> server can handle all the traffic. It&#8217;s a piece of cake for RabbitMQ to handle the traffic. But, the poor PHP program in the middle
</I>&gt;<i> (between socket server and RabbitMQ) can&#8217;t handle all the incoming and outgoing requests with ease. It&#8217;s going to slow down the process.
</I>&gt;<i>
</I>&gt;<i> Users will see substantial delay in sending and receiving messages.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is there a better way to do it? Thanks.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Polling is usually a bad idea particularly since it requires a lot of
</I>&gt;<i> unnecessary messaging. Most AMQP libraries I have seen allow for two ways to
</I>&gt;<i> fetch messages. One way is to &quot;get&quot; them from the queue which is a
</I>&gt;<i> synchronous operation. The second way is to &quot;subscribe&quot; to a queue and have
</I>&gt;<i> it asynchronously push messages to the subscriber. You want to investigate
</I>&gt;<i> this second methodology for your application. Async operations result in
</I>&gt;<i> slightly more complex code but they will let you scale better than
</I>&gt;<i> polling/synchronous operations.
</I>&gt;<i>
</I>&gt;<i> cr
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090921/4299d4c0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090921/4299d4c0/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004901.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
	<LI>Next message: <A HREF="004872.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4920">[ date ]</a>
              <a href="thread.html#4920">[ thread ]</a>
              <a href="subject.html#4920">[ subject ]</a>
              <a href="author.html#4920">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
