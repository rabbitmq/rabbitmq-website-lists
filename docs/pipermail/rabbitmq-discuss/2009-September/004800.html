<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] procedure for dealing with	timeout_waiting_for_tables
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20procedure%20for%20dealing%20with%0A%09timeout_waiting_for_tables&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004796.html">
   <LINK REL="Next"  HREF="004823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] procedure for dealing with	timeout_waiting_for_tables</H1>
    <B>tsuraan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20procedure%20for%20dealing%20with%0A%09timeout_waiting_for_tables&In-Reply-To="
       TITLE="[rabbitmq-discuss] procedure for dealing with	timeout_waiting_for_tables">tsuraan at gmail.com
       </A><BR>
    <I>Mon Sep  7 19:08:03 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004796.html">[rabbitmq-discuss] java client error
</A></li>
        <LI>Next message: <A HREF="004823.html">[rabbitmq-discuss] procedure for dealing with	timeout_waiting_for_tables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4800">[ date ]</a>
              <a href="thread.html#4800">[ thread ]</a>
              <a href="subject.html#4800">[ subject ]</a>
              <a href="author.html#4800">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I had a machine that had the timeout_waiting_for_tables (not in a
cluster, just a single node).  I'm guessing that its hostname had
changed, and that was making mnesia angry.  I have two questions about
this.  Is there a good way to figure out exactly why mnesia isn't
starting, i.e. is it a hostname change, a corrupt mnesia file, etc?

Second, to fix this, I thought I could copy out my persister logs,
wipe the rabbit dir from /var/lib/.../mnesia, restart rabbit, and move
the persisters back in.  That didn't seem to work, since the queues
weren't defined anymore, so the log replay apparently just threw
everything away.  Would remaking my exchanges, bindings, and queues,
then moving in my persister logs do the trick?

The full error from the log was:

=INFO REPORT==== 8-Sep-2009::02:53:25 ===
    application: rabbit
    exited: {{timeout_waiting_for_tables,
                 [rabbit_user,rabbit_user_permission,rabbit_vhost,
                  rabbit_config,rabbit_listener,rabbit_durable_route,
                  rabbit_route,rabbit_reverse_route,rabbit_durable_exchange,
                  rabbit_exchange,rabbit_durable_queue,rabbit_queue]},
             {rabbit,start,[normal,[]]}}
    type: temporary

=INFO REPORT==== 8-Sep-2009::02:53:25 ===
    application: mnesia
    exited: stopped
    type: temporary

=INFO REPORT==== 8-Sep-2009::02:53:25 ===
    application: os_mon
    exited: stopped
    type: temporary

That looks pretty standard from what I could find on this list, and it
seems to be related to hostname changes, but I couldn't see how to fix
it from there.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004796.html">[rabbitmq-discuss] java client error
</A></li>
	<LI>Next message: <A HREF="004823.html">[rabbitmq-discuss] procedure for dealing with	timeout_waiting_for_tables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4800">[ date ]</a>
              <a href="thread.html#4800">[ thread ]</a>
              <a href="subject.html#4800">[ subject ]</a>
              <a href="author.html#4800">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
