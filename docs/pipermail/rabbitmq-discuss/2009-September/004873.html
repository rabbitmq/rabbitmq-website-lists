<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] eheap_alloc error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20eheap_alloc%20error&In-Reply-To=376f3e6f0909150903x320b5f1ckc29d7bcfe43e014f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004867.html">
   <LINK REL="Next"  HREF="004889.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] eheap_alloc error</H1>
    <B>majek04</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20eheap_alloc%20error&In-Reply-To=376f3e6f0909150903x320b5f1ckc29d7bcfe43e014f%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] eheap_alloc error">majek04 at gmail.com
       </A><BR>
    <I>Wed Sep 16 12:48:20 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004867.html">[rabbitmq-discuss] eheap_alloc error
</A></li>
        <LI>Next message: <A HREF="004889.html">[rabbitmq-discuss] eheap_alloc error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4873">[ date ]</a>
              <a href="thread.html#4873">[ thread ]</a>
              <a href="subject.html#4873">[ subject ]</a>
              <a href="author.html#4873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Sep 15, 2009 at 17:03, Suhail Doshi &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">suhail at mixpanel.com</A>&gt; wrote:
&gt;<i> Doing some investigation into what happened, apparently the memory just
</I>&gt;<i> instantly got used, it wasn't leaking something slowly...any ideas?
</I>&gt;<i> Attached is an image of memory usage, then the consumer dies freeing up the
</I>&gt;<i> memory used later.
</I>
It looks like erlang was trying to allocate 5 gigs of RAM, and failed.
This could have happened during garbage collection, but only
if a single erlang process was using all the memory.

Do you have a single large queue?
Are you sure that the queue had reasonable size during the crash?
Maybe all the consumers had died and rabbit just ran out of memory?

Cheers!
  Marek Majkowski


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004867.html">[rabbitmq-discuss] eheap_alloc error
</A></li>
	<LI>Next message: <A HREF="004889.html">[rabbitmq-discuss] eheap_alloc error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4873">[ date ]</a>
              <a href="thread.html#4873">[ thread ]</a>
              <a href="subject.html#4873">[ subject ]</a>
              <a href="author.html#4873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
