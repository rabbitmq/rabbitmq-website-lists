<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ with Socket Server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20with%20Socket%20Server&In-Reply-To=fb0723210909171740i494c0c0csfee4fcba51d6e989%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004898.html">
   <LINK REL="Next"  HREF="004920.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ with Socket Server</H1>
    <B>Chuck Remes</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20with%20Socket%20Server&In-Reply-To=fb0723210909171740i494c0c0csfee4fcba51d6e989%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ with Socket Server">cremes.devlist at mac.com
       </A><BR>
    <I>Fri Sep 18 13:27:08 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004898.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
        <LI>Next message: <A HREF="004920.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4901">[ date ]</a>
              <a href="thread.html#4901">[ thread ]</a>
              <a href="subject.html#4901">[ subject ]</a>
              <a href="author.html#4901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Sep 17, 2009, at 7:40 PM, Alex Gentle wrote:

&gt;<i> &gt;Once you have parsed the message from socket server and determined  
</I>&gt;<i> it &gt;should go to rabbit, you publish the message to it.
</I>&gt;<i>
</I>&gt;<i> I don&#8217;t know Ruby. I wrote a PHP program that parse the message from  
</I>&gt;<i> socket server and pass the message to RabbitMQ server.
</I>

I wrote the examples in ruby since the code is very compact. You can  
perform the same operations in any language that has an AMQP library.


&gt;<i> The catch here is the performance. iPhone needs to query for the  
</I>&gt;<i> message in the queue every few seconds.
</I>

I think we are getting ahead of ourselves. Your original post  
indicated that your code did not work but now you are worried about  
performance. Let's get your code working first and then you can worry  
about optimizing it later.

Can you successfully publish your messages yet? If so, can you pop  
them off of the queue to read them?


&gt;<i> Let us assume
</I>&gt;<i>
</I>&gt;<i> that User A and User B chats thru iPhone application. User A sends  
</I>&gt;<i> the message to RabbitMQ.
</I>&gt;<i>
</I>&gt;<i> User A -&gt; Socket Server -&gt; RabbitMQ Server
</I>&gt;<i>
</I>&gt;<i> RabbitMQ has no way of sending the notification to User B that some  
</I>&gt;<i> message is waiting for him.
</I>&gt;<i>
</I>&gt;<i> User B needs to check the RabbitMQ server every 5 seconds to see if  
</I>&gt;<i> there is any message in his queue.
</I>&gt;<i>
</I>&gt;<i> Imagine there are 10,000 users like user A and B. All of them will  
</I>&gt;<i> be sending the message thru socket server to RabbitMQ server. Socket
</I>&gt;<i>
</I>&gt;<i> server can handle all the traffic. It&#8217;s a piece of cake for RabbitMQ  
</I>&gt;<i> to handle the traffic. But, the poor PHP program in the middle
</I>&gt;<i> (between socket server and RabbitMQ) can&#8217;t handle all the incoming  
</I>&gt;<i> and outgoing requests with ease. It&#8217;s going to slow down the process.
</I>&gt;<i>
</I>&gt;<i> Users will see substantial delay in sending and receiving messages.
</I>&gt;<i>
</I>&gt;<i> Is there a better way to do it? Thanks.
</I>
Polling is usually a bad idea particularly since it requires a lot of  
unnecessary messaging. Most AMQP libraries I have seen allow for two  
ways to fetch messages. One way is to &quot;get&quot; them from the queue which  
is a synchronous operation. The second way is to &quot;subscribe&quot; to a  
queue and have it asynchronously push messages to the subscriber. You  
want to investigate this second methodology for your application.  
Async operations result in slightly more complex code but they will  
let you scale better than polling/synchronous operations.

cr

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090918/902d03fc/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090918/902d03fc/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004898.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
	<LI>Next message: <A HREF="004920.html">[rabbitmq-discuss] RabbitMQ with Socket Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4901">[ date ]</a>
              <a href="thread.html#4901">[ thread ]</a>
              <a href="subject.html#4901">[ subject ]</a>
              <a href="author.html#4901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
