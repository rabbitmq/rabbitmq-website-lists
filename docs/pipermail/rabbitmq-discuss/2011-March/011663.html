<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] What is internal parameter of exchange.declare for?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20internal%20parameter%20of%0A%20exchange.declare%20for%3F&In-Reply-To=%3C4D718FC1.3020705%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011662.html">
   <LINK REL="Next"  HREF="011664.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] What is internal parameter of exchange.declare for?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20What%20is%20internal%20parameter%20of%0A%20exchange.declare%20for%3F&In-Reply-To=%3C4D718FC1.3020705%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] What is internal parameter of exchange.declare for?">simon at rabbitmq.com
       </A><BR>
    <I>Sat Mar  5 01:20:01 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011662.html">[rabbitmq-discuss] What is internal parameter of exchange.declare for?
</A></li>
        <LI>Next message: <A HREF="011664.html">[rabbitmq-discuss] What is internal parameter of	exchange.declare for?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11663">[ date ]</a>
              <a href="thread.html#11663">[ thread ]</a>
              <a href="subject.html#11663">[ subject ]</a>
              <a href="author.html#11663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/03/2011 1:07AM, Alexandru Scvor&#355;ov wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> The first hint is in rabbitmqctl's manpage:
</I>&gt;<i>    <A HREF="http://www.rabbitmq.com/man/rabbitmqctl.1.man.html">http://www.rabbitmq.com/man/rabbitmqctl.1.man.html</A>
</I>&gt;<i>
</I>&gt;<i>    ``internal
</I>&gt;<i>      Whether the exchange is internal, i.e. cannot be directly published to
</I>&gt;<i>      by a client.''
</I>&gt;<i>
</I>&gt;<i> Which raises the question, ``Why on earth would you have an exchange
</I>&gt;<i> that cannot be published to?''.  The answer is exchange-to-exchange
</I>&gt;<i> bindings:
</I>&gt;<i>    <A HREF="http://www.rabbitmq.com/extensions.html#exchange-bindings">http://www.rabbitmq.com/extensions.html#exchange-bindings</A>
</I>&gt;<i>
</I>&gt;<i> And here's the blogpost that sheds a little more light on the subject:
</I>&gt;<i>    <A HREF="http://www.rabbitmq.com/blog/2010/10/19/exchange-to-exchange-bindings/">http://www.rabbitmq.com/blog/2010/10/19/exchange-to-exchange-bindings/</A>
</I>
Some history:

&quot;internal&quot; was originally specified in AMQP 0-8. The 0-8 spec says:

       If set, the exchange may not be used directly by publishers, but
       only when bound to other exchanges. Internal exchanges are used to
       construct wiring that is not visible to applications.

This was deprecated in AMQP 0-9-1, which is why it shows up as 
&quot;reserved-3&quot;. It was deprecated since neither AMQP 0-8 or 0-9-1 have the 
concept of exchange to exchange bindings (despite the strong 
implications of the above quote!)

When we implemented exchange to exchange bindings as an extension to 
AMQP 0-9-1 we decided to implement internal exchanges despite the 
deprecation, as they are now useful.

Similarly, &quot;reserved-2&quot; in 0-9-1's exchange.declare corresponds to 0-8's 
&quot;auto-delete&quot; field. This means &quot;delete the exchange when something has 
bound to it and then everything has unbound from it&quot;, which again only 
really makes sense in the context of exchange to exchange bindings, so 
again we've effectively undeprecated it.

&quot;reserved-1&quot; corresponds to the &quot;ticket&quot; field that's on most methods 
which was an attempt to optimise access control. We still ignore that.

Cheers, Simon
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011662.html">[rabbitmq-discuss] What is internal parameter of exchange.declare for?
</A></li>
	<LI>Next message: <A HREF="011664.html">[rabbitmq-discuss] What is internal parameter of	exchange.declare for?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11663">[ date ]</a>
              <a href="thread.html#11663">[ thread ]</a>
              <a href="subject.html#11663">[ subject ]</a>
              <a href="author.html#11663">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
