<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] server crashes with very fast consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20server%20crashes%20with%20very%20fast%20consumers&In-Reply-To=%3C747873.7872.qm%40web31801.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012067.html">
   <LINK REL="Next"  HREF="012090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] server crashes with very fast consumers</H1>
    <B>alex chen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20server%20crashes%20with%20very%20fast%20consumers&In-Reply-To=%3C747873.7872.qm%40web31801.mail.mud.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] server crashes with very fast consumers">chen650 at yahoo.com
       </A><BR>
    <I>Sun Mar 27 21:29:35 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012067.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
        <LI>Next message: <A HREF="012090.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12069">[ date ]</a>
              <a href="thread.html#12069">[ thread ]</a>
              <a href="subject.html#12069">[ subject ]</a>
              <a href="author.html#12069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>John,

Thanks for looking into this problem!


&gt;<i> When I run run.sh, it fails to fork some of the producers and some of the 
</I>&gt;<i>consumers because of Unix kernel limitations, which also &gt; cause some of the 
</I>&gt;<i>commands in common.sh to fail. I'm assuming for the moment that these failures 
</I>&gt;<i>are not affecting the tests.
</I>

Actually these failures would affect the tests.  The goal of the tests is 
consuming 50 GB of messages from 1000 queues simultaneously.  If run.sh could 
not start 1000 producers, there won't be 50 GB messages backed up in the 
broker.  amqp_producer.c can be modified to publish those messages into 1000 
topics with single process, however, we still need to start 1000 consumers to 
consume messages simultaneously.   I am using RHEL5 and did not run into any 
kernel limitations with 1000 producers and 1000 consumers.  Have you tried 
&quot;ulimit&quot; to workaround it?

-alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110327/2a64c70f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110327/2a64c70f/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012067.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
	<LI>Next message: <A HREF="012090.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12069">[ date ]</a>
              <a href="thread.html#12069">[ thread ]</a>
              <a href="subject.html#12069">[ subject ]</a>
              <a href="author.html#12069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
