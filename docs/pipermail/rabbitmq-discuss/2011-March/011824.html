<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Reddit news
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reddit%20news&In-Reply-To=%3CAANLkTim%2BD2Fe%2BXZ_7_-CeJRTHytHLPfHSFS5Mwz%3D0JO6%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011814.html">
   <LINK REL="Next"  HREF="011773.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Reddit news</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Reddit%20news&In-Reply-To=%3CAANLkTim%2BD2Fe%2BXZ_7_-CeJRTHytHLPfHSFS5Mwz%3D0JO6%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Reddit news">majek04 at gmail.com
       </A><BR>
    <I>Tue Mar 15 10:27:00 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011814.html">[rabbitmq-discuss] Reddit news
</A></li>
        <LI>Next message: <A HREF="011773.html">[rabbitmq-discuss] Subscription Pattern in .net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11824">[ date ]</a>
              <a href="thread.html#11824">[ thread ]</a>
              <a href="subject.html#11824">[ subject ]</a>
              <a href="author.html#11824">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Mar 14, 2011 at 23:09, Marcel Meyer &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">marcel.meyer at gmail.com</A>&gt; wrote:
&gt;<i> Thanks for the info Marek.
</I>&gt;<i>
</I>&gt;<i> So how does Rabbit 2+ deal with saturation?
</I>
Rabbit 2.0+ has few mechanisms to deal with that.

First, it's important to understand that Rabbit tries to
take advantage of available memory. If your messages
fit into the memory - rabbit should be fast.

Once you hit the memory limit (usually set to 0.4 available RAM),
rabbit will start swapping out messages to disk to free memory.

If you have fast enough disk (ie: ssd) that shouldn't slow
down things too much.

But if you're producing messages faster than Rabbit is able
to put them on the disk - Rabbit memory usage will continue to grow.

At some point, to prevent running out of memory rabbit
will use the last measure - it will just stop accepting
new messages (by not doing recv() on connections that
try to do basic.publish).

If that happens, Rabbit should be able to catch the breath,
swap out some remaining messages, and eventually unblock
receiving.

Cheers,
  Marek

&gt;<i> On 3/14/11, Marek Majkowski &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">majek04 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> From what I understood, they run into a pretty common misunderstanding.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Basically the system that consumed messages, for some
</I>&gt;&gt;<i> reason, was too slow. That, obviously, put a lot of stress
</I>&gt;&gt;<i> on RabbitMQ, and as it was before rabbit 2.0, at some point
</I>&gt;&gt;<i> Rabbit just died due to out-of-memory situation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Reddit guys were unhappy to see Rabbit go down, but
</I>&gt;&gt;<i> in fact Rabbit was not the source of their problems.
</I>&gt;&gt;<i> It was just a side-effect of something else misbehaving.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> &#160; Marek
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, Mar 11, 2011 at 19:30, Marcel Meyer &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">marcel.meyer at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> Great!&#160;Do you know whether this was documented as some anti-pattern? Is
</I>&gt;&gt;&gt;<i> there more about the specific issues they faced?
</I>&gt;&gt;&gt;<i> On Fri, Mar 11, 2011 at 12:13 PM, Alexis Richardson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis at rabbitmq.com</A>&gt;
</I>&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi Marcel
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Yes, I believe so. &#160; Matthew went to see them. &#160;As I recall the main
</I>&gt;&gt;&gt;&gt;<i> issues were actually not with Rabbit, but some of how they had used
</I>&gt;&gt;&gt;&gt;<i> messaging was worth discussing.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> alexis
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Fri, Mar 11, 2011 at 5:07 PM, Marcel Meyer &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">marcel.meyer at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;&gt;<i> &gt; Hi there Rabbit Community,
</I>&gt;&gt;&gt;&gt;<i> &gt; I am researching queues and found this&#160;thread about reddit's gripes
</I>&gt;&gt;&gt;&gt;<i> &gt; (<A HREF="http://www.reddit.com/tb/c2spc">http://www.reddit.com/tb/c2spc</A>) and noticed that RabbitMQ Support
</I>&gt;&gt;&gt;&gt;<i> &gt; reached
</I>&gt;&gt;&gt;&gt;<i> &gt; out to them.
</I>&gt;&gt;&gt;&gt;<i> &gt; Were there issues resolved? They upgraded ERTS as a &quot;stopgap&quot; fix, but
</I>&gt;&gt;&gt;&gt;<i> &gt; wanted to yank the technology all together. Did they?
</I>&gt;&gt;&gt;&gt;<i> &gt; Regards,
</I>&gt;&gt;&gt;&gt;<i> &gt; Marcel
</I>&gt;&gt;&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I></PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011814.html">[rabbitmq-discuss] Reddit news
</A></li>
	<LI>Next message: <A HREF="011773.html">[rabbitmq-discuss] Subscription Pattern in .net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11824">[ date ]</a>
              <a href="thread.html#11824">[ thread ]</a>
              <a href="subject.html#11824">[ subject ]</a>
              <a href="author.html#11824">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
