<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] socket error while using rabbitmq and a NAT (Network address translation)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20socket%20error%20while%20using%20rabbitmq%20and%20a%20NAT%0A%20%28Network%20address%20translation%29&In-Reply-To=%3C4D6CF797.4090305%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011546.html">
   <LINK REL="Next"  HREF="011551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] socket error while using rabbitmq and a NAT (Network address translation)</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20socket%20error%20while%20using%20rabbitmq%20and%20a%20NAT%0A%20%28Network%20address%20translation%29&In-Reply-To=%3C4D6CF797.4090305%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] socket error while using rabbitmq and a NAT (Network address translation)">emile at rabbitmq.com
       </A><BR>
    <I>Tue Mar  1 13:41:43 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011546.html">[rabbitmq-discuss] socket error while using rabbitmq and a NAT (Network address translation)
</A></li>
        <LI>Next message: <A HREF="011551.html">[rabbitmq-discuss] socket error while using rabbitmq and a NAT (Network address translation)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11549">[ date ]</a>
              <a href="thread.html#11549">[ thread ]</a>
              <a href="subject.html#11549">[ subject ]</a>
              <a href="author.html#11549">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 01/03/11 12:55, mysurf mail wrote:
&gt;<i> Hi Emile,
</I>&gt;<i> I have a few questions:
</I>&gt;<i> 1. On the rabbitmq server we have a few Erlang versions. Should that
</I>&gt;<i> create a problem .
</I>
Keep in mind that different features of RabbitMQ have different minimum 
requirements (e.g. SSL and some plugins). This is especially important 
in a multi-version environment. It is best to use the latest version 
across the board if possible (unless it is an alpha version containing 
an A).

&gt;<i> (For now, I finished removing the older ones, so currently we have only
</I>&gt;<i> 5.8.2 and the problem still exists
</I>&gt;<i> 2. I have added the logs file from the rabbitmq server. I am the ip that
</I>&gt;<i> ends with 170.120 and my last trial had an exception.
</I>
It is unusual to have the broker listen on port 1434. From the log there 
are at least 3 kinds of problems:

1 Protocol errors:
   Acknowledging with an unknown delivery tag
   Redeclaring exchanges with different parameters
   These will lead to a channel or connection closure.

2 1-Mar-2011::14:15:02
   Handshake timeout
   This will close the connection

3 1-Mar-2011::14:18:46
   Abrupt connection termination

The first can be solved by making sure that you don't acknowledge 
messages more than once, and that you declare exchanges with identical 
parameters. The second and third may have a related root cause, which 
the tracer or network diagnostic tools should help to identify.

&gt;<i> 3. Now about that tracer. I have been having some hard time finding
</I>&gt;<i> documentation for it.
</I>&gt;<i> Should I run it from the client (it comes with the client packacge) or
</I>&gt;<i> in the server? I am running it in the client.
</I>&gt;<i> my rabbit node port is 1434.  so I am running it with
</I>&gt;<i> .\runjava.bat co m.rabbitmq.tools.Tracer 1434 192.168.100.251 5672
</I>&gt;<i> are my parameters ok ?
</I>
See <A HREF="http://www.rabbitmq.com/examples.html#tracer">http://www.rabbitmq.com/examples.html#tracer</A> .
Judging by your logfile you want to use 1434 as the connectPort argument 
instead of 5672.

&gt;<i> I used rabbit node port as listenport and 5672 as connect port. I also
</I>&gt;<i> switched them but no luck . I didnt see anything on the cmd when I
</I>&gt;<i> invoked my produce command.
</I>&gt;<i> here it is
</I>
You should configure AMQP clients to connect to the tracer instead of to 
the broker directly. The port should be the one given as the first 
argument (listenPort) and the host should be the IP number of the 
machine running the tracer.




-Emile
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011546.html">[rabbitmq-discuss] socket error while using rabbitmq and a NAT (Network address translation)
</A></li>
	<LI>Next message: <A HREF="011551.html">[rabbitmq-discuss] socket error while using rabbitmq and a NAT (Network address translation)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11549">[ date ]</a>
              <a href="thread.html#11549">[ thread ]</a>
              <a href="subject.html#11549">[ subject ]</a>
              <a href="author.html#11549">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
