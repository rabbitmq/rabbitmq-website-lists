<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] parallel consuming from one queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20parallel%20consuming%20from%20one%20queue&In-Reply-To=%3C4412D9D8F22D764F87903CF7FA46B2DC14D50B6A%40UNILONEX01.unibet.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012051.html">
   <LINK REL="Next"  HREF="012009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] parallel consuming from one queue</H1>
    <B>Jan Andersson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20parallel%20consuming%20from%20one%20queue&In-Reply-To=%3C4412D9D8F22D764F87903CF7FA46B2DC14D50B6A%40UNILONEX01.unibet.com%3E"
       TITLE="[rabbitmq-discuss] parallel consuming from one queue">Jan.Andersson at UNIBET.com
       </A><BR>
    <I>Thu Mar 24 16:38:02 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012051.html">[rabbitmq-discuss] Spying on &quot;mandatory&quot; messages
</A></li>
        <LI>Next message: <A HREF="012009.html">[rabbitmq-discuss] parallel consuming from one queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12008">[ date ]</a>
              <a href="thread.html#12008">[ thread ]</a>
              <a href="subject.html#12008">[ subject ]</a>
              <a href="author.html#12008">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Hi,
we are trying to setup something that we hoped would be pretty straight 
forward but can't seem to get it to work.
We want to consume messages from a persistent queue and use ack:s. 
However all of our attempts end in us consuming one message off the 
queue and then no one else (thread or process) can consume messages off 
the queue until that message has been ack:ed.

This is in Java, we set up one channel per thread like this:
[code]
channel = connection.createChannel();
channel.exchangeDeclare(configuration.getExchangeName(), &quot;topic&quot;, true);
channel.queueDeclare(queueName, true); // durable queue
channel.queueBind(queueName, configuration.getExchangeName(), routingKey);
consumer = new QueueingConsumer(channel);
channel.basicConsume(queueName, false, consumer);
[/code]

The ack is done like this:
[code]
channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
[/code]

Might be hard to answer this but if anyone could point us in the right 
direction that would be great!

thanks
Jan


The information in this email is confidential and may be legally privileged.
If you are not the intended recipient, you must not read, use or disseminate that information
and upon reception, permanently delete the original and destroy any copies.
Although this email and any attachments are believed to be free of any virus
or any other defect which might affect any computer or IT system into which
they are received and opened, it is the responsibility of the recipient to
ensure that they are virus free and no responsibility is accepted by Unibet
for any loss or damage arising in any way from receipt or use thereof.

</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012051.html">[rabbitmq-discuss] Spying on &quot;mandatory&quot; messages
</A></li>
	<LI>Next message: <A HREF="012009.html">[rabbitmq-discuss] parallel consuming from one queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12008">[ date ]</a>
              <a href="thread.html#12008">[ thread ]</a>
              <a href="subject.html#12008">[ subject ]</a>
              <a href="author.html#12008">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
