<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] acquiring channels per connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20acquiring%20channels%20per%20connection&In-Reply-To=%3CE95DBDA418DD4E019939BC54870BFBA5%40myyearbook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011863.html">
   <LINK REL="Next"  HREF="011866.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] acquiring channels per connection</H1>
    <B>Gavin M. Roy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20acquiring%20channels%20per%20connection&In-Reply-To=%3CE95DBDA418DD4E019939BC54870BFBA5%40myyearbook.com%3E"
       TITLE="[rabbitmq-discuss] acquiring channels per connection">gmr at myyearbook.com
       </A><BR>
    <I>Wed Mar 16 15:54:14 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011863.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
        <LI>Next message: <A HREF="011866.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11865">[ date ]</a>
              <a href="thread.html#11865">[ thread ]</a>
              <a href="subject.html#11865">[ subject ]</a>
              <a href="author.html#11865">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Wednesday, March 16, 2011 at 11:42 AM, Marek Majkowski wrote: 
&gt;<i> On Tue, Mar 15, 2011 at 07:11, vorad &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vorad.1100 at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; How expensive would be to do
</I>&gt;<i> &gt; this (one channel per request) from the rabbitmq perspective and also from
</I>&gt;<i> &gt; the Pika's perspective ?
</I>&gt;<i> 
</I>&gt;<i> Well, not that expensive if your RabbitMQ is close to the web server.
</I>&gt;<i> Opening channel is a synchronous action - a full roundtrip is required.
</I>&gt;<i> 
</I>&gt;<i> To avoid that roundtrip you may hava a pool and reuse open channels.
</I>In addition, you're not buying anything by using more connections as they'll still use the same single process IOLoop.

For what it's worth, I use Pika and Tornado with one connection and channel per Tornado backend and hold on to the for the life of the backend, across multiple RequestHandler invocations.

If you want to use multiple channels, I recommend having a sound reason for it. At the protocol level, it's nothing more than a numeric identifier for the frame routing. At the python level it's a set of two class instances which need to reside in memory. I can't think of a reason in my web applications that I would use more than one channel.

For example, if you want to listen on multiple queues, just have multiple callbacks for channel.basic_consume.

I guess my main point is using more channels and more connections doesn't offer any real value and adds additional overhead since you're bound to the same single process for responding to events.

I would imagine if you could saturate a socket without saturating CPU that there could be some value, but offhand I can't imagine that is possible, as the OS's use of CPU would be saturated.

Gavin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110316/07305b46/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110316/07305b46/attachment-0001.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011863.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
	<LI>Next message: <A HREF="011866.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11865">[ date ]</a>
              <a href="thread.html#11865">[ thread ]</a>
              <a href="subject.html#11865">[ subject ]</a>
              <a href="author.html#11865">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
