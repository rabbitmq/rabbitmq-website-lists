<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] server crashes with very fast consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20server%20crashes%20with%20very%20fast%20consumers&In-Reply-To=%3CC15A4C85-A461-4845-92BD-2C826C5453EE%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012125.html">
   <LINK REL="Next"  HREF="012099.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] server crashes with very fast consumers</H1>
    <B>John DeTreville</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20server%20crashes%20with%20very%20fast%20consumers&In-Reply-To=%3CC15A4C85-A461-4845-92BD-2C826C5453EE%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] server crashes with very fast consumers">jdetreville at vmware.com
       </A><BR>
    <I>Mon Mar 28 23:38:48 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012125.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
        <LI>Next message: <A HREF="012099.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12096">[ date ]</a>
              <a href="thread.html#12096">[ thread ]</a>
              <a href="subject.html#12096">[ subject ]</a>
              <a href="author.html#12096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One more question. You say RabbitMQ crashes when you run these tests? And it crashes without writing anything interesting in th logs? Or printing anything to the console? It just exits?

Cheers,
John

On Mar 27, 2011, at 1:29 PM, alex chen wrote:

John,

Thanks for looking into this problem!

&gt;<i> When I run run.sh&lt;<A HREF="http://run.sh">http://run.sh</A>&gt;, it fails to fork some of the producers and some of the consumers because of Unix kernel limitations, which also &gt; cause some of the commands in common.sh&lt;<A HREF="http://common.sh">http://common.sh</A>&gt; to fail. I'm assuming for the moment that these failures are not affecting the tests.
</I>
Actually these failures would affect the tests.  The goal of the tests is consuming 50 GB of messages from 1000 queues simultaneously.  If run.sh could not start 1000 producers, there won't be 50 GB messages backed up in the broker.  amqp_producer.c can be modified to publish those messages into 1000 topics with single process, however, we still need to start 1000 consumers to consume messages simultaneously.   I am using RHEL5 and did not run into any kernel limitations with 1000 producers and 1000 consumers.  Have you tried &quot;ulimit&quot; to workaround it?

-alex

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012125.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
	<LI>Next message: <A HREF="012099.html">[rabbitmq-discuss] server crashes with very fast consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12096">[ date ]</a>
              <a href="thread.html#12096">[ thread ]</a>
              <a href="subject.html#12096">[ subject ]</a>
              <a href="author.html#12096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
