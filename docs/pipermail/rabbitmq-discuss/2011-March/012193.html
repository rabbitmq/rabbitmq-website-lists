<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 2.4.0 channel and connection close behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202.4.0%20channel%20and%20connection%20close%20behavior&In-Reply-To=%3CAANLkTikgJkD_jc6wP2TV%3DQogDOUkAC7MJ2do9tdNA5oC%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012192.html">
   <LINK REL="Next"  HREF="012195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 2.4.0 channel and connection close behavior</H1>
    <B>Aaron Westendorf</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202.4.0%20channel%20and%20connection%20close%20behavior&In-Reply-To=%3CAANLkTikgJkD_jc6wP2TV%3DQogDOUkAC7MJ2do9tdNA5oC%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] 2.4.0 channel and connection close behavior">aaron at agoragames.com
       </A><BR>
    <I>Thu Mar 31 14:56:45 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012192.html">[rabbitmq-discuss] 2.4.0 channel and connection close behavior
</A></li>
        <LI>Next message: <A HREF="012195.html">[rabbitmq-discuss] 2.4.0 channel and connection close behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12193">[ date ]</a>
              <a href="thread.html#12193">[ thread ]</a>
              <a href="subject.html#12193">[ subject ]</a>
              <a href="author.html#12193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm going to revisit this in the afternoon and see what additional
information I can glean.

Regarding synchronous messaging, my reading of the AMQP spec is that
synchronous operations are isolated per channel, and I've coded our
driver accordingly. Is there really an expectation of a global lock
per connection?


There's really nothing special about why we haven't open sourced this
yet, just that we want to have it complete, documented and with
reasonable test coverage before putting a public face on it.  If I
can't make any progress on fixing the bug, it doesn't affect our
client deliverables, and we can solve it when we finally release.

-Aaron

On Thu, Mar 31, 2011 at 9:22 AM, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&gt; wrote:
&gt;<i> On Wed, Mar 30, 2011 at 09:44:05PM +0100, Matthew Sackman wrote:
</I>&gt;&gt;<i> Are there any errors in either of the logs when this happens? There may
</I>&gt;&gt;<i> well be something in the sasl log, but I think this is likely a bug.
</I>&gt;<i>
</I>&gt;<i> I've read through the code and I think it's fine. Constructing a test is
</I>&gt;<i> a little tricky actually because most of our clients are &quot;sensible&quot; and
</I>&gt;<i> make channel.close a synchronous blocking operation, thus it's difficult
</I>&gt;<i> to send in the connection.close before getting the channel.close_ok
</I>&gt;<i> back.
</I>&gt;<i>
</I>&gt;<i> If you can reliably make it happen, (and verify with our Tracer and/or
</I>&gt;<i> wireshark), then it would be helpful if you could let us see the code.
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Aaron Westendorf
Senior Software Engineer
Agora Games
359 Broadway
Troy, NY 12180
Phone: 518.268.1000
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aaron at agoragames.com</A>
www.agoragames.com
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012192.html">[rabbitmq-discuss] 2.4.0 channel and connection close behavior
</A></li>
	<LI>Next message: <A HREF="012195.html">[rabbitmq-discuss] 2.4.0 channel and connection close behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12193">[ date ]</a>
              <a href="thread.html#12193">[ thread ]</a>
              <a href="subject.html#12193">[ subject ]</a>
              <a href="author.html#12193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
