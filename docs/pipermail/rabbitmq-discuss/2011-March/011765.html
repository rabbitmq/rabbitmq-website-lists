<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consumer - threw an exception for channel AMQChannel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%20-%20threw%20an%20exception%20for%20channel%0A%20AMQChannel&In-Reply-To=%3C4D7A4E1B.6070202%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011764.html">
   <LINK REL="Next"  HREF="011779.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consumer - threw an exception for channel AMQChannel</H1>
    <B>Rob Harrop</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consumer%20-%20threw%20an%20exception%20for%20channel%0A%20AMQChannel&In-Reply-To=%3C4D7A4E1B.6070202%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Consumer - threw an exception for channel AMQChannel">rob at rabbitmq.com
       </A><BR>
    <I>Fri Mar 11 16:30:19 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011764.html">[rabbitmq-discuss] Consumer - threw an exception for channel	AMQChannel
</A></li>
        <LI>Next message: <A HREF="011779.html">[rabbitmq-discuss] Consumer - threw an exception for channel	AMQChannel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11765">[ date ]</a>
              <a href="thread.html#11765">[ thread ]</a>
              <a href="subject.html#11765">[ subject ]</a>
              <a href="author.html#11765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What heap size do you have configured for your JVM? It's is entirely 
possible that if you're using the default sizes that 16 3MB msgs will 
cause you to start hitting the OOM exception.

Regards,

Rob

On 11/03/11 16:02, RishiDev wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I have about 10K large msgs (each ~3 MB) in a queue. Started running a
</I>&gt;<i> java consumer client on the queue and after receiving 16 msgs I got
</I>&gt;<i> following exception. Please help resolve/understand the issue.
</I>&gt;<i>
</I>&gt;<i> Consumer <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">com.rabbitmq.client.QueueingConsumer at 15b9e68</A> (amq.ctag-bEjkq
</I>&gt;<i> +5EqqmXsp1idK9rrg==) method handleDelivery for channel
</I>&gt;<i> AMQChannel(<A HREF="amqp://guest@localhost:5672/,1">amqp://guest@localhost:5672/,1</A>) threw an exception for
</I>&gt;<i> channel AMQChannel(<A HREF="amqp://guest@localhost:5672/,1">amqp://guest@localhost:5672/,1</A>):
</I>&gt;<i> java.lang.OutOfMemoryError
</I>&gt;<i> com.rabbitmq.client.AlreadyClosedException: clean connection shutdown;
</I>&gt;<i> reason: Attempt to use closed channel
</I>&gt;<i> 	at com.rabbitmq.client.impl.AMQChannel.ensureIsOpen(AMQChannel.java:
</I>&gt;<i> 195)
</I>&gt;<i> 	at com.rabbitmq.client.impl.AMQChannel.transmit(AMQChannel.java:290)
</I>&gt;<i> 	at com.rabbitmq.client.impl.AMQChannel.transmit(AMQChannel.java:284)
</I>&gt;<i> 	at com.rabbitmq.client.impl.ChannelN.basicAck(ChannelN.java:669)
</I>&gt;<i> 	at
</I>&gt;<i> com.octanner.jmspoc.rabbitmq.RabbitMQConsumer.receiveMsgs(RabbitMQConsumer.java:
</I>&gt;<i> 69)
</I>&gt;<i> 	at
</I>&gt;<i> com.octanner.jmspoc.rabbitmq.RabbitMQConsumer.main(RabbitMQConsumer.java:
</I>&gt;<i> 77)
</I>&gt;<i> Exception in thread &quot;main&quot;
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Rishi
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011764.html">[rabbitmq-discuss] Consumer - threw an exception for channel	AMQChannel
</A></li>
	<LI>Next message: <A HREF="011779.html">[rabbitmq-discuss] Consumer - threw an exception for channel	AMQChannel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11765">[ date ]</a>
              <a href="thread.html#11765">[ thread ]</a>
              <a href="subject.html#11765">[ subject ]</a>
              <a href="author.html#11765">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
