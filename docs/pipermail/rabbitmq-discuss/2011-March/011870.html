<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq-Shovel Timer-Based Publishing Possible?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-Shovel%20Timer-Based%20Publishing%0A%20Possible%3F&In-Reply-To=%3CC9A66266.35A5%25allen.kim%40epicadvertising.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011864.html">
   <LINK REL="Next"  HREF="011878.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq-Shovel Timer-Based Publishing Possible?</H1>
    <B>Allen Kim</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbitmq-Shovel%20Timer-Based%20Publishing%0A%20Possible%3F&In-Reply-To=%3CC9A66266.35A5%25allen.kim%40epicadvertising.com%3E"
       TITLE="[rabbitmq-discuss] Rabbitmq-Shovel Timer-Based Publishing Possible?">allen.kim at epicadvertising.com
       </A><BR>
    <I>Wed Mar 16 16:50:18 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011864.html">[rabbitmq-discuss] Rabbitmq-Shovel Timer-Based Publishing	Possible?
</A></li>
        <LI>Next message: <A HREF="011878.html">[rabbitmq-discuss] Rabbitmq-Shovel Timer-Based Publishing	Possible?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11870">[ date ]</a>
              <a href="thread.html#11870">[ thread ]</a>
              <a href="subject.html#11870">[ subject ]</a>
              <a href="author.html#11870">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Message volume fluctuates from extremely high to very low depending on the
time of day.

We use a relatively large transaction size on the outbound, publishing,
connection to get high enough throughput on a high latency link for the
peak times of day.  However, at the off peak times of day, it can take up
to a few minutes for the shovel to accumulate enough messages to hit the
configured transaction commit size.

Allowing a configurable transaction size plus commit timer adds some
flexibility.  At peak times, the transaction size counter is always hit
first.  At low times, the timer hits first and ensures that  message
delivery does not stall.


Allen


On 11-03-16 11:46 AM, &quot;Matthias Radestock&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt; wrote:

&gt;<i>Allen,
</I>&gt;<i>
</I>&gt;<i>On 15/03/11 15:33, Allen Kim wrote:
</I>&gt;&gt;<i> Timer-based publish(shovel) means publishing on every seconds or minute
</I>&gt;&gt;<i> regardless of number of queue stacked.
</I>&gt;&gt;<i> In our case, if we publish only on based on number of queues, it will
</I>&gt;&gt;<i> publish very busy during day time and slowly at night.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The worst case that I see is it does not shovel when there is no queue
</I>&gt;&gt;<i> increasing.
</I>&gt;&gt;<i> I want queues shovelled every few seconds, guaranteed, so that other
</I>&gt;&gt;<i> cluser receive messages not too late.
</I>&gt;<i>
</I>&gt;<i>The shovel maintains permanent connections and reconnects them on
</I>&gt;<i>failure. Messages get shovelled straight away.
</I>&gt;<i>
</I>&gt;<i>Does that meet your requirements? Perhaps I am misunderstanding your use
</I>&gt;<i>case, but I don't see the benefit of shovelling at regular intervals
</I>&gt;<i>only instead of all the time.
</I>&gt;<i>
</I>&gt;<i>Regards,
</I>&gt;<i>
</I>&gt;<i>Matthias.
</I>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011864.html">[rabbitmq-discuss] Rabbitmq-Shovel Timer-Based Publishing	Possible?
</A></li>
	<LI>Next message: <A HREF="011878.html">[rabbitmq-discuss] Rabbitmq-Shovel Timer-Based Publishing	Possible?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11870">[ date ]</a>
              <a href="thread.html#11870">[ thread ]</a>
              <a href="subject.html#11870">[ subject ]</a>
              <a href="author.html#11870">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
