<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-server init script
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-server%20init%20script&In-Reply-To=%3Cb4b9452b-fc62-453f-9a40-dcc97e33878d%40s18g2000prg.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011894.html">
   <LINK REL="Next"  HREF="011713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-server init script</H1>
    <B>paul</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-server%20init%20script&In-Reply-To=%3Cb4b9452b-fc62-453f-9a40-dcc97e33878d%40s18g2000prg.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq-server init script">paul.theodoropoulos at gmail.com
       </A><BR>
    <I>Thu Mar 17 18:56:17 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011894.html">[rabbitmq-discuss] rabbitmq-server init script
</A></li>
        <LI>Next message: <A HREF="011713.html">[rabbitmq-discuss] MSMQ Integration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11916">[ date ]</a>
              <a href="thread.html#11916">[ thread ]</a>
              <a href="subject.html#11916">[ subject ]</a>
              <a href="author.html#11916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Mar 17, 3:29&#160;am, Alexandru Scvor&#355;ov &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexan... at rabbitmq.com</A>&gt; wrote:
&gt;<i> I'm having trouble reproducing this.
</I>&gt;<i>
</I>&gt;<i> On a fresh Centos install, the RPM does what it's supposed to do (and what
</I>&gt;<i> you say it does). &#160;In /var/log/rabbitmq, there are some log files owned by
</I>&gt;<i> root and some owned by rabbitmq, but the root files are only ever accessed
</I>&gt;<i> by the init script, and that should be fine.
</I>&gt;<i>
</I>&gt;<i> Is this what you're seeing?
</I>&gt;<i>
</I>&gt;<i> &#160; Starting rabbitmq-server: /etc/init.d/rabbitmq-server: line 43:
</I>&gt;<i> &#160; /var/log/rabbitmq/startup_log: Permission denied
</I>&gt;<i> &#160; TIMEOUT - check /var/log//rabbitmq/startup_{log,err}
</I>&gt;<i> &#160; rabbitmq_server.
</I>
i believe that's the error, yeah.


&gt;<i> If so, are you starting the service as a non-root user?
</I>
no, it just starts from the init script run as user root - the only
changes i made to the init script are as described in my previous
message. but after it starts up, the processes are running under
rabbitmq ownership -


[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">root at app06</A> rabbitmq]# ps -ecf|grep rabb
rabbitmq  2545     1 TS   24 Mar14 ?        00:00:00 /usr/local/lib/
erlang/erts-5.8.2/bin/epmd -daemon
rabbitmq  2556     1 TS   21 Mar14 ?        00:02:56 /usr/local/lib/
erlang/erts-5.8.2/bin/beam.smp -W w -K true -A30 -P 1048576 -- -root /
usr/local/lib/erlang -progname erl -- -home /var/lib/rabbitmq -- -
noshell -noinput -sname <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at app06</A> -boot /var/lib/rabbitmq/mnesia/
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at app06-plugins-expand</A>/rabbit -kernel inet_default_listen_options
[{nodelay,true}] -kernel inet_default_connect_options [{nodelay,true}]
-sasl errlog_type error -kernel error_logger {file,&quot;/var/log/rabbitmq/
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at app06.log</A>&quot;} -sasl sasl_error_logger {file,&quot;/var/log/rabbitmq/
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at app06-sasl.log</A>&quot;} -os_mon start_cpu_sup true -os_mon
start_disksup false -os_mon start_memsup false -mnesia dir &quot;/var/lib/
rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at app06</A>&quot; -noshell -noinput
rabbitmq  2625  2556 TS   24 Mar14 ?        00:00:00 inet_gethost 4
rabbitmq  2626  2625 TS   21 Mar14 ?        00:00:00 inet_gethost 4
rabbitmq  2627  2556 TS   21 Mar14 ?        00:00:00 /usr/local/lib/
erlang/lib/os_mon-2.2.5/priv/bin/cpu_sup


without the change in ownership of the logfiles, it starts
successfully (seemingly) but only a couple of procs are left running
(i don't remember which, sorry - i think just the first one listed
above)
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011894.html">[rabbitmq-discuss] rabbitmq-server init script
</A></li>
	<LI>Next message: <A HREF="011713.html">[rabbitmq-discuss] MSMQ Integration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11916">[ date ]</a>
              <a href="thread.html#11916">[ thread ]</a>
              <a href="subject.html#11916">[ subject ]</a>
              <a href="author.html#11916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
