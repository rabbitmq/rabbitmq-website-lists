<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] acquiring channels per connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20acquiring%20channels%20per%20connection&In-Reply-To=%3CAANLkTi%3D4gS2HtLU43wWOJL_U0E1sDeXTjrLmP7c7ad5s%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011866.html">
   <LINK REL="Next"  HREF="011976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] acquiring channels per connection</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20acquiring%20channels%20per%20connection&In-Reply-To=%3CAANLkTi%3D4gS2HtLU43wWOJL_U0E1sDeXTjrLmP7c7ad5s%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] acquiring channels per connection">majek04 at gmail.com
       </A><BR>
    <I>Wed Mar 16 15:58:06 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011866.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
        <LI>Next message: <A HREF="011976.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11867">[ date ]</a>
              <a href="thread.html#11867">[ thread ]</a>
              <a href="subject.html#11867">[ subject ]</a>
              <a href="author.html#11867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 16, 2011 at 15:54, Gavin M. Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at myyearbook.com</A>&gt; wrote:
&gt;<i> On Wednesday, March 16, 2011 at 11:42 AM, Marek Majkowski wrote:
</I>&gt;<i> On Tue, Mar 15, 2011 at 07:11, vorad &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vorad.1100 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &#160;How expensive would be to do
</I>&gt;<i> this (one channel per request) from the rabbitmq perspective and also from
</I>&gt;<i> the Pika's perspective ?
</I>&gt;<i>
</I>&gt;<i> Well, not that expensive if your RabbitMQ is close to the web server.
</I>&gt;<i> Opening channel is a synchronous action - a full roundtrip is required.
</I>&gt;<i>
</I>&gt;<i> To avoid that roundtrip you may hava a pool and reuse open channels.
</I>&gt;<i>
</I>&gt;<i> In addition, you're not buying anything by using more connections&#160;as they'll
</I>&gt;<i> still use the same single process IOLoop.
</I>&gt;<i> For what it's worth, I use Pika and Tornado with one connection and&#160;channel
</I>&gt;<i> per Tornado backend and hold on to the for the life of the backend, across
</I>&gt;<i> multiple RequestHandler invocations.
</I>&gt;<i> If you want to use multiple channels, I recommend having a sound reason for
</I>&gt;<i> it. At the protocol level, it's nothing more than a numeric identifier for
</I>&gt;<i> the frame routing.
</I>
Limiting an error scope is usually a good reason for using channels.

&gt;<i> At the python level it's a set of two class instances
</I>&gt;<i> which need to reside in memory. I can't think of a reason in my web
</I>&gt;<i> applications that I would use more than one channel.
</I>&gt;<i> For example, if you want to listen on multiple queues, just have multiple
</I>&gt;<i> callbacks for channel.basic_consume.
</I>&gt;<i> I guess my main point is using more channels and more connections doesn't
</I>&gt;<i> offer any real value and adds additional overhead since you're bound to the
</I>&gt;<i> same single process for responding to events.
</I>&gt;<i> I would imagine if you could saturate a socket without saturating CPU that
</I>&gt;<i> there could be some value, but offhand I can't imagine that is possible, as
</I>&gt;<i> the OS's use of CPU would be saturated.
</I>&gt;<i> Gavin
</I></PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011866.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
	<LI>Next message: <A HREF="011976.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11867">[ date ]</a>
              <a href="thread.html#11867">[ thread ]</a>
              <a href="subject.html#11867">[ subject ]</a>
              <a href="author.html#11867">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
