<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How can I connect in a cluster using Java library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20can%20I%20connect%20in%20a%20cluster%20using%20Java%0A%20library&In-Reply-To=%3C4D80C7D5.5050701%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011856.html">
   <LINK REL="Next"  HREF="011858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How can I connect in a cluster using Java library</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20can%20I%20connect%20in%20a%20cluster%20using%20Java%0A%20library&In-Reply-To=%3C4D80C7D5.5050701%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] How can I connect in a cluster using Java library">emile at rabbitmq.com
       </A><BR>
    <I>Wed Mar 16 14:23:17 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011856.html">[rabbitmq-discuss] How can I connect in a cluster using Java	library
</A></li>
        <LI>Next message: <A HREF="011858.html">[rabbitmq-discuss] How can I connect in a cluster using Java	library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11857">[ date ]</a>
              <a href="thread.html#11857">[ thread ]</a>
              <a href="subject.html#11857">[ subject ]</a>
              <a href="author.html#11857">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Lucas,

On 16/03/11 13:48, Lucas Souza wrote:

&gt;<i> ConnectionFactory factory = new ConnectionFactory();
</I>&gt;<i> Address[] addresses = {new Address(&quot;localhost&quot;, 12345), new
</I>&gt;<i> Address(&quot;localhost&quot;, 12346)};
</I>&gt;<i> factory.newConnection(addresses);
</I>&gt;<i>
</I>&gt;<i> If I'll do this, how can I know what node of cluster I'm connected?
</I>
It shouldn't matter which node you are connected to (unless you care 
about the locations of queues). Clients see an identical view of the 
world regardless of which broker in the same cluster they connect to.

A channel can query the underlying connection. You can find the address 
of the clustered node that way if necessary.

&gt;<i> If node 1 down, but node 2 still up, how can I reconnect in node 1?
</I>
The factory connection does not offer robust reconnection logic. If you 
want clients to reconnect then take a look at the message patterns library:

<A HREF="http://hg.rabbitmq.com/rabbitmq-java-messagepatterns">http://hg.rabbitmq.com/rabbitmq-java-messagepatterns</A>

This is a higher-level library that offers reconnection logic, which is 
sufficiently flexible for use with clusters.


Regards

Emile

</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011856.html">[rabbitmq-discuss] How can I connect in a cluster using Java	library
</A></li>
	<LI>Next message: <A HREF="011858.html">[rabbitmq-discuss] How can I connect in a cluster using Java	library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11857">[ date ]</a>
              <a href="thread.html#11857">[ thread ]</a>
              <a href="subject.html#11857">[ subject ]</a>
              <a href="author.html#11857">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
