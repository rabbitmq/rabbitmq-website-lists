<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to spawn multiple worker processes (in Ruby) to respond to messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20spawn%20multiple%20worker%20processes%20%28in%0A%20Ruby%29%20to%20respond%20to%20messages&In-Reply-To=%3CAANLkTinuEkiJ6774KWcC15_ALQcp0pDUiYsBvQFqKEZ1%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011947.html">
   <LINK REL="Next"  HREF="011950.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to spawn multiple worker processes (in Ruby) to respond to messages</H1>
    <B>Jakub &#352;&#357;astn&#253;</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20spawn%20multiple%20worker%20processes%20%28in%0A%20Ruby%29%20to%20respond%20to%20messages&In-Reply-To=%3CAANLkTinuEkiJ6774KWcC15_ALQcp0pDUiYsBvQFqKEZ1%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] How to spawn multiple worker processes (in Ruby) to respond to messages">stastny at 101ideas.cz
       </A><BR>
    <I>Mon Mar 21 09:54:50 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011947.html">[rabbitmq-discuss] How to spawn multiple worker processes (in Ruby)	to respond to messages
</A></li>
        <LI>Next message: <A HREF="011950.html">[rabbitmq-discuss] vhostpath
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11953">[ date ]</a>
              <a href="thread.html#11953">[ thread ]</a>
              <a href="subject.html#11953">[ subject ]</a>
              <a href="author.html#11953">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahmed, I think the best is to use Kernel#fork: just let your script load all
the dependencies and do all the setup except the actual connection to AMQP,
then fork how many times you need and then in the fork just run AMQP.start.
Something like:

require &quot;xxx&quot;
# some setup

n.times do
  pid = fork do
    AMQP.start do
      MQ.new.queue ....
    end
  end
end

And probably Process.detach(pid)

Jakub

<A HREF="http://www.flickr.com/photos/jakub-stastny">http://www.flickr.com/photos/jakub-stastny</A>
<A HREF="http://twitter.com/botanicus">http://twitter.com/botanicus</A>



On 21 March 2011 03:15, S Ahmed &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sahmed1020 at gmail.com</A>&gt; wrote:

&gt;<i> I want to have multiple worker processes to respond to messages in a
</I>&gt;<i> particular queue.
</I>&gt;<i>
</I>&gt;<i> Some tasks may take longer to process than others.
</I>&gt;<i>
</I>&gt;<i> In Ruby, what options do I have to spawn 3-4 processes to run at the same
</I>&gt;<i> time?
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110321/a49bb8eb/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110321/a49bb8eb/attachment-0001.htm</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011947.html">[rabbitmq-discuss] How to spawn multiple worker processes (in Ruby)	to respond to messages
</A></li>
	<LI>Next message: <A HREF="011950.html">[rabbitmq-discuss] vhostpath
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11953">[ date ]</a>
              <a href="thread.html#11953">[ thread ]</a>
              <a href="subject.html#11953">[ subject ]</a>
              <a href="author.html#11953">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
