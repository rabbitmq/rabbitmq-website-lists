<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster size limit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20size%20limit&In-Reply-To=%3CAANLkTikBNfcuykCwYdgB_T1ahn_UQGb-htGCM-qT2FJ%2B%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012066.html">
   <LINK REL="Next"  HREF="012070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster size limit</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20size%20limit&In-Reply-To=%3CAANLkTikBNfcuykCwYdgB_T1ahn_UQGb-htGCM-qT2FJ%2B%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Cluster size limit">alexis at rabbitmq.com
       </A><BR>
    <I>Sun Mar 27 20:27:12 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012066.html">[rabbitmq-discuss] Cluster size limit
</A></li>
        <LI>Next message: <A HREF="012070.html">[rabbitmq-discuss] Cluster size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12068">[ date ]</a>
              <a href="thread.html#12068">[ thread ]</a>
              <a href="subject.html#12068">[ subject ]</a>
              <a href="author.html#12068">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Advait

Interesting project!

However - RabbitMQ clustering is not designed as a way to create
pubsub overlays for the wide area.  Its primary goal is scalability of
one broker by adding nodes on the same LAN.  This is for, eg, cases
where the number of subscriptions (or &quot;bindings&quot;) on the broker grows
beyond what one machine can physically cope with.

Now, this does not stop you wiring up 1,000s of RabbitMQ brokers.  But
using RabbitMQ clustering is the wrong way to do that.  Can you tell
us a bit more about the pubsub topology you want to study, please?
That may help us suggest the optimal way to solve your problem..

Also, can you explain why QoS studies require the study of 1,000s of
nodes?  Perhaps you mean 1,000s of clients?

alexis




On Sun, Mar 27, 2011 at 7:11 PM, Advait Alai &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">advaitalai at gmail.com</A>&gt; wrote:
&gt;<i> Thanks for the reply --
</I>&gt;<i> On Sun, Mar 27, 2011 at 9:38 PM, Jerry Kuch &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jerryk at vmware.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 150 is a pretty big sounding cluster... &#160;Out of curiosity, what's
</I>&gt;&gt;<i> motivating you to go so big (if you don't mind saying)?
</I>&gt;<i>
</I>&gt;<i> I am doing a QoS analysis of publish-subscribe overlays using RabbitMQ in
</I>&gt;<i> wide area networks (These are country wide networks, so even a 1000 nodes
</I>&gt;<i> might be insufficient :-)) So stuff like packet delay, loss, out-of-order
</I>&gt;<i> delivery etc.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On that note, because RabbitMQ clustering is based on Erlang distribution,
</I>&gt;&gt;<i> the current practical limit you'll probably run up against is somewhat lower
</I>&gt;&gt;<i> than the 150 you have in mind. &#160;Something more like 32 to 64.
</I>&gt;<i>
</I>&gt;<i> Is there a configuration that would let me scale to &gt;64 nodes, even if it
</I>&gt;<i> would not be practical? And in case Erlang does not scale well, I'll
</I>&gt;<i> probably have to resort to entirely another middleware -- any suggestions
</I>&gt;<i> that would work on a larger number of nodes?
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you can say more about your goals it's likely that someone on the
</I>&gt;&gt;<i> Rabbit team can suggest something helpful.
</I>&gt;<i>
</I>&gt;<i> The analysis I'm carrying out on &gt;100 nodes is actually on a single system.
</I>&gt;<i> These 'nodes' are actually many light weight linux containers (more or less
</I>&gt;<i> virtual machines) connected by a simulated NS3 network topology. But I doubt
</I>&gt;<i> this would be the cause of the clustering problem, as &lt;50 nodes were
</I>&gt;<i> clustering without any difficulty.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mar 26, 2011, at 10:32 PM, &quot;Advait Alai&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">advaitalai at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Hi,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I'm trying to add 150 nodes to a RabbitMQ cluster. After around 50
</I>&gt;&gt;<i> &gt; nodes, the stop-reset-cluster-start iteration starts giving the error:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Stopping node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> ...
</I>&gt;&gt;<i> &gt; ...done.
</I>&gt;&gt;<i> &gt; Resetting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> ...
</I>&gt;&gt;<i> &gt; ...done.
</I>&gt;&gt;<i> &gt; Clustering node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> with [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node117</A>] ...
</I>&gt;&gt;<i> &gt; ...done.
</I>&gt;&gt;<i> &gt; Starting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> ...
</I>&gt;&gt;<i> &gt; Error: {cannot_start_application,rabbit,
</I>&gt;&gt;<i> &gt; &#160; &#160; &#160; &#160; &#160; &#160;{bad_return,
</I>&gt;&gt;<i> &gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{{rabbit,start,[normal,[]]},
</I>&gt;&gt;<i> &gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {'EXIT',{rabbit,failure_during_boot}}}}}
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Note that I am sequentially adding nodes to build a cluster (as an
</I>&gt;&gt;<i> &gt; initialization step) before creating any queues/exchanges or running any
</I>&gt;&gt;<i> &gt; amqp script.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; How do I solve this problem? Is it because RabbitMQ imposes a hard
</I>&gt;&gt;<i> &gt; cluster size limit?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Also, does RabbitMQ scale well to around 1000 nodes?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012066.html">[rabbitmq-discuss] Cluster size limit
</A></li>
	<LI>Next message: <A HREF="012070.html">[rabbitmq-discuss] Cluster size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12068">[ date ]</a>
              <a href="thread.html#12068">[ thread ]</a>
              <a href="subject.html#12068">[ subject ]</a>
              <a href="author.html#12068">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
