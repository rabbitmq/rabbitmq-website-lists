<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: socket error while using rabbitmq and a NAT (Network address translation)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20socket%20error%20while%20using%20rabbitmq%20and%20a%0A%20NAT%20%28Network%20address%20translation%29&In-Reply-To=%3CAANLkTikWcYpc1-ihuKMTzJHOa5vw-hqnqk%3D056%3DkEjvE%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011596.html">
   <LINK REL="Next"  HREF="011584.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: socket error while using rabbitmq and a NAT (Network address translation)</H1>
    <B>mysurf mail</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20socket%20error%20while%20using%20rabbitmq%20and%20a%0A%20NAT%20%28Network%20address%20translation%29&In-Reply-To=%3CAANLkTikWcYpc1-ihuKMTzJHOa5vw-hqnqk%3D056%3DkEjvE%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Fwd: socket error while using rabbitmq and a NAT (Network address translation)">stammailbox at gmail.com
       </A><BR>
    <I>Thu Mar  3 10:43:32 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011596.html">[rabbitmq-discuss] Fwd: socket error while using rabbitmq and a NAT (Network address translation)
</A></li>
        <LI>Next message: <A HREF="011584.html">[rabbitmq-discuss] RabbitMQ latency and message lost issue.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11612">[ date ]</a>
              <a href="thread.html#11612">[ thread ]</a>
              <a href="subject.html#11612">[ subject ]</a>
              <a href="author.html#11612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>SOLVED!!! YEY!!!


I will explain in brief.

Our production servers are all in different LANs and none are connected to
the internet.
So, usually IT dont put DNS ip in the computer settings.
Somehow, some of the server contained DNS IP in their settings.
In their case its an IP address that doesnt lead anywhere cause this is a
closed LAN.
(why is there a DNS address? Probably because we dragged those computers
from different places and connected them to our farm).
We never bothered to deleted their old DNS settings, cause no one connected
outside.
Basically, until now we never encountered a problem with this issue. also
the rabbit 1.7.0. worked wonderfully.

Now, what we did in order to solve is delete the DNS settings
and then only 2.3.1. clients started to work.

(BTW Then we tried to add a real dns ip that we have here and it worked also
)
My wild guess is that the new thing in 2.3.1. (And it is only a guess cause
i didnt look at the source)
is that is takes the host ip string, first looks at the DNS, translate it if
DNS exists and if no
translation exists then tries to use it as an ip string. Now what if the DNS
is pointing to a non existing server?
this is the bug.

That's it.

and Thanks a lot for your time.


On Wed, Mar 2, 2011 at 5:46 PM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 02/03/11 15:19, mysurf mail wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Well, two correction.
</I>&gt;&gt;<i> 1. I mentioned I did the with/without tracer check on our application.
</I>&gt;&gt;<i> not the multicast.
</I>&gt;&gt;<i> 2. the computer which I am running the tests on does not have a NAT. I
</I>&gt;&gt;<i> tried to narrow it down so I found one of the comp that has that problem
</I>&gt;&gt;<i> and does not have a nat.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks for all the diagnostic information. Unfortunately I'm no closer to
</I>&gt;<i> venturing a guess at the root cause.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  now the 2.3.1.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> C:\RMQTestEnv\rabbitmq-java-client-bin-2.3.1&gt;runjava
</I>&gt;&gt;<i> com.rabbitmq.examples.Multi
</I>&gt;&gt;<i> castMain -h 192.168.100.251 -p 1434  -e X1X1X1X1
</I>&gt;&gt;<i> starting consumer #0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> thats it. doesn't seem to work.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can you supply a network capture dump of the AMQP traffic leading up to
</I>&gt;<i> this point? If you can capture traffic on the server as well as the client
</I>&gt;<i> that will give us the best chance of finding the cause. Please do not send
</I>&gt;<i> large binaries to the mailing list, as this will annoy subscribers. Either
</I>&gt;<i> host the capture files somewhere where I can download them or send me a
</I>&gt;<i> private email to make arrangements.
</I>&gt;<i>
</I>&gt;<i> Other things to try would be to run the tracer on the broker instead of on
</I>&gt;<i> the client and see if that makes any difference. If you do manage to capture
</I>&gt;<i> a trace when the error occurs then please send that to the list.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110303/11455bff/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110303/11455bff/attachment.htm</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011596.html">[rabbitmq-discuss] Fwd: socket error while using rabbitmq and a NAT (Network address translation)
</A></li>
	<LI>Next message: <A HREF="011584.html">[rabbitmq-discuss] RabbitMQ latency and message lost issue.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11612">[ date ]</a>
              <a href="thread.html#11612">[ thread ]</a>
              <a href="subject.html#11612">[ subject ]</a>
              <a href="author.html#11612">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
