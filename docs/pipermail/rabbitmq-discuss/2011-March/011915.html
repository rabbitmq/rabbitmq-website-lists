<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Management plugin trashing a server?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20plugin%20trashing%20a%20server%3F&In-Reply-To=%3C4D824F0C.5080509%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011902.html">
   <LINK REL="Next"  HREF="011924.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Management plugin trashing a server?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Management%20plugin%20trashing%20a%20server%3F&In-Reply-To=%3C4D824F0C.5080509%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Management plugin trashing a server?">simon at rabbitmq.com
       </A><BR>
    <I>Thu Mar 17 18:12:28 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011902.html">[rabbitmq-discuss] Management plugin trashing a server?
</A></li>
        <LI>Next message: <A HREF="011924.html">[rabbitmq-discuss] Management plugin trashing a server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11915">[ date ]</a>
              <a href="thread.html#11915">[ thread ]</a>
              <a href="subject.html#11915">[ subject ]</a>
              <a href="author.html#11915">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/03/11 14:31, Ivan Sanchez wrote:
&gt;<i>    Thanks for the answer. Our log had a bunch of:
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 16-Mar-2011::10:09:53 ===
</I>&gt;<i> exception on TCP connection&lt;0.364.0&gt;  from ******************:64318
</I>&gt;<i> {channel0_error,starting,
</I>&gt;<i>                  {amqp_error,access_refused,
</I>&gt;<i>                              &quot;AMQPLAIN login refused: user 'flash' -
</I>&gt;<i> invalid credentials&quot;,
</I>&gt;<i>                              'connection.start_ok'}}
</I>&gt;<i>
</I>&gt;<i>     The user 'flash' is a valid login, and the only place it's used is
</I>&gt;<i> from our own app, where the password is properly set.
</I>&gt;<i>
</I>&gt;<i>     In the logs I can see 4000+ of these in a 5 minutes periods shortly
</I>&gt;<i> after the server was started. They all came from external TCP
</I>&gt;<i> connections (none from our servers). After removing the plugins we
</I>&gt;<i> didn't get any of those errors anymore.
</I>
Hmm. I'm very inclined to think that must be a coincidence.

That log message is not one that can be produced by the management 
plugin - that's a remote host trying and failing to connect over AMQP.

Interestingly it's using the (slightly) oddball AMQPLAIN authentication 
mechanism, which implies it's either the RabbitMQ Erlang client from 
2.2.0 or earlier (or something that uses that, like rabbitmq-shovel), or 
one of the old QPid clients. Does that sound like anything that could be 
on your network?

I would certainly be inclined to find out who owns the hosts in question 
and go and have a word.

Of course, the fact that this was able to make the server hang is not 
great. There are some anti-DOS provisions in recent versions of 
RabbitMQ, but they don't really help when a ton of hosts are all trying 
to connect at once.

Cheers, Simon

-- 
Simon MacMullen
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011902.html">[rabbitmq-discuss] Management plugin trashing a server?
</A></li>
	<LI>Next message: <A HREF="011924.html">[rabbitmq-discuss] Management plugin trashing a server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11915">[ date ]</a>
              <a href="thread.html#11915">[ thread ]</a>
              <a href="subject.html#11915">[ subject ]</a>
              <a href="author.html#11915">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
