<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster size limit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20size%20limit&In-Reply-To=%3CAANLkTingd1xVZmBuBaa1-8Y9LudyQvGdiw83yzvAnHb%3D%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012068.html">
   <LINK REL="Next"  HREF="012071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster size limit</H1>
    <B>Advait Alai</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20size%20limit&In-Reply-To=%3CAANLkTingd1xVZmBuBaa1-8Y9LudyQvGdiw83yzvAnHb%3D%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Cluster size limit">advaitalai at gmail.com
       </A><BR>
    <I>Sun Mar 27 21:33:25 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012068.html">[rabbitmq-discuss] Cluster size limit
</A></li>
        <LI>Next message: <A HREF="012071.html">[rabbitmq-discuss] Cluster size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12070">[ date ]</a>
              <a href="thread.html#12070">[ thread ]</a>
              <a href="subject.html#12070">[ subject ]</a>
              <a href="author.html#12070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> However - RabbitMQ clustering is not designed as a way to create
</I>&gt;<i> pubsub overlays for the wide area.  Its primary goal is scalability of
</I>&gt;<i> one broker by adding nodes on the same LAN.  This is for, eg, cases
</I>&gt;<i> where the number of subscriptions (or &quot;bindings&quot;) on the broker grows
</I>&gt;<i> beyond what one machine can physically cope with.
</I>&gt;<i>
</I>&gt;<i> Now, this does not stop you wiring up 1,000s of RabbitMQ brokers.  But
</I>&gt;<i> using RabbitMQ clustering is the wrong way to do that.  Can you tell
</I>&gt;<i> us a bit more about the pubsub topology you want to study, please?
</I>&gt;<i> That may help us suggest the optimal way to solve your problem..
</I>&gt;<i>
</I>
The topology looks like this: <A HREF="http://imgur.com/8iep0">http://imgur.com/8iep0</A> (taken from
<A HREF="http://ctieware.eng.monash.edu.au/twiki/bin/view/Simulation/LargePacket-switchingNetworkTopologies">http://ctieware.eng.monash.edu.au/twiki/bin/view/Simulation/LargePacket-switchingNetworkTopologies</A>
)

The terminal nodes shown in the topology are either publishers or
subscribers, and I want RabbitMQ to run as a middleware over the entire
network. The network (routers and links) are simulated by NS3, So it is
essentially a set of point to point links, where each link is a separate
network. The terminal nodes are VMs (that would run the amqp/rabbitmq
scripts) which I am attempting to cluster so they can use a common set of
queues and exchanges. So all terminal nodes are in different LANs.

Also, can you explain why QoS studies require the study of 1,000s of
&gt;<i> nodes?  Perhaps you mean 1,000s of clients?
</I>&gt;<i>
</I>
I'm not sure I understood -- I'm trying to provide high fidelity results, so
I thought the testbed should be atleast of the same order of size as the
network on which it needs to be deployed (&gt;50000 nodes). There are a few
strict IEEE standards regarding this network that specify the minimum QoS
guarantees required.

Is there an easier way to do this?

Thanks

On Sun, Mar 27, 2011 at 7:11 PM, Advait Alai &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">advaitalai at gmail.com</A>&gt; wrote:
&gt;<i> &gt; Thanks for the reply --
</I>&gt;<i> &gt; On Sun, Mar 27, 2011 at 9:38 PM, Jerry Kuch &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jerryk at vmware.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 150 is a pretty big sounding cluster...  Out of curiosity, what's
</I>&gt;<i> &gt;&gt; motivating you to go so big (if you don't mind saying)?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am doing a QoS analysis of publish-subscribe overlays using RabbitMQ in
</I>&gt;<i> &gt; wide area networks (These are country wide networks, so even a 1000 nodes
</I>&gt;<i> &gt; might be insufficient :-)) So stuff like packet delay, loss, out-of-order
</I>&gt;<i> &gt; delivery etc.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On that note, because RabbitMQ clustering is based on Erlang
</I>&gt;<i> distribution,
</I>&gt;<i> &gt;&gt; the current practical limit you'll probably run up against is somewhat
</I>&gt;<i> lower
</I>&gt;<i> &gt;&gt; than the 150 you have in mind.  Something more like 32 to 64.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there a configuration that would let me scale to &gt;64 nodes, even if it
</I>&gt;<i> &gt; would not be practical? And in case Erlang does not scale well, I'll
</I>&gt;<i> &gt; probably have to resort to entirely another middleware -- any suggestions
</I>&gt;<i> &gt; that would work on a larger number of nodes?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; If you can say more about your goals it's likely that someone on the
</I>&gt;<i> &gt;&gt; Rabbit team can suggest something helpful.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The analysis I'm carrying out on &gt;100 nodes is actually on a single
</I>&gt;<i> system.
</I>&gt;<i> &gt; These 'nodes' are actually many light weight linux containers (more or
</I>&gt;<i> less
</I>&gt;<i> &gt; virtual machines) connected by a simulated NS3 network topology. But I
</I>&gt;<i> doubt
</I>&gt;<i> &gt; this would be the cause of the clustering problem, as &lt;50 nodes were
</I>&gt;<i> &gt; clustering without any difficulty.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Mar 26, 2011, at 10:32 PM, &quot;Advait Alai&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">advaitalai at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; Hi,
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; I'm trying to add 150 nodes to a RabbitMQ cluster. After around 50
</I>&gt;<i> &gt;&gt; &gt; nodes, the stop-reset-cluster-start iteration starts giving the error:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Stopping node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> ...
</I>&gt;<i> &gt;&gt; &gt; ...done.
</I>&gt;<i> &gt;&gt; &gt; Resetting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> ...
</I>&gt;<i> &gt;&gt; &gt; ...done.
</I>&gt;<i> &gt;&gt; &gt; Clustering node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> with [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node117</A>] ...
</I>&gt;<i> &gt;&gt; &gt; ...done.
</I>&gt;<i> &gt;&gt; &gt; Starting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at node130</A> ...
</I>&gt;<i> &gt;&gt; &gt; Error: {cannot_start_application,rabbit,
</I>&gt;<i> &gt;&gt; &gt;            {bad_return,
</I>&gt;<i> &gt;&gt; &gt;                {{rabbit,start,[normal,[]]},
</I>&gt;<i> &gt;&gt; &gt;                 {'EXIT',{rabbit,failure_during_boot}}}}}
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Note that I am sequentially adding nodes to build a cluster (as an
</I>&gt;<i> &gt;&gt; &gt; initialization step) before creating any queues/exchanges or running
</I>&gt;<i> any
</I>&gt;<i> &gt;&gt; &gt; amqp script.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; How do I solve this problem? Is it because RabbitMQ imposes a hard
</I>&gt;<i> &gt;&gt; &gt; cluster size limit?
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Also, does RabbitMQ scale well to around 1000 nodes?
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Thanks
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110328/f50b9146/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110328/f50b9146/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012068.html">[rabbitmq-discuss] Cluster size limit
</A></li>
	<LI>Next message: <A HREF="012071.html">[rabbitmq-discuss] Cluster size limit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12070">[ date ]</a>
              <a href="thread.html#12070">[ thread ]</a>
              <a href="subject.html#12070">[ subject ]</a>
              <a href="author.html#12070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
