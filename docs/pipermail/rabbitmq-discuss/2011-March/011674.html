<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Error during queue declare
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Error%20during%20queue%20declare&In-Reply-To=%3CAANLkTi%3D2_hNggKkHmuMVwTJOSNJ99qD9ed7YS9y2zAjm%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011667.html">
   <LINK REL="Next"  HREF="011676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Error during queue declare</H1>
    <B>Sylvain Brocard</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Error%20during%20queue%20declare&In-Reply-To=%3CAANLkTi%3D2_hNggKkHmuMVwTJOSNJ99qD9ed7YS9y2zAjm%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Error during queue declare">sbrocard.ext at miyowa.com
       </A><BR>
    <I>Mon Mar  7 09:34:00 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011667.html">[rabbitmq-discuss] Question about new pika usage
</A></li>
        <LI>Next message: <A HREF="011676.html">[rabbitmq-discuss] Error during queue declare
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11674">[ date ]</a>
              <a href="thread.html#11674">[ thread ]</a>
              <a href="subject.html#11674">[ subject ]</a>
              <a href="author.html#11674">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I was playing around with RabbitMQ in cluster (3 nodes) and I got this error
below. I'm using the latest version (2.3.1). This error seems to have killed
my client connection to the node. When I got this error, I was trying to
test my client when one node is stopped. This seems to happen when i was
trying to declare a queue (non durable, not exclusive, not auto-delete). The
only way I've found to fix my issue was to restart the nodes one by one. Any
idea ?

=ERROR REPORT==== 4-Mar-2011::14:55:55 ===
** Generic server &lt;0.7238.90&gt; terminating
** Last message in was {init,false}
** When Server state ==
{q,{amqqueue,{resource,&lt;&lt;&quot;/&quot;&gt;&gt;,queue,&lt;&lt;&quot;fail.over&quot;&gt;&gt;},
                                     false,false,none,[],&lt;0.7238.90&gt;},
                           none,false,rabbit_variable_queue,undefined,
                           {[],[]},
                           {[],[]},
                           undefined,undefined,undefined,undefined,
                           {state,none,undefined},
                           {dict,0,16,16,8,80,48,
                                 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]},

{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                   [],[]}}},
                           undefined,undefined}
** Reason for termination ==
** {bad_return_value,
       {error,
           {badarg,
               [{erlang,is_process_alive,[&lt;14486.17603.0&gt;]},
                {rabbit_amqqueue,'-internal_declare/2-fun-3-',2},
                {rabbit_misc,'-execute_mnesia_tx_with_tail/1-fun-0-',1},
                {mnesia_tm,apply_fun,3},
                {mnesia_tm,execute_transaction,5},
                {worker_pool_worker,handle_call,3},
                {gen_server2,handle_msg,2},
                {proc_lib,wake_up,3}]}}}

=ERROR REPORT==== 4-Mar-2011::14:55:55 ===
** Generic server &lt;0.7237.90&gt; terminating
** Last message in was {'$gen_cast',
                           {method,
                               {'queue.declare',0,&lt;&lt;&quot;fail.over&quot;&gt;&gt;,false,
                                   false,false,false,false,[]},
                               none}}
** When Server state == {ch,running,1,&lt;0.7234.90&gt;,&lt;0.7236.90&gt;,undefined,
                            #Fun&lt;rabbit_channel_sup.0.123274458&gt;,none,
                            {sets,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]}}},
                            1,
                            {[],[]},
                            {[],[]},
                            {user,&lt;&lt;&quot;guest&quot;&gt;&gt;,true,
                                rabbit_auth_backend_internal,
                                {internal_user,&lt;&lt;&quot;guest&quot;&gt;&gt;,

 &lt;&lt;1,91,202,31,107,169,107,11,120,174,233,
                                      122,50,219,120,164,33,32,240,166&gt;&gt;,
                                    true}},
                            &lt;&lt;&quot;/&quot;&gt;&gt;,&lt;&lt;&gt;&gt;,
                            {dict,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]}}},
                            {dict,0,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                 []},
                                {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]}}},
                            &lt;0.7232.90&gt;,
                            {state,none,undefined},
                            false,1,
                            {0,nil},
                            []}
** Reason for termination ==
** {{{bad_return_value,
         {error,
             {badarg,
                 [{erlang,is_process_alive,[&lt;14486.17603.0&gt;]},
                  {rabbit_amqqueue,'-internal_declare/2-fun-3-',2},
                  {rabbit_misc,'-execute_mnesia_tx_with_tail/1-fun-0-',1},
                  {mnesia_tm,apply_fun,3},
                  {mnesia_tm,execute_transaction,5},
                  {worker_pool_worker,handle_call,3},
                  {gen_server2,handle_msg,2},
                  {proc_lib,wake_up,3}]}}},
     {gen_server2,call,[&lt;0.7238.90&gt;,{init,false}]}},
    [{gen_server2,call,2},
     {rabbit_amqqueue,declare,5},
     {rabbit_channel,handle_method,3},
     {rabbit_channel,handle_cast,2},
     {gen_server2,handle_msg,2},
     {proc_lib,init_p,5}]}

=ERROR REPORT==== 4-Mar-2011::14:55:55 ===
connection &lt;0.7234.90&gt; (running), channel 1 - error:
{{{bad_return_value,
      {error,
          {badarg,
              [{erlang,is_process_alive,[&lt;14486.17603.0&gt;]},
               {rabbit_amqqueue,'-internal_declare/2-fun-3-',2},
               {rabbit_misc,'-execute_mnesia_tx_with_tail/1-fun-0-',1},
               {mnesia_tm,apply_fun,3},
               {mnesia_tm,execute_transaction,5},
               {worker_pool_worker,handle_call,3},
               {gen_server2,handle_msg,2},
               {proc_lib,wake_up,3}]}}},
  {gen_server2,call,[&lt;0.7238.90&gt;,{init,false}]}},
 [{gen_server2,call,2},
  {rabbit_amqqueue,declare,5},
  {rabbit_channel,handle_method,3},
  {rabbit_channel,handle_cast,2},
  {gen_server2,handle_msg,2},
  {proc_lib,init_p,5}]}

=WARNING REPORT==== 4-Mar-2011::14:55:55 ===
Non-AMQP exit reason '{{{bad_return_value,
                         {error,
                          {badarg,
                           [{erlang,is_process_alive,[&lt;14486.17603.0&gt;]},

 {rabbit_amqqueue,'-internal_declare/2-fun-3-',2},
                            {rabbit_misc,
                             '-execute_mnesia_tx_with_tail/1-fun-0-',1},
                            {mnesia_tm,apply_fun,3},
                            {mnesia_tm,execute_transaction,5},
                            {worker_pool_worker,handle_call,3},
                            {gen_server2,handle_msg,2},
                            {proc_lib,wake_up,3}]}}},
                        {gen_server2,call,[&lt;0.7238.90&gt;,{init,false}]}},
                       [{gen_server2,call,2},
                        {rabbit_amqqueue,declare,5},
                        {rabbit_channel,handle_method,3},
                        {rabbit_channel,handle_cast,2},
                        {gen_server2,handle_msg,2},
                        {proc_lib,init_p,5}]}'


Thanks for reading me !

Sylvain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110307/0d1284e3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110307/0d1284e3/attachment.htm</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011667.html">[rabbitmq-discuss] Question about new pika usage
</A></li>
	<LI>Next message: <A HREF="011676.html">[rabbitmq-discuss] Error during queue declare
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11674">[ date ]</a>
              <a href="thread.html#11674">[ thread ]</a>
              <a href="subject.html#11674">[ subject ]</a>
              <a href="author.html#11674">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
