<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Spying on &quot;mandatory&quot; messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Spying%20on%20%22mandatory%22%20messages&In-Reply-To=%3CAANLkTi%3DjDe6rbg9AYLzXEkaWk186SeLC_uH1ovoK1ojq%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012007.html">
   <LINK REL="Next"  HREF="012005.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Spying on &quot;mandatory&quot; messages</H1>
    <B>Charly Hamy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Spying%20on%20%22mandatory%22%20messages&In-Reply-To=%3CAANLkTi%3DjDe6rbg9AYLzXEkaWk186SeLC_uH1ovoK1ojq%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Spying on &quot;mandatory&quot; messages">charly.hamy at gmail.com
       </A><BR>
    <I>Thu Mar 24 14:35:35 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012007.html">[rabbitmq-discuss] Scaling Rabbit
</A></li>
        <LI>Next message: <A HREF="012005.html">[rabbitmq-discuss] Spying on &quot;mandatory&quot; messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12004">[ date ]</a>
              <a href="thread.html#12004">[ thread ]</a>
              <a href="subject.html#12004">[ subject ]</a>
              <a href="author.html#12004">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm currently using RabbitMQ to &quot;build&quot; a software platform allowing various
components to plug and communicate to each-other on two modes :
request/response (&quot;point to point&quot;) and pub/sub.

For the req/res scenario, I'm using the mandatory flag on my messages, so
that sending a request message to a disconnected component (no corresponding
queue declared on the broker) returns an error to the sender. This works as
expected.

But now, I would want to plug new components to spy on those flows of
requests and responses, without interfering with the ongoing
communications... which is not by default compatible with my use of the
mandatory flag : when a &quot;spy&quot; component is monitorng request/response
messages, those messages end-up in its queue, then even if the actual target
component for those messages is not present on the broker (no queue), no
error is returned to the sender.

What I'm looking for is a way to have &quot;mandatory&quot; messages delivered to a
queue bound to an exchange with a special kind of binding, so that the
delivery to the queue doesn't count as one, from the exchange point of view,
and so that a &quot;no delivery&quot; error may still be returned to the sender, if no
queue with a matching standard binding to that exchange stores the message.

I've started to dive into RabbitMQ's source code, but before spending too
much energy into this I wanted to know if there was any simpler solution to
my problem - some secret binding parameter, a plug-in... - and if that idea
seemed reasonable to the RabbitMQ gurus :)

Thanks for your help!

Charly
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110324/73ee8cde/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110324/73ee8cde/attachment.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012007.html">[rabbitmq-discuss] Scaling Rabbit
</A></li>
	<LI>Next message: <A HREF="012005.html">[rabbitmq-discuss] Spying on &quot;mandatory&quot; messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12004">[ date ]</a>
              <a href="thread.html#12004">[ thread ]</a>
              <a href="subject.html#12004">[ subject ]</a>
              <a href="author.html#12004">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
