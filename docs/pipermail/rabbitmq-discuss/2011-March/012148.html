<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] STOMP Plugin 2.4.0 Issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20Plugin%202.4.0%20Issue&In-Reply-To=%3CE88C70A4-ED99-4747-8D5B-7335C79E9A8D%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012132.html">
   <LINK REL="Next"  HREF="012149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] STOMP Plugin 2.4.0 Issue</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20Plugin%202.4.0%20Issue&In-Reply-To=%3CE88C70A4-ED99-4747-8D5B-7335C79E9A8D%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] STOMP Plugin 2.4.0 Issue">steve at rabbitmq.com
       </A><BR>
    <I>Wed Mar 30 16:41:31 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012132.html">[rabbitmq-discuss] STOMP Plugin 2.4.0 Issue
</A></li>
        <LI>Next message: <A HREF="012149.html">[rabbitmq-discuss] STOMP Plugin 2.4.0 Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12148">[ date ]</a>
              <a href="thread.html#12148">[ thread ]</a>
              <a href="subject.html#12148">[ subject ]</a>
              <a href="author.html#12148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alexander,

I'm able to run happily on the (in-house) 'best-so-far' version of rabbitmq-stomp:
---------------------------------------------------8&lt;----cut-here-----------
15:29:30 :&gt; telnet localhost 61613
Trying ::1...
Connected to localhost.
Escape character is '^]'.
CONNECT
login:guest
passcode:guest

^@
CONNECTED
session:session-A/W+DDK95d4+ZZehxZHkZQ==
heartbeat:0,0
version:1.0

DISCONNECT

^@
Connection closed by foreign host.

15:30:31 :&gt;
---------------------------------------------------8&lt;----cut-here-----------
but this is, I admit, a development version, so the next thing I tried is to download my own fresh RabbitMQ 2.4.0....

(I'm on Mac, so I used macports to install rabbitmq-server (@2.4.0) and put amqp-client-2.4.0.ez and rabbit-somp-2.4.0.ez in the plugins directory, ran 
'sudo rabbitmq-server' and repeated the above experiment.)

And it worked identically for me.  So, this is probably a set-up issue for you.  Can you provide the installation steps you went through, please? Oh, and the versions of Erlang and so on are very useful, too, thanks.

Here is my 'rabbitmqctl status' output for comparison:

[{pid,73212},
 {running_applications,[{amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.4.0&quot;},
                        {rabbit_stomp,&quot;Embedded Rabbit Stomp Adapter&quot;,&quot;2.4.0&quot;},
                        {rabbit,&quot;RabbitMQ&quot;,&quot;2.4.0&quot;},
                        {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.16&quot;},
                        {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.5&quot;},
                        {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.9.2&quot;},
                        {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.2&quot;},
                        {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.2&quot;}]},
 {nodes,[{disc,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at spowell-desktop</A>']}]},
 {running_nodes,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at spowell-desktop</A>']}]

I appear to be running a more modern version of Erlang and its friends here, but the next step would be for me to try this on an Ubuntu client (which I can probably do, but it will take me a little time to set one up.)

Please just come back here if you need me to try that.

Steve Powell

On 30 Mar 2011, at 09:44, Alexander Goldstone wrote:

&gt;<i> Are there any known issues with the STOMP plugin for RabbitMQ 2.4.0 ?
</I>&gt;<i> 
</I>&gt;<i> I am used to connecting to the STOMP plugin via Telnet and issuing CONNECT, SEND and SUBSCRIBE frames by hand. For previous versions of RabbitMQ this has all worked fine. Now, for a clean install of RabbitMQ 2.4.0 on Ubuntu 10.10, I am not even able to successfully CONNECT using something like:
</I>&gt;<i> 
</I>&gt;<i> 		CONNECT
</I>&gt;<i> 		login:guest
</I>&gt;<i> 		passcode:guest
</I>&gt;<i> 
</I>&gt;<i> 		^@
</I>&gt;<i> 
</I>&gt;<i> I send a line-break after the passcode and then send another line-break but the server closes the connection before I am able to send the NULL frame terminator. The server does not output any error messages.
</I>&gt;<i> 
</I>&gt;<i> Similarly, if I follow the &quot;Testing the adapter&quot; example at <A HREF="http://www.rabbitmq.com/stomp.html">http://www.rabbitmq.com/stomp.html</A> then the server closes the connection after the second time I send &quot;dummy&quot; but it does not output an error message.
</I>&gt;<i> 
</I>&gt;<i> The RabbitMQ Management Plugin shows the STOMP plugin is listening on port 61613.
</I>&gt;<i> 
</I>&gt;<i> The Erlang version provided as standard for Ubuntu 10.10 seems to be R13B03 and th output from &quot;rabbitmqctl status&quot; looks like this:
</I>&gt;<i> 
</I>&gt;<i> [{pid,28410},
</I>&gt;<i> {running_applications,
</I>&gt;<i>     [{rabbit_management,&quot;RabbitMQ Management Console&quot;,&quot;2.4.0&quot;},
</I>&gt;<i>      {webmachine,&quot;webmachine&quot;,&quot;1.7.0&quot;},
</I>&gt;<i>      {rabbit_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.4.0&quot;},
</I>&gt;<i>      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.4.0&quot;},
</I>&gt;<i>      {rabbit_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.4.0&quot;},
</I>&gt;<i>      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3&quot;},
</I>&gt;<i>      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.2&quot;},
</I>&gt;<i>      {rabbit_stomp,&quot;Embedded Rabbit Stomp Adapter&quot;,&quot;2.4.0&quot;},
</I>&gt;<i>      {rabbit,&quot;RabbitMQ&quot;,&quot;2.4.0&quot;},
</I>&gt;<i>      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.12&quot;},
</I>&gt;<i>      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.4&quot;},
</I>&gt;<i>      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.8&quot;},
</I>&gt;<i>      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.16.4&quot;},
</I>&gt;<i>      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.13.4&quot;}]},
</I>&gt;<i> {nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at tatooine</A>]}]},
</I>&gt;<i> {running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at tatooine</A>]}]
</I>&gt;<i> ...done.
</I>&gt;<i> 
</I>&gt;<i> I'm assuming this isn't a problem for everyone using the STOMP plugin otherwise someone would have mentioned it by now so if I can provide any further information to help work out what is wrong on my setup then please let me know.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Alex
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012132.html">[rabbitmq-discuss] STOMP Plugin 2.4.0 Issue
</A></li>
	<LI>Next message: <A HREF="012149.html">[rabbitmq-discuss] STOMP Plugin 2.4.0 Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12148">[ date ]</a>
              <a href="thread.html#12148">[ thread ]</a>
              <a href="subject.html#12148">[ subject ]</a>
              <a href="author.html#12148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
