<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: Problem with plugin development guide	example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20Problem%20with%20plugin%20development%20guide%0A%09example&In-Reply-To=%3CAANLkTimDB0SkjUo9dRiSbwJwUBLLT%2BQ_OCsjrb%3D%3D_n4-%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011938.html">
   <LINK REL="Next"  HREF="011941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: Problem with plugin development guide	example</H1>
    <B>Jim Irrer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20Problem%20with%20plugin%20development%20guide%0A%09example&In-Reply-To=%3CAANLkTimDB0SkjUo9dRiSbwJwUBLLT%2BQ_OCsjrb%3D%3D_n4-%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Fwd: Problem with plugin development guide	example">irrer at umich.edu
       </A><BR>
    <I>Fri Mar 18 19:50:36 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011938.html">[rabbitmq-discuss] Fwd: Problem with plugin development guide	example
</A></li>
        <LI>Next message: <A HREF="011941.html">[rabbitmq-discuss] Fwd: Problem with plugin development guide example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11939">[ date ]</a>
              <a href="thread.html#11939">[ thread ]</a>
              <a href="subject.html#11939">[ subject ]</a>
              <a href="author.html#11939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jerry -

Yes, that would be great.  All I'm looking for is a hello world example of
a plugin to get me started.

Thanks,

- Jim

Jim Irrer     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>       (734) 647-4409
University of Michigan Hospital Radiation Oncology
519 W. William St.             Ann Arbor, MI 48103


On Fri, Mar 18, 2011 at 1:32 PM, Jerry Kuch &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jerryk at vmware.com</A>&gt; wrote:

&gt;<i> Jim:
</I>&gt;<i>
</I>&gt;<i> I also have a vague recollection that a month or two ago I found a couple
</I>&gt;<i> out of date spots in the plugin development guide that might cause you
</I>&gt;<i> grief.  I did put together a basic plugin for other reasons, that I could
</I>&gt;<i> conceivably husk out and share with you as a starting point you might find
</I>&gt;<i> convenient?
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Jerry
</I>&gt;<i> ________________________________________
</I>&gt;<i> From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Jim Irrer [
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>]
</I>&gt;<i> Sent: Friday, March 18, 2011 9:22 AM
</I>&gt;<i> To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Cc: Jim Irrer
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] Fwd: Problem with plugin development guide
</I>&gt;<i>      example
</I>&gt;<i>
</I>&gt;<i> That was helpful - I got farther - but not there yet.
</I>&gt;<i>
</I>&gt;<i> I did the checkout of the umbrella with the command above:
</I>&gt;<i>
</I>&gt;<i> hg clone <A HREF="http://hg.rabbitmq.com/rabbitmq-public-umbrella">http://hg.rabbitmq.com/rabbitmq-public-umbrella</A> -r bug23568
</I>&gt;<i>
</I>&gt;<i> but I did the 'make co' without any special parameters, so I assumed
</I>&gt;<i> that it did hg commands with respect to the bug23568 branch.
</I>&gt;<i>
</I>&gt;<i> I built the metronome project as outlined on the Rabbit site and added
</I>&gt;<i> the rabbit_metronome-0.0.0.ez and amqp_client.ez files to the
</I>&gt;<i> rabbitmq-public-umbrella/rabbitmq-server/plugins directory, but when I
</I>&gt;<i> start it up I get:
</I>&gt;<i>
</I>&gt;<i> linus:make run
</I>&gt;<i> RABBITMQ_NODE_IP_ADDRESS=&quot;&quot; RABBITMQ_NODE_PORT=&quot;5679&quot;
</I>&gt;<i> RABBITMQ_LOG_BASE=&quot;/tmp&quot; RABBITMQ_MNESIA_DIR=&quot;/tmp/rabbitmq-bunny-mnesia&quot;
</I>&gt;<i> RABBITMQ_PLUGINS_EXPAND_DIR=&quot;/tmp/rabbitmq-bunny-plugins-scratch&quot; \
</I>&gt;<i>                RABBITMQ_ALLOW_INPUT=true \
</I>&gt;<i>                RABBITMQ_SERVER_START_ARGS=&quot;&quot; \
</I>&gt;<i>                ./scripts/rabbitmq-server
</I>&gt;<i> Activating RabbitMQ plugins ...
</I>&gt;<i> *WARNING* Undefined function amqp_connection:start_direct/0
</I>&gt;<i> *WARNING* Undefined function gb_trees:map/2
</I>&gt;<i> *WARNING* Undefined function os:timestamp/0
</I>&gt;<i> *WARNING* Undefined function random:seed/1
</I>&gt;<i> *WARNING* Undefined function ssl:ssl_accept/3
</I>&gt;<i> 2 plugins activated:
</I>&gt;<i> * amqp_client-0.0.0
</I>&gt;<i> * rabbit_metronome-0.0.0
</I>&gt;<i>
</I>&gt;<i> Erlang (BEAM) emulator version 5.6.5 [source] [64-bit] [smp:2]
</I>&gt;<i> [async-threads:30] [hipe] [kernel-poll:true]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> +---+   +---+
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   +---+   +-------+
</I>&gt;<i> |                   |
</I>&gt;<i> | RabbitMQ  +---+   |
</I>&gt;<i> |           |   |   |
</I>&gt;<i> | v%%VSN%%  +---+   |
</I>&gt;<i> |                   |
</I>&gt;<i> +-------------------+
</I>&gt;<i> AMQP 0-9-1 / 0-9 / 0-8
</I>&gt;<i> Copyright (C) 2007-2011 VMware, Inc.
</I>&gt;<i> Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>
</I>&gt;<i>
</I>&gt;<i> node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bunny at linus</A>
</I>&gt;<i> app descriptor :
</I>&gt;<i> /devel/home/irrer/tmp/erl/r2/rabbitmq-public-umbrella/rabbitmq-server/scripts/../ebin/rabbit.app
</I>&gt;<i> home dir       : /home/irrer
</I>&gt;<i> config file(s) : (none)
</I>&gt;<i> cookie hash    : JG6HnrDO2nMIVTU2s7iwoA==
</I>&gt;<i> log            : /tmp/bunny.log
</I>&gt;<i> sasl log       : /tmp/bunny-sasl.log
</I>&gt;<i> database dir   : /tmp/rabbitmq-bunny-mnesia
</I>&gt;<i> erlang version : 5.6.5
</I>&gt;<i>
</I>&gt;<i> starting file handle cache server
</I>&gt;<i> ...done
</I>&gt;<i> starting worker pool
</I>&gt;<i>  ...done
</I>&gt;<i> starting database
</I>&gt;<i> ...done
</I>&gt;<i> starting codec correctness check
</I>&gt;<i>  ...done
</I>&gt;<i> -- external infrastructure ready
</I>&gt;<i> starting statistics event manager
</I>&gt;<i> ...done
</I>&gt;<i> starting logging server
</I>&gt;<i> ...done
</I>&gt;<i> starting plugin registry
</I>&gt;<i>  ...done
</I>&gt;<i> starting auth mechanism amqplain
</I>&gt;<i>  ...done
</I>&gt;<i> starting auth mechanism cr-demo
</I>&gt;<i> ...done
</I>&gt;<i> starting auth mechanism plain
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type direct
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type fanout
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type headers
</I>&gt;<i>  ...done
</I>&gt;<i> starting exchange type topic
</I>&gt;<i>  ...done
</I>&gt;<i> -- kernel ready
</I>&gt;<i> starting node monitor
</I>&gt;<i> ...done
</I>&gt;<i> starting cluster delegate
</I>&gt;<i> ...done
</I>&gt;<i> starting guid generator
</I>&gt;<i> ...done
</I>&gt;<i> starting alarm handler
</I>&gt;<i>  ...done
</I>&gt;<i> starting memory monitor
</I>&gt;<i> ...done
</I>&gt;<i> -- core initialized
</I>&gt;<i> starting empty DB check
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange recovery
</I>&gt;<i>  ...done
</I>&gt;<i> starting queue supervisor and queue recovery
</I>&gt;<i>  ...done
</I>&gt;<i> -- message delivery logic ready
</I>&gt;<i> starting error log relay
</I>&gt;<i>  ...done
</I>&gt;<i> starting networking
</I>&gt;<i> ...done
</I>&gt;<i> starting notify cluster nodes
</I>&gt;<i> ...done
</I>&gt;<i> starting direct_client
</I>&gt;<i>  ...done
</I>&gt;<i>
</I>&gt;<i> broker running
</I>&gt;<i> Eshell V5.6.5  (abort with ^G)
</I>&gt;<i> (<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bunny at linus</A>)1&gt; Erlang has closed
</I>&gt;<i>                                 {&quot;Kernel pid
</I>&gt;<i> terminated&quot;,application_controller,&quot;{application_start_failure,rabbit_metronome,{shutdown,{rabbit_metronome,start,[normal,[]]}}}&quot;}
</I>&gt;<i>
</I>&gt;<i> Crash dump was written to: erl_crash.dump
</I>&gt;<i> Kernel pid terminated (application_controller)
</I>&gt;<i> ({application_start_failure,rabbit_metronome,{shutdown,{rabbit_metronome,start,[normal,[]]}}})
</I>&gt;<i>
</I>&gt;<i> And as advertised it creates a big honkin' dump file.
</I>&gt;<i>
</I>&gt;<i> I also had to create symbolic links so that the code would build.  In my
</I>&gt;<i> rabbitmq-public-umbrella/rabbit_metronome directory I created:
</I>&gt;<i>
</I>&gt;<i> amqp_client -&gt; ../rabbitmq-erlang-client/dist/amqp_client
</I>&gt;<i> rabbit_common -&gt; ../rabbitmq-erlang-client/dist/rabbit_common
</I>&gt;<i>
</I>&gt;<i> The server works fine if run without adding plugins, but when I add them
</I>&gt;<i> it bombs, so I know the plugins are the problem (Right?).
</I>&gt;<i>
</I>&gt;<i> I'm new to Erlang (interesting language), so all I did was cut and paste
</I>&gt;<i> the example Erlang code, so if that code is out of date then it would be a
</I>&gt;<i> problem.
</I>&gt;<i>
</I>&gt;<i> Also: I changed the port to 5679 so it would not interfere with the
</I>&gt;<i> official
</I>&gt;<i> installed RabbitMQ server on the same machine, and I set RABBITMQ_NODENAME
</I>&gt;<i> to 'bunny'.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> - Jim
</I>&gt;<i>
</I>&gt;<i> Jim Irrer     <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">irrer at umich.edu</A>&gt;       (734) 647-4409
</I>&gt;<i> &lt;tel:%28734%29%20647-4409&gt;
</I>&gt;<i> University of Michigan Hospital Radiation Oncology
</I>&gt;<i> 519 W. William St.             Ann Arbor, MI 48103
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, Mar 17, 2011 at 8:27 AM, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i> On Tue, Mar 15, 2011 at 07:00:28PM -0400, Jim Irrer wrote:
</I>&gt;<i> &gt; If I checkout the latest server code, will I get the bug23274 fix?
</I>&gt;<i>
</I>&gt;<i> Nope. bug23274 has been abandoned. bug23568 replaces it, but is yet to
</I>&gt;<i> go through QA. None of the documentation regarding writing plugins has
</I>&gt;<i> been updated.
</I>&gt;<i>
</I>&gt;<i> &gt; If not, what is the Mercurial command to get it?
</I>&gt;<i>
</I>&gt;<i> hg clone <A HREF="http://hg.rabbitmq.com/rabbitmq-public-umbrella">http://hg.rabbitmq.com/rabbitmq-public-umbrella</A> -r bug23568
</I>&gt;<i>
</I>&gt;<i> But you'll need to make sure all the plugins are also on branch bug23568
</I>&gt;<i> for them to work with the new build system.
</I>&gt;<i>
</I>&gt;<i> If you're writing plugins from scratch, be sure to read the
</I>&gt;<i> rabbitmq-public-umbrella/README.makefiles file, which has a helpful
</I>&gt;<i> section on &quot;Creating a new package&quot;.
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110318/c2951dea/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110318/c2951dea/attachment.htm</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011938.html">[rabbitmq-discuss] Fwd: Problem with plugin development guide	example
</A></li>
	<LI>Next message: <A HREF="011941.html">[rabbitmq-discuss] Fwd: Problem with plugin development guide example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11939">[ date ]</a>
              <a href="thread.html#11939">[ thread ]</a>
              <a href="subject.html#11939">[ subject ]</a>
              <a href="author.html#11939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
