<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Performance and scalability measurement with my publisher-subscriber clients testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20and%20scalability%20measurement%20with%0A%20my%20publisher-subscriber%20clients%20testing&In-Reply-To=%3CAANLkTikv0PsureszEvNgCv%2BOVYgz559VmFzHcLDEc78c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011707.html">
   <LINK REL="Next"  HREF="011853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Performance and scalability measurement with my publisher-subscriber clients testing</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20and%20scalability%20measurement%20with%0A%20my%20publisher-subscriber%20clients%20testing&In-Reply-To=%3CAANLkTikv0PsureszEvNgCv%2BOVYgz559VmFzHcLDEc78c%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Performance and scalability measurement with my publisher-subscriber clients testing">majek04 at gmail.com
       </A><BR>
    <I>Wed Mar 16 11:56:30 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011707.html">[rabbitmq-discuss] Performance and scalability measurement with my publisher-subscriber clients testing
</A></li>
        <LI>Next message: <A HREF="011853.html">[rabbitmq-discuss] Performance and scalability measurement with my publisher-subscriber clients testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11852">[ date ]</a>
              <a href="thread.html#11852">[ thread ]</a>
              <a href="subject.html#11852">[ subject ]</a>
              <a href="author.html#11852">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 9, 2011 at 10:26, Deepak Vijayvergiy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vdeepak at yahoo-inc.com</A>&gt; wrote:
&gt;<i> I have created the framework for publisher-subscriber and created publisher and consumer clients for basic testing as well. Now, I also want to test the performance as well, as in, I want to give the numbers like -
</I>&gt;<i> (1) How many messages, my publisher client will be able to publish per second or rate?
</I>&gt;<i> (2) How many messages my consumer will be able to consume (per second) .. rate? (a) with messages already in the queue (b) parallely publishing as well
</I>&gt;<i>
</I>&gt;<i> Earlier I have tried doing same by some time functions before and after 1 and last mess respectively, but I don't think that was a proper way. Please let me know if you have done the same measurement?
</I>
We do have a tool for doing simple measurements, see MulticastMain
in our java client.  Sample usage:
   <A HREF="http://www.rabbitmq.com/ec2.html#testing">http://www.rabbitmq.com/ec2.html#testing</A>
(dig the mailing list archives for more examples)

Doing benchmarks properly, even as simple as you described, is pretty hard.

With 1) you will measure performance of the client. Unless you're using
publisher-acks.

2) It all depends, if data in-memory or on the disk, is it cached by the OS,
how big is the queue, how many queues are handled by rabbit and so on.

2b) That one is quite interesting, but you have to be very careful to keep
the queue balanced. Publishing is usually faster than consuming.

Rabbit is not a rocket science and there are some significant bottlenecks.
If you start swapping to disk or if you use persistent messages -
things will be much slower.

Usually the best approach is to test the whole solution end-to-end
rather than focusing on dry RabbitMQ benchmarks. That way you can
be sure that the numbers actually mean something you're interested
in. Raw benchmarks like publishes/sec or consumes/sec doesn't
say anything useful.

Cheers,
  Marek
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011707.html">[rabbitmq-discuss] Performance and scalability measurement with my publisher-subscriber clients testing
</A></li>
	<LI>Next message: <A HREF="011853.html">[rabbitmq-discuss] Performance and scalability measurement with my publisher-subscriber clients testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11852">[ date ]</a>
              <a href="thread.html#11852">[ thread ]</a>
              <a href="subject.html#11852">[ subject ]</a>
              <a href="author.html#11852">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
