<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbit MQ crashes on startup?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20MQ%20crashes%20on%20startup%3F&In-Reply-To=%3CAANLkTimzvP2mGmOZ92C0q%3D20hiBhfobmh8cB9vFaseCY%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012138.html">
   <LINK REL="Next"  HREF="012114.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbit MQ crashes on startup?</H1>
    <B>Luke McCollum</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Rabbit%20MQ%20crashes%20on%20startup%3F&In-Reply-To=%3CAANLkTimzvP2mGmOZ92C0q%3D20hiBhfobmh8cB9vFaseCY%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Rabbit MQ crashes on startup?">lakemalcom at gmail.com
       </A><BR>
    <I>Tue Mar 29 18:19:21 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012138.html">[rabbitmq-discuss] Using listeners in json rpc server/client
</A></li>
        <LI>Next message: <A HREF="012114.html">[rabbitmq-discuss] Rabbit MQ crashes on startup?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12113">[ date ]</a>
              <a href="thread.html#12113">[ thread ]</a>
              <a href="subject.html#12113">[ subject ]</a>
              <a href="author.html#12113">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I get this:


Starting rabbitmq-server: TIMEOUT - check /var/log/rabbitmq/startup_{log,err}


The startup log/err files are both empty, but in the main log, I see this:

=INFO REPORT==== 29-Mar-2011::09:55:40 ===
Limiting to approx 924 file handles

=INFO REPORT==== 29-Mar-2011::09:55:40 ===
Memory limit set to 196MB.

=INFO REPORT==== 29-Mar-2011::09:55:40 ===
Rolling persister log to
&quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at vm-lb-01</A>/rabbit_persister.LOG.previous&quot;

=INFO REPORT==== 29-Mar-2011::09:55:40 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 29-Mar-2011::09:55:43 ===
accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:59103

=INFO REPORT==== 29-Mar-2011::09:55:43 ===
starting TCP connection &lt;0.197.0&gt; from 127.0.0.1:59103

=INFO REPORT==== 29-Mar-2011::09:55:44 ===
accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:59118

=INFO REPORT==== 29-Mar-2011::09:55:44 ===
starting TCP connection &lt;0.206.0&gt; from 127.0.0.1:59118

=WARNING REPORT==== 29-Mar-2011::09:55:46 ===
exception on TCP connection &lt;0.197.0&gt; from 127.0.0.1:59103
connection_closed_abruptly

=INFO REPORT==== 29-Mar-2011::09:55:46 ===
closing TCP connection &lt;0.197.0&gt; from 127.0.0.1:59103

=INFO REPORT==== 29-Mar-2011::09:55:50 ===
Rolling persister log to
&quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at vm-lb-01</A>/rabbit_persister.LOG.previous&quot;

=ERROR REPORT==== 29-Mar-2011::09:55:50 ===
** Generic server rabbit_persister terminating
** Last message in was timeout
** When Server state == {pstate,rabbit_persister,0,infinity,[],[],
                            {psnapshot,
                                {dict,0,16,16,8,80,48,
                                    {[],[],[],[],[],[],[],[],[],[],[],[],[],
                                     [],[],[]},
                                    {{[],[],[],[],[],[],[],[],[],[],[],[],[],
                                      [],[],[]}}},
                                135217,139314,0}}
** Reason for termination ==
** {{badmatch,{error,{file_error,&quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at vm-lb-01</A>/rabbit_persister.LOG&quot;,
                                 enospc}}},
    [{rabbit_persister,take_snapshot,3},
     {rabbit_persister,take_snapshot,2},
     {rabbit_persister,maybe_take_snapshot,2},
     {rabbit_persister,flush,2},
     {rabbit_persister,handle_info,2},
     {gen_server,handle_msg,5},
     {proc_lib,init_p_do_apply,3}]}

=INFO REPORT==== 29-Mar-2011::09:55:50 ===
stopped TCP Listener on 0.0.0.0:5672

=ERROR REPORT==== 29-Mar-2011::09:55:50 ===
** gen_event handler rabbit_sasl_report_file_h crashed.
** Was installed in error_logger
** Last event was: {error_report,&lt;0.9.0&gt;,
                    {&lt;0.180.0&gt;,crash_report,
                     [[{initial_call,
                        {disk_log,init,['Argument__1','Argument__2']}},
                       {pid,&lt;0.180.0&gt;},
                       {registered_name,[]},
                       {error_info,
                        {exit,
                         {{failed,
                           {error,
                            {file_error,

&quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at vm-lb-01</A>/rabbit_persister.LOG&quot;,
                             enospc}}},
                          [{disk_log,reopen,3}]},
                         [{disk_log,do_exit,4},{proc_lib,init_p_do_apply,3}]}},
                       {ancestors,
                        [disk_log_sup,kernel_safe_sup,kernel_sup,&lt;0.10.0&gt;]},
                       {messages,[]},
                       {links,[&lt;0.78.0&gt;]},
                       {dictionary,[]},
                       {trap_exit,true},
                       {status,running},
                       {heap_size,610},
                       {stack_size,24},
                       {reductions,4523}],
                      []]}}
** When handler state == {&lt;0.48.0&gt;,
                          &quot;/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at vm-lb-01-sasl.log</A>&quot;,error}
** Reason == {badarg,[{io,format,
                          [&lt;0.48.0&gt;,
                           [&quot;\n&quot;,61,&quot;CRASH REPORT&quot;,61,61,61,61,32,&quot;29&quot;,45,
                            &quot;Mar&quot;,45,&quot;2011&quot;,58,58,&quot;09&quot;,58,&quot;55&quot;,58,&quot;50&quot;,32,61,
                            61,61,&quot;\n&quot;,126,115],
                           [&quot;  crasher:\n    initial call:
disk_log:init/2\n    pid: &lt;0.180.0&gt;\n    registered_name: [


What is wrong?
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012138.html">[rabbitmq-discuss] Using listeners in json rpc server/client
</A></li>
	<LI>Next message: <A HREF="012114.html">[rabbitmq-discuss] Rabbit MQ crashes on startup?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12113">[ date ]</a>
              <a href="thread.html#12113">[ thread ]</a>
              <a href="subject.html#12113">[ subject ]</a>
              <a href="author.html#12113">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
