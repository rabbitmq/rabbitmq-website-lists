<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pathological dead queue behavior in a	cluster.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pathological%20dead%20queue%20behavior%20in%20a%0A%09cluster.&In-Reply-To=%3C20110330213113.GE1577%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012162.html">
   <LINK REL="Next"  HREF="012165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pathological dead queue behavior in a	cluster.</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pathological%20dead%20queue%20behavior%20in%20a%0A%09cluster.&In-Reply-To=%3C20110330213113.GE1577%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Pathological dead queue behavior in a	cluster.">matthew at rabbitmq.com
       </A><BR>
    <I>Wed Mar 30 22:31:13 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012162.html">[rabbitmq-discuss] Pathological dead queue behavior in a	cluster.
</A></li>
        <LI>Next message: <A HREF="012165.html">[rabbitmq-discuss] Pathological dead queue behavior in a	cluster.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12164">[ date ]</a>
              <a href="thread.html#12164">[ thread ]</a>
              <a href="subject.html#12164">[ subject ]</a>
              <a href="author.html#12164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 30, 2011 at 03:26:30PM -0600, Jason J. W. Williams wrote:
&gt;<i> &gt; Actually, if you did a basic.cancel and then a basic.consume then you
</I>&gt;<i> &gt; should find you can start consuming from the queue again. That is the
</I>&gt;<i> &gt; expected strategy in light of the above notification extension.
</I>&gt;<i> 
</I>&gt;<i> Why does the queue count stay at 0 though until the rebind? That wouldn't
</I>&gt;<i> have anything to do with the consumption being re-established no?
</I>
Once the queue comes back up, provided the exchange to which it was
bound was _also_ durable, the bindings will be recreated. At that point
new msgs published to the queue should appear in the queue.

As for msgs that were previously sent to the queue before the node died,
a) they could have been consumed and ack'd by the consumer
b) they might not have been published persistent
c) they might have not been sync'd to disk so didn't get recovered

I'm afraid I don't have time right now to check your code to see if any
of these hypothesis hold true.

Matthew
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012162.html">[rabbitmq-discuss] Pathological dead queue behavior in a	cluster.
</A></li>
	<LI>Next message: <A HREF="012165.html">[rabbitmq-discuss] Pathological dead queue behavior in a	cluster.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12164">[ date ]</a>
              <a href="thread.html#12164">[ thread ]</a>
              <a href="subject.html#12164">[ subject ]</a>
              <a href="author.html#12164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
