<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 2.0: The Future of Pika
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202.0%3A%20The%20Future%20of%20Pika&In-Reply-To=%3CAANLkTi%3DhTA559G5uDoHRF%3DTaP8G68h51pU-exjbWcNnb%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011778.html">
   <LINK REL="Next"  HREF="011783.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 2.0: The Future of Pika</H1>
    <B>Gavin M. Roy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202.0%3A%20The%20Future%20of%20Pika&In-Reply-To=%3CAANLkTi%3DhTA559G5uDoHRF%3DTaP8G68h51pU-exjbWcNnb%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] 2.0: The Future of Pika">gmr at myyearbook.com
       </A><BR>
    <I>Sun Mar 13 16:25:58 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011778.html">[rabbitmq-discuss] 2.0: The Future of Pika
</A></li>
        <LI>Next message: <A HREF="011783.html">[rabbitmq-discuss] 2.0: The Future of Pika
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11782">[ date ]</a>
              <a href="thread.html#11782">[ thread ]</a>
              <a href="subject.html#11782">[ subject ]</a>
              <a href="author.html#11782">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the feedback, this is the type of conversation I need to have as
I'm fleshing things out.

On Sun, Mar 13, 2011 at 6:30 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> What do instances of classes represent? Looks like they'd have to contain a
</I>&gt;<i> mixture of attributes with completely different purposes.
</I>

Quite possibly, again the goal being simplification and making it more
pythonic. If you have a Queue (within Rabbit and in a general sense),
message-count and consumer-count are of course transient, but they are still
an attribute of a queue.

The problem with this notion is the transient nature of the values. They
are potentially invalid as soon as they are returned. Perhaps, while keeping
a more pythonic idiom in mind, it might be better for synchronous command
response syntax to be like:

     message_count, consumer_count = queue.declare(channel)


&gt;<i> In particular there is a conflation of attributes for AMQP entities and
</I>&gt;<i> AMQP commands.
</I>&gt;<i>
</I>
That was the initial thought, where it adds value. Where it confuses, it
should not be done.

For example, 'passive' is not an attribute of an AMQP queue; it's a flag on
&gt;<i> the queue.declare command.
</I>

Right, in this case, it's probably better to pass that as an argument in the
method call.


&gt;<i> And 'message_count' is only something you get as a return of queue.declare,
</I>&gt;<i> so accessing that attribute in any other context is meaningless.
</I>&gt;<i>
</I>
Per my point on this above, I absolutely agree here. I'm trying to walk a
line of simplification while staying true to the protocol. I there there is
a win in simplification, for example, in the aggregation of content from the
multiple frames of Basic.Deliver and Basic.GetOk. I don't think a developer
will be shorted in having one object containing all of the values of the
three frames.

The major change for the driver, from my perspective, is the removal of
auto-generated driver mixin rpc command methods to having a object model
closer to what is seen in spec.py, with the AMQP methods accessed through
their class directly.  Think Basic.ack(channel, delivery_tag) instead of
channel.basic_ack(delivery_tag).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110313/d9dca00c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110313/d9dca00c/attachment.htm</A>&gt;
</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011778.html">[rabbitmq-discuss] 2.0: The Future of Pika
</A></li>
	<LI>Next message: <A HREF="011783.html">[rabbitmq-discuss] 2.0: The Future of Pika
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11782">[ date ]</a>
              <a href="thread.html#11782">[ thread ]</a>
              <a href="subject.html#11782">[ subject ]</a>
              <a href="author.html#11782">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
