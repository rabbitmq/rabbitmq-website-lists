<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problems starting 2.4.0 on OS X w/ mgmt plugins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problems%20starting%202.4.0%20on%20OS%20X%20w/%20mgmt%20plugins&In-Reply-To=%3C888D1862-46B7-401B-AE2D-E0FFA5EAD55E%40vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012211.html">
   <LINK REL="Next"  HREF="012154.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problems starting 2.4.0 on OS X w/ mgmt plugins</H1>
    <B>Jonathan Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problems%20starting%202.4.0%20on%20OS%20X%20w/%20mgmt%20plugins&In-Reply-To=%3C888D1862-46B7-401B-AE2D-E0FFA5EAD55E%40vmware.com%3E"
       TITLE="[rabbitmq-discuss] Problems starting 2.4.0 on OS X w/ mgmt plugins">jbrisbin at vmware.com
       </A><BR>
    <I>Wed Mar 30 20:21:08 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012211.html">[rabbitmq-discuss] 2.4.0 channel and connection close behavior
</A></li>
        <LI>Next message: <A HREF="012154.html">[rabbitmq-discuss] Problems starting 2.4.0 on OS X w/ mgmt plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12156">[ date ]</a>
              <a href="thread.html#12156">[ thread ]</a>
              <a href="subject.html#12156">[ subject ]</a>
              <a href="author.html#12156">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I see references to this problem scattered about archives but I didn't see any solution, so thought I'd ping the group.

I'm using the Homebrew install of RabbitMQ 2.4.0 and the latest-and-greatest management plugins. When I start the broker, it gives me some warnings and then stops loading. When I hit ^C twice, it continues to start the broker. 

The management plugin seems to be working, but it just won't start cleanly. It didn't do this originally, but has started doing it now every time. Don't know if I subsequently installed something it doesn't like or what...

Here's my console output:

Activating RabbitMQ plugins ...
*WARNING* Undefined function fdsrv:bind_socket/2
*WARNING* Undefined function fdsrv:start/0
*WARNING* Undefined function fdsrv:stop/0
*WARNING* Undefined function webmachine_resource:start_link/2
6 plugins activated:
* amqp_client-2.4.0
* mochiweb-1.3
* rabbit_management-2.4.0.1
* rabbit_management_agent-2.4.0
* rabbit_mochiweb-2.4.0
* webmachine-1.7.0

^C
BREAK: (a)bort (c)ontinue (p)roc info (i)nfo (l)oaded
       (v)ersion (k)ill (D)b-tables (d)istribution
^C

^^^^^^^^
This is where I kill it...then it continues on fine...


+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v2.4.0  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 0-9-1 / 0-9 / 0-8
Copyright (C) 2007-2011 VMware, Inc.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at jbrisbin</A>
app descriptor : /usr/local/Cellar/rabbitmq/2.4.0/lib/rabbitmq/erlang/lib/rabbitmq-2.4.0/ebin/rabbit.app
home dir       : /Users/jbrisbin
config file(s) : (none)
cookie hash    : XseAPjfnLNBJwJJ074sjQw==
log            : /usr/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at jbrisbin.log</A>
sasl log       : /usr/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at jbrisbin-sasl.log</A>
database dir   : /usr/local/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at jbrisbin</A>
erlang version : 5.8.3

starting file handle cache server                                     ...done
starting worker pool                                                  ...done
starting database                                                     ...done
starting codec correctness check                                      ...done
-- external infrastructure ready
starting plugin registry                                              ...done
starting auth mechanism cr-demo                                       ...done
starting auth mechanism amqplain                                      ...done
starting auth mechanism plain                                         ...done
starting statistics event manager                                     ...done
starting logging server                                               ...done
starting exchange type direct                                         ...done
starting exchange type fanout                                         ...done
starting exchange type headers                                        ...done
starting exchange type topic                                          ...done
-- kernel ready
starting alarm handler                                                ...done
starting node monitor                                                 ...done
starting cluster delegate                                             ...done
starting guid generator                                               ...done
starting memory monitor                                               ...done
-- core initialized
starting empty DB check                                               ...done
starting exchange recovery                                            ...done
starting management agent                                             ...done
starting management statistics database                               ...done
starting queue supervisor and queue recovery                          ...done
-- message delivery logic ready
starting error log relay                                              ...done
starting networking                                                   ...done
starting direct_client                                                ...done
starting notify cluster nodes                                         ...done

broker running
** Found 0 name clashes in code paths 


I'm using R14B02 (Homebrew).

Logs show nothing of import, though I included them below for the sake of completeness.

Any ideas?

Thanks!

Jon Brisbin
SpringSource (a division of VMware)

Twitter: @j_brisbin


<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at jbrisbin.log</A>:

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
Limiting to approx 156 file handles (138 sockets)

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
Memory limit set to 2852MB.

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
Management plugin upgraded statistics to fine.

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
Statistics database started.

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=WARNING REPORT==== 30-Mar-2011::14:11:32 ===
msg_store_persistent: rebuilding indices from scratch

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
started TCP Listener on 0.0.0.0:5672

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
Management agent started.

=INFO REPORT==== 30-Mar-2011::14:11:32 ===
Management plugin started.
HTTP API:       <A HREF="http://jbrisbin:55672/api/">http://jbrisbin:55672/api/</A>
Management UI:  <A HREF="http://jbrisbin:55672/mgmt/">http://jbrisbin:55672/mgmt/</A>
 


</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012211.html">[rabbitmq-discuss] 2.4.0 channel and connection close behavior
</A></li>
	<LI>Next message: <A HREF="012154.html">[rabbitmq-discuss] Problems starting 2.4.0 on OS X w/ mgmt plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12156">[ date ]</a>
              <a href="thread.html#12156">[ thread ]</a>
              <a href="subject.html#12156">[ subject ]</a>
              <a href="author.html#12156">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
