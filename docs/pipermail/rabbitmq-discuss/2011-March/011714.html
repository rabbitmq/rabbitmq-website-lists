<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problem with a constantly increasing memory	footprint
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20with%20a%20constantly%20increasing%20memory%0A%09footprint&In-Reply-To=%3C1299676809.2472.44.camel%40danstation%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012055.html">
   <LINK REL="Next"  HREF="011725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problem with a constantly increasing memory	footprint</H1>
    <B>Daniel Maher</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20with%20a%20constantly%20increasing%20memory%0A%09footprint&In-Reply-To=%3C1299676809.2472.44.camel%40danstation%3E"
       TITLE="[rabbitmq-discuss] Problem with a constantly increasing memory	footprint">dmaher at milestonelab.com
       </A><BR>
    <I>Wed Mar  9 13:20:09 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012055.html">[rabbitmq-discuss] MSMQ Integration
</A></li>
        <LI>Next message: <A HREF="011725.html">[rabbitmq-discuss] Problem with a constantly increasing memory footprint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11714">[ date ]</a>
              <a href="thread.html#11714">[ thread ]</a>
              <a href="subject.html#11714">[ subject ]</a>
              <a href="author.html#11714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

We are running a two node RabbitMQ cluster, and on _one_ of those nodes
the memory footprint used by beam.smp grows steadily and constantly over
time, regardless of the usage pattern.  I've been pulling my hair out
trying to figure out why, and while it's helped me to learn quite a bit
about administrating RabbitMQ (which is a good thing), it hasn't
resulted in a solution for the memory creep.

The particulars:
Debian Squeeze 64bit
Rabbit 2.3.1 / Erlang R14A
Mnesia storage to disc

If I restart RabbitMQ on the problem node, the footprint will drop
dramatically (logical), but will then continue to rise over time once
again.

I've been using Collectd to graph the footprint as reported by
rabbitmqctl as well as my pmap directly.  I don't know if this list
supports attachments, so i've put the two graphs here:
<A HREF="http://min.us/m5IxKc8LKTWqz">http://min.us/m5IxKc8LKTWqz</A>
They are both graphs of a week in scope.  The first graph is the memory
usage as reported by rabbitmqctl in bytes, and the second is that
reported by pmap in kilobytes.

Any insight - or perhaps ideas on how to go about debugging the issue -
would be greatly appreciated.  Thank you, all.

-- 
Daniel Maher
&#171; can't talk, too busy calculating computrons. &#187;

</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012055.html">[rabbitmq-discuss] MSMQ Integration
</A></li>
	<LI>Next message: <A HREF="011725.html">[rabbitmq-discuss] Problem with a constantly increasing memory footprint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11714">[ date ]</a>
              <a href="thread.html#11714">[ thread ]</a>
              <a href="subject.html#11714">[ subject ]</a>
              <a href="author.html#11714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
