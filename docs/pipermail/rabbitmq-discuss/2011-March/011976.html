<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] acquiring channels per connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20acquiring%20channels%20per%20connection&In-Reply-To=%3CAANLkTikaOOqUNVvgixbHjEns_oh75ad3zjdY9QDP8yHW%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011867.html">
   <LINK REL="Next"  HREF="011818.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] acquiring channels per connection</H1>
    <B>vorad</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20acquiring%20channels%20per%20connection&In-Reply-To=%3CAANLkTikaOOqUNVvgixbHjEns_oh75ad3zjdY9QDP8yHW%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] acquiring channels per connection">vorad.1100 at gmail.com
       </A><BR>
    <I>Tue Mar 22 18:23:32 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011867.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
        <LI>Next message: <A HREF="011818.html">[rabbitmq-discuss] Program to get list_queues from client RabbitMQ.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11976">[ date ]</a>
              <a href="thread.html#11976">[ thread ]</a>
              <a href="subject.html#11976">[ subject ]</a>
              <a href="author.html#11976">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, my main concern about having one channel per application/tornado
instance is that I wouldn't know what's the request that corresponds to a
particular error when I catch it. That's the way I do it now (one channel
per application) and I still haven't figured things out on the error side.

Other than this it feels like adding another pool of objects to manage it's
not such a good idea so if I can stick with one connection and one channel
it would be great.

Thanks for your feedback.

On Wed, Mar 16, 2011 at 5:54 PM, Gavin M. Roy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">gmr at myyearbook.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>  On Wednesday, March 16, 2011 at 11:42 AM, Marek Majkowski wrote:
</I>&gt;<i>
</I>&gt;<i> On Tue, Mar 15, 2011 at 07:11, vorad &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vorad.1100 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>  How expensive would be to do
</I>&gt;<i> this (one channel per request) from the rabbitmq perspective and also from
</I>&gt;<i> the Pika's perspective ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Well, not that expensive if your RabbitMQ is close to the web server.
</I>&gt;<i> Opening channel is a synchronous action - a full roundtrip is required.
</I>&gt;<i>
</I>&gt;<i> To avoid that roundtrip you may hava a pool and reuse open channels.
</I>&gt;<i>
</I>&gt;<i> In addition, you're not buying anything by using more connections as
</I>&gt;<i> they'll still use the same single process IOLoop.
</I>&gt;<i>
</I>&gt;<i> For what it's worth, I use Pika and Tornado with one connection and channel
</I>&gt;<i> per Tornado backend and hold on to the for the life of the backend, across
</I>&gt;<i> multiple RequestHandler invocations.
</I>&gt;<i>
</I>&gt;<i> If you want to use multiple channels, I recommend having a sound reason for
</I>&gt;<i> it. At the protocol level, it's nothing more than a numeric identifier for
</I>&gt;<i> the frame routing. At the python level it's a set of two class instances
</I>&gt;<i> which need to reside in memory. I can't think of a reason in my web
</I>&gt;<i> applications that I would use more than one channel.
</I>&gt;<i>
</I>&gt;<i> For example, if you want to listen on multiple queues, just have multiple
</I>&gt;<i> callbacks for channel.basic_consume.
</I>&gt;<i>
</I>&gt;<i> I guess my main point is using more channels and more connections doesn't
</I>&gt;<i> offer any real value and adds additional overhead since you're bound to the
</I>&gt;<i> same single process for responding to events.
</I>&gt;<i>
</I>&gt;<i> I would imagine if you could saturate a socket without saturating CPU that
</I>&gt;<i> there could be some value, but offhand I can't imagine that is possible, as
</I>&gt;<i> the OS's use of CPU would be saturated.
</I>&gt;<i>
</I>&gt;<i> Gavin
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110322/a1bc8006/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110322/a1bc8006/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011867.html">[rabbitmq-discuss] acquiring channels per connection
</A></li>
	<LI>Next message: <A HREF="011818.html">[rabbitmq-discuss] Program to get list_queues from client RabbitMQ.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11976">[ date ]</a>
              <a href="thread.html#11976">[ thread ]</a>
              <a href="subject.html#11976">[ subject ]</a>
              <a href="author.html#11976">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
