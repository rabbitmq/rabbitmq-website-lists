<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Subscription Pattern in .net
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Subscription%20Pattern%20in%20.net&In-Reply-To=%3CAANLkTin9q7ArdVAcLjmtUN3o5LYPzfRYobor-5m4CcTw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011830.html">
   <LINK REL="Next"  HREF="011850.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Subscription Pattern in .net</H1>
    <B>Steven Taylor</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Subscription%20Pattern%20in%20.net&In-Reply-To=%3CAANLkTin9q7ArdVAcLjmtUN3o5LYPzfRYobor-5m4CcTw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Subscription Pattern in .net">taylste at gmail.com
       </A><BR>
    <I>Tue Mar 15 20:31:07 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011830.html">[rabbitmq-discuss] Subscription Pattern in .net
</A></li>
        <LI>Next message: <A HREF="011850.html">[rabbitmq-discuss] Subscription Pattern in .net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11842">[ date ]</a>
              <a href="thread.html#11842">[ thread ]</a>
              <a href="subject.html#11842">[ subject ]</a>
              <a href="author.html#11842">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i>  IEnumerator.MoveNext() currently waits an indefinite amount of time until
</I>&gt;&gt;<i> a message arrives. If I understand correctly, you want a version of with a
</I>&gt;&gt;<i> timeout, supplied in the constructor.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Would the enumeration need to be restartable? You may need a different
</I>&gt;&gt;<i> implementation of Reset() in that case and this substantially changes the
</I>&gt;&gt;<i> semantics of Subscription. I'm not sure how well this fits with IEnumerator.
</I>&gt;&gt;<i> Your use-case appears to be reading messages until a large gap appears
</I>&gt;&gt;<i> between message. At first glance that looks insufficiently general to
</I>&gt;&gt;<i> justify changing the IEnumerator implementation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The Next(TimeOut,out Msg) method was intended to meet your needs if you
</I>&gt;&gt;<i> want a timeout. The example you provided using this looks fine.
</I>&gt;<i>
</I>&gt;<i>
</I>The goal was finer-grained control, while trying to hide detail.  This is
slightly unrelated, but it looks to me as though there are a few rough edges
we could sand back.  e.g. channel has a &quot;CreateBasicProperties&quot; method that
we can use in BasicPublish.  No big deal, but BasicPublish could have an
overload which creates its own properties, as this method knows its context
already (i.e. the method is in Channel, so go create your own basic
properties, basicPublish!!)

No reset required for the enumerator.

The context is: A. send off a bunch of messages asynchronously, and B. wait
for a reply.  C. If messages don't turn up in a reasonable period of time,
stop waiting.  If the messages do turn up, good, continue.  In essence, I'm
replicating the &quot;Join&quot; that you use after threading off a list of tasks, but
via messaging.

I know there are heavier-duty implementations such as remote method
invocation over RabbitMQ, but this approach seemed simpler to me.  Perhaps a
whole new pattern should be created for this need.  At the moment I'm using
the slightly less elegant method that you mentioned.  It doesn't really get
in the way that much.  However, being in a community that has helped out, I
thought, hmmm... maybe i could at least return the favour in a small way.



&gt;<i>
</I>&gt;<i> So what is the policy on updating the Mercurial repository?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You could also fork our github repository here:
</I>&gt;<i> <A HREF="https://github.com/rabbitmq/rabbitmq-dotnet-client">https://github.com/rabbitmq/rabbitmq-dotnet-client</A>
</I>&gt;<i> This would be a way of building consensus for your proposal.
</I>&gt;<i>
</I>&gt;<i> Code that you contribute that does get accepted in the main mercurial
</I>&gt;<i> repository will need a signed contributor agreement.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards
</I>&gt;<i>
</I>&gt;<i> Emile
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110315/1dfbb1b9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110315/1dfbb1b9/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011830.html">[rabbitmq-discuss] Subscription Pattern in .net
</A></li>
	<LI>Next message: <A HREF="011850.html">[rabbitmq-discuss] Subscription Pattern in .net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11842">[ date ]</a>
              <a href="thread.html#11842">[ thread ]</a>
              <a href="subject.html#11842">[ subject ]</a>
              <a href="author.html#11842">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
