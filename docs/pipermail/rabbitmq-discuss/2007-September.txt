From holger at wizards.de  Sat Sep  1 07:21:12 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Sat, 01 Sep 2007 08:21:12 +0200
Subject: [rabbitmq-discuss] Server control classes in Java
Message-ID: <46D904D8.3040602@wizards.de>

Hi,

I was wondering if there are any plans or ideas regarding Java-controlled
server startup/shutdown? I understand that the server is running in a
separate process which would more or less require a machine-local
configuration, but nevertheless a Java-based control mechanism for
starting/stopping/pinging a server on the local machine would IMHO be very
handy. Ideas? Suggestions? I just want to make sure I don't start writing
stuff that is already floating around somewhere.

thanks
Holger



From 0x6e6562 at gmail.com  Sun Sep  2 18:09:52 2007
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Sun, 2 Sep 2007 18:09:52 +0100
Subject: [rabbitmq-discuss] Data binding within the message payload
Message-ID: <269388e30709021009n1e12c83cwf3ceae41076f501d@mail.gmail.com>

Hi all,

I've been using Hessian encoding within my message payloads and there
is also the use of JSON to achieve the same goal. I was just wondering
if the AMQP type encoding is a viable candidate to encode the
application layer data, as this makes no assumptions about the
marshalling capabilities of other peers, or the encoding not suited
for this layer? Has anybody discussed or made any practical
experiences with this aspect?

Thanks,

Ben



From alexis.richardson at cohesiveft.com  Mon Sep  3 10:36:32 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Mon, 3 Sep 2007 10:36:32 +0100
Subject: [rabbitmq-discuss] Server control classes in Java
In-Reply-To: <46D904D8.3040602@wizards.de>
References: <46D904D8.3040602@wizards.de>
Message-ID: <167204d20709030236x6bf64fa5pfaf55b46a9a92e6e@mail.gmail.com>

Holger

Your timing is excellent.  This is on our to do list, but we have not
begun addressing it.  If you would be willing to write something then
we would certainly look at including it.

If you are keen to start the ball rolling, please can you comment on
the following issues --

1.  Should a Java-based start/stop/ping control be wrapped using some
standard enterprise Java API or framework?

2.  To a degree, the commands to boot the Rabbit server are O/S and
package dependent.  What is the least painful way to abstract this
away?

alexis




On 9/1/07, Holger Hoffst?tte <holger at wizards.de> wrote:
> Hi,
>
> I was wondering if there are any plans or ideas regarding Java-controlled
> server startup/shutdown? I understand that the server is running in a
> separate process which would more or less require a machine-local
> configuration, but nevertheless a Java-based control mechanism for
> starting/stopping/pinging a server on the local machine would IMHO be very
> handy. Ideas? Suggestions? I just want to make sure I don't start writing
> stuff that is already floating around somewhere.
>
> thanks
> Holger
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From matthias at lshift.net  Mon Sep  3 14:59:38 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Mon, 03 Sep 2007 14:59:38 +0100
Subject: [rabbitmq-discuss] Data binding within the message payload
In-Reply-To: <269388e30709021009n1e12c83cwf3ceae41076f501d@mail.gmail.com>
References: <269388e30709021009n1e12c83cwf3ceae41076f501d@mail.gmail.com>
Message-ID: <46DC134A.90204@lshift.net>

Ben Hood wrote:

> I've been using Hessian encoding within my message payloads and there
> is also the use of JSON to achieve the same goal. I was just wondering
> if the AMQP type encoding is a viable candidate to encode the
> application layer data, as this makes no assumptions about the
> marshalling capabilities of other peers, or the encoding not suited
> for this layer? Has anybody discussed or made any practical
> experiences with this aspect?

The AMQP type encoding has not been designed as a general purpose data 
encoding. So Hessian, JSON, or similar would be a better choice, IMHO.

Matthias.



From alexis.richardson at cohesiveft.com  Tue Sep  4 11:35:28 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Tue, 4 Sep 2007 11:35:28 +0100
Subject: [rabbitmq-discuss] tim bray blogs on erlang again
Message-ID: <167204d20709040335h4167d4aan8a47830ff8a1dd9d@mail.gmail.com>

Hi

People who are interested in language and platform developments may
find the following interesting:

http://www.tbray.org/ongoing/When/200x/2007/09/03/Sideways

Tim Bray's 'trends' blogs look at things like multicore, software
transactional memory, ruby, java, erlang, and so on.

alexis




-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From holger at wizards.de  Tue Sep  4 12:31:18 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Tue, 04 Sep 2007 13:31:18 +0200
Subject: [rabbitmq-discuss] Server control classes in Java
In-Reply-To: <167204d20709030236x6bf64fa5pfaf55b46a9a92e6e@mail.gmail.com>
References: <46D904D8.3040602@wizards.de>
	<167204d20709030236x6bf64fa5pfaf55b46a9a92e6e@mail.gmail.com>
Message-ID: <46DD4206.2010305@wizards.de>

Hi,

Alexis Richardson wrote:
> Your timing is excellent.  This is on our to do list, but we have not
> begun addressing it.  If you would be willing to write something then
> we would certainly look at including it.

It was more of a random idea.. :)

This might be useful for embedding the server and also more Java-centric
testing without having a backup human fiddle with an external server.
For now I was only thinking of starting/stopping an instance on the local
machine..remote activation is a different animal altogether and should
probably tie in with deployment/management mechanisms. Maybe a Jini
service :-D

> If you are keen to start the ball rolling, please can you comment on
> the following issues --
> 
> 1.  Should a Java-based start/stop/ping control be wrapped using some
> standard enterprise Java API or framework?

I'm not aware of any extra APIs for that since external process control is
very system-dependent. Sadly it seems most prople just end up hardcoding
Strings into their apps until it sort of works..
I think you are targeting JDK 1.4 compliance with the Java classes, right?
That rules out the new 1.5+ ProcessBuilder classes, but it's not too big a
problem. The differences between Unixen and Windows are probably a bit
trickier. Fortunately such a server manager does not really need much
interaction with the external process; the usual Runtime.exec() stuff can
be difficult to get right since stdin/out/err need to be read
asynchronously or stuff starts blocking/hanging etc.

> 2.  To a degree, the commands to boot the Rabbit server are O/S and
> package dependent.  What is the least painful way to abstract this
> away?

No idea yet. I have JDK 1.4 cross-platform helper classes to read OS
environment variables (Windows and Unix with sh/bash/csh/zsh, all of which
are different!) and e.g. parse VM property definitions from strings (the
-Dxxx -Dfoo=bar stuff, which was surprisingly difficult) since we had
similar problems in Mule.

I guess platform-specific subclass instances that get returned from a
RabbitMQServerManagerFactory could do the trick - then Windows/Unix stuff
can be hidden behind common methods. The actual communication with the
server for pings, stats etc. would be via the regular Java AMQP protocol,
right? Once we have such a server manager we might think about exposing
the server stats and operations via JMX.
I guess the common operations for the server manager would initially just
be start, stop and maybe notification/handling on unexpected process
death. Also an optional VM shutdown hook could be handy, to make sure both
processes go together.

cheers
Holger

PS: Warning and Disclaimer: so far I've used rabbitmq exactly once for 5
minutes and have not even started reading my new Erlang book yet!




From holger at wizards.de  Tue Sep  4 12:34:32 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Tue, 04 Sep 2007 13:34:32 +0200
Subject: [rabbitmq-discuss] Gentoo ebuilds?
Message-ID: <46DD42C8.8000401@wizards.de>

Hi,

any Gentoo users here? I was thinking about creating an ebuild for easy
rabbitmq installs (pulling in erlang as required) but was wondering
whether anybody had already looked into it. portage and b.g.o have nothing
so far..

thanks
Holger



From alexis.richardson at cohesiveft.com  Wed Sep  5 11:26:42 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Wed, 5 Sep 2007 11:26:42 +0100
Subject: [rabbitmq-discuss] Server control classes in Java
In-Reply-To: <46DD4206.2010305@wizards.de>
References: <46D904D8.3040602@wizards.de>
	<167204d20709030236x6bf64fa5pfaf55b46a9a92e6e@mail.gmail.com>
	<46DD4206.2010305@wizards.de>
Message-ID: <167204d20709050326l37f71339s9171696e195cb795@mail.gmail.com>

Holger,

Thanks for your detailed reply.


On 9/4/07, Holger Hoffst?tte <holger at wizards.de> wrote:
>
> This might be useful for embedding the server and also more Java-centric
> testing without having a backup human fiddle with an external server.
> For now I was only thinking of starting/stopping an instance on the local
> machine..

I understand.  That would certainly be very useful.



> > 1.  Should a Java-based start/stop/ping control be wrapped using some
> > standard enterprise Java API or framework?
>
> I'm not aware of any extra APIs for that since external process control is
> very system-dependent. Sadly it seems most prople just end up hardcoding
> Strings into their apps until it sort of works..

Bootstrapping from there would be perfectly OK for a first pass.


> I think you are targeting JDK 1.4 compliance with the Java classes, right?
> That rules out the new 1.5+ ProcessBuilder classes, but it's not too big a
> problem.

We are currently targetting 1.5 with retrotranslator functionality.
So - go for it :-)



> > 2.  To a degree, the commands to boot the Rabbit server are O/S and
> > package dependent.  What is the least painful way to abstract this
> > away?
>
> No idea yet. I have JDK 1.4 cross-platform helper classes to read OS
> environment variables (Windows and Unix with sh/bash/csh/zsh, all of which
> are different!) and e.g. parse VM property definitions from strings (the
> -Dxxx -Dfoo=bar stuff, which was surprisingly difficult) since we had
> similar problems in Mule.

Anything you have already to hand, would be useful at this stage.



> I guess platform-specific subclass instances that get returned from a
> RabbitMQServerManagerFactory could do the trick - then Windows/Unix stuff
> can be hidden behind common methods.

Sounds sensible.


> The actual communication with the
> server for pings, stats etc. would be via the regular Java AMQP protocol,
> right?

Initially yes.  We've thoughts on optimisations for the future -- I'd
ask Tony to articulate the options there if people want to discuss
these.


> Once we have such a server manager we might think about exposing
> the server stats and operations via JMX.
> I guess the common operations for the server manager would initially just
> be start, stop and maybe notification/handling on unexpected process
> death. Also an optional VM shutdown hook could be handy, to make sure both
> processes go together.

All good.  If we can get this to work we can then do all sorts of
fancy stuff later, such as using the queues to present management
hooks.  But your starting point would in and of itself be extremely
useful.


>
> cheers
> Holger
>
> PS: Warning and Disclaimer: so far I've used rabbitmq exactly once for 5
> minutes and have not even started reading my new Erlang book yet!

Hopefully you shouldn't have to read it, but do please let us know how
you get on ;-)

alexis




-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From holger at wizards.de  Wed Sep  5 11:55:42 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Wed, 05 Sep 2007 12:55:42 +0200
Subject: [rabbitmq-discuss] Server control classes in Java
In-Reply-To: <167204d20709050326l37f71339s9171696e195cb795@mail.gmail.com>
References: <46D904D8.3040602@wizards.de>	
	<167204d20709030236x6bf64fa5pfaf55b46a9a92e6e@mail.gmail.com>	
	<46DD4206.2010305@wizards.de>
	<167204d20709050326l37f71339s9171696e195cb795@mail.gmail.com>
Message-ID: <46DE8B2E.90807@wizards.de>

Alexis Richardson wrote:
>> I think you are targeting JDK 1.4 compliance with the Java classes, right?
>> That rules out the new 1.5+ ProcessBuilder classes, but it's not too big a
>> problem.
> 
> We are currently targetting 1.5 with retrotranslator functionality.
> So - go for it :-)

I'm all for retrotranslator but it's not that easy since ProcessBuilder
and friends are partially JVM/JDK specific and currently not retrozapped
(I just checked), probably for exactly that reason. It can only go so far..

>> PS: Warning and Disclaimer: so far I've used rabbitmq exactly once for 5
>> minutes and have not even started reading my new Erlang book yet!
> 
> Hopefully you shouldn't have to read it, but do please let us know how
> you get on ;-)

Will do! I was delighted when I looked at the source after unpacking:
"..but where is the rest?..oh.". :-)

best
Holger



From 0x6e6562 at gmail.com  Wed Sep  5 21:39:33 2007
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Wed, 5 Sep 2007 21:39:33 +0100
Subject: [rabbitmq-discuss] Data binding within the message payload
In-Reply-To: <46DC134A.90204@lshift.net>
References: <269388e30709021009n1e12c83cwf3ceae41076f501d@mail.gmail.com>
	<46DC134A.90204@lshift.net>
Message-ID: <269388e30709051339u3f39309cm5449c35565a426ef@mail.gmail.com>

Matthias,

> The AMQP type encoding has not been designed as a general purpose data
> encoding. So Hessian, JSON, or similar would be a better choice, IMHO.

Thanks for the confirmation on this as this was my view as well from a
usability perspective. The consequence of this is that different peers
have to agree a priori on the higher level data encoding, which I
guess is not the end of the world either.

Ben



From tonyg at lshift.net  Thu Sep  6 10:20:25 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Thu, 06 Sep 2007 10:20:25 +0100
Subject: [rabbitmq-discuss] Data binding within the message payload
In-Reply-To: <269388e30709051339u3f39309cm5449c35565a426ef@mail.gmail.com>
References: <269388e30709021009n1e12c83cwf3ceae41076f501d@mail.gmail.com>	<46DC134A.90204@lshift.net>
	<269388e30709051339u3f39309cm5449c35565a426ef@mail.gmail.com>
Message-ID: <46DFC659.4060509@lshift.net>

Ben Hood wrote:
> The consequence of this is that different peers
> have to agree a priori on the higher level data encoding, which I
> guess is not the end of the world either.

That's true, although the BasicProperties contentType and
contentEncoding fields are intended to carry MIME content-type (e.g.
"application/json", "application/x-hessian" (in the absence of an
official IETF Hessian registration)) and MIME content-encoding
identifiers respectively, which can help out here.

Regards,
  Tony
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From holger at wizards.de  Thu Sep  6 10:43:36 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Thu, 06 Sep 2007 11:43:36 +0200
Subject: [rabbitmq-discuss] Suggestions for server startup script
Message-ID: <46DFCBC8.1000601@wizards.de>

Hi,

I would like to offer a few suggestions to make the server startup scripts
a bit easier to use.

- I already had erlang installed separately and really do not like to copy
stuff into another installation's directory; I initially ended up with a
couple of erl_dumps until I understood that the app search path was not
correct. Those dumps are very interesting to read for this VM geek but not
what I was after :)
Starting everything in the ebin dir worked immediately. Maybe adding a
line like:

	-pa %RABBITMQ_BASE%/ebin ^

to the erl start command would make this easier for others.

- good Java projects that have shell launchers make sure that logs,
databases etc. are not created all over the place:

	set MNESIA_BASE=%RABBITMQ_BASE_UNIX%/db
	set LOG_BASE=%RABBITMQ_BASE_UNIX%/log

May seem a bit overly pedantic, but it makes stuff a bit easier to debug
and more predictable.

thanks
Holger




From tonyg at lshift.net  Thu Sep  6 11:33:06 2007
From: tonyg at lshift.net (Tony Garnock-Jones)
Date: Thu, 06 Sep 2007 11:33:06 +0100
Subject: [rabbitmq-discuss] Suggestions for server startup script
In-Reply-To: <46DFCBC8.1000601@wizards.de>
References: <46DFCBC8.1000601@wizards.de>
Message-ID: <46DFD762.6050609@lshift.net>

Hi Holger,

Thanks for the suggestions - they all sound pretty good to me. Do you
have code in a state where you could send a patch or simply a snapshot
of what you have working? I'll file a bug report in our bugzilla so that
we don't forget the idea - we should aim to include your suggestions in
our next broker release.

Regards,
  Tony


Holger Hoffst?tte wrote:
> Hi,
> 
> I would like to offer a few suggestions to make the server startup scripts
> a bit easier to use.
> 
> - I already had erlang installed separately and really do not like to copy
> stuff into another installation's directory; I initially ended up with a
> couple of erl_dumps until I understood that the app search path was not
> correct. Those dumps are very interesting to read for this VM geek but not
> what I was after :)
> Starting everything in the ebin dir worked immediately. Maybe adding a
> line like:
> 
> 	-pa %RABBITMQ_BASE%/ebin ^
> 
> to the erl start command would make this easier for others.
> 
> - good Java projects that have shell launchers make sure that logs,
> databases etc. are not created all over the place:
> 
> 	set MNESIA_BASE=%RABBITMQ_BASE_UNIX%/db
> 	set LOG_BASE=%RABBITMQ_BASE_UNIX%/log
> 
> May seem a bit overly pedantic, but it makes stuff a bit easier to debug
> and more predictable.
> 
> thanks
> Holger
> 
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 


-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] http://www.lshift.net/ | Email: tonyg at lshift.net



From matthias at lshift.net  Thu Sep  6 11:55:43 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Thu, 06 Sep 2007 11:55:43 +0100
Subject: [rabbitmq-discuss] Suggestions for server startup script
In-Reply-To: <46DFCBC8.1000601@wizards.de>
References: <46DFCBC8.1000601@wizards.de>
Message-ID: <46DFDCAF.2060607@lshift.net>

Holger,

Holger Hoffst?tte wrote:
> - I already had erlang installed separately and really do not like to copy
> stuff into another installation's directory; I initially ended up with a
> couple of erl_dumps until I understood that the app search path was not
> correct. Those dumps are very interesting to read for this VM geek but not
> what I was after :)
> Starting everything in the ebin dir worked immediately.

I am curious how that worked. The startup script on Windows relies on 
finding the ERLANG_HOME in ..\..\.., which won't work if you installed 
the package outside the OTP lib dir.


Matthias.



From ralf at lshift.net  Thu Sep  6 13:23:57 2007
From: ralf at lshift.net (Ralf Damaschke)
Date: Thu, 06 Sep 2007 13:23:57 +0100
Subject: [rabbitmq-discuss] RSS feeds
Message-ID: <46DFF15D.9020406@lshift.net>

Hello!
By popular demand, I have installed a little patch for the RabbitMQ 
mailing lists so they generate RSS feeds. These can be found at:

http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/rss.xml

and

http://lists.rabbitmq.com/pipermail/rabbitmq-announce/rss.xml


Ralf



From holger at wizards.de  Thu Sep  6 16:37:51 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Thu, 06 Sep 2007 17:37:51 +0200
Subject: [rabbitmq-discuss] Suggestions for server startup script
In-Reply-To: <46DFDCAF.2060607@lshift.net>
References: <46DFCBC8.1000601@wizards.de> <46DFDCAF.2060607@lshift.net>
Message-ID: <46E01ECF.5050307@wizards.de>

Matthias Radestock wrote:
> Holger,
> 
> Holger Hoffst?tte wrote:
>> - I already had erlang installed separately and really do not like to
>> copy
>> stuff into another installation's directory; I initially ended up with a
>> couple of erl_dumps until I understood that the app search path was not
>> correct. Those dumps are very interesting to read for this VM geek but
>> not
>> what I was after :)
>> Starting everything in the ebin dir worked immediately.
> 
> I am curious how that worked. The startup script on Windows relies on
> finding the ERLANG_HOME in ..\..\.., which won't work if you installed
> the package outside the OTP lib dir.

I just set ERLANG_HOME to my existing installation, added the -pa line and
it worked since it then found both the erl binary and the rabbit
application code. After that I adjusted the mnesia and log dirs.

cheers
Holger



From edwin.grubbs at canonical.com  Thu Sep  6 16:46:40 2007
From: edwin.grubbs at canonical.com (Edwin Grubbs)
Date: Thu, 6 Sep 2007 10:46:40 -0500
Subject: [rabbitmq-discuss] python client
Message-ID: <295263c20709060846v93601d4x9d4afdd88b6d51e6@mail.gmail.com>

Has anyone been able to get a python client working with rabbitmq? I
have been trying to use qpid, but I haven't had much luck.

-Edwin



From matthias at lshift.net  Thu Sep  6 16:56:51 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Thu, 06 Sep 2007 16:56:51 +0100
Subject: [rabbitmq-discuss] python client
In-Reply-To: <295263c20709060846v93601d4x9d4afdd88b6d51e6@mail.gmail.com>
References: <295263c20709060846v93601d4x9d4afdd88b6d51e6@mail.gmail.com>
Message-ID: <46E02343.5010802@lshift.net>

Edwin,

Edwin Grubbs wrote:
> Has anyone been able to get a python client working with rabbitmq? I
> have been trying to use qpid, but I haven't had much luck.

We are running qpid's python-based test suite against RabbitMQ as part 
of our conformance and interop testing. See
http://www.rabbitmq.com/interoperability.html#qpid-python-tests

That definitely works for us.

What exactly did you try?


Matthias.



From matthias at lshift.net  Thu Sep  6 17:16:24 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Thu, 06 Sep 2007 17:16:24 +0100
Subject: [rabbitmq-discuss] Suggestions for server startup script
In-Reply-To: <46E01ECF.5050307@wizards.de>
References: <46DFCBC8.1000601@wizards.de> <46DFDCAF.2060607@lshift.net>
	<46E01ECF.5050307@wizards.de>
Message-ID: <46E027D8.2020808@lshift.net>

Holger Hoffst?tte wrote:
> I just set ERLANG_HOME to my existing installation, added the -pa line and
> it worked since it then found both the erl binary and the rabbit
> application code.

Right. Ideally it would "just work" though, without having to change any 
settings. Unfortunately locating the Erlang/OTP home from a batch script 
on Windows is fairly difficult.


Matthias



From holger at wizards.de  Thu Sep  6 17:35:30 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Thu, 06 Sep 2007 18:35:30 +0200
Subject: [rabbitmq-discuss] Suggestions for server startup script
In-Reply-To: <46E027D8.2020808@lshift.net>
References: <46DFCBC8.1000601@wizards.de> <46DFDCAF.2060607@lshift.net>
	<46E01ECF.5050307@wizards.de> <46E027D8.2020808@lshift.net>
Message-ID: <46E02C52.8080204@wizards.de>

Matthias Radestock wrote:
> Right. Ideally it would "just work" though, without having to change any
> settings. Unfortunately locating the Erlang/OTP home from a batch script
> on Windows is fairly difficult.

Maybe this will help:
http://www.pankaj-k.net/archives/2004/11/equivalent_of_w.html

C:\home\holger>which.cmd python.exe
Found in PATH: C:\Developer\Python\python.exe

Of course then someone will have a completely unrelated binary named
"erl.exe" in their path.. If no erl.exe is found and no ERLANG_HOME is set
the script can still error out.

happy .bat hacking :)

Holger




From matthias at lshift.net  Thu Sep  6 17:45:35 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Thu, 06 Sep 2007 17:45:35 +0100
Subject: [rabbitmq-discuss] Suggestions for server startup script
In-Reply-To: <46E02C52.8080204@wizards.de>
References: <46DFCBC8.1000601@wizards.de>
	<46DFDCAF.2060607@lshift.net>	<46E01ECF.5050307@wizards.de>
	<46E027D8.2020808@lshift.net> <46E02C52.8080204@wizards.de>
Message-ID: <46E02EAF.5060509@lshift.net>

Holger Hoffst?tte wrote:
> Maybe this will help:
> http://www.pankaj-k.net/archives/2004/11/equivalent_of_w.html
> 
> C:\home\holger>which.cmd python.exe
> Found in PATH: C:\Developer\Python\python.exe

This won't help because the Erlang/OTP installation does not put erl.exe 
on the path. If it did then we wouldn't need to know where it lives in 
the first place.


Matthias.



From dmitriy.samovskiy at cohesiveft.com  Fri Sep  7 20:05:02 2007
From: dmitriy.samovskiy at cohesiveft.com (Dmitriy Samovskiy)
Date: Fri, 07 Sep 2007 14:05:02 -0500
Subject: [rabbitmq-discuss] python client
In-Reply-To: <46E02343.5010802@lshift.net>
References: <295263c20709060846v93601d4x9d4afdd88b6d51e6@mail.gmail.com>
	<46E02343.5010802@lshift.net>
Message-ID: <46E1A0DE.1020601@cohesiveft.com>

Matthias,

Thanks for the link below - I saw that section before, but now I re-read 
it and was able to get it working.

Edwin,

The key is to use original amqp 0.8 xml spec, not the one in qpid trunk. 
Download link is at URL that Matthias provided below.

The code below does not raise an exception. I am just starting working 
with rabbitmq and I still don't understand all details of what this code 
does, but at least it works.

#----------------------------------

#!/usr/bin/python

QPID_PATH = '/usr/local/qpid-svn/qpid'

import sys, os, time
sys.path += [ QPID_PATH + '/python' ]

import qpid
from qpid.client import Client
from qpid.content import Content

client = Client("127.0.0.1", 5672, spec=qpid.spec.load('amqp0-8.xml'))
client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'})

ch = client.channel(1)
ch.channel_open()
ch.queue_declare(queue="test1", exclusive=True)
ch.queue_bind(queue="test1", exchange="amq.direct", \ 
routing_key="test_key_1")

print 'Sending message "ping"...  ',
ch.basic_publish(routing_key="test_key_1", content=Content("ping"),\
         exchange='amq.direct')
print 'done'

print 'Receiving message'
t = ch.basic_consume(queue="test1", no_ack=True)
q = client.queue(t.consumer_tag)
msg = q.get(timeout=1)
print 'Got message:', msg.content.body

#-----------------------------------------------



If anybody is interested, when this code runs against 0.8 xml spec from 
qpid trunk, here is what I get in rabbit.log:

=INFO REPORT==== 7-Sep-2007::13:45:31 ===
accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:2586

=WARNING REPORT==== 7-Sep-2007::13:45:31 ===
Attempt by client to use invalid ticket 0

=WARNING REPORT==== 7-Sep-2007::13:45:31 ===
Lax ticket check mode: fabricating full ticket number 0

=ERROR REPORT==== 7-Sep-2007::13:45:31 ===
Frame error: 'basic.consume', <<0,0,5,116,101,115,116,49,0,2,0,0,0,0>>

=INFO REPORT==== 7-Sep-2007::13:45:31 ===
Sending exception: Channel 1, Reason {amqp,frame_error,'basic.consume'}

=INFO REPORT==== 7-Sep-2007::13:45:31 ===
closing TCP connection from 127.0.0.1:2586

This is on debian etch, original 1.1.1-1 rabbitmq-server deb.
python 2.4.4


- Dmitriy






Matthias Radestock wrote:
> Edwin,
> 
> Edwin Grubbs wrote:
>> Has anyone been able to get a python client working with rabbitmq? I
>> have been trying to use qpid, but I haven't had much luck.
> 
> We are running qpid's python-based test suite against RabbitMQ as part 
> of our conformance and interop testing. See
> http://www.rabbitmq.com/interoperability.html#qpid-python-tests
> 
> That definitely works for us.
> 
> What exactly did you try?
> 
> 
> Matthias.
> 
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
> 



From 0x6e6562 at gmail.com  Fri Sep  7 20:59:56 2007
From: 0x6e6562 at gmail.com (Ben Hood)
Date: Fri, 7 Sep 2007 20:59:56 +0100
Subject: [rabbitmq-discuss] Data binding within the message payload
In-Reply-To: <46DFC659.4060509@lshift.net>
References: <269388e30709021009n1e12c83cwf3ceae41076f501d@mail.gmail.com>
	<46DC134A.90204@lshift.net>
	<269388e30709051339u3f39309cm5449c35565a426ef@mail.gmail.com>
	<46DFC659.4060509@lshift.net>
Message-ID: <269388e30709071259q32214650l70df76f81f7d5c2a@mail.gmail.com>

> That's true, although the BasicProperties contentType and
> contentEncoding fields are intended to carry MIME content-type (e.g.
> "application/json", "application/x-hessian" (in the absence of an
> official IETF Hessian registration)) and MIME content-encoding
> identifiers respectively, which can help out here.

That's a fair point, I hadn't thought of that.

Thx, Ben



From holger at wizards.de  Wed Sep 12 09:35:13 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Wed, 12 Sep 2007 10:35:13 +0200
Subject: [rabbitmq-discuss] Gentoo ebuilds?
In-Reply-To: <167204d20709111301x95229d0w30d3218ed4e13eb7@mail.gmail.com>
References: <46DD42C8.8000401@wizards.de>	
	<167204d20709050340x18c1e74cx9d26502de50e6dde@mail.gmail.com>	
	<167204d20709050340t27e4ef2aw418c0a22bb3647b7@mail.gmail.com>
	<167204d20709111301x95229d0w30d3218ed4e13eb7@mail.gmail.com>
Message-ID: <46E7A4C1.6060004@wizards.de>

Alexis Richardson wrote:
> I am told the process is uniform:
> http://www.gentoo.org/proj/en/devrel/handbook/handbook.xml?part=2&chap=1
> 
> If you get stuck let me know and I shall enlist help

Thanks Alexis - creating the ebuild is not the problem, I have done quite
a few already. It's more about finding the time and figuring out where
best to install the rabbitmq-specific parts in the file system so that
they live happily next to Gentoo's other erlang-related packages. Though
all that is thoroughly standardized in Gentoo, finding time is not..

thanks!
Holger




From alexis.richardson at cohesiveft.com  Wed Sep 12 10:34:49 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Wed, 12 Sep 2007 10:34:49 +0100
Subject: [rabbitmq-discuss] Gentoo ebuilds?
In-Reply-To: <46E7A4C1.6060004@wizards.de>
References: <46DD42C8.8000401@wizards.de>
	<167204d20709050340x18c1e74cx9d26502de50e6dde@mail.gmail.com>
	<167204d20709050340t27e4ef2aw418c0a22bb3647b7@mail.gmail.com>
	<167204d20709111301x95229d0w30d3218ed4e13eb7@mail.gmail.com>
	<46E7A4C1.6060004@wizards.de>
Message-ID: <167204d20709120234g491ae71fn5e7ae74c95a38557@mail.gmail.com>

Holger

On 9/12/07, Holger Hoffst?tte <holger at wizards.de> wrote:
> Alexis Richardson wrote:
> > I am told the process is uniform:
> > http://www.gentoo.org/proj/en/devrel/handbook/handbook.xml?part=2&chap=1
>
> It's more about finding the time and figuring out where
> best to install the rabbitmq-specific parts in the file system so that
> they live happily next to Gentoo's other erlang-related packages.

I feared as much.  We do know some guys who use gentoo a lot and are
experimenting with erlang but not (yet) rabbit.  As soon as I'm able
to learn more from them, I shall let the list know.


> Though
> all that is thoroughly standardized in Gentoo, finding time is not..

Indeed :-)

I'm sure something will turn up.  Sorry we were not able to help you
more this time.

alexis



-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From holger at wizards.de  Wed Sep 12 11:20:21 2007
From: holger at wizards.de (=?ISO-8859-1?Q?Holger_Hoffst=E4tte?=)
Date: Wed, 12 Sep 2007 12:20:21 +0200
Subject: [rabbitmq-discuss] Gentoo ebuilds?
In-Reply-To: <167204d20709120234g491ae71fn5e7ae74c95a38557@mail.gmail.com>
References: <46DD42C8.8000401@wizards.de>	
	<167204d20709050340x18c1e74cx9d26502de50e6dde@mail.gmail.com>	
	<167204d20709050340t27e4ef2aw418c0a22bb3647b7@mail.gmail.com>	
	<167204d20709111301x95229d0w30d3218ed4e13eb7@mail.gmail.com>	
	<46E7A4C1.6060004@wizards.de>
	<167204d20709120234g491ae71fn5e7ae74c95a38557@mail.gmail.com>
Message-ID: <46E7BD65.4090909@wizards.de>

Alexis Richardson wrote:
> I feared as much.  We do know some guys who use gentoo a lot and are
> experimenting with erlang but not (yet) rabbit.  As soon as I'm able
> to learn more from them, I shall let the list know.

Feel free to point them here:
http://bugs.gentoo.org/show_bug.cgi?id=192278

This should help to get the ball rolling.

thanks
Holger



From Jodi.Moran at betfair.com  Fri Sep 14 12:31:06 2007
From: Jodi.Moran at betfair.com (Jodi Moran)
Date: Fri, 14 Sep 2007 12:31:06 +0100
Subject: [rabbitmq-discuss] RabbitMQ and -smp
Message-ID: <E39E50172D7A6546BCE3E981C985C9872099A370@UKMAIL.sportex.com>

Hi all, 

I've been running some tests on RabbitMQ and I noticed during my first
few runs that the broker was only using one processor on a 4-processor
machine. After a bit of research I found the "-smp" switch for erl, and
setting this did seem to have the correct effect. My question is, is
there some reason that SMP  support is not enabled in the default
scripts provided with RabbitMQ? Is there anything I need to be careful
about when enabling this?

Thanks,

-- 
Jodi Moran
Distributed Systems Engineer
Frameworks Team 

Office: +44 20 8834 6397 

Betfair. A Different Kind of Betting Company.
Please consider the environment before printing
Betfair Limited | Winslow Road | Hammersmith Embankment | London | W6
9HP
Registered in England and Wales under company number 5140986

The information in this e-mail and any attachment is confidential and is
intended only for the named recipient(s). The e-mail may not be
disclosed or used by any person other than the addressee, nor may it be
copied in any way. If you are not a named recipient please notify the
sender immediately and delete any copies of this message. Any
unauthorized copying, disclosure or distribution of the material in this
e-mail is strictly forbidden. Any view or opinions presented are solely
those of the author and do not necessarily represent those of the
company. Betfair (r) and the BETFAIR LOGO are registered trade marks of
The Sporting Exchange Limited.




________________________________________________________________________
In order to protect our email recipients, Betfair Group use SkyScan from 
MessageLabs to scan all Incoming and Outgoing mail for viruses.

________________________________________________________________________



From matthias at lshift.net  Fri Sep 14 12:54:47 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Fri, 14 Sep 2007 12:54:47 +0100
Subject: [rabbitmq-discuss] RabbitMQ and -smp
In-Reply-To: <E39E50172D7A6546BCE3E981C985C9872099A370@UKMAIL.sportex.com>
References: <E39E50172D7A6546BCE3E981C985C9872099A370@UKMAIL.sportex.com>
Message-ID: <46EA7687.60607@lshift.net>

Jodi,

Jodi Moran wrote:
> I've been running some tests on RabbitMQ and I noticed during my first
> few runs that the broker was only using one processor on a 4-processor
> machine. After a bit of research I found the "-smp" switch for erl, and
> setting this did seem to have the correct effect. My question is, is
> there some reason that SMP  support is not enabled in the default
> scripts provided with RabbitMQ? Is there anything I need to be careful
> about when enabling this?

Our (very limited) tests showed RabbitMQ performing worse when running 
with SMP support enabled. So currently we advise people to utilise 
multiple cores by running several RabbitMQ nodes in a cluster, with one 
node per core.

Clearly that is unsatisfactory, but we haven't had the time so far to 
investigate this further.

If you are running some tests with SMP support enabled we'd be keen to 
hear the results and how they compare to a) single-node non-smp, b) 
clustered multi-node non-smp.


Matthias.



From Jodi.Moran at betfair.com  Fri Sep 14 15:37:58 2007
From: Jodi.Moran at betfair.com (Jodi Moran)
Date: Fri, 14 Sep 2007 15:37:58 +0100
Subject: [rabbitmq-discuss] RabbitMQ and -smp
References: <E39E50172D7A6546BCE3E981C985C9872099A370@UKMAIL.sportex.com>
	<46EA7687.60607@lshift.net>
Message-ID: <E39E50172D7A6546BCE3E981C985C98720ABF213@UKMAIL.sportex.com>

Hi Matthias,

Thanks for your reply.

> Our (very limited) tests showed RabbitMQ performing worse when running
> with SMP support enabled. So currently we advise people to utilise
> multiple cores by running several RabbitMQ nodes in a cluster, with
one
> node per core.

Do you have any advice on how to (easily) set up such a configuration?
Trying to start multiple nodes on the same machine using only different
node names fails because each node tries to bind to the same port
(5672), which seems to be defined in ebin/rabbit.app. Since I am not
familiar with Erlang, it's not clear to me how I pass a different value
for the port when starting the node.

Thanks,

-- 
Jodi Moran
Distributed Systems Engineer
Frameworks Team 

Office: +44 20 8834 6397 

Betfair. A Different Kind of Betting Company.
Please consider the environment before printing
Betfair Limited | Winslow Road | Hammersmith Embankment | London | W6
9HP
Registered in England and Wales under company number 5140986

The information in this e-mail and any attachment is confidential and is
intended only for the named recipient(s). The e-mail may not be
disclosed or used by any person other than the addressee, nor may it be
copied in any way. If you are not a named recipient please notify the
sender immediately and delete any copies of this message. Any
unauthorized copying, disclosure or distribution of the material in this
e-mail is strictly forbidden. Any view or opinions presented are solely
those of the author and do not necessarily represent those of the
company. Betfair ?? and the BETFAIR LOGO are registered trade marks of
The Sporting Exchange Limited.


________________________________________________________________________
In order to protect our email recipients, Betfair Group use SkyScan from 
MessageLabs to scan all Incoming and Outgoing mail for viruses.

________________________________________________________________________



From matthias at lshift.net  Sun Sep 16 04:37:55 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Sun, 16 Sep 2007 04:37:55 +0100
Subject: [rabbitmq-discuss] RabbitMQ and -smp
In-Reply-To: <E39E50172D7A6546BCE3E981C985C98720ABF213@UKMAIL.sportex.com>
References: <E39E50172D7A6546BCE3E981C985C9872099A370@UKMAIL.sportex.com>	<46EA7687.60607@lshift.net>
	<E39E50172D7A6546BCE3E981C985C98720ABF213@UKMAIL.sportex.com>
Message-ID: <46ECA513.7060707@lshift.net>

Jodi,

Jodi Moran wrote:
> Trying to start multiple nodes on the same machine using only different
> node names fails because each node tries to bind to the same port
> (5672), which seems to be defined in ebin/rabbit.app. Since I am not
> familiar with Erlang, it's not clear to me how I pass a different value
> for the port when starting the node.

To change the RabbitMQ's listening port(s), add
   -rabbit tcp_listeners '[{"0.0.0.0", 5673}]'
or similar to the RabbitMQ command line.

One place to do that is in the rabbitmq-server startup scripts. Either 
create one copy for each node or parameterise the script with an 
environment variable.

I'll add this info to our documentation.


Matthias.



From matthias at lshift.net  Thu Sep 27 12:30:49 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Thu, 27 Sep 2007 12:30:49 +0100
Subject: [rabbitmq-discuss] RabbitMQ 1.2.0 released
Message-ID: <46FB9469.7010206@lshift.net>

The RabbitMQ team is pleased to announce the release of RabbitMQ 1.2.0.

This release has beta status and focuses on the following areas:

- internal flow control to prevent performance drops when running a 
server near capacity

- simplified cluster configuration. For details see 
http://www.rabbitmq.com/clustering.html

- some bug fixes and minor enhancements. For details see the attached 
release notes.

Binary and source distributions of the new release can be found in the 
usual place, at http://www.rabbitmq.com/download.html

We recommend that all users of earlier versions of RabbitMQ upgrade to 
this latest release.

As always, we welcome any questions, bug reports, and other feedback on 
this release, as well as general suggestions for features and 
enhancements in future releases. Mail us via the RabbitMQ discussion 
list at rabbitmq-discuss at lists.rabbitmq.com, or directly at 
info at rabbitmq.com.


Regards,

The RabbitMQ Team

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: README-1.2.0.txt
Url: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070927/b41aacd5/attachment.txt 

From dmitriy.samovskiy at cohesiveft.com  Thu Sep 27 19:49:36 2007
From: dmitriy.samovskiy at cohesiveft.com (Dmitriy Samovskiy)
Date: Thu, 27 Sep 2007 13:49:36 -0500
Subject: [rabbitmq-discuss] Using RabbitMQ from Python and Ruby
Message-ID: <46FBFB40.5090904@cohesiveft.com>


I wrote a simple app called disttailf (distributed "tail -f") to 
illustrate how you can use rabbitmq from python and ruby (attached). 
Producers tail the files and send contents to the broker. Consumers 
receive aggregated feed and can analyze the data. Can be used for syslog 
monitoring or http access log aggregation, among other things.

Works with both rabbitmq 1.1.1 and 1.2.0

- Dmitriy
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: disttailf.rb
Url: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070927/7e3f1b35/attachment.txt 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: disttailf.py
Url: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070927/7e3f1b35/attachment-0001.txt 

From tom at samplonius.org  Fri Sep 28 08:09:42 2007
From: tom at samplonius.org (Tom Samplonius)
Date: Fri, 28 Sep 2007 00:09:42 -0700 (PDT)
Subject: [rabbitmq-discuss] PHP AMQP client?
Message-ID: <29287843.2661190963382169.JavaMail.root@ly.sdf.com>


  Is anyone aware of a PHP AMQP client that is usable with RabbitMQ?

Tom



From lynton.grice at netweaverguru.com  Fri Sep 28 14:43:09 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Fri, 28 Sep 2007 15:43:09 +0200
Subject: [rabbitmq-discuss] Python client to RabbitMQ.....error?
Message-ID: <0ML2xA-1IbG7b3TGw-0002IR@mrelayeu.kundenserver.de>

Hi there,

 

I hope someone can help me ;-)..... I have been on the mail lists trying to
find my problem but still no luck ;-( I am an SAP integration specialist and
I play alot in Python, Erlang etc......and am VERY impressed so far with
RabbitMQ.

 

I have installed the RabbitMQ Server (1.2.0).....and have installed the QPID
Python libs.....and I run on Windows XP....

 

The server is up and running on the default port etc.....

 

BUT I cannot get the Python code working properly or get the test runs
going.......here is the code below that is dying:

 

import qpid

from qpid.client import Client

from qpid.content import Content

 

client = Client("127.0.0.1", 5672, spec=qpid.spec.load('amqp0-8.xml'))
"spec is in the same directory....

client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'}) 

 

The client.start method DIES.....and the user and password are
correct....the error I get in Wing IDE is:

 

Closed: 

 

Traceback (innermost last):

 

File "D:\tmp\Rabbit\rabbit.py", line 1, in ?

  import qpid

File "D:\tmp\Rabbit\rabbit.py", line 8, in ?

  client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'}) File
"D:\Python24\Lib\site-packages\qpid\client.py", line 83, in start

  self.channel(0).connection_open(self.vhost)

File "D:\tmp\Rabbit\<string>", line 3, in connection_open File
"D:\Python24\Lib\site-packages\qpid\peer.py", line 182, in invoke

  raise Closed(self.reason)

 

If I debug the code it seems to go happily into the "client.py" code.....but
when it calls "self.wait()" but then executes the following and raises
"EOFError" because it seems to be closed or something

 

self.started.wait()

    if self.closed:

      raise EOFError()

 

I am probably doing something very stupid....just wanted to know if I need
to START something on the server or install something like QPID? Or perhaps
something else?

 

Thanks for the help.....I would appreciate any sort of feedback on this.....

 

Thanks again ;-)

 

Lynton

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070928/8f6c88c0/attachment.htm 

From rob.j.godfrey at gmail.com  Fri Sep 28 15:18:42 2007
From: rob.j.godfrey at gmail.com (Robert Godfrey)
Date: Fri, 28 Sep 2007 15:18:42 +0100
Subject: [rabbitmq-discuss] Python client to RabbitMQ.....error?
In-Reply-To: <0ML2xA-1IbG7b3TGw-0002IR@mrelayeu.kundenserver.de>
References: <0ML2xA-1IbG7b3TGw-0002IR@mrelayeu.kundenserver.de>
Message-ID: <fde171c00709280718j71dc9153u96bc4d6f691ff1cf@mail.gmail.com>

Hi Lynton,

which version of the Qpid Python libraries did you use?

I'm cross-posting this to the qpid-dev list... so the Qpid python guys (not
me) can help out,

Cheers,
Rob

On 28/09/2007, Lynton Grice <lynton.grice at netweaverguru.com> wrote:
>
>  Hi there,
>
>
>
> I hope someone can help me ;-)..... I have been on the mail lists trying
> to find my problem but still no luck ;-( I am an SAP integration specialist
> and I play alot in Python, Erlang etc......and am VERY impressed so far with
> RabbitMQ.
>
>
>
> I have installed the RabbitMQ Server (1.2.0).....and have installed the
> QPID Python libs.....and I run on Windows XP....
>
>
>
> The server is up and running on the default port etc.....
>
>
>
> BUT I cannot get the Python code working properly or get the test runs
> going.......here is the code below that is dying:
>
>
>
> import qpid
>
> from qpid.client import Client
>
> from qpid.content import Content
>
>
>
> client = Client("127.0.0.1", 5672, spec=qpid.spec.load('amqp0-8.xml'))
> "spec is in the same directory....
>
> client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'})
>
>
>
> The client.start method DIES.....and the user and password are
> correct....the error I get in Wing IDE is:
>
>
>
> Closed:
>
>
>
> Traceback (innermost last):
>
>
>
> File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
>
>   import qpid
>
> File "D:\tmp\Rabbit\rabbit.py", line 8, in ?
>
>   client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'}) File
> "D:\Python24\Lib\site-packages\qpid\client.py", line 83, in start
>
>   self.channel(0).connection_open(self.vhost)
>
> File "D:\tmp\Rabbit\<string>", line 3, in connection_open File
> "D:\Python24\Lib\site-packages\qpid\peer.py", line 182, in invoke
>
>   raise Closed(self.reason)
>
>
>
> If I debug the code it seems to go happily into the "client.py"
> code.....but when it calls "self.wait()" but then executes the following
> and raises "EOFError" because it seems to be closed or something
>
>
>
> self.started.wait()
>
>     if self.closed:
>
>       raise EOFError()
>
>
>
> I am probably doing something very stupid....just wanted to know if I need
> to START something on the server or install something like QPID? Or perhaps
> something else?
>
>
>
> Thanks for the help.....I would appreciate any sort of feedback on
> this.....
>
>
>
> Thanks again ;-)
>
>
>
> Lynton
>
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070928/5ade400a/attachment.htm 

From alexis.richardson at cohesiveft.com  Fri Sep 28 15:18:57 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Fri, 28 Sep 2007 09:18:57 -0500
Subject: [rabbitmq-discuss] PHP AMQP client?
In-Reply-To: <29287843.2661190963382169.JavaMail.root@ly.sdf.com>
References: <29287843.2661190963382169.JavaMail.root@ly.sdf.com>
Message-ID: <167204d20709280718o5653a123w1cde2914d9d5830@mail.gmail.com>

Tom

Good question.  The short answer is no.  I do not think Qpid has one
either, or you could use that with RabbitMQ.

At the risk of sounding importunate ... how would you like to write one?

alexis



On 9/28/07, Tom Samplonius <tom at samplonius.org> wrote:
>
>   Is anyone aware of a PHP AMQP client that is usable with RabbitMQ?
>
> Tom
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From alexis.richardson at cohesiveft.com  Fri Sep 28 15:14:37 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Fri, 28 Sep 2007 09:14:37 -0500
Subject: [rabbitmq-discuss] Python client to RabbitMQ.....error?
In-Reply-To: <0ML2xA-1IbG7b3TGw-0002IR@mrelayeu.kundenserver.de>
References: <0ML2xA-1IbG7b3TGw-0002IR@mrelayeu.kundenserver.de>
Message-ID: <167204d20709280714u66def3b2ta4bd42d7bf9396ce@mail.gmail.com>

Lynton

Thanks for your email.  I am really pleased you are impressed with RabbitMQ.

I am not sure how best to answer your question yet, but wanted to draw
your attention to a Python client that was posted to the list this
week by Dmitriy.  That should work fine with RabbitMQ.  Can you try
that client, if you have not, and let me know if things work.  If you
have already tried it, please let us know.

alexis



On 9/28/07, Lynton Grice <lynton.grice at netweaverguru.com> wrote:
>
>
>
>
> Hi there,
>
>
>
> I hope someone can help me ;-)..... I have been on the mail lists trying to
> find my problem but still no luck ;-( I am an SAP integration specialist and
> I play alot in Python, Erlang etc......and am VERY impressed so far with
> RabbitMQ.
>
>
>
> I have installed the RabbitMQ Server (1.2.0).....and have installed the QPID
> Python libs.....and I run on Windows XP....
>
>
>
> The server is up and running on the default port etc.....
>
>
>
> BUT I cannot get the Python code working properly or get the test runs
> going.......here is the code below that is dying:
>
>
>
> import qpid
>
> from qpid.client import Client
>
> from qpid.content import Content
>
>
>
> client = Client("127.0.0.1", 5672, spec=qpid.spec.load('amqp0-8.xml'))
> "spec is in the same directory....
>
> client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'})
>
>
>
> The client.start method DIES.....and the user and password are
> correct....the error I get in Wing IDE is:
>
>
>
> Closed:
>
>
>
> Traceback (innermost last):
>
>
>
> File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
>
>   import qpid
>
> File "D:\tmp\Rabbit\rabbit.py", line 8, in ?
>
>   client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'}) File
> "D:\Python24\Lib\site-packages\qpid\client.py", line 83, in
> start
>
>   self.channel(0).connection_open(self.vhost)
>
> File "D:\tmp\Rabbit\<string>", line 3, in connection_open File
> "D:\Python24\Lib\site-packages\qpid\peer.py", line 182, in
> invoke
>
>   raise Closed(self.reason)
>
>
>
> If I debug the code it seems to go happily into the "client.py" code.....but
> when it calls "self.wait()" but then executes the following and raises
> "EOFError" because it seems to be closed or something
>
>
>
> self.started.wait()
>
>     if self.closed:
>
>       raise EOFError()
>
>
>
> I am probably doing something very stupid....just wanted to know if I need
> to START something on the server or install something like QPID? Or perhaps
> something else?
>
>
>
> Thanks for the help.....I would appreciate any sort of feedback on this.....
>
>
>
> Thanks again ;-)
>
>
>
> Lynton
>
>
> _______________________________________________
> rabbitmq-discuss mailing list
> rabbitmq-discuss at lists.rabbitmq.com
> http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
>
>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From dmitriy.samovskiy at cohesiveft.com  Fri Sep 28 15:54:41 2007
From: dmitriy.samovskiy at cohesiveft.com (Dmitriy Samovskiy)
Date: Fri, 28 Sep 2007 09:54:41 -0500
Subject: [rabbitmq-discuss] Python client to RabbitMQ.....error?
In-Reply-To: <FEF01D231D13954FAFE2C14E644DE60309132577@BRANEP01.ZA.SAPPI.COM>
References: <FEF01D231D13954FAFE2C14E644DE60309132577@BRANEP01.ZA.SAPPI.COM>
Message-ID: <46FD15B1.8010405@cohesiveft.com>

Hi Lynton,

Grice, Lynton wrote:
> 
> =INFO REPORT==== 28-Sep-2007::16:04:06 ===
> accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:3259
> 
> =INFO REPORT==== 28-Sep-2007::16:04:07 ===
> VHost access refused: no mapping for User <<"guest">>, VHost
> <<"127.0.0.1">>

Looks like this is what's causing it.
You can find access control docs at 
http://www.rabbitmq.com/admin-guide.html#access-control.

But in this case I don't know why it tries to connect you to '127.0.0.1' 
vhost - default vhost is '/' which includes mapping for user guest.

Maybe try this:


>> import qpid
>>
>> from qpid.client import Client
>>
>> from qpid.content import Content
>>
>>
>>
>> client = Client("127.0.0.1", 5672, spec=qpid.spec.load('amqp0-8.xml'))

Replace this line with this:
client = Client("127.0.0.1", 5672, spec=qpid.spec.load('amqp0-8.xml'), 
vhost='/')

And see if it works.

Also, do you have the latest qpid python libs from subversion?

>>
>> client.start({ 'LOGIN': 'guest', 'PASSWORD': 'guest'})
>>



- Dmitriy



From lynton.grice at netweaverguru.com  Fri Sep 28 19:52:04 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Fri, 28 Sep 2007 20:52:04 +0200
Subject: [rabbitmq-discuss] FW:  Python client to RabbitMQ.....error?
Message-ID: <0ML31I-1IbKwZ2QrX-0001Jp@mrelayeu.kundenserver.de>


Hi there,

OK.....it works now....well almost......the problem was the VHOST....for
some reason the VHOST in the log file was 127.0.0.1....see below

=INFO REPORT==== 28-Sep-2007::16:04:07 === VHost access refused: no 
> mapping for User <<"guest">>, VHost <<"127.0.0.1">>

So I changed the code to:

client = Client("127.0.0.1", 5672,
spec=qpid.spec.load('amqp0-8.xml'),vhost='/')

And now it works.....BUT now I have another problem.....it dies when trying
to receive the message it have just put onto the queue....

msg = q.get(timeout=1)

That throws the following exception:

KeyError: __eq__

Traceback (innermost last):

File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
  import qpid
File "D:\tmp\Rabbit\rabbit.py", line 22, in ?
  msg = q.get(timeout=1)
File "D:\Python24\Lib\site-packages\qpid\queue.py", line 39, in get
  if result == Queue.END:
File "D:\Python24\Lib\site-packages\qpid\message.py", line 70, in
__getattr__
  env, key = self._slot(attr)
File "D:\Python24\Lib\site-packages\qpid\message.py", line 63, in _slot
  field = self.method.fields.bypyname[attr]

Thanks for the help

Lynton





From matthias at lshift.net  Fri Sep 28 20:06:34 2007
From: matthias at lshift.net (Matthias Radestock)
Date: Fri, 28 Sep 2007 20:06:34 +0100
Subject: [rabbitmq-discuss] FW:  Python client to RabbitMQ.....error?
In-Reply-To: <0ML31I-1IbKwZ2QrX-0001Jp@mrelayeu.kundenserver.de>
References: <0ML31I-1IbKwZ2QrX-0001Jp@mrelayeu.kundenserver.de>
Message-ID: <46FD50BA.6080705@lshift.net>

Lynton,

Lynton Grice wrote:

> OK.....it works now....well almost......the problem was the VHOST....for
> some reason the VHOST in the log file was 127.0.0.1....see below
> 
> =INFO REPORT==== 28-Sep-2007::16:04:07 === VHost access refused: no 
>> mapping for User <<"guest">>, VHost <<"127.0.0.1">>
> 
> So I changed the code to:
> 
> client = Client("127.0.0.1", 5672,
> spec=qpid.spec.load('amqp0-8.xml'),vhost='/')

IMHO it is a bit strange for the vhost to default to the IP. You may 
want to raise that with the qpid folks.

> And now it works.....BUT now I have another problem.....it dies when trying
> to receive the message it have just put onto the queue....
> 
> msg = q.get(timeout=1)
> 
> That throws the following exception:
> 
> KeyError: __eq__
> 
> Traceback (innermost last):
> 
> File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
>   import qpid
> File "D:\tmp\Rabbit\rabbit.py", line 22, in ?
>   msg = q.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 39, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 70, in
> __getattr__
>   env, key = self._slot(attr)
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 63, in _slot
>   field = self.method.fields.bypyname[attr]

Is there anything unusual in the RabbitMQ logs? Check the LOG_BASE 
directory  - C:\Documents and Settings\User\rabbitmq\log if you are 
using the default settings.

Also, which version of the amqp0-8.xml spec file are you using? The one 
that comes with the qpid distribution is not the official version. 
Replace it with the official version from 
https://jira.amqp.org/confluence/download/attachments/720900/amqp0-8.xml. 
I don't think that's the problem in this particular case though.


Matthias.



From dmitriy.samovskiy at cohesiveft.com  Fri Sep 28 20:15:50 2007
From: dmitriy.samovskiy at cohesiveft.com (Dmitriy Samovskiy)
Date: Fri, 28 Sep 2007 14:15:50 -0500
Subject: [rabbitmq-discuss] FW:  Python client to RabbitMQ.....error?
In-Reply-To: <0ML31I-1IbKwZ2QrX-0001Jp@mrelayeu.kundenserver.de>
References: <0ML31I-1IbKwZ2QrX-0001Jp@mrelayeu.kundenserver.de>
Message-ID: <46FD52E6.80208@cohesiveft.com>



Lynton Grice wrote:
> 
> msg = q.get(timeout=1)
> 
> That throws the following exception:
> 
> KeyError: __eq__
> 
> Traceback (innermost last):
> 
> File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
>   import qpid
> File "D:\tmp\Rabbit\rabbit.py", line 22, in ?
>   msg = q.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 39, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 70, in
> __getattr__
>   env, key = self._slot(attr)
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 63, in _slot
>   field = self.method.fields.bypyname[attr]
> 

Could you please double check that you have the latest qpid python code 
from subversion? I am at rev 580460 now. Based on this traceback, what 
you have in d:\python24\lib\site-packages\qpid is not the latest: line 
numbers don't match the code and bypyname is never mentioned in any of 
the files. This can explain your vhost issue as well.

svn co http://svn.apache.org/repos/asf/incubator/qpid/trunk

http://cwiki.apache.org/qpid/source-repository.html

- Dmitriy



From tom at samplonius.org  Sat Sep 29 02:10:31 2007
From: tom at samplonius.org (Tom Samplonius)
Date: Fri, 28 Sep 2007 18:10:31 -0700 (PDT)
Subject: [rabbitmq-discuss] PHP AMQP client?
In-Reply-To: <167204d20709281122k4626a269l42645cd5b12a9461@mail.gmail.com>
Message-ID: <14381884.2751191028231737.JavaMail.root@ly.sdf.com>


----- "Alexis Richardson" <alexis.richardson at cohesiveft.com> wrote:
> On 9/28/07, Tom Samplonius <tom at samplonius.org> wrote:
> > > Does that make any sense?
> >
> >   While linking a C library to PHP would do the trick, introducing a
> new module API into PHP is definitely non-trivial.
> >
> >   I was hoping that there might be a native PHP library.  Isn't the
> Ruby library pure Ruby?  AMQP is a binary protocol, so a native PHP is
> a bit hard, but appears doable.
> 
> OK.  You are right about the Ruby client.  I'm afraid there is no
> native PHP client.  What are your thoughts on the pros and cons of
> doing one?  How useful would it be to you?

  Well, what is challenging about the PHP environment, is any long running tasks.  That is anything that can't be done during the http request/response cycle.  You will want to have a background worker handle any processing that takes 10+ seconds.  So the web handler can just put a message in the queue, and a background worker can process it.

  Also, doing critical steps in a web response code isn't exactly great either, because the Stop button issues.  In some cases, a stop, will cause the web server to stop the PHP interpreter, possible leaving various things in a unknown state.  Particularly if your PHP script is talking to an external web service.  It would be much better to have any critical processing done by a background worker, which has a more stable execution environment.

  An another issue, is serialization.  I have a remote control hardware device connected to a serial port.  Only one application can be talking to it at once.  A message queue provides an ideal serialization mechanism.

> alexis
> 
> 
> 
> -- 
> Alexis Richardson
> +44 20 7617 7339 (UK)
> +44 77 9865 2911 (cell)
> +1 650 206 2517 (US)


Tom



From lynton.grice at netweaverguru.com  Sat Sep 29 12:50:51 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Sat, 29 Sep 2007 13:50:51 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
Message-ID: <0MKwh2-1IbaqT1fAA-0000Xr@mrelayeu.kundenserver.de>

Hi there,

 

I installed the latest version of the QPID python libs from
http://svn.apache.org/repos/asf/incubator/qpid/trunk/qpid/python/ and am
having an interesting problem.. 

 

The problem is in "spec.py".....

 

It is yelling about the following line:

 

import re, textwrap, new, mllib

...

ImportError: No module named mllib

 

Traceback (innermost last):

 

File "D:\tmp\Rabbit\rabbit.py", line 1, in ?

  import qpid

File "D:\tmp\Rabbit\rabbit.py", line 1, in ?

  import qpid

File "D:\Python24\Lib\site-packages\qpid\__init__.py", line 20, in ?

  import spec, codec, connection, content, peer, delegate, client File
"D:\Python24\Lib\site-packages\qpid\spec.py", line 32, in ?

  import re, textwrap, new, mllib

 

 

Any ideas?

 

I will keep digging for now

 

Lynton

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070929/6c32def1/attachment.htm 

From lynton.grice at netweaverguru.com  Sat Sep 29 13:20:20 2007
From: lynton.grice at netweaverguru.com (Lynton Grice)
Date: Sat, 29 Sep 2007 14:20:20 +0200
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
Message-ID: <0ML2xA-1IbbJ02umv-0002Wy@mrelayeu.kundenserver.de>

Hi there,

 

My mistake...I did not add the QPID path to the 'sys.path' variable..

 

Something like:

 

import sys

sys.path = sys.path + ['D:\Python24\Lib\site-packages\python-qpid']

 

That at least works now..BUT I still get the error when I try receive a
message that I have just put onto the queue..

 

Here is the section of code:

 

print 'Receiving message' 

t = ch.basic_consume(queue="testq", no_ack=True) 

q = client.queue(t.consumer_tag) 

msg = q.get(timeout=1) 

print 'Got message:', msg.content.body

 

When it hits the line "msg = q.get(timeout=1)" it dies...here is the error
trace..

 

AttributeError: __eq__

 

Traceback (innermost last):

 

File "D:\tmp\Rabbit\rabbit.py", line 1, in ?

  import sys

File "D:\tmp\Rabbit\rabbit.py", line 27, in ?

  msg = q.get(timeout=1)

File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get

  if result == Queue.END:

File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in
__getattr__

  raise AttributeError(attr)

 

Also..not sure if it means anything but this is what is in the LOG:

 

=INFO REPORT==== 29-Sep-2007::12:38:03 ===

disk_log: repairing "d:/Documents and
Settings/Lynton/rabbitmq/db/rabbit-mnesia/rabbit_persister.LOG" ...

 

=INFO REPORT==== 29-Sep-2007::12:38:03 ===

Repaired persister log - 6 recovered, 0 bad

 

=INFO REPORT==== 29-Sep-2007::12:38:03 ===

Rolling persister log to "d:/Documents and
Settings/Lynton/rabbitmq/db/rabbit-mnesia/rabbit_persister.LOG.previous"

 

=INFO REPORT==== 29-Sep-2007::12:38:03 ===

started TCP listener on 0.0.0.0:5672

 

=INFO REPORT==== 29-Sep-2007::14:11:32 ===

accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:1531

 

=WARNING REPORT==== 29-Sep-2007::14:11:35 ===

Attempt by client to use invalid ticket 0

 

=WARNING REPORT==== 29-Sep-2007::14:11:35 ===

Lax ticket check mode: fabricating full ticket number 0

 

=INFO REPORT==== 29-Sep-2007::14:11:53 ===

Connection closed abruptly.

 

=INFO REPORT==== 29-Sep-2007::14:11:53 ===

closing TCP connection from 127.0.0.1:1531

 

And this is what it says in the broker:

 

starting database             ...done

starting core processes       ...done

starting recovery             ...done

starting persister            ...done

starting builtin applications ...done

starting TCP listeners        ...done

 

broker running

debug:: Internal rollback <0.194.0>

-          0 acks uncommitted, 0 messages unacked, 0 publishes uncommitted

 

Any ideas?

 

Chat later

 

Lynton

 

  _____  

From: Lynton Grice [mailto:lynton.grice at netweaverguru.com] 
Sent: 29 September 2007 01:51 PM
To: 'rabbitmq-discuss at lists.rabbitmq.com'; qpid-dev at incubator.apache.org
Cc: 'Matthias Radestock'; 'alexis.richardson at cohesiveft.com'
Subject: Python / QPID to RabbitMQ....no MLLIB??
Importance: High

 

Hi there,

 

I installed the latest version of the QPID python libs from
http://svn.apache.org/repos/asf/incubator/qpid/trunk/qpid/python/ and am
having an interesting problem.. 

 

The problem is in "spec.py".....

 

It is yelling about the following line:

 

import re, textwrap, new, mllib

...

ImportError: No module named mllib

 

Traceback (innermost last):

 

File "D:\tmp\Rabbit\rabbit.py", line 1, in ?

  import qpid

File "D:\tmp\Rabbit\rabbit.py", line 1, in ?

  import qpid

File "D:\Python24\Lib\site-packages\qpid\__init__.py", line 20, in ?

  import spec, codec, connection, content, peer, delegate, client File
"D:\Python24\Lib\site-packages\qpid\spec.py", line 32, in ?

  import re, textwrap, new, mllib

 

 

Any ideas?

 

I will keep digging for now

 

Lynton

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20070929/f26fcb3f/attachment.htm 

From alexis.richardson at cohesiveft.com  Sun Sep 30 15:47:19 2007
From: alexis.richardson at cohesiveft.com (Alexis Richardson)
Date: Sun, 30 Sep 2007 15:47:19 +0100
Subject: [rabbitmq-discuss] PHP AMQP client?
In-Reply-To: <14381884.2751191028231737.JavaMail.root@ly.sdf.com>
References: <167204d20709281122k4626a269l42645cd5b12a9461@mail.gmail.com>
	<14381884.2751191028231737.JavaMail.root@ly.sdf.com>
Message-ID: <167204d20709300747j39de7119wd68f19c95d07628d@mail.gmail.com>

Tom

Thanks for describing the use cases.  Knowing nothing about PHP, I
would never have realised the server workflow could benefit from
messaging in this way.

I've been scratching my head trying to think of a way to help.  One
thought was to combine one of the C clients (say, OpenAMQ, which is
BSD licensed iirc), with the WSF/PHP plug-in from WSO2, which loads
processors for, eg SOAP and WS-RM, to a PHP web server.  There is
enough family resemblance between WS and REST style invocations, and
AMQP, that the source code might help you.  You can get it from here:
http://dist.wso2.org/products/wsf/php/1.0.0/

Feel free to flame me if this is a completely bogus suggestion.

Thoughts?

alexis



On 9/29/07, Tom Samplonius <tom at samplonius.org> wrote:
>
>   Well, what is challenging about the PHP environment, is any long running tasks.  That is anything that can't be done during the http request/response cycle.  You will want to have a background worker handle any processing that takes 10+ seconds.  So the web handler can just put a message in the queue, and a background worker can process it.
>
>   Also, doing critical steps in a web response code isn't exactly great either, because the Stop button issues.  In some cases, a stop, will cause the web server to stop the PHP interpreter, possible leaving various things in a unknown state.  Particularly if your PHP script is talking to an external web service.  It would be much better to have any critical processing done by a background worker, which has a more stable execution environment.
>
>   An another issue, is serialization.  I have a remote control hardware device connected to a serial port.  Only one application can be talking to it at once.  A message queue provides an ideal serialization mechanism.
>
> > alexis
> >
> >
> >
> > --
> > Alexis Richardson
> > +44 20 7617 7339 (UK)
> > +44 77 9865 2911 (cell)
> > +1 650 206 2517 (US)
>
>
> Tom
>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)



From dmitriy.samovskiy at cohesiveft.com  Sun Sep 30 16:17:11 2007
From: dmitriy.samovskiy at cohesiveft.com (Dmitriy Samovskiy)
Date: Sun, 30 Sep 2007 10:17:11 -0500
Subject: [rabbitmq-discuss] Python / QPID to RabbitMQ....no MLLIB??
In-Reply-To: <0ML2xA-1IbbJ02umv-0002Wy@mrelayeu.kundenserver.de>
References: <0ML2xA-1IbbJ02umv-0002Wy@mrelayeu.kundenserver.de>
Message-ID: <46FFBDF7.1040407@cohesiveft.com>

Hi Lynton,

Lynton Grice wrote:
> 
> print 'Receiving message'
> t = ch.basic_consume(queue="testq", no_ack=True)
> q = client.queue(t.consumer_tag)
> msg = q.get(timeout=1)
> print 'Got message:', msg.content.body
> 
> 
> AttributeError: __eq__
> 
> Traceback (innermost last):
> File "D:\tmp\Rabbit\rabbit.py", line 1, in ?
>   import sys
> File "D:\tmp\Rabbit\rabbit.py", line 27, in ?
>   msg = q.get(timeout=1)
> File "D:\Python24\Lib\site-packages\qpid\queue.py", line 46, in get
>   if result == Queue.END:
> File "D:\Python24\Lib\site-packages\qpid\message.py", line 61, in 
> __getattr__
>   raise AttributeError(attr)

I can't reproduce your problem. Could you post your entire script?

Alternatively, could you try running disttailf.py that I posted to the 
list earlier, as Alexis once suggested? You would need to adjust 
QPID_SVN_PATH to match location of qpid python libs on your system. 
Start consumer in one window as "disttailf.py -c" and then start a 
producer in another window as "disttailf.py d:\tmp\rabbit\rabbit.py" and 
let us know what you see.

- Dmitriy



