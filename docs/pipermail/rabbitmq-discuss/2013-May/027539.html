<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Federation &amp; SSL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Federation%20%26%20SSL&In-Reply-To=%3C51A61670.8050104%40cray.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027481.html">
   <LINK REL="Next"  HREF="027544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Federation &amp; SSL</H1>
    <B>Eric Cozzi</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Federation%20%26%20SSL&In-Reply-To=%3C51A61670.8050104%40cray.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Federation &amp; SSL">n16483 at cray.com
       </A><BR>
    <I>Wed May 29 15:53:36 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027481.html">[rabbitmq-discuss] RabbitMQ Federation &amp; SSL
</A></li>
        <LI>Next message: <A HREF="027544.html">[rabbitmq-discuss] RabbitMQ Federation &amp; SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27539">[ date ]</a>
              <a href="thread.html#27539">[ thread ]</a>
              <a href="subject.html#27539">[ subject ]</a>
              <a href="author.html#27539">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

Sorry for the delay in responding.

I have the LDAP auth plugin logging at Network level. There are no 
additional log statements that are being output. I've also confirmed 
that the user exists in my LDAP. So, I'm not sure why it couldn't find 
the user, unless it's not looking for the correct username. It should be 
using the CN from the SSL certificate as the username, which in this 
case should be either ecozzi-02 or ecozzi-03.

Erlang version is:
ecozzi-01:/home/ecozzi # cat /usr/lib64/erlang/releases/RELEASES
[{release,&quot;OTP  APN 181 01&quot;,&quot;R15B02&quot;,&quot;5.9.2&quot;,
           [{kernel,&quot;2.15.2&quot;,&quot;/usr/lib64/erlang/lib/kernel-2.15.2&quot;},
            {stdlib,&quot;1.18.2&quot;,&quot;/usr/lib64/erlang/lib/stdlib-1.18.2&quot;},
            {sasl,&quot;2.2.1&quot;,&quot;/usr/lib64/erlang/lib/sasl-2.2.1&quot;}],
           permanent}].

Rabbit Version:
ecozzi-01:/home/ecozzi # rabbitmqctl status
Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ecozzi-01</A>' ...
[{pid,3800},
  {running_applications,
      [{rabbitmq_federation_management,&quot;RabbitMQ Federation Management&quot;,
           &quot;3.0.1&quot;},
       {rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;3.0.1&quot;},
       {rabbitmq_federation,&quot;RabbitMQ Federation&quot;,&quot;3.0.1&quot;},
       {rabbitmq_auth_backend_ldap,&quot;RabbitMQ LDAP Authentication Backend&quot;,
           &quot;3.0.1&quot;},
       {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;3.0.1&quot;},
       {rabbit,&quot;RabbitMQ&quot;,&quot;3.0.1&quot;},
       {ssl,&quot;Erlang/OTP SSL application&quot;,&quot;5.1&quot;},
       {public_key,&quot;Public key infrastructure&quot;,&quot;0.16&quot;},
       {crypto,&quot;CRYPTO version 2&quot;,&quot;2.2&quot;},
       {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.10&quot;},
       {rabbitmq_auth_mechanism_ssl,
           &quot;RabbitMQ SSL authentication (SASL EXTERNAL)&quot;,&quot;3.0.1&quot;},
       {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;3.0.1&quot;},
       {webmachine,&quot;webmachine&quot;,&quot;1.9.1-rmq3.0.1-git52e62bc&quot;},
       {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;2.3.1-rmq3.0.1-gitd541e9a&quot;},
       {xmerl,&quot;XML parser&quot;,&quot;1.3.2&quot;},
       {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.9.1&quot;},
       {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.7.1&quot;},
       {eldap,&quot;Ldap api&quot;,&quot;1.0&quot;},
       {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;3.0.1&quot;},
       {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2.1&quot;},
       {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18.2&quot;},
       {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15.2&quot;}]},
  {os,{unix,linux}},
  {erlang_version,
      &quot;Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:2:2] 
[async-threads:30] [hipe] [kernel-poll:true]\n&quot;},
  {memory,
      [{total,37603792},
       {connection_procs,162600},
       {queue_procs,235552},
       {plugins,377592},
       {other_proc,10276868},
       {mnesia,94464},
       {mgmt_db,84936},
       {msg_index,32576},
       {other_ets,1236360},
       {binary,306624},
       {code,20204649},
       {atom,760729},
       {other_system,3830842}]},
  {vm_memory_high_watermark,0.4},
  {vm_memory_limit,205919027},
  {disk_free_limit,1000000000},
  {disk_free,0},
  {file_descriptors,
      
[{total_limit,924},{total_used,16},{sockets_limit,829},{sockets_used,4}]},
  {processes,[{limit,1048576},{used,249}]},
  {run_queue,0},
  {uptime,406985}]
...done.

On 05/25/2013 03:56 PM, Matthias Radestock wrote:
&gt;<i> Eric,
</I>&gt;<i>
</I>&gt;<i> On 24/05/13 22:55, Eric Cozzi wrote:
</I>&gt;&gt;<i>                   {{badarg,{error,noSuchObject}},
</I>&gt;&gt;<i> [{rabbit_access_control,'-check_vhost_access/2-fun-0-',3,[]},
</I>&gt;&gt;<i>                     {rabbit_access_control,check_access,5,[]},
</I>&gt;<i>
</I>&gt;<i> That indicates that your LDAP auth backend returned a 'noSuchObject' 
</I>&gt;<i> error when performing the vhost access check for the user.
</I>&gt;<i>
</I>&gt;<i> I suggest you enable logging in the LDAP auth plug-in to track down 
</I>&gt;<i> the cause.
</I>&gt;<i>
</I>&gt;<i> However, the error really should be handled more gracefully by rabbit, 
</I>&gt;<i> and I am at a loss why it's producing such a stack trace. What 
</I>&gt;<i> versions of RabbitMQ and Erlang are you running and how did you 
</I>&gt;<i> install rabbit (e.g. from a package, compiled from source, etc)?
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027481.html">[rabbitmq-discuss] RabbitMQ Federation &amp; SSL
</A></li>
	<LI>Next message: <A HREF="027544.html">[rabbitmq-discuss] RabbitMQ Federation &amp; SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27539">[ date ]</a>
              <a href="thread.html#27539">[ thread ]</a>
              <a href="subject.html#27539">[ subject ]</a>
              <a href="author.html#27539">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
