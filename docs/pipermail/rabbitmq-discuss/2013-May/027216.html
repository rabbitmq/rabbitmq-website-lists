<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 700k msgs using 6.3 GiB?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20700k%20msgs%20using%206.3%20GiB%3F&In-Reply-To=%3C9C056A40-C6D5-470F-B3BB-FD32E2CC059E%40teksol.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027215.html">
   <LINK REL="Next"  HREF="027217.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 700k msgs using 6.3 GiB?</H1>
    <B>Fran&#231;ois Beausoleil</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20700k%20msgs%20using%206.3%20GiB%3F&In-Reply-To=%3C9C056A40-C6D5-470F-B3BB-FD32E2CC059E%40teksol.info%3E"
       TITLE="[rabbitmq-discuss] 700k msgs using 6.3 GiB?">francois at teksol.info
       </A><BR>
    <I>Thu May 16 01:52:42 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027215.html">[rabbitmq-discuss] Pika 0.9.13 Released
</A></li>
        <LI>Next message: <A HREF="027217.html">[rabbitmq-discuss] 700k msgs using 6.3 GiB?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27216">[ date ]</a>
              <a href="thread.html#27216">[ thread ]</a>
              <a href="subject.html#27216">[ subject ]</a>
              <a href="author.html#27216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all!

Attached are a report and screenshot showing my RabbitMQ instance using 6.3 GiB of RAM for a mere 700,000 3 KiB messages. I've had 17 million messages on that same machine three weeks ago. The machine is an 8 GiB virtual machine instance with 2 GiB swap. I had the high memory watermark set to 0.8, because I preferred to block less and I didn't expect to hit problems. My consumers are fast enough.

Looking at the report, I see 5.5 GiB of RAM used by binaries. Isn't that what's supposed to be paged out to disk?

The three queues with unconsumed messages are holding message of 3KiB or less. That's a maximum of 3 GiB.

I rebooted the machine after taking that report and screenshot, so I'm processing again now.

What did I do wrong?

Thank you for any enlightenment!
Fran&#231;ois

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: report.txt
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/c94bcd75/attachment.txt">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/c94bcd75/attachment.txt</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: RabbitMQ Management.jpeg
Type: image/jpg
Size: 44560 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/c94bcd75/attachment.jpg">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/c94bcd75/attachment.jpg</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4142 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/c94bcd75/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/c94bcd75/attachment.bin</A>&gt;
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027215.html">[rabbitmq-discuss] Pika 0.9.13 Released
</A></li>
	<LI>Next message: <A HREF="027217.html">[rabbitmq-discuss] 700k msgs using 6.3 GiB?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27216">[ date ]</a>
              <a href="thread.html#27216">[ thread ]</a>
              <a href="subject.html#27216">[ subject ]</a>
              <a href="author.html#27216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
