<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to use separate connections for sending	and receiving data in Spring-RabbitMQ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20use%20separate%20connections%20for%20sending%0A%09and%20receiving%20data%20in%20Spring-RabbitMQ%3F&In-Reply-To=%3C61C733AA-3D50-4F00-99AF-1377F4EE4834%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026943.html">
   <LINK REL="Next"  HREF="026960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to use separate connections for sending	and receiving data in Spring-RabbitMQ?</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20use%20separate%20connections%20for%20sending%0A%09and%20receiving%20data%20in%20Spring-RabbitMQ%3F&In-Reply-To=%3C61C733AA-3D50-4F00-99AF-1377F4EE4834%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] How to use separate connections for sending	and receiving data in Spring-RabbitMQ?">tim at rabbitmq.com
       </A><BR>
    <I>Tue May  7 07:46:30 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026943.html">[rabbitmq-discuss] How to use separate connections for sending and	receiving data in Spring-RabbitMQ?
</A></li>
        <LI>Next message: <A HREF="026960.html">[rabbitmq-discuss] Question about java client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26950">[ date ]</a>
              <a href="thread.html#26950">[ thread ]</a>
              <a href="subject.html#26950">[ subject ]</a>
              <a href="author.html#26950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

According to the spring-amqp docs, the CachingConnectionFactory will create a proxy to a single connection only, so you'll either need to have two connection factory beans in your configuration or inherit AbstractConnectionFactory and create your own using Rabbit's own client APIs. You might also want to consider using a MessageListenerContainer bean to consume asynchronously, but even if you stick with AmqpTemplate, you'll need to configure another bean for consuming so that it will use another (different) connection factory bean and thereby ensure a second connection is used.

I'd suggest asking on a spring-amqp forum or mailing list if you need more detailed assistance.

Cheers,
Tim

On 7 May 2013, at 00:58, Kapil Goyal wrote:

&gt;<i> Hi,
</I>&gt;<i>  
</I>&gt;<i> While exploring flow-control in RabbitMQ, I found this:
</I>&gt;<i>  
</I>&gt;<i> &#8220;The intent here is to introduce a flow control mechanism that throttles producers but lets consumers continue unaffected. However, since AMQP permits producers and consumers to operate on the same channel, and on different channels of a single connection, this logic is necessarily imperfect. In practice that does not pose any problems for most applications since the throttling is observable merely as a delay. Nevertheless, other design considerations permitting, it is advisable to only use individual AMQP connections for either producing or consuming.&#8221;
</I>&gt;<i>  
</I>&gt;<i> I am using Spring Integration in my web-application to send/receive data to/from RabbitMQ broker. I declare connection-factory, amqp-template, rabbit-admin, channels and inbound/outbound adapters using XML. What is the recommended way to ensure separate connections are used for sending and receiving? My observation is that by default, both sending and receiving are done on the same connection but on different channels.
</I>&gt;<i>  
</I>&gt;<i> Thanks
</I>&gt;<i> Kapil
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130507/779f1f8f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130507/779f1f8f/attachment.htm</A>&gt;
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026943.html">[rabbitmq-discuss] How to use separate connections for sending and	receiving data in Spring-RabbitMQ?
</A></li>
	<LI>Next message: <A HREF="026960.html">[rabbitmq-discuss] Question about java client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26950">[ date ]</a>
              <a href="thread.html#26950">[ thread ]</a>
              <a href="subject.html#26950">[ subject ]</a>
              <a href="author.html#26950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
