<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 700k msgs using 6.3 GiB?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20700k%20msgs%20using%206.3%20GiB%3F&In-Reply-To=%3C51944813.4040803%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027216.html">
   <LINK REL="Next"  HREF="027218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 700k msgs using 6.3 GiB?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20700k%20msgs%20using%206.3%20GiB%3F&In-Reply-To=%3C51944813.4040803%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] 700k msgs using 6.3 GiB?">matthias at rabbitmq.com
       </A><BR>
    <I>Thu May 16 03:44:35 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027216.html">[rabbitmq-discuss] 700k msgs using 6.3 GiB?
</A></li>
        <LI>Next message: <A HREF="027218.html">[rabbitmq-discuss] 700k msgs using 6.3 GiB?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27217">[ date ]</a>
              <a href="thread.html#27217">[ thread ]</a>
              <a href="subject.html#27217">[ subject ]</a>
              <a href="author.html#27217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Fran&#231;ois,

On 16/05/13 01:52, Fran&#231;ois Beausoleil wrote:
&gt;<i> Attached are a report and screenshot showing my RabbitMQ instance
</I>&gt;<i> using 6.3 GiB of RAM for a mere 700,000 3 KiB messages.
</I>&gt;<i>
</I>&gt;<i> What did I do wrong?
</I>
There are a number of empty queues with fairly high memory usage. 
Judging from the sequence numbers - several hundred million - and uptime 
(~3 weeks) they are probably moving at a reasonable pace under normal 
conditions, though obviously not much is moving at the time of the 
report since the producers were blocked.

Such active queues take up substantially more memory than idle queues. 
Much of that will be garbage that hasn't been collected yet. That 
garbage in turn may reference message payloads. That's how megs of queue 
memory can turn into gigs of binary memory since non-tiny message 
payloads are not counted towards queue memory but binary memory.

So I don't think there is anything unusual going on here. Having said 
that, it would really help our future investigation if you

1) ran the most recent rabbit version (3.1.0)
2) ran the most recent Erlang version (R16B)
3) disabled non-essential plug-ins

Thanks.

Matthias.
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027216.html">[rabbitmq-discuss] 700k msgs using 6.3 GiB?
</A></li>
	<LI>Next message: <A HREF="027218.html">[rabbitmq-discuss] 700k msgs using 6.3 GiB?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27217">[ date ]</a>
              <a href="thread.html#27217">[ thread ]</a>
              <a href="subject.html#27217">[ subject ]</a>
              <a href="author.html#27217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
