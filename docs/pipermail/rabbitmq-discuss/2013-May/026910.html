<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unexpected blocking in channel.basicGet()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unexpected%20blocking%20in%20channel.basicGet%28%29&In-Reply-To=%3CCAFCYt5Nvrx6RK3rpjV5XQ2zvZstKdJ3wZLDweKJfuHoi71MeJQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026909.html">
   <LINK REL="Next"  HREF="026907.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unexpected blocking in channel.basicGet()</H1>
    <B>Dave Goldstein</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unexpected%20blocking%20in%20channel.basicGet%28%29&In-Reply-To=%3CCAFCYt5Nvrx6RK3rpjV5XQ2zvZstKdJ3wZLDweKJfuHoi71MeJQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Unexpected blocking in channel.basicGet()">dave at performantsoftware.com
       </A><BR>
    <I>Fri May  3 18:06:53 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026909.html">[rabbitmq-discuss] Unexpected blocking in channel.basicGet()
</A></li>
        <LI>Next message: <A HREF="026907.html">[rabbitmq-discuss] Bug/Behavior Change in binds to header exchanges	in rabbitmq 3.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26910">[ date ]</a>
              <a href="thread.html#26910">[ thread ]</a>
              <a href="subject.html#26910">[ subject ]</a>
              <a href="author.html#26910">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the informative response; I appreciate the insight.

Dave


On Fri, May 3, 2013 at 12:19 PM, Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 3 May 2013, at 16:53, Dave Goldstein wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; So if the call blocks indefinitely without erroring out, what does that
</I>&gt;<i> suggest
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> The usual suspect is a network connectivity problem, either due to an
</I>&gt;<i> interruption in service, broker failure/crash/restart or intermediate
</I>&gt;<i> network kit (such as firewalls). A typical TCP/IP stack can take quite a
</I>&gt;<i> long time to &quot;notice&quot; the peer socket has &quot;disappeared&quot;, while the client
</I>&gt;<i> is sat waiting for a reply.
</I>&gt;<i>
</I>&gt;<i> &gt; and is there any way for me to recover from this beyond detecting and
</I>&gt;<i> killing the thread?
</I>&gt;<i>
</I>&gt;<i> Unfortunately there aren't any silver bullet solutions to this kind of
</I>&gt;<i> problem. Detecting an idle worker (based on whatever your definition of
</I>&gt;<i> &quot;idle&quot; happens to be) and killing it is certinaly the must common approach.
</I>&gt;<i> Bear in mind that the OS networking stack is already trying to 'detect' the
</I>&gt;<i> problem, and it's unlikely you'll be able to improve on what it is doing.
</I>&gt;<i>
</I>&gt;<i> It might help if you enable AMQP heartbeats in your client, which would at
</I>&gt;<i> least detect an unresponsive network connection in a timely fashion. These
</I>&gt;<i> will do the job of killing the connection and any channels for you, so at
</I>&gt;<i> least you don't have to home bake a solution based on killing threads. The
</I>&gt;<i> other thing that might help is to consider turning on TCP keep-alives in
</I>&gt;<i> your OS networking configuration. These perform a similar function, but at
</I>&gt;<i> a much lower level, however they come with overheads and caveats that they
</I>&gt;<i> might affect your application (and/or other network interactions taking
</I>&gt;<i> place on the machine) in a wide variety of ways.
</I>&gt;<i>
</I>&gt;<i> &gt; BTW, I was running client 3.0.1 and have just moved to 3.0.4 to see if
</I>&gt;<i> the behavior changes.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> This won't have changed between releases, if I've diagnosed it correctly
</I>&gt;<i> at least.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130503/f455c072/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130503/f455c072/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026909.html">[rabbitmq-discuss] Unexpected blocking in channel.basicGet()
</A></li>
	<LI>Next message: <A HREF="026907.html">[rabbitmq-discuss] Bug/Behavior Change in binds to header exchanges	in rabbitmq 3.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26910">[ date ]</a>
              <a href="thread.html#26910">[ thread ]</a>
              <a href="subject.html#26910">[ subject ]</a>
              <a href="author.html#26910">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
