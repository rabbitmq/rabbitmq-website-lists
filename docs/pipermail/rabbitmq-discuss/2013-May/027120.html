<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Resource%20alarms%20in%203.1%20seems%20to%20block%0A%09operations%20other%20than%20basic.publish&In-Reply-To=%3CCC6C8353-CFC6-4F69-9C1B-075AAF30D676%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027117.html">
   <LINK REL="Next"  HREF="027121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Resource%20alarms%20in%203.1%20seems%20to%20block%0A%09operations%20other%20than%20basic.publish&In-Reply-To=%3CCC6C8353-CFC6-4F69-9C1B-075AAF30D676%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish">tim at rabbitmq.com
       </A><BR>
    <I>Mon May 13 18:45:33 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027117.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations other than basic.publish
</A></li>
        <LI>Next message: <A HREF="027121.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations other than basic.publish
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27120">[ date ]</a>
              <a href="thread.html#27120">[ thread ]</a>
              <a href="subject.html#27120">[ subject ]</a>
              <a href="author.html#27120">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13 May 2013, at 18:21, Michael Klishin wrote:
&gt;<i> 
</I>&gt;<i> 2013/5/13 Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
</I>&gt;<i> I didn't try that, but it wouldn't make any difference if that alarm was still set, since the producer would get blocked immediately would it not?
</I>&gt;<i> 
</I>&gt;<i> I first clear the queue, then restart the producer, so no.
</I>
Hmn, I can't get that to break, because I can't get the queue to be non-empty in the first place. Here's what I'm doing, perhaps you can point out the step I'm missing.

1. start the broker
2. start the producer
3. start the consumer
4. set the watermark very low using rabbitmqctl, e.g., 0.001
5. see the alarm in the logs
6. stop the producer

** at this point, the queue is always empty

7. stop the consumer
8. start the consumer

** but at this point, the exercise is moot, because the queue is empty so 'blocking' is the expected state. Sorry I didn't check on this with you sooner - I didn't realise I needed to look at that when I got started as I wasn't clear on the implication of &quot;blocking&quot; as the consumer state. The consumer stays in this state of course, since there are no messages in the queue.

So what am I doing wrong here?

Cheers,
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130513/2166aa62/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130513/2166aa62/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027117.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations other than basic.publish
</A></li>
	<LI>Next message: <A HREF="027121.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations other than basic.publish
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27120">[ date ]</a>
              <a href="thread.html#27120">[ thread ]</a>
              <a href="subject.html#27120">[ subject ]</a>
              <a href="author.html#27120">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
