<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [Architecture] Real-time feed with RabbitMQ and	NodeJS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BArchitecture%5D%20Real-time%20feed%20with%20RabbitMQ%20and%0A%09NodeJS&In-Reply-To=%3C9f9a83c2-2db4-4a24-83b9-4a227d772819%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026798.html">
   <LINK REL="Next"  HREF="026799.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [Architecture] Real-time feed with RabbitMQ and	NodeJS</H1>
    <B>Dexter</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BArchitecture%5D%20Real-time%20feed%20with%20RabbitMQ%20and%0A%09NodeJS&In-Reply-To=%3C9f9a83c2-2db4-4a24-83b9-4a227d772819%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] [Architecture] Real-time feed with RabbitMQ and	NodeJS">dexterp37 at gmail.com
       </A><BR>
    <I>Wed May  1 11:22:13 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026798.html">[rabbitmq-discuss] Question about starting a node
</A></li>
        <LI>Next message: <A HREF="026799.html">[rabbitmq-discuss] .NET Client ConnectionFactory threading	issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26801">[ date ]</a>
              <a href="thread.html#26801">[ thread ]</a>
              <a href="subject.html#26801">[ subject ]</a>
              <a href="author.html#26801">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm trying to design a system which allows for real time notifications 
(sms, email, browser) on some topics. I'm having some doubts about the 
architecture and on how I'm planning to use RabbitMQ. I'm sorry if the 
question is naive, but I'm a newbie of RabbitMQ!

==== Requirements ====
- User profiles are stored in a database. Each user profile contains the 
name of up to 2  topic of interest (i.e. Server1.CPU and 
Server3.RAM.Temperature).
- Topic name won't change often
- Agents can post messages to a certain topic of interest (i.e. post 
messages to Server1.CPU or to Server1, the latter should be received by 
everyone subscribed to Server1.CPU or Server1.SomethingElse)
- User get notified using based on their choice (SMS to the phone number 
stored in their profile or to the email address. Could also be to the 
twitter account)!
- The system should be both vertically and horizontally scalable.

==== Architecture ====

(1) Agents -&gt; (2) Thin NodeJS RESTful API -&gt; (3) CouchDB -&gt; (4)_changes -&gt; 
(5) CouchDB - RabbitMQ Bridge -&gt; (6) Notifiers

1. Agents can be thought as services residing on a machine posting update 
messages to certain topics through the exposed API
2. The exposed API, which allows to add messages to the database (CouchDB) 
using a POST message call
3. CouchDB storing messages data, user data, etc.
4. A feed of changes coming from the DB which notifies (5) about new data 
in the DB
5. This point is a bit tricky and is where I'm having some doubts. 

I was thinking about using routing keys and topics ( 
<A HREF="http://www.rabbitmq.com/tutorials/tutorial-five-java.html">http://www.rabbitmq.com/tutorials/tutorial-five-java.html</A> ) and to let the 
CouchDB-RabbitMQ nodejs application publish the messages to the queue 
related to the topic of interest. Each queue acts as a task queue so that 
the load can be distributed among different instances of notifiers for EACH 
topic.

6. When a notifier consumes a messages, it gets the relevant data from the 
database (i.e. mobile phone number for the SMS or twitter account name) and 
notifies the user.

=== Questions ===
Is this a reasonable use case for RabbitMQ?
Is there any feature of RabbitMQ I'm misusing or not considering properly?
Is the queue organization in RabbitMQ correct? 

Thank you for your help,
Dexter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130501/8207c7f5/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130501/8207c7f5/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026798.html">[rabbitmq-discuss] Question about starting a node
</A></li>
	<LI>Next message: <A HREF="026799.html">[rabbitmq-discuss] .NET Client ConnectionFactory threading	issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26801">[ date ]</a>
              <a href="thread.html#26801">[ thread ]</a>
              <a href="subject.html#26801">[ subject ]</a>
              <a href="author.html#26801">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
