<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Disable writing to disk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Disable%20writing%20to%20disk&In-Reply-To=%3C51925BCA.7060707%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027158.html">
   <LINK REL="Next"  HREF="027161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Disable writing to disk</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Disable%20writing%20to%20disk&In-Reply-To=%3C51925BCA.7060707%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Disable writing to disk">emile at rabbitmq.com
       </A><BR>
    <I>Tue May 14 16:44:10 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027158.html">[rabbitmq-discuss] Disable writing to disk
</A></li>
        <LI>Next message: <A HREF="027161.html">[rabbitmq-discuss] Disable writing to disk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27159">[ date ]</a>
              <a href="thread.html#27159">[ thread ]</a>
              <a href="subject.html#27159">[ subject ]</a>
              <a href="author.html#27159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Matthias,

On 14/05/13 16:23, Matthias Reik wrote:
&gt;<i> we have been using RabbitMQ for quite a while and are happy users of it, 
</I>&gt;<i> but now we got a new requirement to not write, the messages that are 
</I>&gt;<i> coming through a specific queue, to disk.
</I>&gt;<i> 
</I>&gt;<i> Does RabbitMQ support such a use case?
</I>
Not at the moment.

&gt;<i> One alternative would of course be to create a RamDisk and write the 
</I>&gt;<i> content to that one, but it was clear from this article
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/blog/2011/01/20/rabbitmq-backing-stores-databases-and-disks/">http://www.rabbitmq.com/blog/2011/01/20/rabbitmq-backing-stores-databases-and-disks/</A>
</I>&gt;<i> that this is not a good solution (even though it might be a solution for 
</I>&gt;<i> us).
</I>

A RAM-disk will guarantee that messages don't reach secondary storage,
but I agree this is not a satisfactory solution. It will also affect all
the queues, while you may need finer control.

An alternative option would be to set the vm_memory_high_watermark to a
very large factor (e.g. 100). The broker will then behave as if it had
alot more memory than it really has (and therefore it runs the risk of
crashing with an out-of-memory error). At the moment the broker may
start sending messages to disk when as little as 5% of RAM is in use.
Setting the vm_memory_high_watermark high enough that this threshold is
never reached should avoid disk writes.

Can you explain why you want to avoid messages in disk? We have been
asked about this feature before, but the request has never been
accompanied by a strong motivating argument.



-Emile





</PRE>






























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027158.html">[rabbitmq-discuss] Disable writing to disk
</A></li>
	<LI>Next message: <A HREF="027161.html">[rabbitmq-discuss] Disable writing to disk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27159">[ date ]</a>
              <a href="thread.html#27159">[ thread ]</a>
              <a href="subject.html#27159">[ subject ]</a>
              <a href="author.html#27159">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
