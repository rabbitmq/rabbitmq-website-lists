<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] create a policy for concrete nodes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20create%20a%20policy%20for%20concrete%20nodes&In-Reply-To=%3C39996A0B-30A3-4739-950F-09A5DA29D077%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027284.html">
   <LINK REL="Next"  HREF="027400.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] create a policy for concrete nodes</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20create%20a%20policy%20for%20concrete%20nodes&In-Reply-To=%3C39996A0B-30A3-4739-950F-09A5DA29D077%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] create a policy for concrete nodes">tim at rabbitmq.com
       </A><BR>
    <I>Fri May 17 14:55:13 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027284.html">[rabbitmq-discuss] create a policy for concrete nodes
</A></li>
        <LI>Next message: <A HREF="027400.html">[rabbitmq-discuss] create a policy for concrete nodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27286">[ date ]</a>
              <a href="thread.html#27286">[ thread ]</a>
              <a href="subject.html#27286">[ subject ]</a>
              <a href="author.html#27286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 17 May 2013, at 13:52, Slyth wrote:
&gt;<i> The first machine should be the &quot;master&quot;. 
</I>
RabbitMQ has no concept of a master node. When queues are mirrored across multiple nodes, one of the nodes is chosen to be the &quot;queue master&quot; for a mirrored queue, but that node can freely die and one of the queue slaves will take over (as the master) on another node. The master node for one queue, might not be master for another queue. Not all queues have to be mirrored.

&gt;<i> On this one are all queues and so
</I>&gt;<i> on created and this is the one who is connected to the AMQP server and
</I>&gt;<i> perhaps some other services.
</I>
RabbitMQ *is* the AMQP server, so what do you mean &quot;the one who is connected to the AMQP server&quot; exactly? I'm really struggling to understand what you're trying to do.

&gt;<i> Therefore this machine has to be safed by a
</I>&gt;<i> mirror (one or better two machines).
</I>

Well clustering two RabbitMQ servers will not mirror a whole machine. If you enable HA/mirror mode, then it will mirror &quot;the contents of some queues&quot;, where 'some queues' means any queue matching the policy.

&gt;<i> Is that a possible scenario? 
</I>
It is still very unclear what you are trying to achieve. I do apologise if that's due to the language barrier. I'd really like to be able to help more, but I'm still struggling to understand the basic requirements. The picture you've sent over shows 1 node acting as a mirror for a cluster. That's not how active/mirror queues work at, nor does it represent a resilient architecture, which I'm guessing is what your boss is trying to achieve.

&gt;<i> If it is, I would creat a cluster with 3 machines. And on the first I would
</I>&gt;<i> create queues with configurations we need. Then I would create on all tree
</I>&gt;<i> machines scripts for sending and receiving messages from the queues.
</I>[snip]
&gt;<i> And
</I>&gt;<i> then at least I have to create a policy for the mirror.
</I>
I have no idea what your trying to do here. Why do you need to create scripts for sending messages around a cluster?

&gt;<i> By this step I'm uncertain.
</I>
You're not the only one. I have absolutely *no idea* what you're trying to achieve. I have this suspicion that the requirement your boss has given you is to replicate application data across multiple machines, using a message broker (like RabbitMQ) as the communications fabric. But that might not be it. You might be trying to design a messaging application and your boss wants to design it to avoid message loss. It's really not clear what the fundamental purpose is here. Where does the data come from? What are you trying to do with the data? What other applications are involved? Where does RabbitMQ (or any other messaging product) fit in to this?

What is very clear is that you're struggling with messaging concepts in general, as well as understanding clustering and HA. I would *very* strongly suggest that you consider contacting <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">info at rabbitmq.com</A> and discussing the possibility of getting a regional PSO representative on the phone, to talk about your requirements and whether or not the company you're working for would benefit from some short term consultancy. If you're after a messaging broker, then it's very likely indeed that RabbitMQ would be ideal for your needs, but I'm not sure I can offer any more help unless you're able to articulate the problem in way I can understand. 

Regards,
Tim Watson



</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027284.html">[rabbitmq-discuss] create a policy for concrete nodes
</A></li>
	<LI>Next message: <A HREF="027400.html">[rabbitmq-discuss] create a policy for concrete nodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27286">[ date ]</a>
              <a href="thread.html#27286">[ thread ]</a>
              <a href="subject.html#27286">[ subject ]</a>
              <a href="author.html#27286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
