<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Resource%20alarms%20in%203.1%20seems%20to%20block%0A%09operations%20other%20than%20basic.publish&In-Reply-To=%3CEAF7B6FC-4AAF-46BC-B47C-8622821C735A%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026967.html">
   <LINK REL="Next"  HREF="027114.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Resource%20alarms%20in%203.1%20seems%20to%20block%0A%09operations%20other%20than%20basic.publish&In-Reply-To=%3CEAF7B6FC-4AAF-46BC-B47C-8622821C735A%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish">tim at rabbitmq.com
       </A><BR>
    <I>Mon May 13 16:59:00 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026967.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish
</A></li>
        <LI>Next message: <A HREF="027114.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations other than basic.publish
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27113">[ date ]</a>
              <a href="thread.html#27113">[ thread ]</a>
              <a href="subject.html#27113">[ subject ]</a>
              <a href="author.html#27113">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael,

A couple of quick questions about this...

1. are you sure the queue is not empty by the time the consumer is restarted?
2. do you receive no methods at all in the consumer, not even connection negotiation?

I can't replicate this viz (1) for me the queue is always empty by the time the consumer is stopped and restarted and (2) I see the connection and basic.consume get going before the consumer gets stuck and it is in 'blocking' mode, which given that the queue is empty and the alarm still set, is apparently ok.

Cheers,
Tim

On 3 May 2013, at 10:45, Michael Klishin wrote:

&gt;<i> 2013/5/3 Tim Watson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>&gt;
</I>&gt;<i> Have you got a reproducible (ish) test that I can run on a linux box? If so, I'll poke around and make sure it's not showing up there too.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://gist.github.com/michaelklishin/cea9aff14506e95def59">https://gist.github.com/michaelklishin/cea9aff14506e95def59</A>
</I>&gt;<i> 
</I>&gt;<i> You'll need Ruby and RubyGems available.
</I>&gt;<i> 
</I>&gt;<i> Put all 3 files in a directory, then do
</I>&gt;<i> 
</I>&gt;<i>  * [sudo] gem install bundler
</I>&gt;<i>  * bundle install
</I>&gt;<i>  * run bundle exec ruby ./consumer.rb and bundle exec ruby ./producer.rb in two tabs
</I>&gt;<i>  
</I>&gt;<i> You can tweak message rates and size in publisher.rb. If you want to see methods
</I>&gt;<i> received from rabbit, run the consumer with BUNNY_LOG_LEVEL=debug.
</I>&gt;<i> -- 
</I>&gt;<i> MK
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
</I>&gt;<i> <A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130513/fb46e243/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130513/fb46e243/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026967.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish
</A></li>
	<LI>Next message: <A HREF="027114.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations other than basic.publish
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27113">[ date ]</a>
              <a href="thread.html#27113">[ thread ]</a>
              <a href="subject.html#27113">[ subject ]</a>
              <a href="author.html#27113">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
