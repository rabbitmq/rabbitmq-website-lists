<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20After%20weekly%20log%20rotatation%20was%20done%2C%0A%20the%20command%20%22rabbitmqctl%20rotate-logs%22%20never%20stop&In-Reply-To=%3C519353D2.4020400%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027189.html">
   <LINK REL="Next"  HREF="027220.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20After%20weekly%20log%20rotatation%20was%20done%2C%0A%20the%20command%20%22rabbitmqctl%20rotate-logs%22%20never%20stop&In-Reply-To=%3C519353D2.4020400%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop">matthias at rabbitmq.com
       </A><BR>
    <I>Wed May 15 10:22:26 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027189.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
        <LI>Next message: <A HREF="027220.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27190">[ date ]</a>
              <a href="thread.html#27190">[ thread ]</a>
              <a href="subject.html#27190">[ subject ]</a>
              <a href="author.html#27190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nate,

On 15/05/13 09:51, Nate wrote:
&gt;<i> 1.  Did logs get rotated successfully in the past or did all log
</I>&gt;<i> rotations get stuck?
</I>&gt;<i> Only two of nodes in the cluster get stuck. And two clusters are in the
</I>&gt;<i> same situation.
</I>
My question was whether the logs on these nodes ever got rotated 
successfully in the past.

&gt;<i> 2. Your initial report showed a few more processes, including a
</I>&gt;<i> beam.smpprocess. Presumably that's still there too, right? If so, please
</I>&gt;<i> postthe complete command line for that.
</I>&gt;<i>
</I>&gt;<i> rabbitmq  8972  0.0  2.8 580024 510588 ?       Ssl  May12   0:00
</I>&gt;<i> /usr/lib/erlang/erts-5.9/bin/beam.smp -- -root /usr/lib/erlang -progname
</I>&gt;<i> erl -- -home /var/lib/rabbitmq -- -pa
</I>&gt;<i> /usr/lib/rabbitmq/lib/rabbitmq_server-3.0.1/sbin/../ebin -noshell
</I>&gt;<i> -noinput -hidden -sname rabbitmqctl8972 -s rabbit_control_main -nodename
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq1</A> -extra rotate_logs
</I>&gt;<i>
</I>&gt;<i> 3. I wanna know the root cause too! Therefore, I prefer to keeping the
</I>&gt;<i> process and let it telling us the reason.
</I>
Unfortunately the rabbitmqctl node is a hidden node, so we cannot 
connect to it. The best we can do is make it crash with

   kill -SIGUSR1 8972

That should produce an erl_crash.dump. Not sure where it will end up 
though. Possibly in the rabbitmq home dir. Anyway, I'm sure you'll 
manage to track it down. Stick that crash dump on something like dropbox 
and post a link.


Regards,

Matthias.
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027189.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
	<LI>Next message: <A HREF="027220.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27190">[ date ]</a>
              <a href="thread.html#27190">[ thread ]</a>
              <a href="subject.html#27190">[ subject ]</a>
              <a href="author.html#27190">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
