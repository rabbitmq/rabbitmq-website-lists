<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Shovel authentication question (possible bug)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20authentication%20question%20%28possible%20bug%29&In-Reply-To=%3C51A8CC8B.4090005%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027605.html">
   <LINK REL="Next"  HREF="027611.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Shovel authentication question (possible bug)</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Shovel%20authentication%20question%20%28possible%20bug%29&In-Reply-To=%3C51A8CC8B.4090005%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Shovel authentication question (possible bug)">simon at rabbitmq.com
       </A><BR>
    <I>Fri May 31 17:15:07 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027605.html">[rabbitmq-discuss] Shovel authentication question (possible bug)
</A></li>
        <LI>Next message: <A HREF="027611.html">[rabbitmq-discuss] Shovel authentication question (possible bug)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27607">[ date ]</a>
              <a href="thread.html#27607">[ thread ]</a>
              <a href="subject.html#27607">[ subject ]</a>
              <a href="author.html#27607">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31/05/13 16:29, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">john.hayden at nokia.com</A> wrote:
&gt;<i> I am very new to rabbitmq and shovel but I may have found a bug:
</I>
&lt;snip&gt;

&gt;<i>          [ {sources, [{broker, &quot;<A HREF="amqp://sensu:mypass@/sensu&quot;}]}">amqp://sensu:mypass@/sensu&quot;}]}</A>
</I>
&lt;snip&gt;

&gt;<i> ** Reason for termination ==
</I>&gt;<i> ** {{badmatch,{error,access_refused}},
</I>&gt;<i>      [{rabbit_shovel_worker,make_conn_and_chan,1},
</I>&gt;<i>       {rabbit_shovel_worker,handle_cast,2},
</I>&gt;<i>       {gen_server2,handle_msg,2},
</I>&gt;<i>       {proc_lib,init_p_do_apply,3}]}
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Notice this line:
</I>&gt;<i> [{amqp_params_direct,&lt;&lt;&quot;sensu&quot;&gt;&gt;,none,&lt;&lt;&quot;sensu&quot;&gt;&gt;,
</I>&gt;<i>                               '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-40-215-251</A>',none,[]}],
</I>&gt;<i>
</I>&gt;<i> If I read this correctly, the password is not being passed and THUS
</I>&gt;<i> authentication is being denied.
</I>
No, not really. The source URI &quot;<A HREF="amqp://sensu:mypass@/sensu&quot;">amqp://sensu:mypass@/sensu&quot;</A> doesn't 
specify a host, therefore it connects with the direct client (i.e. via 
Erlang message passing rather than AMQP). In most contexts the direct 
client does not need a password (since if you can connect via Erlang 
message passing you must be trusted). So the password in that URL is 
ignored (and you can take it out) but this is not your problem - you 
have some other access control issue.

Check the logs for errors looking like:

=ERROR REPORT==== 31-May-2013::17:12:33 ===
closing AMQP connection &lt;0.388.0&gt; (127.0.0.1:40730 -&gt; 127.0.0.1:5672):
{handshake_error,starting,0,
  {amqp_error,access_refused,
              &quot;PLAIN login refused: user 'user' - invalid credentials&quot;,
              'connection.start_ok'}}

or similar.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027605.html">[rabbitmq-discuss] Shovel authentication question (possible bug)
</A></li>
	<LI>Next message: <A HREF="027611.html">[rabbitmq-discuss] Shovel authentication question (possible bug)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27607">[ date ]</a>
              <a href="thread.html#27607">[ thread ]</a>
              <a href="subject.html#27607">[ subject ]</a>
              <a href="author.html#27607">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
