<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Someone else with a nodedown error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Someone%20else%20with%20a%20nodedown%20error&In-Reply-To=%3CE788DD53-008F-4BDE-8863-891EA94FB07D%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027283.html">
   <LINK REL="Next"  HREF="027288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Someone else with a nodedown error</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Someone%20else%20with%20a%20nodedown%20error&In-Reply-To=%3CE788DD53-008F-4BDE-8863-891EA94FB07D%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Someone else with a nodedown error">tim at rabbitmq.com
       </A><BR>
    <I>Fri May 17 14:32:52 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027283.html">[rabbitmq-discuss] Someone else with a nodedown error
</A></li>
        <LI>Next message: <A HREF="027288.html">[rabbitmq-discuss] Someone else with a nodedown error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27285">[ date ]</a>
              <a href="thread.html#27285">[ thread ]</a>
              <a href="subject.html#27285">[ subject ]</a>
              <a href="author.html#27285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmn

On 17 May 2013, at 13:45, Eric Berg wrote:

&gt;<i> Thanks for your response Tim. If you would like SSH access to these boxes let me know, we can work something out privately. Thanks!
</I>&gt;<i> 
</I>
Ok, though first of all I'd like to know if you supply logs for the nodes in question? A private drop box would be fine.

&gt;<i> Update from yesterday:
</I>&gt;<i> It looks like 2 of the 4 nodes in our cluster have finally shut down, all channels are now gone. Another node in the cluster hangs on
</I>&gt;<i> &gt; sudo rabbitmqctl status
</I>&gt;<i> 
</I>&gt;<i> and the final node in the cluster appears to be running just fine. It however sees the unresponsive node in the cluster status as a running node, as does the web UI.
</I>&gt;<i> 
</I>
Right, so we've still got an unresponsive node. Do you have any mirrored queues, and if so, what synchronisation and/or recovery policies are you using?

&gt;<i> 
</I>&gt;<i> When you upgraded your cluster, what RabbitMQ version did you upgrade from and to, and did you upgrade Erlang as well and if so, which versions were involved?
</I>&gt;<i> - we upgraded from 3.0.4 to 3.1.0, we did not upgrade Erlang it was/is at version R15B03. We did however install it via RPM with the --nodeps flag because it did not detect the Erlang dependency correctly. We had previously installed Erlang:
</I>&gt;<i> 
</I>&gt;<i> esl-erlang.x86_64    R15B03-2           @erlang-solutions 
</I>&gt;<i> 
</I>
Hmn, I suppose it's possible that this re-install went wrong somehow and is causing some of the things below.

&gt;<i> 
</I>&gt;<i> What happens if you start up Erlang by itself, using `erl -sname test` - do you still see all those screwy warnings? 
</I>&gt;<i> All 4 of the nodes can run this without issue as my user, when I sudo su to rabbitmq user I get errors on 2 of the 4 nodes as such:
</I>&gt;<i> 
</I>
Well the nodes should always be running as the rabbitmq user, so how're you starting them as your user? That might be at the root of some of these problems, viz the rabbitmq-server (service) should always run as the rabbitmq user and when issuing rabbitmqctl commands and the like, you would normally do `$ sudo rabbitmqctl status` and so on. Log files would definitely help though.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130517/162874d0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130517/162874d0/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027283.html">[rabbitmq-discuss] Someone else with a nodedown error
</A></li>
	<LI>Next message: <A HREF="027288.html">[rabbitmq-discuss] Someone else with a nodedown error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27285">[ date ]</a>
              <a href="thread.html#27285">[ thread ]</a>
              <a href="subject.html#27285">[ subject ]</a>
              <a href="author.html#27285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
