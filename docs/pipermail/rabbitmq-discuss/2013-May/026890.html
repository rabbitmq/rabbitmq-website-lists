<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Resource alarms in 3.1 seems to block operations	other than basic.publish
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Resource%20alarms%20in%203.1%20seems%20to%20block%20operations%0A%09other%20than%20basic.publish&In-Reply-To=%3CCAE3HoVSaAZg5tppPnZoquazG0rXdeMpN0%2BWrYbwxLW5PaO2oAQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026889.html">
   <LINK REL="Next"  HREF="026892.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations	other than basic.publish</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Resource%20alarms%20in%203.1%20seems%20to%20block%20operations%0A%09other%20than%20basic.publish&In-Reply-To=%3CCAE3HoVSaAZg5tppPnZoquazG0rXdeMpN0%2BWrYbwxLW5PaO2oAQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Resource alarms in 3.1 seems to block operations	other than basic.publish">michael.s.klishin at gmail.com
       </A><BR>
    <I>Fri May  3 10:09:00 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026889.html">[rabbitmq-discuss] Error queue handling
</A></li>
        <LI>Next message: <A HREF="026892.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26890">[ date ]</a>
              <a href="thread.html#26890">[ thread ]</a>
              <a href="subject.html#26890">[ subject ]</a>
              <a href="author.html#26890">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm observing something odd since upgrading to 3.1.

I'm adding various stress tests for Bunny and hit RAM alarms every
so often. After that happens, starting new consumers takes so long
that it times out in the client. Also, I've noticed in the management UI
that existing consumers do not drain queues.

Sometimes Rabbit stops responding altogether.

Steps to reproduce:

 * Start a &quot;hello, world&quot;-like consumer and producer
 * Make the producer publish large (tens of MBs) messages as fast as it can
 * See an alarm message in the log
 * Shut down the publisher

At this point, consumers receive no deliveries.

 * Shut down the consumer
 * Start the consumer again with log level = debug

The consumer seems completely blocked, receiving no methods from RabbitMQ.

 * Purge the queue

Now consumer can start, open a connection and register consumers
successfully.
-- 
MK

<A HREF="http://github.com/michaelklishin">http://github.com/michaelklishin</A>
<A HREF="http://twitter.com/michaelklishin">http://twitter.com/michaelklishin</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130503/155fbd58/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130503/155fbd58/attachment.htm</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026889.html">[rabbitmq-discuss] Error queue handling
</A></li>
	<LI>Next message: <A HREF="026892.html">[rabbitmq-discuss] Resource alarms in 3.1 seems to block	operations other than basic.publish
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26890">[ date ]</a>
              <a href="thread.html#26890">[ thread ]</a>
              <a href="subject.html#26890">[ subject ]</a>
              <a href="author.html#26890">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
