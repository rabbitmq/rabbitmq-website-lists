<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Repairing a crashed cluster - Obtaining persisted msgs from master
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Repairing%20a%20crashed%20cluster%20-%20Obtaining%0A%20persisted%20msgs%20from%20master&In-Reply-To=%3C5180E736.9050408%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026795.html">
   <LINK REL="Next"  HREF="026810.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Repairing a crashed cluster - Obtaining persisted msgs from master</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Repairing%20a%20crashed%20cluster%20-%20Obtaining%0A%20persisted%20msgs%20from%20master&In-Reply-To=%3C5180E736.9050408%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Repairing a crashed cluster - Obtaining persisted msgs from master">simon at rabbitmq.com
       </A><BR>
    <I>Wed May  1 10:58:14 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026795.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
        <LI>Next message: <A HREF="026810.html">[rabbitmq-discuss] Repairing a crashed cluster - Obtaining persisted msgs from master
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26797">[ date ]</a>
              <a href="thread.html#26797">[ thread ]</a>
              <a href="subject.html#26797">[ subject ]</a>
              <a href="author.html#26797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/04/13 18:10, ranjitiyer wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> Part of my question was answered here
</I>&gt;<i> <A HREF="http://rabbitmq.1065348.n5.nabble.com/Repairing-a-a-crashed-cluster-td22466.html.">http://rabbitmq.1065348.n5.nabble.com/Repairing-a-a-crashed-cluster-td22466.html.</A>
</I>&gt;<i> I have a follow up question for the following scenario.
</I>&gt;<i>
</I>&gt;<i> Say, I have a master/slave cluster with mirrored persisted queues. Slave
</I>&gt;<i> dies, messages m1, m2 are published to the master. Master dies. Slave comes
</I>&gt;<i> up - it can't because master is dead. I realized am going to have to follow
</I>&gt;<i> the instructions on the previous post to get erl.exe and eventually the
</I>&gt;<i> rabbit running on the slave machine.
</I>
Note that since that message, RabbitMQ 3.0 was released, with 
&quot;rabbitmqctl forget_cluster_node&quot; - which might help you get the slave 
started if the master is gone.

&gt;<i> Good so far. I now also want the messages of the master to be brought over
</I>&gt;<i> to the slave because I don't wanna lose m1 and m2 sitting on the master
</I>&gt;<i> machine. I know that queue messages are persisted in the mnesia database
</I>&gt;<i> located under c:\user\appdata\...\db\. Is there a way to export data from
</I>&gt;<i> this db and import it into the db on the slave machine?
</I>
So the Mnesia database itself can't be moved - but the subdirectories 
&quot;queues&quot; &quot;msg_store_transient&quot; and &quot;msg_store_persistent&quot; probably can. 
You could try that - I would take backups of everything first though.

But what are you trying to do? If the master is still available and more 
up to date than the slave then why are you removing it?

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026795.html">[rabbitmq-discuss] lager vs sasl error log
</A></li>
	<LI>Next message: <A HREF="026810.html">[rabbitmq-discuss] Repairing a crashed cluster - Obtaining persisted msgs from master
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26797">[ date ]</a>
              <a href="thread.html#26797">[ thread ]</a>
              <a href="subject.html#26797">[ subject ]</a>
              <a href="author.html#26797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
