<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20empty%20rabbit_serial%20file%20causes%20rabbitmq%0A%20cluster%20to%20hang&In-Reply-To=%3C51A6190B.2060002%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027538.html">
   <LINK REL="Next"  HREF="027533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20empty%20rabbit_serial%20file%20causes%20rabbitmq%0A%20cluster%20to%20hang&In-Reply-To=%3C51A6190B.2060002%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang">matthias at rabbitmq.com
       </A><BR>
    <I>Wed May 29 16:04:43 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027538.html">[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang
</A></li>
        <LI>Next message: <A HREF="027533.html">[rabbitmq-discuss] RabbitMQ shovel - standalone app?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27540">[ date ]</a>
              <a href="thread.html#27540">[ thread ]</a>
              <a href="subject.html#27540">[ subject ]</a>
              <a href="author.html#27540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/05/13 15:43, Denisenko, Mikhail (NIH/NLM/NCBI) [C] wrote:
&gt;<i> Thanks for the feature request. In our case this file become
</I>&gt;<i> corrupted after restart of rabbitmq. Our restart procedure is to try
</I>&gt;<i> graceful restart first and after some time try kill -9 if it didn't
</I>&gt;<i> exit. I suspect that in this case it didn't die within timeout and
</I>&gt;<i> was killed with -9 and maybe it didn't flush buffer for this file.
</I>
Hmm. Doesn't quite add up. The file gets written during startup, not 
shutdown. And the time window should be very short, since the file is 
tiny. And we call 'sync' after the writing.

Matthias.
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027538.html">[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang
</A></li>
	<LI>Next message: <A HREF="027533.html">[rabbitmq-discuss] RabbitMQ shovel - standalone app?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27540">[ date ]</a>
              <a href="thread.html#27540">[ thread ]</a>
              <a href="subject.html#27540">[ subject ]</a>
              <a href="author.html#27540">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
