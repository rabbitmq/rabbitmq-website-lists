<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Regarding Federation Plugin Configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Regarding%20Federation%20Plugin%20Configuration&In-Reply-To=%3C5190B191.2070206%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027080.html">
   <LINK REL="Next"  HREF="027048.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Regarding Federation Plugin Configuration</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Regarding%20Federation%20Plugin%20Configuration&In-Reply-To=%3C5190B191.2070206%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Regarding Federation Plugin Configuration">simon at rabbitmq.com
       </A><BR>
    <I>Mon May 13 10:25:37 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027080.html">[rabbitmq-discuss] Regarding Federation Plugin Configuration
</A></li>
        <LI>Next message: <A HREF="027048.html">[rabbitmq-discuss] [java-client] Is there a full working example of &quot;DefaultConsumer&quot; without *deprecated * QueueingConsumer ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27087">[ date ]</a>
              <a href="thread.html#27087">[ thread ]</a>
              <a href="subject.html#27087">[ subject ]</a>
              <a href="author.html#27087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/05/2013 19:50, Jain, Punit wrote:
&gt;<i> Thanks Simon for prompt response and for the link. I verified the
</I>&gt;<i> configuration according to my requirements, but messages are not
</I>&gt;<i> being backed-up in upstream queue. Properties like expires and
</I>&gt;<i> message_ttl are set to default. I couldn't figure out any plausible
</I>&gt;<i> reason for this. Could it be related to exchange/queue publishing
</I>&gt;<i> properties on upstream broker?
</I>
I don't think so. On a more modern RabbitMQ you could publish with low 
per-message TTL, but 2.8.2 does not support that.

My expectation is still that you are doing something weird; keeping 
messages while the link is down is a fundamental property of federation; 
if it were broken in any release I would expect to have heard about it 
by now.

So to debug this, let's look at how it's meant to work:

The downstream broker declares the upstream queue named &quot;federation 
(exchange) -&gt; (node)&quot; the first time the link goes up. This queue is 
durable and is not deleted at an point. The downstream broker then binds 
this queue to the upstream exchange (via an intermediate exchange) 
whenever a binding is declared downstream.

When a link is up, the messages from the upstream exchange are routed to 
this queue and consumed immediately by the downstream broker. When a 
link goes down the consuming stops but the bindings still exist, so 
messages back up in the queue. When the link comes back, the downstream 
broker deletes and recreates all the bindings (in case they have changed 
meanwhile) and starts consuming from the queue again.

So if that's how it's meant to work, what is going wrong in your case? 
Is the queue being deleted? Are the bindings to the queue being deleted? 
Something else?

Cheers, Simon
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027080.html">[rabbitmq-discuss] Regarding Federation Plugin Configuration
</A></li>
	<LI>Next message: <A HREF="027048.html">[rabbitmq-discuss] [java-client] Is there a full working example of &quot;DefaultConsumer&quot; without *deprecated * QueueingConsumer ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27087">[ date ]</a>
              <a href="thread.html#27087">[ thread ]</a>
              <a href="subject.html#27087">[ subject ]</a>
              <a href="author.html#27087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
