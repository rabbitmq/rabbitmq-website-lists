<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20After%20weekly%20log%20rotatation%20was%20done%2C%0A%20the%20command%20%22rabbitmqctl%20rotate-logs%22%20never%20stop&In-Reply-To=%3CCAHqyxU36RqZTcgePO9MojEW9WGCi%2BGqds5r6gEEoY-s-PX57wA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027180.html">
   <LINK REL="Next"  HREF="027190.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop</H1>
    <B>Nate</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20After%20weekly%20log%20rotatation%20was%20done%2C%0A%20the%20command%20%22rabbitmqctl%20rotate-logs%22%20never%20stop&In-Reply-To=%3CCAHqyxU36RqZTcgePO9MojEW9WGCi%2BGqds5r6gEEoY-s-PX57wA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop">natewang0425 at gmail.com
       </A><BR>
    <I>Wed May 15 09:51:30 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027180.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
        <LI>Next message: <A HREF="027190.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27189">[ date ]</a>
              <a href="thread.html#27189">[ thread ]</a>
              <a href="subject.html#27189">[ subject ]</a>
              <a href="author.html#27189">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matthias,

1.  Did logs get rotated successfully in the past or did all log rotations get
stuck?
Only two of nodes in the cluster get stuck. And two clusters are in the
same situation.

2. Your initial report showed a few more processes, including a
beam.smp process.
Presumably that's still there too, right? If so, please post the complete
command line for that.

rabbitmq  8972  0.0  2.8 580024 510588 ?       Ssl  May12   0:00
/usr/lib/erlang/erts-5.9/bin/beam.smp -- -root /usr/lib/erlang -progname
erl -- -home /var/lib/rabbitmq -- -pa
/usr/lib/rabbitmq/lib/rabbitmq_server-3.0.1/sbin/../ebin -noshell -noinput
-hidden -sname rabbitmqctl8972 -s rabbit_control_main -nodename
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq1</A> -extra rotate_logs

3. I wanna know the root cause too! Therefore, I prefer to keeping the
process and let it telling us the reason.

Thanks for your help!

Regards,
Nate.


2013/5/15 Matthias Radestock-3 [via RabbitMQ] &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ml-node+s1065348n26696h41 at n5.nabble.com</A>&gt;

&gt;<i> On 15/05/13 07:52, Nate wrote:
</I>&gt;<i> &gt;      After doing the rabbitmqctl rotate_logs, rabbitmq.log.1 show the '
</I>&gt;<i> &gt; Rotating logs with suffix '' ' in the end of log file and rabbitmq start
</I>&gt;<i> &gt; writing the new logs to rabbitmq.log.
</I>&gt;<i>
</I>&gt;<i> Great. That's good to know. So it appears that everything is well with
</I>&gt;<i> your server and that the problem is with the logrotate initiation.
</I>&gt;<i>
</I>&gt;<i> &gt; However, the old rotate process were
</I>&gt;<i> &gt; still exist. BTW, my another 3-node cluster has same log rotate issue
</I>&gt;<i> &gt; today.....
</I>&gt;<i>
</I>&gt;<i> Did logs get rotated successfully in the past or did all log rotations
</I>&gt;<i> get stuck?
</I>&gt;<i>
</I>&gt;<i> &gt; root      8944  0.0  0.0   8668  1052 ?        S    May12   0:00 sh -c ?
</I>&gt;<i> &gt; /sbin/service rabbitmq-server rotate-logs &gt; /dev/null? ?
</I>&gt;<i> &gt; /sbin/service rabbitmq-server rotate-logs &gt; /dev/null?
</I>&gt;<i> &gt; /var/log/rabbitmq/*.log
</I>&gt;<i> &gt; root      8946  0.0  0.0   8804  1296 ?        S    May12   0:00 /bin/sh
</I>&gt;<i> &gt; /sbin/service rabbitmq-server rotate-logs
</I>&gt;<i> &gt; root      8951  0.0  0.0  10896  1392 ?        S    May12   0:00 /bin/sh
</I>&gt;<i> &gt; /etc/init.d/rabbitmq-server rotate-logs
</I>&gt;<i>
</I>&gt;<i> Your initial report showed a few more processes, including a beam.smp
</I>&gt;<i> process. Presumably that's still there too, right? If so, please post
</I>&gt;<i> the complete command line for that.
</I>&gt;<i>
</I>&gt;<i> You could just kill that process, but I am keen to get to the bottom of
</I>&gt;<i> the problem so am hoping that we will be able to get that process to
</I>&gt;<i> tell us where it's stuck.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> [hidden email] &lt;<A HREF="http://user/SendEmail.jtp?type=node&amp;node=26696&amp;i=0">http://user/SendEmail.jtp?type=node&amp;node=26696&amp;i=0</A>&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>  If you reply to this email, your message will be added to the discussion
</I>&gt;<i> below:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://rabbitmq.1065348.n5.nabble.com/Re-After-weekly-log-rotatation-was-done-the-command-rabbitmqctl-rotate-logs-never-stop-tp26607p26696.html">http://rabbitmq.1065348.n5.nabble.com/Re-After-weekly-log-rotatation-was-done-the-command-rabbitmqctl-rotate-logs-never-stop-tp26607p26696.html</A>
</I>&gt;<i>  To unsubscribe from Re: After weekly log rotatation was done, the command
</I>&gt;<i> &quot;rabbitmqctl rotate-logs&quot; never stop, click here&lt;<A HREF="http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=26607&amp;code=bmF0ZXdhbmcwNDI1QGdtYWlsLmNvbXwyNjYwN3w0NTY2Njg2Njk=">http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=26607&amp;code=bmF0ZXdhbmcwNDI1QGdtYWlsLmNvbXwyNjYwN3w0NTY2Njg2Njk=</A>&gt;
</I>&gt;<i> .
</I>&gt;<i> NAML&lt;<A HREF="http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml">http://rabbitmq.1065348.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml</A>&gt;
</I>&gt;<i>
</I>



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/Re-After-weekly-log-rotatation-was-done-the-command-rabbitmqctl-rotate-logs-never-stop-tp26607p26705.html">http://rabbitmq.1065348.n5.nabble.com/Re-After-weekly-log-rotatation-was-done-the-command-rabbitmqctl-rotate-logs-never-stop-tp26607p26705.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/9589a985/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130515/9589a985/attachment.htm</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027180.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
	<LI>Next message: <A HREF="027190.html">[rabbitmq-discuss] After weekly log rotatation was done, the command &quot;rabbitmqctl rotate-logs&quot; never stop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27189">[ date ]</a>
              <a href="thread.html#27189">[ thread ]</a>
              <a href="subject.html#27189">[ subject ]</a>
              <a href="author.html#27189">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
