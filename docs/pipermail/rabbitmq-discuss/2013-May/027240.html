<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Flow control issue when shovelling messages between data centres
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Flow%20control%20issue%20when%20shovelling%20messages%0A%20between%20data%20centres&In-Reply-To=%3C5194C140.4040600%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027226.html">
   <LINK REL="Next"  HREF="027166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Flow control issue when shovelling messages between data centres</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Flow%20control%20issue%20when%20shovelling%20messages%0A%20between%20data%20centres&In-Reply-To=%3C5194C140.4040600%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Flow control issue when shovelling messages between data centres">simon at rabbitmq.com
       </A><BR>
    <I>Thu May 16 12:21:36 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027226.html">[rabbitmq-discuss] Flow control issue when shovelling messages between data centres
</A></li>
        <LI>Next message: <A HREF="027166.html">[rabbitmq-discuss] .NET Client Connection.CreateModel Possible Deadlock / Not Thread Safe?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27240">[ date ]</a>
              <a href="thread.html#27240">[ thread ]</a>
              <a href="subject.html#27240">[ subject ]</a>
              <a href="author.html#27240">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/05/13 09:44, SimonT wrote:
&gt;<i> Thanks Simon, much appreciated. In our case, as far as we can tell, these
</I>&gt;<i> rabbit nodes have bags of available RAM when the flow control occurs - would
</I>&gt;<i> you still expect paging to disc of messages in that case?
</I>
In an effort to try to smooth out performance and prevent you running 
into a wall when memory use gets high, Rabbit will start paging some 
stuff to disc at around ~5% memory use.

&gt;<i> Another thing to mention is that we are using a rather old version (RabbitMQ
</I>&gt;<i> 2.8.2 on Erlang R14B04). Do you think this might be relevant?
</I>
Ah.

There was also a bug (fixed in 2.8.3) where queues that had lots of 
consumers and / or consumers with a small prefetch count could 
over-prioritise consuming, to the extent of refusing to accept publishes 
at all (and thus stick in flow control) until they emptied completely. 
Does that sound like what you are seeing?

It may be worth upgrading anyway of course.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027226.html">[rabbitmq-discuss] Flow control issue when shovelling messages between data centres
</A></li>
	<LI>Next message: <A HREF="027166.html">[rabbitmq-discuss] .NET Client Connection.CreateModel Possible Deadlock / Not Thread Safe?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27240">[ date ]</a>
              <a href="thread.html#27240">[ thread ]</a>
              <a href="subject.html#27240">[ subject ]</a>
              <a href="author.html#27240">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
