<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] getting duplicated delivery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20getting%20duplicated%20delivery&In-Reply-To=%3CCAAef2CKzetVBxy-xvdjj6bm_ZBtz-iJfcgG2Rk%3DfN6fJGyYEoQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027234.html">
   <LINK REL="Next"  HREF="027256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] getting duplicated delivery</H1>
    <B>Billy Hand</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20getting%20duplicated%20delivery&In-Reply-To=%3CCAAef2CKzetVBxy-xvdjj6bm_ZBtz-iJfcgG2Rk%3DfN6fJGyYEoQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] getting duplicated delivery">billythethird at gmail.com
       </A><BR>
    <I>Thu May 16 15:44:36 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027234.html">[rabbitmq-discuss] getting duplicated delivery
</A></li>
        <LI>Next message: <A HREF="027256.html">[rabbitmq-discuss] getting duplicated delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27257">[ date ]</a>
              <a href="thread.html#27257">[ thread ]</a>
              <a href="subject.html#27257">[ subject ]</a>
              <a href="author.html#27257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I will do some more testing today based on your's and and Tim's suggestions.

For the record, the connection/channel never closes.  After processing one
message from the queue the consumers go back and look for more.  Once they
are idle again I can get all 30 consumers to respond to one message.

There is no delay in redelivery either.  The consumers all seem to get the
message at the exact same time.

Thanks for your quick responses.  I'll reply back when I have investigated
more.


On Thu, May 16, 2013 at 4:53 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 16/05/13 08:08, Tim Watson wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Once a message is acked and
</I>&gt;&gt;<i> delivered, a queue will not send it (i.e., the same message) to any
</I>&gt;&gt;<i> further consumers.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is the key point. It will also not redeliver it if the consumer just
</I>&gt;<i> acks slowly.
</I>&gt;<i>
</I>&gt;<i> But the fact that turning off acks solves the problem suggests that the
</I>&gt;<i> messages *are* getting redelivered - so the OP should check the consumer
</I>&gt;<i> code and make sure that messages are being acked before the connection or
</I>&gt;<i> channel is closed.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130516/09af69c4/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130516/09af69c4/attachment.htm</A>&gt;
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027234.html">[rabbitmq-discuss] getting duplicated delivery
</A></li>
	<LI>Next message: <A HREF="027256.html">[rabbitmq-discuss] getting duplicated delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27257">[ date ]</a>
              <a href="thread.html#27257">[ thread ]</a>
              <a href="subject.html#27257">[ subject ]</a>
              <a href="author.html#27257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
