<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Flow control issue when shovelling messages	between data centres
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Flow%20control%20issue%20when%20shovelling%20messages%0A%09between%20data%20centres&In-Reply-To=%3C0cadcddc-2cc1-4fac-8eb4-a4bf97ba904f%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027173.html">
   <LINK REL="Next"  HREF="027192.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Flow control issue when shovelling messages	between data centres</H1>
    <B>SimonT</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Flow%20control%20issue%20when%20shovelling%20messages%0A%09between%20data%20centres&In-Reply-To=%3C0cadcddc-2cc1-4fac-8eb4-a4bf97ba904f%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Flow control issue when shovelling messages	between data centres">simonthorogood at hotmail.com
       </A><BR>
    <I>Tue May 14 17:50:06 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027173.html">[rabbitmq-discuss] smallest amount of work for a consumer
</A></li>
        <LI>Next message: <A HREF="027192.html">[rabbitmq-discuss] Flow control issue when shovelling messages between data centres
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27164">[ date ]</a>
              <a href="thread.html#27164">[ thread ]</a>
              <a href="subject.html#27164">[ subject ]</a>
              <a href="author.html#27164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have a rabbit cluster in our existing data centre (call it DC1). This 
cluster has messages (fairly large in size - around 100K) being published 
to it at a rate of between 500 to 1000/s. 

Recently, we introduced a new data centre with its own rabbit cluster 
(DC2). Our intention is to shovel messages that originate in DC1 to DC2 and 
vice versa. The DCs are connected by a fast (500Mb/s) line

We are finding that when we set up a queue in DC1 to shovel messages from 
DC1 to DC2 we are triggering 'flow control' back-pressure on many of the 
client connections, resulting in the production of messages in DC1 slowing 
down dramatically and becoming spiky and unreliable. Memory and CPU on all 
nodes in the cluster appear to be normal (i.e. well within high water-mark 
limits).

Can anybody suggest why the addition of this shovelling queue should cause 
such a dramatic change in cluster behavior.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130514/21e90504/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130514/21e90504/attachment.htm</A>&gt;
</PRE>




































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027173.html">[rabbitmq-discuss] smallest amount of work for a consumer
</A></li>
	<LI>Next message: <A HREF="027192.html">[rabbitmq-discuss] Flow control issue when shovelling messages between data centres
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27164">[ date ]</a>
              <a href="thread.html#27164">[ thread ]</a>
              <a href="subject.html#27164">[ subject ]</a>
              <a href="author.html#27164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
