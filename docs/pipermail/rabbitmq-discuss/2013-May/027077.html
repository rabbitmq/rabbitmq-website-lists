<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] persistent connections on rabbitmq-server when android client losses internet connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20persistent%20connections%20on%20rabbitmq-server%20when%0A%20android%20client%20losses%20internet%20connection&In-Reply-To=%3C3824e27a-ccc4-4c73-8a0b-d0a9e111433c%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027073.html">
   <LINK REL="Next"  HREF="027092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] persistent connections on rabbitmq-server when android client losses internet connection</H1>
    <B>Jure Novi&#269;</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20persistent%20connections%20on%20rabbitmq-server%20when%0A%20android%20client%20losses%20internet%20connection&In-Reply-To=%3C3824e27a-ccc4-4c73-8a0b-d0a9e111433c%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] persistent connections on rabbitmq-server when android client losses internet connection">jurenovic at gmail.com
       </A><BR>
    <I>Sat May 11 13:08:20 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027073.html">[rabbitmq-discuss] does client caches messages?
</A></li>
        <LI>Next message: <A HREF="027092.html">[rabbitmq-discuss] persistent connections on rabbitmq-server	when android client losses internet connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27077">[ date ]</a>
              <a href="thread.html#27077">[ thread ]</a>
              <a href="subject.html#27077">[ subject ]</a>
              <a href="author.html#27077">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello

I have a question about about connections to server from java client. I'm 
developing a Android application using rabbitmq-java-client library. I 
followed the tutorials on the rabbitmq website, so I created a 
ConnectionFactory with my own ip address (without any timeout or 
heartbeat), then called newConnection(). Everything works fine, sending and 
receiving.

The problem arrises when I turn off network connection on an android 
device, the connection on rabbitmq-server is still there (for long time). 
If I want to achieve that the server clear my connection I have to use 
heartbeat. I also tried to create new *ConnectionFactory* class and 
override *configureSocket* and call socket.setKeepAlive(true). That neither 
helped. 

My colleague is developing an iOS application, and another one is 
developing an erlang client. They don't have this problem, if they kill the 
app or turn of network connection, the connections on rabbitmq-server are 
cleared immediately (2-4s). *They are not using any timeouts or heartbeats*.

And just another thing, on RabbitMQ Management webpage, under connections 
tab I noticed that my java client has a timeout value of 600s (when not 
setting heartbeat), when C-client or Erlang client doesn't have any value 
(blank) under timeout column. 

Hope anyone can help me.

Best,
Jure
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130511/9f04c6c2/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130511/9f04c6c2/attachment.htm</A>&gt;
</PRE>














































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027073.html">[rabbitmq-discuss] does client caches messages?
</A></li>
	<LI>Next message: <A HREF="027092.html">[rabbitmq-discuss] persistent connections on rabbitmq-server	when android client losses internet connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27077">[ date ]</a>
              <a href="thread.html#27077">[ thread ]</a>
              <a href="subject.html#27077">[ subject ]</a>
              <a href="author.html#27077">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
