<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Server hanging on start, randomly dying
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Server%20hanging%20on%20start%2C%20randomly%20dying&In-Reply-To=%3CCAD6m6fEs9t52iC3shi%2BAs-HuA%3DxRESJtS52Naz6tocM_AKfv6g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027267.html">
   <LINK REL="Next"  HREF="027279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Server hanging on start, randomly dying</H1>
    <B>Jason McIntosh</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Server%20hanging%20on%20start%2C%20randomly%20dying&In-Reply-To=%3CCAD6m6fEs9t52iC3shi%2BAs-HuA%3DxRESJtS52Naz6tocM_AKfv6g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Server hanging on start, randomly dying">mcintoshj at gmail.com
       </A><BR>
    <I>Thu May 16 21:07:15 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027267.html">[rabbitmq-discuss] Channel versus Connection shutdown
</A></li>
        <LI>Next message: <A HREF="027279.html">[rabbitmq-discuss] Server hanging on start, randomly dying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27270">[ date ]</a>
              <a href="thread.html#27270">[ thread ]</a>
              <a href="subject.html#27270">[ subject ]</a>
              <a href="author.html#27270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So first, my environment:
RabbitMQ 3.0.4
Oracle linux 6.2
Cluster of 3 nodes, 2 disc, 1 ram.

The problem I'm hitting is I've got one of my nodes hanging and dying.  I
got it to start and about a minute later it dies again.  I have no reports
in any log files, and not a clue what the heck is going on.

At first, I thought it might be tied to some invalid commands, i.e.
rabbitmqctl list_status -p SomeNonExistentQueue (which seems to have
problems regardless).  That command though works on one of the other nodes.

Any advice here?  Nothing as state in the logs.  I've hung in various
places, for example:
-- rabbit boot start
starting file handle cache server
...done
starting worker pool
 ...done
starting database                                                     ...

I get here and things stop.  Other times the whole server starts but then
nothing is working.  This cluster has been in a good state for weeks and
all of a sudden has started doing this.  In non detached mode, by starting
rabbitmq-server AS root by hand, I have the process running.  Below is the
results after a rabbitmqctl status that I managed to get before the system
crashed, as well as the list of plugins.  The last thing in the log file is
&quot;Management plugin started.  Port: 15672&quot;

Thanks for any advice!
Jason

{erlang_version,
     &quot;Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:24:24]
[async-threads:30] [hipe] [kernel-poll:true]\n&quot;},
 {memory,
     [{total,39045064},
      {connection_procs,5664},
      {queue_procs,792848},
      {plugins,163256},
      {other_proc,11498766},
      {mnesia,404168},
      {mgmt_db,18304},
      {msg_index,94904},
      {other_ets,1224192},
      {binary,42552},
      {code,18246956},
      {atom,703377},
      {other_system,5850077}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,54118517964},
 {disk_free_limit,1000000000},
 {disk_free,840619569152},
 {file_descriptors,

 [{total_limit,924},{total_used,8},{sockets_limit,829},{sockets_used,1}]},
 {processes,[{limit,1048576},{used,316}]},
 {run_queue,0},
 {uptime,14}]


HEre's a list of installed plugins:
[e] amqp_client                       3.0.4
[ ] cowboy                            0.5.0-rmq3.0.4-git4b93c2d
[ ] eldap                             3.0.4-gite309de4
[e] mochiweb                          2.3.1-rmq3.0.4-gitd541e9a
[ ] rabbitmq_auth_backend_ldap        3.0.4
[ ] rabbitmq_auth_mechanism_ssl       3.0.4
[ ] rabbitmq_consistent_hash_exchange 3.0.4
[E] rabbitmq_federation               3.0.4
[E] rabbitmq_federation_management    3.0.4
[ ] rabbitmq_jsonrpc                  3.0.4
[ ] rabbitmq_jsonrpc_channel          3.0.4
[ ] rabbitmq_jsonrpc_channel_examples 3.0.4
[E] rabbitmq_management               3.0.4
[E] rabbitmq_management_agent         3.0.4
[E] rabbitmq_management_visualiser    3.0.4
[ ] rabbitmq_mqtt                     3.0.4
[ ] rabbitmq_old_federation           3.0.4
[E] rabbitmq_shovel                   3.0.4
[E] rabbitmq_shovel_management        3.0.4
[ ] rabbitmq_stomp                    3.0.4
[ ] rabbitmq_tracing                  3.0.4
[e] rabbitmq_web_dispatch             3.0.4
[ ] rabbitmq_web_stomp                3.0.4
[ ] rabbitmq_web_stomp_examples       3.0.4
[ ] rfc4627_jsonrpc                   3.0.4-git7ab174b
[ ] sockjs                            0.3.4-rmq3.0.4-git3132eb9
[e] webmachine                        1.9.1-rmq3.0.4-git52e62bc
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130516/061906da/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130516/061906da/attachment.htm</A>&gt;
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027267.html">[rabbitmq-discuss] Channel versus Connection shutdown
</A></li>
	<LI>Next message: <A HREF="027279.html">[rabbitmq-discuss] Server hanging on start, randomly dying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27270">[ date ]</a>
              <a href="thread.html#27270">[ thread ]</a>
              <a href="subject.html#27270">[ subject ]</a>
              <a href="author.html#27270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
