<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20empty%20rabbit_serial%20file%20causes%20rabbitmq%0A%20cluster%20to%20hang&In-Reply-To=%3C51A5B30D.2030408%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027518.html">
   <LINK REL="Next"  HREF="027538.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20empty%20rabbit_serial%20file%20causes%20rabbitmq%0A%20cluster%20to%20hang&In-Reply-To=%3C51A5B30D.2030408%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang">matthias at rabbitmq.com
       </A><BR>
    <I>Wed May 29 08:49:33 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027518.html">[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster	to hang
</A></li>
        <LI>Next message: <A HREF="027538.html">[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27519">[ date ]</a>
              <a href="thread.html#27519">[ thread ]</a>
              <a href="subject.html#27519">[ subject ]</a>
              <a href="author.html#27519">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/05/13 23:42, Denisenko, Mikhail (NIH/NLM/NCBI) [C] wrote:
&gt;<i> We had a problem today that was caused by wiped rabbit_serial file on
</I>&gt;<i> one of the nodes. Our rabbitmq cluster consisting of two nodes become
</I>&gt;<i> inaccessible.
</I>&gt;<i>
</I>&gt;<i> There is a ticket: <A HREF="https://github.com/rabbitmq/rabbitmq-server/issues/17">https://github.com/rabbitmq/rabbitmq-server/issues/17</A>
</I>&gt;<i>
</I>&gt;<i> I think that rabbitmq should be able to recover from this situation by
</I>&gt;<i> maybe removing invalid rabbit_serial file, what do you think?
</I>
As Emile mentioned in the ticket, rabbit cannot recover from arbitrary 
filesystem corruption.

The specific issue of rabbit_serial being empty actually has come up 
once before - see 
<A HREF="http://rabbitmq.1065348.n5.nabble.com/Cannot-start-guid-generator-rabbitmq-td4415.html.">http://rabbitmq.1065348.n5.nabble.com/Cannot-start-guid-generator-rabbitmq-td4415.html.</A> 
So I have filed a feature request to investigate whether we should 
handle this particular case of corruption more gracefully.

I recommend you look into what may have caused the corruption. While 
there is an easy workaround in this particular instance, the same isn't 
true for other files, and corruptions there could easily lead to data 
loss, possibly undetected.


Regards,

Matthias.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027518.html">[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster	to hang
</A></li>
	<LI>Next message: <A HREF="027538.html">[rabbitmq-discuss] empty rabbit_serial file causes rabbitmq cluster to hang
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27519">[ date ]</a>
              <a href="thread.html#27519">[ thread ]</a>
              <a href="subject.html#27519">[ subject ]</a>
              <a href="author.html#27519">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
