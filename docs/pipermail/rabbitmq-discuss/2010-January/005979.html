<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq server crash and no start more
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Rabbitmq%20server%20crash%20and%20no%20start%20more&In-Reply-To=5ef296b31001241330u1e25bf02g6e71fb6c03c06f24%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005978.html">
   <LINK REL="Next"  HREF="005984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq server crash and no start more</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Rabbitmq%20server%20crash%20and%20no%20start%20more&In-Reply-To=5ef296b31001241330u1e25bf02g6e71fb6c03c06f24%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Rabbitmq server crash and no start more">alexis.richardson at gmail.com
       </A><BR>
    <I>Sun Jan 24 21:39:06 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005978.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
        <LI>Next message: <A HREF="005984.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5979">[ date ]</a>
              <a href="thread.html#5979">[ thread ]</a>
              <a href="subject.html#5979">[ subject ]</a>
              <a href="author.html#5979">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gustavo

The main issue with macs is how they grant IP addresses.  A search of
the list archives will reveal a number of irksome consequences of
this.  Unfortunately current network theory does not offer one agreed
elegant solution to this, so we and others have to use ad hoc
workarounds.

alexis


On Sun, Jan 24, 2010 at 9:30 PM, Gustavo Aquino
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aquino.gustavo at gmail.com</A>&gt; wrote:
&gt;<i> Alexis,
</I>&gt;<i> Good to know and very relieved about this problem, Tomorrow I will post
</I>&gt;<i> about my environments with the same problem.
</I>&gt;<i> Gustavo
</I>&gt;<i> On Sun, Jan 24, 2010 at 7:04 PM, Alexis Richardson
</I>&gt;<i> &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis.richardson at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Gustavo
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks - please do let us know how you get on with your server
</I>&gt;&gt;<i> environment. &#160;As Matthew implied there are some annoyances about the
</I>&gt;&gt;<i> mac and networks which are usually solvable with a little care.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> alexis
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sun, Jan 24, 2010 at 8:29 PM, Gustavo Aquino
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aquino.gustavo at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Gotcha...
</I>&gt;&gt;<i> &gt; My mac change hostname all the time that I reconnect in internet using
</I>&gt;&gt;<i> &gt; 3G.
</I>&gt;&gt;<i> &gt; If i drop rabbit without disconnect Rabbit start without problem. If I
</I>&gt;&gt;<i> &gt; stop
</I>&gt;&gt;<i> &gt; and start connection between rabbit's start stop, rabbit crash.
</I>&gt;&gt;<i> &gt; But in RHE and Debian environment I don't change the hostname and the
</I>&gt;&gt;<i> &gt; problem is the same, Tomorrow I will try to reproduce it in my servers
</I>&gt;&gt;<i> &gt; and
</I>&gt;&gt;<i> &gt; report here.
</I>&gt;&gt;<i> &gt; Regards.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On Sun, Jan 24, 2010 at 6:19 PM, Matthew Sackman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at lshift.net</A>&gt;
</I>&gt;&gt;<i> &gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Hi,
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; On Sun, Jan 24, 2010 at 06:07:39PM -0200, Gustavo Aquino wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt; I got this same problem using MacOS 10.5, that I'm using now, RHE and
</I>&gt;&gt;<i> &gt;&gt; &gt; Debian
</I>&gt;&gt;<i> &gt;&gt; &gt; with RabbitMQ 1.7 never got it with 1.6.
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Look I can reproduce it all the time, in all this environments just
</I>&gt;&gt;<i> &gt;&gt; &gt; do
</I>&gt;&gt;<i> &gt;&gt; &gt; Crtl+C in console running RabbitMQ-server and try to start again, and
</I>&gt;&gt;<i> &gt;&gt; &gt; booom
</I>&gt;&gt;<i> &gt;&gt; &gt; the problem appears. I just do it again to show the metrics that you
</I>&gt;&gt;<i> &gt;&gt; &gt; request
</I>&gt;&gt;<i> &gt;&gt; &gt; me.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; I assure you, we start and stop rabbit all the time in this way, and
</I>&gt;&gt;<i> &gt;&gt; don't see this problem. No one else has reported this problem when the
</I>&gt;&gt;<i> &gt;&gt; mnesia database is empty (or at least not very big).
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Sigh, just looking at your two traces, your IP address has change - and
</I>&gt;&gt;<i> &gt;&gt; you appear to be basing your hostname on your IP address. This is a
</I>&gt;&gt;<i> &gt;&gt; known
</I>&gt;&gt;<i> &gt;&gt; problem, especially with Macs.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; In message <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">4B4B4160.1010704 at lshift.net</A>, Tony said:
</I>&gt;&gt;<i> &gt;&gt; &quot;Yes, it is. It's because of the way macs change their hostname. This
</I>&gt;&gt;<i> &gt;&gt; interacts badly with the way epmd looks up its own address. Some relief
</I>&gt;&gt;<i> &gt;&gt; might be found by following the ideas from this thread:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-October/005053.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-October/005053.html</A>
</I>&gt;&gt;<i> &gt;&gt; &quot;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; In short, mnesia will write the full nodename to disk when it creates
</I>&gt;&gt;<i> &gt;&gt; the
</I>&gt;&gt;<i> &gt;&gt; schema. If your nodename changes then it will fail to restart.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Matthew
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005978.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
	<LI>Next message: <A HREF="005984.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5979">[ date ]</a>
              <a href="thread.html#5979">[ thread ]</a>
              <a href="subject.html#5979">[ subject ]</a>
              <a href="author.html#5979">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
