<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] BasicPublish() from .NET client hangs after upgrading server to 1.7.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20BasicPublish%28%29%20from%20.NET%20client%20hangs%20after%0A%20upgrading%20server%20to%201.7.1&In-Reply-To=4B6177AB.2030001%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006065.html">
   <LINK REL="Next"  HREF="006070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] BasicPublish() from .NET client hangs after upgrading server to 1.7.1</H1>
    <B>Ergeerts Glenn</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20BasicPublish%28%29%20from%20.NET%20client%20hangs%20after%0A%20upgrading%20server%20to%201.7.1&In-Reply-To=4B6177AB.2030001%40lshift.net"
       TITLE="[rabbitmq-discuss] BasicPublish() from .NET client hangs after upgrading server to 1.7.1">glenn.ergeerts at artesis.be
       </A><BR>
    <I>Thu Jan 28 12:53:03 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006065.html">[rabbitmq-discuss] BasicPublish() from .NET client hangs after upgrading server to 1.7.1
</A></li>
        <LI>Next message: <A HREF="006070.html">[rabbitmq-discuss] BasicPublish() from .NET client hangs after	upgrading server to 1.7.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6069">[ date ]</a>
              <a href="thread.html#6069">[ thread ]</a>
              <a href="subject.html#6069">[ subject ]</a>
              <a href="author.html#6069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It Looks like there is a problem indeed.. This is in rabbit.log after starting:

=INFO REPORT==== 28-Jan-2010::13:46:39 ===
Memory limit set to 0MB.

=INFO REPORT==== 28-Jan-2010::13:46:39 ===
vm_memory_high_watermark set. Memory used:5285360 allowed:-663552

=INFO REPORT==== 28-Jan-2010::13:46:39 ===
    alarm_handler: {set,{vm_memory_high_watermark,[]}}


I tried manually setting the memory limit using the config file and the link you provided (I was using an empty config before),
but it doesn't seem to change anything, still the same output. I'm probably doing something wrong here..

About the startup script: it is the 1.7.1 script indeed. The error i get is:
\RabbitMQ\rabbitmq_server-1.7.1\sbin\..\ebin\rabbit was unexpected at this time.

I'm running on windows 7 64bit.

Regards,
Glenn

-----Oorspronkelijk bericht-----
Van: Matthias Radestock [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>]
Verzonden: donderdag 28 januari 2010 12:40
Aan: Ergeerts Glenn
CC: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Onderwerp: Re: [rabbitmq-discuss] BasicPublish() from .NET client hangs after upgrading server to 1.7.1

Glenn,

glenner wrote:
&gt;<i> After upgrading the server to 1.7.1 my client hangs forever on the
</I>&gt;<i> BasicPublish() line using the following code.
</I>
That's probably due to the improved memory monitoring telling the
producers to pause in order to prevent the server from running out of
memory. Do you see any alarms in the rabbit.log?

See <A HREF="http://www.rabbitmq.com/extensions.html#memsup">http://www.rabbitmq.com/extensions.html#memsup</A> for instructions on
how to adjust the memory limits.

&gt;<i> Another unrelated issue: i had to add quotes to the following line in
</I>&gt;<i> rabbitmq-server.bat to get the script running:
</I>&gt;<i>     set RABBITMQ_BOOT_FILE=%RABBITMQ_EBIN_ROOT%\rabbit
</I>&gt;<i>
</I>&gt;<i> changed to :    set RABBITMQ_BOOT_FILE=&quot;%RABBITMQ_EBIN_ROOT%\rabbit&quot;
</I>
Really? Even in the 1.7.1 script? What error do you get?


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006065.html">[rabbitmq-discuss] BasicPublish() from .NET client hangs after upgrading server to 1.7.1
</A></li>
	<LI>Next message: <A HREF="006070.html">[rabbitmq-discuss] BasicPublish() from .NET client hangs after	upgrading server to 1.7.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6069">[ date ]</a>
              <a href="thread.html#6069">[ thread ]</a>
              <a href="subject.html#6069">[ subject ]</a>
              <a href="author.html#6069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
