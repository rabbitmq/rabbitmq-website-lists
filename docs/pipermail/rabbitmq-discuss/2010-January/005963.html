<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq server to server communication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20server%20to%20server%20communication&In-Reply-To=23EFDA38-B5AA-48C3-B37C-1397ECE9B6D1%40datek.no">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005959.html">
   <LINK REL="Next"  HREF="005833.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq server to server communication</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20server%20to%20server%20communication&In-Reply-To=23EFDA38-B5AA-48C3-B37C-1397ECE9B6D1%40datek.no"
       TITLE="[rabbitmq-discuss] rabbitmq server to server communication">alexis.richardson at gmail.com
       </A><BR>
    <I>Sun Jan 24 09:20:53 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005959.html">[rabbitmq-discuss] rabbitmq server to server communication
</A></li>
        <LI>Next message: <A HREF="005833.html">[rabbitmq-discuss] RabbitMQ/Stomp on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5963">[ date ]</a>
              <a href="thread.html#5963">[ thread ]</a>
              <a href="subject.html#5963">[ subject ]</a>
              <a href="author.html#5963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Uwe

On Sun, Jan 24, 2010 at 12:42 AM, Uwe Kubosch &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">uwe at datek.no</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> We have made a similar &quot;bridge&quot; component in our project, with the only addition being the use of transactions, delivery confirmations, and acknowledgements for reliable delivery of the messages. &#160;I will post a gist if there is interest.
</I>
That would be great.  Running examples are helpful.

alexis




&gt;&gt;<i> Here is a quick n dirty amqp replicator that we've been using for a while. Modified it a bit to remove some project specific stuff. You may use it while you wait for the new release.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ruby code:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> require 'rubygems'
</I>&gt;&gt;<i> require 'mq'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> EM.run do
</I>&gt;&gt;<i> &#160; def replicate source, destination, topic
</I>&gt;&gt;<i> &#160; &#160; source_q = MQ::Queue.new(source, &quot;replicator for #{topic}&quot;)
</I>&gt;&gt;<i> &#160; &#160; source_q.bind(MQ::Exchange.new(source, :topic, topic))
</I>&gt;&gt;<i> &#160; &#160; destination_ex = MQ::Exchange.new(destination, :topic, topic)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; &#160; source_q.subscribe do |headers, msg|
</I>&gt;&gt;<i> &#160; &#160; &#160; destination_ex.publish(msg)
</I>&gt;&gt;<i> &#160; &#160; end
</I>&gt;&gt;<i> &#160; end
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; local, remote = %w{one two}, %w{three}
</I>&gt;&gt;<i> &#160; localhost, remotehost = 'localhost', '192.168.0.26'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; local_channel = MQ.new(AMQP.connect(:host =&gt; localhost, :logging =&gt; false))
</I>&gt;&gt;<i> &#160; remote_channel = MQ.new(AMQP.connect(:host =&gt; remotehost, :logging =&gt; false))
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; local.each &#160;{ |t| replicate local_channel, remote_channel, t }
</I>&gt;&gt;<i> &#160; remote.each { |t| replicate remote_channel, local_channel, t }
</I>&gt;&gt;<i> end
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Pradeep
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Uwe Kubosch
</I>&gt;<i> Systems Developer
</I>&gt;<i> Datek Wireless AS
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">uwe at datek.no</A>
</I>&gt;<i> <A HREF="http://datek.no/">http://datek.no/</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005959.html">[rabbitmq-discuss] rabbitmq server to server communication
</A></li>
	<LI>Next message: <A HREF="005833.html">[rabbitmq-discuss] RabbitMQ/Stomp on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5963">[ date ]</a>
              <a href="thread.html#5963">[ thread ]</a>
              <a href="subject.html#5963">[ subject ]</a>
              <a href="author.html#5963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
