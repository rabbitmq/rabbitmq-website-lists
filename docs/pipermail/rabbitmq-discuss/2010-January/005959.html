<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq server to server communication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20server%20to%20server%20communication&In-Reply-To=9a2d8f781001130448m6a9ea8d7nd1f22714d941f946%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005950.html">
   <LINK REL="Next"  HREF="005963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq server to server communication</H1>
    <B>Uwe Kubosch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20server%20to%20server%20communication&In-Reply-To=9a2d8f781001130448m6a9ea8d7nd1f22714d941f946%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq server to server communication">uwe at datek.no
       </A><BR>
    <I>Sun Jan 24 00:42:38 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005950.html">[rabbitmq-discuss] rabbitmq server to server communication
</A></li>
        <LI>Next message: <A HREF="005963.html">[rabbitmq-discuss] rabbitmq server to server communication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5959">[ date ]</a>
              <a href="thread.html#5959">[ thread ]</a>
              <a href="subject.html#5959">[ subject ]</a>
              <a href="author.html#5959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jan 13, 2010, at 1:48 PM, Pradeep Gatram wrote:

We have made a similar &quot;bridge&quot; component in our project, with the only addition being the use of transactions, delivery confirmations, and acknowledgements for reliable delivery of the messages.  I will post a gist if there is interest.

&gt;<i> Here is a quick n dirty amqp replicator that we've been using for a while. Modified it a bit to remove some project specific stuff. You may use it while you wait for the new release.
</I>&gt;<i> 
</I>&gt;<i> Ruby code:
</I>&gt;<i> 
</I>&gt;<i> require 'rubygems'
</I>&gt;<i> require 'mq'
</I>&gt;<i> 
</I>&gt;<i> EM.run do
</I>&gt;<i>   def replicate source, destination, topic
</I>&gt;<i>     source_q = MQ::Queue.new(source, &quot;replicator for #{topic}&quot;)
</I>&gt;<i>     source_q.bind(MQ::Exchange.new(source, :topic, topic))
</I>&gt;<i>     destination_ex = MQ::Exchange.new(destination, :topic, topic)
</I>&gt;<i> 
</I>&gt;<i>     source_q.subscribe do |headers, msg|
</I>&gt;<i>       destination_ex.publish(msg)
</I>&gt;<i>     end
</I>&gt;<i>   end
</I>&gt;<i> 
</I>&gt;<i>   local, remote = %w{one two}, %w{three}
</I>&gt;<i>   localhost, remotehost = 'localhost', '192.168.0.26'
</I>&gt;<i> 
</I>&gt;<i>   local_channel = MQ.new(AMQP.connect(:host =&gt; localhost, :logging =&gt; false))
</I>&gt;<i>   remote_channel = MQ.new(AMQP.connect(:host =&gt; remotehost, :logging =&gt; false))
</I>&gt;<i>   
</I>&gt;<i>   local.each  { |t| replicate local_channel, remote_channel, t }
</I>&gt;<i>   remote.each { |t| replicate remote_channel, local_channel, t }
</I>&gt;<i> end
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Pradeep
</I>&gt;<i> 
</I>&gt;<i> 
</I>
--
Uwe Kubosch
Systems Developer
Datek Wireless AS
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">uwe at datek.no</A>
<A HREF="http://datek.no/">http://datek.no/</A>






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005950.html">[rabbitmq-discuss] rabbitmq server to server communication
</A></li>
	<LI>Next message: <A HREF="005963.html">[rabbitmq-discuss] rabbitmq server to server communication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5959">[ date ]</a>
              <a href="thread.html#5959">[ thread ]</a>
              <a href="subject.html#5959">[ subject ]</a>
              <a href="author.html#5959">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
