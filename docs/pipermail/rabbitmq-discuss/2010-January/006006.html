<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is it possible to create/bind a queue so that it has a limit of N messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Is%20it%20possible%20to%20create/bind%20a%20queue%20so%0A%20that%20it%20has%20a%20limit%20of%20N%20messages&In-Reply-To=4B5DDBA6.4030403%40echostar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005996.html">
   <LINK REL="Next"  HREF="006038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is it possible to create/bind a queue so that it has a limit of N messages</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Is%20it%20possible%20to%20create/bind%20a%20queue%20so%0A%20that%20it%20has%20a%20limit%20of%20N%20messages&In-Reply-To=4B5DDBA6.4030403%40echostar.com"
       TITLE="[rabbitmq-discuss] Is it possible to create/bind a queue so that it has a limit of N messages">matthias at lshift.net
       </A><BR>
    <I>Tue Jan 26 07:58:47 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005996.html">[rabbitmq-discuss] Is it possible to create/bind a queue so that it has a limit of N messages
</A></li>
        <LI>Next message: <A HREF="006038.html">[rabbitmq-discuss] Is it possible to create/bind a queue so	that it has a limit of N messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6006">[ date ]</a>
              <a href="thread.html#6006">[ thread ]</a>
              <a href="subject.html#6006">[ subject ]</a>
              <a href="author.html#6006">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mark,

Mark Geib wrote:
&gt;<i> Is it possible to create a queue so that the broker will limit the
</I>&gt;<i> number of messages in the queue.? I am looking for a simple way to limit
</I>&gt;<i> resource usage of a broker should things go wrong, like a very chatty
</I>&gt;<i> producer... This is for a production system. I don't care if the
</I>&gt;<i> messages are lost or not.
</I>
It would be fairly easy to add a per-queue message count limit to 
RabbitMQ, but it generally falls way short of constraining resources in 
a meaningful way to cope with &quot;chatty&quot; producers. Some reasons for that are:
- queues are not directly associated with producers - in principle a 
producer can send messages that end up in any (and any number of) queue(s).
- message counts do not constitute a good measure of resource usage; 
memory consumption would be a better measure but that is hard to 
determine with any degree of accuracy, due to the complexity of the data 
structures involved and the sharing of message data between queues

We are planning to add support for various kinds of rate limits such as 
per-connection message count and data rates. These should control 
resource usage effectively, but requires some careful design, and the 
implementation is far from trivial. So don't expect these features to 
appear any time soon.

Another option is to perform rate limiting in a proxy. That is something 
you may want to consider - writing an AMQP protocol proxy is quite 
straightforward, and with a specific use case in mind the implementation 
of the limiting may not be too complex either.

Yet another option might be to deploy a generic TCP firewall with rate 
limiting capabilities.


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005996.html">[rabbitmq-discuss] Is it possible to create/bind a queue so that it has a limit of N messages
</A></li>
	<LI>Next message: <A HREF="006038.html">[rabbitmq-discuss] Is it possible to create/bind a queue so	that it has a limit of N messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6006">[ date ]</a>
              <a href="thread.html#6006">[ thread ]</a>
              <a href="subject.html#6006">[ subject ]</a>
              <a href="author.html#6006">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
