<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Running StressPersister.java client against	RabbitMQ and finding the stress_persister.log file is being	&quot;beaten to death&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Running%20StressPersister.java%20client%20against%0A%09RabbitMQ%20and%20finding%20the%20stress_persister.log%20file%20is%20being%0A%09%22beaten%20to%20death%22&In-Reply-To=mailman.163.1263575637.22012.rabbitmq-discuss%40lists.rabbitmq.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005920.html">
   <LINK REL="Next"  HREF="005932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Running StressPersister.java client against	RabbitMQ and finding the stress_persister.log file is being	&quot;beaten to death&quot;</H1>
    <B>John Apps</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Running%20StressPersister.java%20client%20against%0A%09RabbitMQ%20and%20finding%20the%20stress_persister.log%20file%20is%20being%0A%09%22beaten%20to%20death%22&In-Reply-To=mailman.163.1263575637.22012.rabbitmq-discuss%40lists.rabbitmq.com"
       TITLE="[rabbitmq-discuss] Running StressPersister.java client against	RabbitMQ and finding the stress_persister.log file is being	&quot;beaten to death&quot;">johndapps at gmail.com
       </A><BR>
    <I>Tue Jan 19 09:22:29 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005920.html">[rabbitmq-discuss] Rabbit crash
</A></li>
        <LI>Next message: <A HREF="005932.html">[rabbitmq-discuss] Running StressPersister.java client against RabbitMQ and finding the stress_persister.log file is being &quot;beaten to death&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5923">[ date ]</a>
              <a href="thread.html#5923">[ thread ]</a>
              <a href="subject.html#5923">[ subject ]</a>
              <a href="author.html#5923">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What parameters should one tweak in order to reduce the I/O to the log file
in the StressPersister test? And others with similar behaviour, of course.

The file grows to about 140MB using the default StressPersister parameters,
only to be renamed to stress_persister.log.previous and the whole cycle
starts again.
With smaller parameters than the default, i.e., smaller message size, lower
backlog etc., the pattern is the same, but the frequency with which the log
is renamed and recreated is faster.

What would be ideal would be to be able to specify an initial (large)
allocation for the file (so it does not extend it all the time) along with
an extension quantity, should it have to be extended. In addition, if one
could specify how much should be retained in memory prior to be flushed to
disk, that would also make things move along.

I have looked at a few mnesia and Erlang parameters but have not found the
right mix yet.

In case anyone asks, this is running Erlang (BEAM) emulator version 5.7 on
OpenVMS using Java 5.0 for the client.

Cheers, John
---
John Apps
(49) 171 869 1813
Sent from Traunstein, BY, Germany
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100119/e2631db9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100119/e2631db9/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005920.html">[rabbitmq-discuss] Rabbit crash
</A></li>
	<LI>Next message: <A HREF="005932.html">[rabbitmq-discuss] Running StressPersister.java client against RabbitMQ and finding the stress_persister.log file is being &quot;beaten to death&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5923">[ date ]</a>
              <a href="thread.html#5923">[ thread ]</a>
              <a href="subject.html#5923">[ subject ]</a>
              <a href="author.html#5923">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
