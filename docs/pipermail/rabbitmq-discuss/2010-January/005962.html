<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] adjusting timeout for non-acked messages to be requeued
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20adjusting%20timeout%20for%20non-acked%20messages%20to%0A%20be%20requeued&In-Reply-To=6751EFFC-5A8E-48D5-BDDA-9CBA50474995%40datek.no">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005961.html">
   <LINK REL="Next"  HREF="005775.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] adjusting timeout for non-acked messages to be requeued</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20adjusting%20timeout%20for%20non-acked%20messages%20to%0A%20be%20requeued&In-Reply-To=6751EFFC-5A8E-48D5-BDDA-9CBA50474995%40datek.no"
       TITLE="[rabbitmq-discuss] adjusting timeout for non-acked messages to be requeued">matthew at lshift.net
       </A><BR>
    <I>Sun Jan 24 01:10:45 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005961.html">[rabbitmq-discuss] adjusting timeout for non-acked messages to be requeued
</A></li>
        <LI>Next message: <A HREF="005775.html">[rabbitmq-discuss] High CPU Usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5962">[ date ]</a>
              <a href="thread.html#5962">[ thread ]</a>
              <a href="subject.html#5962">[ subject ]</a>
              <a href="author.html#5962">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jan 24, 2010 at 01:54:41AM +0100, Uwe Kubosch wrote:
&gt;<i> &gt; Rabbit does eventual delivery. Thus eventually, the message will be
</I>&gt;<i> &gt; delivered. However, it may be delivered to more than one consumer. A
</I>&gt;<i> &gt; message that is not ack'd will, when the channel on which it was
</I>&gt;<i> &gt; delivered closes (or the connection, or some other condition that I
</I>&gt;<i> &gt; always forget, but which Matthias pointed out within about the last
</I>&gt;<i> &gt; month on this list), be reinserted into its queue to be redelivered.
</I>&gt;<i> 
</I>&gt;<i> Where in the queue is the message requeued on disconnect?
</I>
It's not defined in the spec. RabbitMQ puts it at the tail of the queue,
but there is no guarantee that that behaviour will not change in the
future. Do not rely on this.

&gt;<i> If there is only one client, and prefetch is set to 1, and this client does not ack a message and disconnects, will the same message be delivered first on reconnect, or is there a chance of out-of-order delivery?
</I>
As above - it's currently the case that the message will be put at the
end of the queue and will be the last message delivered. The spec does
not rule either way on this. You should be able to verify this behaviour
yourself from testing.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005961.html">[rabbitmq-discuss] adjusting timeout for non-acked messages to be requeued
</A></li>
	<LI>Next message: <A HREF="005775.html">[rabbitmq-discuss] High CPU Usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5962">[ date ]</a>
              <a href="thread.html#5962">[ thread ]</a>
              <a href="subject.html#5962">[ subject ]</a>
              <a href="author.html#5962">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
