<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Rabbitmq server crash and no start more
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Rabbitmq%20server%20crash%20and%20no%20start%20more&In-Reply-To=5ef296b31001260708ka250161m3604a4d828540ea4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006032.html">
   <LINK REL="Next"  HREF="006013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Rabbitmq server crash and no start more</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Rabbitmq%20server%20crash%20and%20no%20start%20more&In-Reply-To=5ef296b31001260708ka250161m3604a4d828540ea4%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Rabbitmq server crash and no start more">matthew at lshift.net
       </A><BR>
    <I>Tue Jan 26 15:19:34 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006032.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
        <LI>Next message: <A HREF="006013.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6028">[ date ]</a>
              <a href="thread.html#6028">[ thread ]</a>
              <a href="subject.html#6028">[ subject ]</a>
              <a href="author.html#6028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Tue, Jan 26, 2010 at 01:08:22PM -0200, Gustavo Aquino wrote:
&gt;<i> This is my start-rabbitmq.sh
</I>&gt;<i> 
</I>&gt;<i> $ cat start-rabbitmq.sh
</I>&gt;<i> sudo rm -rf /opt/local/var/lib/rabbitmq/mnesia/rabbit/schema.DAT
</I>&gt;<i> sudo -H -u rabbitmq rabbitmq-server
</I>
Ok, well the sudos certainly explain why the env vars weren't getting
passed through.

Which rabbitmq-server script is that second line running? It should be
the one in /usr/sbin/ or /usr/local/sbin/ or /opt/local/usr/sbin/.
I've just checked and it seems that sudo adds the sbins to the PATH even
when you're not sudoing to root so that should still be finding them ok.

But either way, the strange issue is that it would appear that
/usr/lib/rabbitmq/bin/rabbitmq-env (or in your case maybe
/opt/local/usr/lib/rabbitmq/bin/rabbitmq-env) isn't being run. It should
be being run via /opt/local/usr/lib/rabbitmq/bin/rabbitmq-server...

Have you made any changes to these scripts? Do you perhaps have other
older versions of these scripts lying around?

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006032.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
	<LI>Next message: <A HREF="006013.html">[rabbitmq-discuss] Rabbitmq server crash and no start more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6028">[ date ]</a>
              <a href="thread.html#6028">[ thread ]</a>
              <a href="subject.html#6028">[ subject ]</a>
              <a href="author.html#6028">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
