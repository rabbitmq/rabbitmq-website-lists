<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 21673 never recovers from emfile
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%2021673%20never%20recovers%20from%20emfile&In-Reply-To=84fb38e31001150757g6178b6ceu2278f15840b03ab6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005907.html">
   <LINK REL="Next"  HREF="005909.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 21673 never recovers from emfile</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%2021673%20never%20recovers%20from%20emfile&In-Reply-To=84fb38e31001150757g6178b6ceu2278f15840b03ab6%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] 21673 never recovers from emfile">matthew at lshift.net
       </A><BR>
    <I>Fri Jan 15 16:09:59 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="005907.html">[rabbitmq-discuss] 21673 never recovers from emfile
</A></li>
        <LI>Next message: <A HREF="005909.html">[rabbitmq-discuss] 21673 never recovers from emfile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5908">[ date ]</a>
              <a href="thread.html#5908">[ thread ]</a>
              <a href="subject.html#5908">[ subject ]</a>
              <a href="author.html#5908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jan 15, 2010 at 09:57:00AM -0600, tsuraan wrote:
&gt;<i> &gt; Hmmm, interesting find. I don't think that this is related to the file
</I>&gt;<i> &gt; descriptor management that's going on in the new persister, but I'll
</I>&gt;<i> &gt; certainly test and see if I can reproduce.
</I>&gt;<i> 
</I>&gt;<i> Ok, some better test conditions:
</I>
Many thanks for these. The Erlang VM gets very upset when it runs out of
available file descriptors. The safest thing to do is just to massively
raise the limit through ulimit. That said, we do have some plans to be
able to artificially limit the number of FDs Rabbit is using to a little
less than the actual limit. This would allow Rabbit to successfully
refuse new connections when it gets to this artificial limit, and leave
enough FDs around for the VM to continue with.

Matthew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005907.html">[rabbitmq-discuss] 21673 never recovers from emfile
</A></li>
	<LI>Next message: <A HREF="005909.html">[rabbitmq-discuss] 21673 never recovers from emfile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5908">[ date ]</a>
              <a href="thread.html#5908">[ thread ]</a>
              <a href="subject.html#5908">[ subject ]</a>
              <a href="author.html#5908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
