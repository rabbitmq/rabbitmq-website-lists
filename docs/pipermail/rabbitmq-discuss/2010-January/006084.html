<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] error message trying to start stomp adapter?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20error%20message%20trying%20to%20start%20stomp%20adapter%3F&In-Reply-To=20100128122215.GD4613%40wellquite.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006068.html">
   <LINK REL="Next"  HREF="006100.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] error message trying to start stomp adapter?</H1>
    <B>Erik Anderson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20error%20message%20trying%20to%20start%20stomp%20adapter%3F&In-Reply-To=20100128122215.GD4613%40wellquite.org"
       TITLE="[rabbitmq-discuss] error message trying to start stomp adapter?">erikba at odysseus.anderson.name
       </A><BR>
    <I>Thu Jan 28 17:24:58 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006068.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
        <LI>Next message: <A HREF="006100.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6084">[ date ]</a>
              <a href="thread.html#6084">[ thread ]</a>
              <a href="subject.html#6084">[ subject ]</a>
              <a href="author.html#6084">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Jan 28, 4:22&#160;am, Matthew Sackman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt... at lshift.net</A>&gt; wrote:
&gt;<i> Hi Erik,
</I>&gt;<i>
</I>&gt;<i> On Wed, Jan 27, 2010 at 02:33:40PM -0800, Erik Anderson wrote:
</I>&gt;<i> &gt; I'm trying to write up instructions on how I got all this rabbitmq /
</I>&gt;<i> &gt; orbited / stomp running while installing this on our production server
</I>&gt;<i> &gt; and this time things don't seem to be working properly. &#160;The
</I>&gt;<i> &gt; configuration files have changed a bit from the last time I've noticed
</I>&gt;<i> &gt; (upgraded from 1.7.0 to 1.7.1 on windows?) &#160;This is the error message
</I>&gt;<i> &gt; that I'm getting, any obvious translation to the config entry I'm
</I>&gt;<i> &gt; doing wrong?
</I>&gt;<i>
</I>&gt;<i> &gt; starting STOMP Adapter (binding to [{&quot;127.0.0.1&quot;,61613}]) &#160;...{&quot;Kernel
</I>&gt;<i> &gt; pid
</I>&gt;<i> &gt; terminated&quot;,application_controller,&quot;{application_start_failure,rabbit_stomp ,
</I>&gt;<i> &gt; {{invalid_host,[49,50,55,46,48,46,48,46,49],timeout},
</I>&gt;<i> &gt; {rabbit_stomp,start,[normal,[]]}}}&quot;}
</I>&gt;<i>
</I>&gt;<i> Hmm, that's a bit odd. I've just installed the stomp adaptor and
</I>&gt;<i> literally with zero config, it all just works. This is building
</I>&gt;<i> rabbitmq_v1_7_1 from source.
</I>&gt;<i>
</I>&gt;<i> The only things I have in my plugins dir are links to
</I>&gt;<i> rabbitmq-erlang-client and rabbitmq-stomp.
</I>
For what it's worth, it looks on the surface in {invalid_host,
[49,50,55,46,48,46,48,46,49],timeout} that the numbers are the ascii
representation of &quot;127.0.0.1&quot;.  Along with a new delay that feels like
a timeout when launching the normal TCP listeners, was some of the
&quot;short node&quot; stuff done in the last version affecting this?

&gt;<i> &gt; I'm getting this no matter what stomp_listeners entry I put in (or
</I>&gt;<i> &gt; even with no config at all) I still get this same error.
</I>&gt;<i>
</I>&gt;<i> &gt; I have noticed that the &quot;TCP Listeners&quot; line takes longer to startup
</I>&gt;<i> &gt; with this version of RabbitMQ than the previous version did, even
</I>&gt;<i> &gt; before I ran rabbitmq-activate-plugins.bat, is that affecting this at
</I>&gt;<i> &gt; all?
</I>&gt;<i>
</I>&gt;<i> &gt; These are the build commands that I used to get this built (on the
</I>&gt;<i> &gt; linux box in my office, once I downloaded all the dependent packages):
</I>&gt;<i>
</I>&gt;<i> &gt; cd ~/rabbit/v1.7.1
</I>&gt;<i> &gt; ln -s rabbitmq-codegen-c73ecfc91be3 rabbitmq-codegen
</I>&gt;<i> &gt; ln -s rabbitmq-erlang-client-825eceaca84c rabbitmq-erlang-client
</I>&gt;<i> &gt; ln -s rabbitmq-public-umbrella-d1a272b28e90 rabbitmq-public-umbrella
</I>&gt;<i> &gt; ln -s rabbitmq-server-90e101fd8b67 rabbitmq-server
</I>&gt;<i> &gt; ln -s rabbitmq-stomp-da7859ff22c6 rabbitmq-stomp
</I>&gt;<i> &gt; ln -s rabbitmq-public-umbrella/include.mk
</I>&gt;<i> &gt; ln -s rabbitmq-erlang-client/dist/rabbit_common
</I>&gt;<i> &gt; ln -s rabbitmq-stomp/dist/rabbit_stomp.ez ../rabbit_stomp-1.7.1.ez
</I>&gt;<i> &gt; make -C rabbitmq-server
</I>&gt;<i> &gt; make -C rabbitmq-erlang-client
</I>&gt;<i> &gt; make -C rabbitmq-stomp
</I>&gt;<i>
</I>&gt;<i> Hmm, this is a bit odd. What we tend to recommend is that you have
</I>&gt;<i> everything in rabbitmq-public-umbrella, so it'd look a bit like this:
</I>&gt;<i>
</I>&gt;<i> cd ~/rabbit/v1.7.1
</I>&gt;<i> hg <A HREF="clonehttp://hg.rabbitmq.com/rabbitmq-public-umbrella">clonehttp://hg.rabbitmq.com/rabbitmq-public-umbrella</A>
</I>&gt;<i> cd rabbitmq-public-umbrella
</I>&gt;<i> hg <A HREF="clonehttp://hg.rabbitmq.com/rabbitmq-codegen">clonehttp://hg.rabbitmq.com/rabbitmq-codegen</A>
</I>&gt;<i> hg <A HREF="clonehttp://hg.rabbitmq.com/rabbitmq-server">clonehttp://hg.rabbitmq.com/rabbitmq-server</A>
</I>&gt;<i> cd rabbitmq-server
</I>&gt;<i> hg up -C rabbitmq_v1_7_1
</I>&gt;<i> make -j
</I>&gt;<i> cd -
</I>&gt;<i> hg <A HREF="clonehttp://hg.rabbitmq.com/rabbitmq-erlang-client">clonehttp://hg.rabbitmq.com/rabbitmq-erlang-client</A>
</I>&gt;<i> cd rabbitmq-erlang-client
</I>&gt;<i> make
</I>&gt;<i> cd -
</I>&gt;<i> hg <A HREF="clonehttp://hg.rabbitmq.com/rabbitmq-stomp">clonehttp://hg.rabbitmq.com/rabbitmq-stomp</A>
</I>&gt;<i> cd rabbitmq-stomp
</I>&gt;<i> make
</I>&gt;<i> cd -
</I>&gt;<i> cd rabbitmq-server
</I>&gt;<i> mkdir -p plugins
</I>&gt;<i> cd !!$
</I>&gt;<i> ln -s ../../rabbitmq-stomp
</I>&gt;<i> ln -s ../../rabbitmq-erlang-client
</I>&gt;<i> cd ..
</I>&gt;<i> ./scripts/rabbitmq-activate-plugins
</I>&gt;<i> make cleandb run
</I>&gt;<i>
</I>&gt;<i> Certainly, I've just run all of that lot, and it works fine for me!
</I>&gt;<i>
</I>&gt;<i> &quot;tip&quot; is one of the daftest &quot;features&quot; (and there are many) of hg. You
</I>&gt;<i> should be at the head of default - that's certainly what I'm using.
</I>
Umm, I haven't gotten around to installing hg, I'm hoping that I don't
have to get involved enough in the development side of this, so I've
just been downloading packages from the website.  The &quot;tip&quot; thing is
because for two of the packages the files I download from the website
are named that (the others are long hash identities).  I'm also
compiling on a different machine from the server (which has absolutely
no hope of running that Makefile) and copying the .ez file into a
plugins folder I create myself under the rabbitmq_server folder.

&gt;<i> With regards configuration, we would suggest that you use the config file
</I>&gt;<i> in /etc/rabbitmq/rabbitmq.config (though this can sometimes be in other
</I>&gt;<i> places if eg you're using macports). Having a file like:
</I>&gt;<i>
</I>&gt;<i> [{rabbit_stomp, [{listeners, [{&quot;127.0.0.1&quot;,61612}]}]}].
</I>&gt;<i>
</I>&gt;<i> is by far the easiest way to configure plugins like this as it avoids
</I>&gt;<i> nasty escaping issues if passing by env vars.
</I>
I haven't quite found the location of this file yet, and would like to
(if possible) move it to a more usable location (once I find it).
I've been running RabbitMQ through ProcessMonitor a fair amount to try
to discover these things (haven't found the service log yet either
with the magic cookies, but I haven't tried too hard yet).  I would
not have gotten anywhere near finding the required patches to the
previous version's startup scripts without tracing through the
program.

I must admit though that (not trying to strike back at an obvious
hardworking bunch here) from rabbitmq to orbited getting a comet
server has been almost like pulling teeth in from the perspective of
someone just trying to get a simple solution running.  It took me
almost two weeks trying to get rabbitmq-c compiled and running the
wiretest example under MSVC for instance.  I'm just hoping that I'm
almost there now, was starting to document how to do this for the
future.

&gt;<i> Best wishes,
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>
Thank you for the fast response :-)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006068.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
	<LI>Next message: <A HREF="006100.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6084">[ date ]</a>
              <a href="thread.html#6084">[ thread ]</a>
              <a href="subject.html#6084">[ subject ]</a>
              <a href="author.html#6084">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
