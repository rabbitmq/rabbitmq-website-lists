<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] keep unacked message at the head of queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20keep%20unacked%20message%20at%20the%20head%20of%20queue&In-Reply-To=502072.44735.qm%40web31810.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006007.html">
   <LINK REL="Next"  HREF="006008.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] keep unacked message at the head of queue</H1>
    <B>Marcus Eriksson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20keep%20unacked%20message%20at%20the%20head%20of%20queue&In-Reply-To=502072.44735.qm%40web31810.mail.mud.yahoo.com"
       TITLE="[rabbitmq-discuss] keep unacked message at the head of queue">krummas at gmail.com
       </A><BR>
    <I>Tue Jan 26 17:47:41 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006007.html">[rabbitmq-discuss] keep unacked message at the head of queue
</A></li>
        <LI>Next message: <A HREF="006008.html">[rabbitmq-discuss] java client 1.7.1 artifacts are missing from	maven central repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6040">[ date ]</a>
              <a href="thread.html#6040">[ thread ]</a>
              <a href="subject.html#6040">[ subject ]</a>
              <a href="author.html#6040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wouldn't a dead letter queue approach work in this case? I.e if your
consumer gets an unprocessable message, stop the consumer and publish the
message to some other queue. Then, when restarting the application first
consume the message(s) from the DLQ

/Marcus
<A HREF="http://developian.blogspot.com">http://developian.blogspot.com</A>

On Tue, Jan 26, 2010 at 9:31 AM, alex chen &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">chen650 at yahoo.com</A>&gt; wrote:

&gt;<i> Thanks Matthias for the quick response!  Our application processes time
</I>&gt;<i> series data so it is crucial to keep the message order.  It has one
</I>&gt;<i> exclusive consumer only.  It would be really nice if rabbitmq could send the
</I>&gt;<i> unacked messages first for this use case.
</I>&gt;<i>
</I>&gt;<i> -alex
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----- Original Message ----
</I>&gt;<i> From: Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt;
</I>&gt;<i> To: alex chen &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">chen650 at yahoo.com</A>&gt;
</I>&gt;<i> Cc: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Sent: Mon, January 25, 2010 11:23:23 PM
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] keep unacked message at the head of queue
</I>&gt;<i>
</I>&gt;<i> Alex,
</I>&gt;<i>
</I>&gt;<i> alex chen wrote:
</I>&gt;<i> &gt; Currently rabbitmq re-queues the unacked messages to the end of
</I>&gt;<i> &gt; queue.  Is it possible to keep those messages at the head of queue
</I>&gt;<i> &gt; instead?
</I>&gt;<i>
</I>&gt;<i> No, that isn't possible.
</I>&gt;<i>
</I>&gt;<i> &gt; Our application needs to keep the ordering of the messages.
</I>&gt;<i>
</I>&gt;<i> The ordering guarantees provided by AMQP are very constrained. See section
</I>&gt;<i> 4.7 of the AMQP 0-9-1 spec which, for example, states that all bets are off
</I>&gt;<i> when messages get redelivered.
</I>&gt;<i>
</I>&gt;<i> There are good reasons for being so restrictive: excessive ordering
</I>&gt;<i> guarantees are bad for scalability. Also, it is actually logically
</I>&gt;<i> impossible to maintain message order in all but the simplest scenarios. For
</I>&gt;<i> example, even just adding a second consumer to a queue necessarily breaks
</I>&gt;<i> the order of redeliveries wrt other messages.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100126/8c1de419/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100126/8c1de419/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006007.html">[rabbitmq-discuss] keep unacked message at the head of queue
</A></li>
	<LI>Next message: <A HREF="006008.html">[rabbitmq-discuss] java client 1.7.1 artifacts are missing from	maven central repository
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6040">[ date ]</a>
              <a href="thread.html#6040">[ thread ]</a>
              <a href="subject.html#6040">[ subject ]</a>
              <a href="author.html#6040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
