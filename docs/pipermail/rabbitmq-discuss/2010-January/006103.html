<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] error message trying to start stomp adapter?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20error%20message%20trying%20to%20start%20stomp%20adapter%3F&In-Reply-To=4B62BF0C.8000001%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006100.html">
   <LINK REL="Next"  HREF="006106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] error message trying to start stomp adapter?</H1>
    <B>Erik Anderson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20error%20message%20trying%20to%20start%20stomp%20adapter%3F&In-Reply-To=4B62BF0C.8000001%40lshift.net"
       TITLE="[rabbitmq-discuss] error message trying to start stomp adapter?">erikba at odysseus.anderson.name
       </A><BR>
    <I>Sat Jan 30 00:40:05 GMT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006100.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
        <LI>Next message: <A HREF="006106.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6103">[ date ]</a>
              <a href="thread.html#6103">[ thread ]</a>
              <a href="subject.html#6103">[ subject ]</a>
              <a href="author.html#6103">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Jan 29, 2:57&#160;am, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matth... at lshift.net</A>&gt; wrote:
&gt;<i> Erik,
</I>&gt;<i>
</I>&gt;<i> Erik Anderson wrote:
</I>&gt;<i> &gt; For what it's worth, it looks on the surface in {invalid_host,
</I>&gt;<i> &gt; [49,50,55,46,48,46,48,46,49],timeout} that the numbers are the ascii
</I>&gt;<i> &gt; representation of &quot;127.0.0.1&quot;. &#160;Along with a new delay that feels like
</I>&gt;<i> &gt; a timeout when launching the normal TCP listeners, was some of the
</I>&gt;<i> &gt; &quot;short node&quot; stuff done in the last version affecting this?
</I>&gt;<i>
</I>&gt;<i> The &quot;short node&quot; changes in the last release relate to Erlang's
</I>&gt;<i> inter-node communication. They do not affect ordinary network
</I>&gt;<i> operations, so that's not the source of the problem.
</I>
Okay, this is really starting to get frustrating.  Googling this error
gives me the strong impression that the timeout here is a DNS timeout,
but I have no clue how to get our DNS servers to respond to something
like 127.0.0.1.  I tried changing it to &quot;::1&quot; but it just moved the
error up to when starting up TCP Listeners instead.  It also said that
I should be giving 127.0.0.1 in &quot;tuple form&quot;, but i'm not sure what
that means at the moment.

I replaced Erlang v5.6.5 R12B-5 (as included in the official
installation) with v5.7.3 R13B02-1 (what the server that works is
using) with no effect.  I copied the rabbitmq_server.1.7.0 folder
(with the installed plugin) from the server that works with no
effect.  Same with wiping the database folder.

ProcessExplorer trace shows no registry or file activity during the
&quot;timeouts&quot;, the next action after the first one is a load of
stomp.beam, the action after the second is a write to the log file.
The only attempt to access %APPDATA% is to write a file
named .erlang.cookie - no other file or folder existence check is
made.

Modifying the stomp_listener line to change the ip address to 0.0.0.0
or scramble to a dummy port has no effect (is this thing hardcoded to
{&quot;127.0.0.1&quot;,61613} or something?)

The fact that this is working on the testbed but is throwing a tantrum
on the server it might actually have value on means that it's an
environmental fault of some kind, either a file I haven't found or a
different server setup that is causing confusion.

Maybe I'll try to get this working sometime next week - I'm running
out of ideas.  I don't have anything on me that I can see to intercept
WINSOCK calls either.

Any suggestions on where to go from here?  Dumping my 1.7.1 startup
trace here...

&gt;<i> We welcome patches, and feedback in general. If you have managed to
</I>&gt;<i> build rabbitmq-c on Windows, could you perhaps post the instructions?
</I>
Unfortunately, If it hadn't taken two weeks of my boss's time to try
to get it working I think I would be more amenable to sneaking
something like that out.  As it is I'd like to have something to show
first before dealing with that.  I can bellyache some more about the
kinds of changes I needed to make, but I'm not sure how constructive
that would be.

---

Using Custom Boot File &quot;C:\tw\comet\rabbitmq_server-1.7.1\sbin\..\ebin
\rabbit.boot&quot;

+---+   +---+
|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   |   |   |
</I>|<i>   +---+   +-------+
</I>|<i>                   |
</I>|<i> RabbitMQ  +---+   |
</I>|<i>           |   |   |
</I>|<i>   v1.7.1  +---+   |
</I>|<i>                   |
</I>+-------------------+
AMQP 8-0
Copyright (C) 2007-2009 LShift Ltd., Cohesive Financial Technologies
LLC., and Rabbit Technologies Ltd.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

node          : <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at D3Z2VPD1</A>
app descriptor: c:/tw/comet/rabbitmq_server-1.7.1/sbin/../ebin/
rabbit.app
home dir      : C:\Documents and Settings\EAnderson.TEAMWORK
cookie hash   : hiMbehi/N72av8n8XzaPNg==
log           : c:/tw/comet/rabbitmq-data/log/rabbit.log
sasl log      : c:/tw/comet/rabbitmq-data/log/rabbit-sasl.log
database dir  : c:/tw/comet/rabbitmq-data/db/rabbit-mnesia

starting database             ...done
starting core processes       ...done
starting recovery             ...done
starting persister            ...done
starting guid generator       ...done
starting builtin applications ...done
starting TCP listeners        ...done
starting SSL listeners        ...done

broker running
starting STOMP Adapter (binding to [{&quot;127.0.0.1&quot;,61613}])  ...{&quot;Kernel
pid
terminated&quot;,application_controller,&quot;{application_start_failure,rabbit_stomp,
{{invalid_host,[49,50,55,46,48,46,48,46,49],timeout},
{rabbit_stomp,start,[normal,[]]}}}&quot;}


Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller)
({application_start_failure,rabbit_stomp,{{invalid_host,
[49,50,55,46,48,46,48,46,49],timeout},{rabbit_stomp,start,[normal,
[]]}}})


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006100.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
	<LI>Next message: <A HREF="006106.html">[rabbitmq-discuss] error message trying to start stomp adapter?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6103">[ date ]</a>
              <a href="thread.html#6103">[ thread ]</a>
              <a href="subject.html#6103">[ subject ]</a>
              <a href="author.html#6103">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
