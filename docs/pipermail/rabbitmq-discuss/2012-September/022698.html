<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Server memory leak with 2.8.6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Server%20memory%20leak%20with%202.8.6&In-Reply-To=%3CCA%2BT%3DoM0a1iCRkVuLa5zdZsMCE4cds%3D_n6cQQsAyqBeF8EK__XA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022699.html">
   <LINK REL="Next"  HREF="022702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Server memory leak with 2.8.6</H1>
    <B>Guillaume Pothier</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Server%20memory%20leak%20with%202.8.6&In-Reply-To=%3CCA%2BT%3DoM0a1iCRkVuLa5zdZsMCE4cds%3D_n6cQQsAyqBeF8EK__XA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Server memory leak with 2.8.6">gpothier at niclabs.cl
       </A><BR>
    <I>Wed Sep 26 15:38:33 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022699.html">[rabbitmq-discuss] Admin User other than guest - have I missed a step?
</A></li>
        <LI>Next message: <A HREF="022702.html">[rabbitmq-discuss] Server memory leak with 2.8.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22698">[ date ]</a>
              <a href="thread.html#22698">[ thread ]</a>
              <a href="subject.html#22698">[ subject ]</a>
              <a href="author.html#22698">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, I have a problem that I think is the same as the one described there:
<A HREF="http://rabbitmq.1065348.n5.nabble.com/Excessive-memory-consumption-of-one-server-in-cluster-setup-td21617.html">http://rabbitmq.1065348.n5.nabble.com/Excessive-memory-consumption-of-one-server-in-cluster-setup-td21617.html</A>

We have a rather low volume application, with message rates well below
1000/sec. There is only one server. At some times, although neither the
size of the queues nor the message rates increase, Rabbit starts to very
quickly consume huge amounts of memory. It often goes up to its high
watermark limit and stops processing messages, and has to be restarted.

The attached screenshots show graphs of the total number of messages in all
queues vs. the memory used by Rabbit. They clearly show that the memory
increases are not linked to the size of the queues. I have the output of
rabbitmqctl report available, but as it is rather big I put it there:
<A HREF="http://depositfiles.com/files/e4nxc07f2">http://depositfiles.com/files/e4nxc07f2</A>

I'll be glad to help diagnosing this issue.

Kind regards,
Guillaume Pothier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120926/0d6bd665/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120926/0d6bd665/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zabbix-1day.png
Type: image/png
Size: 38670 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120926/0d6bd665/attachment.png">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120926/0d6bd665/attachment.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zabbix-1week.png
Type: image/png
Size: 35710 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120926/0d6bd665/attachment-0001.png">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120926/0d6bd665/attachment-0001.png</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022699.html">[rabbitmq-discuss] Admin User other than guest - have I missed a step?
</A></li>
	<LI>Next message: <A HREF="022702.html">[rabbitmq-discuss] Server memory leak with 2.8.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22698">[ date ]</a>
              <a href="thread.html#22698">[ thread ]</a>
              <a href="subject.html#22698">[ subject ]</a>
              <a href="author.html#22698">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
