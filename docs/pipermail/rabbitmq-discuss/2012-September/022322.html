<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Delivering to one and only one queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delivering%20to%20one%20and%20only%20one%20queue&In-Reply-To=%3CF4D07CAD-48F8-46A0-BE68-C887FC791E12%40teksol.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022321.html">
   <LINK REL="Next"  HREF="022327.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Delivering to one and only one queue</H1>
    <B>Fran&#231;ois Beausoleil</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delivering%20to%20one%20and%20only%20one%20queue&In-Reply-To=%3CF4D07CAD-48F8-46A0-BE68-C887FC791E12%40teksol.info%3E"
       TITLE="[rabbitmq-discuss] Delivering to one and only one queue">francois at teksol.info
       </A><BR>
    <I>Thu Sep  6 13:44:15 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022321.html">[rabbitmq-discuss] Delivering to one and only one queue
</A></li>
        <LI>Next message: <A HREF="022327.html">[rabbitmq-discuss] Delivering to one and only one queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22322">[ date ]</a>
              <a href="thread.html#22322">[ thread ]</a>
              <a href="subject.html#22322">[ subject ]</a>
              <a href="author.html#22322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I replied much too soon :( Does the consistent hash exchange accept strings as routing keys, and compute a hash from it? From the example, it appears not:

    routing_key = list_to_binary(integer_to_list(random:uniform(1000000))

My routing keys have a consistent format, of the form &quot;persona.qualified.UUID&quot;. The UUID part is what would trigger the consistent hash, because the rest of the routing key is constant.

Thanks!
Fran&#231;ois

Le 2012-09-06 &#224; 04:49, Simon MacMullen a &#233;crit :

&gt;<i> Sounds like the consistent hash exchange will do what you want?
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://hg.rabbitmq.com/rabbitmq-consistent-hash-exchange/raw-file/default/README.md">http://hg.rabbitmq.com/rabbitmq-consistent-hash-exchange/raw-file/default/README.md</A>
</I>&gt;<i> 
</I>&gt;<i> This ships with RabbitMQ as a plugin, but is disabled by default.
</I>&gt;<i> 
</I>&gt;<i> Cheers, Simon
</I>&gt;<i> 
</I>&gt;<i> On 05/09/2012 2:40PM, Fran&#231;ois Beausoleil wrote:
</I>&gt;&gt;<i> Hi all!
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I asked this question on StackOverflow yesterday, and I was looking to broaden the audience: <A HREF="http://stackoverflow.com/questions/12266488/routing-messages-to-one-and-only-one-queue">http://stackoverflow.com/questions/12266488/routing-messages-to-one-and-only-one-queue</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Here's a copy of the question:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &quot;&quot;&quot;
</I>&gt;&gt;<i> I have a Topic exchange from which I'd like to distribute messages to two queues on two servers part of a cluster, in order to reduce memory pressure on any particular server. My consumers are periodically slow, and I sometimes run into the high memory watermark.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The way I tried to resolve this is by routing messages using an intermediate direct exchange, with two queues bound to the exchange:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> a (topic) -&gt; a1 (direct) -&gt; q1/q2 (bound to routing key &quot;a&quot;)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> But the messages were routed to both queues, as AMQP intends. Anyone has ideas? What I need is an exchange that routes to one and only one queue, even if the routing key matches many queues. I'd prefer not to change my routing keys, but that could be arranged.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I found Selective routing with RabbitMQ, which may mean I'll need to implement my own routing logic. Hopefully, this already exists somewhere else.
</I>&gt;&gt;<i> &quot;&quot;&quot;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Any ideas?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thank you very much!
</I>&gt;&gt;<i> Fran&#231;ois Beausoleil
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> 
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022321.html">[rabbitmq-discuss] Delivering to one and only one queue
</A></li>
	<LI>Next message: <A HREF="022327.html">[rabbitmq-discuss] Delivering to one and only one queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22322">[ date ]</a>
              <a href="thread.html#22322">[ thread ]</a>
              <a href="subject.html#22322">[ subject ]</a>
              <a href="author.html#22322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
