<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Occasional slow message on a local machine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Occasional%20slow%20message%20on%20a%20local%20machine&In-Reply-To=%3C5053A287.1020400%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022510.html">
   <LINK REL="Next"  HREF="022513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Occasional slow message on a local machine</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Occasional%20slow%20message%20on%20a%20local%20machine&In-Reply-To=%3C5053A287.1020400%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Occasional slow message on a local machine">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Sep 14 22:32:55 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022510.html">[rabbitmq-discuss] Occasional slow message on a local machine
</A></li>
        <LI>Next message: <A HREF="022513.html">[rabbitmq-discuss] Occasional slow message on a local machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22512">[ date ]</a>
              <a href="thread.html#22512">[ thread ]</a>
              <a href="subject.html#22512">[ subject ]</a>
              <a href="author.html#22512">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Brennan,

On 14/09/12 21:07, Brennan Sellner wrote:
&gt;<i> It appears that cleaning up a queue (e.g. auto-delete on channel
</I>&gt;<i> close) requires Rabbit to fsync, even if the queue is non-durable.
</I>
Confirmed. That is certainly unexpected, so I have filed a bug.

What appears to be happening is that we attempt to remove the entries
for the queue from the durable queue and binding tables. Even though
there are no such entries mnesia still writes to its disk log, which we 
subsequently detect and request an fsync.

Looks like we need to get smarter here.

&gt;<i> So.  The question is: is it possible to declare a queue that's
</I>&gt;<i> entirely transitory, and doesn't result in Rabbit having to hit the
</I>&gt;<i> disk at any point in the queue's life cycle?
</I>
Apparently not.

&gt;<i> It really seems like there should be *some* way to have a
</I>&gt;<i> lightweight, ephemeral queue...
</I>
Yes.


Thanks for your help in tracking this down.


Regards,

Matthias.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022510.html">[rabbitmq-discuss] Occasional slow message on a local machine
</A></li>
	<LI>Next message: <A HREF="022513.html">[rabbitmq-discuss] Occasional slow message on a local machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22512">[ date ]</a>
              <a href="thread.html#22512">[ thread ]</a>
              <a href="subject.html#22512">[ subject ]</a>
              <a href="author.html#22512">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
