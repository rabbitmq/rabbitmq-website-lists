<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq fake-death &amp;&amp; no breath. key word in log : mirrored_supervisor rabbit_mgmt_db
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20fake-death%20%26%26%20no%20breath.%20key%20word%0A%20in%20log%20%3A%20mirrored_supervisor%20rabbit_mgmt_db&In-Reply-To=%3C505B4BCD.5000804%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022560.html">
   <LINK REL="Next"  HREF="022720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq fake-death &amp;&amp; no breath. key word in log : mirrored_supervisor rabbit_mgmt_db</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20fake-death%20%26%26%20no%20breath.%20key%20word%0A%20in%20log%20%3A%20mirrored_supervisor%20rabbit_mgmt_db&In-Reply-To=%3C505B4BCD.5000804%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq fake-death &amp;&amp; no breath. key word in log : mirrored_supervisor rabbit_mgmt_db">simon at rabbitmq.com
       </A><BR>
    <I>Thu Sep 20 18:01:01 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022560.html">[rabbitmq-discuss] rabbitmq fake-death &amp;&amp; no breath. key word in log : mirrored_supervisor rabbit_mgmt_db
</A></li>
        <LI>Next message: <A HREF="022720.html">[rabbitmq-discuss] rabbitmq fake-death &amp;&amp; no breath. key word in log : mirrored_supervisor rabbit_mgmt_db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22580">[ date ]</a>
              <a href="thread.html#22580">[ thread ]</a>
              <a href="subject.html#22580">[ subject ]</a>
              <a href="author.html#22580">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

This looks like a race with management DB failover that we've already 
fixed, but which has not yet made it into any release. This will be 
fixed in the next bugfix release. Until then if you are affected you can 
work around it by running the management plugin on only one node in the 
cluster (and just have rabbitmq_management_agent on the others).

Cheers, Simon

On 20/09/12 08:45, liubida wrote:
&gt;<i> hi all,
</I>&gt;<i>
</I>&gt;<i> dose anybody could point me just the direction for finding the reason
</I>&gt;<i> for a fake-dead with the RabbitMQ.
</I>&gt;<i> it seem the rabbitmq could not receive messages in some point, without
</I>&gt;<i> any warning.
</I>&gt;<i> i have constructed a cluster with 2 nodes, one disc and one ram.
</I>&gt;<i> if i type the command &quot;rabbitmqctl stop_app &amp;&amp; rabbitmqctl start_app&quot;,
</I>&gt;<i> the troubleshoot disappered.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> here is the disc node's sasl.log
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:13 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: child_terminated
</I>&gt;<i> Reason: killed
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: start_error
</I>&gt;<i> Reason: {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;<i> Context: shutdown
</I>&gt;<i> Reason: reached_max_restart_intensity
</I>&gt;<i> Offender: [{pid,&lt;0.28804.1777&gt;},
</I>&gt;<i> {name,rabbit_mgmt_db},
</I>&gt;<i> {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {local,rabbit_mgmt_sup}
</I>&gt;<i> Context: child_terminated
</I>&gt;<i> Reason: shutdown
</I>&gt;<i> Offender: [{pid,&lt;0.28803.1777&gt;},
</I>&gt;<i> {name,mirroring},
</I>&gt;<i> {mfa,
</I>&gt;<i> {mirrored_supervisor,start_internal,
</I>&gt;<i> [rabbit_mgmt_sup,
</I>&gt;<i> [{rabbit_mgmt_db,
</I>&gt;<i> {rabbit_mgmt_db,start_link,[]},
</I>&gt;<i> permanent,4294967295,worker,
</I>&gt;<i> [rabbit_mgmt_db]}]]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;<i> Supervisor: {local,rabbit_mgmt_sup}
</I>&gt;<i> Context: shutdown
</I>&gt;<i> Reason: reached_max_restart_intensity
</I>&gt;<i> Offender: [{pid,&lt;0.28803.1777&gt;},
</I>&gt;<i> {name,mirroring},
</I>&gt;<i> {mfa,
</I>&gt;<i> {mirrored_supervisor,start_internal,
</I>&gt;<i> [rabbit_mgmt_sup,
</I>&gt;<i> [{rabbit_mgmt_db,
</I>&gt;<i> {rabbit_mgmt_db,start_link,[]},
</I>&gt;<i> permanent,4294967295,worker,
</I>&gt;<i> [rabbit_mgmt_db]}]]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> the ram node's sasl.log
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::17:24:50 ===
</I>&gt;<i> Supervisor: {local,rabbit_mgmt_sup}
</I>&gt;<i> Context: child_terminated
</I>&gt;<i> Reason: shutdown
</I>&gt;<i> Offender: [{pid,&lt;0.14161.2335&gt;},
</I>&gt;<i> {name,mirroring},
</I>&gt;<i> {mfa,
</I>&gt;<i> {mirrored_supervisor,start_internal,
</I>&gt;<i> [rabbit_mgmt_sup,
</I>&gt;<i> [{rabbit_mgmt_db,
</I>&gt;<i> {rabbit_mgmt_db,start_link,[]},
</I>&gt;<i> permanent,4294967295,worker,
</I>&gt;<i> [rabbit_mgmt_db]}]]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::17:24:50 ===
</I>&gt;<i> Supervisor: {local,rabbit_mgmt_sup}
</I>&gt;<i> Context: shutdown
</I>&gt;<i> Reason: reached_max_restart_intensity
</I>&gt;<i> Offender: [{pid,&lt;0.14161.2335&gt;},
</I>&gt;<i> {name,mirroring},
</I>&gt;<i> {mfa,
</I>&gt;<i> {mirrored_supervisor,start_internal,
</I>&gt;<i> [rabbit_mgmt_sup,
</I>&gt;<i> [{rabbit_mgmt_db,
</I>&gt;<i> {rabbit_mgmt_db,start_link,[]},
</I>&gt;<i> permanent,4294967295,worker,
</I>&gt;<i> [rabbit_mgmt_db]}]]}},
</I>&gt;<i> {restart_type,permanent},
</I>&gt;<i> {shutdown,4294967295},
</I>&gt;<i> {child_type,worker}]
</I>&gt;<i>
</I>&gt;<i> Thanks for any help.
</I>&gt;<i>
</I>&gt;<i> --bidaliu
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022560.html">[rabbitmq-discuss] rabbitmq fake-death &amp;&amp; no breath. key word in log : mirrored_supervisor rabbit_mgmt_db
</A></li>
	<LI>Next message: <A HREF="022720.html">[rabbitmq-discuss] rabbitmq fake-death &amp;&amp; no breath. key word in log : mirrored_supervisor rabbit_mgmt_db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22580">[ date ]</a>
              <a href="thread.html#22580">[ thread ]</a>
              <a href="subject.html#22580">[ subject ]</a>
              <a href="author.html#22580">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
