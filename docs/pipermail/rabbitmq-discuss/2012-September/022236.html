<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Java client lib: up to 5 threads created in client when server publishes new message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20client%20lib%3A%20up%20to%205%20threads%20created%20in%0A%20client%20when%20server%20publishes%20new%20message&In-Reply-To=%3C5044E0DB.2030807%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022235.html">
   <LINK REL="Next"  HREF="022242.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Java client lib: up to 5 threads created in client when server publishes new message</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20client%20lib%3A%20up%20to%205%20threads%20created%20in%0A%20client%20when%20server%20publishes%20new%20message&In-Reply-To=%3C5044E0DB.2030807%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Java client lib: up to 5 threads created in client when server publishes new message">simon at rabbitmq.com
       </A><BR>
    <I>Mon Sep  3 17:54:51 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022235.html">[rabbitmq-discuss] Java client lib: up to 5 threads created in client when server publishes new message
</A></li>
        <LI>Next message: <A HREF="022242.html">[rabbitmq-discuss] Java client lib: up to 5 threads created in client when server publishes new message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22236">[ date ]</a>
              <a href="thread.html#22236">[ thread ]</a>
              <a href="subject.html#22236">[ subject ]</a>
              <a href="author.html#22236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/09/12 17:40, Simon MacMullen wrote:
&gt;<i> On 02/09/12 14:06, sharonbn wrote:
</I>&gt;&gt;<i> I created a simple client in Java, which consumes messages from a
</I>&gt;&gt;<i> queue in a
</I>&gt;&gt;<i> loop.
</I>&gt;&gt;<i> what I see in the debugger, is that whenever I publish a new message into
</I>&gt;&gt;<i> queue &quot;q0&quot;
</I>&gt;&gt;<i> a new thread is opened in the client. until 5 threads are open and
</I>&gt;&gt;<i> running.
</I>&gt;&gt;<i> (this is besides the single thread named &quot;AMQP Connection&quot;)
</I>&gt;&gt;<i> the threads begin when the messages are published, not when they are
</I>&gt;&gt;<i> consumed...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> is this expected behavior?
</I>
Ah, I missed &quot;the threads begin when the messages are published, not 
when they are consumed.&quot;

The threads are started up when the message is consumed by the client 
(which is likely to be very soon after you published!) But this could be 
some time before you invoke QueueingConsumer.nextDelivery() - since 
QueueingConsumer will of course itself queue these messages.

&gt;<i> Yes. This is the thread pool for consumer callbacks to get executed in.
</I>&gt;<i>
</I>&gt;&gt;<i> can this be changed?
</I>&gt;<i>
</I>&gt;<i> Yes, invoke ConnectionFactory.newConnection(ExecutorService, Address[])
</I>&gt;<i> with a different ExecutorService.
</I>
...or ConnectionFactory.newConnection(ExecutorService). See:

<A HREF="http://www.rabbitmq.com/api-guide.html#advanced-connection">http://www.rabbitmq.com/api-guide.html#advanced-connection</A>

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022235.html">[rabbitmq-discuss] Java client lib: up to 5 threads created in client when server publishes new message
</A></li>
	<LI>Next message: <A HREF="022242.html">[rabbitmq-discuss] Java client lib: up to 5 threads created in client when server publishes new message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22236">[ date ]</a>
              <a href="thread.html#22236">[ thread ]</a>
              <a href="subject.html#22236">[ subject ]</a>
              <a href="author.html#22236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
