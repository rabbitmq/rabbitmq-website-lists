<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: .Net RabbitMQ.Client Issue: Deadlock on ConnectionShutdown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20.Net%20RabbitMQ.Client%20Issue%3A%20Deadlock%20on%0A%20ConnectionShutdown&In-Reply-To=%3C50602FDB.3020809%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022606.html">
   <LINK REL="Next"  HREF="022607.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: .Net RabbitMQ.Client Issue: Deadlock on ConnectionShutdown</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20.Net%20RabbitMQ.Client%20Issue%3A%20Deadlock%20on%0A%20ConnectionShutdown&In-Reply-To=%3C50602FDB.3020809%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Fwd: .Net RabbitMQ.Client Issue: Deadlock on ConnectionShutdown">emile at rabbitmq.com
       </A><BR>
    <I>Mon Sep 24 11:03:07 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022606.html">[rabbitmq-discuss] Fwd: .Net RabbitMQ.Client Issue: Deadlock on	ConnectionShutdown
</A></li>
        <LI>Next message: <A HREF="022607.html">[rabbitmq-discuss] Question about message ttl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22634">[ date ]</a>
              <a href="thread.html#22634">[ thread ]</a>
              <a href="subject.html#22634">[ subject ]</a>
              <a href="author.html#22634">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/09/12 15:48, Derek Greer wrote:
&gt;<i> As far as considering connection renewal rather than channel renewal, I
</I>&gt;<i> don't understand how this would be possible. You yourself said:
</I>
I propose that you look at the problem from another perspective. If a
connection crashes then forget about that connection and all the
channels contained in it. The library will clean them up. Return to the
point of control where the connection was established and reconnect and
re-establish brand new AMQP subscriptions.

&gt;<i> Again, the problem I'm trying to address is to model a Subscription
</I>&gt;<i> which can be cancelled on demand (i.e. the user wants to maintain the
</I>&gt;<i> connection, but wants to unsubscribe from receiving a given message
</I>&gt;<i> type), and which can be renewed when a new connection is obtained.
</I>
We are using the word &quot;subscription&quot; for at least two different things:
AMQP subscriptions (which cannot be renewed)
The view that your user sees (and cope with reconnections transparently)

Cancelling an AMQP subscription is simple, because there is an explicit
method for it. &quot;Renewing&quot; an AMQP subscription is not possible. Creating
the illusion of renewable subscriptions is design problem that the
RabbitMQ client library does not address.

&gt;<i>  Using the IModel.ModelShutdown event here isn't what someone would want
</I>&gt;<i> to do from a design perspective, as there are things I want to do on
</I>&gt;<i> connection shutdown that I don't want to do on every model shutdown.  It
</I>&gt;<i> just simply isn't the right event for the case at hand.  I also can't
</I>&gt;<i> just not call IModel.Close() in all cases.
</I>&gt;<i> 
</I>&gt;<i> Bottom line, I see a design flaw here that needs to be recognized and
</I>&gt;<i> addressed.  
</I>
The absence if renewable subscriptions may well be considered a flaw.
Instead of trying to be all things to all people, the library instead
offers the building blocks to build solutions that can hopefully suit
every user. Signalling connection and channel lifetime events is an
important component building block.

&gt;<i> Speaking of which, this mailing list is a horrible way to deal with
</I>&gt;<i> product specific bug reports.  Why doesn't your team use github or
</I>&gt;<i> some other facility which has a proper bug tracking system?
</I>
We thank you for your feedback and will take it into consideration in
any future decision about this matter.



-Emile


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022606.html">[rabbitmq-discuss] Fwd: .Net RabbitMQ.Client Issue: Deadlock on	ConnectionShutdown
</A></li>
	<LI>Next message: <A HREF="022607.html">[rabbitmq-discuss] Question about message ttl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22634">[ date ]</a>
              <a href="thread.html#22634">[ thread ]</a>
              <a href="subject.html#22634">[ subject ]</a>
              <a href="author.html#22634">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
