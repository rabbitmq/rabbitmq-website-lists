<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Binding to topic exchange with a negation	wildcard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Binding%20to%20topic%20exchange%20with%20a%20negation%0A%09wildcard&In-Reply-To=%3CCAAqmy6MvHUGDf0YUkQtn%3D%3D9AQ_oeQySU38KUBF%3D-kB9SYk-c4A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022484.html">
   <LINK REL="Next"  HREF="022486.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Binding to topic exchange with a negation	wildcard</H1>
    <B>Dave Curylo</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Binding%20to%20topic%20exchange%20with%20a%20negation%0A%09wildcard&In-Reply-To=%3CCAAqmy6MvHUGDf0YUkQtn%3D%3D9AQ_oeQySU38KUBF%3D-kB9SYk-c4A%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Binding to topic exchange with a negation	wildcard">curylod at asme.org
       </A><BR>
    <I>Thu Sep 13 21:47:52 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022484.html">[rabbitmq-discuss] Regex exchange? (was: Binding to topic	exchange with a negation wildcard)
</A></li>
        <LI>Next message: <A HREF="022486.html">[rabbitmq-discuss] Binding to topic exchange with a negation wildcard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22485">[ date ]</a>
              <a href="thread.html#22485">[ thread ]</a>
              <a href="subject.html#22485">[ subject ]</a>
              <a href="author.html#22485">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The fanout + alternate-exchange for junk works, except I can't make these
extra exchanges exclusive like I can when declaring a server assigned,
exclusive, autodelete queue with queueDeclare(). That's probably not a big
deal, as nobody would likely guess the names of these extra exchanges.

I think I'd take a simple negation binding over a full regex if there are
performance implications. Negation bindings obviously would need to be
declared before other bindings or a match could be found before it got to
the negation, but I think that's reasonable - typical rules processing
works this way. It doesn't seem like with these types of negations would
have performance implications with the caveat that they must be earlier in
the list of bindings.

On Thu, Sep 13, 2012 at 10:53 AM, Laing, Michael P. &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Michael.Laing at nytimes.com</A>&gt; wrote:

&gt;<i> We would find a regular expression matching option for topic exchanges
</I>&gt;<i> most useful.
</I>&gt;<i>
</I>&gt;<i> My 2 cents :)
</I>&gt;<i>
</I>&gt;<i> Michael
</I>&gt;<i>
</I>&gt;<i> On 9/13/12 4:40 AM, &quot;Simon MacMullen&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;On 12/09/2012 8:37PM, Dave Curylo wrote:
</I>&gt;<i> &gt;&gt; Is it possible to bind a queue to a topic exchange with a condition that
</I>&gt;<i> &gt;&gt; the topic does NOT match a certain wildcard?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;The topic exchange doesn't have that logic. But you can fake it with the
</I>&gt;<i> &gt;alternate exchange feature, at the cost of a few more exchanges.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Declare a fanout exchange you'll publish to (let's call it
</I>&gt;<i> &gt;&quot;my-exchange&quot;). Declare a fanout exchange called &quot;junk&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;The when each consumer declares a queue, it also declares a topic
</I>&gt;<i> &gt;exchange and a fanout exchange. The alternate-exchange for the topic
</I>&gt;<i> &gt;exchange should be set to the fanout exchange. It then binds the topic
</I>&gt;<i> &gt;exchange to &quot;my-exchange&quot;, and &quot;junk&quot; to the topic exchange, with a
</I>&gt;<i> &gt;routing key equal to the topics it doesn't want.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Thus messages with the &quot;bad&quot; routing key go:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   [my-exchange] -&gt; [per-consumer-topic] -&gt; [junk]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;and the rest go:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   [my-exchange] -&gt; [per-consumer-topic] -&gt; [per-consumer-fanout] -&gt;
</I>&gt;<i> &gt;[per-consumer-queue]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I think that's the simplest you can make it. But exchanges are cheap in
</I>&gt;<i> &gt;general, it's just routing logic.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;But I wonder whether some sort of more explicit negation feature would
</I>&gt;<i> &gt;be feasible / useful. Hmm.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Cheers, Simon
</I>&gt;<i> &gt;_______________________________________________
</I>&gt;<i> &gt;rabbitmq-discuss mailing list
</I>&gt;<i> &gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120913/664e4c6d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120913/664e4c6d/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022484.html">[rabbitmq-discuss] Regex exchange? (was: Binding to topic	exchange with a negation wildcard)
</A></li>
	<LI>Next message: <A HREF="022486.html">[rabbitmq-discuss] Binding to topic exchange with a negation wildcard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22485">[ date ]</a>
              <a href="thread.html#22485">[ thread ]</a>
              <a href="subject.html#22485">[ subject ]</a>
              <a href="author.html#22485">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
