<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20FYI%3A%20RabbitMQ%20default%20installation%20broken%20on%0A%20Ubuntu%20%28potential%20all%20Debian-likes%29&In-Reply-To=%3C504DCF87.2030601%40nine.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022374.html">
   <LINK REL="Next"  HREF="022387.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)</H1>
    <B>Ren&#233; Gallati</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20FYI%3A%20RabbitMQ%20default%20installation%20broken%20on%0A%20Ubuntu%20%28potential%20all%20Debian-likes%29&In-Reply-To=%3C504DCF87.2030601%40nine.ch%3E"
       TITLE="[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)">regal at nine.ch
       </A><BR>
    <I>Mon Sep 10 12:31:19 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022374.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
</A></li>
        <LI>Next message: <A HREF="022387.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22384">[ date ]</a>
              <a href="thread.html#22384">[ thread ]</a>
              <a href="subject.html#22384">[ subject ]</a>
              <a href="author.html#22384">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/07/2012 07:10 PM, Simon MacMullen wrote:
&gt;<i> On 07/09/12 16:42, Ren&#233; Gallati wrote:
</I>&gt;&gt;<i> There are some subtle differences here. The machine has a perfect
</I>&gt;&gt;<i> resolvable hostname. The difference is, if the hostname does NOT resolve
</I>&gt;&gt;<i> to 127.0.0.1 (which I expect is pretty much standard) then it does not
</I>&gt;&gt;<i> work.
</I>&gt;<i>
</I>&gt;<i> This really is not what I'm seeing here, honestly. Can you send me the
</I>&gt;<i> contents of /var/rabbitmq/log when it fails to start?
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>
I spent some time playing with my personal systems over the weekend 
where everything worked great. I could trace the problem back to the 
firewall config opening up the ports too late which causes 
rabbitmq-server not to be able to connect to itself and lets the 
installation abort.

So it boils down to a race condition, or rather a wrong sequence of 
installation / setting up which causes a failure in the start of 
rabbitmq-server and not a broken package/installer. We have a relative 
restrictive default firewall policy and it just bit back.

Sorry to having caused a fuzz.

While trying to fix this I found that I basically have to allow all 
traffic on $extip since it appears that beam.smp is binding 2 random 
ports and needs to be accessible there, is that correct? Ie. just 
allowing 4369 and 5672 the latter of which btw. is the only port it 
binds as ipv6 is not enough. Rabbitmq starts but hangs while starting 
and the init script never returns until I allow access to the randomly 
bound ports. Can I pre-set these ports with some configuration directive 
or are they truly random?


CU

Ren&#233;




</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022374.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
</A></li>
	<LI>Next message: <A HREF="022387.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22384">[ date ]</a>
              <a href="thread.html#22384">[ thread ]</a>
              <a href="subject.html#22384">[ subject ]</a>
              <a href="author.html#22384">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
