<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 30% performance degradation with user access controls enabled
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%2030%25%20performance%20degradation%20with%20user%20access%0A%20controls%20enabled&In-Reply-To=%3C505D7D0E.80206%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022615.html">
   <LINK REL="Next"  HREF="022621.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 30% performance degradation with user access controls enabled</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%2030%25%20performance%20degradation%20with%20user%20access%0A%20controls%20enabled&In-Reply-To=%3C505D7D0E.80206%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] 30% performance degradation with user access controls enabled">matthias at rabbitmq.com
       </A><BR>
    <I>Sat Sep 22 09:55:42 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022615.html">[rabbitmq-discuss] 30% performance degradation with user access	controls enabled
</A></li>
        <LI>Next message: <A HREF="022621.html">[rabbitmq-discuss] Dead Letter and Unknown Field?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22617">[ date ]</a>
              <a href="thread.html#22617">[ thread ]</a>
              <a href="subject.html#22617">[ subject ]</a>
              <a href="author.html#22617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris,

On 21/09/12 23:54, Chris wrote:
&gt;<i> Based on descriptions on RabbitMQ access control,
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/access-control.html">http://www.rabbitmq.com/access-control.html</A> : &quot;RabbitMQ may cache the
</I>&gt;<i> results of access control checks on a per-connection or per-channel
</I>&gt;<i> basis.&quot; Based on this statement, rabbitmq access control operations
</I>&gt;<i> should not impose too much load on the server performance.
</I>&gt;<i>
</I>&gt;<i> But in our test, we have 5000 client connections over SSL, each client
</I>&gt;<i> is set with a configure/write/read permissions like this:
</I>&gt;<i>
</I>&gt;<i> Configure: {client_name}.*|^amq\.gen.*|^amq\.default|^vsm.*
</I>&gt;<i> Write: {client_name}.*|^amq\.gen.*|^amq\.default
</I>&gt;<i> Read: {client_name}.*|^amq\.gen.*|^amq\.default|^vsm.*
</I>&gt;<i>
</I>&gt;<i> One publisher publishes 10 message per second to an exchange, message
</I>&gt;<i> size is 1KB,  each client/consumer creates a queue and bind to this
</I>&gt;<i> exchange, and we have a total of 5000 unique clients with its own queues.
</I>&gt;<i>
</I>&gt;<i>  From the client side, we can receive about 8000 messages per second.
</I>&gt;<i>
</I>&gt;<i> But if we do not set any user permissions, simply use rabbitmq system
</I>&gt;<i> default guest user, and create 5000 unique connections/queues to the
</I>&gt;<i> server, our client side message rate is 12000 messages per second.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My question is: what contributes to the 30% performance degradation?
</I>
I suspect there is some difference other than the permissions between 
the two tests. Please send us the output of 'rabbitmqctl report' from 
each test.

Where did you get the rates from? The management UI? If so a screenshot 
of what you are seeing in each case would be good.


Regards,

Matthias.
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022615.html">[rabbitmq-discuss] 30% performance degradation with user access	controls enabled
</A></li>
	<LI>Next message: <A HREF="022621.html">[rabbitmq-discuss] Dead Letter and Unknown Field?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22617">[ date ]</a>
              <a href="thread.html#22617">[ thread ]</a>
              <a href="subject.html#22617">[ subject ]</a>
              <a href="author.html#22617">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
