<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Strange start error issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Strange%20start%20error%20issue&In-Reply-To=%3CCAFnnZrhJGxsPc0iwGk8mpkrBFtge7LBv8Rw-Jepo5jaXh8%3D9hw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022551.html">
   <LINK REL="Next"  HREF="022581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Strange start error issue</H1>
    <B>Samuel Chen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Strange%20start%20error%20issue&In-Reply-To=%3CCAFnnZrhJGxsPc0iwGk8mpkrBFtge7LBv8Rw-Jepo5jaXh8%3D9hw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Strange start error issue">samuel.net at gmail.com
       </A><BR>
    <I>Thu Sep 20 10:19:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022551.html">[rabbitmq-discuss] Strange start error issue
</A></li>
        <LI>Next message: <A HREF="022581.html">[rabbitmq-discuss] Strange start error issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22561">[ date ]</a>
              <a href="thread.html#22561">[ thread ]</a>
              <a href="subject.html#22561">[ subject ]</a>
              <a href="author.html#22561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I would update some info about the issue:

When the issue occurs, the status of rabbitMQ cluster is still running. But
the message from Celery will not be processed until we restart rabbit.
At the same time, the web admin UI shutdown. So I was doubting if the
management plugin caused this issue.

Anybody could help?
thanks.

On Thu, Sep 20, 2012 at 12:10 AM, Samuel Chen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">samuel.net at gmail.com</A>&gt; wrote:

&gt;<i> Hi all
</I>&gt;<i>
</I>&gt;<i> I'm new to RabbitMQ. We are facing a strange issue against rabbit_mgmt_db.
</I>&gt;<i> I could not find any similar issues by searching on google or
</I>&gt;<i> stackoverflow. So I wonder if anyone could help to diagnose this problem.
</I>&gt;<i> Thanks in advance.
</I>&gt;<i>
</I>&gt;<i> We have a 2-node clustered RabbitMQ integrated with Celery. It worked well
</I>&gt;<i> for several months.
</I>&gt;<i> The issue occurred the first time on Jul 4th. After restarted, it worked
</I>&gt;<i> for about 2 months. Yesterday the issue occurred twice (one is after
</I>&gt;<i> restarted).
</I>&gt;<i> The stat was that a child (rabbit_mgmt_db??) was killed automatically.  By
</I>&gt;<i> some failures of restarting automatically, it reached the max restart
</I>&gt;<i> intensity. Eventually it was shutdown.
</I>&gt;<i> (Anther situation is that we deployed to 2-node cluster from 1 node server
</I>&gt;<i> at the end of June. Note sure if it caused this issue.)
</I>&gt;<i>
</I>&gt;<i> The hosts are virtual servers with 8/12G ram and 30G disk.
</I>&gt;<i> One node is disc node and the other is ram.
</I>&gt;<i> The load balance was very low (around 100M ram, few tasks) . Disk has 2.5G
</I>&gt;<i> free space.
</I>&gt;<i> Log as below.
</I>&gt;<i>
</I>&gt;<i> Thanks for any help.
</I>&gt;<i>
</I>&gt;<i> SUPERVISOR REPORT==== 18-Sep-2012::14:53:13 ===
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Context:    child_terminated
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Reason:     killed
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Offender:   [{pid,&lt;0.28804.1777&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {name,rabbit_mgmt_db},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {restart_type,permanent},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {shutdown,4294967295},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {child_type,worker}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Context:    start_error
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Reason:     {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Offender:   [{pid,&lt;0.28804.1777&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {name,rabbit_mgmt_db},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {restart_type,permanent},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {shutdown,4294967295},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {child_type,worker}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Context:    start_error
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Reason:     {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Offender:   [{pid,&lt;0.28804.1777&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {name,rabbit_mgmt_db},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {restart_type,permanent},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {shutdown,4294967295},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {child_type,worker}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Context:    start_error
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Reason:     {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Offender:   [{pid,&lt;0.28804.1777&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {name,rabbit_mgmt_db},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {restart_type,permanent},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {shutdown,4294967295},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {child_type,worker}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Context:    start_error
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Reason:     {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Offender:   [{pid,&lt;0.28804.1777&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {name,rabbit_mgmt_db},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {restart_type,permanent},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {shutdown,4294967295},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {child_type,worker}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Supervisor: {&lt;0.28802.1777&gt;,mirrored_supervisor}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Context:    start_error
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Reason:     {already_started,&lt;19704.13906.2335&gt;}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Offender:   [{pid,&lt;0.28804.1777&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {name,rabbit_mgmt_db},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {mfa,{rabbit_mgmt_db,start_link,[]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {restart_type,permanent},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {shutdown,4294967295},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {child_type,worker}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> =SUPERVISOR REPORT==== 18-Sep-2012::14:53:14 ===
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Supervisor: {local,rabbit_mgmt_sup}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Context:    shutdown
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Reason:     reached_max_restart_intensity
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      Offender:   [{pid,&lt;0.28803.1777&gt;},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {name,mirroring},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {mfa,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                       {mirrored_supervisor,start_internal,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                           [rabbit_mgmt_sup,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                            [{rabbit_mgmt_db,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                                 {rabbit_mgmt_db,start_link,[]},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                                 permanent,4294967295,worker,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                                 [rabbit_mgmt_db]}]]}},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {restart_type,permanent},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {shutdown,4294967295},
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>                   {child_type,worker}]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> - Sam
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120920/0cb0da2a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120920/0cb0da2a/attachment.htm</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022551.html">[rabbitmq-discuss] Strange start error issue
</A></li>
	<LI>Next message: <A HREF="022581.html">[rabbitmq-discuss] Strange start error issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22561">[ date ]</a>
              <a href="thread.html#22561">[ thread ]</a>
              <a href="subject.html#22561">[ subject ]</a>
              <a href="author.html#22561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
