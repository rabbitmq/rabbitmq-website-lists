<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] AWS clustering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AWS%20clustering&In-Reply-To=%3C9865146e-11da-4ffb-880f-5d51244a792f%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022274.html">
   <LINK REL="Next"  HREF="022275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] AWS clustering</H1>
    <B>Glade</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AWS%20clustering&In-Reply-To=%3C9865146e-11da-4ffb-880f-5d51244a792f%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] AWS clustering">gladed at gmail.com
       </A><BR>
    <I>Wed Sep  5 04:01:38 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022274.html">[rabbitmq-discuss] How can I avoid write buffer warnings for	non	persistant messaging?
</A></li>
        <LI>Next message: <A HREF="022275.html">[rabbitmq-discuss] AWS clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22264">[ date ]</a>
              <a href="thread.html#22264">[ thread ]</a>
              <a href="subject.html#22264">[ subject ]</a>
              <a href="author.html#22264">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

In a project I'm working on we set up a cluster of application nodes, each 
with RabbitMQ installed. Everybody can talk to everybody, and we can scale 
the number of nodes pretty easily. But on more than one occasion, we have 
seen mnesia become partitioned. You've seen this before:

*Mnesia('<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at app-6</A>'): ** ERROR ** mnesia_event got 
{inconsistent_database, running_partitioned_network, '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at app-5</A>'}*


As best as we can tell, this is caused by temporary network outages, or 
possibly high-load conditions, or possibly the nexus of both. However it 
happens, you end up with one or more nodes down for the count with 
non-deterministic behavior (messages sent to that node may or may not reach 
other nodes). It doesn't recover until you *manually* stop_app/start_app. 
And if it happened to be a disc node, *rm -rf 
/var/lib/rabbitmq/mnesia/rabbitmq/** in between.

For a supposedly &quot;just works&quot; kind of service, that is just not good 
enough. I can't have my ops people rolling out of bed to take action every 
time there's a minor network glitch. So, I either need to provide a network 
that never becomes partitioned (does such a network exist? Certainly not at 
AWS!), or I need to drop clustering and have a single RabbitMQ server which 
won't scale, or I need to cobble together some kind of automated supervisor 
which is certain not to handle all cases, or I need to use a different 
messaging tool.

Please, somebody dispute my conclusion because I would love to continue 
using RabbitMQ.

Best regards,
Glade


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120904/ed3a8ae9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120904/ed3a8ae9/attachment.htm</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022274.html">[rabbitmq-discuss] How can I avoid write buffer warnings for	non	persistant messaging?
</A></li>
	<LI>Next message: <A HREF="022275.html">[rabbitmq-discuss] AWS clustering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22264">[ date ]</a>
              <a href="thread.html#22264">[ thread ]</a>
              <a href="subject.html#22264">[ subject ]</a>
              <a href="author.html#22264">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
