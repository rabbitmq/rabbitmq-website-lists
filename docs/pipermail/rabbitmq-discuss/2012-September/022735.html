<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] pika 0.9.6 and Reconnection Strategies
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20pika%200.9.6%20and%20Reconnection%20Strategies&In-Reply-To=%3CCAKwdTWcESvm1wdC0cMawFer3Kq_P6wCdf%3DDz4oUjjgdiRiO0kg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022736.html">
   <LINK REL="Next"  HREF="022738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] pika 0.9.6 and Reconnection Strategies</H1>
    <B>Gavin M. Roy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20pika%200.9.6%20and%20Reconnection%20Strategies&In-Reply-To=%3CCAKwdTWcESvm1wdC0cMawFer3Kq_P6wCdf%3DDz4oUjjgdiRiO0kg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] pika 0.9.6 and Reconnection Strategies">gmr at meetme.com
       </A><BR>
    <I>Fri Sep 28 16:52:36 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022736.html">[rabbitmq-discuss] Rabbitmq 2.5.1 Bad argument crash
</A></li>
        <LI>Next message: <A HREF="022738.html">[rabbitmq-discuss] Errors starting RabbitMQ when cluster membership	changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22735">[ date ]</a>
              <a href="thread.html#22735">[ thread ]</a>
              <a href="subject.html#22735">[ subject ]</a>
              <a href="author.html#22735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm trying to get 0.9.6 wrapped up and out the door (finally). If you're a
Python developer and use Pika, I wanted to solicit your feedback.

As I've been going through, adding tests and cleaning up the code, I've
come to the opinion that Reconnection Strategies, at least in their current
form are not very useful. There are a few reasons for this:

1) They do not restore state, meaning your application will still have to
know when you are disconnected and it will have to reestablish all of the
channels and if it's a consumer, re-issue any state based commands, such as
Basic.Consume, Confirm.Select etc. If the ReconnectionStrategy classes
could restore state, I'd see much more value in them.

2) As it is, the apps using the asynchronous adapters can listen for the
connection close event and handle this on their own. Again if anyone was
using the ReconnectionStrategy classes for re-establishing the connection,
they would have to do the rest of the work this way, anyway.

3) BlockingConnection, which seems to be the most popular adapter, can not
use them. Since it currently reimplements the connection closing to raise
an exception when the connection is remotely closed or dropped, it could
not expect the event to be fired. A design decision would have to be made
to force users of BlockingConnection to use an callback for handling
connections being closed in order to support reconnections strategies or
keep it the way it is, which is a more pythonic approach.

That being said, I am leaning towards dropping them as part of the core
library. If I do this, I would include an example that re-implements the
SimpleReconnectionStrategy class as a demo consumer that shows how to
create a reconnectable consumer application.

If you're a pika user, do you use the SRS or your own ReconnectionStrategy
extended class? Are you in favor of removing it or keeping it?  If I end up
going the route of removing it, it will mean I can get 0.9.6 out, possibly
this weekend. Keeping it may mean another week or two.

As a side note, 0.9.6pre1 is in the master branch on github and could use
some testing outside of my environment. If you're interested and able, you
can install it via pip install -e git+git://
github.com/pika/pika.git#egg=pika-v0.9.6pre1

Regards,

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120928/855ac4b5/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120928/855ac4b5/attachment.htm</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022736.html">[rabbitmq-discuss] Rabbitmq 2.5.1 Bad argument crash
</A></li>
	<LI>Next message: <A HREF="022738.html">[rabbitmq-discuss] Errors starting RabbitMQ when cluster membership	changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22735">[ date ]</a>
              <a href="thread.html#22735">[ thread ]</a>
              <a href="subject.html#22735">[ subject ]</a>
              <a href="author.html#22735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
