<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20FYI%3A%20RabbitMQ%20default%20installation%20broken%20on%0A%20Ubuntu%20%28potential%20all%20Debian-likes%29&In-Reply-To=%3C504A15FC.70500%40nine.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022366.html">
   <LINK REL="Next"  HREF="022373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)</H1>
    <B>Ren&#233; Gallati</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20FYI%3A%20RabbitMQ%20default%20installation%20broken%20on%0A%20Ubuntu%20%28potential%20all%20Debian-likes%29&In-Reply-To=%3C504A15FC.70500%40nine.ch%3E"
       TITLE="[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)">regal at nine.ch
       </A><BR>
    <I>Fri Sep  7 16:42:52 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022366.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
</A></li>
        <LI>Next message: <A HREF="022373.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on	Ubuntu (potential all Debian-likes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22371">[ date ]</a>
              <a href="thread.html#22371">[ thread ]</a>
              <a href="subject.html#22371">[ subject ]</a>
              <a href="author.html#22371">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/07/2012 05:14 PM, Simon MacMullen wrote:
&gt;<i> On 07/09/12 14:49, Rene Gallati wrote:
</I>&gt;<i> &lt;snip&gt;
</I>&gt;&gt;<i> What is really happening is, that rabbitmq-server
</I>&gt;&gt;<i> absolutely requires that the hostname-part be defined as entry in
</I>&gt;&gt;<i> /etc/hosts as name for 127.0.0.1 !
</I>&gt;<i> &lt;snip&gt;
</I>&gt;<i>
</I>&gt;<i> This is not true.
</I>&gt;<i>
</I>&gt;<i> It *does* require that the hostname resolve, i.e. that &quot;ping `hostname`&quot;
</I>&gt;<i> works and maps to *an* IP address of the machine. As Tim says, this is
</I>&gt;<i> an Erlang requirement, but I don't think it's too hideous.
</I>
There are some subtle differences here. The machine has a perfect 
resolvable hostname. The difference is, if the hostname does NOT resolve 
to 127.0.0.1 (which I expect is pretty much standard) then it does not 
work.

Put simply, if your machine is called testmachine and has an IP address 
of 8.7.6.5 then it rabbitmq-server will fail to start.

As soon as you change /etc/hosts from:

127.0.0.1 localhost

8.7.6.5	testmachine testmachine.domain.tld

to:

127.0.0.1 localhost testmachine

8.7.6.5 testmachine.domain.tld

THEN it will work.

I'm sure you'll agree that this is neither standard nor sensible.

Note that no matter what you do, the machine is always perfectly capable 
to ping itself, ie. &quot;host testmachine&quot;, &quot;ping testmachine&quot; etc. will 
always give the expected and correct result, but until you add the 
hostname to the localhost entry, rabbitmq-server will simply be unable 
to start in the default configuration as it is being installed from the 
currently available package in the repository.

&gt;<i> And for the record every installation of Ubuntu I've seen (including a
</I>&gt;<i> recent 12.04 LTS install), does add the hostname to /etc/hosts. But this
</I>&gt;<i> is not necessary - on my main development machine the hostname actually
</I>&gt;<i> resolves over DNS, and RabbitMQ starts fine.
</I>
Yes they add the hostname but not to the *127.0.0.1* entry. That is the 
difference. And without that the current standard package won't start on 
a freshly installed Ubuntu Linux 12.04 LTS - and I suspect on a lot of 
other variants neither.

Apparently that is a problem of Erlang and not RabbitMQ, but I propose 
as a temporary workaround to not let the package-installer start the 
service since that fails and causes the whole installation to report 
error and abort. Instead either display a message that one needs to set 
NODENAME to <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at localhost</A> (or actually change the file that is being 
installed by default to this value) so that it works out of the box as 
it probably should.

CU

Ren&#233;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022366.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on Ubuntu (potential all Debian-likes)
</A></li>
	<LI>Next message: <A HREF="022373.html">[rabbitmq-discuss] FYI: RabbitMQ default installation broken on	Ubuntu (potential all Debian-likes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22371">[ date ]</a>
              <a href="thread.html#22371">[ thread ]</a>
              <a href="subject.html#22371">[ subject ]</a>
              <a href="author.html#22371">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
