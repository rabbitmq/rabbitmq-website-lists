<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] List consumer connections/channels per queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20List%20consumer%20connections/channels%20per%20queue&In-Reply-To=%3C5048C284.80906%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022325.html">
   <LINK REL="Next"  HREF="022313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] List consumer connections/channels per queue</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20List%20consumer%20connections/channels%20per%20queue&In-Reply-To=%3C5048C284.80906%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] List consumer connections/channels per queue">simon at rabbitmq.com
       </A><BR>
    <I>Thu Sep  6 16:34:28 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="022325.html">[rabbitmq-discuss] List consumer connections/channels per queue
</A></li>
        <LI>Next message: <A HREF="022313.html">[rabbitmq-discuss]  Simple C Client to read from a Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22326">[ date ]</a>
              <a href="thread.html#22326">[ thread ]</a>
              <a href="subject.html#22326">[ subject ]</a>
              <a href="author.html#22326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I don't think it's convenient to do this from the command line, with 
either rabbitmqctl or rabbitmqadmin, but if you are driving the HTTP API 
directly it's easier. They key is that the HTTP API only adds consumer 
details to a queue when retrieving a single queue, not a list (since 
it's slightly expensive and not frequently called for).

So GET /api/&lt;vhost&gt;/&lt;queue_name&gt;, then look in consumer_details and for 
each item in the array there look in channel_details.connection_name and 
DELETE /api/connections/&lt;connection_name&gt;.

Cheers, Simon

On 06/09/2012 11:05AM, Tom Grange wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> We need to kill all the consumer connections for only one queue through
</I>&gt;<i> rabbitmqctl (the workers themselves are already dead) - but we need to
</I>&gt;<i> be able to list only the connections for the one queue we are interested in.
</I>&gt;<i>
</I>&gt;<i> Though rabbitmqctl or the api you can list the queues and list the
</I>&gt;<i> consumer connections separately but not filter the consumer connection
</I>&gt;<i> list down by queues.
</I>&gt;<i>
</I>&gt;<i> Any idea how to do this?
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Tom
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Global Personals is a limited company registered in England and Wales.
</I>&gt;<i>
</I>&gt;<i> Registered number: 04880697
</I>&gt;<i>
</I>&gt;<i> Registered office: Minton Place, Victoria Street, Windsor, Berkshire,
</I>&gt;<i> SL4 1EG, United Kingdom
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I></PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022325.html">[rabbitmq-discuss] List consumer connections/channels per queue
</A></li>
	<LI>Next message: <A HREF="022313.html">[rabbitmq-discuss]  Simple C Client to read from a Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22326">[ date ]</a>
              <a href="thread.html#22326">[ thread ]</a>
              <a href="subject.html#22326">[ subject ]</a>
              <a href="author.html#22326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
