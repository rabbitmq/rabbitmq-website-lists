<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message Invisible Mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Message%20Invisible%20Mode&In-Reply-To=4718D154.20804%40redhat.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000260.html">
   <LINK REL="Next"  HREF="000263.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message Invisible Mode</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Message%20Invisible%20Mode&In-Reply-To=4718D154.20804%40redhat.com"
       TITLE="[rabbitmq-discuss] Message Invisible Mode">tonyg at lshift.net
       </A><BR>
    <I>Fri Oct 19 17:22:35 BST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000260.html">[rabbitmq-discuss] Message Invisible Mode
</A></li>
        <LI>Next message: <A HREF="000263.html">[rabbitmq-discuss] Benchmarks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#262">[ date ]</a>
              <a href="thread.html#262">[ thread ]</a>
              <a href="subject.html#262">[ subject ]</a>
              <a href="author.html#262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Joe,

Carl Trieloff wrote:
&gt;<i> AMQP 0-10 acquire-mode does this for you
</I>&gt;<i> Carl.
</I>
(Aside: interesting! I'm looking forward to checking out the 0-10
transfer model.)

Just to add to Carl's point about 0-10, the current broker
implementations only support the kind of locking you mention partially.
There's no notion of timeout - instead, channel-closing or explicit
accept/reject is used.

That is, in 0-8/0-9, once a message is delivered to a consumer, either
via basic.deliver or basic.get-ok, the consumer is permitted to hold on
to it for as long as they please before accepting or rejecting it. While
they're holding on to it, the broker is forbidden from offering it to
any other consumer.

Messages are rejected either by explicit action, or by the closing of
the channel. Messages are accepted by basic.ack.

If a message is rejected, either explicitly or implicitly as part of
channel or connection closure, the message MAY be redelivered to some
other consumer by the broker.

So, to summarise: so long as you were after the basic &quot;locking&quot; feature,
and not the &quot;timeout&quot; part, then hopefully, current implementations do
what you want :-)

Regards,
  Tony

&gt;<i> joe lee wrote:
</I>&gt;&gt;<i> Let say you have 1 producer and 3 consumers.  Producer places a
</I>&gt;&gt;<i> message in the queue.  One of the consumer picks up the message and
</I>&gt;&gt;<i> process it.  While it's processing it, is there a way to make the
</I>&gt;&gt;<i> message in queue to go invisible mode on user defined time (30sec,
</I>&gt;&gt;<i> 1min so on), so that other 2 consumers don't pick up the same message
</I>&gt;&gt;<i> and start processing?  Like in Amazon SQS.  Once the time limit has
</I>&gt;&gt;<i> passed 30sec, or 1min, message become visible, if message has not been
</I>&gt;&gt;<i> processed and deleted by consumer 1.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Joe
</I>
-- 
 [][][] Tony Garnock-Jones     | Mob: +44 (0)7905 974 211
   [][] LShift Ltd             | Tel: +44 (0)20 7729 7060
 []  [] <A HREF="http://www.lshift.net/">http://www.lshift.net/</A> | Email: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000260.html">[rabbitmq-discuss] Message Invisible Mode
</A></li>
	<LI>Next message: <A HREF="000263.html">[rabbitmq-discuss] Benchmarks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#262">[ date ]</a>
              <a href="thread.html#262">[ thread ]</a>
              <a href="subject.html#262">[ subject ]</a>
              <a href="author.html#262">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
