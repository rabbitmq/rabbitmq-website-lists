<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exposing rabbit management via AMQP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exposing%20rabbit%20management%20via%20AMQP&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000275.html">
   <LINK REL="Next"  HREF="000277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exposing rabbit management via AMQP</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exposing%20rabbit%20management%20via%20AMQP&In-Reply-To="
       TITLE="[rabbitmq-discuss] Exposing rabbit management via AMQP">0x6e6562 at gmail.com
       </A><BR>
    <I>Sat Oct 27 22:05:27 BST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000275.html">[rabbitmq-discuss] Fwd: Implementation / Specification	Stability?
</A></li>
        <LI>Next message: <A HREF="000277.html">[rabbitmq-discuss] Erlang client release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#276">[ date ]</a>
              <a href="thread.html#276">[ thread ]</a>
              <a href="subject.html#276">[ subject ]</a>
              <a href="author.html#276">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Recently on this list there was a question about using access controls
in rabbit, so I've added a first cut of exposing the rabbit management
API via AMQP using the Erlang direct client.

This is intended to be an AMQP alternative to the rabbitmqctl script
and is not my idea, I stole it from Tony.

On the client side it consists of calling the rabbit_access_control
module via RPC over AMQP.

I used Hessian to encode the functions, arguments and replies, but the
mechanism is not necessarily tied to this.

On the server side, it consists of firing up an RPC handler that is
*parameterized* with the rabbit_access_control module.

To test this, you need to:

1. Make sure the 0.1.3 release of the Erlang hessian library
(<A HREF="http://cotton.sourceforge.net/">http://cotton.sourceforge.net/</A>) is in your OTP path as well as the
amqp_erlang library
(<A HREF="http://dev.rabbitmq.com/viewmtn/branch/changes/com.rabbitmq.erlang-client">http://dev.rabbitmq.com/viewmtn/branch/changes/com.rabbitmq.erlang-client</A>).

2. Fire up the rabbit server and run the rpc handler in the same VM as
the server, e.g.:

erl -mnesia dir WHEREEVER -boot start_sasl -s rabbit

3. Boot the RPC handler:

1&gt; direct_integration_test:start_rabbit_management().

4. Run the test from a different Erlang VM:

1&gt; network_integration_test:rabbit_management_test().

That's it.

As this is only a POC, there are limitations and considerations at the
moment which include:

- I haven't tested every exported function in the
rabbit_access_control control module yet.
- The RPC handler could be registered with the rabbit supervisor so
that you don't have to start it explicitly.
- This piggybacks off an RpcClient pattern that is implemented in the
Erlang client, which is still experimental and may change.
- I haven't tested it with the Java client yet.

amongst others.

Any input, feedback or discussion is appreciated.

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000275.html">[rabbitmq-discuss] Fwd: Implementation / Specification	Stability?
</A></li>
	<LI>Next message: <A HREF="000277.html">[rabbitmq-discuss] Erlang client release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#276">[ date ]</a>
              <a href="thread.html#276">[ thread ]</a>
              <a href="subject.html#276">[ subject ]</a>
              <a href="author.html#276">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
