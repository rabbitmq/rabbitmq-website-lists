<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ/Spring integration - help required
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/Spring%20integration%20-%20help%20required&In-Reply-To=24236352.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003924.html">
   <LINK REL="Next"  HREF="003933.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ/Spring integration - help required</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/Spring%20integration%20-%20help%20required&In-Reply-To=24236352.post%40talk.nabble.com"
       TITLE="[rabbitmq-discuss] RabbitMQ/Spring integration - help required">alexis.richardson at gmail.com
       </A><BR>
    <I>Sun Jun 28 20:15:50 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003924.html">[rabbitmq-discuss]  RabbitMQ/Spring integration - help required
</A></li>
        <LI>Next message: <A HREF="003933.html">[rabbitmq-discuss] RabbitMQ/Spring integration - help required
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3925">[ date ]</a>
              <a href="thread.html#3925">[ thread ]</a>
              <a href="subject.html#3925">[ subject ]</a>
              <a href="author.html#3925">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Vivek,

It looks like you are using a Java/JMS client from the Qpid
distribution on Apache.  Not all of these clients are compatible with
RabbitMQ which implements AMQP 0-8 (though we are soon moving to AMQP
0-9-1).

Please can you check that you are using a Qpid client set up for AMQP
0-8, or, if you prefer, you can try out the OpenAMQ JMS client which
works with RabbitMQ here:
<A HREF="http://www.lshift.net/blog/2009/03/16/openamqs-jms-client-with-rabbitmq-server">http://www.lshift.net/blog/2009/03/16/openamqs-jms-client-with-rabbitmq-server</A>

I also recommend that you take a look at the RabbitMQ Java client
pages here: <A HREF="http://www.rabbitmq.com/java-client.html">http://www.rabbitmq.com/java-client.html</A>

Let us know how you get on - other folks have made Spring work with RabbitMQ.

Best wishes

alexis




On Sat, Jun 27, 2009 at 9:27 PM, krv&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vivek.kubaji at onmobile.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'm trying to evaluate RabbitMQ for our project. And I'm using
</I>&gt;<i> Spring-integration framework. From the posts in the forum I ended up using
</I>&gt;<i> the following configuration (jms part):
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;&lt;beans:bean id=&quot;amqConnectionFactory&quot;
</I>&gt;<i> class=&quot;org.apache.qpid.client.AMQConnectionFactory&quot;&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;beans:constructor-arg
</I>&gt;<i> value=&quot;<A HREF="amqp://guest:guest@/localhost?brokerlist='tcp://localhost:5672'&quot;">amqp://guest:guest@/localhost?brokerlist='tcp://localhost:5672'&quot;</A> /&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160;&lt;/beans:bean&gt;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;&lt;beans:bean id=&quot;connectionFactory&quot;
</I>&gt;<i> class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;beans:property name=&quot;targetConnectionFactory&quot;
</I>&gt;<i> ref=&quot;amqConnectionFactory&quot;/&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160;&lt;/beans:bean&gt;
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160;&lt;beans:bean id=&quot;jms_QueueWest&quot;
</I>&gt;<i> class=&quot;org.apache.qpid.client.AMQQueue&quot;&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;beans:constructor-arg&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;beans:bean
</I>&gt;<i> class=&quot;org.apache.qpid.url.AMQBindingURL&quot;&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;beans:constructor-arg
</I>&gt;<i> value=&quot;${jms.queue1}&quot;/&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;/beans:bean&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&lt;/beans:constructor-arg&gt;
</I>&gt;<i> &#160; &#160; &#160; &#160;&lt;/beans:bean&gt;
</I>&gt;<i>
</I>&gt;<i> and have this in my properties file:
</I>&gt;<i>
</I>&gt;<i> jms.queue1=<A HREF="direct://rabbit//my.queue1">direct://rabbit//my.queue1</A>
</I>&gt;<i>
</I>&gt;<i> I'm running the RabbitMQ broker using the command
</I>&gt;<i> $RABBITMQ_HOME$/sbin/rabbitmq-server.bat. When I start my client application
</I>&gt;<i> I am getting the following error:
</I>&gt;<i>
</I>&gt;<i> 2009-06-25 19:00:21,192 INFO
</I>&gt;<i> org.springframework.jms.listener.DefaultMessageListenerContainer#0-1
</I>&gt;<i> [DefaultMessageListenerContainer.refreshConnectionUntilSuccessful] - Could
</I>&gt;<i> not refresh JMS Connection for destination
</I>&gt;<i> '<A HREF="direct://rabbit/my.queue1/my.queue1?routingkey='my.queue1''">direct://rabbit/my.queue1/my.queue1?routingkey='my.queue1''</A> - retrying in
</I>&gt;<i> 5000 ms. Cause: Error creating connection: Unable to Connect
</I>&gt;<i> org.apache.qpid.transport.ConnectionException
</I>&gt;<i> &#160; &#160; &#160; &#160;at org.apache.qpid.transport.Connection.close(Connection.java:494)
</I>&gt;<i> &#160; &#160; &#160; &#160;at org.apache.qpid.transport.Connection.connect(Connection.java:193)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.client.AMQConnectionDelegate_0_10.makeBrokerConnection(AMQConnectionDelegate_0_10.java:161)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.client.AMQConnection.makeBrokerConnection(AMQConnection.java:728)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.client.AMQConnection.&lt;init&gt;(AMQConnection.java:520)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.client.AMQConnectionFactory.createConnection(AMQConnectionFactory.java:276)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.connection.SingleConnectionFactory.doCreateConnection(SingleConnectionFactory.java:343)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.connection.SingleConnectionFactory.initConnection(SingleConnectionFactory.java:290)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.connection.SingleConnectionFactory.createConnection(SingleConnectionFactory.java:227)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:184)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.listener.AbstractJmsListeningContainer.createSharedConnection(AbstractJmsListeningContainer.java:378)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.listener.AbstractJmsListeningContainer.refreshSharedConnection(AbstractJmsListeningContainer.java:363)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.listener.DefaultMessageListenerContainer.refreshConnectionUntilSuccessful(DefaultMessageListenerContainer.java:785)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.listener.DefaultMessageListenerContainer.recoverAfterListenerSetupFailure(DefaultMessageListenerContainer.java:767)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:898)
</I>&gt;<i> &#160; &#160; &#160; &#160;at java.lang.Thread.run(Thread.java:619)
</I>&gt;<i> Caused by: org.apache.qpid.transport.ConnectionException
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.Connection.exception(Connection.java:405)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.network.Assembler.exception(Assembler.java:108)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.network.InputHandler.exception(InputHandler.java:196)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.network.io.IoReceiver.run(IoReceiver.java:146)
</I>&gt;<i> &#160; &#160; &#160; &#160;... 1 more
</I>&gt;<i> Caused by: java.lang.IllegalStateException
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.network.InputHandler.next(InputHandler.java:190)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.network.InputHandler.received(InputHandler.java:103)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.network.InputHandler.received(InputHandler.java:42)
</I>&gt;<i> &#160; &#160; &#160; &#160;at
</I>&gt;<i> org.apache.qpid.transport.network.io.IoReceiver.run(IoReceiver.java:128)
</I>&gt;<i> &#160; &#160; &#160; &#160;... 1 more
</I>&gt;<i>
</I>&gt;<i> Seeing the error I feel I have some stupid mistake . Somebody please help me
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> Thanks in advance.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Vivek
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://www.nabble.com/RabbitMQ-Spring-integration---help-required-tp24236352p24236352.html">http://www.nabble.com/RabbitMQ-Spring-integration---help-required-tp24236352p24236352.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003924.html">[rabbitmq-discuss]  RabbitMQ/Spring integration - help required
</A></li>
	<LI>Next message: <A HREF="003933.html">[rabbitmq-discuss] RabbitMQ/Spring integration - help required
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3925">[ date ]</a>
              <a href="thread.html#3925">[ thread ]</a>
              <a href="subject.html#3925">[ subject ]</a>
              <a href="author.html#3925">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
