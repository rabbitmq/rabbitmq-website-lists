<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang RabbitMQ Client hanshake problem on &quot;State = Driver:handshake(InitialState), &quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20RabbitMQ%20Client%20hanshake%20problem%20on%0A%20%22State%20%3D%20Driver%3Ahandshake%28InitialState%29%2C%20%22&In-Reply-To=000001c9e8ff%2405a2a720%2410e7f560%24%40grice%40logosworld.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003772.html">
   <LINK REL="Next"  HREF="003776.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang RabbitMQ Client hanshake problem on &quot;State = Driver:handshake(InitialState), &quot;</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20RabbitMQ%20Client%20hanshake%20problem%20on%0A%20%22State%20%3D%20Driver%3Ahandshake%28InitialState%29%2C%20%22&In-Reply-To=000001c9e8ff%2405a2a720%2410e7f560%24%40grice%40logosworld.com"
       TITLE="[rabbitmq-discuss] Erlang RabbitMQ Client hanshake problem on &quot;State = Driver:handshake(InitialState), &quot;">matthias at lshift.net
       </A><BR>
    <I>Tue Jun  9 15:52:20 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003772.html">[rabbitmq-discuss] Erlang RabbitMQ Client hanshake problem on	&quot;State = Driver:handshake(InitialState), &quot;
</A></li>
        <LI>Next message: <A HREF="003776.html">[rabbitmq-discuss] Fwd:  Objective-C AMQP Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3773">[ date ]</a>
              <a href="thread.html#3773">[ thread ]</a>
              <a href="subject.html#3773">[ subject ]</a>
              <a href="author.html#3773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lynton,

Lynton Grice wrote:
&gt;<i> Hi Matthias,
</I>&gt;<i> 
</I>&gt;<i> I have been looking through the posts and cannot see anything specific that
</I>&gt;<i> says exactly how to solve this issue. Yes, you mention load path etc....so I
</I>&gt;<i> assume &quot;erl -pa&quot; etc.....but can I see an example of what needs to be done
</I>&gt;<i> &quot;load path&quot; wise for the client to work? I have been trying to get the
</I>&gt;<i> client to work to almost 2 days now....;-(
</I>&gt;<i> 
</I>&gt;<i> I have installed BOTH the server and client folders into the
</I>&gt;<i> %ERLANG_HOME%\erl5.7.1\lib folder....surely that should be fine?
</I>
If you have the server in the above dir, as per the installation
instructions, then the client code should find the server libraries
without needing to modify the load path.

In order to diagnose this further, please send me

1) a directory listing of %ERLANG_HOME%\erl5.7.1\lib

2) a deep directory listing for all rabbitmq* directories in the above.

3) the location of the erlang client directory, and a deep directory
listing thereof

4) the exact command line used for invoking the erlang client, including
the dir it is run from

5) the output of [P || P &lt;- code:get_path(), string:str(P, &quot;rabbit&quot;) =/=
0]. when run inside the Erlang client's shell.

6) the output of  [code:which(M) || M &lt;- [lib_amqp,
rabbit_framing_channel, rabbit]]. when run inside the Erlang client's shell.

7) the sequence of erlang function calls used in the test

&gt;<i> I just keep getting this:
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 9-Jun-2009::14:23:53 ===
</I>&gt;<i> accepted TCP connection on 0.0.0.0:5672 from 127.0.0.1:1319
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 9-Jun-2009::14:23:53 ===
</I>&gt;<i> starting TCP connection &lt;0.175.0&gt; from 127.0.0.1:1319
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 9-Jun-2009::14:24:01 ===
</I>&gt;<i> error on TCP connection &lt;0.175.0&gt; from 127.0.0.1:1319
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 9-Jun-2009::14:24:01 ===
</I>&gt;<i> closing TCP connection &lt;0.175.0&gt; from 127.0.0.1:1319
</I>
Are you still getting {undef, [{rabbit_framing_channel,start_link,...}]}
error in the client? If so then the above is likely a consequence of that.

&gt;<i> Yes, I do agree I probably need to understand Erlang better with regard to
</I>&gt;<i> the &quot;load path&quot; etc....
</I>
Some knowledge of Erlang when using the Erlang client is highly
recommended ;)


Regards,

Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003772.html">[rabbitmq-discuss] Erlang RabbitMQ Client hanshake problem on	&quot;State = Driver:handshake(InitialState), &quot;
</A></li>
	<LI>Next message: <A HREF="003776.html">[rabbitmq-discuss] Fwd:  Objective-C AMQP Library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3773">[ date ]</a>
              <a href="thread.html#3773">[ thread ]</a>
              <a href="subject.html#3773">[ subject ]</a>
              <a href="author.html#3773">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
