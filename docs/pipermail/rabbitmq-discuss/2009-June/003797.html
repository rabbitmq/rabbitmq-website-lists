<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] BrokerUnreachableException on .NET client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20BrokerUnreachableException%20on%20.NET%20client&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003821.html">
   <LINK REL="Next"  HREF="003798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] BrokerUnreachableException on .NET client</H1>
    <B>Aaron Feng</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20BrokerUnreachableException%20on%20.NET%20client&In-Reply-To="
       TITLE="[rabbitmq-discuss] BrokerUnreachableException on .NET client">aaron.feng at gmail.com
       </A><BR>
    <I>Wed Jun 10 18:05:14 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003821.html">[rabbitmq-discuss] RabbitMQ .NET Client sometimes hangs up
</A></li>
        <LI>Next message: <A HREF="003798.html">[rabbitmq-discuss] BrokerUnreachableException on .NET client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3797">[ date ]</a>
              <a href="thread.html#3797">[ thread ]</a>
              <a href="subject.html#3797">[ subject ]</a>
              <a href="author.html#3797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I noticed if I spin up around 500 threads and give it the following function:

public static void DoWork() {
  try {
    var factory = new ConnectionFactory();
    var param = factory.Parameters;
    param.RequestedHeartbeat = 100;
    using (var conn = factory.CreateConnection(server)) {
      using (var ch = conn.CreateModel()) {
        for (int i = 0; i &lt; times; i++) ch.BasicPublish(exchange,
routingKey, null, data);
      }
    }
  }
  catch(Exception ex) {
    Console.WriteLine(ex.Message);
  }
}

Some of the threads would bomb with
RabbitMQ.Client.Exceptions.BrokerUnreachableException: &quot;None of the
specified endpoints were reachable&quot;.  I can reproduce this behaviour
consistently with lots of threads.  Is my test valid?  Am I doing
something obviously wrong?  Mostly I'm just trying to see what type of
errors could crop up when the broker is under load.

I'm using the current released .NET client on Windows and broker from
hg 1054:fce2dad390ee running on Ubuntu.

Thanks,

Aaron


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003821.html">[rabbitmq-discuss] RabbitMQ .NET Client sometimes hangs up
</A></li>
	<LI>Next message: <A HREF="003798.html">[rabbitmq-discuss] BrokerUnreachableException on .NET client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3797">[ date ]</a>
              <a href="thread.html#3797">[ thread ]</a>
              <a href="subject.html#3797">[ subject ]</a>
              <a href="author.html#3797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
