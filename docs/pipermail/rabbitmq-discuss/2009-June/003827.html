<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq memory grows with queue size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20memory%20grows%20with%20queue%20size&In-Reply-To=dbd9700a0906150728p2b014082k94bb90b98eb88a94%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003826.html">
   <LINK REL="Next"  HREF="003828.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq memory grows with queue size</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20memory%20grows%20with%20queue%20size&In-Reply-To=dbd9700a0906150728p2b014082k94bb90b98eb88a94%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq memory grows with queue size">matthew at lshift.net
       </A><BR>
    <I>Mon Jun 15 17:52:19 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003826.html">[rabbitmq-discuss] rabbitmq memory grows with queue size
</A></li>
        <LI>Next message: <A HREF="003828.html">[rabbitmq-discuss] Exchange matching performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3827">[ date ]</a>
              <a href="thread.html#3827">[ thread ]</a>
              <a href="subject.html#3827">[ subject ]</a>
              <a href="author.html#3827">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>For the list, I have replied to this off list. The reason being that the
new disk queue is not ready for a public release yet, we do expect there
still to be bugs in it, the code has not been QA'd yet, and about 25% of
the code base of Rabbit has changed. A substantial portion of the new
disk queue will change again over the coming weeks as it goes through
QA. Obviously, anyone wishing to try such experimental code would be
very well advised to treat it as such.

If you are desperate, despite such grave warnings, to try the new disk
queue then you may contact me directly off list. However, it will be
several weeks before this gets formally released, and I will not be
providing binary packages at this point whatsoever. Support is almost
certainly, at this very early point, to be &quot;if you can't make it work,
then don't be surprised. Wait for the code to be released. (But, if it
does work for you, we'd be pretty interested in hearing how well it's
working for you!)&quot;

In other words, if you're used to building Linux development kernels
(i.e. pre RC) then you may get some mileage out of this ;)

Matthew

On Mon, Jun 15, 2009 at 10:28:55AM -0400, Brian Whitman wrote:
&gt;<i> Also, which branch? I can't seem to find anything appropriate here:
</I>&gt;<i> <A HREF="http://hg.rabbitmq.com/rabbitmq-server">http://hg.rabbitmq.com/rabbitmq-server</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Mon, Jun 15, 2009 at 10:15 AM, Brian Whitman &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">brian at echonest.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Would love to try this out -- are there any configuration things I need to
</I>&gt;<i> &gt; know about, or will a default build from the branch &quot;just work&quot;?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Mon, Jun 15, 2009 at 6:11 AM, Alexis Richardson &lt;
</I>&gt;<i> &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis.richardson at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Chuck - that's correct :-)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Jack, all,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The &quot;page to disk&quot; feature is now getting into QA and should be
</I>&gt;<i> &gt;&gt; visible on a branch on the repo.  If you would like to help us QA this
</I>&gt;<i> &gt;&gt; please speak out.  Matthias, as per usual, is in charge of getting
</I>&gt;<i> &gt;&gt; this feature into a releasable state.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The new feature enables messages that are persisted to exist on disk
</I>&gt;<i> &gt;&gt; and not in memory.  Previously persisted data would remain in memory
</I>&gt;<i> &gt;&gt; as well as being written to disk.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; More generally, you can still drain queues into any store
</I>&gt;<i> &gt;&gt; programmatically, in the meantime.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; alexis
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Thu, Jun 11, 2009 at 11:46 PM, Chuck Remes&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">cremes.devlist at mac.com</A>&gt;
</I>&gt;<i> &gt;&gt; wrote:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; On Jun 11, 2009, at 5:29 PM, Jack Moffitt wrote:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; Perhaps I missed a config option, but I am running out of memory on
</I>&gt;<i> &gt;&gt; &gt;&gt; the machines running rabbitmq-server.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; I have two queues and two fanout exchanges (each queue is bound to one
</I>&gt;<i> &gt;&gt; &gt;&gt; of the exchanges).   As the queue size grows so does memory use, even
</I>&gt;<i> &gt;&gt; &gt;&gt; though both queues are durable. and the messages persistent.  Does
</I>&gt;<i> &gt;&gt; &gt;&gt; rabbitmq require everything in memory as well even for persistent
</I>&gt;<i> &gt;&gt; &gt;&gt; queues?
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Regardless of queue type or settings, RabbitMQ stores all messages in
</I>&gt;<i> &gt;&gt; &gt; memory. There is work on a new &quot;persister&quot; ongoing in one of the
</I>&gt;<i> &gt;&gt; &gt; development branches to resolve this limitation. As far as I know
</I>&gt;<i> &gt;&gt; &gt; there hasn't been any date set for its release, but it should be
</I>&gt;<i> &gt;&gt; &gt; sometime this year.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; cr
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>
&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003826.html">[rabbitmq-discuss] rabbitmq memory grows with queue size
</A></li>
	<LI>Next message: <A HREF="003828.html">[rabbitmq-discuss] Exchange matching performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3827">[ date ]</a>
              <a href="thread.html#3827">[ thread ]</a>
              <a href="subject.html#3827">[ subject ]</a>
              <a href="author.html#3827">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
