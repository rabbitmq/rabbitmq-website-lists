<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ .NET deadlock after calling	.CreateConnection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20.NET%20deadlock%20after%20calling%0A%09.CreateConnection&In-Reply-To=4A3B945C.7010807%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003872.html">
   <LINK REL="Next"  HREF="003818.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ .NET deadlock after calling	.CreateConnection</H1>
    <B>Andrius Norkaitis</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20.NET%20deadlock%20after%20calling%0A%09.CreateConnection&In-Reply-To=4A3B945C.7010807%40lshift.net"
       TITLE="[rabbitmq-discuss] RabbitMQ .NET deadlock after calling	.CreateConnection">andrius.norkaitis at oryo.lt
       </A><BR>
    <I>Tue Jun 30 21:43:18 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003872.html">[rabbitmq-discuss] RabbitMQ .NET deadlock after calling	.CreateConnection
</A></li>
        <LI>Next message: <A HREF="003818.html">[rabbitmq-discuss] rabbitmq memory grows with queue size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3944">[ date ]</a>
              <a href="thread.html#3944">[ thread ]</a>
              <a href="subject.html#3944">[ subject ]</a>
              <a href="author.html#3944">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To answer to your question Matthias, we found that the thread blocks after
calling &quot;using (conn = cf.CreateConnection(serverAddress))&quot; (I provided our
source code some time ago). Currently we can't do more debugging on this.

This problem occurs only on the instable/bad quality internet connection (if
I just unplug cable it do not hangs). Few days ago I had problems with my
home internet (not only rabbit, but other software had connection problems
too) and that described problem with calling .CreateConnection after current
connection interups occurred frequently. Now it's ok, but to one of our
clients such connection losses with hangs up when reconnecting occurs few
times a day (perhaps their internet isn't very stable).

As for temporary solution we created monitoring thread, which aborts and
recreates thread which manages rabbit connection (if it starts not
responding after calling .CreateConnection).

Does anybody else use rabbit with internet (maybe 3G)? What reconnect
strategy do you use and had you ever any problems with .CreateConnection?
Hope this rare bug will be fixed in the future.

Best regards
Andrius

-----Original Message-----
From: Matthias Radestock [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>] 
Sent: Friday, June 19, 2009 4:36 PM
To: Alexis Richardson
Cc: Andrius Norkaitis; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] RabbitMQ .NET deadlock after calling
.CreateConnection

Alexis,

Alexis Richardson wrote:
&gt;<i> I just noticed nobody has replied to this thread.
</I>
Actually that thread got continued at
  <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-June/004192.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-June/004192.html</A>

to which I responded here:

<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-June/004218.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2009-June/004218.html</A>

For some reason Nabble has put that message in the wrong thread:

<A HREF="http://www.nabble.com/RabbitMQ-stomp-adapter-behaviour-td23917501.html#a2399">http://www.nabble.com/RabbitMQ-stomp-adapter-behaviour-td23917501.html#a2399</A>
7427

which probably explains why you thought nobody had responded.


Matthias.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003872.html">[rabbitmq-discuss] RabbitMQ .NET deadlock after calling	.CreateConnection
</A></li>
	<LI>Next message: <A HREF="003818.html">[rabbitmq-discuss] rabbitmq memory grows with queue size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3944">[ date ]</a>
              <a href="thread.html#3944">[ thread ]</a>
              <a href="subject.html#3944">[ subject ]</a>
              <a href="author.html#3944">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
