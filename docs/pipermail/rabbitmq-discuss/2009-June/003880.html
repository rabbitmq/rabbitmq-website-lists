<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] my gen_fsm's supervisor getting channel 'DOWN'	messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20my%20gen_fsm%27s%20supervisor%20getting%20channel%20%27DOWN%27%0A%09messages&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003890.html">
   <LINK REL="Next"  HREF="003902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] my gen_fsm's supervisor getting channel 'DOWN'	messages</H1>
    <B>Jack Moffitt</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20my%20gen_fsm%27s%20supervisor%20getting%20channel%20%27DOWN%27%0A%09messages&In-Reply-To="
       TITLE="[rabbitmq-discuss] my gen_fsm's supervisor getting channel 'DOWN'	messages">jack at collecta.com
       </A><BR>
    <I>Mon Jun 22 00:55:01 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003890.html">[rabbitmq-discuss] RabbitMQ consumer connection issue
</A></li>
        <LI>Next message: <A HREF="003902.html">[rabbitmq-discuss] my gen_fsm's supervisor getting channel	'DOWN' messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3880">[ date ]</a>
              <a href="thread.html#3880">[ thread ]</a>
              <a href="subject.html#3880">[ subject ]</a>
              <a href="author.html#3880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a gen_fsm that monitors a rabbitmq queue.  Everything works
fine unti lthere is an error.

When I connect and open the channel, I put a monitor on it so that I
get a 'DOWN' message when the channel dies.  Before I down the channel
myself, I always demonitor the reference.

Unfortunately, for some reason whenever I close the channel and
connection, the supervisor starts trying to shut down my process.  I'm
opening the connection with start() not start_link(), so I don't
understand why my supervisor is being notified about AMQP connection
process states.

This is actually causing us serious problems because Erlang
supervisors can't do backoff, so this usually results in the
supervisor exceeding the restart limits and terminating the whole
application.

Any ideas?

jack.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003890.html">[rabbitmq-discuss] RabbitMQ consumer connection issue
</A></li>
	<LI>Next message: <A HREF="003902.html">[rabbitmq-discuss] my gen_fsm's supervisor getting channel	'DOWN' messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3880">[ date ]</a>
              <a href="thread.html#3880">[ thread ]</a>
              <a href="subject.html#3880">[ subject ]</a>
              <a href="author.html#3880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
