<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] .NET client SimpleRpcServer question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20.NET%20client%20SimpleRpcServer%20question&In-Reply-To=4A2EE289.3080505%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003789.html">
   <LINK REL="Next"  HREF="003703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] .NET client SimpleRpcServer question</H1>
    <B>Ryan Davis</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20.NET%20client%20SimpleRpcServer%20question&In-Reply-To=4A2EE289.3080505%40lshift.net"
       TITLE="[rabbitmq-discuss] .NET client SimpleRpcServer question">ryan at acceleration.net
       </A><BR>
    <I>Wed Jun 10 14:07:24 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003789.html">[rabbitmq-discuss] .NET client SimpleRpcServer question
</A></li>
        <LI>Next message: <A HREF="003703.html">[rabbitmq-discuss] Creating exchanges on demand.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3794">[ date ]</a>
              <a href="thread.html#3794">[ thread ]</a>
              <a href="subject.html#3794">[ subject ]</a>
              <a href="author.html#3794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias Radestock wrote:
&gt;<i> Thanks for the patch. If you don't mind, we'll look into this in a few
</I>&gt;<i> weeks when the person who wrote the original code is back from holidays.
</I>Certainly.  I'll put my patch into production today, and will send you a
new patch if I run into problems.

&gt;<i> On the latter point, the locks look a bit too coarse-grained to me,
</I>&gt;<i> covering activities that can take an indeterminate amount of time,
</I>&gt;<i> such as interactions with the server. That may be unavoidable, but
</I>&gt;<i> without understanding every single detail of the code it's hard to be
</I>&gt;<i> sure.
</I>They are a bit heavy-handed.  It is very possible that Subscription /
SimpleRpcServer could be refactored to maintain thread safety with finer
locks.  I was wanting to make minimal changes, so I didn't go that
route.   I walked through it with another co-worker for a sanity check,
and locking those large blocks seemed the only way to ensure correctness
in these cases:

   1. calling Close() while the subscription is blocked waiting for a
      message
   2. calling Close() while the server is processing a message
   3. calling Close() after the subscription has fetched a message but
      before the server has started processing it

I'm looking forward to hearing from the original author next month.

Thanks,

Ryan Davis
Acceleration.net
Director of Programming Services
2831 NW 41st street, suite B
Gainesville, FL 32606

Office: 352-335-6500 x 124
Fax: 352-335-6506

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090610/e9d87451/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090610/e9d87451/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003789.html">[rabbitmq-discuss] .NET client SimpleRpcServer question
</A></li>
	<LI>Next message: <A HREF="003703.html">[rabbitmq-discuss] Creating exchanges on demand.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3794">[ date ]</a>
              <a href="thread.html#3794">[ thread ]</a>
              <a href="subject.html#3794">[ subject ]</a>
              <a href="author.html#3794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
