<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] flow control and erlang client(s)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20flow%20control%20and%20erlang%20client%28s%29&In-Reply-To=4A415E2B.30301%40echostar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003889.html">
   <LINK REL="Next"  HREF="003895.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] flow control and erlang client(s)</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20flow%20control%20and%20erlang%20client%28s%29&In-Reply-To=4A415E2B.30301%40echostar.com"
       TITLE="[rabbitmq-discuss] flow control and erlang client(s)">matthias at lshift.net
       </A><BR>
    <I>Wed Jun 24 03:07:58 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003889.html">[rabbitmq-discuss]  flow control and erlang client(s)
</A></li>
        <LI>Next message: <A HREF="003895.html">[rabbitmq-discuss] flow control and erlang client(s)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3894">[ date ]</a>
              <a href="thread.html#3894">[ thread ]</a>
              <a href="subject.html#3894">[ subject ]</a>
              <a href="author.html#3894">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mark,

Mark Geib wrote:
&gt;<i> I have seen in the erlang client test code that #'channel.flow'{active = 
</I>&gt;<i> false} is supported for flow control related to memory high/low water 
</I>&gt;<i> marks. However I need to limit the number of message published to a 
</I>&gt;<i> queue on a broker and need to know if in 1.6 it is supported and if so 
</I>&gt;<i> how to create the queue for support flow control, that is stopping 
</I>&gt;<i> message publishing until message are dequeued...
</I>
What you are asking for is actually conceptually impossible.

In AMQP producers publish messages to an *exchange* (note that they are 
not &quot;connected&quot; to that exchange; each publish command can potentially 
go to a different exchange), which then routes them to *zero or more* 
queues, depending on the type of exchange, routing key in the message, 
and existing bindings between queues and the exchange.

So there is no way for the broker to know which of its connected clients 
might next send a message that ends up getting routed to a particular 
queue. Hence it cannot throttle clients based on any queue-based limits.

If there were per-queue message count limits (and this is something 
which has been discussed, though it's not part of the AMQP spec and not 
something RabbitMQ currently implements), the best the broker could do 
is reject, return or discard any messages that arrive after the limit 
has been reached.


Regards,

Matthias


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003889.html">[rabbitmq-discuss]  flow control and erlang client(s)
</A></li>
	<LI>Next message: <A HREF="003895.html">[rabbitmq-discuss] flow control and erlang client(s)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3894">[ date ]</a>
              <a href="thread.html#3894">[ thread ]</a>
              <a href="subject.html#3894">[ subject ]</a>
              <a href="author.html#3894">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
