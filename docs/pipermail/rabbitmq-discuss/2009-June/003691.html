<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [Fwd: erlang-client woes]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BFwd%3A%20erlang-client%20woes%5D&In-Reply-To=9b58f4550906040801s45e90948qd7e60cc0094659eb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003690.html">
   <LINK REL="Next"  HREF="003692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [Fwd: erlang-client woes]</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BFwd%3A%20erlang-client%20woes%5D&In-Reply-To=9b58f4550906040801s45e90948qd7e60cc0094659eb%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] [Fwd: erlang-client woes]">0x6e6562 at gmail.com
       </A><BR>
    <I>Thu Jun  4 16:41:41 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003690.html">[rabbitmq-discuss] [Fwd: erlang-client woes]
</A></li>
        <LI>Next message: <A HREF="003692.html">[rabbitmq-discuss] [Fwd: erlang-client woes]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3691">[ date ]</a>
              <a href="thread.html#3691">[ thread ]</a>
              <a href="subject.html#3691">[ subject ]</a>
              <a href="author.html#3691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jack,

On Thu, Jun 4, 2009 at 4:01 PM, Jack Moffitt &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jack at collecta.com</A>&gt; wrote:
&gt;&gt;<i> So just to be clear, the test_network and test_direct tests pass, but
</I>&gt;&gt;<i> you are encountering problems when running your own code? If so, please
</I>&gt;&gt;<i> post a reproducible test case and I am sure we will be able to track
</I>&gt;&gt;<i> down the cause of the behaviour you are seeing.
</I>&gt;<i>
</I>&gt;<i> No rabbitmq running, make test_direct passes. &#160;Launch rabbitmq, make
</I>&gt;<i> test_network passes.
</I>&gt;<i>
</I>&gt;<i> Then:
</I>&gt;<i>
</I>&gt;<i> sliver:~/Sources/rabbitmq-erlang-client $ ~/rabbitmq/sbin/rabbitmqctl
</I>&gt;<i> list_usersListing users ...
</I>&gt;<i> guest
</I>&gt;<i> jack
</I>&gt;<i> ...done.
</I>&gt;<i>
</I>&gt;<i> And now:
</I>&gt;<i>
</I>&gt;<i> sliver:~/Sources/rabbitmq-erlang-client $ erl -name
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">client at sliver.local</A> -pa ebin ~/rabbitmq/ebin
</I>&gt;<i> Erlang R13B (erts-5.7.1) [source] [smp:2:2] [rq:2] [async-threads:0]
</I>&gt;<i> [hipe] [kernel-poll:false]
</I>&gt;<i>
</I>&gt;<i> Eshell V5.7.1 &#160;(abort with ^G)
</I>&gt;<i> (<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">client at sliver.local</A>)1&gt; Conn = amqp_connection:start(&quot;jack&quot;, &quot;hackme&quot;).
</I>&gt;<i> ** exception error: no match of right hand side value
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{error,{aborted,{no_exists,[user,&lt;&lt;&quot;jack&quot;&gt;&gt;]}}}
</I>&gt;<i> &#160; &#160; in function &#160;amqp_connection:start/3
</I>&gt;<i>
</I>&gt;<i> And:
</I>&gt;<i>
</I>&gt;<i> (<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">client at sliver.local</A>)3&gt; Conn = amqp_connection:start(&quot;jack&quot;, &quot;hackme&quot;,
</I>&gt;<i> &quot;localhost&quot;).
</I>&gt;<i>
</I>&gt;<i> hangs. &#160;If I use &quot;guest&quot;, &quot;guest&quot; instead of &quot;jack&quot;, &quot;hackme&quot;, in the
</I>&gt;<i> network version, it will work. &#160;However, &quot;guest&quot;, &quot;guest&quot; does not
</I>&gt;<i> work for the direct version. &#160;It gives the same error as above with
</I>&gt;<i> either username,password pair.
</I>
Invoking amqp_connection:start/2 implies that you are trying to use
the direct client.

I suspect that you have not started Rabbit or Mnesia in this VM.

To find this out, tell what the output of which_applications/0 is, e.g.

3&gt; application:which_applications().
[{rabbit,&quot;RabbitMQ&quot;,&quot;%%VERSION%%&quot;},
 {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.7&quot;},
 {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.1.8&quot;},
 {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.5.4&quot;},
 {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.15.5&quot;},
 {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.12.5&quot;}]

If Rabbit and Mnesia are not there, then the broker instance cannot start.

One way to start these is to have them boot when you start the VM,
i.e. with these args:

erl -pa ebin rabbitmq_server/ebin -mnesia dir &lt;SOME DIR&gt; -s rabbit
-boot start_sasl

Doing this without adding your own user should result in an error like this:

{amqp,access_refused,&quot;login refused for user 'jack'&quot;,none}

Which of course would be understandable if the mnesia instance in
&lt;SOME DIR&gt; did not contain that user.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003690.html">[rabbitmq-discuss] [Fwd: erlang-client woes]
</A></li>
	<LI>Next message: <A HREF="003692.html">[rabbitmq-discuss] [Fwd: erlang-client woes]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3691">[ date ]</a>
              <a href="thread.html#3691">[ thread ]</a>
              <a href="subject.html#3691">[ subject ]</a>
              <a href="author.html#3691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
