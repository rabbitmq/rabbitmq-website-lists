<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ/Spring integration - help required
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/Spring%20integration%20-%20help%20required&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003941.html">
   <LINK REL="Next"  HREF="003930.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ/Spring integration - help required</H1>
    <B>Vivek Ramesh. Kubaji</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/Spring%20integration%20-%20help%20required&In-Reply-To="
       TITLE="[rabbitmq-discuss] RabbitMQ/Spring integration - help required">vivek.kubaji at onmobile.com
       </A><BR>
    <I>Thu Jun 25 16:18:13 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003941.html">[rabbitmq-discuss] Multithreaded application,	separation of 	connections and channels
</A></li>
        <LI>Next message: <A HREF="003930.html">[rabbitmq-discuss] RabbitMQ/Spring integration - help required
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3913">[ date ]</a>
              <a href="thread.html#3913">[ thread ]</a>
              <a href="subject.html#3913">[ subject ]</a>
              <a href="author.html#3913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

 

I'm trying to evaluate RabbitMQ for our project. And I'm using
Spring-integration framework. From the posts in the forum I ended up
using the following configuration (jms part):

 

      &lt;beans:bean id=&quot;amqConnectionFactory&quot;

class=&quot;org.apache.qpid.client.AMQConnectionFactory&quot;&gt;

            &lt;beans:constructor-arg

value=&quot;<A HREF="amqp://guest:guest@/localhost?brokerlist='tcp://localhost:5672'&quot;">amqp://guest:guest@/localhost?brokerlist='tcp://localhost:5672'&quot;</A>
/&gt;

      &lt;/beans:bean&gt;

 

      &lt;beans:bean id=&quot;connectionFactory&quot;

class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;&gt;

            &lt;beans:property name=&quot;targetConnectionFactory&quot;

ref=&quot;amqConnectionFactory&quot;/&gt;

      &lt;/beans:bean&gt;

      

      &lt;beans:bean id=&quot;jms_QueueWest&quot;
class=&quot;org.apache.qpid.client.AMQQueue&quot;&gt;

            &lt;beans:constructor-arg&gt;

                  &lt;beans:bean class=&quot;org.apache.qpid.url.AMQBindingURL&quot;&gt;

                        &lt;beans:constructor-arg value=&quot;${jms.queue1}&quot;/&gt;

                  &lt;/beans:bean&gt;

            &lt;/beans:constructor-arg&gt;

      &lt;/beans:bean&gt;

 

and have this in my properties file:

 

jms.queue1=<A HREF="direct://rabbit//my.queue1">direct://rabbit//my.queue1</A>

 

I'm running the RabbitMQ broker using the command
$RABBITMQ_HOME$/sbin/rabbitmq-server.bat. When I start my client
application I am getting the following error:

 

2009-06-25 19:00:21,192 INFO

org.springframework.jms.listener.DefaultMessageListenerContainer#0-1

[DefaultMessageListenerContainer.refreshConnectionUntilSuccessful] -
Could not refresh JMS Connection for destination
'<A HREF="direct://rabbit/my.queue1/my.queue1?routingkey='my.queue1''">direct://rabbit/my.queue1/my.queue1?routingkey='my.queue1''</A> - retrying
in 5000 ms. Cause: Error creating connection: Unable to Connect
org.apache.qpid.transport.ConnectionException

        at
org.apache.qpid.transport.Connection.close(Connection.java:494)

        at
org.apache.qpid.transport.Connection.connect(Connection.java:193)

        at

org.apache.qpid.client.AMQConnectionDelegate_0_10.makeBrokerConnection(A
MQConnectionDelegate_0_10.java:161)

        at

org.apache.qpid.client.AMQConnection.makeBrokerConnection(AMQConnection.
java:728)

        at

org.apache.qpid.client.AMQConnection.&lt;init&gt;(AMQConnection.java:520)

        at

org.apache.qpid.client.AMQConnectionFactory.createConnection(AMQConnecti
onFactory.java:276)

        at

org.springframework.jms.connection.SingleConnectionFactory.doCreateConne
ction(SingleConnectionFactory.java:343)

        at

org.springframework.jms.connection.SingleConnectionFactory.initConnectio
n(SingleConnectionFactory.java:290)

        at

org.springframework.jms.connection.SingleConnectionFactory.createConnect
ion(SingleConnectionFactory.java:227)

        at

org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor
.java:184)

        at

org.springframework.jms.listener.AbstractJmsListeningContainer.createSha
redConnection(AbstractJmsListeningContainer.java:378)

        at

org.springframework.jms.listener.AbstractJmsListeningContainer.refreshSh
aredConnection(AbstractJmsListeningContainer.java:363)

        at

org.springframework.jms.listener.DefaultMessageListenerContainer.refresh
ConnectionUntilSuccessful(DefaultMessageListenerContainer.java:785)

        at

org.springframework.jms.listener.DefaultMessageListenerContainer.recover
AfterListenerSetupFailure(DefaultMessageListenerContainer.java:767)

        at

org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMe
ssageListenerInvoker.run(DefaultMessageListenerContainer.java:898)

        at java.lang.Thread.run(Thread.java:619)

Caused by: org.apache.qpid.transport.ConnectionException

        at

org.apache.qpid.transport.Connection.exception(Connection.java:405)

        at

org.apache.qpid.transport.network.Assembler.exception(Assembler.java:108
)

        at

org.apache.qpid.transport.network.InputHandler.exception(InputHandler.ja
va:196)

        at

org.apache.qpid.transport.network.io.IoReceiver.run(IoReceiver.java:146)

        ... 1 more

Caused by: java.lang.IllegalStateException

        at

org.apache.qpid.transport.network.InputHandler.next(InputHandler.java:19
0)

        at

org.apache.qpid.transport.network.InputHandler.received(InputHandler.jav
a:103)

        at

org.apache.qpid.transport.network.InputHandler.received(InputHandler.jav
a:42)

        at

org.apache.qpid.transport.network.io.IoReceiver.run(IoReceiver.java:128)

        ... 1 more

 

Seeing the error I feel I have done some stupid mistake  . Somebody
please help me ...

 

Thanks in advance.

 

Regards,

Vivek

 

 

Regards,

Vivek Kubaji

 

Mail       : <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vivek.kubaji at onmobile.com</A>

Mobile  : 9880199884

Ext          : 6147

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090625/2c53291c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090625/2c53291c/attachment.htm</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 2358 bytes
Desc: image001.gif
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090625/2c53291c/attachment.gif">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090625/2c53291c/attachment.gif</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 825 bytes
Desc: image002.gif
Url : <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090625/2c53291c/attachment-0001.gif">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20090625/2c53291c/attachment-0001.gif</A> 
-------------- next part --------------
==============================
DISCLAIMER: The information in this message is confidential and may be legally privileged. It is intended solely for the addressee. Access to this message by anyone else is unauthorized. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful. Please immediately contact the sender if you have received this message in error. Further, this e-mail may contain viruses and all reasonable precaution to minimize the risk arising there from is taken by OnMobile. OnMobile is not liable for any damage sustained by you as a result of any virus in this e-mail. All applicable virus checks should be carried out by you before opening this e-mail or any attachment thereto. 
Thank you - OnMobile Global Limited.
==============================
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003941.html">[rabbitmq-discuss] Multithreaded application,	separation of 	connections and channels
</A></li>
	<LI>Next message: <A HREF="003930.html">[rabbitmq-discuss] RabbitMQ/Spring integration - help required
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3913">[ date ]</a>
              <a href="thread.html#3913">[ thread ]</a>
              <a href="subject.html#3913">[ subject ]</a>
              <a href="author.html#3913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
