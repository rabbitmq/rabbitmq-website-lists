<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Durable queues and high availability (broker	failage)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Durable%20queues%20and%20high%20availability%20%28broker%0A%09failage%29&In-Reply-To=4A488522.9000003%40eintr.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003933.html">
   <LINK REL="Next"  HREF="003927.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Durable queues and high availability (broker	failage)</H1>
    <B>Daniel Lundin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Durable%20queues%20and%20high%20availability%20%28broker%0A%09failage%29&In-Reply-To=4A488522.9000003%40eintr.org"
       TITLE="[rabbitmq-discuss] Durable queues and high availability (broker	failage)">dln at eintr.org
       </A><BR>
    <I>Mon Jun 29 10:12:33 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003933.html">[rabbitmq-discuss] RabbitMQ/Spring integration - help required
</A></li>
        <LI>Next message: <A HREF="003927.html">[rabbitmq-discuss] Declare queue on specific node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3926">[ date ]</a>
              <a href="thread.html#3926">[ thread ]</a>
              <a href="subject.html#3926">[ subject ]</a>
              <a href="author.html#3926">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, new guy here with a bunch of thanks for the awesome rabbitmq!

And a conundrum ...

I'm somewhat puzzled by how to manage a HA config of rabbit, especially
regarding durable queues.

I understand durable queues exist only on the node where created, and
also why. I also get that if that node fails it'll come back up once the
broker is restarted, and that's cool. But, while that broker is down,
the queue can be recreated on another node, because our system didn't
think waiting for mr sysadm to fix the failed node was a viable option.
And it isn't, we got work to do here. :)

Q1) Is there some notification mechanism to rely on to reliably tell a
queues has failed so apps can take measures to manage the failure, i.e
recreate the queue or set up a &quot;temporary fail&quot; queue?

Q2) Is there a way to &quot;replay&quot; recovered messages from the failed,
no-longer-relevant queue, into the newly/upon-failure created one? This
seems it would allow graceful recovery, even automatically so, once the
failed node does come back up.

I'd like refrain from putting too much messaging logic in the apps
themselves, and if possible I'd like to avoid managing a &quot;temporary
failover&quot; state at all in the app.

Overall though, I feel like I'm missing something since this surely
can't be a problem unique to our system.

So, what is the preferred way to handle node failure in a real-life
rabbitmq-based app today?

Cheers,
/Daniel


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003933.html">[rabbitmq-discuss] RabbitMQ/Spring integration - help required
</A></li>
	<LI>Next message: <A HREF="003927.html">[rabbitmq-discuss] Declare queue on specific node
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3926">[ date ]</a>
              <a href="thread.html#3926">[ thread ]</a>
              <a href="subject.html#3926">[ subject ]</a>
              <a href="author.html#3926">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
