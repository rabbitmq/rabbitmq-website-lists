<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Many clients using .NET API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Many%20clients%20using%20.NET%20API&In-Reply-To=4A49C27C.8000802%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003936.html">
   <LINK REL="Next"  HREF="003899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Many clients using .NET API</H1>
    <B>Sam Owen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Many%20clients%20using%20.NET%20API&In-Reply-To=4A49C27C.8000802%40lshift.net"
       TITLE="[rabbitmq-discuss] Many clients using .NET API">sam.owen at gazprom-mt.com
       </A><BR>
    <I>Tue Jun 30 10:45:10 BST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003936.html">[rabbitmq-discuss] Many clients using .NET API
</A></li>
        <LI>Next message: <A HREF="003899.html">[rabbitmq-discuss] FreeBSD ports/net/rabbitmq updated to 1.6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3939">[ date ]</a>
              <a href="thread.html#3939">[ thread ]</a>
              <a href="subject.html#3939">[ subject ]</a>
              <a href="author.html#3939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tony,

Thanks for the feedback. Yes I'm looking to find a simple way to scale
publishers and subscribers to topics. We're only looking at a few dozen
of these which would be less than 100 threads in the worst case - the
CLR should be able to cope with. What's nice about this approach is that
we could scale to more processes or boxes if required. 

At the moment we're using non-durable topics only and the approach seems
to work fine. &quot;Routing&quot; has the following methods:

****
//IListener is a call back that receives the message, routing and
exchange the message was sent on
public static void Listen(Destination from, IListener alert) {...

//IFeed should not return until interrupted. It receives a blocking
queue to write messages to as needed
public static void Publish(Destination to, IFeed action) { ...

//The IEvent will be called according to the Quartz trigger. It is given
a blocking queue to write to.
public static void Schedule(Destination to, string jobName, Trigger
trigger, IEvent @event) { ...

//Listens to 'from', filters/transforms and publishes to 'to'.
public static void ListenTransformAndPublish(Destination from,
TransformingFeed feed, Destination to) { ...

//interrupts all threads
public static void Shutdown() { ...
****

Cheers, 
-- Sam

-----Original Message-----
From: Tony Garnock-Jones [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonyg at lshift.net</A>] 
Sent: 30 June 2009 08:45
To: Sam Owen
Cc: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Many clients using .NET API

Hi Sam,

Sam Owen wrote:
&gt;<i> I've just started to look at RabbitMQ. I'm wondering whether the 
</I>&gt;<i> following would be an idiomatic use of RabbitMQ from the .NET API:
</I>&gt;<i> 
</I>&gt;<i> Routing.Listen(&quot;queue1&quot;, &quot;#&quot;, new ConsoleAlert());
</I>&gt;<i> Routing.Listen(&quot;queue1&quot;, &quot;news.#&quot;, new EmailAlert());
</I>&gt;<i> Routing.Listen(&quot;queue2&quot;, &quot;email.#&quot;, new ConsoleAlert());
</I>
Are you suggesting a layer atop IModel?

&gt;<i> Each call to Listen sets up a thread where the connection and channel 
</I>&gt;<i> are maintained.
</I>
That makes sense -- especially if it could abstract away the three 
options for multiplexing channels over connections that Matthias 
Karlsson mentioned in 
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">83eb635f0906250159u1c700aa6r94f0e124119393a0 at mail.gmail.com</A>&gt;.

Ah, I see by your implementation that you *are* suggesting a layer atop 
IModel! It looks, at a glance, plausible, but I'm afraid I'm not the man

to at-a-glance evaluate the code more closely than that :-)

&gt;<i> Given that .NET processes are more heavy weight than erlang's is this 
</I>&gt;<i> the preferred way to set up many clients?
</I>
Hmm. Well, in Java there's a thread or so* per connection too, so it's 
not an awful way of doing it. On the other hand, if your error-handling 
model supports it, you could share a single channel between multiple 
subscriptions. It all depends (complexly) on the message rate, the 
consequences of a dropped connection, and the level of parallelism you 
want in your application.

Regards,
   Tony

* depending on heartbeat settings



The information transmitted is the property of Gazprom Marketing &amp; Trading Ltd and is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Statements and opinions expressed in this e-mail may not represent those of the company. Any review, retransmission, dissemination and other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited. If you received this in error, please contact the sender immediately and delete the material from any computer. 

Registered office: Gazprom Marketing &amp; Trading Ltd, Gazprom House, 60 Marina Place, Hampton Wick, Kingston upon Thames, KT1 4BH. Registered in England No. 3768267




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003936.html">[rabbitmq-discuss] Many clients using .NET API
</A></li>
	<LI>Next message: <A HREF="003899.html">[rabbitmq-discuss] FreeBSD ports/net/rabbitmq updated to 1.6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3939">[ date ]</a>
              <a href="thread.html#3939">[ thread ]</a>
              <a href="subject.html#3939">[ subject ]</a>
              <a href="author.html#3939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
