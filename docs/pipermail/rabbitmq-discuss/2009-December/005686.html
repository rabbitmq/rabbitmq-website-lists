<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Alice wonderland  and RabbitMQ issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Alice%20wonderland%20%20and%20RabbitMQ%20issue&In-Reply-To=64B9CE49-963F-4850-8219-00EA2416098C%40mac.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005684.html">
   <LINK REL="Next"  HREF="005687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Alice wonderland  and RabbitMQ issue</H1>
    <B>Ari Lerner</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Alice%20wonderland%20%20and%20RabbitMQ%20issue&In-Reply-To=64B9CE49-963F-4850-8219-00EA2416098C%40mac.com"
       TITLE="[rabbitmq-discuss] Alice wonderland  and RabbitMQ issue">arilerner at mac.com
       </A><BR>
    <I>Mon Dec 21 10:32:25 GMT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005684.html">[rabbitmq-discuss] Alice wonderland  and RabbitMQ issue
</A></li>
        <LI>Next message: <A HREF="005687.html">[rabbitmq-discuss] Alice wonderland  and RabbitMQ issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5686">[ date ]</a>
              <a href="thread.html#5686">[ thread ]</a>
              <a href="subject.html#5686">[ subject ]</a>
              <a href="author.html#5686">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wilson,

Yep, so it's on the rabbit node. Do you have the rabbit console open? Can you try typing this in the rabbit console:

rabbit_networking:connection_info_all().

What does that give you?

Ari Lerner

Hi Ari,
Bellow  is operation and result.
(<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A>)2&gt; rpc:call('<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A>', rabbit_networking, connection_info_all, []).
{badrpc,{'EXIT',{undef,[{rabbit_networking,connection_info_all,
                                           []},
                        {rpc,local_call,3},
                        {erl_eval,do_apply,5},
                        {shell,exprs,6},
                        {shell,eval_exprs,6},
                        {shell,eval_loop,3}]}}}
 
Best Regards,
Wilson

On Dec 21, 2009, at 2:25 AM, Ari Lerner wrote:

&gt;<i> The error is coming from an alice call, not from mochiweb. But you can find those in the mochiweb source: <A HREF="http://code.google.com/p/mochiweb/">http://code.google.com/p/mochiweb/</A>
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Ari
</I>&gt;<i> 
</I>&gt;<i> On Dec 21, 2009, at 2:23 AM, Wilson Ke wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi Ari,
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Do you have mochiweb_server.erl and mochiweb.app sample code?
</I>&gt;&gt;<i> if have ,please send to me. I think these maybe help me find issue key.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Best Regards,
</I>&gt;&gt;<i> Wilson
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> From: Wilson Ke 
</I>&gt;&gt;<i> Sent: 2009&#24180;12&#26376;21&#26085; 18:16
</I>&gt;&gt;<i> To: 'Ari Lerner'
</I>&gt;&gt;<i> Cc: 'RabbitMQ Discuss'
</I>&gt;&gt;<i> Subject: RE: [rabbitmq-discuss] Alice wonderland and RabbitMQ issue
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Hi Ari,
</I>&gt;&gt;<i>        When I start alice, and on the erl environment run rabint:rabbit_node().
</I>&gt;&gt;<i> I can get node information as below.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> (<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A>)1&gt; rabint:rabbit_node().
</I>&gt;&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A>
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Best Regards,
</I>&gt;&gt;<i> Wilson
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> From: Ari Lerner [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">arilerner at mac.com</A>] 
</I>&gt;&gt;<i> Sent: 2009&#24180;12&#26376;21&#26085; 18:04
</I>&gt;&gt;<i> To: Wilson Ke
</I>&gt;&gt;<i> Cc: 'RabbitMQ Discuss'
</I>&gt;&gt;<i> Subject: Re: [rabbitmq-discuss] Alice wonderland and RabbitMQ issue
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Wilson,
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Hey, sorry, I've been away from my email for a little while. Does he have the rabbit source?  
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> It's called in an rpc: rabint:rpc_call(rabbit_networking, connection_info_all, []).
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> where rabint rpc_call looks like:
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> rpc_call(Mod, Fun, Args)  -&gt; rpc:call(rabbit_node(), Mod, Fun, Args, ?RPC_TIMEOUT).
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> So it's coming from the remote node. Wilson, what does: rabint:rabbit_node() look like?
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> Ari Lerner
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> On Dec 21, 2009, at 1:27 AM, Wilson Ke wrote:
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hi Ari,
</I>&gt;&gt;<i>          Do you have any suggestions?
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Best Regards,
</I>&gt;&gt;<i> Wilson
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> From: Wilson Ke 
</I>&gt;&gt;<i> Sent: 2009&#24180;12&#26376;21&#26085; 17:24
</I>&gt;&gt;<i> To: 'Matthias Radestock'
</I>&gt;&gt;<i> Cc: 'mabrek'; 'RabbitMQ Discuss'
</I>&gt;&gt;<i> Subject: RE: [rabbitmq-discuss] Alice wonderland and RabbitMQ issue
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Matthias,
</I>&gt;&gt;<i>     I did following your suggestions.
</I>&gt;&gt;<i> Use <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A> as node name;
</I>&gt;&gt;<i> Set &quot;UD/8aYoam23kYFz4aWO2bA==&quot; as /root/.erlang.cookie content;
</I>&gt;&gt;<i> ./start.sh -alice rabbithost &quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A>&quot;;
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> But when is use  the bellow curl command to test.
</I>&gt;&gt;<i> curl -i <A HREF="http://localhost:9999/conn">http://localhost:9999/conn</A>
</I>&gt;&gt;<i> it still throw bellow exception
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> =INFO REPORT==== 22-Dec-2009::01:12:26 ===
</I>&gt;&gt;<i> (rest_server:237) Error in rest server: {function_clause,
</I>&gt;&gt;<i>                                          [{lists,map,
</I>&gt;&gt;<i>                                            [#Fun&lt;conn.0.20985291&gt;,
</I>&gt;&gt;<i>                                             {badrpc,
</I>&gt;&gt;<i>                                              {'EXIT',
</I>&gt;&gt;<i>                                               {undef,
</I>&gt;&gt;<i>                                                [{rabbit_networking,
</I>&gt;&gt;<i>                                                  connection_info_all,[]},
</I>&gt;&gt;<i>                                                 {rpc,local_call,3},
</I>&gt;&gt;<i>                                                 {conn,get,1},
</I>&gt;&gt;<i>                                                 {rest_server,run_controller,4},
</I>&gt;&gt;<i>                                                 {mochiweb_http,headers,5},
</I>&gt;&gt;<i>                                                 {proc_lib,init_p_do_apply,
</I>&gt;&gt;<i>                                                  3}]}}}]},
</I>&gt;&gt;<i>                                           {conn,get,1},
</I>&gt;&gt;<i>                                           {rest_server,run_controller,4},
</I>&gt;&gt;<i>                                           {mochiweb_http,headers,5},
</I>&gt;&gt;<i>                                           {proc_lib,init_p_do_apply,3}]}
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Do you have mochiweb_server.erl and mochiweb.app sample code,if have ,please send to me. I think these maybe help me find issue key.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> Wilson.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: Matthias Radestock [mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>] 
</I>&gt;&gt;<i> Sent: 2009&#24180;12&#26376;21&#26085; 16:31
</I>&gt;&gt;<i> To: Wilson Ke
</I>&gt;&gt;<i> Cc: 'mabrek'; 'RabbitMQ Discuss'
</I>&gt;&gt;<i> Subject: Re: [rabbitmq-discuss] Alice wonderland and RabbitMQ issue
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Wilson,
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Wilson Ke wrote:
</I>&gt;&gt;<i> &gt; *My rabbitmq work normal,the start information as bellow*
</I>&gt;&gt;<i> &gt; node          : <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A>
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> In that case ...
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> &gt; ./start.sh -alice rabbithost &quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alice at centos</A>&quot; -setcookie
</I>&gt;&gt;<i> &gt; &quot;UD/8aYoam23kYFz4aWO2bA==&quot;
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> the above should say &quot;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at centos</A>&quot;.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Also, the cookie information is wrong; you set it to what rabbit
</I>&gt;&gt;<i> displays here:
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> &gt; cookie hash   : UD/8aYoam23kYFz4aWO2bA==
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> but that is the *hash* of the cookie, not the cookie itself. You can
</I>&gt;&gt;<i> find the cookie in rabbit's home dir under .erlang.cookie, e.g. given
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> &gt; home dir      : /root
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> the cookie should be in /root/.erlang.cookie. The contents of that file
</I>&gt;&gt;<i> should be supplied to -setcookie.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Matthias
</I>&gt;&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20091221/716468cf/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20091221/716468cf/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005684.html">[rabbitmq-discuss] Alice wonderland  and RabbitMQ issue
</A></li>
	<LI>Next message: <A HREF="005687.html">[rabbitmq-discuss] Alice wonderland  and RabbitMQ issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5686">[ date ]</a>
              <a href="thread.html#5686">[ thread ]</a>
              <a href="subject.html#5686">[ subject ]</a>
              <a href="author.html#5686">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
