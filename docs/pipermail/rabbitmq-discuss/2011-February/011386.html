<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Startup/Stopping
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Startup/Stopping&In-Reply-To=%3C20110222102642.GD5409%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011384.html">
   <LINK REL="Next"  HREF="011385.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Startup/Stopping</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Startup/Stopping&In-Reply-To=%3C20110222102642.GD5409%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Startup/Stopping">matthew at rabbitmq.com
       </A><BR>
    <I>Tue Feb 22 10:26:43 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011384.html">[rabbitmq-discuss] RabbitMQ Startup/Stopping
</A></li>
        <LI>Next message: <A HREF="011385.html">[rabbitmq-discuss] Problems with rabbitmq-auth-mechanism-ssl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11386">[ date ]</a>
              <a href="thread.html#11386">[ thread ]</a>
              <a href="subject.html#11386">[ subject ]</a>
              <a href="author.html#11386">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Feb 22, 2011 at 03:47:02PM +0530, Sunil Arora wrote:
&gt;<i> We are using RabbitMQ 2.2.0 with erlang 5.7.2.
</I>&gt;<i> 
</I>&gt;<i> &gt; Regarding, does this follow it being shut down with a &quot;kill&quot;
</I>&gt;<i> &gt; rather than shutdown cleanly?
</I>&gt;<i>
</I>&gt;<i> Looking at the shutdown_log says &quot;Stopping All nodes... OK done.&quot;
</I>&gt;<i> Don't know how to trace if it was a case of force kill.
</I>
Mmm, ok. Upgrading to 2.3.1 will definitely add one optimisation which
has the capacity to vastly reduce the amount of disk activity (if that
is indeed what's going on), but it's not clear whether that would apply
in your case.

Basically, Rabbit doesn't always write all data to disk immediately.
Consequently on shutdown, it can have a fair backlog to write out. This
can take some time. If you force kill it during this time, then on
startup, it has to do all sorts of consistency checks (the equiv. of an
fsck) which will take even longer. So whilst it may take 5 mins to shut
it down, it's by far the better idea to allow it to do that so that the
startup is then near instantaneous.

The optimisation mentioned above allows the elimination of disk activity
for queues that have been deleted. If Rabbit is heavily loaded, the part
of Rabbit that writes messages to disk can be some way behind the
various queues, and as such can still continue to write out messages for
queues that have since been deleted. We added an optimisation that
allows the detection of this situation and thus the elimination of these
writes. This may help you if this corresponds to your situation.

Matthew
</PRE>































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011384.html">[rabbitmq-discuss] RabbitMQ Startup/Stopping
</A></li>
	<LI>Next message: <A HREF="011385.html">[rabbitmq-discuss] Problems with rabbitmq-auth-mechanism-ssl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11386">[ date ]</a>
              <a href="thread.html#11386">[ thread ]</a>
              <a href="subject.html#11386">[ subject ]</a>
              <a href="author.html#11386">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
