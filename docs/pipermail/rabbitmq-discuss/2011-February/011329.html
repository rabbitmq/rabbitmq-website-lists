<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Naming RabbitMQ nodes with complete domain	names
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Naming%20RabbitMQ%20nodes%20with%20complete%20domain%0A%09names&In-Reply-To=%3CDB37F2C2-7A68-406C-8099-9AD26771CDAD%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011328.html">
   <LINK REL="Next"  HREF="011330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Naming RabbitMQ nodes with complete domain	names</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Naming%20RabbitMQ%20nodes%20with%20complete%20domain%0A%09names&In-Reply-To=%3CDB37F2C2-7A68-406C-8099-9AD26771CDAD%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Naming RabbitMQ nodes with complete domain	names">videlalvaro at gmail.com
       </A><BR>
    <I>Sat Feb 19 18:19:36 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011328.html">[rabbitmq-discuss] Naming RabbitMQ nodes with complete domain	names
</A></li>
        <LI>Next message: <A HREF="011330.html">[rabbitmq-discuss] Naming RabbitMQ nodes with complete domain	names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11329">[ date ]</a>
              <a href="thread.html#11329">[ thread ]</a>
              <a href="subject.html#11329">[ subject ]</a>
              <a href="author.html#11329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Restart the epmd process or if you are just running RabbitMQ then kill it after you stop the server.

Hope that helps.

Sent from my iFad

On Feb 20, 2011, at 1:49 AM, Max Bridgewater &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">max.bridgewater at gmail.com</A>&gt; wrote:

&gt;<i> Hi Alvaro,
</I>&gt;<i> 
</I>&gt;<i> I believe you are right. The according modification of the rabbitmq
</I>&gt;<i> scripts seems not that straightforward. Here is what I've got sofar:
</I>&gt;<i> 
</I>&gt;<i> a) Changed the option -sname to -name in rabbitmq-multi
</I>&gt;<i> b) Changed the node name initialization in rabbitmq-env from
</I>&gt;<i> NODENAME=rabbit@${HOSTNAME%%.*} to #NODENAME=rabbit@${HOSTNAME}
</I>&gt;<i> c) Changed the node names in rabbitmq.config to use full host names.
</I>&gt;<i> d) Cleared the mnesia database.
</I>&gt;<i> 
</I>&gt;<i> Now, when I attempt to start the nodes, hereunder is what I get.
</I>&gt;<i> Apparently, despite these modifications rabbitmq/erlang is still
</I>&gt;<i> attempting to set the short name.
</I>&gt;<i> 
</I>&gt;<i> Any idea what else I'm missing?
</I>&gt;<i> Thanks,
</I>&gt;<i> Max.
</I>&gt;<i> 
</I>&gt;<i> ============================================
</I>&gt;<i> Starting all nodes...
</I>&gt;<i> Starting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ec2-174-122-225-215.compute-1.amazonaws.com...</A>
</I>&gt;<i> Activating RabbitMQ plugins ...
</I>&gt;<i> 0 plugins activated:
</I>&gt;<i> 
</I>&gt;<i> {error_logger,{{2011,2,19},{12,33,32}},&quot;Can't set short node
</I>&gt;<i> name!\nPlease check your configuration\n&quot;,[]}
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Sat, Feb 19, 2011 at 12:32 AM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Have you tried changing the Erlang option -sname to -name?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> That's the way Erlang uses to specify long names.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> See <A HREF="http://erlang.org/doc/man/erl.html">http://erlang.org/doc/man/erl.html</A> and then modify your rabbitmq-server script accordingly.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Alvaro
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Sent from my iFad
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Feb 19, 2011, at 10:51 AM, Max Bridgewater &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">max.bridgewater at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> This is probably a silly question but it really baffles me right now.
</I>&gt;&gt;&gt;<i> The original issue is this: I'm trying to use JInterface to connect to
</I>&gt;&gt;&gt;<i> a rabbitmq cluster hosted on EC2. But I keep getting &quot;Cannot connect
</I>&gt;&gt;&gt;<i> to peer node&quot;. My understanding is that this error is happening
</I>&gt;&gt;&gt;<i> because I'm using the address '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at domain.org</A>' to contact the
</I>&gt;&gt;&gt;<i> remote RabbitMQ node named: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at domain.</A> (Note the missing TLD).
</I>&gt;&gt;&gt;<i> That is, because there is no exact  match between the node name given
</I>&gt;&gt;&gt;<i> to JInterface and the name of the node it is connecting to, the
</I>&gt;&gt;&gt;<i> connection fails.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I desperately tried configuring RabbitMQ to take the complete domain
</I>&gt;&gt;&gt;<i> name (domain.org) instead of just the short domain name (domain). Any
</I>&gt;&gt;&gt;<i> suggestion on how to resolve this issue?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Beyond this, this problem begs the question of how do RabbitMQ nodes
</I>&gt;&gt;&gt;<i> located on different machines across different domains communicate
</I>&gt;&gt;&gt;<i> with each other if the only way they can be referred to each other by
</I>&gt;&gt;&gt;<i> short name? Up until now, I've only clustered nodes on the same
</I>&gt;&gt;&gt;<i> machine.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I'm sure missing something. Please enlighten me.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Sincerely,
</I>&gt;&gt;&gt;<i> Max.
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i> 
</I></PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011328.html">[rabbitmq-discuss] Naming RabbitMQ nodes with complete domain	names
</A></li>
	<LI>Next message: <A HREF="011330.html">[rabbitmq-discuss] Naming RabbitMQ nodes with complete domain	names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11329">[ date ]</a>
              <a href="thread.html#11329">[ thread ]</a>
              <a href="subject.html#11329">[ subject ]</a>
              <a href="author.html#11329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
