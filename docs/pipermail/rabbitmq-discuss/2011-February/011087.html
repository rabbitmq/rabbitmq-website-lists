<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustering on Same Machine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20on%20Same%20Machine&In-Reply-To=%3C20110205221326.GA2373%40dakota.doc.ic.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011083.html">
   <LINK REL="Next"  HREF="011088.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustering on Same Machine</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20on%20Same%20Machine&In-Reply-To=%3C20110205221326.GA2373%40dakota.doc.ic.ac.uk%3E"
       TITLE="[rabbitmq-discuss] Clustering on Same Machine">alexandru at rabbitmq.com
       </A><BR>
    <I>Sat Feb  5 22:13:26 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011083.html">[rabbitmq-discuss] Clustering on Same Machine
</A></li>
        <LI>Next message: <A HREF="011088.html">[rabbitmq-discuss] Clustering on Same Machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11087">[ date ]</a>
              <a href="thread.html#11087">[ thread ]</a>
              <a href="subject.html#11087">[ subject ]</a>
              <a href="author.html#11087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Max,

That might be caused by stale mnesia databases in /var/lib/rabbitmq.

Could you try to clean that directory (rm -rf /var/lib/rabbitmq/* should
be enough) and try again?

Note that this will remove any messages, queues, etc. from that machine.

Cheers,
Alex

On Sat, Feb 05, 2011 at 02:40:31PM -0500, Max Bridgewater wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> For experimental purposes, I'm trying to create a cluster of three
</I>&gt;<i> nodes, all on the same machine. I can run the three nodes by setting
</I>&gt;<i> the value of NODE_COUNT to 3 in /etc/init.d/rabbitmq-server.
</I>&gt;<i> To create the cluster, I enter the following in /etc/rabbitmq/rabbitmq.config:
</I>&gt;<i> 
</I>&gt;<i> [{rabbit, [{cluster_nodes,
</I>&gt;<i> ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-196-18-9</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit_1 at ip-10-196-18-9</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit_2 at ip-10-196-18-9</A>']}]}].
</I>&gt;<i> 
</I>&gt;<i> Unfortunately, this doesn't work. Error message is: Starting
</I>&gt;<i> rabbitmq-server: FAILED - check /var/log/rabbitmq/startup_log, _err
</I>&gt;<i> 
</I>&gt;<i> The last line in the /var/log/rabbitmq/startup_log is below.
</I>&gt;<i> 
</I>&gt;<i> Any idea?
</I>&gt;<i> Thanks,
</I>&gt;<i> Max.
</I>&gt;<i> 
</I>&gt;<i> starting database    ...{&quot;Kernel pid
</I>&gt;<i> terminated&quot;,application_controller,&quot;{application_start_failure,rabbit,{bad_return,{{rabbit,start,[normal,[]]},
</I>&gt;<i> {'EXIT',{{case_clause,{error,{unable_to_join_cluster,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-196-18-9</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit_1 at ip-10-196-18-9</A>','<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit_2 at ip-10-196-18-9</A>'],{merge_schema_failed,
</I>&gt;<i> [66,97,100,32,99,111,111,107,105,101,32,105,110,32,116,97,98,108,101,32,100,101,102,105,110,105,116,105,111,110,32,114,97,98,98,105,116,95,
</I>&gt;<i> 117,115,101,114,95,112,101,114,109,105,115,115,105,111,110,58,32,39,114,97,98,98,105,116,95,49,64,105,112,45,49,48,45,49,57,54,45,49,56,45,57,
</I>&gt;<i> 39,32,61,32,123,99,115,116,114,117,99,116,44,114,97,98,98,105,116,95,117,115,101,114,95,112,101,114,109,105,115,115,105,111,110,44,115,101,
</I>&gt;<i> 116,44,91,93,44,91,39,114,97,98,98,105,116,95,49,64,105,112,45,49,48,45,49,57,54,45,49,56,45,57,39,93,44,91,93,44,48,44,
</I>&gt;<i> 114,101,97,100,95,119,114,105,116,101,44,91,93,44,91,93,44,102,97,108,115,101,44,117,115,101,114,95,112,101,114,109,105,115,115,105,111,110,44,91,117,115,101,114,95,118,
</I>&gt;<i> 104,111,115,116,44,112,101,114,109,105,115,115,105,111,110,93,44,91,93,44,91,93,44,123,123,49,50,57,54,44,57,50,50,54,50,51,44,56,49,48,53,56,52,125,44,39,114,97,
</I>&gt;<i> 98,98,105,116,95,49,64,105,112,45,49,48,45,49,57,54,45,49,56,45,57,39,125,44,123,123,50,44,48,125,44,91,93,125,125,44,32,39,114,97,98,98,105,116,64,105,112,
</I>&gt;<i> 45,49,48,45,49,57,54,45,49,56,45,57,39,32,61,32,123,99,115,116,114,117,99,116,44,114,97,98,98,105,116,95,117,115,101,114,95,112,101,114,109,105,115,115,
</I>&gt;<i> 105,111,110,44,115,101,116,44,91,93,44,91,39,114,97,98,98,105,116,64,105,112,45,49,48,45,49,57,54,45,49,56,45,57,39,93,44,91,93,44,48,44,114,101,97,100,95,
</I>&gt;<i> 119,114,105,116,101,44,91,93,44,91,93,44,102,97,108,115,101,
</I>&gt;<i> 44,117,115,101,114,95,112,101,114,109,105,115,115,105,111,110,44,91,117,115,101,114,95,118,104,111,115,116,44,112,101,114,109,105,115,115,105,
</I>&gt;<i> 111,110,93,44,91,93,44,91,93,44,123,123,49,50,57,54,44,57,50,49,56,48,57,44,50,57,53,54,51,53,125,44,39,114,97,98,98,105,116,64,105,112,45,49,48,45,49,57,54,45,49,
</I>&gt;<i> 56,45,57,39,125,44,123,123,50,44,48,125,44,91,93,125,125,10]}}}},[{rabbit,'-run_boot_step/1-lc$^1/1-1-',1},
</I>&gt;<i> {rabbit,run_boot_step,1},{rabbit,'-start/2-lc$^0/1-0-',1},{rabbit,start,2},{application_master,start_it_old,4}]}}}}}&quot;}
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011083.html">[rabbitmq-discuss] Clustering on Same Machine
</A></li>
	<LI>Next message: <A HREF="011088.html">[rabbitmq-discuss] Clustering on Same Machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11087">[ date ]</a>
              <a href="thread.html#11087">[ thread ]</a>
              <a href="subject.html#11087">[ subject ]</a>
              <a href="author.html#11087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
