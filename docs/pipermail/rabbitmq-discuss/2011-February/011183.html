<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message redelivering doubt with one and with	more than one consumers.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20redelivering%20doubt%20with%20one%20and%20with%0A%09more%20than%20one%20consumers.&In-Reply-To=%3CAANLkTim96T8TGNP7QKW31GXyUU8_r%3D55dFJ07rrCrxZ%3D%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011192.html">
   <LINK REL="Next"  HREF="011246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message redelivering doubt with one and with	more than one consumers.</H1>
    <B>Alfonso Pantoja</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20redelivering%20doubt%20with%20one%20and%20with%0A%09more%20than%20one%20consumers.&In-Reply-To=%3CAANLkTim96T8TGNP7QKW31GXyUU8_r%3D55dFJ07rrCrxZ%3D%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Message redelivering doubt with one and with	more than one consumers.">alfonso.pantoja at gmail.com
       </A><BR>
    <I>Thu Feb 10 09:26:53 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011192.html">[rabbitmq-discuss] Creating Multiple Consumers bounded to same channel in different threads
</A></li>
        <LI>Next message: <A HREF="011246.html">[rabbitmq-discuss] Message redelivering doubt with one and with more than one consumers.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11183">[ date ]</a>
              <a href="thread.html#11183">[ thread ]</a>
              <a href="subject.html#11183">[ subject ]</a>
              <a href="author.html#11183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

on the RabbitMQ FAQ page I see the response to

&quot;Can you explain the cases where a message might be delivered to a
consumer more than once?&quot;
the following:

&quot;If a message is delivered to a consumer, and that consumer then dies
(or closes the channel which has the subscription to the queue, or
closes the connection itself) without acking the message, then
RabbitMQ will reinject the message into the queue. If that same
consumer then reconnects and creates a new subscription to the same
queue, it's possible it'll receive the same message again. This is 'at
least once' delivery and is very deliberate design to ensure that
messages are not lost in transit.&quot;


So my doubt is:

In a scenario with one consumer as I saw in my tests, the consumer
received messages with the Redelivered=true AMQP header atribute.
The consumer was based in the classes provided by the .NET API and as
I remember the consumer-tag is random generated by the server.

When there is a only one consumer (with a random consumer-tag name)
and a message is not acked when the consumer is reconnected (so has
another random tag name) that message is redelivered?
Based on my experience I think this is true but don't understand that
&quot;If that same consumer then reconnects and creates a new subscription
to the same queue&quot;...
By the was my consumer always tries to create the queue and the
bindings every time it connects to RabbitMQ.

And also I'm wondering how this behavior acts when there are more than
one consumer (same queue and same bindings)...

Under what circumstances an unack message wouldn't be redelivered again?

Thank you in advance.

Regards,

Alfonso










The consumer can also call basic.recover which tells rabbit to resend
all the messages sent to the consumer for which rabbit has not
received an ack for. This basically amounts to the consumer saying &quot;I
know you sent me some messages, but I've forgotten what they are.
Could you resend them all again?&quot;.
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011192.html">[rabbitmq-discuss] Creating Multiple Consumers bounded to same channel in different threads
</A></li>
	<LI>Next message: <A HREF="011246.html">[rabbitmq-discuss] Message redelivering doubt with one and with more than one consumers.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11183">[ date ]</a>
              <a href="thread.html#11183">[ thread ]</a>
              <a href="subject.html#11183">[ subject ]</a>
              <a href="author.html#11183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
