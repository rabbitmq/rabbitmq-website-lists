<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustering over a WAN
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20over%20a%20WAN&In-Reply-To=%3C20110228155125.GC32701%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011513.html">
   <LINK REL="Next"  HREF="011516.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustering over a WAN</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustering%20over%20a%20WAN&In-Reply-To=%3C20110228155125.GC32701%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Clustering over a WAN">matthew at rabbitmq.com
       </A><BR>
    <I>Mon Feb 28 15:51:27 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011513.html">[rabbitmq-discuss] Clustering over a WAN
</A></li>
        <LI>Next message: <A HREF="011516.html">[rabbitmq-discuss] Clustering over a WAN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11514">[ date ]</a>
              <a href="thread.html#11514">[ thread ]</a>
              <a href="subject.html#11514">[ subject ]</a>
              <a href="author.html#11514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Feb 28, 2011 at 03:27:42PM +0000, Chris Hampson wrote:
&gt;<i> We're currently attempting to maintain a RabbitMQ cluster over a WAN between some of our sites, 2 in the US, one in the UK and another in India.
</I>
That's a bad idea.

&gt;<i> For the most part this seems to be working fine, but it seems a little fragile and we can't seem to get it to recover from failures very well.
</I>
Correct. Mnesia, which Rabbit uses to store all sorts of data (though
not messages), copes poorly with network partitions.

&gt;<i> If anyone can provide any advice to aid our situation we'd be most
</I>&gt;<i> grateful (even if it is &quot;don't do that you loony, separate them out
</I>&gt;<i> and shovel messages between sites when necessary&quot;)
</I>
Yeah, the latter's a fair summary of my advice on this ;) We do state
quite prominantly that clustering is not for HA, though I admit we state
it on <A HREF="http://www.rabbitmq.com/pacemaker.html">http://www.rabbitmq.com/pacemaker.html</A> rather than
<A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A> which is not really as helpful
as it could be.

The problem is that mnesia, and by extension Rabbit, goes for the
Consistency and Availability part of the CAP triangle, and so just does
not cope well with partitions ocurring.
<A HREF="http://en.wikipedia.org/wiki/CAP_theorem">http://en.wikipedia.org/wiki/CAP_theorem</A>

We are working on solving some of these problems in a number of
different ways. If the shovel is a viable solution then I'd recommend
you use that, otherwise please let us know some more details of your use
case and we should be able to advise further.

Best wishes,

Matthew
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011513.html">[rabbitmq-discuss] Clustering over a WAN
</A></li>
	<LI>Next message: <A HREF="011516.html">[rabbitmq-discuss] Clustering over a WAN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11514">[ date ]</a>
              <a href="thread.html#11514">[ thread ]</a>
              <a href="subject.html#11514">[ subject ]</a>
              <a href="author.html#11514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
