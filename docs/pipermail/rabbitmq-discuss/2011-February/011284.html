<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Java%20Client%202.3.1%20on%20Android&In-Reply-To=%3C4D5BE4C3.9030004%40telecom-sudparis.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011211.html">
   <LINK REL="Next"  HREF="011286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android</H1>
    <B>Denis Conan</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Java%20Client%202.3.1%20on%20Android&In-Reply-To=%3C4D5BE4C3.9030004%40telecom-sudparis.eu%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android">Denis.Conan at telecom-sudparis.eu
       </A><BR>
    <I>Wed Feb 16 14:52:51 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011211.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
        <LI>Next message: <A HREF="011286.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11284">[ date ]</a>
              <a href="thread.html#11284">[ thread ]</a>
              <a href="subject.html#11284">[ subject ]</a>
              <a href="author.html#11284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le 11/02/2011 11:47, Simon MacMullen a &#233;crit :
&gt;<i> Hi Denis.
</I>&gt;<i>
</I>&gt;<i> On 08/02/11 12:38, Denis Conan wrote:
</I>&gt;&gt;<i> my objective is to run the Java Client on Android.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do not hesitate to tell me if I started off with the wrong idea.
</I>&gt;<i>
</I>&gt;<i> That's... not unreasonable. We don't guarantee that the Java client will
</I>&gt;<i> run on Android (in particular we don't test it).
</I>
Hello,

thank you for your detailed answer and for the patch (not already tested).

Are you willing to consider the support of Android Java clients in the future? 
or do you consider that AMQP clients for smartphones are out of the scope of 
RabbitMQ target?

&gt;&gt;<i> I didn't see any specific release for Android. So, I took the Java
</I>&gt;&gt;<i> Client for J2SE. I was able to adapt the previous version 2.2.0 of the
</I>&gt;&gt;<i> Java Client for running on Android: removal of packages json and
</I>&gt;&gt;<i> jsonrpc, and correct a call to super in the constructor of the class
</I>&gt;&gt;<i> PossibleAuthenticationFailureException.
</I>&gt;<i>
</I>&gt;<i> Ironically I think that might be fixed in 2.3.1 (it was also
</I>&gt;<i> incompatible with Java 1.5).
</I>
Yes, of course, I have noticed the change.

&gt;&gt;<i> As I see, the new version 2.3.1 now has authentication with SASL.
</I>&gt;&gt;<i> Unfortunately, there is no package javax.security.sasl in Android JRE.
</I>&gt;&gt;<i> So, I tried to manage this lack by replacing the classes of this package
</I>&gt;&gt;<i> by the ones in aSMACK (<A HREF="http://code.google.com/p/asmack/">http://code.google.com/p/asmack/</A>). The
</I>&gt;&gt;<i> compilation is ok, but the execution throws the following exception.
</I>&gt;<i>
</I>&gt;<i> ...but it would be a pity if the introduction of more SASL mechanisms
</I>&gt;<i> were to make it unusable on Android.
</I>&gt;<i>
</I>&gt;&gt;<i> java.io.IOException: No compatible authentication mechanism found -
</I>&gt;&gt;<i> server offered [PLAIN AMQPLAIN]
</I>&gt;<i>
</I>&gt;<i> So whatever SASL implementation you've cooked up somehow does not
</I>&gt;<i> support PLAIN (I would not expect it to support AMQPLAIN).
</I>&gt;<i>
</I>&gt;<i> This seems odd, as it looks like Smack contains support for PLAIN:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://code.google.com/p/asmack/source/browse/src/custom/de/measite/smack/SaslClientFactory.java">http://code.google.com/p/asmack/source/browse/src/custom/de/measite/smack/SaslClientFactory.java</A>
</I>
If it seems odd to you, then I need to investigate more. I will let you know if 
more successful.

&gt;<i> If you can't get this working, then you can of course stick with the
</I>&gt;<i> 2.2.0 client and an upgraded server. But being stuck with an old client
</I>&gt;<i> isn't fun, so I'll have a think about how easy it would be to patch the
</I>&gt;<i> old homebrew SASL back in for Android.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>
Cheers

-- 
Denis Conan
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011211.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
	<LI>Next message: <A HREF="011286.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11284">[ date ]</a>
              <a href="thread.html#11284">[ thread ]</a>
              <a href="subject.html#11284">[ subject ]</a>
              <a href="author.html#11284">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
