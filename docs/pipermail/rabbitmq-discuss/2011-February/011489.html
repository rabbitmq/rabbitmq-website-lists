<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Losing messages, why?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Losing%20messages%2C%20why%3F&In-Reply-To=%3C31020537.post%40talk.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011432.html">
   <LINK REL="Next"  HREF="011486.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Losing messages, why?</H1>
    <B>DOBRO</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Losing%20messages%2C%20why%3F&In-Reply-To=%3C31020537.post%40talk.nabble.com%3E"
       TITLE="[rabbitmq-discuss] Losing messages, why?">vertolet666 at yandex.ru
       </A><BR>
    <I>Sat Feb 26 15:57:05 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011432.html">[rabbitmq-discuss] Losing messages, why?
</A></li>
        <LI>Next message: <A HREF="011486.html">[rabbitmq-discuss] Losing messages, why?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11489">[ date ]</a>
              <a href="thread.html#11489">[ thread ]</a>
              <a href="subject.html#11489">[ subject ]</a>
              <a href="author.html#11489">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Matthias Radestock-3 wrote:
&gt;<i> 
</I>&gt;<i> Could you post the output of 
</I>&gt;<i> list_{exchanges,queues,bindings,consumers,connections,channels} *when 
</I>&gt;<i> the system is in that state*, i.e. when Client3 has stopped receiving 
</I>&gt;<i> messages from board-queue-2?
</I>&gt;<i> 
</I>I've run into the issue today. As I previously said, several workers are
running on the server side and one of them (or two, or three....) stops to
receive messages. I don't know how many workers don't receive messages, but
not all of them because some messages are received.
Each worker declares its own queue with the keyword &quot;daemon&quot;.

Here is the output for the those queues.

All the exchanges, at first:
# rabbitmqctl list_exchanges
Listing exchanges ...
amq.direct      direct
amq.topic       topic
players.fanout  fanout
board.direct    direct
amq.rabbitmq.log        topic
chess.direct    direct
amq.fanout      fanout
control.direct  direct
boardchat.direct        direct
amq.headers     headers
player.direct   direct
        direct
amq.match       headers
...done.


# rabbitmqctl list_queues name messages messages_ready
messages_unacknowledged |grep daemon
daemon-8698-1298682602  0       0       0
daemon-8711-1298682602  0       0       0
daemon-8700-1298682602  0       0       0
daemon-8699-1298682602  0       0       0
daemon-8704-1298682602  0       0       0
daemon-8710-1298682602  0       0       0
daemon-8706-1298682602  0       0       0
daemon-8702-1298682602  0       0       0
daemon-8701-1298682602  0       0       0
daemon-8707-1298682602  0       0       0


# rabbitmqctl list_bindings |grep daemon
        exchange        daemon-8698-1298682602  queue  
daemon-8698-1298682602  []
        exchange        daemon-8699-1298682602  queue  
daemon-8699-1298682602  []
        exchange        daemon-8700-1298682602  queue  
daemon-8700-1298682602  []
        exchange        daemon-8701-1298682602  queue  
daemon-8701-1298682602  []
        exchange        daemon-8702-1298682602  queue  
daemon-8702-1298682602  []
        exchange        daemon-8704-1298682602  queue  
daemon-8704-1298682602  []
        exchange        daemon-8706-1298682602  queue  
daemon-8706-1298682602  []
        exchange        daemon-8707-1298682602  queue  
daemon-8707-1298682602  []
        exchange        daemon-8710-1298682602  queue  
daemon-8710-1298682602  []
        exchange        daemon-8711-1298682602  queue  
daemon-8711-1298682602  []
chess.direct    exchange        daemon-8698-1298682602  queue   chess1  []
chess.direct    exchange        daemon-8699-1298682602  queue   chess2  []
chess.direct    exchange        daemon-8700-1298682602  queue   chess3  []
chess.direct    exchange        daemon-8701-1298682602  queue   chess4  []
chess.direct    exchange        daemon-8702-1298682602  queue   chess5  []
chess.direct    exchange        daemon-8704-1298682602  queue   chess6  []
control.direct  exchange        daemon-8706-1298682602  queue   control1       
[]
control.direct  exchange        daemon-8707-1298682602  queue   control2       
[]
control.direct  exchange        daemon-8710-1298682602  queue   control3       
[]
control.direct  exchange        daemon-8711-1298682602  queue   control4       
[]


# rabbitmqctl list_consumers |grep daemon
daemon-8698-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16847.98</A>&gt; 
amq.ctag-mGzA8h3PQX9SYqfHsTbFoQ==       false
daemon-8711-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16879.98</A>&gt; 
amq.ctag-LeWFV1gcOLF4iB4i1xldiw==       false
daemon-8700-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16855.98</A>&gt; 
amq.ctag-ab4d0pzQk+ETs/8wff8l2A==       false
daemon-8699-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16843.98</A>&gt; 
amq.ctag-IUAIdFG0yFgZTHfpqhCflQ==       false
daemon-8704-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16863.98</A>&gt; 
amq.ctag-6GHV7K92ftrn52KP0cyCoQ==       false
daemon-8710-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16875.98</A>&gt; 
amq.ctag-6OEY3JjW/BRUxGSLb6Q/4w==       false
daemon-8706-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16867.98</A>&gt; 
amq.ctag-4Y7OlCKjwehWUOUbVqzuSg==       false
daemon-8702-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16859.98</A>&gt; 
amq.ctag-GdhhfvkdAE+5y71Zvw5TDw==       false
daemon-8701-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16850.98</A>&gt; 
amq.ctag-ydVIFHR1x9SmRnbIFKOFtA==       false
daemon-8707-1298682602  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16871.98</A>&gt; 
amq.ctag-kIUon3Gm/FfbOQItUtjo8Q==       false


# rabbitmqctl list_connections | grep 127.0.0.1
guest   127.0.0.1       52880   running
guest   127.0.0.1       40492   running
guest   127.0.0.1       41502   running
guest   127.0.0.1       58173   running
guest   127.0.0.1       58174   running
guest   127.0.0.1       44878   running
guest   127.0.0.1       58176   running
guest   127.0.0.1       58178   running
guest   127.0.0.1       58180   running
guest   127.0.0.1       58182   running
guest   127.0.0.1       58184   running
guest   127.0.0.1       58186   running
guest   127.0.0.1       58188   running
guest   127.0.0.1       58190   running


# rabbitmqctl list_channels
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16847.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16879.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16855.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16843.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16863.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16875.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16867.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16859.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16850.98</A>&gt;  guest   false   1       0
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at chessvegas.3.16871.98</A>&gt;  guest   false   1       0

Thank you for support.

-- 
View this message in context: <A HREF="http://old.nabble.com/Losing-messages%2C-why--tp30958766p31020537.html">http://old.nabble.com/Losing-messages%2C-why--tp30958766p31020537.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011432.html">[rabbitmq-discuss] Losing messages, why?
</A></li>
	<LI>Next message: <A HREF="011486.html">[rabbitmq-discuss] Losing messages, why?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11489">[ date ]</a>
              <a href="thread.html#11489">[ thread ]</a>
              <a href="subject.html#11489">[ subject ]</a>
              <a href="author.html#11489">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
