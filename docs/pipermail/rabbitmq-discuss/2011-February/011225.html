<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] queueDeclarePassive Shutting down the channel
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queueDeclarePassive%20Shutting%20down%20the%20channel&In-Reply-To=%3C20110213014943.GA2358%40dakota%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011224.html">
   <LINK REL="Next"  HREF="011229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] queueDeclarePassive Shutting down the channel</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20queueDeclarePassive%20Shutting%20down%20the%20channel&In-Reply-To=%3C20110213014943.GA2358%40dakota%3E"
       TITLE="[rabbitmq-discuss] queueDeclarePassive Shutting down the channel">alexandru at rabbitmq.com
       </A><BR>
    <I>Sun Feb 13 01:49:43 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011224.html">[rabbitmq-discuss] queueDeclarePassive Shutting down the channel
</A></li>
        <LI>Next message: <A HREF="011229.html">[rabbitmq-discuss] Custom authentication and authorization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11225">[ date ]</a>
              <a href="thread.html#11225">[ thread ]</a>
              <a href="subject.html#11225">[ subject ]</a>
              <a href="author.html#11225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Max,

Attempting to declare a non existent queue (even if you do so passively)
causes a not-found exception, which is a soft-error that takes down the
channel.

If you really want to use *declarePassive, you should wrap it in a
try...catch and handle the exception somehow.

As a rule, you shouldn't need to use *declarePassive.  The *declare
operations are idempotent, so you'd normally just declare the resource
before using it (i.e. open channel, declare the queue, publish to it,
close channel).

Cheers,
Alex

On Sat, Feb 12, 2011 at 08:30:48PM -0500, Max Bridgewater wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm using the Java client and I notice that  queueDeclarePassive()
</I>&gt;<i> shuts down the channel if no queue exists with the specified name. I'm
</I>&gt;<i> not sure if I'm doing something wrong or this is how this is supposed
</I>&gt;<i> to behave. Here is my code; please advise.
</I>&gt;<i> 
</I>&gt;<i> public class QueuePassiveDeclare {
</I>&gt;<i> 	
</I>&gt;<i> 	public static void main(String[] argv) throws Exception {
</I>&gt;<i> 		String host = &quot;localhost&quot;;
</I>&gt;<i> 		String vhost = &quot;MyVHost&quot;;
</I>&gt;<i> 		String user = &quot;guest&quot;;
</I>&gt;<i> 		String name = &quot;myQueue&quot;;
</I>&gt;<i> 
</I>&gt;<i> 		ConnectionFactory factory = new ConnectionFactory();
</I>&gt;<i> 		factory.setHost(host);
</I>&gt;<i> 		factory.setPassword(user);
</I>&gt;<i> 		factory.setUsername(user);
</I>&gt;<i> 		factory.setVirtualHost(vhost);
</I>&gt;<i> 		Connection conn = factory.newConnection();
</I>&gt;<i> 		Channel chan = conn.createChannel();
</I>&gt;<i> 		chan.queueDeclarePassive(name);
</I>&gt;<i> 
</I>&gt;<i> 	}
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Max.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I></PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011224.html">[rabbitmq-discuss] queueDeclarePassive Shutting down the channel
</A></li>
	<LI>Next message: <A HREF="011229.html">[rabbitmq-discuss] Custom authentication and authorization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11225">[ date ]</a>
              <a href="thread.html#11225">[ thread ]</a>
              <a href="subject.html#11225">[ subject ]</a>
              <a href="author.html#11225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
