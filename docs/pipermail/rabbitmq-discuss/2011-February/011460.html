<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Help with my priority queue design
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Help%20with%20my%20priority%20queue%20design&In-Reply-To=%3C4D668BF6.8060208%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011415.html">
   <LINK REL="Next"  HREF="011420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Help with my priority queue design</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Help%20with%20my%20priority%20queue%20design&In-Reply-To=%3C4D668BF6.8060208%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Help with my priority queue design">emile at rabbitmq.com
       </A><BR>
    <I>Thu Feb 24 16:48:54 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011415.html">[rabbitmq-discuss] Help with my priority queue design
</A></li>
        <LI>Next message: <A HREF="011420.html">[rabbitmq-discuss] Cluster Disk Node Functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11460">[ date ]</a>
              <a href="thread.html#11460">[ thread ]</a>
              <a href="subject.html#11460">[ subject ]</a>
              <a href="author.html#11460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi yoav,

On 22/02/11 20:54, yoav glazner wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I wanted to show my design for a priority based task queue and get
</I>&gt;<i> some insight from experts.
</I>&gt;<i>
</I>&gt;<i> The client create a queue named: &quot;some_tasks_to_work_on2&quot; and put his
</I>&gt;<i>  tasks there, then it puts the following message in a queue named
</I>&gt;<i> &quot;batch_states&quot;: [{batch=&quot;some_tasks_to_work_on2&quot;, priority=3}] now
</I>&gt;<i> each worker can take the status message and get tasks from the
</I>&gt;<i> batch. if a few batches are in the status message then the worker
</I>&gt;<i> check the queue by the priority order.
</I>&gt;<i>
</I>&gt;<i> a worker should also return the status message after reading it so
</I>&gt;<i> other workers can also read it. now this is needed because i want
</I>&gt;<i> workers to be able to wake up any time and get the latest status. In
</I>&gt;<i> this approch I can add new batches on the fly and also change
</I>&gt;<i> priorities.
</I>&gt;<i>
</I>&gt;<i> Do you think there is a better way to do it?
</I>
The usual way of implementing priorities is to use separate queues for 
each priority. So if you need two priority levels then declare queues Q1 
and Q2. Route messages to those queues based on priority and have 
clients consume from queues in that order. So Q2 messages won't be 
consumed unless Q1 is empty.

You might find this simpler than using indirection, which is what you 
appear to be doing.



Emile

</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011415.html">[rabbitmq-discuss] Help with my priority queue design
</A></li>
	<LI>Next message: <A HREF="011420.html">[rabbitmq-discuss] Cluster Disk Node Functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11460">[ date ]</a>
              <a href="thread.html#11460">[ thread ]</a>
              <a href="subject.html#11460">[ subject ]</a>
              <a href="author.html#11460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
