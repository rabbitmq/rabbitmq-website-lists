<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] 2.3.1 WCF Binding not honouring virtual host,	username or password
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202.3.1%20WCF%20Binding%20not%20honouring%20virtual%20host%2C%0A%09username%20or%20password&In-Reply-To=%3CAANLkTin-ruDfqzXdWP5KwUOyfzuP3o5xTO%3DVcVUoPoTq%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011500.html">
   <LINK REL="Next"  HREF="011495.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] 2.3.1 WCF Binding not honouring virtual host,	username or password</H1>
    <B>Damien Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%202.3.1%20WCF%20Binding%20not%20honouring%20virtual%20host%2C%0A%09username%20or%20password&In-Reply-To=%3CAANLkTin-ruDfqzXdWP5KwUOyfzuP3o5xTO%3DVcVUoPoTq%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] 2.3.1 WCF Binding not honouring virtual host,	username or password">damien.jones at aclaro.com
       </A><BR>
    <I>Fri Feb 25 16:26:10 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011500.html">[rabbitmq-discuss] embedded rabbitmq-c client + openssl/openvpn
</A></li>
        <LI>Next message: <A HREF="011495.html">[rabbitmq-discuss] Message properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11481">[ date ]</a>
              <a href="thread.html#11481">[ thread ]</a>
              <a href="subject.html#11481">[ subject ]</a>
              <a href="author.html#11481">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I configured the RabbitMQ server with a new user and a virtual host, and set
up my WCF bindings with the appropriate information.
Regardless my connections were always being set up for the default user and
vhost.
Debugging the RabbitMQ.ServiceModel it turned out that the ConnectionFactory
being used was missing the configuration settings, which I traced to the
private constructor of RabbitMQTransportBindingElement:

        private
RabbitMQTransportBindingElement(RabbitMQTransportBindingElement other)
            : this()
        {
            Broker = other.Broker;
            BrokerProtocol = other.BrokerProtocol;
        }

and resolved by adding initialization of the m_connectionFactory member:

        private
RabbitMQTransportBindingElement(RabbitMQTransportBindingElement other)
            : this()
        {
            m_connectionFactory.Password = other.ConnectionFactory.Password;
            m_connectionFactory.UserName = other.ConnectionFactory.UserName;
            m_connectionFactory.VirtualHost =
other.ConnectionFactory.VirtualHost;

            Broker = other.Broker;
            BrokerProtocol = other.BrokerProtocol;
        }

Is this a reasonable thing to do?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110225/d6f45d6a/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110225/d6f45d6a/attachment.htm</A>&gt;
</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011500.html">[rabbitmq-discuss] embedded rabbitmq-c client + openssl/openvpn
</A></li>
	<LI>Next message: <A HREF="011495.html">[rabbitmq-discuss] Message properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11481">[ date ]</a>
              <a href="thread.html#11481">[ thread ]</a>
              <a href="subject.html#11481">[ subject ]</a>
              <a href="author.html#11481">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
