<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Blocked connections on rabbitmq 2.2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Blocked%20connections%20on%20rabbitmq%202.2.0&In-Reply-To=%3C5064478c-55fc-4312-b847-925a5fb7b8ec%40d23g2000prj.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011062.html">
   <LINK REL="Next"  HREF="011064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Blocked connections on rabbitmq 2.2.0</H1>
    <B>Ivan Sanchez</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Blocked%20connections%20on%20rabbitmq%202.2.0&In-Reply-To=%3C5064478c-55fc-4312-b847-925a5fb7b8ec%40d23g2000prj.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Blocked connections on rabbitmq 2.2.0">s4nchez at gmail.com
       </A><BR>
    <I>Thu Feb  3 20:36:18 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011062.html">[rabbitmq-discuss] RabbitMQ 2.3.1 Release
</A></li>
        <LI>Next message: <A HREF="011064.html">[rabbitmq-discuss] Blocked connections on rabbitmq 2.2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11054">[ date ]</a>
              <a href="thread.html#11054">[ thread ]</a>
              <a href="subject.html#11054">[ subject ]</a>
              <a href="author.html#11054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
  Hi all,

  Yesterday I've noticed some very strange behaviour in one of our
rabbitmq cluster nodes. Its queues became unresponsive and running
&quot;rabbitmqctl list_connections&quot; was returning that all the connections
were either &quot;blocking&quot; or &quot;blocked&quot;. The documentation doesn't mention
these states. Does anyone know what they mean?

  To give a bit of context: we noticed this problem when good portion
of our clients stopped receiving messages. Looking at all the servers
we found one that was using too much CPU and also swapping to disk.
This node was the only presenting this behaviour, but it seemed like
this problem compromised the whole cluster. We haven't touched these
servers for ages (they are dedicated to rabbitmq) and the system load
was completely under normal levels. We use simple DNS round-robin for
clients to connect to the cluster and none of our messages are
persistent, so seeing swapping really scared me.

  After restarting the whole cluster a few times the problem
persisted, always on the same server. We even tried force_reset in all
nodes, but that also didn't help. Things just went back to normal
after we removed the problematic node from the cluster. Now my task if
figure out what can be the problem.

  Did anyone have experience with this kind of behaviour? I'm even
considering hardware problem, but so far didn't find anything
indicating that was the case.

  Any help is welcome.

Thank you,
Ivan
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011062.html">[rabbitmq-discuss] RabbitMQ 2.3.1 Release
</A></li>
	<LI>Next message: <A HREF="011064.html">[rabbitmq-discuss] Blocked connections on rabbitmq 2.2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11054">[ date ]</a>
              <a href="thread.html#11054">[ thread ]</a>
              <a href="subject.html#11054">[ subject ]</a>
              <a href="author.html#11054">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
