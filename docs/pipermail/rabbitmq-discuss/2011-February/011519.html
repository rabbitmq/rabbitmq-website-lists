<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Choosing SASL authentication mechanism
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Choosing%20SASL%20authentication%20mechanism&In-Reply-To=%3C4D6BD377.3030206%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011517.html">
   <LINK REL="Next"  HREF="011525.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Choosing SASL authentication mechanism</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Choosing%20SASL%20authentication%20mechanism&In-Reply-To=%3C4D6BD377.3030206%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Choosing SASL authentication mechanism">simon at rabbitmq.com
       </A><BR>
    <I>Mon Feb 28 16:55:19 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011517.html">[rabbitmq-discuss] Choosing SASL authentication mechanism
</A></li>
        <LI>Next message: <A HREF="011525.html">[rabbitmq-discuss] Queue with auto_delete=True not getting deleted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11519">[ date ]</a>
              <a href="thread.html#11519">[ thread ]</a>
              <a href="subject.html#11519">[ subject ]</a>
              <a href="author.html#11519">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/02/11 16:25, Jiri Krutil wrote:
&gt;<i> We are connecting to both brokers using the same Java client (version
</I>&gt;<i> 2.3.1). The Java client uses the default SASL configuration.
</I>&gt;<i>
</I>&gt;<i> When trying to connect, one broker uses the EXTERNAL mechanism as
</I>&gt;<i> expected. But the other broker uses PLAIN authentication (which fails on
</I>&gt;<i> invalid user/password).
</I>
Huh. that is weird.

&gt;<i> When we override the default SaslConfig on the client side with a config
</I>&gt;<i> that only has EXTERNAL in the mechanisms list, then both brokers use
</I>&gt;<i> EXTERNAL and things work fine.
</I>&gt;<i>
</I>&gt;<i> So my questions are:
</I>&gt;<i> - How does the broker choose the SASL mechanism to be used?
</I>
The broker doesn't choose. The broker offers a list of options to the 
client, and the client chooses one.

In the Java client by default we just invoke 
javax.security.sasl.Sasl.getSaslClient(String[]), which effectively 
leaves the decision up to Sun. The Javadoc here:

<A HREF="http://download.oracle.com/javase/6/docs/api/javax/security/sasl/Sasl.html#createSaslClient(java.lang.String[],">http://download.oracle.com/javase/6/docs/api/javax/security/sasl/Sasl.html#createSaslClient(java.lang.String[],</A> 
java.lang.String, java.lang.String, java.lang.String, java.util.Map, 
javax.security.auth.callback.CallbackHandler)

purports to tell you how the selection process works, although it's 
pretty vague - i.e. it &quot;uses the JCA Security Provider Framework&quot;.

Having said that, if the brokers are offering the same mechanisms then 
the JCA should at least make a consistent decision. I would hope. But 
maybe not. In theory the order of the mechanisms as reported by the 
broker should not matter, but maybe to JCA it does.

 From your experience I'm starting to wonder if the Java client has the 
right design. All our other clients contain their own SASL 
implementation and you just pick which mechanism you want to use. Maybe 
the Java client should be more like that too.

 &gt; - What installation or configuration mistakes could affect this decision?

If it's the same client both times, I have no idea. If it were different 
clients I would suggest different JDK versions or something similar.

Cheers, Simon

-- 
Simon MacMullen
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011517.html">[rabbitmq-discuss] Choosing SASL authentication mechanism
</A></li>
	<LI>Next message: <A HREF="011525.html">[rabbitmq-discuss] Queue with auto_delete=True not getting deleted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11519">[ date ]</a>
              <a href="thread.html#11519">[ thread ]</a>
              <a href="subject.html#11519">[ subject ]</a>
              <a href="author.html#11519">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
