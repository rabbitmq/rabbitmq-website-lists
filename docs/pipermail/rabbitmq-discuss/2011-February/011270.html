<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can I get your input for a RabbitMQ cookbook?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20I%20get%20your%20input%20for%20a%20RabbitMQ%20cookbook%3F&In-Reply-To=%3CAANLkTik4nDZ3fsyg%2B%3D3vPsg4zV%3DByzWGRBfqLrb_xt5d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011255.html">
   <LINK REL="Next"  HREF="011240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can I get your input for a RabbitMQ cookbook?</H1>
    <B>Bill Moseley</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%20I%20get%20your%20input%20for%20a%20RabbitMQ%20cookbook%3F&In-Reply-To=%3CAANLkTik4nDZ3fsyg%2B%3D3vPsg4zV%3DByzWGRBfqLrb_xt5d%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Can I get your input for a RabbitMQ cookbook?">moseley at hank.org
       </A><BR>
    <I>Tue Feb 15 15:31:16 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011255.html">[rabbitmq-discuss] Can I get your input for a RabbitMQ cookbook?
</A></li>
        <LI>Next message: <A HREF="011240.html">[rabbitmq-discuss] Can I get your input for a RabbitMQ cookbook?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11270">[ date ]</a>
              <a href="thread.html#11270">[ thread ]</a>
              <a href="subject.html#11270">[ subject ]</a>
              <a href="author.html#11270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Feb 14, 2011 at 7:12 AM, Jonathan Brisbin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jbrisbin at vmware.com</A>&gt;wrote:

&gt;<i> Would anyone like to express an interest in a particular topic for a
</I>&gt;<i> potential RabbitMQ cookbook project I might be working on? We're
</I>&gt;<i> trying to come up with an outline and I want to make sure it's
</I>&gt;<i> targeted to what people actually want to read about, so if you've got
</I>&gt;<i> an idea about some topic you'd like to see covered, please let me know
</I>&gt;<i> off list.
</I>&gt;<i>
</I>&gt;<i> Some of the topics will be:
</I>&gt;<i>
</I>&gt;<i> Interoperability (STOMP, Celery, etc...)
</I>&gt;<i> Performance tuning
</I>&gt;<i> Plugin authoring
</I>&gt;<i> Configuration
</I>&gt;<i> [Put your topic here]
</I>&gt;<i>
</I>&gt;<i>
</I>These are a few of the topics that have come up at my company while
evaluating RabbitMQ -- some of which I've asked about on this list.  I'm not
sure if all would fit into &quot;cookbook&quot; type of examples.  Most are about how
to operate RabbitMQ in a production environment.

   - High Availability:  How to set up RabbitMQ such that a server failure
   will not disrupt service.
   For example, HAProxy or hardware load balancer.

   - Client connection management: Ensuring that clients gracefully handle
   connection failures.

   - Message durability: Scenarios when/why queue durability is appropriate.

   - Message replication:  When/why/how to replicate messages across brokers
   (e.g. Pacemaker example).
   And if messages are replicated how to prevent multiple consumers from
   processing the same message.

   - Clustering: As others have noted, how to scale RabbitMQ.
   How to add new servers into an active cluster and how to remove a server
   (and dealing with queues on the server that is removed).


As you might note, uptime is important to our company and those are all
about keeping RabbitMQ up and available. Oddly, at our company the message
durability/replication issue consumed the most discussion time -- that is,
making sure that a message produced is always processed[1].  (I think a
better/cleaner approach is to design with message loss in mind and when
needed, producers will re-send a message.)


   - Topic routing: This is covered in the tutorial, but it would be great
   to see some cookbook examples that demonstrate a few real-world scenarios.
   The power of topic routing was a feature that was difficult for some to
   grasp at our company.  Aggregating logs and tracking specific log types
   (e.g. error watchdog) could be one example.

   - Debugging: When things go wrong (and they always do) steps to figure
   out why RabbitMQ is not working, what happened, and how to fix.
   For example: figuring out if Mnesia DB is corrupt and need to remove.
    This is all about the 2am IT on-call person trying to solve a problem by
   following a &quot;play book&quot; of steps to get things running again.

   - Management of consumers: monitoring queue sizes, allocating resources
   to workers, tools available to monitor consumers across multiple machines,
   threaded consumers vs. forking model.

   - RPC in a web environment: This may be outside the scope for RabbitMQ,
   but our use cases have involved the need for RPC style of calls, but in a
   web-environment this is often meant polling by the web client (e.g. via
   AJAX) because it is not desirable to have a web process wait on a RPC
   response.  But, in a polling web environment you cannot rely on the message
   ever being consumed.  What I've done is passed the unique return-queue name
   in the AJAX request and used auto_delete and x-expires on the temporary
   queue to have it removed if the web client fails to fetch the response.
   I'm not convinced that is the best approach.




[1] Message durability was considered so important by some at our company
that we now send all messages to a single consumer that stores them in
Postgresql with Slony replication before being passed onto consumers.  I
would not recommend that approach -- and indeed with experience we've seen
messages that are that critical need to be tracked by the application's
database anyway so making the messages durable adds little benefit.

-- 
Bill Moseley
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">moseley at hank.org</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110215/72c5216d/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110215/72c5216d/attachment.htm</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011255.html">[rabbitmq-discuss] Can I get your input for a RabbitMQ cookbook?
</A></li>
	<LI>Next message: <A HREF="011240.html">[rabbitmq-discuss] Can I get your input for a RabbitMQ cookbook?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11270">[ date ]</a>
              <a href="thread.html#11270">[ thread ]</a>
              <a href="subject.html#11270">[ subject ]</a>
              <a href="author.html#11270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
