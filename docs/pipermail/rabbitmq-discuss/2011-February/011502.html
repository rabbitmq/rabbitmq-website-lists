<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] There are no messages in the msg_store_persistent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20There%20are%20no%20messages%20in%20the%0A%20msg_store_persistent&In-Reply-To=%3C20110228102705.GA32701%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011497.html">
   <LINK REL="Next"  HREF="011498.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] There are no messages in the msg_store_persistent</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20There%20are%20no%20messages%20in%20the%0A%20msg_store_persistent&In-Reply-To=%3C20110228102705.GA32701%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] There are no messages in the msg_store_persistent">matthew at rabbitmq.com
       </A><BR>
    <I>Mon Feb 28 10:27:05 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011497.html">[rabbitmq-discuss] There are no messages in the msg_store_persistent
</A></li>
        <LI>Next message: <A HREF="011498.html">[rabbitmq-discuss] Message properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11502">[ date ]</a>
              <a href="thread.html#11502">[ thread ]</a>
              <a href="subject.html#11502">[ subject ]</a>
              <a href="author.html#11502">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Feb 27, 2011 at 03:37:34PM -0800, Nickolay VInogradov wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> Server 2.3.1.
</I>&gt;<i> Client - Perl, Net::RabbitMQ.
</I>&gt;<i> 
</I>&gt;<i> # rabbitmqctl list_queues
</I>&gt;<i> Listing queues ...
</I>&gt;<i> smtp_feed       0
</I>&gt;<i> mail_feed       206034
</I>&gt;<i> lenta_feed      0
</I>&gt;<i> ...done.
</I>&gt;<i> 
</I>&gt;<i> But there are no messages in the persistent directory:
</I>&gt;<i> # ls -l /var/lib/rabbitmq/mnesia/rabbit\@memcached2/
</I>&gt;<i> msg_store_persistent/
</I>&gt;<i> total 0
</I>&gt;<i> -rw-r--r-- 1 root root 0 Feb 22 23:41 0.rdq
</I>&gt;<i> 
</I>&gt;<i> # du -hs /var/lib/rabbitmq/mnesia/rabbit\@memcached2/
</I>&gt;<i> 120K    /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at memcached2</A>/
</I>&gt;<i> 
</I>&gt;<i> What happens with messages? Where they are stored???
</I>
They _may_ be written to disk if you publish with delivery_mode = 2.
Even if they are published as such, there may be a time delay between
them being published and actually ending up on disk. If you safely shut
down rabbit (i.e. don't kill it hard) then you should see the messages
appear on disk if they have been published correctly.

Alternatively, if you use transactions or publisher confirms then you
should get confirmation back from the broker once they have been safely
written to disk.

Best wishes,

Matthew
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011497.html">[rabbitmq-discuss] There are no messages in the msg_store_persistent
</A></li>
	<LI>Next message: <A HREF="011498.html">[rabbitmq-discuss] Message properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11502">[ date ]</a>
              <a href="thread.html#11502">[ thread ]</a>
              <a href="subject.html#11502">[ subject ]</a>
              <a href="author.html#11502">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
