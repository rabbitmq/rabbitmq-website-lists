<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-c and amqp_send_frame_to
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-c%20and%20amqp_send_frame_to&In-Reply-To=%3Cyrv4cpqqscjaf.fsf%40dwragg.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011278.html">
   <LINK REL="Next"  HREF="011279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-c and amqp_send_frame_to</H1>
    <B>David Wragg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq-c%20and%20amqp_send_frame_to&In-Reply-To=%3Cyrv4cpqqscjaf.fsf%40dwragg.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq-c and amqp_send_frame_to">david at rabbitmq.com
       </A><BR>
    <I>Wed Feb 16 11:26:16 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011278.html">[rabbitmq-discuss] rabbitmq-c and amqp_send_frame_to
</A></li>
        <LI>Next message: <A HREF="011279.html">[rabbitmq-discuss] looking for a javascript library recommendation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11282">[ date ]</a>
              <a href="thread.html#11282">[ thread ]</a>
              <a href="subject.html#11282">[ subject ]</a>
              <a href="author.html#11282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Mike,

mike castleman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">m at mlcastle.net</A>&gt; writes:
&gt;<i> Is there any chance of amqp_send_frame_to() coming back? Or is there any
</I>&gt;<i> other suggested way to make librabbitmq construct a frame without
</I>&gt;<i> immediately sending it onto the socket?
</I>&gt;<i>
</I>&gt;<i> It is possible that for our application the frames are generally going
</I>&gt;<i> to be small, so we might only call amqp_send_frame() when the socket is
</I>&gt;<i> ready for writing and hope that the send() call inside there won't ever
</I>&gt;<i> block (or return EWOULDBLOCK). But this seems fragile, to say the
</I>&gt;<i> least.
</I>
rabbitmq-c development is focused on its use as a self-contained AMQP
client. We try to preserve the API functions aimed at typical AMQP
client applications, rather than ones that seem more like librabbitmq
internals (as this makes evolving the library difficult - librabbitmq
exposes way too much of its internals, IMHO).

(There's a trade-off in library design, particularly for C: One option
is that library can expose clearly designated public APIs.  The upside
is that further development of that library is easy - you simply have to
make sure that you preserve the APIs an their behaviour.  The downside
is that the library can only really support the use cases envisaged when
those APIs were designed.  The other option is to expose more or less
everything, and allow applications to use the library as a &quot;toolbox&quot;.
The upside here is that is it probably possible to make the library
serve a wide range of use cases, as applications can borrow whatever
functionality is relevant and ignore the rest.  The downside is that
this tends to freeze the implementation, and would make it difficult to
provide good documentation.)

Perhaps the appropriate thing is to fork a version of rabbitmq-c that
meets your needs on github?

With that said, if we received a nice patch that restored
amqp_send_from_to (and we'd need the author to sign our contributor
agreement), I expect we would incoporate that.  But I can't promise that
we wouldn't remove the function again later on.

As I may have mentioned before, it is our goal to release a C client
that does support non-blocking support nicely at some point in the
future.  But this is likely to be done by having an API specifically
designed for that use case.

David

-- 
David Wragg
Staff Engineer, RabbitMQ
SpringSource, a division of VMware
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011278.html">[rabbitmq-discuss] rabbitmq-c and amqp_send_frame_to
</A></li>
	<LI>Next message: <A HREF="011279.html">[rabbitmq-discuss] looking for a javascript library recommendation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11282">[ date ]</a>
              <a href="thread.html#11282">[ thread ]</a>
              <a href="subject.html#11282">[ subject ]</a>
              <a href="author.html#11282">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
