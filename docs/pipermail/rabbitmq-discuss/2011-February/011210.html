<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Java%20Client%202.3.1%20on%20Android&In-Reply-To=%3C4D5513B9.1010202%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011147.html">
   <LINK REL="Next"  HREF="011211.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Java%20Client%202.3.1%20on%20Android&In-Reply-To=%3C4D5513B9.1010202%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android">simon at rabbitmq.com
       </A><BR>
    <I>Fri Feb 11 10:47:21 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="011147.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
        <LI>Next message: <A HREF="011211.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11210">[ date ]</a>
              <a href="thread.html#11210">[ thread ]</a>
              <a href="subject.html#11210">[ subject ]</a>
              <a href="author.html#11210">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Denis.

On 08/02/11 12:38, Denis Conan wrote:
&gt;<i> my objective is to run the Java Client on Android.
</I>&gt;<i>
</I>&gt;<i> Do not hesitate to tell me if I started off with the wrong idea.
</I>
That's... not unreasonable. We don't guarantee that the Java client will 
run on Android (in particular we don't test it).

&gt;<i> I didn't see any specific release for Android. So, I took the Java
</I>&gt;<i> Client for J2SE. I was able to adapt the previous version 2.2.0 of the
</I>&gt;<i> Java Client for running on Android: removal of packages json and
</I>&gt;<i> jsonrpc, and correct a call to super in the constructor of the class
</I>&gt;<i> PossibleAuthenticationFailureException.
</I>
Ironically I think that might be fixed in 2.3.1 (it was also 
incompatible with Java 1.5).

&gt;<i> As I see, the new version 2.3.1 now has authentication with SASL.
</I>&gt;<i> Unfortunately, there is no package javax.security.sasl in Android JRE.
</I>&gt;<i> So, I tried to manage this lack by replacing the classes of this package
</I>&gt;<i> by the ones in aSMACK (<A HREF="http://code.google.com/p/asmack/">http://code.google.com/p/asmack/</A>). The
</I>&gt;<i> compilation is ok, but the execution throws the following exception.
</I>
...but it would be a pity if the introduction of more SASL mechanisms 
were to make it unusable on Android.

&gt;<i> java.io.IOException: No compatible authentication mechanism found -
</I>&gt;<i> server offered [PLAIN AMQPLAIN]
</I>
So whatever SASL implementation you've cooked up somehow does not 
support PLAIN (I would not expect it to support AMQPLAIN).

This seems odd, as it looks like Smack contains support for PLAIN:

<A HREF="http://code.google.com/p/asmack/source/browse/src/custom/de/measite/smack/SaslClientFactory.java">http://code.google.com/p/asmack/source/browse/src/custom/de/measite/smack/SaslClientFactory.java</A>

If you can't get this working, then you can of course stick with the 
2.2.0 client and an upgraded server. But being stuck with an old client 
isn't fun, so I'll have a think about how easy it would be to patch the 
old homebrew SASL back in for Android.

Cheers, Simon

-- 
Simon MacMullen
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011147.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
	<LI>Next message: <A HREF="011211.html">[rabbitmq-discuss] RabbitMQ Java Client 2.3.1 on Android
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11210">[ date ]</a>
              <a href="thread.html#11210">[ thread ]</a>
              <a href="subject.html#11210">[ subject ]</a>
              <a href="author.html#11210">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
