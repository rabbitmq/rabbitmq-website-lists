<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage&In-Reply-To=%3C20110523144913.246320%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012954.html">
   <LINK REL="Next"  HREF="012977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory usage</H1>
    <B>Hagbard Celine</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage&In-Reply-To=%3C20110523144913.246320%40gmx.net%3E"
       TITLE="[rabbitmq-discuss] Memory usage">Hagbard at gmx.de
       </A><BR>
    <I>Mon May 23 15:49:13 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012954.html">[rabbitmq-discuss] Memory usage
</A></li>
        <LI>Next message: <A HREF="012977.html">[rabbitmq-discuss] Memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12960">[ date ]</a>
              <a href="thread.html#12960">[ thread ]</a>
              <a href="subject.html#12960">[ subject ]</a>
              <a href="author.html#12960">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for your answer and sorry for the questions - i just want to know if RabbitMQ is a possible solution for my problem.

--

Does it mean that RabbitMQ will nerver hit the watermark if the producer slow enough (and the speed of my producers depends on the amount of memory i use)?

In my tests (with no consumers) the memory usage grows constantly with the amount of messages. Sometimes the memory usage decreased but overall it grows until the watermark. Are the producers still too fast for RabbitMQ (and my hardware)?

To solve my problem i have to guarantee that all messages will be queued and not blocked by RabbitMQ.

Thanks a lot
Hagbard

&gt;<i> Hagbard,
</I>&gt;<i> 
</I>&gt;<i> Since 2.x, RabbitMQ will no longer allow the Erlang process to run out 
</I>&gt;<i> of memory and stop due to fast producers and slow consumers.
</I>&gt;<i> 
</I>&gt;<i> If you have a fast producer running constantly, accompanied by a slow 
</I>&gt;<i> consumer then the number of queued messages will grow. To prevent this 
</I>&gt;<i> from causing out of memory problems, Rabbit will throttle the producer 
</I>&gt;<i> once the memory high watermark is hit.
</I>&gt;<i> 
</I>&gt;<i> The throttling works by simply blocking the producer from sending any 
</I>&gt;<i> more data over the TCP socket. Once memory drops below the high 
</I>&gt;<i> watermark, due to the consumer catching up or messages being flushed to 
</I>&gt;<i> disk, the producer can send data again.
</I>&gt;<i> 
</I>&gt;<i> Note that your producer might bounce off the watermark frequently if it 
</I>&gt;<i> just keeps publishing without let up.
</I>&gt;<i> 
</I>&gt;<i> Rob
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Hagbard at gmx.de</A> wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; im new to RabbitMQ and i have a question about the memory usage of
</I>&gt;<i> RabbitMQ. I read that since RabbitMQ 2.x i don't need to care about fast
</I>&gt;<i> producers and slow consumers and so don't need to care about the amount of
</I>&gt;<i> messages in a queue and memory usage. After a test yesterday with 2GB memory and
</I>&gt;<i> 4M messages in a queue (no consumer) RabbitMQ reached high memory watermark
</I>&gt;<i> and stopped. Can somebody explain that behaviour?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks a lot
</I>&gt;<i> &gt; Hagbard
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-- 
NEU: FreePhone - kostenlos mobil telefonieren!			
Jetzt informieren: <A HREF="http://www.gmx.net/de/go/freephone">http://www.gmx.net/de/go/freephone</A>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012954.html">[rabbitmq-discuss] Memory usage
</A></li>
	<LI>Next message: <A HREF="012977.html">[rabbitmq-discuss] Memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12960">[ date ]</a>
              <a href="thread.html#12960">[ thread ]</a>
              <a href="subject.html#12960">[ subject ]</a>
              <a href="author.html#12960">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
