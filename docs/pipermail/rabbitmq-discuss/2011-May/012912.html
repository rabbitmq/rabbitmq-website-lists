<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] exessive memory usage and blocked connection, even when no messages left
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20exessive%20memory%20usage%20and%20blocked%20connection%2C%0A%20even%20when%20no%20messages%20left&In-Reply-To=%3C08ae3ccf-c835-4c85-ab05-e1860ef6472b%40y12g2000yqh.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012911.html">
   <LINK REL="Next"  HREF="012915.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] exessive memory usage and blocked connection, even when no messages left</H1>
    <B>Theo</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20exessive%20memory%20usage%20and%20blocked%20connection%2C%0A%20even%20when%20no%20messages%20left&In-Reply-To=%3C08ae3ccf-c835-4c85-ab05-e1860ef6472b%40y12g2000yqh.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] exessive memory usage and blocked connection, even when no messages left">iconara at gmail.com
       </A><BR>
    <I>Wed May 18 17:15:39 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012911.html">[rabbitmq-discuss] exessive memory usage and blocked connection, even when no messages left
</A></li>
        <LI>Next message: <A HREF="012915.html">[rabbitmq-discuss] exessive memory usage and blocked connection, even when no messages left
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12912">[ date ]</a>
              <a href="thread.html#12912">[ thread ]</a>
              <a href="subject.html#12912">[ subject ]</a>
              <a href="author.html#12912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2.4.1, should have been more specific. the OS is ubuntu 10.04, btw.

there's a lot of warnings in the log about memory usage, but it's more
or less the same thing over and over again:

=INFO REPORT==== 18-May-2011::14:37:20 ===
vm_memory_high_watermark set. Memory used:3327376104 allowed:
3006570496

=INFO REPORT==== 18-May-2011::14:37:20 ===
    alarm_handler: {set,
{{<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">vm_memory_high_watermark,rabbit at rfmmqstaging01</A>},[]}}

then I found this, not sure if it's important (pasted it into a gist):

<A HREF="https://gist.github.com/978897">https://gist.github.com/978897</A>

this is the version of erlang:

Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:8:8] [rq:8] [async-
threads:0] [hipe] [kernel-poll:false]

I've been watching the management UI since I posted my first message
(almost an hour ago) and the memory usage hasn't gone down. can a node
get bad? the other nodes look ok, but the one that's in the red in the
screenshot is still in the red. no connections to the server for an
hour.

T#

On May 18, 6:01&#160;pm, Matthew Sackman &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matt... at rabbitmq.com</A>&gt; wrote:
&gt;<i> Hi Theo,
</I>&gt;<i>
</I>&gt;<i> On Wed, May 18, 2011 at 08:22:13AM -0700, Theo wrote:
</I>&gt;<i> &gt; More specifics on the setup: the cluster consists of 4 EC2 instances
</I>&gt;<i> &gt; with 8 CPUs and 7 Gb RAM each (I forget the exact instance name)
</I>&gt;<i> &gt; running RabbitMQ 2.4.
</I>&gt;<i>
</I>&gt;<i> Is that 2.4.0 or 2.4.1? If not 2.4.1, please upgrade. Which version of
</I>&gt;<i> Erlang are you running? Is there anything of note other than connections
</I>&gt;<i> and memory alarms in any of the logs?
</I>&gt;<i>
</I>&gt;<i> Matthew
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012911.html">[rabbitmq-discuss] exessive memory usage and blocked connection, even when no messages left
</A></li>
	<LI>Next message: <A HREF="012915.html">[rabbitmq-discuss] exessive memory usage and blocked connection, even when no messages left
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12912">[ date ]</a>
              <a href="thread.html#12912">[ thread ]</a>
              <a href="subject.html#12912">[ subject ]</a>
              <a href="author.html#12912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
