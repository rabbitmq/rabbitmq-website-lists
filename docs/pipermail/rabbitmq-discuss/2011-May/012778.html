<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Synchronous Message Response
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Synchronous%20Message%20Response&In-Reply-To=%3C661247.32907.qm%40web36105.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012773.html">
   <LINK REL="Next"  HREF="012761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Synchronous Message Response</H1>
    <B>mp</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Synchronous%20Message%20Response&In-Reply-To=%3C661247.32907.qm%40web36105.mail.mud.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] Synchronous Message Response">mpxr at yahoo.com.au
       </A><BR>
    <I>Tue May 10 14:05:30 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012773.html">[rabbitmq-discuss] Synchronous Message Response
</A></li>
        <LI>Next message: <A HREF="012761.html">[rabbitmq-discuss] Acks versus Publisher confirms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12778">[ date ]</a>
              <a href="thread.html#12778">[ thread ]</a>
              <a href="subject.html#12778">[ subject ]</a>
              <a href="author.html#12778">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Emile,
&#160; Thanks for the info, I actually had extended SimpleRpcServer. I had a simple override for byte[] HandleSimpleCall(...)&#160; that's where I started to experience the issue of the client not behaving synchronously. That's why I started down the path of using BasicGet on the server.
&#160;
Thanks to you clarifying that HandleSimpleCall() is what I should be using I found the bug in how I was modifying the out param 'replyProperties' incorrectly which is why the message was not being delivered.
&#160;
Thanks, what I wanted to achieve here looks to be working now.

-mp
&#160;
From: Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;
To: mp &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpxr at yahoo.com.au</A>&gt;
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Tuesday, 10 May 2011 9:40 PM
Subject: Re: [rabbitmq-discuss] Synchronous Message Response

Hi,

On 10/05/11 02:40, mp wrote:
&gt;<i> 
</I>&gt;<i> var&#160; client&#160; =&#160; new&#160; SimpleRpcClient(model, queueName)
</I>
The first thing to check is whether you need RPC. It is often possible and better to design your system in a way that the same client does not need the server response immediately.

If you do need RPC then the comments in the SimpleRpcClient and SimpleRpcServer classes provide guidance for their use.

&gt;<i> byte[] response;//...
</I>&gt;<i> 
</I>&gt;<i> //how do I send a response?
</I>
In the server, if the request requires a response then this is provided by the return value of the HandleSimpleCall() method. If the message requires no response then HandleSimpleCast() is called instead and no response is sent.

&gt;<i> client side:
</I>&gt;<i> 
</I>&gt;<i> //what does the client do to retrieve the ACK and RESPONSE.
</I>
Messages from the server are acknowledged internally in the SimpleRpcClient implementation. The server response is available as the return value of the Call() method.




-Emile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110510/55d9768c/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110510/55d9768c/attachment-0001.htm</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012773.html">[rabbitmq-discuss] Synchronous Message Response
</A></li>
	<LI>Next message: <A HREF="012761.html">[rabbitmq-discuss] Acks versus Publisher confirms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12778">[ date ]</a>
              <a href="thread.html#12778">[ thread ]</a>
              <a href="subject.html#12778">[ subject ]</a>
              <a href="author.html#12778">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
