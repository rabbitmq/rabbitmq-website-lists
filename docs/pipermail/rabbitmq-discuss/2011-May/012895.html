<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Query reg migration of queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Query%20reg%20migration%20of%20queue&In-Reply-To=%3C20110517112033.GA10359%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012894.html">
   <LINK REL="Next"  HREF="012896.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Query reg migration of queue</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Query%20reg%20migration%20of%20queue&In-Reply-To=%3C20110517112033.GA10359%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Query reg migration of queue">matthew at rabbitmq.com
       </A><BR>
    <I>Tue May 17 12:20:33 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012894.html">[rabbitmq-discuss] Query reg migration of queue
</A></li>
        <LI>Next message: <A HREF="012896.html">[rabbitmq-discuss] RabbitMQ with WAN latencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12895">[ date ]</a>
              <a href="thread.html#12895">[ thread ]</a>
              <a href="subject.html#12895">[ subject ]</a>
              <a href="author.html#12895">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, May 17, 2011 at 04:30:33PM +0530, Ram Chan wrote:
&gt;<i>  I have setup rabbitmq on a server, but now want to change the hostname of
</I>&gt;<i> server. The queue is under mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at hostname.</A>
</I>&gt;<i> How to migrate the queue to new hostname. I tried renaming the dir but dint
</I>&gt;<i> help.
</I>
After changing the hostname of the machine, you'll find that rabbit
starts up using the new hostname, and thus a different location to store
queue contents.

The only way you'll be able to migrate the queue contents is to change
the hostname back to the original, startup rabbit, then drain the queue
to some other machine with a stable hostname, make the change to your
hostname, restart rabbit, and then drain it back in.

Or you could use a client of some sort to drain the contents of the
queue, something like that. But the point is that the msgs will have to
come out of rabbit before the hostname change, then make the change,
then send them back in.

Matthew
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012894.html">[rabbitmq-discuss] Query reg migration of queue
</A></li>
	<LI>Next message: <A HREF="012896.html">[rabbitmq-discuss] RabbitMQ with WAN latencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12895">[ date ]</a>
              <a href="thread.html#12895">[ thread ]</a>
              <a href="subject.html#12895">[ subject ]</a>
              <a href="author.html#12895">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
