<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] IMPORTANT: amqp gem 0.8.0+ will no longer support Ruby 1.8.7-p249 (this specific patchlevel) due to a Ruby bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20IMPORTANT%3A%20amqp%20gem%200.8.0%2B%20will%20no%20longer%0A%20support%20Ruby%201.8.7-p249%20%28this%20specific%20patchlevel%29%20due%20to%20a%20Ruby%20bug&In-Reply-To=%3CE7F7739EAB1E422DAB40A36786C00392%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012809.html">
   <LINK REL="Next"  HREF="012815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] IMPORTANT: amqp gem 0.8.0+ will no longer support Ruby 1.8.7-p249 (this specific patchlevel) due to a Ruby bug</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20IMPORTANT%3A%20amqp%20gem%200.8.0%2B%20will%20no%20longer%0A%20support%20Ruby%201.8.7-p249%20%28this%20specific%20patchlevel%29%20due%20to%20a%20Ruby%20bug&In-Reply-To=%3CE7F7739EAB1E422DAB40A36786C00392%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] IMPORTANT: amqp gem 0.8.0+ will no longer support Ruby 1.8.7-p249 (this specific patchlevel) due to a Ruby bug">michael.s.klishin at gmail.com
       </A><BR>
    <I>Wed May 11 18:17:00 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012809.html">[rabbitmq-discuss] installation on rh5.5
</A></li>
        <LI>Next message: <A HREF="012815.html">[rabbitmq-discuss] api/connections failing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12813">[ date ]</a>
              <a href="thread.html#12813">[ thread ]</a>
              <a href="subject.html#12813">[ subject ]</a>
              <a href="author.html#12813">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This message is cross-posted to rabbitmq-discuss and amqp gem mailing list. If you do not use Ruby or amqp gem, feel free to ignore this message. Otherwise please do read on.


I just found out (in the QA process of my apps) that Ruby 1.8.7-p249 (this specific patchlevel) struggles from a bug
that affects 0.8.0 (and possibly earlier versions, too, if you subclass Exchange or Queue, as some libraries do): <A HREF="http://bit.ly/iONBmH">http://bit.ly/iONBmH</A>

Unfortunately, there is absolutely no way we can provide all the features (including backwards-compatibility behavior/features) and work around this bug on 1.8.7-249, so this version is NO LONGER SUPPORTED by amqp gem.

1.8.7-p174 and p334 are NOT affected by this issue so either downgrading or upgrading will help. That bug was fixed more than a year ago (in December 2009), also affected Ruby Enterprise Edition users and there was at least one stable patchlevel release of 1.8.7 since that time.

If you use Ruby Enterprise Edition or some custom build of 1.8.7 and not sure whether the fix is included with your build, figuring this out is easy: run the following example (managed by Bundler) and see if you get &quot;super called outside of method&quot; exception (usually NoMethodError but can also be a SystemExit):

<A HREF="https://github.com/ruby-amqp/amqp/blob/master/examples/hello_world_with_eventmachine_in_a_separate_thread.rb">https://github.com/ruby-amqp/amqp/blob/master/examples/hello_world_with_eventmachine_in_a_separate_thread.rb</A>

If you know anyone who may be running Ruby 1.8.7-p249 or equivalent REE release, please pass this information on to them. If you have any questions, just reply to
this message or contact me directly if you have reasons to do so.

Thank you.
-- 
MK

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012809.html">[rabbitmq-discuss] installation on rh5.5
</A></li>
	<LI>Next message: <A HREF="012815.html">[rabbitmq-discuss] api/connections failing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12813">[ date ]</a>
              <a href="thread.html#12813">[ thread ]</a>
              <a href="subject.html#12813">[ subject ]</a>
              <a href="author.html#12813">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
