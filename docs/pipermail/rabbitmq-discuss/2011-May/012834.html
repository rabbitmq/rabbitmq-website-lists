<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] mnesia tables
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20mnesia%20tables&In-Reply-To=%3C4DCCF68D.7070906%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012812.html">
   <LINK REL="Next"  HREF="012801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] mnesia tables</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20mnesia%20tables&In-Reply-To=%3C4DCCF68D.7070906%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] mnesia tables">emile at rabbitmq.com
       </A><BR>
    <I>Fri May 13 10:14:53 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012812.html">[rabbitmq-discuss] mnesia tables
</A></li>
        <LI>Next message: <A HREF="012801.html">[rabbitmq-discuss] .NET client for management plugin API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12834">[ date ]</a>
              <a href="thread.html#12834">[ thread ]</a>
              <a href="subject.html#12834">[ subject ]</a>
              <a href="author.html#12834">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Alain,

&gt;<i> I am debugging a case where we have 4 messages
</I>&gt;<i> (financial transactions) that are stuck in the queue in un-Acked state.
</I>&gt;<i> Without some type of messageId or transactionID, I have to look directly
</I>&gt;<i> at mnesia file system and try to find my data. It would be nice to be
</I>&gt;<i> able to dump the records to analyse the data in the various queues (kind
</I>&gt;<i> of a mysqldump that would be legible).
</I>
The contents of messages are on disk in a specialised format or in RAM 
(or both), instead of mnesia tables, so mnesia browsing won't solve this 
problem.

If you are trying to track down which consumer amongst many is 
responsible for failing to acknowledge some messages, then &quot;rabbitmqctl 
list_channels messages_unacknowledged&quot; and &quot;rabbitmqctl list_consumers&quot; 
could help.

For debugging you could have all clients connect via a proxy that tracks 
which consumers receives and acknowledges messages. A comparison will 
reveal unacknowledged messages. The tracer tool ( 
<A HREF="http://www.rabbitmq.com/faq.html#analyse-network-traffic">http://www.rabbitmq.com/faq.html#analyse-network-traffic</A> ) or Wireshark 
( <A HREF="http://wiki.wireshark.org/AMQP">http://wiki.wireshark.org/AMQP</A> ) may help.

Another option is to provide an alternative queue implementation which 
is browsable. Alternative queue implementations that implement these 
callbacks (
<A HREF="http://hg.rabbitmq.com/rabbitmq-server/file/default/src/rabbit_backing_queue.erl">http://hg.rabbitmq.com/rabbitmq-server/file/default/src/rabbit_backing_queue.erl</A> 
) can be swapped in by defining the &quot;backing_queue_module&quot; erlang 
variable appropriately. If your queue implementation stores messages in 
a SQL database then a &quot;select&quot; statement will list messages.

-Emile

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012812.html">[rabbitmq-discuss] mnesia tables
</A></li>
	<LI>Next message: <A HREF="012801.html">[rabbitmq-discuss] .NET client for management plugin API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12834">[ date ]</a>
              <a href="thread.html#12834">[ thread ]</a>
              <a href="subject.html#12834">[ subject ]</a>
              <a href="author.html#12834">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
