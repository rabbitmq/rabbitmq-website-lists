<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ cluster w/ .Net client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20cluster%20w/%20.Net%20client&In-Reply-To=%3C278087392.291476.1306429518739.JavaMail.root%40zimbra-prod-mbox-4.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013003.html">
   <LINK REL="Next"  HREF="012967.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ cluster w/ .Net client</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20cluster%20w/%20.Net%20client&In-Reply-To=%3C278087392.291476.1306429518739.JavaMail.root%40zimbra-prod-mbox-4.vmware.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ cluster w/ .Net client">jerryk at vmware.com
       </A><BR>
    <I>Thu May 26 18:05:18 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013003.html">[rabbitmq-discuss] RabbitMQ cluster w/ .Net client
</A></li>
        <LI>Next message: <A HREF="012967.html">[rabbitmq-discuss] Memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13004">[ date ]</a>
              <a href="thread.html#13004">[ thread ]</a>
              <a href="subject.html#13004">[ subject ]</a>
              <a href="author.html#13004">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Yann...

Yes, your understanding is correct.  Worrying about what particular Rabbit node a given queue &quot;really&quot; lives on is really only of concern when nodes fail.

Best regards,
Jerry

----- Original Message -----
From: &quot;Yann Luppo&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">yluppo at leads360.com</A>&gt;
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Thursday, May 26, 2011 9:57:38 AM
Subject: Re: [rabbitmq-discuss] RabbitMQ cluster w/ .Net client

To follow up on the clustering question, is it safe to assume the
following scenario would work as expected?

* 2 rabbitMQ nodes clustered, rabbit1 and rabbit2
* Client A connects to rabbit1, creates a new queue QueueX and pushes
messages at regular interval to that queue
* Client B connects to rabbit2 to consume messages from QueueX. Since
servers are clustered rabbit2 knows how to route the messages from
QueueX on rabbit1 to Client B.
* Client C connects to rabbit2 and pushes messages to QueueX and again
rabbit2 knows how to route the messages to QueueX.

Here is my understanding and I'd like it corrected if it's wrong in
anyway please: 

QueueX really only exists on the server it's been created but other
rabbitmq nodes on that cluster know how to communicate to and from that
queue.

Is that an accurate picture of rabbitmq clustering?

Thank you,
Yann

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>
[mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Simon
MacMullen
Sent: Wednesday, May 25, 2011 6:14 AM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] RabbitMQ cluster w/ .Net client

On 23/05/11 20:15, Yann Luppo wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I've read many posts and blogs at this point and I'm still not sure
</I>&gt;<i> about how to cluster correctly my 2 RabbitMQ nodes.
</I>&gt;<i>
</I>&gt;<i> I've read the RabbitMQ clustering
</I>&gt;<i> guide:<A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A>
</I>&gt;<i>
</I>&gt;<i> I found out about a mysterious ClusterId in the API guide, with no
</I>&gt;<i> explanation on how to get that Id in the first
</I>&gt;<i>
</I>place:<A HREF="http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.4.1/rab">http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.4.1/rab</A>
bitmq-dotnet-client-2.4.1-api-guide.pdf

The ClusterId is not documented because it doesn't do anything in 
RabbitMQ. In fact it was never well defined and was deprecated in 0-9-1.

I'm not sure what it's still doing in that guide; I've filed a bug.

&gt;<i> Learned in that StackOverflow post that basically I'd need my clients
</I>to
&gt;<i> be aware of each node in the cluster and code for failover
</I>&gt;<i> scenario:rabbitmq HA cluster
</I>&gt;<i> &lt;<A HREF="http://stackoverflow.com/questions/4140653/rabbitmq-ha-cluster">http://stackoverflow.com/questions/4140653/rabbitmq-ha-cluster</A>&gt;
</I>&gt;<i>
</I>&gt;<i> Now... The behavior I'd like to have is something a little more
</I>&gt;<i> transparent if possible. Where I would potentially use that
</I>&quot;ClusterId&quot;
&gt;<i> on the client to make the consumer cluster aware and then hopefully
</I>the
&gt;<i> library knows to randomly connect to either node to grab messages.
</I>&gt;<i>
</I>&gt;<i> Granted I know a message can only be on one server at a time, so I'm
</I>&gt;<i> hoping for some round robin magic from the DotNet client library that
</I>&gt;<i> would also handle fail over situations.
</I>
I'm afraid that all the client libraries just know how to connect to the

host you give them.

&gt;<i> Basically I was hoping for the whole thing to scale without changing
</I>any
&gt;<i> code or configuration on the publisher or consumer apps.
</I>&gt;<i>
</I>&gt;<i> Now based on my readings it doesn't quite work like that... unless I
</I>&gt;<i> missed something. If my knowledge is up to date and I have to code all
</I>&gt;<i> that cluster aware business, then... why does RabbitMQ have a cluster
</I>&gt;<i> feature in the first place? How is it used?
</I>
Clustering exists to:

* Allow you to get higher throughput than a single node can manage.

* In the near future, allow queues to exist on more than one node, and 
survive node failure.

Cheers, Simon

-- 
Simon MacMullen
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013003.html">[rabbitmq-discuss] RabbitMQ cluster w/ .Net client
</A></li>
	<LI>Next message: <A HREF="012967.html">[rabbitmq-discuss] Memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13004">[ date ]</a>
              <a href="thread.html#13004">[ thread ]</a>
              <a href="subject.html#13004">[ subject ]</a>
              <a href="author.html#13004">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
