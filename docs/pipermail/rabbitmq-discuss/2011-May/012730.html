<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problem while one of clients crashes.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Futf-8%3Fq%3FProblem_while_one_of_clients_crashes%3F%3D%0A%09%3D%3Futf-8%3Fq%3F%3D2E%3F%3D&In-Reply-To=%3C2d184cd7.73831287.4dc64ac4.d2ae1%40o2.pl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012729.html">
   <LINK REL="Next"  HREF="012842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problem while one of clients crashes.</H1>
    <B>rabbitmq</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%3D%3Futf-8%3Fq%3FProblem_while_one_of_clients_crashes%3F%3D%0A%09%3D%3Futf-8%3Fq%3F%3D2E%3F%3D&In-Reply-To=%3C2d184cd7.73831287.4dc64ac4.d2ae1%40o2.pl%3E"
       TITLE="[rabbitmq-discuss] Problem while one of clients crashes.">rabbitmq at o2.pl
       </A><BR>
    <I>Sun May  8 08:48:20 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012729.html">[rabbitmq-discuss] RabbitMQ extended specification
</A></li>
        <LI>Next message: <A HREF="012842.html">[rabbitmq-discuss] Problem while one of clients crashes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12730">[ date ]</a>
              <a href="thread.html#12730">[ thread ]</a>
              <a href="subject.html#12730">[ subject ]</a>
              <a href="author.html#12730">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm using rabbit version 1.7.1 I've observed a strange behavior.  When i have two consumers (A,B) and one of them (A) is closed unexpectedly (so without closing channel etc - for example forced shutdown) than the server still shows that two clients are connected, and is trying to send message to this terminated client (A).This results in having unacknowledged message in the queue. In most cases after some time this connection is timed out and message is returned to queue and processed by the other client (B). But it also often happens that even though connection is timed out the unacknowledged message still remains and is blocking the other client (B). Other messages are waiting in the queue unconsumed. When new client  (C) is connected to server then all waiting massages are consumed by the new client. So there are two clients again (B,C). Now when the old client (B) is being closed and disconnected from server , this unacknowledged message remains and starts blocking remaining client (C).  Messages are stuck in queue.

What could be the reason of such behavior? Maybe it is a known bug? Maybe some walk-arounds?
I really would appreciate any ideas and solutions.
Thanks in advance. 

Krzysztof.
</PRE>




































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012729.html">[rabbitmq-discuss] RabbitMQ extended specification
</A></li>
	<LI>Next message: <A HREF="012842.html">[rabbitmq-discuss] Problem while one of clients crashes.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12730">[ date ]</a>
              <a href="thread.html#12730">[ thread ]</a>
              <a href="subject.html#12730">[ subject ]</a>
              <a href="author.html#12730">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
