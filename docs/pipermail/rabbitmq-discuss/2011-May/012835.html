<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Writing to the mnesia table rabbit_queue, bad idea?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Writing%20to%20the%20mnesia%20table%20rabbit_queue%2C%0A%20bad%20idea%3F&In-Reply-To=%3C4DCD00CA.80705%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012831.html">
   <LINK REL="Next"  HREF="012848.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Writing to the mnesia table rabbit_queue, bad idea?</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Writing%20to%20the%20mnesia%20table%20rabbit_queue%2C%0A%20bad%20idea%3F&In-Reply-To=%3C4DCD00CA.80705%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Writing to the mnesia table rabbit_queue, bad idea?">simon at rabbitmq.com
       </A><BR>
    <I>Fri May 13 10:58:34 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012831.html">[rabbitmq-discuss] Writing to the mnesia table rabbit_queue,	bad idea?
</A></li>
        <LI>Next message: <A HREF="012848.html">[rabbitmq-discuss] Writing to the mnesia table rabbit_queue, bad idea?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12835">[ date ]</a>
              <a href="thread.html#12835">[ thread ]</a>
              <a href="subject.html#12835">[ subject ]</a>
              <a href="author.html#12835">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/05/11 04:06, Gavin M. Roy wrote:
&gt;<i> I am working on a project to manage custom attributes in the queue
</I>&gt;<i> arguments table and found that if I write to the rabbit_queue table it
</I>&gt;<i> will reflect in the management plugin as I want, without interrupting
</I>&gt;<i> existing publishers or consumers.
</I>&gt;<i>
</I>&gt;<i> It seems like it does exactly what I want it to do, which is very cool
</I>&gt;<i> but  I can't help but wonder if it's a bad idea though.
</I>&gt;<i>
</I>&gt;<i> Would someone with a good handle on RabbitMQ internals mind taking a
</I>&gt;<i> look at my code and let me know if I have anything to worry about?
</I>
Depends how you define &quot;bad idea&quot;. In terms of today's implementation 
you should be fine, as long as you don't expect (for example) to be able 
to flip the durability field and have that mean something.

Of course, you're going very much behind the scenes here and anything 
you do today is not guaranteed to work tomorrow. Raymond Chen is not on 
our team. While I don't see anything on the horizon that would break 
this general property, you should should certainly be prepared for the 
schema to change.

&gt;<i> All write related functions use the write_record/1 function:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://github.com/gmr/elmer/blob/master/elmer.erl#L98">https://github.com/gmr/elmer/blob/master/elmer.erl#L98</A>
</I>&gt;<i>
</I>&gt;<i> And examples of use can be found in setup_monitoring/4 at:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://github.com/gmr/elmer/blob/master/elmer.erl#L27">https://github.com/gmr/elmer/blob/master/elmer.erl#L27</A>
</I>&gt;<i>
</I>&gt;<i> And toggle_monitoring/2 at:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://github.com/gmr/elmer/blob/master/elmer.erl#L46">https://github.com/gmr/elmer/blob/master/elmer.erl#L46</A>
</I>&gt;<i>
</I>&gt;<i> I'm currently working on a cli wrapper for these and plan on releasing
</I>&gt;<i> this and the accompanying Nagios integration bits if this is sane enough.
</I>
Cool, sounds interesting.

Cheers, Simon
-- 
Simon MacMullen
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012831.html">[rabbitmq-discuss] Writing to the mnesia table rabbit_queue,	bad idea?
</A></li>
	<LI>Next message: <A HREF="012848.html">[rabbitmq-discuss] Writing to the mnesia table rabbit_queue, bad idea?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12835">[ date ]</a>
              <a href="thread.html#12835">[ thread ]</a>
              <a href="subject.html#12835">[ subject ]</a>
              <a href="author.html#12835">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
