<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage&In-Reply-To=%3C4DDA12FA.8010008%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012951.html">
   <LINK REL="Next"  HREF="012960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Memory usage</H1>
    <B>Rob Harrop</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Memory%20usage&In-Reply-To=%3C4DDA12FA.8010008%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Memory usage">rob at rabbitmq.com
       </A><BR>
    <I>Mon May 23 08:55:38 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012951.html">[rabbitmq-discuss] Memory usage
</A></li>
        <LI>Next message: <A HREF="012960.html">[rabbitmq-discuss] Memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12954">[ date ]</a>
              <a href="thread.html#12954">[ thread ]</a>
              <a href="subject.html#12954">[ subject ]</a>
              <a href="author.html#12954">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hagbard,

Since 2.x, RabbitMQ will no longer allow the Erlang process to run out 
of memory and stop due to fast producers and slow consumers.

If you have a fast producer running constantly, accompanied by a slow 
consumer then the number of queued messages will grow. To prevent this 
from causing out of memory problems, Rabbit will throttle the producer 
once the memory high watermark is hit.

The throttling works by simply blocking the producer from sending any 
more data over the TCP socket. Once memory drops below the high 
watermark, due to the consumer catching up or messages being flushed to 
disk, the producer can send data again.

Note that your producer might bounce off the watermark frequently if it 
just keeps publishing without let up.

Rob

<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Hagbard at gmx.de</A> wrote:
&gt;<i> Hi,
</I>&gt;<i> im new to RabbitMQ and i have a question about the memory usage of RabbitMQ. I read that since RabbitMQ 2.x i don't need to care about fast producers and slow consumers and so don't need to care about the amount of messages in a queue and memory usage. After a test yesterday with 2GB memory and 4M messages in a queue (no consumer) RabbitMQ reached high memory watermark and stopped. Can somebody explain that behaviour?
</I>&gt;<i>
</I>&gt;<i> Thanks a lot
</I>&gt;<i> Hagbard
</I></PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012951.html">[rabbitmq-discuss] Memory usage
</A></li>
	<LI>Next message: <A HREF="012960.html">[rabbitmq-discuss] Memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12954">[ date ]</a>
              <a href="thread.html#12954">[ thread ]</a>
              <a href="subject.html#12954">[ subject ]</a>
              <a href="author.html#12954">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
