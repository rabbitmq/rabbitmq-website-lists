<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] how to detect bad username/password in 0.9.5?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20to%20detect%20bad%20username/password%20in%200.9.5%3F&In-Reply-To=%3CBF526B1D8B404322BB6E6DA40423ED36%40myyearbook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012693.html">
   <LINK REL="Next"  HREF="012745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] how to detect bad username/password in 0.9.5?</H1>
    <B>Gavin M. Roy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20to%20detect%20bad%20username/password%20in%200.9.5%3F&In-Reply-To=%3CBF526B1D8B404322BB6E6DA40423ED36%40myyearbook.com%3E"
       TITLE="[rabbitmq-discuss] how to detect bad username/password in 0.9.5?">gmr at myyearbook.com
       </A><BR>
    <I>Mon May  9 16:12:40 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012693.html">[rabbitmq-discuss] how to detect bad username/password in 0.9.5?
</A></li>
        <LI>Next message: <A HREF="012745.html">[rabbitmq-discuss] how to detect bad username/password in 0.9.5?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12743">[ date ]</a>
              <a href="thread.html#12743">[ thread ]</a>
              <a href="subject.html#12743">[ subject ]</a>
              <a href="author.html#12743">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In trying to track this down with RabbitMQ 2.4.1 and Pika 0.9.6pre0 I am not seeing any reply back from Rabbit after a Connection.StartOk is sent, the socket just closes.

Is this expected behavior from the broker perspective? I imagine since the connection is never negotiating doing a Connection.Close from the server is not appropriate. Any suggestions on how to raise this as an Exception since it seems to be an implied behavior that broker disconnects if the mechanism or response values are incorrect?

The error logs do show the error as expected.

=ERROR REPORT==== 9-May-2011::11:05:32 ===
exception on TCP connection &lt;0.6098.0&gt; from 127.0.0.1:58311
{channel0_error,starting,
{amqp_error,access_refused,
&quot;PLAIN login refused: user 'gmr' - invalid credentials&quot;,
'connection.start_ok'}}

=INFO REPORT==== 9-May-2011::11:05:32 ===
closing TCP connection &lt;0.6098.0&gt; from 127.0.0.1:58311

On Thursday, May 5, 2011 at 11:17 AM, Brandon Craig Rhodes wrote:
When a error occurs while connecting in Pika 0.9.5, I have to go log on
&gt;<i> to my RabbitMQ server and look at its logs to discover what happened -
</I>&gt;<i> the IOLoop in the local program simply returns after three seconds and
</I>&gt;<i> my next piece of code breaks because the `on_open_callback` callback
</I>&gt;<i> that I am passing to my `SelectConnection` never gets called when the
</I>&gt;<i> username and password are wrong.
</I>&gt;<i> 
</I>&gt;<i> How am I supposed to intercept this condition so that I can return an
</I>&gt;<i> error message to my user? I tried registering a callback with the
</I>&gt;<i> `connection.add_on_close_callback()` method but, sensibly enough, it
</I>&gt;<i> never gets called because this is not really a connection-close, but a
</I>&gt;<i> connection not getting established in the first place. I have looked
</I>&gt;<i> around for some sort of a `connection.add_on_error_callback()` or some
</I>&gt;<i> similar sort of facility, but cannot find one.
</I>&gt;<i> 
</I>&gt;<i> How do I catch and handle asynchronous errors?
</I>&gt;<i> 
</I>&gt;<i> Thanks for ANY help that you guys can offer - and thanks, Gavin, for
</I>&gt;<i> writing such an important part of the modern Python ecosystem!
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Brandon Craig Rhodes <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">brandon at rhodesmill.org</A> <A HREF="http://rhodesmill.org/brandon">http://rhodesmill.org/brandon</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110509/6b5d21ea/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20110509/6b5d21ea/attachment.htm</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012693.html">[rabbitmq-discuss] how to detect bad username/password in 0.9.5?
</A></li>
	<LI>Next message: <A HREF="012745.html">[rabbitmq-discuss] how to detect bad username/password in 0.9.5?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12743">[ date ]</a>
              <a href="thread.html#12743">[ thread ]</a>
              <a href="subject.html#12743">[ subject ]</a>
              <a href="author.html#12743">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
