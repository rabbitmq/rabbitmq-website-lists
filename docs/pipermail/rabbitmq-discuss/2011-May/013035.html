<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20maximum%20number%20of%20amqp%20connections%20to%20a%0A%20rabbitmq%20broker&In-Reply-To=%3C1C7E61787A08F34BBBBD9E7A7CBC368B0A30E8BE%40EXMB02OSG.eclg.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013033.html">
   <LINK REL="Next"  HREF="013034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker</H1>
    <B>Chris Chew</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20maximum%20number%20of%20amqp%20connections%20to%20a%0A%20rabbitmq%20broker&In-Reply-To=%3C1C7E61787A08F34BBBBD9E7A7CBC368B0A30E8BE%40EXMB02OSG.eclg.org%3E"
       TITLE="[rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker">chrisch at ecollege.com
       </A><BR>
    <I>Tue May 31 00:12:23 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="013033.html">[rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker
</A></li>
        <LI>Next message: <A HREF="013034.html">[rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13035">[ date ]</a>
              <a href="thread.html#13035">[ thread ]</a>
              <a href="subject.html#13035">[ subject ]</a>
              <a href="author.html#13035">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dhinesh.

&gt;<i> Matthew Sackman [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthew at rabbitmq.com</A>]
</I>&gt;<i> Sent: Monday, May 30, 2011 8:14 AM
</I>&gt;<i> To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker
</I>&gt;<i> 
</I>&gt;<i> On Mon, May 30, 2011 at 06:19:47PM +0530, Dhinesh Kumar wrote:
</I>&gt;<i> &gt; I am trying to find the maximum number of amqp connections i can establish
</I>&gt;<i> &gt; with a RabbitMQ broker running on Ubuntu.
</I>&gt;<i> &gt; I tried both Java and erlang client to create connections but i could not
</I>&gt;<i> &gt; succeed more than 829 connections.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I like to know how can i increase the number ??
</I>
&gt;<i> You're likely hitting the ulimit. Edit /etc/security/limits.conf and
</I>&gt;<i> allow the rabbitmq user to have a much higher &quot;nofile&quot; setting. Rabbit
</I>&gt;<i> will log on start up how many sockets it's permitting, so once the
</I>&gt;<i> change has taken effect and you've restarted rabbit, you should find log
</I>&gt;<i> entries to demonstrate it's working.
</I>
Assuming the connections are all coming from a single client machine, you'll also have to do complimentary tuning on the client side.  Increase the ulimit if the client is unix-based, and on any OS increase the ephemeral port range to be more than the number of connections you are targeting.

Also, if your client is Java-based then you'll need to tune the memory and Garbage Collection settings so that your client JVM can manage the connections.  Java reserves several KB of memory per socket connection...which means you'll run out of memory in a JVM with standard settings before you max out the Rabbit service (after ulimit is set per Matthew's suggestion, of course).

-Chris 
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013033.html">[rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker
</A></li>
	<LI>Next message: <A HREF="013034.html">[rabbitmq-discuss] maximum number of amqp connections to a rabbitmq broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13035">[ date ]</a>
              <a href="thread.html#13035">[ thread ]</a>
              <a href="subject.html#13035">[ subject ]</a>
              <a href="author.html#13035">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
