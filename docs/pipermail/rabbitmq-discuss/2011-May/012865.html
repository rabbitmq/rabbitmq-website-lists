<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Stress testing RabbitMQ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Stress%20testing%20RabbitMQ&In-Reply-To=%3C20110514115738.GC11419%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012864.html">
   <LINK REL="Next"  HREF="012866.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Stress testing RabbitMQ</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Stress%20testing%20RabbitMQ&In-Reply-To=%3C20110514115738.GC11419%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Stress testing RabbitMQ">matthew at rabbitmq.com
       </A><BR>
    <I>Sat May 14 12:57:38 BST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="012864.html">[rabbitmq-discuss] Stress testing RabbitMQ
</A></li>
        <LI>Next message: <A HREF="012866.html">[rabbitmq-discuss] Stress testing RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12865">[ date ]</a>
              <a href="thread.html#12865">[ thread ]</a>
              <a href="subject.html#12865">[ subject ]</a>
              <a href="author.html#12865">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, May 14, 2011 at 12:32:41PM +0100, Matthew Sackman wrote:
&gt;<i> I have not looked into your benchmark, however, what size msgs are you
</I>&gt;<i> using? I suspect that if the binary fragments end up under 64 bytes then
</I>&gt;<i> that is the cause of memory explosion: each msg is being _copied_ rather
</I>&gt;<i> than reference counted to each queue. If you try with msgs with a bigger
</I>&gt;<i> payload, I wonder whether you see the same behaviour.
</I>
Hmm, I've changed my mind on that. Even with 64-byte binaries being
copied to 8k queues, we're only talking 0.5MB, which is very unlikely to
be an issue unless the binary alloctor is horribly slow, which I'm
fairly sure it's not.

Matthew
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012864.html">[rabbitmq-discuss] Stress testing RabbitMQ
</A></li>
	<LI>Next message: <A HREF="012866.html">[rabbitmq-discuss] Stress testing RabbitMQ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12865">[ date ]</a>
              <a href="thread.html#12865">[ thread ]</a>
              <a href="subject.html#12865">[ subject ]</a>
              <a href="author.html#12865">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
