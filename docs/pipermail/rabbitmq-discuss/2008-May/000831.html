<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] no connection established
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20no%20connection%20established&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000842.html">
   <LINK REL="Next"  HREF="000832.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] no connection established</H1>
    <B>Geoffrey Anderson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20no%20connection%20established&In-Reply-To="
       TITLE="[rabbitmq-discuss] no connection established">mrcoder at yahoo.com
       </A><BR>
    <I>Tue May 13 17:53:14 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000842.html">[rabbitmq-discuss] Some error messages
</A></li>
        <LI>Next message: <A HREF="000832.html">[rabbitmq-discuss] no connection established
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The rabbitmq server runs, it seems, but no connections are being accepted by it,
from the java samples or dotnet sample programs or my own programs.

For three days I have been trying everything imaginable to me to get any client
program to connect to the rabbitmq server.  For example I disabled tcpv6 on my
system and tried all manner of user permissions in the rabbitmq server for 'guest'
and my custom account 'ga' which I gave all same permissions as 'guest'.

The web site asks users to send a note to <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">legitimateconcern at rabbitmq.com</A> if it takes
more than 2 minutes to connect.  Si I have sent a detailed note.  There has been no
response to it.

The web site says  Please join our mailing list or send questions to
<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">info at rabbitmq.com.</A> We'd love to hear from you.   I've subscribed and sent a detailed
message to the mailing list.  My email did not appear in the mailing list, and no
responses came back.

Nothing is working thus far, the mailing list, the feedback email, the rabbitmq
connections.  This is my last attempt for anything to happen after which rabbitmq
must be abandoned for lack of anything working.  More than three days of time is too
much to spend into something and get nothing from it.

To be clear, this message is solely intended as a reflection on my own inabilities
and oversights, and nothing I am aware of is wrong with rabbitmq.com, the rabbitmq
server, the documentation, the sample code, the mailing list, all of which is
graciously offered at no cost, and works for others on the mailing list.  I do not
mean to upset anyone.

My only intent is to ask for a nice person to volunteer their valuable time to share
information  with me that helps the rabbitmq server accept a connection from any
client program. Java is OK, dotnet is OK, either one as you like, I'll work with
you.  I am a C# 2.0 programmer FWIW.  Windows XP-SP2 is the operating system.


Details to demonstrate the RabbitMQ inability to accept a connection. Maybe this
info contains some clue to someone smarter than me, I don't know.


1. Server is launched:

C:\&gt;&quot;C:\rabbitmq\erl5.5.5\lib\rabbitmq_server-1.3.0\sbin\rabbitmq-server.bat&quot;
RabbitMQ 1.3.0 (AMQP 8-0)
Copyright (C) 2007-2008 LShift Ltd., Cohesive Financial Technologies LLC., and
Rabbit Technologies Ltd.
Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>

Logging to &quot;C:/Documents and Settings/ga/rabbitmq//log/rabbit.log&quot;
SASL logging to &quot;C:/Documents and Settings/ga/rabbitmq//log/rabbit-sasl.log&quot;

starting database             ...done
starting core processes       ...done
starting recovery             ...done
starting persister            ...done
starting builtin applications ...done
starting TCP listeners        ...done

broker running



2. Java sample program &quot;Tracer&quot; is launched:

C:\rabbitmq\librabbitmq-java-1.3.0&gt;runjava.bat com.rabbitmq.tools.Tracer
Usage: Tracer [&lt;listenport&gt; [&lt;connecthost&gt; [&lt;connectport&gt;]]]
Invoked as: Tracer 5673 localhost 5672
com.rabbitmq.tools.Tracer.WITHHOLD_INBOUND_HEARTBEATS = false
com.rabbitmq.tools.Tracer.WITHHOLD_OUTBOUND_HEARTBEATS = false
com.rabbitmq.tools.Tracer.NO_ASSEMBLE_FRAMES = false
com.rabbitmq.tools.Tracer.NO_DECODE_FRAMES = false



3. Dotnet sample program is launched:

C:\rabbitmq\rabbitmq-dotnet-1.2.8025.1832-net-2.0\bin&gt;DeclareQueue.exe alpeduez
testqueue
None of the specified endpoints were reachable
Endpoints attempted:
  endpoint=amqp-0-<A HREF="9://alpeduez:5672,">9://alpeduez:5672,</A> attempts=1, outcome=AMQP server protocol
negotiation failure: server version 0-8, t
ransport parameters -1:-1
Stack trace:
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(Int32 maxRedirects,
AmqpTcpEndpoint[] endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(AmqpTcpEndpoint[]
endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String address)
   at RabbitMQ.Client.Examples.DeclareQueue.Main(String[] args)




4.  Go look again to see if Tracer saw any traffic:

C:\rabbitmq\librabbitmq-java-1.3.0&gt;runjava.bat com.rabbitmq.tools.Tracer
Usage: Tracer [&lt;listenport&gt; [&lt;connecthost&gt; [&lt;connectport&gt;]]]
Invoked as: Tracer 5673 localhost 5672
com.rabbitmq.tools.Tracer.WITHHOLD_INBOUND_HEARTBEATS = false
com.rabbitmq.tools.Tracer.WITHHOLD_OUTBOUND_HEARTBEATS = false
com.rabbitmq.tools.Tracer.NO_ASSEMBLE_FRAMES = false
com.rabbitmq.tools.Tracer.NO_DECODE_FRAMES = false


It seems no traffic was detected during the dotnet sample program execution.


5. Do a netstat command to see if it looks like a server is really listening.

C:\rabbitmq\rabbitmq-dotnet-1.2.8025.1832-net-2.0\bin&gt;netstat

Active Connections

  Proto  Local Address          Foreign Address        State
  TCP    alpeduez:1800          localhost:4369         ESTABLISHED
  TCP    alpeduez:4369          localhost:1800         ESTABLISHED
  TCP    alpeduez:1802          alpeduez:5672          TIME_WAIT

C:\rabbitmq\rabbitmq-dotnet-1.2.8025.1832-net-2.0\bin&gt;


Yes there is something on alpeduez:5672 which is in a TIME_WAIT.  Maybe that's OK,
maybe not.  I don't know what a normally working system netstat looks like. Do you
know what a netstat returns on a working rabbitmq system installation?


6. I run my own C# software and attempt connection to rabbitmq.  

No connections are working and the error message talks about endpoints or protocols.
Sorry I dont remember exactly, my bad.  The CreateConnection method on the factory
is throwing the exception consistently on all input values.  I was using
Protocol.GetFromEnviroment and passing in my host name 'alpeduez' to the
CreateConnection method.



7.  This is the whole contents of rabbit.log


=INFO REPORT==== 13-May-2008::12:32:09 ===
disk_log: repairing &quot;c:/Documents and
Settings/ga/rabbitmq/db/rabbit-mnesia/rabbit_persister.LOG&quot; ...

=INFO REPORT==== 13-May-2008::12:32:09 ===
Repaired persister log - 1 recovered, 0 bad

=INFO REPORT==== 13-May-2008::12:32:09 ===
Rolling persister log to &quot;c:/Documents and
Settings/ga/rabbitmq/db/rabbit-mnesia/rabbit_persister.LOG.previous&quot;

=INFO REPORT==== 13-May-2008::12:32:09 ===
started TCP listener on 0.0.0.0:5672

=INFO REPORT==== 13-May-2008::12:39:39 ===
accepted TCP connection on 0.0.0.0:5672 from 192.168.1.100:1802

=ERROR REPORT==== 13-May-2008::12:39:39 ===
error on TCP connection from 192.168.1.100:1802
connection_closed_abruptly

=INFO REPORT==== 13-May-2008::12:39:39 ===
closing TCP connection from 192.168.1.100:1802



Thank you for any clues or attempts to help me get a connection to RabbitMQ.


Regards,

Geoffrey










</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000842.html">[rabbitmq-discuss] Some error messages
</A></li>
	<LI>Next message: <A HREF="000832.html">[rabbitmq-discuss] no connection established
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
