<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] no connection established
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20no%20connection%20established&In-Reply-To=OF710AE60B.142B7842-ON80257448.005D2305-80257448.005D5FCE%40Edftrading.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000832.html">
   <LINK REL="Next"  HREF="000836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] no connection established</H1>
    <B>Edwin Fine</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20no%20connection%20established&In-Reply-To=OF710AE60B.142B7842-ON80257448.005D2305-80257448.005D5FCE%40Edftrading.com"
       TITLE="[rabbitmq-discuss] no connection established">rabbitmq-discuss_efine at usa.net
       </A><BR>
    <I>Tue May 13 18:46:46 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000832.html">[rabbitmq-discuss] no connection established
</A></li>
        <LI>Next message: <A HREF="000836.html">[rabbitmq-discuss] no connection established
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#833">[ date ]</a>
              <a href="thread.html#833">[ thread ]</a>
              <a href="subject.html#833">[ subject ]</a>
              <a href="author.html#833">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am not a RabbitMQ expert, but it seems to me that this message is te key
to your problems:

  endpoint=amqp-0-<A HREF="9://alpeduez:5672,">9://alpeduez:5672,</A> attempts=1, outcome=*AMQP server
protocol negotiation failure: server version 0-8*, transport parameters
-1:-1

RabbitMQ Server currently supports AMQP protocol version 0.8, and it seems
as if the clients are connecting with a 0.9 protocol. I think if you ensure
that all clients are talking 0.8 things will work better. I think :)

Hope this helps
Edwin Fine

On Tue, May 13, 2008 at 12:59 PM, &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">David.Corcoran at edftrading.com</A>&gt; wrote:

&gt;<i> Hey Geoffrey,
</I>&gt;<i>
</I>&gt;<i> If you try:
</I>&gt;<i> DeclareQueue.exe localhost testqueue
</I>&gt;<i> do you have any more luck?
</I>&gt;<i>
</I>&gt;<i> Although RabbitMQ is listening to 0.0.0.0 there may be some hostname
</I>&gt;<i> resolution issues happening.
</I>&gt;<i>
</I>&gt;<i> Dave
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             Geoffrey Anderson
</I>&gt;<i>             &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mrcoder at yahoo.co</A>
</I>&gt;<i>             m&gt;                                                         To
</I>&gt;<i>             Sent by:                  <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i>             rabbitmq-discuss-                                          cc
</I>&gt;<i>             <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bounces at lists.rab</A>
</I>&gt;<i>             bitmq.com                                             Subject
</I>&gt;<i>                                       [rabbitmq-discuss] no connection
</I>&gt;<i>                                       established
</I>&gt;<i>             13/05/2008 17:53
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The rabbitmq server runs, it seems, but no connections are being accepted
</I>&gt;<i> by it,
</I>&gt;<i> from the java samples or dotnet sample programs or my own programs.
</I>&gt;<i>
</I>&gt;<i> For three days I have been trying everything imaginable to me to get any
</I>&gt;<i> client
</I>&gt;<i> program to connect to the rabbitmq server.  For example I disabled tcpv6
</I>&gt;<i> on
</I>&gt;<i> my
</I>&gt;<i> system and tried all manner of user permissions in the rabbitmq server for
</I>&gt;<i> 'guest'
</I>&gt;<i> and my custom account 'ga' which I gave all same permissions as 'guest'.
</I>&gt;<i>
</I>&gt;<i> The web site asks users to send a note to <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">legitimateconcern at rabbitmq.comif</A>
</I>&gt;<i> it takes
</I>&gt;<i> more than 2 minutes to connect.  Si I have sent a detailed note.  There
</I>&gt;<i> has
</I>&gt;<i> been no
</I>&gt;<i> response to it.
</I>&gt;<i>
</I>&gt;<i> The web site says  Please join our mailing list or send questions to
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">info at rabbitmq.com.</A> We'd love to hear from you.   I've subscribed and sent
</I>&gt;<i> a
</I>&gt;<i> detailed
</I>&gt;<i> message to the mailing list.  My email did not appear in the mailing list,
</I>&gt;<i> and no
</I>&gt;<i> responses came back.
</I>&gt;<i>
</I>&gt;<i> Nothing is working thus far, the mailing list, the feedback email, the
</I>&gt;<i> rabbitmq
</I>&gt;<i> connections.  This is my last attempt for anything to happen after which
</I>&gt;<i> rabbitmq
</I>&gt;<i> must be abandoned for lack of anything working.  More than three days of
</I>&gt;<i> time is too
</I>&gt;<i> much to spend into something and get nothing from it.
</I>&gt;<i>
</I>&gt;<i> To be clear, this message is solely intended as a reflection on my own
</I>&gt;<i> inabilities
</I>&gt;<i> and oversights, and nothing I am aware of is wrong with rabbitmq.com, the
</I>&gt;<i> rabbitmq
</I>&gt;<i> server, the documentation, the sample code, the mailing list, all of which
</I>&gt;<i> is
</I>&gt;<i> graciously offered at no cost, and works for others on the mailing list.
</I>&gt;<i>  I
</I>&gt;<i> do not
</I>&gt;<i> mean to upset anyone.
</I>&gt;<i>
</I>&gt;<i> My only intent is to ask for a nice person to volunteer their valuable
</I>&gt;<i> time
</I>&gt;<i> to share
</I>&gt;<i> information  with me that helps the rabbitmq server accept a connection
</I>&gt;<i> from any
</I>&gt;<i> client program. Java is OK, dotnet is OK, either one as you like, I'll
</I>&gt;<i> work
</I>&gt;<i> with
</I>&gt;<i> you.  I am a C# 2.0 programmer FWIW.  Windows XP-SP2 is the operating
</I>&gt;<i> system.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Details to demonstrate the RabbitMQ inability to accept a connection.
</I>&gt;<i> Maybe
</I>&gt;<i> this
</I>&gt;<i> info contains some clue to someone smarter than me, I don't know.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 1. Server is launched:
</I>&gt;<i>
</I>&gt;<i> C:\&gt;&quot;C:\rabbitmq\erl5.5.5\lib\rabbitmq_server-1.3.0
</I>&gt;<i> \sbin\rabbitmq-server.bat&quot;
</I>&gt;<i> RabbitMQ 1.3.0 (AMQP 8-0)
</I>&gt;<i> Copyright (C) 2007-2008 LShift Ltd., Cohesive Financial Technologies LLC.,
</I>&gt;<i> and
</I>&gt;<i> Rabbit Technologies Ltd.
</I>&gt;<i> Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>
</I>&gt;<i>
</I>&gt;<i> Logging to &quot;C:/Documents and Settings/ga/rabbitmq//log/rabbit.log&quot;
</I>&gt;<i> SASL logging to &quot;C:/Documents and
</I>&gt;<i> Settings/ga/rabbitmq//log/rabbit-sasl.log&quot;
</I>&gt;<i>
</I>&gt;<i> starting database             ...done
</I>&gt;<i> starting core processes       ...done
</I>&gt;<i> starting recovery             ...done
</I>&gt;<i> starting persister            ...done
</I>&gt;<i> starting builtin applications ...done
</I>&gt;<i> starting TCP listeners        ...done
</I>&gt;<i>
</I>&gt;<i> broker running
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2. Java sample program &quot;Tracer&quot; is launched:
</I>&gt;<i>
</I>&gt;<i> C:\rabbitmq\librabbitmq-java-1.3.0&gt;runjava.bat com.rabbitmq.tools.Tracer
</I>&gt;<i> Usage: Tracer [&lt;listenport&gt; [&lt;connecthost&gt; [&lt;connectport&gt;]]]
</I>&gt;<i> Invoked as: Tracer 5673 localhost 5672
</I>&gt;<i> com.rabbitmq.tools.Tracer.WITHHOLD_INBOUND_HEARTBEATS = false
</I>&gt;<i> com.rabbitmq.tools.Tracer.WITHHOLD_OUTBOUND_HEARTBEATS = false
</I>&gt;<i> com.rabbitmq.tools.Tracer.NO_ASSEMBLE_FRAMES = false
</I>&gt;<i> com.rabbitmq.tools.Tracer.NO_DECODE_FRAMES = false
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 3. Dotnet sample program is launched:
</I>&gt;<i>
</I>&gt;<i> C:\rabbitmq\rabbitmq-dotnet-1.2.8025.1832-net-2.0\bin&gt;DeclareQueue.exe
</I>&gt;<i> alpeduez
</I>&gt;<i> testqueue
</I>&gt;<i> None of the specified endpoints were reachable
</I>&gt;<i> Endpoints attempted:
</I>&gt;<i>  endpoint=amqp-0-<A HREF="9://alpeduez:5672,">9://alpeduez:5672,</A> attempts=1, outcome=AMQP server
</I>&gt;<i> protocol
</I>&gt;<i> negotiation failure: server version 0-8, t
</I>&gt;<i> ransport parameters -1:-1
</I>&gt;<i> Stack trace:
</I>&gt;<i>   at RabbitMQ.Client.ConnectionFactory.CreateConnection(Int32
</I>&gt;<i> maxRedirects,
</I>&gt;<i> AmqpTcpEndpoint[] endpoints)
</I>&gt;<i>   at RabbitMQ.Client.ConnectionFactory.CreateConnection(AmqpTcpEndpoint[]
</I>&gt;<i> endpoints)
</I>&gt;<i>   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String address)
</I>&gt;<i>   at RabbitMQ.Client.Examples.DeclareQueue.Main(String[] args)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 4.  Go look again to see if Tracer saw any traffic:
</I>&gt;<i>
</I>&gt;<i> C:\rabbitmq\librabbitmq-java-1.3.0&gt;runjava.bat com.rabbitmq.tools.Tracer
</I>&gt;<i> Usage: Tracer [&lt;listenport&gt; [&lt;connecthost&gt; [&lt;connectport&gt;]]]
</I>&gt;<i> Invoked as: Tracer 5673 localhost 5672
</I>&gt;<i> com.rabbitmq.tools.Tracer.WITHHOLD_INBOUND_HEARTBEATS = false
</I>&gt;<i> com.rabbitmq.tools.Tracer.WITHHOLD_OUTBOUND_HEARTBEATS = false
</I>&gt;<i> com.rabbitmq.tools.Tracer.NO_ASSEMBLE_FRAMES = false
</I>&gt;<i> com.rabbitmq.tools.Tracer.NO_DECODE_FRAMES = false
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It seems no traffic was detected during the dotnet sample program
</I>&gt;<i> execution.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 5. Do a netstat command to see if it looks like a server is really
</I>&gt;<i> listening.
</I>&gt;<i>
</I>&gt;<i> C:\rabbitmq\rabbitmq-dotnet-1.2.8025.1832-net-2.0\bin&gt;netstat
</I>&gt;<i>
</I>&gt;<i> Active Connections
</I>&gt;<i>
</I>&gt;<i>  Proto  Local Address          Foreign Address        State
</I>&gt;<i>  TCP    alpeduez:1800          localhost:4369         ESTABLISHED
</I>&gt;<i>  TCP    alpeduez:4369          localhost:1800         ESTABLISHED
</I>&gt;<i>  TCP    alpeduez:1802          alpeduez:5672          TIME_WAIT
</I>&gt;<i>
</I>&gt;<i> C:\rabbitmq\rabbitmq-dotnet-1.2.8025.1832-net-2.0\bin&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes there is something on alpeduez:5672 which is in a TIME_WAIT.  Maybe
</I>&gt;<i> that's OK,
</I>&gt;<i> maybe not.  I don't know what a normally working system netstat looks
</I>&gt;<i> like.
</I>&gt;<i> Do you
</I>&gt;<i> know what a netstat returns on a working rabbitmq system installation?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 6. I run my own C# software and attempt connection to rabbitmq.
</I>&gt;<i>
</I>&gt;<i> No connections are working and the error message talks about endpoints or
</I>&gt;<i> protocols.
</I>&gt;<i> Sorry I dont remember exactly, my bad.  The CreateConnection method on the
</I>&gt;<i> factory
</I>&gt;<i> is throwing the exception consistently on all input values.  I was using
</I>&gt;<i> Protocol.GetFromEnviroment and passing in my host name 'alpeduez' to the
</I>&gt;<i> CreateConnection method.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 7.  This is the whole contents of rabbit.log
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-May-2008::12:32:09 ===
</I>&gt;<i> disk_log: repairing &quot;c:/Documents and
</I>&gt;<i> Settings/ga/rabbitmq/db/rabbit-mnesia/rabbit_persister.LOG&quot; ...
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-May-2008::12:32:09 ===
</I>&gt;<i> Repaired persister log - 1 recovered, 0 bad
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-May-2008::12:32:09 ===
</I>&gt;<i> Rolling persister log to &quot;c:/Documents and
</I>&gt;<i> Settings/ga/rabbitmq/db/rabbit-mnesia/rabbit_persister.LOG.previous&quot;
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-May-2008::12:32:09 ===
</I>&gt;<i> started TCP listener on 0.0.0.0:5672
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-May-2008::12:39:39 ===
</I>&gt;<i> accepted TCP connection on 0.0.0.0:5672 from 192.168.1.100:1802
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 13-May-2008::12:39:39 ===
</I>&gt;<i> error on TCP connection from 192.168.1.100:1802
</I>&gt;<i> connection_closed_abruptly
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-May-2008::12:39:39 ===
</I>&gt;<i> closing TCP connection from 192.168.1.100:1802
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thank you for any clues or attempts to help me get a connection to
</I>&gt;<i> RabbitMQ.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Geoffrey
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *********************************************************************
</I>&gt;<i> This communication contains confidential information, some or all of which
</I>&gt;<i> may be privileged. It is for the intended recipient only and others must not
</I>&gt;<i> disclose, distribute, copy, print or rely on this communication. If an
</I>&gt;<i> addressing or transmission error has misdirected this communication, please
</I>&gt;<i> notify the sender by replying to this e-mail and then delete the e-mail.
</I>&gt;<i> E-mail sent to EDF Trading may be monitored by the company. Thank you.
</I>&gt;<i> EDF Trading Limited
</I>&gt;<i> 80 Victoria Street, 3rd Floor, Cardinal Place, London, SW1E 5JL
</I>&gt;<i> A Company registered in England No. 4255974.
</I>&gt;<i> Switchboard: 020 7061 4000
</I>&gt;<i> EDF Trading Markets Limited is a member of the EDF Trading Limited Group
</I>&gt;<i> and is authorised and regulated by the Financial Services Authority.
</I>&gt;<i> VAT number: GB 735 5479 07
</I>&gt;<i> *********************************************************************
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080513/f3a33848/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080513/f3a33848/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000832.html">[rabbitmq-discuss] no connection established
</A></li>
	<LI>Next message: <A HREF="000836.html">[rabbitmq-discuss] no connection established
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#833">[ date ]</a>
              <a href="thread.html#833">[ thread ]</a>
              <a href="subject.html#833">[ subject ]</a>
              <a href="author.html#833">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
