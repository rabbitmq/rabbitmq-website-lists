<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: RabbitMQ error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20RabbitMQ%20error&In-Reply-To=591B7B30-EE15-4B60-89F9-AED2728430FE%40mu.dk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000782.html">
   <LINK REL="Next"  HREF="000784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: RabbitMQ error</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20RabbitMQ%20error&In-Reply-To=591B7B30-EE15-4B60-89F9-AED2728430FE%40mu.dk"
       TITLE="[rabbitmq-discuss] Fwd: RabbitMQ error">matthias at lshift.net
       </A><BR>
    <I>Mon May  5 14:38:24 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000782.html">[rabbitmq-discuss] Fwd: RabbitMQ error
</A></li>
        <LI>Next message: <A HREF="000784.html">[rabbitmq-discuss] Fwd: RabbitMQ error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#783">[ date ]</a>
              <a href="thread.html#783">[ thread ]</a>
              <a href="subject.html#783">[ subject ]</a>
              <a href="author.html#783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael,

Michael Arnoldus wrote:
&gt;<i> Anyway, the result is &quot;too many processes&quot;.
</I>
A brute force way of checking on the currently running processes is

file:write_file(&quot;/tmp/processes.erl&quot;, io_lib:format(&quot;~p&quot;, 
[[process_info(P) || P &lt;- processes()]])).

Warning: this may include some message content and security credentials.

&gt;<i> So is there any way to ask RabbitMQ for the amount of connections? 
</I>&gt;<i> Channels? 
</I>
Not easily. It's on our todo list.

Connects/disconnects are recorded in rabbit.log, so with some log 
analysis you should be able to get an idea on the current connection 
count. Plus of course there's the 'netstat' OS command.

&gt;<i> Will rabbit create a new process for each connection? Channel?
</I>
RabbitMQ creates about half a dozen processes per connection, and four 
processes per channel.

&gt;<i> Any other suggestions on whats happening here?
</I>
Connections, channels and queues are the only entities performing 
dynamic process creation, except for the various places that spawn 
short-lived helper processes.

Are you sure that you haven't got stale queues lying around? I am asking 
because of the mnesia errors you are seeing - connection and channel 
creation does not result in mnesia writes, but queue creation does.


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000782.html">[rabbitmq-discuss] Fwd: RabbitMQ error
</A></li>
	<LI>Next message: <A HREF="000784.html">[rabbitmq-discuss] Fwd: RabbitMQ error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#783">[ date ]</a>
              <a href="thread.html#783">[ thread ]</a>
              <a href="subject.html#783">[ subject ]</a>
              <a href="author.html#783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
