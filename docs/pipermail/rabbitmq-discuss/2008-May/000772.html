<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] URGENT: Run-Tests failing...please help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20URGENT%3A%20Run-Tests%20failing...please%20help&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000794.html">
   <LINK REL="Next"  HREF="000773.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] URGENT: Run-Tests failing...please help</H1>
    <B>Lynton Grice</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20URGENT%3A%20Run-Tests%20failing...please%20help&In-Reply-To="
       TITLE="[rabbitmq-discuss] URGENT: Run-Tests failing...please help">lynton.grice at netweaverguru.com
       </A><BR>
    <I>Sun May  4 10:54:58 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000794.html">[rabbitmq-discuss] Starting the STOMP adapter automatically (was Re: STOMP adapter updated for RabbitMQ v1.3.0)
</A></li>
        <LI>Next message: <A HREF="000773.html">[rabbitmq-discuss] URGENT: Run-Tests failing...please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#772">[ date ]</a>
              <a href="thread.html#772">[ thread ]</a>
              <a href="subject.html#772">[ subject ]</a>
              <a href="author.html#772">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

 

I would REALLY appreciate some help on running the tests against the
broker..

 

Here is my setup:

 

I am running RabbitMQ 1.3.0 (AMQP 8-0)..and the broker is running on
LOCALHOST: 5672 (using 'LOGIN': 'guest', 'PASSWORD': 'guest') - so the
broker is running 100%..

 

I am using PYTHON to connect to the broker and am sending a message to the
broker and receiving a message from it again...all working 100%......

 

I have also installed the QPID library (qpid-1.0-incubating-M2-python-src)
into my site packages in Python (D:\Python24\Lib\site-packages)..and
obviously have run setup.py etc..all seems fine...

 

Then I go to the command line, for example
D:\Python24\Lib\site-packages\qpid-1.0-incubating-M2-python-src\python and
run python run-tests

 

I get many many errors...I also tried different variations of python
run-tests -? to try different SPEC files etc..still errors...here is the
stack trace...

 

File
&quot;D:\Python24\Lib\site-packages\qpid-1.0-incubating-M2-python-src\python\qpid
\testlib.py&quot;, line 123, in run

  result = runner.run(self.testSuite())

File &quot;D:\Python24\Lib\unittest.py&quot;, line 696, in run

  test(result)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 428, in __call__

  return self.run(*args, **kwds)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 424, in run

  test(result)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 428, in __call__

  return self.run(*args, **kwds)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 424, in run

  test(result)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 428, in __call__

  return self.run(*args, **kwds)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 424, in run

  test(result)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 281, in __call__

  return self.run(*args, **kwds)

File &quot;D:\Python24\Lib\unittest.py&quot;, line 251, in run

  self.setUp()

File
&quot;D:\Python24\Lib\site-packages\qpid-1.0-incubating-M2-python-src\python\qpid
\testlib.py&quot;, line 162, in setUp

  self.client = self.connect()

File
&quot;D:\Python24\Lib\site-packages\qpid-1.0-incubating-M2-python-src\python\qpid
\testlib.py&quot;, line 174, in connect

  return testrunner.connect(*args, **keys)

File
&quot;D:\Python24\Lib\site-packages\qpid-1.0-incubating-M2-python-src\python\qpid
\testlib.py&quot;, line 139, in connect

  client.start({&quot;LOGIN&quot;: user, &quot;PASSWORD&quot;: password})

File
&quot;D:\Python24\Lib\site-packages\qpid-1.0-incubating-M2-python-src\python\qpid
\client.py&quot;, line 82, in start

  self.wait()

File
&quot;D:\Python24\Lib\site-packages\qpid-1.0-incubating-M2-python-src\python\qpid
\client.py&quot;, line 60, in wait

  raise EOFError()

 

I have debugged the run-tests in WingIDE and it seems to CONNECT fine but
then it goes to the testlib.py class and dies on the client.start method.

 

def connect(self, host=None, port=None, spec=None, user=None,
password=None):

        &quot;&quot;&quot;Connect to the broker, returns a qpid.client.Client&quot;&quot;&quot;

        host = host or self.host

        port = port or self.port

        spec = spec or self.spec

        user = user or self.user

        password = password or self.password

        client = qpid.client.Client(host, port, qpid.spec.load(spec))

        client.start({&quot;LOGIN&quot;: user, &quot;PASSWORD&quot;: password})

        return client

 

Debugging further I can see it goes into the peer.py class and into the
following code:

 

def invoke(self, method, args, content = None):

    if self.closed:

      raise Closed(self.reason)

    frame = Frame(self.id, Method(method, *args))

    self.outgoing.put(frame)

 

    if method.content:

      if content == None:

        content = Content()

      self.write_content(method.klass, content, self.outgoing)

 

    try:

      # here we depend on all nowait fields being named nowait

      f = method.fields.byname[&quot;nowait&quot;]

      nowait = args[method.fields.index(f)]

    except KeyError:

      nowait = False

 

It dies on the above code f = method.fields.byname[&quot;nowait&quot;]...

 

I am sure this must be with some VERSION problem or something??

 

Can anyone PLEASE give me some advise, I would really appreciate it ;-)

 

Looking forward to hearing back from you!

 

Regards

 

Lynton

 

 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080504/25add454/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20080504/25add454/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000794.html">[rabbitmq-discuss] Starting the STOMP adapter automatically (was Re: STOMP adapter updated for RabbitMQ v1.3.0)
</A></li>
	<LI>Next message: <A HREF="000773.html">[rabbitmq-discuss] URGENT: Run-Tests failing...please help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#772">[ date ]</a>
              <a href="thread.html#772">[ thread ]</a>
              <a href="subject.html#772">[ subject ]</a>
              <a href="author.html#772">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
