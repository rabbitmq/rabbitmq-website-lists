<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] persistence
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20persistence&In-Reply-To=20080522180529.wfpd6ok1msgggg48%40mail.tu-chemnitz.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000888.html">
   <LINK REL="Next"  HREF="000891.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] persistence</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20persistence&In-Reply-To=20080522180529.wfpd6ok1msgggg48%40mail.tu-chemnitz.de"
       TITLE="[rabbitmq-discuss] persistence">alexis.richardson at cohesiveft.com
       </A><BR>
    <I>Fri May 30 16:31:51 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000888.html">[rabbitmq-discuss] persistence
</A></li>
        <LI>Next message: <A HREF="000891.html">[rabbitmq-discuss] TX for guarantees of completion (was Re:	persistence)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#892">[ date ]</a>
              <a href="thread.html#892">[ thread ]</a>
              <a href="subject.html#892">[ subject ]</a>
              <a href="author.html#892">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lars

Sorry - we did not answer this last week.

On Thu, May 22, 2008 at 5:05 PM, Lars Bachmann
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lars.bachmann at s2002.tu-chemnitz.de</A>&gt; wrote:
&gt;<i> Mathias,
</I>&gt;<i>
</I>&gt;<i> thank you for your help and all the information you gave me. Now my
</I>&gt;<i> task is to check some other mq brokers and in the end we ll see which
</I>&gt;<i> system fits our requirements the best. The work with rabbitmq was all
</I>&gt;<i> in all very satisfying except this channel bug. I hope it ll be fixed
</I>&gt;<i> soon, but let's first have a look on the problems of the other brokers
</I>&gt;<i> ;-).
</I>
Good luck - please do share your results with the list so that we can
all improve RabbitMQ and understand more use cases and deployment
scenarios.


&gt;<i> One more question. In the roadmap the jms integration is mentioned.
</I>&gt;<i> Will this be also realized in the next release of rabbitmq ?
</I>
Currently it is possible to run a subset of JMS against RabbitMQ by
using the Qpid M2.1 client.  This turns out to work quite well, and
gives you things like Spring integration, albeit confined to the
subset of cases.  The cases that are not supported yet are in the
further recesses of the JMS TCK.  The most awkward cases are
DTX and serverside Selectors which are addressed in versions of
the AMQP spec, such as 0-10.  We are just working through some
interop issue with other members of the WG which will reduce the
scope for variance in the cases not covered by Qpid M2.1.

Does that answer your question?

alexis


&gt;<i> Lars
</I>&gt;<i>
</I>&gt;&gt;<i> Lars,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Matthias Radestock wrote:
</I>&gt;&gt;&gt;<i> Lars Bachmann wrote:
</I>&gt;&gt;&gt;&gt;<i> In our company we comparing different messaging solutions and
</I>&gt;&gt;&gt;&gt;<i> rabbitmq seemed to be a good one, but the problems with the
</I>&gt;&gt;&gt;&gt;<i> presistent messages are unfortunatelly a big minus.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The problem actually isn't with persistent messaging, but with
</I>&gt;&gt;&gt;<i> sending lots of messages at a rate greater than the broker can
</I>&gt;&gt;&gt;<i> process, and building up backlogs of 10th of thousands of messages
</I>&gt;&gt;&gt;<i> in doing do. Persistence increases the workload and thus lowers the
</I>&gt;&gt;&gt;<i>  processing rate, which makes the problem more noticeable when
</I>&gt;&gt;&gt;<i> persistence is enabled.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The bug is not causing any difficulties in practice unless *all* of
</I>&gt;&gt;&gt;<i>  the following are true of your clients:
</I>&gt;&gt;&gt;<i> - they publish messages to the broker at a rate that significantly
</I>&gt;&gt;&gt;<i> exceeds the brokers processing capacity
</I>&gt;&gt;&gt;<i> - they sustain such a rate for a significant period of time (i.e.
</I>&gt;&gt;&gt;<i> not just a few second blip)
</I>&gt;&gt;&gt;<i> - they disconnect shortly after sending all these messages
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I forgot to mention that this is actually a grey area in the AMQP spec.
</I>&gt;&gt;<i> What RabbitMQ is doing is perfectly compliant. We have initiated a
</I>&gt;&gt;<i> discussion in the the AMQP working group to get the spec clarified.
</I>&gt;&gt;<i> Independently of that, as I mentioned, we will fix the the problem in
</I>&gt;&gt;<i> the next release.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I should also point out that AMQP's basic.publish is fundamentally
</I>&gt;&gt;<i> asynchronous and thus limited in the guarantees it provides. You get
</I>&gt;&gt;<i> stronger guarantees when wrapping your publish requests in transactions
</I>&gt;&gt;<i> (see channel.tx{Select,Commit,Rollback}() in the Java API). The server
</I>&gt;&gt;<i> guarantees that persistent messages have been written to disk by the
</I>&gt;&gt;<i> time it returns tx.commit-ok, though obviously this carries a
</I>&gt;&gt;<i> performance penalty.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Matthias.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>


-- 
Alexis Richardson
+44 20 7617 7339 (UK)
+44 77 9865 2911 (cell)
+1 650 206 2517 (US)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000888.html">[rabbitmq-discuss] persistence
</A></li>
	<LI>Next message: <A HREF="000891.html">[rabbitmq-discuss] TX for guarantees of completion (was Re:	persistence)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#892">[ date ]</a>
              <a href="thread.html#892">[ thread ]</a>
              <a href="subject.html#892">[ subject ]</a>
              <a href="author.html#892">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
