<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Load balancing exchange
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20exchange&In-Reply-To=48A9B0C2.1050503%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001172.html">
   <LINK REL="Next"  HREF="001174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Load balancing exchange</H1>
    <B>Petr Sturc</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Load%20balancing%20exchange&In-Reply-To=48A9B0C2.1050503%40lshift.net"
       TITLE="[rabbitmq-discuss] Load balancing exchange">petr.sturc at gmail.com
       </A><BR>
    <I>Tue Aug 19 16:15:47 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001172.html">[rabbitmq-discuss] Load balancing exchange
</A></li>
        <LI>Next message: <A HREF="001174.html">[rabbitmq-discuss] Secure file transfer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1179">[ date ]</a>
              <a href="thread.html#1179">[ thread ]</a>
              <a href="subject.html#1179">[ subject ]</a>
              <a href="author.html#1179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,

this could be a clue, thanks. I also changed the consumer to do
basicGet instead of basicConsume and seems to work better,
the queue size is different from zero. I will need to try to
understand how the basicConsume works. I was throttling the consumer
doing a pause in the callback handler. This gave me feeling of slow
reception, but probably from the rabbit point of view, the messages
are delivered, just not acknowledged. I'll will look at it.

Thanks,
Petr

On Mon, Aug 18, 2008 at 7:26 PM, Matthias Radestock &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at lshift.net</A>&gt; wrote:
&gt;<i> Petr,
</I>&gt;<i>
</I>&gt;<i> Petr Sturc wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am trying following (in the route function)
</I>&gt;&gt;<i> in order to get queue length
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  {ok,_,QLen,_} = rabbit_amqqueue:stat( #amqqueue{pid = QPid}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> , but QLen is always zero for all bound queues.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Any idea what I am doing wrong?
</I>&gt;<i>
</I>&gt;<i> The above looks fine, and if you look at the code behind it you will see
</I>&gt;<i> that there really isn't much that can go wrong here.
</I>&gt;<i>
</I>&gt;<i> Note however that delivered-but-unacknowledged messages are not included in
</I>&gt;<i> the message count - could that explain why you see a zero count when you
</I>&gt;<i> don't expect to?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001172.html">[rabbitmq-discuss] Load balancing exchange
</A></li>
	<LI>Next message: <A HREF="001174.html">[rabbitmq-discuss] Secure file transfer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1179">[ date ]</a>
              <a href="thread.html#1179">[ thread ]</a>
              <a href="subject.html#1179">[ subject ]</a>
              <a href="author.html#1179">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
