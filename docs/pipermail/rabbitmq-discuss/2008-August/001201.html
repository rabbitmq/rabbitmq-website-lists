<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ/AMQP understanding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/AMQP%20understanding&In-Reply-To=ecfbfea90808220557m2fb4c1b1n56c1cf75990ea6c9%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001200.html">
   <LINK REL="Next"  HREF="001202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ/AMQP understanding</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/AMQP%20understanding&In-Reply-To=ecfbfea90808220557m2fb4c1b1n56c1cf75990ea6c9%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ/AMQP understanding">0x6e6562 at gmail.com
       </A><BR>
    <I>Fri Aug 22 14:05:40 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001200.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
        <LI>Next message: <A HREF="001202.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1201">[ date ]</a>
              <a href="thread.html#1201">[ thread ]</a>
              <a href="subject.html#1201">[ subject ]</a>
              <a href="author.html#1201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Torben,

On Fri, Aug 22, 2008 at 1:57 PM, Torben Hoffmann
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">torben.lehoff at googlemail.com</A>&gt; wrote:

&gt;<i> Here is the basic problem I need to solve - see attached picture:
</I>&gt;<i> A, B and C are all members of the same group G and when they send messages
</I>&gt;<i> to each other in the group the group ID is used as the target address in the
</I>&gt;<i> message.
</I>&gt;<i>
</I>&gt;<i> (In case the attached picture does not arrive: A is located at machine M1, B
</I>&gt;<i> @ M2 and C @ M3.)
</I>&gt;<i>
</I>&gt;<i> So when A sends Msg to the group G it has to be routed to B and C where ever
</I>&gt;<i> they may be. As you can see A sends Msg to M1 which notices that it is
</I>&gt;<i> targeted to the group G and M1 then finds out that there are group members
</I>&gt;<i> of G at the machines M2 and M3, hence it sends Msg to M2 and M3. At the
</I>&gt;<i> receiving machines - M2 and M3 - the message is then delivered to the
</I>&gt;<i> members of the group attached to the machine.
</I>

This *sounds* like a simple fanout exchange scenario. Fanout exchanges
are one of the basic exchange types in AMQP. It could also be achieved
using other exchange types, depending on what the specific
requirements are.

&gt;<i>
</I>&gt;<i> The na&#239;ve approach would be to create a queue for the group G and have all
</I>&gt;<i> group members subscribe to that queue.
</I>&gt;<i> Questions:
</I>&gt;<i>
</I>&gt;<i>    1. Does the sender receives its own message though the queue?
</I>
Not quite sure what you mean with this. Are you asking whether a
producer gets an echo of each message it sends by default? In general
nobody will receive a message unless it is consuming from a queue that
messages are routed to.

&gt;<i>    2. Is there a way to notify clients like B and C that there is a message
</I>&gt;<i> for them in one of their queues? Or do you have to poll the queue to find
</I>&gt;<i> out if there is something for you? (Basically this is a question of using a
</I>&gt;<i> interrupt like thing vs polling.)
</I>
If a client subscribes to a queue, the channel will deliver messages
to it as and when they are routed, so there is no need to poll
explicitly. If for some reason you need to poll, there is a method
called basic.get which allows you to poll a queue.

BTW, are you asking this question in the context of the API of a MOM
system that you have used in the past?


&gt;<i>
</I>&gt;<i> Now for the deployment: I cannot use a single AMQP server to handle all of
</I>&gt;<i> this since the load would be too high to meet the strict performance
</I>&gt;<i> requirements in place so some sort of distribution of the work must be done.
</I>&gt;<i>
</I>&gt;<i> My initial understanding leads me to say that for the attached problem I
</I>&gt;<i> should create a cluster consisting of M1, M2 and M3 and then just let
</I>&gt;<i> RabbitMQ deal with all the nitty gritty details.
</I>
You can set up a cluster of Rabbit broker instances. This is explained
in more detail in the clustering guide:
<A HREF="http://www.rabbitmq.com/clustering.html">http://www.rabbitmq.com/clustering.html</A>

&gt;<i> Is that a correct understanding of how to use RabbitMQ to address the basic
</I>&gt;<i> problem?
</I>
Without wanting to assume anything from the attachment, the impression
arises that you are thinking of an MQ-Series topology with
transmission queues.

You don't necessarily need to do that with AMQP. You could treat a
broker or cluster of brokers as a single logical instance that clients
connect to in order to subscribe to queues.

Please let me know if this answers your question.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001200.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
	<LI>Next message: <A HREF="001202.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1201">[ date ]</a>
              <a href="thread.html#1201">[ thread ]</a>
              <a href="subject.html#1201">[ subject ]</a>
              <a href="author.html#1201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
