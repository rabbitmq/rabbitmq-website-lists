<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Our fight against scammers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Our%20fight%20against%20scammers&In-Reply-To=7acec0a40808081152v13d6806s2af594f3e669042c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001144.html">
   <LINK REL="Next"  HREF="001153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Our fight against scammers</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Our%20fight%20against%20scammers&In-Reply-To=7acec0a40808081152v13d6806s2af594f3e669042c%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Our fight against scammers">alexis.richardson at cohesiveft.com
       </A><BR>
    <I>Mon Aug 11 15:24:02 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001144.html">[rabbitmq-discuss] Our fight against scammers
</A></li>
        <LI>Next message: <A HREF="001153.html">[rabbitmq-discuss] Our fight against scammers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1150">[ date ]</a>
              <a href="thread.html#1150">[ thread ]</a>
              <a href="subject.html#1150">[ subject ]</a>
              <a href="author.html#1150">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Guillaume

What can I say .. other than Thanks Very Much :-)

I don't think any use case is 'overkill' if it has a business benefit.
 Let us all know how you get on or if you take this further.

Cheers

alexis


On Fri, Aug 8, 2008 at 7:52 PM, Guillaume Theoret &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">smokinn at gmail.com</A>&gt; wrote:
&gt;<i> First off, I'd like to thank you for this wonderful tool, it's being
</I>&gt;<i> put to good use!
</I>&gt;<i>
</I>&gt;<i> I thought you might be interested in knowing how we're using it at my
</I>&gt;<i> company as part of a system to identify and rid ourselves of scammers.
</I>&gt;<i>
</I>&gt;<i> It used to be that scammers were easy to spot. An account is created
</I>&gt;<i> and immediately mass messages a huge number of others. Suspicious.
</I>&gt;<i> Those accounts were flagged and banned.
</I>&gt;<i>
</I>&gt;<i> Also, before I even started working here they'd taken a sort of
</I>&gt;<i> scorched earth approach to scam prevention. Scammers usually came from
</I>&gt;<i> ips in places like nigeria, south africa, etc so thanks to the wonders
</I>&gt;<i> of geoip location entire countries were banned. So the scammers got
</I>&gt;<i> smarter. Instead they created multiple accounts that waited a bit and
</I>&gt;<i> sent a small number of messages. Harder to spot but not impossible.
</I>&gt;<i> Multiple accounts created from the same ip aren't always scammers
</I>&gt;<i> (could simply be a nat) but they often are so they were flagged for
</I>&gt;<i> review. They also used proxies to create the accounts which finally
</I>&gt;<i> putting them under the radar entirely.
</I>&gt;<i>
</I>&gt;<i> Here's where RabbitMQ comes in. I've just finished a new filtering
</I>&gt;<i> system where, each time a message is sent, the web server queues up
</I>&gt;<i> the sender's message history into RabbitMQ. At the other end I have a
</I>&gt;<i> consumer that takes the message, feeds it into crm114 and gets a
</I>&gt;<i> result. If it looked scammy I write a log entry in the database for a
</I>&gt;<i> moderator to later review. If it turns out to be a false positive it
</I>&gt;<i> puts the message history back into the queue, the consumer gets it
</I>&gt;<i> back and updates the &quot;good&quot; file. Whenever we have a human report or
</I>&gt;<i> other algorithmic matches (I also check message similarity for
</I>&gt;<i> possible template spam) that are confirmed by a moderator it puts the
</I>&gt;<i> message history into the queue and the consumer takes it out and
</I>&gt;<i> updates the &quot;bad&quot; file.
</I>&gt;<i>
</I>&gt;<i> I tried out both the python py-amqplib and RabbitMQ java clients but
</I>&gt;<i> I'm currently using the java client because it's a whole lot faster.
</I>&gt;<i> Normally I would have much preferred to write my producer and consumer
</I>&gt;<i> in python but the speed increase was worth writing a little java code.
</I>&gt;<i> With the java client I'm getting incredibly good throughput, so much
</I>&gt;<i> so that I imagine we'll be able to stay with a single consumer for a
</I>&gt;<i> while. This system isn't live yet so the only throughput numbers I
</I>&gt;<i> have is running everything (the server, producer and consumer) on my
</I>&gt;<i> average-horsepower laptop but even if it were deployed to my laptop it
</I>&gt;<i> would probably be enough for now. (It won't be though we're getting it
</I>&gt;<i> a beefy server of course and I'll have a better idea of the real
</I>&gt;<i> numbers once the machine arrives.) On my laptop I can send ~8800
</I>&gt;<i> messages/sec and I can consume &amp; process ~300 messages/sec.
</I>&gt;<i>
</I>&gt;<i> The way I'm running everything right now is basically like this:
</I>&gt;<i>
</I>&gt;<i> The producer is installed on the web servers and listens on a local
</I>&gt;<i> socket. It blindly forwards everything it gets to a RabbitMQ queue.
</I>&gt;<i> Basically I did it this way just because there aren't any php
</I>&gt;<i> libraries available.
</I>&gt;<i>
</I>&gt;<i> When the php messaging module is hit, it delivers the message as
</I>&gt;<i> usual, but it also forwards the message history to the producer on a
</I>&gt;<i> local socket. (This step is most probably going to be changed to a
</I>&gt;<i> cron job before deployment but for now on the dev platform it's
</I>&gt;<i> running like this)
</I>&gt;<i>
</I>&gt;<i> The consumer has its own box with crm114 installed. (The RabbitMQ
</I>&gt;<i> server will probably be installed on this box as well.) It waits on
</I>&gt;<i> the queue and processes the histories based on crm114 output.
</I>&gt;<i>
</I>&gt;<i> Of course, using RabbitMQ for such a simple scenario is probably
</I>&gt;<i> incredible overkill (though not really when seen from an effort
</I>&gt;<i> perspective since it was actually reasonably easy to learn, set up and
</I>&gt;<i> get going) when I could've easily used something like beanstalkd given
</I>&gt;<i> that guaranteed delivery isn't all that important but this was really
</I>&gt;<i> just a proof-of-concept for a (probably sooner rather than) later
</I>&gt;<i> project of writing our own financial transaction processing that of
</I>&gt;<i> course needs to be much more rigorous.
</I>&gt;<i>
</I>&gt;<i> Also, this many-producer (we have a bunch of web servers) one-listener
</I>&gt;<i> scenario is fine for now but later on we're most probably going to
</I>&gt;<i> need more than one box for message analysis. This is where I run into
</I>&gt;<i> a distribution problem and where crm114 will shine. For now what I
</I>&gt;<i> feed into the queue is an xml message with an action to be performed
</I>&gt;<i> (pick, learnbad, learngood), an optional member id and a message
</I>&gt;<i> history. Why this won't scale to many consumers is that crm114 keeps
</I>&gt;<i> its &quot;good&quot; and &quot;bad&quot; database as a statistics file on disk. Later,
</I>&gt;<i> when I need more consumer boxes I can easily refactor this to one box
</I>&gt;<i> that listens on a learn queue and, whenever it updates a file (these
</I>&gt;<i> are rare since it's human moderators that generate these updates),
</I>&gt;<i> drops the modified file into the queue that all pick consumers are
</I>&gt;<i> listening on and they can all replace the right statistics file by the
</I>&gt;<i> new one.
</I>&gt;<i>
</I>&gt;<i> So all this to say that I am pleased to report that RabbitMQ is what
</I>&gt;<i> I'm going to highly recommend we build the financial processing
</I>&gt;<i> project around. Thanks a lot for the amazing work.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001144.html">[rabbitmq-discuss] Our fight against scammers
</A></li>
	<LI>Next message: <A HREF="001153.html">[rabbitmq-discuss] Our fight against scammers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1150">[ date ]</a>
              <a href="thread.html#1150">[ thread ]</a>
              <a href="subject.html#1150">[ subject ]</a>
              <a href="author.html#1150">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
