<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ/AMQP understanding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/AMQP%20understanding&In-Reply-To=ecfbfea90808220631i7934e7eas33630b92a4fe1411%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001203.html">
   <LINK REL="Next"  HREF="001208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ/AMQP understanding</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ/AMQP%20understanding&In-Reply-To=ecfbfea90808220631i7934e7eas33630b92a4fe1411%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ/AMQP understanding">0x6e6562 at gmail.com
       </A><BR>
    <I>Fri Aug 22 15:25:51 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001203.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
        <LI>Next message: <A HREF="001208.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1205">[ date ]</a>
              <a href="thread.html#1205">[ thread ]</a>
              <a href="subject.html#1205">[ subject ]</a>
              <a href="author.html#1205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Torben,

On Fri, Aug 22, 2008 at 2:31 PM, Torben Hoffmann
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">torben.lehoff at googlemail.com</A>&gt; wrote:

&gt;<i> Not sure what a MOM system is, but I am trying to map the functionality of a
</I>&gt;<i> legacy system to AMQP since I think it could save a lot of effort and money.
</I>
MOM = Message-oriented middleware

&gt;<i> For my basic problem I would like to have a queue for the group G that I can
</I>&gt;<i> send to and then all members of the queue (bar the sender) will receive that
</I>&gt;<i> message.
</I>
As indicated in my previous mail, one way this can be achieved is
using a fanout exchange.

[Taken from the spec] The fanout exchange type works as follows:

1. A message queue binds to the exchange with no arguments.
2. A publisher sends the exchange a message.
3. The message is passed to the message queue unconditionally.

Here is a simple example using the Ruby client for AMQP:

<A HREF="http://github.com/tmm1/amqp/tree/master/examples/mq/clock.rb">http://github.com/tmm1/amqp/tree/master/examples/mq/clock.rb</A>

Although this is a Ruby example, the basic principle of a creating a
queue, binding it to an exchange and subscribing a consumer to it hold
true of any client language. I just used this as an example because it
is a quick link.

&gt;<i> It does not matter if I have one or more logical instances, but from a
</I>&gt;<i> architectural perspective I think that it would be best to have a single
</I>&gt;<i> logical instance so that I could utilise the distribution mechanisms of
</I>&gt;<i> RabbitMQ without knowing about the topology at the application level.
</I>&gt;<i>
</I>&gt;<i> If I have more than one server how would the messages be distributed?
</I>
This is achieved using OTP distribution mechanisms with some
AMQP/Rabbit-specific optimizations between nodes.

In *very* loose terms, a client opens a channel on a particular node
and this broker-side channel creates a communication link between
itself and the underlying queue *instance*, wherever that may
physically reside. If it declares a queue that doesn't already exist,
the queue will be created locally, if it already exists it *may*
already reside on another node, but OTP message passing keeps this
transparent.

&gt;<i> If I have a AMQP server at each of my machines and user A sends a message to
</I>&gt;<i> the group G how would that message be routed to  B and C? How should the
</I>&gt;<i> servers be connected/configured to allow that routing?
</I>
G would be the name an exchange and B &amp; C create queues and bind them
to the exchange G.

As indicated above this could be a simple fanout, but a direct
exchange with multiple bindings would work as well.

Note that you do not necessarily need an AMQP instance on machine that
clients run on. Multiple remote clients can connect to a single broker
instance.

&gt;<i> Note that I could have hundreds of machines but I will send the message to
</I>&gt;<i> the few of them that has a member of the group registered at the machine.
</I>
When you say you have hundreds of machines, do you mean machines that
you will use to run consumer processes on?

The size of your broker cluster will depend (amongst other factors) on
the amount of messages you need the system to be able to handle.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001203.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
	<LI>Next message: <A HREF="001208.html">[rabbitmq-discuss] RabbitMQ/AMQP understanding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1205">[ date ]</a>
              <a href="thread.html#1205">[ thread ]</a>
              <a href="subject.html#1205">[ subject ]</a>
              <a href="author.html#1205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
