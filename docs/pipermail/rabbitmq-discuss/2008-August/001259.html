<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Gracefully shutting down rabbitmq
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Gracefully%20shutting%20down%20rabbitmq&In-Reply-To=e1c05edd0808290104m1275719dv8f90920423453d96%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001257.html">
   <LINK REL="Next"  HREF="001258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Gracefully shutting down rabbitmq</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Gracefully%20shutting%20down%20rabbitmq&In-Reply-To=e1c05edd0808290104m1275719dv8f90920423453d96%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Gracefully shutting down rabbitmq">0x6e6562 at gmail.com
       </A><BR>
    <I>Fri Aug 29 14:20:29 BST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001257.html">[rabbitmq-discuss] Gracefully shutting down rabbitmq
</A></li>
        <LI>Next message: <A HREF="001258.html">[rabbitmq-discuss] Stomp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1259">[ date ]</a>
              <a href="thread.html#1259">[ thread ]</a>
              <a href="subject.html#1259">[ subject ]</a>
              <a href="author.html#1259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Aman,

On Fri, Aug 29, 2008 at 9:04 AM, Aman Gupta &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at tmm1.net</A>&gt; wrote:
&gt;<i> I am only running one rabbitmq node. When I want to shutdown, I run
</I>&gt;<i> another node named rabbitmq_controller to send rabbitmq the shutdown
</I>&gt;<i> command. Rabbit gets the command, starts the shutdown process and then
</I>&gt;<i> fails with that error.
</I>&gt;<i>
</I>&gt;<i> This happens everytime I try to shutdown.
</I>
OK, I'll have a look into that.

As side issue, can you be more specific about what part of the process
is actually taking 20 mins?

You wrote:

&gt;<i>Logging to &quot;logs/rabbitmq-9580.log&quot;
</I>&gt;<i>SASL logging to &quot;rabbitmq-9580-sasl.log&quot;
</I>&gt;<i>
</I>&gt;<i>starting database             ...done
</I>&gt;<i>starting core processes       ...done
</I>&gt;<i>starting recovery             ...
</I>&gt;<i>
</I>&gt;<i>This can take almost 20 minutes.
</I>
I assume from your output that the 20 min wait is for the recovery
phase. During this phase, all of the durable exchanges and queues are
recovered. Do you know how many of each do you have? Also, did you
intend to have so many durable objects, bearing in mind the cost of
maintaining them?

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001257.html">[rabbitmq-discuss] Gracefully shutting down rabbitmq
</A></li>
	<LI>Next message: <A HREF="001258.html">[rabbitmq-discuss] Stomp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1259">[ date ]</a>
              <a href="thread.html#1259">[ thread ]</a>
              <a href="subject.html#1259">[ subject ]</a>
              <a href="author.html#1259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
