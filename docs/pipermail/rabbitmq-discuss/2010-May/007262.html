<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20configuration&In-Reply-To=AANLkTimc9V7BDuk45eHSIsPo6hEg6kJf_dh0J72laO6I%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007260.html">
   <LINK REL="Next"  HREF="007264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ configuration</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20configuration&In-Reply-To=AANLkTimc9V7BDuk45eHSIsPo6hEg6kJf_dh0J72laO6I%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ configuration">matthew at lshift.net
       </A><BR>
    <I>Thu May 13 10:45:39 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007260.html">[rabbitmq-discuss] RabbitMQ configuration
</A></li>
        <LI>Next message: <A HREF="007264.html">[rabbitmq-discuss] RabbitMQ configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7262">[ date ]</a>
              <a href="thread.html#7262">[ thread ]</a>
              <a href="subject.html#7262">[ subject ]</a>
              <a href="author.html#7262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Roaan,

On Thu, May 13, 2010 at 06:57:19AM +0200, Roaan Vos wrote:
&gt;<i> We've been having problems with RabbitMQ just &quot;hanging&quot;.
</I>&gt;<i> This is with the default installation, i.e no configuration.
</I>
It's likely you've run out of memory and Rabbit's raised the
channel.flow flag, preventing you from publishing more messages to it.
Check the logs for memory high watermark warnings. This issue is fixed
with the new persister branch as messages can be sent to disk and
forgotten from RAM.

&gt;<i> Can any one help with a configuration file or point me to where I can find
</I>&gt;<i> information on how to configure RabbitMQ.
</I>
There's not a great deal you can do to fix this issue other than
compiling from source with the new persister branch (bug21673), or
installing much more memory.

&gt;<i> We're running RabbitMQ 1.7.2 on a single node on Windows 2008 Server.
</I>
Windows is a bad idea because there is no 64-bit Erlang available. As
such, it doesn't matter how much RAM you have installed, only 2GB will
be available to Rabbit. If you need to use Windows then your only
solution will be to use the new persister branch (but compiling under
Windows is involved to say the least - you'll need to start with
cygwin). Really we'd recommend a Linux server here.

That said, all my assumptions may be totally wrong - how many messages
(and what size) are you buffering in Rabbit? Are you correctly acking
messages when you're consuming them?

&gt;<i> Also we're aiming on having about 10 thousand clients (connections) each
</I>&gt;<i> with their own queue. (Using Topics)
</I>&gt;<i> Is this feasable?
</I>
Connections - yes. You will probably need to raise the process limit -
about a million should be fine. Under non-Windows this would involve
putting SERVER_START_ARGS=&quot;+P 1048576&quot; into the rabbitmq.conf file
(which normally lives under /etc/rabbitmq). However, because of lack of
features of Windows BAT files, there is no such .conf file, so you need
to set the environment variable RABBITMQ_SERVER_START_ARGS and set the
value to &quot;+P 1048576&quot;. That should do the trick.

Topic exchanges are inefficient in our current implementation. It's not
normally necessary to use them either - unless your domain of routing
keys really is unbounded. Can you describe more about your use case and
we should be able to advise you further.

Matthew

</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007260.html">[rabbitmq-discuss] RabbitMQ configuration
</A></li>
	<LI>Next message: <A HREF="007264.html">[rabbitmq-discuss] RabbitMQ configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7262">[ date ]</a>
              <a href="thread.html#7262">[ thread ]</a>
              <a href="subject.html#7262">[ subject ]</a>
              <a href="author.html#7262">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
