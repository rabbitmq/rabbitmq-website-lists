<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] MTU
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20MTU&In-Reply-To=h2j5ef296b31005091436wbde9ee25x2138b69b8e3de475%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007165.html">
   <LINK REL="Next"  HREF="007167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] MTU</H1>
    <B>Martin Sustrik</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20MTU&In-Reply-To=h2j5ef296b31005091436wbde9ee25x2138b69b8e3de475%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] MTU">sustrik at 250bpm.com
       </A><BR>
    <I>Sun May  9 23:08:30 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007165.html">[rabbitmq-discuss] MTU
</A></li>
        <LI>Next message: <A HREF="007167.html">[rabbitmq-discuss] MTU
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7166">[ date ]</a>
              <a href="thread.html#7166">[ thread ]</a>
              <a href="subject.html#7166">[ subject ]</a>
              <a href="author.html#7166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gustavo Aquino wrote:
&gt;<i> Martin,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Sun, May 9, 2010 at 6:02 PM, Martin Sustrik &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sustrik at 250bpm.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sustrik at 250bpm.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>     Gustavo,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>         Thanks but today we are trying to get this information by this
</I>&gt;<i>         hard way. I'm trying to get a help here, someone may have done
</I>&gt;<i>         it before or RabbitMQ owners can have this number and will help
</I>&gt;<i>         me to get back time loosed hacking packages network.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Per-message overhead for AMQP/0-8 is 50+ bytes.
</I>&gt;<i> 
</I>&gt;<i> Thanks, do you know if RabbitMQ cover this pattern ?
</I>
Sure. It's minimal size of envelope for AMQP/0-8. Actual envelope may be 
larger depending on what you put into it (exchange name, topic etc.)

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>         This number is very important, and have significant differences
</I>&gt;<i>         between AMQP implementations. Just for example the Qpid package
</I>&gt;<i>         have a oversize in message larger than RabbitMQ until you can
</I>&gt;<i>         send 32k messages per second using 100mbps you can do only 16k
</I>&gt;<i>         messages per second with Qpid with the same 100mbps. (Messages
</I>&gt;<i>         with 213bytes).
</I>&gt;<i> 
</I>&gt;<i>         Resuming If you will have a high throughput and need high
</I>&gt;<i>         performance make sure that you will not want to use jumbo frame.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     It's very unlikely that MTU size setting will have any impact on
</I>&gt;<i>     performance in your scenario.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> If you use jumbo frame you have a significant impact in your round trip, 
</I>&gt;<i> and make sure we are working to save microseconds/nanoseconds and a 
</I>&gt;<i> simple overhead in round trip message impact us so much. 
</I>&gt;<i> 
</I>&gt;<i> Again the MTU question is to do some calc to refine our network 
</I>&gt;<i> configurations, not a simple configuration in Ethernet interface, a 
</I>&gt;<i> network admin use this calc to project your network to a specific 
</I>&gt;<i> requirement, and when you are talking in microseconds/nanoseconds this 
</I>&gt;<i> configuration made a big difference. For example we are getting bad 
</I>&gt;<i> performance in one of our nodes, and we discovered that router was 
</I>&gt;<i> configured for 576 MTU the result is an overhead of 0.500 us each 
</I>&gt;<i> message with one specific throughput. 
</I>
0.5 us is presumably less than 1% of overall latency. In fact, it's 
pretty hard even to measure that kind of latency difference. Just the 
latency jitter is going to be many times higher than that.

What exactly are you trying to achieve? And what are you measuring?

Martin

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007165.html">[rabbitmq-discuss] MTU
</A></li>
	<LI>Next message: <A HREF="007167.html">[rabbitmq-discuss] MTU
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7166">[ date ]</a>
              <a href="thread.html#7166">[ thread ]</a>
              <a href="subject.html#7166">[ subject ]</a>
              <a href="author.html#7166">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
