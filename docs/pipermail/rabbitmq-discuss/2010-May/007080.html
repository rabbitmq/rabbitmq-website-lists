<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unbinding when not bound
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Unbinding%20when%20not%20bound&In-Reply-To=AANLkTiknC5LjkK4AceCfeSVPwp5nIqY6xPeYmKmvo93b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007075.html">
   <LINK REL="Next"  HREF="007093.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unbinding when not bound</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Unbinding%20when%20not%20bound&In-Reply-To=AANLkTiknC5LjkK4AceCfeSVPwp5nIqY6xPeYmKmvo93b%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Unbinding when not bound">emile at rabbitmq.com
       </A><BR>
    <I>Thu May  6 15:24:39 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007075.html">[rabbitmq-discuss] Unbinding when not bound
</A></li>
        <LI>Next message: <A HREF="007093.html">[rabbitmq-discuss] Unbinding when not bound
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7080">[ date ]</a>
              <a href="thread.html#7080">[ thread ]</a>
              <a href="subject.html#7080">[ subject ]</a>
              <a href="author.html#7080">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Roaan,

If you are concerned about receiving messages asynchronously between 
binding and unbinding the queue then you could cancel the subscription 
first. Be aware that messages may still end up in the queue, even if 
they are not delivered. It would of course be preferable to avoid the 
entire sequence (cancel subscription, bind, unbind) if there was no 
binding in the first place.

Another approach is to allow the exception to occur and recover from it 
by re-establishing the connection.


-Emile




Roaan Vos wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> On second thought, I don't think that will work.
</I>&gt;<i> 
</I>&gt;<i> If I first do the binding, the client will likely receive data he didn't 
</I>&gt;<i> intend before being able to remove the binding.
</I>&gt;<i> 
</I>&gt;<i> Since consuming messages off of the queue is happening asynchronously, 
</I>&gt;<i> while the bind/unbind happens on a different connection I think the 
</I>&gt;<i> above is quite possible.
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> Roaan
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 6 May 2010 13:20, Emile Joubert &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Hi Roaan,
</I>&gt;<i> 
</I>&gt;<i>     The broker is required to raise a connection exception if an unbind
</I>&gt;<i>     fails, so you are describing expected behaviour.
</I>&gt;<i> 
</I>&gt;<i>     Duplicate bindings will be ignored, so you can prevent the exception
</I>&gt;<i>     by performing a (possibly duplicate) binding immediately prior to
</I>&gt;<i>     unbind.
</I>&gt;<i> 
</I>&gt;<i>     The client is expected to keep track of bindings under normal
</I>&gt;<i>     circumstances though. I assume this is impossible in your case - can
</I>&gt;<i>     you explain why?
</I>&gt;<i> 
</I>&gt;<i>     -Emile
</I>&gt;<i> 
</I>&gt;<i>     Roaan Vos wrote:
</I>&gt;<i> 
</I>&gt;<i>         Hi,
</I>&gt;<i> 
</I>&gt;<i>          
</I>&gt;<i>         I currently allow clients to &#8220;bind&#8221; and &#8220;unbind&#8221; to various
</I>&gt;<i>         topics as needed using the .net client.
</I>&gt;<i> 
</I>&gt;<i>         However, when the client &#8220;unbinds&#8221; without first having done a
</I>&gt;<i>         bind, RabbitMQ throws an exception and the connection seems to
</I>&gt;<i>         disappear.
</I>&gt;<i> 
</I>&gt;<i>         Is there a way for it to keep the connection (or not throw an
</I>&gt;<i>         exception)?
</I>&gt;<i> 
</I>&gt;<i>          
</I>&gt;<i>         Thanks
</I>&gt;<i> 
</I>&gt;<i>          
</I>&gt;<i>         Roaan
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>         ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>         rabbitmq-discuss mailing list
</I>&gt;<i>         <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i>         &lt;mailto:<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
</I>&gt;<i>         <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007075.html">[rabbitmq-discuss] Unbinding when not bound
</A></li>
	<LI>Next message: <A HREF="007093.html">[rabbitmq-discuss] Unbinding when not bound
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7080">[ date ]</a>
              <a href="thread.html#7080">[ thread ]</a>
              <a href="subject.html#7080">[ subject ]</a>
              <a href="author.html#7080">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
