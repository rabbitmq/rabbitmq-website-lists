<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] request for help!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20request%20for%20help%21&In-Reply-To=4BE279C3.6020903%40250bpm.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007066.html">
   <LINK REL="Next"  HREF="007068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] request for help!</H1>
    <B>Rafael Schloming</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20request%20for%20help%21&In-Reply-To=4BE279C3.6020903%40250bpm.com"
       TITLE="[rabbitmq-discuss] request for help!">rafaels at redhat.com
       </A><BR>
    <I>Thu May  6 16:10:00 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007066.html">[rabbitmq-discuss] request for help!
</A></li>
        <LI>Next message: <A HREF="007068.html">[rabbitmq-discuss] request for help!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7083">[ date ]</a>
              <a href="thread.html#7083">[ thread ]</a>
              <a href="subject.html#7083">[ subject ]</a>
              <a href="author.html#7083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Martin Sustrik wrote:
&gt;<i> Alexis,
</I>&gt;<i> 
</I>&gt;&gt;<i> As part of an ongoing drive to &quot;be more open&quot; as well as to &quot;get to
</I>&gt;&gt;<i> 1.0&quot; the AMQP Working Group has published the 1-0 PR3 draft on the
</I>&gt;&gt;<i> webs for Public Comment:
</I>&gt;&gt;<i> <A HREF="http://www.amqp.org/confluence/download/attachments/2523279/amqp_1-0_PR3.pdf">http://www.amqp.org/confluence/download/attachments/2523279/amqp_1-0_PR3.pdf</A>
</I>&gt;<i> 
</I>&gt;<i> Great you are bringing this to the public attention!
</I>&gt;<i> 
</I>&gt;<i> We've discussed this before, so I'm going to repeat myself for the sake 
</I>&gt;<i> of people on the mailing list...
</I>&gt;<i> 
</I>&gt;<i>  From my point of view there are two crucial issues with AMQP/1.0:
</I>&gt;<i> 
</I>&gt;<i> 1. Messy layering. Almost every concept is discussed at multiple places. 
</I>&gt;<i> It's very hard to understand the specification in its current form. (To 
</I>&gt;<i> be fair, one piece is nicely and consistently separated. The codec.)
</I>
A bit more detail would help on this point. I suspect at least some of 
this impression is due to the organization of the information as opposed 
to the technical layering, and specifics would help tease that out.

&gt;<i> 2. Assumption that messages are stored on the node in unordered fashion 
</I>&gt;<i> shifts AMQP from being message queueing protocol to being database 
</I>&gt;<i> protocol. This blurs AMQP's mission, makes it compete with SQL and 
</I>&gt;<i> causes implementation to be extremely costly and complex. We should 
</I>&gt;<i> follow the good old &quot;do one thing and do it well&quot; principle and focus on 
</I>&gt;<i> defining MQ behaviour rather than DB behaviour.
</I>
This isn't our intention with nodes. We're certainly not trying to say 
that you MUST assume every kind of node stores all messages in an 
unordered way.

What we're trying to say is that the messaging protocol doesn't actually 
need to know anything at all about the internal behavior of a node in 
order to ship messages to/from it. A node might behave as a strict FIFO 
queue, or it might be a producer that generates messages whenever the 
moon is full. Either way, the details are irrelevant to the process of 
transferring that message across the wire. So in a real sense we're 
trying to say as little as possible about nodes in general.

I think this is actually an example of strong layering and makes the 
protocol very easy to implement as it is equally easy to retrofit it to 
something that stores messages for archival vs something that stores 
messages for distribution (or indeed something that doesn't even store 
messages at all).

Additionally the symmetric nature of the protocol requires that we be 
very careful about what we require of nodes in general since there is a 
node at both ends of any link, which generally means the first and last 
nodes in any path through the AMQP network are client applications which 
can obviously behave in any way they like.

If you look at how the term &quot;node&quot; is used throughout the transport, 
you'll see that in some sense it's really just a synonym for whatever 
application happens to be using the messaging protocol, whether that 
application is a queue inside a broker or some part of a client library.

I think where this does start getting a bit confused is in the messaging 
book where the term &quot;node&quot; is used in a more specific sense to refer to 
a certain kind of entity within a broker-like container. This area 
should probably define more specific terms to talk about these more 
specific kinds of node.

Overall I think your concerns about implementation complexity are more 
related to how we define the specific types of nodes that constitute the 
required set to be considered an &quot;AMQP Broker&quot;, and this is not 
something that the core protocol itself defines.

--Rafael

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007066.html">[rabbitmq-discuss] request for help!
</A></li>
	<LI>Next message: <A HREF="007068.html">[rabbitmq-discuss] request for help!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7083">[ date ]</a>
              <a href="thread.html#7083">[ thread ]</a>
              <a href="subject.html#7083">[ subject ]</a>
              <a href="author.html#7083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
