<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Scalability?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Scalability%3F&In-Reply-To=4BE4101C.7090209%40dataraker.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007127.html">
   <LINK REL="Next"  HREF="007102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Scalability?</H1>
    <B>David Wragg</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Scalability%3F&In-Reply-To=4BE4101C.7090209%40dataraker.com"
       TITLE="[rabbitmq-discuss] Scalability?">david at rabbitmq.com
       </A><BR>
    <I>Fri May  7 14:23:01 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007127.html">[rabbitmq-discuss] Scalability?
</A></li>
        <LI>Next message: <A HREF="007102.html">[rabbitmq-discuss] Really bizarre startup issue...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7130">[ date ]</a>
              <a href="thread.html#7130">[ thread ]</a>
              <a href="subject.html#7130">[ subject ]</a>
              <a href="author.html#7130">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wayne Van Den Handel &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">wvandenhandel at dataraker.com</A>&gt; writes:
&gt;<i>    Mathew explained everything with the high memory watermark setting. The
</I>&gt;<i>    machine is not dedicated to RabbitMQ and is running other things.
</I>&gt;<i>    Erlang thinks it can have 40% of memory which I guess can go to 80%
</I>&gt;<i>    before forcing GC. On this machine RabbitMQ crashes well before it
</I>&gt;<i>    reaches 80% as that much memory is not available.
</I>&gt;<i>    I argue that is a poor assumption for a default setting. Nothing should
</I>&gt;<i>    assume out of the box it can have 80% of physical memory (regardless of
</I>&gt;<i>    what is running). I hope the new persister takes away some of those
</I>&gt;<i>    assumptions. It should be smart enough to work with the memory
</I>&gt;<i>    available.
</I>
Matthew knows more about Erlang behaviour than I do, but I don't find
that explanation very satisfying, given your description of the
problem.  It sounds odd that the Erlang VM would expand to the memory
limit before attempting a GC.  I would expect it to GC long before
that limit was reached, so that in your case, the limit never would be
reached.

And although the default memory limit percentage is based on the
assumption that rabbit has the machine to itself, it's certainly not
my experience that you need to dedicate a machine to rabbit for it to
operate robustly.

So if you are willing to invest the time in turning your python code
into something you are willing to share with us, I'd be happy to look
at it.

David

-- 
David Wragg
Staff Engineer, RabbitMQ
SpringSource, a division of VMware

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007127.html">[rabbitmq-discuss] Scalability?
</A></li>
	<LI>Next message: <A HREF="007102.html">[rabbitmq-discuss] Really bizarre startup issue...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7130">[ date ]</a>
              <a href="thread.html#7130">[ thread ]</a>
              <a href="subject.html#7130">[ subject ]</a>
              <a href="author.html#7130">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
