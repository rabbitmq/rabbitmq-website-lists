<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Cloning%20RHEL%20VM%27s%20with%20pre-installed%20Rabbit.&In-Reply-To=635E976302C55647BE5A8369ACBB5122011D02AE1079%40TTRAFLONVS01.global.trafigura.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007309.html">
   <LINK REL="Next"  HREF="007312.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Cloning%20RHEL%20VM%27s%20with%20pre-installed%20Rabbit.&In-Reply-To=635E976302C55647BE5A8369ACBB5122011D02AE1079%40TTRAFLONVS01.global.trafigura.com"
       TITLE="[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.">emile at rabbitmq.com
       </A><BR>
    <I>Thu May 20 11:47:48 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007309.html">[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
</A></li>
        <LI>Next message: <A HREF="007312.html">[rabbitmq-discuss] Erlang has closed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7344">[ date ]</a>
              <a href="thread.html#7344">[ thread ]</a>
              <a href="subject.html#7344">[ subject ]</a>
              <a href="author.html#7344">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Keith,

Keith Davies wrote:
&gt;<i> We have a number of development and qa environments.  We have created a 
</I>&gt;<i> VMWare image with Rabbit pre-installed.  In order to create a new 
</I>&gt;<i> environment we have been cloning this image.  What we are finding is 
</I>&gt;<i> that all the clones seem to be finding each other and joining together 
</I>&gt;<i> to create a cluster.  Although we will most likely want this behaviour 
</I>&gt;<i> when we go to production we would like our development and qa 
</I>&gt;<i> environments to be completely stand alone.  Ideally we would also like 
</I>&gt;<i> to change the VMWare image so that all clones get this behaviour by 
</I>&gt;<i> default without any manual intervention.
</I>
Nodes should not cluster automatically without explicit configuration. 
Can you confirm that the &quot;nodes&quot; and &quot;running_nodes&quot; output from 
&quot;rabbitmqctl status&quot; contain all the nodes you expect?

And what was in the cluster_nodes.config file of the image that got 
cloned? Are all the hostnames of the cloned images different?

&gt;<i> Our clustering behaviour may be due to the fact that all our clones are 
</I>&gt;<i> have the same &#8220;.erlang.cookie&#8221;.
</I>
Having the same erlang cookie file is necessary, but not sufficient for 
rabbit clustering.

&gt;<i> My question to you guys is.  Is there a preferred approach to being able 
</I>&gt;<i> to deal with Rabbit and VMWare images.  Alternatively is there a way to 
</I>&gt;<i> ensure clustering is turned off in our VMWare image.  Apologies if this 
</I>&gt;<i> is a really simple question but I am relatively new to the clustering 
</I>&gt;<i> side of Rabbit.
</I>
Ensuring that hosts have different erlang cookies will prevent 
clustering. Firewalling the port used by the erlang port mapper (4369 by 
default) should do the same. But none of that should be necessary if no 
clustering was set up to start with.

Please let us know the outcome or if you have any further questions.

Regards

Emile




</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007309.html">[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
</A></li>
	<LI>Next message: <A HREF="007312.html">[rabbitmq-discuss] Erlang has closed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7344">[ date ]</a>
              <a href="thread.html#7344">[ thread ]</a>
              <a href="subject.html#7344">[ subject ]</a>
              <a href="author.html#7344">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
