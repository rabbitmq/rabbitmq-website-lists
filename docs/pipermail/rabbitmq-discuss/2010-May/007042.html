<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and a two-site deployment connected via	WAN.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20a%20two-site%20deployment%20connected%20via%0A%09WAN.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007265.html">
   <LINK REL="Next"  HREF="007043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and a two-site deployment connected via	WAN.</H1>
    <B>Daniel Pittman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20a%20two-site%20deployment%20connected%20via%0A%09WAN.&In-Reply-To="
       TITLE="[rabbitmq-discuss] RabbitMQ and a two-site deployment connected via	WAN.">daniel at rimspace.net
       </A><BR>
    <I>Tue May  4 11:29:59 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007265.html">[rabbitmq-discuss] shovel terminating, channel.flow_ok?
</A></li>
        <LI>Next message: <A HREF="007043.html">[rabbitmq-discuss] RabbitMQ and a two-site deployment connected via	WAN.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7042">[ date ]</a>
              <a href="thread.html#7042">[ thread ]</a>
              <a href="subject.html#7042">[ subject ]</a>
              <a href="author.html#7042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>G'day.

I am looking at deploying RabbitMQ to provide messaging services inside, and
between, our two sites using both the AMQP and STOMP interfaces.

As far as I can tell we have two choices for deploying this:

1. Use an Erlang cluster over the WAN, as a single instance of RabbitMQ

2. Use the 'shovel' extension to push messages between two distinct RabbitMQ
   clusters, one at each site.

The only real discussion I can find about this is from 35 weeks ago, where the
comment was that using shovel might better handle a situation where the WAN
was down, but that it was not production ready.


My impression is that, generally speaking, we are likely to be best served by
using an Erlang cluster over the network: the WAN is fairly reliable, and will
soon have two redundant paths, further reducing the risk of a split cluster.


Am I correct in my understanding that using RabbitMQ in this way means:

Clients will connect to their local RabbitMQ node, and when they create a
queue it will exist only on that specific node.

Erlang will route messages to the correct node, either inside the site or over
the WAN as required.

Erlang and/or RabbitMQ will ensure that only one copy of a message traverses
the WAN, even if there are multiple recipients at the remote site.

Erlang and RabbitMQ will recover from a brief interruption of clustering, such
as a reboot of the server at one site, without manual intervention.


Further, is there anything useful that I can read about Erlang and RabbitMQ
WAN clustering?  My research, to date, has not given me much to learn from,
which makes me wonder what hidden complexity I might be risking...

        Daniel
-- 
&#10019; Daniel Pittman            &#9993; <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">daniel at rimspace.net</A>            &#9742; +61 401 155 707
               &#9853; made with 100 percent post-consumer electrons


</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007265.html">[rabbitmq-discuss] shovel terminating, channel.flow_ok?
</A></li>
	<LI>Next message: <A HREF="007043.html">[rabbitmq-discuss] RabbitMQ and a two-site deployment connected via	WAN.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7042">[ date ]</a>
              <a href="thread.html#7042">[ thread ]</a>
              <a href="subject.html#7042">[ subject ]</a>
              <a href="author.html#7042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
