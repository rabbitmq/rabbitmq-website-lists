<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Sematics of ACK/REQUEUE/DISCARD on a message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Sematics%20of%20ACK/REQUEUE/DISCARD%20on%20a%20message&In-Reply-To=4BE1B027.5080407%40zopyx.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007052.html">
   <LINK REL="Next"  HREF="007062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Sematics of ACK/REQUEUE/DISCARD on a message</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Sematics%20of%20ACK/REQUEUE/DISCARD%20on%20a%20message&In-Reply-To=4BE1B027.5080407%40zopyx.com"
       TITLE="[rabbitmq-discuss] Sematics of ACK/REQUEUE/DISCARD on a message">matthew at lshift.net
       </A><BR>
    <I>Wed May  5 20:03:22 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007052.html">[rabbitmq-discuss] Sematics of ACK/REQUEUE/DISCARD on a message
</A></li>
        <LI>Next message: <A HREF="007062.html">[rabbitmq-discuss] Sematics of ACK/REQUEUE/DISCARD on a message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7053">[ date ]</a>
              <a href="thread.html#7053">[ thread ]</a>
              <a href="subject.html#7053">[ subject ]</a>
              <a href="author.html#7053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, May 05, 2010 at 07:51:35PM +0200, Andreas Jung wrote:
&gt;<i> Two questions:
</I>&gt;<i> 
</I>&gt;<i> - - assuming a consumer could process a message with success - what is
</I>&gt;<i>   the difference in the message handling inside the queue between
</I>&gt;<i>   acknowledging it or discarding it - it will be removed from the queue
</I>&gt;<i>   in both cases?!
</I>
If you don't ack it, it will be retained by RabbitMQ and will be
redelivered to some other consumer eventually when your current
consumer cancels/dies.

&gt;<i> - - assuming a consumer could not process a message properly (e.g. some
</I>&gt;<i>   database backend down) and is interested to re-try this message later.
</I>&gt;<i>   In this case I would requeue the message. At which position in the
</I>&gt;<i>   queue will the message be inserted? At the end of the queue?
</I>
Basic.reject is not implemented. Calling basic.recover{requeue=true}
will requeue all non-acknowledged messages outstanding on the current
*channel*. Note this is not queue specific.

The specification is silent as to where in the queues the messages
should be reentered and you should not rely on any particular behaviour.
Currently RabbitMQ requeues messages at the end of the queue (i.e. they
behave like new publishes), but that can change.

Matthew

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007052.html">[rabbitmq-discuss] Sematics of ACK/REQUEUE/DISCARD on a message
</A></li>
	<LI>Next message: <A HREF="007062.html">[rabbitmq-discuss] Sematics of ACK/REQUEUE/DISCARD on a message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7053">[ date ]</a>
              <a href="thread.html#7053">[ thread ]</a>
              <a href="subject.html#7053">[ subject ]</a>
              <a href="author.html#7053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
