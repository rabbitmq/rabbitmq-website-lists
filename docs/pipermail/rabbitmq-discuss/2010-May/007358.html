<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ failover and message loss
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20failover%20and%20message%20loss&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007357.html">
   <LINK REL="Next"  HREF="007359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ failover and message loss</H1>
    <B>Radha Krishnan D</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%20failover%20and%20message%20loss&In-Reply-To="
       TITLE="[rabbitmq-discuss] RabbitMQ failover and message loss">RadhakrishnanD at ivycomptech.com
       </A><BR>
    <I>Fri May 21 14:25:57 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007357.html">[rabbitmq-discuss] Startup errors redux
</A></li>
        <LI>Next message: <A HREF="007359.html">[rabbitmq-discuss] RabbitMQ failover and message loss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7358">[ date ]</a>
              <a href="thread.html#7358">[ thread ]</a>
              <a href="subject.html#7358">[ subject ]</a>
              <a href="author.html#7358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

Hi,

 

I have 2 brokers clustered with each other.  They are load balanced by
having a HA proxy before them.

Let us call the brokers as B1 and B2.

 

The HAproxy is in the same machine as B1.

 

The producer P1 and consumer C1 are on different machines.

 

The model we are using is amq.direct  and all the messages are non
persistent. All our  messages are mandatory=true and immediate=false.

 

Initially we start the broker B1 alone.  The broker B2 is down.

We start P1 and C1. They are now connected to the broker B1. 

We start C1 and then P1. after 3-4 seconds, we start B2.

After B2 starts, We immediately crash B1. 

Now both P1 and C1 get connected to B2 and the test continues till we
stop all three.

 

Now, during the failover time we find message losses.

 

Is it expected  or can we make sure that no message gets lost.

 

 

Also, when will be  channel.setReturnListener  called ? 

Will it be called when the message does not reach the queue from the
exchange or when the message does reach the consumer from the queue ?

 

 

In the clustered mode, exchanges are global across rabbitmq nodes .. are
the queues also global ?

Please clear us. We are confused about the global nature of queues !! 

 

 

 

 

Thanks and Regards,

D.Radhakrishnan
Trainee Engineer-Architecture

IVY Comptech Private Limited
Cyber Spazio,Road No 2, Banjara Hills, 
Hyderabad-500034, Andhra Pradesh. 

Phone + 91 (40) 66721000 - 4638
Mobile + 91 (0) 9030842104

This email and any attachments are confidential, legally privileged and
protected by copyright. If you are not the intended recipient,
dissemination or copying this email is prohibited. If you have received
this in error, please notify the sender by replying by email and then
delete the email completely from your system.

Any views or opinions are solely those of  the sender. This
communication is not intended to form a binding contract unless
expressly indicated to the contrary and properly authorized. Any actions
taken on the basis of this email are at recipient's own risk. 

 


This email is sent for and on behalf of Ivy Comptech Private Limited. Ivy Comptech Private Limited is a limited liability company.  

This email and any attachments are confidential, and may be legally privileged and protected by copyright. If you are not the intended recipient dissemination or copying of this email is prohibited. If you have received this in error, please notify the sender by replying by email and then delete the email completely from your system. 
Any views or opinions are solely those of the sender.  This communication is not intended to form a binding contract on behalf of Ivy Comptech Private Limited unless expressly indicated to the contrary and properly authorised. Any actions taken on the basis of this email are at the recipient's own risk.

Registered office:
Ivy Comptech Private Limited, Cyber Spazio, Road No. 2, Banjara Hills, Hyderabad 500 033, Andhra Pradesh, India. Registered number: 37994. Registered in India. A list of members' names is available for inspection at the registered office.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100521/e9843123/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100521/e9843123/attachment.htm</A> 
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007357.html">[rabbitmq-discuss] Startup errors redux
</A></li>
	<LI>Next message: <A HREF="007359.html">[rabbitmq-discuss] RabbitMQ failover and message loss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7358">[ date ]</a>
              <a href="thread.html#7358">[ thread ]</a>
              <a href="subject.html#7358">[ subject ]</a>
              <a href="author.html#7358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
