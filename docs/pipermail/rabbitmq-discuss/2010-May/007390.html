<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Caching proxy for cloud HA
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Caching%20proxy%20for%20cloud%20HA&In-Reply-To=yrv4ck4qrsl8z.fsf%40dwragg.eng.vmware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007389.html">
   <LINK REL="Next"  HREF="007391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Caching proxy for cloud HA</H1>
    <B>Jon Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Caching%20proxy%20for%20cloud%20HA&In-Reply-To=yrv4ck4qrsl8z.fsf%40dwragg.eng.vmware.com"
       TITLE="[rabbitmq-discuss] Caching proxy for cloud HA">jon.brisbin at npcinternational.com
       </A><BR>
    <I>Tue May 25 23:12:00 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007389.html">[rabbitmq-discuss] Caching proxy for cloud HA
</A></li>
        <LI>Next message: <A HREF="007391.html">[rabbitmq-discuss] Caching proxy for cloud HA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7390">[ date ]</a>
              <a href="thread.html#7390">[ thread ]</a>
              <a href="subject.html#7390">[ subject ]</a>
              <a href="author.html#7390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On May 25, 2010, at 4:51 PM, David Wragg wrote:

&gt;<i> What you describe doesn't seem feasible for AMQP, at least in
</I>&gt;<i> general.  Matthias mentioned a few reasons, but I expect it's possible
</I>&gt;<i> to come up with many more objections.
</I>
I wasn't really looking at AMQP specifically. In my mind, a TCP proxy like HAProxy is just that. It hooks two bytes streams together. On one end is a client that needs to talk to a broker. On the other end are n number of brokers who can talk to the client. The HA in this case is very application and protocol agnostic. It would seem to the broker that a client was directly connected.

&gt;<i> It might be possible to get further by making application-specific
</I>&gt;<i> assumptions.  For example, if you know that certain messages are part of
</I>&gt;<i> idempotent or cacheable request-response exchanges.  But once you start
</I>&gt;<i> making such assumptions, it's questionable what the result has to do
</I>&gt;<i> with AMQP.  Why not just use an application-specific protocol instead,
</I>&gt;<i> or HTTP, which explicitly covers issues such as cacheability and
</I>&gt;<i> idempotency?
</I>
That just doesn't sound like fun at all! :)

I'm not interested in re-inventing new protocols to transmit my data. I'm interested in starting n number of clones of a virtual machine on which I have RabbitMQ installed and providing one (or all) of those brokers to a client that needs to send or consume messages and shielding the client from having to know who is active and who isn't. It's a basic cloud scenario where membership in a functional group is dynamic and changeable over time. I don't see that this has anything at all to do with AMQP as a protocol. I'm thinking strictly in terms of TCP byte streams to whatever broker is active. Long-term (and pie-in-the-sky) it would be nice to have all these brokers work together as a unit, but I know that's a long way off. Basic clustering works for me at the size and amount of traffic I give it, so using HAProxy to front these servers seems to approximate very closely what I'm wanting here. What I was thinking was basically HAProxy (which I hadn't heard of until recently) but RabbitMQ-specific.

It might even be possible to write an HAProxy handler so you could do acl's for AMQP like you do for TCP and HTTP! :) With dynamic reconfiguration, that would be killer...

Jon Brisbin
Portal Webmaster
NPC International, Inc.




</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007389.html">[rabbitmq-discuss] Caching proxy for cloud HA
</A></li>
	<LI>Next message: <A HREF="007391.html">[rabbitmq-discuss] Caching proxy for cloud HA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7390">[ date ]</a>
              <a href="thread.html#7390">[ thread ]</a>
              <a href="subject.html#7390">[ subject ]</a>
              <a href="author.html#7390">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
