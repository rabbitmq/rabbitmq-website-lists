<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Startup errors redux
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Startup%20errors%20redux&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007388.html">
   <LINK REL="Next"  HREF="007352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Startup errors redux</H1>
    <B>Sam Odio</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Startup%20errors%20redux&In-Reply-To="
       TITLE="[rabbitmq-discuss] Startup errors redux">so at facebook.com
       </A><BR>
    <I>Fri May 21 07:52:23 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007388.html">[rabbitmq-discuss] Pika and Channel.Flow
</A></li>
        <LI>Next message: <A HREF="007352.html">[rabbitmq-discuss] Startup errors redux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7351">[ date ]</a>
              <a href="thread.html#7351">[ thread ]</a>
              <a href="subject.html#7351">[ subject ]</a>
              <a href="author.html#7351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I installed the rpm on Centos 5.2 (note the warning):
# rpm -i ./rabbitmq-server-1.7.2-1.i386.rpm
warning: ./rabbitmq-server-1.7.2-1.i386.rpm: Header V4 DSA signature: NOKEY, key ID 056e8e56

I then started rabbitmq-server:
# /etc/init.d/rabbitmq-server start
Starting rabbitmq-server: FAILED - check /var/log/rabbitmq/startup_log, _err
rabbitmq-server.

startup_log contents:
{&quot;init terminating in do_boot&quot;,{{nocatch,{error,{cannot_start_application,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{undef,[{base64,encode_to_string,[&lt;&lt;16 bytes&gt;&gt;]},{rabbit,print_banner,0},{rabbit,start,2},{application_master,start_it_old,4}]}}}}}}},[{init,start_it,1},{init,start_em,1}]}}

startup_err contents:
Error: {node_start_failed,normal}
^M
Crash dump was written to: erl_crash.dump^M
init terminating in do_boot ()^M

it appears epmd is running:
# ps aux | grep rabbit
rabbitmq 11007  0.0  0.0  10568   384 ?        S    23:21   0:00 /usr/lib64/erlang/erts-5.5.2/bin/epmd -daemon

Yet...
# /usr/sbin/rabbitmqctl status
Status of node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at facerecwebi064</A> ...
Error: unable to connect to node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at facerecwebi064</A>: nodedown
diagnostics:
- nodes and their ports on facerecwebi064: [{rabbitmqctl17860,60369}]
- current node: <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl17860 at facerecwebi064</A>
- current node home dir: /var/lib/rabbitmq
{&quot;init terminating in do_boot&quot;,{undef,[{base64,encode_to_string,[&lt;&lt;16 bytes&gt;&gt;]},{rabbit_control,print_badrpc_diagnostics,1},{rabbit_control,start,0},{init,start_it,1},{init,start_em,1}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot ()

I'd include erl_crash.dump but it's 17,185 lines.  I did take Matthias' suggestion&lt;<A HREF="http://markmail.org/message/ofw3i3zj5qjcxfns">http://markmail.org/message/ofw3i3zj5qjcxfns</A>&gt; and captured epmd's logs:
epmd: Thu May 20 22:38:47 2010: epmd running - daemon = 0
epmd: Thu May 20 22:39:01 2010: ** got ALIVE2_REQ
epmd: Thu May 20 22:39:01 2010: registering 'rabbitmq_multi29522:2', port 40086
epmd: Thu May 20 22:39:01 2010: type 77 proto 0 highvsn 5 lowvsn 5
epmd: Thu May 20 22:39:01 2010: ** sent ALIVE2_RESP for &quot;rabbitmq_multi29522&quot;
epmd: Thu May 20 22:39:01 2010: ** got PORT2_REQ
epmd: Thu May 20 22:39:01 2010: ** sent PORT2_RESP (error) for &quot;rabbit&quot;
epmd: Thu May 20 22:39:01 2010: ** got PORT2_REQ
epmd: Thu May 20 22:39:01 2010: ** sent PORT2_RESP (error) for &quot;rabbit&quot;
epmd: Thu May 20 22:39:01 2010: ** got ALIVE2_REQ
epmd: Thu May 20 22:39:01 2010: registering 'rabbit:2', port 60848
epmd: Thu May 20 22:39:01 2010: type 77 proto 0 highvsn 5 lowvsn 5
epmd: Thu May 20 22:39:01 2010: ** sent ALIVE2_RESP for &quot;rabbit&quot;
epmd: Thu May 20 22:39:01 2010: unregistering 'rabbit:2', port 60848
epmd: Thu May 20 22:39:01 2010: unregistering 'rabbitmq_multi29522:2', port 40086
epmd: Thu May 20 22:39:09 2010: ** got ALIVE2_REQ
epmd: Thu May 20 22:39:09 2010: registering 'rabbitmqctl29640:1', port 45937
epmd: Thu May 20 22:39:09 2010: type 77 proto 0 highvsn 5 lowvsn 5
epmd: Thu May 20 22:39:09 2010: ** sent ALIVE2_RESP for &quot;rabbitmqctl29640&quot;
epmd: Thu May 20 22:39:09 2010: ** got PORT2_REQ
epmd: Thu May 20 22:39:09 2010: ** sent PORT2_RESP (error) for &quot;rabbit&quot;
epmd: Thu May 20 22:39:09 2010: ** got NAMES_REQ
epmd: Thu May 20 22:39:09 2010: ** sent NAMES_RESP
epmd: Thu May 20 22:39:09 2010: unregistering 'rabbitmqctl29640:1', port 45937
epmd: Thu May 20 22:42:17 2010: ** got ALIVE2_REQ
epmd: Thu May 20 22:42:17 2010: registering 'rabbitmqctl30412:3', port 56622
epmd: Thu May 20 22:42:17 2010: type 77 proto 0 highvsn 5 lowvsn 5
epmd: Thu May 20 22:42:17 2010: ** sent ALIVE2_RESP for &quot;rabbitmqctl30412&quot;
epmd: Thu May 20 22:42:17 2010: ** got PORT2_REQ
epmd: Thu May 20 22:42:17 2010: ** sent PORT2_RESP (error) for &quot;rabbit&quot;
epmd: Thu May 20 22:42:17 2010: ** got NAMES_REQ
epmd: Thu May 20 22:42:17 2010: ** sent NAMES_RESP
epmd: Thu May 20 22:42:17 2010: unregistering 'rabbitmqctl30412:3', port 56622
epmd: Thu May 20 22:42:41 2010: ** got ALIVE2_REQ
epmd: Thu May 20 22:42:41 2010: registering 'rabbitmq_multi30554:3', port 63390
epmd: Thu May 20 22:42:41 2010: type 77 proto 0 highvsn 5 lowvsn 5
epmd: Thu May 20 22:42:41 2010: ** sent ALIVE2_RESP for &quot;rabbitmq_multi30554&quot;
epmd: Thu May 20 22:42:41 2010: ** got PORT2_REQ
epmd: Thu May 20 22:42:41 2010: ** sent PORT2_RESP (error) for &quot;rabbit&quot;
epmd: Thu May 20 22:42:41 2010: ** got PORT2_REQ
epmd: Thu May 20 22:42:41 2010: ** sent PORT2_RESP (error) for &quot;rabbit&quot;
epmd: Thu May 20 22:42:41 2010: ** got ALIVE2_REQ
epmd: Thu May 20 22:42:41 2010: reusing slot with same name 'rabbit'
epmd: Thu May 20 22:42:41 2010: registering 'rabbit:3', port 50197
epmd: Thu May 20 22:42:41 2010: type 77 proto 0 highvsn 5 lowvsn 5
epmd: Thu May 20 22:42:41 2010: ** sent ALIVE2_RESP for &quot;rabbit&quot;
epmd: Thu May 20 22:42:41 2010: unregistering 'rabbit:3', port 50197

Where should I go from here?  Google is of no help...

-s


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100520/8ae7dd39/attachment-0001.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100520/8ae7dd39/attachment-0001.htm</A> 
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007388.html">[rabbitmq-discuss] Pika and Channel.Flow
</A></li>
	<LI>Next message: <A HREF="007352.html">[rabbitmq-discuss] Startup errors redux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7351">[ date ]</a>
              <a href="thread.html#7351">[ thread ]</a>
              <a href="subject.html#7351">[ subject ]</a>
              <a href="author.html#7351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
