<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Cloning%20RHEL%20VM%27s%20with%20pre-installed%20Rabbit.&In-Reply-To=635E976302C55647BE5A8369ACBB5122011D02D65E41%40TTRAFLONVS01.global.trafigura.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007345.html">
   <LINK REL="Next"  HREF="007353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Cloning%20RHEL%20VM%27s%20with%20pre-installed%20Rabbit.&In-Reply-To=635E976302C55647BE5A8369ACBB5122011D02D65E41%40TTRAFLONVS01.global.trafigura.com"
       TITLE="[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.">emile at rabbitmq.com
       </A><BR>
    <I>Thu May 20 17:28:56 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007345.html">[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
</A></li>
        <LI>Next message: <A HREF="007353.html">[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7346">[ date ]</a>
              <a href="thread.html#7346">[ thread ]</a>
              <a href="subject.html#7346">[ subject ]</a>
              <a href="author.html#7346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hi Keith,

Keith Davies wrote:
&gt;<i> Hi Emile
</I>&gt;<i>  
</I>&gt;<i> Thanks very much for the reply.  Just to let you know we are using 
</I>&gt;<i> rabbit 1.7.1.  Anyway in response to your questions if I run the 
</I>&gt;<i> following command on one of our VM's:-
</I>&gt;<i>  
</I>&gt;<i> ./rabbitmqctl status
</I>&gt;<i>  
</I>&gt;<i> I get the response:-
</I>&gt;<i>  
</I>&gt;<i> Status of node <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ttraflonrh320</A> ...
</I>&gt;<i> [{running_applications,[{rabbitmq_bql,&quot;RabbitMQ Broker Query 
</I>&gt;<i> Language&quot;,&quot;0.01&quot;},
</I>&gt;<i>                         {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;0.0.0&quot;},
</I>&gt;<i>                         {rabbit,&quot;RabbitMQ&quot;,&quot;1.7.1&quot;},
</I>&gt;<i>                         {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.1.8&quot;},
</I>&gt;<i>                         {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.5.4&quot;},
</I>&gt;<i>                         {rfc4627_jsonrpc,&quot;JSON RPC Service&quot;,&quot;0.01&quot;},
</I>&gt;<i>                         {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.7&quot;},
</I>&gt;<i>                         {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.15.5&quot;},
</I>&gt;<i>                         {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.12.5&quot;}]},
</I>&gt;<i>   {nodes,[<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ttraflonrh320</A>]}, 
</I>&gt;<i>   {running_nodes,[<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ttraflonrhtest</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at ttraflonrh324</A>,
</I>&gt;<i>                  <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ttraflonrh334</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at ttraflonrh326</A>,
</I>&gt;<i>                  <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ttraflonrh331</A><A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at ttraflonrh320</A>]}]
</I>&gt;<i>  
</I>&gt;<i> Which strikes me a slightly weird as the running nodes do not match up 
</I>&gt;<i> with the nodes.  Unfortunately I have not been able to determine from 
</I>&gt;<i> the documentation what this means.
</I>
This should never happen. The running nodes should always be a subset of 
the nodes. We have never seen the state you reported. Is it possible 
that the original machine was in a clustered configuration prior to 
being cloned? When did the running_nodes come into existence?

A suggested recovery option is to run
&quot;rabbitmqctl stop_app; rabbitmqctl reset; rabbitmqctl start_app&quot;
for each of the running nodes.
This should leave you with a set of standalone rabbit brokers and both 
&quot;nodes&quot; and &quot;running_nodes&quot; should contain a single entry.

The original template machine that the clones are created from should 
have a blank mnesia database or preferably have no mnesia directory at all.


-Emile



</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007345.html">[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
</A></li>
	<LI>Next message: <A HREF="007353.html">[rabbitmq-discuss] Cloning RHEL VM's with pre-installed Rabbit.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7346">[ date ]</a>
              <a href="thread.html#7346">[ thread ]</a>
              <a href="subject.html#7346">[ subject ]</a>
              <a href="author.html#7346">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
