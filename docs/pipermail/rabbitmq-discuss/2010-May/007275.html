<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] High-number of unack-ed messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20High-number%20of%20unack-ed%20messages&In-Reply-To=20100513152811.GI20620%40mrnibble.lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007273.html">
   <LINK REL="Next"  HREF="007300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] High-number of unack-ed messages</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20High-number%20of%20unack-ed%20messages&In-Reply-To=20100513152811.GI20620%40mrnibble.lshift.net"
       TITLE="[rabbitmq-discuss] High-number of unack-ed messages">matthias at rabbitmq.com
       </A><BR>
    <I>Thu May 13 18:40:47 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007273.html">[rabbitmq-discuss] High-number of unack-ed messages
</A></li>
        <LI>Next message: <A HREF="007300.html">[rabbitmq-discuss] High-number of unack-ed messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7275">[ date ]</a>
              <a href="thread.html#7275">[ thread ]</a>
              <a href="subject.html#7275">[ subject ]</a>
              <a href="author.html#7275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Brendan,

Matthew Sackman wrote:
&gt;<i> On Thu, May 13, 2010 at 10:20:06AM -0500, Brendan Doyle wrote:
</I>&gt;&gt;<i> On 1.7.2 I often see unack count reported by rabbitmqctl much 
</I>&gt;&gt;<i> higher than my QoS x number of consumers
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I always wrote it off to high throughput and different priorities 
</I>&gt;&gt;<i> on handling new incoming messages vs. acks or another internal
</I> &gt;&gt; implementation detail
 &gt;
&gt;<i> Yeah, that's generally wise - in general the numbers reported by 
</I>&gt;<i> rabbitmqctl can't be trusted too much as they're accurate only for 
</I>&gt;<i> things that have *really* made it to the queue - there are plenty of 
</I>&gt;<i> places within rabbitmq where buffering can occur.
</I>
What Matthew says is true, but the discrepancy you are seeing still 
strikes me as somewhat unusual. For the reported unacked message count 
to be much higher than the prefetch limit x number of consumers one of 
the following likely has happened:

a) the prefetch limit was only set after the consumer have been created

b) messages were consumed with basic.get rather than basic.consume

Is that the case? If not, could you post the code to reproduce the 
results you are seeing? There may be a completely innocent explanation, 
but there could also be a bug lurking somewhere, so I'd like to 
understand what is happening here.

Regards,

Matthias.

</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007273.html">[rabbitmq-discuss] High-number of unack-ed messages
</A></li>
	<LI>Next message: <A HREF="007300.html">[rabbitmq-discuss] High-number of unack-ed messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7275">[ date ]</a>
              <a href="thread.html#7275">[ thread ]</a>
              <a href="subject.html#7275">[ subject ]</a>
              <a href="author.html#7275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
