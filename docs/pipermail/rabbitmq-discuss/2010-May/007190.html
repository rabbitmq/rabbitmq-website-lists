<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd: active/active
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20active/active&In-Reply-To=3b949f091001181707k15feadd5je82aae41dc60d0be%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007196.html">
   <LINK REL="Next"  HREF="007192.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd: active/active</H1>
    <B>Jason J. W. Williams</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Fwd%3A%20active/active&In-Reply-To=3b949f091001181707k15feadd5je82aae41dc60d0be%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Fwd: active/active">jasonjwwilliams at gmail.com
       </A><BR>
    <I>Mon May 10 23:43:15 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007196.html">[rabbitmq-discuss] Message delivered even if routing key doen't match
</A></li>
        <LI>Next message: <A HREF="007192.html">[rabbitmq-discuss] getting started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7190">[ date ]</a>
              <a href="thread.html#7190">[ thread ]</a>
              <a href="subject.html#7190">[ subject ]</a>
              <a href="author.html#7190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It was suggested to me I relay a convo I had with Alexis earlier this
year making the case for better active/active fail-over in RabbitMQ.
Particularly, when working with durable messaging.


---------- Forwarded message ----------
From: Jason J. W. Williams &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jasonjwwilliams at gmail.com</A>&gt;
Date: Mon, Jan 18, 2010 at 7:07 PM
Subject: Re: active/active
To: Alexis Richardson &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis at rabbitmq.com</A>&gt;


Hey Alexis,

Currently, we have a single RMQ 1.5 pair that are setup
active/passive. That is to say, our apps publish to node A and if it
is unavailable publish to node B. Nodes A and B are standalone in that
they are not in a cluster together. This is because the messages being
published are durable, and in the event node A crashes any pending
durable messages would not be auto-resubmitted if node A were
clustered with node B (node B's queue essentially hides the pendings
that were in the queue on node A before the crash).

This set up works OK for us, as the load is fairly light and
durability is more important for these tasks than availability.

That being said we are designing a rework of our statistics logging
infrastructure around Rabbit. Our stats is very high volume and
availability is more important than durability (in fact none of the
messages will be durable). So our intention is to create a new Rabbit
cluster with three nodes and a load-balanced IP in front (since
auto-redirect based on load is no longer supported....nasty memo to
follow... ;) ).

Our desire due to the fact that we're moving from a colo'd environment
to a cloud environment, is to collapse both Rabbit &quot;clusters&quot;
into a single cluster to maximize efficiency. It would also allow our
existing app to benefit from the performance of a load-sharing
environment. For that to happen however, Rabbit would have to do one
of two things when clustered regarding durable messages:

1.) When a crashed node is restarted, replay the pending/durable
messages into the queue on the node now responsible for the queue
after the crash.
2.) Replicate all durable queues to more than one node, so that
durable queue contents continue after a node crash.

Frankly, option 1 is just fine with us and would solve our issue.

Does this help? Thank you for being concerned.

-J

</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007196.html">[rabbitmq-discuss] Message delivered even if routing key doen't match
</A></li>
	<LI>Next message: <A HREF="007192.html">[rabbitmq-discuss] getting started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7190">[ date ]</a>
              <a href="thread.html#7190">[ thread ]</a>
              <a href="subject.html#7190">[ subject ]</a>
              <a href="author.html#7190">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
