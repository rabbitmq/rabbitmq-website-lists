<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] request for help!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20request%20for%20help%21&In-Reply-To=4BE2CC29.2050101%40lshift.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007081.html">
   <LINK REL="Next"  HREF="007089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] request for help!</H1>
    <B>Rafael Schloming</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20request%20for%20help%21&In-Reply-To=4BE2CC29.2050101%40lshift.net"
       TITLE="[rabbitmq-discuss] request for help!">rafaels at redhat.com
       </A><BR>
    <I>Thu May  6 17:04:50 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007081.html">[rabbitmq-discuss] request for help!
</A></li>
        <LI>Next message: <A HREF="007089.html">[rabbitmq-discuss] request for help!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7087">[ date ]</a>
              <a href="thread.html#7087">[ thread ]</a>
              <a href="subject.html#7087">[ subject ]</a>
              <a href="author.html#7087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael Bridgen wrote:
&gt;<i> I understand that there's a desire to accommodate e.g., JMS-like 
</I>&gt;<i> semantics (which I can see may have been a motivating force for 
</I>&gt;<i> &quot;distribution mode&quot;).  But I think the core spec can leave room for 
</I>&gt;<i> those, without taking a position otherwise.
</I>&gt;<i> 
</I>&gt;<i> What the spec does at the minute is to have a model that tries to 
</I>&gt;<i> encompass all possibilities, where it ought to be silent.
</I>
I don't think this is really related to JMS at all. If you accept that 
certain kinds of nodes store messages, then it generally makes sense 
that you would want to be able to inspect the messages stored at a node 
without actually destroying them.

Now JMS does require this capability with the notion of &quot;queue 
browsing&quot;, however we could easily define a way to create this sort of 
link in the JMS Mapping via the extension points in sources, however 
that would be incorrect as that would be assuming that JMS is the only 
API in the world that wants to provide this capability, it therefore 
makes sense to have a standard way to request non-destructive access to 
stored messages that sits somewhere outside the JMS Mapping.

Note that this is *not* requiring every node that stores messages to 
support non-destructive access, it merely says if you *do* support 
non-destructive access, here is a standard way to expose that capability.

&gt;<i> The main problem with the &quot;all possibilities&quot; approach is that it 
</I>&gt;<i> infects other layers.
</I>&gt;<i> 
</I>&gt;<i> For example, the distribution modes and message state model make flow 
</I>&gt;<i> control, transactions, responsibility transfer and reliable delivery all 
</I>&gt;<i> interdependent.  In my opinion these can be teased apart; specifically 
</I>&gt;<i> (but probably not exclusively), by distinguishing between delivery 
</I>&gt;<i> acknowledgement and transfer of responsibility.
</I>
Can you explain this a bit more? In PR3, flow control and acknowledgment 
are independent in that you can ack messages without causing more to 
arrive, and you can cause more to arrive without acking. Is there some 
other sense of interdependence that you mean here?

&gt;<i> (Conflating those causes problems in 0-9-1 too by the way -- there's a 
</I>&gt;<i> rather fraught, unresolved question in RabbitMQ's bugzilla about the 
</I>&gt;<i> interaction between flow control and transactional acks.  The last 
</I>&gt;<i> comment says &quot;In conclusion, after discussion, acks are overloaded, and 
</I>&gt;<i> mean two things - 1. I've seen the msg; 2. forget about the msg. ...&quot;)
</I>
I don't see how (1) is ever semantically meaningful to communicate. In 
the context of a transaction an ack isn't actually saying (1), it's 
generally saying something like &quot;forget about this message when the 
transaction commits&quot;. Following that, it's the commit of the transaction 
that causes (2) to happen, and this may well happen entirely out of band 
of the messaging layer.

--Rafael


</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007081.html">[rabbitmq-discuss] request for help!
</A></li>
	<LI>Next message: <A HREF="007089.html">[rabbitmq-discuss] request for help!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7087">[ date ]</a>
              <a href="thread.html#7087">[ thread ]</a>
              <a href="subject.html#7087">[ subject ]</a>
              <a href="author.html#7087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
