<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Producer confirms as a heuristic for rate limiting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Producer%20confirms%20as%20a%20heuristic%20for%20rate%0A%20limiting&In-Reply-To=%3C512E55D1.8080703%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025701.html">
   <LINK REL="Next"  HREF="025707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Producer confirms as a heuristic for rate limiting</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Producer%20confirms%20as%20a%20heuristic%20for%20rate%0A%20limiting&In-Reply-To=%3C512E55D1.8080703%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Producer confirms as a heuristic for rate limiting">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Feb 27 18:52:01 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025701.html">[rabbitmq-discuss] Producer confirms as a heuristic for rate	limiting
</A></li>
        <LI>Next message: <A HREF="025707.html">[rabbitmq-discuss] Producer confirms as a heuristic for rate limiting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25702">[ date ]</a>
              <a href="thread.html#25702">[ thread ]</a>
              <a href="subject.html#25702">[ subject ]</a>
              <a href="author.html#25702">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben,

On 27/02/13 18:38, Ben Hood wrote:
&gt;<i> I'm trying to write a benchmark suite for latency and was wondering
</I>&gt;<i> whether using outstanding producer confirms can be used a heuristic for
</I>&gt;<i> back pressure (where the application defines it own window size).
</I>&gt;<i>
</I>&gt;<i> What I am trying to achieve is to improve the accuracy of my latency
</I>&gt;<i> figures.
</I>&gt;<i>
</I>&gt;<i> So I was wondering whether I could use the confirms to exert back
</I>&gt;<i> pressure onto the sending app, or is this idea completely bogus?
</I>
Using confirms to exert back pressure on a producing application is 
fine. But I wouldn't expect that to result in particularly stable 
latencies. For a few reasons:

1) one way that the internal confirm logic gets triggered is by &quot;absence 
of other stuff happening&quot;, so when throttling producers, confirms may 
well happen a lot quicker.

2) more generally, much of the internal confirm logic will try to batch 
things if it can, which reduces the overall cost but makes the timing of 
confirms more variable.

3) confirms do come at a noticeable penalty on throughput and latency. 
So a benchmark employing confirms would not be a very good proxy for a 
real system running w/o confirms.


Having said all that, go and try it :)


Matthias.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025701.html">[rabbitmq-discuss] Producer confirms as a heuristic for rate	limiting
</A></li>
	<LI>Next message: <A HREF="025707.html">[rabbitmq-discuss] Producer confirms as a heuristic for rate limiting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25702">[ date ]</a>
              <a href="thread.html#25702">[ thread ]</a>
              <a href="subject.html#25702">[ subject ]</a>
              <a href="author.html#25702">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
