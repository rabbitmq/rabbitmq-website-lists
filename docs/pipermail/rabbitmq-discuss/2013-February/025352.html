<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publisher confirms clarification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publisher%20confirms%20clarification&In-Reply-To=%3CF2AC9EE5-71B9-4D8E-BA14-2BBB5F1CA2B5%40rbcon.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025351.html">
   <LINK REL="Next"  HREF="025358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publisher confirms clarification</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publisher%20confirms%20clarification&In-Reply-To=%3CF2AC9EE5-71B9-4D8E-BA14-2BBB5F1CA2B5%40rbcon.com%3E"
       TITLE="[rabbitmq-discuss] Publisher confirms clarification">jerryk at rbcon.com
       </A><BR>
    <I>Tue Feb  5 20:43:37 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025351.html">[rabbitmq-discuss] Publisher confirms clarification
</A></li>
        <LI>Next message: <A HREF="025358.html">[rabbitmq-discuss] Correct way of determining which node is master?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25352">[ date ]</a>
              <a href="thread.html#25352">[ thread ]</a>
              <a href="subject.html#25352">[ subject ]</a>
              <a href="author.html#25352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>See chapter 11 of RabbitMQ in Action for a nice flow chart covering how messages are handled. 

The publisher confirm goes out when what you asked for (at least) has happened. For a persistent message this means persistence to disc in any queue and any mirrors thereof it was destined for.  If circumstances are such that there was a ready, connected consumer chewing on an empty queue it's possible that the persistence will be skipped and the message directly delivered in which case the transmission of the confirm signifies this event. 

Best regards,
Jerry

Sent from my iPad.

On Feb 5, 2013, at 11:58 AM, Mark Miller &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">developmentalmadness at gmail.com</A>&gt; wrote:

&gt;<i> Publisher confirms define handled sucessfully as follows:
</I>&gt;<i> an un-routable mandatory or immediate message is confirmed right after the basic.return;
</I>&gt;<i> otherwise, a transient message is confirmed the moment it is enqueued; and,
</I>&gt;<i> a persistent message is confirmed when it is persisted to disk or when it is consumed on every queue.
</I>&gt;<i> 
</I>&gt;<i> So my question is about the 3rd point: Is this a &quot;whichever comes first&quot; situation? If the message is consumed and ack'd on all queues before it gets persisted to disk then the confirmation will be sent? Or if the message is persisted to disk hasn't been ack'd then the confirm will still be sent?
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130205/79d6a994/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130205/79d6a994/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025351.html">[rabbitmq-discuss] Publisher confirms clarification
</A></li>
	<LI>Next message: <A HREF="025358.html">[rabbitmq-discuss] Correct way of determining which node is master?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25352">[ date ]</a>
              <a href="thread.html#25352">[ thread ]</a>
              <a href="subject.html#25352">[ subject ]</a>
              <a href="author.html#25352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
