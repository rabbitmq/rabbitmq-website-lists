<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMq with WCF Transaction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMq%20with%20WCF%20Transaction&In-Reply-To=%3C512E2405.8070102%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025692.html">
   <LINK REL="Next"  HREF="025709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMq with WCF Transaction</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMq%20with%20WCF%20Transaction&In-Reply-To=%3C512E2405.8070102%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMq with WCF Transaction">emile at rabbitmq.com
       </A><BR>
    <I>Wed Feb 27 15:19:33 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025692.html">[rabbitmq-discuss] RabbitMq with WCF Transaction
</A></li>
        <LI>Next message: <A HREF="025709.html">[rabbitmq-discuss] RabbitMq with WCF Transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25694">[ date ]</a>
              <a href="thread.html#25694">[ thread ]</a>
              <a href="subject.html#25694">[ subject ]</a>
              <a href="author.html#25694">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

On 27/02/13 13:25, Hadas wrote:
&gt;<i> I try to use transaction in wcf by adding
</I>&gt;<i> &quot;[OperationBehavior(TransactionScopeRequired = true)]&quot; to functions in
</I>&gt;<i> my interface.
</I>&gt;<i> What I can see is that when an error happens the message return to the
</I>&gt;<i> queue, but only once. That means if an error occurs second time the
</I>&gt;<i> message is lost.
</I>&gt;<i> 
</I>&gt;<i> Do I miss something or what I need to change in order to retry till no
</I>&gt;<i> error occurs?
</I>

I confess ignorance about how transactions work in WCF, so I'm not
entirely sure whether they are designed to prevent message-loss in the
way that you expect. My reading of RabbitMQInputChannel.Receive() in the
RabbitMQ WCF binding is that messages are acknowledged immediately after
being decoded and will therefore not be available from the broker after
that point if the transaction needs to roll back.

It is possible to deliver messages to clients with &quot;at-least-once&quot;
guarantees by using the .net client library and making use of
acknowledgements and durability. The 2nd tutorial contains a relevant
discussion.




-Emile








</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025692.html">[rabbitmq-discuss] RabbitMq with WCF Transaction
</A></li>
	<LI>Next message: <A HREF="025709.html">[rabbitmq-discuss] RabbitMq with WCF Transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25694">[ date ]</a>
              <a href="thread.html#25694">[ thread ]</a>
              <a href="subject.html#25694">[ subject ]</a>
              <a href="author.html#25694">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
