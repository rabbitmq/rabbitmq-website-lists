<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20cluster%20with%20potentially%20millions%0A%09of%20connections&In-Reply-To=%3Cb087b92a-22a1-48e4-a850-3c746b921833%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025598.html">
   <LINK REL="Next"  HREF="025603.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections</H1>
    <B>oxxyyd at hotmail.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20cluster%20with%20potentially%20millions%0A%09of%20connections&In-Reply-To=%3Cb087b92a-22a1-48e4-a850-3c746b921833%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections">oxxyyd at hotmail.com
       </A><BR>
    <I>Thu Feb 21 12:28:08 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025598.html">[rabbitmq-discuss] about &quot;exactly&quot; policy on RabbitMQ 3.0.1
</A></li>
        <LI>Next message: <A HREF="025603.html">[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25601">[ date ]</a>
              <a href="thread.html#25601">[ thread ]</a>
              <a href="subject.html#25601">[ subject ]</a>
              <a href="author.html#25601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

If you need performance and scale: One single solace appliance can handle 
200k concurrent connections for web streaming /box and do 230k fully 
guaranteed messages s or 11m reliable messages/s.  Any slow consumer issues 
will not come up as it does not access disc for persistence  You can 
monitor the FPG card without impacting the performance. 
Not sure if it will fit into your architecture thought...

Cheers,
D

Am Dienstag, 29. Januar 2013 21:12:38 UTC+1 schrieb Sandy:
&gt;<i>
</I>&gt;<i> To RabbitMQ gurus - Could you please post the replies here instead of just 
</I>&gt;<i> replying to the original person (Roman in this case). This is something of 
</I>&gt;<i> interest to me as well and I would like to follow this thread. Thx!
</I>&gt;<i>
</I>&gt;<i> On Saturday, January 26, 2013 6:58:36 AM UTC-5, Romanas S. wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi guys,
</I>&gt;&gt;<i>  I'm trying to come up with an architecture for a RabbitMQ cluster that 
</I>&gt;&gt;<i> could potentially handle millions of (persistent) connections. I've set up 
</I>&gt;&gt;<i> a cluster of Rabbits with 3 nodes (16GB RAM, 4x cpu cores each) and a Load 
</I>&gt;&gt;<i> Balancer in front of them, increased all of the system limits on sockets 
</I>&gt;&gt;<i> and file descriptors, but can't seem to scale to more then 30k connections 
</I>&gt;&gt;<i> on the entire cluster. 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Each connections has it's own exchange and a temporary direct queue, RAM 
</I>&gt;&gt;<i> usage is about 2-3GB on each node and CPU usage peaks at about 200% (which 
</I>&gt;&gt;<i> on 4 cores isn't all that bad). At first all is quite well and the cluster 
</I>&gt;&gt;<i> manages upwards of 1k msgs/second (I haven't tried more, pretty sure it 
</I>&gt;&gt;<i> would handle it). However, after scaling to that many connections, the 
</I>&gt;&gt;<i> cluster seems to grind to a halt and eventually nodes become unresponsive. 
</I>&gt;&gt;<i> The management API takes upwards of 5 (FIVE!) minutes to retrieve a server 
</I>&gt;&gt;<i> summary report. Am I missing something here? Or is this just a bad idea 
</I>&gt;&gt;<i> altogether? I was expecting that if each node was able to handle 30k+ 
</I>&gt;&gt;<i> connections, I could have a cluster of 50 or so (with multiple balancers, 
</I>&gt;&gt;<i> of course!) and live a happy life  ;-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> Roman
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130221/898d7808/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130221/898d7808/attachment.htm</A>&gt;
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025598.html">[rabbitmq-discuss] about &quot;exactly&quot; policy on RabbitMQ 3.0.1
</A></li>
	<LI>Next message: <A HREF="025603.html">[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25601">[ date ]</a>
              <a href="thread.html#25601">[ thread ]</a>
              <a href="subject.html#25601">[ subject ]</a>
              <a href="author.html#25601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
