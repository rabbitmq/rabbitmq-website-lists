<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Consistent Exchange Only if Consumers?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consistent%20Exchange%20Only%20if%20Consumers%3F&In-Reply-To=%3CDF3FAB26-BEB1-41AD-BB44-B041B1C85D08%40teksol.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025552.html">
   <LINK REL="Next"  HREF="025558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Consistent Exchange Only if Consumers?</H1>
    <B>Fran&#231;ois Beausoleil</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Consistent%20Exchange%20Only%20if%20Consumers%3F&In-Reply-To=%3CDF3FAB26-BEB1-41AD-BB44-B041B1C85D08%40teksol.info%3E"
       TITLE="[rabbitmq-discuss] Consistent Exchange Only if Consumers?">francois at teksol.info
       </A><BR>
    <I>Sat Feb 16 02:31:09 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025552.html">[rabbitmq-discuss] Consultant Needed: Rabbit MQ Expert
</A></li>
        <LI>Next message: <A HREF="025558.html">[rabbitmq-discuss] Consistent Exchange Only if Consumers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25533">[ date ]</a>
              <a href="thread.html#25533">[ thread ]</a>
              <a href="subject.html#25533">[ subject ]</a>
              <a href="author.html#25533">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all!

Is there a knob somewhere to make x-consistent-hash exchanges deliver only to queues that have an active consumer?

My use case is dedupping before processing: I receive interactions from social networks, and the same interaction may be harvested multiple times. I have distributed caches that dedup the interactions, and am successfully using an x-consistent-hash exchange to do the deduping. I chose to use exclusive queues for the consumers, so if the consumer crashes, messages will be rerouted. Problem is, if the consumer crashes, the messages are lost.

If the x-consistent-hash exchange routed messages only if there was an active consumer, then I could use durable queues. Alternatively, on consumer crash, if the queue could redeliver the messages to the origin exchange, then I would be all right as well.

My problem is really with the messages that are in the queue when a consumer crashes. Not with mandatory, because I have dozens of queues in which to deliver the messages, so the message will be routed, and the mandatory flag will not help in this instance.

Any thoughts or ideas on this?

Thanks!
Fran&#231;ois
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4142 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130215/2e617b69/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130215/2e617b69/attachment.bin</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025552.html">[rabbitmq-discuss] Consultant Needed: Rabbit MQ Expert
</A></li>
	<LI>Next message: <A HREF="025558.html">[rabbitmq-discuss] Consistent Exchange Only if Consumers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25533">[ date ]</a>
              <a href="thread.html#25533">[ thread ]</a>
              <a href="subject.html#25533">[ subject ]</a>
              <a href="author.html#25533">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
