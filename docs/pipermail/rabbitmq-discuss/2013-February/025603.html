<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20cluster%20with%20potentially%20millions%0A%09of%20connections&In-Reply-To=%3CCACOPnvdy%2BK5df7FPF1cahyiXM4pWuknv5QX%2BAuFKOffnFhRGpw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025601.html">
   <LINK REL="Next"  HREF="025604.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20cluster%20with%20potentially%20millions%0A%09of%20connections&In-Reply-To=%3CCACOPnvdy%2BK5df7FPF1cahyiXM4pWuknv5QX%2BAuFKOffnFhRGpw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections">alexis at rabbitmq.com
       </A><BR>
    <I>Thu Feb 21 14:01:43 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025601.html">[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections
</A></li>
        <LI>Next message: <A HREF="025604.html">[rabbitmq-discuss] RabbitMQ blocking issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25603">[ date ]</a>
              <a href="thread.html#25603">[ thread ]</a>
              <a href="subject.html#25603">[ subject ]</a>
              <a href="author.html#25603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&quot;Any slow consumer issues will not come up as it does not access disc
for persistence&quot;

How on earth does that make sense?  Slow consumer issues arise when
production rates exceed consumption rates.  Not accessing a disk means
that you are memory limited, which is the primary cause of slow
consumer failures.

If you are going to post advertisements for commercial products,
please be accurate, and please quote all prices for hardware or
software.

Thanks

alexis


On Thu, Feb 21, 2013 at 12:28 PM,  &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">oxxyyd at hotmail.com</A>&gt; wrote:
&gt;<i> Hi there,
</I>&gt;<i>
</I>&gt;<i> If you need performance and scale: One single solace appliance can handle
</I>&gt;<i> 200k concurrent connections for web streaming /box and do 230k fully
</I>&gt;<i> guaranteed messages s or 11m reliable messages/s.  Any slow consumer issues
</I>&gt;<i> will not come up as it does not access disc for persistence  You can monitor
</I>&gt;<i> the FPG card without impacting the performance.
</I>&gt;<i> Not sure if it will fit into your architecture thought...
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> D
</I>&gt;<i>
</I>&gt;<i> Am Dienstag, 29. Januar 2013 21:12:38 UTC+1 schrieb Sandy:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To RabbitMQ gurus - Could you please post the replies here instead of just
</I>&gt;&gt;<i> replying to the original person (Roman in this case). This is something of
</I>&gt;&gt;<i> interest to me as well and I would like to follow this thread. Thx!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Saturday, January 26, 2013 6:58:36 AM UTC-5, Romanas S. wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi guys,
</I>&gt;&gt;&gt;<i>  I'm trying to come up with an architecture for a RabbitMQ cluster that
</I>&gt;&gt;&gt;<i> could potentially handle millions of (persistent) connections. I've set up a
</I>&gt;&gt;&gt;<i> cluster of Rabbits with 3 nodes (16GB RAM, 4x cpu cores each) and a Load
</I>&gt;&gt;&gt;<i> Balancer in front of them, increased all of the system limits on sockets and
</I>&gt;&gt;&gt;<i> file descriptors, but can't seem to scale to more then 30k connections on
</I>&gt;&gt;&gt;<i> the entire cluster.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Each connections has it's own exchange and a temporary direct queue, RAM
</I>&gt;&gt;&gt;<i> usage is about 2-3GB on each node and CPU usage peaks at about 200% (which
</I>&gt;&gt;&gt;<i> on 4 cores isn't all that bad). At first all is quite well and the cluster
</I>&gt;&gt;&gt;<i> manages upwards of 1k msgs/second (I haven't tried more, pretty sure it
</I>&gt;&gt;&gt;<i> would handle it). However, after scaling to that many connections, the
</I>&gt;&gt;&gt;<i> cluster seems to grind to a halt and eventually nodes become unresponsive.
</I>&gt;&gt;&gt;<i> The management API takes upwards of 5 (FIVE!) minutes to retrieve a server
</I>&gt;&gt;&gt;<i> summary report. Am I missing something here? Or is this just a bad idea
</I>&gt;&gt;&gt;<i> altogether? I was expecting that if each node was able to handle 30k+
</I>&gt;&gt;&gt;<i> connections, I could have a cluster of 50 or so (with multiple balancers, of
</I>&gt;&gt;&gt;<i> course!) and live a happy life  ;-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;<i> Roman
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I></PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025601.html">[rabbitmq-discuss] RabbitMQ cluster with potentially millions	of connections
</A></li>
	<LI>Next message: <A HREF="025604.html">[rabbitmq-discuss] RabbitMQ blocking issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25603">[ date ]</a>
              <a href="thread.html#25603">[ thread ]</a>
              <a href="subject.html#25603">[ subject ]</a>
              <a href="author.html#25603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
