<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ blocking issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20blocking%20issue&In-Reply-To=%3C5125579B.7060707%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025582.html">
   <LINK REL="Next"  HREF="025587.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ blocking issue</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20blocking%20issue&In-Reply-To=%3C5125579B.7060707%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ blocking issue">matthias at rabbitmq.com
       </A><BR>
    <I>Wed Feb 20 23:09:15 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025582.html">[rabbitmq-discuss] RabbitMQ blocking issue
</A></li>
        <LI>Next message: <A HREF="025587.html">[rabbitmq-discuss] odd rabbitmq / heartbeat /drbd duplicate mount
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25583">[ date ]</a>
              <a href="thread.html#25583">[ thread ]</a>
              <a href="subject.html#25583">[ subject ]</a>
              <a href="author.html#25583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Peter,

On 20/02/13 21:54, Konar Peter (Nokia-LC/Chicago) wrote:
&gt;<i> I have attached two logs that show issues with in the first 5 minutes
</I>&gt;<i> of it happening.
</I>
These reports show two connections with a non-empty Recv-Q at the server 
side, a non-empty Send-Q at the client side, and a connection state of 
'running' in rabbit. And it looks like there was no change in that 
situation over at least five minutes. The connections were terminated by 
rabbit ~30 minutes later due to missing heartbeats.

This all points towards rabbit having stopped reading from the socket 
even though it thinks it is.

Needless to say that is rather worrying, and not something we have ever 
encountered before.

In order to investigate this further...

- Please upgrade Erlang to R15B03. It is conceivable that the issue is 
caused by bugs in the Erlang VM that have since has been fixed.

- Next time the issue occurs, please run
   rabbitmqctl set_vm_memory_high_watermark 0.0001
followed by
   rabbitmqctl set_vm_memory_high_watermark 0.4
and check whether that causes the stalled connections to resume working.


Regards,

Matthias.
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025582.html">[rabbitmq-discuss] RabbitMQ blocking issue
</A></li>
	<LI>Next message: <A HREF="025587.html">[rabbitmq-discuss] odd rabbitmq / heartbeat /drbd duplicate mount
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25583">[ date ]</a>
              <a href="thread.html#25583">[ thread ]</a>
              <a href="subject.html#25583">[ subject ]</a>
              <a href="author.html#25583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
