<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] High Performance Setup Strategy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20High%20Performance%20Setup%20Strategy&In-Reply-To=%3C215159b2-83a2-4b20-845c-0f01285717c3%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025545.html">
   <LINK REL="Next"  HREF="025549.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] High Performance Setup Strategy</H1>
    <B>Florian M&#252;ller</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20High%20Performance%20Setup%20Strategy&In-Reply-To=%3C215159b2-83a2-4b20-845c-0f01285717c3%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] High Performance Setup Strategy">max06.net at googlemail.com
       </A><BR>
    <I>Mon Feb 18 10:53:07 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025545.html">[rabbitmq-discuss] the cluster broke and can not auto recover
</A></li>
        <LI>Next message: <A HREF="025549.html">[rabbitmq-discuss] High Performance Setup Strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25548">[ date ]</a>
              <a href="thread.html#25548">[ thread ]</a>
              <a href="subject.html#25548">[ subject ]</a>
              <a href="author.html#25548">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning,

I'm a little bit curious about the setup strategy of a project. Maybe 
someone of you can make it clear.

Situation: 
Community Website, running on several php-nodes.

Destination:
Implementation of Websockets with nodejs.

Attempts:
One big Server (24 Cores) running Rabbitmq, every websocket-worker connects 
to this one.
Every php-node is running an own Rabbitmq, php connects to localhost using 
Amqp. Every kind of notifications is being sent to it, but only if the 
target user is actually connected to one socket (Solved per memcache-entry)
3 Websocket-Hosts, each running 16 Node-Worker. (16 Cores/Server)

Every websocket-worker creates an own queue.
There are 100 exchanges, the users are being sorted in there by their 
UserID. Exchange-Type: direct.
(Using only one exchange crashes when reaching 64k bindings)

Problem:
Queues are starting to fill up when reaching 120k Bindings (130-140k unique 
Websocket-Connections). 4-6k delivered Msg/s.
Load: 
Big one (18-20 / 24)
php-nodes (6 / 16)
Nodejs-Hosts (5 / 16)

I want to know your opinion about this setup, or tips to build a better one.

We want to serve 300-500k Connections at any time with at least hardware as 
possible.

Greetings,
Florian


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130218/f8a97056/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130218/f8a97056/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025545.html">[rabbitmq-discuss] the cluster broke and can not auto recover
</A></li>
	<LI>Next message: <A HREF="025549.html">[rabbitmq-discuss] High Performance Setup Strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25548">[ date ]</a>
              <a href="thread.html#25548">[ thread ]</a>
              <a href="subject.html#25548">[ subject ]</a>
              <a href="author.html#25548">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
