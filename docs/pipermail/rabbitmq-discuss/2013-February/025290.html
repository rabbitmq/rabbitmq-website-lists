<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problem installing RabbitMQ with Puppet on CentOS 6.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20installing%20RabbitMQ%20with%20Puppet%20on%0A%20CentOS%206.2&In-Reply-To=%3C510B9981.3030803%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025288.html">
   <LINK REL="Next"  HREF="025446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problem installing RabbitMQ with Puppet on CentOS 6.2</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problem%20installing%20RabbitMQ%20with%20Puppet%20on%0A%20CentOS%206.2&In-Reply-To=%3C510B9981.3030803%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Problem installing RabbitMQ with Puppet on CentOS 6.2">simon at rabbitmq.com
       </A><BR>
    <I>Fri Feb  1 10:31:29 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025288.html">[rabbitmq-discuss] Problem installing RabbitMQ with Puppet on CentOS 6.2
</A></li>
        <LI>Next message: <A HREF="025446.html">[rabbitmq-discuss] Problem installing RabbitMQ with Puppet on CentOS 6.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25290">[ date ]</a>
              <a href="thread.html#25290">[ thread ]</a>
              <a href="subject.html#25290">[ subject ]</a>
              <a href="author.html#25290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ah, thanks for the pointer.

Hmm, maybe we should explicitly set HOME in these scripts...

Cheers, Simon

On 01/02/13 07:24, James Carr wrote:
&gt;<i> I thought I'd point out the original author solved his problems:
</I>&gt;<i> <A HREF="http://serverfault.com/questions/434942/veewee-vagrant-puppet-erlang-and-rabbitmq">http://serverfault.com/questions/434942/veewee-vagrant-puppet-erlang-and-rabbitmq</A>
</I>&gt;<i>
</I>&gt;<i> Only posting this on the list to help others who come across it as I
</I>&gt;<i> had the exact same problem this evening. :)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> James
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Fri, Oct 5, 2012 at 4:45 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:
</I>&gt;&gt;<i> Hmm. There's nothing very obvious that I can think of. I've looked in the
</I>&gt;&gt;<i> OTP source and that message really only appears if HOME is not set.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Things you might try:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Run /usr/lib/rabbitmq/bin/rabbitmq-plugins instead, to remove a wrapper
</I>&gt;&gt;<i> script
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Edit /usr/lib/rabbitmq/bin/rabbitmq-plugins to insert &quot;echo $HOME&quot; just
</I>&gt;&gt;<i> before &quot;exec erl&quot;, see if it's really set at that point.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * If all else fails, edit the enabled plugins file directly rather than
</I>&gt;&gt;<i> invoking rabbitmq-plugins. Set the contents of /etc/rabbitmq/enabled_plugins
</I>&gt;&gt;<i> to exactly the string:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [rabbitmq_management].
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> including the full stop.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers, Simon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 05/10/12 07:05, Tobias Wissm&#252;ller wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi Everyone,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I encounter a strange problem when applying my puppet module I have
</I>&gt;&gt;&gt;<i> created for installing RabbitMQ. To be more precise, I encounter the
</I>&gt;&gt;&gt;<i> problem when enabling the plugins.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The relevant resources look as follows:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> |$version = &quot;2.8.7&quot;
</I>&gt;&gt;&gt;<i> $url     =
</I>&gt;&gt;&gt;<i> &quot;<A HREF="http://www.rabbitmq.com/releases/rabbitmq-server/v${version}/rabbitmq-server-${version}-1.noarch.rpm&quot;">http://www.rabbitmq.com/releases/rabbitmq-server/v${version}/rabbitmq-server-${version}-1.noarch.rpm&quot;</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> package{&quot;erlang&quot;:
</I>&gt;&gt;&gt;<i>       ensure =&gt; &quot;present&quot;,
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> package{&quot;rabbitmq-server&quot;:
</I>&gt;&gt;&gt;<i>       provider =&gt; &quot;rpm&quot;,
</I>&gt;&gt;&gt;<i>       source   =&gt; $url,
</I>&gt;&gt;&gt;<i>       require  =&gt; Package[&quot;erlang&quot;]
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> exec{&quot;rabbitmq-plugins&quot;:
</I>&gt;&gt;&gt;<i>       path    =&gt; &quot;/usr/bin:/usr/sbin:/bin&quot;,
</I>&gt;&gt;&gt;<i>       command =&gt; &quot;rabbitmq-plugins enable rabbitmq_management&quot;,
</I>&gt;&gt;&gt;<i>       require =&gt; Package[&quot;rabbitmq-server&quot;]
</I>&gt;&gt;&gt;<i> }|
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The error I get:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> |/Stage[main]/Rabbitmq/Exec[rabbitmq-plugins]/returns: erlexec: HOME must
</I>&gt;&gt;&gt;<i> be set|
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> |/Stage[main]/Rabbitmq/Service[rabbitmq-server]: Dependency
</I>&gt;&gt;&gt;<i> Exec[rabbitmq-plugins] has failures: true
</I>&gt;&gt;&gt;<i> |
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The thing is, that HOME is set. Have checked that during a puppet run by
</I>&gt;&gt;&gt;<i> creating an exec resource to echo HOME.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> When I log into the box that I create with veewee and vagrant, I can
</I>&gt;&gt;&gt;<i> execute &quot;rabbitmq-plugins enable rabbitmq_management&quot; without any
</I>&gt;&gt;&gt;<i> problems. But I always get the error from within puppet.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Starting rabbitmq-server leaves me with the following:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> |[{pid,2834},
</I>&gt;&gt;&gt;<i> {running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;2.8.7&quot;},
</I>&gt;&gt;&gt;<i>                       {ssl,&quot;Erlang/OTP SSL application&quot;,&quot;4.1.6&quot;},
</I>&gt;&gt;&gt;<i>                       {public_key,&quot;Public key infrastructure&quot;,&quot;0.13&quot;},
</I>&gt;&gt;&gt;<i>                       {crypto,&quot;CRYPTO version 2&quot;,&quot;2.0.4&quot;},
</I>&gt;&gt;&gt;<i>                       {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.5&quot;},
</I>&gt;&gt;&gt;<i>                       {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.7&quot;},
</I>&gt;&gt;&gt;<i>                       {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.10&quot;},
</I>&gt;&gt;&gt;<i>                       {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.5&quot;},
</I>&gt;&gt;&gt;<i>                       {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.5&quot;}]},
</I>&gt;&gt;&gt;<i> {os,{unix,linux}},
</I>&gt;&gt;&gt;<i> {erlang_version,&quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit] [rq:1]
</I>&gt;&gt;&gt;<i> [async-threads:30] [kernel-poll:true]\n&quot;},
</I>&gt;&gt;&gt;<i> {memory,[{total,24993120},
</I>&gt;&gt;&gt;<i>         {processes,10328496},
</I>&gt;&gt;&gt;<i>         {processes_used,10321296},
</I>&gt;&gt;&gt;<i>         {system,14664624},
</I>&gt;&gt;&gt;<i>         {atom,1175905},
</I>&gt;&gt;&gt;<i>         {atom_used,1143841},
</I>&gt;&gt;&gt;<i>         {binary,17192},
</I>&gt;&gt;&gt;<i>         {code,11416020},
</I>&gt;&gt;&gt;<i>         {ets,766168}]},
</I>&gt;&gt;&gt;<i> {vm_memory_high_watermark,0.4},
</I>&gt;&gt;&gt;<i> {vm_memory_limit,205851852},
</I>&gt;&gt;&gt;<i> {disk_free_limit,1000000000},
</I>&gt;&gt;&gt;<i> {disk_free,7089795072},
</I>&gt;&gt;&gt;<i> {file_descriptors,[{total_limit,924},
</I>&gt;&gt;&gt;<i>                   {total_used,4},
</I>&gt;&gt;&gt;<i>                   {sockets_limit,829},
</I>&gt;&gt;&gt;<i>                   {sockets_used,2}]},
</I>&gt;&gt;&gt;<i> {processes,[{limit,1048576},{used,131}]},
</I>&gt;&gt;&gt;<i> {run_queue,0},
</I>&gt;&gt;&gt;<i> {uptime,6}]|
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The whole puppet manifest can be found under
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="https://github.com/tobias-wissmueller/dev_ops_central/blob/master/modules/rabbitmq/manifests/init.pp">https://github.com/tobias-wissmueller/dev_ops_central/blob/master/modules/rabbitmq/manifests/init.pp</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also have posted this problem over at Serverfault
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://serverfault.com/questions/434942/veewee-vagrant-puppet-erlang-and-rabbitmq">http://serverfault.com/questions/434942/veewee-vagrant-puppet-erlang-and-rabbitmq</A>&gt;.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Any help is highly appreciated since I am totally stuck here.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks a lot!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Cheers,
</I>&gt;&gt;&gt;<i> Tobi
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Simon MacMullen
</I>&gt;&gt;<i> RabbitMQ, VMware
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025288.html">[rabbitmq-discuss] Problem installing RabbitMQ with Puppet on CentOS 6.2
</A></li>
	<LI>Next message: <A HREF="025446.html">[rabbitmq-discuss] Problem installing RabbitMQ with Puppet on CentOS 6.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25290">[ date ]</a>
              <a href="thread.html#25290">[ thread ]</a>
              <a href="subject.html#25290">[ subject ]</a>
              <a href="author.html#25290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
