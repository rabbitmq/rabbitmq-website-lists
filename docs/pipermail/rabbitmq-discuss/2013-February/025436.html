<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Node failure for a mirrored queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Node%20failure%20for%20a%20mirrored%20queue&In-Reply-To=%3C82BDD45F-5EF0-4F07-93F0-A3CA1D66B45E%40simply.name%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025434.html">
   <LINK REL="Next"  HREF="025437.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Node failure for a mirrored queue</H1>
    <B>&#1041;&#1086;&#1088;&#1086;&#1076;&#1080;&#1085; &#1042;&#1083;&#1072;&#1076;&#1080;&#1084;&#1080;&#1088;</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Node%20failure%20for%20a%20mirrored%20queue&In-Reply-To=%3C82BDD45F-5EF0-4F07-93F0-A3CA1D66B45E%40simply.name%3E"
       TITLE="[rabbitmq-discuss] Node failure for a mirrored queue">root at simply.name
       </A><BR>
    <I>Mon Feb 11 07:52:53 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025434.html">[rabbitmq-discuss] Lars Ellebo is out of the office.
</A></li>
        <LI>Next message: <A HREF="025437.html">[rabbitmq-discuss] Node failure for a mirrored queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25436">[ date ]</a>
              <a href="thread.html#25436">[ thread ]</a>
              <a href="subject.html#25436">[ subject ]</a>
              <a href="author.html#25436">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all.

I'm testing mirrored queues in v. 3.0.1. If I stop node with 'rabbitmqctl stop_app', clients and other nodes behave normally (clients reconnect to other nodes because of a tcp balancer and other nodes continue to serve the queue). But if I close one node from others with iptables or kill it with Alt+SysRq+b, the cluster stops working for a long period of time. Is there any kind of a timeout, after which the node is considered to be dead by others? It does not depend on which node I kill - the primary or one of the slaves. There are 3 nodes in a cluster, the queue is mirrored by a policy like that '/	HA	^(?!amq\\.).*	{&quot;ha-mode&quot;:&quot;all&quot;}	0'.
If I should give extra info for understanding of a problem, tell me, please. Thanks.

--
Vladimir


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130211/88f939bb/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130211/88f939bb/attachment.htm</A>&gt;
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025434.html">[rabbitmq-discuss] Lars Ellebo is out of the office.
</A></li>
	<LI>Next message: <A HREF="025437.html">[rabbitmq-discuss] Node failure for a mirrored queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25436">[ date ]</a>
              <a href="thread.html#25436">[ thread ]</a>
              <a href="subject.html#25436">[ subject ]</a>
              <a href="author.html#25436">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
