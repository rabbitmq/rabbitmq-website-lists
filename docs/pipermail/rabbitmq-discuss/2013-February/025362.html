<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Hostname Issues with EC2 Cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Hostname%20Issues%20with%20EC2%20Cluster&In-Reply-To=%3C01D33170BD6744ABA7409F96BA317DE6%40paperplanes.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025360.html">
   <LINK REL="Next"  HREF="025356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Hostname Issues with EC2 Cluster</H1>
    <B>Mathias Meyer</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Hostname%20Issues%20with%20EC2%20Cluster&In-Reply-To=%3C01D33170BD6744ABA7409F96BA317DE6%40paperplanes.de%3E"
       TITLE="[rabbitmq-discuss] Hostname Issues with EC2 Cluster">meyer at paperplanes.de
       </A><BR>
    <I>Wed Feb  6 08:54:45 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="025360.html">[rabbitmq-discuss] Hostname Issues with EC2 Cluster
</A></li>
        <LI>Next message: <A HREF="025356.html">[rabbitmq-discuss] [rabbitmql] pika throw exception following the	Toturials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25362">[ date ]</a>
              <a href="thread.html#25362">[ thread ]</a>
              <a href="subject.html#25362">[ subject ]</a>
              <a href="author.html#25362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kevin,

I'd personally recommend setting either CNAMEs for the external EC2 hostnames (these will always resolve to the internal IP within Amazon's network and to the external IP outside of it) in your own DNS setup or to use custom hostnames that you store in /etc/hosts cluster-wide.

For the former, the path we followed, you need to hook into the DHCP process and provide your own domain as a search path for DNS lookup, then you can have hostnames like rabbitmq1.yourdomain.com configured with your own domains.

Hope this helps!

Cheers, Mathias 




On Wednesday, 6. February 2013 at 05:00, Kevin Kuhl wrote:

&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> I want to set up a 3 node cluster on EC2. We plan to set up a recovery configuration in amazon so that if we lose a server, we pull up a new one to replace it and cluster it. We;ve been able to set up a cluster manually by using the default hostname that resolves over DNS (ip-xx-xx-xx-xx); each of the machines can see eachother. This name however, will not work in production because it's the INTERNAL DNS reference which changes over time. If a failure occurs this will be different on launch and break the cluster (right?). 
</I>&gt;<i> 
</I>&gt;<i> The ideal situation would be to cluster these with static references to each machine. like <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at server1</A>, 2, 3 where at any point a new one would come up and could join the cluster.
</I>&gt;<i> 
</I>&gt;<i> I read this article: <A HREF="http://karlgrz.com/rabbitmq-highly-available-queues-and-clustering-using-amazon-ec2/">http://karlgrz.com/rabbitmq-highly-available-queues-and-clustering-using-amazon-ec2/</A>
</I>&gt;<i> 
</I>&gt;<i> Which works most of the way, but the part that's not explained is, once you set your own hostname and try to cluster them, how can they see eachother if the hostnames are not available over the EC2 network.
</I>&gt;<i> 
</I>&gt;<i> Hope this makes sense, any ideas or best practices are greatly appreciated!!
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>)
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>


</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025360.html">[rabbitmq-discuss] Hostname Issues with EC2 Cluster
</A></li>
	<LI>Next message: <A HREF="025356.html">[rabbitmq-discuss] [rabbitmql] pika throw exception following the	Toturials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25362">[ date ]</a>
              <a href="thread.html#25362">[ thread ]</a>
              <a href="subject.html#25362">[ subject ]</a>
              <a href="author.html#25362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
