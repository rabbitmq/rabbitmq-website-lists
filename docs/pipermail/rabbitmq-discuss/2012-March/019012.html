<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Is it possible to have these settings and publish to a queue that exists yet there is no consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20it%20possible%20to%20have%20these%20settings%20and%0A%20publish%20to%20a%20queue%20that%20exists%20yet%20there%20is%20no%20consumer&In-Reply-To=%3CCA%2B22WDTc9Arcuz9yTNBZ9QL-T1Cay_2ZwnNU8rYK1viN5%2BRUeQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019051.html">
   <LINK REL="Next"  HREF="019028.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Is it possible to have these settings and publish to a queue that exists yet there is no consumer</H1>
    <B>Dathan Pattishall</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Is%20it%20possible%20to%20have%20these%20settings%20and%0A%20publish%20to%20a%20queue%20that%20exists%20yet%20there%20is%20no%20consumer&In-Reply-To=%3CCA%2B22WDTc9Arcuz9yTNBZ9QL-T1Cay_2ZwnNU8rYK1viN5%2BRUeQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Is it possible to have these settings and publish to a queue that exists yet there is no consumer">dathan at schoolfeed.com
       </A><BR>
    <I>Wed Mar 21 00:15:07 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019051.html">[rabbitmq-discuss] Rabbit 2.8.0 .NET Client available on Nuget?
</A></li>
        <LI>Next message: <A HREF="019028.html">[rabbitmq-discuss] Is it possible to have these settings and publish to a queue that exists yet there is no consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19012">[ date ]</a>
              <a href="thread.html#19012">[ thread ]</a>
              <a href="subject.html#19012">[ subject ]</a>
              <a href="author.html#19012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My exchange is set with auto_delete to false non-persistent
My queue matches the exchange-it's auto_delete is false again non-persistent

My messages have a 120 second expire time and delivery mode is set to 1
which means the message is non-persistent. (Note I tried the combo of
setting this to 2 with non-persistent queues and exchanges)

If the consumer goes away, yet the queue exists shouldn't the message queue
until the consumer comes online?

For my case the message seems to just drop. Below are some admin commands
illustrating what I perceive is my problem.

./rabbitmqadmin.py list exchanges
+-------+--------------------+---------+-------------+---------+----------+
|<i> vhost |        name        |  type   | auto_delete | durable | internal |
</I>+-------+--------------------+---------+-------------+---------+----------+
|<i> /     |                    | direct  | False       | True    | False    |
</I>*| /     | 53613981           | direct  | False       | False   | False    |
*
|<i> /     | amq.direct         | direct  | False       | True    | False    |
</I>|<i> /     | amq.fanout         | fanout  | False       | True    | False    |
</I>|<i> /     | amq.headers        | headers | False       | True    | False    |
</I>|<i> /     | amq.match          | headers | False       | True    | False    |
</I>|<i> /     | amq.rabbitmq.log   | topic   | False       | True    | False    |
</I>|<i> /     | amq.rabbitmq.trace | topic   | False       | True    | False    |
</I>|<i> /     | amq.topic          | topic   | False       | True    | False    |
</I>+-------+--------------------+---------+-------------+---------+----------+


Notice the bold that is the exchange in question

./rabbitmqadmin.py list bindings
+-------+----------+---------------+------------------+---------------+-----------------+
|<i> vhost |  source  |  destination  | destination_type |  routing_key  |
</I>properties_key  |
+-------+----------+---------------+------------------+---------------+-----------------+
|<i> /     | 53613981 | feed_53598242 | queue            | feed          |
</I>feed            |
|<i> /     | 53613981 | feed_53712882 | queue            | feed          |
</I>feed            |
|<i> /     |          | feed_53598242 | queue            | feed_53598242 |
</I>feed%5F53598242 |
|<i> /     |          | feed_53712882 | queue            | feed_53712882 |
</I>feed%5F53712882 |
+-------+----------+---------------+------------------+---------------+-----------------+

./rabbitmqadmin.py list queues
+-------+---------------+-------------+-----------+---------+------------------------+--------------------+--------+----------+----------------+-------------------------+------------+-------------+
|<i> vhost |     name      | auto_delete | consumers | durable |
</I>exclusive_consumer_tag |     idle_since     | memory | messages |
messages_ready | messages_unacknowledged |    node    | slave_nodes |
+-------+---------------+-------------+-----------+---------+------------------------+--------------------+--------+----------+----------------+-------------------------+------------+-------------+
|<i> /     | feed_53598242 | False       | 0         | False   |
</I>         | 2012-3-20 16:49:28 | 6568   | 0        | 0              | 0
                  | <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at dev</A> |             |
|<i> /     | feed_53712882 | False       | 0         | False   |
</I>         | 2012-3-20 16:49:28 | 6568   | 0        | 0              | 0
                  | <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at dev</A> |             |
+-------+---------------+-------------+-----------+---------+------------------------+--------------------+--------+----------+----------------+-------------------------+------------+-------------+


Publishing the message succeeds yet the message does not queue it gets
discarded.

If the consumer is connected then the message flows as normal and I can see
rabbit work its magic.

How can I force rabbit to queue when the consumer is offline and the
queue/exchange exists on the server?

Note:

I made the exchange durable, the queue durable, and delivery_mode =&gt; 2
still I can't get rabbit to queue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120320/a03cfb47/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120320/a03cfb47/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019051.html">[rabbitmq-discuss] Rabbit 2.8.0 .NET Client available on Nuget?
</A></li>
	<LI>Next message: <A HREF="019028.html">[rabbitmq-discuss] Is it possible to have these settings and publish to a queue that exists yet there is no consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19012">[ date ]</a>
              <a href="thread.html#19012">[ thread ]</a>
              <a href="subject.html#19012">[ subject ]</a>
              <a href="author.html#19012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
