<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Issue with running two RabbitMQ servers on one	machine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20with%20running%20two%20RabbitMQ%20servers%20on%20one%0A%09machine&In-Reply-To=%3CCALD4NQYn%3Dsv9cEJMjQbP86FLf5Z5bG8__MnASjEMQZtDaaXJSA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018841.html">
   <LINK REL="Next"  HREF="018774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Issue with running two RabbitMQ servers on one	machine</H1>
    <B>Brian Jing</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20with%20running%20two%20RabbitMQ%20servers%20on%20one%0A%09machine&In-Reply-To=%3CCALD4NQYn%3Dsv9cEJMjQbP86FLf5Z5bG8__MnASjEMQZtDaaXJSA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Issue with running two RabbitMQ servers on one	machine">brian.newsgroup at gmail.com
       </A><BR>
    <I>Tue Mar 13 03:21:23 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018841.html">[rabbitmq-discuss] Possible bug when disposing connections	in	.NET client 2.7.0/1
</A></li>
        <LI>Next message: <A HREF="018774.html">[rabbitmq-discuss] Issue with running two RabbitMQ servers on one	machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18768">[ date ]</a>
              <a href="thread.html#18768">[ thread ]</a>
              <a href="subject.html#18768">[ subject ]</a>
              <a href="author.html#18768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

We need to upgrade our messaging server from 1.8.0 to 2.7.1. To ensure a
smooth transition, we are trying to make the two rabbit server versions
coexist on the same machine, so we can have our existing messaging system
running while having our new messaging system being tested in the same
environment, This also ensures minimal interruption for the transition in
the production environment as well.

I grabbed the rabbit 2.7.1 source and changed the location of
rabbitmq_env.conf, so that I can specify a different environment for the
new rabbit server.
These are the env variables I specified in rabbitmq_env.conf:
SERVICENAME=
NODENAME=
NODE_PORT=
CONFIG_FILE=

Now I've got 2.7.1 running alongside 1.8.0. The problem is that although I
have SSL configured for 2.7.1, only non-SSl connections currently work. For
any SSL connections, I get a &quot;connection refused&quot; on the client side. I
triple checked the SSL certificates and saw no problems. However, when I
list the status of the 2.7.1 server , it says the following:

Status of node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit-new at ServerA</A>' ...
[{pid,23440},
 {running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;2.7.1&quot;},
                        {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.4&quot;},
                        {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.8&quot;},
                        {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.4.12&quot;},
                        {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.16.4&quot;},
                        {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.13.4&quot;}]},
 {os,{unix,linux}},
 {erlang_version,&quot;Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:4:4]
[rq:4] [async-threads:30] [hipe] [kernel-poll:true]\n&quot;},
 {memory,..
 ...
 ...
...done.

On another machine that only has 2.7.1 on, it produces the following:

Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ServerB</A> ...
[{pid,30862},
 {running_applications,
     [{rabbitmq_federation,&quot;RabbitMQ Federation&quot;,&quot;2.7.1&quot;},
      {rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;2.7.1&quot;},
      {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;2.7.1&quot;},
      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;2.7.1&quot;},
      {rabbit,&quot;RabbitMQ&quot;,&quot;2.7.1&quot;},
      {ssl,&quot;Erlang/OTP SSL application&quot;,&quot;4.1.6&quot;},
      {public_key,&quot;Public key infrastructure&quot;,&quot;0.13&quot;},
      {crypto,&quot;CRYPTO version 2&quot;,&quot;2.0.4&quot;},
      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.7&quot;},
      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.1.10&quot;},
      {rabbitmq_mochiweb,&quot;RabbitMQ Mochiweb Embedding&quot;,&quot;2.7.1&quot;},
      {webmachine,&quot;webmachine&quot;,&quot;1.7.0-rmq2.7.1-hg&quot;},
      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;1.3-rmq2.7.1-git&quot;},
      {inets,&quot;INETS  CXC 138 49&quot;,&quot;5.7.1&quot;},
      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.5&quot;},
      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.17.5&quot;},
      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.14.5&quot;}]},
 {os,{unix,linux}},
 {erlang_version,
     &quot;Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:2:2] [rq:2]
[async-threads:30] [kernel-poll:true]\n&quot;},
 {memory,
  ...
  ...
...done.

I noticed that ServerA doesn't have ssl in the &quot;running_application&quot; list.
Is this why SSL doesn't work? I'm pretty sure erlang R13B03 thats currently
running on ServerA supports SSL because rabbit 1.8.0 is using it.

What are my options here? Would updating Erlang on ServerA to the latest
version solve the problem? Would the latest Erlang be incompatible with
rabbitmq 1.8.0? If I were to still use Erlang R13B03, what shall I do to
make 2.7.1 work with SSL?

Thanks,

Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120313/d9a2779c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120313/d9a2779c/attachment.htm</A>&gt;
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018841.html">[rabbitmq-discuss] Possible bug when disposing connections	in	.NET client 2.7.0/1
</A></li>
	<LI>Next message: <A HREF="018774.html">[rabbitmq-discuss] Issue with running two RabbitMQ servers on one	machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18768">[ date ]</a>
              <a href="thread.html#18768">[ thread ]</a>
              <a href="subject.html#18768">[ subject ]</a>
              <a href="author.html#18768">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
