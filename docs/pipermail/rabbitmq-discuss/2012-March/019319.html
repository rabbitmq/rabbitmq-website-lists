<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] fanout queue not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20fanout%20queue%20not%20working&In-Reply-To=%3Ca894cdf0-ac21-4e53-95ea-c10f65c4c06d%40lf20g2000pbb.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019293.html">
   <LINK REL="Next"  HREF="019276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] fanout queue not working</H1>
    <B>octomeow</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20fanout%20queue%20not%20working&In-Reply-To=%3Ca894cdf0-ac21-4e53-95ea-c10f65c4c06d%40lf20g2000pbb.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] fanout queue not working">octomeow at gmail.com
       </A><BR>
    <I>Fri Mar 30 17:07:44 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019293.html">[rabbitmq-discuss] fanout queue not working
</A></li>
        <LI>Next message: <A HREF="019276.html">[rabbitmq-discuss] Setting Per Message TTL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19319">[ date ]</a>
              <a href="thread.html#19319">[ thread ]</a>
              <a href="subject.html#19319">[ subject ]</a>
              <a href="author.html#19319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone

thanks for the comments. it pointed me in the right direction
the logstash code I was using did use a routing key so even though
it's a
fanout exchange, only one queue rawlogs_consumer would get it.

Julie

On Mar 30, 5:56&#160;am, Steve Powell &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">st... at rabbitmq.com</A>&gt; wrote:
&gt;<i> Dear octo,
</I>&gt;<i>
</I>&gt;<i> Trying to understand what queues and bindings you may have created I
</I>&gt;<i> reformatted the list_bindings output you sent:
</I>&gt;<i>
</I>&gt;<i> Listing bindings ...
</I>&gt;<i> &#160; &#160; &#160; &#160;exchange&#160; &#160;log2_consumer &#160; &#160; &#160; queue &#160; log2_consumer &#160; &#160; &#160; []
</I>&gt;<i> &#160; &#160; &#160; &#160;exchange&#160; &#160;rawlogs_consumer &#160; &#160;queue &#160; rawlogs_consumer &#160; &#160; &#160; &#160;[]
</I>&gt;<i> rawlogsexchange&#160; &#160;log2_consumer &#160; &#160; &#160; queue &#160; &#160; &#160; &#160; &#160; []
</I>&gt;<i> rawlogsexchange&#160; &#160;rawlogs_consumer &#160; &#160;queue &#160; logstash &#160; &#160; &#160; &#160;[]
</I>&gt;<i> ...done.
</I>&gt;<i>
</I>&gt;<i> The first column is theexchangename, followed by 'exchange', then the
</I>&gt;<i> destination (queue) name, followed by 'queue' then the routing key, and
</I>&gt;<i> lastly any arguments on the binding (you have none []).
</I>&gt;<i>
</I>&gt;<i> So what appears is that you have
</I>&gt;<i>
</I>&gt;<i> * bound log2_consumer to the default (blank)exchange(with the routing
</I>&gt;<i> &#160; key set to the name of the queue -- which is normal for a direct
</I>&gt;<i> &#160;exchange, which the defaultexchangeis);
</I>&gt;<i>
</I>&gt;<i> * bound rawlogs_consumer similarly;
</I>&gt;<i>
</I>&gt;<i> These two are default bindings created whenever you create a queue.
</I>&gt;<i>
</I>&gt;<i> Then again you have two (explicit) bindings which you have no-doubt
</I>&gt;<i> created yourself:
</I>&gt;<i>
</I>&gt;<i> * bound log2_consumer to the rawlogsexchange, with a blank (&quot;&quot;) routing
</I>&gt;<i> &#160; key
</I>&gt;<i>
</I>&gt;<i> * bound rawlogs_consumer to the rawlogsexchangewith the logstash key.
</I>&gt;<i>
</I>&gt;<i> If rawlogs is afanoutexchangethen if you publish a message to thatexchange, both of these queues should get a copy of the message
</I>&gt;<i> (regardless of what routing key you supply on the publish -- and
</I>&gt;<i> regardless of the routing key used to bind the queue to thefanoutexchange).
</I>&gt;<i>
</I>&gt;<i> So, the obvious question is 'how did you publish those messages'?
</I>&gt;<i> Supplementary: 'what do you mean &quot;connect fine&quot; to the queue'?
</I>&gt;<i>
</I>&gt;<i> I can guess that if you publish to the defaultexchange(&quot;&quot;) with
</I>&gt;<i> routing key &quot;rawlogs_consumer&quot; you would see what you say you see, but I
</I>&gt;<i> can't think how else you might see it. Certainly, if you publish to the
</I>&gt;<i> &quot;rawlogs&quot;exchangeI would expect the message to appear on both queues.
</I>&gt;<i>
</I>&gt;<i> Steve Powell
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">st... at rabbitmq.com</A>
</I>&gt;<i> [wrk: +44-2380-111-528] [mob: +44-7815-838-558]
</I>&gt;<i>
</I>&gt;<i> On 30 Mar 2012, at 01:26, octomeow wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; newbie to rabbitmq &#160;and I'm not getting messages into a certain queue
</I>&gt;<i>
</I>&gt;<i> &gt; I have a simplefanoutexchange
</I>&gt;<i> &gt; # rabbitmqctl list_exchanges
</I>&gt;<i> &gt; rawlogsfanout
</I>&gt;<i>
</I>&gt;<i> &gt; I have bound thisexchangeto a few queues
</I>&gt;<i> &gt; # rabbitmqctl list_bindings
</I>&gt;<i> &gt; Listing bindings ...
</I>&gt;<i> &gt; &#160; &#160; &#160; &#160;exchange&#160; &#160; &#160; &#160;log2_consumer &#160; &#160; &#160; queue
</I>&gt;<i> &gt; log2_consumer &#160; &#160; &#160; []
</I>&gt;<i> &gt; &#160; &#160; &#160; &#160;exchange&#160; &#160; &#160; &#160;rawlogs_consumer &#160; &#160; &#160; &#160;queue
</I>&gt;<i> &gt; rawlogs_consumer &#160; &#160; &#160; &#160;[]
</I>&gt;<i> &gt; rawlogsexchange&#160; &#160; &#160; &#160;log2_consumer &#160; &#160; &#160; queue &#160; &#160; &#160; &#160; &#160; []
</I>&gt;<i> &gt; rawlogsexchange&#160; &#160; &#160; &#160;rawlogs_consumer &#160; &#160; &#160; &#160;queue
</I>&gt;<i> &gt; logstash &#160; &#160; &#160; &#160;[]
</I>&gt;<i> &gt; ...done.
</I>&gt;<i>
</I>&gt;<i> &gt; I connect fine to the log2_consumer queue....however, I get NO
</I>&gt;<i> &gt; messages.
</I>&gt;<i>
</I>&gt;<i> &gt; my other queue..... the rawlogs_consumer does the the messges
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019293.html">[rabbitmq-discuss] fanout queue not working
</A></li>
	<LI>Next message: <A HREF="019276.html">[rabbitmq-discuss] Setting Per Message TTL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19319">[ date ]</a>
              <a href="thread.html#19319">[ thread ]</a>
              <a href="subject.html#19319">[ subject ]</a>
              <a href="author.html#19319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
