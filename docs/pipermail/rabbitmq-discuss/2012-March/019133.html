<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [PATCH] Add exclusive queue support to stomp	adaptor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BPATCH%5D%20Add%20exclusive%20queue%20support%20to%20stomp%0A%09adaptor&In-Reply-To=%3CD7E1FD94-C2F3-4F7A-87E4-5939A828ABAC%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019129.html">
   <LINK REL="Next"  HREF="019136.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [PATCH] Add exclusive queue support to stomp	adaptor</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BPATCH%5D%20Add%20exclusive%20queue%20support%20to%20stomp%0A%09adaptor&In-Reply-To=%3CD7E1FD94-C2F3-4F7A-87E4-5939A828ABAC%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] [PATCH] Add exclusive queue support to stomp	adaptor">steve at rabbitmq.com
       </A><BR>
    <I>Mon Mar 26 15:40:54 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019129.html">[rabbitmq-discuss] [PATCH] Add exclusive queue support to stomp adaptor
</A></li>
        <LI>Next message: <A HREF="019136.html">[rabbitmq-discuss] [PATCH] Add exclusive queue support to stomp	adaptor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19133">[ date ]</a>
              <a href="thread.html#19133">[ thread ]</a>
              <a href="subject.html#19133">[ subject ]</a>
              <a href="author.html#19133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jeff,

&gt;<i> It does look like /queue/ would do the exclusive access (not sure from
</I>&gt;<i> the docs - it just says message will be delivered to one subscriber, not
</I>&gt;<i> sure if that means it'll block out other subscribers or distribute among
</I>&gt;<i> connected subscribers).
</I>
The doc says it will create a shared queue (not exclusive). The
sentence:

&gt;<i> Queue destinations deliver each message to at most one subscriber.
</I>
means simply that any particular message is sent to only one of the
subscribers. There may be many subscribers, though.

I'm not sure that the 'exclusive' option that activemq supplies is quite
what your patch would achieve; here is what the AMQP reference says
about the exclusive bit on queue declarations:

&gt;<i> Exclusive queues may only be accessed by the current connection, and are
</I>&gt;<i> deleted when that connection closes. Passive declaration of an exclusive
</I>&gt;<i> queue by other connections are not allowed.
</I>
This doesn't stop the server putting messages on the queue -- this would
depend upon how it is bound to an exchange. Another connection doesn't
need access to the queue to publish a message that might get there.
However, if you SEND to the /queue/name (on another STOMP connection)
then that will fail if the queue was declared exclusive, because the
queue cannot be 'created' (or even passively declared).

HOWEVER, you said you were using amq/queue/&lt;name&gt; destinations. In that
case no queue declarations are ever made in STOMP SEND or SUBSCRIBE,
and so the mod you sent wouldn't help either.

Unfortunately, making it exclusive (via the web ui or anywhere else)
will prevent any other connection (a STOMP one, even) from accessing it
(SUBSCRIBE will fail -- the queue will look like it doesn't exist). So
you are scuppered there, too.

Can you explain more about activemq's exclusive option? How is it
applied? Can you define it and the 'first subscriber that comes along'
gets it? What happens exactly when we attempt to subscribe to it from
another connection?

At the moment, I'm not at all sure how we might ensure that there is
only one consumer (at a time?) for any queue. But IDKE.

Steve Powell  (a sorry bunny)
----------some more definitions from the SPD----------
chinchilla (n.) Cooling device for the lower jaw.
socialcast (n.) Someone to whom everyone is speaking but nobody likes.
literacy (n.) A textually transmitted disease usually contracted in childhood.
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019129.html">[rabbitmq-discuss] [PATCH] Add exclusive queue support to stomp adaptor
</A></li>
	<LI>Next message: <A HREF="019136.html">[rabbitmq-discuss] [PATCH] Add exclusive queue support to stomp	adaptor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19133">[ date ]</a>
              <a href="thread.html#19133">[ thread ]</a>
              <a href="subject.html#19133">[ subject ]</a>
              <a href="author.html#19133">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
