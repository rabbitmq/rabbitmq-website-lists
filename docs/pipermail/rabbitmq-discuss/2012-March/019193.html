<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Default vhost and Http API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Default%20vhost%20and%20Http%20API&In-Reply-To=%3CCAM8fPiQsTA1dRV78FLZmaK0thsnYbCRzeiMzPMim%2Bk0UByAV3A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019191.html">
   <LINK REL="Next"  HREF="019197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Default vhost and Http API</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Default%20vhost%20and%20Http%20API&In-Reply-To=%3CCAM8fPiQsTA1dRV78FLZmaK0thsnYbCRzeiMzPMim%2Bk0UByAV3A%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Default vhost and Http API">tonygarnockjones+rabbitmq at gmail.com
       </A><BR>
    <I>Tue Mar 27 20:30:57 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019191.html">[rabbitmq-discuss] Default vhost and Http API
</A></li>
        <LI>Next message: <A HREF="019197.html">[rabbitmq-discuss] Default vhost and Http API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19193">[ date ]</a>
              <a href="thread.html#19193">[ thread ]</a>
              <a href="subject.html#19193">[ subject ]</a>
              <a href="author.html#19193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Stone,

Sorry, I don't quite understand: how are you declaring the queue? Is it
with the Erlang client across an AMQP network link? Or some other client
across an AMQP network link? Or is it with the Erlang client in the same
Erlang cluster as the server?

If it's across an AMQP network link, perhaps you could paste in tcpdump
output showing the bytes sent on the wire during the queue.declare. That
way it's crystal clear what's happening.

If it's not across an AMQP link then yeah, perhaps the Erlang client needs
more type-assertionish things in it :-)

Regards,
  Tony

2012/3/27 stone &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">zmstone at gmail.com</A>&gt;

&gt;<i> Hi Tony,
</I>&gt;<i>
</I>&gt;<i> I didn't save the scene, didn't really look into the fault client code.
</I>&gt;<i> Just had a quick test, reproduced by using term_to_binary instead of
</I>&gt;<i> list_to_binary to make the queue name in Erlang client.
</I>&gt;<i> Perhaps this WAS exactly the case from the other day. shame :)
</I>&gt;<i> I simply though it was UTF used in that case because the crash report has
</I>&gt;<i> &quot;utf&quot; in it.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://localhost:55672/#/queues">http://localhost:55672/#/queues</A>
</I>&gt;<i> {error,{exit,{ucs,{bad_utf8_character_code}},
</I>&gt;<i>              [{xmerl_ucs,from_utf8,1},
</I>&gt;<i>               {mochijson2,json_encode_string,2},
</I>&gt;<i>               {mochijson2,'-json_encode_proplist/2-fun-0-',3},
</I>&gt;<i>               {lists,foldl,3},
</I>&gt;<i>               {mochijson2,json_encode_proplist,2},
</I>&gt;<i>               {mochijson2,'-json_encode_array/2-fun-0-',3},
</I>&gt;<i>               {lists,foldl,3},
</I>&gt;<i>               {mochijson2,json_encode_array,2}]}}
</I>&gt;<i>
</I>&gt;<i> Anyway, perhaps  rabbit-server should have the name validated before
</I>&gt;<i> allowing the declaration.
</I>&gt;<i>
</I>&gt;<i> BRs
</I>&gt;<i> /stone
</I>&gt;<i>
</I>&gt;<i> &#22312; 2012&#24180;3&#26376;27&#26085; &#19979;&#21320;7:27&#65292;Tony Garnock-Jones &lt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonygarnockjones+rabbitmq at gmail.com</A>&gt;&#20889;&#36947;&#65306;
</I>&gt;<i>
</I>&gt;&gt;<i> On 27 March 2012 12:50, stone &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">zmstone at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The other day, we accidentally created queues and bindings with UTF
</I>&gt;&gt;&gt;<i> characters in the names.
</I>&gt;&gt;&gt;<i> Then the management web GUI crashed (on mochiweb level if i remember
</I>&gt;&gt;&gt;<i> correctly), so we couldn't delete the queu on GUI.
</I>&gt;&gt;&gt;<i> And there was no CLI to do it, we actually had to reset the node to get
</I>&gt;&gt;&gt;<i> rid of the bad-naming queues.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A test case would be extremely useful and welcome! Can you remember the
</I>&gt;&gt;<i> exact bytes used in the names? And which GUI actions caused the crashes?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>   Tony
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>

-- 
Tony Garnock-Jones
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tonygarnockjones at gmail.com</A>
<A HREF="http://homepages.kcbbs.gen.nz/tonyg/">http://homepages.kcbbs.gen.nz/tonyg/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120327/2d52e851/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120327/2d52e851/attachment.htm</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019191.html">[rabbitmq-discuss] Default vhost and Http API
</A></li>
	<LI>Next message: <A HREF="019197.html">[rabbitmq-discuss] Default vhost and Http API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19193">[ date ]</a>
              <a href="thread.html#19193">[ thread ]</a>
              <a href="subject.html#19193">[ subject ]</a>
              <a href="author.html#19193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
