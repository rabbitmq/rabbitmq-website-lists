<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SuSE%3A%202.8.0%20start%20script%20uses%20%27runuser%27&In-Reply-To=%3CEFA29522-2F64-4056-8AF6-271B6455337A%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019064.html">
   <LINK REL="Next"  HREF="018970.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SuSE%3A%202.8.0%20start%20script%20uses%20%27runuser%27&In-Reply-To=%3CEFA29522-2F64-4056-8AF6-271B6455337A%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'">steve at rabbitmq.com
       </A><BR>
    <I>Fri Mar 23 12:34:12 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019064.html">[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
</A></li>
        <LI>Next message: <A HREF="018970.html">[rabbitmq-discuss] Monitor memory and cpu usage of RabbitMQ message	broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19089">[ date ]</a>
              <a href="thread.html#19089">[ thread ]</a>
              <a href="subject.html#19089">[ subject ]</a>
              <a href="author.html#19089">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, it would.

The setsid fix has gone into the 2.8.1 release, but means we are using su.

If anyone has any advice about the correct use of startproc
we would be very grateful to receive it.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
chinchilla (n.) Cooling device for the lower jaw.
socialcast (n.) Someone to whom everyone is speaking but nobody likes.
literacy (n.) A textually transmitted disease usually contracted in childhood.

On 22 Mar 2012, at 14:14, Josh Geisser wrote:

&gt;<i> Thanks for the fast response
</I>&gt;<i> 
</I>&gt;<i> Actually, removing the whole START_PROG works as workaround for us with the 2.8.0-1.suse.noarch.rpm
</I>&gt;<i> 
</I>&gt;<i> Thanks a lot
</I>&gt;<i> Cheers
</I>&gt;<i> Josh
</I>&gt;<i> 
</I>&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i> Von: Steve Powell [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">steve at rabbitmq.com</A>] 
</I>&gt;<i> Gesendet: Dienstag, 20. M&#228;rz 2012 13:24
</I>&gt;<i> An: Josh Geisser
</I>&gt;<i> Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> Betreff: Re: [rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
</I>&gt;<i> 
</I>&gt;<i> Dear Josh,
</I>&gt;<i> 
</I>&gt;<i> Thanks for telling us about this -- this is rather embarrassing. In
</I>&gt;<i> attempting to get Linux server installations to start the rabbitmq-service
</I>&gt;<i> without blocking shutdown, we used runuser for certain systems. Our
</I>&gt;<i> mistake.
</I>&gt;<i> 
</I>&gt;<i> A workaround ought to be to replace runuser in the relevant script, as
</I>&gt;<i> below:
</I>&gt;<i> 
</I>&gt;<i> On line 29 (or thereabouts) in the rabbitmq-server script in init.d
</I>&gt;<i> there is a line like this:
</I>&gt;<i> 
</I>&gt;<i> START_PROG=&quot;runuser rabbitmq --session-command&quot;
</I>&gt;<i> 
</I>&gt;<i> which you should replace with:
</I>&gt;<i> 
</I>&gt;<i> START_PROG=&quot;setsid&quot;
</I>&gt;<i> 
</I>&gt;<i> This will cause the rabbitmq-server service to be started with 'su'. Be
</I>&gt;<i> aware that this might inhibit shutdown (since su creates a PAM session
</I>&gt;<i> for the user rabbitmq).
</I>&gt;<i> 
</I>&gt;<i> We'll update our SuSE rpm file, when we find a proper solution to this.
</I>&gt;<i> 
</I>&gt;<i> Steve Powell  (a happy bunny)
</I>&gt;<i> ----------some more definitions from the SPD----------
</I>&gt;<i> vermin (v.) Treating the dachshund for roundworm.
</I>&gt;<i> chinchilla (n.) Cooling device for the lower jaw.
</I>&gt;<i> socialcast (n.) Someone to whom everyone is speaking but nobody likes.
</I>&gt;<i> 
</I>&gt;<i> On 20 Mar 2012, at 08:34, Josh Geisser wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi all
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I just noticed that 'rabbitmq-server-2.8.0-1.suse.noarch.rpm' throws the following error when being started:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> /etc/init.d/rabbitmq-server: line 60: runuser: command not found
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The old 2.7.1 packaged rc-script was just fine
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> FYI &amp; cheers
</I>&gt;&gt;<i> Josh
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> /etc/SuSE-release sais we're using
</I>&gt;&gt;<i> SUSE Linux Enterprise Server 11 (x86_64)
</I>&gt;&gt;<i> VERSION = 11
</I>&gt;&gt;<i> PATCHLEVEL = 1
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> ----
</I>&gt;&gt;<i> ASG at hnet
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> ----
</I>&gt;<i> ASG at hnet
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019064.html">[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
</A></li>
	<LI>Next message: <A HREF="018970.html">[rabbitmq-discuss] Monitor memory and cpu usage of RabbitMQ message	broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19089">[ date ]</a>
              <a href="thread.html#19089">[ thread ]</a>
              <a href="subject.html#19089">[ subject ]</a>
              <a href="author.html#19089">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
