<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] newbie problem--'Error: unable to connect to node 'rabbit at rabbitmq-small02-dev': nodedown'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20newbie%20problem--%27Error%3A%20unable%20to%20connect%20to%0A%20node%20%27rabbit%40rabbitmq-small02-dev%27%3A%20nodedown%27&In-Reply-To=%3CCAMXtMFB%3D-Z018VJFGGCO57U-QKAZe1BEWoPvZ5zSNScrz%3Dn85g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018909.html">
   <LINK REL="Next"  HREF="018914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] newbie problem--'Error: unable to connect to node 'rabbit at rabbitmq-small02-dev': nodedown'</H1>
    <B>John Stoner</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20newbie%20problem--%27Error%3A%20unable%20to%20connect%20to%0A%20node%20%27rabbit%40rabbitmq-small02-dev%27%3A%20nodedown%27&In-Reply-To=%3CCAMXtMFB%3D-Z018VJFGGCO57U-QKAZe1BEWoPvZ5zSNScrz%3Dn85g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] newbie problem--'Error: unable to connect to node 'rabbit at rabbitmq-small02-dev': nodedown'">johnstoner2 at gmail.com
       </A><BR>
    <I>Fri Mar 16 21:26:52 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018909.html">[rabbitmq-discuss] newbie problem--'Error: unable to connect to node 'rabbit at rabbitmq-small02-dev': nodedown'
</A></li>
        <LI>Next message: <A HREF="018914.html">[rabbitmq-discuss] newbie problem--'Error: unable to connect to node 'rabbit at rabbitmq-small02-dev': nodedown'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18912">[ date ]</a>
              <a href="thread.html#18912">[ thread ]</a>
              <a href="subject.html#18912">[ subject ]</a>
              <a href="author.html#18912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ok...

still getting

March 16, 2012 @ 08:54:01PM: ~
[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jstoner at rabbitmq-small02-dev</A>]&gt; sudo rabbitmqctl cluster
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-small01-dev</A>
Clustering node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-small02-dev</A>' with
['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-small01-dev</A>'] ...
Error: {no_running_cluster_nodes,['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-small01-dev</A>'],
                                 ['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at rabbitmq-small01-dev</A>']}


I changed the rabbitmq.config to

[
                {kernel,
                        [{inet_dist_listen_min, [some number]},
                         {inet_dist_listen_max, [another number]}]
                }
].


on both servers, and restarted.

I think we have the right ports open now.

The erlang cookie matches.

seeing traffic on 4369, but not the other ports.

What else could be wrong?

On Fri, Mar 16, 2012 at 1:37 PM, Michael Cumings &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mcumings at narrativescience.com</A>&gt; wrote:

&gt;<i> So what is the considerations on having 5 over 10 or 1?  Is there a
</I>&gt;<i> reasonable criteria that can be used to determine what an appropriate
</I>&gt;<i> number of ports that should be allocated?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Fri, Mar 16, 2012 at 12:56 PM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi John,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I assume that you established the reason for the clustering problems
</I>&gt;&gt;<i> encountered earlier was due to firewall configuration.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 16/03/12 17:25, John Stoner wrote:
</I>&gt;&gt;<i> &gt; We're looking to open fewer ports, not more./ /Is there a minimum we
</I>&gt;&gt;<i> &gt; could do? Would one work, or would it break something else?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One port is possible (then inet_dist_listen_min = inet_dist_listen_max),
</I>&gt;&gt;<i> but a small number like 5 is more common. Avoid the ephemeral port range
</I>&gt;&gt;<i> when you make your selection.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Also, we have these ports open to all TCP.  In the spirit of securing
</I>&gt;&gt;<i> &gt; our systems, I guess we could open 4369 only to the IPs of the other
</I>&gt;&gt;<i> &gt; machines in the cluster. Is that a good idea? Can you think of more
</I>&gt;&gt;<i> &gt; firewall restrictions to add?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> As discussed previously and above, you need to open at least one port in
</I>&gt;&gt;<i> addition to the one used by the port mapper daemon. You are free to add
</I>&gt;&gt;<i> further firewall restrictions, as long as all clusternodes are
</I>&gt;&gt;<i> accessible from all other clusternodes on the relevant ports, as
</I>&gt;&gt;<i> discussed here:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.rabbitmq.com/clustering.html#firewall">http://www.rabbitmq.com/clustering.html#firewall</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Emile
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
blogs:
<A HREF="http://johnstoner.wordpress.com/">http://johnstoner.wordpress.com/</A>
'In knowledge is power; in  wisdom, humility.'
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120316/b054e5be/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120316/b054e5be/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018909.html">[rabbitmq-discuss] newbie problem--'Error: unable to connect to node 'rabbit at rabbitmq-small02-dev': nodedown'
</A></li>
	<LI>Next message: <A HREF="018914.html">[rabbitmq-discuss] newbie problem--'Error: unable to connect to node 'rabbit at rabbitmq-small02-dev': nodedown'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18912">[ date ]</a>
              <a href="thread.html#18912">[ thread ]</a>
              <a href="subject.html#18912">[ subject ]</a>
              <a href="author.html#18912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
