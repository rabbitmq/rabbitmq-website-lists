<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ distaste for symlinks?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20distaste%20for%20symlinks%3F&In-Reply-To=%3CCB750486.38CFD%25pdezwart%40rubiconproject.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018501.html">
   <LINK REL="Next"  HREF="018511.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ distaste for symlinks?</H1>
    <B>Pieter de Zwart</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20distaste%20for%20symlinks%3F&In-Reply-To=%3CCB750486.38CFD%25pdezwart%40rubiconproject.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ distaste for symlinks?">pdezwart at rubiconproject.com
       </A><BR>
    <I>Thu Mar  1 18:48:38 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018501.html">[rabbitmq-discuss] clott9
</A></li>
        <LI>Next message: <A HREF="018511.html">[rabbitmq-discuss] RabbitMQ distaste for symlinks?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18503">[ date ]</a>
              <a href="thread.html#18503">[ thread ]</a>
              <a href="subject.html#18503">[ subject ]</a>
              <a href="author.html#18503">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey everyone,

We had something weird happen overnight. Our setup dictates that rabbit
run under /var/lib/rabbitmq, a partition that only has 9G of disk space.
We opted to symlink
/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at frpp-urb0000</A>/msg_store_transient to
/rabbitmq/msg_store_transient, which is hosted on a separate partition
with 600G of space instead. Somehow, overnight, the symlink went missing,
and rabbit started writing back to /var, filled up the disk space, and
took our primary broker down (thank god for HA and redundancy).

We looked through the access logs and we cant find any indication of any
user logging in and/or touching the symlink, which brought up the
question: does rabbit do any file manipulation of the transient message
store? Maybe delete it when its empty and then recreate it, or something?
I know, I am grasping for straws...

Thanks!
Pieter

</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018501.html">[rabbitmq-discuss] clott9
</A></li>
	<LI>Next message: <A HREF="018511.html">[rabbitmq-discuss] RabbitMQ distaste for symlinks?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18503">[ date ]</a>
              <a href="thread.html#18503">[ thread ]</a>
              <a href="subject.html#18503">[ subject ]</a>
              <a href="author.html#18503">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
