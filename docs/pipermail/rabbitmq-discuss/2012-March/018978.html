<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SuSE%3A%202.8.0%20start%20script%20uses%20%27runuser%27&In-Reply-To=%3C2848820F-5EE8-47E3-B5C5-60DF11E8A3FB%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018965.html">
   <LINK REL="Next"  HREF="019064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SuSE%3A%202.8.0%20start%20script%20uses%20%27runuser%27&In-Reply-To=%3C2848820F-5EE8-47E3-B5C5-60DF11E8A3FB%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'">steve at rabbitmq.com
       </A><BR>
    <I>Tue Mar 20 12:23:44 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018965.html">[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
</A></li>
        <LI>Next message: <A HREF="019064.html">[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18978">[ date ]</a>
              <a href="thread.html#18978">[ thread ]</a>
              <a href="subject.html#18978">[ subject ]</a>
              <a href="author.html#18978">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Josh,

Thanks for telling us about this -- this is rather embarrassing. In
attempting to get Linux server installations to start the rabbitmq-service
without blocking shutdown, we used runuser for certain systems. Our
mistake.

A workaround ought to be to replace runuser in the relevant script, as
below:

On line 29 (or thereabouts) in the rabbitmq-server script in init.d
there is a line like this:

START_PROG=&quot;runuser rabbitmq --session-command&quot;

which you should replace with:

START_PROG=&quot;setsid&quot;

This will cause the rabbitmq-server service to be started with 'su'. Be
aware that this might inhibit shutdown (since su creates a PAM session
for the user rabbitmq).

We'll update our SuSE rpm file, when we find a proper solution to this.

Steve Powell  (a happy bunny)
----------some more definitions from the SPD----------
vermin (v.) Treating the dachshund for roundworm.
chinchilla (n.) Cooling device for the lower jaw.
socialcast (n.) Someone to whom everyone is speaking but nobody likes.

On 20 Mar 2012, at 08:34, Josh Geisser wrote:

&gt;<i> Hi all
</I>&gt;<i>  
</I>&gt;<i> I just noticed that &#8216;rabbitmq-server-2.8.0-1.suse.noarch.rpm&#8217; throws the following error when being started:
</I>&gt;<i>  
</I>&gt;<i> /etc/init.d/rabbitmq-server: line 60: runuser: command not found
</I>&gt;<i>  
</I>&gt;<i> The old 2.7.1 packaged rc-script was just fine
</I>&gt;<i>  
</I>&gt;<i> FYI &amp; cheers
</I>&gt;<i> Josh
</I>&gt;<i>  
</I>&gt;<i> /etc/SuSE-release sais we&#8217;re using
</I>&gt;<i> SUSE Linux Enterprise Server 11 (x86_64)
</I>&gt;<i> VERSION = 11
</I>&gt;<i> PATCHLEVEL = 1
</I>&gt;<i> -- 
</I>&gt;<i> ----
</I>&gt;<i> ASG at hnet
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018965.html">[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
</A></li>
	<LI>Next message: <A HREF="019064.html">[rabbitmq-discuss] SuSE: 2.8.0 start script uses 'runuser'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18978">[ date ]</a>
              <a href="thread.html#18978">[ thread ]</a>
              <a href="subject.html#18978">[ subject ]</a>
              <a href="author.html#18978">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
