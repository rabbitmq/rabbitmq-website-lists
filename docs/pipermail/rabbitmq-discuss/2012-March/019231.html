<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ Java Client - Defect 24723 - Memory leak
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Java%20Client%20-%20Defect%2024723%20-%20Memory%20leak&In-Reply-To=%3CB4E959105FBF514F9500B9A20310D5BD027ED7A5E0%40PPC-EMAIL.purchasingpwr.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019228.html">
   <LINK REL="Next"  HREF="019232.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ Java Client - Defect 24723 - Memory leak</H1>
    <B>Scott Garten</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20Java%20Client%20-%20Defect%2024723%20-%20Memory%20leak&In-Reply-To=%3CB4E959105FBF514F9500B9A20310D5BD027ED7A5E0%40PPC-EMAIL.purchasingpwr.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ Java Client - Defect 24723 - Memory leak">sgarten at purchasingpower.com
       </A><BR>
    <I>Wed Mar 28 20:21:36 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019228.html">[rabbitmq-discuss] Exclusive consuming with mirrored queues
</A></li>
        <LI>Next message: <A HREF="019232.html">[rabbitmq-discuss] how to get higher throughput?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19231">[ date ]</a>
              <a href="thread.html#19231">[ thread ]</a>
              <a href="subject.html#19231">[ subject ]</a>
              <a href="author.html#19231">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

This morning started out with an OutOfMemory exception after I kicked off a sustainability test before I left the office for the day; digging into it we found a number of classes failing to free up. They appear to correlate to the number of messages that we sent to rabbitmq. A web search revealed a defect # 24723 was identified and reported fixed.

We were using 2.7.1 of the Java client, but since have also tried 2.8.0 and 2.8.1 of the client - hoping that one of these later releases contained a fix. Unfortunately, we are still seeing the same memory leak behavior.

Here is a jmap dump of the classes that we witness not freeing (even after an explicit GC).

  19:          1979         189984  com.rabbitmq.client.impl.ChannelN
  28:          1980          79200  com.rabbitmq.client.impl.CommandAssembler
  29:          1979          79160  com.rabbitmq.client.ShutdownSignalException
  30:          1979          79160  com.rabbitmq.client.impl.ConsumerDispatcher
  35:          1979          63328  com.rabbitmq.client.impl.AMQImpl$Channel$Close
  48:          1980          31680  com.rabbitmq.client.impl.AMQCommand

Appears to be similar to that which was previously reported on the mailing list.

Not certain where to turn at this point. Can anyone confirm that they see the fix freeing up the objects?

Thanks, Scott.

The information contained in this transmission is confidential. It is intended solely for the use of the individual(s) or organization(s) to whom it is addressed. Any disclosure, copying or further distribution is not permitted unless such privilege is explicitly granted in writing by Purchasing Power LLC. Furthermore, Purchasing Power LLC.. is not responsible for the proper and complete transmission of the substance of this communication, nor for any delay in its receipt. 

All outgoing emails are scanned for viruses by Barracuda Spam Firewall.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120328/ba5c8c65/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120328/ba5c8c65/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019228.html">[rabbitmq-discuss] Exclusive consuming with mirrored queues
</A></li>
	<LI>Next message: <A HREF="019232.html">[rabbitmq-discuss] how to get higher throughput?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19231">[ date ]</a>
              <a href="thread.html#19231">[ thread ]</a>
              <a href="subject.html#19231">[ subject ]</a>
              <a href="author.html#19231">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
