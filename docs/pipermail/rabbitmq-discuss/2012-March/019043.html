<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Autodelete queues not being deleted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Autodelete%20queues%20not%20being%20deleted&In-Reply-To=%3C50b390e0-d845-4f80-a908-74336c69951f%40em9g2000vbb.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018987.html">
   <LINK REL="Next"  HREF="018997.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Autodelete queues not being deleted</H1>
    <B>Valentin BERNARD</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Autodelete%20queues%20not%20being%20deleted&In-Reply-To=%3C50b390e0-d845-4f80-a908-74336c69951f%40em9g2000vbb.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Autodelete queues not being deleted">vbernard42 at gmail.com
       </A><BR>
    <I>Wed Mar 21 16:45:18 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018987.html">[rabbitmq-discuss] Autodelete queues not being deleted
</A></li>
        <LI>Next message: <A HREF="018997.html">[rabbitmq-discuss] Rabbit 2.8.0 .NET Client available on Nuget?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19043">[ date ]</a>
              <a href="thread.html#19043">[ thread ]</a>
              <a href="subject.html#19043">[ subject ]</a>
              <a href="author.html#19043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We had a similar problem here. The most probable explanation in our
case was that the flow of the program could sometimes be interrupted
between the declaration of the queue and the actual consumption.

Our best solution was to declare our auto-delete queues with the x-
expires argument. That way, auto-delete queues with 0 consumers always
get deleted eventually.

Cheers.

On 20 mar, 15:44, Dave Stevens &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">daverstev... at gmail.com</A>&gt; wrote:
&gt;<i> Hrmmmm, you bring up a good point. A queue with this name definitely once
</I>&gt;<i> had consumers. It looks like there were never any deliveries for the exact
</I>&gt;<i> queue in question though. I'm thinking that the reconnect logic in the
</I>&gt;<i> library I'm using is causing queues to be redeclared when my app is
</I>&gt;<i> shutting down.
</I>&gt;<i>
</I>&gt;<i> On Tue, Mar 20, 2012 at 10:32 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">si... at rabbitmq.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; On 20/03/12 14:23, Dave Stevens wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; I frequently notice that queues which were created with autodelete are
</I>&gt;<i> &gt;&gt; not actually deleted once there are no more consumers.
</I>&gt;<i>
</I>&gt;<i> &gt; Just to be absolutely clear here: you mean they had consumers once, and
</I>&gt;<i> &gt; then the consumers all went away? If the queue never has consumers it will
</I>&gt;<i> &gt; not autodelete (otherwise it would autodelete as soon as you created it).
</I>&gt;<i>
</I>&gt;<i> &gt; If you do mean that there were once consumers and the queue is still not
</I>&gt;<i> &gt; getting deleted, then yes, that would be wrong. We do test for this though
</I>&gt;<i> &gt; :-) so a test program would be helpful.
</I>&gt;<i>
</I>&gt;<i> &gt; Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Simon MacMullen
</I>&gt;<i> &gt; RabbitMQ, VMware
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018987.html">[rabbitmq-discuss] Autodelete queues not being deleted
</A></li>
	<LI>Next message: <A HREF="018997.html">[rabbitmq-discuss] Rabbit 2.8.0 .NET Client available on Nuget?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19043">[ date ]</a>
              <a href="thread.html#19043">[ thread ]</a>
              <a href="subject.html#19043">[ subject ]</a>
              <a href="author.html#19043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
