<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RMQ Java Client - ChannelN.waitForConfirm randomly throwing exceptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20Java%20Client%20-%20ChannelN.waitForConfirm%0A%20randomly%20throwing%20exceptions&In-Reply-To=%3C33544845.post%40talk.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019218.html">
   <LINK REL="Next"  HREF="019225.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RMQ Java Client - ChannelN.waitForConfirm randomly throwing exceptions</H1>
    <B>Emanuele Gheradini</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RMQ%20Java%20Client%20-%20ChannelN.waitForConfirm%0A%20randomly%20throwing%20exceptions&In-Reply-To=%3C33544845.post%40talk.nabble.com%3E"
       TITLE="[rabbitmq-discuss] RMQ Java Client - ChannelN.waitForConfirm randomly throwing exceptions">ghepardo_1982 at hotmail.com
       </A><BR>
    <I>Wed Mar 28 17:29:51 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019218.html">[rabbitmq-discuss] RMQ Java Client - ChannelN.waitForConfirm randomly throwing exceptions
</A></li>
        <LI>Next message: <A HREF="019225.html">[rabbitmq-discuss] RMQ Java Client - ChannelN.waitForConfirm	randomly throwing exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19224">[ date ]</a>
              <a href="thread.html#19224">[ thread ]</a>
              <a href="subject.html#19224">[ subject ]</a>
              <a href="author.html#19224">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I want also to add that what I understood is:

for some reasons RabbitMQ java client gives the same channel (or channel
number) to different threads, then these threads will perform different
operations on that channel which will be closed by RabbitMQjavaclient, thus
resulting in the crash of the waitForConfirm method, at line 182 (here is
the snipped):

 181: if (getCloseReason() != null) {
 182:                  throw Utility.fixStackTrace(getCloseReason());
 183:               }


I tried getting channels from rabbit in this way:

AtomicInteger chanNumber = new AtomicInteger(0);

connection.createChannel(chanNumber.getAndIncrement());

to be sure that each thread gets a channel with a different channelNumber,
but this does not work either...


I hope someone can give me a suggestion.

Thanks.
-- 
View this message in context: <A HREF="http://old.nabble.com/RMQ-Java-Client---ChannelN.waitForConfirm-randomly-throwing-exceptions-tp33544834p33544845.html">http://old.nabble.com/RMQ-Java-Client---ChannelN.waitForConfirm-randomly-throwing-exceptions-tp33544834p33544845.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.

</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019218.html">[rabbitmq-discuss] RMQ Java Client - ChannelN.waitForConfirm randomly throwing exceptions
</A></li>
	<LI>Next message: <A HREF="019225.html">[rabbitmq-discuss] RMQ Java Client - ChannelN.waitForConfirm	randomly throwing exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19224">[ date ]</a>
              <a href="thread.html#19224">[ thread ]</a>
              <a href="subject.html#19224">[ subject ]</a>
              <a href="author.html#19224">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
