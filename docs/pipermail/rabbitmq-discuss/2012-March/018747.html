<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Questions about limit alarm and report in	the	log file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questions%20about%20limit%20alarm%20and%20report%20in%0A%09the%09log%20file&In-Reply-To=%3C62393095-55b0-4dc8-a044-c3f60a96e3ba%40strongmad.batnest.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018743.html">
   <LINK REL="Next"  HREF="018755.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Questions about limit alarm and report in	the	log file</H1>
    <B>Jerry Kuch</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Questions%20about%20limit%20alarm%20and%20report%20in%0A%09the%09log%20file&In-Reply-To=%3C62393095-55b0-4dc8-a044-c3f60a96e3ba%40strongmad.batnest.org%3E"
       TITLE="[rabbitmq-discuss] Questions about limit alarm and report in	the	log file">jerryk at vmware.com
       </A><BR>
    <I>Mon Mar 12 15:48:09 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018743.html">[rabbitmq-discuss] Questions about limit alarm and report in the	log file
</A></li>
        <LI>Next message: <A HREF="018755.html">[rabbitmq-discuss] Questions about limit alarm and report in the	log file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18747">[ date ]</a>
              <a href="thread.html#18747">[ thread ]</a>
              <a href="subject.html#18747">[ subject ]</a>
              <a href="author.html#18747">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Andrea:

When you see the former, it might not be a bad idea to take a peek with
lsof, or similar, and see just what the file descriptors for Rabbit
correspond to.  Remember, they're not all going to correspond to sockets,
as Rabbit has various files it deals with during operation.  Using ulimit
or editing limits.conf to change what your OS is making available to Rabbit 
is also something to keep in mind if you're finding yourself regularly
running low on fd's.

If things are working normally you'll see the alarm set when you hit a limit,
and clear when that warning condition remits, say after something is closed.

How many connections is your broker maintaining when you see these?  Rabbit
will use a file descriptor for each connection, but also tries to leave them
open until it finds a reason to close them, for example, it starts approaching
a limit as you see here.

Best regards,
Jerry

----- Original Message -----
From: &quot;Andrea Rosa (HP Cloud Services)&quot; &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">andrea.rosa at hp.com</A>&gt;
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Sent: Monday, March 12, 2012 8:14:02 AM
Subject: [rabbitmq-discuss] Questions about limit alarm and report in the	log file

Hi

I've got some questions about the limit alarms report in the log file, some entries are not clear to me.

1 this line is reported in the log files when we are close to the file handles or memory limit?: 
=INFO REPORT==== 
Limiting to approx 3996 file handles (3594 sockets)

=INFO REPORT====
Memory limit set to 38749MB.

2 why there is this difference between the file handles and the number of sockets?

3 the following entries mean that we hit the limit for file_descriptor? Why we have a set and a clear?
=INFO REPORT==== 
    alarm_handler: {set,{file_descriptor_limit,[]}}

=INFO REPORT==== 
    alarm_handler: {clear,file_descriptor_limit} 

Regards
--
Andrea

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>
















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018743.html">[rabbitmq-discuss] Questions about limit alarm and report in the	log file
</A></li>
	<LI>Next message: <A HREF="018755.html">[rabbitmq-discuss] Questions about limit alarm and report in the	log file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18747">[ date ]</a>
              <a href="thread.html#18747">[ thread ]</a>
              <a href="subject.html#18747">[ subject ]</a>
              <a href="author.html#18747">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
