<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Symmetric federation behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Symmetric%20federation%20behavior&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E52109F55%40GSVCLU03.ges.ferlan.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018497.html">
   <LINK REL="Next"  HREF="018512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Symmetric federation behavior</H1>
    <B>Busoli, Simone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Symmetric%20federation%20behavior&In-Reply-To=%3C88E590DC4586974D825FC82AE798294E52109F55%40GSVCLU03.ges.ferlan.it%3E"
       TITLE="[rabbitmq-discuss] Symmetric federation behavior">Simone.Busoli at ferrari.com
       </A><BR>
    <I>Fri Mar  2 11:14:50 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018497.html">[rabbitmq-discuss] Symmetric federation behavior
</A></li>
        <LI>Next message: <A HREF="018512.html">[rabbitmq-discuss] Symmetric federation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18510">[ date ]</a>
              <a href="thread.html#18510">[ thread ]</a>
              <a href="subject.html#18510">[ subject ]</a>
              <a href="author.html#18510">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are considering to temporary disable one of the two sides of the symmetric federation and constrain publishers to publish to the upstream only to avoid the unneeded roundtrip. 
Our options would be to:

- disable one side of the federation and leave the other as-is
- disable both sides of the federation and replace it with a unidirectional shovel

What I'm concerned with is how to do this on a live system. We can shutdown the brokers of course as all clients have a reconnection logic built into them and will be able to catch up once the broker comes back online, but I'm wondering if it's feasible to just change the configuration file to carry out one of the two options above without needing to recreate the exchanges. Considering the first option, for instance, I would shutdown the broker on which I want to remove the federation, change the configuration file and start it up again, but the exchange on that broker (as it is durable) would still be of type x-federation, and I'm not sure the broker will like it.

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Busoli, Simone
Sent: gioved&#236; 1 marzo 2012 16:21
To: Simon MacMullen
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Symmetric federation behavior

If we were sure this is going to be out in the release after the next one we could think of living with the bandwidth consumption for a while until there is a solution for it. 
I'm guessing you're going to have some planning sessions before then so I would be glad if you could get back to me as soon as you agree on whether it is going to be included in that release.
Thanks for your help so far.

Cheers, Simone

-----Original Message-----
From: Simon MacMullen [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>]
Sent: gioved&#236; 1 marzo 2012 16:16
To: Busoli, Simone
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Symmetric federation behavior

On 01/03/12 15:09, Busoli, Simone wrote:
&gt;<i> Thanks Simon, I'll look into the options you described. Out of 
</I>&gt;<i> curiosity, to someone who knows how the federation behavior is 
</I>&gt;<i> implemented in code, how feasible is it to change it to suite the 
</I>&gt;<i> scenario I've been describing if I started looking into it?
</I>
The main issue is that the decision needs to be handled upstream - therefore the intermediate upstream exchange (currently a fanout) needs to be something a bit smarter, so we need a new x-federation-upstream-helper type or something. This then has knock on effects in that it would be nice to still support the case where federation is not installed upstream, so we need to detect this and fall back.

The next release is likely within a week or so, so this will probably not happen before then. But the release after that could easily include this enhancement.

Cheers, Simon

--
Simon MacMullen
RabbitMQ, VMware

_________________________________________________________________________________________________________________
Questo messaggio &#232; da intendersi esclusivamente ad uso del destinatario e pu&#242; contenere informazioni che sono di natura privilegiata, confidenziale o non divulgabile secondo le leggi vigenti. Se il lettore del presente messaggio non &#232; il destinatario designato, o il dipendente/agente responsabile per la consegna del messaggio al destinatario designato, si informa che ogni disseminazione, distribuzione o copiatura di questa comunicazione &#232; strettamente proibita anche ai sensi del decreto legislativo 196/03 . Se avete ricevuto questo messaggio per errore, vi preghiamo di notificarcelo immediatamente a mezzo e-mail di risposta e successivamente di procedere alla cancellazione di questa e-mail e relativi allegati dal vostro sistema.
_________________________________________________________________________________________________________________
This message is intended only for the use of the addressee and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this message is not the intended recipient, or the employee or agent responsible for delivering the message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this e-mail in error, please notify us immediately by return e-mail and delete this e-mail and all attachments from your system.
_________________________________________________________________________________________________________________

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018497.html">[rabbitmq-discuss] Symmetric federation behavior
</A></li>
	<LI>Next message: <A HREF="018512.html">[rabbitmq-discuss] Symmetric federation behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18510">[ date ]</a>
              <a href="thread.html#18510">[ thread ]</a>
              <a href="subject.html#18510">[ subject ]</a>
              <a href="author.html#18510">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
