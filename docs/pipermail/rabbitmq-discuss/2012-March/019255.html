<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] No error reported when tx_select/basic_publish/tx_commit is given an undefined queue name?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20No%20error%20reported%20when%0A%20tx_select/basic_publish/tx_commit%20is%20given%20an%20undefined%20queue%20name%3F&In-Reply-To=%3CCABzX%2Bqy-nK%3Dhcan%3De%2B_vdduDSOnCTiatoO-1W7uvA9Us%3DWV66Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019238.html">
   <LINK REL="Next"  HREF="019270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] No error reported when tx_select/basic_publish/tx_commit is given an undefined queue name?</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20No%20error%20reported%20when%0A%20tx_select/basic_publish/tx_commit%20is%20given%20an%20undefined%20queue%20name%3F&In-Reply-To=%3CCABzX%2Bqy-nK%3Dhcan%3De%2B_vdduDSOnCTiatoO-1W7uvA9Us%3DWV66Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] No error reported when tx_select/basic_publish/tx_commit is given an undefined queue name?">majek04 at gmail.com
       </A><BR>
    <I>Thu Mar 29 11:52:52 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019238.html">[rabbitmq-discuss] No error reported when tx_select/basic_publish/tx_commit is given an undefined queue name?
</A></li>
        <LI>Next message: <A HREF="019270.html">[rabbitmq-discuss] No error reported when tx_select/basic_publish/tx_commit is given an undefined queue name?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19255">[ date ]</a>
              <a href="thread.html#19255">[ thread ]</a>
              <a href="subject.html#19255">[ subject ]</a>
              <a href="author.html#19255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 29, 2012 at 01:16, Matt Pietrek &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mpietrek at skytap.com</A>&gt; wrote:
&gt;<i> I have a Pika code sequence that looks like this:
</I>&gt;<i>
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; channel = self._channel
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; channel.tx_select()
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; channel.basic_publish(exchange='',
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; routing_key=queue_name,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; body=json_string,
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; properties=pika.BasicProperties(delivery_mode=2))
</I>&gt;<i> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; channel.tx_commit()
</I>&gt;<i>
</I>&gt;<i> During some robustness testing, I found that if I passed an invalid queue
</I>&gt;<i> name to basic_get, I get an AMQPChannelError as expected. However, when
</I>&gt;<i> using the above code to write a message to an invalid queue name, no
</I>&gt;<i> exception is seen.
</I>&gt;<i>
</I>&gt;<i> Is this normal or am I missing&#160;something? In our scenario, we have to
</I>&gt;<i> absolutely, positively know that the message was received by the broker.
</I>
Yes, this is normal.

AMQP does not allow you to send message to a &quot;queue&quot;, instead, you
send a message to an exchange with a routing key.

This routing key is a queue name in this case but it can be just anything.

Messages sent with a routing key that is not matched by appropriate
binding will be lost. This is the correct behaviour.

If you need to ensure that message is delivered use 'mandatory' flag
on basic.publish:
<A HREF="http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.publish">http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.publish</A>

Cheers,
  Marek
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019238.html">[rabbitmq-discuss] No error reported when tx_select/basic_publish/tx_commit is given an undefined queue name?
</A></li>
	<LI>Next message: <A HREF="019270.html">[rabbitmq-discuss] No error reported when tx_select/basic_publish/tx_commit is given an undefined queue name?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19255">[ date ]</a>
              <a href="thread.html#19255">[ thread ]</a>
              <a href="subject.html#19255">[ subject ]</a>
              <a href="author.html#19255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
