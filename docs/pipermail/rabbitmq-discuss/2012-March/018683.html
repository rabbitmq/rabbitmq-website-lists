<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connection and Channel Management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20and%20Channel%20Management&In-Reply-To=%3C4F59F046.3060401%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018686.html">
   <LINK REL="Next"  HREF="018687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connection and Channel Management</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20and%20Channel%20Management&In-Reply-To=%3C4F59F046.3060401%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Connection and Channel Management">simon at rabbitmq.com
       </A><BR>
    <I>Fri Mar  9 11:57:58 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018686.html">[rabbitmq-discuss] Connection and Channel Management
</A></li>
        <LI>Next message: <A HREF="018687.html">[rabbitmq-discuss] Connection and Channel Management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18683">[ date ]</a>
              <a href="thread.html#18683">[ thread ]</a>
              <a href="subject.html#18683">[ subject ]</a>
              <a href="author.html#18683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/03/12 23:51, Glen Wagley wrote:
&gt;<i> Right now I am trying to figure out if I am limiting throughput to the
</I>&gt;<i> cluster because each instance of the REST service and each instance of
</I>&gt;<i> the windows service only has one connection to the cluster BUT multiple
</I>&gt;<i> channels. We support about two dozen message types right now and I've
</I>&gt;<i> created a channel for each one. Some channels have a lot of messages
</I>&gt;<i> flowing through while some have little to none depending on the day. Is
</I>&gt;<i> there a recommended approach to number of connections vs channels? We
</I>&gt;<i> are starting to load test the system and I am trying to understand what
</I>&gt;<i> could be tweaked to improve performance/throughput. Thanks.
</I>
To some extent the answer is &quot;do your own tests&quot;, but to get you 
thinking in the right direction, here are some pertinent facts:

* Starting a new channel on an existing connection involves one network 
round trip - starting a new connection takes several.

* Each connection uses a file descriptor on the server. Channels don't.

* Publishing a large message on one channel will block a connection 
while it goes out. Other than that, the multiplexing is fairly transparent.

* Connections which are publishing can get blocked if the server is 
overloaded - it's a good idea to separate publishing and consuming 
connections.

* There is only one AMQP parser process per connection. Therefore if you 
have less connections than CPU cores, and are CPU bound in AMQP parsing, 
you might not make full use of your server. This is generally pretty 
rare but sounds like it may apply to you.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, VMware
</PRE>















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018686.html">[rabbitmq-discuss] Connection and Channel Management
</A></li>
	<LI>Next message: <A HREF="018687.html">[rabbitmq-discuss] Connection and Channel Management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18683">[ date ]</a>
              <a href="thread.html#18683">[ thread ]</a>
              <a href="subject.html#18683">[ subject ]</a>
              <a href="author.html#18683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
