<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Why default connection heartbeat = 0?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20default%20connection%20heartbeat%20%3D%200%3F&In-Reply-To=%3C4F7308B2.7080706%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019209.html">
   <LINK REL="Next"  HREF="019214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Why default connection heartbeat = 0?</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Why%20default%20connection%20heartbeat%20%3D%200%3F&In-Reply-To=%3C4F7308B2.7080706%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Why default connection heartbeat = 0?">emile at rabbitmq.com
       </A><BR>
    <I>Wed Mar 28 13:48:50 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019209.html">[rabbitmq-discuss] Why default connection heartbeat = 0?
</A></li>
        <LI>Next message: <A HREF="019214.html">[rabbitmq-discuss] Why default connection heartbeat = 0?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19213">[ date ]</a>
              <a href="thread.html#19213">[ thread ]</a>
              <a href="subject.html#19213">[ subject ]</a>
              <a href="author.html#19213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 28/03/12 13:05, stone wrote:
&gt;<i> One more question, what could possibly be impacted if the default
</I>&gt;<i> heartbeat value is set to 2, 3 or 5 etc. ? 
</I>
There is a trade-off. More frequent heartbeats incur greater network and
CPU overhead but detect network conditions earlier. Lower frequencies
incur less overhead but are slower to detect network problems. You
should set the value appropriately for you environment.


In answer to your previous question, some reasons for the current
default have come to light. In previous versions of RabbitMQ (before
v1.7.0) the heartbeat was set to a non-zero value and this caused these
problems:

On busy machines the heartbeats would not be generated quickly enough
and this lead to dropped connections and poor performance.

One machines with thousands of connections the effort of generating
heartbeats would consume all the CPU resources.

On brokers that have no activity the heartbeats would prevent paging to
disk and even Erlang hibernation.



-Emile


</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019209.html">[rabbitmq-discuss] Why default connection heartbeat = 0?
</A></li>
	<LI>Next message: <A HREF="019214.html">[rabbitmq-discuss] Why default connection heartbeat = 0?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19213">[ date ]</a>
              <a href="thread.html#19213">[ thread ]</a>
              <a href="subject.html#19213">[ subject ]</a>
              <a href="author.html#19213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
