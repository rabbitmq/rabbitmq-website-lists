<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Multiple nodes on single box
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Multiple%20nodes%20on%20single%20box&In-Reply-To=%3C530BEC3C-A08E-452A-9726-A4351AC3E920%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019165.html">
   <LINK REL="Next"  HREF="019279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Multiple nodes on single box</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Multiple%20nodes%20on%20single%20box&In-Reply-To=%3C530BEC3C-A08E-452A-9726-A4351AC3E920%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Multiple nodes on single box">steve at rabbitmq.com
       </A><BR>
    <I>Wed Mar 28 12:12:37 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019165.html">[rabbitmq-discuss] Multiple nodes on single box
</A></li>
        <LI>Next message: <A HREF="019279.html">[rabbitmq-discuss] Multiple nodes on single box
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19205">[ date ]</a>
              <a href="thread.html#19205">[ thread ]</a>
              <a href="subject.html#19205">[ subject ]</a>
              <a href="author.html#19205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Timya,

&gt;<i> You might be able to get away with just setting $RABBITMQ_BASE.
</I>
Since you're on Ubuntu RABBITMQ_BASE is not relevant; the link to
relocate.html gives the full details.

The following settings are necessary to separate the node runtimes
completely, while allowing them to share the installed code base.

--------------------------var ----------------------default
RABBITMQ_CONFIG_FILE          /etc/rabbitmq/rabbitmq
RABBITMQ_MNESIA_BASE          /var/lib/rabbitmq/mnesia
RABBITMQ_LOG_BASE             /var/log/rabbitmq
RABBITMQ_ENABLED_PLUGINS_FILE /etc/rabbitmq/enabled_plugins

other file locations will, by default, be based on these.

If you set these in the shell environment then all the rabbitmq scripts
will pick them up (e.g. rabbitmqctl and so on). If you try to set them
in rabbitmq-env.conf, you can only have this file in one place per
rabbitmq installation, so you are limited to one node's settings.

So one way to work this is to have a wrapper script for each
node -- which sets the vars accordingly before calling the
rabbitmq{-server,ctl,-plugins} script. e.g.

node1:
-----------------------
#!/bin/sh
RABBITMQ_CONFIG_FILE=/node1/rabbitmq-node1
RABBITMQ_MNESIA_BASE=/node1/mnesia
RABBITMQ_LOG_BASE=/node1/log
RABBITMQ_ENABLED_PLUGINS_FILE=/node1/enabled_plugins

. $*
-----------------------

invoked as `node1 rabbitmqctl status`, or whatever. There are many many
ways to improve this (and you should!).

Ensure you do not share system resources (like tcp listeners)
accidentally by referring to common resources in the
${RABBITMQ_CONFIG_FILE}.config files.

Let us know how you get on.

Steve Powell  (a little bunny)
----------some more definitions from the SPD----------
chinchilla (n.) Cooling device for the lower jaw.
socialcast (n.) Someone to whom everyone is speaking but nobody likes.
literacy (n.) A textually transmitted disease usually contracted in childhood.

On 27 Mar 2012, at 11:12, Simon MacMullen wrote:

&gt;<i> On 27/03/12 11:09, Timya Tortus wrote:
</I>&gt;&gt;<i> Having Ubuntu 10.04, wanted to get two rabbitmq nodes up on one machine.
</I>&gt;&gt;<i> There is documentation available for single-machine cluster on
</I>&gt;&gt;<i> /<A HREF="http://www.rabbitmq.com/clustering.html#single-machine/.">http://www.rabbitmq.com/clustering.html#single-machine/.</A>
</I>&gt;&gt;<i> But I need to create two rabbitmq nodes (viz. rabbit1 and hare1) which
</I>&gt;&gt;<i> should reffer their respective rabbitmq.config file for setting up
</I>&gt;&gt;<i> shovel and listners for tcp/web-access/management. Is there any document
</I>&gt;&gt;<i> available to setup multiple rabbitmq nodes on one machine or any other
</I>&gt;&gt;<i> way to accomplish the same.
</I>&gt;<i> 
</I>&gt;<i> Basically the same concept, just don't cluster them.
</I>&gt;<i> 
</I>&gt;<i> You should probably read:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/relocate.html">http://www.rabbitmq.com/relocate.html</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Cheers, Simon
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019165.html">[rabbitmq-discuss] Multiple nodes on single box
</A></li>
	<LI>Next message: <A HREF="019279.html">[rabbitmq-discuss] Multiple nodes on single box
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19205">[ date ]</a>
              <a href="thread.html#19205">[ thread ]</a>
              <a href="subject.html#19205">[ subject ]</a>
              <a href="author.html#19205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
