<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connection attempt from disallowed node	question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20attempt%20from%20disallowed%20node%0A%09question&In-Reply-To=%3C4F6081B8.3040405%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018791.html">
   <LINK REL="Next"  HREF="018812.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connection attempt from disallowed node	question</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20attempt%20from%20disallowed%20node%0A%09question&In-Reply-To=%3C4F6081B8.3040405%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Connection attempt from disallowed node	question">emile at rabbitmq.com
       </A><BR>
    <I>Wed Mar 14 11:32:08 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018791.html">[rabbitmq-discuss] Connection attempt from disallowed node question
</A></li>
        <LI>Next message: <A HREF="018812.html">[rabbitmq-discuss] Connection attempt from disallowed node	question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18809">[ date ]</a>
              <a href="thread.html#18809">[ thread ]</a>
              <a href="subject.html#18809">[ subject ]</a>
              <a href="author.html#18809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Derek,

On 13/03/12 22:22, Derek Greer wrote:
&gt;<i>  =ERROR REPORT==== 13-Mar-2012::15:00:15 ===
</I>&gt;<i> 110 ** Connection attempt from disallowed node rabbitmqctl32476@[machine
</I>&gt;<i> name] **
</I>&gt;<i> 
</I>&gt;<i> Everything I've read about this says this is due to the erlang cookie of
</I>&gt;<i> the user executing the rabbitmqctl.bat command not matching the global
</I>&gt;<i> erlang cookie in C:\Windows, so I've had the admin check these values
</I>&gt;<i> and he claims they are the exact same.  The RabbitMQ service is running
</I>&gt;<i> as the default system account which doesn't have a home directory, so I
</I>&gt;<i> assume the service runs the process with the cookie from C:\Windows.
</I>
Yes, this error is due to mismatched cookie files between the running
service and the user running the rabbitmqctl.bat command.

If the service runs in an environment with a HOMEDRIVE and HOMEPATH
variable then the GetWindowsDirectory Windows API function is used to
locate the Erlang cookie file. The cookie file in the Windows directory
must match the cookie file in the home directory of the user running the
rabbitmqctl command, as explained here:

<A HREF="http://www.rabbitmq.com/install-windows-manual.html#find-rabbitmq-on-windows">http://www.rabbitmq.com/install-windows-manual.html#find-rabbitmq-on-windows</A>

You can obtain the hash of the cookie by turning on console logging (set
RABBITMQ_CONSOLE_LOG to new or reuse) and checking the line starting
with &quot;cookie hash    :&quot;.

There are some Erlang configuration parameters that are able override
the cookie value. Ensure that the startup scripts and rabbitmq.config
files have not been customised in this way.

If the Erlang VM does not find a cookie file then one will be created
with random contents. Make sure that the contents of the cookie files
were not auto-filled when starting up.



-Emile
</PRE>
















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018791.html">[rabbitmq-discuss] Connection attempt from disallowed node question
</A></li>
	<LI>Next message: <A HREF="018812.html">[rabbitmq-discuss] Connection attempt from disallowed node	question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18809">[ date ]</a>
              <a href="thread.html#18809">[ thread ]</a>
              <a href="subject.html#18809">[ subject ]</a>
              <a href="author.html#18809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
