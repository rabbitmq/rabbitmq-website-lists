<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Connection and Channel Management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20and%20Channel%20Management&In-Reply-To=%3CCAM%3DxcbNw3WG_M3epsVggJkqnEX27KTribKd4qPBB-O2BgPE94g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018683.html">
   <LINK REL="Next"  HREF="018680.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Connection and Channel Management</H1>
    <B>Glen Wagley</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Connection%20and%20Channel%20Management&In-Reply-To=%3CCAM%3DxcbNw3WG_M3epsVggJkqnEX27KTribKd4qPBB-O2BgPE94g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Connection and Channel Management">glen.wagley at gmail.com
       </A><BR>
    <I>Fri Mar  9 16:13:06 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018683.html">[rabbitmq-discuss] Connection and Channel Management
</A></li>
        <LI>Next message: <A HREF="018680.html">[rabbitmq-discuss] Installation issues - RabbitMQ on Fedora (amazon	ec2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18687">[ date ]</a>
              <a href="thread.html#18687">[ thread ]</a>
              <a href="subject.html#18687">[ subject ]</a>
              <a href="author.html#18687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Simon,
Thanks for the information. I expected that a lot of this would depend on
my particular implementation and that some of these things would become
apparent as we apply load to the system. The facts you have provided me are
excellent and will help shape the system moving forward. Thanks! Off to do
more testing...

On Fri, Mar 9, 2012 at 4:57 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 08/03/12 23:51, Glen Wagley wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Right now I am trying to figure out if I am limiting throughput to the
</I>&gt;&gt;<i> cluster because each instance of the REST service and each instance of
</I>&gt;&gt;<i> the windows service only has one connection to the cluster BUT multiple
</I>&gt;&gt;<i> channels. We support about two dozen message types right now and I've
</I>&gt;&gt;<i> created a channel for each one. Some channels have a lot of messages
</I>&gt;&gt;<i> flowing through while some have little to none depending on the day. Is
</I>&gt;&gt;<i> there a recommended approach to number of connections vs channels? We
</I>&gt;&gt;<i> are starting to load test the system and I am trying to understand what
</I>&gt;&gt;<i> could be tweaked to improve performance/throughput. Thanks.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> To some extent the answer is &quot;do your own tests&quot;, but to get you thinking
</I>&gt;<i> in the right direction, here are some pertinent facts:
</I>&gt;<i>
</I>&gt;<i> * Starting a new channel on an existing connection involves one network
</I>&gt;<i> round trip - starting a new connection takes several.
</I>&gt;<i>
</I>&gt;<i> * Each connection uses a file descriptor on the server. Channels don't.
</I>&gt;<i>
</I>&gt;<i> * Publishing a large message on one channel will block a connection while
</I>&gt;<i> it goes out. Other than that, the multiplexing is fairly transparent.
</I>&gt;<i>
</I>&gt;<i> * Connections which are publishing can get blocked if the server is
</I>&gt;<i> overloaded - it's a good idea to separate publishing and consuming
</I>&gt;<i> connections.
</I>&gt;<i>
</I>&gt;<i> * There is only one AMQP parser process per connection. Therefore if you
</I>&gt;<i> have less connections than CPU cores, and are CPU bound in AMQP parsing,
</I>&gt;<i> you might not make full use of your server. This is generally pretty rare
</I>&gt;<i> but sounds like it may apply to you.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i>
</I>


-- 
Glen Wagley &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">glen.wagley at gmail.com</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120309/91a1fab9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120309/91a1fab9/attachment.htm</A>&gt;
</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018683.html">[rabbitmq-discuss] Connection and Channel Management
</A></li>
	<LI>Next message: <A HREF="018680.html">[rabbitmq-discuss] Installation issues - RabbitMQ on Fedora (amazon	ec2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18687">[ date ]</a>
              <a href="thread.html#18687">[ thread ]</a>
              <a href="subject.html#18687">[ subject ]</a>
              <a href="author.html#18687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
