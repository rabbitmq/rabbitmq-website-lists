<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] fanout queue not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20fanout%20queue%20not%20working&In-Reply-To=%3C33E93FF3-77D3-4F7D-83FD-5AC3B03DF121%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019289.html">
   <LINK REL="Next"  HREF="019319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] fanout queue not working</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20fanout%20queue%20not%20working&In-Reply-To=%3C33E93FF3-77D3-4F7D-83FD-5AC3B03DF121%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] fanout queue not working">steve at rabbitmq.com
       </A><BR>
    <I>Fri Mar 30 13:56:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019289.html">[rabbitmq-discuss] fanout queue not working
</A></li>
        <LI>Next message: <A HREF="019319.html">[rabbitmq-discuss] fanout queue not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19293">[ date ]</a>
              <a href="thread.html#19293">[ thread ]</a>
              <a href="subject.html#19293">[ subject ]</a>
              <a href="author.html#19293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear octo,

Trying to understand what queues and bindings you may have created I
reformatted the list_bindings output you sent:

Listing bindings ...
        exchange    log2_consumer       queue   log2_consumer       []
        exchange    rawlogs_consumer    queue   rawlogs_consumer        []
rawlogs exchange    log2_consumer       queue           []
rawlogs exchange    rawlogs_consumer    queue   logstash        []
...done.

The first column is the exchange name, followed by 'exchange', then the
destination (queue) name, followed by 'queue' then the routing key, and
lastly any arguments on the binding (you have none []).

So what appears is that you have

* bound log2_consumer to the default (blank) exchange (with the routing
  key set to the name of the queue -- which is normal for a direct
  exchange, which the default exchange is);

* bound rawlogs_consumer similarly;

These two are default bindings created whenever you create a queue.

Then again you have two (explicit) bindings which you have no-doubt
created yourself:

* bound log2_consumer to the rawlogs exchange, with a blank (&quot;&quot;) routing
  key

* bound rawlogs_consumer to the rawlogs exchange with the logstash key.

If rawlogs is a fanout exchange then if you publish a message to that
exchange, both of these queues should get a copy of the message
(regardless of what routing key you supply on the publish -- and
regardless of the routing key used to bind the queue to the fanout
exchange).

So, the obvious question is 'how did you publish those messages'?
Supplementary: 'what do you mean &quot;connect fine&quot; to the queue'?

I can guess that if you publish to the default exchange (&quot;&quot;) with
routing key &quot;rawlogs_consumer&quot; you would see what you say you see, but I
can't think how else you might see it. Certainly, if you publish to the
&quot;rawlogs&quot; exchange I would expect the message to appear on both queues.

Steve Powell
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">steve at rabbitmq.com</A>
[wrk: +44-2380-111-528] [mob: +44-7815-838-558]

On 30 Mar 2012, at 01:26, octomeow wrote:

&gt;<i> newbie to rabbitmq  and I'm not getting messages into a certain queue
</I>&gt;<i> 
</I>&gt;<i> I have a simple fanout exchange
</I>&gt;<i> # rabbitmqctl list_exchanges
</I>&gt;<i> rawlogs fanout
</I>&gt;<i> 
</I>&gt;<i> I have bound this exchange to a few queues
</I>&gt;<i> # rabbitmqctl list_bindings
</I>&gt;<i> Listing bindings ...
</I>&gt;<i>        exchange        log2_consumer       queue
</I>&gt;<i> log2_consumer       []
</I>&gt;<i>        exchange        rawlogs_consumer        queue
</I>&gt;<i> rawlogs_consumer        []
</I>&gt;<i> rawlogs exchange        log2_consumer       queue           []
</I>&gt;<i> rawlogs exchange        rawlogs_consumer        queue
</I>&gt;<i> logstash        []
</I>&gt;<i> ...done.
</I>&gt;<i> 
</I>&gt;<i> I connect fine to the log2_consumer queue....however, I get NO
</I>&gt;<i> messages.
</I>&gt;<i> 
</I>&gt;<i> my other queue..... the rawlogs_consumer does the the messges
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019289.html">[rabbitmq-discuss] fanout queue not working
</A></li>
	<LI>Next message: <A HREF="019319.html">[rabbitmq-discuss] fanout queue not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19293">[ date ]</a>
              <a href="thread.html#19293">[ thread ]</a>
              <a href="subject.html#19293">[ subject ]</a>
              <a href="author.html#19293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
