<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] atomic transactions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20atomic%20transactions&In-Reply-To=%3C4F6C55FA.5090007%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019058.html">
   <LINK REL="Next"  HREF="019093.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] atomic transactions</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20atomic%20transactions&In-Reply-To=%3C4F6C55FA.5090007%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] atomic transactions">emile at rabbitmq.com
       </A><BR>
    <I>Fri Mar 23 10:52:42 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019058.html">[rabbitmq-discuss]  atomic transactions
</A></li>
        <LI>Next message: <A HREF="019093.html">[rabbitmq-discuss] atomic transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19083">[ date ]</a>
              <a href="thread.html#19083">[ thread ]</a>
              <a href="subject.html#19083">[ subject ]</a>
              <a href="author.html#19083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 22/03/12 03:39, gaillard wrote:
&gt;<i> I have need to use transactions in the following way:
</I>&gt;<i> -get a message (m1) from queue A
</I>&gt;<i> -transforms the message and create new message (m2)
</I>&gt;<i> -publish m2 to queue B
</I>&gt;<i> -ack m1
</I>&gt;<i> -commit the transaction (includes ack and publish)
</I>&gt;<i> 
</I>&gt;<i> Which i believe in all failure scenarios should result in possibly two
</I>&gt;<i> things:
</I>&gt;<i> m1 on queue A, nothing on queue B
</I>&gt;<i> m2 on queue B, nothing on queue A
</I>&gt;<i> 
</I>&gt;<i> Is this what will happen in rabbit 2.7 or 2.8?
</I>
Mostly yes, but bear in mind that transactions are not atomic in
RabbitMQ. So if the broker crashes or an error occurs during commit then
your invariant might not hold. If you are dealing with very high value
messages then you should add additional logging and correlate the input
and output.

This page has more information about transaction semantics:
<A HREF="http://www.rabbitmq.com/semantics.html">http://www.rabbitmq.com/semantics.html</A>


-Emile


</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019058.html">[rabbitmq-discuss]  atomic transactions
</A></li>
	<LI>Next message: <A HREF="019093.html">[rabbitmq-discuss] atomic transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19083">[ date ]</a>
              <a href="thread.html#19083">[ thread ]</a>
              <a href="subject.html#19083">[ subject ]</a>
              <a href="author.html#19083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
