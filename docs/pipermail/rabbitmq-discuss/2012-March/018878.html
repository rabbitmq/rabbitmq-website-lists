<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] status Active in Management web portal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20status%20Active%20in%20Management%20web%20portal&In-Reply-To=%3C674ddbb1-5cb1-4d07-80b7-dc69184bc03d%40w1g2000vbx.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018870.html">
   <LINK REL="Next"  HREF="018879.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] status Active in Management web portal</H1>
    <B>MattH</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20status%20Active%20in%20Management%20web%20portal&In-Reply-To=%3C674ddbb1-5cb1-4d07-80b7-dc69184bc03d%40w1g2000vbx.googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] status Active in Management web portal">matt.higgins at gmail.com
       </A><BR>
    <I>Thu Mar 15 12:57:57 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018870.html">[rabbitmq-discuss] status Active in Management web portal
</A></li>
        <LI>Next message: <A HREF="018879.html">[rabbitmq-discuss] status Active in Management web portal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18878">[ date ]</a>
              <a href="thread.html#18878">[ thread ]</a>
              <a href="subject.html#18878">[ subject ]</a>
              <a href="author.html#18878">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Simon,

Looks like the idol_since is what I was looking for. I can see that in
the http API call. I did realize I would be geting out of AMQP land to
get this data, however your concern is valid and I am also not
thrilled with this solution.

My application acts like a chat room where one user creates a room
(exchange) with say 5 users and a set of queues is created for each
user in the room at the time the room is created (queues bound to the
exchange). I could have many client endpoints, some could connect
directly to the queue (AMQP, STOMP) others may long poll a web
services that will pull messages off the queue, format and send back
to the client over HTTP.  If the client user goes idol I want to
reflect that in the UI and if a user never connected they will remain
idol from the time the room was created. In essence I am attempting to
represent presence through activity on the queue.

Another method may be to simply not create the queue in the first
place and force users to create a queue as they connect. This would
then require that I find all queues bound to a given exchange, if an
exchange has a queue for a given users then they are &quot;active&quot;. This is
not as fine grained a presence indicator but may work. This is still
out of the scope of AMQP however.

I did look at XMPP for this part of the app but did not want to add
yet another server and deal with managing rosters etc since the bulk
of the app deals in much more traditional message paradigms.


-Matt





On Mar 15, 6:50&#160;am, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">si... at rabbitmq.com</A>&gt; wrote:
&gt;<i> On 14/03/12 19:59, MattH wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I have a queu and a client that will continuously poll the queu so at
</I>&gt;<i> &gt; any given moment I do not have an active consumer. However the web
</I>&gt;<i> &gt; management portal still shows the queue as as active which is correct
</I>&gt;<i> &gt; given my application. The question is how dose the portal determine
</I>&gt;<i> &gt; this and can I get access to this status programmatically?
</I>&gt;<i>
</I>&gt;<i> &gt; I am using Spring AMQP but I can dial back to the real rabbit api if
</I>&gt;<i> &gt; needed. I alos looked a the HTTP API and did not see any equivalent to
</I>&gt;<i> &gt; the Status active which is displayed in the web portal.
</I>&gt;<i>
</I>&gt;<i> This information is far too obscure and implementation-specific to make
</I>&gt;<i> available via AMQP :-)
</I>&gt;<i>
</I>&gt;<i> Via the management API, check if there's an idle_since key in the queue.
</I>&gt;<i> If not, it's active.
</I>&gt;<i>
</I>&gt;<i> FTR, this just means &quot;has the queue done *anything* in the last few
</I>&gt;<i> seconds?&quot;. If the queue is idle for a while it hibernates, which cuts
</I>&gt;<i> memory use and takes a little while to come back out of.
</I>&gt;<i>
</I>&gt;<i> I would be very wary of using this in an application though - queues can
</I>&gt;<i> be woken up for all sorts of reasons. What were you planning on doing
</I>&gt;<i> with the information?
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I></PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018870.html">[rabbitmq-discuss] status Active in Management web portal
</A></li>
	<LI>Next message: <A HREF="018879.html">[rabbitmq-discuss] status Active in Management web portal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18878">[ date ]</a>
              <a href="thread.html#18878">[ thread ]</a>
              <a href="subject.html#18878">[ subject ]</a>
              <a href="author.html#18878">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
