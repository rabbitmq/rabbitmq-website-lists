<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Issue with running two RabbitMQ servers on	one machine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20with%20running%20two%20RabbitMQ%20servers%20on%0A%09one%20machine&In-Reply-To=%3CCALD4NQYGv-Gu6j%2ByOkMOJpjhOrpU4WL22%3DQrEiPONFaRxqSbTg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018856.html">
   <LINK REL="Next"  HREF="018865.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Issue with running two RabbitMQ servers on	one machine</H1>
    <B>Brian Jing</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20with%20running%20two%20RabbitMQ%20servers%20on%0A%09one%20machine&In-Reply-To=%3CCALD4NQYGv-Gu6j%2ByOkMOJpjhOrpU4WL22%3DQrEiPONFaRxqSbTg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Issue with running two RabbitMQ servers on	one machine">brian.newsgroup at gmail.com
       </A><BR>
    <I>Thu Mar 15 00:15:38 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018856.html">[rabbitmq-discuss] Issue with running two RabbitMQ servers on	one machine
</A></li>
        <LI>Next message: <A HREF="018865.html">[rabbitmq-discuss] Issue with running two RabbitMQ servers on one machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18857">[ date ]</a>
              <a href="thread.html#18857">[ thread ]</a>
              <a href="subject.html#18857">[ subject ]</a>
              <a href="author.html#18857">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Emile &amp; Simon,

Is rabbit 2.7.1 *completely* compatible with client libraries that use AMQP
0-8? If we updated our rabbit 1.8.0 to 2.7.1, would it cause the old
clients to fail by any chance?

Cheers,

Brian

On Thu, Mar 15, 2012 at 11:08 AM, Brian Jing &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">brian.newsgroup at gmail.com</A>&gt;wrote:

&gt;<i> Hi Emile,
</I>&gt;<i>
</I>&gt;<i> On Wed, Mar 14, 2012 at 9:57 PM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Brian,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 14/03/12 00:26, Brian Jing wrote:
</I>&gt;&gt;<i> &gt; =INFO REPORT==== 14-Mar-2012::11:05:07 ===
</I>&gt;&gt;<i> &gt; started TCP Listener on [::]:4446
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Where does the config for this port number (4446) come from?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This comes from the NODE_PORT variable defined in the environment config
</I>&gt;<i> file. since the existing 1.8.0 already uses 5672 as the default port,  I
</I>&gt;<i> need a different port to be able to run this second instance of rabbitmq on
</I>&gt;<i> the same machine. Does this make sense?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Are you
</I>&gt;&gt;<i> sure the correct config file is being read during broker startup?  What
</I>&gt;&gt;<i> does the broker startup banner say?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm pretty sure that the correct config files are being used. I changed
</I>&gt;<i> the default env config file from /etc/rabbitmq/rabbitmq-env.conf to
</I>&gt;<i> /etc/rabbitmq/rabbitmq_env.conf before I rebuilt the source (only thing I
</I>&gt;<i> changed in the source). I know this env config file is being used because
</I>&gt;<i> rabbitmq 2.7.1 generates separate log files for the SERVICENAME I specified
</I>&gt;<i> and rabbitmq 2.7.1 listens to the port I specified in the env file as well.
</I>&gt;<i>
</I>&gt;<i> The content of my rabbitmq_env.conf is as follows:
</I>&gt;<i>
</I>&gt;<i> # cat /etc/rabbitmq/rabbitmq_env.conf
</I>&gt;<i> SERVICENAME=RabbitMQ-new
</I>&gt;<i> NODENAME=rabbit-new@$HOSTNAME
</I>&gt;<i> NODE_PORT=4446
</I>&gt;<i> CONFIG_FILE=/etc/rabbitmq/rabbitmq-2.7.1.config
</I>&gt;<i>
</I>&gt;<i> Content of my new rabbitmq.conf:
</I>&gt;<i>
</I>&gt;<i> # cat /etc/rabbitmq/rabbitmq-2.7.1.config
</I>&gt;<i>
</I>&gt;<i> [
</I>&gt;<i>     {rabbit, [
</I>&gt;<i>         {ssl_listeners, [{&quot;0.0.0.0&quot;,4445}]},
</I>&gt;<i>         {ssl_options, [
</I>&gt;<i>             {cacertfile,&quot;/etc/rabbitmq/certs/testca/cacert.pem&quot;},
</I>&gt;<i>             {certfile,&quot;/etc/rabbitmq/certs/server/cert.pem&quot;},
</I>&gt;<i>             {keyfile,&quot;/etc/rabbitmq/certs/server/key.pem&quot;},
</I>&gt;<i>             {verify, verify_peer},
</I>&gt;<i>             {fail_if_no_peer_cert, false}
</I>&gt;<i>         ]}
</I>&gt;<i>
</I>&gt;<i>     ]}
</I>&gt;<i> ].
</I>&gt;<i>
</I>&gt;<i> Here is the rabbitmq startup information:
</I>&gt;<i>
</I>&gt;<i> # /opt/rabbitmq-server-2.7.1/sbin/rabbitmq-server
</I>&gt;<i> Activating RabbitMQ plugins ...
</I>&gt;<i> 0 plugins activated:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> +---+   +---+
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   |   |   |
</I>&gt;<i> |   +---+   +-------+
</I>&gt;<i> |                   |
</I>&gt;<i> | RabbitMQ  +---+   |
</I>&gt;<i> |           |   |   |
</I>&gt;<i> |   v2.7.1  +---+   |
</I>&gt;<i> |                   |
</I>&gt;<i> +-------------------+
</I>&gt;<i> AMQP 0-9-1 / 0-9 / 0-8
</I>&gt;<i> Copyright (C) 2007-2011 VMware, Inc.
</I>&gt;<i> Licensed under the MPL.  See <A HREF="http://www.rabbitmq.com/">http://www.rabbitmq.com/</A>
</I>&gt;<i>
</I>&gt;<i> node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit-new at ServerA</A>
</I>&gt;<i> app descriptor : /opt/rabbitmq-server-2.7.1/sbin/../ebin/rabbit.app
</I>&gt;<i> home dir       : /root
</I>&gt;<i> config file(s) : (none)
</I>&gt;<i> cookie hash    :
</I>&gt;<i> log            : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit-new at ServerA.log</A>
</I>&gt;<i> sasl log       : /var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit-new at ServerA-sasl.log</A>
</I>&gt;<i> database dir   : /var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit-new at ServerA</A>
</I>&gt;<i> erlang version : 5.7.4
</I>&gt;<i>
</I>&gt;<i> -- rabbit boot start
</I>&gt;<i> starting file handle cache server
</I>&gt;<i> ...done
</I>&gt;<i> starting worker pool
</I>&gt;<i> ...done
</I>&gt;<i> starting database
</I>&gt;<i> ...done
</I>&gt;<i> starting codec correctness check
</I>&gt;<i> ...done
</I>&gt;<i> -- external infrastructure ready
</I>&gt;<i> starting plugin registry
</I>&gt;<i> ...done
</I>&gt;<i> starting auth mechanism cr-demo
</I>&gt;<i> ...done
</I>&gt;<i> starting auth mechanism amqplain
</I>&gt;<i> ...done
</I>&gt;<i> starting auth mechanism plain
</I>&gt;<i> ...done
</I>&gt;<i> starting statistics event manager
</I>&gt;<i> ...done
</I>&gt;<i> starting logging server
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type direct
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type fanout
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type headers
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange type topic
</I>&gt;<i> ...done
</I>&gt;<i> -- kernel ready
</I>&gt;<i> starting alarm handler
</I>&gt;<i> ...done
</I>&gt;<i> starting node monitor
</I>&gt;<i> ...done
</I>&gt;<i> starting cluster delegate
</I>&gt;<i> ...done
</I>&gt;<i> starting guid generator
</I>&gt;<i> ...done
</I>&gt;<i> starting memory monitor
</I>&gt;<i> ...done
</I>&gt;<i> -- core initialized
</I>&gt;<i> starting empty DB check
</I>&gt;<i> ...done
</I>&gt;<i> starting exchange, queue and binding recovery
</I>&gt;<i> ...done
</I>&gt;<i> starting mirror queue slave sup
</I>&gt;<i> ...done
</I>&gt;<i> starting adding mirrors to queues
</I>&gt;<i> ...done
</I>&gt;<i> -- message delivery logic ready
</I>&gt;<i> starting error log relay
</I>&gt;<i> ...done
</I>&gt;<i> starting networking
</I>&gt;<i> ...done
</I>&gt;<i> starting direct_client
</I>&gt;<i> ...done
</I>&gt;<i> starting notify cluster nodes
</I>&gt;<i> ...done
</I>&gt;<i>
</I>&gt;<i> broker running
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Brian
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120315/5662ea5f/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120315/5662ea5f/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018856.html">[rabbitmq-discuss] Issue with running two RabbitMQ servers on	one machine
</A></li>
	<LI>Next message: <A HREF="018865.html">[rabbitmq-discuss] Issue with running two RabbitMQ servers on one machine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18857">[ date ]</a>
              <a href="thread.html#18857">[ thread ]</a>
              <a href="subject.html#18857">[ subject ]</a>
              <a href="author.html#18857">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
