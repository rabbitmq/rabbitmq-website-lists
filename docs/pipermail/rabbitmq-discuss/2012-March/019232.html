<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] how to get higher throughput?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20to%20get%20higher%20throughput%3F&In-Reply-To=%3CCAPNZrFWhR8YcRPiAjHsoPaqmcPvjFcePgidP8uq8MsQUC7dUkw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019231.html">
   <LINK REL="Next"  HREF="019240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] how to get higher throughput?</H1>
    <B>stone</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20how%20to%20get%20higher%20throughput%3F&In-Reply-To=%3CCAPNZrFWhR8YcRPiAjHsoPaqmcPvjFcePgidP8uq8MsQUC7dUkw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] how to get higher throughput?">zmstone at gmail.com
       </A><BR>
    <I>Wed Mar 28 20:23:24 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019231.html">[rabbitmq-discuss] RabbitMQ Java Client - Defect 24723 - Memory leak
</A></li>
        <LI>Next message: <A HREF="019240.html">[rabbitmq-discuss] how to get higher throughput?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19232">[ date ]</a>
              <a href="thread.html#19232">[ thread ]</a>
              <a href="subject.html#19232">[ subject ]</a>
              <a href="author.html#19232">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I have a use case which is very similar to RPC:
The clients subscribe to their own queues bound to routing key
&quot;response.myname&quot;,
and they publish messages with routing key &quot;request.myname&quot;, then wait for
response.

On the other side of the broker, there is this RPC queue, bound to routing
key &quot;request.#&quot;,
many workers consume from this queue, process the messages then send back
response.

The request size is around 10K bytes, response is just few bytes, and all
&quot;RPC&quot;s are synchronized calls.
i.e. client wait for response before send another request.

After some benchmark tests, we found that the message rate of the RPC queue
hits around 1400.
It doesn't help by increasing the number of publishers or consumers, or
both.

Hope it's enough background info to finally ask my question:
what could possibly be the bottleneck in my tests, and how to get higher
throughput ?

-----------------env-------------------
Rabbit version: 2.7.1
Memory high watermark: 25G
CPU (24 processors) model: Intel(R) Xeon(R) CPU X5690  @ 3.47GH

BRs
/stone
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120328/8944b2d7/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120328/8944b2d7/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019231.html">[rabbitmq-discuss] RabbitMQ Java Client - Defect 24723 - Memory leak
</A></li>
	<LI>Next message: <A HREF="019240.html">[rabbitmq-discuss] how to get higher throughput?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19232">[ date ]</a>
              <a href="thread.html#19232">[ thread ]</a>
              <a href="subject.html#19232">[ subject ]</a>
              <a href="author.html#19232">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
