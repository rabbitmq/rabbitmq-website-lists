<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Throttling when Fast Producer, Slow Consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Throttling%20when%20Fast%20Producer%2C%20Slow%20Consumer&In-Reply-To=%3C4F6076F9.6030506%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018839.html">
   <LINK REL="Next"  HREF="018788.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Throttling when Fast Producer, Slow Consumer</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Throttling%20when%20Fast%20Producer%2C%20Slow%20Consumer&In-Reply-To=%3C4F6076F9.6030506%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Throttling when Fast Producer, Slow Consumer">emile at rabbitmq.com
       </A><BR>
    <I>Wed Mar 14 10:46:17 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="018839.html">[rabbitmq-discuss] Throttling when Fast Producer, Slow Consumer
</A></li>
        <LI>Next message: <A HREF="018788.html">[rabbitmq-discuss] Inconsistent queue synchronization behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18804">[ date ]</a>
              <a href="thread.html#18804">[ thread ]</a>
              <a href="subject.html#18804">[ subject ]</a>
              <a href="author.html#18804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Paul,

On 13/03/12 22:26, Bell, Paul M. wrote:
&gt;<i> What are the Rabbit &quot;best practices&quot; ways of handling a situation
</I>&gt;<i> where the consumer is v-e-r-y slow and the producer is super-fast.
</I>&gt;<i> IOW: I am trying to understand the best ways to throttle the producer
</I>&gt;<i> in such a case. Assume that neither queue nor its topic exchange are
</I>&gt;<i> durable.
</I>&gt;<i> 
</I>&gt;<i> Can producer obtain information about the state of the queue, e.g.,
</I>&gt;<i> the number of unACKed messages, its size in bytes or number of
</I>&gt;<i> messages, etc? Or is another approach indicated?
</I>
There's no single best way to deal with mismatched rates of production
and consumption of messages. The simplest option is to ignore it,
assuming the mismatch is temporary. Queues may get very long and need to
spill over to disk, but they will shorten once producers slow down or
consumers speed up.

If the rate mismatch is a permanent feature then you ought to reconsider
the design. If producers know which queues their messages are destined
for then they could monitor the lengths of those queues. Another option
is to limit the lifetime of messages in destination queues with the
&quot;x-message-ttl&quot; parameter.


-Emile
</PRE>















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018839.html">[rabbitmq-discuss] Throttling when Fast Producer, Slow Consumer
</A></li>
	<LI>Next message: <A HREF="018788.html">[rabbitmq-discuss] Inconsistent queue synchronization behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18804">[ date ]</a>
              <a href="thread.html#18804">[ thread ]</a>
              <a href="subject.html#18804">[ subject ]</a>
              <a href="author.html#18804">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
