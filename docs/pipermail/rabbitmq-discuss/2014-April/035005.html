<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Java Client Using DefaultConsumer vs	QueueingConsumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20Client%20Using%20DefaultConsumer%20vs%0A%09QueueingConsumer&In-Reply-To=%3C52515210-1BB8-4739-802E-200DD77422E8%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034979.html">
   <LINK REL="Next"  HREF="035015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Java Client Using DefaultConsumer vs	QueueingConsumer</H1>
    <B>Steve Powell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20Client%20Using%20DefaultConsumer%20vs%0A%09QueueingConsumer&In-Reply-To=%3C52515210-1BB8-4739-802E-200DD77422E8%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Java Client Using DefaultConsumer vs	QueueingConsumer">steve at rabbitmq.com
       </A><BR>
    <I>Fri Apr  4 17:20:29 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="034979.html">[rabbitmq-discuss] Java Client Using DefaultConsumer vs QueueingConsumer
</A></li>
        <LI>Next message: <A HREF="035015.html">[rabbitmq-discuss] Java Client Using DefaultConsumer vs	QueueingConsumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35005">[ date ]</a>
              <a href="thread.html#35005">[ thread ]</a>
              <a href="subject.html#35005">[ subject ]</a>
              <a href="author.html#35005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>No it won&#8217;t. The normal ordering guarantees are observed.  The thread dispatching algorithm ensures that consumers on the same channel are called serially.

Each call might run on a different thread (or the same thread &#8212; the calls might be batched if many messages arrive at once), but, on a particular channel, there is at most one thread working on a consumer callback (like handleDelivery()) at any time.

I thought this was clearly spelt out in the Java Client Doc, but I can only find this:
Callbacks to Consumers are dispatched on a thread separate from the thread managed by the Connection. This means that Consumers can safely call blocking methods on the Connection or Channel, such asqueueDeclare, txCommit, basicCancel or basicPublish.

Each Channel has its own dispatch thread. For the most common use case of one Consumer per Channel, this means Consumers do not hold up other Consumers. If you have multiple Consumers per Channel be aware that a long-running Consumer may hold up dispatch of callbacks to other Consumers on that Channel.

which occurs (buried) in the Channel Thread Safety section. Maybe this should be improved (and a note put in the Consumer Thread Pool section).

Steve Powell  [Cell: +44-7815-838-558]
    Good design [&#8230;] is as little design as possible.    Dieter Rams

On 3 Apr 2014, at 16:04, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt; wrote:

&gt;&gt;<i> I have also tested it several times and saw that the order is saved. 
</I>&gt;&gt;<i> Just to make sure - since different threads call handle delivery 
</I>&gt;&gt;<i> - will it mess my order?
</I>&gt;<i> 
</I>&gt;<i> By default the pool has 5 threads, so yes. You can provide your own
</I>&gt;<i> executor on ConnectionFactory, e.g. to use a single threaded executor.
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140404/d54880ac/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140404/d54880ac/attachment.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034979.html">[rabbitmq-discuss] Java Client Using DefaultConsumer vs QueueingConsumer
</A></li>
	<LI>Next message: <A HREF="035015.html">[rabbitmq-discuss] Java Client Using DefaultConsumer vs	QueueingConsumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35005">[ date ]</a>
              <a href="thread.html#35005">[ thread ]</a>
              <a href="subject.html#35005">[ subject ]</a>
              <a href="author.html#35005">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
