<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Possible memory leak in the management plugin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Possible%20memory%20leak%20in%20the%20management%20plugin&In-Reply-To=%3C5347F359.7010504%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035236.html">
   <LINK REL="Next"  HREF="035663.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Possible memory leak in the management plugin</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Possible%20memory%20leak%20in%20the%20management%20plugin&In-Reply-To=%3C5347F359.7010504%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Possible memory leak in the management plugin">simon at rabbitmq.com
       </A><BR>
    <I>Fri Apr 11 14:51:21 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="035236.html">[rabbitmq-discuss] Possible memory leak in the management plugin
</A></li>
        <LI>Next message: <A HREF="035663.html">[rabbitmq-discuss] Possible memory leak in the management plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35248">[ date ]</a>
              <a href="thread.html#35248">[ thread ]</a>
              <a href="subject.html#35248">[ subject ]</a>
              <a href="author.html#35248">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/04/2014 00:17, Pavel wrote:
&gt;<i> aggregated_stats table was
</I>&gt;<i> growing steadily for almost 4 hours straight until it reached 2.5Gb
</I>
One thing occurs to me: the ETS GC part of the management DB decides on 
how many rows to GC per iteration in advance, at the start of each run 
through the table.

So if you started with 10,000 rows in the table, it would decide to read 
100 rows at a time. If the table then increased to 1,000,000 rows it 
would still only manage 100 at a time until it had traversed the table 
completely - taking most of a day to do so.

And your test rather resembles this case.

So the GC code probably needs to be smarter about how it does this.

Cheers, Simon

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035236.html">[rabbitmq-discuss] Possible memory leak in the management plugin
</A></li>
	<LI>Next message: <A HREF="035663.html">[rabbitmq-discuss] Possible memory leak in the management plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35248">[ date ]</a>
              <a href="thread.html#35248">[ thread ]</a>
              <a href="subject.html#35248">[ subject ]</a>
              <a href="author.html#35248">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
