<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Issue deleting Queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20deleting%20Queue&In-Reply-To=%3CCA9678C0A14EEA4D95D3A54B6FACE91457F8B42747%40AUSP01VMBX09.collaborationhost.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="035288.html">
   <LINK REL="Next"  HREF="035292.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Issue deleting Queue</H1>
    <B>Chris Nicel</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Issue%20deleting%20Queue&In-Reply-To=%3CCA9678C0A14EEA4D95D3A54B6FACE91457F8B42747%40AUSP01VMBX09.collaborationhost.net%3E"
       TITLE="[rabbitmq-discuss] Issue deleting Queue">Chris.Nicel at 15below.com
       </A><BR>
    <I>Mon Apr 14 13:08:10 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="035288.html">[rabbitmq-discuss] Issue deleting Queue
</A></li>
        <LI>Next message: <A HREF="035292.html">[rabbitmq-discuss] Issue deleting Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35291">[ date ]</a>
              <a href="thread.html#35291">[ thread ]</a>
              <a href="subject.html#35291">[ subject ]</a>
              <a href="author.html#35291">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alvaro,

The management plugin encodes the + as a %2B for me when I click on the queue name but this returns the &#8220;Not Found&#8221; error below.

The rabbitmqadmin python script also appears to encode it as %2B as well. I just tried with %2B in the queue name and it was encoded to %252B.

Also, it appears that the queue is deleted from one node and then recreated by the ha policy on the node it was deleted from.

Cheers

Chris

From: rabbitmq-discuss [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Alvaro Videla
Sent: 14 April 2014 12:53
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Issue deleting Queue

Hi,

Have you tried encoding the + sign as a &quot;%2B&quot;?

Regards,

Alvaro

On Mon, Apr 14, 2014 at 12:53 PM, Chris Nicel &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Chris.Nicel at 15below.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Chris.Nicel at 15below.com</A>&gt;&gt; wrote:
Hi All,

A little back ground. We&#8217;re using highly available queues in a two node cluster running on Ubuntu 12.04LTS and RAbbitMQ server 3.2.2. The ha policy is set to automatically mirror each queue to the other node for failover. Our application code handles the failover and is aware of both rabbit servers.

I am having trouble deleting a queue in a vhost. The queue name contains some special chars which may be causing the management plugin some troubles when displaying the queue information. When I click on the queue name in the management plugin I get the following error message:

Not found
The object you clicked on was not found; it may have been deleted on the server.


Queue name is: Applications_Pasngr_Events_Contract_Messages+DataSourceChange:Applications_Pasngr_Events_Contract&lt;<A HREF="https://dev.zorrillo.net/monitoring/rabbitmq/#/queues/zorrillo.applications.pasngr/Zorrillo_Applications_Pasngr_Events_Contract_Messages%2BDataSourceChange%3AZorrillo_Applications_Pasngr_Events_Contract">https://dev.zorrillo.net/monitoring/rabbitmq/#/queues/zorrillo.applications.pasngr/Zorrillo_Applications_Pasngr_Events_Contract_Messages%2BDataSourceChange%3AZorrillo_Applications_Pasngr_Events_Contract</A>&gt;

I suspect it is the + that is the problem. If someone can help me delete it I promise not to make another queue with a + in&#8230;. Which was probably a silly idea in the first place&#8230;

I have tried rabbitmqctl but that doesn&#8217;t have any delete queues options. I have also tried rabbitmqadmin python script (from <A HREF="http://brokerurl:15672/cli">http://brokerurl:15672/cli</A>) with the command line (both with and without the quotes):

python rabbitmqadmin -V applications.pasngr delete queue name=&quot;Applications_Pasngr_Events_Contract_Messages+DataSourceChange: Applications_Pasngr_Events_Contract&quot;

The command line returns saying that the queue has been deleted but looking at the management plugin it appears to be only deleted from one node. (management plugin shows a red +1 indicating it&#8217;s not mirrored). The HA policy appears to immediately recreate the deleted queue from the other node. I have tried deleting the queue from both nodes in the same way but I can&#8217;t seem to do it synchronously enough to make it actually disappear.

Any help would be greatly appreciated.

Cheers

Chris Nicel
Senior Systems Engineer
15below ltd : 15below Australia pty. ltd.

t:        +44 1273 764230&lt;tel:%2B44%201273%20764230&gt;
e:       <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">chris.nicel at 15below.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">chris.nicel at 15below.com</A>&gt;
w:      15below.com&lt;<A HREF="http://www.15below.com/">http://www.15below.com/</A>&gt;
[cid:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">image002.png at 01CF57E2.95E80530</A>]       @15below_travel&lt;<A HREF="https://twitter.com/#!/15below_travel">https://twitter.com/#!/15below_travel</A>&gt;


15below Limited: Company registered in England and Wales No 3945289
Registered Office: Lyndean House, 43-46 Queens Road, Brighton BN1 3XB, United Kingdom

15below Australia Pty Limited: ABN 25 132 716 379
Level 21, Tower 2 Darling Park, 201 Sussex Street, Sydney, NSW 2000, Australia

Please think about the environment before printing this email.

************************************************************************
This email and any attachments may be confidential and/or legally privileged and are solely for the use of the intended recipient. If you have received this email in error please contact the sender. Any views or opinions expressed within this e-mail are solely those of the sender, and do not necessarily represent those of 15below unless otherwise specifically stated. Although 15below has taken every reasonable precaution to ensure that any attachment to this e-mail has been checked for viruses, it is strongly recommended that you carry out your own virus check before opening any attachment, as we cannot accept liability for any damage sustained as a result of software virus infection.

_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>


15below Limited: Company registered in England and Wales No 3945289
Registered Office: Lyndean House, 43-46 Queens Road, Brighton BN1 3XB, United Kingdom

15below Australia Pty Limited: ABN 25 132 716 379
Level 21, Tower 2 Darling Park, 201 Sussex Street, Sydney, NSW 2000, Australia

Please think about the environment before printing this email.

************************************************************************
This email and any attachments may be confidential and/or legally privileged and are solely for the use of the intended recipient. If you have received this email in error please contact the sender. Any views or opinions expressed within this e-mail are solely those of the sender, and do not necessarily represent those of 15below unless otherwise specifically stated. Although 15below has taken every reasonable precaution to ensure that any attachment to this e-mail has been checked for viruses, it is strongly recommended that you carry out your own virus check before opening any attachment, as we cannot accept liability for any damage sustained as a result of software virus infection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140414/42883900/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140414/42883900/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 504 bytes
Desc: image002.png
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140414/42883900/attachment.png">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140414/42883900/attachment.png</A>&gt;
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="035288.html">[rabbitmq-discuss] Issue deleting Queue
</A></li>
	<LI>Next message: <A HREF="035292.html">[rabbitmq-discuss] Issue deleting Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35291">[ date ]</a>
              <a href="thread.html#35291">[ thread ]</a>
              <a href="subject.html#35291">[ subject ]</a>
              <a href="author.html#35291">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
