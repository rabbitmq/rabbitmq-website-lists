<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ experiences on VMs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20experiences%20on%20VMs&In-Reply-To=%3CAANLkTikEovUOBHQfw0%2BqZyBW5bjRL60ACDz08AjsGFdx%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008392.html">
   <LINK REL="Next"  HREF="008395.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ experiences on VMs</H1>
    <B>Aaron Westendorf</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20experiences%20on%20VMs&In-Reply-To=%3CAANLkTikEovUOBHQfw0%2BqZyBW5bjRL60ACDz08AjsGFdx%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ experiences on VMs">aaron at agoragames.com
       </A><BR>
    <I>Thu Aug 12 16:34:52 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008392.html">[rabbitmq-discuss] RabbitMQ experiences on VMs
</A></li>
        <LI>Next message: <A HREF="008395.html">[rabbitmq-discuss] RabbitMQ experiences on VMs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8394">[ date ]</a>
              <a href="thread.html#8394">[ thread ]</a>
              <a href="subject.html#8394">[ subject ]</a>
              <a href="author.html#8394">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Our experience has been excellent, with no notable problems.  I should
note that we're not using persistent messages, and in our experience,
all VM IO has a huge hit on performance.  This is due to the drivers,
which place all of the workload on the kernel and CPU, whereas on
hardware a large portion of the work is offloaded to disk and network
controllers.  I think this situation has improved, though disk IO is
still our greatest bottleneck, and we don't see that on our cluster
because all our messages are non-persistent.  We may see a different
pattern with the new persister; we'll keep our eyes on the hosts.

In the past, the memory management between Linux and the balloon
driver was problematic, but Ubuntu 9.04 and later VMWare releases have
fixed that problem.  There may still be edge cases we have not
encountered, as we use monit to keep a close eye on memory usage and
take quick action if our queues have caused Rabbit to consume too much
memory.  That only happens when our consumers have broken, and that's
a rare occurrence.

I should also note that some of our expected high-throughput projects
have been delayed or yielded less traffic than expected.  In hindsight
this has been a boon because we've been able to refine our application
stack and tool set, but by next spring, we and our rabbits will be
fully loaded and we'll have better data from which to draw
conclusions.

cheers,
Aaron

On Thu, Aug 12, 2010 at 9:51 AM, Alexis Richardson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis at rabbitmq.com</A>&gt; wrote:
&gt;<i> Aaron,
</I>&gt;<i>
</I>&gt;<i> You mentioned that you'd been running RabbitMQ on a VM. &#160;Could you
</I>&gt;<i> please tell us how that has been going and if there is anything we
</I>&gt;<i> could do to make it better?
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i>
</I>&gt;<i> alexis
</I>&gt;<i>
</I>


-- 
Aaron Westendorf
Senior Software Engineer
Agora Games
359 Broadway
Troy, NY 12180
Phone: 518.268.1000
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aaron at agoragames.com</A>
www.agoragames.com
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008392.html">[rabbitmq-discuss] RabbitMQ experiences on VMs
</A></li>
	<LI>Next message: <A HREF="008395.html">[rabbitmq-discuss] RabbitMQ experiences on VMs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8394">[ date ]</a>
              <a href="thread.html#8394">[ thread ]</a>
              <a href="subject.html#8394">[ subject ]</a>
              <a href="author.html#8394">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
