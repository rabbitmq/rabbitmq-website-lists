<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publish and ACK in different channels
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20and%20ACK%20in%20different%20channels&In-Reply-To=%3C20100811103028.GC3573%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008352.html">
   <LINK REL="Next"  HREF="008353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publish and ACK in different channels</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20and%20ACK%20in%20different%20channels&In-Reply-To=%3C20100811103028.GC3573%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Publish and ACK in different channels">alexandru at rabbitmq.com
       </A><BR>
    <I>Wed Aug 11 11:30:28 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008352.html">[rabbitmq-discuss] Publish and ACK in different channels
</A></li>
        <LI>Next message: <A HREF="008353.html">[rabbitmq-discuss] Queue Exists or Not
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8354">[ date ]</a>
              <a href="thread.html#8354">[ thread ]</a>
              <a href="subject.html#8354">[ subject ]</a>
              <a href="author.html#8354">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm not familiar with Thrift, so I cannot really answer.

A simple solution would be to basic.get with noAck set to true.  That
way, messages will be not need to be acknowledged (so they won't get
redelivered).

If you really need the client to be the one ack'ing the message (perhaps
because you sometimes do want the message to be redelivered), I think
you'll have to short-circuit Thrift.

Cheers,
Alex

On Wed, Aug 11, 2010 at 03:11:14PM +0530, Abhishek K wrote:
&gt;<i> In my situation
</I>&gt;<i> I am using a thrift layer in the middle.
</I>&gt;<i> RabbitMQ runs on Machine A, Thrift on Machine B and Client on Machine C.
</I>&gt;<i> Thrift is the middle layer, which relays the message to the client.
</I>&gt;<i> 
</I>&gt;<i> Now if I have to acknowledge the message I have to keep the channel object
</I>&gt;<i> open at the Thrift layer, till the user acknowledges the message.
</I>&gt;<i> What can be the best way to do this.
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> Abhishek Kona
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Wed, Aug 11, 2010 at 3:02 PM, Alexandru Scvor&#355;ov
</I>&gt;<i> &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexandru at rabbitmq.com</A>&gt;wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; If you get a message and close the channel without ack'ing it, the
</I>&gt;<i> &gt; message will get reinserted into the queue.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If you don't want the message to be reinserted, either you acknowledge
</I>&gt;<i> &gt; it explicitly, or you get with noAck set to true.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; Alex
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Wed, Aug 11, 2010 at 02:31:40PM +0530, Abhishek K wrote:
</I>&gt;<i> &gt; &gt; I am using the RabbitMQ Java API.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Channel A does a basicGet, gets message M channel A is closed. AutoAck is
</I>&gt;<i> &gt; &gt; set to false.
</I>&gt;<i> &gt; &gt; Now I need to Ack message M using some other channel (channel B), and do
</I>&gt;<i> &gt; not
</I>&gt;<i> &gt; &gt; want message M to be delivered to some other consumer in the meanwhile.
</I>&gt;<i> &gt; What
</I>&gt;<i> &gt; &gt; can be the best approach to achieve this?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Abhishek Kona
</I>&gt;<i> &gt; &gt; Department of Computer Engineering
</I>&gt;<i> &gt; &gt; National Institute of Technology
</I>&gt;<i> &gt; &gt; Karnataka, India
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I></PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008352.html">[rabbitmq-discuss] Publish and ACK in different channels
</A></li>
	<LI>Next message: <A HREF="008353.html">[rabbitmq-discuss] Queue Exists or Not
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8354">[ date ]</a>
              <a href="thread.html#8354">[ thread ]</a>
              <a href="subject.html#8354">[ subject ]</a>
              <a href="author.html#8354">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
