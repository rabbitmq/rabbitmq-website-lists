<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Performance Issues on Rabbit MQ , stops responding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20Issues%20on%20Rabbit%20MQ%20%2C%0A%20stops%20responding&In-Reply-To=%3C20100813093815.GD10945%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008400.html">
   <LINK REL="Next"  HREF="008401.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Performance Issues on Rabbit MQ , stops responding</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Performance%20Issues%20on%20Rabbit%20MQ%20%2C%0A%20stops%20responding&In-Reply-To=%3C20100813093815.GD10945%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Performance Issues on Rabbit MQ , stops responding">matthew at rabbitmq.com
       </A><BR>
    <I>Fri Aug 13 10:38:15 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008400.html">[rabbitmq-discuss] Performance Issues on Rabbit MQ ,	stops responding
</A></li>
        <LI>Next message: <A HREF="008401.html">[rabbitmq-discuss] RabbitMQ Message Consumption ID based (c# API)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8404">[ date ]</a>
              <a href="thread.html#8404">[ thread ]</a>
              <a href="subject.html#8404">[ subject ]</a>
              <a href="author.html#8404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Fri, Aug 13, 2010 at 12:48:44PM +0530, vivek agarwal wrote:
&gt;<i> I am running RabbitMQ Perf tests on my system, and I find that after pushing
</I>&gt;<i> in 1,50,000 messages of 1KB each, the rabbit mq stops responding to more
</I>&gt;<i> enqueues.
</I>&gt;<i> What is more surprising is that, I cannot even dequeue the messages. Thus,
</I>&gt;<i> its as good as saying that rabbit mq broker has stopped responding, although
</I>&gt;<i> the client still allows me to query with list_queues and list_exchanges.
</I>
You're using the default branch aren't you? We've changed from using the
AMQP channel.flow for flow control to using simple TCP backpressure. The
advantage is that it works with all clients and avoids very nasty
buffering issues which hit a lot of people in the 1.8.1 release. The
downside is that when activated, it'll block the entire connection to
the client - not just individual channels.

We do try and be nice here - if a connection is not being used for
publishes at all then we don't block it.

&gt;<i> I am using 2GB Ram.
</I>
That may not be enough for those tests. Check the rabbit logs and see if
it's complaining about hitting the memory high watermark.

&gt;<i> I think we really need a disk flow persister, or can someone suggest any
</I>&gt;<i> other way to evade this problem?
</I>
Err, if you're running from default then you will be using the new
persister. You should find that it'll be pushing messages rapidly to
disk and should eventually recover.

Matthew
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008400.html">[rabbitmq-discuss] Performance Issues on Rabbit MQ ,	stops responding
</A></li>
	<LI>Next message: <A HREF="008401.html">[rabbitmq-discuss] RabbitMQ Message Consumption ID based (c# API)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8404">[ date ]</a>
              <a href="thread.html#8404">[ thread ]</a>
              <a href="subject.html#8404">[ subject ]</a>
              <a href="author.html#8404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
