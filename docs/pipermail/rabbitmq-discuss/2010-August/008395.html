<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ experiences on VMs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20experiences%20on%20VMs&In-Reply-To=%3CAANLkTikKe-P_ppjoxFOMAPSxrwu_JRKvu7jthqeoCx0N%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008394.html">
   <LINK REL="Next"  HREF="008396.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ experiences on VMs</H1>
    <B>Alexis Richardson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20experiences%20on%20VMs&In-Reply-To=%3CAANLkTikKe-P_ppjoxFOMAPSxrwu_JRKvu7jthqeoCx0N%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ experiences on VMs">alexis at rabbitmq.com
       </A><BR>
    <I>Thu Aug 12 17:12:17 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008394.html">[rabbitmq-discuss] RabbitMQ experiences on VMs
</A></li>
        <LI>Next message: <A HREF="008396.html">[rabbitmq-discuss] Upgrade issues - 541 - bad_return_value -	amqqueue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8395">[ date ]</a>
              <a href="thread.html#8395">[ thread ]</a>
              <a href="subject.html#8395">[ subject ]</a>
              <a href="author.html#8395">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Aaron,

Thank-you very much.  Do please let us know how you find the new
persister when run from inside a VM.  We do have the ability to feed
back this info to VMware folks who are hungry for specific use cases
involving potential performance improvements.

alexis


On Thu, Aug 12, 2010 at 4:34 PM, Aaron Westendorf &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aaron at agoragames.com</A>&gt; wrote:
&gt;<i> Our experience has been excellent, with no notable problems. &#160;I should
</I>&gt;<i> note that we're not using persistent messages, and in our experience,
</I>&gt;<i> all VM IO has a huge hit on performance. &#160;This is due to the drivers,
</I>&gt;<i> which place all of the workload on the kernel and CPU, whereas on
</I>&gt;<i> hardware a large portion of the work is offloaded to disk and network
</I>&gt;<i> controllers. &#160;I think this situation has improved, though disk IO is
</I>&gt;<i> still our greatest bottleneck, and we don't see that on our cluster
</I>&gt;<i> because all our messages are non-persistent. &#160;We may see a different
</I>&gt;<i> pattern with the new persister; we'll keep our eyes on the hosts.
</I>&gt;<i>
</I>&gt;<i> In the past, the memory management between Linux and the balloon
</I>&gt;<i> driver was problematic, but Ubuntu 9.04 and later VMWare releases have
</I>&gt;<i> fixed that problem. &#160;There may still be edge cases we have not
</I>&gt;<i> encountered, as we use monit to keep a close eye on memory usage and
</I>&gt;<i> take quick action if our queues have caused Rabbit to consume too much
</I>&gt;<i> memory. &#160;That only happens when our consumers have broken, and that's
</I>&gt;<i> a rare occurrence.
</I>&gt;<i>
</I>&gt;<i> I should also note that some of our expected high-throughput projects
</I>&gt;<i> have been delayed or yielded less traffic than expected. &#160;In hindsight
</I>&gt;<i> this has been a boon because we've been able to refine our application
</I>&gt;<i> stack and tool set, but by next spring, we and our rabbits will be
</I>&gt;<i> fully loaded and we'll have better data from which to draw
</I>&gt;<i> conclusions.
</I>&gt;<i>
</I>&gt;<i> cheers,
</I>&gt;<i> Aaron
</I>&gt;<i>
</I>&gt;<i> On Thu, Aug 12, 2010 at 9:51 AM, Alexis Richardson &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">alexis at rabbitmq.com</A>&gt; wrote:
</I>&gt;&gt;<i> Aaron,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You mentioned that you'd been running RabbitMQ on a VM. &#160;Could you
</I>&gt;&gt;<i> please tell us how that has been going and if there is anything we
</I>&gt;&gt;<i> could do to make it better?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> alexis
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Aaron Westendorf
</I>&gt;<i> Senior Software Engineer
</I>&gt;<i> Agora Games
</I>&gt;<i> 359 Broadway
</I>&gt;<i> Troy, NY 12180
</I>&gt;<i> Phone: 518.268.1000
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">aaron at agoragames.com</A>
</I>&gt;<i> www.agoragames.com
</I>&gt;<i>
</I></PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008394.html">[rabbitmq-discuss] RabbitMQ experiences on VMs
</A></li>
	<LI>Next message: <A HREF="008396.html">[rabbitmq-discuss] Upgrade issues - 541 - bad_return_value -	amqqueue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8395">[ date ]</a>
              <a href="thread.html#8395">[ thread ]</a>
              <a href="subject.html#8395">[ subject ]</a>
              <a href="author.html#8395">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
