<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Disk node vs ram node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Disk%20node%20vs%20ram%20node&In-Reply-To=%3C20100805230703.GB31359%40dakota%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008416.html">
   <LINK REL="Next"  HREF="008295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Disk node vs ram node</H1>
    <B>Alexandru Scvortov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Disk%20node%20vs%20ram%20node&In-Reply-To=%3C20100805230703.GB31359%40dakota%3E"
       TITLE="[rabbitmq-discuss] Disk node vs ram node">alexandru at rabbitmq.com
       </A><BR>
    <I>Fri Aug  6 00:07:03 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008416.html">[rabbitmq-discuss] Disk node vs ram node
</A></li>
        <LI>Next message: <A HREF="008295.html">[rabbitmq-discuss] Single point of failure in a clustered	environment with a durable exchange and durable queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8294">[ date ]</a>
              <a href="thread.html#8294">[ thread ]</a>
              <a href="subject.html#8294">[ subject ]</a>
              <a href="author.html#8294">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> #2. I mean that if I send a message that is meant for Q1, where Q1 was originally on node A but now is down because node A is down, will the queue be created on the other nodes B,C? It looks like your answer is no, just to confirm? I am using the 1.7.2 Java client. Is there a way to set up the cluster such that a queue (like Q1 in our case) will be created(automatically) on other nodes (such as node B and node C) if node A goes down? What happens when I make either (node B or node C) or both (node B and node C) disk nodes? 
</I>
There's no automatic way to create missing queues inside a cluster in
RabbitMQ, as far as I know.

Whether a node is disc or ram refers to where the broker metadata
(queues, exchanges, bindings) is kept.  Persistent messages are always
stored on disk.  When a ram node goes down, it looses all its metadata.
If it's in a cluster, it will just connect to some other node and
recover the information.  If the entire cluster goes down (say, power
outage), the metadata can only be recovered if at least one node was
disc.  In general, there's not much sense in having a lot of disc nodes.
One or two should be enough.  Ram nodes are faster.

&gt;<i> #3. Not sure if I should do anything before hand, but I ran the command you provided and got this output:
</I>&gt;<i> $ erl -sname mgmtsh -remsh <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at localhost</A>
</I>&gt;<i> Erlang R13B03 (erts-5.7.4) [source] [smp:4:4] [rq:4] [async-threads:0] [hipe] [kernel-poll:false]
</I>&gt;<i> 
</I>&gt;<i> *** ERROR: Shell process terminated! (^G to start new job) ***
</I>&gt;<i> {error_logger,{{2010,8,5},{14,52,59}},&quot;~s~n&quot;,[&quot;Error in process &lt;0.33.0&gt; on node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mgmtsh at ebony</A>' with exit value: {badarg,[{erlang,list_to_existing_atom,[\&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ubuntu</A>\&quot;]},{dist_util,recv_challenge,1},{dist_util,handshake_we_started,1}]}\n&quot;]}
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 5-Aug-2010::14:52:59 ===
</I>&gt;<i> Error in process &lt;0.33.0&gt; on node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mgmtsh at ebony</A>' with exit value: {badarg,[{erlang,list_to_existing_atom,[&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ubuntu</A>&quot;]},{dist_util,recv_challenge,1},{dist_util,handshake_we_started,1}]}
</I>&gt;<i> 
</I>&gt;<i> FYI: I'm running Ubuntu and installed rabbitMQ 1.7.2 with sudo apt-get install rabbitmq-server. 
</I>
I assumed the <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at localhost</A> was your node.  Try <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ebony.</A> 
 
</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008416.html">[rabbitmq-discuss] Disk node vs ram node
</A></li>
	<LI>Next message: <A HREF="008295.html">[rabbitmq-discuss] Single point of failure in a clustered	environment with a durable exchange and durable queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8294">[ date ]</a>
              <a href="thread.html#8294">[ thread ]</a>
              <a href="subject.html#8294">[ subject ]</a>
              <a href="author.html#8294">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
