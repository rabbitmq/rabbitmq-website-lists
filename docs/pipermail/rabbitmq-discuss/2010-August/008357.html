<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publish and ACK in different channels
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20and%20ACK%20in%20different%20channels&In-Reply-To=%3C20100811111221.GE3573%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008356.html">
   <LINK REL="Next"  HREF="008359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publish and ACK in different channels</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publish%20and%20ACK%20in%20different%20channels&In-Reply-To=%3C20100811111221.GE3573%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Publish and ACK in different channels">alexandru at rabbitmq.com
       </A><BR>
    <I>Wed Aug 11 12:12:21 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008356.html">[rabbitmq-discuss] Queue Exists or Not
</A></li>
        <LI>Next message: <A HREF="008359.html">[rabbitmq-discuss] Error: invalid command
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8357">[ date ]</a>
              <a href="thread.html#8357">[ thread ]</a>
              <a href="subject.html#8357">[ subject ]</a>
              <a href="author.html#8357">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Vivek,

&gt;<i> So, I have my RabbitMQ running on machine A, and I give a API to Consumers
</I>&gt;<i> who are operating on machine C. So, the user just calls a get method without
</I>&gt;<i> knowing the details of RabbitMQ. My API, which apparently runs on Machine B,
</I>&gt;<i> does all the back side job of opening a channel and getting the message.
</I>&gt;<i> 
</I>&gt;<i> Is there a way I can implement acknowledgment?
</I>&gt;<i> 
</I>&gt;<i> It appears to me that if I retrieved a message M through channel C, I have
</I>&gt;<i> to acknowledge message M through Channel C only. So does my API needs to
</I>&gt;<i> keep the channel open till the user gives back an acknowledgment? Or is
</I>&gt;<i> there a better ( and cleaner ? ) way out?
</I>
The way AMQP works is that it re-enqueues unack'd messages on channel
close.  If you close the channel, there's no point in ack'ing the
messages; they're already on some queue waiting to be delivered to some
consumer (possibly, the same one).

What you could do, is auto-ack the messages when the middle layer gets
them.  Then, if a client says it doesn't want the message (the
equivalent of not sending an ack), the middle layer republishes the
message.  This may not be possible in your setup and will cause all
sorts of other problems.

Cheers,
Alex
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008356.html">[rabbitmq-discuss] Queue Exists or Not
</A></li>
	<LI>Next message: <A HREF="008359.html">[rabbitmq-discuss] Error: invalid command
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8357">[ date ]</a>
              <a href="thread.html#8357">[ thread ]</a>
              <a href="subject.html#8357">[ subject ]</a>
              <a href="author.html#8357">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
