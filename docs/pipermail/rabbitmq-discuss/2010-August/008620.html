<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ, STOMP,	Python and Orbited - design question.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%2C%20STOMP%2C%0A%09Python%20and%20Orbited%20-%20design%20question.&In-Reply-To=%3CAANLkTinSbZDztUBGVMeivWfJF-ZJ0fVPizMA6-Z4qpA%2B%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008551.html">
   <LINK REL="Next"  HREF="008621.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ, STOMP,	Python and Orbited - design question.</H1>
    <B>Marek Majkowski</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%2C%20STOMP%2C%0A%09Python%20and%20Orbited%20-%20design%20question.&In-Reply-To=%3CAANLkTinSbZDztUBGVMeivWfJF-ZJ0fVPizMA6-Z4qpA%2B%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ, STOMP,	Python and Orbited - design question.">majek04 at gmail.com
       </A><BR>
    <I>Fri Aug 27 12:20:53 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008551.html">[rabbitmq-discuss] RabbitMQ, STOMP,	Python and Orbited - design question.
</A></li>
        <LI>Next message: <A HREF="008621.html">[rabbitmq-discuss] RabbitMQ, STOMP,	Python and Orbited - design question.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8620">[ date ]</a>
              <a href="thread.html#8620">[ thread ]</a>
              <a href="subject.html#8620">[ subject ]</a>
              <a href="author.html#8620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tim,

On Tue, Aug 24, 2010 at 14:15, Tim Child &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at cantemo.com</A>&gt; wrote:
&gt;<i> One part of my application is to provide realtime feedback on jobs going on in the system, there will be a job overview page, which will list the status of x number of jobs (probably about 40), and a job 'detail' page which will have more in-depth information on that job. I have been working with Orbited and Morbidq, and basically it works today by creating STOMP channels for each job, and on going to the detail page of a particular job my Javascript subscribes to the job channel /jobs/jobID &#160;using STOMP. I have a publisher that when there are any updates to the jobs publishes to the channel, and if any consumers are listening on that particular channel the page is updated with the new details.
</I>&gt;<i>
</I>&gt;<i> Now moving over to using RabbitMQ, and the stomp plugin, I understand that my setup will change slightly.
</I>&gt;<i>
</I>&gt;<i> I currently have a VHOST / , and I publish to an exchange, my understanding is that I have to send to a particular exchange &quot;amq.topic&quot; to be able to broadcast to more than one consumer that may or may not be listening. I don't care if my message doesn't ever get received as someone will not always be on the system.
</I>&gt;<i>
</I>&gt;<i> And then my STOMP consumer will listen to VHOST / and amq.topic ? But if I want to replicate my jobs channels, should I create a routing key, binding and different queues for each job? Records of jobs can stay on my system forever, but the period that they get updated is sporadic - much in the first minutes of their life, hardly ever after they have been finished.
</I>
I don't thin I understand what you mean by 'replicating jobs channels'.
Instead, let me focus on our STOMP plugin semantics.

First, the basic flow of AMQP messages goes like that:

[Producer]---&gt;Exchange---&gt;(using binding)---&gt;Queue---&gt;[Consumer]

You need to decide where to do dispatching of messages from multiple producers,
do you have a queue per customer or maybe many queues for every customer?
Does a 'customer' mean a browser session and or is it just a single page view?

Next problem is that the mapping of AMQP to STOMP is not straightforward,
it requires pretty good understanding of AMQP routing.

The best examples of STOMP and rabbitmq-stomp semantics that I'm aware of
are in the test file:
<A HREF="http://hg.rabbitmq.com/rabbitmq-stomp/file/0404cb2620df/test/test.py">http://hg.rabbitmq.com/rabbitmq-stomp/file/0404cb2620df/test/test.py</A>

For example the &quot;test_broadcast&quot; may be useful to you. The next example
&quot;test_roundrobin&quot; shows how to declare a named queue. Take look
at the subtle difference in 'destination:' headers between this and a
previous example.

Cheers,
  Marek
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008551.html">[rabbitmq-discuss] RabbitMQ, STOMP,	Python and Orbited - design question.
</A></li>
	<LI>Next message: <A HREF="008621.html">[rabbitmq-discuss] RabbitMQ, STOMP,	Python and Orbited - design question.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8620">[ date ]</a>
              <a href="thread.html#8620">[ thread ]</a>
              <a href="subject.html#8620">[ subject ]</a>
              <a href="author.html#8620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
