<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] problem with new persiter with 1000	topics/queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C4C742C47.6080306%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008560.html">
   <LINK REL="Next"  HREF="008568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] problem with new persiter with 1000	topics/queues</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C4C742C47.6080306%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] problem with new persiter with 1000	topics/queues">matthias at rabbitmq.com
       </A><BR>
    <I>Tue Aug 24 21:32:07 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008560.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
        <LI>Next message: <A HREF="008568.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8561">[ date ]</a>
              <a href="thread.html#8561">[ thread ]</a>
              <a href="subject.html#8561">[ subject ]</a>
              <a href="author.html#8561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alex,

alex chen wrote:
&gt;<i> So is there a plan to improve the memory usage in the new persister?
</I>
Over time the new persister will be improved in many ways. And memory 
use is definitely an area we will continue to look at. Quite when that 
will happen is impossible to predict.

&gt;<i> if not, we have to order new machines with 16 GB RAM instead of the
</I>&gt;<i> current 8 GB.
</I>
Unless the costs are crippling I'd recommend that anyway.

&gt;<i> If we increase the file descriptor limit, would it reduce to memory usage?
</I>
yes, indirectly, by allowing rabbit to work more efficiently.

&gt;<i> i saw the following line in rabbit.log:
</I>&gt;<i> &quot;Limiting to approx 16284 file handles (14654 sockets)&quot;
</I>&gt;<i> is this too low?
</I>
That should be plenty.

&gt;<i> thanks a lot for all the inputs you provide on this problem.  that would help us 
</I>&gt;<i> to figure out the system bottleneck and do the hardware planning accordingly.
</I>
Your problem reports have helped us iron out some bugs and sub-optimal 
behaviour in the new persister code. Thanks for testing the code in its 
pre-release form.

One thing that would help us identify potential bottlenecks in the 
broker is packaged test cases that demonstrate problematic behaviour. By 
&quot;packaged&quot; I mean test code that has been condensed (i.e. contains no 
extraneous code not related to the problem) and includes precise 
instructions on how to build and run it to reproduce the problematic 
behaviour and a clear description of what that behaviour is.

As you have seen yourself, altering just one little aspect of the test 
setup can produce radically different results. So for us to reproduce a 
problem we must ensure that we are running exactly the same code and 
follow exactly the same steps.

Would it be possible for you to package your tests in that way?


Regards,

Matthias.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008560.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
	<LI>Next message: <A HREF="008568.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8561">[ date ]</a>
              <a href="thread.html#8561">[ thread ]</a>
              <a href="subject.html#8561">[ subject ]</a>
              <a href="author.html#8561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
