<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Turning consumers on/off in Erlang client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Turning%20consumers%20on/off%20in%20Erlang%20client&In-Reply-To=%3CF77E9D7D-8FC6-40F8-9C24-695ED9980218%40jbrisbin.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008656.html">
   <LINK REL="Next"  HREF="008653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Turning consumers on/off in Erlang client</H1>
    <B>Jon Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Turning%20consumers%20on/off%20in%20Erlang%20client&In-Reply-To=%3CF77E9D7D-8FC6-40F8-9C24-695ED9980218%40jbrisbin.com%3E"
       TITLE="[rabbitmq-discuss] Turning consumers on/off in Erlang client">jon at jbrisbin.com
       </A><BR>
    <I>Mon Aug 30 19:32:27 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008656.html">[rabbitmq-discuss] Turning consumers on/off in Erlang client
</A></li>
        <LI>Next message: <A HREF="008653.html">[rabbitmq-discuss] Open-Ok no longer populating known_hosts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8658">[ date ]</a>
              <a href="thread.html#8658">[ thread ]</a>
              <a href="subject.html#8658">[ subject ]</a>
              <a href="author.html#8658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Aug 30, 2010, at 1:15 PM, Matthew Sackman wrote:

&gt;<i> On Mon, Aug 30, 2010 at 01:08:52PM -0500, Jon Brisbin wrote:
</I>&gt;&gt;<i> Hmmm. I was using the defaults:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> amqp_channel.call(Channel, #'basic.cancel'{ consumer_tag=Tag }),
</I>&gt;<i> 
</I>&gt;<i> Hmm. The default for nowait is false. I've just checked the erlang
</I>&gt;<i> client and it's only unregistering the ctag when it gets the
</I>&gt;<i> basic.cancel_ok back from the server, at which point it shouldn't be
</I>&gt;<i> seeing any further messages with that ctag.
</I>&gt;<i> 
</I>&gt;<i> Thus I'm not sure why you're getting such messages. If you do set the
</I>&gt;<i> default_consumer, could you just check that you are getting messages end
</I>&gt;<i> up there which correspond to subscriptions you've cancelled? If so, it
</I>&gt;<i> likely points to a bug in the erlang client (thus updating to the latest
</I>&gt;<i> head of default on the erlang-client is probably a good idea too if
</I>&gt;<i> you've not already).
</I>&gt;<i> 
</I>&gt;<i> Matthew
</I>

I set a default consumer so haven't seen this error message again and haven't seen any negative side effects. Now when I go outside a send window, it will cancel the consumer and messages will stack up in the queue until the next send window, at which time the consumer will be reattached and messages will start flowing again.

I may take the default consumer off again and see if I can break it...

Thanks!

J. Brisbin
<A HREF="http://jbrisbin.com/">http://jbrisbin.com/</A>






-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100830/2190bfc3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100830/2190bfc3/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008656.html">[rabbitmq-discuss] Turning consumers on/off in Erlang client
</A></li>
	<LI>Next message: <A HREF="008653.html">[rabbitmq-discuss] Open-Ok no longer populating known_hosts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8658">[ date ]</a>
              <a href="thread.html#8658">[ thread ]</a>
              <a href="subject.html#8658">[ subject ]</a>
              <a href="author.html#8658">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
