<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exactly Once Delivery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exactly%20Once%20Delivery&In-Reply-To=%3CB268CF12349471459840DDE70D308B9DB0E9ED6764%40EUSAACMS0702.eamcs.ericsson.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008281.html">
   <LINK REL="Next"  HREF="008297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exactly Once Delivery</H1>
    <B>Mike Petrusis</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exactly%20Once%20Delivery&In-Reply-To=%3CB268CF12349471459840DDE70D308B9DB0E9ED6764%40EUSAACMS0702.eamcs.ericsson.se%3E"
       TITLE="[rabbitmq-discuss] Exactly Once Delivery">mike.petrusis at ericsson.com
       </A><BR>
    <I>Fri Aug  6 03:28:17 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008281.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
        <LI>Next message: <A HREF="008297.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8296">[ date ]</a>
              <a href="thread.html#8296">[ thread ]</a>
              <a href="subject.html#8296">[ subject ]</a>
              <a href="author.html#8296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks all for the input. I've got a better understanding of the issues now and it sounds like the issue is the same regardless of the use of transactions.  

Matthew's idea of having producers add a &quot;republish count&quot; to the messages is good suggestion to optimize the de-duplication of messages, but this only helps for messages resent by a producer. 

Can messages get duplicated while they are propagating in the broker?  If duplicates are produced in the broker they will have the same &quot;republish count&quot; and this method won't work.  


-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Matthew Sackman
Sent: Thursday, August 05, 2010 9:26 AM
To: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Exactly Once Delivery

On Thu, Aug 05, 2010 at 09:16:14AM -0700, Tony Menges wrote:
&gt;<i> The JMS provider sets the message id. It is supposed to be unique enough to be used for a &quot;historical repository&quot; but the scope of uniqueness is left to the provider. It is recommended that it should be at least unique for a given &quot;installation&quot;. I don't think this helps on the publisher side since as you pointed out the notification of the completion of the publish might not make it back to the producer.
</I>&gt;<i> 
</I>&gt;<i> JMS requires the provider to set the redelivered flag (and optionally the delivery count) field if it thinks the message has been given to the application before. The application may or may not have seen it but this flag can be used to trigger the check for a duplicate by the application. The use of unique message ids helps on this end.
</I>
Ahh interesting. It would thus seem that JMS requires slightly more of
the producer when publishing messages (more logic is required in the
client library there) and AMQP possibly requires more at the consumer
side.

Matthew
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008281.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
	<LI>Next message: <A HREF="008297.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8296">[ date ]</a>
              <a href="thread.html#8296">[ thread ]</a>
              <a href="subject.html#8296">[ subject ]</a>
              <a href="author.html#8296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
