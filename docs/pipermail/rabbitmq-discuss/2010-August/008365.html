<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Broker accepts self-signed client	certificate in verify_peer mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Broker%20accepts%20self-signed%20client%0A%09certificate%20in%20verify_peer%20mode&In-Reply-To=%3CAANLkTik1eiqe8FH_Dnt2Yj%2BGozJQsrN613yQQT1Ni0SC%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008351.html">
   <LINK REL="Next"  HREF="008369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Broker accepts self-signed client	certificate in verify_peer mode</H1>
    <B>Mark Steele</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Broker%20accepts%20self-signed%20client%0A%09certificate%20in%20verify_peer%20mode&In-Reply-To=%3CAANLkTik1eiqe8FH_Dnt2Yj%2BGozJQsrN613yQQT1Ni0SC%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Broker accepts self-signed client	certificate in verify_peer mode">msteele at beringmedia.com
       </A><BR>
    <I>Wed Aug 11 14:59:07 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008351.html">[rabbitmq-discuss] Broker accepts self-signed client certificate in verify_peer mode
</A></li>
        <LI>Next message: <A HREF="008369.html">[rabbitmq-discuss] Broker accepts self-signed client certificate in verify_peer mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8365">[ date ]</a>
              <a href="thread.html#8365">[ thread ]</a>
              <a href="subject.html#8365">[ subject ]</a>
              <a href="author.html#8365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Care to expand how how one would do this? I've encountered similar issues.

Basically, what I'm looking for is that if the client cert isn't signed by a
CA in the CA file that I'm pointing rabbit to, it should fail (which is what
the default behavior should be). This was also kind of implied in the rabbit
doc, even though it doesn't seem to work as advertised.

See the &quot;Trust the Client's Root CA&quot; section of the Rabbit SSL howto
documentation.

Also, if you do know how to do this, explain it as if you were dealing with
an Erlang novice :)

Cheers,

Mark Steele
Director of development
Bering Media Inc.



On Wed, Aug 11, 2010 at 5:38 AM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> Hi Jiri,
</I>&gt;<i>
</I>&gt;<i> On 11/08/10 07:41, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">jiri at krutil.com</A> wrote:
</I>&gt;<i>
</I>&gt;<i> [...]
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; The RabbitMQ server is configured to require a client certificate and
</I>&gt;<i> &gt;&gt; verify the chain of trust (see rabbitmq.config below). I'm using my
</I>&gt;<i> &gt;&gt; own CA that has a self-signed certificate. This is the only trusted
</I>&gt;<i> &gt;&gt; root CA certificate I'm using.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; RabbitMQ correctly accepts client certificates signed by my CA. But it
</I>&gt;<i> &gt;&gt; also accepts self-signed client certificates, which I think is
</I>&gt;<i> &gt;&gt; incorrect. I believe a self-signed client certificate should be
</I>&gt;<i> &gt;&gt; rejected because there is no chain of trust to the root CA certificate.
</I>&gt;<i>
</I>&gt;<i> By default an unknown CA will not cause the connection to fail. The
</I>&gt;<i> default verify_fun ignores {bad_cert, unknown_ca} errors. You should
</I>&gt;<i> provide your own verify_fun that does not ignore {bad_cert, unknown_ca}.
</I>&gt;<i>
</I>&gt;<i> Regards
</I>&gt;<i>
</I>&gt;<i> Emile
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100811/bbbd6654/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100811/bbbd6654/attachment.htm</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008351.html">[rabbitmq-discuss] Broker accepts self-signed client certificate in verify_peer mode
</A></li>
	<LI>Next message: <A HREF="008369.html">[rabbitmq-discuss] Broker accepts self-signed client certificate in verify_peer mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8365">[ date ]</a>
              <a href="thread.html#8365">[ thread ]</a>
              <a href="subject.html#8365">[ subject ]</a>
              <a href="author.html#8365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
