<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] To know when a queue is empty from a Java	client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20To%20know%20when%20a%20queue%20is%20empty%20from%20a%20Java%0A%09client&In-Reply-To=%3CD77EA536-5D14-4BAD-BF4F-FCE225D4EF74%40npcinternational.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008605.html">
   <LINK REL="Next"  HREF="008612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] To know when a queue is empty from a Java	client</H1>
    <B>Jon Brisbin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20To%20know%20when%20a%20queue%20is%20empty%20from%20a%20Java%0A%09client&In-Reply-To=%3CD77EA536-5D14-4BAD-BF4F-FCE225D4EF74%40npcinternational.com%3E"
       TITLE="[rabbitmq-discuss] To know when a queue is empty from a Java	client">jon.brisbin at npcinternational.com
       </A><BR>
    <I>Thu Aug 26 15:41:12 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008605.html">[rabbitmq-discuss] To know when a queue is empty from a Java	client
</A></li>
        <LI>Next message: <A HREF="008612.html">[rabbitmq-discuss] To know when a queue is empty from a	Java	client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8606">[ date ]</a>
              <a href="thread.html#8606">[ thread ]</a>
              <a href="subject.html#8606">[ subject ]</a>
              <a href="author.html#8606">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>


On Aug 26, 2010, at 9:34 AM, Florence Chabanois wrote:

&gt;<i> 
</I>&gt;<i> Hum indeed, this is literally our code...
</I>&gt;<i> 
</I>&gt;<i> So if declare_ok always refers to a new queue, we have no choice but use Runtime.exec(&quot;rabbitmqctl list_queues&quot;) if we want to know this kind of information on an existing queue? 
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Florence.
</I>&gt;<i> 
</I>
Actually, your code is creating a new queue, so in your example, the declare_ok will always refer to a new queue.

But if you declare a queue that already exists (which a producer has already populated with messages), you'll get back the message count. Give a name to your queue and have the producer and consumer use the same name.

If you attach your consumer to a new queue (which you're doing by creating an anonymous queue) the message count will obviously be zero because nothing has put messages in it yet.


Jon Brisbin
Portal Webmaster
NPC International, Inc.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100826/8d45d57b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100826/8d45d57b/attachment.htm</A>&gt;
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008605.html">[rabbitmq-discuss] To know when a queue is empty from a Java	client
</A></li>
	<LI>Next message: <A HREF="008612.html">[rabbitmq-discuss] To know when a queue is empty from a	Java	client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8606">[ date ]</a>
              <a href="thread.html#8606">[ thread ]</a>
              <a href="subject.html#8606">[ subject ]</a>
              <a href="author.html#8606">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
