<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Problems with RabbitMQ not responding on channel request
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problems%20with%20RabbitMQ%20not%20responding%20on%0A%20channel%20request&In-Reply-To=%3C20100818164412.GF2810%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008480.html">
   <LINK REL="Next"  HREF="008485.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Problems with RabbitMQ not responding on channel request</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Problems%20with%20RabbitMQ%20not%20responding%20on%0A%20channel%20request&In-Reply-To=%3C20100818164412.GF2810%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Problems with RabbitMQ not responding on channel request">alexandru at rabbitmq.com
       </A><BR>
    <I>Wed Aug 18 17:44:12 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008480.html">[rabbitmq-discuss] Problems with RabbitMQ not responding on	channel request
</A></li>
        <LI>Next message: <A HREF="008485.html">[rabbitmq-discuss] Problems with RabbitMQ not responding on channel request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8482">[ date ]</a>
              <a href="thread.html#8482">[ thread ]</a>
              <a href="subject.html#8482">[ subject ]</a>
              <a href="author.html#8482">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Cal,

&gt;<i> I seem to have a problem where RabbitMQ will stop accepting channel requests
</I>&gt;<i> after either a certain amount of messages are in the queue, or once I have
</I>&gt;<i> sent 200-300 connection requests.
</I>
What you describe is usually caused by rabbit running out memory.

When rabbit runs out of memory it stops accepting new connections.
Check the logs for for warnings about the hitting the high memory
watermark to see if this is indeed the case.

&gt;<i> At first I thought it was a memory problem, but if I restart RabbitMQ,
</I>&gt;<i> sometimes it will start accepting connections again and allow me to put more
</I>&gt;<i> items on the queue, but then other times it won't.
</I>
Sounds like you're squeezing in a few more messages before hitting the memory
watermark again.

&gt;<i> Currently, I am at 324k messages in the queue.
</I>&gt;<i> Does anyone have any ideas what could be causing this?
</I>
That's sounds like an awful lot of messages.  Do you actually need all
of them on the queue?  Are you consuming them? (if so, are you also
ack'ing them?)

The problem you're facing is that the released versions of rabbit hold
all of the messages in memory.  As a direct consequence, how many
messages you can hold in the broker is upper-bounded by the amount of
RAM you have (the default is 0.4 of the available RAM, if I remember
correctly).  This has been fixed on the default branch (i.e. the amount
of messages is upper-bounded by disk-space) and will be in the next
release.

Hope this helps.

Cheers,
Alex
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008480.html">[rabbitmq-discuss] Problems with RabbitMQ not responding on	channel request
</A></li>
	<LI>Next message: <A HREF="008485.html">[rabbitmq-discuss] Problems with RabbitMQ not responding on channel request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8482">[ date ]</a>
              <a href="thread.html#8482">[ thread ]</a>
              <a href="subject.html#8482">[ subject ]</a>
              <a href="author.html#8482">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
