<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exactly Once Delivery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exactly%20Once%20Delivery&In-Reply-To=%3C20100807212527.GF1469%40wellquite.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008317.html">
   <LINK REL="Next"  HREF="008319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exactly Once Delivery</H1>
    <B>Matthew Sackman</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exactly%20Once%20Delivery&In-Reply-To=%3C20100807212527.GF1469%40wellquite.org%3E"
       TITLE="[rabbitmq-discuss] Exactly Once Delivery">matthew at rabbitmq.com
       </A><BR>
    <I>Sat Aug  7 22:25:27 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008317.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
        <LI>Next message: <A HREF="008319.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8318">[ date ]</a>
              <a href="thread.html#8318">[ thread ]</a>
              <a href="subject.html#8318">[ subject ]</a>
              <a href="author.html#8318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Aug 07, 2010 at 08:46:50PM +0100, Matthias Radestock wrote:
&gt;<i> I believe Matthew was simply trying to point out that many of the
</I>&gt;<i> supposed guarantees of messaging systems are a lot softer than most
</I>&gt;<i> people think.
</I>
Well, in my mind, if you &quot;guarantee&quot; something, then you can offer a
proof in some branch of maths that the property you are guaranteeing can
never be violated except in the circumstances you qualify the statement
with.

That is why, as far as I'm concerned, no messaging system, regardless of
whether it's implemented in a computer or not, can ever guarantee
exactly once semantics: I can prove (or rather, other people have
proven) that provided any individual message can be lost, you can either
achieve &quot;at least once&quot; semantics or &quot;at most once&quot; semantics.

Quantum mechanics may offer a way to avoid messages ever being lost, but
I suspect that's probably not going to be sorted out in time for
RabbitMQ 3.0.

&gt;<i> In reality a &quot;guarantee&quot; is little more than an
</I>&gt;<i> increase in the probability that the right thing will happen.
</I>
Indeed. And importantly, under different circumstances, that probability
can vary wildly. Once you start combining different systems, and the
error rates compound, the probability that the whole thing works end to
end can end up looking very shaky. I suspect the insurance industry will
do well here.

&gt;<i> &gt; What has not been touched on in this little discussion so far is
</I>&gt;<i> &gt; the question of transactions. .. Updating DBs from queues and
</I>&gt;<i> &gt; posting the results of those updates to queues should be atomic; and
</I>&gt;<i> &gt; if I want my debit/credit to happen once rather than many times or
</I>&gt;<i> &gt; not at all, then a combination of transactions and guaranteed
</I>&gt;<i> &gt; delivery becomes very attractive both to the designer and the
</I>&gt;<i> &gt; developers. Yes, ACID comes to mind here...and it is indeed what I
</I>&gt;<i> &gt; am referring to.
</I>
Distributed transactions rely on 2-phase or 3-phase commit or some
variant thereof (eg there's an improved 3-phase build on paxos). Whilst
the protocols themselves are sound, my understanding is (and please
correct me if I'm wrong) that they all rely on, once everyone's agreed
there is no problem committing the transaction, no participant will
renege on that promise. But of course, no participant can actually
guarantee that. Thus distributed transactions can never guarantee ACID.

All you can get is increasing probability that the outcome will be
atomic, consistent and isolated. But you can never guarantee it.

Matthew
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008317.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
	<LI>Next message: <A HREF="008319.html">[rabbitmq-discuss] Exactly Once Delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8318">[ date ]</a>
              <a href="thread.html#8318">[ thread ]</a>
              <a href="subject.html#8318">[ subject ]</a>
              <a href="author.html#8318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
