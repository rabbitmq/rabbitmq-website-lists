<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and queue message limits?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20queue%20message%20limits%3F&In-Reply-To=%3C4C7D7432.2050505%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008685.html">
   <LINK REL="Next"  HREF="008692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and queue message limits?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20queue%20message%20limits%3F&In-Reply-To=%3C4C7D7432.2050505%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and queue message limits?">matthias at rabbitmq.com
       </A><BR>
    <I>Tue Aug 31 22:29:22 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008685.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
        <LI>Next message: <A HREF="008692.html">[rabbitmq-discuss] Fwd:  RabbitMQ and queue message limits?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8686">[ date ]</a>
              <a href="thread.html#8686">[ thread ]</a>
              <a href="subject.html#8686">[ subject ]</a>
              <a href="author.html#8686">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Christian,

Christian Legnitto wrote:
&gt;<i> My main issue is I intend to have hundreds of queues with 100k+ 
</I>&gt;<i> messages that may or may not be processed in a timely manner. Memory 
</I>&gt;<i> is ok with the new persister (yay!), but the disk fills up quickly. 
</I>&gt;<i> Right now with only 1 consumer, if I don't ack messages coming from 
</I>&gt;<i> bugzilla for 2 days I use up 20GB of disk. I can of course throw 
</I>&gt;<i> hardware at the problem, but it seems I'd reach a point where it 
</I>&gt;<i> merely wouldn't scale.
</I>
Thanks for explaining the problem you are trying to solve.

Note that in RabbitMQ messages are shared between queues, i.e. if the 
same message ends up in multiple queues we have at most one copy in 
memory and at most one copy on disk.

So you may find RabbitMQ scales better here than you expected.

&gt;<i> I don't think it is unreasonable to tell consumers that all messages
</I>&gt;<i> up to a point will be persisted, but once a threshold is reached only
</I>&gt;<i> x amount of messages will persist. I see other brokers support such a
</I>&gt;<i> thing, though it sounds like RabbitMQ likely does not.
</I>
We did introduce queue leases in the 2.0.0 release, which allows the 
server to remove entire queues when they haven't been used for a while. 
That may not be the best fit for your use case, but it's certainly a 
feature aimed at addressing similar problems.

Another feature we have in our plans is per-queue message TTLs, i.e. 
messages will get removed from queues if they are older than a specified 
threshold. It sounds like that would fit your use case nicely, and 
arguably better than a count-based limit. Though the latter too is 
something we may support one day.


Regards,

Matthias.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008685.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
	<LI>Next message: <A HREF="008692.html">[rabbitmq-discuss] Fwd:  RabbitMQ and queue message limits?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8686">[ date ]</a>
              <a href="thread.html#8686">[ thread ]</a>
              <a href="subject.html#8686">[ subject ]</a>
              <a href="author.html#8686">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
