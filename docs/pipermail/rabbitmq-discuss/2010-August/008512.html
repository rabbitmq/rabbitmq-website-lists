<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] STOMP and transactions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20and%20transactions&In-Reply-To=%3C4C6EB37A.50108%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008504.html">
   <LINK REL="Next"  HREF="008514.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] STOMP and transactions</H1>
    <B>Tony Garnock-Jones</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20STOMP%20and%20transactions&In-Reply-To=%3C4C6EB37A.50108%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] STOMP and transactions">tonyg at rabbitmq.com
       </A><BR>
    <I>Fri Aug 20 17:55:22 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008504.html">[rabbitmq-discuss] STOMP and transactions
</A></li>
        <LI>Next message: <A HREF="008514.html">[rabbitmq-discuss] STOMP and transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8512">[ date ]</a>
              <a href="thread.html#8512">[ thread ]</a>
              <a href="subject.html#8512">[ subject ]</a>
              <a href="author.html#8512">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hej G&#246;ran,

I spotted your library over on squeak-dev - very cool. I'm pleased you're
trying it out against RabbitMQ.

Transactions in AMQP (and STOMP, though STOMP's semantics are pretty loose) are
not quite what you'd expect given what they mean in the DB world. They are used
to *group* sets of messages (&quot;SEND&quot;s) together (atomically, more or less) so
that either all or none are published. An additional wrinkle is the treatment
of acknowledgements (&quot;ACK&quot;s) of messages delivered to the transacting client
from the server: acknowledgements can be included in a transaction along with
new publications.

This lets e.g. an RPC server receive a request, process it, and then
transactionally both acknowledge the request and send the reply message. If the
transaction commits, the request is deleted from the server's queue, and the
reply is enqueued for the RPC client; if the transaction aborts, the request
remains enqueued waiting for another (or perhaps the same) RPC server instance
to pick it up and work on it, and the reply message is not sent.

With regard to hitting disk: persistence of messages is orthogonal to their
transactionality in messaging systems like AMQP and STOMP.

I hope this helps. I read squeak-dev, too, so feel free to get in touch in
either place if you have further questions.

Regards,
  Tony


G&#246;ran Krampe wrote:
&gt;<i> Hi all!
</I>&gt;<i> 
</I>&gt;<i> I am implementing a STOMP lib in Squeak:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.squeaksource.com/StompProtocol.html">http://www.squeaksource.com/StompProtocol.html</A>
</I>&gt;<i> 
</I>&gt;<i> ...and most of it now works (ACKs and RECEIPT etc) but I need more
</I>&gt;<i> info on how transactions are meant to work. Can someone give me a
</I>&gt;<i> pointer? I am aware that Rabbit has lots of different terms here, but
</I>&gt;<i> what is the &quot;out of the box&quot; meaning of BEGIN/COMMIT using the stomp
</I>&gt;<i> adapter?
</I>&gt;<i> 
</I>&gt;<i> I thought it meant that *nothing* is *delivered* until on COMMIT, but
</I>&gt;<i> that seems a misunderstanding. Is it about making sure hitting disk?
</I>&gt;<i> 
</I>&gt;<i> regards, G&#246;ran
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I></PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008504.html">[rabbitmq-discuss] STOMP and transactions
</A></li>
	<LI>Next message: <A HREF="008514.html">[rabbitmq-discuss] STOMP and transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8512">[ date ]</a>
              <a href="thread.html#8512">[ thread ]</a>
              <a href="subject.html#8512">[ subject ]</a>
              <a href="author.html#8512">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
