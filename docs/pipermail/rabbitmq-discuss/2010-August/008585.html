<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] problem with new persiter with 1000	topics/queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C152675.81635.qm%40web31808.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008574.html">
   <LINK REL="Next"  HREF="008423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] problem with new persiter with 1000	topics/queues</H1>
    <B>alex chen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20problem%20with%20new%20persiter%20with%201000%0A%09topics/queues&In-Reply-To=%3C152675.81635.qm%40web31808.mail.mud.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] problem with new persiter with 1000	topics/queues">chen650 at yahoo.com
       </A><BR>
    <I>Wed Aug 25 21:08:43 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008574.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
        <LI>Next message: <A HREF="008423.html">[rabbitmq-discuss] Compiling rabbitmq-c
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8585">[ date ]</a>
              <a href="thread.html#8585">[ thread ]</a>
              <a href="subject.html#8585">[ subject ]</a>
              <a href="author.html#8585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Matthias,


&gt;<i> &gt; this could be the amqp_producer.c in  rabbitmq-c/examples.  simply modify the 
</I>&gt;<i>code to accept the topic name and  message size from command line.
</I>&gt;<i> 
</I>&gt;<i> Please send us the modified  code.
</I>
David mentioned that tools/amqp-publish does the same thing.

&gt;<i> There must be a step 0) missing here.  amqp_bind does not create any queues and 
</I>&gt;<i>will fail if the referenced queues do  not exist. So how are the queues created? 
</I>&gt;<i>Please send us the code/scripts for  that.
</I>
i modified rabbitmq-c/examples/amqp_consumer.c to create the queue without 
consuming the messages.
# to bind and declare the queue then exit.  use this in bind.sh
amqp_consumer -r routingkey -q queue -n 0
# to consume the queue, use this in consume.sh
amqp_consumer -r routingkey -q queue 

attached please find the modified amqp_consumer.c.  

&gt;<i> Also, are all the above running on the same machine as the  broker?
</I>
yes.  i also tested running publisher from different host.  the throughput is 
the same if the publisher host and borker host are in the same data center, 
because the bottleneck is disk and memory.
 
-alex



      
-------------- next part --------------
A non-text attachment was scrubbed...
Name: amqp_consumer.c
Type: text/x-csrc
Size: 8163 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100825/eee4fc27/attachment-0001.c">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20100825/eee4fc27/attachment-0001.c</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008574.html">[rabbitmq-discuss] problem with new persiter with 1000	topics/queues
</A></li>
	<LI>Next message: <A HREF="008423.html">[rabbitmq-discuss] Compiling rabbitmq-c
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8585">[ date ]</a>
              <a href="thread.html#8585">[ thread ]</a>
              <a href="subject.html#8585">[ subject ]</a>
              <a href="author.html#8585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
