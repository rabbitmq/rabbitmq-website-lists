<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ and queue message limits?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20queue%20message%20limits%3F&In-Reply-To=%3CC82F86B6-62C5-4C5B-AF47-D33BDA8E1D3E%40tjervaag.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008684.html">
   <LINK REL="Next"  HREF="008686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ and queue message limits?</H1>
    <B>&#216;yvind Tjervaag</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20and%20queue%20message%20limits%3F&In-Reply-To=%3CC82F86B6-62C5-4C5B-AF47-D33BDA8E1D3E%40tjervaag.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ and queue message limits?">oyvind at tjervaag.com
       </A><BR>
    <I>Tue Aug 31 22:24:33 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008684.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
        <LI>Next message: <A HREF="008686.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8685">[ date ]</a>
              <a href="thread.html#8685">[ thread ]</a>
              <a href="subject.html#8685">[ subject ]</a>
              <a href="author.html#8685">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

Not to hijack anyones thread, but I thought I would chime in to second this feature-request :) I've got a couple of queues that might fill the disk if consumers are not working properly, and I still want the rest of the &quot;slow moving&quot; queues to live on.

In my case it would be nice if the server could throw out old messages (one by one as new messages come in) once the queue reaches a storage threshold/message count.

regards,
&#216;yvind

On Aug 31, 2010, at 11:16 PM, Christian Legnitto wrote:

&gt;<i> My main issue is I intend to have hundreds of queues with 100k+ messages that may or may not be processed in a timely manner. Memory is ok with the new persister (yay!), but the disk fills up quickly. Right now with only 1 consumer, if I don't ack messages coming from bugzilla for 2 days I use up 20GB of disk. I can of course throw hardware at the problem, but it seems I'd reach a point where it merely wouldn't scale. I don't think it is unreasonable to tell consumers that all messages up to a point will be persisted, but once a threshold is reached only x amount of messages will persist. I see other brokers support such a thing, though it sounds like RabbitMQ likely does not.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Christian
</I>&gt;<i> 
</I>&gt;<i> On Aug 31, 2010, at 1:50 PM, Matthias Radestock wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Christian,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Christian Legnitto wrote:
</I>&gt;&gt;&gt;<i> Does RabbitMQ currently support (or are there plans to) something
</I>&gt;&gt;&gt;<i> like:
</I>&gt;&gt;&gt;<i> <A HREF="http://activemq.apache.org/slow-consumer-handling.html">http://activemq.apache.org/slow-consumer-handling.html</A>
</I>&gt;&gt;&gt;<i> I'd like to define a max size for a queue and configure the behavior
</I>&gt;&gt;&gt;<i> when the threshold is released. I guess I could have some cleanup
</I>&gt;&gt;&gt;<i> consumer that drains the queues periodically, but that seems
</I>&gt;&gt;&gt;<i> error-prone and brittle.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> What's the problem with just keeping the messages in the queue? RabbitMQ automatically pages messages to disk, so it's not bounded by memory. And the disk paging is quite clever in that it gives more memory to fast moving queues.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Matthias.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008684.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
	<LI>Next message: <A HREF="008686.html">[rabbitmq-discuss] RabbitMQ and queue message limits?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8685">[ date ]</a>
              <a href="thread.html#8685">[ thread ]</a>
              <a href="subject.html#8685">[ subject ]</a>
              <a href="author.html#8685">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
