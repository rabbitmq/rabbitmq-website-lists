<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster behavior with distributing messages internally over Wide area networks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20behavior%20with%20distributing%20messages%0A%20internally%20over%20Wide%20area%20networks&In-Reply-To=%3C20100818103244.GC2810%40dakota.eng.vmware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008469.html">
   <LINK REL="Next"  HREF="008473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster behavior with distributing messages internally over Wide area networks</H1>
    <B>Alexandru Scvor&#355;ov</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20behavior%20with%20distributing%20messages%0A%20internally%20over%20Wide%20area%20networks&In-Reply-To=%3C20100818103244.GC2810%40dakota.eng.vmware.com%3E"
       TITLE="[rabbitmq-discuss] Cluster behavior with distributing messages internally over Wide area networks">alexandru at rabbitmq.com
       </A><BR>
    <I>Wed Aug 18 11:32:44 BST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008469.html">[rabbitmq-discuss] Cluster behavior with distributing messages internally over Wide area networks
</A></li>
        <LI>Next message: <A HREF="008473.html">[rabbitmq-discuss] Cluster behavior with distributing messages internally over Wide area networks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8470">[ date ]</a>
              <a href="thread.html#8470">[ thread ]</a>
              <a href="subject.html#8470">[ subject ]</a>
              <a href="author.html#8470">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Josh,

&gt;<i> I was wondering whether a Node is aware of what to and what not to deliver to a cluster peer. 
</I>&gt;<i> 
</I>&gt;<i> Eg.
</I>&gt;<i>    
</I>&gt;<i> Producer
</I>&gt;<i>    \/
</I>&gt;<i> [Node 1] ===&gt; consumer1 (queue1)
</I>&gt;<i>    |
</I>&gt;<i>    | WAN 
</I>&gt;<i>    |
</I>&gt;<i> [Node 2] ===&gt; consumer2 (queue2)
</I>&gt;<i> 
</I>&gt;<i> Here all messages to will traverse the WAN connection b/c they are delivered to Queue2.
</I>&gt;<i> 
</I>&gt;<i> If Node 2 would not have a consumer2, would Node 1 send all it's messages, or will it filter messages only to match a queue in Node2?
</I>
Messages are only sent across the network when they're requested.  So,
unless something on Node 2 tries to consume messages from queue1, those
messages will not be sent over the network.

&gt;<i> I guess my question is rather related to where a queue is held in memory and how it's accessed, 
</I>
A queue is only stored on the node it was declared on.  Within the cluster,
all nodes can access all queues, but messages are only routed to other
nodes on-demand.

&gt;<i> but our concern is what inter-cluster-traffic we have to expect. Since it's a low bandwith/high latency connection we're not sure whether Clustering or Shovel is more adequate?
</I>
It depends on what you're trying to achieve.  Clustering creates a
logical broker made out of several smaller ones.  The shovel keeps the
brokers separate.

If you want to connect to any of the nodes and be able to consume from
any queue, create new bindings, and so on, use clustering.

If you just want to move messages around in a predefined way, use
shovel.

Cheers,
Alex

</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008469.html">[rabbitmq-discuss] Cluster behavior with distributing messages internally over Wide area networks
</A></li>
	<LI>Next message: <A HREF="008473.html">[rabbitmq-discuss] Cluster behavior with distributing messages internally over Wide area networks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8470">[ date ]</a>
              <a href="thread.html#8470">[ thread ]</a>
              <a href="subject.html#8470">[ subject ]</a>
              <a href="author.html#8470">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
