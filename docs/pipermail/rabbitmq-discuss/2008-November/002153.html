<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] py-amqplib status messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20py-amqplib%20status%20messages&In-Reply-To=492C3110.6030605%40cohesiveft.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002150.html">
   <LINK REL="Next"  HREF="002142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] py-amqplib status messages</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20py-amqplib%20status%20messages&In-Reply-To=492C3110.6030605%40cohesiveft.com"
       TITLE="[rabbitmq-discuss] py-amqplib status messages">matthias at lshift.net
       </A><BR>
    <I>Tue Nov 25 21:07:05 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002150.html">[rabbitmq-discuss] py-amqplib status messages
</A></li>
        <LI>Next message: <A HREF="002142.html">[rabbitmq-discuss] py-amqplib status messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2153">[ date ]</a>
              <a href="thread.html#2153">[ thread ]</a>
              <a href="subject.html#2153">[ subject ]</a>
              <a href="author.html#2153">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dmitriy,

Dmitriy Samovskiy wrote:

&gt;<i> This means that I either have to do buffering inside producer in order 
</I>&gt;<i> to be able to resend them all, or I have to wrap each basic.publish in tx.
</I>&gt;<i> 
</I>&gt;<i> In latter case, it's a total of 5 methods (tx.select, tx.select-ok, 
</I>&gt;<i> basic.publish, tx.commit, tx.commit-ok).
</I>
You only need the tx.select/select-ok before the first message. And 
there is nothing forcing you to commit after *every* message. Instead 
keep a bounded buffer of n messages and commit every n. That's far more 
efficient than requiring an ack for every single message.

The downside is that even with this optimised usage tx is quite 
expensive and does a lot more than what you want here.

There is an alternative to using tx: issue *any* synchronous command. 
The response constitutes a guarantee that all messages published prior 
to the request will have been processed by the channel process on the 
server. They may still get lost on their way too queues, but that only 
happens in case of a server fault. Furthermore, if the basic.publish has 
the mandatory flag set then in the latter case a basic.return is 
guaranteed to be sent prior to the synchronous command response.

AFAIK that behaviour is not mandated by the spec though.


Matthias.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002150.html">[rabbitmq-discuss] py-amqplib status messages
</A></li>
	<LI>Next message: <A HREF="002142.html">[rabbitmq-discuss] py-amqplib status messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2153">[ date ]</a>
              <a href="thread.html#2153">[ thread ]</a>
              <a href="subject.html#2153">[ subject ]</a>
              <a href="author.html#2153">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
