<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exchanges, Routing, and AMQP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=4442b4720811102042s580f7c4ei222cf482ac7ed1fb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001956.html">
   <LINK REL="Next"  HREF="001965.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exchanges, Routing, and AMQP</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=4442b4720811102042s580f7c4ei222cf482ac7ed1fb%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Exchanges, Routing, and AMQP">0x6e6562 at gmail.com
       </A><BR>
    <I>Tue Nov 11 11:35:31 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001956.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
        <LI>Next message: <A HREF="001965.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1961">[ date ]</a>
              <a href="thread.html#1961">[ thread ]</a>
              <a href="subject.html#1961">[ subject ]</a>
              <a href="author.html#1961">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Peter,

On Tue, Nov 11, 2008 at 4:42 AM, Peter Silva &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Peter.A.Silva at gmail.com</A>&gt; wrote:
&gt;<i> I found the FAQ explanation that though fanout/topic/direct are successive
</I>&gt;<i> specializations, having it in the spec permits broker side optimizations
</I>&gt;<i> unconvincing.  If people keep bringing it up, then maybe it's a sign that
</I>&gt;<i> the spec is doing something that violates the principle of least surprise.
</I>
In general you may have a point, if after closer inspection the
ultimate reason for surprise is counterintuitive for many people.

&gt;<i> The broker could just perform optimizations on the bindings in place and not
</I>&gt;<i> clutter up the standard.  The really general thing to do is the header type,
</I>&gt;<i> using a matching syntax.
</I>
Fine, but it's one thing to specify something and another to actually
implement it. Whilst probably not being rocket science I don't think
that implementing that the headers exchange in a scalable fashion is
as straight forward as you infer.

&gt;<i> Nor do I grasp why an exchange is anything special.   The exchange name
</I>&gt;<i> could easily be the first element of the routing key to apply the pattern
</I>&gt;<i> to.  One can bind to all exchanges or a pattern of exchanges, rather than
</I>&gt;<i> having to specify each exchange individually.
</I>
This discussion (as an extension to the thread Kirk started) is going
on too long. If defering the routing type to the bindings is as
trivial as you maintain, then please enlighten me with a proof of
concept written in a language of your choice. It would have not have
to be AMQP specific, just something that shows the basr fundamental
routing lookup mechanism based on the data structures you are
proposing.

Code speaks louder than words and I would love to be proven wrong.

&gt;<i> On the other hand,
</I>&gt;<i> going through long lists of regular expression evaluations can kill
</I>&gt;<i> performance.
</I>
:<i>-)
</I>
&gt;<i> Does anyone else use complicated routing like us?  Does it sound like
</I>&gt;<i> something that AMQP might get to later?
</I>
Regex exchanges have been discussed before and it would be reasonably
straight forward to implement, it would proabably look like the
current topic exchange. As you indicate, unless you something really
funky with your index, this would incur a linear scan of the bindings.

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001956.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
	<LI>Next message: <A HREF="001965.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1961">[ date ]</a>
              <a href="thread.html#1961">[ thread ]</a>
              <a href="subject.html#1961">[ subject ]</a>
              <a href="author.html#1961">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
