<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Question about configuration of queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Question%20about%20configuration%20of%20queues&In-Reply-To=f6c048390811041441i335ad258qde2fbb45cd3a177f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001862.html">
   <LINK REL="Next"  HREF="001881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Question about configuration of queues</H1>
    <B>Edwin Fine</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Question%20about%20configuration%20of%20queues&In-Reply-To=f6c048390811041441i335ad258qde2fbb45cd3a177f%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Question about configuration of queues">rabbitmq-discuss_efine at usa.net
       </A><BR>
    <I>Wed Nov  5 03:46:20 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001862.html">[rabbitmq-discuss] Question about configuration of queues
</A></li>
        <LI>Next message: <A HREF="001881.html">[rabbitmq-discuss] Question about configuration of queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1866">[ date ]</a>
              <a href="thread.html#1866">[ thread ]</a>
              <a href="subject.html#1866">[ subject ]</a>
              <a href="author.html#1866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Nov 4, 2008 at 5:41 PM, Beene, William R.
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">beenewilliamr at gmail.com</A>&gt;wrote:

&gt;<i> On Tue, Nov 4, 2008 at 4:34 PM, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; William,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Tue, Nov 4, 2008 at 10:05 PM, Beene, William R.
</I>&gt;<i> &gt; &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">beenewilliamr at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; Is there anyway to preconfigure a queue in rabbitmq before my app that
</I>&gt;<i> &gt;&gt; needs the queue starts up.
</I>&gt;<i> &gt;&gt; I want data sent to the queue to be persisted so that the app can get
</I>&gt;<i> &gt;&gt; it when it starts up.
</I>&gt;<i> &gt;&gt; Does this use case make sense? Is this possible? Any pointers would be
</I>&gt;<i> &gt;&gt; greatly appreciated.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Why don't just declare the queue, send the messages that you want to
</I>&gt;<i> &gt; pre-populate the queue with (setting the persistent flag when sending)
</I>&gt;<i> &gt; and then after this has occurred, start a consumer to receive the
</I>&gt;<i> &gt; messages?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; HTH,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Ben
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Because then the producers would have to know about all of the consumers.
</I>&gt;<i> I would rather put this in a property file or something. It looks like
</I>&gt;<i> I may have to write a small program that reads a property file and creates
</I>&gt;<i>  the queues I need.
</I>&gt;<i>
</I>
William,

If I understood your question correctly, I don't see why the producers would
need to know all about the consumers.

The producers publish to an exchange using a routing key. In a simple
scenario, the routing key is just a queue name. The producers would have to
know the key to be able to publish to that queue.

You can set it up so that whichever actor (consumer or producer) first tries
to access the queue creates it (if the flags are set up to do this). If the
consumer gets there first, it will create an empty queue and sit and wait on
it, or come back later and try again. If it's the producer that first starts
up, it will create the queue, and as long as the messages you deliver are
flagged as persistent (assuming you want them to survive the rabbit server
restart), and not flagged for immediate delivery, the producer can happily
throw stuff in the queue (within reasonable memory limitations). The
consumer(s) may start up at any time and collect the messages. An
application I wrote works very much like this.

It may seem strange to let the consumers create the queues but, security
aspects aside (assuming that consumers are trusted), it's a very convenient
way to do what you want to do. (It can be confusing if the consumer uses the
wrong queue name, because it may create an empty queue and sit there forever
wondering why nobody is talking to it, but that's true of a lot of things in
general).

Does this help?

Regards,
Edwin Fine


&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> William Beene
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081104/c2d9bf3e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081104/c2d9bf3e/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001862.html">[rabbitmq-discuss] Question about configuration of queues
</A></li>
	<LI>Next message: <A HREF="001881.html">[rabbitmq-discuss] Question about configuration of queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1866">[ date ]</a>
              <a href="thread.html#1866">[ thread ]</a>
              <a href="subject.html#1866">[ subject ]</a>
              <a href="author.html#1866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
