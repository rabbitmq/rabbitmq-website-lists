<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq-discuss%20Digest%2C%20Vol%2018%2C%20Issue%2034&In-Reply-To=167204d20811161026x6f5ac0a5q9b8b54e52272aae4%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002016.html">
   <LINK REL="Next"  HREF="002021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34</H1>
    <B>Ilya Grigorik</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq-discuss%20Digest%2C%20Vol%2018%2C%20Issue%2034&In-Reply-To=167204d20811161026x6f5ac0a5q9b8b54e52272aae4%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34">ilya at aiderss.com
       </A><BR>
    <I>Sun Nov 16 23:59:03 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002016.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
        <LI>Next message: <A HREF="002021.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2018">[ date ]</a>
              <a href="thread.html#2018">[ thread ]</a>
              <a href="subject.html#2018">[ subject ]</a>
              <a href="author.html#2018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben: running latest version as of this past Friday (much better than 1.4.0,
which I tried at first)

I recommend persisting with this.  (sorry, I could not resist that)
&gt;<i>
</I>
;-)


&gt;<i> * I am assuming flow control does not solve your problem - I think you
</I>&gt;<i> have made that clear, but can I just check?
</I>

Yep, in fact, I would much rather not throttle the producers - the queue
becomes a leaky abstraction. I like to think of Rabbit (or any other
router/queue in between) as a buffer, hence it should accept and fan out the
messages without exposing the lag on the consumer side.

I may be conflating two different requirements, but here is an interesting
scenario to think about: our entire infrastructure is deployed on EC2, and
time and time again we've found SQS (simple queue service) a life savior for
big data migrations or general maintenance. We're generating a lot of
real-time data, and SQS allows us to reroute all of it into a temporary
queue, and let it accumulate (we've pushed hundreds of GB's of data into it)
while we do our work, and once we're done, we just flush the queue. No
additional infrastructure required. (same thing for aggregate jobs, or even
one-off trial projects)

Arguably, we could use a different piece of infrastructure to cover this
case (another rabbit consumer which stores data into a database), but if
Rabbit could handle this, life is much easier.

(Wild idea: provide an SQS adapter to reroute packets into at a certain
threshold.. Perhaps not so wild if we get a pluggable interface)

* How often do you expect the 250Gb case to happen - do you consider
&gt;<i> it exceptional or normal?
</I>

250GB is an exception, but smaller amounts (1-5Gb) are fairly frequent
(which is theoretically possible even with the current pure memory
deployment).


&gt;<i> * Do you have ordering constraints, and/or must all the messages be on one
</I>&gt;<i> queue
</I>

Depends on the data. Most of it is order agnostic, but there is some data
which only makes sense when delivered in order.


&gt;<i> * In the case where you need to page to disk due to a lack of machine
</I>&gt;<i> memory, and because your queues are not being drained by consumers,
</I>&gt;<i> does it matter what the latency of message delivery is once the
</I>&gt;<i> consumers come back?
</I>&gt;<i>
</I>
No - within reason, of course. ;-)

The point being that there may be some workaround that you can try,
&gt;<i> depending on the answer to the above.  You may be able to see where I
</I>&gt;<i> am going by the last question... ;-)
</I>&gt;<i>
</I>
Absolutely. I'm not saying Rabbit should do all of the things I've described
either. Of course the more the better, but even more importantly I'd like to
see some sane overflow conditions: ttl, max queue size, etc. That I can plan
for, crashing.. won't work. ;-)

ig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081116/044fe282/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081116/044fe282/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002016.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
	<LI>Next message: <A HREF="002021.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2018">[ date ]</a>
              <a href="thread.html#2018">[ thread ]</a>
              <a href="subject.html#2018">[ subject ]</a>
              <a href="author.html#2018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
