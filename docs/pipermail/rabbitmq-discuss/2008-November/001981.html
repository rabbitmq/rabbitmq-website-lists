<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Sending and Receiving to same queue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Sending%20and%20Receiving%20to%20same%20queue&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002073.html">
   <LINK REL="Next"  HREF="001989.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Sending and Receiving to same queue</H1>
    <B>Steve Weaver</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Sending%20and%20Receiving%20to%20same%20queue&In-Reply-To="
       TITLE="[rabbitmq-discuss] Sending and Receiving to same queue">weaveinator at gmail.com
       </A><BR>
    <I>Thu Nov 13 18:57:21 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002073.html">[rabbitmq-discuss] RabbitMQ starting problem on R12B-5
</A></li>
        <LI>Next message: <A HREF="001989.html">[rabbitmq-discuss] Sending and Receiving to same queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1981">[ date ]</a>
              <a href="thread.html#1981">[ thread ]</a>
              <a href="subject.html#1981">[ subject ]</a>
              <a href="author.html#1981">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All -
I am having a problem with sending to a queue while another process is
pulling from the same queue.  I am using Basic.Publish to put the message
and Basic.Get.  Nothing fancy, queue is durable and messages are
persistent.  Two processes (applications) running on same machine, one
receives a message (from remoting) and puts it on queue using
Basic.Publish.  Another process that runs every 5 minutes or so, wakes up
and checks the queue using Basic.Get.  If there is a message it enters a
loop which sends the message down the pipe and then tries to get another
message using same channel, until no more messages then closes channel and
disconnects and goes back to sleep for another 5 minutes.

This all works until the processes line up - sending to queue at same time
as trying to pull from queue.  Then rabbit dies with a (badrpc,nodedown)
status.  If I restart rabbit, all the messages sent are still there
(thankfully) but, I have to restart in order to send / receive another batch
of messages.

So long winded question - I assume there should be no reason a queue cant
send and receive messages at the same time, but is there some sort of
setting or flag I need to check first or a syncronizing process I have to
do?

Thanks very much for any help!!!
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081113/cf7b17b3/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081113/cf7b17b3/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002073.html">[rabbitmq-discuss] RabbitMQ starting problem on R12B-5
</A></li>
	<LI>Next message: <A HREF="001989.html">[rabbitmq-discuss] Sending and Receiving to same queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1981">[ date ]</a>
              <a href="thread.html#1981">[ thread ]</a>
              <a href="subject.html#1981">[ subject ]</a>
              <a href="author.html#1981">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
