<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] JSON dependency for codegen - suggestion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20JSON%20dependency%20for%20codegen%20-%20suggestion&In-Reply-To=49247058.3080000%40wizards.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002069.html">
   <LINK REL="Next"  HREF="002074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] JSON dependency for codegen - suggestion</H1>
    <B>Holger Hoffst&#228;tte</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20JSON%20dependency%20for%20codegen%20-%20suggestion&In-Reply-To=49247058.3080000%40wizards.de"
       TITLE="[rabbitmq-discuss] JSON dependency for codegen - suggestion">holger at wizards.de
       </A><BR>
    <I>Wed Nov 19 21:57:57 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002069.html">[rabbitmq-discuss] JSON dependency for codegen - suggestion
</A></li>
        <LI>Next message: <A HREF="002074.html">[rabbitmq-discuss] JSON dependency for codegen - suggestion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2071">[ date ]</a>
              <a href="thread.html#2071">[ thread ]</a>
              <a href="subject.html#2071">[ subject ]</a>
              <a href="author.html#2071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Replying to myself as usual ;)

&gt;<i> I decided to check out what's new in the Java client, but oh noes! Python
</I>&gt;<i> errors. So I tried the same with the server and got the helpful message
</I>&gt;<i> that JSON is now required. Dropping that into the codegen project worked
</I>&gt;<i> for building the broker but not for the Java client lib, apparently since
</I>&gt;<i> the parent codegen script is called directly and json.py is not on the
</I>&gt;<i> relative path..or something like that.
</I>
Nope..the codegen project is appended to the python path and dropping the
json.py in there works just fine for both the broker and the java client
projects...just not with python 2.6 on Windows, which is of course what I
tried :(

C:\home\holger\Projects\rabbitmq-java-client\build.xml:55: Generation of
AMQP.java failed with message:
Traceback (most recent call last):
  File &quot;codegen.py&quot;, line 393, in &lt;module&gt;
    do_main(generateJavaApi, generateJavaImpl)
  File &quot;../rabbitmq-codegen\amqp_codegen.py&quot;, line 166, in do_main
    header_fn(sys.argv[2])
  File &quot;codegen.py&quot;, line 387, in generateJavaApi
    genJavaApi(AmqpSpec(specPath))
  File &quot;../rabbitmq-codegen\amqp_codegen.py&quot;, line 48, in __init__
    self.spec = json.read(file(filename).read())
AttributeError: 'module' object has no attribute 'read'

Any python wiz who knows what changed from 2.5 to 2.6 that could cause
such breakage?

&gt;<i> Would it be possible to add the json.py to the -codegen project? That
</I>&gt;<i> would make things much easier, probably also for the other client libs.
</I>
That would still be nice, provided we can figure out how to make it work
with python 2.6.

-h



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002069.html">[rabbitmq-discuss] JSON dependency for codegen - suggestion
</A></li>
	<LI>Next message: <A HREF="002074.html">[rabbitmq-discuss] JSON dependency for codegen - suggestion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2071">[ date ]</a>
              <a href="thread.html#2071">[ thread ]</a>
              <a href="subject.html#2071">[ subject ]</a>
              <a href="author.html#2071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
