<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Erlang client and properties
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20client%20and%20properties&In-Reply-To=6c2563b20811071431l2100e787y1db4eb9c64cf64bc%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001884.html">
   <LINK REL="Next"  HREF="001890.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Erlang client and properties</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Erlang%20client%20and%20properties&In-Reply-To=6c2563b20811071431l2100e787y1db4eb9c64cf64bc%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Erlang client and properties">0x6e6562 at gmail.com
       </A><BR>
    <I>Sat Nov  8 01:43:16 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001884.html">[rabbitmq-discuss] Erlang client and properties
</A></li>
        <LI>Next message: <A HREF="001890.html">[rabbitmq-discuss] Erlang client and properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1887">[ date ]</a>
              <a href="thread.html#1887">[ thread ]</a>
              <a href="subject.html#1887">[ subject ]</a>
              <a href="author.html#1887">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Edwin,

On Fri, Nov 7, 2008 at 10:31 PM, Edwin Fine
&lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss_efine at usa.net</A>&gt; wrote:
&gt;<i>(* see the end of this
</I>&gt;<i> post before sending STFW messages, please :)
</I>
What about RTFS :-)

&gt;<i> If the following questions are answered somewhere in a way that relates to
</I>&gt;<i> how to use it in the Erlang client (e.g. examples in Erlang), please point
</I>&gt;<i> me to it and disregard the rest of these questions.
</I>
As you pointed out yourself, the Erlang client is still experimental,
though it is getting better the more attention we give it.

Having said that, it does require some TLC wrt properties and flags,
so don't treat it as gospel.

Also, remember that it attempts to re-use as much code from the server
as it can - which is cool OTOH.....but originally, the server was not
decided with this in mind. So we may need to refactor some stuff
there, e.g. decoded properties vs. binary properties - for persistent
messages, the binary version is written to the journal, not the
decoded version. You would not have this in a client side only
construct.

&gt;<i> When I send a message with properties set to amqp_util:basic_properties(),
</I>&gt;<i> and receive it using a basic.get, the message has only got property data in
</I>&gt;<i> properties_bin, but properties is set to 'none'. How do I decode what's in
</I>&gt;<i> properties_bin? Alternatively, how do I get the properties to stay set in
</I>&gt;<i> the unencoded 'properties' field?
</I>
See answers above. Also - amqp_util is bit rotten and probably needs
cleaning up.

&gt;<i> What is the format of the timestamp field, and how do I encode/decode it? I
</I>&gt;<i> can't find a definition for its type &quot;timestamp&quot; in the AMQP spec.
</I>&gt;<i> When and by what does the timestamp get set? I searched all the client code
</I>&gt;<i> for 'timestamp' but could not find it, so when I create a new message, what
</I>&gt;<i> sets this?
</I>&gt;<i> What is the format of the expiration? The spec does not define it.
</I>&gt;<i> What is the behavior when a message has expired? Does the client
</I>&gt;<i> automatically throw it away when doing a basic.get or consume so I never see
</I>&gt;<i> it?
</I>&gt;<i> Does the message_id ever get set automatically to a unique value?
</I>&gt;<i> What is the purpose of the 'type' property? The spec just writes &quot;message
</I>&gt;<i> type name&quot;? Is this totally user-defined?
</I>
I'll let Matthias answer these questions as he is reviewing the
upcoming 0.9.1 spec.

&gt;<i> How does one set and get message headers?
</I>
Create your own P_basic tuple and set all of the fields appropriately.

&gt;<i> I am sure that I could work this all out if I read all the Rabbit code, all
</I>&gt;<i> the AMQP tutorials I can find, and so on, but it would take me days. It's
</I>&gt;<i> already taken hours so far. If anyone can help me shortcut this, I would be
</I>&gt;<i> very grateful.
</I>
You are quite rightfully identifying many ambiguities in the protocol
definition, which for good reason is not yet 1.0 (because it is
buggy).

You should try to implement an AMQP compliant broker one of these
days, as you have been able to gather from your initial investigation,
the protocol is still some off being conceptually sound.

Also, you must appreciate that RabbitMQ is not the official source of
the AMQP spec - this has been authored by the AMQP working group.

However, in the absence of any public forums for AMQP where
individuals can express their views, I think it is perfectly valid for
the community to use the Rabbit mailing list to discuss these issues.
After all, these are the real people using the protocol.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001884.html">[rabbitmq-discuss] Erlang client and properties
</A></li>
	<LI>Next message: <A HREF="001890.html">[rabbitmq-discuss] Erlang client and properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1887">[ date ]</a>
              <a href="thread.html#1887">[ thread ]</a>
              <a href="subject.html#1887">[ subject ]</a>
              <a href="author.html#1887">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
