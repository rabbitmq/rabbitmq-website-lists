<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Channel Flow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Channel%20Flow&In-Reply-To=490F13A2.6040408%40barryp.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001838.html">
   <LINK REL="Next"  HREF="001835.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Channel Flow</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Channel%20Flow&In-Reply-To=490F13A2.6040408%40barryp.org"
       TITLE="[rabbitmq-discuss] Channel Flow">0x6e6562 at gmail.com
       </A><BR>
    <I>Mon Nov  3 16:32:11 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001838.html">[rabbitmq-discuss] Channel Flow
</A></li>
        <LI>Next message: <A HREF="001835.html">[rabbitmq-discuss] Checking number of messages in Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1839">[ date ]</a>
              <a href="thread.html#1839">[ thread ]</a>
              <a href="subject.html#1839">[ subject ]</a>
              <a href="author.html#1839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Barry,

On Mon, Nov 3, 2008 at 3:07 PM, Barry Pederson &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">bp at barryp.org</A>&gt; wrote:
&gt;<i> Hmm, I've been pondering this for a day now, and don't think the client as
</I>&gt;<i> it is structured now could really deal with flow control.  I think
</I>&gt;<i> something's going to have to give - either pure single-threadedness, SSL
</I>&gt;<i> support using the stock Python libraries, or SSL support with Python
</I>&gt;<i> versions less than 2.6
</I>&gt;<i>
</I>&gt;<i> I think the easiest thing to do would be to have an optional mode that made
</I>&gt;<i> use of another thread.  That could also allow for some other things like
</I>&gt;<i> timeouts when receiving.
</I>
Sure, that is what the Java client does.

An alternative option that may avoid using another thread is to fail
fast, i.e. notify the app that message that is requesting to send
won't/can't be sent, e.g. by raising an exception or by using some
special return value that the app would have to test.

&gt;<i> In the meantime, anyone have thoughts as to what should happen on the client
</I>&gt;<i> when the broker calls for pause...should the client buffer messages locally?
</I>&gt;<i> or block and wait for a resume from the broker?  I suppose ideally there'd
</I>&gt;<i> be options for both, but if you had to choose..?
</I>
I would orientate my decision around the transfer of responsibility.
As Martin points out, if you do buffer things in the client, you
should make it clear to higher level code that you are doing so, so as
not to give the application the impression that the broker has
accepted responsibility for the message.

Another thing that I would consider is the role of back pressure in
this scenario. By issuing the channel.flow command, the broker is
blocking the client - maybe you would want to propagate this
resistence back to the calling app.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001838.html">[rabbitmq-discuss] Channel Flow
</A></li>
	<LI>Next message: <A HREF="001835.html">[rabbitmq-discuss] Checking number of messages in Queue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1839">[ date ]</a>
              <a href="thread.html#1839">[ thread ]</a>
              <a href="subject.html#1839">[ subject ]</a>
              <a href="author.html#1839">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
