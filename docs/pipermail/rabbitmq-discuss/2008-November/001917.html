<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exchanges, Routing, and AMQP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=269388e30811081215mb421a1bhb192dbfacd71fc82%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001914.html">
   <LINK REL="Next"  HREF="001919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exchanges, Routing, and AMQP</H1>
    <B>Peter Silva</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=269388e30811081215mb421a1bhb192dbfacd71fc82%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Exchanges, Routing, and AMQP">Peter.A.Silva at gmail.com
       </A><BR>
    <I>Sat Nov  8 23:24:01 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001914.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
        <LI>Next message: <A HREF="001919.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1917">[ date ]</a>
              <a href="thread.html#1917">[ thread ]</a>
              <a href="subject.html#1917">[ subject ]</a>
              <a href="author.html#1917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Nov 8, 2008 at 3:15 PM, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:

&gt;<i> Peter,
</I>&gt;<i>
</I>&gt;<i> On Sat, Nov 8, 2008 at 7:29 PM, Peter Silva &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Peter.A.Silva at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; That's strange... maybe I'm just getting confused by
</I>&gt;<i> &gt; a client code... Here is an example from the demo in py-amqplib...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  ch.basic_publish(msg, EXCHANGE_NAME, routing_key=topic)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; the 'routing_key' in this api, afaict, is one of three keywords: topic,
</I>&gt;<i> &gt; fanout, direct.   what is called exchange_type in the AMQP spec.
</I>&gt;<i>
</I>&gt;<i> Are you referring to amqp_clock.py?
</I>&gt;<i>
</I>&gt;<i> If so, I think that the topic is a the name of a string variable:
</I>&gt;<i>
</I>&gt;<i> TOPIC_PATTERN = '%Y.%m.%d.%w.%H.%M' # Python datetime.strftime() pattern
</I>&gt;<i> .....
</I>&gt;<i> topic = now.strftime(TOPIC_PATTERN)
</I>&gt;<i> ch.basic_publish(msg, EXCHANGE_NAME, routing_key=topic)
</I>&gt;<i>
</I>
&gt;<i> &gt; If the key is a string, and the exchange_type is opaque to the producers,
</I>&gt;<i> &gt; then that's cool.  So for my application.  An admin creates the exchange,
</I>&gt;<i> &gt; the producers post to it using AHL's or file names as routing keys,
</I>&gt;<i> &gt; oblivious to the routing method in use.
</I>&gt;<i> &gt; That's OK?
</I>&gt;<i>
</I>&gt;<i> Yes, that will work.
</I>&gt;<i>
</I>
OK, I was just confused then.  cool!



&gt;<i>
</I>&gt;<i> &gt; The next thing is that I need to be able to define routing to output
</I>&gt;<i> queues
</I>&gt;<i> &gt; myself, (how the routing key is interpreted.) before the clients apply
</I>&gt;<i> their
</I>&gt;<i> &gt; routing info, so I can say, no... my client talibanitravel.com has no
</I>&gt;<i> access
</I>&gt;<i> &gt; to the weather ob from Kandahar airport, even if they say they want it.
</I>&gt;<i> &gt; They are perhaps allowed the ob from Peshawar, Moscow and Montreal.   So
</I>&gt;<i> &gt; data posted on the same exchange may or may not be allowed to be seen by
</I>&gt;<i> &gt; some clients.   I do that today with routing tables, others would use
</I>&gt;<i> acl's
</I>&gt;<i> &gt; or capabilities.   per exchange permissions of some sort would work... do
</I>&gt;<i> &gt; they exist?
</I>&gt;<i>
</I>&gt;<i> No, there is no fine grained access restriction (as discussed in other
</I>&gt;<i> threads on this list).
</I>

OK... If you want to apply rules, then you have one
exchange for reception, an application will read, and then send subsets to
other exchanges where all the clients have the same access permissions.

Is that sounding right?




&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; I guess that is a function outside of AMQP (not a protocol thing, but
</I>&gt;<i> rather
</I>&gt;<i> &gt; a broker function?)
</I>&gt;<i>
</I>&gt;<i> Could be - again, a mechanism orthogonal to the protocol has been
</I>&gt;<i> discussed.
</I>&gt;<i>
</I>&gt;<i> &gt;  I get the impression permissions/ACL's
</I>&gt;<i> &gt; were something applied at the queue/exchange level.  Was there
</I>&gt;<i> &gt; something granular enough to apply to individual messages sent to an
</I>&gt;<i> &gt; exchange blocking posting to queues based on routing_key?
</I>&gt;<i>
</I>&gt;<i> AFAIK something as fine grained as this has not yet been investigated in
</I>&gt;<i> detail.
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081108/ddcc23ad/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081108/ddcc23ad/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001914.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
	<LI>Next message: <A HREF="001919.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1917">[ date ]</a>
              <a href="thread.html#1917">[ thread ]</a>
              <a href="subject.html#1917">[ subject ]</a>
              <a href="author.html#1917">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
