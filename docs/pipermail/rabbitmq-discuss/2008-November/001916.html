<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq erlang client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20erlang%20client&In-Reply-To=269388e30811071720s5d132cf6x78d759675b42e03%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001886.html">
   <LINK REL="Next"  HREF="001918.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq erlang client</H1>
    <B>Orion Henry</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq%20erlang%20client&In-Reply-To=269388e30811071720s5d132cf6x78d759675b42e03%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq erlang client">orion.henry at gmail.com
       </A><BR>
    <I>Sat Nov  8 23:17:52 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001886.html">[rabbitmq-discuss] rabbitmq erlang client
</A></li>
        <LI>Next message: <A HREF="001918.html">[rabbitmq-discuss] rabbitmq erlang client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1916">[ date ]</a>
              <a href="thread.html#1916">[ thread ]</a>
              <a href="subject.html#1916">[ subject ]</a>
              <a href="author.html#1916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ben,

Thanks for the update.  Glad you guys are making the erlang client a
first class interface.  Its not going to be easy to convince ops to
let us run the edge version of the server in production.  Is there
some way I can compile the client against the edge headers but keep
the official release in production, since I'm using the network/wire
protocol?

If not I'm going to stick to old version of the client until rabbitmq
1.5 and client 1.0 are released.  So far its been working great. =)

Orion

On Fri, Nov 7, 2008 at 8:20 PM, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:
&gt;<i> Orion | Henry,
</I>&gt;<i>
</I>&gt;<i> On Fri, Nov 7, 2008 at 7:09 AM, Orion Henry &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">orion.henry at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I decided to start over and wrote a shell script that did the whole
</I>&gt;&gt;<i> install and test....  here it is.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ----------------------------------------
</I>&gt;&gt;<i> #!/bin/sh
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> tar xzvf rabbitmq-server-1.4.0.tar.gz
</I>&gt;&gt;<i> cd rabbitmq-server-1.4.0 ; make ; cd ..
</I>&gt;&gt;<i> sudo mv rabbitmq-server-1.4.0 /opt/local/lib/erlang/lib/rabbitmq_server-1.4.0
</I>&gt;&gt;<i> LOG_BASE=/tmp SKIP_HEART=true SKIP_LOG_ARGS=true
</I>&gt;&gt;<i> MNESIA_DIR=/tmp/rabbitmq_rabbit_test_direct_mnesia
</I>&gt;&gt;<i> RABBIT_ARGS=&quot;-detached -pa ./ebin&quot; NODENAME=rabbit_test_direct
</I>&gt;&gt;<i> /opt/local/lib/erlang/lib/rabbitmq_server-1.4.0/scripts/rabbitmq-server
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> tar xzvf rabbitmq-erlang-client-3a9ce636e283.tar.gz
</I>&gt;&gt;<i> cd rabbitmq-erlang-client-3a9ce636e283; make; cd ..
</I>&gt;&gt;<i> sudo mv rabbitmq-erlang-client-3a9ce636e283
</I>&gt;&gt;<i> /opt/local/lib/erlang/lib/rabbitmq_client-3a9ce636e283
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> erl -noshell -eval 'network_client_test:test(),halt().'
</I>&gt;&gt;<i> ----------------------------------------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've attached its output to this email (its very long as a text file).
</I>&gt;&gt;<i>  It contains the 6 failed tests from network_client_test:test/0
</I>&gt;<i>
</I>&gt;<i> I've been able to reproduce your error: the problem is that the client
</I>&gt;<i> version you are using depends on a version of the broker later than
</I>&gt;<i> 1.4.0. To reproduce this, I updated the broker back to the 1.4.0
</I>&gt;<i> release, rebuilt the client (rev 3a9ce636e283) and got exactly the
</I>&gt;<i> same error as you were getting.
</I>&gt;<i>
</I>&gt;<i> So the solution is simple - upgrade to the latest version of the
</I>&gt;<i> server from the repo.
</I>&gt;<i>
</I>&gt;<i> The reason why this is because the client reuses modules from the
</I>&gt;<i> broker in order to create a mirror image of a server side channel.
</I>&gt;<i>
</I>&gt;<i> So the client is more intimately tied into the broker than the other
</I>&gt;<i> language clients are, which use the wire protocol and share no common
</I>&gt;<i> code base.
</I>&gt;<i>
</I>&gt;<i> Until recently, the Erlang client has had an experimental status, but
</I>&gt;<i> due to increased interest, we have decided to promote this to a
</I>&gt;<i> properly support client. But there a number of issues that need to be
</I>&gt;<i> addressed before this goes 1.0.
</I>&gt;<i>
</I>&gt;<i> In terms of ETA, this will only happen after the next release of the
</I>&gt;<i> server. Until then, you will just have to use the latest version from
</I>&gt;<i> the source tree.
</I>&gt;<i>
</I>&gt;<i> HTH,
</I>&gt;<i>
</I>&gt;<i> Ben
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001886.html">[rabbitmq-discuss] rabbitmq erlang client
</A></li>
	<LI>Next message: <A HREF="001918.html">[rabbitmq-discuss] rabbitmq erlang client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1916">[ date ]</a>
              <a href="thread.html#1916">[ thread ]</a>
              <a href="subject.html#1916">[ subject ]</a>
              <a href="author.html#1916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
