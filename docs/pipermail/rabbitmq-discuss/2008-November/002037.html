<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq-discuss%20Digest%2C%20Vol%2018%2C%20Issue%2034&In-Reply-To=57cfcbc70811171952td1532c3hbfefcb238b1f88e0%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002031.html">
   <LINK REL="Next"  HREF="002038.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20rabbitmq-discuss%20Digest%2C%20Vol%2018%2C%20Issue%2034&In-Reply-To=57cfcbc70811171952td1532c3hbfefcb238b1f88e0%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34">0x6e6562 at gmail.com
       </A><BR>
    <I>Tue Nov 18 12:12:47 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002031.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
        <LI>Next message: <A HREF="002038.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2037">[ date ]</a>
              <a href="thread.html#2037">[ thread ]</a>
              <a href="subject.html#2037">[ subject ]</a>
              <a href="author.html#2037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ilya,

On Tue, Nov 18, 2008 at 3:52 AM, Ilya Grigorik &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">ilya at aiderss.com</A>&gt; wrote:
&gt;<i> Interesting, this helped a bit. Got up to 2.7GB in persister, then killed
</I>&gt;<i> the Erlang node once again. No kernel logs, no nothing. Grrr!
</I>
This is probably my ignorance, but I'm getting slightly confused about
what exact cause and effect you are investigating.

So forgive me if these comments are irrelevant.

If you don't use producer flow control (the channel.flow command) to
throttle message sending, eventually you will run out of resources and
you will see the behaviour that you are reporting.

Marking messages as persistent is not going to help with the current
implementation.

When a message is marked as persistent, it means that there is an
additional replica of the message on disk. The purpose of the replica
is to be requeued as part of the queue recovery process, if the
message was not subsequently ack'ed by a consumer.

ATM Rabbit is not smart enough to piggy back off the journal to smooth
out memory consumption.

Also, it is questionable as to whether this would be the best way to
solve the infamous queue paging problem.

(Just trying to save you some time :-)

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002031.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
	<LI>Next message: <A HREF="002038.html">[rabbitmq-discuss] rabbitmq-discuss Digest, Vol 18, Issue 34
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2037">[ date ]</a>
              <a href="thread.html#2037">[ thread ]</a>
              <a href="subject.html#2037">[ subject ]</a>
              <a href="author.html#2037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
