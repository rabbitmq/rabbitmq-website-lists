<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exchanges, Routing, and AMQP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=269388e30811081041i17102151qb4ec7760c6b81b3f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001911.html">
   <LINK REL="Next"  HREF="001914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exchanges, Routing, and AMQP</H1>
    <B>Peter Silva</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20Exchanges%2C%20Routing%2C%20and%20AMQP&In-Reply-To=269388e30811081041i17102151qb4ec7760c6b81b3f%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] Exchanges, Routing, and AMQP">Peter.A.Silva at gmail.com
       </A><BR>
    <I>Sat Nov  8 19:29:20 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001911.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
        <LI>Next message: <A HREF="001914.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1913">[ date ]</a>
              <a href="thread.html#1913">[ thread ]</a>
              <a href="subject.html#1913">[ subject ]</a>
              <a href="author.html#1913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> BTW Peter: Routing keys are in fact strings in AMQP :-)
</I>
That's strange... maybe I'm just getting confused by
a client code... Here is an example from the demo in py-amqplib...

 ch.basic_publish(msg, EXCHANGE_NAME, routing_key=topic)

the 'routing_key' in this api, afaict, is one of three keywords: topic,
fanout, direct.   what is called exchange_type in the AMQP spec.

If the key is a string, and the exchange_type is opaque to the producers,
then that's cool.  So for my application.  An admin creates the exchange,
the producers post to it using AHL's or file names as routing keys,
oblivious to the routing method in use.
That's OK?

The next thing is that I need to be able to define routing to output queues
myself, (how the routing key is interpreted.) before the clients apply their
routing info, so I can say, no... my client talibanitravel.com has no access
to the weather ob from Kandahar airport, even if they say they want it.
They are perhaps allowed the ob from Peshawar, Moscow and Montreal.   So
data posted on the same exchange may or may not be allowed to be seen by
some clients.   I do that today with routing tables, others would use acl's
or capabilities.   per exchange permissions of some sort would work... do
they exist?

I guess that is a function outside of AMQP (not a protocol thing, but rather
a broker function?)  I get the impression permissions/ACL's
were something applied at the queue/exchange level.  Was there
something granular enough to apply to individual messages sent to an
exchange blocking posting to queues based on routing_key?





On Sat, Nov 8, 2008 at 1:41 PM, Ben Hood &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">0x6e6562 at gmail.com</A>&gt; wrote:

&gt;<i> Kirk,
</I>&gt;<i>
</I>&gt;<i> On Sat, Oct 25, 2008 at 12:11 PM, Kirk Wylie &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">kirk at kirkwylie.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; Would your proposed model allow for routing decisions that are based on
</I>&gt;<i> the
</I>&gt;<i> &gt;&gt; set of all bindings (or some subset thereof), rather than each
</I>&gt;<i> individual
</I>&gt;<i> &gt;&gt; binding? Ben's example - an exchange that routes to the shorted queue -
</I>&gt;<i> &gt;&gt; requires the former.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It would depend on the server-side implementation as to whether that
</I>&gt;<i> &gt; was possible, since custom routing rules are outside the scope of the
</I>&gt;<i> &gt; protocol itself.
</I>&gt;<i>
</I>&gt;<i> Your riposte has been commented on:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://hopper.squarespace.com/blog/2008/10/7/consumer-driven-messaging.html#comments">http://hopper.squarespace.com/blog/2008/10/7/consumer-driven-messaging.html#comments</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081108/0af160af/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20081108/0af160af/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001911.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
	<LI>Next message: <A HREF="001914.html">[rabbitmq-discuss] Exchanges, Routing, and AMQP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1913">[ date ]</a>
              <a href="thread.html#1913">[ thread ]</a>
              <a href="subject.html#1913">[ subject ]</a>
              <a href="author.html#1913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
