<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ 1.5.0 released
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%201.5.0%20released&In-Reply-To=5f884b720812181906r56d056a6n31511e06e4323802%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002300.html">
   <LINK REL="Next"  HREF="002302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ 1.5.0 released</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20RabbitMQ%201.5.0%20released&In-Reply-To=5f884b720812181906r56d056a6n31511e06e4323802%40mail.gmail.com"
       TITLE="[rabbitmq-discuss] RabbitMQ 1.5.0 released">0x6e6562 at gmail.com
       </A><BR>
    <I>Fri Dec 19 06:11:25 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002300.html">[rabbitmq-discuss] RabbitMQ 1.5.0 released
</A></li>
        <LI>Next message: <A HREF="002302.html">[rabbitmq-discuss] RabbitMQ 1.5.0 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2301">[ date ]</a>
              <a href="thread.html#2301">[ thread ]</a>
              <a href="subject.html#2301">[ subject ]</a>
              <a href="author.html#2301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Eran,

On Fri, Dec 19, 2008 at 3:06 AM, Eran Sandler &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">eran.sandler at gmail.com</A>&gt; wrote:
&gt;<i> 1) Have you managed to test the memory based flow control feature on Windows
</I>&gt;<i> prior to the release?
</I>
I'm not aware of any Windows specific testing of this feature -
Matthias may have done though - but if you'd like to test this, we'd
be very interested in your mileage.

&gt;<i> (it wasn't mention in the documentation like the
</I>&gt;<i> MacOSX issue)
</I>
Personally I don't think there is an OS X issue per se (yet). The
reason why there is an official cautiousness about how this is handled
on OS X (and any other non-Linux OS) is because of the problems that
we ran into when running this on Linux. When we originally tested this
feature, everything was fine. However, we tested this on a server that
coincidentally was not doing much disk IO at the time. Since Linux
uses free memory to cache disk IO, the amount of free memory reported
by the standard Erlang tools was misleading and the alarm was being
sounded too easily. So we wrote a Linux specific memory supervisor to
get a more accurate reading from /proc/meminfo. We also turned this
feature off by default, because we felt that it would confuse people
in a dev scenario but still want to allow this to be turned on in a
prod scenario (which is where you need it most).

The length that we had to go to get this to work properly on Linux
indicates that there may be some other memory specific idiosyncrasies
on other OSs, which we have not analyzed in full detail.

Matt Stancliff started a discussion thread recently about his
experiences on OS X and the specifics of memory reporting on that
platform, so essentially we are waiting to hear back from similar
experiences from users on different platforms.

&gt;<i> 2) What would be the right way of upgrading rabbitmq on a running server
</I>&gt;<i> without shutting it down? (I know erlang supports this feature but I failed
</I>&gt;<i> to find something about it in the documentation).
</I>
This is supported in Erlang and I use it a lot myself when hacking on
Rabbit but we are not yet making use of it from a release perspective.
One of the issues that you would run into (which is not necessarily
Erlang specific) is dealing with schema upgrades in mnesia, i.e. you
would have to migrate the database (which changed considerably between
1.4 and 1.5). I should imagine that as Rabbit matures more, we could
make more use of this feature.

Having said that, I know that Edwin is using OTP release handling with
Rabbit, whereas the official Rabbit release management is more OS
package manager centric, so he may be able to comment on this.

&gt;<i> 3) Can you elaborate more on the memory based flow throttling and what is
</I>&gt;<i> the behavior of clients when they get the channel.flow command?
</I>
Have you read this article?

<A HREF="http://hopper.squarespace.com/blog/2008/11/9/flow-control-in-rabbitmq.html">http://hopper.squarespace.com/blog/2008/11/9/flow-control-in-rabbitmq.html</A>

&quot;From a protocol perspective, when the broker decides that it is
running out of resources to buffer an imbalance, it sends a
channel.flow command out to every channel. This command contains a
flag to indicate to a client whether content bearing AMQP methods can
be sent or not. So if a client receives this command with the flag set
to false, then the client should suspend sending any further content
bearing methods (e.g. basic.publish), until such a time that the
broker notifies the client that it is safe to resume. The notification
of resumption is the opposite of the pause - the broker sends a
channel.flow command with the flag set to true.&quot;

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002300.html">[rabbitmq-discuss] RabbitMQ 1.5.0 released
</A></li>
	<LI>Next message: <A HREF="002302.html">[rabbitmq-discuss] RabbitMQ 1.5.0 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2301">[ date ]</a>
              <a href="thread.html#2301">[ thread ]</a>
              <a href="subject.html#2301">[ subject ]</a>
              <a href="author.html#2301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
