<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [Q] best way to add a sequencer to the broker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BQ%5D%20best%20way%20to%20add%20a%20sequencer%20to%20the%20broker&In-Reply-To=E17D8BC4-C99B-4205-ABC2-A3AE56EA5772%40mac.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002337.html">
   <LINK REL="Next"  HREF="002351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [Q] best way to add a sequencer to the broker</H1>
    <B>Ben Hood</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=%5Brabbitmq-discuss%5D%20%5BQ%5D%20best%20way%20to%20add%20a%20sequencer%20to%20the%20broker&In-Reply-To=E17D8BC4-C99B-4205-ABC2-A3AE56EA5772%40mac.com"
       TITLE="[rabbitmq-discuss] [Q] best way to add a sequencer to the broker">0x6e6562 at gmail.com
       </A><BR>
    <I>Tue Dec 30 00:36:59 GMT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002337.html">[rabbitmq-discuss] [erlang-questions] cheap low-power boards
</A></li>
        <LI>Next message: <A HREF="002351.html">[rabbitmq-discuss] [Q] best way to add a sequencer to the broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2348">[ date ]</a>
              <a href="thread.html#2348">[ thread ]</a>
              <a href="subject.html#2348">[ subject ]</a>
              <a href="author.html#2348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chuck,

On Tue, Dec 30, 2008 at 12:13 AM, Chuck Remes &lt;<A HREF="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">cremes.devlist at mac.com</A>&gt; wrote:
&gt;&gt;<i> As indicated above, setting this for each message would not be too
</I>&gt;&gt;<i> difficult to do. Given a mechanism to maintain a global counter, it
</I>&gt;&gt;<i> would be less effort to do the custom exchange that any external relay
</I>&gt;&gt;<i> mechanism.
</I>&gt;<i>
</I>&gt;<i> This has helped immensely. Can you provide a pointer to an example custom
</I>&gt;<i> exchange?
</I>
There isn't one really, but if you look in the deliver/5 function in
the rabbit_router module, all you have to do is to fold the global
counter into each message that gets applied to the list of queue
endpoints. This would be one way to skin the cat.

You still have the problem of how to maintain the global counter though.

Having said this, are you interested in strict ordering as if it were
be monitored by some all-knowing being or is it just a case of needing
to be able to replay the same order?

If your application could tolerate some perceived re-ordering, but
still replays in the same order, you could request batches of ordering
keys from your globally visible state. The effect of this would allow
a degree of parallelization at the cost of some stuff *appearing* to
have arrived out of the *true* global order. But you could replay in
the same order and the things were stamped.

Having said that, you might find using plain jane timestamps easier,
if you can relax this true global ordering constraint a bit.

HTH,

Ben


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002337.html">[rabbitmq-discuss] [erlang-questions] cheap low-power boards
</A></li>
	<LI>Next message: <A HREF="002351.html">[rabbitmq-discuss] [Q] best way to add a sequencer to the broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2348">[ date ]</a>
              <a href="thread.html#2348">[ thread ]</a>
              <a href="subject.html#2348">[ subject ]</a>
              <a href="author.html#2348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
