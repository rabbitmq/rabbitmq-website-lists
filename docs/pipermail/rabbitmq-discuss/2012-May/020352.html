<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Windows service recovery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Windows%20service%20recovery&In-Reply-To=%3CC3A760638FE7B343972DD905011226E3058AF14B21%40GZSMSCCR03.sms1.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020325.html">
   <LINK REL="Next"  HREF="020353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Windows service recovery</H1>
    <B>Lior Barnea</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Windows%20service%20recovery&In-Reply-To=%3CC3A760638FE7B343972DD905011226E3058AF14B21%40GZSMSCCR03.sms1.local%3E"
       TITLE="[rabbitmq-discuss] Windows service recovery">Barnea at 3i-mind.com
       </A><BR>
    <I>Mon May 28 08:09:23 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020325.html">[rabbitmq-discuss] Windows service recovery
</A></li>
        <LI>Next message: <A HREF="020353.html">[rabbitmq-discuss] Windows service recovery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20352">[ date ]</a>
              <a href="thread.html#20352">[ thread ]</a>
              <a href="subject.html#20352">[ subject ]</a>
              <a href="author.html#20352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Emile,

This is part of the recovery testing we are conducting, this is not a real issue that we encountered but one produced on purpose...

Still, I would have expected that erlsrv could detected that erl.exe is already up when windows restarts it and re-attach to it instead of failing...

Best regards,
Lior.

-----Original Message-----
From: Emile Joubert [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>] 
Sent: Friday, May 25, 2012 17:59
To: Lior Barnea
Cc: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
Subject: Re: [rabbitmq-discuss] Windows service recovery

Hi Lior,

On 23/05/12 15:37, Lior Barnea wrote:
&gt;<i> Killing erlsvr.exe does not stop erl.exe (meaning rabbitMQ still
</I>&gt;<i> running) but does alert windows that then tries to restart erlsvr.exe
</I>&gt;<i> 
</I>&gt;<i> When erlsvr.exe is started again, it tries to spawn erl.exe again and 
</I>&gt;<i> fails because it is already running, failing erlsvr.exe completely, 
</I>&gt;<i> recovery failed.
</I>
I can confirm that your description is accurate. erlsrv acts as an interface between the Windows service management and the Erlang process.
It can communicate failures of the broker to Windows but it does not cope if erlsrv itself fails. The design is presumably based on the estimate that the broker is far more likely to fail.

Are you exploring a hypothetical concern or is this a real issue that is preventing you from deploying and using the broker?


-Emile




</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020325.html">[rabbitmq-discuss] Windows service recovery
</A></li>
	<LI>Next message: <A HREF="020353.html">[rabbitmq-discuss] Windows service recovery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20352">[ date ]</a>
              <a href="thread.html#20352">[ thread ]</a>
              <a href="subject.html#20352">[ subject ]</a>
              <a href="author.html#20352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
