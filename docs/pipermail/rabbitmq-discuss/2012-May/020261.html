<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustered server doesn't permit local	connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20server%20doesn%27t%20permit%20local%0A%09connections&In-Reply-To=%3C5ad8bff6-2f85-4bf1-86d1-385b8d63a995%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020260.html">
   <LINK REL="Next"  HREF="020277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustered server doesn't permit local	connections</H1>
    <B>Eric Siroker</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20server%20doesn%27t%20permit%20local%0A%09connections&In-Reply-To=%3C5ad8bff6-2f85-4bf1-86d1-385b8d63a995%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Clustered server doesn't permit local	connections">esiroker at gmail.com
       </A><BR>
    <I>Wed May 23 09:09:06 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020260.html">[rabbitmq-discuss] Clustered server doesn't permit local connections
</A></li>
        <LI>Next message: <A HREF="020277.html">[rabbitmq-discuss] Clustered server doesn't permit	local	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20261">[ date ]</a>
              <a href="thread.html#20261">[ thread ]</a>
              <a href="subject.html#20261">[ subject ]</a>
              <a href="author.html#20261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've encountered the same issue.  I believe it's a regression in RabbitMQ 
2.8.2.  Neither 2.7.1 nor 2.8.1 exhibit this issue for me.

I'm including two test cases, one using amqplib and one using Pika.

Running a two node cluster with RabbitMQ 2.8.2, these test cases will 
succeed on one node, but fail on the other.

If you restart RabbitMQ on one of the nodes, it'll sometimes switch which 
node makes the test cases succeed.

Eric

====== amqplib test case
from amqplib import client_0_8 as amqp

connection = amqp.Connection(host='', username='', password='')

# Raises socket.error: [Errno 104] Connection reset by peer
connection.close()

====== Pika test case
import pika

credentials = pika.PlainCredentials(username='', password='')
connection_parameters = pika.ConnectionParameters(host='', 
credentials=credentials)
connection = pika.BlockingConnection(connection_parameters)
channel = connection.channel()

# Raises pika.exceptions.ChannelClosed
channel.exchange_declare(exchange='exchange')
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/408236df/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/408236df/attachment.htm</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020260.html">[rabbitmq-discuss] Clustered server doesn't permit local connections
</A></li>
	<LI>Next message: <A HREF="020277.html">[rabbitmq-discuss] Clustered server doesn't permit	local	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20261">[ date ]</a>
              <a href="thread.html#20261">[ thread ]</a>
              <a href="subject.html#20261">[ subject ]</a>
              <a href="author.html#20261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
