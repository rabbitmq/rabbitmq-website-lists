<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Complete cluster crash (2.7.1)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Complete%20cluster%20crash%20%282.7.1%29&In-Reply-To=%3CD922474AF853FE49882FC6ADB6FE7B4810F0E81F%40z-de-xmb02.zanox.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020206.html">
   <LINK REL="Next"  HREF="020248.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Complete cluster crash (2.7.1)</H1>
    <B>Christian Bick</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Complete%20cluster%20crash%20%282.7.1%29&In-Reply-To=%3CD922474AF853FE49882FC6ADB6FE7B4810F0E81F%40z-de-xmb02.zanox.com%3E"
       TITLE="[rabbitmq-discuss] Complete cluster crash (2.7.1)">Christian.Bick at zanox.com
       </A><BR>
    <I>Mon May 21 14:01:11 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020206.html">[rabbitmq-discuss] unable to set .erlang.cookie file?
</A></li>
        <LI>Next message: <A HREF="020248.html">[rabbitmq-discuss] Complete cluster crash (2.7.1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20207">[ date ]</a>
              <a href="thread.html#20207">[ thread ]</a>
              <a href="subject.html#20207">[ subject ]</a>
              <a href="author.html#20207">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

we had a complete crash of our 3-Node 2.7.1 cluster some days ago. What I saw on the web, this issue might be related to <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-April/019765.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-April/019765.html</A> . As such it may have been fixed in 2.8.x which we are going to migrate to. Nevertheless, I would like to ask for clarification on that if possible.

Detailed description:

OS: Linux
Erlang Version: R14A
Rabbit Version: 2.7.1
Cluster Setup: 3 Nodes, all disc mode
Queues: HA mode &#8220;all&#8221; and durable

The cluster used to be stable for some months with relatively low usage.

Some days before the crash we were doing some OS related maintenance on the server. So we shut down, updated and reset each node one by one before rejoining it to the cluster. After that, some queues were not in synch any more with all other nodes (some synched with one, some synched with both other nodes). We regarded this as none-critical state and ignored it with respect to our already planned migration to 2.8.2.

You can find the relevant logs and the crash dump of Node-1 in the attachments.

Thank you already in advance for your help.

Greetings,
Christian Bick
-------------------------------------------------------------------------------
xing: <A HREF="https://www.xing.com/profile/Christian_Bick2">https://www.xing.com/profile/Christian_Bick2</A>
-------------------------------------------------------------------------------
ZANOX.de AG | Stralauer Allee 2 | 10245 Berlin
www.zanox.com&lt;<A HREF="http://www.zanox.com/">http://www.zanox.com/</A>&gt; | blog.zanox.com

[disclaimer logo: ZANOX.de AG]

STRAIGHT TO PERFORMANCE
--------------------------------------------------------------------------------

ZANOX.de AG | Headquarters: Berlin AG Charlottenburg | HRB 75459 | VAT identification number: DE 209981705
Executive Board: Philipp Justus (CEO) | Daniel Keller (CTO) | Christian Kleinsorge (CSO) | Joachim Piroth (CFO)
Chairman of the Supervisory Board: Ralph B&#252;chi

This e-mail and any attachments may contain confidential and/or privileged information.
If you are not the intended recipient (or have received this e-mail in error) please notify the sender immediately and delete this e-mail from your system.
Any other use, copying, disclosure or distribution is strictly forbidden.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: node1.log
Type: application/octet-stream
Size: 109252 bytes
Desc: node1.log
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: node2.log
Type: application/octet-stream
Size: 15437 bytes
Desc: node2.log
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment-0001.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment-0001.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: node3.log
Type: application/octet-stream
Size: 11057 bytes
Desc: node3.log
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment-0002.obj">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment-0002.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: erl_crash.dump.gz
Type: application/x-gzip
Size: 173780 bytes
Desc: erl_crash.dump.gz
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120521/5d81eba8/attachment.bin</A>&gt;
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020206.html">[rabbitmq-discuss] unable to set .erlang.cookie file?
</A></li>
	<LI>Next message: <A HREF="020248.html">[rabbitmq-discuss] Complete cluster crash (2.7.1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20207">[ date ]</a>
              <a href="thread.html#20207">[ thread ]</a>
              <a href="subject.html#20207">[ subject ]</a>
              <a href="author.html#20207">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
