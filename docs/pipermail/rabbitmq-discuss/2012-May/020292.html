<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustered server doesn't permit local	connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20server%20doesn%27t%20permit%20local%0A%09connections&In-Reply-To=%3C47308955-20ad-4ec0-88b4-038d6638cc93%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020277.html">
   <LINK REL="Next"  HREF="020275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustered server doesn't permit local	connections</H1>
    <B>Glade</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20server%20doesn%27t%20permit%20local%0A%09connections&In-Reply-To=%3C47308955-20ad-4ec0-88b4-038d6638cc93%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Clustered server doesn't permit local	connections">gladed at gmail.com
       </A><BR>
    <I>Wed May 23 18:41:49 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020277.html">[rabbitmq-discuss] Clustered server doesn't permit	local	connections
</A></li>
        <LI>Next message: <A HREF="020275.html">[rabbitmq-discuss] Clustered server doesn't permit local	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20292">[ date ]</a>
              <a href="thread.html#20292">[ thread ]</a>
              <a href="subject.html#20292">[ subject ]</a>
              <a href="author.html#20292">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've heard this is a bug in 2.8.2. It's caused by an alarm related to disk 
space or RAM space going off at startup. Unfortunately the node never 
recovers from this condition. The workaround is to ensure that sufficient 
disk/RAM is available when the node powers up.

-Glade

On Wednesday, May 23, 2012 1:09:06 AM UTC-7, Eric Siroker wrote:
&gt;<i>
</I>&gt;<i> I've encountered the same issue.  I believe it's a regression in RabbitMQ 
</I>&gt;<i> 2.8.2.  Neither 2.7.1 nor 2.8.1 exhibit this issue for me.
</I>&gt;<i>
</I>&gt;<i> I'm including two test cases, one using amqplib and one using Pika.
</I>&gt;<i>
</I>&gt;<i> Running a two node cluster with RabbitMQ 2.8.2, these test cases will 
</I>&gt;<i> succeed on one node, but fail on the other.
</I>&gt;<i>
</I>&gt;<i> If you restart RabbitMQ on one of the nodes, it'll sometimes switch which 
</I>&gt;<i> node makes the test cases succeed.
</I>&gt;<i>
</I>&gt;<i> Eric
</I>&gt;<i>
</I>&gt;<i> ====== amqplib test case
</I>&gt;<i> from amqplib import client_0_8 as amqp
</I>&gt;<i>
</I>&gt;<i> connection = amqp.Connection(host='', username='', password='')
</I>&gt;<i>
</I>&gt;<i> # Raises socket.error: [Errno 104] Connection reset by peer
</I>&gt;<i> connection.close()
</I>&gt;<i>
</I>&gt;<i> ====== Pika test case
</I>&gt;<i> import pika
</I>&gt;<i>
</I>&gt;<i> credentials = pika.PlainCredentials(username='', password='')
</I>&gt;<i> connection_parameters = pika.ConnectionParameters(host='', 
</I>&gt;<i> credentials=credentials)
</I>&gt;<i> connection = pika.BlockingConnection(connection_parameters)
</I>&gt;<i> channel = connection.channel()
</I>&gt;<i>
</I>&gt;<i> # Raises pika.exceptions.ChannelClosed
</I>&gt;<i> channel.exchange_declare(exchange='exchange')
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/edcc5f04/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/edcc5f04/attachment.htm</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020277.html">[rabbitmq-discuss] Clustered server doesn't permit	local	connections
</A></li>
	<LI>Next message: <A HREF="020275.html">[rabbitmq-discuss] Clustered server doesn't permit local	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20292">[ date ]</a>
              <a href="thread.html#20292">[ thread ]</a>
              <a href="subject.html#20292">[ subject ]</a>
              <a href="author.html#20292">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
