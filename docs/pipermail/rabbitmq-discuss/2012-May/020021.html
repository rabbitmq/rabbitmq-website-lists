<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbmitMQ consuming CPU and Memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbmitMQ%20consuming%20CPU%20and%20Memory&In-Reply-To=%3C4FB15399.9090504%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019975.html">
   <LINK REL="Next"  HREF="020047.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbmitMQ consuming CPU and Memory</H1>
    <B>Paul Gross</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbmitMQ%20consuming%20CPU%20and%20Memory&In-Reply-To=%3C4FB15399.9090504%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbmitMQ consuming CPU and Memory">pgross at gmail.com
       </A><BR>
    <I>Mon May 14 19:48:57 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019975.html">[rabbitmq-discuss] RabbmitMQ consuming CPU and Memory
</A></li>
        <LI>Next message: <A HREF="020047.html">[rabbitmq-discuss] RabbmitMQ consuming CPU and Memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20021">[ date ]</a>
              <a href="thread.html#20021">[ thread ]</a>
              <a href="subject.html#20021">[ subject ]</a>
              <a href="author.html#20021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> There have been numerous stability improvements since 2.7.1, so I 
</I>&gt;<i> suggest you upgrade to the latest rabbit version (2.8.2). Also, R13B03 
</I>&gt;<i> is quite ancient, so you should really upgrade that too - R15B01 is 
</I>&gt;<i> the latest.
</I>&gt;<i>
</I>&gt;<i> If you still see the same behaviour then try to set up some alarms 
</I>&gt;<i> that catch the problem in the early stages and grab the output of 
</I>&gt;<i> 'rabbitmqctl report'.
</I>&gt;<i>
</I>We are working on upgrading our rabbitmq and erlang. In the mean time, 
here is the output of 'rabbitmqctl report' on a MacPro right after 
rabbitmq went crazy before we had to kill it. Is there something unusual 
in these numbers?

[{pid,70356},
  {running_applications,[{rabbit,&quot;RabbitMQ&quot;,&quot;2.7.1&quot;},
                         {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.6&quot;},
                         {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.2.8&quot;},
                         {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2&quot;},
                         {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18&quot;},
                         {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15&quot;}]},
  {os,{unix,darwin}},
  {erlang_version,&quot;Erlang R15B (erts-5.9) [source] [64-bit] [smp:16:16] [async-threads:30] [hipe] [kernel-poll:true]\n&quot;},
  {memory,[{total,90264888},
           {processes,65595873},
           {processes_used,65591050},
           {system,24669015},
           {atom,504409},
           {atom_used,475985},
           {binary,6765008},
           {code,11916223},
           {ets,1291168}]},
  {vm_memory_high_watermark,0.3999999999026046},
  {vm_memory_limit,3285576908}]

Cluster status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yoshi</A> ...
[{nodes,[{disc,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yoshi</A>]}]},{running_nodes,[<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yoshi</A>]}]

Application environment of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yoshi</A> ...
[{auth_backends,[rabbit_auth_backend_internal]},
  {auth_mechanisms,['PLAIN','AMQPLAIN']},
  {backing_queue_module,rabbit_variable_queue},
  {cluster_nodes,[]},
  {collect_statistics,none},
  {collect_statistics_interval,5000},
  {default_permissions,[&lt;&lt;&quot;.*&quot;&gt;&gt;,&lt;&lt;&quot;.*&quot;&gt;&gt;,&lt;&lt;&quot;.*&quot;&gt;&gt;]},
  {default_user,&lt;&lt;&quot;guest&quot;&gt;&gt;},
  {default_user_tags,[administrator]},
  {default_vhost,&lt;&lt;&quot;/&quot;&gt;&gt;},
  {delegate_count,16},
  {error_logger,{file,&quot;/usr/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yoshi.log</A>&quot;}},
  {frame_max,131072},
  {hipe_compile,false},
  {included_applications,[]},
  {msg_store_file_size_limit,16777216},
  {msg_store_index_module,rabbit_msg_store_ets_index},
  {queue_index_max_journal_entries,262144},
  {sasl_error_logger,{file,&quot;/usr/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at yoshi-sasl.log</A>&quot;}},
  {server_properties,[]},
  {ssl_listeners,[]},
  {ssl_options,[]},
  {tcp_listen_options,[binary,
                       {packet,raw},
                       {reuseaddr,true},
                       {backlog,128},
                       {nodelay,true},
                       {exit_on_close,false}]},
  {tcp_listeners,[5672]},
  {trace_vhosts,[]},
  {vm_memory_high_watermark,0.4}]

Connections:

Channels:

Queues on /:

Exchanges on /:
name	type	durable	auto_delete	internal	arguments
amq.direct	direct	true	false	false	[]
amq.topic	topic	true	false	false	[]
amq.rabbitmq.trace	topic	true	false	false	[]
amq.rabbitmq.log	topic	true	false	false	[]
amq.fanout	fanout	true	false	false	[]
amq.headers	headers	true	false	false	[]
	direct	true	false	false	[]
amq.match	headers	true	false	false	[]

Bindings on /:

Consumers on /:

Permissions on /:
user	configure	write	read
guest	.*	.*	.*

End of server status report
...done.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120514/90e5ba9e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120514/90e5ba9e/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019975.html">[rabbitmq-discuss] RabbmitMQ consuming CPU and Memory
</A></li>
	<LI>Next message: <A HREF="020047.html">[rabbitmq-discuss] RabbmitMQ consuming CPU and Memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20021">[ date ]</a>
              <a href="thread.html#20021">[ thread ]</a>
              <a href="subject.html#20021">[ subject ]</a>
              <a href="author.html#20021">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
