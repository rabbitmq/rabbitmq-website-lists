<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] can we implement high availability without using DRBD?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20can%20we%20implement%20high%20availability%20without%0A%20using%20DRBD%3F&In-Reply-To=%3CCAHZsVQZDmu7jPoFeGP_GwK_aQvY8j-%3DLNoPzWS7Vjs-dTqMMWQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020112.html">
   <LINK REL="Next"  HREF="020090.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] can we implement high availability without using DRBD?</H1>
    <B>Brendan Hay</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20can%20we%20implement%20high%20availability%20without%0A%20using%20DRBD%3F&In-Reply-To=%3CCAHZsVQZDmu7jPoFeGP_GwK_aQvY8j-%3DLNoPzWS7Vjs-dTqMMWQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] can we implement high availability without using DRBD?">brendan at soundcloud.com
       </A><BR>
    <I>Thu May 17 13:24:53 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020112.html">[rabbitmq-discuss] can we implement high availability without using DRBD?
</A></li>
        <LI>Next message: <A HREF="020090.html">[rabbitmq-discuss] rabbitMQ-2.8.2 : problem with credentials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20113">[ date ]</a>
              <a href="thread.html#20113">[ thread ]</a>
              <a href="subject.html#20113">[ subject ]</a>
              <a href="author.html#20113">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The clustering + mirrored queue approach you've already got is what is
required to make RabbitMQ HA, you don't (additionally) need the
Heartbeat/DRBD shenanigans, get rid of that as it just complicates things.

Since you also mention making this transparent to the clients (which is
a separate issue), you will need to either embed the failover logic in the
client code (making clients aware of every node in the cluster), or use a
VIP, Proxy or something similar to present a single address/endpoint to the
clients.

Many people have success using a TCP load-balancing mechanism like LVS or
HAProxy in front of RabbitMQ.

This way if one of the nodes in your cluster goes down, the clients TCP
connection to the dead node is reset and when they reconnect to the Proxy
they will be directed to the healthy node, upon which the mirrored queue
would be master.


On Thu, May 17, 2012 at 2:08 PM, sameekmishra &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sameek at arosys.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> I have implement the following points :
</I>&gt;<i>
</I>&gt;<i> 1.clustering with two node
</I>&gt;<i> 2.mirror queue
</I>&gt;<i> 3. installation and configuration of heartbeat on both nodes
</I>&gt;<i> 4. installation of pacemaker.
</I>&gt;<i>
</I>&gt;<i> I need to implement: if any node is failed to switch to other node without
</I>&gt;<i> know the client.
</I>&gt;<i>
</I>&gt;<i> as you say i have read it document-<A HREF="http://www.rabbitmq.com/pacemaker.html">http://www.rabbitmq.com/pacemaker.html</A>
</I>&gt;<i> but i can't able to find out without using DRBD.
</I>&gt;<i> please help me how i configure it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Brendan Hay-2 wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The document that you must have read which refers to DRBD is:
</I>&gt;<i> &gt; <A HREF="http://www.rabbitmq.com/pacemaker.html">http://www.rabbitmq.com/pacemaker.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Please read about M*irrored Queue Behaviour* via the link Simon mentioned
</I>&gt;<i> &gt; here: <A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This will give you information about creating a highly available
</I>&gt;<i> &gt; active/active setup *without* using something like DRBD.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Brendan
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Thu, May 17, 2012 at 12:56 PM, sameekmishra &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">sameek at arosys.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I have already read this document.i want to know that DRBD required
</I>&gt;<i> &gt;&gt; partition
</I>&gt;<i> &gt;&gt; or it uses any free space in hard disk to stored file.if we can do then
</I>&gt;<i> &gt;&gt; please explain it.otherwise tell me the approach to followed to achieve
</I>&gt;<i> &gt;&gt; high
</I>&gt;<i> &gt;&gt; availability without using DRBD.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Simon MacMullen-2 wrote:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; On 17/05/12 05:27, sameekmishra wrote:
</I>&gt;<i> &gt;&gt; &gt;&gt; can we manage the high availability without using DRBD,because have
</I>&gt;<i> &gt;&gt; not
</I>&gt;<i> &gt;&gt; &gt;&gt; created any shared partition for DRBD device.please help how can i
</I>&gt;<i> &gt;&gt; &gt;&gt; implment
</I>&gt;<i> &gt;&gt; &gt;&gt; high  availability.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; See <A HREF="http://www.rabbitmq.com/ha.html">http://www.rabbitmq.com/ha.html</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Cheers, Simon
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; --
</I>&gt;<i> &gt;&gt; &gt; Simon MacMullen
</I>&gt;<i> &gt;&gt; &gt; RabbitMQ, VMware
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; View this message in context:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> <A HREF="http://old.nabble.com/can-we-implement-high-availability-without-using-DRBD--tp33862277p33863431.html">http://old.nabble.com/can-we-implement-high-availability-without-using-DRBD--tp33862277p33863431.html</A>
</I>&gt;<i> &gt;&gt; Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://old.nabble.com/can-we-implement-high-availability-without-using-DRBD--tp33862277p33863776.html">http://old.nabble.com/can-we-implement-high-availability-without-using-DRBD--tp33862277p33863776.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120517/ce7801a9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120517/ce7801a9/attachment.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020112.html">[rabbitmq-discuss] can we implement high availability without using DRBD?
</A></li>
	<LI>Next message: <A HREF="020090.html">[rabbitmq-discuss] rabbitMQ-2.8.2 : problem with credentials
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20113">[ date ]</a>
              <a href="thread.html#20113">[ thread ]</a>
              <a href="subject.html#20113">[ subject ]</a>
              <a href="author.html#20113">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
