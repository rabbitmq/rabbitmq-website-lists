<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clustered server doesn't permit local	connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20server%20doesn%27t%20permit%20local%0A%09connections&In-Reply-To=%3CCAODk%2B%2Bep%3D_6RRHEQsEE29UsvT5pj0yPKkb1gxgY%3DMLJ1MDjAMg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020276.html">
   <LINK REL="Next"  HREF="020285.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clustered server doesn't permit local	connections</H1>
    <B>Glade Diviney</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clustered%20server%20doesn%27t%20permit%20local%0A%09connections&In-Reply-To=%3CCAODk%2B%2Bep%3D_6RRHEQsEE29UsvT5pj0yPKkb1gxgY%3DMLJ1MDjAMg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Clustered server doesn't permit local	connections">gladed at gmail.com
       </A><BR>
    <I>Wed May 23 16:24:24 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020276.html">[rabbitmq-discuss] Clustered server doesn't permit	local	connections
</A></li>
        <LI>Next message: <A HREF="020285.html">[rabbitmq-discuss] Clustered server doesn't permit local	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20284">[ date ]</a>
              <a href="thread.html#20284">[ thread ]</a>
              <a href="subject.html#20284">[ subject ]</a>
              <a href="author.html#20284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Simon,

Your instinct may be right on alarms. I did service rabbitmq stop, cleared
the logs, the service rabbitmq start and saw this in rabbit.log:

=INFO REPORT==== 23-May-2012::15:20:15 ===
Limiting to approx 924 file handles (829 sockets)

=INFO REPORT==== 23-May-2012::15:20:15 ===
Memory limit set to 1503MB of 3758MB total.

=INFO REPORT==== 23-May-2012::15:20:15 ===
Disk free limit set to 3758MB

=INFO REPORT==== 23-May-2012::15:20:15 ===
Disk free space limit now exceeded. Free bytes:3678556160 Limit:3941388288

=INFO REPORT==== 23-May-2012::15:20:15 ===
    alarm_handler: {set,{{resource_limit,disk,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-70-82-246</A>'},[]}}

=INFO REPORT==== 23-May-2012::15:20:15 ===
msg_store_transient: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-May-2012::15:20:15 ===
msg_store_persistent: using rabbit_msg_store_ets_index to provide index

=INFO REPORT==== 23-May-2012::15:20:15 ===
started TCP Listener on [::]:5672

=INFO REPORT==== 23-May-2012::15:20:15 ===
rabbit on node '<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-12-183-2</A>' up

=ERROR REPORT==== 23-May-2012::15:20:15 ===
** gen_event handler rabbit_alarm crashed.
** Was installed in alarm_handler
** Last event was: {register,&lt;2894.58.0&gt;,
                             {rabbit_alarm,remote_conserve_resources,[]}}
** When handler state == {alarms,
                             {dict,0,16,16,8,80,48,
                                 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]},

 {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                   [],[]}}},
                             {dict,1,16,16,8,80,48,
                                 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
                                  [],[]},
                                 {{[],[],[],[],[],[],
                                   [['<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at ip-10-70-82-246</A>',disk]],
                                   [],[],[],[],[],[],[],[],[]}}}}
** Reason == {'function not exported',

 [{rabbit_alarm,remote_conserve_resources,[&lt;2894.58.0&gt;,true]},
                  {rabbit_alarm,internal_register,3},
                  {rabbit_alarm,handle_event,2},
                  {gen_event,server_update,4},
                  {gen_event,server_notify,4},
                  {gen_event,handle_msg,5},
                  {proc_lib,init_p_do_apply,3}]}

What's the prognosis, doc?

Thanks,
-Glade

On Wed, May 23, 2012 at 3:35 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 23/05/12 11:22, Simon MacMullen wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 23/05/12 00:38, Glade wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> {error,{badarg,{error,bad_**module}},
</I>&gt;&gt;&gt;<i> 'connection.open',
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hmm. This looks like the Erlang VM is failing to load one of RabbitMQ's
</I>&gt;&gt;<i> modules. This should really not happen.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Gah, no this isn't true at all. It's breaking trying to register with the
</I>&gt;<i> alarm handler. Could you post the main and sasl logs somewhere?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, VMware
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/15053546/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/15053546/attachment.htm</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020276.html">[rabbitmq-discuss] Clustered server doesn't permit	local	connections
</A></li>
	<LI>Next message: <A HREF="020285.html">[rabbitmq-discuss] Clustered server doesn't permit local	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20284">[ date ]</a>
              <a href="thread.html#20284">[ thread ]</a>
              <a href="subject.html#20284">[ subject ]</a>
              <a href="author.html#20284">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
