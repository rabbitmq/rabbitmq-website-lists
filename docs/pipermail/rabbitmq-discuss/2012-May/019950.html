<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Request Handshake Timeout Increase
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Request%20Handshake%20Timeout%20Increase&In-Reply-To=%3C4FA960FF.6060106%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019945.html">
   <LINK REL="Next"  HREF="019976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Request Handshake Timeout Increase</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Request%20Handshake%20Timeout%20Increase&In-Reply-To=%3C4FA960FF.6060106%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Request Handshake Timeout Increase">matthias at rabbitmq.com
       </A><BR>
    <I>Tue May  8 19:07:59 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019945.html">[rabbitmq-discuss] Request Handshake Timeout Increase
</A></li>
        <LI>Next message: <A HREF="019976.html">[rabbitmq-discuss] Request Handshake Timeout Increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19950">[ date ]</a>
              <a href="thread.html#19950">[ thread ]</a>
              <a href="subject.html#19950">[ subject ]</a>
              <a href="author.html#19950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>James,

On 08/05/12 15:42, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">james.poole at rsa.com</A> wrote:
&gt;<i> It turns out that Microsoft has a default policy that tries to connect
</I>&gt;<i> to Windows Update on the internet to validate Certificate Authorities.
</I>&gt;<i> If the client machine is not connected to the internet (our likely
</I>&gt;<i> customer deployment scenario and our development environment), then this
</I>&gt;<i> can cause a 15 second delay when validating certificates. Since the
</I>&gt;<i> RabbitMQ handshake timeout is 10 seconds, then this fails and closes the
</I>&gt;<i> connection. This was only seen from the .NET client, and not the Java
</I>&gt;<i> client.
</I>&gt;<i>
</I>&gt;<i> I verified that disabling the local machine policy (directions here
</I>&gt;<i> <A HREF="http://technet.microsoft.com/en-us/library/cc749331%28v=ws.10%29.aspx">http://technet.microsoft.com/en-us/library/cc749331%28v=ws.10%29.aspx</A>)
</I>&gt;<i> allowed the SSL connection to immediately succeed.
</I>
 From the description of that policy it sounds like disabling would 
cause connections to fail:
&lt;quote&gt;
If the user is presented with a certificate issued by a root 
certification authority that is not directly trusted, and the Update 
Root Certificates feature is turned off through Group Policy, the user 
can be prevented from completing the action that required authentication.
&lt;/quote&gt;

Though this may depend on the policy settings of the app. Have you 
looked at <A HREF="http://www.rabbitmq.com/ssl.html#trust-dotNET?">http://www.rabbitmq.com/ssl.html#trust-dotNET?</A>

Also, the policy appears to only come into play when hitherto unknown 
root certificates are encountered. So it should be possible to avoid 
that situation by getting a server certificate with a root CA that 
Windows trusts by default.


Matthias.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019945.html">[rabbitmq-discuss] Request Handshake Timeout Increase
</A></li>
	<LI>Next message: <A HREF="019976.html">[rabbitmq-discuss] Request Handshake Timeout Increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19950">[ date ]</a>
              <a href="thread.html#19950">[ thread ]</a>
              <a href="subject.html#19950">[ subject ]</a>
              <a href="author.html#19950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
