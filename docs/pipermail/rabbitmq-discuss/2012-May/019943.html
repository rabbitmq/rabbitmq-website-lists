<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Request Handshake Timeout Increase
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Request%20Handshake%20Timeout%20Increase&In-Reply-To=%3CFC3463BECF39B74996BF6ADDCB9BE7D70807D7907A%40MX36A.corp.emc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019934.html">
   <LINK REL="Next"  HREF="019945.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Request Handshake Timeout Increase</H1>
    <B>james.poole at rsa.com</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Request%20Handshake%20Timeout%20Increase&In-Reply-To=%3CFC3463BECF39B74996BF6ADDCB9BE7D70807D7907A%40MX36A.corp.emc.com%3E"
       TITLE="[rabbitmq-discuss] Request Handshake Timeout Increase">james.poole at rsa.com
       </A><BR>
    <I>Tue May  8 15:42:53 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019934.html">[rabbitmq-discuss] RabbitMQ 2.8.1 reorders messages?
</A></li>
        <LI>Next message: <A HREF="019945.html">[rabbitmq-discuss] Request Handshake Timeout Increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19943">[ date ]</a>
              <a href="thread.html#19943">[ thread ]</a>
              <a href="subject.html#19943">[ subject ]</a>
              <a href="author.html#19943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have been fighting with getting RabbitMQ to work with SSL enabled using
the .NET client, and we have finally tracked down the root cause.

 

We were seeing the handshake timeout issue mentioned in this thread:

<A HREF="http://old.nabble.com/handshake_timeout-td33108733.html">http://old.nabble.com/handshake_timeout-td33108733.html</A>

 

&quot;{handshake_timeout,handshake}&quot;

 

It turns out that Microsoft has a default policy that tries to connect to
Windows Update on the internet to validate Certificate Authorities.  If the
client machine is not connected to the internet (our likely customer
deployment scenario and our development environment), then this can cause a
15 second delay when validating certificates.  Since the RabbitMQ handshake
timeout is 10 seconds, then this fails and closes the connection.  This was
only seen from the .NET client, and not the Java client.

 

I verified that disabling the local machine policy (directions here
<A HREF="http://technet.microsoft.com/en-us/library/cc749331%28v=ws.10%29.aspx">http://technet.microsoft.com/en-us/library/cc749331%28v=ws.10%29.aspx</A>)
allowed the SSL connection to immediately succeed.

 

My question is this. Is there any way we could have the handshake timeout
increased to something higher (20 seconds?) when SSL is enabled?  This would
save us a lot of hassle explaining to customers why communications fail and
requiring them to enable the AD policy exception.

 

-James

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120508/b2d011b0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120508/b2d011b0/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 7449 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120508/b2d011b0/attachment.bin">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120508/b2d011b0/attachment.bin</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019934.html">[rabbitmq-discuss] RabbitMQ 2.8.1 reorders messages?
</A></li>
	<LI>Next message: <A HREF="019945.html">[rabbitmq-discuss] Request Handshake Timeout Increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19943">[ date ]</a>
              <a href="thread.html#19943">[ thread ]</a>
              <a href="subject.html#19943">[ subject ]</a>
              <a href="author.html#19943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
