<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] immediate, mandatory flag with no consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20immediate%2C%20mandatory%20flag%20with%20no%20consumers&In-Reply-To=%3C4FA9007B.9030202%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019907.html">
   <LINK REL="Next"  HREF="019929.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] immediate, mandatory flag with no consumers</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20immediate%2C%20mandatory%20flag%20with%20no%20consumers&In-Reply-To=%3C4FA9007B.9030202%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] immediate, mandatory flag with no consumers">emile at rabbitmq.com
       </A><BR>
    <I>Tue May  8 12:16:11 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019907.html">[rabbitmq-discuss] immediate, mandatory flag with no consumers
</A></li>
        <LI>Next message: <A HREF="019929.html">[rabbitmq-discuss] immediate, mandatory flag with no consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19927">[ date ]</a>
              <a href="thread.html#19927">[ thread ]</a>
              <a href="subject.html#19927">[ subject ]</a>
              <a href="author.html#19927">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 08/05/12 02:33, Unni, Monish wrote:
&gt;<i> we also found for rabbitmq, we could use &quot;alternate-exchange&quot;
</I>&gt;<i> (extension), since, we are mostly calling services that are built
</I>&gt;<i> in-house. this seems to be a very generic way to handle
</I>&gt;<i> &quot;non-routable&quot; calls. the restriction seems to be this  exchange
</I>&gt;<i> cannot be built on &quot;amq.direct&quot; as an &quot;alternate-exchange&quot; needs to
</I>&gt;<i> be specified at the time of creation - is this right?
</I>
You can specify an alternate exchange for any exchange type, not only
direct exchanges. The alternate exchange must be named at declaration
time of the exchange making use of it.

&gt;<i> for &quot;no-consumers&quot; i am not sure if we have any &quot;broker&quot; level
</I>&gt;<i> setting except using &quot;dead-letter-messages&quot; as given :
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/extensions.html#dead-letter-messages">http://www.rabbitmq.com/extensions.html#dead-letter-messages</A> [also,
</I>&gt;<i> we are loosely-coupled, i.e we really don't want &quot;transaction-level&quot;
</I>&gt;<i> broker semantics, so &quot;confirmation&quot; is not an option...]
</I>
If a message is successfully routed to a queue then dead letter handling
will not come into effect, because the message wasn't dropped.

One way to handle the &quot;no-consumers&quot; scenario is to allow consumers to
declare their own queues and bindings. You can then make use of
alternate exchanges (or the mandatory publication flag) to handle
unroutable messages. In this case the presence of consumers and routes
should correspond. This solution won't work if messages must be
delivered only to a single consumer.

Another option is to let a shared queue expire when the last consumer
unsubscribes. Messages destined for such a queue will become unroutable
when the last consumer leaves. This can then be handled with alternate
exchanges (or the mandatory flag). Consumers should declare the shared
queue before subscribing, in case there were no other subscribers.
(See queue leases: <A HREF="http://www.rabbitmq.com/extensions.html#lifetimes">http://www.rabbitmq.com/extensions.html#lifetimes</A>)

If your client supports the immediate publication flag then that could
also be used.


-Emile

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019907.html">[rabbitmq-discuss] immediate, mandatory flag with no consumers
</A></li>
	<LI>Next message: <A HREF="019929.html">[rabbitmq-discuss] immediate, mandatory flag with no consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19927">[ date ]</a>
              <a href="thread.html#19927">[ thread ]</a>
              <a href="subject.html#19927">[ subject ]</a>
              <a href="author.html#19927">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
