<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Upgrade 2.7.1 RabbitMQ cluster to 2.8.1 version
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Upgrade%202.7.1%20RabbitMQ%20cluster%20to%202.8.1%0A%20version&In-Reply-To=%3Cdc1d159e-4d3d-4f37-b722-d19e2107e9f6%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020266.html">
   <LINK REL="Next"  HREF="020267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Upgrade 2.7.1 RabbitMQ cluster to 2.8.1 version</H1>
    <B>Rader Lei</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Upgrade%202.7.1%20RabbitMQ%20cluster%20to%202.8.1%0A%20version&In-Reply-To=%3Cdc1d159e-4d3d-4f37-b722-d19e2107e9f6%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Upgrade 2.7.1 RabbitMQ cluster to 2.8.1 version">rader.net at gmail.com
       </A><BR>
    <I>Wed May 23 10:04:37 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020266.html">[rabbitmq-discuss] sending zipped message
</A></li>
        <LI>Next message: <A HREF="020267.html">[rabbitmq-discuss] a simple erlang question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20273">[ date ]</a>
              <a href="thread.html#20273">[ thread ]</a>
              <a href="subject.html#20273">[ subject ]</a>
              <a href="author.html#20273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Eslam,

I guess Brendan means:
1.set up a new cluster, maybe only one node, running new version of 
rabbitmq like 2.8.1
2.redirect some of your clients to the new cluster (you can't go too fast, 
the new cluster couldn't not handle too many clients)
3.upgrade one node in the old cluster to the new version of rabbitmq
4.add the node upgraded to the new cluster
5. redirect some of your clients to the new cluster
6.repeat step 3 to 5 until all nodes upgraded and all clients redirected to 
the new cluster

To create rabbitmq cluster, rabbitmqctl command is the only way to achieve 
as I know.

On Thursday, April 5, 2012 1:02:55 AM UTC+8, Eslam El Husseiny wrote:
&gt;<i>
</I>&gt;<i> sorry but i didn't understand the procedure of adding new physical cluster 
</I>&gt;<i> running 2.8.1
</I>&gt;<i> do you mean using rabbitmqctl command to new physical machine to cluster , 
</I>&gt;<i> OR ?
</I>&gt;<i>
</I>&gt;<i> Thanks in advance 
</I>&gt;<i>
</I>&gt;<i> On Monday, April 2, 2012 6:35:11 AM UTC+2, Brendan Hay wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Roshan,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I would suggest you provision a _new_ physical cluster running 2.8.1
</I>&gt;&gt;<i> side by side with your old cluster, and then incrementally move
</I>&gt;&gt;<i> producers/consumers over.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Are you using some sort of load-balancer in front of your cluster,
</I>&gt;&gt;<i> such as HAProxy or LVS?
</I>&gt;&gt;<i> What sort of service discovery do the clients use to find Rabbit?
</I>&gt;&gt;<i> (Chef, ZooKeeper, hard-coded configs, etc.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Brendan
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Apr 2, 3:14 am, Codevally &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">codeva... at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Hi All
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I need to upgrade our current production 2.7.1 RabbitMQ cluster to it's 
</I>&gt;&gt;<i> new
</I>&gt;&gt;<i> &gt; 2.8.1 version.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; In our production cluster, we have 2 disc node and erlang R15B 
</I>&gt;&gt;<i> installed.
</I>&gt;&gt;<i> &gt; According to the RabbitMQ cluster guilde:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; &quot;All nodes in a cluster must be running the same versions of Erlang and
</I>&gt;&gt;<i> &gt; RabbitMQ, although they may have different plugins installed. Therefore 
</I>&gt;&gt;<i> it
</I>&gt;&gt;<i> &gt; is necessary to stop all nodes in the cluster, then start all nodes when
</I>&gt;&gt;<i> &gt; performing an upgrade.&quot;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; In our case we cannot shutdown our existing cluster, because it is 
</I>&gt;&gt;<i> heavily
</I>&gt;&gt;<i> &gt; used to send messages across regions.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Could someone please let me know how to upgrade 2.7.1 cluster without
</I>&gt;&gt;<i> &gt; shutdown the entire cluster.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Many Thanks.
</I>&gt;&gt;<i> &gt; /Roshan
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; rabbitmq-discuss mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-disc... at lists.rabbitmq.comhttps</A>://
</I>&gt;&gt;<i> lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/c6914fcf/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120523/c6914fcf/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020266.html">[rabbitmq-discuss] sending zipped message
</A></li>
	<LI>Next message: <A HREF="020267.html">[rabbitmq-discuss] a simple erlang question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20273">[ date ]</a>
              <a href="thread.html#20273">[ thread ]</a>
              <a href="subject.html#20273">[ subject ]</a>
              <a href="author.html#20273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
