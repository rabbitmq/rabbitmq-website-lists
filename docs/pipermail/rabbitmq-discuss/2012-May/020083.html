<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cannot start or stop RabbitMQ using rabbitmqctl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cannot%20start%20or%20stop%20RabbitMQ%20using%0A%20rabbitmqctl&In-Reply-To=%3CFCABD85AB9514AAF946D4D37A047B8AA%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020082.html">
   <LINK REL="Next"  HREF="020097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cannot start or stop RabbitMQ using rabbitmqctl</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cannot%20start%20or%20stop%20RabbitMQ%20using%0A%20rabbitmqctl&In-Reply-To=%3CFCABD85AB9514AAF946D4D37A047B8AA%40gmail.com%3E"
       TITLE="[rabbitmq-discuss] Cannot start or stop RabbitMQ using rabbitmqctl">videlalvaro at gmail.com
       </A><BR>
    <I>Wed May 16 17:14:02 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020082.html">[rabbitmq-discuss] Cannot start or stop RabbitMQ using	rabbitmqctl
</A></li>
        <LI>Next message: <A HREF="020097.html">[rabbitmq-discuss] Read-only access to STOMP topic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20083">[ date ]</a>
              <a href="thread.html#20083">[ thread ]</a>
              <a href="subject.html#20083">[ subject ]</a>
              <a href="author.html#20083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Erlang takes the cookie from the user that starts Erlang. Yes Erlang is that mean.  

--  
Sent with Sparrow (<A HREF="http://www.sparrowmailapp.com/?sig">http://www.sparrowmailapp.com/?sig</A>)


On Wednesday, May 16, 2012 at 6:06 PM, Merton Lister wrote:

&gt;<i> Thanks.
</I>&gt;<i>  
</I>&gt;<i> How exactly could I make sure that:
</I>&gt;<i>  
</I>&gt;<i> &gt; the same cookie used to start rabbit is the one used to run the administration commands.
</I>&gt;<i>  
</I>&gt;<i> Is it done by comparing the string stored in $home/.erlang.cookie with something else?
</I>&gt;<i> On Wed, May 16, 2012 at 12:02 PM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>)&gt; wrote:
</I>&gt;<i> &gt; Please keep rabbitmq-discuss CC'ed  
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; Well, I really don't know how the macports thing works since I don't use it.
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; Those scripts you mention are simple shell scripts so they can be run by whatever user you choose, that's is not Erlang nor RabbitMQ specific.  
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; Erlang will automatically create an .erlang.cookie in your home folder for you anyway. So you just need to make sure that the same cookie used to start rabbit is the one used to run the administration commands.  
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; More docs on the Erlang cookie are here <A HREF="http://erlang.org/doc/man/erl.html">http://erlang.org/doc/man/erl.html</A> see the -setcookie flag
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; Regards,  
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; Alvaro  
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; --  
</I>&gt;<i> &gt; Sent with Sparrow (<A HREF="http://www.sparrowmailapp.com/?sig">http://www.sparrowmailapp.com/?sig</A>)
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; On Wednesday, May 16, 2012 at 5:46 PM, Merton Lister wrote:
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; &gt; Hi Alvaro,
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; I've just noticed something here: <A HREF="http://www.rabbitmq.com/install-macports.html">http://www.rabbitmq.com/install-macports.html</A>  
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; The rabbitmq-server, rabbitmqctl, and other RabbitMQ-related scripts on the path automatically (through sudo) run in the context of the rabbitmq user, so that the Erlang cookie can be read from (sudo)$MACPORTS_PREFIX/var/lib/rabbitmq/.erlang.cookie.  
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; Does this mean that whenever I run rabbitmq-server on mac, it will always run as user 'rabbitmq', in which case, I will also have to stop it by using:  
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; sudo -u rabbitmq rabbitmqctl stop
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; Thanks!
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; Best,
</I>&gt;<i> &gt; &gt; Merton
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; On Wed, May 16, 2012 at 11:29 AM, Merton Lister &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mrtnlstr at gmail.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mrtnlstr at gmail.com</A>)&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; Thanks a lot.
</I>&gt;<i> &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; On Wed, May 16, 2012 at 10:55 AM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>)&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; No idea :) Maybe you installed rabbitmq before and that installer created that user?
</I>&gt;<i> &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; Anyway&#8230; just do sudo -u rabbitmq rabbitmqctl stop
</I>&gt;<i> &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; -Alvaro
</I>&gt;<i> &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; On Wed, May 16, 2012 at 4:52 PM, Merton Lister &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mrtnlstr at gmail.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mrtnlstr at gmail.com</A>)&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Hi Alvaro,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Thanks for the pointer. This is my output:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; rabbitmq  5991   0.4  0.2  2492192  16184   ??  S     4:05PM   1:56.45 /opt/local/lib/erlang/erts-5.9/bin/beam.smp -W w -K true -A30 -P 1048576 -- -root /opt/local/lib/erlang -progname erl -- -home /opt/local/var/lib/rabbitmq -- -noshell -noinput -sname <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mrtn-1</A> -boot /opt/local/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mrtn-1-plugins-expand</A>/rabbit -kernel inet_default_connect_options [{nodelay,true}] -sasl errlog_type error -sasl sasl_error_logger false -rabbit error_logger {file,&quot;/opt/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mrtn-1.log</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mrtn-1.log</A>)&quot;} -rabbit sasl_error_logger {file,&quot;/opt/local/var/log/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mrtn-1-sasl.log</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mrtn-1-sasl.log</A>)&quot;} -os_mon start_cpu_sup false -os_mon start_disksup false -os_mon start_memsup false -mnesia dir &quot;/opt/local/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mrtn-1</A>&quot; -noshell -noinput  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; mrtn     13062   0.0  0.0  2435120    528 s000  R+    9:57AM   0:00.00 grep rabbit
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; rabbitmq  6005   0.0  0.0  2435000    108   ??  S     4:05PM   0:00.00 inet_gethost 4
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; rabbitmq  6004   0.0  0.0  2434996    396   ??  Ss    4:05PM   0:00.01 inet_gethost 4
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; rabbitmq  5980   0.0  0.0  2435000    224   ??  S     4:05PM   0:00.50 /opt/local/lib/erlang/erts-5.9/bin/epmd -daemon
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Strangely, why do I have a user named 'rabbitmq'?!
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; On Wed, May 16, 2012 at 9:28 AM, Alvaro Videla &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">videlalvaro at gmail.com</A>)&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Basically the erlang.cookie belongs to a particular user. So the Erlang will load the cookie of the user running the commands rabbitmqctl, rabbitmq-server and so on.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; So if you want to gracefully stop that node you need to run rabbitmqctl stop with the same user that is running your current rabbitmq process.  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; To find that user try running: ps aux | grep rabbit
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; -Alvaro
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; On Wed, May 16, 2012 at 3:14 PM, Merton Lister &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mrtnlstr at gmail.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mrtnlstr at gmail.com</A>)&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hi Tim,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Thanks for getting back to me. I am new to rabbitmq so not very familiar with the details you're asking for.  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Here is what I see in /opt/local/var/lib/rabbitmq/.erlang.cookie:  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; QFZXZBPOMTJNACQIMJOT
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; and sudo rabbitmqctl status gives me:  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Status of node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at h002</A> ...
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at h002</A>: nodedown
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; DIAGNOSTICS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; ===========
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; nodes in question: [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at h002</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; hosts, their running nodes and ports:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; - h002: [{rabbit,62428},{rabbitmqctl12565,55147}]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; current node details:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; - node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl12565 at h002</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; - home dir: /opt/local/var/lib/rabbitmq
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; - cookie hash: q7VU0JjCd0VG7jOEF9Hf/g==
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; I installed rabbitmq by following the instructions given here: <A HREF="http://www.rabbitmq.com/install-macports.html,">http://www.rabbitmq.com/install-macports.html,</A> after which I ran sudo rabbitmq-server -detached to start the server. Now I want to stop the server using sudo rabbitmqctl stop, but it simply does not allow me to do so by the looks of it.  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; I wonder what causes this kind of behavior? Am I running *multiple* rabbitmq servers/nodes on my machine now, and somehow I am not allowed to access some of them? Your help is much appreciated. Thanks.  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Best,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Merton
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; On Wed, May 16, 2012 at 8:42 AM, tim &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">tim at rabbitmq.com</A>)&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; On 16/05/2012 13:24, mrtn wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I installed the latest RabbitMQ via macports on OS X 10.6.8, and have
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; been trying to run it on localhost. However, after I started the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; server using 'sudo rabbitmq-server -detached', I cannot stop the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; server/node, nor can I start a new one (as expected). Below is the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; output: first, I try to start a new server but failed because there is
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; already running; second, I then try to stop the existing server/node
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; but get told it is already down. Can anyone point out what is going on
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; here?!
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; mrtn:MyLab mrtn$ sudo rabbitmq-server -detached
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Activating RabbitMQ plugins ...
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 0 plugins activated:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; node with name &quot;rabbit&quot; already running on &quot;h002&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; DIAGNOSTICS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ===========
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; nodes in question: [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at h002</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; hosts, their running nodes and ports:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - h002: [{rabbit,62428},{rabbitmqprelaunch12073,54048}]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; current node details:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqprelaunch12073 at h002</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - home dir: /opt/local/var/lib/rabbitmq
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - cookie hash: q7VU0JjCd0VG7jOEF9Hf/g==
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; mrtn:MyLab mrtn$ sudo rabbitmqctl stop
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Stopping and halting node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at h002</A> ...
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Error: unable to connect to node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at h002</A>: nodedown
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; DIAGNOSTICS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ===========
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; nodes in question: [<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at h002</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; hosts, their running nodes and ports:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - h002: [{rabbit,62428},{rabbitmqctl12108,54053}]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; current node details:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - node name: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmqctl12108 at h002</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - home dir: /opt/local/var/lib/rabbitmq
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - cookie hash: q7VU0JjCd0VG7jOEF9Hf/g==
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Is the existing rabbit running with the same Erlang cookie as the new one? The cookie hash produced by rabbitmqctl is for the current node, not the one you're attempting to contact.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; The list of nodes/ports on the given host indicates which Erlang nodes are up, but not necessarily whether they're allowed to connect to or not. Check your cookie and let us know how you get on.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Tim
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; rabbitmq-discuss mailing list
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt; &gt;  
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt;  
</I>&gt;<i>  
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120516/7843b7bd/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120516/7843b7bd/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020082.html">[rabbitmq-discuss] Cannot start or stop RabbitMQ using	rabbitmqctl
</A></li>
	<LI>Next message: <A HREF="020097.html">[rabbitmq-discuss] Read-only access to STOMP topic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20083">[ date ]</a>
              <a href="thread.html#20083">[ thread ]</a>
              <a href="subject.html#20083">[ subject ]</a>
              <a href="author.html#20083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
