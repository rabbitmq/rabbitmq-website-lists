<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika write buffer problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20write%20buffer%20problem&In-Reply-To=%3CE2B2F7CC643E46D29CCC94D443C3B84A%40myyearbook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020348.html">
   <LINK REL="Next"  HREF="020361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika write buffer problem</H1>
    <B>Gavin M. Roy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20write%20buffer%20problem&In-Reply-To=%3CE2B2F7CC643E46D29CCC94D443C3B84A%40myyearbook.com%3E"
       TITLE="[rabbitmq-discuss] Pika write buffer problem">gmr at myyearbook.com
       </A><BR>
    <I>Sun May 27 22:01:27 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="020348.html">[rabbitmq-discuss] Pika write buffer problem
</A></li>
        <LI>Next message: <A HREF="020361.html">[rabbitmq-discuss] Pika write buffer problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20349">[ date ]</a>
              <a href="thread.html#20349">[ thread ]</a>
              <a href="subject.html#20349">[ subject ]</a>
              <a href="author.html#20349">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The warnings are just warnings, letting you know that the writes to rabbitMQ are not happening as quickly as you'd like them to do. Are you saying they are not actually getting into RabbitMQ? 


On Sunday, May 27, 2012 at 4:27 PM, James Dear wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm having trouble getting simple examples of basic_publish to work due to the write buffer being exceeded. If I use the demo_send code from here (<A HREF="http://pika.github.com/examples.html">http://pika.github.com/examples.html</A>), I only manage to send 5 messages before getting write buffer exceeded problems. Here's my output: 
</I>&gt;<i> 
</I>&gt;<i> [INFO     2012-05-27 20:30:16,863  #5451] Connecting fd 3 to 127.0.0.1:5672 (<A HREF="http://127.0.0.1:5672">http://127.0.0.1:5672</A>)
</I>&gt;<i> [INFO     2012-05-27 20:30:17,869  #5451] demo_send: Connected to RabbitMQ
</I>&gt;<i> [INFO     2012-05-27 20:30:17,872  #5451] demo_send: Received our Channel
</I>&gt;<i> [INFO     2012-05-27 20:30:17,882  #5451] demo_send: Queue Declared
</I>&gt;<i> [INFO     2012-05-27 20:30:17,883  #5451] Sending: Hello World #0: 1338147017.88308692
</I>&gt;<i> [INFO     2012-05-27 20:30:17,883  #5451] Sending: Hello World #1: 1338147017.88367391
</I>&gt;<i> [INFO     2012-05-27 20:30:17,884  #5451] Sending: Hello World #2: 1338147017.88425899
</I>&gt;<i> [INFO     2012-05-27 20:30:17,884  #5451] Sending: Hello World #3: 1338147017.88472700
</I>&gt;<i> [INFO     2012-05-27 20:30:17,885  #5451] Sending: Hello World #4: 1338147017.88527107
</I>&gt;<i> /..snip../pika/connection.py:766: UserWarning: Pika: Write buffer exceeded warning threshold at 413 bytes and an estimated 10 frames behind
</I>&gt;<i>   warn(message % (self.outbound_buffer.size, est_frames_behind))
</I>&gt;<i> /..snip../pika/connection.py:766: UserWarning: Pika: Write buffer exceeded warning threshold at 447 bytes and an estimated 11 frames behind
</I>&gt;<i>   warn(message % (self.outbound_buffer.size, est_frames_behind))
</I>&gt;<i> /..snip../pika/connection.py:766: UserWarning: Pika: Write buffer exceeded warning threshold at 490 bytes and an estimated 12 frames behind
</I>&gt;<i>   warn(message % (self.outbound_buffer.size, est_frames_behind))
</I>&gt;<i> [INFO     2012-05-27 20:30:17,887  #5451] Sending: Hello World #5: 1338147017.88733912
</I>&gt;<i> /..snip../pika/connection.py:766: UserWarning: Pika: Write buffer exceeded warning threshold at 511 bytes and an estimated 13 frames behind
</I>&gt;<i>   warn(message % (self.outbound_buffer.size, est_frames_behind))
</I>&gt;<i> /..snip../pika/connection.py:766: UserWarning: Pika: Write buffer exceeded warning threshold at 545 bytes and an estimated 14 frames behind
</I>&gt;<i>   warn(message % (self.outbound_buffer.size, est_frames_behind))
</I>&gt;<i> /..snip../pika/connection.py:766: UserWarning: Pika: Write buffer exceeded warning threshold at 588 bytes and an estimated 15 frames behind
</I>&gt;<i>   warn(message % (self.outbound_buffer.size, est_frames_behind))
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> etc etc
</I>&gt;<i> 
</I>&gt;<i> On the other hand, everything works fine with pika twisted and the msgs do end up on RabbitMQ with pika twisted, so it doesn't seem to be a restriction to do with RabbitMQ per se. 
</I>&gt;<i> 
</I>&gt;<i> I've created gists (<A HREF="https://gist.github.com/2815757">https://gist.github.com/2815757</A>) for the pika native code which doesn't work and the pika twisted code that does work.
</I>&gt;<i> 
</I>&gt;<i> If anyone could help, I would greatly appreciate it. 
</I>&gt;<i> 
</I>&gt;<i> James 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A> (mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>)
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120527/04270548/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20120527/04270548/attachment.htm</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020348.html">[rabbitmq-discuss] Pika write buffer problem
</A></li>
	<LI>Next message: <A HREF="020361.html">[rabbitmq-discuss] Pika write buffer problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20349">[ date ]</a>
              <a href="thread.html#20349">[ thread ]</a>
              <a href="subject.html#20349">[ subject ]</a>
              <a href="author.html#20349">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
