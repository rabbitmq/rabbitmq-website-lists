<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Hang on &quot;starting database ....&quot; remains in 2.8.2 cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Hang%20on%20%22starting%20database%20....%22%20remains%20in%0A%202.8.2%20cluster&In-Reply-To=%3C4FA8FADD.1050105%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019889.html">
   <LINK REL="Next"  HREF="019952.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Hang on &quot;starting database ....&quot; remains in 2.8.2 cluster</H1>
    <B>Francesco Mazzoli</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Hang%20on%20%22starting%20database%20....%22%20remains%20in%0A%202.8.2%20cluster&In-Reply-To=%3C4FA8FADD.1050105%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Hang on &quot;starting database ....&quot; remains in 2.8.2 cluster">francesco at rabbitmq.com
       </A><BR>
    <I>Tue May  8 11:52:13 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="019889.html">[rabbitmq-discuss] Hang on &quot;starting database ....&quot; remains in	2.8.2 cluster
</A></li>
        <LI>Next message: <A HREF="019952.html">[rabbitmq-discuss] Hang on &quot;starting database ....&quot; remains in 2.8.2 cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19924">[ date ]</a>
              <a href="thread.html#19924">[ thread ]</a>
              <a href="subject.html#19924">[ subject ]</a>
              <a href="author.html#19924">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Matt,

Predictably I can't reproduce this. Since you say that it'll happen 
&quot;inevitably&quot; (while if I understand correctly in your previous messages 
it was tricky to reproduce), can you send us more information about your 
setup and the steps on how to trigger the problem?

Francesco.

On 04/05/12 23:55, Matt Pietrek wrote:
&gt;<i> I've written this alias before about this topic, and the problem
</I>&gt;<i> remains in 2.8.2. See:
</I>&gt;<i>      <A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-February/018414.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-February/018414.html</A>
</I>&gt;<i>
</I>&gt;<i> I have a three node cluster running RabbitMQ 2.82/Erlang R13B03 on Ubuntu 10.04.
</I>&gt;<i>
</I>&gt;<i> Once the cluster is up and running properly (as observed by the Web
</I>&gt;<i> UI), I then start/stop individual nodes in the cluster:
</I>&gt;<i>      rabbitmqctl stop
</I>&gt;<i>      rabbitmq-server
</I>&gt;<i>
</I>&gt;<i> Inevitably one of the nodes won't come back up, waiting forever on
</I>&gt;<i> &quot;starting&quot; the database (no 30 second timeout... Forever.)
</I>&gt;<i>
</I>&gt;<i> The only way to get all three nodes functioning again together is to
</I>&gt;<i> forcibly stop the other two nodes, then restart them all again.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The first item below is the console output as captured via nohup,
</I>&gt;<i> showing &quot;starting database&quot; as the last item.
</I>&gt;<i> The second item below is the last few lines of the rabbit@&lt;node&gt;.log
</I>&gt;<i> file, showing the node shutting down, then beginning to start up
</I>&gt;<i> again.
</I>&gt;<i>
</I>&gt;<i> Is it likely that a newer Erlang version would help out?
</I>&gt;<i> What else can I provide to help diagnose this?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Matt
</I>&gt;<i>
</I>&gt;<i> --------
</I>&gt;<i> node           : <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at util</A>
</I>&gt;<i> app descriptor :
</I>&gt;<i> /usr/lib/rabbitmq/lib/rabbitmq_server-2.8.2/sbin/../ebin/rabbit.app
</I>&gt;<i> home dir       : /home/mpietrek
</I>&gt;<i> config file(s) : /home/mpietrek/work/var/run/rabbitmq.config
</I>&gt;<i> cookie hash    : pR5H9kY3Wra/XdLELT5hgQ==
</I>&gt;<i> log            :
</I>&gt;<i> /home/mpietrek/work/logs/util.mpietrek.internal.illumita.com/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at util.log</A>
</I>&gt;<i> sasl log       :
</I>&gt;<i> /home/mpietrek/work/logs/util.mpietrek.internal.illumita.com/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at util-sasl.log</A>
</I>&gt;<i> database dir   : /home/mpietrek/work/var/lib/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at util</A>
</I>&gt;<i> erlang version : 5.7.4
</I>&gt;<i>
</I>&gt;<i> -- rabbit boot start
</I>&gt;<i> starting file handle cache server                                     ...done
</I>&gt;<i> starting worker pool                                                  ...done
</I>&gt;<i> starting database                                                     ...
</I>&gt;<i>
</I>&gt;<i> --------
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 4-May-2012::15:02:14 ===
</I>&gt;<i>      application: rabbitmq_management_agent
</I>&gt;<i>      exited: stopped
</I>&gt;<i>      type: permanent
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 4-May-2012::15:02:14 ===
</I>&gt;<i> stopped TCP Listener on 0.0.0.0:5672
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 4-May-2012::15:02:14 ===
</I>&gt;<i>      application: rabbit
</I>&gt;<i>      exited: stopped
</I>&gt;<i>      type: permanent
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 4-May-2012::15:02:14 ===
</I>&gt;<i>      application: os_mon
</I>&gt;<i>      exited: stopped
</I>&gt;<i>      type: permanent
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 4-May-2012::15:02:14 ===
</I>&gt;<i>      application: mnesia
</I>&gt;<i>      exited: stopped
</I>&gt;<i>      type: permanent
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 4-May-2012::15:02:14 ===
</I>&gt;<i> Halting Erlang VM
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 4-May-2012::15:02:52 ===
</I>&gt;<i> Limiting to approx 924 file handles (829 sockets)
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019889.html">[rabbitmq-discuss] Hang on &quot;starting database ....&quot; remains in	2.8.2 cluster
</A></li>
	<LI>Next message: <A HREF="019952.html">[rabbitmq-discuss] Hang on &quot;starting database ....&quot; remains in 2.8.2 cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19924">[ date ]</a>
              <a href="thread.html#19924">[ thread ]</a>
              <a href="subject.html#19924">[ subject ]</a>
              <a href="author.html#19924">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
