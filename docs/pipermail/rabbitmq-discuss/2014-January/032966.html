<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] A rabbitmq error in my cluster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20rabbitmq%20error%20in%20my%20cluster&In-Reply-To=%3CCAD1b-RiRC9V11EW2WQ3LnJj70QP8BxQyYHmEw9WO07rQOgbGug%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033119.html">
   <LINK REL="Next"  HREF="032987.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] A rabbitmq error in my cluster</H1>
    <B>Si-li Liu</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20A%20rabbitmq%20error%20in%20my%20cluster&In-Reply-To=%3CCAD1b-RiRC9V11EW2WQ3LnJj70QP8BxQyYHmEw9WO07rQOgbGug%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] A rabbitmq error in my cluster">unixipc at gmail.com
       </A><BR>
    <I>Sat Jan 11 06:54:07 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033119.html">[rabbitmq-discuss] Minor Correction to AMQP 0.9.1 Model	Explained Diagram
</A></li>
        <LI>Next message: <A HREF="032987.html">[rabbitmq-discuss] A rabbitmq error in my cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32966">[ date ]</a>
              <a href="thread.html#32966">[ thread ]</a>
              <a href="subject.html#32966">[ subject ]</a>
              <a href="author.html#32966">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I found my rabbitmq node is down in the cluster.

Here is the log

=ERROR REPORT==== 9-Jan-2014::03:17:27 ===
** Generic server rabbit_disk_monitor terminating
** Last message in was update
** When Server state == {state,&quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at localhost</A>
&quot;,
                               1000000000,6201094144,10000,
                               {interval,#Ref&lt;0.0.0.977&gt;},
                               false}
** Reason for termination ==
** {badarg,[{erlang,list_to_integer,[&quot;systems&quot;],[]},
            {rabbit_disk_monitor,parse_free_unix,1,[]},
            {rabbit_disk_monitor,internal_update,1,[]},
            {rabbit_disk_monitor,handle_info,2,[]},
            {gen_server,handle_msg,5,[{file,&quot;gen_server.erl&quot;},{line,607}]},

{proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]}

=INFO REPORT==== 9-Jan-2014::03:17:27 ===
Disabling disk free space monitoring on unsupported platform: {{'EXIT',
                                                                {badarg,
                                                                 [{erlang,

 list_to_integer,

 [&quot;systems&quot;],
                                                                   []},

{rabbit_disk_monitor,

 parse_free_unix,
                                                                   1,[]},

{rabbit_disk_monitor,

 init,1,[]},

{gen_server,

 init_it,6,
                                                                   [{file,

 &quot;gen_server.erl&quot;},
                                                                    {line,
                                                                     304}]},
                                                                  {proc_lib,

 init_p_do_apply,
                                                                   3,
                                                                   [{file,

 &quot;proc_lib.erl&quot;},
                                                                    {line,

 239}]}]}},
                                                               16723951616}

After a while, the log reports

=ERROR REPORT==== 9-Jan-2014::03:20:15 ===
Mnesia(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at localhost</A>): ** ERROR ** (core dumped to file:
&quot;/var/lib/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbitmq at localhost_1389_237615_166554</A>&quot;)
 ** FATAL ** {error,{&quot;Cannot rename disk_log file&quot;,latest_log,
                     &quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at localhost</A>
/PREVIOUS.LOG&quot;,
                     {log_header,trans_log,&quot;4.3&quot;,&quot;4.8&quot;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbitmq at localhost</A>,
                                 {1389,237615,128040}},

 {file_error,&quot;/var/lib/rabbitmq/mnesia/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at localhost</A>/PREVIOUS.LOG&quot;,
                                 enoent}}}

=ERROR REPORT==== 9-Jan-2014::03:20:25 ===
Mnesia(<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq at localhost</A>): ** ERROR ** mnesia_event got unexpected event:
{'EXIT',

&lt;0.111.0&gt;,

killed}

I found the dump file is actually in my disk, but how to open this dump
file? /var/lib/rabbitmq/<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">MnesiaCore.rabbitmq at localhost_1389_237615_166554</A>

Also rabbitmqctl status command says its status is correct, but rabbitmqctl
list_users, list_exchanges or other commands just print an error message.

Anyone can help with this issue? It can not be reproduced, but happens
sometimes.
-- 
Best regards

Sili Liu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140111/7daa61c5/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140111/7daa61c5/attachment.html</A>&gt;
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033119.html">[rabbitmq-discuss] Minor Correction to AMQP 0.9.1 Model	Explained Diagram
</A></li>
	<LI>Next message: <A HREF="032987.html">[rabbitmq-discuss] A rabbitmq error in my cluster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32966">[ date ]</a>
              <a href="thread.html#32966">[ thread ]</a>
              <a href="subject.html#32966">[ subject ]</a>
              <a href="author.html#32966">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
