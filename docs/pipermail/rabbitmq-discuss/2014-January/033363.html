<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Federation Duplicates and Filtering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20Duplicates%20and%20Filtering&In-Reply-To=%3C52E68DE6.70605%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033361.html">
   <LINK REL="Next"  HREF="033368.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Federation Duplicates and Filtering</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Federation%20Duplicates%20and%20Filtering&In-Reply-To=%3C52E68DE6.70605%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Federation Duplicates and Filtering">simon at rabbitmq.com
       </A><BR>
    <I>Mon Jan 27 16:48:38 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033361.html">[rabbitmq-discuss] Federation Duplicates and Filtering
</A></li>
        <LI>Next message: <A HREF="033368.html">[rabbitmq-discuss] Federation Duplicates and Filtering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33363">[ date ]</a>
              <a href="thread.html#33363">[ thread ]</a>
              <a href="subject.html#33363">[ subject ]</a>
              <a href="author.html#33363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/01/2014 16:36, Dann wrote:
&gt;<i> How hard would it be to implement an option for federation that would
</I>&gt;<i> use the x-received-from header to know if a message came from an
</I>&gt;<i> upstream and then not send it back that way?
</I>
It's on the TODO list. It *might* be in 3.3.0. (I would certainly like 
it to be.)

&gt;<i> Everything sounds simple in my mind but I am sure there are some
</I>&gt;<i> interesting gotchas with this option.
</I>
It's a bit harder than it looks, yes. The problem is that there are two 
notions of node identity in federation - what a node knows itself as 
(the local_nodename, defaulting to but not necessarily the hostname) and 
what other nodes know it as (the DNS name, ending up in the URI). Maybe 
if you are lucky then the two coincide, but I would not want to assume 
that. Plus federation links really connect clusters, which don't have 
DNS names anyway. And we want to drop messages at the upstream, for 
efficiency, so we only have the local_nodename to go on - but 
x-received-from contains URIs.

So we need to sort that lot out before it can happen. Not impossible, 
but just a bit fiddly.

Cheers, Simon

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033361.html">[rabbitmq-discuss] Federation Duplicates and Filtering
</A></li>
	<LI>Next message: <A HREF="033368.html">[rabbitmq-discuss] Federation Duplicates and Filtering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33363">[ date ]</a>
              <a href="thread.html#33363">[ thread ]</a>
              <a href="subject.html#33363">[ subject ]</a>
              <a href="author.html#33363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
