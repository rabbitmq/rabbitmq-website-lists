<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Publisher confirms requires seperate call to get ack?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publisher%20confirms%20requires%20seperate%20call%20to%0A%20get%20ack%3F&In-Reply-To=%3CCAChGYf_qjGFKxP1Vnh06nxSUNt8qQzK9MC4bgqVpMPrw72X6gQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032896.html">
   <LINK REL="Next"  HREF="032900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?</H1>
    <B>Ryan Brown</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Publisher%20confirms%20requires%20seperate%20call%20to%0A%20get%20ack%3F&In-Reply-To=%3CCAChGYf_qjGFKxP1Vnh06nxSUNt8qQzK9MC4bgqVpMPrw72X6gQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?">ryankbrown at gmail.com
       </A><BR>
    <I>Tue Jan  7 17:56:04 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="032896.html">[rabbitmq-discuss] ANN Machine Head 1.0.0-beta6
</A></li>
        <LI>Next message: <A HREF="032900.html">[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32899">[ date ]</a>
              <a href="thread.html#32899">[ thread ]</a>
              <a href="subject.html#32899">[ subject ]</a>
              <a href="author.html#32899">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I apologize for the silence. I've had an end-of-year rush and vacation. I'm
not picking this up and very much appreciate the great information.

So, question (hopefully responding to this old post is ok). When I receive
a basic.ack, does that confirm that the message has been written to disk?
Or is that just an ack that one of the rabbit nodes has accepted the
publish? My SLA requires the former. One of my coworkers recalled seeing
something that indicated a separate call to confirm the write to disk. (I
am having a hard time finding that article at the moment.)

Best.


On Wed, Dec 18, 2013 at 3:00 AM, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:

&gt;<i> On 18/12/2013 05:53, Michael Klishin wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> It depends on your client library. E.g. in Java, C# and Ruby (Bunny) you
</I>&gt;&gt;<i> can publish as many messages
</I>&gt;&gt;<i> as you want and then use Channel#waitForConfirms to wait for all
</I>&gt;&gt;<i> outstanding confirms to arrive.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You can do so in the Erlang client - either call amqp_channel:wait_for_confirms/1
</I>&gt;<i> every so often or (better) call amqp_channel:register_conform_handler/2
</I>&gt;<i> and accept the confirms yourself. That's better because every time you call
</I>&gt;<i> amqp_channel:wait_for_confirms/1 the channel comes to a halt until all
</I>&gt;<i> confirms have arrived.
</I>&gt;<i>
</I>&gt;<i>  it doesn't have to be done per message and RabbitMQ pushes confirms to
</I>&gt;&gt;<i> you, you do not poll for acknowledgements.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is the key point. It sounds like the OP is publishing one message,
</I>&gt;<i> waiting for one confirm, publishing the next message, and so on. That's an
</I>&gt;<i> antipattern (at least when you want to go fast) since you can never go
</I>&gt;<i> faster than 1 / (network round trip time) messages per second.
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
-rb
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/65967867/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140107/65967867/attachment.html</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032896.html">[rabbitmq-discuss] ANN Machine Head 1.0.0-beta6
</A></li>
	<LI>Next message: <A HREF="032900.html">[rabbitmq-discuss] Publisher confirms requires seperate call to get ack?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32899">[ date ]</a>
              <a href="thread.html#32899">[ thread ]</a>
              <a href="subject.html#32899">[ subject ]</a>
              <a href="author.html#32899">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
