<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header for SUBSCRIBE still recommended?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5Brabbitmq-stomp%5D%20Is%20the%20use%20of%20receipt%0A%20header%20for%20SUBSCRIBE%20still%20recommended%3F&In-Reply-To=%3C52E4EEE3.9050602%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033337.html">
   <LINK REL="Next"  HREF="033391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header for SUBSCRIBE still recommended?</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5Brabbitmq-stomp%5D%20Is%20the%20use%20of%20receipt%0A%20header%20for%20SUBSCRIBE%20still%20recommended%3F&In-Reply-To=%3C52E4EEE3.9050602%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header for SUBSCRIBE still recommended?">matthias at rabbitmq.com
       </A><BR>
    <I>Sun Jan 26 11:17:55 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033337.html">[rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header for SUBSCRIBE still recommended?
</A></li>
        <LI>Next message: <A HREF="033391.html">[rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header for SUBSCRIBE still recommended?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33338">[ date ]</a>
              <a href="thread.html#33338">[ thread ]</a>
              <a href="subject.html#33338">[ subject ]</a>
              <a href="author.html#33338">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/01/14 09:53, Michael Justin wrote:
&gt;<i> On 24.01.2014 12:52, Emile Joubert wrote:
</I>&gt;&gt;<i> On 24/01/14 11:18, Michael Justin wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Has there been a change in the RabbitMQ STOMP plug-in since, which makes
</I>&gt;&gt;&gt;<i> this workaround obsolete, or is it still recommended to use a receipt?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There have been numerous improvements to the STOMP adapter since v2.4.0,
</I>&gt;&gt;<i> but SUBSCRIBE remains an asynchronous operation. As Rob suggested,
</I>&gt;&gt;<i> requiring a receipt makes it a synchronous operation. If your
</I>&gt;&gt;<i> application requires confirmation that the subscription is in place then
</I>&gt;&gt;<i> you need the synchronous version.
</I>&gt;<i>
</I>&gt;<i> thank you for the information! The synchronous solution using a receipt
</I>&gt;<i> header works very well, good to know that it is unchanged, so my app
</I>&gt;<i> (client library) docs are still valid and up-to-date.
</I>
There is actually no other way it could work. i.e. if you issue a 
SUBSCRIBE on one connection and then a SEND on another, in the absence 
of an acknowledgement from the server - which is what the RECEIPT header 
provides - then those two commands will simply race each other, leading 
to a non-deterministic outcome.

Now, if the SUBSCRIBE and SEND were issued on the *same* connection then 
I'd expect no such race, i.e. the SEND should only be processed after 
the SUBSCRIBE and thus if the subscription matches the sent message then 
the subscriber should receive that.

Matthias.

</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033337.html">[rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header for SUBSCRIBE still recommended?
</A></li>
	<LI>Next message: <A HREF="033391.html">[rabbitmq-discuss] [rabbitmq-stomp] Is the use of receipt header for SUBSCRIBE still recommended?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33338">[ date ]</a>
              <a href="thread.html#33338">[ thread ]</a>
              <a href="subject.html#33338">[ subject ]</a>
              <a href="author.html#33338">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
