<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message order of delivery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20order%20of%20delivery&In-Reply-To=%3CCAKgmDnEyQ-SZu8awd2P%3D2F7CH%2Bj_KWVjzNL9SjQQCi8FJ2m8ug%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033340.html">
   <LINK REL="Next"  HREF="033342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message order of delivery</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20order%20of%20delivery&In-Reply-To=%3CCAKgmDnEyQ-SZu8awd2P%3D2F7CH%2Bj_KWVjzNL9SjQQCi8FJ2m8ug%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Message order of delivery">michael.laing at nytimes.com
       </A><BR>
    <I>Sun Jan 26 16:29:14 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033340.html">[rabbitmq-discuss] Message order of delivery
</A></li>
        <LI>Next message: <A HREF="033342.html">[rabbitmq-discuss] Message order of delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33341">[ date ]</a>
              <a href="thread.html#33341">[ thread ]</a>
              <a href="subject.html#33341">[ subject ]</a>
              <a href="author.html#33341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Since it is a new project, might be worthwhile to consider a design that
tolerates occasional minor ordering differences.

That is what we do, so we can scale horizontally.

For example, the messages originating from our internal groups are always
cached for up to 30 days in our global data store (Cassandra). It's
important to them that the messages are retrievable in order, and by this
they mean the order in which they submit them.

Basically, we insist that *they* timestamp them to the microsecond. We use
their timestamp, ultimately, as the Cassandra timestamp for that message,
guaranteeing order where it counts. Meanwhile, because we have many
clusters involved with parallelized services and may, in fact, be
replicating important messages, we cannot guarantee exact order during
processing.

Some funny stuff happened in staging using this approach due to lack of
time synchronization, but in production it has worked very well.

Michael Laing
NYTimes


On Sun, Jan 26, 2014 at 7:27 AM, Mysurf Mail &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">stammailbox at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> I need to choose a new Queue broker for my new project.
</I>&gt;<i> This time I need a scalable queue that supports pub/sub, and keeping
</I>&gt;<i> message ordering is a must.
</I>&gt;<i>
</I>&gt;<i> I read Alexis comment to an ancient question&lt;<A HREF="http://www.quora.com/RabbitMQ/RabbitMQ-vs-Kafka-which-one-for-durable-messaging-with-good-query-features">http://www.quora.com/RabbitMQ/RabbitMQ-vs-Kafka-which-one-for-durable-messaging-with-good-query-features</A>&gt;in Quoara. He writes
</I>&gt;<i>
</I>&gt;<i> &quot;Indeed, we think RabbitMQ provides stronger ordering than Kafka&quot;
</I>&gt;<i>
</I>&gt;<i> I read the message ordering section in rabbitmq docs&lt;<A HREF="http://www.rabbitmq.com/semantics.html">http://www.rabbitmq.com/semantics.html</A>&gt;
</I>&gt;<i> :
</I>&gt;<i>
</I>&gt;<i> &quot;Messages can be returned to the queue using AMQP methods that feature a
</I>&gt;<i> requeue parameter (basic.recover, basic.reject and basic.nack), or due to
</I>&gt;<i> a channel closing while holding unacknowledged messages...*With release
</I>&gt;<i> 2.7.0 and later it is still possible for individual consumers to observe
</I>&gt;<i> messages out of order* if the queue has multiple subscribers. This is due
</I>&gt;<i> to the actions of other subscribers who may requeue messages. From the
</I>&gt;<i> perspective of the queue the messages are always held in the publication
</I>&gt;<i> order.&quot;
</I>&gt;<i>
</I>&gt;<i> So, if I need to handle messages by their Order, I can only use rabbitMQ
</I>&gt;<i> with an exclusive queue  to each consumer? Is RabbitMQ still considered a
</I>&gt;<i> good solution for ordered message queuing?
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140126/f520a1af/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140126/f520a1af/attachment.html</A>&gt;
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033340.html">[rabbitmq-discuss] Message order of delivery
</A></li>
	<LI>Next message: <A HREF="033342.html">[rabbitmq-discuss] Message order of delivery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33341">[ date ]</a>
              <a href="thread.html#33341">[ thread ]</a>
              <a href="subject.html#33341">[ subject ]</a>
              <a href="author.html#33341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
