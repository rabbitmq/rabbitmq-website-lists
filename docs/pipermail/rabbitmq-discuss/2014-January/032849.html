<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] BasicGet ignoring routing key . Exchange is	Direct
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20BasicGet%20ignoring%20routing%20key%20.%20Exchange%20is%0A%09Direct&In-Reply-To=%3CCAMcAHLV6gk9Uv_bmVn97NYS4LvC%3DBB2%2BRadbO20wHOojzFkv5w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032850.html">
   <LINK REL="Next"  HREF="032855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] BasicGet ignoring routing key . Exchange is	Direct</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20BasicGet%20ignoring%20routing%20key%20.%20Exchange%20is%0A%09Direct&In-Reply-To=%3CCAMcAHLV6gk9Uv_bmVn97NYS4LvC%3DBB2%2BRadbO20wHOojzFkv5w%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] BasicGet ignoring routing key . Exchange is	Direct">videlalvaro at gmail.com
       </A><BR>
    <I>Thu Jan  2 20:47:11 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="032850.html">[rabbitmq-discuss] BasicGet ignoring routing key . Exchange is	Direct
</A></li>
        <LI>Next message: <A HREF="032855.html">[rabbitmq-discuss] BasicGet ignoring routing key . Exchange is	Direct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32849">[ date ]</a>
              <a href="thread.html#32849">[ thread ]</a>
              <a href="subject.html#32849">[ subject ]</a>
              <a href="author.html#32849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Replies inline:

On Thu, Jan 2, 2014 at 6:56 PM, Patrick Long &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pat at munkiisoft.com</A>&gt; wrote:
&gt;<i> We are using the C# .NET client library.
</I>&gt;<i>
</I>&gt;<i> I create a channel like so
</I>&gt;<i>
</I>&gt;<i> channel.ExchangeDeclare(workExchangeName, ExchangeType.Direct);
</I>
Here you create an exchange, not a channel. The channel in AMQP is
used to send commands to the broker, like queue declare or exchange
declare, and to also send/receive messages.

&gt;<i>
</I>&gt;<i> Then bind a queue like
</I>&gt;<i>
</I>&gt;<i> channel.QueueBind(this.WorkQueueName, workExchangeName,
</I>&gt;<i> BuildRoutingKey(buildNumber));
</I>&gt;<i>
</I>&gt;<i> Today I was trying to debug a failing message from a different environment.
</I>&gt;<i> I took the message's JSON from that server, via the Management UI, and
</I>&gt;<i> manually created a message on my local machine, again via the Management UI.
</I>&gt;<i> There was no option to set a specific RoutingKey, it created one for me with
</I>&gt;<i> the same name as the queue 'WorkQueue'.
</I>&gt;<i>
</I>&gt;<i> The local RabbitMQ had a couple of existing messages with a RoutingKey of
</I>&gt;<i> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
</I>&gt;<i>
</I>&gt;<i> When I call channel.BasicGet(this.WorkQueueName, false) in a loop it
</I>&gt;<i> dequeues all three messages even though the channel was created to look at a
</I>&gt;<i> queue and exchange with the routing key of
</I>&gt;<i> 'Development:STACK_1_WEBSERVER_V2:1:2.9.0.0'
</I>&gt;<i>
</I>&gt;<i> Any idea why it would be ignoring the RoutingKey?
</I>
basicGet (or basicConsume for that matter), don't look at routing keys
when getting messages. Again, the channel knows nothing about routing
keys used for the bindings above. basicGet or basicConsume will just
get the messages from the queue. That is, if a message was routed to
the queue, with whatever routing key, then that message can be
consumed from that queue using either basicGet or basicConsume. BTW,
unless you want to read one message at a time, then is better to use
basicConsume.

You can read more here: <A HREF="http://www.rabbitmq.com/tutorials/amqp-concepts.html">http://www.rabbitmq.com/tutorials/amqp-concepts.html</A>

Regards,

Alvaro

&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Patrick Long - Munkiisoft Ltd
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I></PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032850.html">[rabbitmq-discuss] BasicGet ignoring routing key . Exchange is	Direct
</A></li>
	<LI>Next message: <A HREF="032855.html">[rabbitmq-discuss] BasicGet ignoring routing key . Exchange is	Direct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32849">[ date ]</a>
              <a href="thread.html#32849">[ thread ]</a>
              <a href="subject.html#32849">[ subject ]</a>
              <a href="author.html#32849">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
