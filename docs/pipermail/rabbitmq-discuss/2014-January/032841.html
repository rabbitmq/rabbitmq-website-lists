<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue not shown in rabbitmqctl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20not%20shown%20in%20rabbitmqctl&In-Reply-To=%3C52C58F35.2050102%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032840.html">
   <LINK REL="Next"  HREF="032846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue not shown in rabbitmqctl</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20not%20shown%20in%20rabbitmqctl&In-Reply-To=%3C52C58F35.2050102%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Queue not shown in rabbitmqctl">emile at rabbitmq.com
       </A><BR>
    <I>Thu Jan  2 16:09:25 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="032840.html">[rabbitmq-discuss] Queue not shown in rabbitmqctl
</A></li>
        <LI>Next message: <A HREF="032846.html">[rabbitmq-discuss] pika/puka
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32841">[ date ]</a>
              <a href="thread.html#32841">[ thread ]</a>
              <a href="subject.html#32841">[ subject ]</a>
              <a href="author.html#32841">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/01/14 15:47, Emile Joubert wrote:
&gt;<i> On 16/12/13 08:45, Dimitri Minaev wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> These journal.jif and *rdq files consumed all file handles.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But the strange thing was that the queue with 50 million messages was
</I>&gt;&gt;<i> visible in the management interface, but not in `rabbitmqctl
</I>&gt;&gt;<i> list_queues' output. What might be the cause?
</I>&gt;<i> 
</I>&gt;<i> You can observe undefined behaviour when the VM runs out of file
</I>&gt;<i> descriptors.
</I>
But this is extremely unlikely, and you don't provide any evidence for
the assertion that this was the cause of the non-responsiveness/crash.
Are you sure about the diagnosis?

&gt;&gt;<i> And, while we're at it, shouldn't RabbtiMQ close the temporary files it
</I>&gt;&gt;<i> creates when there's not enough memory?
</I>&gt;<i> 
</I>&gt;<i> The broker does not coalesce temporary files on the basis of file
</I>&gt;<i> descriptor availability. You should make sure that the Erlang VM can
</I>&gt;<i> obtain as many descriptors as it needs and avoid running out.
</I>

The broker has a pool of file descriptors and these are shared between
different Erlang processes if there are not enough to go round, so the
broker won't crash after all the descriptors are in use. If you can
afford to then you should give the Erlang VM as many file descriptors as
it needs though.



-Emile


</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032840.html">[rabbitmq-discuss] Queue not shown in rabbitmqctl
</A></li>
	<LI>Next message: <A HREF="032846.html">[rabbitmq-discuss] pika/puka
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32841">[ date ]</a>
              <a href="thread.html#32841">[ thread ]</a>
              <a href="subject.html#32841">[ subject ]</a>
              <a href="author.html#32841">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
