<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Basic Nack not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Basic%20Nack%20not%20working&In-Reply-To=%3C3d7b441a-aa8f-4c06-aea0-95158ece2595%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033210.html">
   <LINK REL="Next"  HREF="033216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Basic Nack not working</H1>
    <B>Guillaume Ouellet</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Basic%20Nack%20not%20working&In-Reply-To=%3C3d7b441a-aa8f-4c06-aea0-95158ece2595%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Basic Nack not working">gui.ouellet at gmail.com
       </A><BR>
    <I>Tue Jan 21 13:50:10 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="033210.html">[rabbitmq-discuss] Capturing chang in IP address at the listener
</A></li>
        <LI>Next message: <A HREF="033216.html">[rabbitmq-discuss] Basic Nack not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33212">[ date ]</a>
              <a href="thread.html#33212">[ thread ]</a>
              <a href="subject.html#33212">[ subject ]</a>
              <a href="author.html#33212">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys,

Here is a reference to my stackoverflow post. Basically I'm wondering if 
I'm using nack as intented or not. 

<A HREF="http://stackoverflow.com/questions/21244281/basic-nack-not-being-processed">http://stackoverflow.com/questions/21244281/basic-nack-not-being-processed</A>

ere is what I am trying to do:

   1. Dequeue a message
   2. Do an action with the message
   3. If the action fails, put the message back in the queue
   4. If the action succeeds, acknowldge the message

My problem right now is that, if the action fails, the message isn't 
requeued, but stays unacknowledged. If I go in RabbitMQ web congifuration 
interface, I see that the messages are flagged as unacknowledged, even tho, 
the basic.Nack has been stepped over.

var delivery = subscription.Next();
var messageBody = delivery.Body;
try{
   action.Invoke(messageBody);
   subscription.Ack(delivery);}catch (Exception ex){
   subscription.Model..BasicNack(delivery.DeliveryTag, false, true);
   throw ex;}

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/7a252d72/attachment.html">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20140121/7a252d72/attachment.html</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033210.html">[rabbitmq-discuss] Capturing chang in IP address at the listener
</A></li>
	<LI>Next message: <A HREF="033216.html">[rabbitmq-discuss] Basic Nack not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33212">[ date ]</a>
              <a href="thread.html#33212">[ thread ]</a>
              <a href="subject.html#33212">[ subject ]</a>
              <a href="author.html#33212">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
