<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] AutoHeal not working after yanking network cable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AutoHeal%20not%20working%20after%20yanking%20network%20cable&In-Reply-To=%3CCAHEpgBCOD8WTZ12_CFOxi87HHbjigzK0QGknSpvVZ%2BmMRYQ0Zw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029743.html">
   <LINK REL="Next"  HREF="029735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] AutoHeal not working after yanking network cable</H1>
    <B>Chris</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AutoHeal%20not%20working%20after%20yanking%20network%20cable&In-Reply-To=%3CCAHEpgBCOD8WTZ12_CFOxi87HHbjigzK0QGknSpvVZ%2BmMRYQ0Zw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] AutoHeal not working after yanking network cable">stuff at moesel.net
       </A><BR>
    <I>Fri Aug 30 16:26:41 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029743.html">[rabbitmq-discuss] Upgrading RabbitMQ cluster
</A></li>
        <LI>Next message: <A HREF="029735.html">[rabbitmq-discuss] AutoHeal not working after yanking network cable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29734">[ date ]</a>
              <a href="thread.html#29734">[ thread ]</a>
              <a href="subject.html#29734">[ subject ]</a>
              <a href="author.html#29734">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

As part of our testing of failovers, we yank the network cable on a machine
(to simulate a switch going down).  When we plug it back in, RabbitMQ goes
into the network partition mode.  At first we were using the default
('ignore') option for dealing with partitions, but it caused problems.

After that we put the nodes into 'autoheal' mode.  This did not improve
things.  Not only did the minority node not rejoin the partition, but it
refused to restart without manually killing the process.  It also caused
problems on the other nodes (in the majority).  They stopped accepting
connections and I couldn't even log into the web UI.  So clearly,
'autoheal' didn't seem to work as intended.

We're using RabbitMQ 3.1.1.  Is there anything fixed since then that might
help with our situation?  Our end goal is to have everything working again
without intervention.  I understand that this could cause *some* data loss
during the autoheal process, but this is probably OK.  We'd love just to
get all three nodes happy again without having to manually restart any
nodes.

Thanks,
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130830/d1399474/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130830/d1399474/attachment.htm</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029743.html">[rabbitmq-discuss] Upgrading RabbitMQ cluster
</A></li>
	<LI>Next message: <A HREF="029735.html">[rabbitmq-discuss] AutoHeal not working after yanking network cable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29734">[ date ]</a>
              <a href="thread.html#29734">[ thread ]</a>
              <a href="subject.html#29734">[ subject ]</a>
              <a href="author.html#29734">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
