<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue Creation Rate and response times
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Creation%20Rate%20and%20response%20times&In-Reply-To=%3C556325346CA26341B6F0530E07F90D960170843548B1%40GBGH-EXCH-CMS.sig.ads%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029199.html">
   <LINK REL="Next"  HREF="029193.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue Creation Rate and response times</H1>
    <B>Jim Swainston</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Creation%20Rate%20and%20response%20times&In-Reply-To=%3C556325346CA26341B6F0530E07F90D960170843548B1%40GBGH-EXCH-CMS.sig.ads%3E"
       TITLE="[rabbitmq-discuss] Queue Creation Rate and response times">JSwainston at sportingsolutions.com
       </A><BR>
    <I>Fri Aug  9 15:15:57 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029199.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
        <LI>Next message: <A HREF="029193.html">[rabbitmq-discuss] cluster memory alarm blocks producer too long
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29209">[ date ]</a>
              <a href="thread.html#29209">[ thread ]</a>
              <a href="subject.html#29209">[ subject ]</a>
              <a href="author.html#29209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Simon, I will try an upgrade and see if that helps

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Simon MacMullen
Sent: 09 August 2013 14:30
To: Discussions about RabbitMQ
Cc: Jim Swainston
Subject: Re: [rabbitmq-discuss] Queue Creation Rate and response times

There was a bug (fixed in 2.8.7) where deleting non-durable things triggered an fsync. (Deleting durable things will cause an fsync anyway).

I assume if you're creating 20 queues/sec you're probably deleting at a similar rate? Depending on how fast your system can fsync that might be a problem.

Cheers, Simon

On 09/08/2013 11:22AM, Jim Swainston wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Would anyone be able to give me some guidance on what I can expect 
</I>&gt;<i> from Rabbit regarding the rate of queue creation, and what I can do to 
</I>&gt;<i> increase it.
</I>&gt;<i>
</I>&gt;<i> I have one Rabbit box with many virtual hosts, each host has a durable 
</I>&gt;<i> topic exchange.
</I>&gt;<i>
</I>&gt;<i> The large majority of the time our system is creating approximately 5 
</I>&gt;<i> queues per second with two bindings each across the whole rabbit box 
</I>&gt;<i> (I don't currently have figures for queue deletion) and each queue 
</I>&gt;<i> creation request averages about 350ms.
</I>&gt;<i>
</I>&gt;<i> The queues are non-durable and make use of x-expires, x-message-ttl 
</I>&gt;<i> and auto-delete.
</I>&gt;<i>
</I>&gt;<i> Recently I have started to get short lived spikes in queue creation up 
</I>&gt;<i> to approximately 20 queues per second across the whole rabbit box.
</I>&gt;<i>
</I>&gt;<i> When this happens the queue creation request time can jump up to 
</I>&gt;<i> anywhere between 10000ms and 20000ms.
</I>&gt;<i>
</I>&gt;<i> At the same time as this it appears as if the publishing request  to 
</I>&gt;<i> these exchanges also increases from about 40ms to about 5000ms.
</I>&gt;<i>
</I>&gt;<i> I am currently using RabbitMQ 2.8.6 on Erlang R13B03 running on an 
</I>&gt;<i> Ubuntu server with 2Gb RAM
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Jim
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> **********************************************************************
</I>&gt;<i> ******* P*Please consider the environment before printing this email 
</I>&gt;<i> or
</I>&gt;<i> attachments*
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This email and any attachments are confidential, protected by 
</I>&gt;<i> copyright and may be legally privileged. If you are not the intended 
</I>&gt;<i> recipient, then the dissemination or copying of this email is 
</I>&gt;<i> prohibited. If you have received this in error, please notify the 
</I>&gt;<i> sender by replying by email and then delete the email completely from 
</I>&gt;<i> your system. Neither Sporting Index nor the sender accepts 
</I>&gt;<i> responsibility for any virus, or any other defect which might affect 
</I>&gt;<i> any computer or IT system into which the email is received and/or 
</I>&gt;<i> opened. It is the responsibility of the recipient to scan the email 
</I>&gt;<i> and no responsibility is accepted for any loss or damage arising in any way from receipt or use of this email.
</I>&gt;<i> Sporting Index Ltd is a company registered in England and Wales with 
</I>&gt;<i> company number 2636842, whose registered office is at Gateway House, 
</I>&gt;<i> Milverton Street, London, SE11 4AP. Sporting Index Ltd is authorised 
</I>&gt;<i> and regulated by the UK Financial Services Authority (reg. no. 150404) 
</I>&gt;<i> and Gambling Commission (reg. no. 000-027343-R-308898-001). Any 
</I>&gt;<i> financial promotion contained herein has been issued and approved by 
</I>&gt;<i> Sporting Index Ltd.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Outbound email has been scanned for viruses and SPAM
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>
--
Simon MacMullen
RabbitMQ, Pivotal
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>

**********************************************************************
Please consider the environment before printing this email or attachments

This email and any attachments are confidential, protected by copyright and may be legally privileged.  If you are not the intended recipient, then the dissemination or copying of this email is prohibited. If you have received this in error, please notify the sender by replying by email and then delete the email completely from your system.  Neither Sporting Index nor the sender accepts responsibility for any virus, or any other defect which might affect any computer or IT system into which the email is received and/or opened.  It is the responsibility of the recipient to scan the email and no responsibility is accepted for any loss or damage arising in any way from receipt or use of this email.  Sporting Index Ltd is a company registered in England and Wales with company number 2636842, whose registered office is at Gateway House, Milverton Street, London, SE11 4AP.  Sporting Index Ltd is authorised and regulated by the UK Financial Services Authority (reg. no. 150404) and Gambling Commission (reg. no. 000-027343-R-308898-001).  Any financial promotion contained herein has been issued
and approved by Sporting Index Ltd.

Outbound email has been scanned for viruses and SPAM

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130809/05986e96/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130809/05986e96/attachment.htm</A>&gt;
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029199.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
	<LI>Next message: <A HREF="029193.html">[rabbitmq-discuss] cluster memory alarm blocks producer too long
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29209">[ date ]</a>
              <a href="thread.html#29209">[ thread ]</a>
              <a href="subject.html#29209">[ subject ]</a>
              <a href="author.html#29209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
