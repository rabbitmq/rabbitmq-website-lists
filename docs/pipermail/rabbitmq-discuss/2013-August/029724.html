<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ consumer rebind in .net
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20consumer%20rebind%20in%20.net&In-Reply-To=%3C549e83cd-2742-4f0f-9d3f-12acd97980a7%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029722.html">
   <LINK REL="Next"  HREF="029727.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ consumer rebind in .net</H1>
    <B>Arindam Nayak</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20consumer%20rebind%20in%20.net&In-Reply-To=%3C549e83cd-2742-4f0f-9d3f-12acd97980a7%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ consumer rebind in .net">nayak.arindam at gmail.com
       </A><BR>
    <I>Fri Aug 30 13:56:54 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029722.html">[rabbitmq-discuss] RabbitMQ consumer rebind in .net
</A></li>
        <LI>Next message: <A HREF="029727.html">[rabbitmq-discuss] RabbitMQ consumer rebind in .net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29724">[ date ]</a>
              <a href="thread.html#29724">[ thread ]</a>
              <a href="subject.html#29724">[ subject ]</a>
              <a href="author.html#29724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The main application exits because it has completed executing. Do you
consider that a problem? (BTW I note that RestartConsumer() is not
guaranteed to call Consume().)
- no, i am telling main application works still we have some data in queue, 
when queue is exhausted, still main application gets stuck in while loop 
(this is my expected behaviour, again when we have data in queue, it 
processes, this is the case for 90% of time). But out of that 10% time, i 
don't know what is the exact exception, so i have written restartconsumer 
to restart service, which is not working even, you have confirmed this.

Do you expect an exception that never arrives, or do you get an
exception that you don't expect, or do you get a different exception
from the one you expect?

yes, i am getting an exception that i don't event expect.

If the exception is unexpected could you please post the stacktrace?

If the exception is missing or wrong in your view can you point out
where you expect it to be thrown?

For this above question, i have to design separate consumer service and 
post you stacktrace and all required log files (give me 2 days time, i will 
do that), Sorry about that, i can not post my production rabbitmq server 
stacktrace, and consumers.


On Friday, 30 August 2013 16:49:15 UTC+5:30, Arindam Nayak wrote:
&gt;<i>
</I>&gt;<i> I have uploaded sample code for this. Link is - <A HREF="http://j.mp/rbconsumer.">http://j.mp/rbconsumer.</A>  
</I>&gt;<i>
</I>&gt;<i> How to reproduce this --
</I>&gt;<i>
</I>&gt;<i> Run the program , put break points on  (Consumer.cs)
</I>&gt;<i> 1. RestartConsumer() function start point,
</I>&gt;<i> 2. while (isConsuming) {
</I>&gt;<i> 3. catch (Exception exp)
</I>&gt;<i>
</I>&gt;<i> I have not written producer for this, when i run this, i put something in 
</I>&gt;<i> queue(i.e. producer kind) from management UI.
</I>&gt;<i>
</I>&gt;<i> So , when running the program it will 1st hit (#2 while (isConsuming)), 
</I>&gt;<i> and then introduce an exception (may be restart rabbitmq server or 
</I>&gt;<i> something else),
</I>&gt;<i> then it will hit &quot;#3catch(Exception exp)&quot;, this will subsequently call 
</I>&gt;<i> restart code, you can check how, main application exits while executing 
</I>&gt;<i> restart code.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thursday, 29 August 2013 17:28:35 UTC+5:30, Arindam Nayak wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have uploaded screencast for this - link  - 
</I>&gt;&gt;<i> <A HREF="http://screencast.com/t/NG75rMlwOlH1">http://screencast.com/t/NG75rMlwOlH1</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thursday, 29 August 2013 12:48:20 UTC+5:30, &#1053;&#1072;&#1080;&#1083;&#1100; &#1057;&#1072;&#1083;&#1080;&#1093;&#1086;&#1074; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Did you get any exception when trying recreate connection?
</I>&gt;&gt;&gt;<i> Where you lost connection - in consumer or producer? Can you provide 
</I>&gt;&gt;&gt;<i> your code? 
</I>&gt;&gt;&gt;<i> Without more detail information nobody can helps you.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &#1089;&#1088;&#1077;&#1076;&#1072;, 28 &#1072;&#1074;&#1075;&#1091;&#1089;&#1090;&#1072; 2013 &#1075;., 15:15:11 UTC+4 &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100; Arindam Nayak 
</I>&gt;&gt;&gt;<i> &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I have written a rabbitmq consumer service, which is a windows service, 
</I>&gt;&gt;&gt;&gt;<i> it constantly polls (something like while(true)) and reads queue data and 
</I>&gt;&gt;&gt;&gt;<i> process, it works fine for 4-5 days, but suddenly after that it gets 
</I>&gt;&gt;&gt;&gt;<i> detached from queue and stalls windows service until i manually restarts 
</I>&gt;&gt;&gt;&gt;<i> that windows service. I have using .net client libraries. I have also added 
</I>&gt;&gt;&gt;&gt;<i> restart code. that re creates connection , binds to queue and then listens 
</I>&gt;&gt;&gt;&gt;<i> , but that restart code does not work. When i tried to debug the service, 
</I>&gt;&gt;&gt;&gt;<i> it does not help, it stops debug process abruptly , at connection 
</I>&gt;&gt;&gt;&gt;<i> re-creation time. Please help.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130830/a39a31fa/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130830/a39a31fa/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029722.html">[rabbitmq-discuss] RabbitMQ consumer rebind in .net
</A></li>
	<LI>Next message: <A HREF="029727.html">[rabbitmq-discuss] RabbitMQ consumer rebind in .net
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29724">[ date ]</a>
              <a href="thread.html#29724">[ thread ]</a>
              <a href="subject.html#29724">[ subject ]</a>
              <a href="author.html#29724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
