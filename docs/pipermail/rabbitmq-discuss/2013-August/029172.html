<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Duplicated message and unknown delivery tag after ack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Duplicated%20message%20and%20unknown%20delivery%20tag%0A%20after%20ack&In-Reply-To=%3CCAMsy_NhhZJK9EKzd7%3DtwDraMhHgiopR10haxHGO5MUErh8FXjQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029067.html">
   <LINK REL="Next"  HREF="029174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack</H1>
    <B>Tim Robertson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Duplicated%20message%20and%20unknown%20delivery%20tag%0A%20after%20ack&In-Reply-To=%3CCAMsy_NhhZJK9EKzd7%3DtwDraMhHgiopR10haxHGO5MUErh8FXjQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack">timrobertson100 at gmail.com
       </A><BR>
    <I>Thu Aug  8 11:39:46 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029067.html">[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack
</A></li>
        <LI>Next message: <A HREF="029174.html">[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29172">[ date ]</a>
              <a href="thread.html#29172">[ thread ]</a>
              <a href="subject.html#29172">[ subject ]</a>
              <a href="author.html#29172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Were there any further insights into this?
I am seeing the same behavior on 3.1.3 on my mac (homebrew install) and
using rabbiteasy (1.2.0) and amqp java libraries 3.1.3.

I'm digging into it, but though I'd ask.

Cheers,
Tim



On Fri, Aug 2, 2013 at 6:20 PM, Gary Russell &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">grussell at gopivotal.com</A>&gt; wrote:

&gt;<i> Also, while I don't believe there have been any changes to Spring AMQP in
</I>&gt;<i> this area, I would recommend using the latest version - 1.2.0 (or, at least
</I>&gt;<i> 1.1.4).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, Aug 1, 2013 at 5:46 AM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Lukasz,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 31/07/13 17:30, Lukasz Olczak wrote:
</I>&gt;&gt;<i> &gt; com.rabbitmq.client.ShutdownSignalException: channel error; reason:
</I>&gt;&gt;<i> &gt; {#method&lt;channel.close&gt;(reply-code=406, reply-text=PRECONDITION_FAILED -
</I>&gt;&gt;<i> &gt; unknown delivery tag 1, class-id=60, method-id=80), null, &quot;&quot;}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There are legitimate ways in which multiple consumers could get hold of
</I>&gt;&gt;<i> the same message, in the same second. If any consumer rejects a message
</I>&gt;&gt;<i> or reconnects then unacknowledged messages will be returned to the
</I>&gt;&gt;<i> broker and may be delivered to other consumers. Such messages will have
</I>&gt;&gt;<i> the redelivered flag set.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The error you quote could also arise if an application acknowledges
</I>&gt;&gt;<i> messages incorrectly. Make sure that messages are only acknowledged once.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Anybody knows why RabbitMQ duplicates messages on a single broker with a
</I>&gt;&gt;<i> &gt; publisher and consumers connected through loopback interface?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is unlikely to have anything to do with the loopback interface
</I>&gt;&gt;<i> directly. Though loopback offers greater speed which may expose race
</I>&gt;&gt;<i> conditions.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you believe there is a broker error then please run your test via the
</I>&gt;&gt;<i> Tracer protocol analyser and send us the generated trace file:
</I>&gt;&gt;<i> <A HREF="http://www.rabbitmq.com/javadoc/com/rabbitmq/tools/Tracer.html">http://www.rabbitmq.com/javadoc/com/rabbitmq/tools/Tracer.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Emile
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> rabbitmq-discuss mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130808/0f3b3165/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130808/0f3b3165/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029067.html">[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack
</A></li>
	<LI>Next message: <A HREF="029174.html">[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29172">[ date ]</a>
              <a href="thread.html#29172">[ thread ]</a>
              <a href="subject.html#29172">[ subject ]</a>
              <a href="author.html#29172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
