<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue Creation Rate and response times
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Creation%20Rate%20and%20response%20times&In-Reply-To=%3C5204EEBD.1010206%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029207.html">
   <LINK REL="Next"  HREF="029209.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue Creation Rate and response times</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Creation%20Rate%20and%20response%20times&In-Reply-To=%3C5204EEBD.1010206%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Queue Creation Rate and response times">simon at rabbitmq.com
       </A><BR>
    <I>Fri Aug  9 14:29:33 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029207.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
        <LI>Next message: <A HREF="029209.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29199">[ date ]</a>
              <a href="thread.html#29199">[ thread ]</a>
              <a href="subject.html#29199">[ subject ]</a>
              <a href="author.html#29199">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There was a bug (fixed in 2.8.7) where deleting non-durable things 
triggered an fsync. (Deleting durable things will cause an fsync anyway).

I assume if you're creating 20 queues/sec you're probably deleting at a 
similar rate? Depending on how fast your system can fsync that might be 
a problem.

Cheers, Simon

On 09/08/2013 11:22AM, Jim Swainston wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Would anyone be able to give me some guidance on what I can expect from
</I>&gt;<i> Rabbit regarding the rate of queue creation, and what I can do to
</I>&gt;<i> increase it.
</I>&gt;<i>
</I>&gt;<i> I have one Rabbit box with many virtual hosts, each host has a durable
</I>&gt;<i> topic exchange.
</I>&gt;<i>
</I>&gt;<i> The large majority of the time our system is creating approximately 5
</I>&gt;<i> queues per second with two bindings each across the whole rabbit box (I
</I>&gt;<i> don&#8217;t currently have figures for queue deletion) and each queue creation
</I>&gt;<i> request averages about 350ms.
</I>&gt;<i>
</I>&gt;<i> The queues are non-durable and make use of x-expires, x-message-ttl and
</I>&gt;<i> auto-delete.
</I>&gt;<i>
</I>&gt;<i> Recently I have started to get short lived spikes in queue creation up
</I>&gt;<i> to approximately 20 queues per second across the whole rabbit box.
</I>&gt;<i>
</I>&gt;<i> When this happens the queue creation request time can jump up to
</I>&gt;<i> anywhere between 10000ms and 20000ms.
</I>&gt;<i>
</I>&gt;<i> At the same time as this it appears as if the publishing request  to
</I>&gt;<i> these exchanges also increases from about 40ms to about 5000ms.
</I>&gt;<i>
</I>&gt;<i> I am currently using RabbitMQ 2.8.6 on Erlang R13B03 running on an
</I>&gt;<i> Ubuntu server with 2Gb RAM
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Jim
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *****************************************************************************
</I>&gt;<i> P*Please consider the environment before printing this email or
</I>&gt;<i> attachments*
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This email and any attachments are confidential, protected by copyright
</I>&gt;<i> and may be legally privileged. If you are not the intended recipient,
</I>&gt;<i> then the dissemination or copying of this email is prohibited. If you
</I>&gt;<i> have received this in error, please notify the sender by replying by
</I>&gt;<i> email and then delete the email completely from your system. Neither
</I>&gt;<i> Sporting Index nor the sender accepts responsibility for any virus, or
</I>&gt;<i> any other defect which might affect any computer or IT system into which
</I>&gt;<i> the email is received and/or opened. It is the responsibility of the
</I>&gt;<i> recipient to scan the email and no responsibility is accepted for any
</I>&gt;<i> loss or damage arising in any way from receipt or use of this email.
</I>&gt;<i> Sporting Index Ltd is a company registered in England and Wales with
</I>&gt;<i> company number 2636842, whose registered office is at Gateway House,
</I>&gt;<i> Milverton Street, London, SE11 4AP. Sporting Index Ltd is authorised and
</I>&gt;<i> regulated by the UK Financial Services Authority (reg. no. 150404) and
</I>&gt;<i> Gambling Commission (reg. no. 000-027343-R-308898-001). Any financial
</I>&gt;<i> promotion contained herein has been issued and approved by Sporting
</I>&gt;<i> Index Ltd.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Outbound email has been scanned for viruses and SPAM
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>
-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029207.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
	<LI>Next message: <A HREF="029209.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29199">[ date ]</a>
              <a href="thread.html#29199">[ thread ]</a>
              <a href="subject.html#29199">[ subject ]</a>
              <a href="author.html#29199">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
