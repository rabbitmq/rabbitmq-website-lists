<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] ConnectFailureException on CreateConnection()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ConnectFailureException%20on%20CreateConnection%28%29&In-Reply-To=%3C5211CE19.7010806%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029355.html">
   <LINK REL="Next"  HREF="029356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] ConnectFailureException on CreateConnection()</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20ConnectFailureException%20on%20CreateConnection%28%29&In-Reply-To=%3C5211CE19.7010806%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] ConnectFailureException on CreateConnection()">matthias at rabbitmq.com
       </A><BR>
    <I>Mon Aug 19 08:49:45 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029355.html">[rabbitmq-discuss] ConnectFailureException on CreateConnection()
</A></li>
        <LI>Next message: <A HREF="029356.html">[rabbitmq-discuss] ANN: SimpleAmqpClient v2.3 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29411">[ date ]</a>
              <a href="thread.html#29411">[ thread ]</a>
              <a href="subject.html#29411">[ subject ]</a>
              <a href="author.html#29411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15/08/13 18:26, akmartin wrote:
&gt;<i> The following exception is thrown when I try to connect to RabbitMq.
</I>&gt;<i> My retry logic forces another attempt and the second time through it
</I>&gt;<i> succeeds. Every invocation is configured with the same hostname and
</I>&gt;<i> resolve to the same endpoint.
</I>
Are these connection attempts made from some sort of test framework, 
that starts rabbit, connects, runs a test, stops rabbit, etc?

I am asking because...

&gt;<i> =INFO REPORT==== 15-Aug-2013::13:13:58 ===
</I>&gt;<i> Management plugin started. Port: 15672
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 15-Aug-2013::13:13:58 ===
</I>&gt;<i> accepting AMQP connection &lt;0.331.0&gt; (10.20.40.96:53725 -&gt; 10.20.40.90:5672)
</I>
...this shows a connection getting accepted immediately as the broker 
comes up.

So I suspect what's happening is that the failed connection attempts 
occur during the broker startup phase, which suggests your test code, or 
whatever it is, doesn't wait for the broker to fully start before 
attempting to connect.

Unfortunately, afaik, there is no easy way on Windows to wait for the 
broker to start. So you may just have to retry the connection attempts 
until they succeed.

&gt;<i> I am running 3.1.3. Waiting on updated nuget packages to upgrade
</I>&gt;<i> servers.
</I>
You can upgrade the server w/o upgrading the clients. And vice versa.


Regards,

Matthias.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029355.html">[rabbitmq-discuss] ConnectFailureException on CreateConnection()
</A></li>
	<LI>Next message: <A HREF="029356.html">[rabbitmq-discuss] ANN: SimpleAmqpClient v2.3 released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29411">[ date ]</a>
              <a href="thread.html#29411">[ thread ]</a>
              <a href="subject.html#29411">[ subject ]</a>
              <a href="author.html#29411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
