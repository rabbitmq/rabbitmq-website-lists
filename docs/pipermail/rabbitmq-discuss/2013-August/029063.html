<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Fwd:  Possible bug in .NET library,	with IConnection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20%20Possible%20bug%20in%20.NET%20library%2C%0A%09with%20IConnection&In-Reply-To=%3C693ECBAB-71BF-46C9-86C7-A8013354B72A%40gopivotal.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029397.html">
   <LINK REL="Next"  HREF="029065.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Fwd:  Possible bug in .NET library,	with IConnection</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Fwd%3A%20%20Possible%20bug%20in%20.NET%20library%2C%0A%09with%20IConnection&In-Reply-To=%3C693ECBAB-71BF-46C9-86C7-A8013354B72A%40gopivotal.com%3E"
       TITLE="[rabbitmq-discuss] Fwd:  Possible bug in .NET library,	with IConnection">mklishin at gopivotal.com
       </A><BR>
    <I>Fri Aug  2 09:52:52 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029397.html">[rabbitmq-discuss] Throughput observation with RabbitMQ-3.1.3	and Erlang R16B01 - Single Node and Cluster Node
</A></li>
        <LI>Next message: <A HREF="029065.html">[rabbitmq-discuss] Maximum achievable concurrent Web STOMP plugin on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29063">[ date ]</a>
              <a href="thread.html#29063">[ thread ]</a>
              <a href="subject.html#29063">[ subject ]</a>
              <a href="author.html#29063">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Adding rabbitmq-discuss back.

&gt;<i> From: Burtsev Aleksey &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">brokenpipe.coder at gmail.com</A>&gt;
</I>&gt;<i> To: Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Yes. It's not exactly a bug in your .NET client, but it's very weak spot in you code. It is very easy to stumble on this problem. I had to wrap all calls to IModel in if blocks checking CloseReason.
</I>
It sounds like a bug to me ;)

&gt;<i> At least you should set closeReason for IModel and inner ISession when IModel.Close() is called. Even better would be to add IsClosing prop to Imodel and check it before sending commands to ISession, this will not break you existing session shutdown command sequence.
</I>&gt;<i> 
</I>&gt;<i> On Wed, Jul 31, 2013 at 9:58 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt; wrote:
</I>&gt;<i>  Burtsev Aleksey:
</I>&gt;<i> 
</I>&gt;<i> &gt; The code inside ModelBase.BasicGet doesn't Enqueue BasicGetRpcContinuation because m_closeReason  is not null
</I>&gt;<i> &gt; but send this command to server using _Private_BasicGet(), this method checks ModelBase.m_sessions.m_closeReason which is not null, and then when server reply is received command handler for BasicGetEmpty tries to dequeue (calls Next()) item from m_continuationQueue in which BasicGetRpcContinuation  wasn't put.
</I>&gt;<i> 
</I>&gt;<i> So in order to reproduce the problem one has to use basic.get on a closed channel?
</I>&gt;<i> --
</I>&gt;<i> MK
</I>
--
MK

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130802/a8796c6b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130802/a8796c6b/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130802/a8796c6b/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130802/a8796c6b/attachment.pgp</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029397.html">[rabbitmq-discuss] Throughput observation with RabbitMQ-3.1.3	and Erlang R16B01 - Single Node and Cluster Node
</A></li>
	<LI>Next message: <A HREF="029065.html">[rabbitmq-discuss] Maximum achievable concurrent Web STOMP plugin on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29063">[ date ]</a>
              <a href="thread.html#29063">[ thread ]</a>
              <a href="subject.html#29063">[ subject ]</a>
              <a href="author.html#29063">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
