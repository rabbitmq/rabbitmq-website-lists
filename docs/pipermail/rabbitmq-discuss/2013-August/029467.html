<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Can't use backtick in password
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%27t%20use%20backtick%20in%20password&In-Reply-To=%3CCAGZiy71fgpE09e-fhBDQVDU0HCsn6L-ic8Xsd6fOGjk%3DT8pz8Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029466.html">
   <LINK REL="Next"  HREF="029468.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Can't use backtick in password</H1>
    <B>Kal Sze</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Can%27t%20use%20backtick%20in%20password&In-Reply-To=%3CCAGZiy71fgpE09e-fhBDQVDU0HCsn6L-ic8Xsd6fOGjk%3DT8pz8Q%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Can't use backtick in password">swordangel at gmail.com
       </A><BR>
    <I>Tue Aug 20 14:06:21 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029466.html">[rabbitmq-discuss] Can't use backtick in password
</A></li>
        <LI>Next message: <A HREF="029468.html">[rabbitmq-discuss] Can't use backtick in password
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29467">[ date ]</a>
              <a href="thread.html#29467">[ thread ]</a>
              <a href="subject.html#29467">[ subject ]</a>
              <a href="author.html#29467">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Simon,

Sorry. Maybe I was jumping to conclusions. It appears that the &quot;fix&quot;
is also broken in subtle ways. If I apply the fix and try this:

    $ sudo rabbitmqctl set_permissions -p foo foo &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;

It would fail. I tried sticking a line of  `echo &quot;$@&quot;` in
/usr/lib/rabbitmq/bin/rabbitmqctl, right before the `exec` command.
Somehow the '-p' ends up getting dropped from $@. I don't really know
why.

So the only thing we are sure about is that the current rabbitmqctl
script in version 3.1.5 is broken for edge cases with special
characters in the password.

Best Regards,
Kal

On 20 August 2013 20:58, Simon MacMullen &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">simon at rabbitmq.com</A>&gt; wrote:
&gt;<i> On 20/08/13 08:12, Kal Sze wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> After obtaining some help from the #bash channel on Freenode IRC, it
</I>&gt;&gt;<i> appears that the correct fix would be to use proper string substitution
</I>&gt;&gt;<i> in the rabbitmqctlscript:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Replace this line:\
</I>&gt;&gt;<i>      su rabbitmq -s /bin/sh -c &quot;/usr/lib/rabbitmq/bin/${SCRIPT}
</I>&gt;&gt;<i> ${CMDLINE}&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> With this line:
</I>&gt;&gt;<i>      su rabbitmq -s /bin/sh -c 'script=$1; shift; &quot;$script&quot; &quot;$@&quot;' _
</I>&gt;&gt;<i> &quot;/usr/lib/rabbitmq/bin/${SCRIPT}&quot; &quot;$@&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ah, thank you. We will stare carefully at this change, all the while cursing
</I>&gt;<i> whoever invented string substitution in shell scripts... :-)
</I>&gt;<i>
</I>&gt;<i> Cheers, Simon
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Simon MacMullen
</I>&gt;<i> RabbitMQ, Pivotal
</I></PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029466.html">[rabbitmq-discuss] Can't use backtick in password
</A></li>
	<LI>Next message: <A HREF="029468.html">[rabbitmq-discuss] Can't use backtick in password
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29467">[ date ]</a>
              <a href="thread.html#29467">[ thread ]</a>
              <a href="subject.html#29467">[ subject ]</a>
              <a href="author.html#29467">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
