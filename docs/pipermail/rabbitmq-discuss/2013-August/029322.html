<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Content payload structure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Content%20payload%20structure&In-Reply-To=%3C939220d4-01b8-4527-a00a-33c1e12fa10f%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029309.html">
   <LINK REL="Next"  HREF="029268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Content payload structure</H1>
    <B>Nicolai G.</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Content%20payload%20structure&In-Reply-To=%3C939220d4-01b8-4527-a00a-33c1e12fa10f%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Content payload structure">utromvecherom at gmail.com
       </A><BR>
    <I>Thu Aug 15 10:56:15 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029309.html">[rabbitmq-discuss] Content payload structure
</A></li>
        <LI>Next message: <A HREF="029268.html">[rabbitmq-discuss] ANN: rabbitmq-c v0.4.0 is released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29322">[ date ]</a>
              <a href="thread.html#29322">[ thread ]</a>
              <a href="subject.html#29322">[ subject ]</a>
              <a href="author.html#29322">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, my bad. Looking at previous sections of spec 
(<A HREF="http://www.rabbitmq.com/resources/specs/amqp-xml-doc0-9-1.pdf">http://www.rabbitmq.com/resources/specs/amqp-xml-doc0-9-1.pdf</A>) I get used 
that classes difine no properties, but the Basic class does (1.8.1.). 
Navigating through Table of Contents I didn't notice the table of 
properties defined by the Basic class :(

On Thursday, August 15, 2013 10:34:16 AM UTC+3, Nicolai G. wrote:
&gt;<i>
</I>&gt;<i> I read the spec, and this particular segment I've read very attentively:
</I>&gt;<i> From AMQP 0-9-1, s 4.2.6.1 &quot;The Content Header&quot;
</I>&gt;<i>
</I>&gt;<i> &lt;quote&gt;
</I>&gt;<i> - The property flags are an array of bits that indicate the presence or 
</I>&gt;<i> absence of each property value in sequence. The bits are ordered from most 
</I>&gt;<i> high to low - bit 15 indicates the first property.
</I>&gt;<i>
</I>&gt;<i> - The property flags can specify more than 16 properties. If the last bit 
</I>&gt;<i> (0) is set, this indicates that a further property flags field follows. 
</I>&gt;<i> There are many property flags fields as needed.
</I>&gt;<i>
</I>&gt;<i> - The property values are class-specific AMQP data fields.
</I>&gt;<i>
</I>&gt;<i> - Bit properties are indicated ONLY by their respective property flag (1 
</I>&gt;<i> or 0) and are never present in the property list.
</I>&gt;<i> &lt;/quote&gt;
</I>&gt;<i>
</I>&gt;<i> I'm sorry for asking you silly questions. But how it influence on the 
</I>&gt;<i> interpretation of binary?
</I>&gt;<i>
</I>&gt;<i> For example.
</I>&gt;<i> Client application receives 
</I>&gt;<i> Basic.deliver
</I>&gt;<i> | type (octet)| channel (short)| size (long)|  class-id(short) | method-id 
</I>&gt;<i> (short) | payload | frame-end (octet) |
</I>&gt;<i>
</I>&gt;<i> Binary:
</I>&gt;<i> | 0x01 | 0x0042 | 0x00000032 | 0x003C | 0x0028 |  Basic.deliver payload | 
</I>&gt;<i> 0xCE |
</I>&gt;<i>
</I>&gt;<i> And the content comes:
</I>&gt;<i>
</I>&gt;<i> | type (octet)| channel (short)| size (long)|  class-id(short) | weight 
</I>&gt;<i> (short) | body-size (long long) | property-flags (2 octets ) | property 
</I>&gt;<i> list |
</I>&gt;<i>
</I>&gt;<i> Binary
</I>&gt;<i> | 0x02 | 0x0042 | 0x0000000E + Z | 0x003C | 0x0000 |  body-size = 16 | 
</I>&gt;<i> PROPERTY_FLAGS | Z octets | 0xCE |
</I>&gt;<i>
</I>&gt;<i> So if PROPERTY_FLAGS = 0x0000 what is in Z image, how to interpret it?
</I>&gt;<i>
</I>&gt;<i> if PROPERTY_FLAGS = 0x0080 or PROPERTY_FLAGS = whatever  (0x0 &lt;= whatever 
</I>&gt;<i> =&lt; 0xFFFF)
</I>&gt;<i>
</I>&gt;<i> I've looked at other clients implementation. For Ruby I found some tips in 
</I>&gt;<i> <A HREF="http://rubydoc.info/github/ruby-amqp/amq-protocol/master/AMQ/Protocol/Basic">http://rubydoc.info/github/ruby-amqp/amq-protocol/master/AMQ/Protocol/Basic</A>
</I>&gt;<i> But where these constants came from? 
</I>&gt;<i> Are they documented? or it's just peer2peer knowledge?
</I>&gt;<i>
</I>&gt;<i> Or are they client2client meaningful and it's up to them to make an 
</I>&gt;<i> agreement on their meaning and way of interpretation?
</I>&gt;<i>
</I>&gt;<i> Thanx
</I>&gt;<i>
</I>&gt;<i> On Wednesday, August 14, 2013 12:58:51 AM UTC+3, Nicolai G. wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hello!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I try to implement yet another amqp-client (on C++, heavily integrated 
</I>&gt;&gt;<i> with our base frameworks). And I've come to the point of interpreting the 
</I>&gt;&gt;<i> content header payload, and I cannot find clear description of the 
</I>&gt;&gt;<i> relationship between property-flags and property-list. If I got 
</I>&gt;&gt;<i> F1%b1,F2%b1, ... ,Fn%b0 in property-flags, what *amqp-field sequence I MUST 
</I>&gt;&gt;<i> expect in property-list?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can anyone, please, point me on any doc where I can find this information?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i> Nicolai
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130815/bc540a1b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130815/bc540a1b/attachment.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029309.html">[rabbitmq-discuss] Content payload structure
</A></li>
	<LI>Next message: <A HREF="029268.html">[rabbitmq-discuss] ANN: rabbitmq-c v0.4.0 is released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29322">[ date ]</a>
              <a href="thread.html#29322">[ thread ]</a>
              <a href="subject.html#29322">[ subject ]</a>
              <a href="author.html#29322">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
