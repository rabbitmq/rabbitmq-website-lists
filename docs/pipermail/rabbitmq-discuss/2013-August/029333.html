<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20receive%20STOMP%20receipt%20only%20after%20the%0A%20consumer%20has%20acknowledged%20the%20message%3F&In-Reply-To=%3C520CAE19.4030909%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029311.html">
   <LINK REL="Next"  HREF="029361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20receive%20STOMP%20receipt%20only%20after%20the%0A%20consumer%20has%20acknowledged%20the%20message%3F&In-Reply-To=%3C520CAE19.4030909%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?">emile at rabbitmq.com
       </A><BR>
    <I>Thu Aug 15 11:31:53 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029311.html">[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
</A></li>
        <LI>Next message: <A HREF="029361.html">[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29333">[ date ]</a>
              <a href="thread.html#29333">[ thread ]</a>
              <a href="subject.html#29333">[ subject ]</a>
              <a href="author.html#29333">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

On 15/08/13 09:03, joshua__lim wrote:

&gt;<i> What I've noticed from my tests is that the receipt sent is to the producer
</I>&gt;<i> right after the broker captures the message.  This receipt is not adequate
</I>&gt;<i> for reliable delivery since the message hasn't been sent to the consumer
</I>&gt;<i> yet.
</I>
Messages can be transferred reliably from publishers to the broker.
(using transactions or confirms). Messages can also be transferred
reliably from the broker to consumers. (using acknowledgements)
Taken together this provides reliable transfer from publishers to consumers.

&gt;<i> I'm trying to figure out if it is possible for the receipt to be sent by the
</I>&gt;<i> broker only after the recipient has acknowledged the message?
</I>
No. STOMP receipts are issued once the broker successfully takes
responsibility for a message. That does not translate to a guarantee
that it was acknowledged by the consumer.

If you want an end-to-end proof of delivery from the consumer then you
must set up an independent line of communication between the consumer
and the producer and send a proof-of-delivery token back along that route.

Depending on your needs you may wish to make consumer acknowledgements
synchronous by acknowledging in a transaction before sending the
proof-of-delivery.

&gt;<i> &quot;The broker will confirm messages once:....
</I>&gt;<i> ... b) has been consumed and, if necessary, acknowledged.&quot;
</I>
That is a semantically irrelevant optimisation which cannot be used to
obtain a guarantee that the message was acknowledged by a consumer.
(That statement has since been remove from the website. The optimisation
remains in place though.)



-Emile



</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029311.html">[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
</A></li>
	<LI>Next message: <A HREF="029361.html">[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29333">[ date ]</a>
              <a href="thread.html#29333">[ thread ]</a>
              <a href="subject.html#29333">[ subject ]</a>
              <a href="author.html#29333">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
