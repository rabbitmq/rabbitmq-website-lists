<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queue Creation Rate and response times
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Creation%20Rate%20and%20response%20times&In-Reply-To=%3C556325346CA26341B6F0530E07F90D960170843548B0%40GBGH-EXCH-CMS.sig.ads%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029197.html">
   <LINK REL="Next"  HREF="029199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queue Creation Rate and response times</H1>
    <B>Jim Swainston</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queue%20Creation%20Rate%20and%20response%20times&In-Reply-To=%3C556325346CA26341B6F0530E07F90D960170843548B0%40GBGH-EXCH-CMS.sig.ads%3E"
       TITLE="[rabbitmq-discuss] Queue Creation Rate and response times">JSwainston at sportingsolutions.com
       </A><BR>
    <I>Fri Aug  9 15:15:05 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029197.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
        <LI>Next message: <A HREF="029199.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29207">[ date ]</a>
              <a href="thread.html#29207">[ thread ]</a>
              <a href="subject.html#29207">[ subject ]</a>
              <a href="author.html#29207">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi MK,

Thanks for the response. I will take a look at vmstat etc.
The exchanges are durable topic exchanges. The rabbit box is a dedicated server accessed over LAN.
Thanks for the script I will give it a go and see what happens.

Jim

-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Michael Klishin
Sent: 09 August 2013 14:10
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] Queue Creation Rate and response times

Jim Swainston:

&gt;<i> Recently I have started to get short lived spikes in queue creation up to approximately 20 queues per second across the whole rabbit box.
</I>&gt;<i> When this happens the queue creation request time can jump up to anywhere between 10000ms and 20000ms.
</I>&gt;<i> At the same time as this it appears as if the publishing request  to these exchanges also increases from about 40ms to about 5000ms.
</I>
Have you tried running vmstat or iostat to see if can be a limited I/O issue? Do you create exchanges as durable? Is RabbitMQ running on localhost, accessed over LAN or WAN?

I have a benchmark in one of the clients (Bunny) that demonstrates about 0.77 KGhz for queue.declare with server-named, non-durable, exclusive queues:

<A HREF="https://github.com/ruby-amqp/bunny/blob/master/benchmarks/queue_declare.rb">https://github.com/ruby-amqp/bunny/blob/master/benchmarks/queue_declare.rb</A>

To run it, do bundle install and then bundle exec ruby benchmarks/queue_declare.rb
--
MK

**********************************************************************
Please consider the environment before printing this email or attachments

This email and any attachments are confidential, protected by copyright and may be legally privileged.  If you are not the intended recipient, then the dissemination or copying of this email is prohibited. If you have received this in error, please notify the sender by replying by email and then delete the email completely from your system.  Neither Sporting Index nor the sender accepts responsibility for any virus, or any other defect which might affect any computer or IT system into which the email is received and/or opened.  It is the responsibility of the recipient to scan the email and no responsibility is accepted for any loss or damage arising in any way from receipt or use of this email.  Sporting Index Ltd is a company registered in England and Wales with company number 2636842, whose registered office is at Gateway House, Milverton Street, London, SE11 4AP.  Sporting Index Ltd is authorised and regulated by the UK Financial Services Authority (reg. no. 150404) and Gambling Commission (reg. no. 000-027343-R-308898-001).  Any financial promotion contained herein has been issued
and approved by Sporting Index Ltd.

Outbound email has been scanned for viruses and SPAM

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130809/09871cac/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130809/09871cac/attachment.htm</A>&gt;
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029197.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
	<LI>Next message: <A HREF="029199.html">[rabbitmq-discuss] Queue Creation Rate and response times
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29207">[ date ]</a>
              <a href="thread.html#29207">[ thread ]</a>
              <a href="subject.html#29207">[ subject ]</a>
              <a href="author.html#29207">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
