<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] File descriptors slowly reaching 1024...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20File%20descriptors%20slowly%20reaching%201024...&In-Reply-To=%3C521F1C1F.3000907%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029551.html">
   <LINK REL="Next"  HREF="029691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] File descriptors slowly reaching 1024...</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20File%20descriptors%20slowly%20reaching%201024...&In-Reply-To=%3C521F1C1F.3000907%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] File descriptors slowly reaching 1024...">simon at rabbitmq.com
       </A><BR>
    <I>Thu Aug 29 11:02:07 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029551.html">[rabbitmq-discuss] File descriptors slowly reaching 1024...
</A></li>
        <LI>Next message: <A HREF="029691.html">[rabbitmq-discuss] File descriptors slowly reaching 1024...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29677">[ date ]</a>
              <a href="thread.html#29677">[ thread ]</a>
              <a href="subject.html#29677">[ subject ]</a>
              <a href="author.html#29677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/08/2013 1:03PM, Michael Klishin wrote:
&gt;<i> Guillaume Vernat:
</I>&gt;<i>
</I>&gt;&gt;<i> How to reduce used file descriptors with rabbimq 3.0.x cluster ?
</I>&gt;&gt;<i> Master is slowly reaching 1024. Help say that it doesnt matter but
</I>&gt;&gt;<i> I dislike this yellow color and I do prefer the green one :)
</I>
If there is a gradual increase that suggests that some client is leaking 
connections (each connection takes one FD, RabbitMQ then uses some of 
the rest for queue disk storage). Check the connections list in mgmt to 
see if anything is out of the ordinary.

If there is no connection leak but you have a large number of queues 
then the number of FDs used by RabbitMQ for disk storage can be quite 
large - but this is softer; as FDs start to become scarce RabbitMQ will 
try to use fewer for disk storage.

&gt;<i> Guillaume,
</I>&gt;<i>
</I>&gt;<i> You can keep fewer connections open but you really should increase
</I>&gt;<i> open file descriptors limit for the rabbitmq user instead:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://docs.basho.com/riak/latest/ops/tuning/open-files-limit/#Changing-the-limit">http://docs.basho.com/riak/latest/ops/tuning/open-files-limit/#Changing-the-limit</A>
</I>&gt;<i><A HREF="https://cs.uwaterloo.ca/~brecht/servers/openfiles.html">https://cs.uwaterloo.ca/~brecht/servers/openfiles.html</A>
</I>
Of course, if something is leaking connections, then increasing the 
limit will only delay the problem :-)

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029551.html">[rabbitmq-discuss] File descriptors slowly reaching 1024...
</A></li>
	<LI>Next message: <A HREF="029691.html">[rabbitmq-discuss] File descriptors slowly reaching 1024...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29677">[ date ]</a>
              <a href="thread.html#29677">[ thread ]</a>
              <a href="subject.html#29677">[ subject ]</a>
              <a href="author.html#29677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
