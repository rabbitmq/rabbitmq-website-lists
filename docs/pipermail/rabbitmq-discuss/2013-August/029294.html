<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq 3.1.4 upgrade lost cluster config
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%203.1.4%20upgrade%20lost%20cluster%20config&In-Reply-To=%3C20130814194421.GC15669%40red-sonja%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029293.html">
   <LINK REL="Next"  HREF="029343.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq 3.1.4 upgrade lost cluster config</H1>
    <B>Morty</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%203.1.4%20upgrade%20lost%20cluster%20config&In-Reply-To=%3C20130814194421.GC15669%40red-sonja%3E"
       TITLE="[rabbitmq-discuss] rabbitmq 3.1.4 upgrade lost cluster config">morty+rabbitmq at frakir.org
       </A><BR>
    <I>Wed Aug 14 20:44:21 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029293.html">[rabbitmq-discuss] rabbitmq 3.1.4 upgrade lost cluster config
</A></li>
        <LI>Next message: <A HREF="029343.html">[rabbitmq-discuss] rabbitmq 3.1.4 upgrade lost cluster config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29294">[ date ]</a>
              <a href="thread.html#29294">[ thread ]</a>
              <a href="subject.html#29294">[ subject ]</a>
              <a href="author.html#29294">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 14, 2013 at 03:17:17PM -0400, Morty wrote:

&gt;<i> We use puppet.  The configurations are templated and enforced to be
</I>&gt;<i> identical except for cluster node names, which are different between
</I>&gt;<i> clusters.  If a config changes that is only read at server start, such
</I>&gt;<i> as /etc/rabbitmq/rabbitmq.config, then rabbitmq is automatically
</I>&gt;<i> restarted by puppet.
</I>
BTW: the workaround I described earlier worked even better than
expected.  I just moved aside /var/lib/rabbitmq/mnesia and started
rabbitmq.  The node rejoined the cluster immediately and all was good.

I'd prefer to understand the cause of this, or a way to detect
possible impending problems.  In particular, I've got one more cluster
still to upgrade, and it's the most important (left for last, for good
reason!)  And it would be nice to understand this for future
reference.

NB: I've done 3.0.x and 3.1.x upgrades on these three clusters before
without seeing this type of issue.

- Morty
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029293.html">[rabbitmq-discuss] rabbitmq 3.1.4 upgrade lost cluster config
</A></li>
	<LI>Next message: <A HREF="029343.html">[rabbitmq-discuss] rabbitmq 3.1.4 upgrade lost cluster config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29294">[ date ]</a>
              <a href="thread.html#29294">[ thread ]</a>
              <a href="subject.html#29294">[ subject ]</a>
              <a href="author.html#29294">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
