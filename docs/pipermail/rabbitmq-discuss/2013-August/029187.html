<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Bug/Behavior Change in binds to header exchanges in rabbitmq 3.1.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Bug/Behavior%20Change%20in%20binds%20to%20header%0A%20exchanges%20in%20rabbitmq%203.1.0&In-Reply-To=%3C47e035bc-f794-4869-aa4f-83b281326a93%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029182.html">
   <LINK REL="Next"  HREF="029189.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Bug/Behavior Change in binds to header exchanges in rabbitmq 3.1.0</H1>
    <B>Matt Campbell</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Bug/Behavior%20Change%20in%20binds%20to%20header%0A%20exchanges%20in%20rabbitmq%203.1.0&In-Reply-To=%3C47e035bc-f794-4869-aa4f-83b281326a93%40googlegroups.com%3E"
       TITLE="[rabbitmq-discuss] Bug/Behavior Change in binds to header exchanges in rabbitmq 3.1.0">matt at soupmatt.com
       </A><BR>
    <I>Thu Aug  8 19:57:40 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029182.html">[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack
</A></li>
        <LI>Next message: <A HREF="029189.html">[rabbitmq-discuss] Bug/Behavior Change in binds to header exchanges in rabbitmq 3.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29187">[ date ]</a>
              <a href="thread.html#29187">[ thread ]</a>
              <a href="subject.html#29187">[ subject ]</a>
              <a href="author.html#29187">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I received the following reply from one of the rabbit guys. I'm not sure 
why he didn't reply to the group. I am including it here so that i might 
help others.


On Mon, May 6, 2013 at 12:20 PM, Matthias Radestock &lt;email removed&gt; wrote:

We introduced validation of the x-match header in 3.1 - a change that 
unfortunately didn't get mentioned in the release notes.

As part of that, bindings with no x-match header are now rejected whereas 
previously they would be treated as 'all' matches.

The spec is vague in this regard; it neither says that x-match must be 
present nor what should happen when it isn't.

I have filed a bug to explore whether we should revert to the original 
behaviour, though given the spec vagueness it is probably best not to 
depend on that in applications.

As an alternative to changing the bindings in your code, you could 
introduce an intermediate fanout exchange, either

a) in front of the headers exchange, with publishers publishing to that 
instead of the headers exchange, or

b) behind the headers exchange, bound to it with x-match=all, so that 
selected queues can bind to that w/o having to set a header

Regards,

Matthias.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130808/fad3ea86/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130808/fad3ea86/attachment.htm</A>&gt;
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029182.html">[rabbitmq-discuss] Duplicated message and unknown delivery tag after ack
</A></li>
	<LI>Next message: <A HREF="029189.html">[rabbitmq-discuss] Bug/Behavior Change in binds to header exchanges in rabbitmq 3.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29187">[ date ]</a>
              <a href="thread.html#29187">[ thread ]</a>
              <a href="subject.html#29187">[ subject ]</a>
              <a href="author.html#29187">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
