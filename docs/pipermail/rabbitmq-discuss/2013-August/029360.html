<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to catch RESOURCE_LOCKED exceptions in erlang client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20catch%20RESOURCE_LOCKED%20exceptions%20in%0A%20erlang%20client&In-Reply-To=%3C1BB6C6C6-0196-4E4B-A95F-7435EADA5112%40echostar.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029380.html">
   <LINK REL="Next"  HREF="029364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to catch RESOURCE_LOCKED exceptions in erlang client</H1>
    <B>Geib, Mark</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20catch%20RESOURCE_LOCKED%20exceptions%20in%0A%20erlang%20client&In-Reply-To=%3C1BB6C6C6-0196-4E4B-A95F-7435EADA5112%40echostar.com%3E"
       TITLE="[rabbitmq-discuss] How to catch RESOURCE_LOCKED exceptions in erlang client">Mark.Geib at echostar.com
       </A><BR>
    <I>Thu Aug 15 23:28:12 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029380.html">[rabbitmq-discuss] AMQP or HTTP API
</A></li>
        <LI>Next message: <A HREF="029364.html">[rabbitmq-discuss] How to catch RESOURCE_LOCKED exceptions in	erlang client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29360">[ date ]</a>
              <a href="thread.html#29360">[ thread ]</a>
              <a href="subject.html#29360">[ subject ]</a>
              <a href="author.html#29360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to use the feature of creating exclusive queues in order to limit consumers to &quot;one at a time&quot; for given messages but can not see how to catch the exception I receive when the second consumer tries to declare the same queue. Everything is working as excepted but I am not sure how to prevent my gen_server from terminating. I want to catch the event, then retry, to provide a &quot;backup&quot; consumer.

In my log file I see:
16:18:59.011 [error] CRASH REPORT Process 'amqp_worker_con_2:1' with 0 neighbours exited with reason: {{shutdown,{server_initiated_close,405,&lt;&lt;&quot;RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'q1' in vhost '/'&quot;&gt;&gt;}},{gen_server,call,[&lt;0.101.0&gt;,{call,{'queue.declare',0,&lt;&lt;&quot;q1&quot;&gt;&gt;,false,false,true,true,false,[]},none,&lt;0.66.0&gt;},infinity]}} in gen_server:terminate/6 line 744

Thanks for any help,

Mark Geib
Principal Engineer
Cheyenne Software Engineering
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mark.geib at echostar.com</A> / 35-215


&#8220;We, the unwilling, led by the unknowing, are doing the impossible for the ungrateful. We have done so much, for so long, with so little, we are now qualified to do anything with nothing.&#8221; 
&#8213; Mother Teresa


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 203 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130815/1cdb79a3/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130815/1cdb79a3/attachment.pgp</A>&gt;
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029380.html">[rabbitmq-discuss] AMQP or HTTP API
</A></li>
	<LI>Next message: <A HREF="029364.html">[rabbitmq-discuss] How to catch RESOURCE_LOCKED exceptions in	erlang client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29360">[ date ]</a>
              <a href="thread.html#29360">[ thread ]</a>
              <a href="subject.html#29360">[ subject ]</a>
              <a href="author.html#29360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
