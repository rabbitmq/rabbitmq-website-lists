<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Http API: new user
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Http%20API%3A%20new%20user&In-Reply-To=%3C1BA7091C5FA9834BB45EFCC77F3E3BA10A5B82%40EXCHG01-OM.omel.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029559.html">
   <LINK REL="Next"  HREF="029585.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Http API: new user</H1>
    <B>SAG - Jonathan Andr&#233;s</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Http%20API%3A%20new%20user&In-Reply-To=%3C1BA7091C5FA9834BB45EFCC77F3E3BA10A5B82%40EXCHG01-OM.omel.es%3E"
       TITLE="[rabbitmq-discuss] Http API: new user">jandres at omie.es
       </A><BR>
    <I>Mon Aug 26 07:48:41 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029559.html">[rabbitmq-discuss] Http API: new user
</A></li>
        <LI>Next message: <A HREF="029585.html">[rabbitmq-discuss] Http API: new user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29583">[ date ]</a>
              <a href="thread.html#29583">[ thread ]</a>
              <a href="subject.html#29583">[ subject ]</a>
              <a href="author.html#29583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think I have the last versions of rabbit and Erlang:

	=INFO REPORT==== 26-Aug-2013::08:42:28 ===
	Starting RabbitMQ 3.1.5 on Erlang R16B01

If I try with:

	curl -i -v -u guest:guest -H &quot;content-type:application/json&quot; -XPUT -d'{&quot;password&quot;:&quot;secret&quot;,&quot;tags&quot;:&quot;administrator&quot;}' <A HREF="http://localhost:15672/api/users/newUser">http://localhost:15672/api/users/newUser</A>

I get this in the logs:

	=ERROR REPORT==== 26-Aug-2013::08:44:04 ===
	webmachine error: path=&quot;/api/users/newUser&quot;
	&quot;Bad Request&quot;

And it's the same that works for you. I don't understand what is happening.




-----Mensaje original-----
De: Matthias Radestock [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>] 
Enviado el: viernes, 23 de agosto de 2013 18:33
Para: Discussions about RabbitMQ
CC: SAG - Jonathan Andr&#233;s
Asunto: Re: [rabbitmq-discuss] Http API: new user

On 22/08/13 17:51, SAG - Jonathan Andr&#233;s wrote:
&gt;<i> Yes, you are right, sorry, I did it in a hurry.
</I>&gt;<i>
</I>&gt;<i> But If i try with this:
</I>&gt;<i>
</I>&gt;<i> curl -i -v -u guest:guest -H &quot;content-type:application/json&quot; -XPUT 
</I>&gt;<i> -d'{&quot;password&quot;:&quot;secret&quot;,&quot;tags&quot;:&quot;administrator&quot;}' 
</I>&gt;<i> <A HREF="http://localhost:15672/api/users/newUser">http://localhost:15672/api/users/newUser</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Now i get this:
</I>&gt;<i>
</I>&gt;<i> Error: bad_request, Reason: not_json.
</I>
The above works fine for me against 3.1.5 on Erlang R16B:

$ curl -i -v -u guest:guest -H &quot;content-type:application/json&quot; -XPUT -d'{&quot;password&quot;:&quot;secret&quot;,&quot;tags&quot;:&quot;administrator&quot;}' 
<A HREF="http://localhost:15672/api/users/newUser">http://localhost:15672/api/users/newUser</A>
* About to connect() to localhost port 15672 (#0)
*   Trying 127.0.0.1... connected
* Server auth using Basic with user 'guest'
 &gt; PUT /api/users/newUser HTTP/1.1
 &gt; Authorization: Basic Z3Vlc3Q6Z3Vlc3Q=  &gt; User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0
OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3  &gt; Host: localhost:15672  &gt; Accept: */*  &gt; content-type:application/json  &gt; Content-Length: 44  &gt;
* upload completely sent off: 44out of 44 bytes &lt; HTTP/1.1 204 No Content
HTTP/1.1 204 No Content
&lt; Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)
Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact) &lt; Date: Fri, 23 Aug 2013 16:28:43 GMT
Date: Fri, 23 Aug 2013 16:28:43 GMT
&lt; Content-Type: application/json
Content-Type: application/json
&lt; Content-Length: 0
Content-Length: 0

&lt;
* Connection #0 to host localhost left intact
* Closing connection #0


Perhaps you are running a rabbit/erlang that is too old.


Regards,

Matthias.
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029559.html">[rabbitmq-discuss] Http API: new user
</A></li>
	<LI>Next message: <A HREF="029585.html">[rabbitmq-discuss] Http API: new user
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29583">[ date ]</a>
              <a href="thread.html#29583">[ thread ]</a>
              <a href="subject.html#29583">[ subject ]</a>
              <a href="author.html#29583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
