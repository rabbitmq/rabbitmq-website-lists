<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Unable to Start Cluster Nodes on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20Start%20Cluster%20Nodes%20on%20Windows&In-Reply-To=%3C0B8CD6850421B745BE39BC5C7601923271FFFD6B%40DDCEP50016.na.corp.mckesson.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029661.html">
   <LINK REL="Next"  HREF="029662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Unable to Start Cluster Nodes on Windows</H1>
    <B>Cordell, Ron</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Unable%20to%20Start%20Cluster%20Nodes%20on%20Windows&In-Reply-To=%3C0B8CD6850421B745BE39BC5C7601923271FFFD6B%40DDCEP50016.na.corp.mckesson.com%3E"
       TITLE="[rabbitmq-discuss] Unable to Start Cluster Nodes on Windows">Ron.Cordell at RelayHealth.com
       </A><BR>
    <I>Wed Aug 28 21:43:33 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029661.html">[rabbitmq-discuss] Unable to Start Cluster Nodes on Windows
</A></li>
        <LI>Next message: <A HREF="029662.html">[rabbitmq-discuss] Using SelectConnection to simulate a blocking	&quot;basic_get&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29664">[ date ]</a>
              <a href="thread.html#29664">[ thread ]</a>
              <a href="subject.html#29664">[ subject ]</a>
              <a href="author.html#29664">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To answer all my questions and to leave a trail for others :)  ::

We use a Vormetric encryption agent on each of the RMQ nodes because the messages that the RMQ clusters handle must be encrypted at rest.

It turns out that, somehow, the Windows Firewall policies were changed in  a way that prevented the Vormetric agent from starting, which in turn prevented the Erlang process from accessing its files on the file system. It appeared that the Erlang process would just hang waiting to access its files, and the RabbitMQ service would not start.

Correcting the Vormetric agent situation corrected the issue.

&lt;sigh&gt;

Sorry for the panic email&#8230; ;)

From: &lt;Cordell&gt;, Ronald Cordell &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Ron.Cordell at RelayHealth.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Ron.Cordell at RelayHealth.com</A>&gt;&gt;
Reply-To: Discussions RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;
Date: Wednesday, August 28, 2013 11:18 AM
To: Discussions RabbitMQ &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>&gt;&gt;
Subject: [rabbitmq-discuss] Unable to Start Cluster Nodes on Windows

We have a 5 node cluster that went down last night as a result of a Windows patching event where the patch scripts didn't insure the integrity of the cluster in between stopping/patching/starting nodes.

We are unable to now start any node in the cluster &#8211; the rabbitmqctl.bat start says it is unable to start the service.

Attempting to look at logs is not possible until the machine is rebooted because the Erlang process has a lock and we are unable to kill the Elang process.

This is RabbitMQ 3.1.3 with Erlang 16B.

First question I have is what the heck do we have to do to kill the Erlang process? It doesn't respond to kill &lt;pid&gt; or killing the process from the task dialog. Since we have RabbitMQ installed as a service, we have to set the service to not start automatically to prevent the erlang process from starting.

Unfortunately, rebooting the machine doesn't allow access to the logs. Even though there's no Erlang process running, the log files remain unaccessible so I can't find out what's going on.

At this point I'm considering uninstalling/re-installing in order to see if we can at least get the cluster up and running again, but I'm afraid we'll lose all messages.

Thanks for any ideas&#8230;

-Ron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130828/c663cfa8/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130828/c663cfa8/attachment.htm</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029661.html">[rabbitmq-discuss] Unable to Start Cluster Nodes on Windows
</A></li>
	<LI>Next message: <A HREF="029662.html">[rabbitmq-discuss] Using SelectConnection to simulate a blocking	&quot;basic_get&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29664">[ date ]</a>
              <a href="thread.html#29664">[ thread ]</a>
              <a href="subject.html#29664">[ subject ]</a>
              <a href="author.html#29664">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
