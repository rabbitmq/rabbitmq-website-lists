<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] flow control blocked producers vs consumers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20flow%20control%20blocked%20producers%20vs%20consumers&In-Reply-To=%3C51FBC129.2080604%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029129.html">
   <LINK REL="Next"  HREF="029075.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] flow control blocked producers vs consumers</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20flow%20control%20blocked%20producers%20vs%20consumers&In-Reply-To=%3C51FBC129.2080604%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] flow control blocked producers vs consumers">emile at rabbitmq.com
       </A><BR>
    <I>Fri Aug  2 15:24:41 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029129.html">[rabbitmq-discuss] Maximum achievable concurrent Web STOMP	plugin on Windows
</A></li>
        <LI>Next message: <A HREF="029075.html">[rabbitmq-discuss] flow control blocked producers vs consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29066">[ date ]</a>
              <a href="thread.html#29066">[ thread ]</a>
              <a href="subject.html#29066">[ subject ]</a>
              <a href="author.html#29066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/07/13 12:39, Kobi Biton wrote:
&gt;<i> Our logstash consumers do use their own connection , we do not use the
</I>&gt;<i> same connection for publishing (logstash rabbitmq output) and for
</I>&gt;<i> consuming (logstash rabbitmq input) , I was under the impression that
</I>&gt;<i> the consumers are blocked due to the fact that when rabbitmq starts to
</I>&gt;<i> block producers due to flow rates looking at the logstash consumers
</I>&gt;<i> logs I see errors connecting to the broker (connection reset by host)
</I>&gt;<i> which implies that the broker rejects the consumers connection this of
</I>&gt;<i> course leads us to shaky state where messages are no delivered and the
</I>&gt;<i> only workaround we found is capturing the blocked producers list from
</I>&gt;<i> rabbitmq_ctl and restarting the logstash agents by looping on all the
</I>&gt;<i> blocked producers.
</I>

If publishers and consumers use separate connections then blocking of
publishers due to flow control won't affect consumers directly. Though
if publishers slow down that will eventually slow down consumers too
when queues are empty.

Can you explain what you mean when you say consumers are blocked? Are
there messages available in queues that are not being delivered? It
should be possible to determine the reason for messages not being
delivered if you provide the output of &quot;rabbitmqctl report&quot;.





-Emile






</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029129.html">[rabbitmq-discuss] Maximum achievable concurrent Web STOMP	plugin on Windows
</A></li>
	<LI>Next message: <A HREF="029075.html">[rabbitmq-discuss] flow control blocked producers vs consumers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29066">[ date ]</a>
              <a href="thread.html#29066">[ thread ]</a>
              <a href="subject.html#29066">[ subject ]</a>
              <a href="author.html#29066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
