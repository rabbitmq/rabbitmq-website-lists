<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Orphaned channels after connection close in Rabbit 3.1.4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Orphaned%20channels%20after%20connection%20close%20in%0A%20Rabbit%203.1.4&In-Reply-To=%3CCAFS6gekuvt%3DO6st6fWThd0YXzWAwtm44VSQvaj_pzOAAa%2BACmA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029321.html">
   <LINK REL="Next"  HREF="029327.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Orphaned channels after connection close in Rabbit 3.1.4</H1>
    <B>Paul Bowsher</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Orphaned%20channels%20after%20connection%20close%20in%0A%20Rabbit%203.1.4&In-Reply-To=%3CCAFS6gekuvt%3DO6st6fWThd0YXzWAwtm44VSQvaj_pzOAAa%2BACmA%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Orphaned channels after connection close in Rabbit 3.1.4">paul.bowsher at gmail.com
       </A><BR>
    <I>Thu Aug 15 11:11:55 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029321.html">[rabbitmq-discuss] Orphaned channels after connection close in Rabbit 3.1.4
</A></li>
        <LI>Next message: <A HREF="029327.html">[rabbitmq-discuss] Orphaned channels after connection close in Rabbit 3.1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29326">[ date ]</a>
              <a href="thread.html#29326">[ thread ]</a>
              <a href="subject.html#29326">[ subject ]</a>
              <a href="author.html#29326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nope, nothing at all. When we have seen this issue &quot;live&quot; all the resource
indicators on the Overview page are green by a long way. The only error we
have in the logs is:

=ERROR REPORT==== 15-Aug-2013::11:02:42 ===
** Generic server delegate_0 terminating
** Last message in was
{'DOWN',#Ref&lt;0.0.2498.72665&gt;,process,&lt;2986.16099.3104&gt;,
                               normal}
** When Server state == {state,'<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at 428178-data15</A>',
                               {dict,2,16,16,8,80,48,

 {[],[],[],[],[],[],[],[],[],[],[],[],[],
                                      [],[],[]},
                                     {{[],
                                       [[&lt;2986.16099.3104&gt;|
                                         {&lt;0.18153.2029&gt;,
                                          #Ref&lt;0.0.2498.72669&gt;}]],
                                       [[&lt;2986.15096.3096&gt;|
                                         {&lt;0.18155.2029&gt;,
                                          #Ref&lt;0.0.2497.259319&gt;}]],
                                       [],[],[],[],[],[],[],[],[],[],[],[],
                                       []}}},
                               delegate_0}
** Reason for termination ==
** {{case_clause,{ok,{&lt;0.18153.2029&gt;,#Ref&lt;0.0.2498.72669&gt;}}},
    [{delegate,handle_info,2,[]},
     {gen_server2,handle_msg,2,[]},
     {proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]}

I've also just noticed now that we have publisher connections that are
stuck too. In the connections view

Paul Bowsher


On Thu, Aug 15, 2013 at 10:54 AM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> Paul,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 15/08/13 10:50, Paul Bowsher wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Thanks for the reply. When you say resource alarms, do you mean on the
</I>&gt;&gt;<i> server or from the clients?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Server.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  It seems that we have a sick rabbit on node A. How can we
</I>&gt;&gt;<i> help diagnose this?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Check the logs and the management UI. For connections to be in the
</I>&gt;<i> 'blocked' state for any significant duration of time, there must be a
</I>&gt;<i> triggering memory and/or disk alarm. Which should be very obvious in the
</I>&gt;<i> logs and UI.
</I>&gt;<i>
</I>&gt;<i> Matthias.
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130815/95f00429/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130815/95f00429/attachment.htm</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029321.html">[rabbitmq-discuss] Orphaned channels after connection close in Rabbit 3.1.4
</A></li>
	<LI>Next message: <A HREF="029327.html">[rabbitmq-discuss] Orphaned channels after connection close in Rabbit 3.1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29326">[ date ]</a>
              <a href="thread.html#29326">[ thread ]</a>
              <a href="subject.html#29326">[ subject ]</a>
              <a href="author.html#29326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
