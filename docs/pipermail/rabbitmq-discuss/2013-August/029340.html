<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbit federation is failing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%20federation%20is%20failing&In-Reply-To=%3C520CBBF6.7000707%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029291.html">
   <LINK REL="Next"  HREF="029422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbit federation is failing</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbit%20federation%20is%20failing&In-Reply-To=%3C520CBBF6.7000707%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] rabbit federation is failing">simon at rabbitmq.com
       </A><BR>
    <I>Thu Aug 15 12:31:02 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029291.html">[rabbitmq-discuss] rabbit federation is failing
</A></li>
        <LI>Next message: <A HREF="029422.html">[rabbitmq-discuss] rabbit federation is failing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29340">[ date ]</a>
              <a href="thread.html#29340">[ thread ]</a>
              <a href="subject.html#29340">[ subject ]</a>
              <a href="author.html#29340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It's not obvious that those errors have anything to do with your problem.

The first one is an inbound connection being dropped due to its 
heartbeat being missed.

The second is an error which (unfortunately) happens whenever a 
federation link comes up; it needs to ensure that an exchange does not 
exist, so it tries to delete it - if it already did not exist we log an 
error.

Federation should always re-establish links that have failed.

So when you say it stopped working, what happened? Is 192.168.1.200 the 
upstream, downstream or both? What does the link status reporting say? 
(<A HREF="http://www.rabbitmq.com/federation.html#status">http://www.rabbitmq.com/federation.html#status</A>)

Cheers, Simon

On 14/08/13 17:52, Joao Gomes Pereira wrote:
&gt;<i> Hello
</I>&gt;<i> I implemented a rabbit federation to exchange SMS messages between
</I>&gt;<i> diferent servers.
</I>&gt;<i> After working fine for some days, one of my nodes (192.168.1.200) just
</I>&gt;<i> stopped working.
</I>&gt;<i>
</I>&gt;<i> We can see some errors in the node log:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-Aug-2013::14:01:31 ===
</I>&gt;<i> Federation exchange 'LX' in vhost '/' connected to exchange 'LX' in
</I>&gt;<i> vhost '/' on <A HREF="amqp://94.46.208.100">amqp://94.46.208.100</A>
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 13-Aug-2013::14:03:46 ===
</I>&gt;<i> closing AMQP connection &lt;0.5257.0&gt; (94.46.208.98:45341 -&gt;
</I>&gt;<i> 192.168.1.200:5672):
</I>&gt;<i> {heartbeat_timeout,running}
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-Aug-2013::14:09:27 ===
</I>&gt;<i> accepting AMQP connection &lt;0.5960.0&gt; (94.46.208.98:60137 -&gt;
</I>&gt;<i> 192.168.1.200:5672)
</I>&gt;<i>
</I>&gt;<i> =ERROR REPORT==== 13-Aug-2013::14:09:27 ===
</I>&gt;<i> connection &lt;0.5960.0&gt;, channel 3 - soft error:
</I>&gt;<i> {amqp_error,not_found,
</I>&gt;<i>              &quot;no exchange 'federation: SMS_System -&gt;
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">SMSDriver+Dispatcher-rabbit at insight-DISP-rabbit02</A> B' in vhost '/'&quot;,
</I>&gt;<i>              'exchange.delete'}
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-Aug-2013::14:09:27 ===
</I>&gt;<i> accepting AMQP connection &lt;0.5978.0&gt; (94.46.208.98:20734 -&gt;
</I>&gt;<i> 192.168.1.200:5672)
</I>&gt;<i>
</I>&gt;<i> =INFO REPORT==== 13-Aug-2013::14:09:27 ===
</I>&gt;<i> closing AMQP connection &lt;0.5978.0&gt; (94.46.208.98:20734 -&gt;
</I>&gt;<i> 192.168.1.200:5672)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> How can I configure my node to be always federated?
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i> regards
</I>&gt;<i> Joao Pereira
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029291.html">[rabbitmq-discuss] rabbit federation is failing
</A></li>
	<LI>Next message: <A HREF="029422.html">[rabbitmq-discuss] rabbit federation is failing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29340">[ date ]</a>
              <a href="thread.html#29340">[ thread ]</a>
              <a href="subject.html#29340">[ subject ]</a>
              <a href="author.html#29340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
