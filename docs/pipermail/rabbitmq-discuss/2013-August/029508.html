<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] questions about RabbitMQ linear scalability
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20questions%20about%20RabbitMQ%20linear%20scalability&In-Reply-To=%3C1CC19277-0A54-4D4B-AB59-591990BEDA67%40gopivotal.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029507.html">
   <LINK REL="Next"  HREF="029542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] questions about RabbitMQ linear scalability</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20questions%20about%20RabbitMQ%20linear%20scalability&In-Reply-To=%3C1CC19277-0A54-4D4B-AB59-591990BEDA67%40gopivotal.com%3E"
       TITLE="[rabbitmq-discuss] questions about RabbitMQ linear scalability">mklishin at gopivotal.com
       </A><BR>
    <I>Thu Aug 22 09:56:15 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029507.html">[rabbitmq-discuss] questions about RabbitMQ linear scalability
</A></li>
        <LI>Next message: <A HREF="029542.html">[rabbitmq-discuss] questions about RabbitMQ linear scalability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29508">[ date ]</a>
              <a href="thread.html#29508">[ thread ]</a>
              <a href="subject.html#29508">[ subject ]</a>
              <a href="author.html#29508">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Junius Wang:

&gt;<i> 1.       The throughput of two node cluster is 50%-60% worse than a single node broker.
</I>
With mirroring, messages have to be copied to multiple (N or, depending on configuration, even all) nodes in the cluster. That obviously takes more time than not copying anything.

&gt;<i> 2.       Adding more node did have improvement on throughput but we only got 25% improvement(throughput of 3 node cluster is 25% better than 2 node cluster. 4 node cluster is 25% better than 3 node cluster too). What we expected is a 45-degree line, that means when 2 nodes are used the throughput is double. With 3 nodes, then triple.
</I>
You are not providing any details about your workload but the way you extend capacity with RabbitMQ is
by adding nodes and using more queues. Queue mirroring is an HA feature, which means copying
more data across the cluster.

Maximum throughput and highest availability are largely at odds with each other, so
you need to

1. Use multiple queues (and the number should grow with the number of nodes)
2. Choose what queues to mirror. Likely not all queues are equally important to your system, so you can make some of them non-HA.
3. Configure mirroring to, say, 2 nodes instead of &quot;all&quot;.
4. If you know what node is the master for a particular queue (e.g. was declared on that node),
     make your clients connect there. It will decrease intra-cluster traffic.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130822/089f4ca1/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130822/089f4ca1/attachment.pgp</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029507.html">[rabbitmq-discuss] questions about RabbitMQ linear scalability
</A></li>
	<LI>Next message: <A HREF="029542.html">[rabbitmq-discuss] questions about RabbitMQ linear scalability
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29508">[ date ]</a>
              <a href="thread.html#29508">[ thread ]</a>
              <a href="subject.html#29508">[ subject ]</a>
              <a href="author.html#29508">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
