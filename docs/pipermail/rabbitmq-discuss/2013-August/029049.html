<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Java client - 91% time spent in reading the	socket?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20client%20-%2091%25%20time%20spent%20in%20reading%20the%0A%09socket%3F&In-Reply-To=%3CB115566B-0CCC-4B82-BD00-465B23A519C1%40gopivotal.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029048.html">
   <LINK REL="Next"  HREF="029040.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Java client - 91% time spent in reading the	socket?</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Java%20client%20-%2091%25%20time%20spent%20in%20reading%20the%0A%09socket%3F&In-Reply-To=%3CB115566B-0CCC-4B82-BD00-465B23A519C1%40gopivotal.com%3E"
       TITLE="[rabbitmq-discuss] Java client - 91% time spent in reading the	socket?">mklishin at gopivotal.com
       </A><BR>
    <I>Thu Aug  1 19:03:16 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029048.html">[rabbitmq-discuss] Java client - 91% time spent in reading the	socket?
</A></li>
        <LI>Next message: <A HREF="029040.html">[rabbitmq-discuss] RabbitMQ Clustering with Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29049">[ date ]</a>
              <a href="thread.html#29049">[ thread ]</a>
              <a href="subject.html#29049">[ subject ]</a>
              <a href="author.html#29049">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tim Robertson:

&gt;<i> The other 9% is spent in &quot;my code&quot;.  Is it really true that it is so time consuming for the connection thread to need 9/10ths of the time?
</I>
What profiler do you use? Sampling profilers don't measure for how long every method is executed,
just at what points in time a particular method was running. For the main loop I can imagine it greatly
skews the results

&gt;<i>  Also - I'm only seeing 400msg/s (even when I comment out all my code) from a durable persistent queue with ACK, lending more weight to my suspicions that something is not quite right here (I have basic QoS at 100msg and a single thread+channel here).
</I>
It's a low rate. You can try automatic acknowledgements just to compare. Throughput in both directions
also depends on message payload size and TCP stack settings. RabbitMQ Java client by default
disables Nagle's algorithm.
--
MK

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130801/cb673537/attachment.pgp">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130801/cb673537/attachment.pgp</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029048.html">[rabbitmq-discuss] Java client - 91% time spent in reading the	socket?
</A></li>
	<LI>Next message: <A HREF="029040.html">[rabbitmq-discuss] RabbitMQ Clustering with Federation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29049">[ date ]</a>
              <a href="thread.html#29049">[ thread ]</a>
              <a href="subject.html#29049">[ subject ]</a>
              <a href="author.html#29049">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
