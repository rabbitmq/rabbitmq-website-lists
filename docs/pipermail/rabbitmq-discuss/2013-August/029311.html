<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20receive%20STOMP%20receipt%20only%20after%20the%0A%20consumer%20has%20acknowledged%20the%20message%3F&In-Reply-To=%3C1376553781942-28808.post%40n5.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029315.html">
   <LINK REL="Next"  HREF="029333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?</H1>
    <B>joshua__lim</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20How%20to%20receive%20STOMP%20receipt%20only%20after%20the%0A%20consumer%20has%20acknowledged%20the%20message%3F&In-Reply-To=%3C1376553781942-28808.post%40n5.nabble.com%3E"
       TITLE="[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?">joshua__lim at hotmail.com
       </A><BR>
    <I>Thu Aug 15 09:03:01 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029315.html">[rabbitmq-discuss] Many errors in mirrored queues with rabbitmq 3.1.4
</A></li>
        <LI>Next message: <A HREF="029333.html">[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29311">[ date ]</a>
              <a href="thread.html#29311">[ thread ]</a>
              <a href="subject.html#29311">[ subject ]</a>
              <a href="author.html#29311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The producer can request for a receipt when sending through the STOMP
interface (reference: <A HREF="https://www.rabbitmq.com/stomp.html">https://www.rabbitmq.com/stomp.html</A>):

SEND
destination:/queue/recipient
receipt:003              
persistent:true    
&lt;empty line compulsory!&gt;
online!
Ctrl-2

At the consumer end, I issue the following:

SUBSCRIBE
destination:/queue/recipient
ack:client-individual
persistent:true       
receipt:001   

What I've noticed from my tests is that the receipt sent is to the producer
right after the broker captures the message.  This receipt is not adequate
for reliable delivery since the message hasn't been sent to the consumer
yet.

I'm trying to figure out if it is possible for the receipt to be sent by the
broker only after the recipient has acknowledged the message?

Better still if it can send multiple receipts during each stage of the
delivery process.

If I've not misread, the documentation on this page shows that it is
possible - <A HREF="https://www.rabbitmq.com/confirms.html">https://www.rabbitmq.com/confirms.html</A>

&quot;The broker will confirm messages once:....
... b) has been consumed and, if necessary, acknowledged.&quot;

I'll be grateful for any pointers, thank you.  :)



--
View this message in context: <A HREF="http://rabbitmq.1065348.n5.nabble.com/How-to-receive-STOMP-receipt-only-after-the-consumer-has-acknowledged-the-message-tp28808.html">http://rabbitmq.1065348.n5.nabble.com/How-to-receive-STOMP-receipt-only-after-the-consumer-has-acknowledged-the-message-tp28808.html</A>
Sent from the RabbitMQ mailing list archive at Nabble.com.
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029315.html">[rabbitmq-discuss] Many errors in mirrored queues with rabbitmq 3.1.4
</A></li>
	<LI>Next message: <A HREF="029333.html">[rabbitmq-discuss] How to receive STOMP receipt only after the consumer has acknowledged the message?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29311">[ date ]</a>
              <a href="thread.html#29311">[ thread ]</a>
              <a href="subject.html#29311">[ subject ]</a>
              <a href="author.html#29311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
