<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] rabbitmq server Mnesia backup and restore
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20server%20Mnesia%20backup%20and%20restore&In-Reply-To=%3CCALPqkirRLVu2F4XcHrOhMSFsJxw9%3DN5ANdQ-UAYEYKXJ3j6okQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029122.html">
   <LINK REL="Next"  HREF="029126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] rabbitmq server Mnesia backup and restore</H1>
    <B>Brett Cameron</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20rabbitmq%20server%20Mnesia%20backup%20and%20restore&In-Reply-To=%3CCALPqkirRLVu2F4XcHrOhMSFsJxw9%3DN5ANdQ-UAYEYKXJ3j6okQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] rabbitmq server Mnesia backup and restore">brett.r.cameron at gmail.com
       </A><BR>
    <I>Wed Aug  7 04:52:20 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029122.html">[rabbitmq-discuss] rabbitmq server Mnesia   backup and restore
</A></li>
        <LI>Next message: <A HREF="029126.html">[rabbitmq-discuss] rabbitmq server Mnesia backup and restore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29124">[ date ]</a>
              <a href="thread.html#29124">[ thread ]</a>
              <a href="subject.html#29124">[ subject ]</a>
              <a href="author.html#29124">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You would need to backup everything under $RABBITMQ_MNESIA_DIR. This
includes both the Mnesia database (which as Emile says holds durable
configuration data) and the files used to store messages (and their
associated index files). At a quiet point (or preferably with the broker
shut down) you could hypothetically tar up the whole lot and then
subsequently restore if necessary; however it is important to note that the
Mnesia database is associated with a particular Erlang node (say
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at mynode</A>, where mynode is the name of the server on which the broker
is running), so you cannot simply copy your backup to another node, restore
it and expect things to work. There are ways to change the node name
associated with the database, but even then you may not be totally
successful. If you want to get a bit fancy you can also backup and restore
the Mnesia database using Erlang Mnesia functions like backup/1 and
restore/1. However, the simplest way to save your configuration is to use
the rabbitmqadmin tool, assuming you have the management API installed. For
example the command &quot;rabbitmqadmin export broker.conf&quot; will save your
configuration as a JSON document to the file broker.conf, and you could
subsequently restore it using the corresponding rabbitmqadmin import
command (you can also do these operations via the management web UI).
Instead of backing up the files used to store messages you might be better
off replicating the queues across to one or more cluster nodes.


On Wed, Aug 7, 2013 at 2:47 PM, 3k4b251 &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">314992959 at qq.com</A>&gt; wrote:

&gt;<i> thanks.   but  how  to restore ?  just copy back?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://rabbitmq.1065348.n5.nabble.com/rabbitmq-server-Mnesia-backup-and-restore-tp28598p28622.html">http://rabbitmq.1065348.n5.nabble.com/rabbitmq-server-Mnesia-backup-and-restore-tp28598p28622.html</A>
</I>&gt;<i> Sent from the RabbitMQ mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130807/fd0403c9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130807/fd0403c9/attachment.htm</A>&gt;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029122.html">[rabbitmq-discuss] rabbitmq server Mnesia   backup and restore
</A></li>
	<LI>Next message: <A HREF="029126.html">[rabbitmq-discuss] rabbitmq server Mnesia backup and restore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29124">[ date ]</a>
              <a href="thread.html#29124">[ thread ]</a>
              <a href="subject.html#29124">[ subject ]</a>
              <a href="author.html#29124">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
