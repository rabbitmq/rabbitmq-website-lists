<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queues disappeared after a cluster upgrade to 3.1.5, Erlang R16B01
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queues%20disappeared%20after%20a%20cluster%20upgrade%0A%20to%203.1.5%2C%20Erlang%20R16B01&In-Reply-To=%3C521CDF8E.1000905%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029637.html">
   <LINK REL="Next"  HREF="029567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queues disappeared after a cluster upgrade to 3.1.5, Erlang R16B01</H1>
    <B>Emile Joubert</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queues%20disappeared%20after%20a%20cluster%20upgrade%0A%20to%203.1.5%2C%20Erlang%20R16B01&In-Reply-To=%3C521CDF8E.1000905%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Queues disappeared after a cluster upgrade to 3.1.5, Erlang R16B01">emile at rabbitmq.com
       </A><BR>
    <I>Tue Aug 27 18:19:10 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029637.html">[rabbitmq-discuss] Queues disappeared after a cluster upgrade to 3.1.5, Erlang R16B01
</A></li>
        <LI>Next message: <A HREF="029567.html">[rabbitmq-discuss] rabbitmq-c     can't  recieve  message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29638">[ date ]</a>
              <a href="thread.html#29638">[ thread ]</a>
              <a href="subject.html#29638">[ subject ]</a>
              <a href="author.html#29638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jason,


On 27/08/13 15:11, Jason McIntosh wrote:
&gt;<i> The ONLY thing that I can think of - I was doing stop/starts as part
</I>&gt;<i> of training of the cluster about 20 minutes before I did the upgrade
</I>&gt;<i> to test various concepts, e.g. message loss, master node recovery,
</I>&gt;<i> etc. etc. At this point, if people haven't seen or heard of this,
</I>&gt;<i> I'll chalk it up to something funky disk or otherwise until I can try
</I>&gt;<i> and replicate it.
</I>
This unlikely to be a disk issue.

We have seen this stacktrace before, but not in the context of upgrading
and always in the presence of some other error that turned out to be the
root cause. The cases that we were testing also involved lots of
starting and stopping of nodes. That might be a prerequisite.

&gt;<i> My biggest concern at this point is that because i no longer have the
</I>&gt;<i> backup's of the mnesia database, replicating the environment won't
</I>&gt;<i> replicate exactly what was in the database, and so I won't be able to
</I>&gt;<i> replicate it. When I start deploying to our production environment, I
</I>&gt;<i> won't make that mistake - I'll shutdown rabbit, back up my whole
</I>&gt;<i> rabbit_data_directory first :)
</I>
If you are able to reproduce the error then a database backup might be
helpful. Even if you can provide more of the log entries from your
previous message to show how &amp; when nodes are started in relation to
each other.





-Emile




</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029637.html">[rabbitmq-discuss] Queues disappeared after a cluster upgrade to 3.1.5, Erlang R16B01
</A></li>
	<LI>Next message: <A HREF="029567.html">[rabbitmq-discuss] rabbitmq-c     can't  recieve  message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29638">[ date ]</a>
              <a href="thread.html#29638">[ thread ]</a>
              <a href="subject.html#29638">[ subject ]</a>
              <a href="author.html#29638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
