<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] AMQP library APIs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AMQP%20library%20APIs&In-Reply-To=%3CCAAt2poJyY80tuBCgi1JyDXBThm1VY511RoBQNgtET1Vg9Yx60g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029159.html">
   <LINK REL="Next"  HREF="029180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] AMQP library APIs</H1>
    <B>Alan Antonuk</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20AMQP%20library%20APIs&In-Reply-To=%3CCAAt2poJyY80tuBCgi1JyDXBThm1VY511RoBQNgtET1Vg9Yx60g%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] AMQP library APIs">alan.antonuk at gmail.com
       </A><BR>
    <I>Wed Aug  7 23:32:20 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029159.html">[rabbitmq-discuss] AMQP library APIs
</A></li>
        <LI>Next message: <A HREF="029180.html">[rabbitmq-discuss] AMQP library APIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29162">[ date ]</a>
              <a href="thread.html#29162">[ thread ]</a>
              <a href="subject.html#29162">[ subject ]</a>
              <a href="author.html#29162">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 7, 2013 at 2:43 PM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> Bunny's automatic recovery is for network failures, not connection
</I>&gt;<i> exceptions (which are rare
</I>&gt;<i> and severe, and should be as visible as possible).
</I>&gt;<i>
</I>
I agree with you on the connection exceptions, in that case it makes a lot
of sense to be loud.  However I was thinking in the case of a channel
exception being thrown.  E.g., you have a consumer associated with a
channel, and you happen to publish to a non-existent exchange, whoops that
consumer goes away. Obviously the client code should be notified of the
failure, but from an API perspective its annoying to have something that is
potentially unrelated be affected and have to be recreated.


&gt;<i> I don't think this is a good idea. First, it is part of the protocol
</I>&gt;<i> and developers may want to use that. Second, error handling for operations
</I>&gt;<i> such as queue.declare
</I>&gt;<i> or basic.publish, is per-channel. Finally, basic.qos setting, delivery
</I>&gt;<i> tags and publisher confirms
</I>&gt;<i> are all per-channel.
</I>&gt;<i>
</I>
That makes me wonder what is it that developers use channels for?  My
understanding is they're were designed to be an 'error scope' at a protocol
level. I don't see a lot of developers using them that way, and sometimes
its the source of a bit of pain (having to recreate any resources that get
destroyed as a result of a channel exception, or in bad cases, their whole
app aborts because the channel dies).

My thinking is that an API could be created that internally uses channels
intelligently to give more native feel to error handling. One example of
changing the API might be: instead of apply basic.qos to a channel, you
apply it to a consumer, and internally the library maps a consumer to a
channel, so a BasicQos on a consumer.  The same can be done for other
aspects of the protocol (this is what I ended up doing with
SimpleAmqpClient).  A downside being the API may not map 1:1  to a lot of
the documentation that is out there.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130807/ff72d3b0/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130807/ff72d3b0/attachment.htm</A>&gt;
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029159.html">[rabbitmq-discuss] AMQP library APIs
</A></li>
	<LI>Next message: <A HREF="029180.html">[rabbitmq-discuss] AMQP library APIs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29162">[ date ]</a>
              <a href="thread.html#29162">[ thread ]</a>
              <a href="subject.html#29162">[ subject ]</a>
              <a href="author.html#29162">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
