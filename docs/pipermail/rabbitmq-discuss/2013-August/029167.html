<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] C++ client options
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20C%2B%2B%20client%20options&In-Reply-To=%3C52035AE2.9030809%40pocock.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029163.html">
   <LINK REL="Next"  HREF="029185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] C++ client options</H1>
    <B>Daniel Pocock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20C%2B%2B%20client%20options&In-Reply-To=%3C52035AE2.9030809%40pocock.com.au%3E"
       TITLE="[rabbitmq-discuss] C++ client options">daniel at pocock.com.au
       </A><BR>
    <I>Thu Aug  8 09:46:26 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="029163.html">[rabbitmq-discuss] C++ client options
</A></li>
        <LI>Next message: <A HREF="029185.html">[rabbitmq-discuss] C++ client options
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29167">[ date ]</a>
              <a href="thread.html#29167">[ thread ]</a>
              <a href="subject.html#29167">[ subject ]</a>
              <a href="author.html#29167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/08/13 00:57, Alan Antonuk wrote:
&gt;<i>
</I>&gt;<i> On Wed, Aug 7, 2013 at 1:49 PM, Daniel Pocock &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">daniel at pocock.com.au</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">daniel at pocock.com.au</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     Does this mean we need to block and/or use threads to receive
</I>&gt;<i>     messages?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes, the state of rabbitmq-c and SimpleAmqpClient when waiting for a
</I>&gt;<i> delivery from a consumer is you need to block, optionally with a timeout.
</I>&gt;<i>  
</I>&gt;<i> The problem I'm stating is that AMQP has some async parts to the
</I>&gt;<i> protocol, and rabbitmq-c doesn't do anything to handle these events as
</I>&gt;<i> they're fired from the broker.  They're only 'seen' by rabbitmq-c when
</I>&gt;<i> synchronous calls are made.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Do you envisage making it work like boost::asio or have you seen
</I>&gt;<i>     anything like that for AMQP?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> A few years back I started to implement a pure C++ AMQP client library
</I>&gt;<i> leveraging boost::asio.  You can find it here:
</I>&gt;<i> <A HREF="https://github.com/alanxz/libamqp-cpp">https://github.com/alanxz/libamqp-cpp</A>
</I>&gt;<i> The project was not completed. I don't have plans to resume work it.
</I>&gt;<i>
</I>&gt;<i> Recently I have been doing a bit of design work to see what would be
</I>&gt;<i> necessary to create an library that leverages libuv to make a
</I>&gt;<i> fully-functional native AMQP client.
</I>
Personally, I wouldn't want to favour any of these solutions over any
other, they are all good.

The most important thing will be demonstrating how it integrates with
higher level code, particularly if the high level code is using an event
loop other than the one you choose yourself.  E.g. will the end user
have to run your event loop in a thread and when they get callbacks from
your code, they will have to pass data to their own event loop thread in
a thread-safe manner?

Another thing that comes to mind is the question of adding an
abstraction layer, just like JMS in the Java world.  The only one I've
come across so far is OpenMAMA:
<A HREF="http://www.openmama.org">http://www.openmama.org</A> - do you believe RabbitMQ users could benefit
from coding to the OpenMAMA API and using some low-level driver for AMQP
or RabbitMQ specifically?  This would be more like the JMS programming
paradigm.


&gt;<i>  
</I>&gt;<i>
</I>&gt;<i>     Did you collaborate with anybody for the Debian package of the C
</I>&gt;<i>     client?
</I>&gt;<i>     <A HREF="http://packages.debian.org/jessie/librabbitmq-dev">http://packages.debian.org/jessie/librabbitmq-dev</A>
</I>&gt;<i>
</I>&gt;<i> That package is very old.  People have come to me time-to-time for
</I>&gt;<i> assistance in creating a Ubuntu and/or Debian package, and not having
</I>&gt;<i> a lot of knowledge in the process I do what I can to help out.
</I>&gt;<i>  Currently there is some packaging material in the debian directory of
</I>&gt;<i> the rabbitmq-c repo.  It is somewhat out of date, though not as old as
</I>&gt;<i> what you've linked.
</I>&gt;<i>
</I>
I'll contact the maintainers and if they are not actively updating it, I
might volunteer to refresh it


&gt;<i> I personally would like to move the packaging details out of the
</I>&gt;<i> repository to allow for different distributions to come up with their
</I>&gt;<i> own independent packaging, as each distribution seems to do things in
</I>&gt;<i> a slightly different and incompatible way. If you or someone you know
</I>&gt;<i> is willing to step up and help maintain said package, I will do what I
</I>&gt;<i> can to help out.
</I>&gt;<i>
</I>
Debian often maintains packaging artifacts in git repositories in alioth
these days.  When we import your release tarball into our git
repository, we can easily tell it to ignore any debian/ directory you
have.  For older versions of Debian this was problematic though.  My own
suggestion is that you can include your own debian/ artifacts in your
repository if you wish to maintain them, but when you prepare a release
tarball, exclude that subtree.

&gt;<i>
</I>&gt;<i>     Has anybody discussed a package of the C++ client?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I haven't heard of anyone doing so.  One roadblock is that when
</I>&gt;<i> SimpleAmqpClient was created it used a newer version of boost than
</I>&gt;<i> came packaged with the LTS version of Ubuntu because it needed the
</I>&gt;<i> boost.chrono library which was fairly new at the time.  I'm not sure
</I>&gt;<i> if the situation has changed since then.
</I>&gt;<i>
</I>
I would be aiming to introduce something in Debian unstable to begin
with.  From there, it will propagate to other distributions over time
and if those distributions operate commercially (like Ubuntu) and their
clients really want it, they will hopefully collaborate with you to
resolve the problem and contribute fixes for you.

&gt;<i> Again if you or someone you know is willing to step up and help
</I>&gt;<i> maintain an SimpleAmqpClient package, I will do what I can to help out.
</I>&gt;<i>
</I>
I'd like to understand your feelings about the future of the API before
committing to that - do you see something based on libuv happening in
the near future, e.g. within 6 months?



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130808/d04996c6/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130808/d04996c6/attachment.htm</A>&gt;
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029163.html">[rabbitmq-discuss] C++ client options
</A></li>
	<LI>Next message: <A HREF="029185.html">[rabbitmq-discuss] C++ client options
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29167">[ date ]</a>
              <a href="thread.html#29167">[ thread ]</a>
              <a href="subject.html#29167">[ subject ]</a>
              <a href="author.html#29167">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
