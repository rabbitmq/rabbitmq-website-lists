<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Message sending/receiving overhead.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20sending/receiving%20overhead.&In-Reply-To=%3CCAKgmDnF6cVFDYFK9Sf4T9q7V5voM_BwpV2GcMY6mnHvawJOxag%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="029288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Message sending/receiving overhead.</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Message%20sending/receiving%20overhead.&In-Reply-To=%3CCAKgmDnF6cVFDYFK9Sf4T9q7V5voM_BwpV2GcMY6mnHvawJOxag%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Message sending/receiving overhead.">michael.laing at nytimes.com
       </A><BR>
    <I>Thu Aug  1 01:59:25 BST 2013</I>
    <P><UL>
        
        <LI>Next message: <A HREF="029288.html">[rabbitmq-discuss] Message sending/receiving overhead.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29027">[ date ]</a>
              <a href="thread.html#29027">[ thread ]</a>
              <a href="subject.html#29027">[ subject ]</a>
              <a href="author.html#29027">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Pavel,

Have you experimented with prefetch?

Which client are you using and which versions of rabbitmq and erlang.
Message size is important too, of course.

We use the python pika client in asynch mode and have consistent processing
times (fetch/process/publish) under 5ms.

In general, we have found event loop based approaches faster than threads,
esp. on the small (cheap) machines we use in the cloud.

Best regards,

Michael


On Wed, Jul 31, 2013 at 6:16 PM, Pavel Kogan &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">pavel.kogan at cortica.com</A>&gt;wrote:

&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> I have simple subscriber that receives message, process it in single
</I>&gt;<i> thread and publish response.
</I>&gt;<i> Processing must be done in single thread (logic limitations) but is very
</I>&gt;<i> fast (~5ms) so I expect to be able to process 200 requests per second.
</I>&gt;<i> However publishing response in line with processing slows the things as
</I>&gt;<i> network latency is considerable (even though it is internal 1Gbit network).
</I>&gt;<i> To resolve it I moved responses publishing to separate threads (via
</I>&gt;<i> internal concurrent queue) and it helped.
</I>&gt;<i> The question is about receiving overhead. Is there any pre-caching of
</I>&gt;<i> messages or I should also integrate internal concurrent queue for requests
</I>&gt;<i> too?
</I>&gt;<i>
</I>&gt;<i> Many Thanks,
</I>&gt;<i>    Pavel
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/c65d3068/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20130731/c65d3068/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="029288.html">[rabbitmq-discuss] Message sending/receiving overhead.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29027">[ date ]</a>
              <a href="thread.html#29027">[ thread ]</a>
              <a href="subject.html#29027">[ subject ]</a>
              <a href="author.html#29027">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
