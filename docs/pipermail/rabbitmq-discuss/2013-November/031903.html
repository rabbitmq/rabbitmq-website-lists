<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Delivery / Redelivery counter plugin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delivery%20/%20Redelivery%20counter%20plugin&In-Reply-To=%3CCAHC35TCW18TK601HZyJPhQScWxNMHij_LZUFJbZV0bvR-Xrgiw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031900.html">
   <LINK REL="Next"  HREF="031905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Delivery / Redelivery counter plugin</H1>
    <B>Karl Nilsson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Delivery%20/%20Redelivery%20counter%20plugin&In-Reply-To=%3CCAHC35TCW18TK601HZyJPhQScWxNMHij_LZUFJbZV0bvR-Xrgiw%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Delivery / Redelivery counter plugin">kjnilsson at gmail.com
       </A><BR>
    <I>Wed Nov 13 11:55:17 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031900.html">[rabbitmq-discuss] Subscribing an Exchange with RabbitHub
</A></li>
        <LI>Next message: <A HREF="031905.html">[rabbitmq-discuss] Delivery / Redelivery counter plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31903">[ date ]</a>
              <a href="thread.html#31903">[ thread ]</a>
              <a href="subject.html#31903">[ subject ]</a>
              <a href="author.html#31903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

(I originally posted this to <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at googlegroups</A> but it apperas
not to have replicated to the 'proper' list so apologies for any
duplication of this message)

Would it be possible to write a rabbitmq plugin to intercept delivery to a
queue to add/increment a delivery counter header value? I can't see an
appropriate behaviour to implement in the source but my understanding of
the rabbitmq code base isn't good enough to properly see what can and can't
be done.

After spending a fair bit of time thinking about a generic poison message
strategy it feels a broker based counter (rather than the existing
redelivered flag) would be the most appropriate for the kind of system we
are currently writing (integrations / dirty data) and if we could at least
get some kind of delivery counter working (100% would not be required) we
could handle rejection strategies better at the consumer.

I know there is a planned feature for this (basic / deliver / 01) but I
checked with Alvaro who has confirmed it isn't a priority at this time so
we could do with some kind of half-way house in the meantime.

I'd appreciate any suggestions / advice you may have on this topic.

Many thanks
Karl

-- 
*Karl Nilsson*
twitter: @kjnilsson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131113/fe6dabd9/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131113/fe6dabd9/attachment.htm</A>&gt;
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031900.html">[rabbitmq-discuss] Subscribing an Exchange with RabbitHub
</A></li>
	<LI>Next message: <A HREF="031905.html">[rabbitmq-discuss] Delivery / Redelivery counter plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31903">[ date ]</a>
              <a href="thread.html#31903">[ thread ]</a>
              <a href="subject.html#31903">[ subject ]</a>
              <a href="author.html#31903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
