<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Pika Client starts consuming before calling	start_consuming
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20Client%20starts%20consuming%20before%20calling%0A%09start_consuming&In-Reply-To=%3C1385447109.17717.YahooMailNeo%40web192503.mail.sg3.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032151.html">
   <LINK REL="Next"  HREF="032153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Pika Client starts consuming before calling	start_consuming</H1>
    <B>vadlamani maitreya</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Pika%20Client%20starts%20consuming%20before%20calling%0A%09start_consuming&In-Reply-To=%3C1385447109.17717.YahooMailNeo%40web192503.mail.sg3.yahoo.com%3E"
       TITLE="[rabbitmq-discuss] Pika Client starts consuming before calling	start_consuming">maitreya_vvm at yahoo.co.in
       </A><BR>
    <I>Tue Nov 26 06:25:09 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032151.html">[rabbitmq-discuss] amqp_simple_wait_frame_noblock() timing	issue.
</A></li>
        <LI>Next message: <A HREF="032153.html">[rabbitmq-discuss] Pika Client starts consuming before calling	start_consuming
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32146">[ date ]</a>
              <a href="thread.html#32146">[ thread ]</a>
              <a href="subject.html#32146">[ subject ]</a>
              <a href="author.html#32146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Everyone,

I have a small problem with RMQ and pika client and would like to ask guyz here for some help. The situation is as below,

I am using RabbitMQ with the pika clients in a scalable solution. The solution requires messaging with two priorities. So every worker (through pika client) gets messages from the HighPriority Queue first and then goes to the Low Priority queue if there are no messages left in the HP Queue. I decide to scale the number of workers according to the number of ready messages and the number of consumers attached to the queue. So the following is the workflow i follow to achieve the above.

1) Register using&#160; basic_consume on the queue.
2) Do basic_get from HP Queue
3)If no messages in HP Queue do a basic_get from LP Queue.

I donot execute start_consuming() so the basic_consume is just for the number of consumers count in the RMQ server.

This logic works perfectly fine with the standard Java Client. But when i try to do the same with the Pika Client, the moment the basic_consume is called the data events are processed and the callback function is executed on the incoming message, eventhough the start_consuming() function is not called.

So, a couple of questions here,

1. Is there a way to register as a consumer to a queue without actually starting to consume from the queue (even a hack into the code is fine)
2. Is it bug that basic_consume() starts consuming without actually calling start_consuming() (the actual blocking function), and should i raise an issue in github regarding this ?

Last but not the least, the version of the rabbitMQ server is 3.1.2 and the pika client, i have tried both 0.9.6 and 0.9.13 with the above scenario.

Thankyou everyone,
Maitreya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131126/f0b6e64c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131126/f0b6e64c/attachment.htm</A>&gt;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032151.html">[rabbitmq-discuss] amqp_simple_wait_frame_noblock() timing	issue.
</A></li>
	<LI>Next message: <A HREF="032153.html">[rabbitmq-discuss] Pika Client starts consuming before calling	start_consuming
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32146">[ date ]</a>
              <a href="thread.html#32146">[ thread ]</a>
              <a href="subject.html#32146">[ subject ]</a>
              <a href="author.html#32146">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
