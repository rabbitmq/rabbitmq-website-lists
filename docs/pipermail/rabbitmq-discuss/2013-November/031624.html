<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] previous connection is NOT automatically	closed if IP different
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20previous%20connection%20is%20NOT%20automatically%0A%09closed%20if%20IP%20different&In-Reply-To=%3C1D34FBD7-46AA-4E55-A5F6-2214CC84413F%40gopivotal.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031622.html">
   <LINK REL="Next"  HREF="031595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] previous connection is NOT automatically	closed if IP different</H1>
    <B>Michael Klishin</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20previous%20connection%20is%20NOT%20automatically%0A%09closed%20if%20IP%20different&In-Reply-To=%3C1D34FBD7-46AA-4E55-A5F6-2214CC84413F%40gopivotal.com%3E"
       TITLE="[rabbitmq-discuss] previous connection is NOT automatically	closed if IP different">mklishin at gopivotal.com
       </A><BR>
    <I>Mon Nov  4 10:22:02 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031622.html">[rabbitmq-discuss] previous connection is NOT automatically closed if IP different
</A></li>
        <LI>Next message: <A HREF="031595.html">[rabbitmq-discuss] When I switch my network connection from one wifi router to another, two consumers are created
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31624">[ date ]</a>
              <a href="thread.html#31624">[ thread ]</a>
              <a href="subject.html#31624">[ subject ]</a>
              <a href="author.html#31624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4 Nov 2013, at 13:56, L H, Wong &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">lhwong at gmail.com</A>&gt; wrote:

&gt;<i> I manage to reconnect from the same device on a different IP by disconnecting from a Wifi router and connecting to another Wifi router. I think this is a very common scenario including switching from 3G network to Wifi network.  
</I>
OK.

Then the reason may be that when you switch the active network interface, the kernel forces
(what it considers to be) open TCP connection on the previously active interface to terminate
properly [1], while without NIC switching it will wait and try to retransmit first, before timing out.

Please try measuring how much effect does using lower heartbeat timeouts have on energy use
and see what&#8217;s the right balance of timeout period vs energy use is for your app.
Reporting your findings to the list for other Android users may be a good idea, too ;)

1. <A HREF="http://www.tcpipguide.com/free/t_TCPConnectionTermination-2.htm">http://www.tcpipguide.com/free/t_TCPConnectionTermination-2.htm</A>
--
MK

Software Engineer, Pivotal/RabbitMQ


</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031622.html">[rabbitmq-discuss] previous connection is NOT automatically closed if IP different
</A></li>
	<LI>Next message: <A HREF="031595.html">[rabbitmq-discuss] When I switch my network connection from one wifi router to another, two consumers are created
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31624">[ date ]</a>
              <a href="thread.html#31624">[ thread ]</a>
              <a href="subject.html#31624">[ subject ]</a>
              <a href="author.html#31624">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
