<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] consuming a message from exchange does not	seem to work on java client (3.2.0 as well as 3.1.5)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20consuming%20a%20message%20from%20exchange%20does%20not%0A%09seem%20to%20work%20on%20java%20client%20%283.2.0%20as%20well%20as%203.1.5%29&In-Reply-To=%3CAE35D907-76FF-409E-98E5-B888D0E9D963%40elementum.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031648.html">
   <LINK REL="Next"  HREF="031654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] consuming a message from exchange does not	seem to work on java client (3.2.0 as well as 3.1.5)</H1>
    <B>Murugesan Guruswamy</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20consuming%20a%20message%20from%20exchange%20does%20not%0A%09seem%20to%20work%20on%20java%20client%20%283.2.0%20as%20well%20as%203.1.5%29&In-Reply-To=%3CAE35D907-76FF-409E-98E5-B888D0E9D963%40elementum.com%3E"
       TITLE="[rabbitmq-discuss] consuming a message from exchange does not	seem to work on java client (3.2.0 as well as 3.1.5)">murugesan at elementum.com
       </A><BR>
    <I>Mon Nov  4 16:41:07 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031648.html">[rabbitmq-discuss] consuming a message from exchange does not	seem to work on java client (3.2.0 as well as 3.1.5)
</A></li>
        <LI>Next message: <A HREF="031654.html">[rabbitmq-discuss] consuming a message from exchange does not seem to work on java client (3.2.0 as well as 3.1.5)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31650">[ date ]</a>
              <a href="thread.html#31650">[ thread ]</a>
              <a href="subject.html#31650">[ subject ]</a>
              <a href="author.html#31650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael,


I am using &quot;test.abc&quot; as routing key for both Publish and consume. I had put the comments below on what values are used for queueName, routingKey and exchangeName. For basicPublish, I am not using any queue.bind since this is publishing to exchange.

Only the consumer is using the queue.bind on the queueName, exchangeName.

Any help:
Publish code:
		Connection conn = factory.newConnection(addr);
		Channel channel = conn.createChannel();
		channel.exchangeDeclare(&quot;localExchange&quot;, &quot;topic&quot;, true); // durable
		channel.basicPublish(&quot;localExchange&quot;, &quot;test.abc&quot;, null, msg.getBytes());

Consumer code:
		Connection conn = factory.newConnection(addr);
		Channel channel = conn.createChannel();
		channel.exchangeDeclare(&quot;localExchange&quot;, &quot;direct&quot;, true);
		channel.queueDeclare(&quot;Notification&quot;, true, false, false, null);
		channel.queueBind(&quot;Notification&quot;, &quot;localExchange&quot;, &quot;test.abc&quot;);
		QueueingConsumer qCon = new QueueingConsumer(channel);
                channel.basicConsume(&quot;Notification&quot;, false, qCon);
		while (true) {
		   Delivery delivery = qCon.nextDelivery();
		   System.out.println(&quot;[x] &quot; + new String(delivery.getBody()) + &quot; &quot; + delivery.getEnvelope().getRoutingKey());	
		   qCon.getChannel().basicAck(delivery.getEnvelope().getDeliveryTag(), false);
		}
                


Any suggestions?

Thx,
Murugesan

                


On Nov 4, 2013, at 8:12 AM, Michael Klishin &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">mklishin at gopivotal.com</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> On 4 Nov 2013, at 10:22, Murugesan Guruswamy &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">murugesan at elementum.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Routing key : &quot;test.abc&quot;, queueName : Notification, exchangeName : localExchange.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Is there any rabbitmq-server configurations to do?
</I>&gt;<i> 
</I>&gt;<i> Direct and topic exchange route message based on routing key of the message.
</I>&gt;<i> Your example does not show if the key used in queue.bind matches the one used in basic.publish
</I>&gt;<i> but it&#8217;s very likely to be the issue.
</I>&gt;<i> 
</I>&gt;<i> Also, you do not consume messages from exchanges.
</I>&gt;<i> 
</I>&gt;<i> See tutorials 3-5 for more info <A HREF="http://www.rabbitmq.com/getstarted.html">http://www.rabbitmq.com/getstarted.html</A>
</I>&gt;<i> and <A HREF="http://www.rabbitmq.com/tutorials/amqp-concepts.html.">http://www.rabbitmq.com/tutorials/amqp-concepts.html.</A>
</I>&gt;<i> 
</I>&gt;<i> Use RabbitMQ management UI to see bindings, message rates and more:
</I>&gt;<i> <A HREF="http://www.rabbitmq.com/management.html">http://www.rabbitmq.com/management.html</A>
</I>&gt;<i> 
</I>&gt;<i> MK
</I>&gt;<i> 
</I>&gt;<i> Software Engineer, Pivotal/RabbitMQ
</I>&gt;<i> 
</I>&gt;<i> 
</I>

-- 
 

Legal Disclaimer: The information contained in this message may be 
privileged and confidential. It is intended to be read only by the 
individual or entity to whom it is addressed or by their designee. If the 
reader of this message is not the intended recipient, you are on notice 
that any distribution of this message, in any form, is strictly prohibited. 
If you have received this message in error, please immediately notify the 
sender and delete or destroy any copy of this message 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131104/830fb96e/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131104/830fb96e/attachment.htm</A>&gt;
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031648.html">[rabbitmq-discuss] consuming a message from exchange does not	seem to work on java client (3.2.0 as well as 3.1.5)
</A></li>
	<LI>Next message: <A HREF="031654.html">[rabbitmq-discuss] consuming a message from exchange does not seem to work on java client (3.2.0 as well as 3.1.5)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31650">[ date ]</a>
              <a href="thread.html#31650">[ thread ]</a>
              <a href="subject.html#31650">[ subject ]</a>
              <a href="author.html#31650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
