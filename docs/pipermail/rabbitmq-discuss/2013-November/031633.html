<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Clean shutdown of a consumer with prefetch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clean%20shutdown%20of%20a%20consumer%20with%20prefetch&In-Reply-To=%3C0FA4957F9E2EB4498102DF92F5BC471701647787C36D%40TMG-E2K7CCR1.group.tradermedia.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031635.html">
   <LINK REL="Next"  HREF="031636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Clean shutdown of a consumer with prefetch</H1>
    <B>Adam Ainsworth</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Clean%20shutdown%20of%20a%20consumer%20with%20prefetch&In-Reply-To=%3C0FA4957F9E2EB4498102DF92F5BC471701647787C36D%40TMG-E2K7CCR1.group.tradermedia.co.uk%3E"
       TITLE="[rabbitmq-discuss] Clean shutdown of a consumer with prefetch">Adam.Ainsworth at TraderMedia.co.uk
       </A><BR>
    <I>Mon Nov  4 12:08:45 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031635.html">[rabbitmq-discuss] Error connecting Stomp Plugin
</A></li>
        <LI>Next message: <A HREF="031636.html">[rabbitmq-discuss] Clean shutdown of a consumer with prefetch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31633">[ date ]</a>
              <a href="thread.html#31633">[ thread ]</a>
              <a href="subject.html#31633">[ subject ]</a>
              <a href="author.html#31633">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have Java RabbitMQ consumers with a large prefetch size for performance. When we close down the consumers the messages in the prefetch buffer on the consumer are marked as redelivered.  We do slow additional checks on redelivered messages to avoid duplicates, so this is a significant performance hit at a time when we have one less consumer than normal.

Is it possible to empty the prefetch buffer when we are closing down to avoid this?

Thanks,

Adam

________________________________________


This e-mail is sent on behalf of Trader Media Group Limited, Registered Office: Auto Trader House, Cutbush Park Industrial Estate, Danehill, Lower Earley, Reading, Berkshire, RG6 4UT(Registered in England No. 4768833). This email and any files transmitted with it are confidential and may be legally privileged, and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. This email message has been swept for the presence of computer viruses. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131104/18b4156b/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131104/18b4156b/attachment.htm</A>&gt;
</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031635.html">[rabbitmq-discuss] Error connecting Stomp Plugin
</A></li>
	<LI>Next message: <A HREF="031636.html">[rabbitmq-discuss] Clean shutdown of a consumer with prefetch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31633">[ date ]</a>
              <a href="thread.html#31633">[ thread ]</a>
              <a href="subject.html#31633">[ subject ]</a>
              <a href="author.html#31633">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
