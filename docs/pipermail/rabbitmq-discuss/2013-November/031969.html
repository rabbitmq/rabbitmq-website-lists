<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] SSL connection - ASN1 error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SSL%20connection%20-%20ASN1%20error&In-Reply-To=%3CABBDC9D7002EB54AB98BA60DA16D26934295BCA3%40FR44EX3003.global.ds.honeywell.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031898.html">
   <LINK REL="Next"  HREF="031992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] SSL connection - ASN1 error</H1>
    <B>Skorepa, Michal</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SSL%20connection%20-%20ASN1%20error&In-Reply-To=%3CABBDC9D7002EB54AB98BA60DA16D26934295BCA3%40FR44EX3003.global.ds.honeywell.com%3E"
       TITLE="[rabbitmq-discuss] SSL connection - ASN1 error">Michal.Skorepa at Honeywell.com
       </A><BR>
    <I>Fri Nov 15 14:18:36 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031898.html">[rabbitmq-discuss] SSL connection - ASN1 error
</A></li>
        <LI>Next message: <A HREF="031992.html">[rabbitmq-discuss] SSL connection - ASN1 error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31969">[ date ]</a>
              <a href="thread.html#31969">[ thread ]</a>
              <a href="subject.html#31969">[ subject ]</a>
              <a href="author.html#31969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Tim,

So, I did what you suggested. I followed the procedure on www.rabbitmq.com/ssl.html and generated brand new certificates. Now I am getting a different error. It is not an exception as before, now it is an error result from amqp_connection:start(Args). 

The log on the client side says:

2013-11-15 13:02:56.384 [error] &lt;0.412.0&gt; SSL: certify: tls_handshake.erl:1331:Fatal error: handshake failure
2013-11-15 13:02:56.386 [error] &lt;0.309.0&gt;@swim_cm_connector:handle_info:73 Connection setup error: {tls_alert,&quot;handshake failure&quot;}
---------------

On the server side it is:

=INFO REPORT==== 15-Nov-2013::15:05:39 ===
accepting AMQP connection &lt;0.4914.0&gt; (10.10.10.52:37826 -&gt; 192.168.0.21:5671)

=ERROR REPORT==== 15-Nov-2013::15:05:40 ===
SSL: certify: ssl_connection.erl:1678:Fatal error: handshake failure

=INFO REPORT==== 15-Nov-2013::15:05:46 ===
accepting AMQP connection &lt;0.4923.0&gt; (10.10.10.52:42106 -&gt; 192.168.0.21:5671)

=ERROR REPORT==== 15-Nov-2013::15:05:46 ===
SSL: certify: ssl_connection.erl:1678:Fatal error: handshake failure

=ERROR REPORT==== 15-Nov-2013::15:05:50 ===
error on AMQP connection &lt;0.4914.0&gt;: {ssl_upgrade_error,esslaccept} (unknown POSIX error)

=ERROR REPORT==== 15-Nov-2013::15:05:56 ===
error on AMQP connection &lt;0.4923.0&gt;: {ssl_upgrade_error,esslaccept} (unknown POSIX error)
---------------------

I really do not understand why this is happening.

Also, I follow the troubleshooting procedure on <A HREF="http://www.rabbitmq.com/troubleshooting-ssl.html">http://www.rabbitmq.com/troubleshooting-ssl.html</A> and everything worked fine except for the last exercise - the stunnel test. When performing this test, I got an exception on the client side saying:

12:51:02.154 [error] swim_cm_connector: Exception caught in connection setup.
 Exception: exit
 Reason: {{function_clause,[{amqp_gen_connection,terminate,[{{badarg,[{crypto,ec_key_generate,[secp256r1],[]},{crypto,generate_key,3,[{file,&quot;crypto.erl&quot;},{line,560}]},{public_key,ec_generate_key,1,[{file,&quot;public_key.erl&quot;},{line,869}]},{tls_connection,server_master_secret,2,[{file,&quot;tls_connection.erl&quot;},{line,2053}]},{tls_connection,certify,2,[{file,&quot;tls_connection.erl&quot;},{line,544}]},{tls_connection,next_state,4,[{file,&quot;tls_connection.erl&quot;},{line,2537}]},{gen_fsm,handle_msg,7,[{file,&quot;gen_fsm.erl&quot;},{line,505}]},{proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},{gen_fsm,sync_send_all_state_event,[&lt;0.425.0&gt;,{start,infinity},infinity]}},{&lt;0.421.0&gt;,{amqp_params_network,&lt;&lt;&quot;xxx&quot;&gt;&gt;,&lt;&lt;&quot;xxx&quot;&gt;&gt;,&lt;&lt;&quot;demo&quot;&gt;&gt;,{192,168,0,21},5677,0,0,60,infinity,[{cacertfile,&quot;/home/root/new_certificates/testca/cacert.pem&quot;},{certfile,&quot;/home/root/new_certificates/client/cert.pem&quot;},{keyfile,&quot;/home/root/new_certificates/client/key.pem&quot;},{verify,verify_peer},{fail_if_no_peer_cert,false}],[#Fun&lt;amqp_auth_mechanisms.plain.3&gt;,#Fun&lt;amqp_auth_mechanisms.amqplain.3&gt;],[],[{tos,64}]}}],[{file,&quot;src/amqp_gen_connection.erl&quot;},{line,229}]},{gen_server,terminate,6,[{file,&quot;gen_server.erl&quot;},{line,719}]},{proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},{gen_server,call,[&lt;0.422.0&gt;,connect,infinity]}}
-----------------------

The stunnel log says:

2013.11.15 13:48:50 LOG7[23085:139972456994560]: Service [stunnel3] accepted (FD=4) from 10.10.10.52:33027
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Service [stunnel3] started
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Waiting for a libwrap process
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Acquired libwrap process #0
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Releasing libwrap process #0
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Released libwrap process #0
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Service [stunnel3] permitted by libwrap from 10.10.10.52:33027
2013.11.15 13:48:50 LOG5[23085:139972456986368]: Service [stunnel3] accepted connection from 10.10.10.52:33027
2013.11.15 13:48:50 LOG3[23085:139972456986368]: SSL_accept: Peer suddenly disconnected
2013.11.15 13:48:50 LOG5[23085:139972456986368]: Connection reset: 0 byte(s) sent to SSL, 0 byte(s) sent to socket
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Local socket (FD=4) closed
2013.11.15 13:48:50 LOG7[23085:139972456986368]: Service [stunnel3] finished (0 left)
----------------------

Does this make any sense to you?

Thank you!
Michal




-----Original Message-----
From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Tim Watson
Sent: 13. listopadu 2013 12:22
To: Discussions about RabbitMQ
Subject: Re: [rabbitmq-discuss] SSL connection - ASN1 error

Hi Michal,

&gt;<i> So the new release did not fix the issue. I am still getting the same error.
</I>
The fix Simon and I spoke with you about previously was related to the startup error, which was fixed in 3.2.0 - see <A HREF="http://www.rabbitmq.com/release-notes/README-3.2.0.txt:">http://www.rabbitmq.com/release-notes/README-3.2.0.txt:</A>

&quot;25794 prevent startup error when using SSL on versions of Erlang from R16B01&quot;

These other issues appear to be to do with your SSL setup, and that's hard/impossible to diagnose without more information. If I follow the instructions in www.rabbitmq.com/ssl.html for setting up testing certificates for the client and server, then I can successfully establish and close an SSL connection to the broker using the Erlang client, based on the latest RabbitMQ release and using Erlang R16B02 for both client and server. Can you please test that you can do the same, at which point we'll at least have a baseline to work to whilst trying to identify what the real issue you're running into is.

Cheers,
Tim 

On 13 Nov 2013, at 10:07, Skorepa, Michal wrote:

&gt;<i> Hi Tim,
</I>&gt;<i> 
</I>&gt;<i> So the new release did not fix the issue. I am still getting the same error.
</I>&gt;<i> 
</I>&gt;<i> What I am trying to do is a broker-to-broker communication. One broker (a &quot;server&quot;) is a standard RabbitMQ. The other broker (a &quot;client&quot;) is a RabbitMQ running a plugin application, which based on some events connects to the &quot;server&quot; broker using erlang AMQP client. We have been using this concept without SSL for a long time without any problems (several erlang and RabbitMQ versions). We have also tested it with SSL having RabbitMQ 3.1.3 and Erlang R15B01 on the &quot;server&quot; side and RabbitMQ 3.0.4 and Erlang R15B01 on the &quot;client&quot; side. This also worked.
</I>&gt;<i> But having the same &quot;server&quot; broker (RabbitMQ 3.1.3 and Erlang 15B01) and using the &quot;client&quot; broker with RabbitMQ 3.2.1 and Erlang 16B01 throws the exception mentioned below when calling amqp_connection:start(Params).
</I>&gt;<i> It seems the error came with the Erlang upgrade.
</I>&gt;<i> 
</I>&gt;<i> The log files follow..
</I>&gt;<i> 
</I>&gt;<i> The relevant lines form the plugin application log:
</I>&gt;<i> 
</I>&gt;<i> 2013-11-12 14:35:00.168 [debug] &lt;0.309.0&gt;@swim_cm_connector:handle_info:65 Connection parameters: {amqp_params_network,&lt;&lt;&quot;aaa&quot;&gt;&gt;,&lt;&lt;&quot;aaa&quot;&gt;&gt;,&lt;&lt;&quot;demo&quot;&gt;&gt;,{192,168,0,21},5677,0,0,60,infinity,[{cacertfile,&quot;/etc/ssl/swim/swim-ca_cert.pem&quot;},{certfile,&quot;/etc/ssl/swim/cert.pem&quot;},{keyfile,&quot;/etc/ssl/swim/key.pem&quot;},{verify,verify_peer},{fail_if_no_peer_cert,true}],[#Fun&lt;amqp_auth_mechanisms.plain.3&gt;,#Fun&lt;amqp_auth_mechanisms.amqplain.3&gt;],[],[{tos,64}]}.
</I>&gt;<i> 2013-11-12 14:35:00.171 [debug] &lt;0.316.0&gt; Supervisor 
</I>&gt;<i> {&lt;0.316.0&gt;,amqp_connection_sup} started 
</I>&gt;<i> amqp_gen_connection:start_link(&lt;0.318.0&gt;, 
</I>&gt;<i> {amqp_params_direct,&lt;&lt;&quot;swim&quot;&gt;&gt;,none,&lt;&lt;&quot;/&quot;&gt;&gt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">,rabbit at overoB7</A>,none,[]}) 
</I>&gt;<i> at pid &lt;0.319.0&gt;
</I>&gt;<i> 2013-11-12 14:35:00.178 [debug] &lt;0.318.0&gt; Supervisor 
</I>&gt;<i> {&lt;0.318.0&gt;,amqp_connection_type_sup} started 
</I>&gt;<i> amqp_channel_sup_sup:start_link(direct, &lt;0.319.0&gt;) at pid &lt;0.321.0&gt;
</I>&gt;<i> 2013-11-12 14:35:00.185 [debug] &lt;0.320.0&gt; Supervisor 
</I>&gt;<i> {&lt;0.320.0&gt;,amqp_connection_sup} started 
</I>&gt;<i> amqp_connection_type_sup:start_link() at pid &lt;0.322.0&gt;
</I>&gt;<i> 2013-11-12 14:35:00.187 [debug] &lt;0.318.0&gt; Supervisor 
</I>&gt;<i> {&lt;0.318.0&gt;,amqp_connection_type_sup} started 
</I>&gt;<i> amqp_channels_manager:start_link(&lt;0.319.0&gt;, &lt;0.321.0&gt;) at pid 
</I>&gt;<i> &lt;0.323.0&gt;
</I>&gt;<i> 2013-11-12 14:35:00.193 [debug] &lt;0.320.0&gt; Supervisor 
</I>&gt;<i> {&lt;0.320.0&gt;,amqp_connection_sup} started 
</I>&gt;<i> amqp_gen_connection:start_link(&lt;0.322.0&gt;, 
</I>&gt;<i> {amqp_params_network,&lt;&lt;&quot;aaa&quot;&gt;&gt;,&lt;&lt;&quot;aaa&quot;&gt;&gt;,&lt;&lt;&quot;demo&quot;&gt;&gt;,{192,168,0,21},567
</I>&gt;<i> 7,0,0,60,infinity,[{cacertfile,...},...],...}) at pid &lt;0.324.0&gt;
</I>&gt;<i> 2013-11-12 14:35:00.194 [debug] &lt;0.318.0&gt; Supervisor 
</I>&gt;<i> {&lt;0.318.0&gt;,amqp_connection_type_sup} started 
</I>&gt;<i> rabbit_queue_collector:start_link() at pid &lt;0.325.0&gt;
</I>&gt;<i> 2013-11-12 14:35:00.577 [info] &lt;0.7.0&gt; Application asn1 started on 
</I>&gt;<i> node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at overoB7</A>
</I>&gt;<i> 2013-11-12 14:35:00.882 [info] &lt;0.7.0&gt; Application webmachine started 
</I>&gt;<i> on node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at overoB7</A>
</I>&gt;<i> 2013-11-12 14:35:00.926 [debug] &lt;0.358.0&gt; Supervisor crypto_sup 
</I>&gt;<i> started crypto_server:start_link() at pid &lt;0.368.0&gt;
</I>&gt;<i> 2013-11-12 14:35:00.928 [info] &lt;0.7.0&gt; Application crypto started on 
</I>&gt;<i> node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at overoB7</A>
</I>&gt;<i> 2013-11-12 14:35:01.037 [info] &lt;0.7.0&gt; Application public_key started 
</I>&gt;<i> on node <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at overoB7</A>
</I>&gt;<i> 2013-11-12 14:35:01.672 [debug] &lt;0.375.0&gt; Supervisor ssl_sup started 
</I>&gt;<i> ssl_manager:start_link([]) at pid &lt;0.376.0&gt;
</I>&gt;<i> 2013-11-12 14:35:01.722 [debug] &lt;0.375.0&gt; Supervisor ssl_sup started 
</I>&gt;<i> ssl_connection_sup:start_link() at pid &lt;0.377.0&gt;
</I>&gt;<i> 2013-11-12 14:35:01.724 [info] &lt;0.7.0&gt; Application ssl started on node 
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbit at overoB7</A>
</I>&gt;<i> 2013-11-12 14:35:02.389 [debug] &lt;0.396.0&gt; Supervisor rabbit_mgmt_sup 
</I>&gt;<i> started supervisor2:start_link(mirrored_supervisor, 
</I>&gt;<i> {delegate,{one_for_one,10,10}}) at pid &lt;0.397.0&gt;
</I>&gt;<i> 2013-11-12 14:35:02.392 [debug] &lt;0.396.0&gt; Supervisor rabbit_mgmt_sup 
</I>&gt;<i> started mirrored_supervisor:start_internal(rabbit_mgmt_sup, 
</I>&gt;<i> [{rabbit_mgmt_db,{rabbit_mgmt_db,start_link,[]},permanent,4294967295,w
</I>&gt;<i> orker,[rabbit_mgmt_db]}]) at pid &lt;0.398.0&gt;
</I>&gt;<i> 2013-11-12 14:35:02.394 [debug] &lt;0.32.0&gt; Supervisor kernel_safe_sup 
</I>&gt;<i> started pg2_fixed:start_link() at pid &lt;0.399.0&gt;
</I>&gt;<i> 2013-11-12 14:35:02.421 [info] &lt;0.177.0&gt; Statistics database started.
</I>&gt;<i> 2013-11-12 14:35:02.472 [error] &lt;0.309.0&gt;@swim_cm_connector:handle_info:84 Exception caught in connection setup for CoS 1.
</I>&gt;<i> Exception: exit
</I>&gt;<i> Reason: 
</I>&gt;<i> {{function_clause,[{amqp_gen_connection,terminate,[{{{badmatch,error},
</I>&gt;<i> [{tls_connection,dh_master_secret,5,[{file,&quot;tls_connection.erl&quot;},{line
</I>&gt;<i> ,2093}]},{tls_connection,certify,2,[{file,&quot;tls_connection.erl&quot;},{line,
</I>&gt;<i> 544}]},{tls_connection,next_state,4,[{file,&quot;tls_connection.erl&quot;},{line
</I>&gt;<i> ,2537}]},{gen_fsm,handle_msg,7,[{file,&quot;gen_fsm.erl&quot;},{line,505}]},{pro
</I>&gt;<i> c_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},{gen_fsm
</I>&gt;<i> ,sync_send_all_state_event,[&lt;0.378.0&gt;,{start,infinity},infinity]}},{&lt;0
</I>&gt;<i> .322.0&gt;,{amqp_params_network,&lt;&lt;&quot;aaa&quot;&gt;&gt;,&lt;&lt;&quot;aaa&quot;&gt;&gt;,&lt;&lt;&quot;demo&quot;&gt;&gt;,{192,168,0
</I>&gt;<i> ,21},5677,0,0,60,infinity,[{cacertfile,&quot;/etc/ssl/swim/swim-ca_cert.pem
</I>&gt;<i> &quot;},{certfile,&quot;/etc/ssl/swim/cert.pem&quot;},{keyfile,&quot;/etc/ssl/swim/key.pem
</I>&gt;<i> &quot;},{verify,verify_peer},{fail_if_no_peer_cert,true}],[#Fun&lt;amqp_auth_m
</I>&gt;<i> echanisms.plain.3&gt;,#Fun&lt;amqp_auth_mechanisms.amqplain.3&gt;],[],[{tos,64}
</I>&gt;<i> ]}}],[{file,&quot;src/amqp_gen_connection.erl&quot;},{line,229}]},{gen_server,te
</I>&gt;<i> rminate,6,[{file,&quot;gen_server.erl&quot;},{line,719}]},{proc_lib,init_p_do_ap
</I>&gt;<i> ply,3,[{file,&quot;proc_lib.erl&quot;},{line,239}]}]},{gen_server,call,[&lt;0.324.0
</I>&gt;<i> &gt;,connect,infinity]}}
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> And the &quot;server&quot; broker log:
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 12-Nov-2013::14:34:29 === accepting AMQP connection 
</I>&gt;<i> &lt;0.26684.61&gt; (10.10.10.52:41980 -&gt; 192.168.0.21:5677)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 12-Nov-2013::14:34:30 === accepting AMQP connection 
</I>&gt;<i> &lt;0.26688.61&gt; (10.10.10.52:33288 -&gt; 192.168.0.21:5677)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 12-Nov-2013::14:34:30 === accepting AMQP connection 
</I>&gt;<i> &lt;0.26692.61&gt; (10.10.10.52:36058 -&gt; 192.168.0.21:5677)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 12-Nov-2013::14:34:31 === accepting AMQP connection 
</I>&gt;<i> &lt;0.26696.61&gt; (10.10.10.52:33409 -&gt; 192.168.0.21:5677)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 12-Nov-2013::14:34:31 === accepting AMQP connection 
</I>&gt;<i> &lt;0.26700.61&gt; (10.10.10.52:34012 -&gt; 192.168.0.21:5677)
</I>&gt;<i> 
</I>&gt;<i> =INFO REPORT==== 12-Nov-2013::14:34:31 === accepting AMQP connection 
</I>&gt;<i> &lt;0.26704.61&gt; (10.10.10.52:33157 -&gt; 192.168.0.21:5677)
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 12-Nov-2013::14:34:39 === error on AMQP connection 
</I>&gt;<i> &lt;0.26684.61&gt;: {ssl_upgrade_error,closed} (unknown POSIX error)
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 12-Nov-2013::14:34:40 === error on AMQP connection 
</I>&gt;<i> &lt;0.26688.61&gt;: {ssl_upgrade_error,closed} (unknown POSIX error)
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 12-Nov-2013::14:34:40 === error on AMQP connection 
</I>&gt;<i> &lt;0.26692.61&gt;: {ssl_upgrade_error,closed} (unknown POSIX error)
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 12-Nov-2013::14:34:41 === error on AMQP connection 
</I>&gt;<i> &lt;0.26696.61&gt;: {ssl_upgrade_error,closed} (unknown POSIX error)
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 12-Nov-2013::14:34:41 === error on AMQP connection 
</I>&gt;<i> &lt;0.26700.61&gt;: {ssl_upgrade_error,closed} (unknown POSIX error)
</I>&gt;<i> 
</I>&gt;<i> =ERROR REPORT==== 12-Nov-2013::14:34:41 === error on AMQP connection 
</I>&gt;<i> &lt;0.26704.61&gt;: {ssl_upgrade_error,closed} (unknown POSIX error)
</I>&gt;<i> 
</I>&gt;<i> --------------------------------
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thank you for any ideas!
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Michal
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A> 
</I>&gt;<i> [mailto:<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss-bounces at lists.rabbitmq.com</A>] On Behalf Of Tim 
</I>&gt;<i> Watson
</I>&gt;<i> Sent: 16. &#345;&#237;jna 2013 13:38
</I>&gt;<i> To: Discussions about RabbitMQ
</I>&gt;<i> Subject: Re: [rabbitmq-discuss] SSL connection - ASN1 error
</I>&gt;<i> 
</I>&gt;<i> Hi Michal,
</I>&gt;<i> 
</I>&gt;<i> On 1 Oct 2013, at 13:06, Skorepa, Michal wrote:
</I>&gt;&gt;<i> Thank you, Simon. But unfortunately neither of the proposed workarounds worked for me. Both produced the same error:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> {{{{badmatch,error},[{tls_connection,dh_master_secret,5,[{file,&quot;tls_c
</I>&gt;&gt;<i> o 
</I>&gt;&gt;<i> nnection.erl&quot;},{line,2093}]},{tls_connection,certify,2,[{file,&quot;tls_co
</I>&gt;&gt;<i> n 
</I>&gt;&gt;<i> nection.erl&quot;},{line,544}]},{tls_connection,next_state,4,[{file,&quot;tls_c
</I>&gt;&gt;<i> o 
</I>&gt;&gt;<i> nnection.erl&quot;},{line,2537}]},{gen_fsm,handle_msg,7,[{file,&quot;gen_fsm.er
</I>&gt;&gt;<i> l 
</I>&gt;&gt;<i> &quot;},{line,505}]},{proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{l
</I>&gt;&gt;<i> i 
</I>&gt;&gt;<i> ne,239}]}]},{gen_fsm,sync_send_all_state_event,[&lt;0.324.0&gt;,{start,infi
</I>&gt;&gt;<i> n ity},infinity]}},{gen_server,call,[&lt;0.292.0&gt;,connect,infinity]}}
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> That looks like a very different error from the one you'd see due to the asn1 application not being started.
</I>&gt;<i> 
</I>&gt;&gt;<i> Do you have any other suggestions?
</I>&gt;<i> [snip]
</I>&gt;&gt;&gt;<i> I am getting an exception in SSL connection establishment by AMQP 
</I>&gt;&gt;&gt;<i> Erlang client (used by an application which is running as a RMQ plugin):
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Can you explain a bit more about what you're doing here? The stack trace above indicates a failure during cryptographic key generation, which seems odd under the circumstances. Is there any more information available in the logs? In particular, it would be useful to have some more context for the error, e.g., an INFO report from the process in which this crash occured.
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Also, when do you plan to release a new version of AMQP Erlang client?
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> AFAIK a new release should be imminent. Although we cannot make any guarantees about release timescales, I'd expect to see one either this week or early next.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Tim
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
_______________________________________________
rabbitmq-discuss mailing list
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031898.html">[rabbitmq-discuss] SSL connection - ASN1 error
</A></li>
	<LI>Next message: <A HREF="031992.html">[rabbitmq-discuss] SSL connection - ASN1 error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31969">[ date ]</a>
              <a href="thread.html#31969">[ thread ]</a>
              <a href="subject.html#31969">[ subject ]</a>
              <a href="author.html#31969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
