<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] previous connection is NOT automatically closed if IP different
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20previous%20connection%20is%20NOT%20automatically%0A%20closed%20if%20IP%20different&In-Reply-To=%3C527516E3.8090600%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031602.html">
   <LINK REL="Next"  HREF="031609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] previous connection is NOT automatically closed if IP different</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20previous%20connection%20is%20NOT%20automatically%0A%20closed%20if%20IP%20different&In-Reply-To=%3C527516E3.8090600%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] previous connection is NOT automatically closed if IP different">matthias at rabbitmq.com
       </A><BR>
    <I>Sat Nov  2 15:14:43 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031602.html">[rabbitmq-discuss] previous connection is NOT automatically closed if IP different
</A></li>
        <LI>Next message: <A HREF="031609.html">[rabbitmq-discuss] previous connection is NOT automatically	closed if IP different
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31603">[ date ]</a>
              <a href="thread.html#31603">[ thread ]</a>
              <a href="subject.html#31603">[ subject ]</a>
              <a href="author.html#31603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/11/13 13:39, L H, Wong wrote:
&gt;<i> Is there any way to ensure that the unacknowledged messages on the
</I>&gt;<i> old connection are being re-queued immediately and being delivered to
</I>&gt;<i> other consumer?
</I>
&quot;immediately&quot; when *what* happens?

If a client properly closes the rabbitmq connection (through the API or
even just doing a full TCP connection closure handshake) then messages
pending ack will get re-queued right at that point.

If, OTOH, there is just some network disruption then rabbit won't know
the connection is dead until various TCP-level timeouts kick in. That is
fundamental to the design of TCP.

AMQP heartbeats exist to give applications control over connection
liveness. So if you want to ensure dead connections get detected
promptly, then use a low AMQP heartbeat interval. The &quot;any way&quot; you are
looking for is exactly that. As Michael explained already.

&gt;<i> if I set the value to lower value like 10s it will consume more
</I>&gt;<i> battery power and also cause higher data usage.
</I>
There is no other way to do this. Peers of a connection cannot magically 
detect that the connection is dead. It requires either a positive signal 
(such as controlled connection closure), or negative signal (absence of 
any traffic for some duration of time).

Regards,

Matthias.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031602.html">[rabbitmq-discuss] previous connection is NOT automatically closed if IP different
</A></li>
	<LI>Next message: <A HREF="031609.html">[rabbitmq-discuss] previous connection is NOT automatically	closed if IP different
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31603">[ date ]</a>
              <a href="thread.html#31603">[ thread ]</a>
              <a href="subject.html#31603">[ subject ]</a>
              <a href="author.html#31603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
