<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] When I switch my network connection from one wifi router to another, two consumers are created
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20When%20I%20switch%20my%20network%20connection%20from%20one%0A%20wifi%20router%20to%20another%2C%20two%20consumers%20are%20created&In-Reply-To=%3CCAGDK9bk%3DPiuVWa_2AnrHDWZyNjXQB73cD9VmpHzMXmQ7fS2Pxg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031624.html">
   <LINK REL="Next"  HREF="031597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] When I switch my network connection from one wifi router to another, two consumers are created</H1>
    <B>L H, Wong </B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20When%20I%20switch%20my%20network%20connection%20from%20one%0A%20wifi%20router%20to%20another%2C%20two%20consumers%20are%20created&In-Reply-To=%3CCAGDK9bk%3DPiuVWa_2AnrHDWZyNjXQB73cD9VmpHzMXmQ7fS2Pxg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] When I switch my network connection from one wifi router to another, two consumers are created">lhwong at gmail.com
       </A><BR>
    <I>Sat Nov  2 05:47:36 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031624.html">[rabbitmq-discuss] previous connection is NOT automatically	closed if IP different
</A></li>
        <LI>Next message: <A HREF="031597.html">[rabbitmq-discuss] When I switch my network connection from one	wifi router to another, two consumers are created
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31595">[ date ]</a>
              <a href="thread.html#31595">[ thread ]</a>
              <a href="subject.html#31595">[ subject ]</a>
              <a href="author.html#31595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Oct 31, 2013 at 5:36 PM, Emile Joubert &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">emile at rabbitmq.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> On 31/10/13 07:46, Liong Hung Wong wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; When I switch my network connection from one wifi router to another, two
</I>&gt;<i> &gt; consumers are created for the queue as below. In that case, messages
</I>&gt;<i> &gt; will be distributed between both consumers, hence, the app only receives
</I>&gt;<i> &gt; alternate message until the first connection timeout due to heartbeat
</I>&gt;<i> &gt; setting.
</I>&gt;<i>
</I>&gt;<i> If you want to ensure that only one consumer can get messages from a
</I>&gt;<i> queue then set the exclusive flag.
</I>&gt;<i>
</I>&gt;<i>
</I>If I set the queue exclusive flag, the new connection/channel can not be
attached to the queue until the first connection timeout. The queue is a
permanent queue so that the client doesn't miss any message published to
the queue when the client is offline.



&gt;<i> &gt; I am not able to cancel the first consumer with
</I>&gt;<i> &gt; channel.basicCancel(consumerTag) when as the connection has already been
</I>&gt;<i> &gt; closed. Is there any way to overcome this problem?
</I>&gt;<i>
</I>&gt;<i> This should not be a problem. If the connection of one consumer has
</I>&gt;<i> already closed by the time the second consumer opened then there will be
</I>&gt;<i> no overlap in subscriptions. If consumers subscribe without autoAck then
</I>&gt;<i> unacknowledged messages will be returned to the queue when a connection
</I>&gt;<i> terminates, and any subsequent consumer will be able to process such
</I>&gt;<i> messages.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The first connection has not been closed on the server although it has
</I>been closed on the client side (the close command doesn't get sent to the
server as the network connection is already down). The first connection on
the server only gets closed after heartbeat timeout (default 600s).

During the 600s, M1, M2, M3 and M4 published to the queue. New connection
only get M2, and M4 during the 600s. After the first connection closed, the
new connection/channel gets M1 and M3. What I want to achieve is to be able
to get all of the messages in real-time.




&gt;<i>
</I>&gt;<i> -Emile
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131102/fb35a735/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131102/fb35a735/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031624.html">[rabbitmq-discuss] previous connection is NOT automatically	closed if IP different
</A></li>
	<LI>Next message: <A HREF="031597.html">[rabbitmq-discuss] When I switch my network connection from one	wifi router to another, two consumers are created
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31595">[ date ]</a>
              <a href="thread.html#31595">[ thread ]</a>
              <a href="subject.html#31595">[ subject ]</a>
              <a href="author.html#31595">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
