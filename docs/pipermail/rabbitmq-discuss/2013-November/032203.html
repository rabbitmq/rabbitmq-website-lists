<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Cluster capability?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20capability%3F&In-Reply-To=%3CCAMcAHLW90xnfTLf7_R9XN_1Y11C0SP3nBDmVAeWavUyzCQmeNg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032199.html">
   <LINK REL="Next"  HREF="032205.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Cluster capability?</H1>
    <B>Alvaro Videla</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Cluster%20capability%3F&In-Reply-To=%3CCAMcAHLW90xnfTLf7_R9XN_1Y11C0SP3nBDmVAeWavUyzCQmeNg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Cluster capability?">videlalvaro at gmail.com
       </A><BR>
    <I>Thu Nov 28 15:12:13 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032199.html">[rabbitmq-discuss] Cluster capability?
</A></li>
        <LI>Next message: <A HREF="032205.html">[rabbitmq-discuss] Cluster capability?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32203">[ date ]</a>
              <a href="thread.html#32203">[ thread ]</a>
              <a href="subject.html#32203">[ subject ]</a>
              <a href="author.html#32203">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Thu, Nov 28, 2013 at 2:36 PM, Paul &lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">arachweb at gmail.com</A>&gt; wrote:

&gt;<i> My concern is that in an HA Queue implementation, a given message could be consumed more than once, i.e., once on computer A and once on B. Consequently, the same unit of work will be executed twice, and that's no good.
</I>
No. RabbitMQ will ensure that a message will be seen by just one
consumer. If a message arrived to queue Q, which is mirrored on node A
and node B, the message will be replicated across those nodes, but
still RabbitMQ will send the message to just one consumer. HA queues
have a master node and it will synchronise work with the slave queues.

Of course what Simon says above also applies. If a message got routed
to more than one queue, then that particular message could be seen by
more than one consumer, but that doesn't seem to be what you are
asking here.

For a particular queue (whether HA or not) messages are delivered just
once. If the consumer is in ack mode and it crashes before acking,
then yes, that message will be requeued and delivered again.

Also one recommendation, although not easy to achieve, is to have
idempotent consumers.

Regards,

Alvaro
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032199.html">[rabbitmq-discuss] Cluster capability?
</A></li>
	<LI>Next message: <A HREF="032205.html">[rabbitmq-discuss] Cluster capability?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32203">[ date ]</a>
              <a href="thread.html#32203">[ thread ]</a>
              <a href="subject.html#32203">[ subject ]</a>
              <a href="author.html#32203">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
