<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Does SSD improve rabbitmq's performance
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Does%20SSD%20improve%20rabbitmq%27s%20performance&In-Reply-To=%3CCAJ4uuZZiuKOLY8Gsow1VtkA55dDo5fyWY04D%2B-zVeDpR6zg8Bg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032039.html">
   <LINK REL="Next"  HREF="032041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Does SSD improve rabbitmq's performance</H1>
    <B>Graeme N</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Does%20SSD%20improve%20rabbitmq%27s%20performance&In-Reply-To=%3CCAJ4uuZZiuKOLY8Gsow1VtkA55dDo5fyWY04D%2B-zVeDpR6zg8Bg%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Does SSD improve rabbitmq's performance">graeme at sudo.ca
       </A><BR>
    <I>Wed Nov 20 20:21:33 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032039.html">[rabbitmq-discuss] Does SSD improve rabbitmq's performance
</A></li>
        <LI>Next message: <A HREF="032041.html">[rabbitmq-discuss] Does SSD improve rabbitmq's performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32040">[ date ]</a>
              <a href="thread.html#32040">[ thread ]</a>
              <a href="subject.html#32040">[ subject ]</a>
              <a href="author.html#32040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Nov 20, 2013 at 12:04 PM, Matthias Radestock
&lt;<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">matthias at rabbitmq.com</A>&gt;wrote:

&gt;<i> Fair enough, though note that your problems were with mirrored queues,
</I>&gt;<i> not the persistence mechanisms. Very few bugs have been found in the
</I>&gt;<i> persister in the last few years.
</I>

Gotcha. I can't really imagine a situation where you'd actually want single
machine persistence (ie persistent queues without HA), but I guess I'm
fairly risk averse.

The main reason for the disclaimer is the difficulty in explaining when one
&gt;<i> would want to change that value and what impact doing so might have.
</I>&gt;<i>
</I>&gt;<i> But if you believe that the default msg_store file size is hurting
</I>&gt;<i> performance significantly, then experimenting with different values is
</I>&gt;<i> definitely worthwhile. Let us know what you find. Perhaps then we can
</I>&gt;<i> give some better guidance to our users than &quot;don't touch this&quot;.
</I>

Sounds good. I'll try to generate a synthetic workload on disk based
systems and graph the change in rabbitmq delivery performance. Certainly we
know that apps like Riak, with its universal append-only datastore, see a
much smaller margin of advantage with SSDs over spinning disks compared to
what we're seeing with RabbitMQ on our disk vs SSD nodes. However, I
understand what its data store is doing a lot better than I understand what
RabbitMQ is doing.

For instance:

- Does RabbitMQ have a compaction step like bitcask or innodb, where after
writing a certain amount of append-only work, it coalesces this to a more
efficient on disk format?
- How are deletes handled on queues that don't fully drain? If I increase
the message store size to 500 MiB, but the queues they represent are never
fully emptied, will they just grow to max queue size and stay there like
InnoDB on disk files?

Graeme
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131120/a601e344/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131120/a601e344/attachment.htm</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032039.html">[rabbitmq-discuss] Does SSD improve rabbitmq's performance
</A></li>
	<LI>Next message: <A HREF="032041.html">[rabbitmq-discuss] Does SSD improve rabbitmq's performance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32040">[ date ]</a>
              <a href="thread.html#32040">[ thread ]</a>
              <a href="subject.html#32040">[ subject ]</a>
              <a href="author.html#32040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
