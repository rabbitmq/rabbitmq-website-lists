<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Exchange Feature request: Drop Duplicates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exchange%20Feature%20request%3A%20Drop%20Duplicates&In-Reply-To=%3CCAKgmDnEWqf%3DpwN-X%3DGdLYqRQnAWbsMpwF1s91xBmUH5RynvDyQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031836.html">
   <LINK REL="Next"  HREF="031859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Exchange Feature request: Drop Duplicates</H1>
    <B>Laing, Michael</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Exchange%20Feature%20request%3A%20Drop%20Duplicates&In-Reply-To=%3CCAKgmDnEWqf%3DpwN-X%3DGdLYqRQnAWbsMpwF1s91xBmUH5RynvDyQ%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Exchange Feature request: Drop Duplicates">michael.laing at nytimes.com
       </A><BR>
    <I>Mon Nov 11 11:35:37 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031836.html">[rabbitmq-discuss] Read all, ack later?
</A></li>
        <LI>Next message: <A HREF="031859.html">[rabbitmq-discuss] Exchange Feature request: Drop Duplicates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31838">[ date ]</a>
              <a href="thread.html#31838">[ thread ]</a>
              <a href="subject.html#31838">[ subject ]</a>
              <a href="author.html#31838">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In our scenarios, messages are ultimately delivered to a 'retail' rabbitmq
instance to be delivered to a client. The pipelines that process and
deliver messages are purposefully redundant, hence there may be multiple
replicas of each message 'racing' to the endpoint.

Usually, the replicas are resolved before getting to the retail rabbit.
When components fail, however, duplicates can leak through during a small
window of time. We eliminate those duplicates at the retail layer by
looking at each message_id. Ultimately, our client contract allows
duplicates as well in case one slips by.

It seems to me that this is a generic issue.

What would be useful in our case, and hopefully for many others, would be a
'Duplicate Message ID Window' in milliseconds, as an exchange attribute.

If non-zero, the exchange would drop any message with a duplicate
message_id that appeared within the specified window of time, possibly
routing it to the alternate exchange, if set.

In our case, a window of a few seconds, perhaps up to a minute would
suffice.

Thanks,

Michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131111/3b1b6434/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131111/3b1b6434/attachment.htm</A>&gt;
</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031836.html">[rabbitmq-discuss] Read all, ack later?
</A></li>
	<LI>Next message: <A HREF="031859.html">[rabbitmq-discuss] Exchange Feature request: Drop Duplicates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31838">[ date ]</a>
              <a href="thread.html#31838">[ thread ]</a>
              <a href="subject.html#31838">[ subject ]</a>
              <a href="author.html#31838">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
