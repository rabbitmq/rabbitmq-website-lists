<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Stats node getting slow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Stats%20node%20getting%20slow&In-Reply-To=%3C5280A8E6.6010506%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031830.html">
   <LINK REL="Next"  HREF="031844.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Stats node getting slow</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Stats%20node%20getting%20slow&In-Reply-To=%3C5280A8E6.6010506%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] Stats node getting slow">simon at rabbitmq.com
       </A><BR>
    <I>Mon Nov 11 09:52:38 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031830.html">[rabbitmq-discuss] Stats node getting slow
</A></li>
        <LI>Next message: <A HREF="031844.html">[rabbitmq-discuss] Stats node getting slow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31831">[ date ]</a>
              <a href="thread.html#31831">[ thread ]</a>
              <a href="subject.html#31831">[ subject ]</a>
              <a href="author.html#31831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/11/2013 9:45AM, Simon MacMullen wrote:
&gt;<i> Hmm, the stats DB was more or less rewritten between 3.0.x and 3.1.0 (to
</I>&gt;<i> keep stats histories). If there's a memory leak in there I'd very much
</I>&gt;<i> like to get to the bottom of it.
</I>
Of course the other possibility is that the stats DB is simply 
overwhelmed with work and unable to keep up. It's supposed to start 
dropping incoming stats messages in this situation, but maybe it isn't. 
To determine if this is the case, look at:

rabbitmqctl eval 'process_info(global:whereis_name(rabbit_mgmt_db), 
memory).'

- and if the number that comes back looks like it would account for most 
of the memory used, then that is likely to be the problem. In that case 
you can slow down stats event emission by changing 
collect_statistics_interval (see <A HREF="http://www.rabbitmq.com/configure.html">http://www.rabbitmq.com/configure.html</A>) 
and / or disable fine-grained stats as I mentioned in the previous message.

Cheers, Simon

-- 
Simon MacMullen
RabbitMQ, Pivotal
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031830.html">[rabbitmq-discuss] Stats node getting slow
</A></li>
	<LI>Next message: <A HREF="031844.html">[rabbitmq-discuss] Stats node getting slow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31831">[ date ]</a>
              <a href="thread.html#31831">[ thread ]</a>
              <a href="subject.html#31831">[ subject ]</a>
              <a href="author.html#31831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
