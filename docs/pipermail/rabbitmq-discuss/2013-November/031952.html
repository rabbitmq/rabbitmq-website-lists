<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] Queries regarding rabbitmq-C APIs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queries%20regarding%20rabbitmq-C%20APIs&In-Reply-To=%3CCAAt2poKhRX_2VXHDMur7XRCR38eV7nRxi-3OrmjBbGVmjoeNag%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031927.html">
   <LINK REL="Next"  HREF="031939.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] Queries regarding rabbitmq-C APIs</H1>
    <B>Alan Antonuk</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20Queries%20regarding%20rabbitmq-C%20APIs&In-Reply-To=%3CCAAt2poKhRX_2VXHDMur7XRCR38eV7nRxi-3OrmjBbGVmjoeNag%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] Queries regarding rabbitmq-C APIs">alan.antonuk at gmail.com
       </A><BR>
    <I>Fri Nov 15 05:27:14 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031927.html">[rabbitmq-discuss] Queries regarding rabbitmq-C APIs
</A></li>
        <LI>Next message: <A HREF="031939.html">[rabbitmq-discuss] How should the client react if there are no	servers running?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31952">[ date ]</a>
              <a href="thread.html#31952">[ thread ]</a>
              <a href="subject.html#31952">[ subject ]</a>
              <a href="author.html#31952">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The status codes were introduced in v0.4.0 of the library. Given you're
also using SSL which was also introduced in v0.4.0, I'm guessing you're
using that version of the library.  I would highly encourage you to upgrade
to v0.4.1 as there are some potentially serious bugs that are fixed as of
that version.

If you're using an SSL connection, then yes, if you pull the network cable,
it is possible to get an AMQP_STATUS_SSL_ERROR.  As for the
AMQP_STATUS_TIMEOUT, a possibility is that the socket times out before the
OS informs rabbitmq-c that the socket has been closed because the network
is no longer available. If you were to re-try the same call after getting
an AMQP_STATUS_TIMEOUT what error-code is returned?

-Alan


On Wed, Nov 13, 2013 at 9:54 PM, Lothe Shashank &lt;
<A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">Shashank.Lothe at techmahindra.com</A>&gt; wrote:

&gt;<i>  Alan,
</I>&gt;<i>
</I>&gt;<i> For the following query I tried testing the network cable pull out
</I>&gt;<i> scenario again. However I noticed that the listner API
</I>&gt;<i> amqp_simple_wait_frame_noblock returns AMQP_STATUS_SSL_ERROR or
</I>&gt;<i> AMQP_STATUS_TIMEOUT and not the AMQP_STATUS_SOCKET_CLOSED or
</I>&gt;<i> AMQP_STATUS_SOCKET_ERROR as mentioned by you. I am using 0.3.0 of
</I>&gt;<i> rabbitmq-c library and AMQP_STATUS_SOCKET_CLOSED macro is not present in
</I>&gt;<i> amqp.h.
</I>&gt;<i>
</I>&gt;<i> Could you kindly confirm the return code of amqp_simple_wait_frame_noblock
</I>&gt;<i> when network cable is pulled out? How can I handle network cable pull out
</I>&gt;<i> scenario in my listner program?
</I>&gt;<i>
</I>&gt;<i> I have also noticed that if two listner threads with different amqp
</I>&gt;<i> connections are running and network cable is pulled out one listner is
</I>&gt;<i> receiving AMQP_STATUS_SSL_ERROR and another is receiving AMQP_STATUS_TIMEOUT
</I>&gt;<i> as a return value.
</I>&gt;<i>
</I>&gt;<i> *Older post for your reference:*
</I>&gt;<i>
</I>&gt;<i> [Shashank Query] Is there is a way to check from rabbitmq-c library
</I>&gt;<i> function, if the network cable is pulled out?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  [Alan Reply] As far as I know, there isn't a portable socket API for
</I>&gt;<i> detecting a network cable from being pulled. The best we can do is to
</I>&gt;<i> detect when the TCP connection has been closed. All rabbitmq-c functions
</I>&gt;<i> that cause a read or write to the socket check the return from these
</I>&gt;<i> functions to detect the socket being closed unexpectedly. If the socket is
</I>&gt;<i> closed the client will receive an AMQP_STATUS_SOCKET_CLOSED or
</I>&gt;<i> AMQP_STATUS_SOCKET_ERROR as a return value.
</I>&gt;<i>
</I>&gt;<i> Thanks and regards,
</I>&gt;<i> Shashank
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> DISCLAIMER:
</I>&gt;<i> This email (including any attachments) is intended for the sole use of the
</I>&gt;<i> intended recipient/s and may contain material that is CONFIDENTIAL AND
</I>&gt;<i> PRIVATE COMPANY INFORMATION. Any review or reliance by others or copying or
</I>&gt;<i> distribution or forwarding of any or all of the contents in this message is
</I>&gt;<i> STRICTLY PROHIBITED. If you are not the intended recipient, please contact
</I>&gt;<i> the sender by email and delete all copies; your cooperation in this regard
</I>&gt;<i> is appreciated.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131114/252dc122/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131114/252dc122/attachment.htm</A>&gt;
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031927.html">[rabbitmq-discuss] Queries regarding rabbitmq-C APIs
</A></li>
	<LI>Next message: <A HREF="031939.html">[rabbitmq-discuss] How should the client react if there are no	servers running?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31952">[ date ]</a>
              <a href="thread.html#31952">[ thread ]</a>
              <a href="subject.html#31952">[ subject ]</a>
              <a href="author.html#31952">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
