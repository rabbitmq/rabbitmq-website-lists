<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BANNOUNCEMENT%5D%20Introducing%20Lyra%3A%20A%20High%0A%20Availability%20RabbitMQ%20Client&In-Reply-To=%3C5273B53A.4050404%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031586.html">
   <LINK REL="Next"  HREF="031592.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client</H1>
    <B>Matthias Radestock</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20%5BANNOUNCEMENT%5D%20Introducing%20Lyra%3A%20A%20High%0A%20Availability%20RabbitMQ%20Client&In-Reply-To=%3C5273B53A.4050404%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client">matthias at rabbitmq.com
       </A><BR>
    <I>Fri Nov  1 14:05:46 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031586.html">[rabbitmq-discuss] 2.8.5: high cpu usage on return from standby
</A></li>
        <LI>Next message: <A HREF="031592.html">[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31583">[ date ]</a>
              <a href="thread.html#31583">[ thread ]</a>
              <a href="subject.html#31583">[ subject ]</a>
              <a href="author.html#31583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jonathan,

On 31/10/13 18:54, Jonathan Halterman wrote:
&gt;<i> I don't suppose you're open to enhancing the amqp-client API to include
</I>&gt;<i> something like this? :) One possible change would be the inclusion of a
</I>&gt;<i> VersionedDeliveryTag like object in the Envelope along with some
</I>&gt;<i> corresponding basic ack/nack/reject(VersionedDeliveryTag) methods on the
</I>&gt;<i> Channel interface. The channel's &quot;version&quot; would just be another piece
</I>&gt;<i> of meta information that the user could specify.
</I>
Such an API extension doesn't really make sense in the existing client. 
Plus, in order to take advantage of it client code would have to change, 
so you might as well bite the bullet and design a recovery-enabled API 
that wraps the existing API.

&gt;<i> One other idea - Brett Cameron suggested tracking the last delivery tag
</I>&gt;<i> for each channel and dropping any ack/nack/reject requests for delivery
</I>&gt;<i> tags greater than that. If a channel is recovered, the last delivery tag
</I>&gt;<i> for the new channel will most likely be less than any delivery tags for
</I>&gt;<i> messages consumed on the previously closed channel. This is obviously
</I>&gt;<i> not foolproof, but it's not a bad start.
</I>
That's better than the present situation, I suppose, but doesn't catch 
the more dangerous of the two ways things can go wrong, i.e. when the 
old delivery tags *are* in range of the new ones then the wrong messages 
get acknowledged.

Matthias.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031586.html">[rabbitmq-discuss] 2.8.5: high cpu usage on return from standby
</A></li>
	<LI>Next message: <A HREF="031592.html">[rabbitmq-discuss] [ANNOUNCEMENT] Introducing Lyra: A High Availability RabbitMQ Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31583">[ date ]</a>
              <a href="thread.html#31583">[ thread ]</a>
              <a href="subject.html#31583">[ subject ]</a>
              <a href="author.html#31583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
