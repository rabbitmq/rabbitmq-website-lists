<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] High load average on mirrored nodes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20High%20load%20average%20on%20mirrored%20nodes&In-Reply-To=%3C528F3559.2060704%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032073.html">
   <LINK REL="Next"  HREF="032080.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] High load average on mirrored nodes</H1>
    <B>Simon MacMullen</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20High%20load%20average%20on%20mirrored%20nodes&In-Reply-To=%3C528F3559.2060704%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] High load average on mirrored nodes">simon at rabbitmq.com
       </A><BR>
    <I>Fri Nov 22 10:43:37 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032073.html">[rabbitmq-discuss] High load average on mirrored nodes
</A></li>
        <LI>Next message: <A HREF="032080.html">[rabbitmq-discuss] mgt ui filter is not a regex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32075">[ date ]</a>
              <a href="thread.html#32075">[ thread ]</a>
              <a href="subject.html#32075">[ subject ]</a>
              <a href="author.html#32075">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Depending on how much higher &quot;higher&quot; means, this could be normal. Slave 
queues in fact do slightly more work than master queues (they still need 
to accept every publish and (almost) deliver every delivery and keep 
track of every ack (sure, they don't actually send the message to the 
client, but that's quite cheap).

But they also need to do some additional book keeping on publish to 
ensure messages aren't lost when the master dies.

So how much higher is higher?

Cheers, Simon

On 22/11/2013 04:06, <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">barshow at dropbox.com</A> wrote:
&gt;<i> I am running a three node cluster all on the same type of hardware.  All
</I>&gt;<i> of my consumers and publisher connect to one node we have assigned as
</I>&gt;<i> the master node lets call it rabbit-1.  This is also the master node for
</I>&gt;<i> all of our queues.  All nodes are disc nodes and all queues are HA to
</I>&gt;<i> all nodes.  And all messages are published with deliveryMode 2.  The
</I>&gt;<i> load average, all the metrics and performance of rabbit-1 are what I
</I>&gt;<i> would expect.  But the load average of the other boxes, that have no
</I>&gt;<i> connections (publishers or consumers) and are not master nodes to
</I>&gt;<i> anything have a load average that is higher than rabbit-1.  At first I
</I>&gt;<i> blamed the hardware or configuration or something, but it seems pretty
</I>&gt;<i> consistent across all our clusters.
</I>&gt;<i>
</I>&gt;<i> So my question is do nodes that have durable queues mirrored to them but
</I>&gt;<i> are not the master nodes have any characteristics that could cause this?
</I>&gt;<i>   Or should I keep digging?
</I>&gt;<i>
</I>&gt;<i> Running Ubuntu 12.04.2 with raid0 xfs disk.  Rabbit is the only thing on
</I>&gt;<i> these boxes.  Rabbit 3.1.5.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks for your time!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>&gt;<i>
</I>
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032073.html">[rabbitmq-discuss] High load average on mirrored nodes
</A></li>
	<LI>Next message: <A HREF="032080.html">[rabbitmq-discuss] mgt ui filter is not a regex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32075">[ date ]</a>
              <a href="thread.html#32075">[ thread ]</a>
              <a href="subject.html#32075">[ subject ]</a>
              <a href="author.html#32075">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
