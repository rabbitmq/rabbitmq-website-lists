<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] SASL authentication HTTP (management console	/ REST API)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SASL%20authentication%20HTTP%20%28management%20console%0A%09/%20REST%20API%29&In-Reply-To=%3C3AFCEA05-ED0F-4676-8B1F-64D4A549E10B%40rabbitmq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031825.html">
   <LINK REL="Next"  HREF="031826.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] SASL authentication HTTP (management console	/ REST API)</H1>
    <B>Tim Watson</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20SASL%20authentication%20HTTP%20%28management%20console%0A%09/%20REST%20API%29&In-Reply-To=%3C3AFCEA05-ED0F-4676-8B1F-64D4A549E10B%40rabbitmq.com%3E"
       TITLE="[rabbitmq-discuss] SASL authentication HTTP (management console	/ REST API)">tim at rabbitmq.com
       </A><BR>
    <I>Tue Nov 12 10:00:31 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031825.html">[rabbitmq-discuss] SASL authentication HTTP (management console /	REST API)
</A></li>
        <LI>Next message: <A HREF="031826.html">[rabbitmq-discuss] sasl authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31869">[ date ]</a>
              <a href="thread.html#31869">[ thread ]</a>
              <a href="subject.html#31869">[ subject ]</a>
              <a href="author.html#31869">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>See <A HREF="http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_2_1/priv/www/api/index.html,">http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_2_1/priv/www/api/index.html,</A> specifically this part:

    &quot;all URIs will serve only resources of type application/json, and will require HTTP basic authentication&quot;

So you've got the TLS layer (i.e., SSL) is using a cert, and that's what the configuration in the rabbitmq_management section is for. Plus, you've also got HTTP (application) layer authentication, which requires basic auth. The cert is only used for fire traffic, not AAA. Hope that makes sense.

Cheers,
Tim

On 10 Nov 2013, at 15:05, Aryan S wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I am trying to get the HTTP API (REST calls ) and the management console to work without prompting for user name and password.
</I>&gt;<i> 
</I>&gt;<i> 1.) Now first thing I am trying is accessing :- <A HREF="https://10.31.52.204:15672">https://10.31.52.204:15672</A> from my browser ( I have imported the certificates in the browser.)
</I>&gt;<i> 
</I>&gt;<i> I get a prompt to select the certificate and after that it takes me to the username/password page. Can you help me in understanding what I am missing ? Shouldnt' it authenticate based on the client certificate and take me in or fail (since I have fail_if_no_peer_cert, true &amp; verify, verify_peer)
</I>&gt;<i> 
</I>&gt;<i> 2.) Even for the REST API calls , say for example -  <A HREF="https://10.31.52.204:15672/api/users,">https://10.31.52.204:15672/api/users,</A> I still get a prompt for username and password. How do I prevent this ?
</I>&gt;<i> 
</I>&gt;<i> (Basically I am trying the last part in <A HREF="http://www.rabbitmq.com/mochiweb.html">http://www.rabbitmq.com/mochiweb.html</A>)
</I>&gt;<i> 
</I>&gt;<i> The following is my rabbitmq.config file : -
</I>&gt;<i> 
</I>&gt;<i>   {rabbit, [
</I>&gt;<i>     {heartbeat, 30},
</I>&gt;<i>     {auth_mechanisms,     ['EXTERNAL']},
</I>&gt;<i>     {ssl_listeners,       [15671]},
</I>&gt;<i>     {ssl_cert_login_from, common_name},
</I>&gt;<i>     {ssl_options, [{cacertfile, &quot;/home/test/certificates/cert/testca/cacert.pem&quot;},
</I>&gt;<i>                     {certfile, &quot;/home/test/certificates/cert/server/cert.pem&quot;},
</I>&gt;<i>                     {keyfile, &quot;/home/test/certificates/cert/server/key.pem&quot;},
</I>&gt;<i>                     {verify, verify_peer},
</I>&gt;<i>                     {fail_if_no_peer_cert, true}]}
</I>&gt;<i>            ]
</I>&gt;<i>   },
</I>&gt;<i> {rabbitmq_management,
</I>&gt;<i>   [{listener, [{port, 15672},
</I>&gt;<i>                {ssl,  true},
</I>&gt;<i>                {ssl_opts, [{cacertfile, &quot;/home/test/certificates/cert/testca/cacert.pem&quot;},
</I>&gt;<i>                            {certfile,   &quot;/home/test/certificates/cert/server/cert.pem&quot;},
</I>&gt;<i>                            {keyfile,    &quot;/home/test/certificates/cert/server/key.pem&quot;},
</I>&gt;<i>                            {verify, verify_peer},
</I>&gt;<i>                            {fail_if_no_peer_cert, true}]}
</I>&gt;<i>               ]}
</I>&gt;<i>   ]}
</I>&gt;<i> ].
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Aryan
</I>&gt;<i> _______________________________________________
</I>&gt;<i> rabbitmq-discuss mailing list
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">rabbitmq-discuss at lists.rabbitmq.com</A>
</I>&gt;<i> <A HREF="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131112/17bda1db/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131112/17bda1db/attachment.htm</A>&gt;
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031825.html">[rabbitmq-discuss] SASL authentication HTTP (management console /	REST API)
</A></li>
	<LI>Next message: <A HREF="031826.html">[rabbitmq-discuss] sasl authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31869">[ date ]</a>
              <a href="thread.html#31869">[ thread ]</a>
              <a href="subject.html#31869">[ subject ]</a>
              <a href="author.html#31869">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
