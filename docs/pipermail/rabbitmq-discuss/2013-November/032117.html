<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [rabbitmq-discuss] RabbitMQ second-time message delivery after	service restart
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20second-time%20message%20delivery%20after%0A%09service%20restart&In-Reply-To=%3CCANvSZQ-QOzFGGTpZjs-8BCBKNCSTJ%2BYp9uS6z%2BAAZeTGfepL8A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032112.html">
   <LINK REL="Next"  HREF="032118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[rabbitmq-discuss] RabbitMQ second-time message delivery after	service restart</H1>
    <B>Thilo-Alexander Ginkel</B> 
    <A HREF="mailto:rabbitmq-discuss%40lists.rabbitmq.com?Subject=Re%3A%20%5Brabbitmq-discuss%5D%20RabbitMQ%20second-time%20message%20delivery%20after%0A%09service%20restart&In-Reply-To=%3CCANvSZQ-QOzFGGTpZjs-8BCBKNCSTJ%2BYp9uS6z%2BAAZeTGfepL8A%40mail.gmail.com%3E"
       TITLE="[rabbitmq-discuss] RabbitMQ second-time message delivery after	service restart">thilo at ginkel.com
       </A><BR>
    <I>Mon Nov 25 10:37:53 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="032112.html">[rabbitmq-discuss] ANN Tracing for MongoDB is released
</A></li>
        <LI>Next message: <A HREF="032118.html">[rabbitmq-discuss] RabbitMQ second-time message delivery after service restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32117">[ date ]</a>
              <a href="thread.html#32117">[ thread ]</a>
              <a href="subject.html#32117">[ subject ]</a>
              <a href="author.html#32117">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

over the weekend we encountered a strange RabbitMQ issue, for which we are
still trying to figure out what happened and why it happened. Our setup
uses a single RabbitMQ instance (version 2.8.1), which serves a bunch of
queues, most of which are persistent.

The RabbitMQ instance was running since May 2013 during which it processed
&gt;<i> 250.000 messages without any issues. Over the weekend we had to restart
</I>our servers. After the server hosting the RabbitMQ instance came back up,
RabbitMQ all of a sudden started re-delivering all messages that were
processed in one of our persistent queues since May.

AFAIK, all messages had been properly ACKed before, so effectively RabbitMQ
delivered these messages twice. They seem to be sitting
in /var/lib/rabbitmq/mnesia/rabbit@&lt;server&gt;/msg_store_persistent, though,
which is around 0.5 GB in size on the affected server.

Any idea what may have happened?

Thanks,
Thilo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131125/bef5d82c/attachment.htm">http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/attachments/20131125/bef5d82c/attachment.htm</A>&gt;
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032112.html">[rabbitmq-discuss] ANN Tracing for MongoDB is released
</A></li>
	<LI>Next message: <A HREF="032118.html">[rabbitmq-discuss] RabbitMQ second-time message delivery after service restart
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32117">[ date ]</a>
              <a href="thread.html#32117">[ thread ]</a>
              <a href="subject.html#32117">[ subject ]</a>
              <a href="author.html#32117">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.rabbitmq.com/cgi-bin/mailman/listinfo/rabbitmq-discuss">More information about the rabbitmq-discuss
mailing list</a><br>
</body></html>
